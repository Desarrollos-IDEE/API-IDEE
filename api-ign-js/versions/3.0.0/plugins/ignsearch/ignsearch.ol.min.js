!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(e,t){e.exports='<div id="div-contenedor" class="m-control m-container m-ignsearch" title="">\n    <div class="search-panel">\n        <input type="text" id="m-ignsearch-search-input" class="m-input-search" placeholder="Dirección, topónimo o Ref. catastral (14 dig.)" />\n        <button id="m-ignsearch-locate-button" title="Obtener dirección en un punto del mapa">\n            <span class="g-plugin-ignsearch-localizacion3" />\n        </button>\n        <button id="m-ignsearch-clear-button" class="m-button-limpiar" title="Borrar resultados de la búsqueda">\n            <span class="g-cartografia-papelera" />\n        </button>\n    </div>\n    <div id="m-ignsearch-results">\n        \x3c!-- Here goes the list of search results --\x3e\n    </div>\n</div>'},function(e,t){e.exports='<ul id="m-ignsearch-results-list">\n    {{#each places}}\n        {{#if this.address}}\n            {{#printType this.type this.address this.id this.municipality}}\n            {{/printType}}\n        {{else}}\n            {{#printType this.type this.title this.id this.municipality}}\n            {{/printType}}\n        {{/if}}\n    {{/each}}\n</ul>'},function(e,t,o){},function(e,t,o){},function(e,t,o){"use strict";o.r(t);o(2),o(3);function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,o){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,o){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(o):r.value}})(e,t,o||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l,u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).apply(this,arguments))}var o,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,M.impl.Control),o=t,(n=[{key:"addTo",value:function(e,o){a(s(t.prototype),"addTo",this).call(this,e,o)}},{key:"setScale",value:function(e){var t=[559082264.0287178,279541132.0143589,139770566.0071794,69885283.00358972,34942641.50179486,17471320.75089743,8735660.375448715,4367830.187724357,2183915.093862179,1091957.546931089,545978.7734655447,272989.3867327723,136494.6933663862,68247.34668319309,34123.67334159654,17061.83667079827,8530.918335399136,4265.459167699568,2132.729583849784],o=t.reduce(function(t,o){return Math.abs(o-e)<Math.abs(t-e)?o:t}),n=this.facadeMap_.getMapImpl().getView(),r=n.getMaxResolution()/Math.pow(2,t.indexOf(o));n.setResolution(r)}},{key:"reproject",value:function(e,t,o){return ol.proj.getTransform(t,o)(e)}}])&&r(o.prototype,n),l&&r(o,l),t}(),p=o(0),d=o.n(p),h=o(1),f=o.n(h),y=function(){Handlebars.registerHelper("toUpperCase",function(e){return e.toUpperCase()}),Handlebars.registerHelper("ifCond",function(e,t,o,n){switch(t){case"===":return e===o?n.fn(void 0):n.inverse(void 0);case"!==":return e!==o?n.fn(void 0):n.inverse(void 0);case"<":return e<o?n.fn(void 0):n.inverse(void 0);case"<=":return e<=o?n.fn(void 0):n.inverse(void 0);case">":return e>o?n.fn(void 0):n.inverse(void 0);case">=":return e>=o?n.fn(void 0):n.inverse(void 0);case"&&":return e&&o?n.fn(void 0):n.inverse(void 0);case"||":return e||o?n.fn(void 0):n.inverse(void 0);default:return n.inverse(void 0)}}),Handlebars.registerHelper("printType",function(e,t,o,n){var r="<li id=".concat(o,'><span id="info">').concat(t.toUpperCase(),"</span>");return void 0!==n&&(r+=" en ".concat(n)),r})},v=["Estado","Comunidad autónoma","Ciudad con estatuto de autonomía","Provincia","Municipio","poblacion","EATIM","Isla administrativa","Comarca administrativa","Jurisdicción","Capital de municipio","Capital de EATIM","Núcleos de población","Entidad colectiva","Entidad menor de población","Distrito municipal","Entidad singular","Construcción/instalación abierta","Edificación","Vértice Geodésico","Hitos de demarcación territorial","Hitos en vías de comunicación","Alineación montañosa","Montaña","Paso de montaña","Llanura","Depresión","Vertientes","Comarca geográfica","Paraje","Elemento puntual del paisaje","Saliente costero","Playa","Isla","Otro relieve costero","Parque Nacional y Natural","Espacio protegido restante","Aeropuerto","Aeródromo","Pista de aviación y helipuerto","Puerto de Estado","Instalación portuaria","Camino y vía pecuaria","Ferrocarril","Curso natural de agua","Masa de agua","Curso artificial de agua","Embalse","Hidrónimo puntual","Glaciares","Mar","Entrante costero y estrecho marítimo","Relieve submarino"];function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"gn",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"municipio,poblacion",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"es",a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,p=arguments.length>8?arguments[8]:void 0,d=arguments.length>9?arguments[9]:void 0,h=!(arguments.length>10&&void 0!==arguments[10])||arguments[10],f=arguments.length>11?arguments[11]:void 0,m=arguments.length>12?arguments[12]:void 0,g=arguments.length>13?arguments[13]:void 0,w=arguments.length>14?arguments[14]:void 0,P=arguments.length>15&&void 0!==arguments[15]?arguments[15]:v;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M.utils.isUndefined(u)&&M.exception("La implementación usada no puede crear controles IGNSearchControl");var k=new u;return(e=b(this,S(t).call(this,k,"IGNSearch"))).servicesToSearch=o,e.maxResults=n,e.noProcess=r,e.countryCode=i,e.urlCandidates=a,e.urlFind=s,e.urlReverse=c,e.urlPrefix=l,e.urlAssistant=p,e.urlDispatcher=d,e.resultVisibility_=h,e.nomenclatorSearchType=P,e.reverse=f,e.reverseActivated=!1,e.locationID=m,e.requestStreet=g,e.geocoderCoords=w,y(),e}var o,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,M.Control),o=t,(n=[{key:"createView",value:function(e){var t=this;return this.map=e,new Promise(function(o){var n=M.template.compileSync(d.a);t.html=n,t.resultsBox=n.querySelector("#m-ignsearch-results"),t.searchInput=t.html.querySelector("#m-ignsearch-search-input"),n.querySelector("#m-ignsearch-clear-button").addEventListener("click",t.clearResultsAndGeometry.bind(t)),n.querySelector("#m-ignsearch-search-input").addEventListener("keyup",function(e){return t.createTimeout(e)}),n.querySelector("#m-ignsearch-search-input").addEventListener("keydown",function(){clearTimeout(l)}),n.querySelector("#m-ignsearch-search-input").addEventListener("keydown",function(){clearTimeout(l)}),n.querySelector("#m-ignsearch-locate-button").addEventListener("click",t.activateDeactivateReverse.bind(t)),document.querySelector(".ign-search-panel>.m-panel-btn").addEventListener("click",t.clearResults.bind(t)),t.clickReverseEvent=t.map.on(M.evt.CLICK,function(e){return t.showReversePopUp(e)}),t.changePlaceholder(),t.reverse||(n.querySelector("#m-ignsearch-locate-button").style.display="none"),t.on(M.evt.ADDED_TO_MAP,function(){if(t.locationID&&t.locationID.length>0&&(t.point=new M.style.Point({radius:5,icon:{form:"none",class:"g-cartografia-pin",radius:12,rotation:0,rotate:!1,offset:[0,-12],color:"#f00",opacity:1}}),t.simple=new M.style.Polygon({fill:{color:"black",opacity:0}}),t.drawNomenclatorResult(t.locationID,!1)),t.requestStreet&&t.requestStreet.length>0&&(M.proxy(!1),M.remote.get(t.requestStreet).then(function(e){var o=e.text.substring(9,e.text.length-1);t.map.removeLayers(t.clickedElementLayer);var n=JSON.parse(o);if(n.geometry.coordinates=t.fixCoordinatesPath(n),t.coordinates="".concat(n.properties.lat,", ").concat(n.properties.lng),t.clickedElementLayer=new M.layer.GeoJSON({name:"Resultado búsquedas",source:{type:"FeatureCollection",features:[n]}}),t.clickedElementLayer.displayInLayerSwitcher=!1,"Point"===n.geometry.type&&t.clickedElementLayer.setStyle(t.point),t.resultVisibility_||t.clickedElementLayer.setStyle(t.simple),t.map.addLayers(t.clickedElementLayer),"callejero"===n.properties.type||"portal"===n.properties.type){var r=t.createFullAddress(n.properties),i=[n.properties.lat,n.properties.lng],a=n.properties.state;t.showSearchPopUp(r,i,a,{fake:!0})}M.proxy(!0)})),t.geocoderCoords&&2===t.geocoderCoords.length){t.activateDeactivateReverse();var o=t.getImpl().reproject(t.geocoderCoords,"EPSG:4326",e.getProjection().code);t.showReversePopUp({coord:o,fake:!0})}}),o(n)})}},{key:"activateDeactivateReverse",value:function(){this.reverseActivated?(this.reverseActivated=!1,document.querySelector("#m-ignsearch-locate-button span").style.color="#7A7A73"):(this.reverseActivated=!0,document.querySelector("#m-ignsearch-locate-button span").style.color="#71a7d3")}},{key:"showReversePopUp",value:function(e){var t=this;if(this.reverseActivated){var o=this.map.getProjection().code,n=this.getImpl().reproject([e.coord[0],e.coord[1]],o,"EPSG:4258"),r="lon=".concat(n[0],"&lat=").concat(n[1]),i="".concat(this.urlReverse,"?").concat(r),a=e.coord;this.geocoderCoords=n;var s=[n[1],n[0]],c="";M.remote.get(i).then(function(o){if(null!==o.text){var n=JSON.parse(o.text);c=t.createFullAddress(n)}else c="No existe dirección asociada para esta ubicación.";t.showPopUp(c,a,s,null,!0,e)})}}},{key:"createTimeout",value:function(e){var t=this;clearTimeout(l),l=setTimeout(function(){return t.searchInputValue(e)},500)}},{key:"getActivationButton",value:function(e){return e.querySelector(".m-ignsearch button")}},{key:"equals",value:function(e){return e instanceof t}},{key:"searchInputValue",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.target.value.replace(","," ");if(this.searchValue=n,n.length<=2)this.resultsBox.innerHTML="";else{this.resultsBox.innerHTML="",this.resultsBox.classList.add("g-cartografia-spinner"),this.resultsBox.style.fontSize="24px",this.allCandidates=[];/[+-]?\d+\.\d+(\s|,|(,\s))[+-]?\d+\.\d+/.test(n)?this.searchCoordinates(n):this.getNomenclatorData(n,this.allCandidates).then(function(){t.getCandidatesData(n,t.allCandidates).then(function(){t.resultsBox.innerHTML="";var e=M.template.compileSync(f.a,{vars:{places:t.allCandidates}}),n=e.querySelectorAll("li");if(n.forEach(function(e){e.addEventListener("click",function(){t.goToLocation(e)})}),!0===o&&n.length>0&&n.item(0).click(),t.resultsBox.classList.remove("g-cartografia-spinner"),t.resultsBox.style.fontSize="1em",t.resultsBox.appendChild(e),0===t.allCandidates.length){var r=document.createTextNode("No se encuentran resultados para esta petición.");t.resultsBox.appendChild(r)}})})}}},{key:"drawGeocoderResult",value:function(e){this.map.removeLayers(this.clickedElementLayer);var t=JSON.parse(e);if(t.geometry.coordinates=this.fixCoordinatesPath(t),this.coordinates="".concat(t.properties.lat,", ").concat(t.properties.lng),this.clickedElementLayer=new M.layer.GeoJSON({name:"Resultado búsquedas",source:{type:"FeatureCollection",features:[t]}}),this.clickedElementLayer.displayInLayerSwitcher=!1,"Point"===t.geometry.type&&this.clickedElementLayer.setStyle(this.point),this.resultVisibility_||this.clickedElementLayer.setStyle(this.simple),this.map.addLayers(this.clickedElementLayer),this.zoomInLocation("g",t.geometry.type),"callejero"===t.properties.type||"portal"===t.properties.type){var o=this.createFullAddress(t.properties),n=[t.properties.lat,t.properties.lng],r=t.properties.state;this.showSearchPopUp(o,n,r)}}},{key:"createFullAddress",value:function(e){var t=null===e.tip_via||void 0===e.tip_via?"":e.tip_via,o=null===e.address||void 0===e.address?"":e.address,n=null===e.portalNumber||void 0===e.portalNumber||0===e.portalNumber?"":e.portalNumber;return"".concat(t," ").concat(o," ").concat(n)}},{key:"drawNomenclatorResult",value:function(e){var t=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.requestStreet="",this.requestPlace=M.utils.addParameters(this.urlDispatcher,{request:"OpenQuerySource",query:'<ogc:Filter><ogc:FeatureId fid="'.concat(e,'"/></ogc:Filter>'),sourcename:"".concat(this.urlPrefix,"communicationsPoolServlet/sourceAccessWFS-INSPIRE-NGBE.rdf"),outputformat:"application/json"}),this.locationID=e,M.remote.get(this.requestPlace).then(function(e){var n=JSON.parse(e.text).results[0].location,r=JSON.parse(e.text).results[0].title,i=n.split(" "),a=parseFloat(i[0]),s=parseFloat(i[1]);t.map.removeLayers(t.clickedElementLayer);var c={name:"Resultado búsquedas",source:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[s,a]},properties:{name:r}}]}};t.clickedElementLayer=new M.layer.GeoJSON(c),t.clickedElementLayer.displayInLayerSwitcher=!1,t.clickedElementLayer.setStyle(t.point),t.resultVisibility_||t.clickedElementLayer.setStyle(t.simple),t.map.addLayers(t.clickedElementLayer),!0===o&&t.zoomInLocation("n","Point")})}},{key:"getCandidatesData",value:function(e,t){var o=this,n=window.encodeURIComponent(e);return new Promise(function(e){if("n"!==o.servicesToSearch){var r="q=".concat(n,"&limit=").concat(o.maxResults,"&no_process=").concat(o.noProcess);r+="&countrycode=".concat(o.countryCode,"&autocancel='true'");var i="".concat(o.urlCandidates,"?").concat(r);M.remote.get(i).then(function(o){for(var n=JSON.parse(o.text.substring(9,o.text.length-1)),r=0;r<n.length;r+=1)t.push(n[r]);e()})}else e()})}},{key:"getNomenclatorData",value:function(e,t){var o=this,n=window.encodeURIComponent(e);return new Promise(function(e){if("g"!==o.servicesToSearch){var r="maxresults=".concat(o.maxResults,"&name_equals=").concat(n),i="".concat(o.urlAssistant,"?").concat(r);M.remote.get(i).then(function(n){for(var r=(""!==n.text?JSON.parse(n.text):{results:[]}).results,i=0;i<r.length;i+=1)o.nomenclatorSearchType.indexOf(r[i].type)>=0&&t.push(r[i]);for(var a=0;a<t.length;a+=1)if("Núcleos de población"===t[a].type){var s=t.splice(a,1);t.splice(0,0,s)}e()})}else e()})}},{key:"getFindData",value:function(e,t){var o=this;return new Promise(function(n){var r,i,a,s,c;if(t.forEach(function(t){e.getAttribute("id")===t.id&&(r="&id=".concat(t.id),i="&type=".concat(t.type),a=0!==t.portalNumber&&void 0!==t.portalNumber?"&portal=".concat(t.portalNumber):"",s=""!==t.tip_via?"&tip_via=".concat(t.tip_via):"")}),c=e.innerHTML,e.innerHTML.includes("(")){var l=e.innerHTML.indexOf("(");c=e.innerHTML.substring(0,l)}var u="".concat(i).concat(s).concat(r).concat(a,"&outputformat=geojson"),p="".concat(o.urlFind,"?q=").concat(c).concat(u);o.requestStreet=p,o.locationID="",M.proxy(!1),M.remote.get(p).then(function(e){var t=e.text.substring(9,e.text.length-1);n(t)}),M.proxy(!0)})}},{key:"goToLocation",value:function(e){var t=this;this.currentElement=e;var o=this.findClickedItem(e,this.allCandidates);this.createGeometryStyles(),Object.prototype.hasOwnProperty.call(o,"address")?this.getFindData(e,this.allCandidates).then(function(e){t.drawGeocoderResult(e)}):this.drawNomenclatorResult(o.id),this.resultsBox.innerHTML=""}},{key:"zoomInLocation",value:function(e,t){var o=this;this.resultsList=document.getElementById("m-ignsearch-results-list"),this.clickedElementLayer instanceof M.layer.Vector&&this.clickedElementLayer.calculateMaxExtent().then(function(n){o.map.setBbox(n),"n"!==e&&"Point"!==t&&"LineString"!==t&&"MultiLineString"!==t||o.setScale(17061),o.fire("ignsearch:entityFound",[n])})}},{key:"findClickedItem",value:function(e,t){return t.filter(function(t){return t.id===e.getAttribute("id")})[0]}},{key:"fixCoordinatesPath",value:function(e){return"Point"===e.geometry.type?e.geometry.coordinates[0][0]:"MultiPolygon"===e.geometry.type?[e.geometry.coordinates]:"LineString"===e.geometry.type?e.geometry.coordinates[0]:e.geometry.coordinates}},{key:"searchCoordinates",value:function(e){return new Promise(function(e){e()})}},{key:"clearResults",value:function(){this.searchInput.value="",this.resultsBox.innerHTML="",this.searchValue=""}},{key:"clearResultsAndGeometry",value:function(){this.clearResults(),void 0!==this.clickedElementLayer&&this.clickedElementLayer.setStyle(this.simple),this.map.removePopup(this.popup,[this.lng,this.lat])}},{key:"setResultVisibility",value:function(e){this.resultVisibility_=e}},{key:"changePlaceholder",value:function(){"g"===this.servicesToSearch?this.searchInput.placeholder="Dirección o Ref. catastral (14 díg.) ":"n"===this.servicesToSearch&&(this.searchInput.placeholder="Topónimo")}},{key:"createGeometryStyles",value:function(){this.point=new M.style.Point({radius:5,icon:{form:"none",class:"g-cartografia-pin",radius:12,rotation:0,rotate:!1,offset:[0,-12],color:"#f00",opacity:1}}),this.simple=new M.style.Polygon({fill:{color:"black",opacity:0}})}},{key:"showSearchPopUp",value:function(e,t,o){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.map.getProjection().code,a=this.getImpl().reproject([t[1],t[0]],"EPSG:4326",i);n=1!==o?"Dirección aproximada":"Dirección exacta",this.showPopUp(e,a,t,n,!1,r)}},{key:"showPopUp",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a={content:"",icon:"g-plugin-ignsearch-localizacion3"};if(null!==n&&(a.content+="<div><b>".concat(n,"</b></div>")),a.content+="<div>".concat(e,"</div>\n                <div class='ignsearch-popup'>Lat: ").concat(o[0],"</div>\n                <div class='ignsearch-popup'> Long: ").concat(o[1]," </div>"),this.map.getPopup()instanceof M.Popup&&!0===r)this.popup=this.map.getPopup(),this.popup.addTab(a);else{var s=new M.Popup({panMapIfOutOfView:!i.fake});s.addTab(a),this.map.addPopup(s,[t[0],t[1]]),this.popup=s}this.lat=t[1],this.lng=t[0]}},{key:"setScale",value:function(e){this.getImpl().setScale(e)}}])&&g(o.prototype,n),r&&g(o,r),t}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=x(this,_(t).call(this))).map_=null,o.controls_=[],o.servicesToSearch=e.servicesToSearch||"gn",o.maxResults=e.maxResults||10,o.noProcess=e.noProcess||"municipio,poblacion",o.countryCode=e.countryCode||"es",o.urlCandidates=e.urlCandidates||"https://www.cartociudad.es/geocoder/api/geocoder/candidatesJsonp",o.urlFind=e.urlFind||"https://www.cartociudad.es/geocoder/api/geocoder/findJsonp",o.urlReverse=e.urlReverse||"https://www.cartociudad.es/geocoder/api/geocoder/reverseGeocode",o.urlPrefix=e.urlPrefix||"http://www.idee.es/",o.urlAssistant=e.urlAssistant||"https://www.idee.es/communicationsPoolServlet/SearchAssistant",o.urlDispatcher=e.urlDispatcher||"https://www.idee.es/communicationsPoolServlet/Dispatcher",o.nomenclatorSearchType=e.nomenclatorSearchType,o.resultVisibility=e.resultVisibility||!0,o.isCollapsed=e.isCollapsed||!1,o.position=e.position||"TL",o.tooltip_=e.tooltip||"Búsqueda de lugares",o.reverse_=e.reverse||!1,o.locationID_=e.locationID&&e.locationID.replace(/\^/g,"&")||"",o.requestStreet_=e.requestStreet&&e.requestStreet.replace(/\^/g,"&")||"";var n=e.geocoderCoords;return M.utils.isString(n)&&(n=n.split(","),n=[Number.parseFloat(n[0]),Number.parseFloat(n[1])]),o.geocoderCoords_=n||[],o}var o,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,M.Plugin),o=t,(n=[{key:"addTo",value:function(e){var t=this;this.controls_.push(new P(this.servicesToSearch,this.maxResults,this.noProcess,this.countryCode,this.urlCandidates,this.urlFind,this.urlReverse,this.urlPrefix,this.urlAssistant,this.urlDispatcher,this.resultVisibility,this.reverse_,this.locationID_,this.requestStreet_,this.geocoderCoords_)),this.controls_[0].on("ignsearch:entityFound",function(e){t.fire("ignsearch:entityFound",[e])}),this.map_=e,this.panel_=new M.ui.Panel("panelIGNSearch",{collapsible:!0,position:M.ui.position[this.position],collapsed:this.isCollapsed,className:"ign-search-panel",tooltip:this.tooltip_}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_)}},{key:"setResultVisibility",value:function(e){this.controls_[0].setResultVisibility(e)}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.servicesToSearch,"*").concat(this.maxResults,"*").concat(this.noProcess,"*").concat(this.resultVisibility,"*").concat(this.isCollapsed,"*").concat(this.position,"*").concat(this.reverse,"*").concat(this.requestStreet.replace(/&/g,"^"),"*").concat(this.locationID,"*").concat(this.geocoderCoords)}},{key:"name",get:function(){return"ignsearch"}},{key:"reverse",get:function(){return this.reverse_}},{key:"geocoderCoords",get:function(){return this.controls_[0].geocoderCoords}},{key:"requestStreet",get:function(){return this.controls_[0].requestStreet}},{key:"locationID",get:function(){return this.controls_[0].locationID}}])&&C(o.prototype,n),r&&C(o,r),t}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.IGNSearch=E,window.M.control.IGNSearchControl=P,window.M.impl.control.IGNSearchControl=u}]);
//# sourceMappingURL=ignsearch.ol.min.js.map