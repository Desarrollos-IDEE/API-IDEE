{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/templates/ignsearch.html","webpack:///./src/templates/results.html","webpack:///./src/facade/js/ignsearchcontrol.js","webpack:///./src/impl/ol/js/ignsearchcontrol.js","webpack:///./src/facade/js/helpers.js","webpack:///./src/facade/js/constants.js","webpack:///./src/facade/js/ignsearch.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","typingTimer","IGNSearchControl","M","impl","Control","map","html","_get","_getPrototypeOf","this","scale","wmts3857scales","newScale","reduce","prev","curr","Math","abs","olView","facadeMap_","getMapImpl","getView","newResolution","getMaxResolution","pow","indexOf","setResolution","coordinates","source","destiny","ol","proj","getTransform","transformFunc","registerHelpers","Handlebars","registerHelper","str","toUpperCase","v1","operator","v2","options","fn","inverse","type","address","id","municipality","line","concat","undefined","geographicNameType","_this","servicesToSearch","arguments","length","maxResults","noProcess","countryCode","urlCandidates","urlFind","urlReverse","urlPrefix","urlAssistant","urlDispatcher","resultVisibility","reverse","locationID","requestStreet","geocoderCoords","nomenclatorSearchType","ignsearchcontrol_classCallCheck","utils","isUndefined","IGNSearchImplControl","exception","ignsearchcontrol_possibleConstructorReturn","ignsearchcontrol_getPrototypeOf","resultVisibility_","reverseActivated","_this2","Promise","success","template","compileSync","resultsBox","querySelector","searchInput","addEventListener","clearResultsAndGeometry","e","createTimeout","clearTimeout","activateDeactivateReverse","document","clearResults","clickReverseEvent","on","evt","CLICK","showReversePopUp","changePlaceholder","style","display","ADDED_TO_MAP","point","Point","radius","icon","form","class","rotation","rotate","offset","color","opacity","simple","Polygon","fill","drawNomenclatorResult","proxy","remote","then","res","geoJsonData","text","substring","removeLayers","clickedElementLayer","featureJSON","JSON","parse","geometry","fixCoordinatesPath","properties","lat","lng","layer","GeoJSON","features","displayInLayerSwitcher","setStyle","addLayers","fullAddress","createFullAddress","perfectResult","state","showSearchPopUp","fake","reprojCoords","getImpl","reproject","getProjection","code","coord","_this3","origin","etrs89pointCoordinates","params","urlToGet","mapCoordinates","dataCoordinates","returnData","showPopUp","_this4","setTimeout","searchInputValue","control","_this5","firstResult","target","replace","searchValue","innerHTML","classList","add","fontSize","allCandidates","test","searchCoordinates","getNomenclatorData","getCandidatesData","compiledResult","results","vars","places","elementList","querySelectorAll","forEach","listElement","goToLocation","item","click","remove","appendChild","parragraph","createElement","infoMsg","createTextNode","getElementById","zoomInLocation","jsonResult","via","tip_via","portal","portalNumber","locationId","_this6","zoomIn","requestPlace","addParameters","request","query","sourcename","outputformat","latLngString","location","resultTitle","title","latLngArray","split","latitude","parseFloat","longitude","newGeojson","inputValue","resultsArray","_this7","newInputVal","window","encodeURIComponent","resolve","push","_this8","thisElement","splice","elementsData","_this9","element","getAttribute","includes","parenthesisIndex","_this10","currentElement","selectedObject","findClickedItem","createGeometryStyles","getFindData","drawGeocoderResult","service","_this11","resultsList","Vector","calculateMaxExtent","extent","setBbox","setScale","fire","filter","feature","setOfCoordinates","removePopup","popup","flag","placeholder","exactResult","exitState","destinyProj","newCoordinates","mapcoords","featureCoordinates","addTab","featureTabOpts","content","getPopup","Popup","myPopUp","panMapIfOutOfView","addPopup","IGNSearch","ignsearch_classCallCheck","ignsearch_possibleConstructorReturn","ignsearch_getPrototypeOf","map_","controls_","isCollapsed","position","tooltip_","tooltip","reverse_","locationID_","requestStreet_","isString","Number","geocoderCoords_","Plugin","panel_","ui","Panel","collapsible","collapsed","className","addControls","addPanels","setResultVisibility","plugin","M$plugin$IGNSearch","M$control$IGNSearchControl","M$impl$control$IGNSearchControl"],"mappings":"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","file":"ignsearch.ol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-control m-container m-ignsearch\\\" title=\\\"\\\">\\n    <div class=\\\"search-panel\\\">\\n        <input type=\\\"text\\\" id=\\\"m-ignsearch-search-input\\\" class=\\\"m-input-search\\\" placeholder=\\\"Dirección, topónimo o Ref. catastral (14 dig.)\\\" />\\n        <button id=\\\"m-ignsearch-locate-button\\\" title=\\\"Obtener dirección en un punto del mapa\\\">\\n            <span class=\\\"g-plugin-ignsearch-localizacion3\\\" />\\n        </button>\\n        <button id=\\\"m-ignsearch-clear-button\\\" class=\\\"m-button-limpiar\\\" title=\\\"Borrar resultados de la búsqueda\\\">\\n            <span class=\\\"g-cartografia-papelera\\\" />\\n        </button>\\n    </div>\\n    <div id=\\\"m-ignsearch-results\\\">\\n        <!-- Here goes the list of search results -->\\n    </div>\\n</div>\";","module.exports = \"<ul id=\\\"m-ignsearch-results-list\\\">\\n    {{#each places}}\\n        {{#if this.address}}\\n            {{#printType this.type this.address this.id this.municipality}}\\n            {{/printType}}\\n        {{else}}\\n            {{#printType this.type this.title this.id this.municipality}}\\n            {{/printType}}\\n        {{/if}}\\n    {{/each}}\\n</ul>\";","/**\n * @module M/control/IGNSearchControl\n */\nimport IGNSearchImplControl from '../../impl/ol/js/ignsearchcontrol';\nimport template from '../../templates/ignsearch';\nimport results from '../../templates/results';\nimport registerHelpers from './helpers';\nimport geographicNameType from './constants';\n\nlet typingTimer;\n/**\n * @classdesc\n * This class creates an input for searching locations on a map.\n * It uses Instituto Geográfico Nacional services Geocoder and Nomenclator\n * to search user's input location and return coordinates on click.\n */\nexport default class IGNSearchControl extends M.Control {\n  /*\n   * @constructor\n   * @extends {M.Control}\n   * @api\n   */\n  constructor(\n    servicesToSearch = 'gn',\n    maxResults = 10,\n    noProcess = 'municipio,poblacion',\n    countryCode = 'es',\n    urlCandidates,\n    urlFind,\n    urlReverse,\n    urlPrefix,\n    urlAssistant,\n    urlDispatcher,\n    resultVisibility = true,\n    reverse,\n    locationID,\n    requestStreet,\n    geocoderCoords,\n    nomenclatorSearchType = geographicNameType,\n  ) {\n    if (M.utils.isUndefined(IGNSearchImplControl)) {\n      M.exception('La implementación usada no puede crear controles IGNSearchControl');\n    }\n    const impl = new IGNSearchImplControl();\n    super(impl, 'IGNSearch');\n    // Class properties\n    /**\n     * This variable indicates which services should be searched\n     * (geocoder, nomenclator or both)\n     * @private\n     * @type {string} - 'g' | 'n' | 'gn'\n     */\n    this.servicesToSearch = servicesToSearch;\n    /**\n     * This variable sets the maximun results returned by a service\n     * (if both services are searched the maximum results will be twice this number)\n     * @private\n     * @type {number}\n     */\n    this.maxResults = maxResults;\n    /**\n     * This variables indicates which entities shouldn't be searched\n     * @private\n     * @type {string} - 'municipio' | 'poblacion' | 'toponimo' | 'municipio,poblacion' | etc\n     */\n    this.noProcess = noProcess;\n    /**\n     * This variable indicates the country code.\n     * @private\n     * @type {string} - 'es'\n     */\n    this.countryCode = countryCode;\n    /**\n     * This variable indicates Geocoder Candidates service url\n     * @private\n     * @type {string}\n     */\n    this.urlCandidates = urlCandidates;\n    /**\n     * This variable indicates Geocoder Find service url\n     * @private\n     * @type {string}\n     */\n    this.urlFind = urlFind;\n    /**\n     * This variable indicates Geocoder Reverse service url\n     * @private\n     * @type {string}\n     */\n    this.urlReverse = urlReverse;\n    /**\n     * This variable indicates Nomenclator url prefix\n     * @private\n     * @type {string}\n     */\n    this.urlPrefix = urlPrefix;\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.urlAssistant = urlAssistant;\n    /**\n     * This variable indicates Nomenclator Dispatcher service url\n     * @private\n     * @type {string}\n     */\n    this.urlDispatcher = urlDispatcher;\n    /**\n     * This variable indicates whether result geometry should be drawn on map.\n     * @private\n     * @type {boolean}\n     */\n    this.resultVisibility_ = resultVisibility;\n    /**\n     * This variable indicates which entity types should be searched on Nomenclator service.\n     * @private\n     * @type {Array<string>}\n     */\n    this.nomenclatorSearchType = nomenclatorSearchType;\n    /**\n     * This variable indicates whether reverse geocoder button should be available.\n     * @private\n     * @type {Boolean}\n     */\n    this.reverse = reverse;\n    /**\n     * This variable indicates whether reverse geocoder button is activated.\n     * @private\n     * @type {Boolean}\n     */\n    this.reverseActivated = false;\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.locationID = locationID;\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.requestStreet = requestStreet;\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.geocoderCoords = geocoderCoords;\n    registerHelpers();\n  }\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api\n   */\n  createView(map) {\n    this.map = map;\n    return new Promise((success) => {\n      const html = M.template.compileSync(template);\n      this.html = html;\n      this.resultsBox = html.querySelector('#m-ignsearch-results');\n      this.searchInput = this.html.querySelector('#m-ignsearch-search-input');\n      html.querySelector('#m-ignsearch-clear-button').addEventListener('click', this.clearResultsAndGeometry.bind(this));\n      html.querySelector('#m-ignsearch-search-input').addEventListener('keyup', e => this.createTimeout(e));\n      html.querySelector('#m-ignsearch-search-input').addEventListener('keydown', () => {\n        clearTimeout(typingTimer);\n      });\n      html.querySelector('#m-ignsearch-search-input').addEventListener('keydown', () => {\n        clearTimeout(typingTimer);\n      });\n      html.querySelector('#m-ignsearch-locate-button').addEventListener('click', this.activateDeactivateReverse.bind(this));\n      document.querySelector('.ign-search-panel>.m-panel-btn').addEventListener('click', this.clearResults.bind(this));\n      this.clickReverseEvent = this.map.on(M.evt.CLICK, e => this.showReversePopUp(e));\n      this.changePlaceholder();\n      if (!this.reverse) {\n        html.querySelector('#m-ignsearch-locate-button').style.display = 'none';\n      }\n      this.on(M.evt.ADDED_TO_MAP, () => {\n        if (this.locationID && this.locationID.length > 0) {\n          this.point = new M.style.Point({\n            radius: 5,\n            icon: {\n              form: 'none',\n              class: 'g-cartografia-pin',\n              radius: 12,\n              rotation: 0,\n              rotate: false,\n              offset: [0, -12],\n              color: '#f00',\n              opacity: 1,\n            },\n          });\n          this.simple = new M.style.Polygon({\n            fill: {\n              color: 'black',\n              opacity: 0,\n            },\n          });\n          this.drawNomenclatorResult(this.locationID, false);\n        }\n        if (this.requestStreet && this.requestStreet.length > 0) {\n          M.proxy(false);\n          M.remote.get(this.requestStreet).then((res) => {\n            const geoJsonData = res.text.substring(9, res.text.length - 1);\n            this.map.removeLayers(this.clickedElementLayer);\n            const featureJSON = JSON.parse(geoJsonData);\n            featureJSON.geometry.coordinates = this.fixCoordinatesPath(featureJSON);\n            // Center coordinates\n            this.coordinates = `${featureJSON.properties.lat}, ${featureJSON.properties.lng}`;\n            // New layer with geometry\n            this.clickedElementLayer = new M.layer.GeoJSON({\n              name: 'Resultado búsquedas',\n              source: {\n                type: 'FeatureCollection',\n                features: [featureJSON],\n              },\n            });\n            this.clickedElementLayer.displayInLayerSwitcher = false;\n\n            if (featureJSON.geometry.type === 'Point') {\n              this.clickedElementLayer.setStyle(this.point);\n            }\n\n            // Stops showing polygon geometry\n            if (!this.resultVisibility_) {\n              this.clickedElementLayer.setStyle(this.simple);\n            }\n            this.map.addLayers(this.clickedElementLayer);\n            // show popup for streets\n            if (featureJSON.properties.type === 'callejero' || featureJSON.properties.type === 'portal') {\n              const fullAddress = this.createFullAddress(featureJSON.properties);\n\n              const coordinates = [featureJSON.properties.lat, featureJSON.properties.lng];\n              const perfectResult = featureJSON.properties.state;\n              this.showSearchPopUp(fullAddress, coordinates, perfectResult, { fake: true });\n            }\n            M.proxy(true);\n          });\n        }\n        if (this.geocoderCoords && this.geocoderCoords.length === 2) {\n          this.activateDeactivateReverse();\n          const reprojCoords = this.getImpl().reproject(this.geocoderCoords, 'EPSG:4326', map.getProjection().code);\n          this.showReversePopUp({\n            coord: reprojCoords,\n            fake: true,\n          });\n        }\n      });\n      success(html);\n    });\n  }\n  /**\n   * This function toggles reverse geocoder button activation.\n   *\n   * @public\n   * @function\n   * @api\n   *\n   */\n  activateDeactivateReverse() {\n    if (!this.reverseActivated) {\n      this.reverseActivated = true;\n      document.querySelector('#m-ignsearch-locate-button span').style.color = '#71a7d3';\n    } else {\n      this.reverseActivated = false;\n      document.querySelector('#m-ignsearch-locate-button span').style.color = '#7A7A73';\n    }\n  }\n  /**\n   * This function shows information tooltip on clicked point.\n   * @param {Event} e - Event\n   */\n  showReversePopUp(e) {\n    if (this.reverseActivated) {\n      // Reproject coordinates to ETRS89 on decimal grades (+ North latitude and East longitude)\n      const origin = this.map.getProjection().code;\n      const destiny = 'EPSG:4258';\n      const etrs89pointCoordinates = this.getImpl()\n        .reproject([e.coord[0], e.coord[1]], origin, destiny);\n      // Params:\n      // lon, lat\n      // type (only if refcatastral) = 'refcatastral'\n      const params = `lon=${etrs89pointCoordinates[0]}&lat=${etrs89pointCoordinates[1]}`;\n      const urlToGet = `${this.urlReverse}?${params}`;\n      const mapCoordinates = e.coord;\n      this.geocoderCoords = etrs89pointCoordinates;\n      const dataCoordinates = [etrs89pointCoordinates[1], etrs89pointCoordinates[0]];\n      let fullAddress = '';\n      // if device is mobile\n      // if (window.navigator.userAgent.match(/Android/i) ||\n      //   window.navigator.userAgent.match(/webOS/i) ||\n      //   window.navigator.userAgent.match(/iPhone/i) ||\n      //   window.navigator.userAgent.match(/iPad/i) ||\n      //   window.navigator.userAgent.match(/iPod/i) ||\n      //   window.navigator.userAgent.match(/BlackBerry/i) ||\n      //   window.navigator.userAgent.match(/Windows Phone/i)) {\n      //   this.showPopUp('Cargando...', mapCoordinates, dataCoordinates);\n      // }\n      M.remote.get(urlToGet).then((res) => {\n        if (res.text !== null) {\n          const returnData = JSON.parse(res.text);\n          fullAddress = this.createFullAddress(returnData);\n        } else {\n          fullAddress = 'No existe dirección asociada para esta ubicación.';\n        }\n        this.showPopUp(fullAddress, mapCoordinates, dataCoordinates, null, true, e);\n      });\n    }\n  }\n\n  /**\n   * This function sets a timeout between keypress and search.\n   * @public\n   * @function\n   * @param {e} event that triggers the method\n   * @api\n   */\n  createTimeout(e) {\n    clearTimeout(typingTimer);\n    typingTimer = setTimeout(() => this.searchInputValue(e), 500);\n  }\n  /**\n   * This function gets activation button\n   *\n   * @public\n   * @function\n   * @param {HTML} html of control\n   * @api\n   */\n  getActivationButton(html) {\n    return html.querySelector('.m-ignsearch button');\n  }\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api\n   */\n  equals(control) {\n    return control instanceof IGNSearchControl;\n  }\n  /**\n   * This function\n   * 1.- Takes user's input\n   * 2.- Searches for ocurrences on IGN sources\n   * 3.- Returns results as items in a drop-down list (returns address)\n   * 4.- Onclick on an item goes to its coordinates\n   * @public\n   * @function\n   * @param {event} e - event that triggers this method\n   * @api\n   */\n  searchInputValue(e, firstResult = false) {\n    // const { value } = e.target;\n    const value = e.target.value.replace(',', ' ');\n    this.searchValue = value;\n    if (value.length <= 2) {\n      this.resultsBox.innerHTML = '';\n    } else {\n      this.resultsBox.innerHTML = '';\n      // Adds animation class during loading\n      this.resultsBox.classList.add('g-cartografia-spinner');\n      this.resultsBox.style.fontSize = '24px';\n      this.allCandidates = [];\n      const regExpCoord = /[+-]?\\d+\\.\\d+(\\s|,|(,\\s))[+-]?\\d+\\.\\d+/;\n      // Checks if input content represents coordinates, else searches text\n      if (regExpCoord.test(value)) {\n        // searches coordinates point (TO DO) if coordinates are entered\n        this.searchCoordinates(value);\n      } else {\n        // saves on allCandidates search results from Nomenclator (CommunicationPoolservlet)\n        this.getNomenclatorData(value, this.allCandidates).then(() => {\n          // saves on allCandidates search results from CartoCiudad (geocoder)\n          this.getCandidatesData(value, this.allCandidates).then(() => {\n            // Clears previous search\n            this.resultsBox.innerHTML = '';\n            const compiledResult = M.template.compileSync(results, {\n              vars: {\n                places: this.allCandidates,\n              },\n            });\n            const elementList = compiledResult.querySelectorAll('li');\n            elementList.forEach((listElement) => {\n              listElement.addEventListener('click', () => {\n                this.goToLocation(listElement);\n              });\n            });\n            if (firstResult === true && elementList.length > 0) {\n              elementList.item(0).click();\n            }\n            // remove animation class and return to normal font size after loading\n            this.resultsBox.classList.remove('g-cartografia-spinner');\n            this.resultsBox.style.fontSize = '1em';\n            this.resultsBox.appendChild(compiledResult);\n            // Service doesn't find results\n            if (this.allCandidates.length === 0) {\n              const parragraph = document.createElement('p');\n              const infoMsg = document.createTextNode('No se encuentran resultados para esta petición.');\n              parragraph.appendChild(infoMsg);\n              this.resultsBox.appendChild(parragraph);\n              document.getElementById('m-ignsearch-results-list').style.display = 'none';\n            } else {\n              document.getElementById('m-ignsearch-results-list').style.display = 'block';\n            }\n          });\n        });\n      }\n    }\n  }\n  /**\n   * This function removes last search layer and adds new layer with current result (from geocoder)\n   * features to map, zooms in result, edits popup information and shows a message saying\n   *  if it's a perfect result or an approximation.\n   * @public\n   * @function\n   * @param {Object} geoJsonData - clicked result object\n   * @api\n   */\n  drawGeocoderResult(geoJsonData) {\n    this.map.removeLayers(this.clickedElementLayer);\n    const featureJSON = JSON.parse(geoJsonData);\n    featureJSON.geometry.coordinates = this.fixCoordinatesPath(featureJSON);\n    // Center coordinates\n    this.coordinates = `${featureJSON.properties.lat}, ${featureJSON.properties.lng}`;\n    // New layer with geometry\n    this.clickedElementLayer = new M.layer.GeoJSON({\n      name: 'Resultado búsquedas',\n      source: {\n        type: 'FeatureCollection',\n        features: [featureJSON],\n      },\n    });\n    this.clickedElementLayer.displayInLayerSwitcher = false;\n\n    if (featureJSON.geometry.type === 'Point') {\n      this.clickedElementLayer.setStyle(this.point);\n    }\n\n    // Stops showing polygon geometry\n    if (!this.resultVisibility_) {\n      this.clickedElementLayer.setStyle(this.simple);\n    }\n    this.map.addLayers(this.clickedElementLayer);\n    this.zoomInLocation('g', featureJSON.geometry.type);\n    // show popup for streets\n    if (featureJSON.properties.type === 'callejero' || featureJSON.properties.type === 'portal') {\n      const fullAddress = this.createFullAddress(featureJSON.properties);\n\n      const coordinates = [featureJSON.properties.lat, featureJSON.properties.lng];\n      const perfectResult = featureJSON.properties.state;\n      this.showSearchPopUp(fullAddress, coordinates, perfectResult);\n    }\n  }\n  /**\n   * This function takes data from an entity and returns the complete address\n   * @param {string} jsonResult - json string with entity data\n   */\n  createFullAddress(jsonResult) {\n    const via = (jsonResult.tip_via === null ||\n      jsonResult.tip_via === undefined) ? '' : jsonResult.tip_via;\n    const address = (jsonResult.address === null ||\n      jsonResult.address === undefined) ? '' : jsonResult.address;\n    const portal = (jsonResult.portalNumber === null ||\n      jsonResult.portalNumber === undefined ||\n      jsonResult.portalNumber === 0) ? '' : jsonResult.portalNumber;\n    return `${via} ${address} ${portal}`;\n  }\n  /**\n   * This function removes last search layer and adds new layer\n   * with current result (from nomenclator) features to map and zooms in result.\n   * @public\n   * @function\n   * @param {string} locationId - id of the location object\n   * @api\n   */\n  drawNomenclatorResult(locationId, zoomIn = true) {\n    this.requestStreet = '';\n    this.requestPlace = M.utils.addParameters(this.urlDispatcher, {\n      request: 'OpenQuerySource',\n      query: `<ogc:Filter><ogc:FeatureId fid=\"${locationId}\"/></ogc:Filter>`,\n      sourcename: `${this.urlPrefix}communicationsPoolServlet/sourceAccessWFS-INSPIRE-NGBE.rdf`,\n      outputformat: 'application/json',\n    });\n    this.locationID = locationId;\n    M.remote.get(this.requestPlace).then((res) => {\n      const latLngString = JSON.parse(res.text).results[0].location;\n      const resultTitle = JSON.parse(res.text).results[0].title;\n      const latLngArray = latLngString.split(' ');\n      const latitude = parseFloat(latLngArray[0]);\n      const longitude = parseFloat(latLngArray[1]);\n      this.map.removeLayers(this.clickedElementLayer);\n      const newGeojson = {\n        name: 'Resultado búsquedas',\n        source: {\n          type: 'FeatureCollection',\n          features: [{\n            type: 'Feature',\n            geometry: {\n              type: 'Point',\n              coordinates: [\n                longitude, latitude,\n              ],\n            },\n            properties: {\n              name: resultTitle,\n            },\n          }],\n        },\n      };\n      this.clickedElementLayer = new M.layer.GeoJSON(newGeojson);\n      this.clickedElementLayer.displayInLayerSwitcher = false;\n      this.clickedElementLayer.setStyle(this.point);\n      // Stops showing polygon geometry\n      if (!this.resultVisibility_) {\n        this.clickedElementLayer.setStyle(this.simple);\n      }\n      this.map.addLayers(this.clickedElementLayer);\n      if (zoomIn === true) {\n        this.zoomInLocation('n', 'Point');\n      }\n    });\n  }\n  /**\n   * This function gets user input, searches for coincidences and adds each one to the given array.\n   * @public\n   * @function\n   * @param {string} inputValue search text written by user\n   * @param { Array < Object > } resultsArray search result candidates from IGN services\n   * @api\n   */\n  getCandidatesData(inputValue, resultsArray) {\n    const newInputVal = window.encodeURIComponent(inputValue);\n    return new Promise((resolve) => {\n      if (this.servicesToSearch !== 'n') {\n        let params = `q=${newInputVal}&limit=${this.maxResults}&no_process=${this.noProcess}`;\n        params += `&countrycode=${this.countryCode}&autocancel='true'`;\n        const urlToGet = `${this.urlCandidates}?${params}`;\n        M.remote.get(urlToGet).then((res) => {\n          const returnData = JSON.parse(res.text.substring(9, res.text.length - 1));\n          for (let i = 0; i < returnData.length; i += 1) {\n            resultsArray.push(returnData[i]);\n          }\n          resolve();\n        });\n      } else {\n        resolve();\n      }\n    });\n  }\n  /**\n   * This function adds search coincidences on Nomenclator to array\n   * @public\n   * @function\n   * @param {string} inputValue location searched by user\n   * @param {Array <Object>} resultsArray search results\n   * @api\n   */\n  getNomenclatorData(inputValue, resultsArray) {\n    const newInputVal = window.encodeURIComponent(inputValue);\n    return new Promise((resolve) => {\n      if (this.servicesToSearch !== 'g') {\n        const params = `maxresults=${this.maxResults}&name_equals=${newInputVal}`;\n        const urlToGet = `${this.urlAssistant}?${params}`;\n        M.remote.get(urlToGet).then((res) => {\n          const temporalData = res.text !== '' ? JSON.parse(res.text) : { results: [] };\n          const returnData = temporalData.results;\n          for (let i = 0; i < returnData.length; i += 1) {\n            // avoid nameplaces not included in this.nomenclatorSearchType\n            if (this.nomenclatorSearchType.indexOf(returnData[i].type) >= 0) {\n              resultsArray.push(returnData[i]);\n            }\n          }\n          // move 'Núcleos de población' to start\n          for (let i = 0; i < resultsArray.length; i += 1) {\n            if (resultsArray[i].type === 'Núcleos de población') {\n              const thisElement = resultsArray.splice(i, 1);\n              resultsArray.splice(0, 0, thisElement);\n            }\n          }\n          resolve();\n        });\n      } else {\n        resolve();\n      }\n    });\n  }\n  /**\n   * This function gets address of selected item and returns geojson data (with coordinates)\n   * Only for Geocoder service\n   * @public\n   * @function\n   * @param {string} listElement element from drop-down list(\"li\")\n   * @param {Array <Object> } elementsData search results\n   * @api\n   */\n  getFindData(listElement, elementsData) {\n    return new Promise((resolve) => {\n      let id;\n      let type;\n      let portal;\n      let via;\n      let address;\n      elementsData.forEach((element) => {\n        if (listElement.getAttribute('id') === element.id) {\n          id = `&id=${element.id}`;\n          type = `&type=${element.type}`;\n          portal = (element.portalNumber !== 0 && element.portalNumber !== undefined) ?\n            `&portal=${element.portalNumber}` : '';\n          via = element.tip_via !== '' ? `&tip_via=${element.tip_via}` : '';\n        }\n      });\n      address = listElement.innerHTML;\n      if (listElement.innerHTML.includes('(')) {\n        const parenthesisIndex = listElement.innerHTML.indexOf('(');\n        address = listElement.innerHTML.substring(0, parenthesisIndex);\n      }\n      const params = `${type}${via}${id}${portal}&outputformat=geojson`;\n      const urlToGet = `${this.urlFind}?q=${address}${params}`;\n      this.requestStreet = urlToGet;\n      this.locationID = '';\n      M.proxy(false);\n      M.remote.get(urlToGet).then((res) => {\n        const geoJsonData = res.text.substring(9, res.text.length - 1);\n        resolve(geoJsonData);\n      });\n      M.proxy(true);\n    });\n  }\n  /**\n   * This function zooms in clicked location and draws geometry\n   * @public\n   * @function\n   * @param {Object} listElement clicked result information\n   * @api\n   */\n  goToLocation(listElement) {\n    this.currentElement = listElement; // <li>\n    const selectedObject = this.findClickedItem(listElement, this.allCandidates); // json\n    this.createGeometryStyles();\n    // if item comes from geocoder\n    if (Object.prototype.hasOwnProperty.call(selectedObject, 'address')) {\n      this.getFindData(listElement, this.allCandidates).then((geoJsonData) => {\n        this.drawGeocoderResult(geoJsonData);\n      });\n    } else { // if item comes from nomenclator\n      this.drawNomenclatorResult(selectedObject.id);\n    }\n    this.resultsBox.innerHTML = '';\n  }\n  /**\n   * This function zooms in MaxExtent of clicked element\n   * @public\n   * @function\n   * @param {string} service { 'g' | 'n' }\n   * @param { string } type of geometry in which we zoom\n   * @api\n   */\n  zoomInLocation(service, type) {\n    this.resultsList = document.getElementById('m-ignsearch-results-list');\n    if (this.clickedElementLayer instanceof M.layer.Vector) {\n      this.clickedElementLayer.calculateMaxExtent().then((extent) => {\n        this.map.setBbox(extent);\n        if (service === 'n' || type === 'Point' || type === 'LineString' || type === 'MultiLineString') {\n          this.setScale(17061); // last scale requested by our client: 2000\n        }\n        // this.resultsList.innerHTML = '';\n        // this.searchInput.value = '';\n        // this.searchInput.value = this.currentElement.querySelector('#info').innerHTML;\n        // this.searchValue = this.searchInput.value.trim();\n        // this.resultsList.appendChild(this.currentElement);\n        // Fires ignsearch:EntityFound event after zoom-in result\n        this.fire('ignsearch:entityFound', [extent]);\n      });\n    }\n  }\n  /**\n   * This function returns clicked location object\n   * @public\n   * @function\n   * @param { string } listElement <li>Location</li>\n   * @param { Array < Object > } allCandidates possible locations\n   * @api\n   */\n  findClickedItem(listElement, allCandidates) {\n    return allCandidates.filter(element => element.id === listElement.getAttribute('id'))[0];\n  }\n  /**\n   * This function fixes path to get to this feature's coordinates\n   * @public\n   * @function\n   * @param {feature} feature with geometry information for the given location\n   * @api\n   */\n  fixCoordinatesPath(feature) {\n    let coordinates;\n    if (feature.geometry.type === 'Point') {\n      coordinates = feature.geometry.coordinates[0][0];\n    } else if (feature.geometry.type === 'MultiPolygon') {\n      coordinates = [feature.geometry.coordinates];\n    } else if (feature.geometry.type === 'LineString') {\n      coordinates = feature.geometry.coordinates[0];\n    } else {\n      coordinates = feature.geometry.coordinates;\n    }\n    return coordinates;\n  }\n  /* Given a set of coordinates (lat, long),\n    searches for the corresponding place\n  */\n  searchCoordinates(setOfCoordinates) {\n    // const latLongSeparationRegExp = /(\\s+|,|,\\s)/;\n    // setOfCoordinates.replace(latLongSeparationRegExp, ' ');\n    // const latFromSet = setOfCoordinates.split(' ')[0];\n    // const longFromSet = setOfCoordinates.split(' ')[1];\n    return new Promise((resolve) => {\n      // TODO\n      // if lat,long separation character/s are not a space, it turns into a space\n      // const latLongSeparationRegExp = /(\\s+|,|,\\s)/;\n      // setOfCoordinates.replace(latLongSeparationRegExp, ' ');\n      // const latFromSet = setOfCoordinates.split(' ')[0];\n      // const longFromSet = setOfCoordinates.split(' ')[1];\n      // // geocoder service\n      // const urlToGet = `${this.urlReverse}?lat=${latFromSet}&lon=${longFromSet}`;\n      // M.remote.get(urlToGet).then((res) => {\n      //   const parsedResponse = JSON.parse(res.text);\n      //   const coordinatesSetAddress = parsedResponse.address;\n      //   resolve();\n      // });\n      resolve();\n    });\n  }\n  /**\n   * This function clears drawn geometry from map.\n   * @public\n   * @function\n   * @api\n   */\n  clearResults() {\n    this.searchInput.value = '';\n    this.resultsBox.innerHTML = '';\n    this.searchValue = '';\n  }\n  /**\n   * This function clears input content, results box, popup and shown geometry.\n   * @public\n   * @function\n   * @api\n   */\n  clearResultsAndGeometry() {\n    this.clearResults();\n    if (this.clickedElementLayer !== undefined) {\n      this.clickedElementLayer.setStyle(this.simple);\n    }\n    this.map.removePopup(this.popup, [\n      this.lng,\n      this.lat,\n    ]);\n  }\n  /**\n   * This function sets geometry visibility on map (visible|invisible).\n   * @public\n   * @function\n   * @param {boolean} flag\n   * @api\n   */\n  setResultVisibility(flag) {\n    this.resultVisibility_ = flag;\n  }\n  /**\n   * This function changes input placeholder based on services choice\n   * @public\n   * @function\n   * @api\n   */\n  changePlaceholder() {\n    if (this.servicesToSearch === 'g') {\n      this.searchInput.placeholder = 'Dirección o Ref. catastral (14 díg.) ';\n    } else if (this.servicesToSearch === 'n') {\n      this.searchInput.placeholder = 'Topónimo';\n    }\n  }\n  /**\n   * This function creates some geometry styles.\n   * @public\n   * @function\n   * @api\n   */\n  createGeometryStyles() {\n    // Shows pin on drawn point\n    this.point = new M.style.Point({\n      radius: 5,\n      icon: {\n        form: 'none',\n        class: 'g-cartografia-pin',\n        radius: 12,\n        rotation: 0,\n        rotate: false,\n        offset: [0, -12],\n        color: '#f00',\n        opacity: 1,\n      },\n    });\n    // Style for hiding geometry\n    this.simple = new M.style.Polygon({\n      fill: {\n        color: 'black',\n        opacity: 0,\n      },\n    });\n  }\n  /**\n    * This\n    function inserts a popUp with information about the searched location\n      (and whether it 's an exact result or an approximation)\n    * @param { string } fullAddress location address(street, portal, etc.)\n    * @param { Array } coordinates latitude[0] and longitude[1] coordinates\n    * @param { boolean } exactResult indicating\n    if the given result is a perfect match\n    */\n  showSearchPopUp(fullAddress, coordinates, exactResult, e = {}) {\n    const destinyProj = this.map.getProjection().code;\n    const destinySource = 'EPSG:4326';\n    const newCoordinates = this.getImpl()\n      .reproject([coordinates[1], coordinates[0]], destinySource, destinyProj);\n    let exitState;\n    if (exactResult !== 1) {\n      exitState = 'Dirección aproximada';\n    } else {\n      exitState = 'Dirección exacta';\n    }\n    this.showPopUp(fullAddress, newCoordinates, coordinates, exitState, false, e);\n  }\n  /**\n   * This function inserts a popup on the map with information about its location.\n   * @param { string } fullAddress location address(street, portal, etc.)\n   * @param { Array } mapCoordinates latitude[0] and longitude[1] coordinates on map projection\n   * @param { Array } featureCoordinates latitude[0] and longitude[1] coordinates from feature\n   * @param { string } exitState indicating if the given result is a perfect match\n   */\n  showPopUp(fullAddress, mapcoords, featureCoordinates, exitState = null, addTab = true, e = {}) {\n    const featureTabOpts = { content: '', icon: 'g-plugin-ignsearch-localizacion3' };\n    if (exitState !== null) {\n      featureTabOpts.content += `<div><b>${exitState}</b></div>`;\n    }\n    featureTabOpts.content += `<div>${fullAddress}</div>\n                <div class='ignsearch-popup'>Lat: ${featureCoordinates[0]}</div>\n                <div class='ignsearch-popup'> Long: ${featureCoordinates[1]} </div>`;\n    if (this.map.getPopup() instanceof M.Popup && addTab === true) {\n      this.popup = this.map.getPopup();\n      this.popup.addTab(featureTabOpts);\n    } else {\n      const myPopUp = new M.Popup({ panMapIfOutOfView: !e.fake });\n      myPopUp.addTab(featureTabOpts);\n\n      this.map.addPopup(myPopUp, [\n        mapcoords[0],\n        mapcoords[1],\n      ]);\n      this.popup = myPopUp;\n    }\n    this.lat = mapcoords[1];\n    this.lng = mapcoords[0];\n  }\n  /**\n   * This function sets given scale to map\n   * @public\n   * @function\n   * @param { number } scale to which the map will zoom in\n   *   (5000 if we want 1: 5000)\n   * @api\n   */\n  setScale(scale) {\n    this.getImpl().setScale(scale);\n  }\n}\n","/**\n * @module M/impl/control/IGNSearchControl\n */\nexport default class IGNSearchControl extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    super.addTo(map, html);\n  }\n  /**\n   * This function sets a new scale to the map.\n   * Developed for WGS 84 / Pseudo - Mercator 3857 projection.\n   * @private\n   * @function\n   */\n  setScale(scale) {\n    const wmts3857scales = [\n      559082264.0287178,\n      279541132.0143589,\n      139770566.0071794,\n      69885283.00358972,\n      34942641.50179486,\n      17471320.75089743,\n      8735660.375448715,\n      4367830.187724357,\n      2183915.093862179,\n      1091957.546931089,\n      545978.7734655447,\n      272989.3867327723,\n      136494.6933663862,\n      68247.34668319309,\n      34123.67334159654,\n      17061.83667079827,\n      8530.918335399136,\n      4265.459167699568,\n      2132.729583849784,\n    ];\n    // const wmts3857resolutions = [\n    //   156543.0339280410,\n    //   78271.51696402048,\n    //   39135.75848201023,\n    //   19567.87924100512,\n    //   9783.939620502561,\n    //   4891.969810251280,\n    //   2445.984905125640,\n    //   1222.992452562820,\n    //   611.4962262814100,\n    //   305.7481131407048,\n    //   152.8740565703525,\n    //   76.43702828517624,\n    //   38.21851414258813,\n    //   19.10925707129406,\n    //   9.554628535647032,\n    //   4.777314267823516,\n    //   2.388657133911758,\n    //   1.194328566955879,\n    //   0.5971642834779395,\n    // ];\n    // Finds closest standard scale\n    const newScale = wmts3857scales.reduce((prev, curr) => {\n      return (Math.abs(curr - scale) < Math.abs(prev - scale) ? curr : prev);\n    });\n    const olMap = this.facadeMap_.getMapImpl();\n    const olView = olMap.getView();\n    const newResolution = olView.getMaxResolution() / (2 ** wmts3857scales.indexOf(newScale));\n    olView.setResolution(newResolution);\n    // 4.777314267823516); // resolution for scale 17016, table page 120\n    // const dpiToCM = M.units.DOTS_PER_INCH / 2.54;\n    // const resolution = (scale / dpiToCM) / 100;\n    // olView.setResolution(resolution);\n  }\n  /**\n   * This function reprojects given coordinates to given projection.\n   * @private\n   * @function\n   * @param { Array <number> } coordinates - [x,y]\n   * @param { string } source - 'EPSG:4326'\n   * @param { string } destiny - 'EPSG:4326'\n   */\n  reproject(coordinates, source, destiny) {\n    const transformFunc = ol.proj.getTransform(source, destiny);\n    return transformFunc(coordinates);\n  }\n}\n","const registerHelpers = () => {\n  Handlebars.registerHelper('toUpperCase', (str) => {\n    return str.toUpperCase();\n  });\n  Handlebars.registerHelper('ifCond', (v1, operator, v2, options) => {\n    switch (operator) {\n      case '===':\n        return (v1 === v2) ? options.fn(this) : options.inverse(this);\n      case '!==':\n        return (v1 !== v2) ? options.fn(this) : options.inverse(this);\n      case '<':\n        return (v1 < v2) ? options.fn(this) : options.inverse(this);\n      case '<=':\n        return (v1 <= v2) ? options.fn(this) : options.inverse(this);\n      case '>':\n        return (v1 > v2) ? options.fn(this) : options.inverse(this);\n      case '>=':\n        return (v1 >= v2) ? options.fn(this) : options.inverse(this);\n      case '&&':\n        return (v1 && v2) ? options.fn(this) : options.inverse(this);\n      case '||':\n        return (v1 || v2) ? options.fn(this) : options.inverse(this);\n      default:\n        return options.inverse(this);\n    }\n  });\n  Handlebars.registerHelper('printType', (type, address, id, municipality) => {\n    let line = `<li id=${id}><span id=\"info\">${address.toUpperCase()}</span>`;\n    // add following lines if asked to show entity type again\n    // (but not if type's portal, callejero or Codpost)\n    // if (type !== 'callejero' && type !== 'portal' && type !== 'Codpost') {\n    //   line += ` (${type.toUpperCase()})`;\n    // }\n    if (municipality !== undefined) {\n      line += ` en ${municipality}`;\n    }\n    return line;\n  });\n};\nexport default registerHelpers;\n","const geographicNameType = ['Estado',\n  'Comunidad autónoma',\n  'Ciudad con estatuto de autonomía',\n  'Provincia',\n  'Municipio',\n  'poblacion',\n  'EATIM',\n  'Isla administrativa',\n  'Comarca administrativa',\n  'Jurisdicción',\n  // 'Capital de Estado',\n  // 'Capital de comunidad autónoma y ciudad con estatuto de autonomía',\n  // 'Capital de provincia',\n  'Capital de municipio',\n  'Capital de EATIM',\n  'Núcleos de población',\n  'Entidad colectiva',\n  'Entidad menor de población',\n  'Distrito municipal',\n  // 'Barrio',\n  'Entidad singular',\n  'Construcción/instalación abierta',\n  'Edificación',\n  // 'callejero',\n  'Vértice Geodésico',\n  'Hitos de demarcación territorial',\n  'Hitos en vías de comunicación',\n  'Alineación montañosa',\n  'Montaña',\n  'Paso de montaña',\n  'Llanura',\n  'Depresión',\n  'Vertientes',\n  'Comarca geográfica',\n  'Paraje',\n  'Elemento puntual del paisaje',\n  'Saliente costero',\n  'Playa',\n  'Isla',\n  'Otro relieve costero',\n  'Parque Nacional y Natural',\n  'Espacio protegido restante',\n  'Aeropuerto',\n  'Aeródromo',\n  'Pista de aviación y helipuerto',\n  'Puerto de Estado',\n  'Instalación portuaria',\n  // 'Carretera',\n  'Camino y vía pecuaria',\n  // 'Vía urbana',\n  'Ferrocarril',\n  'Curso natural de agua',\n  'Masa de agua',\n  'Curso artificial de agua',\n  'Embalse',\n  'Hidrónimo puntual',\n  'Glaciares',\n  'Mar',\n  'Entrante costero y estrecho marítimo',\n  'Relieve submarino',\n];\nexport default geographicNameType;\n","/**\n * @module M/plugin/IGNSearch\n */\nimport '../assets/css/ignsearch';\nimport '../assets/css/fonts';\nimport IGNSearchControl from './ignsearchcontrol';\n\nexport default class IGNSearch extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api\n   */\n  constructor(options) {\n    super();\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * This variable indicates which services should be searched\n     * (geocoder, nomenclator or both)\n     * @private\n     * @type {string} - 'g' | 'n' | 'gn'\n     */\n    this.servicesToSearch = options.servicesToSearch || 'gn';\n\n    /**\n     * This variable sets the maximun results returned by a service\n     * (if both services are searched the maximum results will be twice this number)\n     * @private\n     * @type {number}\n     */\n    this.maxResults = options.maxResults || 10;\n\n    /**\n     * This variables indicates which entities shouldn't be searched\n     * @private\n     * @type {string} - 'municipio' | 'poblacion' | 'toponimo' | 'municipio,poblacion' | etc\n     */\n    this.noProcess = options.noProcess || 'municipio,poblacion';\n\n    /**\n     * This variable indicates the country code.\n     * @private\n     * @type {string} - 'es'\n     */\n    this.countryCode = options.countryCode || 'es';\n\n    /**\n     * This variable indicates Geocoder Candidates service url\n     * @private\n     * @type {string}\n     */\n    this.urlCandidates = options.urlCandidates || 'https://www.cartociudad.es/geocoder/api/geocoder/candidatesJsonp';\n\n    /**\n     * This variable indicates Geocoder Find service url\n     * @private\n     * @type {string}\n     */\n    this.urlFind = options.urlFind || 'https://www.cartociudad.es/geocoder/api/geocoder/findJsonp';\n\n    /**\n     * This variable indicates Geocoder Reverse service url\n     * @private\n     * @type {string}\n     */\n    this.urlReverse = options.urlReverse || 'https://www.cartociudad.es/geocoder/api/geocoder/reverseGeocode';\n\n    /**\n     * This variable indicates Nomenclator url prefix\n     * @private\n     * @type {string}\n     */\n    this.urlPrefix = options.urlPrefix || 'http://www.idee.es/';\n\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.urlAssistant = options.urlAssistant || 'https://www.idee.es/communicationsPoolServlet/SearchAssistant';\n\n    /**\n     * This variable indicates Nomenclator Dispatcher service url\n     * @private\n     * @type {string}\n     */\n    this.urlDispatcher = options.urlDispatcher || 'https://www.idee.es/communicationsPoolServlet/Dispatcher';\n\n    /**\n     * This variable indicates which entity types should be searched on Nomenclator service.\n     * @private\n     * @type {Array<string>}\n     */\n    this.nomenclatorSearchType = options.nomenclatorSearchType;\n\n    /**\n     * This variable indicates whether result geometry should be drawn on map.\n     * @private\n     * @type {boolean}\n     */\n    this.resultVisibility = options.resultVisibility || true;\n\n    /**\n     * This variable indicates whether the plugin can be collapsed.\n     * @private\n     * @type {boolean}\n     */\n    this.isCollapsed = options.isCollapsed || false;\n\n    /**\n     * This variable indicates plugin's position on window\n     * @private\n     * @type {string} { 'TL' | 'TR' | 'BL' | 'BR' } (corners)\n     */\n    this.position = options.position || 'TL';\n\n    /**\n     * @private\n     * @type {string} - tooltip on hover on plugin button\n     */\n    this.tooltip_ = options.tooltip || 'Búsqueda de lugares';\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.reverse_ = options.reverse || false;\n\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.locationID_ = (options.locationID && options.locationID.replace(/\\^/g, '&')) || '';\n\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.requestStreet_ = (options.requestStreet && options.requestStreet.replace(/\\^/g, '&')) || '';\n\n    let geocoderCoords = options.geocoderCoords;\n    if (M.utils.isString(geocoderCoords)) {\n      geocoderCoords = geocoderCoords.split(',');\n      geocoderCoords = [Number.parseFloat(geocoderCoords[0]),\n        Number.parseFloat(geocoderCoords[1]),\n      ];\n    }\n    /**\n     * Geocoder reverse coordinates\n     *\n     * @private\n     * @type {number}\n     */\n    this.geocoderCoords_ = geocoderCoords || [];\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api\n   */\n  addTo(map) {\n    this.controls_.push(new IGNSearchControl(\n      this.servicesToSearch,\n      this.maxResults,\n      this.noProcess,\n      this.countryCode,\n      this.urlCandidates,\n      this.urlFind,\n      this.urlReverse,\n      this.urlPrefix,\n      this.urlAssistant,\n      this.urlDispatcher,\n      this.resultVisibility,\n      this.reverse_,\n      this.locationID_,\n      this.requestStreet_,\n      this.geocoderCoords_,\n    ));\n    this.controls_[0].on('ignsearch:entityFound', (extent) => {\n      this.fire('ignsearch:entityFound', [extent]);\n    });\n    this.map_ = map;\n    this.panel_ = new M.ui.Panel('panelIGNSearch', {\n      collapsible: true,\n      position: M.ui.position[this.position],\n      collapsed: this.isCollapsed,\n      className: 'ign-search-panel',\n      tooltip: this.tooltip_,\n    });\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n  }\n\n  /**\n   * This function sets geometry visibility on map (visible|invisible).\n   * @public\n   * @function\n   * @param {boolean} flag\n   * @api\n   */\n  setResultVisibility(flag) {\n    this.controls_[0].setResultVisibility(flag);\n  }\n\n  /**\n   * Name of the plugin\n   *\n   * @getter\n   * @function\n   */\n  get name() {\n    return 'ignsearch';\n  }\n\n  /**\n   * Reverse parameter\n   *\n   * @getter\n   * @function\n   */\n  get reverse() {\n    return this.reverse_;\n  }\n\n  /**\n   * Reverse geocoder coordinates\n   *\n   * @getter\n   * @function\n   */\n  get geocoderCoords() {\n    return this.controls_[0].geocoderCoords;\n  }\n\n  /**\n   * Text to search\n   * @getter\n   * @function\n   */\n  get requestStreet() {\n    return this.controls_[0].requestStreet;\n  }\n\n  /**\n   * Text to search\n   * @getter\n   * @function\n   */\n  get locationID() {\n    return this.controls_[0].locationID;\n  }\n\n  /**\n   * Get the API REST Parameters of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRest() {\n    return `${this.name}=${this.servicesToSearch}*${this.maxResults}*${this.noProcess}*${this.resultVisibility}*${this.isCollapsed}*${this.position}*${this.reverse}*${this.requestStreet.replace(/&/g, '^')}*${this.locationID}*${this.geocoderCoords}`;\n  }\n}\n","import M$plugin$IGNSearch from './/facade/js/ignsearch';\nimport M$control$IGNSearchControl from './/facade/js/ignsearchcontrol';\nimport M$impl$control$IGNSearchControl from './/impl/ol/js/ignsearchcontrol';\n\nif (!window.M.plugin) window.M.plugin = {};\nif (!window.M.control) window.M.control = {};\nif (!window.M.impl) window.M.impl = {};\nif (!window.M.impl.control) window.M.impl.control = {};\nwindow.M.plugin.IGNSearch = M$plugin$IGNSearch;\nwindow.M.control.IGNSearchControl = M$control$IGNSearchControl;\nwindow.M.impl.control.IGNSearchControl = M$impl$control$IGNSearchControl;\n"],"sourceRoot":""}