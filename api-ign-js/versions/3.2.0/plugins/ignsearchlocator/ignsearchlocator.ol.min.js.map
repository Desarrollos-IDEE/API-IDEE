{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/templates/ignsearchlocator.html","webpack:///./src/templates/results.html","webpack:///./src/templates/xylocator.html","webpack:///./src/templates/parcela.html","webpack:///./src/templates/refCatastral.html","webpack:///./src/facade/js/ignsearchlocatorcontrol.js","webpack:///./src/impl/ol/js/ignsearchlocatorcontrol.js","webpack:///./src/facade/js/helpers.js","webpack:///./src/facade/js/constants.js","webpack:///./src/facade/js/i18n/language.js","webpack:///./src/facade/js/ignsearchlocator.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","typingTimer","IGNSearchLocatorControl","M","impl","Control","map","html","this","_get","_getPrototypeOf","scale","wmts3857scales","newScale","reduce","prev","curr","Math","abs","newResolution","indexOf","facadeMap_","getMapImpl","getView","setResolution","origin","coordinates","originProj","ol","proj","destProj","getProjection","code","coordinatesTransform","transform","normalizeNumber","source","destiny","getTransform","transformFunc","calculated","res","parseFloat","toFixed","registerHelpers","Handlebars","registerHelper","str","toUpperCase","v1","operator","v2","options","fn","inverse","type","address","id","municipality","line","concat","undefined","geographicNameType","translations","en","es","getValue","keyPath","lang","arguments","length","language","getLang","translation","getTranslation","utils","isNullOrEmpty","console","warn","split","current","servicesToSearch","_this","CMC_url","DNPPP_url","CPMRC_url","maxResults","noProcess","countryCode","urlCandidates","urlFind","urlReverse","urlPrefix","urlAssistant","urlDispatcher","resultVisibility","reverse","locationID","requestStreet","geocoderCoords","zoom","searchPosition","position","pointStyle","nomenclatorSearchType","ignsearchlocatorcontrol_classCallCheck","isUndefined","IGNSearchLocatorImplControl","exception","ignsearchlocatorcontrol_possibleConstructorReturn","ignsearchlocatorcontrol_getPrototypeOf","ConsultaMunicipioCodigos_","DNPPP_url_","CPMRC_url_","selectProvincias","selectMunicipios","inputPoligono","inputParcela","inputRefCatastral","resultVisibility_","reverseActivated","urlParse","isXYLocatorActive","parcela_prov","parcela_mun","parcela_pol","parcela_parc","xytype","xydata","xylon","xylat","xylathh","xylatmm","xylatss","xylonhh","xylonmm","xylonss","xyutmx","xyutmy","provincecode","municipalityvalue","inputRC_","_this2","destroyMapLayers","Promise","success","template","compileSync","vars","direccion","obtener","buscparcela","busccoord","borrarresult","resultsBox","querySelector","searchInput","addEventListener","clearResultsAndGeometry","openParcela","openXYLocator","e","createTimeout","document","getElementById","style","backgroundColor","clearResults","activationManager","clearTimeout","activateDeactivateReverse","clickReverseEvent","on","evt","CLICK","showReversePopUp","changePlaceholder","display","ADDED_TO_MAP","point","Point","radius","icon","form","class","rotation","rotate","offset","color","opacity","simple","Polygon","fill","drawNomenclatorResult","proxy","remote","then","geoJsonData","text","substring","removeLayers","clickedElementLayer","featureJSON","JSON","parse","geometry","fixCoordinatesPath","properties","lat","lng","layer","GeoJSON","features","displayInLayerSwitcher","createGeometryStyles","setStyle","setZIndex","addLayers","fullAddress","createFullAddress","perfectResult","state","showSearchPopUp","fake","reprojCoords","getImpl","reproject","coord","getLayers","removePopup","_this3","etrs89pointCoordinates","reprojectReverse","params","urlToGet","mapCoordinates","dataCoordinates","returnData","showPopUp","_this4","setTimeout","searchInputValue","control","_this5","firstResult","target","replace","searchValue","innerHTML","classList","add","fontSize","nomenclatorCandidates","geocoderCandidates","allCandidates","getNomenclatorData","getCandidatesData","j","push","compiledResult","results","places","elementList","querySelectorAll","forEach","listElement","goToLocation","item","click","remove","appendChild","parragraph","createElement","infoMsg","createTextNode","_this6","datosCoordenadas","urlSinJSON","geoJsonData2","includes","hol","holita","log","zoomInLocation","jsonResult","via","tip_via","portal","portalNumber","muni","province","locationId","_this7","zoomIn","requestPlace","addParameters","request","query","sourcename","outputformat","latLngString","location","resultTitle","title","latLngArray","latitude","longitude","newGeojson","inputValue","resultsArray","_this8","newInputVal","window","encodeURIComponent","resolve","_this9","thisElement","splice","elementsData","_this10","element","getAttribute","parenthesisIndex","_this11","currentElement","selectedObject","findClickedItem","getFindData","drawGeocoderResultProv","drawGeocoderResult","service","_this12","resultsList","Vector","calculateMaxExtent","extent","setBbox","setScale","setZoom","fire","filter","feature","setOfCoordinates","coordinatesLayer","getPopup","popup","compiledXYLocator","refCatastral","titlerefCatastral","refCastatro","search","onRCSearch","preventDefault","element_","keyCode","inputRC","dialog","info","substr","searchUrl","Provincia","Municipio","SRS","RC","search_","showResults_","processor","_this13","response","acceptOVCSW","xml","result","resultsTemplateVars","_this14","parseRCResultsForTemplate_","resultTemplate","drawGeocoderResultRC","append","docs","parseCPMRCResults","rcResults_","unshift","total","partial","notResutls","attri","coords","xcen","ycen","locator_","attributes","showSearchPopUpRC","y","xFloat","yFloat","setCenter","_this15","parcela","titleparcela","selectmuni","selectprov","estate","plot","notaRef","onProvinciaSelect","onParamsSearch","_this16","CodigoProvincia","CodigoMunicipio","CodigoMunicipioINE","Poligono","Parcela","parseParamsResultsForTemplate_","rcNode","_this17","rootElement","getElementsByTagName","lrcdnpNode","pc1Value","childNodes","nodeValue","pc2Value","docsRC","xmlResults","coordNode","pcNode","pc1Node","pc2Node","geoNode","xcenNode","ycenNode","srsNode","rcId","srs","error","errorCtlNode","cuerr","errorDescTxt","SEARCHING_CLASS","err","idprov","munici","_this18","provinceCode","clearMunicipiosSelect","CodigoMunicipioIne","loadMunicipiosSelect","muniNodes","select","option","locat","firstChild","removeChild","_this19","xylocator","locate","negative","east","west","north","south","geographic","zone","dms","dd","selectTarget","selectedIndex","setAttribute","manageInputs_","calculate_","clickedGeometry","drawingDiv","parentNode","selectedOption","x","xString","yString","hhLon","mmLon","ssLon","dirLon","hhLat","mmLat","ssLat","dirLat","checkDegreeValue_","ex","reprojectXY","num","Number","isNaN","center","Feature","addFeatures","stroke","width","flag","placeholder","border","src","concatUrlPaths","config","THEME_URL","exactResult","exitState","destinyProj","newCoordinates","mapcoords","featureCoordinates","addTab","featureTabOpts","content","Popup","myPopUp","panMapIfOutOfView","addPopup","IGNSearchLocator","ignsearchlocator_classCallCheck","ignsearchlocator_possibleConstructorReturn","ignsearchlocator_getPrototypeOf","map_","controls_","isCollapsed","collapsible","tooltip_","tooltip","reverse_","locationID_","requestStreet_","isString","geocoderCoords_","metadata_","api","metadata","zoom_","parseInt","Plugin","data","panel_","ui","Panel","collapsed","className","collapsedButtonClass","addControls","addPanels","setResultVisibility","plugin","removeControls","_ref","M$plugin$IGNSearchLocator","M$control$IGNSearchLocatorControl","M$impl$control$IGNSearchLocatorControl"],"mappings":"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","file":"ignsearchlocator.ol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-control m-container m-ignsearchlocator\\\" title=\\\"\\\">\\n    <div class=\\\"search-panel\\\">\\n        <input type=\\\"text\\\" id=\\\"m-ignsearchlocator-search-input\\\" class=\\\"m-input-search\\\" title=\\\"{{translations.direccion}}\\\" placeholder=\\\"{{translations.direccion}}\\\" />\\n        <button id=\\\"m-ignsearchlocator-locate-button\\\" title=\\\"{{translations.obtener}}\\\">\\n            <span class=\\\"icon-localizacion3\\\" />\\n        </button>\\n        <!-- <button id=\\\"m-ignsearchlocator-search-refCatastral\\\" class=\\\"m-button-limpiar2\\\" title=\\\"{{translations.buscparcela}}\\\">\\n            <span class=\\\"icon-posicionRC\\\" />\\n        </button> -->\\n        <button id=\\\"m-ignsearchlocator-parcela-button\\\" class=\\\"m-button-limpiar2\\\" title=\\\"{{translations.buscparcela}}\\\">\\n            <span class=\\\"icon-posicionRC\\\" />\\n        </button>\\n        <button id=\\\"m-ignsearchlocator-xylocator-button\\\" class=\\\"m-button-limpiar\\\" title=\\\"{{translations.busccoord}}\\\">\\n            <span class=\\\"icon-posicion3\\\" />\\n        </button>\\n        <button id=\\\"m-ignsearchlocator-clear-button\\\" class=\\\"m-button-limpiar\\\" title=\\\"{{translations.borrarresult}}\\\">\\n            <span class=\\\"icon-papelera\\\" />\\n        </button>\\n    </div>\\n    <div id=\\\"m-ignsearchlocator-results\\\">\\n        <!-- Here goes the list of search results -->\\n    </div>\\n</div>\";","module.exports = \"<ul id=\\\"m-ignsearchlocator-results-list\\\">\\n    {{#each places}}\\n        {{#if this.address}}\\n            {{#printType this.type this.address this.id this.municipality}}\\n            {{/printType}}\\n        {{else}}\\n            {{#printType this.type this.title this.id this.municipality}}\\n            {{/printType}}\\n        {{/if}}\\n    {{/each}}\\n</ul>\";","module.exports = \"<div class=\\\"m-xylocator-container\\\">\\n    <div class=\\\"m-xylocator-panel panel-codigo\\\">\\n        <div class=\\\"title\\\">{{translations.title}}</div>\\n        <div class=\\\"m-xylocator-datas\\\">\\n            <div id=\\\"m-xylocator-coordinatesSystemXYLocator\\\">\\n                <br>\\n                <b><span>{{translations.srs}}:</span></b>\\n                <select name=\\\"srs\\\" id=\\\"m-xylocator-srs\\\" class=\\\"dropdown\\\">\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"d\\\" value=\\\"EPSG:4258d\\\" option=\\\"selected\\\">ETRS89 {{translations.geographic}} (4258) {{translations.dd}}</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"d\\\" value=\\\"EPSG:4326d\\\">WGS84 {{translations.geographic}} (4326) {{translations.dd}}</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"dms\\\" value=\\\"EPSG:4258dms\\\" option=\\\"selected\\\">ETRS89 {{translations.geographic}} (4258) {{translations.dms}}</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"dms\\\" value=\\\"EPSG:4326dms\\\">WGS84 {{translations.geographic}} (4326) {{translations.dms}}</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:3857\\\">WGS84 Pseudo Mercator (3857)</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:25831\\\">ETRS89 UTM {{translations.zone}} 31N (25831)</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:25830\\\">ETRS89 UTM {{translations.zone}} 30N (25830)</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:25829\\\">ETRS89 UTM {{translations.zone}} 29N (25829)</option>\\n                    <option class=\\\"m-xylocator-srs-option\\\" data-units=\\\"m\\\" value=\\\"EPSG:25828\\\">ETRS89 UTM {{translations.zone}} 28N (25828)</option>\\n                </select>\\n            </div>\\n            <div id=\\\"m-xylocator-utm\\\" style=\\\"display:none;\\\">\\n                <b>\\n                    <p class=\\\"parcela--input\\\" style=\\\"width: 0px !important;\\\">X:</p>\\n                </b>\\n                <input type=\\\"text\\\" name=\\\"UTM-X\\\" id=\\\"UTM-X\\\" placeholder=\\\"234798,13\\\" style=\\\"color:black\\\">\\n                <b>\\n                    <p class=\\\"parcela--input\\\" style=\\\"width: 0px !important; margin-left: 15px;\\\">Y:</p>\\n                </b>\\n                <input type=\\\"text\\\" name=\\\"UTM-Y\\\" id=\\\"UTM-Y\\\" placeholder=\\\"4154570,15\\\" style=\\\"color:black\\\">\\n            </div>\\n            <div id=\\\"m-xylocator-dms\\\" style=\\\"display:none;\\\">\\n                <b>\\n                    <p>{{translations.longitude}}:</p>\\n                </b>\\n                <div style=\\\"margin-bottom: -1.5rem;\\\">\\n                    <div>\\n                        <input type=\\\"number\\\" name=\\\"LONHH\\\" id=\\\"LONHH\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"180\\\" style=\\\"color:black\\\"><span>º</span>\\n                    </div>\\n                    <div>\\n                        <input type=\\\"number\\\" name=\\\"LONMM\\\" id=\\\"LONMM\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"59\\\" style=\\\"color:black\\\"><span>'</span>\\n                    </div>\\n                    <div>\\n                        <input type=\\\"number\\\" name=\\\"LONSS\\\" id=\\\"LONSS\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"59.9999\\\" style=\\\"color:black\\\"><span>''</span>\\n                    </div>\\n                    <div class=\\\"m-xylocator-dms-radio\\\">\\n                        <table>\\n                            <tbody>\\n                                <tr>\\n                                    <td><input type=\\\"radio\\\" name=\\\"LONDIR\\\" style=\\\"color:black\\\" value=\\\"east\\\" checked></td>\\n                                    <td>{{translations.east}}</td>\\n                                </tr>\\n                                <tr>\\n                                    <td><input type=\\\"radio\\\" name=\\\"LONDIR\\\" style=\\\"color:black\\\" value=\\\"west\\\"></td>\\n                                    <td>{{translations.west}}</td>\\n                                </tr>\\n                                </tbdoy>\\n                        </table>\\n                    </div>\\n                </div>\\n                <b>\\n                    <p>{{translations.latitude}}:</p>\\n                </b>\\n                <div style=\\\"margin-bottom: -0.8rem;\\\">\\n                    <div>\\n                        <input type=\\\"number\\\" name=\\\"LATHH\\\" id=\\\"LATHH\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"180\\\" style=\\\"color:black\\\"><span>º</span>\\n                    </div>\\n                    <div>\\n                        <input type=\\\"number\\\" name=\\\"LATMM\\\" id=\\\"LATMM\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"59\\\" style=\\\"color:black\\\"><span>'</span>\\n                    </div>\\n                    <div>\\n                        <input type=\\\"number\\\" name=\\\"LATSS\\\" id=\\\"LATSS\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"59.9999\\\" style=\\\"color:black\\\"><span>''</span>\\n                    </div>\\n                    <div class=\\\"m-xylocator-dms-radio\\\">\\n                        <table>\\n                            <tbody>\\n                                <tr>\\n                                    <td><input type=\\\"radio\\\" name=\\\"LATDIR\\\" style=\\\"color:black\\\" value=\\\"north\\\" checked></td>\\n                                    <td>{{translations.north}}</td>\\n                                </tr>\\n                                <tr>\\n                                    <td><input type=\\\"radio\\\" name=\\\"LATDIR\\\" style=\\\"color:black\\\" value=\\\"south\\\"></td>\\n                                    <td>{{translations.south}}</td>\\n                                </tr>\\n                                </tbdoy>\\n                        </table>\\n                    </div>\\n                </div>\\n            </div>\\n            <div class=\\\"m-xylocator-lonlat\\\" id=\\\"m-xylocator-latlon\\\">\\n                <b>\\n                    <p class=\\\"parcela--input\\\" style=\\\"width: 0px !important;\\\">{{translations.longitude}}:</p>\\n                </b>\\n                <input type=\\\"text\\\" title=\\\"{{translations.negative}}\\\" name=\\\"LON\\\" id=\\\"LON\\\" placeholder=\\\"-6,0\\\" style=\\\"color:black\\\">\\n                <b>\\n                    <p class=\\\"parcela--input\\\" style=\\\"width: 0px !important;\\\">{{translations.latitude}}:</p>\\n                </b>\\n                <input type=\\\"text\\\" title=\\\"{{translations.negative}}\\\" name=\\\"LAT\\\" id=\\\"LAT\\\" placeholder=\\\"37,5\\\" style=\\\"color:black\\\"></br>\\n                <i>\\n                    <p id=\\\"m-informa\\\" class=\\\"parcela--input\\\" style=\\\"width: 0px !important; display: contents; font-size: 13px; font-family: auto;\\\">{{translations.negative}}</p>\\n                </i>\\n            </div>\\n        </div>\\n        <div class=\\\"button\\\">\\n            <button class=\\\"represent\\\" id=\\\"m-xylocator-loc\\\">\\n                <i class=\\\"icon-posicion3\\\"></i> {{translations.locate}}\\n            </button>\\n        </div>\\n    </div>\\n</div>\";","module.exports = \"<div class=\\\"m-xylocator-container\\\">\\n    <div class=\\\"m-xylocator-panel panel-codigo\\\">\\n        <div class=\\\"title\\\">{{translations.titleparcela}}</div>\\n        <div class=\\\"m-xylocator-datas\\\">\\n            <div id=\\\"m-searchParams-container\\\">\\n                <div id=\\\"m-xylocator-coordinatesSystemParcela\\\">\\n                    <b>\\n                        <p id=\\\"m-provin\\\" class=\\\"parcela--input\\\">{{translations.province}}:</p>\\n                    </b>\\n                    <select id=\\\"m-searchParamsProvincia-select\\\" name=\\\"srs\\\" class=\\\"dropdown\\\">\\n                        <option value=\\\"0\\\">{{translations.selectprov}}</option>\\n                        <option value=\\\"02\\\">ALBACETE</option>\\n                        <option value=\\\"03\\\">ALICANTE/ALACANT</option>\\n                        <option value=\\\"04\\\">ALMERÍA</option>\\n                        <option value=\\\"01\\\">ARABA/ÁLAVA</option>\\n                        <option value=\\\"33\\\">ASTURIAS</option>\\n                        <option value=\\\"05\\\">ÁVILA</option>\\n                        <option value=\\\"06\\\">BADAJOZ</option>\\n                        <option value=\\\"07\\\">BALEARS, ILLES</option>\\n                        <option value=\\\"08\\\">BARCELONA</option>\\n                        <option value=\\\"48\\\">BIZKAIA</option>\\n                        <option value=\\\"09\\\">BURGOS</option>\\n                        <option value=\\\"10\\\">CÁCERES</option>\\n                        <option value=\\\"11\\\">CÁDIZ</option>\\n                        <option value=\\\"39\\\">CANTABRIA</option>\\n                        <option value=\\\"12\\\">CASTELLÓN/CASTELLÓ</option>\\n                        <option value=\\\"13\\\">CIUDAD REAL</option>\\n                        <option value=\\\"14\\\">CÓRDOBA</option>\\n                        <option value=\\\"15\\\">CORUÑA, A</option>\\n                        <option value=\\\"16\\\">CUENCA</option>\\n                        <option value=\\\"20\\\">GIPUZKOA</option>\\n                        <option value=\\\"17\\\">GIRONA</option>\\n                        <option value=\\\"18\\\">GRANADA</option>\\n                        <option value=\\\"19\\\">GUADALAJARA</option>\\n                        <option value=\\\"21\\\">HUELVA</option>\\n                        <option value=\\\"22\\\">HUESCA</option>\\n                        <option value=\\\"23\\\">JAÉN</option>\\n                        <option value=\\\"24\\\">LEÓN</option>\\n                        <option value=\\\"25\\\">LLEIDA</option>\\n                        <option value=\\\"27\\\">LUGO</option>\\n                        <option value=\\\"28\\\">MADRID</option>\\n                        <option value=\\\"29\\\">MÁLAGA</option>\\n                        <option value=\\\"30\\\">MURCIA</option>\\n                        <option value=\\\"31\\\">NAVARRA</option>\\n                        <option value=\\\"32\\\">OURENSE</option>\\n                        <option value=\\\"34\\\">PALENCIA</option>\\n                        <option value=\\\"35\\\">PALMAS, LAS</option>\\n                        <option value=\\\"36\\\">PONTEVEDRA</option>\\n                        <option value=\\\"26\\\">RIOJA, LA</option>\\n                        <option value=\\\"37\\\">SALAMANCA</option>\\n                        <option value=\\\"38\\\">SANTA CRUZ DE TENERIFE</option>\\n                        <option value=\\\"40\\\">SEGOVIA</option>\\n                        <option value=\\\"41\\\">SEVILLA</option>\\n                        <option value=\\\"42\\\">SORIA</option>\\n                        <option value=\\\"43\\\">TARRAGONA</option>\\n                        <option value=\\\"44\\\">TERUEL</option>\\n                        <option value=\\\"45\\\">TOLEDO</option>\\n                        <option value=\\\"46\\\">VALENCIA/VALÈNCIA</option>\\n                        <option value=\\\"47\\\">VALLADOLID</option>\\n                        <option value=\\\"49\\\">ZAMORA</option>\\n                        <option value=\\\"50\\\">ZARAGOZA</option>\\n                        <option value=\\\"51\\\">CEUTA</option>\\n                        <option value=\\\"52\\\">MELILLA</option>\\n                    </select>\\n                </div>\\n                <div id=\\\"m-xylocator-coordinatesSystemParcela\\\">\\n                    <b>\\n                        <p id=\\\"m-munici\\\" class=\\\"parcela--input\\\">{{translations.municipality}}:</p>\\n                    </b>\\n                    <select id=\\\"m-searchParamsMunicipio-select\\\" name=\\\"Municipios\\\" class=\\\"dropdown\\\">\\n                        <option value=\\\"0\\\">{{translations.selectmuni}}</option>\\n                    </select>\\n                </div>\\n\\n                <div id=\\\"m-xylocator-dms\\\">\\n                    <b>\\n                        <p class=\\\"parcela--input\\\" style=\\\"width:60px\\\">{{translations.estate}}:</p>\\n                    </b>\\n                    <input type=\\\"text\\\" id=\\\"m-searchParamsPoligono-input\\\" style=\\\"color:black\\\">\\n                    <b>\\n                        <p class=\\\"parcela--input\\\" style=\\\"width: auto\\\">{{translations.plot}}:</p>\\n                    </b>\\n                    <input type=\\\"text\\\" id=\\\"m-searchParamsParcela-input\\\" style=\\\"color:black\\\">\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"button\\\">\\n            <button class=\\\"represent\\\" id=\\\"m-searchParams-button\\\" style=\\\"margin-right:10px\\\">\\n                <i class=\\\"icon-posicion4\\\"></i> {{translations.search}}\\n            </button>\\n        </div>\\n\\n        <div class=\\\"m-xylocator-datas\\\">\\n            <div id=\\\"m-searchParams-container\\\">\\n                <div id=\\\"m-xylocator-coordinatesSystemRefCatastral\\\">\\n                    <b>\\n                        <p class=\\\"refCastastrl--input\\\">{{translations.refCastatro}}:</p>\\n                    </b>\\n                    <input type=\\\"text\\\" id=\\\"m-refCatastral-input\\\" style=\\\"color:black; width: 97% !important;\\\" maxlength=\\\"20\\\">\\n\\n                    <i>\\n                        <p id=\\\"m-informa\\\" class=\\\"parcela--input\\\" style=\\\"width: 0px !important; display: contents; font-size: 13px; font-family: auto;\\\">{{translations.notaRef}}</p>\\n                    </i>\\n                </div>\\n\\n            </div>\\n        </div>\\n\\n        <div class=\\\"button\\\">\\n            <button class=\\\"represent\\\" id=\\\"m-refCatastral-button\\\" style=\\\"margin-left:10px\\\">\\n                <i class=\\\"icon-posicionRC\\\"></i> {{translations.search}}\\n            </button>\\n        </div>\\n    </div>\\n\\n</div>\\n</div>\";","module.exports = \"<div class=\\\"m-xylocator-container\\\">\\n    <div class=\\\"m-xylocator-panel panel-codigo\\\">\\n        <div class=\\\"title\\\">{{translations.titlerefCatastral}}</div>\\n        <div class=\\\"m-xylocator-datas\\\">\\n            <div id=\\\"m-searchParams-container\\\">\\n                <div id=\\\"m-xylocator-coordinatesSystemRefCatastral\\\">\\n                    <b>\\n                        <p class=\\\"refCastastrl--input\\\">{{translations.refCastatro}}:</p>\\n                    </b>\\n                    <input type=\\\"text\\\" id=\\\"m-refCatastral-input\\\" style=\\\"color:black; width: 230px;\\\" maxlength=\\\"20\\\">\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"button\\\">\\n            <button class=\\\"represent\\\" id=\\\"m-refCatastral-button\\\">\\n                <i class=\\\"icon-posicion4\\\"></i> {{translations.search}}\\n            </button>\\n        </div>\\n    </div>\\n\\n</div>\\n</div>\";","/**\n * @module M/control/IGNSearchLocatorControl\n */\nimport IGNSearchLocatorImplControl from '../../impl/ol/js/ignsearchlocatorcontrol';\nimport template from '../../templates/ignsearchlocator';\nimport results from '../../templates/results';\nimport xylocator from '../../templates/xylocator';\nimport parcela from '../../templates/parcela';\nimport refCatastral from '../../templates/refCatastral';\nimport registerHelpers from './helpers';\nimport geographicNameType from './constants';\nimport { getValue } from './i18n/language';\n\nlet typingTimer;\n/**\n * @classdesc\n * This class creates an input for searching locations on a map.\n * It uses Instituto Geográfico Nacional services Geocoder and Nomenclator\n * to search user's input location and return coordinates on click.\n */\nexport default class IGNSearchLocatorControl extends M.Control {\n  /*\n   * @constructor\n   * @extends {M.Control}\n   * @api\n   */\n  constructor(\n    servicesToSearch,\n    CMC_url = null,\n    DNPPP_url = null,\n    CPMRC_url = null,\n    maxResults,\n    noProcess,\n    countryCode,\n    urlCandidates,\n    urlFind,\n    urlReverse,\n    urlPrefix,\n    urlAssistant,\n    urlDispatcher,\n    resultVisibility = true,\n    reverse,\n    locationID,\n    requestStreet,\n    geocoderCoords,\n    zoom,\n    searchPosition,\n    position,\n    pointStyle,\n    nomenclatorSearchType = geographicNameType,\n  ) {\n    if (M.utils.isUndefined(IGNSearchLocatorImplControl)) {\n      M.exception(getValue('impl'));\n    }\n    const impl = new IGNSearchLocatorImplControl();\n    super(impl, 'IGNSearchLocator');\n    // Class properties\n    /**\n     * This variable indicates which services should be searched\n     * (geocoder, nomenclator or both)\n     * @private\n     * @type {string} - 'g' | 'n' | 'gn'\n     */\n    this.servicesToSearch = servicesToSearch;\n\n    /**\n     * Url for \"consulta de municipios para una provincia\"\n     * @private\n     * @type {String}\n     */\n    // eslint-disable-next-line camelcase\n    this.ConsultaMunicipioCodigos_ = CMC_url;\n\n    /**\n     * Url for \"consulta de datos no protegidos para un inmueble por su polígono parcela\"\n     * @private\n     * @type {String}\n     */\n    // eslint-disable-next-line camelcase\n    this.DNPPP_url_ = DNPPP_url;\n\n    /**\n     * Url for \"consulta de coordenadas por Provincia, Municipio y Referencia Catastral\"\n     * @private\n     * @type {String}\n     */\n    // eslint-disable-next-line camelcase\n    this.CPMRC_url_ = CPMRC_url;\n\n    /**\n     * Select element for Provincias\n     * @private\n     * @type {HTMLElement}\n     */\n    this.selectProvincias = null;\n\n    /**\n     * Select element for Municipios\n     * @private\n     * @type {HTMLElement}\n     */\n    this.selectMunicipios = null;\n\n    /**\n     * Input element for Poligono\n     * @private\n     * @type {HTMLElement}\n     */\n    this.inputPoligono = null;\n\n    /**\n     * Input element for Parcela\n     * @private\n     * @type {HTMLElement}\n     */\n    this.inputParcela = null;\n\n    /**\n     * Input element for Parcela\n     * @private\n     * @type {HTMLElement}\n     */\n    this.inputRefCatastral = null;\n    /**\n     * This variable sets the maximun results returned by a service\n     * (if both services are searched the maximum results will be twice this number)\n     * @private\n     * @type {number}\n     */\n    this.maxResults = maxResults;\n    /**\n     * This variables indicates which entities shouldn't be searched\n     * @private\n     * @type {string} - 'municipio' | 'poblacion' | 'toponimo' | 'municipio,poblacion' | etc\n     */\n    this.noProcess = noProcess;\n    /**\n     * This variable indicates the country code.\n     * @private\n     * @type {string} - 'es'\n     */\n    this.countryCode = countryCode;\n    /**\n     * This variable indicates Geocoder Candidates service url\n     * @private\n     * @type {string}\n     */\n    this.urlCandidates = urlCandidates;\n    /**\n     * This variable indicates Geocoder Find service url\n     * @private\n     * @type {string}\n     */\n    this.urlFind = urlFind;\n    /**\n     * This variable indicates Geocoder Reverse service url\n     * @private\n     * @type {string}\n     */\n    this.urlReverse = urlReverse;\n    /**\n     * This variable indicates Nomenclator url prefix\n     * @private\n     * @type {string}\n     */\n    this.urlPrefix = urlPrefix;\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.urlAssistant = urlAssistant;\n    /**\n     * This variable indicates Nomenclator Dispatcher service url\n     * @private\n     * @type {string}\n     */\n    this.urlDispatcher = urlDispatcher;\n    /**\n     * This variable indicates whether result geometry should be drawn on map.\n     * @private\n     * @type {boolean}\n     */\n    this.resultVisibility_ = resultVisibility;\n    /**\n     * This variable indicates which entity types should be searched on Nomenclator service.\n     * @private\n     * @type {Array<string>}\n     */\n    this.nomenclatorSearchType = nomenclatorSearchType;\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.searchPosition = searchPosition;\n    /**\n     * This variable indicates whether reverse geocoder button should be available.\n     * @private\n     * @type {Boolean}\n     */\n    this.reverse = reverse;\n    /**\n     * This variable indicates whether reverse geocoder button is activated.\n     * @private\n     * @type {Boolean}\n     */\n    this.reverseActivated = false;\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.locationID = locationID;\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.requestStreet = requestStreet;\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.geocoderCoords = geocoderCoords;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.urlParse = null;\n    registerHelpers();\n\n\n    /**\n     * Checks if point drawing tool is active.\n     * @private\n     * @type {Boolean}\n     */\n    this.isXYLocatorActive = false;\n\n    /**\n     * Zoom\n     *\n     * @private\n     * @type {number}\n     */\n    this.zoom = zoom;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.position = position;\n\n\n    // PARCELA\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.parcela_prov = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.parcela_mun = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.parcela_pol = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.parcela_parc = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xytype = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xydata = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xylon = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xylat = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xylathh = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xylatmm = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xylatss = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xylonhh = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xylonmm = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xylonss = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xyutmx = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.xyutmy = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.provincecode = null;\n\n    /**\n     * Reverse geocoder coordinates\n     * @private\n     * @type {string}\n     */\n    this.municipalityvalue = null;\n\n    /**\n     * This variable indicates Nomenclator url prefix\n     * @private\n     * @type {string}\n     */\n    this.pointStyle = pointStyle;\n\n    /**\n     * Input element for RC\n     * @private\n     * @type {HTMLElement}\n     */\n    this.inputRC_ = null;\n  }\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the control\n   * @api\n   */\n  createView(map) {\n    this.map = map;\n    this.destroyMapLayers();\n    return new Promise((success) => {\n      const html = M.template.compileSync(template, {\n        vars: {\n          translations: {\n            direccion: getValue('direccion'),\n            obtener: getValue('obtener'),\n            buscparcela: getValue('buscparcela'),\n            busccoord: getValue('busccoord'),\n            borrarresult: getValue('borrarresult'),\n          },\n        },\n      });\n      this.html = html;\n      this.resultsBox = html.querySelector('#m-ignsearchlocator-results');\n      this.searchInput = this.html.querySelector('#m-ignsearchlocator-search-input');\n      html.querySelector('#m-ignsearchlocator-clear-button').addEventListener('click', this.clearResultsAndGeometry.bind(this));\n      html.querySelector('#m-ignsearchlocator-parcela-button').addEventListener('click', this.openParcela.bind(this));\n      html.querySelector('#m-ignsearchlocator-xylocator-button').addEventListener('click', this.openXYLocator.bind(this));\n      html.querySelector('#m-ignsearchlocator-search-input').addEventListener('keyup', e => this.createTimeout(e));\n      html.querySelector('#m-ignsearchlocator-search-input').addEventListener('click', () => {\n        if (document.getElementById('m-ignsearchlocator-xylocator-button').style.backgroundColor === 'rgb(113, 167, 211)' ||\n          document.getElementById('m-ignsearchlocator-parcela-button').style.backgroundColor === 'rgb(113, 167, 211)') {\n          // Eliminamos la seleccion del xylocator y parcela\n          this.clearResults();\n          this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n          this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n          // this.activationManager(false, 'm-ignsearchlocator-search-refCatastral');\n        }\n      });\n      html.querySelector('#m-ignsearchlocator-search-input').addEventListener('keydown', () => {\n        clearTimeout(typingTimer);\n      });\n      html.querySelector('#m-ignsearchlocator-search-input').addEventListener('keydown', () => {\n        clearTimeout(typingTimer);\n      });\n      html.querySelector('#m-ignsearchlocator-locate-button').addEventListener('click', this.activateDeactivateReverse.bind(this));\n      document.querySelector('.ign-searchlocator-panel>.m-panel-btn').addEventListener('click', this.clearResults.bind(this));\n      this.clickReverseEvent = this.map.on(M.evt.CLICK, e => this.showReversePopUp(e));\n      this.changePlaceholder();\n      if (!this.reverse) {\n        html.querySelector('#m-ignsearchlocator-locate-button').style.display = 'none';\n      }\n      if (this.position === 'TC') {\n        document.querySelector('.ign-searchlocator-panel').style = 'position: fixed!important; left: calc(50vw - 210px);';\n      }\n\n      this.on(M.evt.ADDED_TO_MAP, () => {\n        if (this.locationID && this.locationID.length > 0) {\n          this.point = new M.style.Point({\n            radius: 5,\n            icon: {\n              form: 'none',\n              class: 'g-cartografia-pin',\n              radius: 12,\n              rotation: 0,\n              rotate: false,\n              offset: [0, -12],\n              color: '#f00',\n              opacity: 1,\n            },\n          });\n          this.simple = new M.style.Polygon({\n            fill: {\n              color: 'black',\n              opacity: 0,\n            },\n          });\n          this.drawNomenclatorResult(this.locationID, false);\n        }\n        if (this.requestStreet && this.requestStreet.length > 0) {\n          M.proxy(false);\n          M.remote.get(this.requestStreet).then((res) => {\n            const geoJsonData = res.text.substring(9, res.text.length - 1);\n            this.map.removeLayers(this.clickedElementLayer);\n            const featureJSON = JSON.parse(geoJsonData);\n            featureJSON.geometry.coordinates = this.fixCoordinatesPath(featureJSON);\n            // Center coordinates\n            this.coordinates = `${featureJSON.properties.lat}, ${featureJSON.properties.lng}`;\n            // New layer with geometry\n            this.clickedElementLayer = new M.layer.GeoJSON({\n              name: getValue('searchresult'),\n              source: {\n                type: 'FeatureCollection',\n                features: [featureJSON],\n              },\n            });\n            this.clickedElementLayer.displayInLayerSwitcher = false;\n\n            this.createGeometryStyles();\n\n            if (featureJSON.geometry.type === 'Point') {\n              this.clickedElementLayer.setStyle(this.point);\n            }\n\n            // Change zIndex value\n            this.clickedElementLayer.setZIndex(999999);\n\n            // Stops showing polygon geometry\n            if (!this.resultVisibility_) {\n              this.clickedElementLayer.setStyle(this.simple);\n            }\n            this.map.addLayers(this.clickedElementLayer);\n            // show popup for streets\n            if (featureJSON.properties.type === 'callejero' || featureJSON.properties.type === 'portal') {\n              const fullAddress = this.createFullAddress(featureJSON.properties);\n\n              const coordinates = [featureJSON.properties.lat, featureJSON.properties.lng];\n              const perfectResult = featureJSON.properties.state;\n              this.showSearchPopUp(fullAddress, coordinates, perfectResult, { fake: true });\n            }\n            M.proxy(true);\n          });\n        }\n        if (this.geocoderCoords && this.geocoderCoords.length === 2) {\n          this.activateDeactivateReverse();\n          const reprojCoords = this.getImpl().reproject(this.geocoderCoords, 'EPSG:4326', map.getProjection().code);\n          this.showReversePopUp({\n            coord: reprojCoords,\n            fake: true,\n          });\n        }\n      });\n      success(html);\n    });\n  }\n\n  /**\n   * This function remove search layers.\n   *\n   * @public\n   * @function\n   * @api\n   *\n   */\n  destroyMapLayers() {\n    for (let i = 0; i < this.map.getLayers().length; i += 1) {\n      if (this.map.getLayers()[i].name === getValue('searchresult')) {\n        this.map.removeLayers(this.map.getLayers()[i]);\n        this.map.removePopup();\n      }\n    }\n  }\n\n  /**\n   * This function toggles reverse geocoder button activation.\n   *\n   * @public\n   * @function\n   * @api\n   *\n   */\n  activateDeactivateReverse() {\n    if (!this.reverseActivated) {\n      this.reverseActivated = true;\n      document.querySelector('#m-ignsearchlocator-locate-button span').style.color = '#71a7d3';\n    } else {\n      this.reverseActivated = false;\n      document.querySelector('#m-ignsearchlocator-locate-button span').style.color = '#7A7A73';\n    }\n  }\n  /**\n   * This function shows information tooltip on clicked point.\n   * @param {Event} e - Event\n   */\n  showReversePopUp(e) {\n    if (this.reverseActivated) {\n      // Reproject coordinates to ETRS89 on decimal grades (+ North latitude and East longitude)\n      const origin = this.map.getProjection().code;\n      const destiny = 'EPSG:4258';\n      const etrs89pointCoordinates = this.getImpl()\n        .reprojectReverse([e.coord[0], e.coord[1]], origin, destiny);\n      // Params:\n      // lon, lat\n      // type (only if refcatastral) = 'refcatastral'\n      const params = `lon=${etrs89pointCoordinates[0]}&lat=${etrs89pointCoordinates[1]}`;\n      const urlToGet = `${this.urlReverse}?${params}`;\n      const mapCoordinates = e.coord;\n      this.geocoderCoords = etrs89pointCoordinates;\n      const dataCoordinates = [etrs89pointCoordinates[1], etrs89pointCoordinates[0]];\n      let fullAddress = '';\n      // if device is mobile\n      // if (window.navigator.userAgent.match(/Android/i) ||\n      //   window.navigator.userAgent.match(/webOS/i) ||\n      //   window.navigator.userAgent.match(/iPhone/i) ||\n      //   window.navigator.userAgent.match(/iPad/i) ||\n      //   window.navigator.userAgent.match(/iPod/i) ||\n      //   window.navigator.userAgent.match(/BlackBerry/i) ||\n      //   window.navigator.userAgent.match(/Windows Phone/i)) {\n      //   this.showPopUp('Cargando...', mapCoordinates, dataCoordinates);\n      // }\n      M.remote.get(urlToGet).then((res) => {\n        if (res.text !== null) {\n          const returnData = JSON.parse(res.text);\n          fullAddress = this.createFullAddress(returnData);\n        } else {\n          fullAddress = getValue('exception.exists');\n        }\n        this.showPopUp(fullAddress, mapCoordinates, dataCoordinates, null, true, e);\n      });\n    }\n  }\n\n  /**\n   * This function sets a timeout between keypress and search.\n   * @public\n   * @function\n   * @param {e} event that triggers the method\n   * @api\n   */\n  createTimeout(e) {\n    clearTimeout(typingTimer);\n    typingTimer = setTimeout(() => this.searchInputValue(e), 500);\n  }\n  /**\n   * This function gets activation button\n   *\n   * @public\n   * @function\n   * @param {HTML} html of control\n   * @api\n   */\n  getActivationButton(html) {\n    return html.querySelector('.m-ignsearchlocator button');\n  }\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control to compare\n   * @api\n   */\n  equals(control) {\n    return control instanceof IGNSearchLocatorControl;\n  }\n  /**\n   * This function\n   * 1.- Takes user's input\n   * 2.- Searches for ocurrences on IGN sources\n   * 3.- Returns results as items in a drop-down list (returns address)\n   * 4.- Onclick on an item goes to its coordinates\n   * @public\n   * @function\n   * @param {event} e - event that triggers this method\n   * @api\n   */\n  searchInputValue(e, firstResult = false) {\n    document.getElementById('m-ignsearchlocator-results').style = 'width: 89.6%';\n\n    // const { value } = e.target;\n    const value = e.target.value.replace(',', ' ');\n    this.searchValue = value;\n    if (value.length <= 2) {\n      this.resultsBox.innerHTML = '';\n    } else {\n      this.resultsBox.innerHTML = '';\n      // Adds animation class during loading\n      this.resultsBox.classList.add('g-cartografia-spinner');\n      this.resultsBox.style.fontSize = '24px';\n\n      this.nomenclatorCandidates = [];\n      this.geocoderCandidates = [];\n      this.allCandidates = [];\n\n      // saves on allCandidates search results from Nomenclator (CommunicationPoolservlet)\n      this.getNomenclatorData(value, this.nomenclatorCandidates).then(() => {\n        // saves on allCandidates search results from CartoCiudad (geocoder)\n        this.getCandidatesData(value, this.geocoderCandidates).then(() => {\n          for (let i = 0; i < this.searchPosition.split(',').length; i += 1) {\n            if (this.searchPosition.split(',')[i] === 'nomenclator') {\n              for (let j = 0; j < this.nomenclatorCandidates.length; j += 1) {\n                this.allCandidates.push(this.nomenclatorCandidates[j]);\n              }\n            }\n            if (this.searchPosition.split(',')[i] === 'geocoder') {\n              for (let j = 0; j < this.geocoderCandidates.length; j += 1) {\n                this.allCandidates.push(this.geocoderCandidates[j]);\n              }\n            }\n          }\n          // Clears previous search\n          this.resultsBox.innerHTML = '';\n          const compiledResult = M.template.compileSync(results, {\n            vars: {\n              places: this.allCandidates,\n            },\n          });\n          const elementList = compiledResult.querySelectorAll('li');\n          elementList.forEach((listElement) => {\n            listElement.addEventListener('click', () => {\n              this.goToLocation(listElement);\n            });\n          });\n          if (firstResult === true && elementList.length > 0) {\n            elementList.item(0).click();\n          }\n          // remove animation class and return to normal font size after loading\n          this.resultsBox.classList.remove('g-cartografia-spinner');\n          this.resultsBox.style.fontSize = '1em';\n          this.resultsBox.appendChild(compiledResult);\n          // Service doesn't find results\n          if (this.allCandidates.length === 0) {\n            const parragraph = document.createElement('p');\n            const infoMsg = document.createTextNode(getValue('exception.results'));\n            parragraph.appendChild(infoMsg);\n            this.resultsBox.appendChild(parragraph);\n            document.getElementById('m-ignsearchlocator-results-list').style.display = 'none';\n          } else {\n            document.getElementById('m-ignsearchlocator-results-list').style.display = 'block';\n          }\n        });\n      });\n    }\n  }\n\n\n  /**\n   * This function removes last search layer and adds new layer with current result (from geocoder)\n   * features to map, zooms in result, edits popup information and shows a message saying\n   *  if it's a perfect result or an approximation.\n   * @public\n   * @function\n   * @param {Object} geoJsonData - clicked result object\n   * @api\n   */\n  drawGeocoderResultProv(geoJsonData) {\n    this.map.removeLayers(this.clickedElementLayer);\n\n    M.proxy(false);\n    M.remote.get(this.urlParse).then((res) => {\n      const urlSinJSON = res.text.substring(9, res.text.length - 1);\n\n      let geoJsonData2 = geoJsonData;\n\n      let datosGeometria;\n      let datosCoordenadas;\n      if (urlSinJSON.includes('MULTIPOLYGON (((')) {\n        if (geoJsonData2.includes('\"type\":\"MultiPolygon\"')) {\n          datosGeometria = urlSinJSON.split('(((');\n          datosCoordenadas = datosGeometria[1].split('), (');\n\n\n          if (geoJsonData2.includes(']]]')) {\n            geoJsonData2 = geoJsonData2.replace(']]]', ']]]]');\n          }\n\n          for (let i = 0; i < datosCoordenadas.length; i += 1) {\n            const hol = datosCoordenadas[i].substring(0, 9).replace('(', '');\n\n            if (geoJsonData.includes('[[['.concat(hol))) {\n              geoJsonData2 = geoJsonData2.replace('[[['.concat(hol), '[[[['.concat(hol));\n            } else if (geoJsonData.includes(']],[['.concat(hol))) {\n              geoJsonData2 = geoJsonData2.replace(']],[['.concat(hol), ']]],[[['.concat(hol));\n            } else if (geoJsonData.includes('],['.concat(hol))) {\n              geoJsonData2 = geoJsonData2.replace('],['.concat(hol), ']],[['.concat(hol));\n            }\n          }\n        }\n      } else if (urlSinJSON.includes('POLYGON ((')) {\n        if (geoJsonData2.includes('\"type\":\"Polygon\"')) {\n          datosGeometria = urlSinJSON.split('((');\n          datosCoordenadas = datosGeometria[1].split('), (');\n\n\n          if (geoJsonData2.includes(']]')) {\n            geoJsonData2 = geoJsonData2.replace(']]', ']]]');\n          }\n\n          geoJsonData2 = geoJsonData2.replace('Polygon', 'MultiPolygon');\n\n          for (let i = 0; i < datosCoordenadas.length; i += 1) {\n            const holita = datosCoordenadas[i].substring(0, 15).replace('(', '');\n\n            if (geoJsonData.includes('[[['.concat(holita))) {\n              geoJsonData2 = geoJsonData2.replace('[[['.concat(holita), '[[[['.concat(holita));\n            } else if (geoJsonData.includes('],['.concat(holita))) {\n              geoJsonData2 = geoJsonData2.replace('],['.concat(holita), ']],[['.concat(holita));\n            }\n          }\n        } else if (geoJsonData2.includes('\"type\":\"MultiPolygon\"')) {\n          geoJsonData2 = geoJsonData2.replace(']]],[[', ']],[[');\n          geoJsonData2 = geoJsonData2.replace('\"type\":\"MultiPolygon\"', '\"type\":\"Polygon\"');\n        }\n      }\n\n      if (geoJsonData2.includes('MultiMultiPolygon')) {\n        geoJsonData2 = geoJsonData2.replace('MultiMultiPolygon', 'MultiPolygon');\n      }\n      console.log(geoJsonData2);\n      const featureJSON = JSON.parse(geoJsonData2);\n\n      // featureJSON.geometry.coordinates = this.fixCoordinatesPath(featureJSON);\n      // Center coordinates\n      this.coordinates = `${featureJSON.properties.lat}, ${featureJSON.properties.lng}`;\n      // New layer with geometry\n      this.clickedElementLayer = new M.layer.GeoJSON({\n        name: getValue('searchresult'),\n        source: {\n          type: 'FeatureCollection',\n          features: [featureJSON],\n        },\n      });\n      this.clickedElementLayer.displayInLayerSwitcher = false;\n\n      if (featureJSON.geometry.type === 'Point') {\n        this.clickedElementLayer.setStyle(this.point);\n      }\n\n      // Change zIndex value\n      this.clickedElementLayer.setZIndex(999999);\n\n      // Stops showing polygon geometry\n      if (!this.resultVisibility_) {\n        this.clickedElementLayer.setStyle(this.simple);\n      }\n      this.map.addLayers(this.clickedElementLayer);\n      this.zoomInLocation('g', featureJSON.geometry.type, this.zoom);\n      // show popup for streets\n      if (featureJSON.properties.type === 'callejero' ||\n        featureJSON.properties.type === 'portal') {\n        const fullAddress = this.createFullAddress(featureJSON.properties);\n\n        const coordinates = [featureJSON.properties.lat, featureJSON.properties.lng];\n        const perfectResult = featureJSON.properties.state;\n        this.showSearchPopUp(fullAddress, coordinates, perfectResult);\n      }\n    });\n    M.proxy(true);\n  }\n\n  /**\n   * This function removes last search layer and adds new layer with current result (from geocoder)\n   * features to map, zooms in result, edits popup information and shows a message saying\n   *  if it's a perfect result or an approximation.\n   * @public\n   * @function\n   * @param {Object} geoJsonData - clicked result object\n   * @api\n   */\n  drawGeocoderResult(geoJsonData) {\n    this.map.removeLayers(this.clickedElementLayer);\n    const featureJSON = JSON.parse(geoJsonData);\n    featureJSON.geometry.coordinates = this.fixCoordinatesPath(featureJSON);\n    // Center coordinates\n    this.coordinates = `${featureJSON.properties.lat}, ${featureJSON.properties.lng}`;\n    // New layer with geometry\n    this.clickedElementLayer = new M.layer.GeoJSON({\n      name: getValue('searchresult'),\n      source: {\n        type: 'FeatureCollection',\n        features: [featureJSON],\n      },\n    });\n    this.clickedElementLayer.displayInLayerSwitcher = false;\n\n    if (featureJSON.geometry.type === 'Point') {\n      this.clickedElementLayer.setStyle(this.point);\n    }\n\n    // Change zIndex value\n    this.clickedElementLayer.setZIndex(999999);\n\n    // Stops showing polygon geometry\n    if (!this.resultVisibility_) {\n      this.clickedElementLayer.setStyle(this.simple);\n    }\n    this.map.addLayers(this.clickedElementLayer);\n    this.zoomInLocation('g', featureJSON.geometry.type, this.zoom);\n    // show popup for streets\n    if (featureJSON.properties.type === 'callejero' || featureJSON.properties.type === 'portal') {\n      const fullAddress = this.createFullAddress(featureJSON.properties);\n\n      const coordinates = [featureJSON.properties.lat, featureJSON.properties.lng];\n      const perfectResult = featureJSON.properties.state;\n      this.showSearchPopUp(fullAddress, coordinates, perfectResult);\n    }\n  }\n  /**\n   * This function takes data from an entity and returns the complete address\n   * @param {string} jsonResult - json string with entity data\n   */\n  createFullAddress(jsonResult) {\n    const via = (jsonResult.tip_via === null ||\n      jsonResult.tip_via === undefined) ? '' : jsonResult.tip_via;\n    const address = (jsonResult.address === null ||\n      jsonResult.address === undefined) ? '' : jsonResult.address;\n    const portal = (jsonResult.portalNumber === null ||\n      jsonResult.portalNumber === undefined ||\n      jsonResult.portalNumber === 0) ? '' : jsonResult.portalNumber;\n    const muni = (jsonResult.muni === null ||\n      jsonResult.muni === undefined) ? '' : jsonResult.muni;\n    const province = (jsonResult.province === null ||\n      jsonResult.province === undefined) ? '' : jsonResult.province;\n    return `${via} ${address} ${portal}, ${muni.toUpperCase()}, ${province.toUpperCase()}`;\n  }\n  /**\n   * This function removes last search layer and adds new layer\n   * with current result (from nomenclator) features to map and zooms in result.\n   * @public\n   * @function\n   * @param {string} locationId - id of the location object\n   * @api\n   */\n  drawNomenclatorResult(locationId, zoomIn = true) {\n    this.requestStreet = '';\n    this.requestPlace = M.utils.addParameters(this.urlDispatcher, {\n      request: 'OpenQuerySource',\n      query: `<ogc:Filter><ogc:FeatureId fid=\"${locationId}\"/></ogc:Filter>`,\n      sourcename: `${this.urlPrefix}communicationsPoolServlet/sourceAccessWFS-INSPIRE-NGBE.rdf`,\n      outputformat: 'application/json',\n    });\n    this.locationID = locationId;\n    M.remote.get(this.requestPlace).then((res) => {\n      const latLngString = JSON.parse(res.text).results[0].location;\n      const resultTitle = JSON.parse(res.text).results[0].title;\n      const latLngArray = latLngString.split(' ');\n      const latitude = parseFloat(latLngArray[0]);\n      const longitude = parseFloat(latLngArray[1]);\n      this.map.removeLayers(this.clickedElementLayer);\n      const newGeojson = {\n        name: getValue('searchresult'),\n        source: {\n          type: 'FeatureCollection',\n          features: [{\n            type: 'Feature',\n            geometry: {\n              type: 'Point',\n              coordinates: [\n                longitude, latitude,\n              ],\n            },\n            properties: {\n              name: resultTitle,\n            },\n          }],\n        },\n      };\n      this.clickedElementLayer = new M.layer.GeoJSON(newGeojson);\n      this.clickedElementLayer.displayInLayerSwitcher = false;\n      this.clickedElementLayer.setStyle(this.point);\n\n      // Change zIndex value\n      this.clickedElementLayer.setZIndex(999999);\n      // Stops showing polygon geometry\n      if (!this.resultVisibility_) {\n        this.clickedElementLayer.setStyle(this.simple);\n      }\n      this.map.addLayers(this.clickedElementLayer);\n      if (zoomIn === true) {\n        this.zoomInLocation('n', 'Point', this.zoom);\n      }\n    });\n  }\n  /**\n   * This function gets user input, searches for coincidences and adds each one to the given array.\n   * @public\n   * @function\n   * @param {string} inputValue search text written by user\n   * @param { Array < Object > } resultsArray search result candidates from IGN services\n   * @api\n   */\n  getCandidatesData(inputValue, resultsArray) {\n    const newInputVal = window.encodeURIComponent(inputValue);\n    return new Promise((resolve) => {\n      if (this.servicesToSearch !== 'n') {\n        let params = `q=${newInputVal}&limit=${this.maxResults}&no_process=${this.noProcess}`;\n        params += `&countrycode=${this.countryCode}&autocancel='true'`;\n        const urlToGet = `${this.urlCandidates}?${params}`;\n        M.remote.get(urlToGet).then((res) => {\n          const returnData = JSON.parse(res.text.substring(9, res.text.length - 1));\n          for (let i = 0; i < returnData.length; i += 1) {\n            resultsArray.push(returnData[i]);\n          }\n          resolve();\n        });\n      } else {\n        resolve();\n      }\n    });\n  }\n  /**\n   * This function adds search coincidences on Nomenclator to array\n   * @public\n   * @function\n   * @param {string} inputValue location searched by user\n   * @param {Array <Object>} resultsArray search results\n   * @api\n   */\n  getNomenclatorData(inputValue, resultsArray) {\n    const newInputVal = window.encodeURIComponent(inputValue);\n    return new Promise((resolve) => {\n      if (this.servicesToSearch !== 'g') {\n        const params = `maxresults=${this.maxResults}&name_equals=${newInputVal}`;\n        const urlToGet = `${this.urlAssistant}?${params}`;\n        M.remote.get(urlToGet).then((res) => {\n          const temporalData = res.text !== '' ? JSON.parse(res.text) : { results: [] };\n          const returnData = temporalData.results;\n          for (let i = 0; i < returnData.length; i += 1) {\n            // avoid nameplaces not included in this.nomenclatorSearchType\n            if (this.nomenclatorSearchType.indexOf(returnData[i].type) >= 0) {\n              resultsArray.push(returnData[i]);\n            }\n          }\n          // move 'Núcleos de población' to start\n          for (let i = 0; i < resultsArray.length; i += 1) {\n            if (resultsArray[i].type === 'Núcleos de población') {\n              const thisElement = resultsArray.splice(i, 1);\n              resultsArray.splice(0, 0, thisElement);\n            }\n          }\n          resolve();\n        });\n      } else {\n        resolve();\n      }\n    });\n  }\n  /**\n   * This function gets address of selected item and returns geojson data (with coordinates)\n   * Only for Geocoder service\n   * @public\n   * @function\n   * @param {string} listElement element from drop-down list(\"li\")\n   * @param {Array <Object> } elementsData search results\n   * @api\n   */\n  getFindData(listElement, elementsData) {\n    return new Promise((resolve) => {\n      let id;\n      let type;\n      let portal;\n      let via;\n      let address;\n      elementsData.forEach((element) => {\n        if (listElement.getAttribute('id') === element.id) {\n          id = `&id=${element.id}`;\n          type = `&type=${element.type}`;\n          portal = (element.portalNumber !== 0 && element.portalNumber !== undefined) ?\n            `&portal=${element.portalNumber}` : '';\n          via = element.tip_via !== '' ? `&tip_via=${element.tip_via}` : '';\n        }\n      });\n      address = listElement.innerHTML;\n      if (listElement.innerHTML.includes('(')) {\n        const parenthesisIndex = listElement.innerHTML.indexOf('(');\n        address = listElement.innerHTML.substring(0, parenthesisIndex);\n      }\n      const params = `${type}${via}${id}${portal}&outputformat=geojson`;\n      const urlToGet = `${this.urlFind}?q=${address}${params}`;\n      this.urlParse = urlToGet.replace('&outputformat=geojson', '');\n\n      this.requestStreet = urlToGet;\n      this.locationID = '';\n      M.proxy(false);\n      M.remote.get(urlToGet).then((res) => {\n        const geoJsonData = res.text.substring(9, res.text.length - 1);\n        resolve(geoJsonData);\n      });\n      M.proxy(true);\n    });\n  }\n  /**\n   * This function zooms in clicked location and draws geometry\n   * @public\n   * @function\n   * @param {Object} listElement clicked result information\n   * @api\n   */\n  goToLocation(listElement) {\n    this.currentElement = listElement; // <li>\n    const selectedObject = this.findClickedItem(listElement, this.allCandidates); // json\n    this.createGeometryStyles();\n    // if item comes from geocoder\n    if (Object.prototype.hasOwnProperty.call(selectedObject, 'address')) {\n      this.getFindData(listElement, this.allCandidates).then((geoJsonData) => {\n        if (geoJsonData.includes('\"tip_via\":null') && (geoJsonData.includes('\"type\":\"Municipio\"') || geoJsonData.includes('\"type\":\"municipio\"') || geoJsonData.includes('\"type\":\"Provincia\"') || geoJsonData.includes('\"type\":\"provincia\"') || geoJsonData.includes('\"type\":\"comunidad autonoma\"'))) {\n          this.drawGeocoderResultProv(geoJsonData);\n          this.map.removePopup();\n        } else {\n          this.drawGeocoderResult(geoJsonData);\n        }\n      });\n    } else { // if item comes from nomenclator\n      this.drawNomenclatorResult(selectedObject.id);\n    }\n    this.resultsBox.innerHTML = '';\n  }\n  /**\n   * This function zooms in MaxExtent of clicked element\n   * @public\n   * @function\n   * @param {string} service { 'g' | 'n' }\n   * @param { string } type of geometry in which we zoom\n   * @api\n   */\n  zoomInLocation(service, type, zoom) {\n    this.resultsList = document.getElementById('m-ignsearchlocator-results-list');\n    if (this.clickedElementLayer instanceof M.layer.Vector) {\n      this.clickedElementLayer.calculateMaxExtent().then((extent) => {\n        this.map.setBbox(extent);\n        if (service === 'n' || type === 'Point' || type === 'LineString' || type === 'MultiLineString') {\n          this.setScale(17061);\n        }\n        // En el caso de que se haga una búsqueda de Provincias o CCAA, se dejaría el zoom que\n        // calcula el servicio para no afectar en la visualización de la geometría.\n        if (type === 'Point') {\n          this.map.setZoom(zoom);\n        }\n        this.fire('ignsearchlocator:entityFound', [extent]);\n      });\n    }\n  }\n  /**\n   * This function returns clicked location object\n   * @public\n   * @function\n   * @param { string } listElement <li>Location</li>\n   * @param { Array < Object > } allCandidates possible locations\n   * @api\n   */\n  findClickedItem(listElement, allCandidates) {\n    return allCandidates.filter(element => element.id === listElement.getAttribute('id'))[0];\n  }\n  /**\n   * This function fixes path to get to this feature's coordinates\n   * @public\n   * @function\n   * @param {feature} feature with geometry information for the given location\n   * @api\n   */\n  fixCoordinatesPath(feature) {\n    let coordinates;\n    if (feature.geometry.type === 'Point') {\n      coordinates = feature.geometry.coordinates[0][0];\n    } else if (feature.geometry.type === 'MultiPolygon') {\n      coordinates = [feature.geometry.coordinates];\n    } else if (feature.geometry.type === 'LineString') {\n      coordinates = feature.geometry.coordinates[0];\n    } else {\n      coordinates = feature.geometry.coordinates;\n    }\n    return coordinates;\n  }\n  /* Given a set of coordinates (lat, long),\n    searches for the corresponding place\n  */\n  searchCoordinates(setOfCoordinates) {\n    return new Promise((resolve) => {\n      resolve();\n    });\n  }\n  /**\n   * This function clears drawn geometry from map.\n   * @public\n   * @function\n   * @api\n   */\n  clearResults() {\n    this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n    this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n    // this.activationManager(false, 'm-ignsearchlocator-search-refCatastral');\n\n    this.searchInput.value = '';\n    this.resultsBox.innerHTML = '';\n    this.searchValue = '';\n    this.map.removeLayers(this.coordinatesLayer);\n    this.map.removePopup(this.map.getPopup());\n  }\n  /**\n   * This function clears input content, results box, popup and shown geometry.\n   * @public\n   * @function\n   * @api\n   */\n  clearResultsAndGeometry() {\n    this.clearResults();\n    this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n    this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n    // this.activationManager(false, 'm-ignsearchlocator-search-refCatastral');\n\n    if (this.clickedElementLayer !== undefined) {\n      this.clickedElementLayer.setStyle(this.simple);\n    }\n    this.map.removePopup(this.popup, [\n      this.lng,\n      this.lat,\n    ]);\n\n    this.xytype = null;\n    this.xydata = null;\n    this.xylon = null;\n    this.xylat = null;\n    this.xylathh = null;\n    this.xylatmm = null;\n    this.xylatss = null;\n    this.xylonhh = null;\n    this.xylonmm = null;\n    this.xylonss = null;\n    this.xyutmx = null;\n    this.xyutmy = null;\n    this.provincecode = null;\n    this.selectMunicipios = null;\n    this.inputPoligono = null;\n    this.inputParcela = null;\n    this.inputRefCatastral = null;\n  }\n\n  /**\n   * This function opens xylocator functions\n   * @public\n   * @function\n   * @api\n   */\n  openSearchCatastral() {\n    if (this.resultsBox.innerHTML.includes('m-xylocator-coordinatesSystemRefCatastral')) {\n      this.clearResults();\n      this.activationManager(false, 'm-ignsearchlocator-search-refCatastral');\n    } else {\n      this.clearResults();\n      if (this.resultsBox.innerHTML.indexOf('coordinatesSystemRefCatastral')) {\n        this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n        this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n      }\n      this.activationManager(true, 'm-ignsearchlocator-search-refCatastral');\n\n      document.getElementById('m-ignsearchlocator-results').style = 'width: 258px;';\n\n      const compiledXYLocator = M.template.compileSync(refCatastral, {\n        vars: {\n          translations: {\n            titlerefCatastral: getValue('titlerefCatastral'),\n            refCastatro: getValue('refCastatro'),\n            search: getValue('search'),\n          },\n        },\n      });\n\n      // this.inputRC_ = compiledXYLocator.querySelector('#m-refCatastral-input');\n      // this.inputRC_.addEventListener('keyup', this.onRCSearch.bind(this));\n\n      const buttonParamsSearch = compiledXYLocator.querySelector('button#m-refCatastral-button');\n      buttonParamsSearch.addEventListener('click', this.onRCSearch.bind(this));\n      this.resultsBox.appendChild(compiledXYLocator);\n    }\n  }\n\n  /**\n   * Handler for search with RC button\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  onRCSearch(evt) {\n    evt.preventDefault();\n\n    this.inputRefCatastral = document.querySelector('#m-refCatastral-input');\n\n    this.inputRC_ = this.element_.querySelector('#m-refCatastral-input').value;\n    if ((evt.type !== 'keyup') || (evt.keyCode === 13)) {\n      let inputRC = this.inputRC_;\n      if (M.utils.isNullOrEmpty(inputRC)) {\n        M.dialog.info('Debe introducir una referencia catastral');\n      } else {\n        inputRC = inputRC.substr(0, 14);\n        const searchUrl = M.utils.addParameters(this.CPMRC_url_, {\n          Provincia: '',\n          Municipio: '',\n          SRS: this.map.getProjection().code,\n          RC: inputRC,\n        });\n        this.search_(searchUrl, this.showResults_);\n\n        this.clearResults();\n        this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n      }\n    }\n  }\n\n  /**\n   * Does the GET petition to search\n   *\n   * @private\n   * @function\n   */\n  search_(searchUrl, processor) {\n    M.remote.get(searchUrl).then((response) => {\n      const success = this.acceptOVCSW(response);\n      if (success) {\n        processor.call(this, response.xml);\n      }\n    });\n  }\n\n  /**\n   * This function parses results and compiles template\n   * with vars to show results\n   *\n   * @private\n   * @function\n   */\n  showResults_(result) {\n    let resultsTemplateVars = {};\n    resultsTemplateVars = this.parseRCResultsForTemplate_(result, false);\n\n    Promise.resolve(resultsTemplateVars).then((resultTemplate) => {\n      this.drawGeocoderResultRC(resultTemplate);\n    });\n  }\n\n  /**\n   * This function parses results from RC search for template\n   *\n   * @private\n   * @function\n   */\n  parseRCResultsForTemplate_(result, append) {\n    const docs = this.parseCPMRCResults(result);\n    if (append === true) {\n      this.rcResults_.unshift(docs);\n    } else {\n      this.rcResults_ = [docs];\n    }\n\n    return {\n      docs: this.rcResults_,\n      total: this.rcResults_.length,\n      partial: false,\n      notResutls: false,\n      query: this.inputRC_.value,\n    };\n  }\n\n\n  /**\n   * This function removes last search layer and adds new layer with current result (from geocoder)\n   * features to map, zooms in result, edits popup information and shows a message saying\n   *  if it's a perfect result or an approximation.\n   * @public\n   * @function\n   * @param {Object} geoJsonData - clicked result object\n   * @api\n   */\n  drawGeocoderResultRC(geoJsonData) {\n    this.map.removeLayers(this.clickedElementLayer); // Center coordinates\n    const attri = geoJsonData.docs[0];\n    // Center coordinates\n    this.coordinates = `${attri.coords[0].xcen}, ${attri.coords[0].ycen}`;\n    const coords = [parseFloat(attri.coords[0].xcen), parseFloat(attri.coords[0].ycen)];\n    // this.coordinates = [236284.96, 4144064.69];\n\n    this.locator_(coords, this.point);\n\n    // show popup for streets\n    const fullAddress = attri.attributes[1].value;\n    this.showSearchPopUpRC(fullAddress, coords, 1, { fake: true });\n\n    const x = coords[0];\n    const y = coords[1];\n    const xFloat = parseFloat(x);\n    const yFloat = parseFloat(y);\n    this.map.setCenter(`${xFloat},${yFloat}*false`);\n  }\n\n\n  /**\n   * This function opens xylocator functions\n   * @public\n   * @function\n   * @api\n   */\n  openParcela() {\n    if (this.resultsBox.innerHTML.includes('coordinatesSystemParcela')) {\n      this.clearResults();\n      this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n    } else {\n      this.clearResults();\n      if (this.resultsBox.innerHTML.indexOf('coordinatesSystemParcela')) {\n        this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n        // this.activationManager(false, 'm-ignsearchlocator-search-refCatastral');\n      }\n      this.activationManager(true, 'm-ignsearchlocator-parcela-button');\n\n      document.getElementById('m-ignsearchlocator-results').style = 'width: 258px;';\n\n      const compiledXYLocator = M.template.compileSync(parcela, {\n        vars: {\n          translations: {\n            titleparcela: getValue('titleparcela'),\n            province: getValue('province'),\n            municipality: getValue('municipality'),\n            selectmuni: getValue('selectmuni'),\n            selectprov: getValue('selectprov'),\n            estate: getValue('estate'),\n            plot: getValue('plot'),\n            titlerefCatastral: getValue('titlerefCatastral'),\n            refCastatro: getValue('refCastatro'),\n            search: getValue('search'),\n            notaRef: getValue('notaRef'),\n          },\n        },\n      });\n\n      /**\n       *crear provincias y rellenar municipios\n       */\n      if (this.provincecode === null) {\n        this.selectProvincias = compiledXYLocator.querySelector('select#m-searchParamsProvincia-select');\n        this.selectProvincias.addEventListener('change', evt => this.onProvinciaSelect(evt, null));\n      } else {\n        compiledXYLocator.querySelector('select#m-searchParamsProvincia-select').value = this.provincecode;\n        this.selectProvincias = compiledXYLocator.querySelector('select#m-searchParamsProvincia-select');\n        this.onProvinciaSelect(null, this.provincecode, this.selectMunicipios);\n        this.selectProvincias.addEventListener('change', evt => this.onProvinciaSelect(evt, null, null));\n      }\n\n      if (this.selectMunicipios === null) {\n        this.selectMunicipios = compiledXYLocator.querySelector('#m-searchParamsMunicipio-select');\n      } else {\n        // compiledXYLocator.querySelector('#m-searchParamsMunicipio-select')\n        // .replace(this.municipalityhtml);\n        compiledXYLocator.querySelector('#m-searchParamsMunicipio-select').value = this.selectMunicipios.value;\n      }\n\n      if (this.inputPoligono === null) {\n        this.inputPoligono = compiledXYLocator.querySelector('#m-searchParamsPoligono-input');\n      } else {\n        compiledXYLocator.querySelector('#m-searchParamsPoligono-input').value = this.inputPoligono.value;\n      }\n\n      if (this.inputParcela === null) {\n        this.inputParcela = compiledXYLocator.querySelector('#m-searchParamsParcela-input');\n      } else {\n        compiledXYLocator.querySelector('#m-searchParamsParcela-input').value = this.inputParcela.value;\n      }\n\n\n      if (this.inputRefCatastral === null) {\n        this.inputRefCatastral = compiledXYLocator.querySelector('#m-refCatastral-input');\n      } else {\n        compiledXYLocator.querySelector('#m-refCatastral-input').value = this.inputRefCatastral.value;\n      }\n\n\n      const buttonParamsSearch = compiledXYLocator.querySelector('button#m-searchParams-button');\n      buttonParamsSearch.addEventListener('click', e => this.onParamsSearch(e));\n\n      const buttonParamsSearchRC = compiledXYLocator.querySelector('button#m-refCatastral-button');\n      buttonParamsSearchRC.addEventListener('click', this.onRCSearch.bind(this));\n      this.resultsBox.appendChild(compiledXYLocator);\n\n      if (M.language.getLang() === 'es') {\n        document.querySelectorAll('p.parcela--input')[0].style = 'width: 71px';\n        document.querySelectorAll('p.parcela--input')[1].style = 'width: 71px';\n\n        document.querySelector('#m-searchParamsProvincia-select').style = 'width: 68%';\n        document.querySelector('#m-searchParamsMunicipio-select').style = 'width: 68%';\n      }\n    }\n  }\n\n  /**\n   * Handler for search with params button\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  onParamsSearch(evt) {\n    evt.preventDefault();\n    // Actualizamos los inputs de parcela y poligino\n    this.inputPoligono = document.querySelector('#m-searchParamsPoligono-input');\n    this.inputParcela = document.querySelector('#m-searchParamsParcela-input');\n\n    if ((evt.type !== 'keyup') || (evt.keyCode === 13)) {\n      if (M.utils.isNullOrEmpty(this.selectProvincias.value) || this.selectProvincias.value === '0') {\n        M.dialog.info(getValue('debeprov'));\n        return;\n      }\n      if (M.utils.isNullOrEmpty(this.selectMunicipios.value) || document.querySelector('#m-searchParamsMunicipio-select').value === '0') {\n        M.dialog.info(getValue('debemuni'));\n        return;\n      }\n      if (M.utils.isNullOrEmpty(this.inputPoligono.value)) {\n        M.dialog.info(getValue('debepoli'));\n        return;\n      }\n      if (M.utils.isNullOrEmpty(this.inputParcela.value)) {\n        M.dialog.info(getValue('debeparce'));\n        return;\n      }\n\n      this.provincecode = this.selectProvincias.value;\n      this.selectMunicipios = document.querySelector('#m-searchParamsMunicipio-select');\n      this.municipalityvalue = this.selectMunicipios.value;\n\n\n      const searchUrl = M.utils.addParameters(this.DNPPP_url_, {\n        CodigoProvincia: this.selectProvincias.value,\n        CodigoMunicipio: this.selectMunicipios.value,\n        CodigoMunicipioINE: '',\n        Poligono: this.inputPoligono.value,\n        Parcela: this.inputParcela.value,\n      });\n\n      M.remote.get(searchUrl).then((response) => {\n        const success = this.acceptOVCSW(response);\n        if (success) {\n          this.parseParamsResultsForTemplate_(response.xml);\n        }\n        this.clearResults();\n        this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n      });\n    }\n  }\n\n  parseParamsResultsForTemplate_(response) {\n    const rootElement = response.getElementsByTagName('consulta_dnp')[0];\n    let rcNode;\n    const lrcdnpNode = rootElement.getElementsByTagName('lrcdnp');\n\n    if (lrcdnpNode.length > 0) {\n      const rcdnpNode = lrcdnpNode[0].getElementsByTagName('rcdnp')[0];\n      rcNode = rcdnpNode.getElementsByTagName('rc')[0];\n    } else {\n      const bicoNode = rootElement.getElementsByTagName('bico')[0];\n      const biNode = bicoNode.getElementsByTagName('bi')[0];\n      const idbiNode = biNode.getElementsByTagName('idbi')[0];\n      rcNode = idbiNode.getElementsByTagName('rc')[0];\n    }\n    const pc1Value = rcNode.getElementsByTagName('pc1')[0].childNodes[0].nodeValue;\n    const pc2Value = rcNode.getElementsByTagName('pc2')[0].childNodes[0].nodeValue;\n\n    const searchUrl = M.utils.addParameters(this.CPMRC_url_, {\n      Provincia: '',\n      Municipio: '',\n      SRS: this.map.getProjection().code,\n      RC: pc1Value + pc2Value,\n    });\n\n    return M.remote.get(searchUrl).then((res) => {\n      const success = this.acceptOVCSW(res);\n      if (success) {\n        const docsRC = this.parseCPMRCResults(res.xml);\n        const xcen = docsRC.coords[0].xcen;\n        const ycen = docsRC.coords[0].ycen;\n\n        this.locator_([xcen, ycen], null);\n      }\n    });\n  }\n\n  /**\n   * Parses CPMRC results\n   *\n   * @private\n   * @function\n   */\n  parseCPMRCResults(xmlResults) {\n    const rootElement = xmlResults.getElementsByTagName('consulta_coordenadas')[0];\n    const coordenadasNode = rootElement.getElementsByTagName('coordenadas')[0];\n    const coordNode = coordenadasNode.getElementsByTagName('coord')[0];\n\n    const pcNode = coordNode.getElementsByTagName('pc')[0];\n    const pc1Node = pcNode.getElementsByTagName('pc1')[0].childNodes[0].nodeValue;\n    const pc2Node = pcNode.getElementsByTagName('pc2')[0].childNodes[0].nodeValue;\n\n    const geoNode = coordNode.getElementsByTagName('geo')[0];\n    const xcenNode = geoNode.getElementsByTagName('xcen')[0].childNodes[0].nodeValue;\n    const ycenNode = geoNode.getElementsByTagName('ycen')[0].childNodes[0].nodeValue;\n    const srsNode = geoNode.getElementsByTagName('srs')[0].childNodes[0].nodeValue;\n\n    const ldtNode = coordNode.getElementsByTagName('ldt')[0].childNodes[0].nodeValue;\n\n    return {\n      attributes: [{\n        key: 'Referencia Catastral',\n        value: pc1Node + pc2Node,\n      }, {\n        key: 'Descripción',\n        value: ldtNode,\n      }],\n      rcId: `rc_${pc1Node}${pc2Node}`,\n      coords: [{\n        xcen: xcenNode,\n        ycen: ycenNode,\n        srs: srsNode,\n      }],\n    };\n  }\n\n\n  /**\n   * Checks if response is valid\n   *\n   * @private\n   * @function\n   */\n  acceptOVCSW(response) {\n    let success = true;\n    try {\n      if ((response.code === 200) && (response.error === false)) {\n        const results2 = response.xml;\n        const rootElement = results2.childNodes[0];\n        const controlNode = rootElement.getElementsByTagName('control')[0];\n        const errorCtlNode = controlNode.getElementsByTagName('cuerr')[0];\n        let cuerr = '0';\n        if (errorCtlNode !== undefined) {\n          cuerr = errorCtlNode.childNodes[0].nodeValue;\n        }\n        if (cuerr === '1') {\n          const errorNode = rootElement.getElementsByTagName('lerr')[0];\n          const errorDesc = errorNode.getElementsByTagName('err')[0];\n          const errorDescTxt = errorDesc.getElementsByTagName('des')[0].childNodes[0].nodeValue;\n          this.element_.classList.remove(this.SEARCHING_CLASS);\n          success = false;\n          M.dialog.info(errorDescTxt);\n        }\n      } else {\n        success = false;\n        M.dialog.error(getValue('exception.mapeaerror'));\n      }\n    } catch (err) {\n      success = false;\n      M.exception(`La respuesta no es un JSON válido: ${err}.`);\n    }\n    return success;\n  }\n\n  /**\n   * Handler for selecting an option on Provincia select\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  onProvinciaSelect(e, idprov, munici) {\n    // En cada click a las provincias, se borran los municipios y se calculan de nuevo.\n    let provinceCode = null;\n    if (e != null) {\n      const elt = e.target;\n      provinceCode = elt.value;\n    } else {\n      provinceCode = idprov;\n    }\n    if (provinceCode !== '0') {\n      if (this.element_.getElementsByTagName('select')['m-searchParamsMunicipio-select'] !== undefined) {\n        this.clearMunicipiosSelect();\n      }\n\n      M.remote.get(this.ConsultaMunicipioCodigos_, {\n        CodigoProvincia: provinceCode,\n        CodigoMunicipio: '',\n        CodigoMunicipioIne: '',\n      }).then((res) => {\n        this.loadMunicipiosSelect(res, munici);\n      });\n    } else {\n      this.clearMunicipiosSelect();\n    }\n  }\n\n\n  /**\n   * Loads and renders options set to Municipios select\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  loadMunicipiosSelect(response, munici) {\n    if ((response.code === 200) && (response.error === false)) {\n      const rootElement = response.xml.getElementsByTagName('consulta_municipiero')[0];\n      const rootMunicipios = rootElement.getElementsByTagName('municipiero')[0];\n      const muniNodes = rootMunicipios.getElementsByTagName('muni');\n      const select = this.element_.getElementsByTagName('select')['m-searchParamsMunicipio-select'];\n      for (let i = 0; i < muniNodes.length; i += 1) {\n        const option = document.createElement('option');\n        const locat = muniNodes[i].getElementsByTagName('locat')[0];\n        option.value = locat.getElementsByTagName('cmc')[0].childNodes[0].nodeValue;\n        option.innerHTML = muniNodes[i].getElementsByTagName('nm')[0].childNodes[0].nodeValue;\n        select.appendChild(option);\n      }\n      if (munici !== undefined && munici !== null) {\n        document.querySelector('#m-searchParamsMunicipio-select').value = this.municipalityvalue;\n      }\n    } else {\n      M.dialog.error(getValue('exception.mapeaerror'));\n    }\n  }\n\n  /**\n   * Clears options set to Municipios select\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  clearMunicipiosSelect() {\n    const select = this.element_.getElementsByTagName('select')['m-searchParamsMunicipio-select'];\n    while (select.firstChild) {\n      select.removeChild(select.firstChild);\n    }\n    const option = document.createElement('option');\n    option.value = '0';\n    option.innerHTML = getValue('selectmuni');\n    select.appendChild(option);\n  }\n\n  /**\n   * This function opens xylocator functions\n   * @public\n   * @function\n   * @api\n   */\n  openXYLocator() {\n    if (this.resultsBox.innerHTML.includes('coordinatesSystemXYLocator')) {\n      this.clearResults();\n      this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n    } else {\n      this.clearResults();\n      if (this.resultsBox.innerHTML.indexOf('coordinatesSystemParcela')) {\n        this.activationManager(false, 'm-ignsearchlocator-parcela-button');\n        // this.activationManager(false, 'm-ignsearchlocator-search-refCatastral');\n      }\n      this.activationManager(true, 'm-ignsearchlocator-xylocator-button');\n\n      document.getElementById('m-ignsearchlocator-results').style = 'width: 301px;';\n\n      const compiledXYLocator = M.template.compileSync(xylocator, {\n        vars: {\n          translations: {\n            title: getValue('title'),\n            srs: getValue('srs'),\n            longitude: getValue('longitude'),\n            latitude: getValue('latitude'),\n            locate: getValue('locate'),\n            negative: getValue('negative'),\n            east: getValue('east'),\n            west: getValue('west'),\n            north: getValue('north'),\n            south: getValue('south'),\n            geographic: getValue('geographic'),\n            zone: getValue('zone'),\n            dms: getValue('dms'),\n            dd: getValue('dd'),\n          },\n        },\n      });\n\n      if (this.xytype != null) {\n        if (this.xytype === 'EPSG:4258d' && this.xydata === 'd') {\n          compiledXYLocator.querySelector('#m-xylocator-srs').value = this.xytype;\n          const selectTarget = compiledXYLocator.querySelector('#m-xylocator-srs');\n          const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n          selectedOption.setAttribute('data-units', this.xydata);\n          compiledXYLocator.querySelector('input#LON').value = this.xylon;\n          compiledXYLocator.querySelector('input#LAT').value = this.xylat;\n        } else if (this.xytype === 'EPSG:4326d' && this.xydata === 'd') {\n          compiledXYLocator.querySelector('#m-xylocator-srs').value = this.xytype;\n          const selectTarget = compiledXYLocator.querySelector('#m-xylocator-srs');\n          const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n          selectedOption.setAttribute('data-units', this.xydata);\n          compiledXYLocator.querySelector('input#LON').value = this.xylon;\n          compiledXYLocator.querySelector('input#LAT').value = this.xylat;\n        } else if (this.xytype === 'EPSG:4258dms' && this.xydata === 'dms') {\n          compiledXYLocator.querySelector('#m-xylocator-srs').value = this.xytype;\n          const selectTarget = compiledXYLocator.querySelector('#m-xylocator-srs');\n          const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n          selectedOption.setAttribute('data-units', this.xydata);\n          compiledXYLocator.querySelector('input#LONHH').value = this.xylonhh;\n          compiledXYLocator.querySelector('input#LONMM').value = this.xylonmm;\n          compiledXYLocator.querySelector('input#LONSS').value = this.xylonss;\n          compiledXYLocator.querySelector('input#LATHH').value = this.xylathh;\n          compiledXYLocator.querySelector('input#LATMM').value = this.xylatmm;\n          compiledXYLocator.querySelector('input#LATSS').value = this.xylatss;\n        } else if (this.xytype === 'EPSG:4326dms' && this.xydata === 'dms') {\n          compiledXYLocator.querySelector('#m-xylocator-srs').value = this.xytype;\n          const selectTarget = compiledXYLocator.querySelector('#m-xylocator-srs');\n          const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n          selectedOption.setAttribute('data-units', this.xydata);\n          compiledXYLocator.querySelector('input#LONHH').value = this.xylonhh;\n          compiledXYLocator.querySelector('input#LONMM').value = this.xylonmm;\n          compiledXYLocator.querySelector('input#LONSS').value = this.xylonss;\n          compiledXYLocator.querySelector('input#LATHH').value = this.xylathh;\n          compiledXYLocator.querySelector('input#LATMM').value = this.xylatmm;\n          compiledXYLocator.querySelector('input#LATSS').value = this.xylatss;\n        } else {\n          compiledXYLocator.querySelector('#m-xylocator-srs').value = this.xytype;\n          const selectTarget = compiledXYLocator.querySelector('#m-xylocator-srs');\n          const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n          selectedOption.setAttribute('data-units', this.xydata);\n          compiledXYLocator.querySelector('input#UTM-X').value = this.xyutmx;\n          compiledXYLocator.querySelector('input#UTM-Y').value = this.xyutmy;\n        }\n\n        if (this.xydata === 'd') {\n          const divToHidden1 = compiledXYLocator.querySelector('div#m-xylocator-utm');\n          divToHidden1.style.display = 'none';\n          const divToHidden2 = compiledXYLocator.querySelector('div#m-xylocator-dms');\n          divToHidden2.style.display = 'none';\n          const divToShow = compiledXYLocator.querySelector('div#m-xylocator-latlon');\n          divToShow.style.display = 'table';\n        } else if (this.xydata === 'dms') {\n          const divToHidden1 = compiledXYLocator.querySelector('div#m-xylocator-utm');\n          divToHidden1.style.display = 'none';\n          const divToHidden2 = compiledXYLocator.querySelector('div#m-xylocator-latlon');\n          divToHidden2.style.display = 'none';\n          const divToShow = compiledXYLocator.querySelector('div#m-xylocator-dms');\n          divToShow.style.display = 'block';\n        } else {\n          const divToHidden1 = compiledXYLocator.querySelector('div#m-xylocator-latlon');\n          divToHidden1.style.display = 'none';\n          const divToHidden2 = compiledXYLocator.querySelector('div#m-xylocator-dms');\n          divToHidden2.style.display = 'none';\n          const divToShow = compiledXYLocator.querySelector('div#m-xylocator-utm');\n          divToShow.style.display = 'block';\n        }\n      }\n      compiledXYLocator.querySelector('select#m-xylocator-srs').addEventListener('change', evt => this.manageInputs_(evt));\n      compiledXYLocator.querySelector('button#m-xylocator-loc').addEventListener('click', evt => this.calculate_(evt, compiledXYLocator));\n      this.resultsBox.appendChild(compiledXYLocator);\n    }\n  }\n\n  /**\n   * Hides/shows tools menu and de/activates drawing.\n   * @public\n   * @function\n   * @api\n   * @param {Boolean} clickedGeometry - i.e.isPointActive\n   * @param {String} drawingDiv - i.e.pointdrawing\n   */\n  activationManager(clickedGeometry, drawingDiv) {\n    // if drawing is active\n    if (clickedGeometry) {\n      document.getElementById(drawingDiv).style.backgroundColor = '#71a7d3';\n      document.getElementById(drawingDiv).style.color = 'white';\n    } else {\n      document.querySelectorAll(drawingDiv).forEach(e => e.parentNode.removeChild(e));\n      document.getElementById(drawingDiv).style.backgroundColor = 'white';\n      document.getElementById(drawingDiv).style.color = '#7A7A73';\n    }\n  }\n\n  /**\n   * This function transforms coordinates to map SRS\n   *\n   * @public\n   * @function\n   * @param {DOMEvent} evt - event\n   * @api\n   */\n  calculate_(evt, compiledXYLocator) {\n    try {\n      const selectTarget = document.querySelector('.m-xylocator-container select#m-xylocator-srs');\n      const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n      let origin = selectedOption.value;\n\n      this.xytype = compiledXYLocator.querySelector('#m-xylocator-srs').value;\n      this.xydata = selectedOption.getAttribute('data-units');\n\n      if (this.xydata === 'd') {\n        origin = origin.replace('d', '');\n      }\n      if (this.xydata === 'dms') {\n        origin = origin.replace('dms', '');\n      }\n\n      if (this.xytype === 'EPSG:4258d' && this.xydata === 'd') {\n        this.xylon = compiledXYLocator.querySelector('input#LON').value;\n        this.xylat = compiledXYLocator.querySelector('input#LAT').value;\n      } else if (this.xytype === 'EPSG:4326d' && this.xydata === 'd') {\n        this.xylon = compiledXYLocator.querySelector('input#LON').value;\n        this.xylat = compiledXYLocator.querySelector('input#LAT').value;\n      } else if (this.xytype === 'EPSG:4258dms' && this.xydata === 'dms') {\n        this.xylonhh = compiledXYLocator.querySelector('input#LONHH').value;\n        this.xylonmm = compiledXYLocator.querySelector('input#LONMM').value;\n        this.xylonss = compiledXYLocator.querySelector('input#LONSS').value;\n        this.xylathh = compiledXYLocator.querySelector('input#LATHH').value;\n        this.xylatmm = compiledXYLocator.querySelector('input#LATMM').value;\n        this.xylatss = compiledXYLocator.querySelector('input#LATSS').value;\n      } else if (this.xytype === 'EPSG:4326dms' && this.xydata === 'dms') {\n        this.xylonhh = compiledXYLocator.querySelector('input#LONHH').value;\n        this.xylonmm = compiledXYLocator.querySelector('input#LONMM').value;\n        this.xylonss = compiledXYLocator.querySelector('input#LONSS').value;\n        this.xylathh = compiledXYLocator.querySelector('input#LATHH').value;\n        this.xylatmm = compiledXYLocator.querySelector('input#LATMM').value;\n        this.xylatss = compiledXYLocator.querySelector('input#LATSS').value;\n      } else {\n        this.xyutmx = compiledXYLocator.querySelector('input#UTM-X').value;\n        this.xyutmy = compiledXYLocator.querySelector('input#UTM-Y').value;\n      }\n\n      let x = -1;\n      let y = -1;\n      if (selectedOption.getAttribute('data-units') === 'd') {\n        const xString = document.querySelector('div#m-xylocator-latlon input#LON').value.replace(',', '.');\n        const yString = document.querySelector('div#m-xylocator-latlon input#LAT').value.replace(',', '.');\n        x = parseFloat(xString);\n        y = parseFloat(yString);\n        const coordinatesTransform = this.getImpl().reproject(origin, [x, y]);\n        this.locator_(coordinatesTransform, null);\n      } else if (selectedOption.getAttribute('data-units') === 'dms') {\n        const hhLon = document.querySelector('div#m-xylocator-dms input#LONHH').value;\n        const mmLon = document.querySelector('div#m-xylocator-dms input#LONMM').value;\n        const ssLon = document.querySelector('div#m-xylocator-dms input#LONSS').value;\n        const dirLon = document.querySelector('div#m-xylocator-dms input[name=\"LONDIR\"]:checked').value;\n        const hhLat = document.querySelector('div#m-xylocator-dms input#LATHH').value;\n        const mmLat = document.querySelector('div#m-xylocator-dms input#LATMM').value;\n        const ssLat = document.querySelector('div#m-xylocator-dms input#LATSS').value;\n        const dirLat = document.querySelector('div#m-xylocator-dms input[name=\"LATDIR\"]:checked').value;\n        if (this.checkDegreeValue_(mmLon) && this.checkDegreeValue_(ssLon) &&\n          this.checkDegreeValue_(mmLat) && this.checkDegreeValue_(ssLat) &&\n          parseFloat(hhLon) >= 0 && parseFloat(hhLon) <= 180 &&\n          parseFloat(hhLat) >= 0 && parseFloat(hhLat) <= 180) {\n          try {\n            x = parseFloat(hhLon) + (parseFloat(mmLon) / 60) + (parseFloat(ssLon) / 3600);\n            y = parseFloat(hhLat) + (parseFloat(mmLat) / 60) + (parseFloat(ssLat) / 3600);\n            if (dirLon !== 'east' && x !== 0) {\n              x = -x;\n            }\n            if (dirLat !== 'north' && y !== 0) {\n              y = -y;\n            }\n            const coordinatesTransform = this.getImpl().reproject(origin, [x, y]);\n            this.locator_(coordinatesTransform, null);\n          } catch (ex) {\n            M.dialog.error(getValue('exception.transforming'), 'Error');\n          }\n        } else {\n          M.dialog.error(getValue('exception.wrong_values'), 'Error');\n        }\n      } else {\n        try {\n          const xString = document.querySelector('div#m-xylocator-utm input#UTM-X').value.replace(',', '.');\n          const yString = document.querySelector('div#m-xylocator-utm input#UTM-Y').value.replace(',', '.');\n          x = parseFloat(xString);\n          y = parseFloat(yString);\n          const coordinatesTransform = this.getImpl().reproject(origin, [x, y]);\n          this.locator_(coordinatesTransform, null);\n        } catch (ex) {\n          M.dialog.error(getValue('exception.transforming'), 'Error');\n        }\n      }\n\n      this.clearResults();\n      this.activationManager(false, 'm-ignsearchlocator-xylocator-button');\n\n      const coordinatesTransform = this.getImpl().reprojectXY(origin, [x, y]);\n      this.locator_(coordinatesTransform, null);\n    } catch (ex) {\n      M.dialog.error(getValue('exception.wrong_coords'), 'Error');\n      throw ex;\n    }\n  }\n\n  /**\n   * This function checks degree value\n   *\n   * @public\n   * @function\n   * @param {String} num\n   * @api\n   */\n  checkDegreeValue_(num) {\n    return parseFloat(num) >= 0 && parseFloat(num) < 60;\n  }\n\n  /**\n   * This function changes input label depending on SRS\n   *\n   * @private\n   * @function\n   * @param {DOMEvent} evt - event\n   */\n  manageInputs_(evt) {\n    const selectTarget = evt.target;\n    const selectedOption = selectTarget.options[selectTarget.selectedIndex];\n    if (selectedOption.getAttribute('data-units') === 'd') {\n      const divToHidden1 = document.querySelector('div#m-xylocator-utm');\n      divToHidden1.style.display = 'none';\n      const divToHidden2 = document.querySelector('div#m-xylocator-dms');\n      divToHidden2.style.display = 'none';\n      const divToShow = document.querySelector('div#m-xylocator-latlon');\n      divToShow.style.display = 'table';\n    } else if (selectedOption.getAttribute('data-units') === 'dms') {\n      const divToHidden1 = document.querySelector('div#m-xylocator-utm');\n      divToHidden1.style.display = 'none';\n      const divToHidden2 = document.querySelector('div#m-xylocator-latlon');\n      divToHidden2.style.display = 'none';\n      const divToShow = document.querySelector('div#m-xylocator-dms');\n      divToShow.style.display = 'block';\n    } else {\n      const divToHidden1 = document.querySelector('div#m-xylocator-latlon');\n      divToHidden1.style.display = 'none';\n      const divToHidden2 = document.querySelector('div#m-xylocator-dms');\n      divToHidden2.style.display = 'none';\n      const divToShow = document.querySelector('div#m-xylocator-utm');\n      divToShow.style.display = 'block';\n    }\n  }\n\n  /**\n   * This function centers the map on given point\n   *\n   * @public\n   * @function\n   * @param coords - coordinates writen by user\n   * @api\n   */\n  locator_(coords, point) {\n    const x = coords[0];\n    const y = coords[1];\n    const xFloat = parseFloat(x);\n    const yFloat = parseFloat(y);\n    this.map.removeLayers(this.coordinatesLayer);\n    if (!Number.isNaN(xFloat) && !Number.isNaN(yFloat)) {\n      this.map.setCenter(`${xFloat},${yFloat}*false`);\n      this.map.setZoom(this.zoom);\n      this.fire('xylocator:locationCentered', [{\n        zoom: this.zoom,\n        center: [xFloat, yFloat],\n      }]);\n\n      this.coordinatesLayer = new M.layer.Vector({\n        name: getValue('coordinateresult'),\n      }, { displayInLayerSwitcher: false });\n\n      const feature = new M.Feature('localizacion', {\n        type: 'Feature',\n        properties: {},\n        geometry: {\n          type: 'Point',\n          coordinates: [xFloat, yFloat],\n        },\n      });\n\n      this.coordinatesLayer.addFeatures([feature]);\n\n      if (point === null) {\n        this.coordinatesLayer.setStyle(new M.style.Point({\n          radius: 8,\n          fill: {\n            color: '#f00',\n            opacity: 0.5,\n          },\n          stroke: {\n            color: '#f00',\n            opacity: 1,\n            width: 3,\n          },\n        }));\n      } else {\n        this.createGeometryStyles();\n        this.coordinatesLayer.setStyle(this.point);\n      }\n\n      this.map.addLayers(this.coordinatesLayer);\n    } else {\n      M.dialog.error(getValue('exception.wrong_coords'), 'Error');\n    }\n  }\n\n  /**\n   * This function sets geometry visibility on map (visible|invisible).\n   * @public\n   * @function\n   * @param {boolean} flag\n   * @api\n   */\n  setResultVisibility(flag) {\n    this.resultVisibility_ = flag;\n  }\n  /**\n   * This function changes input placeholder based on services choice\n   * @public\n   * @function\n   * @api\n   */\n  changePlaceholder() {\n    if (this.servicesToSearch === 'g') {\n      this.searchInput.placeholder = getValue('direccion');\n    } else if (this.servicesToSearch === 'n') {\n      this.searchInput.placeholder = 'Topónimo';\n    }\n  }\n  /**\n   * This function creates some geometry styles.\n   * @public\n   * @function\n   * @api\n   */\n  createGeometryStyles() {\n    // Shows pin on drawn point\n    if (this.pointStyle === 'pinBlanco') {\n      this.point = new M.style.Point({\n        radius: 5,\n        icon: {\n          form: 'none',\n          class: 'g-cartografia-pin',\n          radius: 12,\n          rotation: 0,\n          rotate: false,\n          offset: [0, -12],\n          color: '#f00',\n          border: '5px solid green',\n          opacity: 1,\n        },\n      });\n    } else if (this.pointStyle === 'pinRojo') {\n      this.point = new M.style.Point({\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/pinign.svg']),\n        },\n      });\n    } else if (this.pointStyle === 'pinMorado') {\n      this.point = new M.style.Point({\n        radius: 5,\n        icon: {\n          src: M.utils.concatUrlPaths([M.config.THEME_URL, '/img/m-pin-24.svg']),\n        },\n      });\n    }\n    // Style for hiding geometry\n    this.simple = new M.style.Polygon({\n      fill: {\n        color: 'black',\n        opacity: 0,\n      },\n    });\n  }\n  /**\n    * This\n    function inserts a popUp with information about the searched location\n      (and whether it 's an exact result or an approximation)\n    * @param { string } fullAddress location address(street, portal, etc.)\n    * @param { Array } coordinates latitude[0] and longitude[1] coordinates\n    * @param { boolean } exactResult indicating\n    if the given result is a perfect match\n    */\n  showSearchPopUp(fullAddress, coordinates, exactResult, e = {}) {\n    const destinyProj = this.map.getProjection().code;\n    const destinySource = 'EPSG:4326';\n    const newCoordinates = this.getImpl()\n      .reprojectReverse([coordinates[1], coordinates[0]], destinySource, destinyProj);\n    let exitState;\n    if (exactResult !== 1) {\n      exitState = getValue('aprox');\n    } else {\n      exitState = getValue('exact');\n    }\n    this.showPopUp(fullAddress, newCoordinates, coordinates, exitState, false, e);\n  }\n\n  /**\n    * This\n    function inserts a popUp with information about the searched location\n      (and whether it 's an exact result or an approximation)\n    * @param { string } fullAddress location address(street, portal, etc.)\n    * @param { Array } coordinates latitude[0] and longitude[1] coordinates\n    * @param { boolean } exactResult indicating\n    if the given result is a perfect match\n    */\n  showSearchPopUpRC(fullAddress, coordinates, exactResult, e = {}) {\n    const destinyProj = this.map.getProjection().code;\n    const destinySource = 'EPSG:3857';\n    const newCoordinates = this.getImpl()\n      .reprojectReverse([coordinates[0], coordinates[1]], destinySource, destinyProj);\n    let exitState;\n    if (exactResult !== 1) {\n      exitState = getValue('aprox');\n    } else {\n      exitState = getValue('exact');\n    }\n    this.showPopUp(fullAddress, newCoordinates, coordinates, exitState, false, e);\n  }\n  /**\n   * This function inserts a popup on the map with information about its location.\n   * @param { string } fullAddress location address(street, portal, etc.)\n   * @param { Array } mapCoordinates latitude[0] and longitude[1] coordinates on map projection\n   * @param { Array } featureCoordinates latitude[0] and longitude[1] coordinates from feature\n   * @param { string } exitState indicating if the given result is a perfect match\n   */\n  showPopUp(fullAddress, mapcoords, featureCoordinates, exitState = null, addTab = true, e = {}) {\n    const featureTabOpts = { content: '', icon: 'icon-localizacion3' };\n    if (exitState !== null) {\n      featureTabOpts.content += `<div><b>${exitState}</b></div>`;\n    }\n    featureTabOpts.content += `<div>${fullAddress}</div>\n                <div class='ignsearchlocator-popup'>Lat: ${featureCoordinates[0].toFixed(6)}</div>\n                <div class='ignsearchlocator-popup'> Long: ${featureCoordinates[1].toFixed(6)} </div>`;\n    if (this.map.getPopup() instanceof M.Popup && addTab === true) {\n      this.popup = this.map.getPopup();\n      this.popup.addTab(featureTabOpts);\n    } else {\n      const myPopUp = new M.Popup({ panMapIfOutOfView: !e.fake });\n      myPopUp.addTab(featureTabOpts);\n\n      this.map.addPopup(myPopUp, [\n        mapcoords[0],\n        mapcoords[1],\n      ]);\n      this.popup = myPopUp;\n    }\n    this.lat = mapcoords[1];\n    this.lng = mapcoords[0];\n  }\n  /**\n   * This function sets given scale to map\n   * @public\n   * @function\n   * @param { number } scale to which the map will zoom in\n   *   (5000 if we want 1: 5000)\n   * @api\n   */\n  setScale(scale) {\n    this.getImpl().setScale(scale);\n  }\n}\n","/**\n * @module M/impl/control/IGNSearchLocatorControl\n */\nexport default class IGNSearchLocatorControl extends M.impl.Control {\n  /**\n   * This function adds the control to the specified map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map to add the plugin\n   * @param {HTMLElement} html of the plugin\n   * @api stable\n   */\n  addTo(map, html) {\n    this.map = map;\n    super.addTo(map, html);\n  }\n  /**\n   * This function sets a new scale to the map.\n   * Developed for WGS 84 / Pseudo - Mercator 3857 projection.\n   * @private\n   * @function\n   */\n  setScale(scale) {\n    const wmts3857scales = [\n      559082264.0287178,\n      279541132.0143589,\n      139770566.0071794,\n      69885283.00358972,\n      34942641.50179486,\n      17471320.75089743,\n      8735660.375448715,\n      4367830.187724357,\n      2183915.093862179,\n      1091957.546931089,\n      545978.7734655447,\n      272989.3867327723,\n      136494.6933663862,\n      68247.34668319309,\n      34123.67334159654,\n      17061.83667079827,\n      8530.918335399136,\n      4265.459167699568,\n      2132.729583849784,\n    ];\n    const wmts3857resolutions = [\n      156543.0339280410,\n      78271.51696402048,\n      39135.75848201023,\n      19567.87924100512,\n      9783.939620502561,\n      4891.969810251280,\n      2445.984905125640,\n      1222.992452562820,\n      611.4962262814100,\n      305.7481131407048,\n      152.8740565703525,\n      76.43702828517624,\n      38.21851414258813,\n      19.10925707129406,\n      9.554628535647032,\n      4.777314267823516,\n      2.388657133911758,\n      1.194328566955879,\n      0.5971642834779395,\n    ];\n    // Finds closest standard scale\n    const newScale = wmts3857scales.reduce((prev, curr) => {\n      return (Math.abs(curr - scale) < Math.abs(prev - scale) ? curr : prev);\n    });\n    const newResolution = wmts3857resolutions[wmts3857scales.indexOf(newScale)];\n    const olMap = this.facadeMap_.getMapImpl();\n    const olView = olMap.getView();\n    olView.setResolution(newResolution);\n  }\n  /**\n   * This function reprojects map on selected SRS.\n   *\n   * @function\n   * @param {string} origin - EPSG:25830, EPSG:4326, ..., etc\n   * @param {array<number>} coordinates\n   * @api\n   */\n  reproject(origin, coordinates) {\n    const originProj = ol.proj.get(origin);\n    const destProj = ol.proj.get(this.map.getProjection().code);\n    let coordinatesTransform = ol.proj.transform(coordinates, originProj, destProj);\n    coordinatesTransform = [this.normalizeNumber(coordinates[0], coordinatesTransform[0]),\n      this.normalizeNumber(coordinates[1], coordinatesTransform[1]),\n    ];\n    return coordinatesTransform;\n  }\n\n  /**\n   * This function reprojects given coordinates to given projection.\n   * @private\n   * @function\n   * @param { Array <number> } coordinates - [x,y]\n   * @param { string } source - 'EPSG:4326'\n   * @param { string } destiny - 'EPSG:4326'\n   */\n  reprojectReverse(coordinates, source, destiny) {\n    const transformFunc = ol.proj.getTransform(source, destiny);\n    return transformFunc(coordinates);\n  }\n\n  /**\n   * This function reprojects map on selected SRS.\n   *\n   * @function\n   * @param {string} origin - EPSG:25830, EPSG:4326, ..., etc\n   * @param {array<number>} coordinates\n   * @api\n   */\n  reprojectXY(origin, coordinates) {\n    const originProj = ol.proj.get(origin);\n    const destProj = ol.proj.get(this.map.getProjection().code);\n    let coordinatesTransform = ol.proj.transform(coordinates, originProj, destProj);\n    coordinatesTransform = [this.normalizeNumber(coordinates[0], coordinatesTransform[0]),\n      this.normalizeNumber(coordinates[1], coordinatesTransform[1]),\n    ];\n    return coordinatesTransform;\n  }\n\n  normalizeNumber(origin, calculated) {\n    let res = origin;\n    if (origin !== 0) {\n      res = parseFloat(calculated.toFixed(9));\n    }\n\n    return res;\n  }\n}\n","const registerHelpers = () => {\n  Handlebars.registerHelper('toUpperCase', (str) => {\n    return str.toUpperCase();\n  });\n  Handlebars.registerHelper('ifCond', (v1, operator, v2, options) => {\n    switch (operator) {\n      case '===':\n        return (v1 === v2) ? options.fn(this) : options.inverse(this);\n      case '!==':\n        return (v1 !== v2) ? options.fn(this) : options.inverse(this);\n      case '<':\n        return (v1 < v2) ? options.fn(this) : options.inverse(this);\n      case '<=':\n        return (v1 <= v2) ? options.fn(this) : options.inverse(this);\n      case '>':\n        return (v1 > v2) ? options.fn(this) : options.inverse(this);\n      case '>=':\n        return (v1 >= v2) ? options.fn(this) : options.inverse(this);\n      case '&&':\n        return (v1 && v2) ? options.fn(this) : options.inverse(this);\n      case '||':\n        return (v1 || v2) ? options.fn(this) : options.inverse(this);\n      default:\n        return options.inverse(this);\n    }\n  });\n  Handlebars.registerHelper('printType', (type, address, id, municipality) => {\n    let line = `<li id=${id}><span id=\"info\">${address.toUpperCase()}</span>`;\n    // add following lines if asked to show entity type again\n    // (but not if type's portal, callejero or Codpost)\n    if (type !== 'callejero' && type !== 'portal' && type !== 'Codpost') {\n      line += ` (${type.toUpperCase()})`;\n    }\n    if (municipality !== undefined) {\n      line += ` en ${municipality}`;\n    }\n    return line;\n  });\n};\nexport default registerHelpers;\n","const geographicNameType = ['Estado',\n  // 'Comunidad autónoma',\n  // 'Ciudad con estatuto de autonomía',\n  // 'Provincia',\n  // 'Municipio',\n  'EATIM',\n  'Isla administrativa',\n  'Comarca administrativa',\n  'Jurisdicción',\n  // 'Capital de Estado',\n  // 'Capital de comunidad autónoma y ciudad con estatuto de autonomía',\n  // 'Capital de provincia',\n  // 'Capital de municipio',\n  // 'Capital de EATIM',\n  // 'Entidad colectiva',\n  'Entidad menor de población',\n  'Distrito municipal',\n  // 'Barrio',\n  'Entidad singular',\n  'Construcción/instalación abierta',\n  'Edificación',\n  // 'Vértice Geodésico',\n  // 'Hitos de demarcación territorial',\n  // 'Hitos en vías de comunicación',\n  'Alineación montañosa',\n  'Montaña',\n  'Paso de montaña',\n  'Llanura',\n  'Depresión',\n  'Vertientes',\n  'Comarca geográfica',\n  'Paraje',\n  'Elemento puntual del paisaje',\n  'Saliente costero',\n  'Playa',\n  'Isla',\n  'Otro relieve costero',\n  'Parque Nacional y Natural',\n  'Espacio protegido restante',\n  // 'Aeropuerto',\n  // 'Aeródromo',\n  // 'Pista de aviación y helipuerto',\n  // 'Puerto de Estado',\n  'Instalación portuaria',\n  // 'Carretera',\n  'Camino y vía pecuaria',\n  // 'Vía urbana',\n  // 'Ferrocarril',\n  'Curso natural de agua',\n  'Masa de agua',\n  'Curso artificial de agua',\n  'Embalse',\n  'Hidrónimo puntual',\n  'Glaciares',\n  'Mar',\n  'Entrante costero y estrecho marítimo',\n  'Relieve submarino',\n];\nexport default geographicNameType;\n","import en from './en';\nimport es from './es';\n\n/**\n * Default object with es and en translate.\n *\n * @const\n * @type {object}\n */\nconst translations = {\n  en,\n  es,\n};\n\nconst getLang = () => {\n  let res = 'es';\n  if (typeof M.language.getLang === 'function') {\n    res = M.language.getLang();\n  }\n\n  return res;\n};\n\n/**\n * This function sets a new language translate.\n * @param {string} lang\n * @param {JSON} json\n * @public\n * @api\n */\nexport const addTranslation = (lang, json) => {\n  translations[lang] = json;\n};\n\n/**\n * This function gets a language translate.\n *\n * @param {string} lang\n * @return {JSON}\n * @public\n * @api\n */\nexport const getTranslation = (lang) => {\n  return translations[lang];\n};\n\n/**\n * This function gets a language value from key\n *\n * @public\n * @param {string}\n * @param {string}\n * @return {string}\n * @public\n * @api\n */\n\nexport const getValue = (keyPath, lang = getLang()) => {\n  const translation = getTranslation(lang);\n  let value = '';\n  if (M.utils.isNullOrEmpty(translation)) {\n    /* eslint-disable no-console */\n    console.warn(`The translation '${lang}' has not been defined.`);\n  } else {\n    value = keyPath.split('.').reduce((prev, current) => prev[current], translation);\n  }\n\n  return value;\n};\n","/**\n * @module M/plugin/IGNSearchLocator\n */\nimport '../assets/css/ignsearchlocator';\nimport '../assets/css/fonts';\nimport api from '../../api';\nimport IGNSearchLocatorControl from './ignsearchlocatorcontrol';\nimport { getValue } from './i18n/language';\n\nexport default class IGNSearchLocator extends M.Plugin {\n  /**\n   * @classdesc\n   * Main facade plugin object. This class creates a plugin\n   * object which has an implementation Object\n   *\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api\n   */\n  constructor(options) {\n    super();\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * This variable indicates which services should be searched\n     * (geocoder, nomenclator or both)\n     * @private\n     * @type {string} - 'g' | 'n' | 'gn'\n     */\n    this.servicesToSearch = options.servicesToSearch || 'gn';\n\n    /**\n     * CMC_url\n     * @private\n     * @type {String}\n     */\n    const defectCMC = 'http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCallejeroCodigos.asmx/ConsultaMunicipioCodigos';\n    this.CMC_url = options.CMC_url != null ? options.CMC_url : defectCMC;\n\n    /**\n     * DNPPP_url\n     * @private\n     * @type {String}\n     */\n    const defectDNPP = 'http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCallejeroCodigos.asmx/Consulta_DNPPP_Codigos';\n    this.DNPPP_url = options.DNPPP_url != null ? options.DNPPP_url : defectDNPP;\n\n    /**\n     * CPMRC_url\n     * @private\n     * @type {String}\n     */\n    const defectCPMRC = 'http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCoordenadas.asmx/Consulta_CPMRC';\n    this.CPMRC_url = options.CPMRC_url != null ? options.CPMRC_url : defectCPMRC;\n\n    /**\n     * This variable sets the maximun results returned by a service\n     * (if both services are searched the maximum results will be twice this number)\n     * @private\n     * @type {number}\n     */\n    this.maxResults = options.maxResults || 10;\n\n    /**\n     * This variables indicates which entities shouldn't be searched\n     * @private\n     * @type {string} - 'municipio' | 'poblacion' | 'toponimo' | 'municipio,poblacion' | etc\n     */\n    this.noProcess = options.noProcess || 'poblacion';\n\n    /**\n     * This variable indicates the country code.\n     * @private\n     * @type {string} - 'es'\n     */\n    this.countryCode = options.countryCode || 'es';\n\n    /**\n     * This variable indicates Geocoder Candidates service url\n     * @private\n     * @type {string}\n     */\n    this.urlCandidates = options.urlCandidates || 'https://www.cartociudad.es/geocoder/api/geocoder/candidatesJsonp';\n\n    /**\n     * This variable indicates Geocoder Find service url\n     * @private\n     * @type {string}\n     */\n    this.urlFind = options.urlFind || 'https://www.cartociudad.es/geocoder/api/geocoder/findJsonp';\n\n    /**\n     * This variable indicates Geocoder Reverse service url\n     * @private\n     * @type {string}\n     */\n    this.urlReverse = options.urlReverse || 'https://www.cartociudad.es/geocoder/api/geocoder/reverseGeocode';\n\n    /**\n     * This variable indicates Nomenclator url prefix\n     * @private\n     * @type {string}\n     */\n    this.urlPrefix = options.urlPrefix || 'http://www.idee.es/';\n\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.urlAssistant = options.urlAssistant || 'https://www.idee.es/communicationsPoolServlet/SearchAssistant';\n\n    /**\n     * This variable indicates Nomenclator Dispatcher service url\n     * @private\n     * @type {string}\n     */\n    this.urlDispatcher = options.urlDispatcher || 'https://www.idee.es/communicationsPoolServlet/Dispatcher';\n\n    /**\n     * This variable indicates which entity types should be searched on Nomenclator service.\n     * @private\n     * @type {Array<string>}\n     */\n    this.nomenclatorSearchType = options.nomenclatorSearchType;\n\n    /**\n     * This variable indicates whether result geometry should be drawn on map.\n     * @private\n     * @type {boolean}\n     */\n    this.resultVisibility = options.resultVisibility || true;\n\n    /**\n     * This variable indicates whether the plugin can be collapsed.\n     * @private\n     * @type {boolean}\n     */\n    this.isCollapsed = options.isCollapsed || false;\n\n    /**\n     * This variable indicates whether the plugin can be collapsible.\n     * @private\n     * @type {boolean}\n     */\n    this.collapsible = options.collapsible || false;\n\n    /**\n     * This variable indicates plugin's position on window\n     * @private\n     * @type {string} { 'TL' | 'TR' | 'BL' | 'BR' } (corners)\n     */\n    this.position = options.position || 'TL';\n\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.pointStyle = options.pointStyle || 'pinBlanco';\n\n    /**\n     * @private\n     * @type {string} - tooltip on hover on plugin button\n     */\n    this.tooltip_ = options.tooltip || getValue('tooltip');\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.reverse_ = options.reverse || false;\n\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.locationID_ = (options.locationID && options.locationID.replace(/\\^/g, '&')) || '';\n\n    /**\n     * Text to search\n     * @private\n     * @type {string}\n     */\n    this.requestStreet_ = (options.requestStreet && options.requestStreet.replace(/\\^/g, '&')) || '';\n\n    let geocoderCoords = options.geocoderCoords;\n    if (M.utils.isString(geocoderCoords)) {\n      geocoderCoords = geocoderCoords.split(',');\n      geocoderCoords = [Number.parseFloat(geocoderCoords[0]),\n        Number.parseFloat(geocoderCoords[1]),\n      ];\n    }\n    /**\n     * Geocoder reverse coordinates\n     *\n     * @private\n     * @type {number}\n     */\n    this.geocoderCoords_ = geocoderCoords || [];\n\n    /**\n     * Metadata from api.json\n     * @private\n     * @type {Object}\n     */\n    this.metadata_ = api.metadata;\n\n    /**\n     * Zoom to do\n     *\n     * @private\n     * @type {string / number}\n     */\n    this.zoom_ = 16;\n    if (options.zoom !== undefined) {\n      this.zoom_ = parseInt(options.zoom, 10);\n    }\n\n    /**\n     * This variable indicates Nomenclator SearchAssistant service url\n     * @private\n     * @type {string}\n     */\n    this.searchPosition = options.searchPosition || 'nomenclator,geocoder';\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api\n   */\n  addTo(map) {\n    this.controls_.push(new IGNSearchLocatorControl(\n      this.servicesToSearch,\n      this.CMC_url,\n      this.DNPPP_url,\n      this.CPMRC_url,\n      this.maxResults,\n      this.noProcess,\n      this.countryCode,\n      this.urlCandidates,\n      this.urlFind,\n      this.urlReverse,\n      this.urlPrefix,\n      this.urlAssistant,\n      this.urlDispatcher,\n      this.resultVisibility,\n      this.reverse_,\n      this.locationID_,\n      this.requestStreet_,\n      this.geocoderCoords_,\n      this.zoom_,\n      this.searchPosition,\n      this.position,\n      this.pointStyle,\n    ));\n    this.controls_[0].on('ignsearchlocator:entityFound', (extent) => {\n      this.fire('ignsearchlocator:entityFound', [extent]);\n    });\n    this.controls_[0].on('xylocator:locationCentered', (data) => {\n      this.fire('xylocator:locationCentered', data);\n    });\n    this.map_ = map;\n    if (this.position === 'TC') {\n      this.collapsible = false;\n    }\n    this.panel_ = new M.ui.Panel('panelIGNSearchLocator', {\n      collapsible: this.collapsible,\n      position: M.ui.position[this.position],\n      collapsed: this.isCollapsed,\n      className: 'ign-searchlocator-panel',\n      collapsedButtonClass: 'icon-lupa',\n      tooltip: this.tooltip_,\n    });\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n  }\n\n  /**\n   * This function sets geometry visibility on map (visible|invisible).\n   * @public\n   * @function\n   * @param {boolean} flag\n   * @api\n   */\n  setResultVisibility(flag) {\n    this.controls_[0].setResultVisibility(flag);\n  }\n\n  /**\n   * Name of the plugin\n   *\n   * @getter\n   * @function\n   */\n  get name() {\n    return 'ignsearchlocator';\n  }\n\n  /**\n   * Reverse parameter\n   *\n   * @getter\n   * @function\n   */\n  get reverse() {\n    return this.reverse_;\n  }\n\n  /**\n   * Reverse geocoder coordinates\n   *\n   * @getter\n   * @function\n   */\n  get geocoderCoords() {\n    return this.controls_[0].geocoderCoords;\n  }\n\n  /**\n   * Text to search\n   * @getter\n   * @function\n   */\n  get requestStreet() {\n    return this.controls_[0].requestStreet;\n  }\n\n  /**\n   * Text to search\n   * @getter\n   * @function\n   */\n  get locationID() {\n    return this.controls_[0].locationID;\n  }\n\n  /**\n   * This function compares plugins\n   *\n   * @public\n   * @function\n   * @param {M.Plugin} plugin to compare\n   * @api\n   */\n  equals(plugin) {\n    return plugin instanceof IGNSearchLocator;\n  }\n\n  /**\n   * Get the API REST Parameters of the plugin\n   *\n   * @function\n   * @public\n   * @api\n   */\n  getAPIRest() {\n    return `${this.name}=${this.servicesToSearch}*${this.maxResults}*${this.noProcess}*${this.resultVisibility}*${this.isCollapsed}*${this.collapsible}*${this.position}*${this.reverse}*${this.requestStreet.replace(/&/g, '^')}*${this.locationID}*${this.geocoderCoords}*${this.zoom}*${this.searchPosition}*${this.pointStyle}`;\n  }\n\n  /**\n   * This function gets metadata plugin\n   *\n   * @public\n   * @function\n   * @api stable\n   */\n  getMetadata() {\n    return this.metadata_;\n  }\n\n  /**\n   * This function destroys this plugin\n   *\n   * @public\n   * @function\n   * @api\n   */\n  destroy() {\n    this.map_.removeControls(this.controls_);\n    [this.map_, this.controls_, this.panel_] = [null, null, null];\n  }\n}\n","import M$plugin$IGNSearchLocator from './/facade/js/ignsearchlocator';\nimport M$control$IGNSearchLocatorControl from './/facade/js/ignsearchlocatorcontrol';\nimport M$impl$control$IGNSearchLocatorControl from './/impl/ol/js/ignsearchlocatorcontrol';\n\nif (!window.M.plugin) window.M.plugin = {};\nif (!window.M.control) window.M.control = {};\nif (!window.M.impl) window.M.impl = {};\nif (!window.M.impl.control) window.M.impl.control = {};\nwindow.M.plugin.IGNSearchLocator = M$plugin$IGNSearchLocator;\nwindow.M.control.IGNSearchLocatorControl = M$control$IGNSearchLocatorControl;\nwindow.M.impl.control.IGNSearchLocatorControl = M$impl$control$IGNSearchLocatorControl;\n"],"sourceRoot":""}