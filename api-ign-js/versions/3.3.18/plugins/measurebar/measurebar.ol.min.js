!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e){e.exports=JSON.parse('{"exception":{"impl_position":"The implementation used cannot create MeasurePosition.","impl_length":"The implementation used cannot create MeasureLength.","impl_clear":"The implementation used cannot create MeasureClear.","impl_area":"The implementation used cannot create MeasureArea."},"text":{"tooltip":"Measurement tools","keep_drawing_new_position_lines":"Click to continue drawing new lines","keep_drawing":"Click to continue drawing the line","click_draw":"Click to start drawing","keep_drawing_area":"Click to continue drawing the area","measure_area":"Measure area","delete":"Remove measures","measure":"Measuring distances","measure_position":"Measuring distances from position"}}')},function(e){e.exports=JSON.parse('{"exception":{"impl_position":"La implementación usada no puede crear controles MeasurePosition.","impl_length":"La implementación usada no puede crear controles MeasureLength.","impl_clear":"La implementación usada no puede crear controles MeasureClear.","impl_area":"La implementación usada no puede crear controles MeasureArea."},"text":{"tooltip":"Herramientas de medición","keep_drawing_new_position_lines":"Click para continuar dibujando nuevas líneas","keep_drawing":"Click para continuar dibujando la línea","click_draw":"Click para empezar a dibujar","keep_drawing_area":"Click para continuar dibujando el área","measure_area":"Medir área","delete":"Borrar medidas","measure":"Medir distancias","measure_position":"Medir distancias desde posición"}}')},function(e,t){e.exports='<div class="m-measure-tooltip pointer"></div>'},function(e,t){e.exports='<div class="m-measure-tooltip measure">Area: {{area}}</div>'},function(e,t){e.exports='<div class="m-control m-measureposition-container">\n    <button id="measurebar-position-btn" class="measurebar-medir-position" title="{{translations.measure_position}}"></button>\n</div>\n'},function(e,t){e.exports='<div class="m-control m-measurearea-container">\n    <button id="measurebar-area-btn" class="measurebar-medir-area" title="{{translations.measure_area}}"></button>\n</div>\n'},function(e,t){e.exports='<div class="m-control m-measurelength-container">\n    <button id="measurebar-length-btn" class="measurebar-medir-linea" title="{{translations.measure}}"></button>\n</div>\n'},function(e,t){e.exports='<div class="m-control m-measureclear-container">\n    <button id="measurebar-clear-btn" class="g-cartografia-papelera" title="{{translations.delete}}"></button>\n</div>\n'},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o={en:n(0),es:n(1)},r=function(){var e="es";return"function"==typeof M.language.getLang&&(e=M.language.getLang()),e},i=function(e){return o[e]},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r(),n=i(t),o="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(t,"' has not been defined.")):o=e.split(".").reduce(function(e,t){return e[t]},n),o};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(e,n,o){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=c(this,s(t).call(this,e,o))).template_=n,r.destroyable=!0,r}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,M.Control),n=t,(o=[{key:"createView",value:function(e){return M.template.compileSync(this.template_,{jsonp:!0,vars:{translations:a("text")}})}},{key:"getActivationButton",value:function(e){return e.querySelector("button")}},{key:"equals",value:function(e){var n=!1;return e instanceof t&&(n=this.name===e.name),n}},{key:"destroy",value:function(){this.destroyable&&(this.destroyable=!1,this.getImpl().destroy(),this.map_.removeControls(this),this.template_=null,this.impl=null)}}])&&l(n.prototype,o),r&&l(n,r),t}();p.NAME="measurebar",p.POINTER_TOOLTIP_TEMPLATE="measure_pointer_tooltip.html",p.MEASURE_TOOLTIP_TEMPLATE="measure_tooltip.html",p.HELP_MESSAGE=a("text.click_draw");var y=n(2),h=n.n(y),m=n(3),d=n.n(m);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=v(this,w(t).call(this))).type_=n.checkSetType_(e),n.layer_=n.createLayer_(),n.draw_=n.createIteractionDraw_(),n.helpTooltip_=null,n.measureTooltip_=null,n.facadeMap_=null,n.currentFeature_=null,n.tooltipCoord_=null,n.overlays_=[],n}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,M.impl.Control),n=t,(o=[{key:"checkSetType_",value:function(e){return"LineString-Position-Option"===e?(this.isMeasurePosition=!0,"LineString"):(this.isMeasurePosition=!1,e)}},{key:"addTo",value:function(e,n){this.facadeMap_=e,e.getMapImpl().addLayer(this.layer_),g(w(t.prototype),"addTo",this).call(this,e,n),this.createHelpTooltip_(),this.createMeasureTooltip_()}},{key:"activate",value:function(){this.invokeEscKey(),this.createHelpTooltip_(),this.listenerPointerMoveHandlerKey=this.facadeMap_.getMapImpl().on("pointermove",this.pointerMoveHandler_.bind(this)),this.isMeasurePosition?(this.active=!0,setTimeout(this.isCoordinatesSupliedWait.bind(this),10),this.draw_.freehandCondition_=function(){return!1}):(this.facadeMap_.getMapImpl().addInteraction(this.draw_),this.active=!0,this.draw_.freehandCondition_=ol.events.condition.shiftKeyOnly),this.createMeasureTooltip_(),document.body.style.cursor="crosshair",this.boundCheckEscKey=this.checkEscKey.bind(this),document.addEventListener("keyup",this.boundCheckEscKey)}},{key:"checkEscKey",value:function(e){"Escape"===e.key&&(document.querySelectorAll(".m-panel.m-panel-measurebar .m-panel-controls div.activated > button").forEach(function(e){e.click()}),document.removeEventListener("keyup",this.boundCheckEscKey))}},{key:"invokeEscKey",value:function(){try{document.dispatchEvent(new window.KeyboardEvent("keyup",{key:"Escape",keyCode:27,code:"",which:69,shiftKey:!1,ctrlKey:!1,metaKey:!1}))}catch(e){console.error(e)}}},{key:"isCoordinatesSupliedWait",value:function(){this.active&&(null!=this.coordinatesPosition?(this.facadeMap_.getMapImpl().addInteraction(this.draw_),this.draw_.startDrawing_({coordinate:this.coordinatesPosition,map:this.facadeMap_.getMapImpl()})):setTimeout(this.isCoordinatesSupliedWait.bind(this),500))}},{key:"deactivate",value:function(){document.body.style.cursor="default",ol.Observable.unByKey(this.listenerPointerMoveHandlerKey),document.removeEventListener("keyup",this.boundCheckEscKey),this.facadeMap_&&(this.facadeMap_.getMapImpl().removeInteraction(this.draw_),M.utils.isNullOrEmpty(this.helpTooltip_)||this.facadeMap_.getMapImpl().removeOverlay(this.helpTooltip_),M.utils.isNullOrEmpty(this.measureTooltip_)||this.facadeMap_.getMapImpl().removeOverlay(this.measureTooltip_)),this.active=!1,this.coordinatesPosition=null}},{key:"createLayer_",value:function(){return new ol.layer.Vector({source:new ol.source.Vector({}),style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(51, 124, 235, 0.2)"}),stroke:new ol.style.Stroke({color:"#337ceb",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#337ceb"})})}),zIndex:9999999999999})}},{key:"createIteractionDraw_",value:function(){var e=new ol.interaction.Draw({source:this.layer_.getSource(),type:this.type_,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.5)"}),stroke:new ol.style.Stroke({color:"#b54d01",lineDash:[10,10],width:2}),image:new ol.style.Circle({radius:5,stroke:new ol.style.Stroke({color:"#b54d01"}),fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.5)"})})})});return e.on("drawstart",this.onDrawStart_.bind(this)),e.on("drawend",this.onDrawEnd_.bind(this)),e}},{key:"createHelpTooltip_",value:function(){var e=M.template.compileSync(h.a,{jsonp:!0,vars:{translations:a("text")}});this.helpTooltip_=new ol.Overlay({element:e,offset:[15,0],positioning:"center-left"}),this.facadeMap_.getMapImpl().addOverlay(this.helpTooltip_)}},{key:"createMeasureTooltip_",value:function(){var e=M.template.compileSync(d.a,{jsonp:!0,vars:{translations:a("text")}});M.utils.isNullOrEmpty(this.measureTooltip_)||this.overlays_.push(this.measureTooltip_),this.measureTooltip_=new ol.Overlay({element:e,offset:[0,-15],positioning:"bottom-center"}),this.facadeMap_.getMapImpl().addOverlay(this.measureTooltip_)}},{key:"onDrawStart_",value:function(e){this.currentFeature_=e.feature,this.tooltipCoord_=e.coordinate,this.currentFeature_.getGeometry().on("change",this.onGeometryChange_.bind(this))}},{key:"onDrawEnd_",value:function(e){this.currentFeature_.getGeometry().un("change",this.onGeometryChange_),this.currentFeature_=null,this.measureTooltip_.getElement().classList.add("static"),this.measureTooltip_.setOffset([0,-7]),this.createMeasureTooltip_(),this.isMeasurePosition&&this.draw_.startDrawing_({coordinate:this.coordinatesPosition,map:this.facadeMap_.getMapImpl()})}},{key:"pointerMoveHandler_",value:function(e){if(!e.dragging){var t=this.helpMsg_;this.currentFeature_&&(t=this.helpMsgContinue_),M.utils.isNullOrEmpty(this.helpTooltip_)||(this.helpTooltip_.getElement().innerHTML=t,this.helpTooltip_.setPosition(e.coordinate))}}},{key:"onGeometryChange_",value:function(e){var t=e.target,n=this.formatGeometry(t),o=this.getTooltipCoordinate(t);M.utils.isNullOrEmpty(this.measureTooltip_)||(this.measureTooltip_.getElement().innerHTML=n,this.measureTooltip_.setPosition(o)),this.isMeasurePosition&&this.draw_.atFinish_({map:this.facadeMap_.getMapImpl(),pixel:this.facadeMap_.getMapImpl().getPixelFromCoordinate(o)})&&this.draw_.finishDrawing()}},{key:"clear",value:function(){var e=this;M.utils.isNullOrEmpty(this.layer_)||this.layer_.getSource().clear(),this.overlays_.forEach(function(t){e.facadeMap_.getMapImpl().removeOverlay(t)},this),this.overlays_.length=0}},{key:"destroy",value:function(){this.deactivate(),this.element.remove(),this.facadeMap_=null,this.overlays_.length=0}}])&&_(n.prototype,o),r&&_(n,r),t}();function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e,t,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=k(this,T(t).call(this,"LineString-Position-Option"))).helpMsg_=p.HELP_MESSAGE,e.helpMsgContinue_=H,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,P),n=t,(o=[{key:"formatGeometry",value:function(e){var t=null,n=this.facadeMap_.getProjection().code,o=this.facadeMap_.getProjection().units;if("EPSG:3857"===n)t=Math.round(100*ol.sphere.getLength(e))/100;else if("d"===o)for(var r=e.getCoordinates(),i=0,a=r.length-1;i<a;i+=1)t+=ol.sphere.getDistance(ol.proj.transform(r[i],n,"EPSG:4326"),ol.proj.transform(r[i+1],n,"EPSG:4326"));else t=Math.round(100*e.getLength())/100;return t>1e3?"".concat(this.formatNumber(Math.round(t/1e3*100)/100)," km"):"".concat(this.formatNumber(Math.round(100*t)/100)," m")}},{key:"getTooltipCoordinate",value:function(e){return e.getLastCoordinate()}},{key:"activate",value:function(){var e=this.facadeMap_.getControls().filter(function(e){return e instanceof te||e instanceof be});e[0]&&e[0].deactivate(),e[1]&&e[1].deactivate(),E(T(t.prototype),"activate",this).call(this),document.querySelector(".m-control.m-measureposition-container").classList.add("activated")}},{key:"setCoordLocationStart",value:function(e){this.coordinatesPosition=e}},{key:"formatNumber",value:function(e){return"".concat(e).replace(/\d(?=(\d{3})+\.)/g,"$&*").split(".").join(",").split("*").join(".")}}])&&j(n.prototype,o),r&&j(n,r),t}(),x=n(4),A=n.n(x);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=new L;return e=R(this,G(t).call(this,n,A.a,t.NAME)),M.utils.isUndefined(L)&&M.Exception(a("exception.impl_position")),e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,p),n=t,(o=[{key:"equals",value:function(e){var n=!1;return e instanceof t&&(n=this.name===e.name),n}}])&&N(n.prototype,o),r&&N(n,r),t}();K.NAME="measureposition",K.TEMPLATE="measureposition.html";var H=a("text.keep_drawing_new_position_lines");function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function B(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e,t,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=B(this,V(t).call(this,"Polygon"))).helpMsg_=p.HELP_MESSAGE,e.helpMsgContinue_=ne,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,P),n=t,(o=[{key:"formatGeometry",value:function(e){var t,n,o=this.facadeMap_.getProjection();return(t=ol.sphere.getArea(e,{projection:o.code}))<=1e4?n="".concat(this.formatNumber(Math.round(100*t)/100)," m<sup>2</sup>"):t>1e4&&t<=1e6?n="".concat(this.formatNumber(Math.round(t/1e4*1e4)/1e4)," ha"):t>1e6&&(n="".concat(this.formatNumber(Math.round(t/1e6*1e4)/1e4)," km<sup>2</sup>")),n}},{key:"getTooltipCoordinate",value:function(e){return e.getInteriorPoint().getCoordinates()}},{key:"activate",value:function(){var e=this.facadeMap_.getControls().filter(function(e){return e instanceof be||e instanceof K});e[0]&&e[0].deactivate(),e[1]&&e[1].deactivate(),U(V(t.prototype),"activate",this).call(this),document.querySelector(".m-control.m-measurearea-container").classList.add("activated")}},{key:"formatNumber",value:function(e){return"".concat(e).replace(/\d(?=(\d{3})+\.)/g,"$&*").split(".").join(",").split("*").join(".")}}])&&F(n.prototype,o),r&&F(n,r),t}(),z=n(5),J=n.n(z);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Y(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var te=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=new $;return e=Y(this,Z(t).call(this,n,J.a,t.NAME)),M.utils.isUndefined($)&&M.Exception(a("exception.impl_area")),e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,p),n=t,(o=[{key:"equals",value:function(e){var n=!1;return e instanceof t&&(n=this.name===e.name),n}}])&&X(n.prototype,o),r&&X(n,r),t}();te.NAME="measurearea",te.TEMPLATE="measurearea.html";var ne=a("text.keep_drawing_area");function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ie(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e,t,n){return(ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ue(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ce=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ie(this,ue(t).call(this,"LineString"))).helpMsg_=p.HELP_MESSAGE,e.helpMsgContinue_=_e,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,P),n=t,(o=[{key:"formatGeometry",value:function(e){var t=null,n=this.facadeMap_.getProjection().code,o=this.facadeMap_.getProjection().units;if("EPSG:3857"===n)t=Math.round(100*ol.sphere.getLength(e))/100;else if("d"===o)for(var r=e.getCoordinates(),i=0,a=r.length-1;i<a;i+=1)t+=ol.sphere.getDistance(ol.proj.transform(r[i],n,"EPSG:4326"),ol.proj.transform(r[i+1],n,"EPSG:4326"));else t=Math.round(100*e.getLength())/100;return t>1e3?"".concat(this.formatNumber(Math.round(t/1e3*100)/100)," km"):"".concat(this.formatNumber(Math.round(100*t)/100)," m")}},{key:"getTooltipCoordinate",value:function(e){return e.getLastCoordinate()}},{key:"activate",value:function(){var e=this.facadeMap_.getControls().filter(function(e){return e instanceof te||e instanceof K});e[0]&&e[0].deactivate(),e[1]&&e[1].deactivate(),ae(ue(t.prototype),"activate",this).call(this),document.querySelector(".m-control.m-measurelength-container").classList.add("activated")}},{key:"formatNumber",value:function(e){return"".concat(e).replace(/\d(?=(\d{3})+\.)/g,"$&*").split(".").join(",").split("*").join(".")}}])&&re(n.prototype,o),r&&re(n,r),t}(),se=n(6),fe=n.n(se);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function he(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=new ce;return e=he(this,me(t).call(this,n,fe.a,t.NAME)),M.utils.isUndefined(ce)&&M.Exception(a("exception.impl_length")),e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,p),n=t,(o=[{key:"equals",value:function(e){var n=!1;return e instanceof t&&(n=this.name===e.name),n}}])&&ye(n.prototype,o),r&&ye(n,r),t}();be.NAME="measurelength",be.TEMPLATE="measurelength.html";var _e=a("text.keep_drawing");function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function we(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pe=function(e){function t(e,n,o){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=we(this,Oe(t).call(this))).measureLengthControl_=e,r.facadeMap_=null,r.measureAreaControl_=n,r.measurePositionControl_=o,r}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,M.impl.Control),n=t,(o=[{key:"addTo",value:function(e,t){this.facadeMap_=e,t.querySelector("#measurebar-clear-btn").addEventListener("click",this.onClick.bind(this)),ol.control.Control.call(this,{element:t,target:null}),e.getMapImpl().addControl(this)}},{key:"onClick",value:function(){this.measureLengthControl_.clear(),this.measureAreaControl_.clear(),this.measurePositionControl_.clear(),this.deactivateOtherBtns()}},{key:"deactivateOtherBtns",value:function(){var e=this.facadeMap_.getControls().filter(function(e){return e instanceof be})[0];e&&e.deactivate();var t=this.facadeMap_.getControls().filter(function(e){return e instanceof te})[0];t&&t.deactivate();var n=this.facadeMap_.getControls().filter(function(e){return e instanceof K})[0];n&&n.deactivate()}},{key:"destroy",value:function(){this.element.remove(),this.facadeMap_=null}}])&&ge(n.prototype,o),r&&ge(n,r),t}(),Se=n(7),je=n.n(Se);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Te(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xe=function(e){function t(e,n,o){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=new Pe(e.getImpl(),n.getImpl(),o.getImpl());return r=Te(this,Ce(t).call(this,i,t.NAME)),M.utils.isUndefined(Pe)&&M.Exception(a("exception.impl_clear")),r.destroyable=!0,r}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(t,M.Control),n=t,(o=[{key:"createView",value:function(e){return M.template.compileSync(je.a,{jsonp:!0,vars:{translations:a("text")}})}},{key:"equals",value:function(e){var n=!1;return e instanceof t&&(n=this.name===e.name),n}},{key:"destroy",value:function(){this.destroyable&&(this.destroyable=!1,this.getImpl().destroy(),this.map_.removeControls(this),this.impl=null)}}])&&Ee(n.prototype,o),r&&Ee(n,r),t}();xe.NAME="measurebar",xe.TEMPLATE="measureclear.html";n(8);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ne(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ne(this,Re(t).call(this))).map_=null,e.controls_=[],e.position_=n.position,e.measureLength_=null,e.measureArea_=null,e.measureClear_=null,e.measurePosition_=null,e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,M.Plugin),n=t,(o=[{key:"addTo",value:function(e){this.map_=e,this.measureLength_=new be,this.measureArea_=new te,this.measurePosition_=new K,this.measureClear_=new xe(this.measureLength_,this.measureArea_,this.measurePosition_),this.controls_.push(this.measureLength_,this.measureArea_,this.measureClear_,this.measurePosition_),this.panel_=new M.ui.Panel("MeasureBar",{collapsible:!0,position:M.ui.position[this.position_],className:"m-panel-measurebar",collapsedButtonClass:"measurebar-regla",tooltip:a("text.tooltip")}),this.panel_.addControls(this.controls_),this.map_.addPanels(this.panel_)}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position_)}},{key:"destroy",value:function(){this.map_.removeControls([this.measureLength_,this.measureArea_,this.measureClear_,this.measurePosition_]),this.map_=null,this.measureLength_=null,this.measureArea_=null,this.measureClear_=null,this.measurePosition_=null}},{key:"getControls",value:function(){var e=[];return e.push(this.measureArea_,this.measureClear_,this.measureLength_,this.measurePosition_),e}},{key:"equals",value:function(e){return e instanceof t}},{key:"name",get:function(){return"measurebar"}}])&&Ie(n.prototype,o),r&&Ie(n,r),t}();window.M.plugin||(window.M.plugin={}),window.M.plugin.MeasureBar=De}]);
//# sourceMappingURL=measurebar.ol.min.js.map