{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/templates/main.html","webpack:///./src/facade/js/backgroundlayersselectorcontrol.js","webpack:///./src/facade/js/backgroundlayersselector.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","MAXIMUM_LAYERS","BackgroundLayersSelector","layers","_this","_classCallCheck","this","impl","M","Control","_possibleConstructorReturn","_getPrototypeOf","slice","flattedLayers","reduce","current","next","concat","activeLayer","map","_this2","Promise","success","fail","html","template","compileSync","vars","listen","querySelector","click","uniqueButton","innerText","title","control","e","layersInfo","callback","handlerClickDesktop","window","innerWidth","config","MOBILE_WIDTH","handlerClickMobile","removeLayers","isActived","target","parentElement","id","classList","contains","forEach","layer","index","array","setZIndex","length","querySelectorAll","button","remove","add","addLayers","_this3","b","addEventListener","showBaseLayer","options","arguments","undefined","backgroundlayersselector_classCallCheck","backgroundlayersselector_possibleConstructorReturn","backgroundlayersselector_getPrototypeOf","map_","controls_","position_","position","Plugin","push","BackgroundLayersSelectorControl","layerOpts","panel_","ui","Panel","collapsible","className","addControls","addPanels","plugin","M$plugin$BackgroundLayersSelector","M$control$BackgroundLayersSelector"],"mappings":"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","file":"backgroundlayerselector.ol.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = \"<div id=\\\"div-contenedor\\\" class=\\\"m-control m-container m-background\\\">\\n    {{#each layers}}\\n        <button class=\\\"m-background-group-btn\\\" id=\\\"m-baselayerselector-{{this.id}}\\\" title=\\\"Selección de capa de fondo\\\">{{this.title}}</button>\\n    {{/each}}\\n    <button class=\\\"m-background-unique-btn\\\" id=\\\"m-baselayerselector-unique-btn\\\" title=\\\"Selección de capa de fondo\\\"></button>\\n</div>\";","/**\n * @module M/control/BackgroundLayersSelector\n */\n\nimport template from 'templates/main';\n\n/**\n * This parameter indicates the maximum base layers of plugin\n *\n * @type {number}\n * @const\n * @private\n */\nconst MAXIMUM_LAYERS = 5;\n\n/**\n * @classdesc\n * Background layers selector Mapea control.\n * This control puts a set of layers in the background of the map.\n */\nexport default class BackgroundLayersSelector extends M.Control {\n  /**\n   * @constructor\n   * @extends {M.Control}\n   * @api\n   */\n  constructor(layers) {\n    const impl = new M.impl.Control();\n    super(impl, 'BaseLayerSelector');\n\n    this.layers = layers.slice(0, MAXIMUM_LAYERS);\n    this.flattedLayers = this.layers.reduce((current, next) => current.concat(next.layers), []);\n    this.activeLayer = -1;\n  }\n\n  /**\n   * This function creates the view\n   *\n   * @public\n   * @function\n   * @param {M.Map} map - map to add the control\n   * @api\n   */\n  createView(map) {\n    this.map = map;\n    return new Promise((success, fail) => {\n      const html = M.template.compileSync(template, { vars: { layers: this.layers } });\n      this.html = html;\n      this.listen(html);\n      html.querySelector('button').click();\n      this.uniqueButton = this.html.querySelector('#m-baselayerselector-unique-btn');\n      this.uniqueButton.innerText = this.layers[0].title;\n      success(html);\n    });\n  }\n\n  /**\n   * This function compares controls\n   *\n   * @public\n   * @function\n   * @param {M.Control} control - control to compare\n   * @api\n   */\n  equals(control) {\n    return control instanceof BackgroundLayersSelector;\n  }\n\n  /**\n   * This function adds layer bound to the button clicked\n   * @public\n   * @param {DOMEvent} e - click html event\n   * @param {object} layersInfo - Layers options\n   * @api\n   */\n  showBaseLayer(e, layersInfo, i) {\n    let callback = this.handlerClickDesktop.bind(this);\n    if (window.innerWidth <= M.config.MOBILE_WIDTH) {\n      callback = this.handlerClickMobile.bind(this);\n    }\n    callback(e, layersInfo, i);\n  }\n\n  /**\n   * This function manages the click event when the app is in desktop resolution\n   *\n   * @function\n   */\n  handlerClickDesktop(e, layersInfo, i) {\n    this.removeLayers();\n    const { layers, title } = layersInfo;\n    const isActived = e.target.parentElement\n      .querySelector(`#m-baselayerselector-${layersInfo.id}`)\n      .classList.contains('activeBaseLayerButton');\n\n    layers.forEach((layer, index, array) => layer.setZIndex(index - array.length));\n\n    e.target.parentElement.querySelectorAll('button[id^=\"m-baselayerselector-\"]').forEach((button) => {\n      if (button.classList.contains('activeBaseLayerButton')) {\n        button.classList.remove('activeBaseLayerButton');\n      }\n    });\n    if (!isActived) {\n      this.activeLayer = i;\n      e.target.parentElement.querySelector('#m-baselayerselector-unique-btn').innerText = title;\n      e.target.parentElement\n        .querySelector(`#m-baselayerselector-${layersInfo.id}`).classList.add('activeBaseLayerButton');\n      this.map.addLayers(layers);\n    }\n  }\n\n  /**\n   * This function manages the click event when the app is in mobile resolution\n   * @function\n   */\n  handlerClickMobile(e) {\n    this.removeLayers();\n    this.activeLayer += 1;\n    this.activeLayer = this.activeLayer % this.layers.length;\n    const layersInfo = this.layers[this.activeLayer];\n    const { layers, id, title } = layersInfo;\n\n    layers.forEach((layer, index, array) => layer.setZIndex(index - array.length));\n\n    e.target.parentElement.querySelectorAll('button[id^=\"m-baselayerselector-\"]').forEach((button) => {\n      if (button.classList.contains('activeBaseLayerButton')) {\n        button.classList.remove('activeBaseLayerButton');\n      }\n    });\n    e.target.innerText = title;\n    e.target.parentElement\n      .querySelector(`#m-baselayerselector-${id}`).classList.add('activeBaseLayerButton');\n    this.map.addLayers(layers);\n  }\n\n  /**\n   * This function removes this.layers from Map.\n   * @function\n   * @public\n   * @api\n   */\n  removeLayers() {\n    this.map.removeLayers(this.flattedLayers);\n  }\n\n  /**\n   * This function add the events listener to each button of the html\n   * @param {HTMLElement} html\n   * @function\n   * @public\n   * @api\n   */\n  listen(html) {\n    html.querySelectorAll('button.m-background-group-btn')\n      .forEach((b, i) => b.addEventListener('click', e => this.showBaseLayer(e, this.layers[i], i)));\n    html.querySelector('#m-baselayerselector-unique-btn').addEventListener('click', e => this.showBaseLayer(e));\n  }\n}\n","/**\n * @module M/plugin/BackgroundLayersSelector\n */\nimport 'assets/css/main';\nimport BackgroundLayersSelectorControl from './backgroundlayersselectorcontrol';\n\n/**\n * @classdesc\n * Background layers selector Mapea plugin.\n */\nexport default class BackgroundLayersSelector extends M.Plugin {\n  /**\n   * @constructor\n   * @extends {M.Plugin}\n   * @param {Object} impl implementation object\n   * @api\n   */\n  constructor(options = {}) {\n    super();\n\n    /**\n     * Facade of the map\n     * @private\n     * @type {M.Map}\n     */\n    this.map_ = null;\n\n    /**\n     * Array of controls\n     * @private\n     * @type {Array<M.Control>}\n     */\n    this.controls_ = [];\n\n    /**\n     * Position of the plugin\n     *\n     * @private\n     * @type {Enum} TL | TR | BL | BR\n     */\n    this.position_ = options.position || 'TR';\n\n    /**\n     * @public\n     * @type {object}\n     */\n    this.options = options;\n  }\n\n  /**\n   * This function adds this plugin into the map\n   *\n   * @public\n   * @function\n   * @param {M.Map} map the map to add the plugin\n   * @api\n   */\n  addTo(map) {\n    this.controls_.push(new BackgroundLayersSelectorControl(this.options.layerOpts));\n    this.map_ = map;\n    this.panel_ = new M.ui.Panel('panelBackgroundLayersSelector', {\n      collapsible: false,\n      position: M.ui.position[this.position_],\n      className: 'm-plugin-baselayer',\n    });\n    this.panel_.addControls(this.controls_);\n    map.addPanels(this.panel_);\n  }\n}\n","import M$plugin$BackgroundLayersSelector from './/facade/js/backgroundlayersselector';\nimport M$control$BackgroundLayersSelector from './/facade/js/backgroundlayersselectorcontrol';\n\nif (!window.M.plugin) window.M.plugin = {};\nif (!window.M.control) window.M.control = {};\nwindow.M.plugin.BackgroundLayersSelector = M$plugin$BackgroundLayersSelector;\nwindow.M.control.BackgroundLayersSelector = M$control$BackgroundLayersSelector;\n"],"sourceRoot":""}