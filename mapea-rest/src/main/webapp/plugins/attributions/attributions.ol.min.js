!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports='<div id="m-attributions-container" class="m-control m-container m-attributions">\n    <button id=\'close-button\' class="{{icon}}"></button>\n</div>'},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(1);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=i(this,u(e).call(this))).map_=t,n}var n,o,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,M.Object),n=e,(o=[{key:"registerEvent",value:function(t,e){this.map_.getMapImpl().on(t,e)}}])&&r(n.prototype,o),l&&r(n,l),e}();function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,y(e).apply(this,arguments))}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,M.impl.Control),n=e,(o=[{key:"addTo",value:function(t,n){var o=this;t.getMapImpl().getInteractions().forEach(function(t){t instanceof ol.interaction.DoubleClickZoom&&(o.dblClickInteraction_=t)}),p(y(e.prototype),"addTo",this).call(this,t,n)}}])&&s(n.prototype,o),r&&s(n,r),e}(),h=n(0),d=n.n(h);function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function g(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var P=function(t){function e(t,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M.utils.isUndefined(m)&&M.exception("La implementaciÃ³n usada no puede crear controles AttributionsControl");var r=new m;return(o=g(this,w(e).call(this,r,"Attributions"))).position=t,o.closePanel=n,o}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,M.Control),n=e,(o=[{key:"createView",value:function(t){var e=this;return this.map=t,new Promise(function(t,n){var o=M.template.compileSync(d.a,{vars:{icon:"BR"===e.position||"TR"===e.position?"g-cartografia-flecha-derecha":"g-cartografia-flecha-izquierda"}});o.querySelector("#close-button").addEventListener("click",function(){return e.closePanel()}),e.html_=o,t(o)})}},{key:"equals",value:function(t){return t instanceof e}}])&&v(n.prototype,o),r&&v(n,r),e}();function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function S(t,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var A={mapAttributions:1,layerAttributions:2,mixed:3},C=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=S(this,x(e).call(this)),M.utils.isNullOrEmpty(n.mode)||!Object.values(A).includes(n.mode))throw new Error("Options mode is bad setted. Tip: {mode: 1 | 2 | 3}, ...");if(n.mode===A.mapAttributions&&!M.utils.isNullOrEmpty(n.url)&&M.utils.isNullOrEmpty(n.type))throw new Error('Missing "type" options. When "url" option is setted the plugin needs "type" option. Values = geojson | kml | topojson');if(n.mode===A.mapAttributions&&!M.utils.isNullOrEmpty(n.layerName)&&M.utils.isNullOrEmpty(n.type))throw new Error('Missing "layerName" options. When "url" option is setted the plugin needs "layerName" option.');return t.map_=null,t.controls_=[],t.mode_=n.mode,t.url_=n.url||"https://componentes.ign.es/NucleoVisualizador/vectorial_examples/atribucionPNOA.kml",t.type_=n.type||"kml",t.layerName_=n.layerName||"attributions",t.layer_=n.layer,t.scale_=n.scale||1e4,t.attributionParam_=n.attributionParam||"atribucion",t.urlParam_=n.urlParam||"url",t.minWidth_=n.minWidth||"100px",t.maxWidth_=n.maxWidth||"200px",t.position_=n.position||"BL",t.defaultAttribution_=n.defaultAttribution,t.defaultURL_=n.defaultURL,t.tooltip_=n.tooltip||"Reconocimientos",window.addEventListener("resize",function(e){return t.setCollapsiblePanel(e)}),t}var n,o,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(e,M.Plugin),n=e,(o=[{key:"addTo",value:function(t){var e=this;this.map_=t,this.impl_=new l(t),this.control_=new P(this.position_,this.closePanel),this.controls_.push(this.control_),this.panel_=new M.ui.Panel("Attributions",{collapsible:window.innerWidth<769,position:M.ui.position[this.position_],className:"m-panel-attributions",collapsedButtonClass:"g-cartografia-info",tooltip:this.tooltip_}),this.panel_.addControls(this.control_),this.map_.addPanels(this.panel_),this.initMode(),this.onMoveEnd(function(){e.changeAttributions()})}},{key:"initMode",value:function(){if(this.mode_===A.mapAttributions){if(!(this.layer_ instanceof M.layer.Vector)){var t={name:this.layerName_,url:this.url_};"geojson"===this.type_?this.layer_=new M.layer.GeoJSON(t):"kml"===this.type_?this.layer_=new M.layer.KML(t):this.type}this.map_.getLayers({name:this.layer_}).length<1&&(this.map_.addLayers(this.layer_),this.layer_.displayInLayerSwitcher=!1,this.layer_.setVisible(!1))}}},{key:"changeAttributions",value:function(){if(this.clearContent(),this.map_.getScale()<=this.scale_){this.setVisible(!0);var t=[];this.mode_===A.mapAttributions?t=this.getMapAttributions():this.mode_===A.layerAttributions||(this.mode,A.mixed),this.addContent(t)}else"string"!=typeof this.defaultAttribution_?this.setVisible(!1):this.addContent([{attribution:this.defaultAttribution_,url:this.defaultURL_}])}},{key:"addContent",value:function(t){var e=this.control_.getElement(),n=t.map(function(t,e,n){var o=document.createElement("a");return o.target="_blank",o.href=t.url,o.innerText=t.attribution,o.innerText+=n.length-1===e?"":",",o}),o=document.createElement("div");n.forEach(function(t){o.append(t)}),e.append(o)}},{key:"clearContent",value:function(){var t=this.control_.getElement();t.querySelectorAll("div").forEach(function(e){return t.removeChild(e)})}},{key:"setVisible",value:function(t){this.control_.getElement().style.display=!1===t?"none":""}},{key:"getMapAttributions",value:function(){var t=this;this.updateBBoxFeature();var e=this.layer_.getFeatures();return new M.filter.spatial.INTERSECT(this.bboxFeature_).execute(e).map(function(e){return{attribution:e.getAttribute(t.attributionParam_),url:e.getAttribute(t.urlParam_)||t.defaultURL_}}).filter(function(t,e,n){return n.map(function(t){return t.attribution}).indexOf(t.attribution)===e})}},{key:"getLayerAttributions",value:function(){}},{key:"closePanel",value:function(){this.getPanel().collapse()}},{key:"changeContentAttribution",value:function(t){this.control_.changeContent(t)}},{key:"updateBBoxFeature",value:function(){var t=this.map_.getBbox(),e=t.x,n=t.y;this.bboxFeature_=new M.Feature("bbox_feature",{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[e.min,n.min],[e.min,n.max],[e.max,n.max],[e.max,n.min],[e.min,n.min]]]}})}},{key:"setCollapsiblePanel",value:function(t){this.getPanel()&&this.getPanel().getTemplatePanel()&&(t.target.innerWidth<769?(this.getPanel().getTemplatePanel().classList.remove("no-collapsible"),this.closePanel()):(this.getPanel().getTemplatePanel().classList.add("no-collapsible"),this.getPanel().getTemplatePanel().classList.remove("collapsed")))}},{key:"onMoveEnd",value:function(t){this.impl_.registerEvent("moveend",function(e){return t(e)})}},{key:"getPanel",value:function(){return this.panel_}},{key:"name",get:function(){return"Attributions"}}])&&E(n.prototype,o),r&&E(n,r),e}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.Attributions=C,window.M.control.AttributionsControl=P,window.M.impl.control.AttributionsControl=m}]);
//# sourceMappingURL=attributions.ol.min.js.map