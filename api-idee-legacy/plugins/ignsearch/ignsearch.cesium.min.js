(()=>{var e={939:()=>{},39:e=>{e.exports='<div id="div-contenedor" class="m-control m-container m-ignsearch" title="">\n    <div class="search-panel">\n        <input type="text" id="m-ignsearch-search-input" class="m-input-search" title="{{translations.tooltip_input}}" placeholder="{{translations.direccion}}" />\n        <button id="m-ignsearch-locate-button" title="{{translations.obtener}}">\n            <span class="icon-locate" />\n        </button>\n        <button id="m-ignsearch-clear-button" class="m-button-limpiar" title="{{translations.deleteresults}}">\n            <span class="icon-remove" />\n        </button>\n    </div>\n    <div id="m-ignsearch-results">\n        \x3c!-- Here goes the list of search results --\x3e\n    </div>\n</div>\n'},288:e=>{e.exports='<ul id="m-ignsearch-results-list">\n    {{#each places}}\n        {{#if this.address}}\n            {{#printType this.type this.address this.id this.municipality this.cps}}\n            {{/printType}}\n        {{else}}\n            {{#printType this.type this.title this.id this.municipality this.cps}}\n            {{/printType}}\n        {{/if}}\n    {{/each}}\n</ul>\n'}},t={};function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=o(939),t=o.n(e),r=o(39),i=o.n(r),n=o(288),a=o.n(n);const s=JSON.parse('{"exception":{"exists":"There is no associated address for this location.","results":"No results found","ignsearch_obsolete":"Message to the developer: IDEE.plugin.IGNSearch has been deprecated, please use IDEE.plugin.Locator instead"},"searchresult":"searchresult","tooltip":"Search places","tooltip_input":"Place name, address or postal code","deleteresults":"Delete search results","obtener":"Get direction at a point on the map","direccion":"Place name, address or postal code","aprox":"Approximate address","exact":"Exact address"}'),c=JSON.parse('{"exception":{"exists":"No existe dirección asociada para esta ubicación.","results":"No se han encontrado resultados","ignsearch_obsolete":"Mensaje para el desarrollador: IDEE.plugin.IGNSearch ha quedado obsoleto, utilice en su lugar IDEE.plugin.Locator"},"searchresult":"searchresult","tooltip":"Búsqueda de lugares","tooltip_input":"Topónimo, dirección o código postal","deleteresults":"Borrar resultados de la búsqueda","obtener":"Obtener dirección en un punto del mapa","direccion":"Topónimo, dirección o código postal","aprox":"Dirección aproximada","exact":"Dirección exacta"}');var l,u={en:s,es:c},p=function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t="es","function"==typeof IDEE.language.getLang&&(t=IDEE.language.getLang()),t),r=function(e){return"es"===e||"en"===e?u[e]:IDEE.language.getTranslation(e).ignsearch}(o),i="";return IDEE.utils.isNullOrEmpty(r)?console.warn("The translation '".concat(o,"' has not been defined.")):i=e.split(".").reduce((function(e,t){return e[t]}),r),i};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}var g=function(){function e(o,r,i,n,a,s,c,l,u,p,h,y,v,g,E,b,I,S,P){var w;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(IDEE.utils.isUndefined(t())||IDEE.utils.isObject(t())&&IDEE.utils.isNullOrEmpty(Object.keys(t())))&&IDEE.exception("La implementación usada no puede crear controles IGNSearchControl"),(w=function(e,t,o){return t=f(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,o||[],f(e).constructor):t.apply(e,o))}(this,e,[new(t()),"IGNSearch"])).servicesToSearch=o,w.maxResults=r,w.noProcess=i,w.countryCode=n,w.urlCandidates=a,w.urlFind=s,w.urlReverse=c,w.urlPrefix=l,w.urlAssistant=u,w.urlDispatcher=p,w.resultVisibility_=h,w.nomenclatorSearchType=P,w.searchPosition=I,w.reverse=y,w.reverseActivated=!1,w.locationID=v,w.requestStreet=g,w.geocoderCoords=E,w.zoom=b,w.urlParse=null,w.pointStyle=S,w}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(e,IDEE.Control),o=e,r=[{key:"createView",value:function(e){var t=this;return console.warn(p("exception.ignsearch_obsolete")),this.map=e,this.destroyMapLayers(),new Promise((function(o){var r=IDEE.template.compileSync(i(),{vars:{translations:{deleteresults:p("deleteresults"),obtener:p("obtener"),direccion:p("direccion"),tooltip_input:p("tooltip_input")}}});t.html=r,t.resultsBox=r.querySelector("#m-ignsearch-results"),t.searchInput=t.html.querySelector("#m-ignsearch-search-input"),r.querySelector("#m-ignsearch-clear-button").addEventListener("click",t.clearResultsAndGeometry.bind(t)),r.querySelector("#m-ignsearch-search-input").addEventListener("keyup",(function(e){return t.createTimeout(e)})),r.querySelector("#m-ignsearch-search-input").addEventListener("keydown",(function(){clearTimeout(l)})),r.querySelector("#m-ignsearch-search-input").addEventListener("keydown",(function(){clearTimeout(l)})),r.querySelector("#m-ignsearch-locate-button").addEventListener("click",t.activateDeactivateReverse.bind(t)),document.querySelector(".ign-search-panel>.m-panel-btn").addEventListener("click",t.clearResults.bind(t)),t.clickReverseEvent=t.map.on(IDEE.evt.CLICK,(function(e){return t.showReversePopUp(e)})),t.changePlaceholder(),t.reverse||(r.querySelector("#m-ignsearch-locate-button").style.display="none"),t.on(IDEE.evt.ADDED_TO_MAP,(function(){if(t.locationID&&t.locationID.length>0&&(t.point=new IDEE.style.Point({radius:5,icon:{form:"none",class:"g-cartografia-pin",radius:12,rotation:0,rotate:!1,offset:[0,-12],color:"#f00",opacity:1}}),t.simple=new IDEE.style.Polygon({fill:{color:"black",opacity:0}}),t.drawNomenclatorResult(t.locationID,!1)),t.requestStreet&&t.requestStreet.length>0&&(IDEE.proxy(!1),IDEE.remote.get(t.requestStreet).then((function(e){var o=e.text.substring(9,e.text.length-1);t.map.removeLayers(t.clickedElementLayer);var r=JSON.parse(o);if(r.geometry.coordinates=t.fixCoordinatesPath(r),t.coordinates="".concat(r.properties.lat,", ").concat(r.properties.lng),t.clickedElementLayer=new IDEE.layer.GeoJSON({name:p("searchresult"),source:{type:"FeatureCollection",features:[r]}},{displayInLayerSwitcher:!1}),t.clickedElementLayer.displayInLayerSwitcher=!1,t.createGeometryStyles(),"Point"===r.geometry.type&&t.clickedElementLayer.setStyle(t.point),t.clickedElementLayer.setZIndex(999999999999999),t.resultVisibility_||t.clickedElementLayer.setStyle(t.simple),t.map.addLayers(t.clickedElementLayer),"callejero"===r.properties.type||"portal"===r.properties.type){var i=t.createFullAddress(r.properties),n=[r.properties.lat,r.properties.lng],a=r.properties.state;t.showSearchPopUp(i,n,a,{fake:!0})}IDEE.proxy(!0)})).catch((function(e){IDEE.proxy(!0)}))),t.geocoderCoords&&2===t.geocoderCoords.length){t.activateDeactivateReverse();var o=t.getImpl().reproject(t.geocoderCoords,"EPSG:4326",e.getProjection().code);t.showReversePopUp({coord:o,fake:!0})}})),o(r)}))}},{key:"destroyMapLayers",value:function(){for(var e=0;e<this.map.getLayers().length;e+=1)this.map.getLayers()[e].name===p("searchresult")&&(this.map.removeLayers(this.map.getLayers()[e]),this.map.removePopup())}},{key:"activateDeactivateReverse",value:function(){this.reverseActivated?(this.reverseActivated=!1,document.querySelector("#m-ignsearch-locate-button span").style.color="#7A7A73"):(this.reverseActivated=!0,document.querySelector("#m-ignsearch-locate-button span").style.color="#71a7d3")}},{key:"showReversePopUp",value:function(e){var t=this;if(this.reverseActivated){var o=this.map.getProjection().code,r=this.getImpl().reproject([e.coord[0],e.coord[1]],o,"EPSG:4258"),i="lon=".concat(r[0],"&lat=").concat(r[1]),n="".concat(this.urlReverse,"?").concat(i),a=e.coord;this.geocoderCoords=r;var s=[r[1],r[0]],c="";IDEE.proxy(!1),IDEE.remote.get(n).then((function(o){if(null!==o.text){var r=JSON.parse(o.text);c=t.createFullAddress(r)}else c=p("exception.exists");t.showPopUp(c,a,s,null,!0,e)})),IDEE.proxy(!0)}}},{key:"createTimeout",value:function(e){var t=this;clearTimeout(l),l=setTimeout((function(){return t.searchInputValue(e)}),500)}},{key:"getActivationButton",value:function(e){return e.querySelector(".m-ignsearch button")}},{key:"equals",value:function(t){return t instanceof e}},{key:"searchInputValue",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.target.value.replace(","," ");this.searchValue=r,r.length<=2?this.resultsBox.innerHTML="":(this.resultsBox.innerHTML="",this.resultsBox.classList.add("g-cartografia-spinner"),this.resultsBox.style.fontSize="24px",this.nomenclatorCandidates=[],this.geocoderCandidates=[],/[+-]?\d+\.\d+(\s|,|(,\s))[+-]?\d+\.\d+/.test(r)?this.searchCoordinates(r):(this.nomenclatorFinished=!1,this.candidatesFinished=!1,this.getNomenclatorData(r,this.nomenclatorCandidates).then((function(){t.nomenclatorFinished=!0,t.showCandidatesResults(o)})),this.getCandidatesData(r,this.geocoderCandidates).then((function(){t.candidatesFinished=!0,t.showCandidatesResults(o)}))))}},{key:"showCandidatesResults",value:function(e){var t=this;this.allCandidates=[];for(var o=0;o<this.searchPosition.split(",").length;o+=1){if("nomenclator"===this.searchPosition.split(",")[o])for(var r=0;r<this.nomenclatorCandidates.length;r+=1)this.allCandidates.push(this.nomenclatorCandidates[r]);if("geocoder"===this.searchPosition.split(",")[o])for(var i=0;i<this.geocoderCandidates.length;i+=1)this.allCandidates.push(this.geocoderCandidates[i])}if(0===this.allCandidates.length&&this.nomenclatorFinished&&this.candidatesFinished){this.resultsBox.innerHTML="",this.resultsBox.classList.remove("g-cartografia-spinner"),this.resultsBox.style.fontSize="1em";var n=document.createElement("p"),s=document.createTextNode(p("exception.results"));n.classList.add("m-ignsearch-noresults"),n.appendChild(s),this.resultsBox.appendChild(n)}else if(this.allCandidates.length>0){this.resultsBox.innerHTML="",this.resultsBox.classList.remove("g-cartografia-spinner"),this.resultsBox.style.fontSize="1em";var c=IDEE.template.compileSync(a(),{vars:{places:this.allCandidates}}),l=c.querySelectorAll("li");l.forEach((function(e){e.addEventListener("click",(function(){t.goToLocation(e)}))})),!0===e&&l.length>0&&l.item(0).click(),this.resultsBox.appendChild(c)}}},{key:"drawGeocoderResultProv",value:function(e){var t=this;this.map.removeLayers(this.clickedElementLayer),IDEE.proxy(!1),IDEE.remote.get(this.urlParse).then((function(o){var r,i=o.text.substring(9,o.text.length-1),n=e;if(i.includes("MULTIPOLYGON (((")){if(n.includes('"type":"MultiPolygon"')){r=i.split("(((")[1].split("), ("),n.includes("]]]")&&(n=n.replace("]]]","]]]]"));for(var a=0;a<r.length;a+=1){var s=r[a].substring(0,9).replace("(","");e.includes("[[[".concat(s))?n=n.replace("[[[".concat(s),"[[[[".concat(s)):e.includes("]],[[".concat(s))?n=n.replace("]],[[".concat(s),"]]],[[[".concat(s)):e.includes("],[".concat(s))&&(n=n.replace("],[".concat(s),"]],[[".concat(s)))}}}else if(i.includes("POLYGON (("))if(n.includes('"type":"Polygon"')){r=i.split("((")[1].split("), ("),n.includes("]]")&&(n=n.replace("]]","]]]")),n=n.replace("Polygon","MultiPolygon");for(var c=0;c<r.length;c+=1){var l=r[c].split(" "),u=r[c].substring(0,l[0].length).replace("(","");e.includes("[[[".concat(u))?n=n.replace("[[[".concat(u),"[[[[".concat(u)):e.includes("],[".concat(u))&&(n=n.replace("],[".concat(u),"]],[[".concat(u)))}}else n.includes('"type":"MultiPolygon"')&&(n=(n=n.replace("]]],[[","]],[[")).replace('"type":"MultiPolygon"','"type":"Polygon"'));n.includes("MultiMultiPolygon")&&(n=n.replace("MultiMultiPolygon","MultiPolygon"));var d=JSON.parse(n);if(t.coordinates="".concat(d.properties.lat,", ").concat(d.properties.lng),t.clickedElementLayer=new IDEE.layer.GeoJSON({name:p("searchresult"),source:{type:"FeatureCollection",features:[d]}},{displayInLayerSwitcher:!1}),t.clickedElementLayer.displayInLayerSwitcher=!1,"Point"===d.geometry.type&&t.clickedElementLayer.setStyle(t.point),d.geometry.type.indexOf("Polygon")>-1&&t.clickedElementLayer.setStyle(new IDEE.style.Polygon({fill:{color:"#3399CC",opacity:0},stroke:{color:"#3399CC",width:2},radius:5})),t.clickedElementLayer.setZIndex(999999999999999),t.resultVisibility_||t.clickedElementLayer.setStyle(t.simple),t.map.addLayers(t.clickedElementLayer),t.zoomInLocation("g",d.geometry.type,t.zoom),"callejero"===d.properties.type||"portal"===d.properties.type){var h=t.createFullAddress(d.properties),y=[d.properties.lat,d.properties.lng],m=d.properties.state;t.showSearchPopUp(h,y,m)}})),IDEE.proxy(!0)}},{key:"drawGeocoderResult",value:function(e){this.map.removeLayers(this.clickedElementLayer);var t=JSON.parse(e);if(t.geometry.coordinates=this.fixCoordinatesPath(t),this.coordinates="".concat(t.properties.lat,", ").concat(t.properties.lng),this.clickedElementLayer=new IDEE.layer.GeoJSON({name:p("searchresult"),source:{type:"FeatureCollection",features:[t]}},{displayInLayerSwitcher:!1}),this.clickedElementLayer.displayInLayerSwitcher=!1,"Point"===t.geometry.type&&this.clickedElementLayer.setStyle(this.point),this.clickedElementLayer.setZIndex(999999999999999),this.resultVisibility_?t.geometry.type.indexOf("Polygon")>-1&&this.clickedElementLayer.setStyle(new IDEE.style.Polygon({fill:{color:"#3399CC",opacity:0},stroke:{color:"#3399CC",width:2},radius:5})):this.clickedElementLayer.setStyle(this.simple),this.map.addLayers(this.clickedElementLayer),this.zoomInLocation("g",t.geometry.type,this.zoom),"callejero"===t.properties.type||"portal"===t.properties.type){var o=this.createFullAddress(t.properties),r=[t.properties.lat,t.properties.lng],i=t.properties.state;this.showSearchPopUp(o,r,i)}else void 0!==this.popup&&this.map.removePopup(this.popup)}},{key:"createFullAddress",value:function(e){var t=null===e.tip_via||void 0===e.tip_via?"":e.tip_via,o=null===e.address||void 0===e.address?"":e.address,r=null===e.portalNumber||void 0===e.portalNumber||0===e.portalNumber?"":e.portalNumber,i=null===e.muni||void 0===e.muni?"":e.muni;return"".concat(t," ").concat(o," ").concat(r,", ").concat(i.toUpperCase())}},{key:"drawNomenclatorResult",value:function(e){var t=this,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.requestStreet="",this.requestPlace=IDEE.utils.addParameters(this.urlDispatcher,{request:"OpenQuerySource",query:'<ogc:Filter><ogc:FeatureId fid="'.concat(e,'"/></ogc:Filter>'),sourcename:"".concat(this.urlPrefix,"communicationsPoolServlet/sourceAccessWFS-INSPIRE-NGBE.rdf"),outputformat:"application/json"}),this.locationID=e,IDEE.proxy(!0),IDEE.remote.get(this.requestPlace).then((function(e){var r=JSON.parse(e.text).results[0].location,i=JSON.parse(e.text).results[0].title,n=r.split(" "),a=parseFloat(n[0]),s=parseFloat(n[1]);t.map.removeLayers(t.clickedElementLayer);var c={name:p("searchresult"),source:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[s,a]},properties:{name:i}}]}};t.clickedElementLayer=new IDEE.layer.GeoJSON(c,{displayInLayerSwitcher:!1}),t.clickedElementLayer.displayInLayerSwitcher=!1,t.clickedElementLayer.setStyle(t.point),t.clickedElementLayer.setZIndex(999999999999999),t.resultVisibility_||t.clickedElementLayer.setStyle(t.simple),t.map.addLayers(t.clickedElementLayer),!0===o&&t.zoomInLocation("n","Point",t.zoom)}))}},{key:"getCandidatesData",value:function(e,t){var o=this,r=window.encodeURIComponent(e);return new Promise((function(e){if("n"!==o.servicesToSearch){var i="q=".concat(r,"&limit=").concat(o.maxResults+5,"&no_process=").concat(o.noProcess);i+="&countrycode=".concat(o.countryCode,"&autocancel=true");var n="".concat(o.urlCandidates,"?").concat(i);IDEE.proxy(!1),IDEE.remote.get(n).then((function(o){for(var r=JSON.parse(o.text.substring(9,o.text.length-1)),i=0;i<r.length;i+=1)t.push(r[i]);e()})),IDEE.proxy(!0)}else e()}))}},{key:"getNomenclatorData",value:function(e,t){var o=this,r=window.encodeURIComponent(e);return new Promise((function(e){if("g"!==o.servicesToSearch){var i="maxresults=".concat(o.maxResults-5,"&name_equals=").concat(r),n="".concat(o.urlAssistant,"?").concat(i);IDEE.proxy(!0),IDEE.remote.get(n).then((function(r){for(var i=(""!==r.text&&null!==r.text?JSON.parse(r.text):{results:[]}).results,n=0;n<i.length;n+=1)o.nomenclatorSearchType.indexOf(i[n].type)>=0&&t.push(i[n]);for(var a=0;a<t.length;a+=1)if("Núcleos de población"===t[a].type){var s=t.splice(a,1);t.splice(0,0,s)}t.forEach((function(e){e.cps=!0})),e()}))}else e()}))}},{key:"getFindData",value:function(e,t){var o=this;return new Promise((function(r){var i,n,a,s,c;if(t.forEach((function(t){e.getAttribute("id")===t.id&&(i="&id=".concat(t.id),n="&type=".concat(t.type),a=0!==t.portalNumber&&void 0!==t.portalNumber?"&portal=".concat(t.portalNumber):"",s=""!==t.tip_via?"&tip_via=".concat(t.tip_via):"")})),c=e.innerHTML,e.innerHTML.includes("(")){var l=e.innerHTML.indexOf("(");c=e.innerHTML.substring(0,l)}var u="".concat(n).concat(s).concat(i).concat(a,"&outputformat=geojson"),p="".concat(o.urlFind,"?q=").concat(c).concat(u);o.urlParse=p.replace("&outputformat=geojson",""),o.requestStreet=p,o.locationID="",IDEE.proxy(!1),IDEE.remote.get(p).then((function(e){var t=e.text.substring(9,e.text.length-1);r(t)})),IDEE.proxy(!0)}))}},{key:"goToLocation",value:function(e){var t=this,o=e.querySelector("#info").innerHTML;this.html.querySelector("#m-ignsearch-search-input").value=o,this.currentElement=e;var r=this.findClickedItem(e,this.allCandidates);this.createGeometryStyles(),Object.prototype.hasOwnProperty.call(r,"address")?this.getFindData(e,this.allCandidates).then((function(e){e.includes('"tip_via":null')&&(e.includes('"type":"Municipio"')||e.includes('"type":"municipio"')||e.includes('"type":"Provincia"')||e.includes('"type":"provincia"')||e.includes('"type":"comunidad autonoma"'))?(t.drawGeocoderResultProv(e),t.map.removePopup()):t.drawGeocoderResult(e)})):this.drawNomenclatorResult(r.id),this.resultsBox.innerHTML=""}},{key:"zoomInLocation",value:function(e,t,o){var r=this;this.resultsList=document.getElementById("m-ignsearch-results-list"),this.clickedElementLayer instanceof IDEE.layer.Vector&&this.clickedElementLayer.calculateMaxExtent().then((function(i){r.map.setBbox(i),"n"!==e&&"Point"!==t||r.setScale(17061),"Point"===t&&r.map.setZoom(o),r.fire("ignsearch:entityFound",[i])}))}},{key:"findClickedItem",value:function(e,t){return t.filter((function(t){return t.id===e.getAttribute("id")}))[0]}},{key:"fixCoordinatesPath",value:function(e){return"Point"===e.geometry.type?e.geometry.coordinates[0][0]:"MultiPolygon"===e.geometry.type?[e.geometry.coordinates]:"LineString"===e.geometry.type?e.geometry.coordinates[0]:e.geometry.coordinates}},{key:"searchCoordinates",value:function(e){return new Promise((function(e){e()}))}},{key:"clearResults",value:function(){this.searchInput.value="",this.resultsBox.innerHTML="",this.searchValue=""}},{key:"clearResultsAndGeometry",value:function(){this.clearResults(),void 0!==this.clickedElementLayer&&(this.clickedElementLayer.setStyle(this.simple),this.map.removeLayers(this.clickedElementLayer)),this.map.removePopup(this.popup,[this.lng,this.lat])}},{key:"setResultVisibility",value:function(e){this.resultVisibility_=e}},{key:"changePlaceholder",value:function(){"g"===this.servicesToSearch?this.searchInput.placeholder=p("direccion"):"n"===this.servicesToSearch&&(this.searchInput.placeholder="Topónimo")}},{key:"createGeometryStyles",value:function(){"pinBlanco"===this.pointStyle?this.point=new IDEE.style.Point({radius:5,icon:{form:"none",class:"g-cartografia-pin",radius:12,rotation:0,rotate:!1,offset:[0,-12],color:"#f00",border:"5px solid green",opacity:1}}):"pinRojo"===this.pointStyle?this.point=new IDEE.style.Point({radius:5,icon:{src:IDEE.utils.concatUrlPaths([IDEE.config.THEME_URL,"/img/pinign.svg"])}}):"pinMorado"===this.pointStyle&&(this.point=new IDEE.style.Point({radius:5,icon:{src:IDEE.utils.concatUrlPaths([IDEE.config.THEME_URL,"/img/m-pin-24.svg"])}})),this.simple=new IDEE.style.Polygon({fill:{color:"black",opacity:0}})}},{key:"showSearchPopUp",value:function(e,t,o){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=this.map.getProjection().code,a=this.getImpl().reproject([t[1],t[0]],"EPSG:4326",n);r=p(1!==o?"aprox":"exact"),this.showPopUp(e,a,t,r,!1,i)}},{key:"showPopUp",value:function(e,t,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a={content:"",icon:"icon-locate"};if(null!==r&&(a.content+="<div><b>".concat(r,"</b></div>")),a.content+="<div>".concat(e,"</div>\n                <div class='ignsearch-popup'>Lat: ").concat(o[0].toFixed(6),"</div>\n                <div class='ignsearch-popup'> Lon: ").concat(o[1].toFixed(6)," </div>"),this.map.getPopup()instanceof IDEE.Popup&&!0===i)this.popup=this.map.getPopup(),this.popup.addTab(a);else{var s=new IDEE.Popup({panMapIfOutOfView:!n.fake});s.addTab(a),this.map.addPopup(s,[t[0],t[1]]),this.popup=s}this.lat=t[1],this.lng=t[0]}},{key:"setScale",value:function(e){this.getImpl().setScale(e)}}],r&&h(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r}();const E=["Estado","Isla administrativa","Comarca administrativa","Jurisdicción","Distrito municipal","Construcción/instalación abierta","Edificación","Vértice Geodésico","Alineación montañosa","Montaña","Paso de montaña","Llanura","Depresión","Vertientes","Comarca geográfica","Paraje","Elemento puntual del paisaje","Saliente costero","Playa","Isla","Otro relieve costero","Espacio protegido restante","Instalación portuaria","Camino y vía pecuaria","Curso natural de agua","Masa de agua","Curso artificial de agua","Embalse","Hidrónimo puntual","Glaciares","Mar","Entrante costero y estrecho marítimo","Relieve submarino"];function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function I(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=b(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}var x=["Estado","Isla administrativa","Comarca administrativa","Jurisdicción","Vértice Geodésico","Alineación montañosa","Montaña","Paso de montaña","Llanura","Depresión","Vertientes","Comarca geográfica","Paraje","Elemento puntual del paisaje","Saliente costero","Playa","Isla","Otro relieve costero","Curso natural de agua","Masa de agua","Curso artificial de agua","Hidrónimo puntual","Glaciares","Mar","Entrante costero y estrecho marítimo","Relieve submarino"],L=function(){function e(t){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(o=function(e,t,o){return t=w(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,o||[],w(e).constructor):t.apply(e,o))}(this,e)).map_=null,o.controls_=[],o.servicesToSearch=t.servicesToSearch||"gn",o.maxResults=t.maxResults||10,o.noProcess=t.noProcess||"poblacion",o.countryCode=t.countryCode||"es",o.urlCandidates=t.urlCandidates||"https://www.cartociudad.es/geocoder/api/geocoder/candidatesJsonp",o.urlFind=t.urlFind||"https://www.cartociudad.es/geocoder/api/geocoder/findJsonp",o.urlReverse=t.urlReverse||"https://www.cartociudad.es/geocoder/api/geocoder/reverseGeocode",o.urlPrefix=t.urlPrefix||"http://www.idee.es/",o.urlAssistant=t.urlAssistant||"https://www.idee.es/communicationsPoolServlet/SearchAssistant",o.urlDispatcher=t.urlDispatcher||"https://www.idee.es/communicationsPoolServlet/Dispatcher",o.nomenclatorSearchType=x||E,o.resultVisibility=t.resultVisibility||!0,o.isCollapsed=t.isCollapsed||!1,o.collapsible=t.collapsible||!1,o.position=t.position||"TL",o.tooltip_=t.tooltip||p("tooltip"),o.reverse_=t.reverse||!1,o.locationID_=t.locationID&&t.locationID.replace(/\^/g,"&")||"",o.requestStreet_=t.requestStreet&&t.requestStreet.replace(/\^/g,"&")||"";var r=t.geocoderCoords;return IDEE.utils.isString(r)&&(r=r.split(","),r=[Number.parseFloat(r[0]),Number.parseFloat(r[1])]),o.geocoderCoords_=r||[],o.zoom_=16,void 0!==t.zoom&&(o.zoom_=parseInt(t.zoom,10)),o.searchPosition=t.searchPosition||"nomenclator,geocoder",o.pointStyle=t.pointStyle||"pinBlanco",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(e,IDEE.Plugin),t=e,r=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?s:c:IDEE.language.getTranslation(e).ignsearch}}],(o=[{key:"addTo",value:function(e){var t=this;this.controls_.push(new g(this.servicesToSearch,this.maxResults,this.noProcess,this.countryCode,this.urlCandidates,this.urlFind,this.urlReverse,this.urlPrefix,this.urlAssistant,this.urlDispatcher,this.resultVisibility,this.reverse_,this.locationID_,this.requestStreet_,this.geocoderCoords_,this.zoom_,this.searchPosition,this.pointStyle,this.nomenclatorSearchType)),this.controls_[0].on("ignsearch:entityFound",(function(e){t.fire("ignsearch:entityFound",[e])})),this.map_=e,this.panel_=new IDEE.ui.Panel("panelIGNSearch",{collapsible:this.collapsible,position:IDEE.ui.position[this.position],collapsed:this.isCollapsed,className:"ign-search-panel",collapsedButtonClass:"icon-ignsearch",tooltip:this.tooltip_}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_)}},{key:"setResultVisibility",value:function(e){this.controls_[0].setResultVisibility(e)}},{key:"name",get:function(){return"ignsearch"}},{key:"reverse",get:function(){return this.reverse_}},{key:"geocoderCoords",get:function(){return this.controls_[0].geocoderCoords}},{key:"requestStreet",get:function(){return this.controls_[0].requestStreet}},{key:"locationID",get:function(){return this.controls_[0].locationID}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.servicesToSearch,"*").concat(this.maxResults,"*").concat(this.noProcess,"*").concat(this.countryCode,"*").concat(this.resultVisibility,"*").concat(this.isCollapsed,"*").concat(this.collapsible,"*").concat(this.position,"*").concat(this.reverse,"*").concat(this.requestStreet.replace(/&/g,"^"),"*").concat(this.locationID,"*").concat(this.geocoderCoords,"*").concat(this.zoom,"*").concat(this.searchPosition,"*").concat(this.pointStyle)}},{key:"destroy",value:function(){this.map_.removeControls(this.controls_),this.map_=null,this.control_=null,this.controls_=null,this.panel_=null}}])&&I(t.prototype,o),r&&I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,o,r}();window.IDEE.plugin||(window.IDEE.plugin={}),window.IDEE.control||(window.IDEE.control={}),window.IDEE.impl||(window.IDEE.impl={}),window.IDEE.impl.control||(window.IDEE.impl.control={}),window.IDEE.plugin.IGNSearch=L,window.IDEE.control.IGNSearchControl=g,window.IDEE.impl.control.IGNSearchControl=t()})()})();
//# sourceMappingURL=ignsearch.cesium.min.js.map