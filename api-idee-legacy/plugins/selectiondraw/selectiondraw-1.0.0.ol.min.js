(()=>{var e={167:e=>{e.exports='<div id="div-contenedor" class="m-control m-container m-selectiondraw">\r\n    <button id="point" class="g-plugin-selectordraw-pin-seleccionado" title="Buscar punto"></button>\r\n    <button id="polygon" class="g-plugin-selectordraw-poligono" title="Buscar polígono"></button>\r\n    <button id="clear" class="g-plugin-selectordraw-papelera" title="Eliminar búsqueda"></button>\r\n</div>'}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function n(t){var o=function(t,o){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,o||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}(t,"string");return"symbol"==e(o)?o:o+""}function r(t,o,n){return o=a(o),function(t,o){if(o&&("object"==e(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,i()?Reflect.construct(o,n||[],a(t).constructor):o.apply(t,n))}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i=function(){return!!e})()}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:o):r.value}},c.apply(null,arguments)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}var u=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),stroke:new ol.style.Stroke({color:"#3399CC",width:2}),image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),stroke:new ol.style.Stroke({color:"#3399CC",width:2}),radius:6})}),s=new IDEE.impl.format.GeoJSON,p=function(){function e(t){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(o=r(this,e)).facadeControl=null,o.destProj=t,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(e,IDEE.impl.Control),o=e,n=[{key:"addTo",value:function(t,o){var n,r,i,l,u;(n=e,r="addTo",i=this,u=c(a(1&(l=3)?n.prototype:n),r,i),2&l&&"function"==typeof u?function(e){return u.apply(i,e)}:u)([t,o]),this.map=t,this.olMap=t.getMapImpl()}},{key:"activate",value:function(e,t){var o=this;t.classList.add("activated");var n=this.map.getProjection().code,r=this.map.getLayers().find((function(e){return"__draw__"===e.name}));if(null!=r){var i=r.getImpl().getLayer();if(i.setStyle(u),null!=i){var c=i.getSource();this.interaction_=new ol.interaction.Draw({source:c,type:e}),this.interaction_.on("drawend",(function(e){var t=e.feature.clone(),r=ol.sphere.getArea(t.getGeometry());t.getGeometry().transform(n,o.destProj);var i=s.writeFeatureObject(t);i.properties={area:{km:r/Math.pow(10,6),m:r}},o.facadeControl.fire("finished:draw",[i])})),this.olMap.addInteraction(this.interaction_)}}}},{key:"deactivate",value:function(e){e.forEach((function(e){return e.classList.remove("activated")})),this.olMap.removeInteraction(this.interaction_)}}],n&&t(o.prototype,n),i&&t(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,i}(),f=o(167),y=o.n(f);const d=JSON.parse('{"exception":{"obsolete":"Developer message: IDEE.plugin.SelectionDraw has been deprecated, use the IDEE.plugin.VectorsManagement instead"},"tooltip":"Search by geometry","exception_selectiondrawcontrol":"The implementation used cannot create SelectionDrawImplControl controls"}'),b=JSON.parse('{"exception":{"obsolete":"Mensaje para el desarrollador: IDEE.plugin.SelectionDraw ha quedado obsoleto, utilice en su lugar IDEE.plugin.VectorsManagement"},"tooltip":"Búsqueda por geometría","exception_selectiondrawcontrol":"La implementación usada no puede crear controles SelectionDrawImplControl"}');var v={en:d,es:b},w=function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t="es","function"==typeof IDEE.language.getLang&&(t=IDEE.language.getLang()),t),n=function(e){return"es"===e||"en"===e?v[e]:IDEE.language.getTranslation(e).selectiondraw}(o),r="";return IDEE.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(o,"' has not been defined.")):r=e.split(".").reduce((function(e,t){return e[t]}),n),r};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}function E(e,t,o){return t=j(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,o||[],j(e).constructor):t.apply(e,o))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}var P=function(){function e(t){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(IDEE.utils.isUndefined(p)||IDEE.utils.isObject(p)&&IDEE.utils.isNullOrEmpty(Object.keys(p)))&&IDEE.exception(w("exception_selectiondrawcontrol"));var n=new p(t.projection);return o=E(this,e,[n,"SelectionDraw"]),n.facadeControl=o,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(e,IDEE.Control),t=e,o=[{key:"createView",value:function(e){var t=this;return console.warn(w("exception.obsolete")),new Promise((function(o){var n=IDEE.template.compileSync(y()),r=n.querySelector("button#polygon"),i=n.querySelector("button#point"),c=n.querySelector("button#clear"),a=e.getLayers().find((function(e){return"__draw__"===e.name}));c.addEventListener("click",(function(){a.clear()})),i.addEventListener("click",(function(){var e="Point";t.activeGeometry===e?t.deactivate([i,r]):(t.deactivate([i,r]),t.activate(e,i))})),r.addEventListener("click",(function(){var e="Polygon";t.activeGeometry===e?t.deactivate([i,r]):(t.deactivate([i,r]),t.activate(e,r))})),document.onkeydown=function(e){var t=window.event?event:e;if(90===t.keyCode&&t.ctrlKey){var o=a.getImpl().getLayer().getSource().getFeatures().length;a.getImpl().getLayer().getSource().removeFeature(a.getImpl().getLayer().getSource().getFeatures()[o-1])}},o(n)}))}},{key:"activate",value:function(e,t){this.activeGeometry=e,this.getImpl().activate(e,t)}},{key:"deactivate",value:function(e){this.activeGeometry="",this.getImpl().deactivate(e)}},{key:"equals",value:function(t){return t instanceof e}}],o&&g(t.prototype,o),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,o,n}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function D(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function I(e,t,o){return(t=T(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function k(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function T(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}function C(e,t,o){return t=x(t),function(e,t){if(t&&("object"==S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L()?Reflect.construct(t,o||[],x(e).constructor):t.apply(e,o))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}var N=function(){function e(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=C(this,e);var n=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?D(Object(o),!0).forEach((function(t){I(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):D(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({collapsed:!1,collapsible:!0,position:"TL",projection:"EPSG:3857"},o);return t.map_=null,t.controls_=[],t.collapsed=n.collapsed||!1,t.collapsible=n.collapsible||!0,t.position=n.position||"TL",t.name=e.NAME,t.options=n,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(e,IDEE.Plugin),t=e,n=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?d:b:IDEE.language.getTranslation(e).selectiondraw}}],(o=[{key:"addTo",value:function(e){var t=this;this.control_=new P(this.options),this.map_=e,this.panel_=new IDEE.ui.Panel("panel_selection_raw",{collapsible:this.collapsible,collapsed:this.collapsed,position:IDEE.ui.position[this.position],collapsedButtonClass:"g-plugin-selectordraw-editar",className:"m-selectiondraw",tooltip:w("tooltip")}),this.panel_.addControls(this.control_),e.addPanels(this.panel_),this.control_.on("finished:draw",(function(e){t.fire("finished:draw",[e])}))}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]),this.map_=null,this.control_=null,this.panel_=null}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.collapsed,"*").concat(this.collapsible)}}])&&k(t.prototype,o),n&&k(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,o,n}();N.NAME="selectiondraw",window.IDEE.plugin||(window.IDEE.plugin={}),window.IDEE.control||(window.IDEE.control={}),window.IDEE.impl||(window.IDEE.impl={}),window.IDEE.impl.control||(window.IDEE.impl.control={}),window.IDEE.plugin.SelectionDraw=N,window.IDEE.control.SelectionDrawControl=P,window.IDEE.impl.control.SelectionDrawControl=p})()})();
//# sourceMappingURL=selectiondraw-1.0.0.ol.min.js.map