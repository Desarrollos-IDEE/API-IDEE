(()=>{var e={821:()=>{},201:()=>{},362:()=>{},783:()=>{},29:()=>{},725:()=>{},541:()=>{},579:()=>{},539:e=>{e.exports='<div id="div-contenedor" class="m-control m-container m-comparepanel-container">\n    <div id=\'m-cp-mirrorpanel\'>\n        <button id=\'m-cp-mirrorpanel-btn\' class="cp-button cp-icon" title="{{translations.tooltipMirrorpanel}}"></button>\n    </div>\n    <div id=\'m-cp-lyrcompare\'>\n        <button id=\'m-cp-lyrcompare-btn\' class="cp-button cp-comparador-capas" title="{{translations.tooltipLyr}}"></button>\n    </div>\n    <div id=\'m-cp-timeline\'>\n        <button id=\'m-cp-timeline-btn\' class="cp-button cp-gestion-reloj2" title="{{translations.tooltipTimeline}}" style="display:none;"></button>\n    </div>\n    <div id=\'m-cp-transparency\'>\n        <button id=\'m-cp-transparency-btn\' class="cp-button cp-transparency-icon" title="{{translations.tooltipTransparency}}"></button>\n    </div>\n    \x3c!--\n    <div id=\'m-cp-transparency\'>\n        <button id=\'m-cp-transparency-btn\' class="cp-button cp-transparency-icon" title="{{translations.tooltipTransparency}}"></button>\n    </div>\n    --\x3e\n    \x3c!--<div id=\'m-cp-testing\'>--\x3e\n        \x3c!--<button id=\'m-cp-testing-btn\' class="cp-button  cp-gestion-testing" title="{{translations.tooltipTransparency}}" ></button>--\x3e\n    \x3c!--</div>--\x3e\n\n</div>\n'},336:e=>{e.exports='<div id="div-contenedor" class="m-lyrcompare-container">\n    <div class="div-m-lyrcompare-panel">\n        <div class="m-lyrcompare-effect-buttoms">\n            <button id="m-lyrcompare-vcurtain" class="big-buttom" title="{{translations.tooltip_vcurtain}}"><i class="cp-columns"></i></button>\n            <button id="m-lyrcompare-hcurtain" class="big-buttom" title="{{translations.tooltip_hcurtain}}"><i class="cp-columns-rotate"></i></button>\n            <button id="m-lyrcompare-multicurtain" class="big-buttom" title="{{translations.tooltip_multicurtain}}"><i class="cp-th-large"></i></button>\n            <button id="m-lyrcompare-deactivate" class="big-buttom" title="{{translations.tooltip_deactivatecurtain}}"><i class="cp-deactivateCurtain"></i></button>\n        </div>\n        <div class="div-m-lyrcompare-transparent-opacity">\n            <label for="input-transparent-opacity" title="{{translations.opacity_tooltip}}">{{translations.opacity}}: </label>\n            <input type="range" min="0" max="100" value="100" id="input-transparent-opacity" title="{{translations.opacity_tooltip}}"></input>\n        </div>\n        <div class="div-m-lyrcompare-transparent-static">\n            <input type="radio" id="div-m-lyrcompare-transparent-dynamic" name="staticDivision" value="0"><label for="div-m-lyrcompare-transparent-dynamic" title="{{translations.dynamic_tooltip}}">{{translations.dynamic}}</label>\n            <input type="radio" id="div-m-lyrcompare-transparent-static" name="staticDivision" value="1"><label for="div-m-lyrcompare-transparent-static" title="{{translations.static_tooltip}}">{{translations.static}}</label>\n            <input type="radio" id="div-m-lyrcompare-transparent-mixed" name="staticDivision" value="2"><label for="div-m-lyrcompare-transparent-mixed" title="{{translations.mixed_tooltip}}">{{translations.mixed}}</label>\n        </div>\n\n        {{#if options}}\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrA-cont">\n                <hr/>\n                <label id="m-lyrcompare-lyrA-lbl" for="m-lyrcompare-lyrA" title="{{translations.lyrLeftSelect_tooltip}}"></label>\n                <select disabled id="m-lyrcompare-lyrA">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n                <div class="m-lyrcompare-select_arrow"></div>\n            </div>\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrB-cont">\n                <label id="m-lyrcompare-lyrB-lbl" for="m-lyrcompare-lyrB" title="{{translations.lyrRightSelect_tooltip}}"></label>\n                <select disabled id="m-lyrcompare-lyrB">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n                <div class="m-lyrcompare-select_arrow">\n                </div>\n            </div>\n            \x3c!--Multi Curtain--\x3e\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrC-cont">\n                <label id="m-lyrcompare-lyrC-lbl" for="m-lyrcompare-lyrC" title="{{translations.lyrLeftSelect_tooltip}}"></label>\n                <select disabled id="m-lyrcompare-lyrC">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n                <div class="m-lyrcompare-select_arrow"></div>\n            </div>\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrD-cont">\n                <label id="m-lyrcompare-lyrD-lbl" for="m-lyrcompare-lyrD" title="{{translations.lyrRightSelect_tooltip}}"></label>\n                <select disabled id="m-lyrcompare-lyrD">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n                <div class="m-lyrcompare-select_arrow">\n                </div>\n            </div>\n        {{/if}}\n    </div>\n</div>\n'},565:e=>{e.exports='<div id="div-contenedor" class="m-mirrorpanel-container">\n  <div class="div-m-mirrorpanel-panel">\n    <div class="m-mirrorpanel-effect-buttoms">\n      <button id="set-mirror-0" class="big-button" title="{{translations.modViz0}}"><i class="cp-modeviz0"></i></button>\n      <button id="set-mirror-1" class="big-button" title="{{translations.modViz1}}"><i class="cp-modeviz1"></i></button>\n      <button id="set-mirror-2" class="big-button" title="{{translations.modViz2}}"><i class="cp-modeviz2"></i></button>\n      <button id="set-mirror-3" class="big-button" title="{{translations.modViz3}}"><i class="cp-modeviz3"></i></button>\n      <button id="set-mirror-4" class="big-button" title="{{translations.modViz4}}"><i class="cp-modeviz4"></i></button>\n      <button id="set-mirror-5" class="big-button" title="{{translations.modViz5}}"><i class="cp-modeviz5"></i></button>\n      <button id="set-mirror-6" class="big-button" title="{{translations.modViz6}}"><i class="cp-modeviz6"></i></button>\n      <button id="set-mirror-7" class="big-button" title="{{translations.modViz7}}"><i class="cp-modeviz7"></i></button>\n      <button id="set-mirror-8" class="big-button" title="{{translations.modViz8}}"><i class="cp-modeviz8"></i></button>\n      <button id="set-mirror-9" class="big-button" title="{{translations.modViz9}}"><i class="cp-modeviz9"></i></button>\n    </div>\n\n  </div>\n\n</div>\n'},321:e=>{e.exports='<div id="div-contenedor" class="m-timeline-container">\n    <div class="div-m-timeline-panel">\n        <div class="div-m-timeline-slider">\n            <input type="range" min="0" max="100" value="0" step="any" id="input-slider"></input>\n            <div class=\'slider-tags\'></div>\n        </div>\n        <div class="m-timeline-names">\n\n        </div>\n        <div class="m-timeline-button">\n            <button id="m-timeline-play" class="cp-control-siguiente" title="Start / Stop"></button>\n        </div>\n    </div>\n</div>'},375:e=>{e.exports='<div id="div-contenedor" class="m-transparency-container">\n    <div class="div-m-transparency-panel">\n        <button id="m-transparency-active" class="big-buttom" title="{{translations.activate_spyeye}}"><i class="cp-transparency-icon"></i></button>\n        <button id="m-transparency-deactivate" class="big-buttom" title="{{translations.deactivate_spyeye}}" disabled><i class="cp-deactivateCurtain"></i></button>\n        <button id="m-transparency-lock" class="big-buttom" title="{{translations.freeze}}"><i class="cp-lock-icon"></i></button>\n        <button id="m-transparency-unlock" class="big-buttom" title="{{translations.unfreeze}}" style="margin-left:-36px;"><i class="cp-unlock-icon"></i></button>\n\n        <div class="div-m-transparency-transparent-radius">\n            <p>{{translations.radius}}:</p>\n            <input type="range" min="30" max="200" value="100" id="input-transparent-radius"></input>\n        </div>\n        {{#if options}}\n            <div class="m-transparency-select">\n                <p>{{translations.layers}}: </p>\n                <select id="m-transparency-lyr" disabled>\n                    {{#each options}}\n                        <option value="{{name}}">{{legend}}</option>\n                    {{/each}}\n                </select>\n                <div class="m-transparency-select_arrow">\n                </div>\n            </div>\n        {{/if}}\n    </div>\n</div>\n'},717:e=>{e.exports='<div id="div-contenedor" class="m-control m-container m-lyrdropdown">\n  <div class="m-lyrdropdown-select" id="m-lyrcompare-lyrB-cont">\n    <select id="m-lyrdropdown-selector">\n        <option value=\'None\'>{{translations.nolayertext}}</option>\n        {{#each options}}\n        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n        {{/each}}\n    </select>\n    <div class="m-lyrdropdown-select_arrow">\n    </div>\n  </div>\n</div>\n'}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(821),t=r.n(e),n=r(539),i=r.n(n);const o=JSON.parse('{"tooltip":"Comparepanel","title":"Comparepanel","play":"Play","pause":"Pause","exception":"The implementation used cannot create comparepanelControl controls","intervals_error":"The intervals were not defined correctly","tooltipLyr":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","tooltip_deactivatecurtain":"Deactivate curtain","layers":"Layers","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyrLeftSelect_tooltip":"Select layer on the left","lyrRightSelect_tooltip":"Select layer on the right","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"The number of layers is insufficient to apply the effect","repeated_layers":"Selected layers cannot be repeated","tooltipMirrorpanel":"Mirror Comparison","titleMirrorpanel":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","tooltipTimeline":"Timeline","titleTimeline":"Timeline","tooltipTransparency":"Transparency","transparency":"Transparency","errorLayer":"Transparency: No valid layer specified on which to apply the effect","nolayertext":"No layer selected","freeze":"freeze cursor","unfreeze":"defrost cursor","activate_spyeye":"SpyEye ON","deactivate_spyeye":"SpyEye OFF","comparepanel_obsolete":"Developer Message: IDEE.plugin.Comparepanel has been deprecated, please use IDEE.plugin.Comparators instead"}'),a=JSON.parse('{"tooltip":"Panel de Comparadores","title":"Panel de Comparadores","play":"Iniciar","pause":"Parar","exception":"La implementación usada no puede crear controles ComparepanelControl","intervals_error":"Los intervalos no fueron definidos correctamente","tooltipLyr":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","tooltip_deactivatecurtain":"Desactivar cortina","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyrLeftSelect_tooltip":"Selecciona la capa de la izquierda","lyrRightSelect_tooltip":"Selecciona la capa de la derecha","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"El número de capas es insuficiente para aplicar el efecto","repeated_layers":"Las capas seleccionadas no se pueden repetir","tooltipMirrorpanel":"Comparador de mapas espejo","titleMirrorpanel":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","tooltipTimeline":"Línea de tiempo","titleTimeline":"Línea de tiempo","tooltipTransparency":"Transparencia","transparency":"Transparencia","errorLayer":"Transparency: No se ha especificado una capa válida sobre la que aplicar el efecto","nolayertext":"Ninguna capa","freeze":"Inmovilizar cursor","unfreeze":"liberar cursor","activate_spyeye":"Activar Spy Eye","deactivate_spyeye":"Desactivar Spy Eye","comparepanel_obsolete":"Mensaje para el desarrollador: IDEE.plugin.Comparepanel ha quedado obsoleto, utilice en su lugar IDEE.plugin.Comparators"}');var l={en:o,es:a},s=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t="es","function"==typeof IDEE.language.getLang&&(t=IDEE.language.getLang()),t),n=function(e){return"es"===e||"en"===e?l[e]:IDEE.language.getTranslation(e).comparepanel}(r),i="";return IDEE.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(r,"' has not been defined.")):i=e.split(".").reduce((function(e,t){return e[t]}),n),i},c=r(783),u=r.n(c),p=r(565),y=r.n(p),m=r(579),d=r.n(m),f=r(717),v=r.n(f);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}function S(e,t,r){return t=E(t),function(e,t){if(t&&("object"==h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,L()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}var w=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(IDEE.utils.isUndefined(d())||IDEE.utils.isObject(d())&&IDEE.utils.isNullOrEmpty(Object.keys(d())))&&IDEE.exception(s("exception")),(r=S(this,e,[new(d()),"Lyrdropdown"])).pluginOnLeft=t.pluginOnLeft,r.layers=t.layers,r.collapsible=t.collapsible,r.collapsed=t.collapsed,r.layerSelected=null,r.lyrsMirrorMinZindex=t.lyrsMirrorMinZindex,r.template=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(e,IDEE.Control),t=e,(r=[{key:"createView",value:function(e){var t=this;return this.map=e,this.map.on(IDEE.evt.ADDED_LAYER,(function(e){e.forEach((function(e){"WMS"!==e.type&&"WMTS"!==e.type||(t.layers=t.layers.map((function(t){return t.name!==e.name?t:e})))}))})),new Promise((function(e,r){t.layers=t.transformToLayers(t.layers),t.layers.forEach((function(e){t.map.getLayers().some((function(t){return t.name===e.name}))&&t.map.removeLayers(e)}));var n=t.layers.map((function(e){return e instanceof Object?{name:e.name,legend:e.legend}:{name:e,legend:e}})),i="";n.length>1&&(i={jsonp:!0,vars:{options:n,translations:{tooltip:s("tooltip"),nolayertext:s("nolayertext")}}}),t.template=IDEE.template.compileSync(v(),i),0===t.layers.length?IDEE.dialog.error(s("no_layers_plugin")):t.activate(),t.template.querySelector("#m-lyrdropdown-selector").addEventListener("change",(function(e){var r=t.layers.filter((function(r){if(r.name===e.target.value)return t.map.addLayers(r),r}));t.layerSelected.setVisible(!1),t.removeEffects(),0!==r.length&&(t.layerSelected=r[0],t.layerSelected.setZIndex(t.lyrsMirrorMinZindex),t.getImpl().setLayer(t.layerSelected))})),e(t.template)}))}},{key:"activate",value:function(){null===this.layerSelected&&(this.layerSelected=this.layers[0]),this.layers.map((function(e){return e instanceof Object?{name:e.name}:{name:e}})).length>=1&&(this.template.querySelector("#m-lyrdropdown-selector").disabled=!1)}},{key:"deactivate",value:function(){null===this.layerSelected&&(this.layerSelected=this.layers[0]);var e=this.layers.map((function(e){return e instanceof Object?{name:e.name}:{name:e}}));try{this.removeEffects(),this.layerSelected.setVisible(!1),e.length>=1&&(this.template.querySelector("#m-lyrdropdown-selector").disabled=!0)}catch(e){console.log(e)}}},{key:"getActivationButton",value:function(e){return e.querySelector(".m-lyrdropdown button")}},{key:"removeEffects",value:function(){this.getImpl().removeEffects()}},{key:"transformToLayers",value:function(e){var t=this,r=e.map((function(e){var r=null;if(e instanceof Object){if(e instanceof Object){var n=t.map.getLayers().filter((function(t){return e.name.includes(t.name)}))[0];r=t.isValidLayer(n)?n:null}}else if(e.indexOf("*")>=0){var i=e.split("*");"WMS"===i[0].toUpperCase()?(r=new IDEE.layer.WMS({url:i[2],name:i[3],legend:i[1],useCapabilities:"true"===i[4]||!1}),t.map.getLayers().filter((function(e){return r.name.includes(e.name)})).length>0&&((r=t.map.getLayers().filter((function(e){return r.name.includes(e.name)}))[0]).legend=i[1]||r.name)):"WMTS"===i[0].toUpperCase()&&(r=new IDEE.layer.WMTS({url:i[2],name:i[3],legend:i[1],matrixSet:i[4],transparent:!0,displayInLayerSwitcher:!1,queryable:!1,visibility:!1,format:i[5],useCapabilities:"true"===i[6]||!1}))}else{var o=t.map.getLayers().filter((function(t){return e.includes(t.name)}))[0];r=t.isValidLayer(o)?o:null}if(null!==r)return null===r.getImpl().getLayer()?setTimeout((function(){"WMS"===r.type||"WMTS"===r.type?r.load=!0:"WMTS"===r.facadeLayer_.type&&(r.facadeLayer_.load=!0)}),1e3):r.load=!0,r.displayInLayerSwitcher=!1,r.setVisible(!1),r.setZIndex(t.lyrsMirrorMinZindex),r;t.layers.remove(e)}),this);return void 0===r[0]?[]:r}},{key:"isValidLayer",value:function(e){return"WMTS"===e.type||"WMS"===e.type}},{key:"equals",value:function(t){return t instanceof e}}])&&b(t.prototype,r),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();const C=JSON.parse('{"HQ":{"k":"*!"},"Pu":{"name":"Comparepanel","description":"Plugin de comparadores","text":"Plugin que reune los comparadores","version":"2.0.2","date":"Octubre, 2020","author":"","org":"Consejería de Hacienda, Industria y Energía. Junta de Andalucía.","tags":"api-idee,plugin","icon":"./facade/assets/icons/icons.svg","centralized":true}}');function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function O(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}function M(e,t,r){return t=j(t),function(e,t){if(t&&("object"==D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,I()?Reflect.construct(t,r||[],j(e).constructor):t.apply(e,r))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}var k=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=M(this,e)).name_="lyrdropdown",t.map_=null,t.controls_=[],t.className="m-plugin-lyrdropdown";return t.position=["TR","TL","BL","BR"].includes(r.position)?r.position:"TR",t.collapsed=r.collapsed,void 0===t.collapsed&&(t.collapsed=!0),t.collapsible=r.collapsible,void 0===t.collapsible&&(t.collapsible=!0),t.layers=[],void 0===r.layers?IDEE.dialog.error("No se ha especificado una capa válida sobre la que aplicar el efecto"):Array.isArray(r.layers)?t.layers=r.layers:t.layers=r.layers.split(","),t.lyrsMirrorMinZindex=r.lyrsMirrorMinZindex,void 0===t.lyrsMirrorMinZindex&&(t.lyrsMirrorMinZindex=100),t.tooltip_=r.tooltip||s("tooltip"),t.metadata_=C.Pu,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(e,IDEE.Plugin),t=e,(r=[{key:"addTo",value:function(e){var t=!!["TL","BL"].includes(this.position);this.control_=new w({pluginOnLeft:t,collapsible:this.collapsible,collapsed:this.collapsed,layers:this.layers,lyrsMirrorMinZindex:this.lyrsMirrorMinZindex}),this.controls_.push(this.control_),this.map_=e,this.panel_=new IDEE.ui.Panel("panelLyrdropdown",{collapsible:this.collapsible,collapsed:this.collapsed,position:IDEE.ui.position[this.position],collapsedButtonClass:"g-cartografia-flecha-izquierda",tooltip:this.tooltip_}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_)}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]);var e=[null,null,null,null,null,null];this.control_=e[0],this.panel_=e[1],this.map_=e[2],this.collapsible=e[3],this.collapsed=e[4],this.layers=e[5]}},{key:"setDisabledLyrs",value:function(e){if(void 0!==this.control_&&null!==this.control_.template)try{var t=null;(t=this.control_.template.querySelector("#m-lyrdropdown-selector")).options[2].disabled=!0;for(var r=1;r<t.options.length;r++)t.options[r].disabled=!e.includes(t.options[r].value)}catch(e){console.log(e)}}},{key:"name",get:function(){return this.name_}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.collapsible,"*").concat(this.collapsed,"*").concat(this.layers.join(","))}},{key:"activate",value:function(){this.control_.activate()}},{key:"deactivate",value:function(){this.control_.deactivate()}},{key:"equals",value:function(t){return t instanceof e}}])&&P(t.prototype,r),n&&P(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function A(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,l=[],s=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return x(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N(n.key),n)}}function N(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}function R(e,t,r){return t=W(t),function(e,t){if(t&&("object"==V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Z()?Reflect.construct(t,r||[],W(e).constructor):t.apply(e,r))}function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z=function(){return!!e})()}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},F.apply(null,arguments)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}var U=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(IDEE.utils.isUndefined(u())||IDEE.utils.isObject(u())&&IDEE.utils.isNullOrEmpty(Object.keys(u())))&&IDEE.exception(s("exception")),(r=R(this,e,[new(u()),"Mirrorpanel"])).template=null,r.modeViz=t.modeViz,r.showCursors=t.showCursors,r.mapL={A:null,B:null,C:null,D:null},r.lyrCursor={A:null,B:null,C:null,D:null},r.featureLyrCursor={A:null,B:null,C:null,D:null},r.oldClass="",r.reverseLayout=t.reverseLayout,r.enabledPlugins=t.enabledPlugins,r.backImgLayersConfig=t.backImgLayersConfig,r.target=t.target,r.styleCursor=new IDEE.style.Point({icon:{form:IDEE.style.form.CIRCLE,fontsize:.5,radius:5,rotation:0,rotate:!1,offset:[0,0],color:"black",fill:"red",gradientcolor:"#088A85",opacity:.8}}),r.defaultBaseLyrs=t.defaultBaseLyrs,r.lyrsMirrorMinZindex=t.lyrsMirrorMinZindex,r.mirrorLayers=t.mirrorLayers,r.lyDropControlA=new k({position:"TL",collapsible:!1,collapsed:!0,layers:r.defaultBaseLyrs,lyrsMirrorMinZindex:r.lyrsMirrorMinZindex}),r.lyDropControlB=new k({position:"TL",collapsible:!1,collapsed:!0,layers:r.defaultBaseLyrs,lyrsMirrorMinZindex:r.lyrsMirrorMinZindex}),r.lyDropControlC=new k({position:"TL",collapsible:!1,collapsed:!0,layers:r.defaultBaseLyrs,lyrsMirrorMinZindex:r.lyrsMirrorMinZindex}),r.lyDropControlD=new k({position:"TL",collapsible:!1,collapsed:!0,layers:r.defaultBaseLyrs,lyrsMirrorMinZindex:r.lyrsMirrorMinZindex}),r.createMapContainers(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(e,IDEE.Control),t=e,r=[{key:"createView",value:function(e){var t=this;return IDEE.template.compileSync||(IDEE.template.compileSync=function(e,t){var r,n={};IDEE.utils.isUndefined(t)||(n=IDEE.utils.extends(n,t.vars),r=t.parseToHtml);var i=Handlebars.compile(e)(n);return!1!==r?IDEE.utils.stringToHtml(i):i}),this.mapL.A=e,this.mirrorLayers.length>0&&(this.mapL.A.addLayers(this.mirrorLayers),this.mapL.A.getLayers().forEach((function(e){0!==e.zindex_&&e.setVisible(!1)})),this.mapL.A.addLayers(this.defaultBaseLyrs[0])),this.showCursors&&this.addLayerCursor("A"),new Promise((function(e,r){var n;n={jsonp:!0,vars:{translations:{titleMirrorpanel:s("titleMirrorpanel"),modViz0:s("modViz0"),modViz1:s("modViz1"),modViz2:s("modViz2"),modViz3:s("modViz3"),modViz4:s("modViz4"),modViz5:s("modViz5"),modViz6:s("modViz6"),modViz7:s("modViz7"),modViz8:s("modViz8"),modViz9:s("modViz9")}}},t.template=IDEE.template.compileSync(y(),n),t.template.querySelectorAll('button[id^="set-mirror-"]').forEach((function(e,r){e.addEventListener("click",(function(e){t.manageVisionPanelByCSSGrid(r)}))})),e(t.template),t.manageVisionPanelByCSSGrid(t.modeViz)}))}},{key:"activate",value:function(){var t,r,n,i,o;(t=e,r="activate",n=this,o=F(W(1&(i=3)?t.prototype:t),r,n),2&i&&"function"==typeof o?function(e){return o.apply(n,e)}:o)([])}},{key:"deactivate",value:function(){this.manageVisionPanelByCSSGrid(0)}},{key:"createMapContainers",value:function(){var e=document.createElement("div");e.id="lienzo",e.classList.add("mirrorpanel-grid");var t=document.getElementById(this.target);this.oldClass=t.classList.toString(),t.parentElement.insertBefore(e,t),t.classList.add("mirror1"),e.appendChild(t);var r=document.createElement("div");r.id="mapjsB",r.classList.add("mirror2"),e.appendChild(r);var n=document.createElement("div");n.id="mapjsC",n.classList.add("mirror3"),e.appendChild(n);var i=document.createElement("div");i.id="mapjsD",i.classList.add("mirror4"),e.appendChild(i)}},{key:"changeViewPluginsGrid",value:function(e){IDEE.config.MOBILE_WIDTH=e?"2000":"768";var t=[];Object.entries(this.mapL).forEach((function(e){var r=T(e,2),n=(r[0],r[1]);t=n?[].concat(A(t),A(n.getControls()),A(n.getPlugins())):t})),t.forEach((function(t){return t.changeStyleResponsive?t.changeStyleResponsive(e):null}))}},{key:"manageVisionPanelByCSSGrid",value:function(e){var t=this,r=this.modeViz;document.getElementById(this.target).style.display="none",document.getElementById("mapjsB").style.display="none",document.getElementById("mapjsC").style.display="none",document.getElementById("mapjsD").style.display="none",document.getElementById("lienzo").classList.remove("reverseMirror"),this.template.querySelector("#set-mirror-".concat(r)).classList.remove("buttom-pressed");for(var n=0;n<10;n++)document.getElementById("lienzo").classList.remove("modeViz".concat(n));if(document.getElementById("lienzo").classList.add("modeViz".concat(e)),this.reverseLayout&&document.getElementById("lienzo").classList.add("reverseMirror"),[1,2].includes(e)&&null===this.mapL.B&&this.createMapObjects("B"),[3,7,8,9].includes(e)&&(null===this.mapL.B&&this.createMapObjects("B"),null===this.mapL.C&&this.createMapObjects("C")),[4,5,6].includes(e)&&(null===this.mapL.B&&this.createMapObjects("B"),null===this.mapL.C&&this.createMapObjects("C"),null===this.mapL.D&&this.createMapObjects("D")),0===e){var i=this.map_.getPlugins().filter((function(e){return"lyrdropdown"===e.name}));i.length>0&&(this.lyDropControlA.deactivate(),this.map_.removePlugins(i))}else this.lyDropControlA=new k({position:"TL",collapsible:!1,collapsed:!0,layers:this.defaultBaseLyrs,lyrsMirrorMinZindex:this.lyrsMirrorMinZindex}),this.mapL.A.addPlugin(this.lyDropControlA);this.modeViz=e,this.template.querySelector("#set-mirror-".concat(e)).classList.add("buttom-pressed"),this.map_.refresh(),null!==this.mapL.B&&this.mapL.B.refresh(),null!==this.mapL.C&&this.mapL.C.refresh(),null!==this.mapL.D&&this.mapL.D.refresh(),document.querySelector("#m-cp-mirrorpanel-btn").classList.remove("active"),document.querySelector(".m-panel-controls .cp-mirrorpanel").classList.remove("hide-panel"),setTimeout((function(){t.changeViewPluginsGrid([3,4,7].includes(e))}),500)}},{key:"createMapObjects",value:function(e){var t=this,r=null,n=null,i=null;if(this.mapL[e]=IDEE.map({container:"mapjs".concat(e),center:this.map_.getCenter(),projection:"".concat(this.map_.getProjection().code,"*").concat(this.map_.getProjection().units),zoom:this.map_.getZoom()}),this.mapL[e].getMapImpl().setView(this.map_.getMapImpl().getView()),this.enabledPlugins){var o=this.map_.getControls(),a=this.map_.getPlugins();o.forEach((function(r){"backgroundlayers"===r.name&&t.mapL[e].addControls(["backgroundlayers"])})),a.forEach((function(t){var o;t.metadata_&&("FullTOC"===t.metadata_.name&&(r=new IDEE.plugin.FullTOC({position:t.position,collapsed:t.collapsed,collapsible:t.collapsible,http:t.http,https:t.https,precharged:t.precharged})),"Vectors"===t.metadata_.name&&(i=new IDEE.plugin.Vectors({position:t.position,collapsed:t.collapsed,collapsible:t.collapsible})),"backimglayer"===t.metadata_.name&&(o="A"===e?0:"B"===e?1:"C"===e?2:3,n=new IDEE.plugin.BackImgLayer({layerId:o,layerVisibility:t.layerVisibility,columnsNumber:t.columnsNumber,layerOpts:t.layerOpts})))}))}null!==this.lyDropControl&&("B"===e&&this.mapL[e].addPlugin(this.lyDropControlB),"C"===e&&this.mapL[e].addPlugin(this.lyDropControlC),"D"===e&&this.mapL[e].addPlugin(this.lyDropControlD)),null!==r&&this.mapL[e].addPlugin(r),null!==i&&this.mapL[e].addPlugin(i),null!==n&&this.mapL[e].addPlugin(n),this.showCursors&&this.addLayerCursor(e),this.mapL[e].refresh()}},{key:"addLayerCursor",value:function(e){var t=this;this.lyrCursor[e]=new IDEE.layer.Vector({name:"Coordenadas centro ".concat(e)},{displayInLayerSwitcher:!1}),this.featureLyrCursor[e]=new IDEE.Feature("Center".concat(e),{type:"Feature",properties:{},geometry:{type:"Point",coordinates:this.mapL[e].getCenter()}}),this.lyrCursor[e].addFeatures([this.featureLyrCursor[e]]),this.lyrCursor[e].setStyle(this.styleCursor),this.lyrCursor[e].setZIndex(5e3),this.mapL[e].addLayers(this.lyrCursor[e]),this.mapL[e].getMapImpl().on("pointermove",(function(r){t.lyrCursor[e].setVisible(!1),Object.keys(t.featureLyrCursor).forEach((function(n){n!==e&&null!==t.featureLyrCursor[n]&&(t.lyrCursor[n].setVisible(!0),t.featureLyrCursor[n].setGeometry({type:"Point",coordinates:r.coordinate}))}))}))}},{key:"manageLyrAvailable",value:function(e){null!==this.lyDropControlA.control_&&this.lyDropControlA.setDisabledLyrs(e),null!==this.lyDropControlB.control_&&this.lyDropControlB.setDisabledLyrs(e),null!==this.lyDropControlC.control_&&this.lyDropControlC.setDisabledLyrs(e),null!==this.lyDropControlD.control_&&this.lyDropControlD.setDisabledLyrs(e)}},{key:"removeMaps",value:function(){this.mapL.B=null,this.mapL.C=null,this.mapL.D=null}},{key:"destroyMapsContainer",value:function(){this.manageVisionPanelByCSSGrid(0),document.getElementById("mapjsB").remove(),document.getElementById("mapjsC").remove(),document.getElementById("mapjsD").remove();var e=document.getElementById("lienzo"),t=document.querySelector(".mirror1");e.parentElement.insertBefore(t,e),t.style.display="block",t.classList.remove("mirror1"),t.classList=this.oldClass,document.getElementById("lienzo").remove()}},{key:"equals",value:function(t){return t instanceof e}}],r&&z(t.prototype,r),n&&z(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J(n.key),n)}}function J(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}function Q(e,t,r){return t=$(t),function(e,t){if(t&&("object"==H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y()?Reflect.construct(t,r||[],$(e).constructor):t.apply(e,r))}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y=function(){return!!e})()}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}var ee=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Q(this,e)).name_="mirrorpanel",t.map_=null,t.controls_=[],t.className="m-plugin-mirrorpanel",t.position=r.position,t.collapsed=!0,t.collapsible=!0,t.modeViz=r.modeViz,void 0===t.modeViz&&(t.modeViz=0),t.reverseLayout=r.reverseLayout,void 0===t.reverseLayout&&(t.reverseLayout=!1),t.enabledPlugins=r.enabledPlugins,void 0===t.enabledPlugins&&(t.enabledPlugins=!1),t.enabledKeyFunctions=r.enabledKeyFunctions,void 0===t.enabledKeyFunctions&&(t.enabledKeyFunctions=!0),t.showCursors=r.showCursors,void 0===t.showCursors&&(t.showCursors=!0),t.mirrorLayers=[],void 0!==r.mirrorLayers&&(Array.isArray(r.mirrorLayers)?t.mirrorLayers=r.mirrorLayers:t.mirrorLayers=r.mirrorLayers.split(",")),t.lyrsMirrorMinZindex=r.lyrsMirrorMinZindex,void 0===t.lyrsMirrorMinZindex&&(t.lyrsMirrorMinZindex=100),t.defaultBaseLyrs=[],void 0!==r.defaultBaseLyrs&&(Array.isArray(r.defaultBaseLyrs)?t.defaultBaseLyrs=r.defaultBaseLyrs:t.defaultBaseLyrs=r.defaultBaseLyrs.split(",")),t.backImgLayersConfig=r.backImgLayersConfig,t.interface=void 0===r.interface||r.interface,t.tooltip_=r.tooltip||s("tooltip"),t.metadata_=C.Pu,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(e,IDEE.Plugin),t=e,(r=[{key:"addTo",value:function(e){var t=this,r={pluginOnLeft:!!["TL","BL"].includes(this.position),collapsible:this.collapsible,collapsed:this.collapsed,modeViz:this.modeViz,reverseLayout:this.reverseLayout,enabledPlugins:this.enabledPlugins,showCursors:this.showCursors,mirrorLayers:this.mirrorLayers,defaultBaseLyrs:this.defaultBaseLyrs,lyrsMirrorMinZindex:this.lyrsMirrorMinZindex,backImgLayersConfig:this.backImgLayersConfig,target:e.getMapImpl().values_.target};this.control_=new U(r),this.controls_.push(this.control_),this.map_=e,this.panel_=new IDEE.ui.Panel("panelMirrorpanel",{collapsible:this.collapsible,collapsed:this.collapsed,position:IDEE.ui.position[this.position],modeViz:this.modeViz,showCursors:this.showCursors,className:this.interface?"m-plugin-panelMirrorpanel":"m-plugin-panelMirrorpanel hidden",collapsedButtonClass:"mirrorpanel-icon",tooltip:this.tooltip_,lyrsMirrorMinZindex:this.lyrsMirrorMinZindex}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_),document.addEventListener("keydown",(function(e){if(t.enabledKeyFunctions){for(var r=0;r<10;r++)e.ctrlKey&&e.shiftKey&&e.key==="F".concat(r+1)&&t.control_.manageVisionPanelByCSSGrid(r);var n=["Control","Shift","Alt","Meta"].includes(e.key)?"":e.key;"Escape"==(e.ctrlKey?"Control ":"")+(e.shiftKey?"Shift ":"")+(e.altKey?"Alt ":"")+(e.metaKey?"Meta ":"")+n&&t.control_.manageVisionPanelByCSSGrid(0)}}))}},{key:"destroy",value:function(){document.removeEventListener("keydown",(function(e){})),this.control_.removeMaps(),this.control_.destroyMapsContainer(),this.map_.removeControls([this.control_]);var e=[null,null,null,null,null,null,null,null,null,null,null,null,null];this.control_=e[0],this.panel_=e[1],this.map_=e[2],this.collapsible=e[3],this.collapsed=e[4],this.modeViz=e[5],this.enabledPlugins=e[6],this.enabledKeyFunctions=e[7],this.showCursors=e[8],this.mirrorLayers=e[9],this.defaultBaseLyrs=e[10],this.backImgLayersParams=e[11],this.interface=e[12]}},{key:"name",get:function(){return this.name_}},{key:"manageLyrAvailable",value:function(e){this.control_.manageLyrAvailable(e)}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"activate",value:function(){this.control_.activate()}},{key:"deactivate",value:function(){this.control_.deactivate()}}])&&G(t.prototype,r),n&&G(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),te=r(29),re=r.n(te),ne=r(321),ie=r.n(ne);function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,le(n.key),n)}}function le(e){var t=function(e,t){if("object"!=oe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oe(t)?t:t+""}function se(e,t,r){return t=ue(t),function(e,t){if(t&&("object"==oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ce()?Reflect.construct(t,r||[],ue(e).constructor):t.apply(e,r))}function ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ce=function(){return!!e})()}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}function pe(e,t){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pe(e,t)}var ye=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(IDEE.utils.isUndefined(re())||IDEE.utils.isObject(re())&&IDEE.utils.isNullOrEmpty(Object.keys(re())))&&IDEE.exception(s("exception")),(r=se(this,e,[new(re()),"Timeline"])).running=!1,r.animationFrame=0,r.animation=t.animation,r.speed=t.speed,r.intervals=t.intervals,r.template=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pe(e,t)}(e,IDEE.Control),t=e,(r=[{key:"createView",value:function(e){var t=this;return this.map=e,new Promise((function(e,r){var n=[];t.intervals.forEach((function(e,r){var i=t.transformToLayers(e[2]),o=t.getMapLayer(i);void 0!==o&&t.map.removeLayers(o);var a={number:r,name:e[0],tag:e[1],service:i};n.push(a)})),t.intervals=n,t.template=IDEE.template.compileSync(ie(),{vars:{translations:{titleTimeline:s("titleTimeline"),play:s("play")}}}),t.intervals.forEach((function(e,r){var n=document.createElement("div");0!==r&&r!==t.intervals.length-1&&r!==parseInt(t.intervals.length/2,10)?n.dataset.tag="":n.dataset.tag=e.tag,t.template.querySelector(".slider-tags").append(n)})),t.template.querySelector(".div-m-timeline-panel").style.setProperty("--num",t.intervals.length);var i=t.template.querySelector("#input-slider");i.setAttribute("max",n.length-1),i.addEventListener("input",(function(e){return t.changeSlider(i)})),i.addEventListener("change",(function(e){document.querySelector(".m-timeline-button button").classList.add("cp-control-siguiente"),document.querySelector(".m-timeline-button button").classList.remove("cp-control-pausa"),document.querySelector(".div-m-timeline-slider").style.setProperty("--opacity","0"),clearTimeout(t.running),t.running=!1})),t.template.querySelector("#m-timeline-play").addEventListener("click",(function(e){t.running=!t.running,t.running&&t.playTimeline(t.running)})),e(t.template)}))}},{key:"transformToLayers",value:function(e){var t=null;if(e instanceof Object){if(e instanceof Object){var r=this.map.getLayers().filter((function(t){return e.name.includes(t.name)}))[0];t=this.isValidLayer(r)?r:null}}else if(e.indexOf("*")>=0){var n=e.split("*");"WMS"===n[0].toUpperCase()?t=new IDEE.layer.WMS({url:n[2],name:n[3]}):"WMTS"===n[0].toUpperCase()&&(t=new IDEE.layer.WMTS({url:n[2],name:n[3],legend:n[1],matrixSet:n[4],format:n[5]}))}else{var i=this.map.getLayers().filter((function(t){return e.includes(t.name)}))[0];t=this.isValidLayer(i)?i:null}if(null!==t)return t.displayInLayerSwitcher=!1,t.setVisible(!1),t;this.map.removeLayers(e)}},{key:"changeSlider",value:function(e){var t=this;document.querySelector(".div-m-timeline-slider").style.setProperty("--opacity","0");var r=(e.value-e.min)/(e.max-e.min)*246+5;document.querySelector(".div-m-timeline-slider").style.setProperty("--left","".concat(r,"px")),(this.animation||""!==this.intervals[0].name)&&(document.querySelector(".m-timeline-names").style.display="block"),this.animation&&(document.querySelector(".m-timeline-button").style.display="block");var n=parseFloat(e.value);if(this.intervals.forEach((function(e){t.getMapLayer(e.service).setVisible(!1),document.querySelector(".m-timeline-names").innerHTML=""})),n%1==0)document.querySelector(".div-m-timeline-slider").style.setProperty("--left","".concat(r+20,"px")),this.getMapLayer(this.intervals[n].service).setVisible(!0),document.querySelector(".m-timeline-names").innerHTML=this.intervals[n].name,document.querySelector(".div-m-timeline-panel").style.setProperty("--valor",'"'.concat(this.intervals[n].tag,'"')),""!==this.intervals[n].tag?document.querySelector(".div-m-timeline-slider").style.setProperty("--opacity","1"):document.querySelector(".div-m-timeline-slider").style.setProperty("--opacity","0");else{var i=parseInt(n,10);this.getMapLayer(this.intervals[i].service).setVisible(!0),this.getMapLayer(this.intervals[i+1].service).setVisible(!0),""!==this.intervals[i].tag&&""!==this.intervals[i+1].tag?(document.querySelector(".div-m-timeline-slider").style.setProperty("--left","".concat(r,"px")),document.querySelector(".div-m-timeline-slider").style.setProperty("--opacity","1"),document.querySelector(".div-m-timeline-panel").style.setProperty("--valor",'"'.concat(this.intervals[i].tag," - ").concat(this.intervals[i+1].tag,'"')),document.querySelector(".m-timeline-names").innerHTML="".concat(this.intervals[i].name," y ").concat(this.intervals[i+1].name)):""===this.intervals[i].tag&&""===this.intervals[i+1].tag?document.querySelector(".div-m-timeline-slider").style.setProperty("--opacity","0"):(document.querySelector(".div-m-timeline-slider").style.setProperty("--left","".concat(r+20,"px")),document.querySelector(".div-m-timeline-slider").style.setProperty("--opacity","10"),document.querySelector(".m-timeline-names").innerHTML=this.intervals[i].name+this.intervals[i+1].name,document.querySelector(".div-m-timeline-panel").style.setProperty("--valor",'"'.concat(this.intervals[i].tag).concat(this.intervals[i+1].tag,'"')))}}},{key:"getMapLayer",value:function(e){return this.map.getLayers().filter((function(t){return t.getImpl().legend===e.getImpl().legend}))[0]}},{key:"setDefaultLayer",value:function(e){var t=this,r=t.template,n=r.querySelector("#input-slider"),i=e<t.intervals.length?e:0;n.value=i,r.querySelector(".div-m-timeline-slider").style.setProperty("--opacity","0");var o=(n.value-n.min)/(n.max-n.min)*246+5;r.querySelector(".div-m-timeline-slider").style.setProperty("--left","".concat(o,"px")),(t.animation||""!==t.intervals[0].name)&&(r.querySelector(".m-timeline-names").style.display="block"),t.animation&&(r.querySelector(".m-timeline-button").style.display="block");var a=parseFloat(n.value);t.intervals.forEach((function(e){t.getMapLayer(e.service).setVisible(!1),r.querySelector(".m-timeline-names").innerHTML=""})),r.querySelector(".div-m-timeline-slider").style.setProperty("--left","".concat(o+20,"px")),t.getMapLayer(t.intervals[a].service).setVisible(!0),r.querySelector(".m-timeline-names").innerHTML=t.intervals[a].name,r.querySelector(".div-m-timeline-panel").style.setProperty("--valor",'"'.concat(t.intervals[a].tag,'"')),""!==t.intervals[a].tag?r.querySelector(".div-m-timeline-slider").style.setProperty("--opacity","1"):r.querySelector(".div-m-timeline-slider").style.setProperty("--opacity","0")}},{key:"playTimeline",value:function(e){var t=this,r=this.intervals.length-1,n=document.querySelector("#input-slider"),i=parseInt(n.value,10);if(this.running?(document.querySelector(".m-timeline-button button").classList.remove("cp-control-siguiente"),document.querySelector(".m-timeline-button button").classList.add("cp-control-pausa")):(document.querySelector(".m-timeline-button button").classList.add("cp-control-siguiente"),document.querySelector(".m-timeline-button button").classList.remove("cp-control-pausa"),clearTimeout(this.running)),!e){if(i>0&&i<r&&this.running)return void(this.running=!1);i>r&&(i=0)}if(i>=r)return n.value=0,this.changeSlider(n),document.querySelector(".m-timeline-button button").classList.add("cp-control-siguiente"),document.querySelector(".m-timeline-button button").classList.remove("cp-control-pausa"),void(this.running=!1);i<0&&(i=0),this.running&&(n.value=parseFloat(n.value)+1,this.changeSlider(n),this.animationFrame=setTimeout((function(e){return t.playTimeline(!0)}),1e3*this.speed))}},{key:"removeTimelineLayers",value:function(){var e=this;clearInterval(this.running),this.intervals.forEach((function(t){e.map.removeLayers(e.getMapLayer(t.service))}))}},{key:"activate",value:function(){clearInterval(this.running),this.running=!1,document.querySelector(".m-timeline-button button").classList.add("cp-control-siguiente"),document.querySelector(".m-timeline-button button").classList.remove("cp-control-pausa")}},{key:"deactivate",value:function(){var e=this;try{clearInterval(this.running),this.running=!1,this.intervals.forEach((function(t){void 0!==t.service.zIndex_&&e.getMapLayer(t.service).setVisible(!1)}))}catch(e){console.error("e2m (1): ".concat(e))}}},{key:"equals",value:function(t){return t instanceof e}}])&&ae(t.prototype,r),n&&ae(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fe(n.key),n)}}function fe(e){var t=function(e,t){if("object"!=me(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==me(t)?t:t+""}function ve(e,t,r){return t=be(t),function(e,t){if(t&&("object"==me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,he()?Reflect.construct(t,r||[],be(e).constructor):t.apply(e,r))}function he(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(he=function(){return!!e})()}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}function ge(e,t){return ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ge(e,t)}var Se=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ve(this,e)).name_="timeline",t.map_=null,t.controls_=[],t.className="m-plugin-timeline",t.position=r.position,void 0!==r&&(IDEE.utils.isString(r.intervals)?t.intervals=JSON.parse(r.intervals.replace(/!!/g,"[").replace(/¡¡/g,"]")):IDEE.utils.isArray(r.intervals)?t.intervals=r.intervals:IDEE.dialog.error(s("intervals_error"))),t.animation=r.animation,void 0===t.animation&&(t.animation=!0),t.speed=parseFloat(r.speed)||1,t.metadata_=C.Pu,t.tooltip_=r.tooltip||s("tooltip"),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}(e,IDEE.Plugin),t=e,(r=[{key:"addTo",value:function(e){this.control_=new ye({intervals:this.intervals,animation:this.animation,speed:this.speed}),this.controls_.push(this.control_),this.map_=e,this.panel_=new IDEE.ui.Panel("panelTimeline",{collapsible:!0,position:IDEE.ui.position[this.position],className:this.className,collapsedButtonClass:"timeline-gestion-reloj2",tooltip:this.tooltip_}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_)}},{key:"destroy",value:function(){this.control_.removeTimelineLayers(),this.map_.removeControls([this.control_]);var e=[null,null,null,null,null];this.control_=e[0],this.panel_=e[1],this.map_=e[2],this.layers=e[3],this.radius=e[4]}},{key:"name",get:function(){return this.name_}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"activate",value:function(){this.control_.activate()}},{key:"setDefaultLayer",value:function(e){this.control_.setDefaultLayer(e)}},{key:"deactivate",value:function(){this.control_.deactivate()}},{key:"equals",value:function(t){return t instanceof e}}])&&de(t.prototype,r),n&&de(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),Le=r(201),Ee=r.n(Le),_e=r(336),we=r.n(_e);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}var De=void 0;function Pe(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ie(n.key),n)}}function Ie(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ce(t)?t:t+""}function je(e,t,r){return t=ke(t),function(e,t){if(t&&("object"==Ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,qe()?Reflect.construct(t,r||[],ke(e).constructor):t.apply(e,r))}function qe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qe=function(){return!!e})()}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}function Ve(e,t){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ve(e,t)}Array.prototype.unique=function(e){return function(){return De.filter(e)}};var Ae=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(IDEE.utils.isUndefined(Ee())||IDEE.utils.isObject(Ee())&&IDEE.utils.isNullOrEmpty(Object.keys(Ee())))&&IDEE.exception(s("exception")),(r=je(this,e,[new(Ee()),"LyrCompare"])).layers=t.layers,r.opacityVal=t.opacityVal,r.layerSelectedA=null,r.layerSelectedB=null,r.layerSelectedC=null,r.layerSelectedD=null,r.template=null,r.staticDivision=t.staticDivision,r.opacityVal=t.opacityVal,r.comparisonMode=t.comparisonMode,r.defaultLyrA=t.defaultLyrA,r.defaultLyrB=t.defaultLyrB,r.defaultLyrC=t.defaultLyrC,r.defaultLyrD=t.defaultLyrD,r.interface=t.interface,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ve(e,t)}(e,IDEE.Control),t=e,(r=[{key:"createView",value:function(e){var t=this;return this.map=e,this.map.on(IDEE.evt.ADDED_LAYER,(function(e){e.forEach((function(e){"WMS"!==e.type&&"WMTS"!==e.type||(t.layers=t.layers.map((function(t){return t.name!==e.name?t:e})))}))})),new Promise((function(e,r){if(t.layers.length>=2){3===t.comparisonMode&&t.layers.length<4&&(IDEE.dialog.error(s("no_layers_plugin"),"lyrcompare"),t.comparisonMode=0);var n=t.allLayerLoad();if(n)t.setFunctionsAndCompile(e);else var i=setInterval((function(){(n=t.allLayerLoad())&&(clearInterval(i),t.setFunctionsAndCompile(e))}),200)}else IDEE.dialog.error(s("no_layers_plugin"),"lyrcompare")}))}},{key:"setFunctionsAndCompile",value:function(e){var t=this,r={jsonp:!0,vars:{options:this.layers.map((function(e){return e instanceof Object?{name:e.name,legend:e.legend}:{name:e,legend:e}})),comparisonMode:this.comparisonMode,translations:{tooltip_vcurtain:s("tooltip_vcurtain"),tooltip_hcurtain:s("tooltip_hcurtain"),tooltip_multicurtain:s("tooltip_multicurtain"),tooltip_deactivatecurtain:s("tooltip_deactivatecurtain"),opacity:s("opacity"),static:s("static"),dynamic:s("dynamic"),mixed:s("mixed"),layer:s("layer"),opacity_tooltip:s("opacity_tooltip"),static_tooltip:s("static_tooltip"),dynamic_tooltip:s("dynamic_tooltip"),mixed_tooltip:s("mixed_tooltip"),lyrLeftSelect_tooltip:s("lyrLeftSelect_tooltip"),lyrRightSelect_tooltip:s("lyrRightSelect_tooltip")}}};return this.template=IDEE.template.compileSync(we(),r),this.setEventsAndValues(),this.updateControls(),0===this.layers.length?IDEE.dialog.error(s("no_layers_plugin")):this.template.querySelectorAll('button[id^="m-lyrcompare-"]').forEach((function(e,r){"m-lyrcompare-deactivate"===e.id?e.addEventListener("click",(function(e){document.querySelector("#m-lyrdropdown-selector")&&(document.querySelector("#m-lyrdropdown-selector").style.display="block"),document.querySelector("#m-transparency-active").disabled=!1,document.querySelector("#m-transparency-deactivate").disabled=!1,t.comparisonMode=0,t.deactivateCurtain()})):e.addEventListener("click",(function(e){0===t.comparisonMode?(document.querySelector("#m-lyrdropdown-selector")&&(document.querySelector("#m-lyrdropdown-selector").value="none",document.querySelector("#m-lyrdropdown-selector").style.display="none"),document.querySelector("#m-transparency-active").disabled=!0,document.querySelector("#m-transparency-deactivate").disabled=!0,t.comparisonMode=r+1,t.activateCurtain()):t.comparisonMode===r+1?(t.comparisonMode=0,t.deactivateCurtain()):(t.comparisonMode=r+1,t.updateControls(),t.getImpl().setComparisonMode(t.comparisonMode))}))})),e(this.template)}},{key:"setEventsAndValues",value:function(){var e=this;this.template.querySelector("#input-transparent-opacity").value=this.opacityVal,this.template.querySelector("#input-transparent-opacity").addEventListener("input",(function(t){e.opacityVal=Number(t.target.value),e.getImpl().setOpacity(e.opacityVal)})),1===this.staticDivision?this.template.querySelector("#div-m-lyrcompare-transparent-static").checked=!0:0===this.staticDivision?this.template.querySelector("#div-m-lyrcompare-transparent-dynamic").checked=!0:this.template.querySelector("#div-m-lyrcompare-transparent-mixed").checked=!0,this.template.querySelector("#div-m-lyrcompare-transparent-dynamic").addEventListener("change",(function(t){e.staticDivision=Number(t.target.value),e.getImpl().setStaticDivision(e.staticDivision)})),this.template.querySelector("#div-m-lyrcompare-transparent-static").addEventListener("change",(function(t){e.staticDivision=Number(t.target.value),e.getImpl().setStaticDivision(e.staticDivision)})),this.template.querySelector("#div-m-lyrcompare-transparent-mixed").addEventListener("change",(function(t){e.staticDivision=Number(t.target.value),e.getImpl().setStaticDivision(e.staticDivision)})),this.template.querySelectorAll('select[id^="m-lyrcompare-"]').forEach((function(t){t.addEventListener("change",(function(r){var n=e.layers.filter((function(t){if(t.name===r.target.value)return e.map.addLayers(t),t})),i=[];if("m-lyrcompare-lyrA"===t.id?i=[n[0].name,e.layerSelectedB.name,e.layerSelectedC.name,e.layerSelectedD.name]:"m-lyrcompare-lyrB"===t.id?i=[e.layerSelectedA.name,n[0].name,e.layerSelectedC.name,e.layerSelectedD.name]:"m-lyrcompare-lyrC"===t.id?i=[e.layerSelectedA.name,e.layerSelectedB.name,n[0].name,e.layerSelectedD.name]:"m-lyrcompare-lyrD"===t.id&&(i=[e.layerSelectedA.name,e.layerSelectedB.name,e.layerSelectedC.name,n[0].name]),!1===e.checkLayersAreDifferent.apply(e,Pe(i)))return IDEE.dialog.info(s("advice_sameLayer")),"m-lyrcompare-lyrA"===t.id?e.template.querySelector("#".concat(t.id)).value=e.layerSelectedA.name:"m-lyrcompare-lyrB"===t.id?e.template.querySelector("#".concat(t.id)).value=e.layerSelectedB.name:"m-lyrcompare-lyrC"===t.id?e.template.querySelector("#".concat(t.id)).value=e.layerSelectedC.name:"m-lyrcompare-lyrD"===t.id&&(e.template.querySelector("#".concat(t.id)).value=e.layerSelectedD.name),!1;"m-lyrcompare-lyrA"===t.id?(n[0].name===e.layerSelectedC.name&&(e.layerSelectedC.setVisible(!1),e.layerSelectedC=e.layerSelectedA,e.template.querySelector("#m-lyrcompare-lyrC").value=e.layerSelectedA.name),n[0].name===e.layerSelectedD.name&&(e.layerSelectedD.setVisible(!1),e.layerSelectedD=e.layerSelectedA,e.template.querySelector("#m-lyrcompare-lyrD").value=e.layerSelectedA.name)):"m-lyrcompare-lyrB"===t.id&&(n[0].name===e.layerSelectedC.name&&(e.layerSelectedC.setVisible(!1),e.layerSelectedC=e.layerSelectedB,e.template.querySelector("#m-lyrcompare-lyrC").value=e.layerSelectedB.name),n[0].name===e.layerSelectedD.name&&(e.layerSelectedD.setVisible(!1),e.layerSelectedD=e.layerSelectedB,e.template.querySelector("#m-lyrcompare-lyrD").value=e.layerSelectedB.name)),"m-lyrcompare-lyrA"===t.id?(e.layerSelectedA.setVisible(!1),e.layerSelectedA=n[0]):"m-lyrcompare-lyrB"===t.id?(e.layerSelectedB.setVisible(!1),e.layerSelectedB=n[0]):"m-lyrcompare-lyrC"===t.id?(e.layerSelectedC.setVisible(!1),e.layerSelectedC=n[0]):"m-lyrcompare-lyrD"===t.id&&(e.layerSelectedD.setVisible(!1),e.layerSelectedD=n[0]),setTimeout((function(){e.removeEffectsComparison(),e.getImpl().effectSelectedCurtain(e.layerSelectedA,e.layerSelectedB,e.layerSelectedC,e.layerSelectedD,e.opacityVal,e.staticDivision,e.comparisonMode),e.getImpl().effectSelectedCurtain(e.layerSelectedA,e.layerSelectedB,e.layerSelectedC,e.layerSelectedD,e.opacityVal,e.staticDivision,e.comparisonMode),e.getImpl().effectSelectedCurtain(e.layerSelectedA,e.layerSelectedB,e.layerSelectedC,e.layerSelectedD,e.opacityVal,e.staticDivision,e.comparisonMode),e.getImpl().effectSelectedCurtain(e.layerSelectedA,e.layerSelectedB,e.layerSelectedC,e.layerSelectedD,e.opacityVal,e.staticDivision,e.comparisonMode),e.getImpl().effectSelectedCurtain(e.layerSelectedA,e.layerSelectedB,e.layerSelectedC,e.layerSelectedD,e.opacityVal,e.staticDivision,e.comparisonMode)}),1e3)}))}))}},{key:"checkLayersAreDifferent",value:function(e,t,r,n){var i=!0;if(1===this.comparisonMode||2===this.comparisonMode)i=e!==t;else{var o=[e,t,r,n];i=Pe(new Set(o)).length===o.length}return i}},{key:"activateCurtain",value:function(){var e=this;this.activeDefault(),setTimeout((function(){e.getImpl().effectSelectedCurtain(e.layerSelectedA,e.layerSelectedB,e.layerSelectedC,e.layerSelectedD,e.opacityVal,e.staticDivision,e.comparisonMode),e.updateControls()}),1e3)}},{key:"activeDefault",value:function(){var e=this;null===this.layerSelectedA&&(this.layerSelectedA=this.layers[this.defaultLyrA],this.template.querySelector("#m-lyrcompare-lyrA").selectedIndex=this.defaultLyrA,this.map.getLayers().some((function(t){return t.name===e.layerSelectedA.name})),this.map.addLayers(this.layerSelectedA)),null===this.layerSelectedB&&(this.layerSelectedB=this.layers[this.defaultLyrB],this.template.querySelector("#m-lyrcompare-lyrB").selectedIndex=this.defaultLyrB,this.map.getLayers().some((function(t){return t.name===e.layerSelectedB.name})),this.map.addLayers(this.layerSelectedB)),null===this.layerSelectedC&&(this.layerSelectedC=this.layers[this.defaultLyrC],this.template.querySelector("#m-lyrcompare-lyrC").selectedIndex=this.defaultLyrC,this.map.getLayers().some((function(t){return t.name===e.layerSelectedC.name})),this.map.addLayers(this.layerSelectedC)),null===this.layerSelectedD&&(this.layerSelectedD=this.layers[this.defaultLyrD],this.template.querySelector("#m-lyrcompare-lyrD").selectedIndex=this.defaultLyrD,this.map.getLayers().some((function(t){return t.name===e.layerSelectedD.name})),this.map.addLayers(this.layerSelectedD))}},{key:"deactivateCurtain",value:function(){var e=document.querySelector(".lyrcompare-swipe-control");e&&(e.classList.display="none !important"),this.comparisonMode=0,null!==this.layerSelectedA&&null!==this.layerSelectedB&&(this.layerSelectedA.setVisible(!1),this.layerSelectedB.setVisible(!1)),null!==this.layerSelectedC&&null!==this.layerSelectedD&&void 0!==this.layerSelectedC&&void 0!==this.layerSelectedD&&(this.layerSelectedC.setVisible(!1),this.layerSelectedD.setVisible(!1)),this.removeEffectsComparison(),this.updateControls()}},{key:"removeEffectsComparison",value:function(){this.getImpl().removeEffectsCurtain()}},{key:"manageLyrAvailable",value:function(e){null!==this.template&&(this.updateLyrsAvailables(e,"A"),this.updateLyrsAvailables(e,"B"),this.updateLyrsAvailables(e,"C"),this.updateLyrsAvailables(e,"D"))}},{key:"updateLyrsAvailables",value:function(e,t){try{var r=null;r=this.template.querySelector("#m-lyrcompare-lyr".concat(t));for(var n=1;n<r.options.length;n+=1)r.options[n].disabled=!e.includes(r.options[n].value)}catch(e){console.log(e)}}},{key:"updateControls",value:function(){this.removeActivate(),this.activateByMode();var e=document.querySelector(".lyrcompare-swipe-control");if(0===this.comparisonMode)return this.template.querySelectorAll('select[id^="m-lyrcompare-"]').forEach((function(e){e.disabled=!0})),this.template.querySelector("input").disabled=!0,this.template.querySelector("#div-m-lyrcompare-transparent-dynamic").disabled=!0,this.template.querySelector("#div-m-lyrcompare-transparent-static").disabled=!0,void(this.template.querySelector("#div-m-lyrcompare-transparent-mixed").disabled=!0);1===this.comparisonMode?(e&&(e.style.opacity="1"),this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList.add("cp-columns-2"),this.template.querySelector("#m-lyrcompare-lyrB-lbl").classList.add("cp-columns-1"),this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrA").disabled=!1,this.template.querySelector("#m-lyrcompare-lyrB").disabled=!1):2===this.comparisonMode?(e&&(e.style.opacity="1"),this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList.add("cp-columns-4"),this.template.querySelector("#m-lyrcompare-lyrB-lbl").classList.add("cp-columns-3"),this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrA").disabled=!1,this.template.querySelector("#m-lyrcompare-lyrB").disabled=!1):3===this.comparisonMode&&(e&&(e.style.opacity="1"),this.template.querySelectorAll('select[id^="m-lyrcompare-"]').forEach((function(e){e.disabled=!1})),this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList.add("cp-th-large-1"),this.template.querySelector("#m-lyrcompare-lyrB-lbl").classList.add("cp-th-large-2"),this.template.querySelector("#m-lyrcompare-lyrC-lbl").classList.add("cp-th-large-3"),this.template.querySelector("#m-lyrcompare-lyrD-lbl").classList.add("cp-th-large-4"),this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrC-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrD-cont").style.display="block"),this.template.querySelector("input").disabled=!1,this.template.querySelector("#div-m-lyrcompare-transparent-dynamic").disabled=!1,this.template.querySelector("#div-m-lyrcompare-transparent-static").disabled=!1,this.template.querySelector("#div-m-lyrcompare-transparent-mixed").disabled=!1}},{key:"activateByMode",value:function(){1===this.comparisonMode?this.template.querySelector("#m-lyrcompare-vcurtain").classList.add("buttom-pressed-vcurtain"):2===this.comparisonMode?this.template.querySelector("#m-lyrcompare-hcurtain").classList.add("buttom-pressed-hcurtain"):3===this.comparisonMode&&this.template.querySelector("#m-lyrcompare-multicurtain").classList.add("buttom-pressed-multicurtain")}},{key:"removeActivate",value:function(){this.template.querySelector("#m-lyrcompare-vcurtain").classList.remove("buttom-pressed-vcurtain"),this.template.querySelector("#m-lyrcompare-hcurtain").classList.remove("buttom-pressed-hcurtain"),this.template.querySelector("#m-lyrcompare-multicurtain").classList.remove("buttom-pressed-multicurtain"),this.template.querySelectorAll('select[id^="m-lyrcompare-"]').disabled=!0,this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrC-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrD-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList="",this.template.querySelector("#m-lyrcompare-lyrB-lbl").classList="";var e=document.querySelector(".lyrcompare-swipe-control");e&&(e.style.opacity="0")}},{key:"removeCurtainLayers",value:function(e){var t=this;e.forEach((function(e){if(e instanceof Object){if(e instanceof Object){var r=t.map.getLayers().filter((function(t){return e.name.includes(t.name)}))[t.map.getLayers().filter((function(t){return e.name.includes(t.name)})).length-1];t.map.removeLayers(r)}}else if(e.indexOf("*")>=0){var n=e.split("*")[3],i=t.map.getLayers().filter((function(e){return n.includes(e.name)}))[t.map.getLayers().filter((function(e){return n.includes(e.name)})).length-1];t.map.removeLayers(i)}else{var o=t.map.getLayers().filter((function(t){return e.includes(t.name)}))[t.map.getLayers().filter((function(t){return e.includes(t.name)})).length-1];t.map.removeLayers(o)}}))}},{key:"allLayerLoad",value:function(){var e=!0;return void 0!==this.layers[0].load&&(void 0!==this.layers[1].load||void 0===this.layers[2]||void 0===this.layers[3]||void 0!==this.layers[2].load&&void 0!==this.layers[3].load)||(e=!1),e}},{key:"isValidLayer",value:function(e){return"WMTS"===e.type||"WMS"===e.type}},{key:"equals",value:function(t){return t instanceof e}},{key:"getLayersNames",value:function(){return this.layers.map((function(e){return e.name}))}}])&&Me(t.prototype,r),n&&Me(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xe(n.key),n)}}function xe(e){var t=function(e,t){if("object"!=Te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Te(t)?t:t+""}function ze(e,t,r){return t=Re(t),function(e,t){if(t&&("object"==Te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ne()?Reflect.construct(t,r||[],Re(e).constructor):t.apply(e,r))}function Ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ne=function(){return!!e})()}function Re(e){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Re(e)}function Ze(e,t){return Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ze(e,t)}var Fe=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ze(this,e)).name_="lyrcompare",t.error_=!1,t.layers=[],void 0===r.layers||r.layers.length<2?(IDEE.dialog.error(s("no_layers_plugin"),"lyrcompare"),t.error_=!0):Array.isArray(r.layers)?t.layers=r.layers:t.layers=r.layers.split(","),t.controls_=[],t.map_=null,!1===t.error_&&(t.position=r.position,t.collapsed=!0,t.collapsible=!0,t.staticDivision=void 0===r.staticDivision?1:parseInt(r.staticDivision,10),void 0===r.opacityVal?t.opacityVal=100:(t.opacityVal=parseInt(r.opacityVal,10),t.opacityVal<=0?t.opacityVal=0:t.opacityVal>=100&&(t.opacityVal=100)),void 0===r.comparisonMode?t.comparisonMode=0:(t.comparisonMode=parseInt(r.comparisonMode,10),(t.comparisonMode<=0||t.comparisonMode>3)&&(t.comparisonMode=0)),t.metadata_=C.Pu,t.tooltip_=r.tooltip||s("tooltip"),t.interface=void 0===r.interface||r.interface,void 0===r.defaultLyrA?t.defaultLyrA=0:t.defaultLyrA=parseInt(r.defaultLyrA,10),void 0===r.defaultLyrB?t.defaultLyrB=0!==t.defaultLyrA?0:1:t.defaultLyrB=parseInt(r.defaultLyrB,10),t.defaultLyrA===t.defaultLyrB&&(IDEE.dialog.error(s("repeated_layers"),"lyrcompare"),t.error_=!0),void 0===r.defaultLyrC?t.defaultLyrC=2:t.defaultLyrC=parseInt(r.defaultLyrC,10),t.defaultLyrA!==t.defaultLyrC&&t.defaultLyrB!==t.defaultLyrC||(IDEE.dialog.error(s("repeated_layers"),"lyrcompare"),t.error_=!0),void 0===r.defaultLyrD?t.defaultLyrD=3:t.defaultLyrD=parseInt(r.defaultLyrD,10),t.defaultLyrA!==t.defaultLyrD&&t.defaultLyrB!==t.defaultLyrD&&t.defaultLyrC!==t.defaultLyrD||(IDEE.dialog.error(s("repeated_layers"),"lyrcompare"),t.error_=!0)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}(e,IDEE.Plugin),t=e,(r=[{key:"addTo",value:function(e){this.map_=e;var t={layers:this.layers,collapsible:this.collapsible,collapsed:this.collapsed,staticDivision:this.staticDivision,opacityVal:this.opacityVal,comparisonMode:this.comparisonMode,defaultLyrA:this.defaultLyrA,defaultLyrB:this.defaultLyrB,defaultLyrC:this.defaultLyrC,defaultLyrD:this.defaultLyrD,interface:this.interface};this.control_=new Ae(t),this.controls_.push(this.control_),this.error_?0!==e.getPlugins("lyrcompare").length&&e.removePlugins(e.getPlugins("lyrcompare")):(this.interface?this.panel_=new IDEE.ui.Panel("panelLyrcompare",{collapsible:this.collapsible,collapsed:this.collapsed,position:IDEE.ui.position[this.position],className:"m-plugin-lyrcompare",collapsedButtonClass:"cp-icon",tooltip:this.tooltip_}):this.panel_=new IDEE.ui.Panel("panelLyrcompare",{collapsible:!1,collapsed:!0,position:IDEE.ui.position[this.position],className:"m-plugin-lyrcompare-hidden"}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_))}},{key:"destroy",value:function(){this.deactivate();var e=document.querySelector(".lyrcompare-swipe-control");e&&e.remove(),this.map_.removeControls([this.control_]),this.control_.removeCurtainLayers(this.control_.getLayersNames());var t=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];this.name_=t[0],this.error_=t[1],this.layers=t[2],this.controls_=t[3],this.map_=t[4],this.position=t[5],this.collapsed=t[6],this.collapsible=t[7],this.staticDivision=t[8],this.opacityVal=t[9],this.comparisonMode=t[10],this.metadata_=t[11],this.tooltip_=t[12],this.interface=t[13],this.defaultLyrA=t[14],this.defaultLyrB=t[15],this.defaultLyrC=t[16],this.defaultLyrD=t[17]}},{key:"name",get:function(){return this.name_}},{key:"manageLyrAvailable",value:function(e){this.control_.manageLyrAvailable(e)}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"activate",value:function(){this.control_.activateCurtain()}},{key:"deactivate",value:function(){this.control_.deactivateCurtain()}},{key:"isActive",value:function(){return 0===!this.control_.comparisonMode}},{key:"equals",value:function(t){return t instanceof e}}])&&Be(t.prototype,r),n&&Be(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),We=r(725),Ke=r.n(We),Ue=r(375),He=r.n(Ue);function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qe(n.key),n)}}function Qe(e){var t=function(e,t){if("object"!=Ge(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ge(t)?t:t+""}function Ye(e,t,r){return t=Xe(t),function(e,t){if(t&&("object"==Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$e()?Reflect.construct(t,r||[],Xe(e).constructor):t.apply(e,r))}function $e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($e=function(){return!!e})()}function Xe(e){return Xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xe(e)}function et(e,t){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},et(e,t)}var tt=function(){function e(t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(IDEE.utils.isUndefined(Ke())||IDEE.utils.isObject(Ke())&&IDEE.utils.isNullOrEmpty(Object.keys(Ke())))&&IDEE.exception(s("exception")),(r=Ye(this,e,[new(Ke()),"Transparency"])).layers=t.layers,r.radius=t.radius,r.layerSelected=null,r.freeze=!1,r.template=null,r.freezeSpyEye=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&et(e,t)}(e,IDEE.Control),t=e,(r=[{key:"createView",value:function(e){var t=this;return this.map=e,new Promise((function(e,r){var n=t.layers.map((function(e){return e instanceof Object?{name:e.name,legend:e.legend}:{name:e,legend:e}})),i={jsonp:!0,vars:{translations:{transparency:s("transparency"),radius:s("radius"),layers:s("layers"),freeze:s("freeze"),unfreeze:s("unfreeze"),activate_spyeye:s("activate_spyeye"),deactivate_spyeye:s("deactivate_spyeye")}}};n.length>=1&&(i.vars.options=n),t.template=IDEE.template.compileSync(He(),i),t.template.querySelector("#input-transparent-radius").value=t.radius,t.template.querySelector("#input-transparent-radius").addEventListener("change",(function(e){t.radius=Number(e.target.value),t.getImpl().setRadius(t.radius)})),t.template.querySelector("#m-transparency-active").addEventListener("click",(function(e){document.querySelector("#m-lyrdropdown-selector")&&(document.querySelector("#m-lyrdropdown-selector").value="none",document.querySelector("#m-lyrdropdown-selector").style.display="none"),document.querySelector("#m-lyrcompare-vcurtain").disabled=!0,document.querySelector("#m-lyrcompare-hcurtain").disabled=!0,document.querySelector("#m-lyrcompare-multicurtain").disabled=!0,document.querySelector("#m-lyrcompare-deactivate").disabled=!0,t.template.querySelector("#m-transparency-lock").style.visibility="visible",t.template.querySelector("#m-transparency-unlock").style.visibility="hidden",t.activate()})),t.template.querySelector("#m-transparency-deactivate").addEventListener("click",(function(e){document.querySelector("#m-lyrdropdown-selector")&&(document.querySelector("#m-lyrdropdown-selector").style.display="block"),document.querySelector("#m-lyrcompare-vcurtain").disabled=!1,document.querySelector("#m-lyrcompare-hcurtain").disabled=!1,document.querySelector("#m-lyrcompare-multicurtain").disabled=!1,document.querySelector("#m-lyrcompare-deactivate").disabled=!1,t.template.querySelector("#m-transparency-lock").style.visibility="hidden",t.template.querySelector("#m-transparency-unlock").style.visibility="hidden",t.deactivate()})),t.template.querySelector("#m-transparency-lock").addEventListener("click",(function(e){IDEE.dialog.info("Mueva el cursor a la zona deseada y pulse Ctrl+Shift+Enter para congelar")})),t.template.querySelector("#m-transparency-unlock").addEventListener("click",(function(e){t.freeze=!t.freeze,t.getImpl().setFreeze(t.freeze),t.template.querySelector("#m-transparency-lock").style.visibility="visible",t.template.querySelector("#m-transparency-unlock").style.visibility="hidden"})),0===t.layers.length||""===t.layers?IDEE.dialog.error(s("errorLayer")):""!==i&&(t.template.querySelector("#m-transparency-lock").style.visibility="hidden",t.template.querySelector("#m-transparency-unlock").style.visibility="hidden",t.template.querySelector("select").disabled=!0,t.template.querySelector("input").disabled=!0,t.template.querySelector("select").addEventListener("change",(function(e){t.layerSelected.setVisible(!1),t.removeEffects();var r=t.layers.filter((function(r){if(r.name===e.target.value)return t.map.addLayers(r),r}));t.layerSelected=r[0],setTimeout((function(){t.getImpl().effectSelected(t.layerSelected,t.radius,t.freeze)}),1e3)}))),e(t.template)}))}},{key:"setDefaultLayer",value:function(){console.log("Activación remota")}},{key:"manageLyrAvailable",value:function(e){if(null!==this.template)try{var t=null;t=this.template.querySelector("#m-transparency-lyr");for(var r=1;r<t.options.length;r+=1)t.options[r].disabled=!e.includes(t.options[r].value)}catch(e){console.log(e)}}},{key:"activate",value:function(){var e=this;this.map.getLayers().forEach((function(t){e.layers.some((function(e){return e.name===t.name}))&&e.map.removeLayers(t)})),null===this.layerSelected&&(this.layerSelected=this.layers[0],this.map.addLayers(this.layerSelected)),this.layers.map((function(e){return e instanceof Object?{name:e.name}:{name:e}})).length>=1&&(this.template.querySelector("select").disabled=!1,this.template.querySelector("input").disabled=!1,this.template.querySelector("#m-transparency-lock").style.visibility="visible",this.template.querySelector("#m-transparency-unlock").style.visibility="hidden",this.template.querySelector("#m-transparency-active").disabled=!0,this.template.querySelector("#m-transparency-deactivate").disabled=!1),setTimeout((function(){e.getImpl().effectSelected(e.layerSelected,e.radius,e.freeze)}),1e3)}},{key:"deactivate",value:function(){null===this.layerSelected&&(this.layerSelected=this.layers[0]);var e=this.layers.map((function(e){return e instanceof Object?{name:e.name}:{name:e}}));this.removeEffects(),this.map.removeLayers(this.layerSelected),e.length>=1&&(this.template.querySelector("select").disabled=!0,this.template.querySelector("input").disabled=!0,this.template.querySelector("#m-transparency-active").disabled=!1,this.template.querySelector("#m-transparency-deactivate").disabled=!0)}},{key:"removeEffects",value:function(){this.getImpl().removeEffects()}},{key:"removeTransparencyLayers",value:function(e){var t=this;e.forEach((function(e){if(e instanceof Object){if(e instanceof Object){var r=t.map.getLayers().filter((function(t){return e.name.includes(t.name)}))[0];t.map.removeLayers(r)}}else if(e.indexOf("*")>=0){var n=e.split("*")[3],i=t.map.getLayers().filter((function(e){return n.includes(e.name)}))[0];t.map.removeLayers(i)}else{var o=t.map.getLayers().filter((function(t){return e.includes(t.name)}))[0];t.map.removeLayers(o)}}))}},{key:"isValidLayer",value:function(e){return"WMTS"===e.type||"WMS"===e.type}},{key:"equals",value:function(t){return t instanceof e}},{key:"getLayersNames",value:function(){return this.layers.map((function(e){return e.name}))}}])&&Je(t.prototype,r),n&&Je(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,it(n.key),n)}}function it(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rt(t)?t:t+""}function ot(e,t,r){return t=lt(t),function(e,t){if(t&&("object"==rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,at()?Reflect.construct(t,r||[],lt(e).constructor):t.apply(e,r))}function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}var ct=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ot(this,e)).name_="transparency",t.map_=null,t.controls_=[],t.className="m-plugin-transparency",t.position=r.position,t.enabledKeyFunctions=r.enabledKeyFunctions,void 0===t.enabledKeyFunctions&&(t.enabledKeyFunctions=!0),void 0===r.layers||""===r.layers?(IDEE.dialog.error(s("errorLayer")),t.layers=[]):Array.isArray(r.layers)?t.layers=r.layers:t.layers=r.layers.split(","),Number.isNaN(parseInt(r.radius,10))?t.radius=100:r.radius>=30&&r.radius<=200?t.radius=parseInt(r.radius,10):r.radius>200?t.radius=200:r.radius<30&&(t.radius=30),t.metadata_=C.Pu,t.separatorApiJson=C.HQ.k,t.tooltip_=r.tooltip||s("tooltip"),t.collapsed=r.collapsed||!0,t.collapsible=r.collapsible||!0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(e,IDEE.Plugin),t=e,(r=[{key:"addTo",value:function(e){var t=this,r={layers:this.layers,radius:this.radius};this.control_=new tt(r),this.controls_.push(this.control_),this.map_=e,this.panel_=new IDEE.ui.Panel("panelTransparency",{collapsible:this.collapsible,collapsed:this.collapsed,position:IDEE.ui.position[this.position],className:this.className,collapsedButtonClass:"icon-gps4",tooltip:this.tooltip_}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_),document.addEventListener("keydown",(function(e){if(t.enabledKeyFunctions){if(e.ctrlKey&&e.shiftKey&&"ArrowUp"===e.key){if(t.control_.radius>=200)return;t.control_.radius+=20,t.control_.getImpl().setRadius(t.control_.radius),t.control_.template.querySelector("#input-transparent-radius").value=t.control_.radius}if(e.ctrlKey&&e.shiftKey&&"ArrowDown"===e.key){if(t.control_.radius<=32)return;t.control_.radius-=20,t.control_.getImpl().setRadius(t.control_.radius),t.control_.template.querySelector("#input-transparent-radius").value=t.control_.radius}e.ctrlKey&&e.shiftKey&&"Enter"===e.key&&(t.control_.freeze=!t.control_.freeze,t.control_.getImpl().setFreeze(t.control_.freeze),t.control_.freeze?(t.control_.template.querySelector("#m-transparency-lock").style.visibility="hidden",t.control_.template.querySelector("#m-transparency-unlock").style.visibility="visible"):(t.control_.template.querySelector("#m-transparency-lock").style.visibility="visible",t.control_.template.querySelector("#m-transparency-unlock").style.visibility="hidden"))}}))}},{key:"manageLyrAvailable",value:function(e){this.control_.manageLyrAvailable(e)}},{key:"destroy",value:function(){this.control_.removeEffects(),this.control_.removeTransparencyLayers(this.control_.getLayersNames()),this.map_.removeControls([this.control_]);var e=[null,null,null,null,null];this.control_=e[0],this.panel_=e[1],this.map_=e[2],this.layers=e[3],this.radius=e[4]}},{key:"name",get:function(){return this.name_}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"setDefaultLayer",value:function(){this.control_.setDefaultLayer()}},{key:"activate",value:function(){this.control_.activate()}},{key:"deactivate",value:function(){this.control_.deactivate()}},{key:"equals",value:function(t){return t instanceof e}}])&&nt(t.prototype,r),n&&nt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function ut(e){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ut(e)}function pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yt(n.key),n)}}function yt(e){var t=function(e,t){if("object"!=ut(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ut(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ut(t)?t:t+""}function mt(e,t,r){return t=ft(t),function(e,t){if(t&&("object"==ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,dt()?Reflect.construct(t,r||[],ft(e).constructor):t.apply(e,r))}function dt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(dt=function(){return!!e})()}function ft(e){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ft(e)}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}var ht=function(){function e(r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(IDEE.utils.isUndefined(t())||IDEE.utils.isObject(t())&&IDEE.utils.isNullOrEmpty(Object.keys(t())))&&IDEE.exception(s("exception"));var i=new(t());return(n=mt(this,e,[i,"Comparepanel"])).template=null,n.baseLayers=r.baseLayers,n.position=r.position,n.layers=[],n.layersPlugins=[],n.defaultComparisonMode=r.defaultComparisonMode,n.defaultComparisonViz=r.defaultComparisonViz,n.previousComparisonMode="",n.actualComparisonMode="",n.urlCover=r.urlCover,n.lyrsMirrorMinZindex=r.lyrsMirrorMinZindex,n.baseLayers.forEach((function(e){return n.layers.push(e[2])})),n.params=[r.mirrorpanelParams,r.timelineParams,r.lyrcompareParams,r.transparencyParams],n.params.forEach((function(e){e.position=n.position})),n.layersPlugins=n.transformToLayers(n.layers,r.map),r.mirrorpanelParams.defaultBaseLyrs=n.layers,r.mirrorpanelParams.lyrsMirrorMinZindex=n.lyrsMirrorMinZindex,r.timelineParams.intervals=n.baseLayers,r.lyrcompareParams.layers=n.layersPlugins,r.transparencyParams.layers=n.layersPlugins,n.allLayersName=n.layers.map((function(e){if(e.indexOf("*")>=0){var t=e.split("*");if("WMS"===t[0].toUpperCase())return t[3];if("WMTS"===t[0].toUpperCase())return t[3]}})),n.mirrorpanel=new ee(r.mirrorpanelParams),n.timeline=new Se(r.timelineParams),n.lyrcompare=new Fe(r.lyrcompareParams),n.transparency=new ct(r.transparencyParams),n.panels=[],n.plugins=[n.mirrorpanel,n.timeline,n.lyrcompare,n.transparency],n.map=null,n.lyrCoverture=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(e,IDEE.Control),r=e,n=[{key:"createView",value:function(e){var t=this;return console.warn(s("comparepanel_obsolete")),this.map=e,new Promise((function(r,n){var o={jsonp:!0,vars:{translations:{tooltipLyr:s("tooltipLyr"),tooltipMirrorpanel:s("tooltipMirrorpanel"),tooltipTimeline:s("tooltipTimeline"),tooltipTransparency:s("tooltipTransparency")}}};t.template=IDEE.template.compileSync(i(),o),r(t.template),t.addComparators(e)}))}},{key:"addComparators",value:function(e){var t=this;this.plugins.forEach((function(r,n){e.addPlugin(r),t.panels.push(r.panel_._element);var i=document.querySelector(".".concat(r.panel_._className," .m-panel-controls"));i.classList.add("cp-".concat(r.name)),document.querySelector(".".concat(r.panel_._className)).remove(),t.template.querySelector("#m-cp-".concat(r.name)).append(i),n===t.plugins.length-1&&t.addButtonEvents()})),this.setComparatorsDefaultStyle(),""!==this.urlCover&&this.loadCoverPNOALyr(),this.onMoveEnd((function(e){""===t.urlCover?(t.mirrorpanel.manageLyrAvailable(t.allLayersName),t.lyrcompare.manageLyrAvailable(t.allLayersName),t.transparency.manageLyrAvailable(t.allLayersName)):t.getCobertura(e)}))}},{key:"addButtonEvents",value:function(){var e=this;this.plugins.forEach((function(t){"mirrorpanel"===t.name?e.template.querySelector("#m-cp-".concat(t.name," .cp-button")).addEventListener("click",(function(r){e.deactivateAndActivateMirrorPanel(t)})):(t.name,e.template.querySelector("#m-cp-".concat(t.name," .cp-button")).addEventListener("click",(function(r){e.deactivateAndActivateOtherModes(t)})))})),this.template.querySelector("#m-cp-testing-btn").addEventListener("click",(function(t){e.map.getMapImpl().getLayers().forEach((function(e){console.log(e.getSource().key_)}))}))}},{key:"setComparatorsDefaultStyle",value:function(){var e=this;"mirrorpanel"===this.defaultComparisonMode&&0===this.defaultComparisonViz&&console.log("Modo defecto"),this.plugins.forEach((function(t){t.name===e.defaultComparisonMode&&("transparency"===t.name&&t.setDefaultLayer(),"timeline"===t.name&&t.setDefaultLayer(e.defaultComparisonViz))})),this.actualComparisonMode=this.defaultComparisonMode}},{key:"deactivateAndActivateMirrorPanel",value:function(e){var t=this;this.template.querySelector("#m-cp-mirrorpanel .cp-mirrorpanel").classList.toggle("hide-panel"),this.template.querySelector("#m-cp-mirrorpanel .cp-button").classList.toggle("active"),this.plugins.forEach((function(e){"mirrorpanel"!==e.name&&(t.template.querySelector("#m-cp-".concat(e.name," .cp-").concat(e.name)).classList.remove("hide-panel"),t.template.querySelector("#m-cp-".concat(e.name," .cp-button")).classList.remove("active"))})),"mirrorpanel"===e.name&&(this.actualComparisonMode=e.name)}},{key:"deactivateAndActivateOtherModes",value:function(e){var t=this;this.actualComparisonMode=e.name,"mirrorpanel"!==e.name&&(this.plugins.forEach((function(r){r.name!==e.name&&(t.template.querySelector("#m-cp-".concat(r.name," .cp-").concat(r.name)).classList.remove("hide-panel"),t.template.querySelector("#m-cp-".concat(r.name," .cp-button")).classList.remove("active"))})),this.template.querySelector("#m-cp-".concat(e.name," .cp-button")).classList.toggle("active"),this.template.querySelector("#m-cp-".concat(e.name," .cp-").concat(e.name)).classList.toggle("hide-panel"))}},{key:"deactivateAndActivateOtherModesDeprecated",value:function(e){this.actualComparisonMode=e.name,"mirrorpanel"!==e.name&&(this.template.querySelector("#m-cp-".concat(e.name," .cp-button")).classList.toggle("active"),this.template.querySelector("#m-cp-".concat(e.name," .cp-button")).classList.contains("active")&&"timeline"===e.name&&e.activate(),this.template.querySelector("#m-cp-".concat(e.name," .cp-").concat(e.name)).classList.toggle("hide-panel"),this.template.querySelector("#m-cp-mirrorpanel .cp-mirrorpanel").classList.remove("hide-panel"),this.template.querySelector("#m-cp-mirrorpanel .cp-button").classList.remove("active"))}},{key:"transformToLayers",value:function(e,t){var r=this,n=e.map((function(e){var n=null;if(e instanceof Object){if(e instanceof Object){var i=t.getLayers().filter((function(t){return e.name.includes(t.name)}))[0];n=r.isValidLayer(i)?i:null}}else if(e.indexOf("*")>=0){var o=e.split("*");"WMS"===o[0].toUpperCase()?(n=new IDEE.layer.WMS({url:o[2],name:o[3],legend:o[1],useCapabilities:"true"===o[4]||!1}),t.getLayers().filter((function(e){return n.name.includes(e.name)})).length>0&&((n=t.getLayers().filter((function(e){return n.name.includes(e.name)}))[0]).legend=o[1]||n.name)):"WMTS"===o[0].toUpperCase()&&(n=new IDEE.layer.WMTS({url:o[2],name:o[3],legend:o[1],matrixSet:o[4],transparent:!0,displayInLayerSwitcher:!1,queryable:!1,visibility:!1,format:o[5],useCapabilities:"true"===o[6]||!1}))}else{var a=t.getLayers().filter((function(t){return e.includes(t.name)}))[0];n=r.isValidLayer(a)?a:null}if(null!==n)return null===n.getImpl().getLayer()?setTimeout((function(){"WMS"===n.type||"WMTS"===n.type?n.load=!0:"WMTS"===n.facadeLayer_.type&&(n.facadeLayer_.load=!0)}),1e3):n.load=!0,n.displayInLayerSwitcher=!1,n.setVisible(!1),n.setZIndex(r.lyrsMirrorMinZindex),n;r.layers.remove(e)}),this);return void 0===n[0]?[]:n}},{key:"loadCoverPNOALyr",value:function(){var e=new IDEE.style.Polygon({fill:{color:"green",opacity:0}}),t={name:"coverpnoa",url:this.urlCover};this.lyrCoverture=new IDEE.layer.GeoJSON(t,{displayInLayerSwitcher:!1}),this.lyrCoverture.displayInLayerSwitcher=!1,this.lyrCoverture.setVisible(!0),this.lyrCoverture.setStyle(e)}},{key:"onMoveEnd",value:function(e){this.map.getMapImpl().on("moveend",(function(t){return e(t)}))}},{key:"getCobertura",value:function(e){var t=this.map.getMapImpl(),r=t.getPixelFromCoordinate(t.getView().getCenter()),n=[];t.forEachFeatureAtPixel(r,(function(e,t){void 0!==e.get("layerkey")&&n.push(e.get("layerkey"))})),this.mirrorpanel.manageLyrAvailable(n),this.lyrcompare.manageLyrAvailable(n),this.transparency.manageLyrAvailable(n)}},{key:"deactivate",value:function(){var e=this;this.plugins.forEach((function(t,r){t.deactivate(),document.querySelector(".m-plugin-comparepanel").parentElement.append(e.panels[r])})),this.map.removePlugins(this.plugins)}},{key:"equals",value:function(t){return t instanceof e}}],n&&pt(r.prototype,n),o&&pt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,St(n.key),n)}}function St(e){var t=function(e,t){if("object"!=bt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bt(t)?t:t+""}function Lt(e,t,r){return t=_t(t),function(e,t){if(t&&("object"==bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Et()?Reflect.construct(t,r||[],_t(e).constructor):t.apply(e,r))}function Et(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Et=function(){return!!e})()}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}var Ct=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Lt(this,e)).name_="comparepanel",t.map_=null,t.controls_=[],t.className="m-plugin-comparepanel";t.COMP_PLUGIN_NAMES={none:"default",mirror:"mirrorpanel",curtain:"lyrcompare",timeline:"timeline",spyeye:"transparency"},t.position=["TR","TL","BL","BR"].includes(r.position)?r.position:"TR",t.collapsed=r.collapsed,void 0===t.collapsed&&(t.collapsed=!0),t.collapsible=r.collapsible,void 0===t.collapsible&&(t.collapsible=!0),t.vertical=r.vertical,void 0===t.vertical&&(t.vertical=!0),void 0!==r&&(IDEE.utils.isString(r.baseLayers)?t.baseLayers=JSON.parse(r.baseLayers.replace(/!!/g,"[").replace(/¡¡/g,"]")):IDEE.utils.isArray(r.baseLayers)?t.baseLayers=r.baseLayers:IDEE.dialog.error(s("baseLayers_error")));return t.defaultCompareMode=["mirror","curtain","spyeye","timeline","none"].includes(r.defaultCompareMode)?r.defaultCompareMode:"mirror",t.defaultCompareViz=r.defaultCompareViz||0,t.layerName_=r.layerName||"attributions",t.layerCobertura_=r.layerCobertura,t.urlCoberturas_=r.urlcoberturas||"",t.lyrsMirrorMinZindex=r.lyrsMirrorMinZindex,void 0===t.lyrsMirrorMinZindex&&(t.lyrsMirrorMinZindex=100),t.mirrorpanelParams=r.mirrorpanelParams||{},t.timelineParams=r.timelineParams||{},t.lyrcompareParams=r.lyrcompareParams||{},t.transparencyParams=r.transparencyParams||{},t.backImgLayersConfig=r.backImgLayersConfig||{},t.metadata_=C.Pu,t.tooltip_=r.tooltip||s("tooltip"),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}(e,IDEE.Plugin),t=e,n=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?o:a:IDEE.language.getTranslation(e).comparepanel}}],(r=[{key:"addTo",value:function(e){this.mirrorpanelParams.modeViz=this.mirrorpanelParams.modeViz||{},this.mirrorpanelParams.modeViz="mirror"===this.defaultCompareMode?this.defaultCompareViz:0,"none"===this.defaultCompareMode&&(this.defaultCompareMode="mirror",this.defaultCompareViz=0),this.lyrcompareParams.comparisonMode=this.lyrcompareParams.comparisonMode||{},this.lyrcompareParams.comparisonMode="curtain"===this.defaultCompareMode?this.defaultCompareViz:0,this.control_=new ht({baseLayers:this.baseLayers,mirrorpanelParams:this.mirrorpanelParams,timelineParams:this.timelineParams,lyrcompareParams:this.lyrcompareParams,transparencyParams:this.transparencyParams,defaultComparisonMode:this.COMP_PLUGIN_NAMES[this.defaultCompareMode],defaultComparisonViz:this.defaultCompareViz,position:this.position,urlCover:this.urlCoberturas_,lyrsMirrorMinZindex:this.lyrsMirrorMinZindex,map:e}),this.controls_.push(this.control_),this.map_=e,this.panel_=new IDEE.ui.Panel("panelComparepanel",{position:IDEE.ui.position[this.position],collapsible:this.collapsible,collapsed:this.collapsed,className:this.className,collapsedButtonClass:"cp-icon-comparepanel",tooltip:this.tooltip_}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_),this.panel_._element.classList.add(this.vertical?"orientation-vertical":"orientation-horizontal")}},{key:"destroy",value:function(){this.control_.deactivate(),this.map_.removeControls([this.control_]);var e=[null,null,null,null,null,null,null,null,null];this.control_=e[0],this.panel_=e[1],this.map_=e[2],this.baseLayers=e[3],this.vertical=e[4],this.mirrorpanelParams=e[5],this.lyrcompareParams=e[6],this.timelineParams=e[7],this.transparencyParams=e[8]}},{key:"name",get:function(){return this.name_}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"getAPIRest",value:function(){var e=JSON.stringify(this.baseLayers).replace(/\[/g,"!!").replace(/\]/g,"¡¡");return"".concat(this.name,"=").concat(this.position,"*!").concat(this.vertical,"*!").concat(e)}},{key:"activate",value:function(){this.control_.activate()}},{key:"deactivate",value:function(){this.control_.deactivate()}},{key:"equals",value:function(t){return t instanceof e}}])&&gt(t.prototype,r),n&&gt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),Dt=r(362),Pt=r.n(Dt),Ot=r(541),Mt=r.n(Ot);window.IDEE.plugin||(window.IDEE.plugin={}),window.IDEE.control||(window.IDEE.control={}),window.IDEE.impl||(window.IDEE.impl={}),window.IDEE.impl.control||(window.IDEE.impl.control={}),window.IDEE.plugin.Comparepanel=Ct,window.IDEE.control.ComparepanelControl=ht,window.IDEE.plugin.LyrCompare=Fe,window.IDEE.control.LyrCompareControl=Ae,window.IDEE.plugin.Mirrorpanel=ee,window.IDEE.control.CompareMirrorpanel=U,window.IDEE.plugin.Timeline=Se,window.IDEE.control.TimelineControl=ye,window.IDEE.plugin.Transparency=ct,window.IDEE.control.TransparencyControl=tt,window.IDEE.plugin.Lyrdropdown=k,window.IDEE.control.LyrdropdownControl=w,window.IDEE.impl.control.ComparepanelControl=t(),window.IDEE.impl.control.Lyrcomparecontrol=Ee(),window.IDEE.impl.control.LyrcompareInteraction=Pt(),window.IDEE.impl.control.CompareMirrorpanel=u(),window.IDEE.impl.control.TimelineControl=re(),window.IDEE.impl.control.TransparencyControl=Ke(),window.IDEE.impl.control.TransparentInteraction=Mt(),window.IDEE.impl.control.LyrdropdownControl=d()})()})();
//# sourceMappingURL=comparepanel-1.0.0.cesium.min.js.map