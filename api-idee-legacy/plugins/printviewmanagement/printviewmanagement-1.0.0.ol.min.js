!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=95)}([function(e,t,r){"use strict";var n=r(2),i=r(33),o=r(14),a=r(69),s=r(10);function l(e){return e}function u(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}t.newBlob=function(e,r){t.checkSupport("blob");try{return new Blob([e],{type:r})}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,r){var n=[],i=0,o=e.length;if(o<=r)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+r,o)))):n.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+r,o)))),i+=r;return n.join("")},stringifyByChar:function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function f(e){var r=65536,n=t.getTypeOf(e),i=!0;if("uint8array"===n?i=c.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=c.applyCanBeUsed.nodebuffer),i)for(;r>1;)try{return c.stringifyByChunk(e,n,r)}catch(e){r=Math.floor(r/2)}return c.stringifyByChar(e)}function p(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}t.applyFromCharCode=f;var h={};h.string={string:l,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return h.string.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:function(e){return u(e,o.allocBuffer(e.length))}},h.array={string:f,array:l,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},h.arraybuffer={string:function(e){return f(new Uint8Array(e))},array:function(e){return p(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:l,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},h.uint8array={string:f,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:l,nodebuffer:function(e){return o.newBufferFrom(e)}},h.nodebuffer={string:f,array:function(e){return p(e,new Array(e.length))},arraybuffer:function(e){return h.nodebuffer.uint8array(e).buffer},uint8array:function(e){return p(e,new Uint8Array(e.length))},nodebuffer:l},t.transformTo=function(e,r){if(r||(r=""),!e)return r;t.checkSupport(e);var n=t.getTypeOf(r);return h[n][e](r)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&o.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},t.delay=function(e,t,r){a((function(){e.apply(r||null,t||[])}))},t.inherits=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r},t.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r},t.prepareContent=function(e,r,o,a,l){return s.Promise.resolve(r).then((function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,r){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){r(e.target.error)},n.readAsArrayBuffer(e)})):e})).then((function(r){var c,f=t.getTypeOf(r);return f?("arraybuffer"===f?r=t.transformTo("uint8array",r):"string"===f&&(l?r=i.decode(r):o&&!0!==a&&(r=u(c=r,n.uint8array?new Uint8Array(c.length):new Array(c.length)))),r):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},function(e,t,r){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},e.exports=n},function(e,t,r){"use strict";(function(e){if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer=void 0!==e,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var n=new ArrayBuffer(0);try{t.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(n),t.blob=0===i.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!r(26).Readable}catch(e){t.nodestream=!1}}).call(this,r(8).Buffer)},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(e[n]=r[n])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,a;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)o=e[t],a.set(o,i),i+=o.length;return a}},a={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,a))},t.setTyped(n)},function(e,t,r){"use strict";var n=r(12),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=f;var o=Object.create(r(9));o.inherits=r(7);var a=r(27),s=r(21);o.inherits(f,a);for(var l=i(s.prototype),u=0;u<l.length;u++){var c=l[u];f.prototype[c]||(f.prototype[c]=s.prototype[c])}function f(e){if(!(this instanceof f))return new f(e);a.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),f.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t,r){"use strict";for(var n=r(0),i=r(2),o=r(14),a=r(1),s=new Array(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function c(){a.call(this,"utf-8 encode")}t.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,r,n,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),a=0,o=0;a<l;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t}(e)},t.utf8decode=function(e){return i.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,r,i,o,a=e.length,l=new Array(2*a);for(r=0,t=0;t<a;)if((i=e[t++])<128)l[r++]=i;else if((o=s[i])>4)l[r++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&t<a;)i=i<<6|63&e[t++],o--;o>1?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),n.applyFromCharCode(l)}(e=n.transformTo(i.uint8array?"uint8array":"array",e))},n.inherits(u,a),u.prototype.processChunk=function(e){var r=n.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=r;(r=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),r.set(o,this.leftOver.length)}else r=this.leftOver.concat(r);this.leftOver=null}var a=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+s[e[r]]>t?r:t}(r),l=r;a!==r.length&&(i.uint8array?(l=r.subarray(0,a),this.leftOver=r.subarray(a,r.length)):(l=r.slice(0,a),this.leftOver=r.slice(a,r.length))),this.push({data:t.utf8decode(l),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=u,n.inherits(c,a),c.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=c},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(56),i=r(57),o=r(25);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=p(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,r),i=(e=s(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r=0|h(t.length);return 0===(e=s(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):p(e,t);if("Buffer"===t.type&&o(t.data))return p(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(c(t),e=s(e,t<0?0:0|h(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function p(e,t){var r=t.length<0?0:0|h(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function d(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(n)return U(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return M(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return O(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var f=!0,p=0;p<l;p++)if(u(e,o+p)!==u(t,p)){f=!1;break}if(f)return o}return-1}function b(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function _(e,t,r,n){return G(U(t,e.length-r),e,r,n)}function w(e,t,r,n){return G(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return w(e,t,r,n)}function S(e,t,r,n){return G(F(t),e,r,n)}function E(e,t,r,n){return G(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function O(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function M(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,l,u=e[i],c=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=r)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return u(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return function(e,t,r,n){return c(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},l.allocUnsafe=function(e){return f(null,e)},l.allocUnsafeSlow=function(e){return f(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},l.byteLength=d,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,n,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(n,i),c=e.slice(t,r),f=0;f<s;++f)if(u[f]!==c[f]){o=u[f],a=c[f];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function T(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=z(e[o]);return i}function P(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,r,n,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function j(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function N(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(e,t,r,n,o){return o||N(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,o){return o||N(e,0,r,8),i.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;r=new l(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||A(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||A(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);A(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);A(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return R(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return R(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=l.isBuffer(e)?e:U(new l(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function F(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(3))},function(e,t,r){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(8).Buffer.isBuffer},function(e,t,r){"use strict";var n=null;n="undefined"!=typeof Promise?Promise:r(70),e.exports={Promise:n}},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,u=[],c=!1,f=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&h())}function h(){if(!c){var e=s(p);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||c||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}}:e.exports=t}).call(this,r(11))},function(e,t,r){var n=r(8),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t){e.exports={isNode:void 0!==t,newBufferFrom:function(e,r){if(t.from&&t.from!==Uint8Array.from)return t.from(e,r);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,r)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var r=new t(e);return r.fill(0),r},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}}).call(this,r(8).Buffer)},function(e){e.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create PrintViewManagementControl.","impl_printermap":"The implementation used cannot create PrinterMapControl.","no_controls":"The PrintViewManagement plugin needs to activate at least one control.","encode":"The implementation used cannot use encodeLayer.","error":"An error has occurred while printing.","imageError":"The download could not be completed at this time. Please try again later.","error_layers":"The following layers will not be displayed when printing the map: ","teselaError":"The request has caused an error in printing. < br / > Please try again.","printError":"Printing has failed.","encode_method":"The used implementation does not have the encodeLayer method","tile":"The request for some tile has caused a printing error. <br/>Please try again.","support":"MBTiles and MBTilesVector layers are not supported","error_download_image":"The download could not be completed at this time."},"textHelp":{"help1":"The print extension allows you to export both maps from templates and georeferenced images.","help2":"The extension is customizable, so it can change from one viewer to another.","help3":"Using the print map control, you can download a map based on a selected template, a DPI (Dots per inch, the printing resolution), and a format. It also allows you to add a title and a description.","help4":"To obtain the map, you will have to click on the download button, which will cause the document to be generated and appear available for download.","help5":"The map is currently downloaded to EPSG:3857 (WGS84 / Pseudomercator).","help6":"Through the georeferenced image download control through the view, a georeferenced image can be obtained next to the georeference file.","help7":"The available options are: add a title to the file, select the format, obtain the georeferencing file, select the DPI (in case of using download through services) and select the type of download.","help8":"The download by view takes a snapshot of the viewer map, obtaining the layers loaded at that moment and the state of the map. The coordinate system of the download will be the coordinate system and/or projection of the map in that moment.","help9":"The download of layers loaded by services makes a call to the services themselves creating an image of their set. The coordinate system will be WGS84 / Pseudomercator (EPSG:3857).","help10":"The download control of georeferenced images by list allows you to download different WMS services with different coordinate systems and projections, indicated when building the extension.","help11":"The extension of the image of the display state at that moment is obtained, and a request is made to the service with the assigned projection","help12":"The information relevant to the extension and its possible parameterization is documented in","help13":"The example of using its parameters can be checked in"},"tooltip":"Map printing","map_printing":"Map printing","nextView":"Next view","previousView":"Previous view","service_epsg":"Service EPSG","georeferenced_img":"Georeferenced image","format":"Format","errorProjectionCapabilities":"The selected projection is not available for this base layer. Please choose another projection.","printInfor":"Print generated by Mapea","generating":"Generating georeferenced image","referenced":"Georeferenced image","projection":"Projection","downImg":"Download Image","downMap":"Download Map","delete":"Delete","down":"Download","title":"Title","notitle":"(No title)","cancel":"Cancel","accept":"Accept","download_modal":"The use of the information of the geographic data products and services defined in the <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"https://www.boe.es/boe/dias/2015/12/26/pdfs/BOE-A-2015-14129.pdf\\">Order FOM/2807/2015</a>, as well as its derivatives, entails the acceptance by the user of the general conditions of said order, specified in the following <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"http://www.ign.es/resources/licencia/Condiciones_licenciaUso_IGN.pdf\\">license of use</a>, compatible with CC-BY 4.0.","use_license":"License of use","map":"Map","pnoa":"Image (PNOA)","screen":"Screen Image","fixeddescription":"This document has no legal validity","description":"Description","layout":"Layout","credits":"Print generated through api-core","base":"Base Cartography","zone":"zone","georefimageWld":"Georeferencing file (WLD)","typeDownload":"Select the type of download:","typeClient":"Screen view download","typeServer":"Downloading layers loaded by services","selectLayer":"Select the layer to download","clipBoard":"Copy to clipboard","layer_wms":"WMS returns a map in image format from a set of raster or vector layers. Allowing customization of layers through styles.","layer_wmts":" WMTS (Web Map Tile Service) es un estándar OGC para servir información geográfica en forma de tiles pregenerados a unas resoluciones específicas.","layer_tms":"TMS (Tile Map Service) layers are geographic information services in the form of tiles very similar to XYZ layers.","layer_xyz":"Las capas XYZ son servicios de información geográfica en forma de tiles. Cada tile representa una combinación de tres parámetros.","layer_raster":"Layers raster:","layer_vector":"Layers vector:","layer_geojson":"Despite not being an OGC standard (it is on its way to becoming one), it is a very widespread geographic information exchange format that, like WFS, allows all the elements to be on the client.","layers_wfs":"(Web Feature Service) is an OGC standard for the download and transfer of geographic information, where the geographic elements or features are transmitted in their entirety to the client.","layers_kml":"(Keyhole Markup Language). KML is an XML-based markup language for representing geographic data in three dimensions.","layer_OGCAPIFeatures":"(OGC API - FEATURES) is an OGC standard that provides the ability to create, modify, and query spatial data on the Web and specifies requirements and recommendations for APIs that want to follow a standard way of sharing feature data.","tooltip_georefimageepsg":"EPSG code of the georeferenced image","title_map":"Map download","title_view":"View georeferenced image download","title_list":"Download georeferenced image from list","available_sources":"Available sources","maintain_view":"Maintain print view with DPI = 120"}')},function(e){e.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles PrintViewManagementControl.","impl_printermap":"La implementación usada no puede crear controles PrinterMapControl.","no_controls":"El plugin PrintViewManagement necesita activar al menos un control.","encode":"La implementación usada no posee el método encodeLayer.","error":"Se ha producido un error en la impresión.","imageError":"No ha podido realizarse la descarga en este momento. Por favor, inténtelo más tarde.","error_layers":"Las siguientes capas no se visualizarán al imprimir el mapa: ","teselaError":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","printError":"Se ha producido un error en la impresión.","encode_method":"La implementación usada no posee el método encodeLayer","tile":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","support":"Las capas MBTiles y MBTilesVector no están soportadas.","error_download_image":"No ha podido realizarse la descarga."},"textHelp":{"help1":"La extensión de imprimir permite exportar tanto mapas a partir de plantillas como imágenes georreferenciadas.","help2":"La extensión es personalizable, por lon que puede cambiar de un visualizador a otro.","help3":"Mediante el control imprimir mapa, se puede descargar un mapa a partir de una plantilla seleccionada, unos DPI (Dots per inch, la resolución de impresión), y un formato.  Además permite añadir un título y una descripción.","help4":"Para obtener el mapa, habrá que hacer click sobre el botón de descargar, lo que hará que se genere el documento y aparezca disponible para su descargar.","help5":"Actualmente, el mapa se descarga en el EPSG:3857  (WGS84 / Pseudomercator).","help6":"A través del control de descarga de imagen georreferenciada a través de la vista, se puede obtener una imagen georreferenciada junto al archivo de georreferenciación.","help7":"Las opciones disponibles son: añadir un título al archivo, seleccionar el formato, obtener el fichero de georreferenciación, seleccionar los DPI (en caso de utilizar la descarga a través de servicios) y seleccionar el tipo de descarga.","help8":"La descarga por vista, hace una captura del mapa del visualizador, obteniendo las capas cargadas en ese momento y el estado del mapa. El sistema de coordenadas de la descarga será el sistema de coordenadas y/o proyección del mapa en ese momento.","help9":"La descarga de capas cargadas por servicios, hace una llamada a los propios servicios creando una imagen de su conjunto. El sistema de coordenadas será WGS84 / Pseudomercator (EPSG:3857).","help10":"El control de descarga de imágenes georreferenciadas por lista, permite descargar distintos servicios WMS con distintos sistemas de coordenadas y proyecciones, indicados a la hora de construir la extensión.","help11":"Se obtiene la extensión de la imagen del estado del visualizador en ese momento, y se realiza una petición al servicio con la proyección asignada","help12":"La información relevante a la extensión y su posible parametrización está documentada en","help13":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Impresión del mapa","map_printing":"Impresión del mapa","nextView":"Vista siguiente","previousView":"Vista anterior","service_epsg":"Servicios EPSG","georeferenced_img":"Imagen georreferenciada","format":"Formato","errorProjectionCapabilities":"La proyeccion seleccionada no está disponible para esta capa base. Por favor elija otra proyección.","printInfo":"Impresión generada a través de Mapea","generating":"Generando imagen georreferenciada","referenced":"Imagen georreferenciada","projection":"Proyección","downImg":"Descargar Imagen","downMap":"Descargar Mapa","delete":"Borrar","down":"Descargar","title":"Título","notitle":"(Sin título)","cancel":"Cancelar","accept":"Aceptar","download_modal":"El uso de la información de los productos y servicios de datos geográficos definidos en la <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"https://www.boe.es/boe/dias/2015/12/26/pdfs/BOE-A-2015-14129.pdf\\">Orden FOM/2807/2015</a>, así como sus derivados, conlleva la aceptación por el usuario de las condiciones generales de dicha orden, concretada en la siguiente <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"http://www.ign.es/resources/licencia/Condiciones_licenciaUso_IGN.pdf\\">licencia de uso</a>, compatible con CC-BY 4.0.","use_license":"Licencia de uso","map":"Mapa","pnoa":"Imagen (PNOA)","screen":"Imagen Pantalla","fixeddescription":"Este documento no tiene validez legal","description":"Descripción","layout":"Plantilla","credits":"Print generated through api-core","base":"Cartografía base","zone":"huso","georefimageWld":"Fichero de georreferenciación (WLD)","typeDownload":"Selecciona el tipo de descarga:","typeClient":"Descarga de la vista en pantalla","typeServer":"Descarga de capas cargadas por servicios","selectLayer":"Selecciona la capa a descargar","clipBoard":"Copiar al portapapeles","layer_wms":"WMS devuelve un mapa en formato imagen de un conjunto capas ráster o vectoriales. Permitiendo las personalización de las capas mediante estilos. ","layer_wmts":" WMTS (Web Map Tile Service) es un estándar OGC para servir información geográfica en forma de tiles pregenerados a unas resoluciones específicas.","layer_tms":"Las capas TMS (Tile Map Service) son servicios de información geográfica en forma de tiles muy similares a las capas XYZ.","layer_xyz":"Las capas XYZ son servicios de información geográfica en forma de tiles. Cada tile representa una combinación de tres parámetros.","layer_raster":"Capas ráster:","layer_vector":"Capas vectoriales:","layer_geojson":"Pese a no ser un estándar OGC (está camino de convertirse en ello), es un formato de intercambio de información geográfica muy extendido que, al igual que WFS, permite tener todos los elementos en el cliente.","layer_wfs":"(Web Feature Service) es un estándar OGC para la descarga y transferencia de información geográfica, donde los elementos geográficos o features se transmiten en su totalidad al cliente.","layer_kml":"(Keyhole Markup Language). KML es un lenguaje de marcado basado en XML para representar datos geográficos en tres dimensiones.","layer_OGCAPIFeatures":"(OGC API - FEATURES) es un estándar OGC que ofrece la capacidad de crear, modificar y consultar datos espaciales en la Web y especifica requisitos y recomendaciones para las API que desean seguir una forma estándar de compartir datos de entidades.","tooltip_georefimageepsg":"Georreferenciar imagen predefinida","title_map":"Descarga de mapa","title_view":"Descarga de imagen georreferenciada de la vista","title_list":"Descarga de imagen georreferenciada a partir de listado","available_sources":"Fuentes disponibles","maintain_view":"Se mantiene la vista de impresión con DPI = 120"}')},function(e,t,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}n.prototype=r(55),n.prototype.loadAsync=r(88),n.support=r(2),n.defaults=r(35),n.version="3.2.0",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=r(10),e.exports=n},function(e,t,r){(function(r){var n,i,o;i=[],void 0===(o="function"==typeof(n=function(){"use strict";function t(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){a(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r&&r.global===r?r:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(e,r,a){var s=o.URL||o.webkitURL,l=document.createElement("a");r=r||e.name||"download",l.download=r,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):n(l.href)?t(e,r,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,r,o){if(r=r||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),r);else if(n(e))t(e,r,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){i(a)}))}}:function(e,r,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,n);var a="application/octet-stream"===e.type,s=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&s)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},u.readAsDataURL(e)}else{var c=o.URL||o.webkitURL,f=c.createObjectURL(e);i?i.location=f:location.href=f,i=null,setTimeout((function(){c.revokeObjectURL(f)}),4e4)}});o.saveAs=a.saveAs=a,e.exports=a})?n.apply(t,i):n)||(e.exports=o)}).call(this,r(3))},function(e,t,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&y(e,"error",t,r)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function f(e,t,r,n){var i,o,a,s;if(u(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),a=o[t]),void 0===a)a=o[t]=r,++e._eventsCount;else if("function"==typeof a?a=o[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=p.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function y(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var u=l.length,c=g(l,u);for(r=0;r<u;++r)o(c[r],this,t)}return!0},s.prototype.addListener=function(e,t){return f(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return f(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,o,a;if(u(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){a=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){(t=e.exports=r(27)).Stream=t,t.Readable=t,t.Writable=r(21),t.Duplex=r(5),t.Transform=r(32),t.PassThrough=r(64)},function(e,t,r){"use strict";(function(t,n,i){var o=r(12);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=v;var s,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:o.nextTick;v.WritableState=y;var u=Object.create(r(9));u.inherits=r(7);var c={deprecate:r(63)},f=r(28),p=r(13).Buffer,h=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var d,m=r(29);function g(){}function y(e,t){s=s||r(5),e=e||{};var n=t instanceof s;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,u=e.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(u||0===u)?u:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===e.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(o.nextTick(i,n),o.nextTick(E,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),E(e,t))}(e,r,n,t,i);else{var a=x(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||w(e,r),n?l(_,e,r,a,i):_(e,r,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function v(e){if(s=s||r(5),!(d.call(v,this)||this instanceof s))return new v(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function b(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function _(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),E(e,t)}function w(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var s=0,l=!0;r;)i[s]=r,r.isBuf||(l=!1),r=r.next,s+=1;i.allBuffers=l,b(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,f=r.callback;if(b(e,t,!1,t.objectMode?1:u.length,u,c,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),E(e,t)}))}function E(e,t){var r=x(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,o.nextTick(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(v,f),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===v&&(e&&e._writableState instanceof y)}})):d=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,r){var n,i=this._writableState,a=!1,s=!i.objectMode&&(n=e,p.isBuffer(n)||n instanceof h);return s&&!p.isBuffer(e)&&(e=function(e){return p.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=g),i.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),o.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),o.nextTick(n,a),i=!1),i}(this,i,e,r))&&(i.pendingcb++,a=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=p.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,s,n,i,o);return l}(this,i,s,e,t,r)),a},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||w(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,E(e,t),r&&(t.finished?o.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(11),r(30).setImmediate,r(3))},function(e,t,r){"use strict";var n=r(10),i=r(36),o=r(37),a=r(38);o=r(37);function s(e,t,r,n,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=n,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,r){return e.pipe(new a).pipe(new o("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},e.exports=s},function(e,t,r){"use strict";var n=r(0);var i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,r,n){var o=i,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,r,n){var o=i,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},function(e,t,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){e.exports=r(58)},function(e,t,r){"use strict";(function(t,n){var i=r(12);e.exports=b;var o,a=r(25);b.ReadableState=v;r(19).EventEmitter;var s=function(e,t){return e.listeners(t).length},l=r(28),u=r(13).Buffer,c=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var f=Object.create(r(9));f.inherits=r(7);var p=r(59),h=void 0;h=p&&p.debuglog?p.debuglog("stream"):function(){};var d,m=r(60),g=r(29);f.inherits(b,l);var y=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var n=t instanceof(o=o||r(5));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,a=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=r(31).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function b(e){if(o=o||r(5),!(this instanceof b))return new b(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function _(e,t,r,n,i){var o,a=e._readableState;null===t?(a.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,S(e)}(e,a)):(i||(o=function(e,t){var r;n=t,u.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(a,t)),o?e.emit("error",o):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),n?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?w(e,a,t,!1):O(e,a)):w(e,a,t,!1))):n||(a.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function w(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&S(e)),O(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=u.from(e,t),t=""),r=!0),_(this,e,t,!1,r)},b.prototype.unshift=function(e){return _(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return d||(d=r(31).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=e,this};function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(E,e):E(e))}function E(e){h("emit readable"),e.emit("readable"),C(e)}function O(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(M,e,t))}function M(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function k(e){h("readable nexttick read 0"),e.read(0)}function T(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=u.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(A,t,e))}function A(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):S(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&I(this),null;var n,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",i=!0),t.ended||t.reading?h("reading or ended",i=!1):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(r,t))),null===(n=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&I(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,h("pipe count=%d opts=%j",o.pipesCount,t);var l=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:b;function u(t,n){h("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,h("cleanup"),e.removeListener("close",y),e.removeListener("finish",v),e.removeListener("drain",f),e.removeListener("error",g),e.removeListener("unpipe",u),r.removeListener("end",c),r.removeListener("end",b),r.removeListener("data",m),p=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||f())}function c(){h("onend"),e.end()}o.endEmitted?i.nextTick(l):r.once("end",l),e.on("unpipe",u);var f=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,C(e))}}(r);e.on("drain",f);var p=!1;var d=!1;function m(t){h("ondata"),d=!1,!1!==e.write(t)||d||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==L(o.pipes,e))&&!p&&(h("false write response, pause",o.awaitDrain),o.awaitDrain++,d=!0),r.pause())}function g(t){h("onerror",t),b(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",v),b()}function v(){h("onfinish"),e.removeListener("close",y),b()}function b(){h("unpipe"),r.unpipe(e)}return r.on("data",m),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",g),e.once("close",y),e.once("finish",v),e.emit("pipe",r),o.flowing||(h("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=L(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&S(this):i.nextTick(k,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(T,e,t))}(this,e)),this},b.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(h("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(h("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<y.length;o++)e.on(y[o],this.emit.bind(this,y[o]));return this._read=function(t){h("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=P}).call(this,r(3),r(11))},function(e,t,r){e.exports=r(19).EventEmitter},function(e,t,r){"use strict";var n=r(12);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(i,this,e)):n.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,n.nextTick(i,r,e)):n.nextTick(i,r,e):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(62),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(3))},function(e,t,r){"use strict";var n=r(13).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=f,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function c(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=a(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=a(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";e.exports=a;var n=r(5),i=Object.create(r(9));function o(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);n.call(this,e),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){l(e,t,r)})):l(this,null,null)}function l(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=r(7),i.inherits(a,n),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){"use strict";var n=r(0),i=r(2),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var t,r,i,a,s,l,u,c=[],f=0,p=e.length,h=p,d="string"!==n.getTypeOf(e);f<e.length;)h=p-f,d?(t=e[f++],r=f<p?e[f++]:0,i=f<p?e[f++]:0):(t=e.charCodeAt(f++),r=f<p?e.charCodeAt(f++):0,i=f<p?e.charCodeAt(f++):0),a=t>>2,s=(3&t)<<4|r>>4,l=h>1?(15&r)<<2|i>>6:64,u=h>2?63&i:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(u));return c.join("")},t.decode=function(e){var t,r,n,a,s,l,u=0,c=0;if("data:"===e.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var f,p=3*(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&p--,e.charAt(e.length-2)===o.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|p):new Array(0|p);u<e.length;)t=o.indexOf(e.charAt(u++))<<2|(a=o.indexOf(e.charAt(u++)))>>4,r=(15&a)<<4|(s=o.indexOf(e.charAt(u++)))>>2,n=(3&s)<<6|(l=o.indexOf(e.charAt(u++))),f[c++]=t,64!==s&&(f[c++]=r),64!==l&&(f[c++]=n);return f}},function(e,t,r){"use strict";(function(t){var n=r(0),i=r(72),o=r(1),a=r(33),s=r(2),l=r(10),u=null;if(s.nodestream)try{u=r(73)}catch(e){}function c(e,r){return new l.Promise((function(i,o){var s=[],l=e._internalType,u=e._outputType,c=e._mimeType;e.on("data",(function(e,t){s.push(e),r&&r(t)})).on("error",(function(e){s=[],o(e)})).on("end",(function(){try{var e=function(e,t,r){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),r);case"base64":return a.encode(t);default:return n.transformTo(e,t)}}(u,function(e,r){var n,i=0,o=null,a=0;for(n=0;n<r.length;n++)a+=r[n].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(o=new Uint8Array(a),n=0;n<r.length;n++)o.set(r[n],i),i+=r[n].length;return o;case"nodebuffer":return t.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}(l,s),c);i(e)}catch(e){o(e)}s=[]})).resume()}))}function f(e,t,r){var a=t;switch(t){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=t,this._mimeType=r,n.checkSupport(a),this._worker=e.pipe(new i(a)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}f.prototype={accumulate:function(e){return c(this,e)},on:function(e,t){var r=this;return"data"===e?this._worker.on(e,(function(e){t.call(r,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},e.exports=f}).call(this,r(8).Buffer)},function(e,t,r){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},function(e,t,r){"use strict";var n=r(0),i=r(1);function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}n.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},function(e,t,r){"use strict";var n=r(0),i=r(1);function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},e.exports=o},function(e,t,r){"use strict";var n=r(1),i=r(23);function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r(0).inherits(o,n),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},e.exports=o},function(e,t,r){"use strict";var n=r(1);t.STORE={magic:"\0\0",compressWorker:function(e){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},t.DEFLATE=r(76)},function(e,t,r){"use strict";e.exports=function(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+t[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,t,r,i){var o=n,a=i+r;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},function(e,t,r){"use strict";var n=r(4),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r}a[254]=a[254]=1,t.string2buf=function(e){var t,r,i,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(l),a=0,o=0;a<l;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},t.buf2string=function(e,t){var r,n,i,o,s=t||e.length,u=new Array(2*s);for(n=0,r=0;r<s;)if((i=e[r++])<128)u[n++]=i;else if((o=a[i])>4)u[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&e[r++],o--;o>1?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return l(u,n)},t.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t}},function(e,t,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,r){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\b"},function(e,t,r){"use strict";var n=r(0),i=r(2),o=r(47),a=r(90),s=r(91),l=r(49);e.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new l(n.transformTo("uint8array",e)):new o(n.transformTo("array",e)):new a(e)}},function(e,t,r){"use strict";var n=r(48);function i(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}r(0).inherits(i,n),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===r&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&r===o[1]&&n===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,r){"use strict";var n=r(0);function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readAndCheckSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},e.exports=i},function(e,t,r){"use strict";var n=r(47);function i(e){n.call(this,e)}r(0).inherits(i,n),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t){e.exports='<section class="m-container m-georefimage m-georefimage-container">\n    <h3 class="m-plugin-printviewmanagement-title-view">{{translations.nameTitle}}</h3>\n\n    <div class="m-georefimage-titleFormat">\n        <label style="display: none;" tabindex="0" for="title-georefimage" title="{{translations.title}}" aria-label="{{translations.format}}">{{translations.title}}"</label>\n        <input tabindex="0" type="text" id="m-georefimage-title" aria-label="{{translations.title}}" title="{{translations.title}}" name="title-georefimage" placeholder="{{translations.title}}">\n\n        <label style="display: none;" tabindex="0" for="format-georefimage" title="{{translations.format}}" aria-label="{{translations.format}}">Formato de Descarga</label>\n        <select tabindex="0" id="m-georefimage-format" name="format-georefimage" title="{{translations.format}}" aria-label="{{translations.format}}">\n            <option value="jpeg">JPEG</option>\n            <option value="png">PNG</option>\n        </select>\n\n    </div>\n    <div class="georefimage-jgwKeppview">\n        <div>\n            <label tabindex="0" for="m-georefimage-wld" title="{{translations.georefimageWld}}" aria-label="{{translations.georefimageWld}}">{{translations.georefimageWld}}</label>\n            <input tabindex="0" value="wld" type="checkbox" title="{{translations.georefimageWld}}" id="m-georefimage-wld" aria-label="{{translations.georefimageWld}}">\n        </div>\n\n        <div class="keepview">\n            <labe tabindex="0" for="m-georefimage-dpi" aria-label="DPI" title="DPI">DPI</labe>\n            <input type="number" aria-label="DPI" title="DPI" id="m-georefimage-dpi" min="120" max="300" value="120" placeholder="120">\n        </div>\n    </div>\n\n    <fieldset id="m-georefimage-fieldset" class="typeImagen" title="{{translations.typeDownload}}">\n        <legend tabindex="0">{{translations.typeDownload}}</legend>\n        <div class="m-georefimage-fieldsetInput">\n            <div>\n                <label tabindex="0" for="client">{{translations.typeClient}} <button id="m-georefimage-clipboard" class="printviewmanagement-icon-clipboard" title="{{translations.clipBoard}}"></button></label>\n                <input tabindex="0" name="typeDownload" value="client" type="radio" id="client" title="{{translations.typeClient}}">\n            </div>\n\n            <div>\n                <label tabindex="0" for="server">{{translations.typeServer}} <a aria-activedescendant="modal" aria-label="Servicios geoprint" title="Servicios geoprint" id="m-georefimage-listServices" href="#">(&#x2139;)</a></label>\n                <input tabindex="0" title="{{translations.typeServer}}" name="typeDownload" value="server" type="radio" id="server" checked>\n            </div>\n        </div>\n\n        <h3 tabindex="0" id="m-georefimage-projection" class="m-georefimage-projection" title="EPSG"></h3>\n    </fieldset>\n</section>'},function(e,t){e.exports='<section class="m-georefimageepsg-container">\n  <h3 class="m-plugin-printviewmanagement-title-list">{{translations.nameTitle}}</h3>\n  <label for="m-georefimageepsg-select" class="m-georefimageepsg-label">{{translations.selectLayer}}</label>\n  <select id="m-georefimageepsg-select" title="{{translations.selectLayer}}">\n    {{#each layers}}\n      <option value=\'{{name}}\'>{{legend}}</option>\n    {{/each}}\n  </select>\n</section>\n'},function(e,t){e.exports='<main class="m-container m-printermap m-printermap-container">\n    <h3 class="m-plugin-printviewmanagement-title-map">{{translations.nameTitle}}</h3>\n\n    <section class="m-printermap-titleFormat">\n        \x3c!-- Selección del título --\x3e\n        <label tabindex="0" for="m-printermap-title" role="text" aria-label="{{translations.title}}">{{translations.title}} </label>\n        <input tabindex="0" id="m-printermap-title" aria-label="{{translations.title}}" type="text" title="{{translations.title}}" placeholder="{{translations.title}}">\n\n        \x3c!-- Selección del formato --\x3e\n        <label tabindex="0" for="m-printermap-format" role="text" aria-label="{{translations.format}}">{{translations.format}} </label>\n        <select tabindex="0" role="select" id="m-printermap-format" title="{{translations.format}}">\n            {{#each format}}\n                <option value="{{name}}" {{#if default}} selected{{/if}}>{{name}}</option>\n            {{/each}}\n        </select>\n    </section>\n\n\n    \x3c!-- Selección de la descripción --\x3e\n    <label class="m-printermap-labelTextarea" tabindex="0" for="m-printermap-description" role="text" aria-label="{{translations.description}}">{{translations.description}} </label>\n    {{#if fixedDescription}}\n        <textarea class="m-printermap-textarea" id="m-printermap-description" tabindex="0" aria-label="{{translations.fixeddescription}}" disabled title="{{translations.description}}">{{translations.fixeddescription}}</textarea>\n        {{^}}\n            <textarea class="m-printermap-textarea" id="m-printermap-description" tabindex="0" aria-label="{{translations.description}}" placeholder="{{translations.description}}" title="{{translations.description}}"></textarea>\n    {{/if}}\n\n    <section class="m-printermap-params">\n        \x3c!-- Selección de layout --\x3e\n        <label class="m-printermap-paramsLabel" tabindex="0" role="text" aria-label="{{translations.layout}}">{{translations.layout}}</label>\n        <select tabindex="0" role="select" id="m-printermap-layout" title="{{translations.layout}}">\n            {{#each layouts}}\n                <option value="{{name}}" {{#if default}} selected{{/if}}>{{name}}</option>\n            {{/each}}\n        </select>\n\n        \x3c!-- Selección de DPI --\x3e\n        <div>\n            <label tabindex="0" role="text" aria-label="DPI">DPI </label>\n            <select tabindex="0" role="select" aria-label="DPI" id="m-printermap-dpi" title="DPI">\n                {{#each dpis}}\n                    <option value="{{value}}" {{#if default}} selected{{/if}}>{{value}}</option>\n                {{/each}}\n            </select>\n        </div>\n    </section>\n    <label>* {{translations.maintain_view}}</label>\n</main>'},function(e,t){e.exports='<div aria-label="Plugin View Management" role="menuitem" id="div-contenedor-printviewmanagement" class="m-control m-container m-printviewmanagement">\n     \x3c!-- Título del plugin --\x3e\n    <header role="heading" tabindex="0" id="m-printviewmanagement-title" class="m-printviewmanagement-title">{{translations.headertitle}}</header>\n    \n    \x3c!-- Contenedor de controles --\x3e\n    <section id="m-printviewmanagement-previews" class="m-printviewmanagement-previews">\n        {{#if printermap}}\n        <button tabindex="0" id="m-printviewmanagement-printermap" title="{{translations.printermap}}" class="printviewmanagement-icon-flecha-historial"></button>\n        {{/if}}\n        {{#if georefImage}}\n        <button tabindex="0" id="m-printviewmanagement-georefImage" title="{{translations.georefImage}}" class="printviewmanagement-icon-zoom-extension"></button>\n        {{/if}}\n        {{#if georefImageEpsg}}\n        <button tabindex="0" id="m-printviewmanagement-georefImageEpsg" title="{{translations.tooltipGeorefImageEpsg}}" class="printviewmanagement-georefImageEpsg"></button>\n        {{/if}}\n    </section>\n   \n     \x3c!-- Contenedor de controles --\x3e\n    <section id="m-printviewmanagement-controls" class="m-printviewmanagement-controls"></section>\n\n    \x3c!-- Botones para descargar --\x3e\n    <div class="m-georefimage-download-button" id="m-georefimage-download-button" style="display: none;">\n        <button tabindex="0" id="m-printviewmanagement-print" class="print" title="{{translations.downImg}}">{{translations.downImg}}</button>\n        <button tabindex="0" id="m-printviewmanagement-remove" class="remove" title="{{translations.delete}}">{{translations.delete}}</button>\n    </div>\n\n    \x3c!-- Listado de descargas --\x3e\n    <footer style="display: none;" class="m-printviewmanagement-queue">\n      <ul class="queue-container" id="m-georefimage-queue-container"></ul>\n    </footer>\n</div>'},function(e,t,r){e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">PRINTERVIEWMANAGEMENT <img style="vertical-align: bottom; filter: invert(100%);" src="'+r(94)+'" width="30" height="30"></h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <img src="{{urlImages}}printviewmanagement_0.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help3}}</p>\n      <p>{{translations.help4}}</p>\n      <p>{{translations.help5}}</p>\n      <img src="{{urlImages}}printviewmanagement_1.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help6}}</p>\n      <p>{{translations.help7}}</p>\n      <p>{{translations.help8}}</p>\n      <p>{{translations.help9}}</p>\n      <img src="{{urlImages}}printviewmanagement_2.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help10}}</p>\n      <p>{{translations.help11}}</p>\n      <img src="{{urlImages}}printviewmanagement_3.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help12}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/printviewmanagement" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/printviewmanagement</a></p>\n      <p>{{translations.help13}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/printviewmanagement.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/printviewmanagement.jsp?language=es</a></p>\n   </div>\n</div>\n\n'},function(e,t,r){"use strict";var n=r(6),i=r(0),o=r(1),a=r(34),s=r(35),l=r(22),u=r(74),c=r(75),f=r(14),p=r(87),h=function(e,t,r){var n,a=i.getTypeOf(t),c=i.extend(r||{},s);c.date=c.date||new Date,null!==c.compression&&(c.compression=c.compression.toUpperCase()),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(e=m(e)),c.createFolders&&(n=d(e))&&g.call(this,n,!0);var h="string"===a&&!1===c.binary&&!1===c.base64;r&&void 0!==r.binary||(c.binary=!h),(t instanceof l&&0===t.uncompressedSize||c.dir||!t||0===t.length)&&(c.base64=!1,c.binary=!0,t="",c.compression="STORE",a="string");var y=null;y=t instanceof l||t instanceof o?t:f.isNode&&f.isStream(t)?new p(e,t):i.prepareContent(e,t,c.binary,c.optimizedBinaryString,c.base64);var v=new u(e,y,c);this.files[e]=v},d=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:s.createFolders,e=m(e),this.files[e]||h.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,r,n;for(t in this.files)this.files.hasOwnProperty(t)&&(n=this.files[t],(r=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(r,n))},filter:function(e){var t=[];return this.forEach((function(r,n){e(r,n)&&t.push(n)})),t},file:function(e,t,r){if(1===arguments.length){if(y(e)){var n=e;return this.filter((function(e,t){return!t.dir&&n.test(e)}))}var i=this.files[this.root+e];return i&&!i.dir?i:null}return e=this.root+e,h.call(this,e,t,r),this},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=g.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(e){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,r={};try{if((r=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");i.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var s=r.comment||this.comment||"";t=c.generateWorker(this,r,s)}catch(e){(t=new o("error")).error(e)}return new a(t,r.type||"string",r.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};e.exports=v},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=u(e),a=n[0],s=n[1],l=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),c=0,f=s>0?a-4:a;for(r=0;r<f;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===s&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[c++]=255&t);1===s&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(c(e,a,a+16383>s?s:a+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,f=r?i-1:0,p=r?-1:1,h=e[t+f];for(f+=p,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=p,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=p,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),o-=u}return(h?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:o-1,d=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?p/l:p*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+h]=255&a,h+=d,a/=256,u-=8);e[r+h-d]|=128*m}},function(e,t,r){e.exports=i;var n=r(19).EventEmitter;function i(){n.call(this)}r(7)(i,n),i.Readable=r(20),i.Writable=r(65),i.Duplex=r(66),i.Transform=r(67),i.PassThrough=r(68),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",l));var a=!1;function s(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",l),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}},function(e,t){},function(e,t,r){"use strict";var n=r(13).Buffer,i=r(61);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);for(var t,r,i,o=n.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,r=o,i=s,t.copy(r,i),s+=a.data.length,a=a.next;return o},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i,o,a,s,l=1,u={},c=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){d(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){d(e.data)},n=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,n=function(e){var t=f.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):n=function(e){setTimeout(d,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&d(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(a+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return u[l]=i,n(l),l++},p.clearImmediate=h}function h(e){delete u[e]}function d(e){if(c)setTimeout(d,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(3),r(11))},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(3))},function(e,t,r){"use strict";e.exports=o;var n=r(32),i=Object.create(r(9));function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}i.inherits=r(7),i.inherits(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(21)},function(e,t,r){e.exports=r(5)},function(e,t,r){e.exports=r(20).Transform},function(e,t,r){e.exports=r(20).PassThrough},function(e,t,r){"use strict";(function(t){e.exports="function"==typeof t?t:function(){var e=[].slice.apply(arguments);e.splice(1,0,0),setTimeout.apply(null,e)}}).call(this,r(30).setImmediate)},function(e,t,r){"use strict";var n=r(71);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function c(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,t,r){n((function(){var n;try{n=t(r)}catch(t){return o.reject(e,t)}n===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,n)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var r=!1;function n(t){r||(r=!0,o.reject(e,t))}function i(t){r||(r=!0,o.resolve(e,t))}var a=d((function(){t(i,n)}));"error"===a.status&&n(a.value)}function d(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}e.exports=u,u.prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(i);this.state!==l?f(r,this.state===s?e:t,this.outcome):this.queue.push(new c(r,e,t));return r},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=d(p,t);if("error"===r.status)return o.reject(e,r.value);var n=r.value;if(n)h(e,n);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=function(e){if(e instanceof this)return e;return o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var a=new Array(r),s=0,l=-1,u=new this(i);for(;++l<r;)c(e[l],l);return u;function c(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==r||n||(n=!0,o.resolve(u,a))}),(function(e){n||(n=!0,o.reject(u,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var a=-1,s=new this(i);for(;++a<r;)l=e[a],t.resolve(l).then((function(e){n||(n=!0,o.resolve(s,e))}),(function(e){n||(n=!0,o.reject(s,e))}));var l;return s}},function(e,t,r){"use strict";(function(t){var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var l=new t.MessageChannel;l.port1.onmessage=c,r=function(){l.port2.postMessage(0)}}var u=[];function c(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}e.exports=function(e){1!==u.push(e)||n||r()}}).call(this,r(3))},function(e,t,r){"use strict";var n=r(1),i=r(0);function o(e){n.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,n),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},e.exports=o},function(e,t,r){"use strict";var n=r(26).Readable;function i(e,t,r){n.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),r&&r(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}r(0).inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},function(e,t,r){"use strict";var n=r(34),i=r(36),o=r(6),a=r(22),s=r(1),l=function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};l.prototype={internalStream:function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(r=e.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),t=this._decompressWorker();var a=!this._dataBinary;a&&!i&&(t=t.pipe(new o.Utf8EncodeWorker)),!a&&i&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new s("error")).error(e)}return new n(t,r,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(r,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof s?this._data:new i(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<u.length;f++)l.prototype[u[f]]=c;e.exports=l},function(e,t,r){"use strict";var n=r(39),i=r(86);t.generateWorker=function(e,t,r){var o=new i(t.streamFiles,r,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,r){a++;var i=function(e,t){var r=e||t,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,t.compression),s=r.options.compressionOptions||t.compressionOptions||{},l=r.dir,u=r.date;r._compressWorker(i,s).withStreamInfo("file",{name:e,dir:l,date:u,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(e){o.error(e)}return o}},function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=r(77),o=r(0),a=r(1),s=n?"uint8array":"array";function l(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}t.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},t.compressWorker=function(e){return new l("Deflate",e)},t.uncompressWorker=function(){return new l("Inflate",{})}},function(e,t,r){"use strict";var n={};(0,r(4).assign)(n,r(78),r(81),r(44)),e.exports=n},function(e,t,r){"use strict";var n=r(79),i=r(4),o=r(42),a=r(24),s=r(43),l=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==r)throw new Error(a[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var c;if(c="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(r=n.deflateSetDictionary(this.strm,c)))throw new Error(a[r]);this._dict_set=!0}}function c(e,t){var r=new u(t);if(r.push(e,!0),r.err)throw r.msg||a[r.err];return r.result}u.prototype.push=function(e,t){var r,a,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(u),s.next_out=0,s.avail_out=u),1!==(r=n.deflate(s,a))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==a||(this.onEnd(0),s.avail_out=0,!0)},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=u,t.deflate=c,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,c(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,c(e,t)}},function(e,t,r){"use strict";var n,i=r(4),o=r(80),a=r(40),s=r(41),l=r(24);function u(e,t){return e.msg=l[t],t}function c(e){return(e<<1)-(e>4?9:0)}function f(e){for(var t=e.length;--t>=0;)e[t]=0}function p(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function h(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,p(e.strm)}function d(e,t){e.pending_buf[e.pending++]=t}function m(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function g(e,t){var r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,u=e.window,c=e.w_mask,f=e.prev,p=e.strstart+258,h=u[o+a-1],d=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(r=t)+a]===d&&u[r+a-1]===h&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<p);if(n=258-(p-o),o=p-258,n>a){if(e.match_start=t,a=n,n>=s)break;h=u[o+a-1],d=u[o+a]}}}while((t=f[t&c])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead}function y(e){var t,r,n,o,l,u,c,f,p,h,d=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-262)){i.arraySet(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=d?n-d:0}while(--r);t=r=d;do{n=e.prev[--t],e.prev[t]=n>=d?n-d:0}while(--r);o+=d}if(0===e.strm.avail_in)break;if(u=e.strm,c=e.window,f=e.strstart+e.lookahead,p=o,h=void 0,(h=u.avail_in)>p&&(h=p),r=0===h?0:(u.avail_in-=h,i.arraySet(c,u.input,u.next_in,h,f),1===u.state.wrap?u.adler=a(u.adler,c,h,f):2===u.state.wrap&&(u.adler=s(u.adler,c,h,f)),u.next_in+=h,u.total_in+=h,h),e.lookahead+=r,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function v(e,t){for(var r,n;;){if(e.lookahead<262){if(y(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=g(e,r)),e.match_length>=3)if(n=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(h(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(h(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?1:2}function b(e,t){for(var r,n,i;;){if(e.lookahead<262){if(y(e),e.lookahead<262&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=g(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(h(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=o._tr_tally(e,0,e.window[e.strstart-1]))&&h(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(h(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?1:2}function _(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=0,o._tr_init(t),0):u(e,-2)}function S(e){var t,r=x(e);return 0===r&&((t=e.state).window_size=2*t.w_size,f(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r}function E(e,t,r,n,o,a){if(!e)return-2;var s=1;if(-1===t&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>9||8!==r||n<8||n>15||t<0||t>9||a<0||a>4)return u(e,-2);8===n&&(n=9);var l=new w;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=r,S(e)}n=[new _(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(y(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,h(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-262&&(h(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(h(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(h(e,!1),e.strm.avail_out),1)})),new _(4,4,8,4,v),new _(4,5,16,8,v),new _(4,6,32,32,v),new _(4,4,16,16,b),new _(8,16,32,32,b),new _(8,16,128,128,b),new _(8,32,128,256,b),new _(32,128,258,1024,b),new _(32,258,258,4096,b)],t.deflateInit=function(e,t){return E(e,t,8,15,8,0)},t.deflateInit2=E,t.deflateReset=S,t.deflateResetKeep=x,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=t,0):-2},t.deflate=function(e,t){var r,i,a,l;if(!e||!e.state||t>5||t<0)return e?u(e,-2):-2;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return u(e,0===e.avail_out?-5:-2);if(i.strm=e,r=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,d(i,31),d(i,139),d(i,8),i.gzhead?(d(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),d(i,255&i.gzhead.time),d(i,i.gzhead.time>>8&255),d(i,i.gzhead.time>>16&255),d(i,i.gzhead.time>>24&255),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(d(i,255&i.gzhead.extra.length),d(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(d(i,0),d(i,0),d(i,0),d(i,0),d(i,0),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,3),i.status=113);else{var g=8+(i.w_bits-8<<4)<<8;g|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(g|=32),g+=31-g%31,i.status=113,m(i,g),0!==i.strstart&&(m(i,e.adler>>>16),m(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),p(e),a=i.pending,i.pending!==i.pending_buf_size));)d(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),p(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,d(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),p(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,d(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&p(e),i.pending+2<=i.pending_buf_size&&(d(i,255&e.adler),d(i,e.adler>>8&255),e.adler=0,i.status=113)):i.status=113),0!==i.pending){if(p(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&c(t)<=c(r)&&4!==t)return u(e,-5);if(666===i.status&&0!==e.avail_in)return u(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var v=2===i.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(y(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(h(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(h(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var r,n,i,a,s=e.window;;){if(e.lookahead<=258){if(y(e),e.lookahead<=258&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=s[i=e.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=e.strstart+258;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);e.match_length=258-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(h(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(h(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?1:2}(i,t):n[i.level].func(i,t);if(3!==v&&4!==v||(i.status=666),1===v||3===v)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(f(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),p(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(d(i,255&e.adler),d(i,e.adler>>8&255),d(i,e.adler>>16&255),d(i,e.adler>>24&255),d(i,255&e.total_in),d(i,e.total_in>>8&255),d(i,e.total_in>>16&255),d(i,e.total_in>>24&255)):(m(i,e.adler>>>16),m(i,65535&e.adler)),p(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&113!==t&&666!==t?u(e,-2):(e.state=null,113===t?u(e,-3):0):-2},t.deflateSetDictionary=function(e,t){var r,n,o,s,l,u,c,p,h=t.length;if(!e||!e.state)return-2;if(2===(s=(r=e.state).wrap)||1===s&&42!==r.status||r.lookahead)return-2;for(1===s&&(e.adler=a(e.adler,t,h,0)),r.wrap=0,h>=r.w_size&&(0===s&&(f(r.head),r.strstart=0,r.block_start=0,r.insert=0),p=new i.Buf8(r.w_size),i.arraySet(p,t,h-r.w_size,r.w_size,0),t=p,h=r.w_size),l=e.avail_in,u=e.next_in,c=e.input,e.avail_in=h,e.next_in=0,e.input=t,y(r);r.lookahead>=3;){n=r.strstart,o=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=2,y(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=u,e.input=c,e.avail_in=l,r.wrap=s,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,r){"use strict";var n=r(4);function i(e){for(var t=e.length;--t>=0;)e[t]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=new Array(576);i(u);var c=new Array(60);i(c);var f=new Array(512);i(f);var p=new Array(256);i(p);var h=new Array(29);i(h);var d,m,g,y=new Array(30);function v(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function b(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function _(e){return e<256?f[e]:f[256+(e>>>7)]}function w(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function x(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,w(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function S(e,t,r){x(e,r[2*t],r[2*t+1])}function E(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function O(e,t,r){var n,i,o=new Array(16),a=0;for(n=1;n<=15;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=E(o[s]++,s))}}function M(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function k(e){e.bi_valid>8?w(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function T(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function C(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&T(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!T(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function P(e,t,r){var n,i,s,l,u=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],i=e.pending_buf[e.l_buf+u],u++,0===n?S(e,i,t):(S(e,(s=p[i])+256+1,t),0!==(l=o[s])&&x(e,i-=h[s],l),S(e,s=_(--n),r),0!==(l=a[s])&&x(e,n-=y[s],l))}while(u<e.last_lit);S(e,256,t)}function I(e,t){var r,n,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<l;r++)0!==o[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)C(e,o,r);i=l;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],C(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,C(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,d=t.stat_desc.max_length,m=0;for(o=0;o<=15;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(o=l[2*l[2*(n=e.heap[r])+1]+1]+1)>d&&(o=d,m++),l[2*n+1]=o,n>u||(e.bl_count[o]++,a=0,n>=h&&(a=p[n-h]),s=l[2*n],e.opt_len+=s*(o+a),f&&(e.static_len+=s*(c[2*n+1]+a)));if(0!==m){do{for(o=d-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[d]--,m-=2}while(m>0);for(o=d;0!==o;o--)for(n=e.bl_count[o];0!==n;)(i=e.heap[--r])>u||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),n--)}}(e,t),O(o,u,e.bl_count)}function A(e,t,r){var n,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))}function L(e,t,r){var n,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<l&&i===a)){if(s<u)do{S(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(S(e,i,e.bl_tree),s--),S(e,16,e.bl_tree),x(e,s-3,2)):s<=10?(S(e,17,e.bl_tree),x(e,s-3,3)):(S(e,18,e.bl_tree),x(e,s-11,7));s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4)}}i(y);var j=!1;function N(e,t,r,i){x(e,0+(i?1:0),3),function(e,t,r,i){k(e),i&&(w(e,r),w(e,~r)),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}t._tr_init=function(e){j||(!function(){var e,t,r,n,i,l=new Array(16);for(r=0,n=0;n<28;n++)for(h[n]=r,e=0;e<1<<o[n];e++)p[r++]=n;for(p[r-1]=n,i=0,n=0;n<16;n++)for(y[n]=i,e=0;e<1<<a[n];e++)f[i++]=n;for(i>>=7;n<30;n++)for(y[n]=i<<7,e=0;e<1<<a[n]-7;e++)f[256+i++]=n;for(t=0;t<=15;t++)l[t]=0;for(e=0;e<=143;)u[2*e+1]=8,e++,l[8]++;for(;e<=255;)u[2*e+1]=9,e++,l[9]++;for(;e<=279;)u[2*e+1]=7,e++,l[7]++;for(;e<=287;)u[2*e+1]=8,e++,l[8]++;for(O(u,287,l),e=0;e<30;e++)c[2*e+1]=5,c[2*e]=E(e,5);d=new v(u,o,257,286,15),m=new v(c,a,0,30,15),g=new v(new Array(0),s,0,19,7)}(),j=!0),e.l_desc=new b(e.dyn_ltree,d),e.d_desc=new b(e.dyn_dtree,m),e.bl_desc=new b(e.bl_tree,g),e.bi_buf=0,e.bi_valid=0,M(e)},t._tr_stored_block=N,t._tr_flush_block=function(e,t,r,n){var i,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),I(e,e.l_desc),I(e,e.d_desc),a=function(e){var t;for(A(e,e.dyn_ltree,e.l_desc.max_code),A(e,e.dyn_dtree,e.d_desc.max_code),I(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==t?N(e,t,r,n):4===e.strategy||o===i?(x(e,2+(n?1:0),3),P(e,u,c)):(x(e,4+(n?1:0),3),function(e,t,r,n){var i;for(x(e,t-257,5),x(e,r-1,5),x(e,n-4,4),i=0;i<n;i++)x(e,e.bl_tree[2*l[i]+1],3);L(e,e.dyn_ltree,t-1),L(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),P(e,e.dyn_ltree,e.dyn_dtree)),M(e),n&&k(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(p[r]+256+1)]++,e.dyn_dtree[2*_(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){x(e,2,3),S(e,256,u),function(e){16===e.bi_valid?(w(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,r){"use strict";var n=r(82),i=r(4),o=r(42),a=r(44),s=r(24),l=r(43),u=r(85),c=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=n.inflateSetDictionary(this.strm,t.dictionary))!==a.Z_OK))throw new Error(s[r])}function p(e,t){var r=new f(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}f.prototype.push=function(e,t){var r,s,l,u,f,p=this.strm,h=this.options.chunkSize,d=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?p.input=o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(h),p.next_out=0,p.avail_out=h),(r=n.inflate(p,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&d&&(r=n.inflateSetDictionary(this.strm,d)),r===a.Z_BUF_ERROR&&!0===m&&(r=a.Z_OK,m=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&r!==a.Z_STREAM_END&&(0!==p.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(p.output,p.next_out),u=p.next_out-l,f=o.buf2string(p.output,l),p.next_out=u,p.avail_out=h-u,u&&i.arraySet(p.output,p.output,l,u,0),this.onData(f)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(m=!0)}while((p.avail_in>0||0===p.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),p.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=f,t.inflate=p,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},t.ungzip=p},function(e,t,r){"use strict";var n=r(4),i=r(40),o=r(41),a=r(83),s=r(84);function l(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):-2}function f(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,c(e)):-2}function p(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?-2:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,f(e))):-2}function h(e,t){var r,n;return e?(n=new u,e.state=n,n.window=null,0!==(r=p(e,t))&&(e.state=null),r):-2}var d,m,g=!0;function y(e){if(g){var t;for(d=new n.Buf32(512),m=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(1,e.lens,0,288,d,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(2,e.lens,0,32,m,0,e.work,{bits:5}),g=!1}e.lencode=d,e.lenbits=9,e.distcode=m,e.distbits=5}function v(e,t,r,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,t,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,t,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}t.inflateReset=f,t.inflateReset2=p,t.inflateResetKeep=c,t.inflateInit=function(e){return h(e,15)},t.inflateInit2=h,t.inflate=function(e,t){var r,u,c,f,p,h,d,m,g,b,_,w,x,S,E,O,M,k,T,C,P,I,A,L,j=0,N=new n.Buf8(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return-2;12===(r=e.state).mode&&(r.mode=13),p=e.next_out,c=e.output,d=e.avail_out,f=e.next_in,u=e.input,h=e.avail_in,m=r.hold,g=r.bits,b=h,_=d,I=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;g<16;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}if(2&r.wrap&&35615===m){r.check=0,N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0),m=0,g=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&m)<<8)+(m>>8))%31){e.msg="incorrect header check",r.mode=30;break}if(8!=(15&m)){e.msg="unknown compression method",r.mode=30;break}if(g-=4,P=8+(15&(m>>>=4)),0===r.wbits)r.wbits=P;else if(P>r.wbits){e.msg="invalid window size",r.mode=30;break}r.dmax=1<<P,e.adler=r.check=1,r.mode=512&m?10:12,m=0,g=0;break;case 2:for(;g<16;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}if(r.flags=m,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=m>>8&1),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0)),m=0,g=0,r.mode=3;case 3:for(;g<32;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}r.head&&(r.head.time=m),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,N[2]=m>>>16&255,N[3]=m>>>24&255,r.check=o(r.check,N,4,0)),m=0,g=0,r.mode=4;case 4:for(;g<16;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}r.head&&(r.head.xflags=255&m,r.head.os=m>>8),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0)),m=0,g=0,r.mode=5;case 5:if(1024&r.flags){for(;g<16;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}r.length=m,r.head&&(r.head.extra_len=m),512&r.flags&&(N[0]=255&m,N[1]=m>>>8&255,r.check=o(r.check,N,2,0)),m=0,g=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((w=r.length)>h&&(w=h),w&&(r.head&&(P=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,u,f,w,P)),512&r.flags&&(r.check=o(r.check,u,w,f)),h-=w,f+=w,r.length-=w),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===h)break e;w=0;do{P=u[f+w++],r.head&&P&&r.length<65536&&(r.head.name+=String.fromCharCode(P))}while(P&&w<h);if(512&r.flags&&(r.check=o(r.check,u,w,f)),h-=w,f+=w,P)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===h)break e;w=0;do{P=u[f+w++],r.head&&P&&r.length<65536&&(r.head.comment+=String.fromCharCode(P))}while(P&&w<h);if(512&r.flags&&(r.check=o(r.check,u,w,f)),h-=w,f+=w,P)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;g<16;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}if(m!==(65535&r.check)){e.msg="header crc mismatch",r.mode=30;break}m=0,g=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=12;break;case 10:for(;g<32;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}e.adler=r.check=l(m),m=0,g=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=p,e.avail_out=d,e.next_in=f,e.avail_in=h,r.hold=m,r.bits=g,2;e.adler=r.check=1,r.mode=12;case 12:if(5===t||6===t)break e;case 13:if(r.last){m>>>=7&g,g-=7&g,r.mode=27;break}for(;g<3;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}switch(r.last=1&m,g-=1,3&(m>>>=1)){case 0:r.mode=14;break;case 1:if(y(r),r.mode=20,6===t){m>>>=2,g-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=30}m>>>=2,g-=2;break;case 14:for(m>>>=7&g,g-=7&g;g<32;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}if((65535&m)!=(m>>>16^65535)){e.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&m,m=0,g=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(w=r.length){if(w>h&&(w=h),w>d&&(w=d),0===w)break e;n.arraySet(c,u,f,w,p),h-=w,f+=w,d-=w,p+=w,r.length-=w;break}r.mode=12;break;case 17:for(;g<14;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}if(r.nlen=257+(31&m),m>>>=5,g-=5,r.ndist=1+(31&m),m>>>=5,g-=5,r.ncode=4+(15&m),m>>>=4,g-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;g<3;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}r.lens[R[r.have++]]=7&m,m>>>=3,g-=3}for(;r.have<19;)r.lens[R[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,A={bits:r.lenbits},I=s(0,r.lens,0,19,r.lencode,0,r.work,A),r.lenbits=A.bits,I){e.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;O=(j=r.lencode[m&(1<<r.lenbits)-1])>>>16&255,M=65535&j,!((E=j>>>24)<=g);){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}if(M<16)m>>>=E,g-=E,r.lens[r.have++]=M;else{if(16===M){for(L=E+2;g<L;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}if(m>>>=E,g-=E,0===r.have){e.msg="invalid bit length repeat",r.mode=30;break}P=r.lens[r.have-1],w=3+(3&m),m>>>=2,g-=2}else if(17===M){for(L=E+3;g<L;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}g-=E,P=0,w=3+(7&(m>>>=E)),m>>>=3,g-=3}else{for(L=E+7;g<L;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}g-=E,P=0,w=11+(127&(m>>>=E)),m>>>=7,g-=7}if(r.have+w>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=30;break}for(;w--;)r.lens[r.have++]=P}}if(30===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,A={bits:r.lenbits},I=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,A),r.lenbits=A.bits,I){e.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,A={bits:r.distbits},I=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,A),r.distbits=A.bits,I){e.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(h>=6&&d>=258){e.next_out=p,e.avail_out=d,e.next_in=f,e.avail_in=h,r.hold=m,r.bits=g,a(e,_),p=e.next_out,c=e.output,d=e.avail_out,f=e.next_in,u=e.input,h=e.avail_in,m=r.hold,g=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;O=(j=r.lencode[m&(1<<r.lenbits)-1])>>>16&255,M=65535&j,!((E=j>>>24)<=g);){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}if(O&&0==(240&O)){for(k=E,T=O,C=M;O=(j=r.lencode[C+((m&(1<<k+T)-1)>>k)])>>>16&255,M=65535&j,!(k+(E=j>>>24)<=g);){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}m>>>=k,g-=k,r.back+=k}if(m>>>=E,g-=E,r.back+=E,r.length=M,0===O){r.mode=26;break}if(32&O){r.back=-1,r.mode=12;break}if(64&O){e.msg="invalid literal/length code",r.mode=30;break}r.extra=15&O,r.mode=22;case 22:if(r.extra){for(L=r.extra;g<L;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}r.length+=m&(1<<r.extra)-1,m>>>=r.extra,g-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;O=(j=r.distcode[m&(1<<r.distbits)-1])>>>16&255,M=65535&j,!((E=j>>>24)<=g);){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}if(0==(240&O)){for(k=E,T=O,C=M;O=(j=r.distcode[C+((m&(1<<k+T)-1)>>k)])>>>16&255,M=65535&j,!(k+(E=j>>>24)<=g);){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}m>>>=k,g-=k,r.back+=k}if(m>>>=E,g-=E,r.back+=E,64&O){e.msg="invalid distance code",r.mode=30;break}r.offset=M,r.extra=15&O,r.mode=24;case 24:if(r.extra){for(L=r.extra;g<L;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}r.offset+=m&(1<<r.extra)-1,m>>>=r.extra,g-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===d)break e;if(w=_-d,r.offset>w){if((w=r.offset-w)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=30;break}w>r.wnext?(w-=r.wnext,x=r.wsize-w):x=r.wnext-w,w>r.length&&(w=r.length),S=r.window}else S=c,x=p-r.offset,w=r.length;w>d&&(w=d),d-=w,r.length-=w;do{c[p++]=S[x++]}while(--w);0===r.length&&(r.mode=21);break;case 26:if(0===d)break e;c[p++]=r.length,d--,r.mode=21;break;case 27:if(r.wrap){for(;g<32;){if(0===h)break e;h--,m|=u[f++]<<g,g+=8}if(_-=d,e.total_out+=_,r.total+=_,_&&(e.adler=r.check=r.flags?o(r.check,c,_,p-_):i(r.check,c,_,p-_)),_=d,(r.flags?m:l(m))!==r.check){e.msg="incorrect data check",r.mode=30;break}m=0,g=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;g<32;){if(0===h)break e;h--,m+=u[f++]<<g,g+=8}if(m!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=30;break}m=0,g=0}r.mode=29;case 29:I=1;break e;case 30:I=-3;break e;case 31:return-4;case 32:default:return-2}return e.next_out=p,e.avail_out=d,e.next_in=f,e.avail_in=h,r.hold=m,r.bits=g,(r.wsize||_!==e.avail_out&&r.mode<30&&(r.mode<27||4!==t))&&v(e,e.output,e.next_out,_-e.avail_out)?(r.mode=31,-4):(b-=e.avail_in,_-=e.avail_out,e.total_in+=b,e.total_out+=_,r.total+=_,r.wrap&&_&&(e.adler=r.check=r.flags?o(r.check,c,_,e.next_out-_):i(r.check,c,_,e.next_out-_)),e.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===b&&0===_||4===t)&&0===I&&(I=-5),I)},t.inflateEnd=function(e){if(!e||!e.state)return-2;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?-2:(r.head=t,t.done=!1,0):-2},t.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?-2:11===r.mode&&i(1,t,n,0)!==r.check?-3:v(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,0):-2},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,r){"use strict";e.exports=function(e,t){var r,n,i,o,a,s,l,u,c,f,p,h,d,m,g,y,v,b,_,w,x,S,E,O,M;r=e.state,n=e.next_in,O=e.input,i=n+(e.avail_in-5),o=e.next_out,M=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=r.dmax,u=r.wsize,c=r.whave,f=r.wnext,p=r.window,h=r.hold,d=r.bits,m=r.lencode,g=r.distcode,y=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;e:do{d<15&&(h+=O[n++]<<d,d+=8,h+=O[n++]<<d,d+=8),b=m[h&y];t:for(;;){if(h>>>=_=b>>>24,d-=_,0===(_=b>>>16&255))M[o++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=m[(65535&b)+(h&(1<<_)-1)];continue t}if(32&_){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&b,(_&=15)&&(d<_&&(h+=O[n++]<<d,d+=8),w+=h&(1<<_)-1,h>>>=_,d-=_),d<15&&(h+=O[n++]<<d,d+=8,h+=O[n++]<<d,d+=8),b=g[h&v];r:for(;;){if(h>>>=_=b>>>24,d-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=g[(65535&b)+(h&(1<<_)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(x=65535&b,d<(_&=15)&&(h+=O[n++]<<d,(d+=8)<_&&(h+=O[n++]<<d,d+=8)),(x+=h&(1<<_)-1)>l){e.msg="invalid distance too far back",r.mode=30;break e}if(h>>>=_,d-=_,x>(_=o-a)){if((_=x-_)>c&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(S=0,E=p,0===f){if(S+=u-_,_<w){w-=_;do{M[o++]=p[S++]}while(--_);S=o-x,E=M}}else if(f<_){if(S+=u+f-_,(_-=f)<w){w-=_;do{M[o++]=p[S++]}while(--_);if(S=0,f<w){w-=_=f;do{M[o++]=p[S++]}while(--_);S=o-x,E=M}}}else if(S+=f-_,_<w){w-=_;do{M[o++]=p[S++]}while(--_);S=o-x,E=M}for(;w>2;)M[o++]=E[S++],M[o++]=E[S++],M[o++]=E[S++],w-=3;w&&(M[o++]=E[S++],w>1&&(M[o++]=E[S++]))}else{S=o-x;do{M[o++]=M[S++],M[o++]=M[S++],M[o++]=M[S++],w-=3}while(w>2);w&&(M[o++]=M[S++],w>1&&(M[o++]=M[S++]))}break}}break}}while(n<i&&o<s);n-=w=d>>3,h&=(1<<(d-=w<<3))-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<s?s-o+257:257-(o-s),r.hold=h,r.bits=d}},function(e,t,r){"use strict";var n=r(4),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,l,u,c,f,p){var h,d,m,g,y,v,b,_,w,x=p.bits,S=0,E=0,O=0,M=0,k=0,T=0,C=0,P=0,I=0,A=0,L=null,j=0,N=new n.Buf16(16),R=new n.Buf16(16),D=null,B=0;for(S=0;S<=15;S++)N[S]=0;for(E=0;E<l;E++)N[t[r+E]]++;for(k=x,M=15;M>=1&&0===N[M];M--);if(k>M&&(k=M),0===M)return u[c++]=20971520,u[c++]=20971520,p.bits=1,0;for(O=1;O<M&&0===N[O];O++);for(k<O&&(k=O),P=1,S=1;S<=15;S++)if(P<<=1,(P-=N[S])<0)return-1;if(P>0&&(0===e||1!==M))return-1;for(R[1]=0,S=1;S<15;S++)R[S+1]=R[S]+N[S];for(E=0;E<l;E++)0!==t[r+E]&&(f[R[t[r+E]]++]=E);if(0===e?(L=D=f,v=19):1===e?(L=i,j-=257,D=o,B-=257,v=256):(L=a,D=s,v=-1),A=0,E=0,S=O,y=c,T=k,C=0,m=-1,g=(I=1<<k)-1,1===e&&I>852||2===e&&I>592)return 1;for(;;){b=S-C,f[E]<v?(_=0,w=f[E]):f[E]>v?(_=D[B+f[E]],w=L[j+f[E]]):(_=96,w=0),h=1<<S-C,O=d=1<<T;do{u[y+(A>>C)+(d-=h)]=b<<24|_<<16|w|0}while(0!==d);for(h=1<<S-1;A&h;)h>>=1;if(0!==h?(A&=h-1,A+=h):A=0,E++,0==--N[S]){if(S===M)break;S=t[r+f[E]]}if(S>k&&(A&g)!==m){for(0===C&&(C=k),y+=O,P=1<<(T=S-C);T+C<M&&!((P-=N[T+C])<=0);)T++,P<<=1;if(I+=1<<T,1===e&&I>852||2===e&&I>592)return 1;u[m=A&g]=k<<24|T<<16|y-c|0}}return 0!==A&&(u[y+A]=S-C<<24|64<<16|0),p.bits=k,0}},function(e,t,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(e,t,r){"use strict";var n=r(0),i=r(1),o=r(6),a=r(23),s=r(45),l=function(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n},u=function(e,t,r,i,u,c){var f,p,h=e.file,d=e.compression,m=c!==o.utf8encode,g=n.transformTo("string",c(h.name)),y=n.transformTo("string",o.utf8encode(h.name)),v=h.comment,b=n.transformTo("string",c(v)),_=n.transformTo("string",o.utf8encode(v)),w=y.length!==h.name.length,x=_.length!==v.length,S="",E="",O="",M=h.dir,k=h.date,T={crc32:0,compressedSize:0,uncompressedSize:0};t&&!r||(T.crc32=e.crc32,T.compressedSize=e.compressedSize,T.uncompressedSize=e.uncompressedSize);var C=0;t&&(C|=8),m||!w&&!x||(C|=2048);var P,I,A,L=0,j=0;M&&(L|=16),"UNIX"===u?(j=798,L|=(P=h.unixPermissions,I=M,A=P,P||(A=I?16893:33204),(65535&A)<<16)):(j=20,L|=63&(h.dosPermissions||0)),f=k.getUTCHours(),f<<=6,f|=k.getUTCMinutes(),f<<=5,f|=k.getUTCSeconds()/2,p=k.getUTCFullYear()-1980,p<<=4,p|=k.getUTCMonth()+1,p<<=5,p|=k.getUTCDate(),w&&(E=l(1,1)+l(a(g),4)+y,S+="up"+l(E.length,2)+E),x&&(O=l(1,1)+l(a(b),4)+_,S+="uc"+l(O.length,2)+O);var N="";return N+="\n\0",N+=l(C,2),N+=d.magic,N+=l(f,2),N+=l(p,2),N+=l(T.crc32,4),N+=l(T.compressedSize,4),N+=l(T.uncompressedSize,4),N+=l(g.length,2),N+=l(S.length,2),{fileRecord:s.LOCAL_FILE_HEADER+N+g+S,dirRecord:s.CENTRAL_FILE_HEADER+l(j,2)+N+l(b.length,2)+"\0\0\0\0"+l(L,4)+l(i,4)+g+S+b}},c=function(e){return s.DATA_DESCRIPTOR+l(e.crc32,4)+l(e.compressedSize,4)+l(e.uncompressedSize,4)};function f(e,t,r,n){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(f,i),f.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-n-1))/r:100}}))},f.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=u(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=u(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:c(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,i=function(e,t,r,i,o){var a=n.transformTo("string",o(i));return s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(e,2)+l(e,2)+l(t,4)+l(r,4)+l(a.length,2)+a}(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},f.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(e){var t=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch(e){}return!0},f.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},e.exports=f},function(e,t,r){"use strict";var n=r(0),i=r(1);function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(o,i),o.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},function(e,t,r){"use strict";var n=r(0),i=r(10),o=r(6),a=(n=r(0),r(89)),s=r(38),l=r(14);function u(e){return new i.Promise((function(t,r){var n=e.decompressed.getContentWorker().pipe(new s);n.on("error",(function(e){r(e)})).on("end",(function(){n.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}e.exports=function(e,t){var r=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var r=new a(t);return r.load(e),r})).then((function(e){var r=[i.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var o=0;o<n.length;o++)r.push(u(n[o]));return i.Promise.all(r)})).then((function(e){for(var n=e.shift(),i=n.files,o=0;o<i.length;o++){var a=i[o];r.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r}))}},function(e,t,r){"use strict";var n=r(46),i=r(0),o=r(45),a=r(92),s=(r(6),r(2));function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",r=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(n>0)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},function(e,t,r){"use strict";var n=r(48);function i(e){n.call(this,e)}r(0).inherits(i,n),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,r){"use strict";var n=r(49);function i(e){n.call(this,e)}r(0).inherits(i,n),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},function(e,t,r){"use strict";var n=r(46),i=r(0),o=r(22),a=r(23),s=r(6),l=r(39),u=r(2);function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index<i;)t=e.readInt(2),r=e.readInt(2),n=e.readData(r),this.extraFields[t]={id:t,length:r,value:n}},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},e.exports=c},function(e,t,r){},function(e,t){e.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMjQiIGhlaWdodD0iMTAyNCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+Cjx0aXRsZT48L3RpdGxlPgo8ZyBpZD0iaWNvbW9vbi1pZ25vcmUiPgo8L2c+CjxwYXRoIGQ9Ik0yNTYgNjRoNTEydjEyOGgtNTEydi0xMjh6TTk2MCAyNTZoLTg5NmMtMzUuMiAwLTY0IDI4LjgtNjQgNjR2MzIwYzAgMzUuMiAyOC43OTQgNjQgNjQgNjRoMTkydjI1Nmg1MTJ2LTI1NmgxOTJjMzUuMiAwIDY0LTI4LjggNjQtNjR2LTMyMGMwLTM1LjItMjguOC02NC02NC02NHpNMTI4IDQ0OGMtMzUuMzQ2IDAtNjQtMjguNjU0LTY0LTY0czI4LjY1NC02NCA2NC02NCA2NCAyOC42NTQgNjQgNjQtMjguNjUyIDY0LTY0IDY0ek03MDQgODk2aC0zODR2LTMyMGgzODR2MzIweiI+PC9wYXRoPgo8L3N2Zz4K"},function(e,t,r){"use strict";r.r(t);var n=r(15),i=r(16),o={en:n,es:i},a=function(){var e="es";return"function"==typeof M.language.getLang&&(e=M.language.getLang()),e},s=function(e){return"es"===e||"en"===e?o[e]:M.language.getTranslation(e).printviewmanagement},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a(),r=s(t),n="";return M.utils.isNullOrEmpty(r)?console.warn("The translation '".concat(t,"' has not been defined.")):n=e.split(".").reduce((function(e,t){return e[t]}),r),n},u=function(e,t,r,n,i){for(var o=void 0!==i?i:[],a=0,s=t;s<r;s+=n)o[a++]=e.slice(s,s+n);return o.length=a,o},c=function(e,t){var r=e.getImpl().getOL3Layer(),n=r.getSource().getFeatures(),i=e.name,o=r.getOpacity(),a=new ol.format.GeoJSON,s=t.getBbox();s=[s.x.min,s.y.min,s.x.max,s.y.max];var l,u,c=t.getMapImpl().getView().getResolution(),f=[],p=1,h=1,d=1,m="",g={},y={};return n.forEach((function(e){var t=e.getGeometry(),r=e.get("styleUrl");M.utils.isNullOrEmpty(r)||(r=r.replace("#",""));var n=e.getStyle();if(!M.utils.isNullOrEmpty(n)){var i;try{var o=n(e,c);i=Array.isArray(o)?o[0]:o}catch(t){i=n.call(e,c)[0]}if(!M.utils.isNullOrEmpty(i)){var v,b=i.getImage(),_=b.getImageSize();M.utils.isNullOrEmpty(_)&&(_=[64,64]),v="multipolygon"===e.getGeometry().getType().toLowerCase()?"polygon":"multipoint"===e.getGeometry().getType().toLowerCase()?"point":e.getGeometry().getType().toLowerCase();var w,x=i.getStroke(),S={id:r,externalGraphic:b.getSrc(),graphicHeight:_[0],graphicWidth:_[1],graphicOpacity:b.getOpacity(),strokeWidth:x?x.getWidth():void 0,type:v},E=i.getText&&i.getText();if(M.utils.isNullOrEmpty(E)||((w={conflictResolution:"false",fontColor:M.utils.isNullOrEmpty(E.getFill())?"":M.utils.rgbToHex(M.utils.isArray(E.getFill().getColor())?"rgba(".concat(E.getFill().getColor().toString(),")"):E.getFill().getColor()),fontSize:"11px",fontFamily:"Helvetica, sans-serif",fontWeight:"bold",label:M.utils.isNullOrEmpty(E.getText())?e.get("name"):E.getText(),labelAlign:E.getTextAlign(),labelXOffset:E.getOffsetX(),labelYOffset:E.getOffsetY(),labelOutlineColor:M.utils.isNullOrEmpty(E.getStroke())?"":M.utils.rgbToHex(M.utils.isArray(E.getStroke().getColor())?"rgba(".concat(E.getStroke().getColor().toString(),")"):E.getStroke().getColor()),labelOutlineWidth:M.utils.isNullOrEmpty(E.getStroke())?"":E.getStroke().getWidth(),type:"text"}).fontColor=w.fontColor.slice(0,7),w.labelOutlineColor=w.labelOutlineColor.slice(0,7)),l="draw".concat(d),!M.utils.isNullOrEmpty(t)&&t.intersectsExtent(s)&&!M.utils.isNullOrEmpty(E)){var O=JSON.stringify(S),k=JSON.stringify(w),T=g[O],C=y[k];if(M.utils.isUndefined(T)||M.utils.isUndefined(C)){var P=[],I=0;if(!M.utils.isNullOrEmpty(t)&&t.intersectsExtent(s)&&M.utils.isUndefined(T)&&(T=h,g[O]=T,I=1,P.push(O),h+=1,d+=1),!M.utils.isNullOrEmpty(E)&&M.utils.isUndefined(C)&&(C=p,y[k]=C,P.push(k),p+=1,0===I&&(d+=1,P.push(O))),void 0===T&&(T=0),void 0===C&&(C=0),u="\"[_gx_style ='".concat(T+C,"']\""),!M.utils.isNullOrEmpty(P)){var A="".concat(u,': {"symbolizers": [').concat(P,"]}");m+=""!==m?",".concat(A):"{".concat(A,', "version": "2"')}}var L=a.writeFeatureObject(e);L.properties={name:l,_gx_style:T+C},f.push(L)}}}})),{type:"Vector",style:m=""!==m?JSON.parse(m.concat("}")):{"*":{symbolizers:[]},version:"2"},geoJson:{type:"FeatureCollection",features:f},name:i,opacity:o}},f=function(e){var t=null,r=e.getImpl().getOL3Layer(),n=e.url,i=r.getOpacity(),o=r.getSource().getParams(),a=[o.LAYERS],s=[o.STYLES];if(t={baseURL:n,opacity:i,type:"WMS",layers:a.join(",").split(","),styles:s.join(",").split(",")},e._updateNoCache){e._updateNoCache();var l=e.getNoCacheName(),u=e.getNoCacheUrl();M.utils.isNullOrEmpty(l)||M.utils.isNullOrEmpty(u)||(t.layers=[l],t.baseURL=u)}else{var c=e.getNoChacheName(),f=e.getNoChacheUrl();M.utils.isNullOrEmpty(c)||M.utils.isNullOrEmpty(f)||(t.layers=[c],t.baseURL=f)}return t.customParams={},Object.keys(o).forEach((function(e){-1!=="iswmc,transparent".indexOf(e.toLowerCase())&&(t.customParams[e]=o[e])})),t},p=function(e){var t=null,r=e,n=r.getSource().getParams(),i=[n.LAYERS],o=[n.STYLES];return(t={baseURL:r.getSource().getUrl(),opacity:r.getOpacity(),type:"WMS",layers:i.join(",").split(","),styles:o.join(",").split(",")}).customParams={IMAGEN:n.IMAGEN,transparent:!0,iswmc:!1},t},h=function(e){var t=e.getImpl().getOL3Layer(),r=t.getSource().getTileGrid(),n=e.url,i=t.getOpacity(),o=r.getExtent(),a=r.getTileSize(),s=r.getResolutions();return e.type===M.layer.type.OSM&&(n=e.url||"http://tile.openstreetmap.org/"),{opacity:i,baseURL:n,maxExtent:o,tileSize:[a,a],resolutions:s,type:"osm"}},d=function(e){var t=e.getImpl().getOL3Layer(),r=t.getSource(),n=e.url,i=e.name,o=t.getOpacity(),a=r.getRequestEncoding(),s=e.matrixSet;return e.getImpl().getCapabilities().then((function(t){var r=t.Contents.TileMatrixSet.filter((function(e){return e.Identifier===s}))[0];try{return{baseURL:n,imageFormat:e.options.imageFormat||e.options.format||"image/png",layer:i,matrices:r.TileMatrix.map((function(e,t){return{identifier:e.Identifier,matrixSize:[e.MatrixHeight,e.MatrixWidth],scaleDenominator:e.ScaleDenominator,tileSize:[e.TileWidth,e.TileHeight],topLeftCorner:e.TopLeftCorner}})),matrixSet:s,opacity:o,requestEncoding:a,style:e.getImpl().getOL3Layer().getSource().getStyle()||"default",type:"WMTS",version:"1.3.0"}}catch(e){return M.toast.error(l("errorProjectionCapabilities"),6e3),null}}))},m=function(e,t){var r=e.getFeatures(),n=e.name,i=e.getOpacity(),o=e.getImpl().getOL3Layer().getStyle(),a=t.getBbox();a=[a.x.min,a.y.min,a.x.max,a.y.max];var s,l,c=t.getMapImpl().getView().getResolution(),f=[],p=1,h=1,d=1,m="",g={},y={};return r.forEach((function(t){var r,n=t.getImpl().getOLFeature().getGeometry(),i=t.getImpl().getOLFeature().getStyleFunction();if(M.utils.isNullOrEmpty(i)?M.utils.isNullOrEmpty(o)||(r=o):r=i,r instanceof Function&&(r=r.call(r,t.getImpl().getOLFeature(),c)),r instanceof Array&&(r=r.length>1&&!M.utils.isNullOrEmpty(r[1].getImage())&&r[1].getImage().getSrc?r[1]:r[0]),!M.utils.isNullOrEmpty(r)){var v,b=r.getImage(),_=M.utils.isNullOrEmpty(b)?[0,0]:b.getImageSize()||[24,24],w=r.getText();M.utils.isNullOrEmpty(w)&&!M.utils.isNullOrEmpty(r.textPath)&&(w=r.textPath),v="multipolygon"===n.getType().toLowerCase()?"polygon":"multipoint"===n.getType().toLowerCase()?"point":n.getType().toLowerCase().indexOf("linestring")>-1?"line":n.getType().toLowerCase();var x,S=M.utils.isNullOrEmpty(b)?r.getStroke():b.getStroke&&b.getStroke(),E=M.utils.isNullOrEmpty(b)?r.getFill():b.getFill&&b.getFill(),O=null!==r.getStroke()&&void 0!==r.getStroke()?r.getStroke().getLineDash():void 0,k={type:v,fillColor:M.utils.isNullOrEmpty(E)||e.name.indexOf(" Reverse")>-1&&e.name.indexOf("Cobertura")>-1?"#000000":M.utils.rgbaToHex(E.getColor()).slice(0,7),fillOpacity:M.utils.isNullOrEmpty(E)?0:M.utils.getOpacityFromRgba(E.getColor()),strokeColor:M.utils.isNullOrEmpty(S)?"#000000":M.utils.rgbaToHex(S.getColor()),strokeOpacity:M.utils.isNullOrEmpty(S)?0:M.utils.getOpacityFromRgba(S.getColor()),strokeWidth:M.utils.isNullOrEmpty(S)?0:S.getWidth&&S.getWidth(),pointRadius:M.utils.isNullOrEmpty(b)?"":b.getRadius&&b.getRadius(),externalGraphic:M.utils.isNullOrEmpty(b)?"":b.getSrc&&b.getSrc(),graphicHeight:_[0],graphicWidth:_[1],strokeLinecap:"round"};if("coordinateresult"===e.name&&(k.fillOpacity=1,k.strokeOpacity=1,k.fillColor="#ffffff",k.strokeColor="#ff0000",k.strokeWidth=2),"infocoordinatesLayerFeatures"===e.name&&(k.fillColor="#ffffff",k.fillOpacity=1,k.strokeWidth=1,k.strokeColor="#2690e7",k.strokeOpacity=1,k.graphicName="cross",k.graphicWidth=15,k.graphicHeight=15),e.name.indexOf(" Reverse")>-1&&e.name.indexOf("Cobertura")>-1&&(k.fillColor=k.strokeColor,k.fillOpacity=.5),null!=O&&O.length>0&&(1===O[0]&&2===O.length?k.strokeDashstyle="dot":10===O[0]?k.strokeDashstyle="dash":1===O[0]&&O.length>2&&(k.strokeDashstyle="dashdot")),M.utils.isNullOrEmpty(w))"infocoordinatesLayerFeatures"===e.name&&(w=!0,x={type:"text",conflictResolution:"false",fontFamily:"Helvetica, sans-serif",fontStyle:"normal",fontColor:"#ffffff",fontSize:"12px",label:"".concat(t.getId()),labelAlign:"lb",labelXOffset:"4",labelYOffset:"3",haloColor:"#2690e7",haloRadius:"1",haloOpacity:"1"});else{var T=w.getTextAlign(),C=w.getTextBaseline(),P="";M.utils.isNullOrEmpty(T)||(T=T===M.style.align.LEFT?"l":T===M.style.align.RIGHT?"r":T===M.style.align.CENTER?"c":""),M.utils.isNullOrEmpty(C)||(C=C===M.style.baseline.BOTTOM?"b":C===M.style.baseline.MIDDLE?"m":C===M.style.baseline.TOP?"t":""),M.utils.isNullOrEmpty(T)||M.utils.isNullOrEmpty(C)||(P=T.concat(C));var I=w.getFont(),A=!M.utils.isNullOrEmpty(I)&&I.indexOf("bold")>-1?"bold":"normal",L="11px";if(!M.utils.isNullOrEmpty(I)){var j=I.substr(0,I.indexOf("px"));if(!M.utils.isNullOrEmpty(j)){var N=j.lastIndexOf(" ");L=N>-1?j.substr(N,j.length).trim().concat("px"):j.concat("px")}}x={type:"text",label:w.getText(),fontColor:M.utils.isNullOrEmpty(w.getFill())?"#000000":M.utils.rgbToHex(w.getFill().getColor()),fontSize:L,fontFamily:"Helvetica, sans-serif",fontStyle:"normal",fontWeight:A,conflictResolution:"false",labelXOffset:w.getOffsetX(),labelYOffset:w.getOffsetY(),fillColor:k.fillColor||"#FF0000",fillOpacity:k.fillOpacity||1,labelOutlineColor:M.utils.isNullOrEmpty(w.getStroke())?"":M.utils.rgbToHex(w.getStroke().getColor()||"#FF0000"),labelOutlineWidth:M.utils.isNullOrEmpty(w.getStroke())?"":w.getStroke().getWidth(),labelAlign:P}}s="draw".concat(p);var R=n.getExtent();if(!M.utils.isNullOrEmpty(n)&&ol.extent.intersects(a,R)||!M.utils.isNullOrEmpty(w)){var D=JSON.stringify(k),B=JSON.stringify(x),z=g[D],U=y[B];if(M.utils.isUndefined(z)||M.utils.isUndefined(U)){var F=[],G=0;if(!M.utils.isNullOrEmpty(n)&&ol.extent.intersects(a,R)&&M.utils.isUndefined(z)&&(z=d,g[D]=z,G=1,F.push(D),d+=1,p+=1),!M.utils.isNullOrEmpty(w)&&M.utils.isUndefined(U)&&(U=h,y[B]=U,F.push(B),h+=1,0===G&&(p+=1,F.push(D))),void 0===z&&(z=0),void 0===U&&(U=0),l="\"[_gx_style ='".concat(z+U,"']\""),!M.utils.isNullOrEmpty(F)){var W="".concat(l,': {"symbolizers": [').concat(F,"]}");m+=""!==m?",".concat(W):"{".concat(W,',"version":"2"')}}var q=n.getFlatCoordinates();if((q=function(e,t,r,n,i,o){for(var a=void 0!==o?o:[],s=0,l=0,c=n.length;l<c;++l){var f=n[l],p=u(t,r,f,i,a[s]);("point"===e||("line"===e||"linestring"===e)&&p.length>=2||"polygon"===e&&p.length>3)&&(a[s++]=p),r=f}return a.length=s,"line"!==e&&"linestring"!==e||1!==a.length||(a=a[0]),a}(v,q.slice(),0,n.getEnds(),2)).length>0){var H={id:t.getId(),type:"Feature",geometry:{type:n.getType(),coordinates:q}};H.properties={_gx_style:z+U,name:s},f.push(H)}}}})),{type:"Vector",style:m=""!==m?JSON.parse(m.concat("}")):{"*":{symbolizers:[]},version:"2"},geoJson:{type:"FeatureCollection",features:f},name:n,opacity:i}};function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function b(e,t,r){return t=_(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r))}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=b(this,t)).facadeMap_=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,M.impl.Control),r=t,(n=[{key:"addTo",value:function(e,t){this.facadeMap_=e,ol.control.Control.call(this,{element:t,target:null}),e.getMapImpl().addControl(this)}},{key:"getParametrizedLayers",value:function(e,t,r){var n=e.getMapImpl().getLayers().getArray().filter((function(e){return!M.utils.isNullOrEmpty(e.getSource())&&!M.utils.isNullOrEmpty(e.getSource().params_)&&void 0!==e.getSource().getParams()[t]}));return n=n.filter((function(e){return!r.some((function(t){return void 0!==t.url&&t.url===e.getSource().getUrl()}))}))}},{key:"encodeLayer",value:function(e){var t=this;return new Promise((function(r,n){e.type===M.layer.type.MVT?r(m(e,t.facadeMap_)):e.type===M.layer.type.KML&&!1!==e.getImpl().formater_.extractStyles_?r(c(e,t.facadeMap_)):e.type===M.layer.type.KML&&!1===e.getImpl().formater_.extractStyles_?r(t.encodeWFS(e)):e.type===M.layer.type.WMS?r(f(e)):e.type===M.layer.type.WFS||e.type===M.layer.type.GeoJSON?r(t.encodeWFS(e)):e.type===M.layer.type.WMTS?d(e).then((function(e){r(e)})):M.utils.isNullOrEmpty(e.type)&&e instanceof M.layer.Vector?r(t.encodeWFS(e)):void 0===e.type&&"ol-layer"===e.className_?r(p(e)):[M.layer.type.XYZ,M.layer.type.TMS,M.layer.type.OSM].indexOf(e.type)>-1?r(h(e)):r(t.encodeWFS(e))}))}},{key:"encodeWFS",value:function(e){var t=this,r=this.facadeMap_.getProjection(),n=e.getImpl().getOL3Layer(),i=n.getSource().getFeatures(),o=e.name,a=n.getOpacity(),s=n.getStyle(),l=new ol.format.GeoJSON,u=this.facadeMap_.getBbox();u=[u.x.min,u.y.min,u.x.max,u.y.max];var c,f,p=this.facadeMap_.getMapImpl().getView().getResolution(),h=[],d=1,m=1,g=1,y="",v={},b={};return i.forEach((function(e){var n,i=e.getGeometry(),o=e.getStyle();if(M.utils.isNullOrEmpty(o)?M.utils.isNullOrEmpty(s)||(n=s):n=o,n instanceof Function&&(n=n.call(n,e,p)),n instanceof Array&&(n=n.length>1&&!M.utils.isNullOrEmpty(n[1].getImage())&&n[1].getImage().getSrc?n[1]:n[0]),!M.utils.isNullOrEmpty(n)){var a,_=n.getImage(),w=M.utils.isNullOrEmpty(_)?[0,0]:_.getImageSize()||[24,24],x=n.getText();M.utils.isNullOrEmpty(x)&&!M.utils.isNullOrEmpty(n.textPath)&&(x=n.textPath),a="multipolygon"===e.getGeometry().getType().toLowerCase()?"polygon":"multipoint"===e.getGeometry().getType().toLowerCase()?"point":e.getGeometry().getType().toLowerCase().indexOf("linestring")>-1?"line":e.getGeometry().getType().toLowerCase();var S,E=M.utils.isNullOrEmpty(_)?n.getStroke():_.getStroke&&_.getStroke(),O=M.utils.isNullOrEmpty(_)?n.getFill():_.getFill&&_.getFill(),k={type:a,fillColor:M.utils.isNullOrEmpty(O)?"#000000":M.utils.rgbaToHex(O.getColor()).slice(0,7),fillOpacity:M.utils.isNullOrEmpty(O)?0:M.utils.getOpacityFromRgba(O.getColor()),strokeColor:M.utils.isNullOrEmpty(E)?"#000000":M.utils.rgbaToHex(E.getColor()),strokeOpacity:M.utils.isNullOrEmpty(E)?0:M.utils.getOpacityFromRgba(E.getColor()),strokeWidth:M.utils.isNullOrEmpty(E)?0:E.getWidth&&E.getWidth(),pointRadius:M.utils.isNullOrEmpty(_)?"":_.getRadius&&_.getRadius(),externalGraphic:M.utils.isNullOrEmpty(_)?"":_.getSrc&&_.getSrc(),graphicHeight:w[0],graphicWidth:w[1]};if(!M.utils.isNullOrEmpty(x)){var T=x.getTextAlign(),C=x.getTextBaseline(),P="";M.utils.isNullOrEmpty(T)||(T=T===M.style.align.LEFT?"l":T===M.style.align.RIGHT?"r":T===M.style.align.CENTER?"c":""),M.utils.isNullOrEmpty(C)||(C=C===M.style.baseline.BOTTOM?"b":C===M.style.baseline.MIDDLE?"m":C===M.style.baseline.TOP?"t":""),M.utils.isNullOrEmpty(T)||M.utils.isNullOrEmpty(C)||(P=T.concat(C));var I=x.getFont(),A=!M.utils.isNullOrEmpty(I)&&I.indexOf("bold")>-1?"bold":"normal",L="11px";if(!M.utils.isNullOrEmpty(I)){var j=I.substr(0,I.indexOf("px"));if(!M.utils.isNullOrEmpty(j)){var N=j.lastIndexOf(" ");L=N>-1?j.substr(N,j.length).trim().concat("px"):j.concat("px")}}S={type:"text",label:x.getText(),fontColor:M.utils.isNullOrEmpty(x.getFill())?"#000000":M.utils.rgbToHex(x.getFill().getColor()),fontSize:L,fontFamily:"Helvetica, sans-serif",fontStyle:"normal",fontWeight:A,conflictResolution:"false",labelXOffset:x.getOffsetX(),labelYOffset:x.getOffsetY(),fillColor:k.fillColor||"#FF0000",fillOpacity:k.fillOpacity||1,labelOutlineColor:M.utils.isNullOrEmpty(x.getStroke())?"":M.utils.rgbToHex(x.getStroke().getColor()||"#FF0000"),labelOutlineWidth:M.utils.isNullOrEmpty(x.getStroke())?"":x.getStroke().getWidth(),labelAlign:P}}if(c="draw".concat(d),!M.utils.isNullOrEmpty(i)&&i.intersectsExtent(u)||!M.utils.isNullOrEmpty(x)){var R,D=JSON.stringify(k),B=JSON.stringify(S),z=v[D],U=b[B];if(M.utils.isUndefined(z)||M.utils.isUndefined(U)){var F=[],G=0;if(!M.utils.isNullOrEmpty(i)&&i.intersectsExtent(u)&&M.utils.isUndefined(z)&&(z=g,v[D]=z,G=1,F.push(D),g+=1,d+=1),!M.utils.isNullOrEmpty(x)&&M.utils.isUndefined(U)&&(U=m,b[B]=U,F.push(B),m+=1,0===G&&(d+=1,F.push(D))),void 0===z&&(z=0),void 0===U&&(U=0),f="\"[_gx_style ='".concat(z+U,"']\""),!M.utils.isNullOrEmpty(F)){var W="".concat(f,': {"symbolizers": [').concat(F,"]}");y+=""!==y?",".concat(W):"{".concat(W,',"version":"2"')}}(R="EPSG:3857"!==r.code&&t.facadeMap_.getLayers().some((function(e){return e.type===M.layer.type.OSM||e.type===M.layer.type.Mapbox}))?l.writeFeatureObject(e,{featureProjection:r.code,dataProjection:"EPSG:3857"}):l.writeFeatureObject(e)).properties={_gx_style:z+U,name:c},h.push(R)}}}),this),{type:"Vector",style:y=""!==y?JSON.parse(y.concat("}")):{"*":{symbolizers:[]},version:"2"},geoJson:{type:"FeatureCollection",features:h},name:o,opacity:a}}},{key:"encodeOSM",value:function(e){var t=e.getImpl(),r=t.getOL3Layer(),n=r.getSource().getTileGrid(),i=e.url||"http://tile.openstreetmap.org/",o=e.name,a=r.getOpacity(),s=t.tiled,l=n.getExtent(),u=n.getTileSize();return{baseURL:i,opacity:a,singleTile:!s,layer:o,maxExtent:l,tileSize:[u,u],resolutions:n.getResolutions(),type:"OSM",extension:"png"}}},{key:"encodeMapbox",value:function(e){var t=e.getImpl().getOL3Layer(),r=t.getSource().getTileGrid(),n=M.utils.concatUrlPaths([M.config.MAPBOX_URL,e.name]),i=t.getOpacity(),o=r.getExtent(),a=r.getTileSize(),s=r.getResolutions(),l={};return l[M.config.MAPBOX_TOKEN_NAME]=M.config.MAPBOX_TOKEN_VALUE,{opacity:i,baseURL:n,customParams:l,maxExtent:o,tileSize:[a,a],resolutions:s,extension:M.config.MAPBOX_EXTENSION,type:"xyz",path_format:"/${z}/${x}/${y}.png"}}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&y(r.prototype,n),i&&y(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(),S=function(e,t){var r=ol.proj.get(e),n=ol.proj.get("EPSG:4326");return ol.proj.transform(t,r,n)},E=function(e,t,r){return ol.proj.transformExtent(e,t,r)},O=function(e){return e.getMapImpl().pixelToCoordinateTransform_},k=r(50),T=r.n(k),C=r(17),P=r.n(C),I=r(18);function A(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var j=/^data:image\/(png|jpeg);base64,/;function N(e){return e.querySelector("#m-georefimage-queue-container")}function R(e,t,r){var n,i,o=N(e);n=e.querySelector(".".concat("m-printviewmanagement-queue")),"none"===(i=n).style.display&&(i.style.display="block");var a,s,u=(a=t?t.value:r,(s=document.createElement("li")).innerHTML=a||l("notitle"),s.tabIndex=0,s);return A(o.childNodes).length>0?o.insertBefore(u,o.firstChild):o.appendChild(u),u.classList.add("printing"),u}function D(e){e.classList.remove("printing"),e.classList.add("finished")}function B(e,t,r){var n,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(i){var s=0,l=0,u=(e[2]-e[0])/r[0],c=(e[3]-e[1])/r[1]*-1,f=e[0]+u/2,p=e[3]+c/2;n=u.toString().concat("\n",s.toString(),"\n",l.toString(),"\n",c.toString(),"\n",f.toString(),"\n",p.toString())}else if("client"===a){var h=O(o);n=h.join("\n")}else if("server"===a){var d=((e[2]-e[0])/r[0]*(72/t)).toString(),m=(0).toString(),g=(0).toString(),y=(-(e[3]-e[1])/r[1]*(72/t)).toString(),v=(e[0]+d/2).toString(),b=(e[3]+y/2).toString();n=d.concat("\n",m,"\n",g,"\n",y,"\n",v,"\n",b)}return n}function z(e,t,r){var n=new P.a;e.forEach((function(e){var t=e.name,r=e.data,i=e.base64;n.file(t,r,{base64:i})})),n.generateAsync({type:"blob"}).then((function(e){Object(I.saveAs)(e,r.concat(t))}))}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===e||e===l("notitle")){var t=new Date;return"mapa_".concat(t.getFullYear(),"-",t.getMonth()+1,"-",t.getDay()+1,"_",t.getHours(),t.getMinutes(),t.getSeconds())}return e}function F(e,t){var r=t||"jpeg";return new Promise((function(t,n){var i=new Image;i.setAttribute("crossorigin","anonymous"),i.src=e,i.onload=function(){var e=document.createElement("canvas");e.width=i.width,e.height=i.height,e.getContext("2d").drawImage(i,0,0);var n=e.toDataURL("image/".concat(r),1);t(n.replace(j,""))},i.onerror=function(){Promise.reject(new Error(l("exception.loaderror"))),M.dialog.error(l("exception.imageError"))}}))}function G(e){return e.replace(j,"")}var W="\n    <section style='max-height: 56vh; overflow-y: auto;'>\n      <h1 style=\"text-align: center;\">".concat(l("available_sources"),"</h1>\n      <p><b>").concat(l("layer_raster"),"</b></p>\n      <ul>\n        <li><b>WMS: </b>").concat(l("layer_wms"),"</li>\n        <li><b>WMTS: </b>").concat(l("layer_wmts"),"</li>\n        <li><b>TMS: </b>").concat(l("layer_tms"),"</li>\n        <li><b>XYZ: </b>").concat(l("layer_xyz"),"</li>\n      </ul>\n      <p><b>").concat(l("layer_vector"),"</b></p>\n      <ul>\n        <li><b>GeoJSON: </b> ").concat(l("layer_geojson"),"</li>\n        <li><b>WFS: </b> ").concat(l("layer_wfs")," </li>\n        <li><b>KML: </b> ").concat(l("layer_kml"),"</li>\n        <li><b>OGCAPIFeatures: </b> ").concat(l("layer_OGCAPIFeatures"),'</li>\n      </ul>\n      <p><b>Más información:</b> <a href="https://github.com/IGN-CNIG/API-CNIG/wiki/2.1.-Capas">https://github.com/IGN-CNIG/API-CNIG/wiki/2.1.-Capas</a></p>\n    </section>\n');function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z(n.key),n)}}function Z(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q(t)?t:t+""}function Y(e,t,r){return t=V(t),function(e,t){if(t&&("object"==q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],V(e).constructor):t.apply(e,r))}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var J="#m-georefimage-title",K="#m-georefimage-dpi",Q=function(e){function t(e,r,n,i){var o,a=e.serverUrl,s=e.printTemplateUrl,u=e.printStatusUrl,c=e.printSelector,f=e.printType;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Y(this,t,[new x(r),t.NAME])).map_=r,M.utils.isUndefined(x)&&M.exception("La implementación usada no puede crear controles Georefimage"),M.utils.isUndefined(x.prototype.encodeLayer)&&M.exception("La implementación usada no posee el método encodeLayer"),o.serverUrl_=a||"https://componentes.cnig.es/geoprint",o.printTemplateUrl_=s||"https://componentes.cnig.es/geoprint/print/mapexport",o.printStatusUrl_=u||"https://componentes.cnig.es/geoprint/print/status",o.printSelector=!!c,o.printType="client"===f?"client":"server",o.elementTitle_=null,o.areaDescription_=null,o.layout_=null,o.format_=null,o.projection_=null,o.dpi_=null,o.forceScale_=null,o.params_={layout:{outputFilename:"mapa_${yyyy-MM-dd_hhmmss}"},pages:{clientLogo:"",creditos:l("printInfo")},parameters:{}},o.capabilitiesPromise_=null,o.options_={dpi:150,forceScale:!1,format:"jpg",legend:"false",layout:"A4 horizontal jpg"},o.layoutOptions_=[],o.dpisOptions_=[],o.outputFormats_=["pdf","png","jpg"],o.documentRead_=document.createElement("img"),o.canvas_=document.createElement("canvas"),o.proyectionsDefect_=["EPSG:3857"],o.statusProxy=n,o.useProxy=i,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(t,M.Control),r=t,(n=[{key:"getStatus",value:function(e,t,r){var n=this;M.proxy(this.useProxy);var i="".concat(e,"?timestamp=").concat((new Date).getTime());M.remote.get(i).then((function(i){if(404===i.code)throw new Error("Error 404");var o=i.text?JSON.parse(i.text):"error",a=o.status;"finished"===a?t(r):"error"===a||"cancelled"===a?(t(r),o.error.toLowerCase().indexOf("network is unreachable")>-1||o.error.toLowerCase().indexOf("illegalargument")>-1?M.toast.error(l("exception.teselaError"),6e3):M.toast.error(l("exception.printError"),6e3)):setTimeout((function(){return n.getStatus(e,t,r)}),1e3)})).catch((function(e){t(r),r.remove(),M.dialog.error(l("exception.error_download_image"))})),M.proxy(this.statusProxy)}},{key:"active",value:function(e){var t=this;this.html_=e;var r=this.html_.querySelector("#m-printviewmanagement-georefImage");new Promise((function(e,r){var n=M.template.compileSync(T.a,{jsonp:!0,vars:{translations:{referenced:l("referenced"),projection:l("projection"),down:l("down"),title:l("title"),georefimageWld:l("georefimageWld"),typeDownload:l("typeDownload"),typeClient:l("typeClient"),typeServer:l("typeServer"),format:l("format"),clipBoard:l("clipBoard"),nameTitle:l("title_view")}}});t.template_=n,e(n)})).then((function(e){var n=M.impl.ol.js.projections.getSupportedProjs().filter((function(e){return e.codes.includes(t.map_.getProjection().code)}))[0],i="".concat(n.datum," - ").concat(n.proj.toUpperCase()," (").concat(n.codes[0],")");t.projection_=t.map_.getProjection().code,t.projectionFormat_=i,t.selectElementHTML(e),t.defaultValueFieldset=null,t.printSelector?(t.defaultValueFieldset=t.elementFieldset_.querySelector('input[type="radio"]:checked').value,t.elementProjection_.innerText=t.projectionFormat_):(t.defaultValueFieldset=t.printType,t.removeSelector()),"client"===t.printType&&(t.template_.querySelector(K).disabled=!0),t.addEvents(),r.classList.contains("activated")?document.querySelector(".m-georefimage-container").remove():t.html_.querySelector("#m-printviewmanagement-controls").appendChild(e),r.classList.toggle("activated")}))}},{key:"removeSelector",value:function(){this.elementFieldset_.remove();var e=document.createElement("h3");e.id="m-georefimage-projection",e.classList.add("m-georefimage-projection"),e.title="EPSG",e.innerText=this.projectionFormat_,this.template_.appendChild(e)}},{key:"addEvents",value:function(){var e=this;this.elementListServices_.addEventListener("click",(function(){return M.dialog.info(W)})),this.elementFieldset_.addEventListener("change",(function(t){var r=t.target.value,n=document.querySelector(K);if("client"===r?n.setAttribute("disabled","disabled"):n.removeAttribute("disabled"),"client"===r){var i=M.impl.ol.js.projections.getSupportedProjs().filter((function(t){return t.codes.includes(e.map_.getProjection().code)}))[0];i&&(e.elementProjection_.innerText="".concat(i.datum," - ").concat(i.proj.toUpperCase()," (").concat(i.codes[0],")"))}else{var o=M.impl.ol.js.projections.getSupportedProjs().filter((function(e){return"EPSG:3857"===e.codes[0]}))[0];e.elementProjection_.innerText="".concat(o.datum," - ").concat(o.proj.toUpperCase()," (").concat(o.codes[0],")")}})),this.elementClipboard_.addEventListener("click",(function(){M.utils.copyImageClipBoard(e.map_)})),M.utils.enableTouchScroll(N(this.html_))}},{key:"selectElementHTML",value:function(e){this.elementTitle_=e.querySelector(J),this.elementFormatSelect_=e.querySelector("#m-georefimage-format"),this.elementWld_=e.querySelector("#m-georefimage-wld"),this.elementProjection_=e.querySelector("#m-georefimage-projection"),this.elementFieldset_=e.querySelector("#m-georefimage-fieldset"),this.elementListServices_=e.querySelector("#m-georefimage-listServices"),this.elementClipboard_=e.querySelector("#m-georefimage-clipboard"),this.elementCanvas_=document.querySelector(".ol-layer canvas")}},{key:"printClick",value:function(e){e.preventDefault(),"server"===(this.printSelector?this.elementFieldset_.querySelector('input[type="radio"]:checked').value:this.printType)?this.downloadServer():this.downloadClient()}},{key:"downloadServer",value:function(){var e=this;this.getPrintData().then((function(r){var n=M.utils.concatUrlPaths([e.printTemplateUrl_,"report.".concat(r.outputFormat)]),i=R(e.html_,e.elementTitle_,e.elementQueueContainer_);n=M.utils.addParameters(n,"mapeaop=geoprint"),M.proxy(e.useProxy),M.remote.post(n,r).then((function(r){var n=r;if(-1===n.text.indexOf("</error>")){var o,a=(n.text&&JSON.parse(n.text)).ref,s=M.utils.concatUrlPaths([e.printStatusUrl_,"".concat(a,".json")]);e.getStatus(s,(function(e){return D(e)}),i);try{if(n=JSON.parse(n.text),e.serverUrl_.endsWith("/geoprint")){var u=e.serverUrl_.substring(0,e.serverUrl_.lastIndexOf("/geoprint"));o=M.utils.concatUrlPaths([u,n.downloadURL])}else o=M.utils.concatUrlPaths([e.serverUrl_,n.downloadURL]);e.documentRead_.src=o}catch(e){M.exception(e)}i.setAttribute(t.DOWNLOAD_ATTR_NAME,o),i.addEventListener("click",e.downloadPrint.bind(e)),i.addEventListener("keydown",e.downloadPrint.bind(e))}else i.remove(),0===document.querySelector("#m-georefimage-queue-container").childNodes.length&&(document.querySelector(".m-printviewmanagement-queue").style.display="none"),M.dialog.error(l("exception").printError)})),M.proxy(e.statusProxy)}))}},{key:"downloadClient",value:function(){var e=this,t=document.querySelector(J),r=document.querySelector("#m-georefimage-format").value,n=R(this.html_,t,this.elementQueueContainer_);try{var i=M.utils.getImageMap(this.map_,"image/".concat(r));n.addEventListener("click",(function(t){return e.downloadPrint(t,i,"client")}))}catch(e){n.parentElement.remove(),M.toast.error("Error CrossOrigin",null,6e3)}finally{D(n)}}},{key:"getSourceAsDOM",value:function(e){var t=new XMLHttpRequest;return t.open("GET",e,!0),t.send(),(new DOMParser).parseFromString(t.responseText,"text/html")}},{key:"getCapabilities",value:function(){var e=this;return M.utils.isNullOrEmpty(this.capabilitiesPromise_)&&(this.capabilitiesPromise_=new Promise((function(t,r){var n=M.utils.concatUrlPaths([e.printTemplateUrl_,"capabilities.json"]);M.proxy(e.useProxy),M.remote.get(n).then((function(e){var r={};try{r=JSON.parse(e.text)}catch(e){M.exception(e)}t(r)})),M.proxy(e.statusProxy)}))),this.capabilitiesPromise_}},{key:"converterDecimalToDMS",value:function(e){var t,r,n=e.toString().split(".");return t="".concat(n[0],"º "),r="0.".concat(n[1]),r=(r=(r*=60).toString()).split("."),t="".concat(t).concat(r[0],"' "),r="0.".concat(r[1]),r=(r=(r*=60).toString()).split("."),t="".concat(t).concat(r[0],"'' ")}},{key:"convertBboxToDMS",value:function(e){var t=this.map_.getProjection(),r=e;if("m"===t.units){var n=[e.x.min,e.y.min],i=[e.x.max,e.y.max],o=S(t.code,n),a=S(t.code,i);r={x:{min:o[0],max:a[0]},y:{min:o[1],max:a[1]}}}return r=this.convertDecimalBoxToDMS(r)}},{key:"convertDecimalBoxToDMS",value:function(e){return{x:{min:this.converterDecimalToDMS(e.x.min),max:this.converterDecimalToDMS(e.x.max)},y:{min:this.converterDecimalToDMS(e.y.min),max:this.converterDecimalToDMS(e.y.max)}}}},{key:"getPrintData",value:function(){var e,t=this,r=document.querySelector(K);"EPSG:4326"===this.projection_||"EPSG:4258"===this.projection_?(e=this.map_.getProjection().code,this.projection_=e):e=this.projection_;var n=this.map_.getBbox(),i=this.map_.getMapImpl().getSize()[0],o=this.map_.getMapImpl().getSize()[1],a=r.value,s=this.params_.parameters,l=M.utils.extend({layout:"plain",outputFormat:"jpg",attributes:{map:{dpi:a,projection:e}}},this.params_.layout),u=this.map_;return this.encodeLayers().then((function(r){var c=r,f=[];if("EPSG:25830"===e)for(var p=0;p<c.length;p+=1){if(null!=c[p].matrixSet){var h=c[p].matrixSet.replace("GoogleMapsCompatible","EPSG:25830");c[p].matrixSet=h}f.push(c[p])}else f=r;return l.attributes.map.layers=f,l.attributes=Object.assign(l.attributes,s),l.attributes.map.projection=e,l.attributes.map.dpi=a,l.attributes.map.width=i,l.attributes.map.height=o,l.attributes.map.bbox=[n.x.min,n.y.min,n.x.max,n.y.max],u.getProjection().code!==e&&(l.attributes.map.bbox=E(l.attributes.map.bbox,t.map_.getProjection().code,e)),"EPSG:3857"!==e&&t.map_.getLayers().some((function(e){return e.type===M.layer.type.OSM}))&&(l.attributes.map.projection="EPSG:3857",l.attributes.map.bbox=E(l.attributes.map.bbox,e,"EPSG:3857")),l}))}},{key:"encodeLayers",value:function(){var e=this,t=this.map_.getZoom(),r=this.map_.getLayers().filter((function(e){return e.isVisible()&&e.inRange()&&"cluster_cover"!==e.name&&"selectLayer"!==e.name&&"empty_layer"!==e.name&&"__draw__"!==e.name&&"GenericRaster"!==e.type&&"GenericVector"!==e.type&&"MBTiles"!==e.type&&"MBTilesVector"!==e.type&&"MVT"!==e.type&&t>e.getImpl().getMinZoom()&&t<=e.getImpl().getMaxZoom()})),n=this.map_.getLayers().filter((function(e){return e.isVisible()&&e.inRange()&&"cluster_cover"!==e.name&&"selectLayer"!==e.name&&"empty_layer"!==e.name&&"__draw__"!==e.name&&("GenericRaster"===e.type||"GenericVector"===e.type||"MBTiles"===e.type||"MBTilesVector"===e.type||"MVT"===e.type)}));if(0!==n.length&&M.toast.warning(l("exception.error_layers")+n.map((function(e){return e.name})).join(", "),null,6e3),20===t){var i=!1;r.forEach((function(e){void 0!==e.url&&"https://tms-pnoa-ma.idee.es/1.0.0/pnoa-ma/{z}/{x}/{-y}.jpeg"===e.url&&(i=!0)})),i&&(r=r.filter((function(e){return"https://tms-pnoa-ma.idee.es/1.0.0/pnoa-ma/{z}/{x}/{-y}.jpeg"!==e.url})))}else if(t<20){var o=!1;r.forEach((function(e){void 0!==e.url&&void 0!==e.name&&"https://www.ign.es/wmts/pnoa-ma?"===e.url&&"OI.OrthoimageCoverage"===e.name&&(o=!0)})),o&&(r=r.filter((function(e){return"https://www.ign.es/wmts/pnoa-ma?"!==e.url&&"OI.OrthoimageCoverage"!==e.name})))}var a=[];if("EPSG:3857"===this.projection_){for(var s=0;s<r.length;s+=1){if(null!=r[s].matrixSet){var u=r[s].matrixSet.replace(r[s].matrixSet,"GoogleMapsCompatible");if(r[s].matrixSet=u,r[s].options.matrixSet){var c=r[s].options.matrixSet.replace(r[s].matrixSet,"GoogleMapsCompatible");r[s].options.matrixSet=c}}a.push(r[s])}r=a}else{for(var f=0;f<r.length;f+=1){if(null!=r[f].matrixSet){var p=r[f].matrixSet.replace(r[f].matrixSet,this.projection_.value),h=r[f].options.matrixSet.replace(r[f].matrixSet,this.projection_.value);r[f].matrixSet=p,r[f].options.matrixSet=h}a.push(r[f])}r=a}var d=r.length,m=this.getImpl().getParametrizedLayers(this.map_,"IMAGEN",r);return m.length>0&&(r=r.concat(m),d=r.length),r=r.sort((function(e,t){var r=0,n=null!==e.getZIndex()?e.getZIndex():0,i=null!==t.getZIndex()?t.getZIndex():0;return n>i?r=1:n<i&&(r=-1),r})),new Promise((function(t,n){var i=[];r.forEach((function(r,n){e.getImpl().encodeLayer(r).then((function(e){M.utils.isNullOrEmpty(e)||(i[n]=e),0==(d-=1)&&t(i.reverse())}))}))}))}},{key:"downloadPrint",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"server";if(void 0===e.key||"Enter"===e.key||" "===e.key){var n=document.querySelector("#m-georefimage-format").value,i=document.querySelector(J).value,o=document.querySelector(K),a=M.utils.isNullOrEmpty(o)?120:o.value,s=this.map_.getProjection().code,l=this.elementWld_.checked,u=t?G(t):F(this.documentRead_.src,n),c=[this.map_.getBbox().x.min,this.map_.getBbox().y.min,this.map_.getBbox().x.max,this.map_.getBbox().y.max];c=E(c,s,this.projection_);var f=U(i),p={name:f.concat(".".concat(n)),data:u,base64:!0},h=l?[{name:f.concat(".wld"),data:B(c,a,this.map_.getMapImpl().getSize(),null,this.map_,r),base64:!1},p]:[p];z(h,".zip",f)}}},{key:"turnProjIntoLegend",value:function(e){var t;switch(e){case"EPSG:4258":t="ETRS89 (4258)";break;case"EPSG:4326":t="WGS84 (4326)";break;case"EPSG:3857":t="WGS84 (3857)";break;case"EPSG:25831":t="UTM zone 31N (25831)";break;case"EPSG:25830":t="UTM zone 30N (25830)";break;case"EPSG:25829":t="UTM zone 29N (25829)";break;case"EPSG:25828":t="UTM zone 28N (25828)";break;default:t=""}return t}},{key:"equals",value:function(e){var r=!1;return e instanceof t&&(r=this.name===e.name),r}},{key:"deactive",value:function(){this.template_.remove()}},{key:"destroy",value:function(){}}])&&H(r.prototype,n),i&&H(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,te(n.key),n)}}function te(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}function re(e,t,r){return t=ne(t),function(e,t){if(t&&("object"==$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],ne(e).constructor):t.apply(e,r))}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Q.NAME="georefimagecontrol",Q.TEMPLATE="georefimage.html",Q.LOADING_CLASS="printing",Q.DOWNLOAD_ATTR_NAME="data-donwload-url-print",Q.NO_TITLE="(Sin titulo)";var oe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=re(this,t)).facadeMap_=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(t,M.impl.Control),r=t,(n=[{key:"addTo",value:function(e,t){this.facadeMap_=e,ol.control.Control.call(this,{element:t,target:null}),e.getMapImpl().addControl(this)}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&ee(r.prototype,n),i&&ee(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(),ae=r(51),se=r.n(ae);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ce(n.key),n)}}function ce(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==le(t)?t:t+""}function fe(e,t,r){return t=pe(t),function(e,t){if(t&&("object"==le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],pe(e).constructor):t.apply(e,r))}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var de=function(e){function t(e,r){var n,i=e.order,o=e.layers;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=fe(this,t,[new oe(r),"georefimage2control"])).map_=r,M.utils.isUndefined(oe)&&M.exception(l("exception.impl")),n.layers_=o||[{url:"http://www.ign.es/wms-inspire/mapa-raster?",name:"mtn_rasterizado",format:"image/jpeg",legend:"Mapa ETRS89 UTM"},{url:"http://www.ign.es/wms-inspire/pnoa-ma?",name:"OI.OrthoimageCoverage",format:"image/jpeg",legend:"Imagen (PNOA) ETRS89 UTM"}],n.layout_="A4 horizontal jpg",n.format_="jpg",n.dpi_=72,n.params_={layout:{outputFilename:"mapa_${yyyy-MM-dd_hhmmss}"},pages:{clientLogo:"",creditos:l("printInfo")},parameters:{}},n.options_={legend:"false",forceScale:!1,dpi:n.dpi_,format:n.format_,layout:n.layout_},n.documentRead_=document.createElement("img"),n.canvas_=document.createElement("canvas"),n.canceled=!1,n.order=i>=-1?i:null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(t,M.Control),r=t,(n=[{key:"active",value:function(e){var t=this;this.html_=e;var r=this.html_.querySelector("#m-printviewmanagement-georefImageEpsg");new Promise((function(e,r){t.template_=M.template.compileSync(se.a,{jsonp:!0,vars:{translations:{selectLayer:l("selectLayer"),nameTitle:l("title_list")},layers:t.layers_}}),e(t.template_)})).then((function(e){r.classList.contains("activated")?document.querySelector(".m-georefimageepsg-container").remove():t.html_.querySelector("#m-printviewmanagement-controls").appendChild(e),r.classList.toggle("activated")})),this.accessibilityTab(e)}},{key:"printClick",value:function(e){e.preventDefault();var t=this.map_.getProjection().code,r=this.template_.querySelector("#m-georefimageepsg-select").selectedIndex,n=this.layers_[r],i=n.url,o=n.name,a=n.format,s=n.EPSG,l=n.version,u=n.legend||o;this.queueEl=R(this.html_,!1,u),this.canceled=!1;var c=this.map_.getBbox(),f=this.map_.getMapImpl().getSize(),p=[];if(s){var h=s,d=!1;if(t===h)p=d=M.utils.ObjectToArrayExtent(c,t);else if("1.1.1"===l||"1.1.0"===l){var m=[c.x.min,c.y.min,c.x.max,c.y.max];p=d=ol.proj.transformExtent(m,t,h)}else{var g=M.utils.ObjectToArrayExtent(c,t);p=d=ol.proj.transformExtent(g,t,h),d=this.transformExtentOL(d,h)}var y=d.join(","),v=this.generateURLLayer_(i,h,f,y,a,o,l);this.downloadPrint(v,p,!0,u)}else{var b=this.getUTMZoneProjection(),_=this.map_.getMapImpl().getView().calculateExtent(f),w=((_=ol.proj.transformExtent(_,t,b))[2]-_[0])/f[0];_[3]=_[1]+w*f[1];var x=this.generateURLLayer_(i,b,f,_,a,o,l);this.downloadPrint(x,_,!1,u)}}},{key:"transformExtentOL",value:function(e,t){return M.impl.ol.js.projections.getSupportedProjs().filter((function(e){return e.codes.includes(t)}))[0].def.includes("+proj=longlat")?[e[1],e[0],e[3],e[2]]:e}},{key:"generateURLLayer_",value:function(e,t,r,n,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"1.3.0",s=e,l="1.1.1"===a||"1.1.0"===a?"SRS":"CRS";return s+="SERVICE=WMS&VERSION=".concat(a,"&REQUEST=GetMap&").concat(l,"=").concat(t,"&WIDTH=").concat(r[0],"&HEIGHT=").concat(r[1]),s+="&BBOX=".concat(n,"&FORMAT=").concat(i,"&TRANSPARENT=true&STYLES=default"),s+="&LAYERS=".concat(o)}},{key:"getUTMZoneProjection",value:function(){var e=this.map_.getProjection().code,t=[this.map_.getCenter().x,this.map_.getCenter().y],r=S(this.map_.getProjection().code,t);return r[0]<-12&&r[0]>=-20?e="EPSG:25828":r[0]<-6&&r[0]>=-12?e="EPSG:25829":r[0]<0&&r[0]>=-6?e="EPSG:25830":r[0]<=6&&r[0]>=0&&(e="EPSG:25831"),e}},{key:"downloadPrint",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=".wld",a=".jpg",s=".zip",u=null!==e?e:this.documentRead_.src,c=this.dpi_,f=F(u);this.canceled?N(this.html_).lastChild.remove():f.then((function(e){if(!n.canceled){var l=U(i),u=[{name:l.concat(o),data:B(t,c,n.map_.getMapImpl().getSize(),r,n.map_,"server"),base64:!1},{name:l.concat(a),data:e,base64:!0}];n.queueEl.addEventListener("click",(function(){z(u,s,l)})),n.queueEl.addEventListener("keydown",(function(e){13===e.keyCode&&z(u,s,l)})),D(n.queueEl)}})).catch((function(e){N(n.html_).lastChild.remove(),M.dialog.error(l("exception.imageError"))}))}},{key:"equals",value:function(e){var r=!1;return e instanceof t&&(r=this.name===e.name),r}},{key:"accessibilityTab",value:function(e){var t=this;e.querySelectorAll('[tabindex="0"]').forEach((function(e){return e.setAttribute("tabindex",t.order)}))}},{key:"deactive",value:function(){this.template_.remove()}},{key:"destroy",value:function(){}}])&&ue(r.prototype,n),i&&ue(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ye(n.key),n)}}function ye(e){var t=function(e,t){if("object"!=me(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==me(t)?t:t+""}function ve(e,t,r){return t=be(t),function(e,t){if(t&&("object"==me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],be(e).constructor):t.apply(e,r))}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _e(e,t){return(_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ve(this,t)).facadeMap_=e,r.errors=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(t,M.impl.Control),r=t,(n=[{key:"addTo",value:function(e,t){this.facadeMap_=e,ol.control.Control.call(this,{element:t,target:null}),e.getMapImpl().addControl(this)}},{key:"getParametrizedLayers",value:function(e,t){var r=this.facadeMap_.getMapImpl().getLayers().getArray().filter((function(t){return!M.utils.isNullOrEmpty(t.getSource())&&!M.utils.isNullOrEmpty(t.getSource().params_)&&void 0!==t.getSource().getParams()[e]}));return r=r.filter((function(e){return!t.some((function(t){return void 0!==t.url&&t.url===e.getSource().getUrl()}))}))}},{key:"encodeLayer",value:function(e){var t=this;return new Promise((function(r,n){try{e.type===M.layer.type.KML&&!1!==e.getImpl().formater_.extractStyles_?r(c(e,t.facadeMap_)):e.type===M.layer.type.KML&&!1===e.getImpl().formater_.extractStyles_?r(t.encodeWFS(e)):e.type===M.layer.type.WMS?r(f(e)):e.type===M.layer.type.WFS||e.type===M.layer.type.GeoJSON?r(t.encodeWFS(e)):e.type===M.layer.type.WMTS?d(e).then((function(e){r(e)})):M.utils.isNullOrEmpty(e.type)&&e instanceof M.layer.Vector?r(t.encodeWFS(e)):void 0===e.type&&"ol-layer"===e.className_?r(p(e)):[M.layer.type.XYZ,M.layer.type.TMS,M.layer.type.OSM].indexOf(e.type)>-1?r(h(e)):e.type===M.layer.type.MVT||e.type===M.layer.type.MBTiles||e.type===M.layer.type.MBTilesVector?(t.errors.push(e.name),r("")):r(t.encodeWFS(e))}catch(n){t.errors.push(e.name),r("")}}))}},{key:"encodeWFS",value:function(e){var t=this,r=e.getImpl().getOL3Layer(),n=r.getSource().getFeatures(),i=e.name,o=r.getOpacity(),a=[],s="",l=1,u=1,c=1,f={},p={};return n.forEach((function(r){var n=null;"geometrycollection"===r.getGeometry().getType().toLowerCase()?(n=t.encodeGeometryCollection_(e,r,s,l,c)).geojson.length>0&&(a=a.concat(n.geojson),s+=n.style,l+=n.plusIndex,c+=n.plusIndexGeom):null!==(n=t.encodeFeature_(e,r,s,l,u,c,f,p)).geojson&&(a.push(n.geojson),s=n.style,l+=n.plusIndex,c+=n.plusIndexGeom,u+=n.plusIndexText)}),this),{type:"Vector",style:s=""!==s?JSON.parse(s.concat("}")):{"*":{symbolizers:[]},version:"2"},geoJson:{type:"FeatureCollection",features:a},name:i,opacity:o}}},{key:"encodeFeature_",value:function(e,t,r,n,i,o,a,s){var l=null,u=this.facadeMap_.getProjection(),c=e.getImpl().getOL3Layer().getStyle(),f=new ol.format.GeoJSON,p=this.facadeMap_.getBbox();p=[p.x.min,p.y.min,p.x.max,p.y.max];var h,d,m,g=this.facadeMap_.getMapImpl().getView().getResolution(),y=0,v=0,b=0,_=t.getGeometry(),w=t.getStyle(),x="".concat(r);M.utils.isNullOrEmpty(w)?M.utils.isNullOrEmpty(c)||(m=c):m=w,m instanceof Function&&(m=m.call(m,t,g));var S=null;if(m instanceof Array&&(m.length>1?(S=M.utils.isNullOrEmpty(m[1])||M.utils.isNullOrEmpty(m[1].getImage())||!m[1].getImage().getGlyph?null:m[1].getImage(),m=!M.utils.isNullOrEmpty(m[1].getImage())&&m[1].getImage().getSrc?m[1]:m[0]):m=m[0]),!M.utils.isNullOrEmpty(m)){var E,O=m.getImage(),k=M.utils.isNullOrEmpty(O)?[0,0]:O.getImageSize()||[24,24],T=m.getText();M.utils.isNullOrEmpty(T)&&!M.utils.isNullOrEmpty(m.textPath)&&(T=m.textPath),E="multipolygon"===t.getGeometry().getType().toLowerCase()?"polygon":"multipoint"===t.getGeometry().getType().toLowerCase()?"point":t.getGeometry().getType().toLowerCase().indexOf("linestring")>-1?"line":t.getGeometry().getType().toLowerCase();var C,P=M.utils.isNullOrEmpty(O)?m.getStroke():O.getStroke&&O.getStroke(),I=M.utils.isNullOrEmpty(O)?m.getFill():O.getFill&&O.getFill(),A=null!==m.getStroke()&&void 0!==m.getStroke()?m.getStroke().getLineDash():void 0,L={type:E,fillColor:M.utils.isNullOrEmpty(I)||e.name.indexOf(" Reverse")>-1&&e.name.indexOf("Cobertura")>-1?"#000000":M.utils.rgbaToHex(I.getColor()).slice(0,7),fillOpacity:M.utils.isNullOrEmpty(I)?0:M.utils.getOpacityFromRgba(I.getColor()),strokeColor:M.utils.isNullOrEmpty(P)?"#000000":M.utils.rgbaToHex(P.getColor()),strokeOpacity:M.utils.isNullOrEmpty(P)?0:M.utils.getOpacityFromRgba(P.getColor()),strokeWidth:M.utils.isNullOrEmpty(P)?0:P.getWidth&&P.getWidth(),pointRadius:M.utils.isNullOrEmpty(O)?"":O.getRadius&&O.getRadius(),externalGraphic:M.utils.isNullOrEmpty(O)?"":O.getSrc&&O.getSrc(),graphicHeight:k[0],graphicWidth:k[1],strokeLinecap:"round"};"coordinateresult"===e.name&&(L.fillOpacity=1,L.strokeOpacity=1,L.fillColor="#ffffff",L.strokeColor="#ff0000",L.strokeWidth=2),"infocoordinatesLayerFeatures"===e.name&&(L.fillColor="#ffffff",L.fillOpacity=1,L.strokeWidth=1,L.strokeColor="#2690e7",L.strokeOpacity=1,L.graphicName="cross",L.graphicWidth=15,L.graphicHeight=15),e.name.indexOf(" Reverse")>-1&&e.name.indexOf("Cobertura")>-1&&(L.fillColor=L.strokeColor,L.fillOpacity=.5),null!=A&&A.length>0&&(1===A[0]&&2===A.length?L.strokeDashstyle="dot":10===A[0]?L.strokeDashstyle="dash":1===A[0]&&A.length>2&&(L.strokeDashstyle="dashdot"));var j=!M.utils.isNullOrEmpty(S)&&S.getImage?S.getImage():null;if(M.utils.isNullOrEmpty(j)||(S.getRadius&&S.getRadius()&&(L.pointRadius=S.getRadius&&S.getRadius()),S.getOpacity&&S.getOpacity()&&(L.graphicOpacity=S.getOpacity()),L.externalGraphic=j.toDataURL()),M.utils.isNullOrEmpty(T))"infocoordinatesLayerFeatures"===e.name&&(T=!0,C={type:"text",conflictResolution:"false",fontFamily:"Helvetica, sans-serif",fontStyle:"normal",fontColor:"#ffffff",fontSize:"12px",label:"".concat(t.getId()),labelAlign:"lb",labelXOffset:"4",labelYOffset:"3",haloColor:"#2690e7",haloRadius:"1",haloOpacity:"1"});else{var N=T.getTextAlign(),R=T.getTextBaseline(),D="";M.utils.isNullOrEmpty(N)||(N=N===M.style.align.LEFT?"l":N===M.style.align.RIGHT?"r":N===M.style.align.CENTER?"c":""),M.utils.isNullOrEmpty(R)||(R=R===M.style.baseline.BOTTOM?"b":R===M.style.baseline.MIDDLE?"m":R===M.style.baseline.TOP?"t":""),M.utils.isNullOrEmpty(N)||M.utils.isNullOrEmpty(R)||(D=N.concat(R));var B=T.getFont(),z=!M.utils.isNullOrEmpty(B)&&B.indexOf("bold")>-1?"bold":"normal",U="11px";if(!M.utils.isNullOrEmpty(B)){var F=B.substr(0,B.indexOf("px"));if(!M.utils.isNullOrEmpty(F)){var G=F.lastIndexOf(" ");U=G>-1?F.substr(G,F.length).trim().concat("px"):F.concat("px")}}C={type:"text",label:T.getText(),fontColor:M.utils.isNullOrEmpty(T.getFill())?"#000000":M.utils.rgbToHex(T.getFill().getColor()),fontSize:U,fontFamily:"Helvetica, sans-serif",fontStyle:"normal",fontWeight:z,conflictResolution:"false",labelXOffset:T.getOffsetX(),labelYOffset:T.getOffsetY(),fillColor:L.fillColor||"#FF0000",fillOpacity:L.fillOpacity||1,labelOutlineColor:M.utils.isNullOrEmpty(T.getStroke())?"":M.utils.rgbToHex(T.getStroke().getColor()||"#FF0000"),labelOutlineWidth:M.utils.isNullOrEmpty(T.getStroke())?"":T.getStroke().getWidth(),labelAlign:D}}if(h="draw".concat(n),!M.utils.isNullOrEmpty(_)&&_.intersectsExtent(p)||!M.utils.isNullOrEmpty(T)){var W,q=JSON.stringify(L),H=JSON.stringify(C),Z=a[q],Y=s[H];if(M.utils.isUndefined(Z)||M.utils.isUndefined(Y)){var V=[],X=0;if(!M.utils.isNullOrEmpty(_)&&_.intersectsExtent(p)&&M.utils.isUndefined(Z)&&(Z=o,a[q]=Z,X=1,V.push(q),b+=1,y+=1),!M.utils.isNullOrEmpty(T)&&M.utils.isUndefined(Y)&&(Y=i,s[H]=Y,V.push(H),v+=1,0===X&&(y+=1,V.push(q))),void 0===Z&&(Z=0),void 0===Y&&(Y=0),d="\"[_gx_style ='".concat(Z+Y,"']\""),!M.utils.isNullOrEmpty(V)){var J="".concat(d,': {"symbolizers": [').concat(V,"]}");-1===x.indexOf(d)&&(x+=""!==x?",".concat(J):"{".concat(J,',"version":"2"'))}}(W="EPSG:3857"!==u.code&&this.facadeMap_.getLayers().some((function(e){return e.type===M.layer.type.OSM||e.type===M.layer.type.Mapbox}))?f.writeFeatureObject(t,{featureProjection:u.code,dataProjection:"EPSG:3857"}):f.writeFeatureObject(t)).properties={_gx_style:Z+Y,name:h},l=W}}return{style:x,geojson:l,plusIndex:y,plusIndexText:v,plusIndexGeom:b}}},{key:"encodeGeometryCollection_",value:function(e,t,r,n,i){var o,a,s=[],l={},u=this.facadeMap_.getBbox();u=[u.x.min,u.y.min,u.x.max,u.y.max];var c="".concat(r),f=0,p=0;return t.getGeometry().getGeometries().forEach((function(e){var t;if("polygon"===(t="multipolygon"===e.getType().toLowerCase()?"polygon":"multipoint"===e.getType().toLowerCase()?"point":e.getType().toLowerCase().indexOf("linestring")>-1?"line":e.getType().toLowerCase())){var r={type:t,fillColor:"#3399CC",fillOpacity:0,strokeColor:"#3399CC",strokeWidth:2,strokeLinecap:"round"};if(o="draw".concat(n),!M.utils.isNullOrEmpty(e)&&e.intersectsExtent(u)){var h=JSON.stringify(r),d=l[h];if(M.utils.isUndefined(d)){var m=[];if(!M.utils.isNullOrEmpty(e)&&e.intersectsExtent(u)&&M.utils.isUndefined(d)&&(d=i,l[h]=d,m.push(h),p+=1,f+=1),void 0===d&&(d=0),a="\"[_gx_style ='".concat(d,"']\""),!M.utils.isNullOrEmpty(m)){var g="".concat(a,': {"symbolizers": [').concat(m,"]}");c+=""!==c?",".concat(g):"{".concat(g,',"version":"2"')}}var y={type:"Feature",geometry:{type:e.getType(),coordinates:e.getCoordinates()},properties:{_gx_style:d,name:o}};s.push(y)}}})),{style:c,geojson:s,plusIndex:f,plusIndexGeom:p}}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&ge(r.prototype,n),i&&ge(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(),xe=r(52),Se=r.n(xe);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Me(n.key),n)}}function Me(e){var t=function(e,t){if("object"!=Ee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ee(t)?t:t+""}function ke(e,t,r){return t=Te(t),function(e,t){if(t&&("object"==Ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Te(e).constructor):t.apply(e,r))}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ce(e,t){return(Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Pe=function(e){function t(e,r,n,i){var o,a=e.serverUrl,s=e.printTemplateUrl,u=e.printStatusUrl,c=e.credits,f=e.logo,p=e.fixedDescription,h=e.headerLegend,d=e.filterTemplates,m=e.order,g=e.tooltip;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ke(this,t,[new we(r),t.NAME])).map_=r,M.utils.isUndefined(we)&&M.exception(l("exception.impl")),M.utils.isUndefined(we.prototype.encodeLayer)&&M.exception(l("exception.encode")),o.serverUrl_=a||"https://componentes.cnig.es/geoprint",o.printTemplateUrl_=s||"https://componentes.cnig.es/geoprint/print/CNIG",o.printStatusUrl_=u||"https://componentes.cnig.es/geoprint/print/status",o.credits_=c||"",o.fixedDescription_=void 0!==p&&p,o.layout_=null,o.format_=null,o.projection_=null,o.dpi_=null,o.dpiMax_=null,o.dpiGeo_=120,o.keepView_=null,o.georef_=null,o.headerLegend_=h||"",o.params_={layout:{outputFilename:"mapa_${yyyy-MM-dd_hhmmss}"},pages:{clientLogo:"",creditos:l("credits")},parameters:{logo:f,headerLegend:o.headerLegend_}},o.paramsGeo_={layout:{outputFilename:"mapa_${yyyy-MM-dd_hhmmss}"},pages:{clientLogo:"",creditos:l("printInfo")},parameters:{}},o.queueContainer_=null,o.capabilitiesPromise_=null,o.options_={dpi:150,keepView:!0,format:"pdf",legend:"false",layout:"A4 horizontal"},o.layoutOptions_=[],o.dpisOptions_=[],o.outputFormats_=["pdf","png"],o.documentRead_=document.createElement("img"),o.canvas_=document.createElement("canvas"),o.proyectionsDefect_=["EPSG:25828","EPSG:25829","EPSG:25830","EPSG:25831","EPSG:3857","EPSG:4326","EPSG:4258"],o.filterTemplates_=d||[],o.order=m>=-1?m:null,o.tooltip_=g||l("tooltip"),o.statusProxy=n,o.useProxy=i,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}(t,M.Control),r=t,(n=[{key:"getStatus",value:function(e,t,r){var n=this;M.proxy(this.useProxy);var i=(new Date).getTime();M.remote.get("".concat(e,"?timestamp=").concat(i)).then((function(r){if(404===r.code)throw new Error("Error 404");var i=JSON.parse(r.text),o=i.status;"finished"===o?(M.proxy(n.statusProxy),t()):"error"===o||"cancelled"===o?(M.proxy(n.statusProxy),t(),i.error.toLowerCase().indexOf("network is unreachable")>-1||i.error.toLowerCase().indexOf("illegalargument")>-1?M.dialog.error(l("exception.tile")):M.dialog.error(l("exception.error"))):(M.proxy(n.statusProxy),setTimeout((function(){return n.getStatus(e,t)}),1e3))})).catch((function(e){console.log(e,"method getStatus"),t(r),r.remove(),M.dialog.error(l("exception.error_download_image"))}))}},{key:"active",value:function(e){var t=this;this.html_=e;var r=this.html_.querySelector("#m-printviewmanagement-printermap");new Promise((function(e,r){t.getCapabilities().then((function(r){var n,i=r,o=0;for(o=0,n=i.layouts.length;o<n;o+=1){var a=i.layouts[o];if(a.name===t.options_.layout){a.default=!0;break}}t.filterTemplates_.length>0&&(i.layouts=i.layouts.filter((function(e){return t.filterTemplates_.indexOf(e.name)>-1}))),i.layouts=i.layouts.filter((function(e){return!e.name.endsWith("jpg")})),i.layouts.sort((function(e,t){return e.name.indexOf("(Perfil")>-1&&-1===t.name.indexOf("(Perfil")?1:-1===e.name.indexOf("(Perfil")&&t.name.indexOf("(Perfil")>-1?-1:e.name===t.name?0:e.name>t.name?1:-1})),t.layoutOptions_=[].concat(i.layouts.map((function(e){return e.name}))),i.proyections=[];var s,u=t.proyectionsDefect_;for(o=0,n=u.length;o<n;o+=1)if(null!==u[o]){var c=u[o],f={value:c};"EPSG:4258"===c&&(f.default=!0),i.proyections.push(f)}for(i.dpis=[],o=0,n=i.layouts[0].attributes.length;o<n;o+=1)void 0!==i.layouts[0].attributes[o].clientInfo&&(s=i.layouts[0].attributes[o],t.dpiMax_=s.clientInfo.maxDPI);for(o=1,n=s.clientInfo.dpiSuggestions.length;o<n;o+=1){var p=s.clientInfo.dpiSuggestions[o];if(parseInt(p,10)===t.options_.dpi){p.default=!0;break}var h={value:p};i.dpis.push(h)}t.dpisOptions_=[].concat(i.dpis.map((function(e){return e.value}))),Array.isArray(i.formats)&&(t.outputFormats_=i.formats.filter((function(e){return"jpg"!==e}))),i.format=t.outputFormats_.map((function(e){return{name:e,default:"pdf"===e}})),i.keepView=t.options_.keepView,i.fixedDescription=t.fixedDescription_,i.translations={tooltip:l("tooltip"),title:l("title"),description:l("description"),layout:l("layout"),format:l("format"),projection:l("projection"),delete:l("delete"),download:l("download"),fixeddescription:l("fixeddescription"),nameTitle:l("title_map"),maintain_view:l("maintain_view")};var d=M.template.compileSync(Se.a,{jsonp:!0,vars:i});t.accessibilityTab(d),t.selectElementHTML(d),t.template_=d,e(d)}))})).then((function(e){r.classList.contains("activated")?document.querySelector(".m-printermap-container").remove():t.html_.querySelector("#m-printviewmanagement-controls").appendChild(e),r.classList.toggle("activated")}))}},{key:"selectElementHTML",value:function(e){this.elementTitle_=e.querySelector("#m-printermap-title"),this.elementFormat_=e.querySelector("#m-printermap-format"),this.elementTextArea_=e.querySelector("#m-printermap-description"),this.elementLayout_=e.querySelector("#m-printermap-layout"),this.elementDPI_=e.querySelector("#m-printermap-dpi")}},{key:"printClick",value:function(e){var r=this;e.preventDefault();var n,i=this.getPrintData(),o=this.printTemplateUrl_;n=this.downloadPrint,i.then((function(e){r.georef_&&(n=r.downloadGeoPrint.bind(r,e.attributes.map.bbox));var i=M.utils.concatUrlPaths([o,"report.".concat(e.outputFormat)]),a=R(r.html_,r.elementTitle_,r.elementQueueContainer_);i=M.utils.addParameters(i,"mapeaop=geoprint");var s=r.map_.getMapImpl().getControls().getArray().filter((function(e){return void 0!==e.element&&void 0!==e.element.classList&&e.element.classList.contains("ol-profil")}));(null===r.georef_||!r.georef_)&&s.length>0&&(e.attributes.profil=s[0].getImage()),M.proxy(r.useProxy),M.remote.post(i,e).then((function(e){var i=e;if(-1===i.text.indexOf("</error>")){var o,s=(i.text&&JSON.parse(i.text)).ref,u=M.utils.concatUrlPaths([r.printStatusUrl_,"".concat(s,".json")]);r.getStatus(u,(function(){return D(a)}),a);try{var c=(i=JSON.parse(i.text)).downloadURL.substring(i.downloadURL.indexOf("/print"),i.downloadURL.length);o=M.utils.concatUrlPaths([r.serverUrl_,c]),r.documentRead_.src=o}catch(e){M.exception(e)}a.setAttribute(t.DOWNLOAD_ATTR_NAME,o),a.addEventListener("click",n),a.addEventListener("keydown",n)}else a.remove(),0===document.querySelector("#m-georefimage-queue-container").childNodes.length&&(document.querySelector(".m-printviewmanagement-queue").style.display="none"),M.dialog.error(l("exception").printError)})),M.proxy(r.statusProxy)})),M.utils.isNullOrEmpty(this.getImpl().errors)||(M.toast.warning(l("exception.error_layers")+this.getImpl().errors.join(", "),null,6e3),this.getImpl().errors=[])}},{key:"getCapabilities",value:function(){var e=this;return M.utils.isNullOrEmpty(this.capabilitiesPromise_)&&(this.capabilitiesPromise_=new Promise((function(t,r){var n=M.utils.concatUrlPaths([e.printTemplateUrl_,"capabilities.json"]);M.proxy(e.useProxy),M.remote.get(n).then((function(e){var r={};try{r=JSON.parse(e.text)}catch(e){M.exception(e)}t(r)})),M.proxy(e.statusProxy)}))),this.capabilitiesPromise_}},{key:"converterDecimalToDMS",value:function(e){var t,r,n=e.toString().split(".");return t="".concat(n[0],"º "),r="0.".concat(n[1]),r=(r=(r*=60).toString()).split("."),t="".concat(t).concat(r[0],"' "),r="0.".concat(r[1]),r=(r=(r*=60).toString()).split("."),t="".concat(t).concat(r[0],"'' ")}},{key:"convertBboxToDMS",value:function(e){var t=this.map_.getProjection(),r=e;if("m"===t.units){var n=[e.x.min,e.y.min],i=[e.x.max,e.y.max],o=S(t.code,n),a=S(t.code,i);r={x:{min:o[0],max:a[0]},y:{min:o[1],max:a[1]}}}return r=this.convertDecimalBoxToDMS(r)}},{key:"convertDecimalBoxToDMS",value:function(e){return{x:{min:this.converterDecimalToDMS(e.x.min),max:this.converterDecimalToDMS(e.x.max)},y:{min:this.converterDecimalToDMS(e.y.min),max:this.converterDecimalToDMS(e.y.max)}}}},{key:"getPrintData",value:function(){var e=this,t=this.elementTitle_.value,r=this.elementTextArea_.value,n=this.credits_;n.length>2&&(r.length>0?r+=" - ".concat(n):r+=n);var i=this.map_.getProjection().code,o=this.map_.getBbox(),a=this.convertBboxToDMS(o),s=this.elementLayout_.value,u=this.elementDPI_.value,c=this.elementFormat_.value,f=this.params_.parameters,p=document.querySelector("#m-attributions-container>div>a"),h=null!==p?"".concat(l("base"),": ").concat(p.innerHTML):"";"jpg"===c&&(s+=" jpg");var d=new Date,m="".concat(d.getDate(),"/",d.getMonth()+1,"/",d.getFullYear()),g=t.replace(" ","");g.length<=8?(g=g.concat("${yyyyMMddhhmmss}"),this.params_.layout.outputFilename=g):(g=g.substring(0,7).concat("${yyyyMMddhhmmss}"),this.params_.layout.outputFilename=g);var y=M.utils.extend({layout:s,outputFormat:c,attributes:{title:t,description:r,attributionInfo:h,refsrs:this.turnProjIntoLegend(i),printDate:m,map:{dpi:u,projection:i,useAdjustBounds:!0},xCoordTopLeft:a.y.max,yCoordTopLeft:a.x.min,xCoordTopRight:a.y.max,yCoordTopRight:a.x.max,xCoordBotRight:a.y.min,yCoordBotRight:a.x.max,xCoordBotLeft:a.y.min,yCoordBotLeft:a.x.min}},this.params_.layout);return this.encodeLayers().then((function(t){return y.attributes.map.layers=t.filter((function(e){return M.utils.isObject(e)})),y.attributes=Object.assign(y.attributes,f),"EPSG:3857"!==i&&e.map_.getLayers().some((function(e){return e.type===M.layer.type.OSM||e.type===M.layer.type.Mapbox}))&&(y.attributes.map.projection="EPSG:3857"),y.attributes.map.bbox=[o.x.min,o.y.min,o.x.max,o.y.max],"EPSG:3857"!==i&&e.map_.getLayers().some((function(e){return e.type===M.layer.type.OSM||e.type===M.layer.type.Mapbox}))&&(y.attributes.map.bbox=E(y.attributes.map.bbox,i,"EPSG:3857")),y}))}},{key:"getDPI_",value:function(){return this.keepView_?120:this.dpi_.value}},{key:"encodeLayers",value:function(){var e=this,t=this.map_.getZoom(),r=this.map_.getLayers().filter((function(e){return e.isVisible()&&e.inRange()&&"cluster_cover"!==e.name&&"selectLayer"!==e.name&&"empty_layer"!==e.name&&t>e.getImpl().getMinZoom()&&t<=e.getImpl().getMaxZoom()}));if(20===t){var n=!1;r.forEach((function(e){void 0!==e.url&&"https://tms-pnoa-ma.idee.es/1.0.0/pnoa-ma/{z}/{x}/{-y}.jpeg"===e.url&&(n=!0)})),n&&(r=r.filter((function(e){return"https://tms-pnoa-ma.idee.es/1.0.0/pnoa-ma/{z}/{x}/{-y}.jpeg"!==e.url})))}else if(t<20){var i=!1;r.forEach((function(e){void 0!==e.url&&void 0!==e.name&&"https://www.ign.es/wmts/pnoa-ma?"===e.url&&"OI.OrthoimageCoverage"===e.name&&(i=!0)})),i&&(r=r.filter((function(e){return"https://www.ign.es/wmts/pnoa-ma?"!==e.url&&"OI.OrthoimageCoverage"!==e.name})))}var o=r.length,a=this.getImpl().getParametrizedLayers("IMAGEN",r);return a.length>0&&(r=r.concat(a),o=r.length),r=r.sort((function(e,t){var r=0,n=null!==e.getZIndex()?e.getZIndex():0,i=null!==t.getZIndex()?t.getZIndex():0;return n>i?r=1:n<i&&(r=-1),r})),new Promise((function(t,n){var i=[];r.forEach((function(r,n){e.getImpl().encodeLayer(r).then((function(e){M.utils.isNullOrEmpty(e)||(i[n]=e),0==(o-=1)&&t(i.reverse())}))}))}))}},{key:"downloadPrint",value:function(e){if(e.preventDefault(),void 0===e.key||"Enter"===e.key||" "===e.key){var r=this.getAttribute(t.DOWNLOAD_ATTR_NAME);M.utils.isNullOrEmpty(r)||window.open(r,"_blank")}}},{key:"downloadGeoPrint",value:function(e,t){var r=this;F(this.documentRead_.src).then((function(t){var n=r.map_.getMapImpl().getSize(),i=((e[2]-e[0])/n[0]*(72/r.dpiGeo_)).toString(),o=(0).toString(),a=(0).toString(),s=(-(e[3]-e[1])/n[1]*(72/r.dpiGeo_)).toString(),l=(e[0]+i/2).toString(),u=(e[3]+s/2).toString(),c=new Date,f="mapa_".concat(c.getFullYear(),"-",c.getMonth()+1,"-",c.getDay()+1,"_",c.getHours(),c.getMinutes(),c.getSeconds()),p=new P.a;p.file(f.concat(".jgw"),i.concat("\n",o,"\n",a,"\n",s,"\n",l,"\n",u)),p.file(f.concat(".jpg"),t,{base64:!0}),p.generateAsync({type:"blob"}).then((function(e){Object(I.saveAs)(e,f.concat(".zip"))}))})).catch((function(e){M.dialog.error(l("exception.imageError"))}))}},{key:"turnProjIntoLegend",value:function(e){var t;switch(e){case"EPSG:4258":t="EPSG:4258 (ETRS89)";break;case"EPSG:4326":t="EPSG:4326 (WGS84)";break;case"EPSG:3857":t="EPSG:3857 (WGS84)";break;case"EPSG:25831":t="EPSG:25831 (UTM ".concat(l("zone")," 31N)");break;case"EPSG:25830":t="EPSG:25830 (UTM ".concat(l("zone")," 30N)");break;case"EPSG:25829":t="EPSG:25829 (UTM ".concat(l("zone")," 29N)");break;case"EPSG:25828":t="EPSG:25828 (UTM ".concat(l("zone")," 28N)");break;default:t=""}return t}},{key:"equals",value:function(e){var r=!1;return e instanceof t&&(r=this.name===e.name),r}},{key:"accessibilityTab",value:function(e){var t=this;e.querySelectorAll('[tabindex="0"]').forEach((function(e){return e.setAttribute("tabindex",t.order)}))}},{key:"deactive",value:function(){this.template_.remove()}},{key:"destroy",value:function(){}}])&&Oe(r.prototype,n),i&&Oe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();Pe.NAME="printermapcontrol",Pe.TEMPLATE="printermap.html",Pe.LOADING_CLASS="printing",Pe.DOWNLOAD_ATTR_NAME="data-donwload-url-print";r(93);var Ie=r(53),Ae=r.n(Ie);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Re(n.key),n)}}function Re(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Le(t)?t:t+""}function De(e,t,r){return t=Ue(t),function(e,t){if(t&&("object"==Le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Ue(e).constructor):t.apply(e,r))}function Be(){return(Be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=ze(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(null,arguments)}function ze(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Ue(e)););return e}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ge=function(e){function t(){return je(this,t),De(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fe(e,t)}(t,M.impl.Control),r=t,(n=[{key:"addTo",value:function(e,r){Be(Ue(t.prototype),"addTo",this).call(this,e,r),this.facadeMap_=e}},{key:"transformCenter",value:function(e,t){var r=this.facadeMap_.getProjection().code;return ol.proj.transform(e,t,r)}}])&&Ne(r.prototype,n),i&&Ne(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,He(n.key),n)}}function He(e){var t=function(e,t){if("object"!=We(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=We(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==We(t)?t:t+""}function Ze(e,t,r){return t=Ye(t),function(e,t){if(t&&("object"==We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Ye(e).constructor):t.apply(e,r))}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t){return(Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Xe=function(e){function t(e){var r,n=e.isDraggable,i=e.georefImageEpsg,o=e.georefImage,a=e.printermap,s=e.order,u=(e.map,e.serverUrl),c=e.printStatusUrl,f=e.defaultOpenControl,p=e.useProxy,h=e.statusProxy;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M.utils.isUndefined(Ge)&&M.exception(l("exception.impl")),(r=Ze(this,t,[new Ge,"PrintViewManagement"])).isDraggable_=n,r.order=s,r.tooltipGeorefImageEpsg_=i.tooltip||l("tooltip_georefimageepsg"),r.georefImageEpsg_=i,r.georefImage_=o,r.georefImage_ instanceof Object&&(r.georefImage_.serverUrl=u,r.georefImage_.printStatusUrl=c),r.tooltipGeorefImage_=o.tooltip||l("georeferenced_img"),r.printermap_=a,r.printermap_ instanceof Object&&(r.printermap_.serverUrl=u,r.printermap_.printStatusUrl=c),r.tooltipPrintermap_=a.tooltip||l("map_printing"),r.defaultOpenControl=f,r.statusProxy=h,r.useProxy=p,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ve(e,t)}(t,M.Control),r=t,(n=[{key:"createView",value:function(e){var t=this;return this.map_=e,new Promise((function(e,r){var n=M.template.compileSync(Ae.a,{vars:{georefImageEpsg:!!t.georefImageEpsg_,georefImage:!!t.georefImage_,printermap:!!t.printermap_,translations:{headertitle:l("tooltip"),tooltipGeorefImageEpsg:t.tooltipGeorefImageEpsg_,georefImage:t.tooltipGeorefImage_,printermap:t.tooltipPrintermap_,downImg:l("downImg"),delete:l("delete")}}});t.html=n,t.georefImageEpsg_&&t.addGeorefImageEpsgControl(n),t.georefImage_&&t.addGeorefImageControl(n),t.printermap_&&t.addPrinterMapControl(n),t.isDraggable_&&M.utils.draggabillyPlugin(t.getPanel(),"#m-printviewmanagement-title"),t.accessibilityTab(n),t.selectElementHTML(),t.addEvent(),t.defaultOpenControl_(n),e(n)}))}},{key:"selectElementHTML",value:function(){this.elementRemoveButton_=this.html.querySelector("#m-printviewmanagement-remove"),this.elementPrintButton_=this.html.querySelector("#m-printviewmanagement-print")}},{key:"addEvent",value:function(){var e=this;this.elementRemoveButton_.addEventListener("click",(function(){return t=e.html,r=N(t),void(0!==(n=A(r.childNodes)).length&&(n.forEach((function(e){r.removeChild(e)})),r.parentElement.style.display="none"));var t,r,n})),this.elementPrintButton_.addEventListener("click",(function(t){var r=e.getControlActive(e.html);r&&("m-printviewmanagement-georefImage"===r.id&&e.georefImageControl.printClick(t),"m-printviewmanagement-georefImageEpsg"===r.id&&e.georefImageEpsgControl.printClick(t),"m-printviewmanagement-printermap"===r.id&&e.printerMapControl.printClick(t))})),document.addEventListener("keydown",(function(e){if("Escape"===e.key){var t=document.querySelector(".m-panel.m-plugin-printviewmanagement.opened");null!==t&&t.querySelector("button.m-panel-btn").click()}}))}},{key:"defaultOpenControl_",value:function(e){1===this.defaultOpenControl&&this.printermap_&&(this.showDownloadButton("printermap"),this.deactive(e,"printermap"),this.printerMapControl.active(e)),2===this.defaultOpenControl&&this.georefImage_&&(this.showDownloadButton("georefImage"),this.deactive(e,"georefImage"),this.georefImageControl.active(e)),3===this.defaultOpenControl&&this.georefImageEpsg_&&(this.showDownloadButton("georefImageEpsg"),this.deactive(e,"georefImageEpsg"),this.georefImageEpsgControl.active(e))}},{key:"equals",value:function(e){return e instanceof t}},{key:"addGeorefImageEpsgControl",value:function(e){var t=this;this.georefImageEpsgControl=new de(this.georefImageEpsg_,this.map_),e.querySelector("#m-printviewmanagement-georefImageEpsg").addEventListener("click",(function(){t.showDownloadButton("georefImageEpsg"),t.deactive(e,"georefImageEpsg"),t.georefImageEpsgControl.active(e)}))}},{key:"addPrinterMapControl",value:function(e){var t=this;this.printerMapControl=new Pe(this.printermap_,this.map_,this.statusProxy,this.useProxy),e.querySelector("#m-printviewmanagement-printermap").addEventListener("click",(function(){t.showDownloadButton("printermap"),t.deactive(e,"printermap"),t.printerMapControl.active(e)}))}},{key:"addGeorefImageControl",value:function(e){var t=this;this.georefImageControl=new Q(this.georefImage_,this.map_,this.statusProxy,this.useProxy),e.querySelector("#m-printviewmanagement-georefImage").addEventListener("click",(function(){t.showDownloadButton("georefImage"),t.deactive(e,"georefImage"),t.georefImageControl.active(e)}))}},{key:"showDownloadButton",value:function(e){this.elementDownloadButton_=this.html.querySelector("#m-georefimage-download-button");var t=this.html.querySelector("".concat("#m-georefimage-download-button"," > button"));"none"===this.elementDownloadButton_.style.display&&(this.elementDownloadButton_.style.display="flex"),"printermap"===e?(t.title=l("downMap"),t.innerHTML=l("downMap")):(t.title=l("downImg"),t.innerHTML=l("downImg"))}},{key:"hidemDownloadButton",value:function(){this.elementDownloadButton_=this.html.querySelector("#m-georefimage-download-button"),"flex"===this.elementDownloadButton_.style.display&&(this.elementDownloadButton_.style.display="none")}},{key:"deactive",value:function(e,t){var r=this.getControlActive(e);r&&(r&&r.id!=="m-printviewmanagement-".concat(t)?("m-printviewmanagement-georefImage"===r.id&&this.georefImageControl.deactive(),"m-printviewmanagement-georefImageEpsg"===r.id&&this.georefImageEpsgControl.deactive(),"m-printviewmanagement-printermap"===r.id&&this.printerMapControl.deactive(),r.classList.remove("activated")):r.id==="m-printviewmanagement-".concat(t)&&this.hidemDownloadButton())}},{key:"getControlActive",value:function(e){return 0!==e.querySelectorAll("#m-printviewmanagement-previews .activated").length&&e.querySelectorAll("#m-printviewmanagement-previews .activated")[0]}},{key:"accessibilityTab",value:function(e){var t=this;e.querySelectorAll('[tabindex="0"]').forEach((function(e){return e.setAttribute("tabindex",t.order)}))}},{key:"destroy",value:function(){M.utils.isNullOrEmpty(this.georefImageControl)||this.georefImageControl.destroy(),M.utils.isNullOrEmpty(this.printerMapControl)||this.printerMapControl.destroy()}}])&&qe(r.prototype,n),i&&qe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(),Je=r(54),Ke=r.n(Je);function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tt(n.key),n)}}function tt(e){var t=function(e,t){if("object"!=Qe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qe(t)?t:t+""}function rt(e,t,r){return t=nt(t),function(e,t){if(t&&("object"==Qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],nt(e).constructor):t.apply(e,r))}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t){return(it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ot=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$e(this,t),(e=rt(this,t)).map_=null,e.controls_=[],e.name="printviewmanagement",e.options=r,e.position_=r.position||"TL",e.collapsed=!!M.utils.isUndefined(r.collapsed)||r.collapsed,e.collapsible=!!M.utils.isUndefined(r.collapsible)||r.collapsible,e.tooltip_=r.tooltip||l("tooltip"),e.isDraggable=!0===r.isDraggable||"true"===r.isDraggable;var n=r.georefImageEpsg,i=void 0===n||n;!0===i?e.georefImageEpsg={layers:[{url:"http://www.ign.es/wms-inspire/mapa-raster?",name:"mtn_rasterizado",format:"image/jpeg",legend:"Mapa ETRS89 UTM"},{url:"http://www.ign.es/wms-inspire/pnoa-ma?",name:"OI.OrthoimageCoverage",format:"image/jpeg",legend:"Imagen (PNOA) ETRS89 UTM"}],order:0}:r.georefImageEpsg?e.georefImageEpsg=e.getGeorefImageEpsg():e.georefImageEpsg=!1;var o=r.georefImage,a=void 0===o||o;!0===a?e.georefImage={tooltip:"Georeferenciar imagen",printTemplateUrl:"https://componentes.cnig.es/geoprint/print/mapexport",printSelector:!0}:r.georefImage?e.georefImage=r.georefImage:e.georefImage=!1;var s=r.printermap,u=void 0===s||s;!0===u?e.printermap={printTemplateUrl:"https://componentes.cnig.es/geoprint/print/CNIG",filterTemplates:[],credits:""}:r.printermap?e.printermap=r.printermap:e.printermap=!1;var c=r.serverUrl;return c&&c.endsWith("/geoprint/")&&(c=c.replace("/geoprint/","/geoprint")),e.serverUrl=c||"https://componentes.cnig.es/geoprint",e.printStatusUrl=r.printStatusUrl||"https://componentes.cnig.es/geoprint/print/status",e.defaultOpenControl=r.defaultOpenControl||0,e.order=r.order>=-1?r.order:null,e.useProxy=!M.utils.isUndefined(r.useProxy)&&r.useProxy,e.statusProxy=M.useproxy,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}(t,M.Plugin),r=t,a=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?n:i:M.language.getTranslation(e).printviewmanagement}}],(o=[{key:"addTo",value:function(e){this.map_=e,!1===this.georefImageEpsg&&!1===this.georefImage&&!1===this.printermap&&M.dialog.error(l("exception.no_controls")),this.controls_.push(new Xe({isDraggable:this.isDraggable,georefImageEpsg:this.georefImageEpsg,georefImage:this.georefImage,printermap:this.printermap,order:this.order,map:this.map_,serverUrl:this.serverUrl,printTemplateUrl:this.printTemplateUrl,printStatusUrl:this.printStatusUrl,defaultOpenControl:this.defaultOpenControl,useProxy:this.useProxy,statusProxy:this.statusProxy})),this.panel_=new M.ui.Panel("panelPrintViewManagement",{collapsible:this.collapsible,collapsed:this.collapsed,position:M.ui.position[this.position_],className:"m-plugin-printviewmanagement",tooltip:this.tooltip_,collapsedButtonClass:"printviewmanagement-icon-flecha-historial",order:this.order}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_)}},{key:"getGeorefImageEpsg",value:function(){var e=this.options.georefImageEpsg;return{layers:e.layers,order:0,tooltip:e.tooltip}}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position_,"*").concat(this.collapsed,"*").concat(this.collapsible,"*").concat(this.tooltip_,"*").concat(this.isDraggable)+"*".concat(this.serverUrl,"*").concat(this.printStatusUrl,"*").concat(!M.utils.isNullOrEmpty(this.georefImageEpsg),"*").concat(!M.utils.isNullOrEmpty(this.georefImage),"*").concat(!M.utils.isNullOrEmpty(this.printermap),"*").concat(this.defaultOpenControl)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"destroy",value:function(){this.map_.removeControls(this.controls_),this.map_=null,this.controls_=null,this.panel_=null,this.name=null}},{key:"equals",value:function(e){return e instanceof t}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(e){e(M.template.compileSync(Ke.a,{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/printviewmanagement/images/"),translations:{help1:l("textHelp.help1"),help2:l("textHelp.help2"),help3:l("textHelp.help3"),help4:l("textHelp.help4"),help5:l("textHelp.help5"),help6:l("textHelp.help6"),help7:l("textHelp.help7"),help8:l("textHelp.help8"),help9:l("textHelp.help9"),help10:l("textHelp.help10"),help11:l("textHelp.help11"),help12:l("textHelp.help12"),help13:l("textHelp.help13")}}}))}))}}}])&&et(r.prototype,o),a&&et(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,a}();window.M.control||(window.M.control={}),window.M.plugin||(window.M.plugin={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.control.GeorefimageControl=Q,window.M.control.GeorefImageEpsgControl=de,window.M.control.PrinterMapControl=Pe,window.M.plugin.PrintViewManagement=ot,window.M.control.PrintViewManagementControl=Xe,window.M.impl.control.GeorefimageControl=x,window.M.impl.control.GeorefImageEpsgControl=oe,window.M.impl.control.PrinterMapControl=we,window.M.impl.control.PrintViewManagementControl=Ge}]);
//# sourceMappingURL=printviewmanagement-1.0.0.ol.min.js.map