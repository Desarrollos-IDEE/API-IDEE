<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
<title>Fototeca Digital</title>
<link rel="stylesheet" type="text/css" href="css/custom-style.css" />
<link rel="stylesheet" type="text/css" href="css/custom-queries.css" />
<!-- CNIG_DEVELOP -->
<link href="http://cnigvisores_pub.desarrollo.guadaltel.es/mapea/assets/css/api-5.1.0.ol.min.css" rel="stylesheet" />
<link href="http://cnigvisores_pub.desarrollo.guadaltel.es/mapea/plugins/ignsearch/ignsearch.ol.min.css" rel="stylesheet" />
<link href="http://cnigvisores_pub.desarrollo.guadaltel.es/mapea/plugins/attributions/attributions.ol.min.css" rel="stylesheet" />
<!-- CNIG_DEVELOP -->
<link href="https://fonts.googleapis.com/css?family=Fira+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i|Muli:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">
</head>

<body>

<!-- content -->
<div class="content-wrapper">

<!-- header -->	
<header class="h-desktop">

	<a id="nav-icon4" class="nav-icon4">
	  <span></span>
	  <span></span>
	  <span></span>
	</a>

	<div class="logo"><img src="img/logo.png"></div>
	<div class="visor-title">
		<label class="title">Fototeca Digital</label>
		<label class="subtitle">Visualizador de fotogramas del IGN</label>
	</div>
</header>	

<header class="h-mobile">

	<a id="nav-icon4" class="nav-icon4">
	  <span></span>
	  <span></span>
	  <span></span>
	</a>


	<div class="visor-title">
		<img class="logo" src="img/logo.png">
		<label class="title">Fototeca Digital</label>
		<label class="subtitle">Visualizador de fotogramas del IGN</label>	
	</div>
</header>	
<!-- end header -->

<!-- layout two columns -->
<section class="layout-wrapper">
	<nav class="nav-wrapper icon-w0"><h1>MENÚ</h1></nav>
	<div class="visor-wrapper">
		<!-- CNIG_DEVELOP  ---  REV_GOOGLE_OSM  --- 
		<object class="map" data="http://cnigvisores_pub.desarrollo.guadaltel.es/mapea?wmcfile=callejero,cdau_satelite&controls=panzoombar,panzoom,scale,scaleline,location&layers=WMS*Redes*http://www.ideandalucia.es/wms/mta400v_2008?*Redes_energeticas*true,KML*Arboleda*http://sad.guadaltel.es/desarrollo/mapea/Componente/kml/*arbda_sing_se.kml*true,WFST*capa%20wfs*http://clientes.guadaltel.es/desarrollo/geossigc/wfs?*callejero:prueba_pol_wfst*MPOLYGON,WMTS*http://www.ideandalucia.es/geowebcache/service/wmts?*toporaster&getfeatureinfo=html&wfstcontrols=drawfeature,modifyfeature,deletefeature,editattribute&plugins=measurebar&geosearch=http://geobusquedas-sigc.juntadeandalucia.es/*sigc*/search&geosearchbylocation&printer"></object> 
		-->
		<div class="map">
			<div id="map" class="container"></div> 		
		</div>
	</div>
</section>	
<!-- end layout two columns -->

</div>
<!-- end content -->

<!-- scripts -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="js/customfunctions.js"></script>

<!-- CNIG_DEVELOP -->
<script type="text/javascript" src="http://cnigvisores_pub.desarrollo.guadaltel.es/mapea/js/api-5.1.0.ol.min.js"></script>
<script type="text/javascript" src="http://cnigvisores_pub.desarrollo.guadaltel.es/mapea/js/configuration-5.1.0.js"></script>
<script type="text/javascript" src="http://cnigvisores_pub.desarrollo.guadaltel.es/mapea/plugins/ignsearch/ignsearch.ol.min.js"></script>
<script type="text/javascript" src="http://cnigvisores_pub.desarrollo.guadaltel.es/mapea/plugins/attributions/attributions.ol.min.js"></script>
<!-- CNIG_DEVELOP -->

<script type="text/javascript">


	let layerRasterMTN = new M.layer.WMTS("WMTS*http://www.ign.es/wmts/ign-base?*IGNBaseTodo*EPSG:4326*true");

	const map = M.map({
			container: 'map',
			controls: ['scale', 'scaleline', 'rotate', 'location'],
			// zoom: 6,
			layers: [layerRasterMTN],
			projection: "EPSG:4326*d",
			center: [-6.8906, 36.3281],
		  //	bbox: [-27.752608442575177, 18.09388997061703,  17.247391557424823, 50.7461276815488 ]
	});

	map.calculateMaxExtent().then((maxExtent) => {
            const size = map.getMapImpl().getSize();
            const zoomLevels = 20;
            const units = map.getProjection().units;
            const resolutions = M.utils.generateResolutionsFromExtent(maxExtent, size, zoomLevels, units);
            map.setResolutions(resolutions);
        });

	const mp = new M.plugin.IGNSearch({
	    servicesToSearch: 'gn',
            // 'g': search in geocoder
            // 'n': search in communicationsPool/Nomenclator
            // 'gn': search both
            maxResults: 10,
            isCollapsed: false,
            noProcess: 'municipio,poblacion'
	});

	map.addPlugin(mp);

	const mp2 = new M.plugin.Attributions({ 
			mode: 1, 
			scale: 10000, 
			defaultAttribution: 'Instituto Geográfico Nacional' });

	// type = 'kml';
	// url = 'https://componentes.ign.es/NucleoVisualizador/vectorial_examples/atribucionPNOA.kml';
	// layerName = 'attributions';
	// layer = {M.layer.GeoJSON | M.layer.KML}
	// scale == 10000;
	// attributionParam || 'atribucion';
	// minWidth || '100px';
	// maxWidth || '200px';
	// position == 'BL'; 'BR'
	// defaultAttribution = ''

	map.addPlugin(mp2);

	map.setZoom(3);
</script>

</body>

</html>
