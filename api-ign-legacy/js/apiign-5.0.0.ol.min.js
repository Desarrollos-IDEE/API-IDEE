/*! For license information please see apiign.ol.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={81638:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(40398);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}(this,r)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,r,i,u=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this)).impl_=e,!(0,n.Ew)(t.impl_)&&(0,n.mf)(t.impl_.setFacadeObj)&&t.impl_.setFacadeObj(l(t)),t}return t=c,(r=[{key:"getImpl",value:function(){return this.impl_}},{key:"setImpl",value:function(e){this.impl_=e}},{key:"destroy",value:function(){!(0,n.Ew)(this.impl_)&&(0,n.mf)(this.impl_.destroy)&&this.impl_.destroy()}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),c}(r(68079).Z)},64225:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(16451);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(u,e);var t,r,i,l=s(u);function u(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var i=new n.Z(e,t,r);return l.call(this,i)}return t=u,(r=[{key:"hide",value:function(){this.getImpl().hide()}},{key:"show",value:function(e){this.getImpl().show(e)}},{key:"getPopup",value:function(){return this.getImpl().getPopup()}},{key:"getCoordinate",value:function(){return this.getImpl().getCoordinate()}},{key:"setCoordinate",value:function(e){this.getImpl().coordinate=e}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),u}(r(81638).Z);u.POPUP_TEMPLATE="label_popup.html";const c=u},14116:(e,t,r)=>{"use strict";r.d(t,{Z:()=>he});var n=r(99075),i=r(81638),o=r(70514),a=r(40398),s=r(55395),l=r(2532),u=r(81971),c=r(64225),f=r(60894),h=r(38073),p=r(70992),d=r(77055),y=r(70939),g=r(81517),m=r(83473),_=r(5922),v=r(42792),A=r(14738),b=r(40711),w=r(13381),E=r(1507),x=r(30269),I=r(63920),S=r(81213),C=r(89437),P=r(68524),O=r(12479),T=r(71145),k=r(32974),R=r(9396),B=r(86659),L=r(50729),D=r(61901),j=r(84842),F=r(50561),N=r(20683),Z=r(67070),U=r(4143),Q=r(98210),G=r(73477),z=r(30386),q=r(86018),V=r(14279),W=r(38189),K=r(4884),H=r(12417),Y=r(17486);function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e,t,r){return(t=oe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oe(n.key),n)}}function oe(e){var t=function(e,t){if("object"!==X(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===X(t)?t:String(t)}function ae(){return ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},ae.apply(this,arguments)}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},se(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ce(e);if(t){var i=ce(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ue(e)}(this,r)}}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}var fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(te,e);var t,r,i,ee=le(te);function te(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,te);var o=new h.ZP(e),s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({viewExtent:o.viewExtent},r);t=ee.call(this);var c=new n.Z(o.container,ue(t),s,i);if(t.setImpl(c),(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").no_param),(0,a.o8)(n.Z)&&(0,u.Z)((0,l.NA)("exception").constructor_impl),t._panels=[],t._plugins=[],t._areasContainer=null,t.popup_=null,t._defaultProj=!0,t.panel={LEFT:null,RIGHT:"null"},t._userZoom=null,t.userCenter_=null,t._finishedInitCenter=!0,t._finishedMaxExtent=!0,t._finishedMapImpl=!1,t._finishedMap=!1,t.centerFeature_=null,t.drawLayer_=null,t.userMaxExtent=null,t.collectionCapabilities=[],t.evtSetAttributions_(),t.evtRemoveAttributions_(),t.controlAttributions=null,t._attributionsMap=[],o.container.classList.add("m-mapea-container"),c.on(d.Qc,(function(){t._finishedMapImpl=!0,t._checkCompleted()})),t.createMainPanels_(),t.featuresHandler_=new y.Z,t.featuresHandler_.addTo(ue(t)),t.featuresHandler_.activate(),t.drawLayer_=new O.Z({name:"__draw__"},{displayInLayerSwitcher:!1}),t.drawLayer_.setStyle(new z.Z(te.DRAWLAYER_STYLE)),t.drawLayer_.setZIndex(n.Z.Z_INDEX[P.WFS]+999),t.addLayers(t.drawLayer_),(0,a.Ew)(o.projection)?t.setProjection(M.config.DEFAULT_PROJ,!0):t.setProjection(o.projection),(0,a.Ew)(o.bbox)||t.setBbox(o.bbox),(0,a.Ew)(o.resolutions)||t.setResolutions(o.resolutions),!(0,a.Ew)(o.maxExtent)){var f=(0,a.Ew)(o.zoom)&&(0,a.Ew)(o.bbox);t.setMaxExtent(o.maxExtent,f)}return(0,a.Ew)(o.layers)||t.addLayers(o.layers),(0,a.Ew)(o.wms)||t.addWMS(o.wms),(0,a.Ew)(o.wmts)||t.addWMTS(o.wmts),(0,a.Ew)(o.kml)||t.addKML(o.kml),(0,a.Ew)(o.controls)||t.addControls(o.controls),(0,a.Ew)(o.layers)&&!(0,a.kJ)(o.layers)&&t.addQuickLayers(M.config.tms.base),(0,a.Ew)(o.center)||t.setCenter(o.center),(0,a.Ew)(o.zoom)?(0,a.Ew)(o.bbox)&&t.setZoom(0):t.setZoom(o.zoom),(0,a.Ew)(o.zoomConstrains)?t.setZoomConstrains(!0):t.setZoomConstrains(o.zoomConstrains),(0,a.Ew)(o.minZoom)||t.setMinZoom(o.minZoom),(0,a.Ew)(o.maxZoom)||t.setMaxZoom(o.maxZoom),(0,a.Ew)(o.label)||t.addLabel(o.label),(0,a.Ew)(o.ticket)||t.setTicket(o.ticket),(0,a.Ew)(o.bbox)&&(0,a.Ew)(o.zoom)&&(0,a.Ew)(o.center)&&t.zoomToMaxExtent(!0),(0,a.Ew)(o.center)&&(0,a.Ew)(o.bbox)&&(t._finishedInitCenter=!1,t.getInitCenter_().then((function(e){(0,a.Ew)(t.userCenter_)&&t.setCenter(e),t._finishedInitCenter=!0,t._checkCompleted()}))),(!!(0,a.o8)(e.dropFile)||e.dropFile)&&t.addDropFileEvent(),t}return t=te,r=[{key:"addDropFileEvent",value:function(){var e=this,t=this.getContainer().parentNode.parentNode;t.addEventListener("dragover",(function(e){e.preventDefault()}),!1),t.addEventListener("dragleave",(function(e){e.preventDefault()}),!1),t.addEventListener("drop",(function(t){t.stopPropagation(),t.preventDefault();var r=t.dataTransfer.files;(0,s.LJ)(e,r[0])}),!1)}},{key:"createAttribution",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.getControls().some((function(e){return"attributions"===e.name}))){var t=e.tooltip,r=e.position,n=e.scale,i=e.collectionsAttributions,o=void 0===i?[]:i,a=e.order,s=new Y.Z({map:this,scale:n,collectionsAttributions:o.map((function(e){if("string"!=typeof e){var t=e;return t.id=window.crypto.randomUUID?window.crypto.randomUUID():(new Date).getTime(),t}return e})),order:a}),u=new N.Z(Y.Z.NAME,{collapsible:!0,position:Z[r]||Z.BR,className:"m-attributions",collapsedButtonClass:"g-cartografia-comentarios",tooltip:t||(0,l.NA)("attributions").tooltip,order:a});this.addPanels(u),u.addControls(s),this.getImpl().addControls([s]),this.controlAttributions=s,o&&(this._attributionsMap=[].concat($(this._attributionsMap),$(o)))}}},{key:"addAttribution",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(0===Object.keys(e).length)return}catch(e){return void console.error("El tipo tiene que ser object")}var r=this.getControls().filter((function(e){return"attributions"===e.name}))[0];if(r){var n=null;"string"==typeof e?(n={},n.attribuccion=e):e&&r&&(n=e),n.id=window.crypto.randomUUID?window.crypto.randomUUID():(new Date).getTime(),r.addAttributions(n),t&&this._attributionsMap.push(n)}}},{key:"removeAttribution",value:function(e){if(e){var t=this.controlAttributions.getAttributions().filter((function(t){return t.id!==e}));t=t.filter((function(t){return t.name!==e})),this.controlAttributions.setAttributions(t)}}},{key:"getAttributions",value:function(e){return e?this.controlAttributions.getAttributions():this._attributionsMap}},{key:"getLayers",value:function(e){var t=this,r=e;(0,a.o8)(n.Z.prototype.getLayers)&&(0,u.Z)((0,l.NA)("exception").getlayers_method),(0,a.Ft)(r)?r=[]:(0,a.kJ)(r)||(r=[r]);var i=[];return r.length>0&&(i=r.map(p.EY)),this.getImpl().getLayers(i).sort((function(e,r){return te.LAYER_SORT(e,r,t)}))}},{key:"getRootLayers",value:function(e){return this.getLayers(e).filter((function(e){return(0,a.Ew)(e.group)}))}},{key:"getBaseLayers",value:function(){return(0,a.o8)(n.Z.prototype.getBaseLayers)&&(0,u.Z)((0,l.NA)("exception").getbaselayers_method),this.getImpl().getBaseLayers()}},{key:"getFeatureHandler",value:function(){return this.featuresHandler_}},{key:"addLayers",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.o8)(n.Z.prototype.addLayers)&&(0,u.Z)((0,l.NA)("exception").addlayers_method),(0,a.kJ)(r)||(r=[r]);var i=r.map((function(e){var r;if((0,a.HD)(e)){var n=e.split("*");if(2===n.length&&"QUICK"===n[0]){var i=(0,o.l6)(n[1]);if((0,a.o8)(i))return console.error("No se encuentra definida ".concat(n[1]," como capa rápida")),null;e=i}}if(e instanceof C.Z)r=e;else{var s=p.EY(e);if((0,a.Ew)(s.type))m.error((0,l.NA)("dialog").invalid_type_layer);else switch(s.type){case"WFS":r=new k.Z(e,{style:s.style});break;case"WMS":r=new R.Z(e);break;case"GeoJSON":r=new U.Z(s,{style:s.style});break;case"GeoTIFF":r=new Q.Z(e);break;case"KML":r=new T.Z(e);break;case"Vector":r=new O.Z(e);break;case"WMTS":r=new B.Z(e);break;case"MVT":r=new L.Z(e);break;case"MBTiles":r=new q.Z(s);break;case"MBTilesVector":r=new V.Z(s,{style:s.style});break;case"XYZ":r=new W.Z(s);break;case"TMS":r=new K.Z(s,{crossOrigin:s.crossOrigin});break;case"OSM":r=new H.Z(e);break;case"OGCAPIFeatures":r=new D.Z(e,{style:s.style});break;case"GenericRaster":r=new j.Z(e);break;case"GenericVector":r=new F.Z(e);break;case"MapLibre":r=new G.Z(e);break;default:m.error((0,l.NA)("dialog").invalid_type_layer)}}return t.collectorCapabilities_(r),!(r instanceof O.Z)||r instanceof k.Z||r instanceof D.Z||t.featuresHandler_.addLayer(r),r.setMap(t),r}));this.getImpl().addLayers(i.filter((function(e){return null!==e})))}return this}},{key:"collectorCapabilities_",value:function(e){var t=this,r=e;if((0,a.kJ)(r)||(r=[r]),"__draw__"!==r[0].name){var n=[];r.forEach((function(e){var r="",i="",o=!0;if("string"==typeof e){var a=J(e.split("*"),1)[0],s=p.EY(e,P[a]);r=s.type,i=s.url,o=s.useCapabilities}else"object"===X(e)&&(r=e.type,i=e.url,o=e.useCapabilities);t.collectionCapabilities.filter((function(e){return e.url===i})).length>0||"WMS"!==r&&"WMTS"!==r||!o||0===n.filter((function(e){return e.url===i})).length&&t.collectionCapabilities.push({type:r,url:i,capabilities:!1})}))}}},{key:"removeLayers",value:function(e){var t=this;if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeLayers)&&(0,u.Z)((0,l.NA)("exception").removelayers_method);var r=this.getLayers(e);r.forEach((function(e){e instanceof O.Z&&t.featuresHandler_.removeLayer(e)})),this.getImpl().removeLayers(r)}return this}},{key:"getKML",value:function(e){var t=e;(0,a.o8)(n.Z.prototype.getKML)&&(0,u.Z)((0,l.NA)("exception").getkml_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map((function(e){return p.EY(e,P.KML)}))),this.getImpl().getKML(r).sort(te.LAYER_SORT)}},{key:"addKML",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.o8)(n.Z.prototype.addKML)&&(0,u.Z)((0,l.NA)("exception").addkml_method),(0,a.kJ)(r)||(r=[r]);var i=[];r.forEach((function(e){var r;(0,a.Kn)(e)&&e instanceof T.Z?r=e:e instanceof C.Z||(r=new T.Z(e,e.options)),!0===r.extract&&t.featuresHandler_.addLayer(r),i.push(r)})),this.getImpl().addKML(i),this.fire(d.N5,[i]),this.fire(d.w$,[i])}return this}},{key:"removeKML",value:function(e){var t=this;if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeKML)&&(0,u.Z)((0,l.NA)("exception").removekml_method);var r=this.getKML(e);r.length>0&&(this.fire(d.K6,[r]),r.forEach((function(e){t.featuresHandler_.removeLayer(e)})),this.getImpl().removeKML(r))}return this}},{key:"getWMS",value:function(e){var t=e;(0,a.o8)(n.Z.prototype.getWMS)&&(0,u.Z)((0,l.NA)("exception").getwms_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map((function(e){return p.EY(e,P.WMS)}))),this.getImpl().getWMS(r).sort(te.LAYER_SORT)}},{key:"addWMS",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.o8)(n.Z.prototype.addWMS)&&(0,u.Z)((0,l.NA)("exception").addwms_method),(0,a.kJ)(r)||(r=[r]),this.collectorCapabilities_(r);var i=[];r.forEach((function(e){var r=e;e instanceof R.Z||(r=new R.Z(e,e.options)),r.setMap(t),i.push(r)})),this.getImpl().addWMS(i),this.fire(d.N5,[i]),this.fire(d.dQ,[i])}return this}},{key:"removeWMS",value:function(e){if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeWMS)&&(0,u.Z)((0,l.NA)("exception").removewms_method);var t=this.getWMS(e);t.length>0&&(this.fire(d.K6,[t]),this.getImpl().removeWMS(t))}return this}},{key:"getWFS",value:function(e){var t=e;(0,a.o8)(n.Z.prototype.getWFS)&&(0,u.Z)((0,l.NA)("exception").getwfs_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map((function(e){return p.EY(e,P.WFS)}))),this.getImpl().getWFS(r).sort(te.LAYER_SORT)}},{key:"getGeoJSON",value:function(e){var t=e;return(0,a.o8)(n.Z.prototype.getGeoJSON)&&(0,u.Z)((0,l.NA)("exception").getgeojson_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]),this.getImpl().getGeoJSON(t).sort(te.LAYER_SORT)}},{key:"addWFS",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.o8)(n.Z.prototype.addWFS)&&(0,u.Z)((0,l.NA)("exception").addwfs_method),(0,a.kJ)(r)||(r=[r]);var i=[];r.forEach((function(e){var r;if((0,a.Kn)(e)&&e instanceof k.Z)r=e;else if(!(e instanceof C.Z))try{r=new k.Z(e,e.options)}catch(e){throw m.error(e.toString()),e}t.featuresHandler_.addLayer(r),i.push(r)})),this.getImpl().addWFS(i),this.fire(d.N5,[i]),this.fire(d.W_,[i])}return this}},{key:"addUnknowLayers_",value:function(e){var t=e;(0,a.kJ)(t)||(t=[t]);var r=[];t.forEach((function(e){(0,a.Kn)(e)&&"__draw__"!==e.name&&r.push(e)})),this.fire(d.N5,[r])}},{key:"removeWFS",value:function(e){var t=this;if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeWFS)&&(0,u.Z)((0,l.NA)("exception").removewfs_method);var r=this.getWFS(e);r.length>0&&(this.fire(d.K6,[r]),r.forEach((function(e){t.featuresHandler_.removeLayer(e)})),this.getImpl().removeWFS(r))}return this}},{key:"getGeoTIFF",value:function(e){var t=e;(0,a.o8)(n.Z.prototype.getGeoTIFF)&&(0,u.Z)((0,l.NA)("exception").getgeotiff_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map((function(e){return p.EY(e,P.GeoTIFF)}))),this.getImpl().getGeoTIFF(r).sort(te.LAYER_SORT)}},{key:"addGeoTIFF",value:function(e){var t=e;if(!(0,a.Ew)(t)){(0,a.o8)(n.Z.prototype.addGeoTIFF)&&(0,u.Z)((0,l.NA)("exception").addgeotiff_method),(0,a.kJ)(t)||(t=[t]);var r=[];t.forEach((function(e){var t;if((0,a.Kn)(e)&&e instanceof Q.Z)t=e;else if(!(e instanceof C.Z))try{t=new Q.Z(e,e.options)}catch(e){throw m.error(e.toString()),e}r.push(t)})),this.getImpl().addGeoTIFF(r),this.fire(d.N5,[r]),this.fire(d.oR,[r])}return this}},{key:"removeGeoTIFF",value:function(e){var t=this;if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeGeoTIFF)&&(0,u.Z)((0,l.NA)("exception").removegeotiff_method);var r=this.getGeoTIFF(e);r.length>0&&(this.fire(d.K6,[r]),r.forEach((function(e){t.featuresHandler_.removeLayer(e)})),this.getImpl().removeGeoTIFF(r))}return this}},{key:"getMapLibre",value:function(e){var t=e;(0,a.o8)(n.Z.prototype.getMapLibre)&&(0,u.Z)((0,l.NA)("exception").mapLibre_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map((function(e){return p.EY(e,P.MapLibre)}))),this.getImpl().getMapLibre(r).sort(te.LAYER_SORT)}},{key:"addMapLibre",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.o8)(n.Z.prototype.addMapLibre)&&(0,u.Z)((0,l.NA)("exception").addto_method),(0,a.kJ)(r)||(r=[r]);var i=[];r.forEach((function(e){var r;if((0,a.Kn)(e)&&e instanceof G.Z)r=e;else if(!(e instanceof C.Z))try{r=new G.Z(e,e.options)}catch(e){throw m.error(e.toString()),e}t.featuresHandler_.addLayer(r),i.push(r)})),this.getImpl().addMapLibre(i),this.fire(d.N5,[i]),this.fire(d.IF,[i])}return this}},{key:"removeMapLibre",value:function(e){var t=this;if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeMapLibre)&&(0,u.Z)((0,l.NA)("exception").removelayers_method);var r=this.getMapLibre(e);r.length>0&&(this.fire(d.K6,[r]),r.forEach((function(e){t.featuresHandler_.removeLayer(e)})),this.getImpl().removeMapLibre(r))}return this}},{key:"getOGCAPIFeatures",value:function(e){var t=e;(0,a.o8)(n.Z.prototype.getOGCAPIFeatures)&&(0,u.Z)((0,l.NA)("exception").getogcapif_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map((function(e){return p.EY(e,P.OGCAPIFeatures)}))),this.getImpl().getOGCAPIFeatures(r).sort(te.LAYER_SORT)}},{key:"addOGCAPIFeatures",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.o8)(n.Z.prototype.addOGCAPIFeatures)&&(0,u.Z)((0,l.NA)("exception").addogcapif_method),(0,a.kJ)(r)||(r=[r]);var i=[];r.forEach((function(e){var r;if((0,a.Kn)(e)&&e instanceof D.Z)r=e;else if(!(e instanceof C.Z))try{r=new D.Z(e,e.options)}catch(e){throw m.error(e.toString()),e}t.featuresHandler_.addLayer(r),i.push(r)})),this.getImpl().addOGCAPIFeatures(i),this.fire(d.N5,[i]),this.fire(d.h$,[i])}return this}},{key:"removeOGCAPIFeatures",value:function(e){var t=this;if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeOGCAPIFeatures)&&(0,u.Z)((0,l.NA)("exception").removeogcapif_method);var r=this.getOGCAPIFeatures(e);r.length>0&&(this.fire(d.K6,[r]),r.forEach((function(e){t.featuresHandler_.removeLayer(e)})),this.getImpl().removeOGCAPIFeatures(r))}return this}},{key:"getWMTS",value:function(e){var t=e;(0,a.o8)(n.Z.prototype.getWMTS)&&(0,u.Z)((0,l.NA)("exception").getwmts_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map((function(e){return p.EY(e,P.WMTS)}))),this.getImpl().getWMTS(r).sort(te.LAYER_SORT)}},{key:"addWMTS",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.o8)(n.Z.prototype.addWMTS)&&(0,u.Z)((0,l.NA)("exception").addwmts_method),(0,a.kJ)(r)||(r=[r]),this.collectorCapabilities_(r);var i=[];r.forEach((function(e){if((0,a.Kn)(e)&&e instanceof B.Z)e.setMap(t),i.push(e);else if(!(e instanceof C.Z)){var r=new B.Z(e,e.options);r.setMap(t),i.push(r)}})),this.getImpl().addWMTS(i),this.fire(d.N5,[i]),this.fire(d.TI,[i])}return this}},{key:"removeWMTS",value:function(e){if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeWMTS)&&(0,u.Z)((0,l.NA)("exception").removewmts_method);var t=this.getWMTS(e);t.length>0&&(this.fire(d.K6,[t]),this.getImpl().removeWMTS(t))}return this}},{key:"getMVT",value:function(e){var t=e;(0,a.o8)(n.Z.prototype.getMVT)&&(0,u.Z)("La implementación usada no posee el método getWFS"),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map((function(e){return p.EY(e,P.MVT)}))),this.getImpl().getMVT(r).sort(te.LAYER_SORT)}},{key:"removeMVT",value:function(e){var t=this;if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeMVT)&&(0,u.Z)("La implementación usada no posee el método removeWFS");var r=this.getMVT(e);r.length>0&&(this.fire(d.K6,[r]),r.forEach((function(e){t.featuresHandler_.removeLayer(e)})),this.getImpl().removeMVT(r))}return this}},{key:"addMVT",value:function(e){var t=e;if(!(0,a.Ew)(t)){(0,a.o8)(n.Z.prototype.addMVT)&&(0,u.Z)("La implementación usada no posee el método addWFS"),(0,a.kJ)(t)||(t=[t]);var r=[];t.forEach((function(e){var t;if((0,a.Kn)(e)&&e instanceof L.Z)t=e;else if(!(e instanceof C.Z))try{t=new L.Z(e,e.options)}catch(e){throw m.error(e.toString()),e}r.push(t)})),this.getImpl().addMVT(r),this.fire(d.N5,[r]),this.fire(d.jB,[r])}return this}},{key:"getMBTiles",value:function(e){var t=e;(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map((function(e){return p.EY(e,P.MBTiles)}))),this.getImpl().getMBTiles(r).sort(te.LAYER_SORT)}},{key:"addMBTiles",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.kJ)(r)||(r=[r]);var n=[];r.forEach((function(e){var r=e;e instanceof q.Z||(r=new q.Z(e,e.options)),r.setMap(t),n.push(r)})),this.getImpl().addMBTiles(n),this.fire(d.N5,[n]),this.fire(d.WI,[n])}return this}},{key:"removeMBTiles",value:function(e){if(!(0,a.Ew)(e)){var t=this.getMBTiles(e);t.length>0&&(this.fire(d.K6,[t]),this.getImpl().removeMBTiles(t))}return this}},{key:"getMBTilesVector",value:function(e){var t=e;(0,a.o8)(n.Z.prototype.getMBTilesVector)&&(0,u.Z)((0,l.NA)("exception").getmbtiles_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map((function(e){return p.EY(e,P.MBTilesVector)}))),this.getImpl().getMBTilesVector(r).sort(te.LAYER_SORT)}},{key:"addMBTilesVector",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.o8)(n.Z.prototype.addMBTilesVector)&&(0,u.Z)((0,l.NA)("exception").addmbtiles_method),(0,a.kJ)(r)||(r=[r]);var i=[];r.forEach((function(e){(0,a.Kn)(e)&&e instanceof V.Z&&(e.setMap(t),i.push(e))})),this.getImpl().addMBTilesVector(i),this.fire(d.N5,[i]),this.fire(d.nU,[i])}return this}},{key:"removeMBTilesVector",value:function(e){if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeMBTilesVector)&&(0,u.Z)((0,l.NA)("exception").removembtiles_method);var t=this.getMBTilesVector(e);t.length>0&&(this.fire(d.K6,[t]),this.getImpl().removeMBTilesVector(t))}return this}},{key:"getXYZs",value:function(e){var t=e;(0,a.o8)(n.Z.prototype.getXYZs)&&(0,u.Z)((0,l.NA)("exception").getxyzs_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map(p.EY)),this.getImpl().getXYZs(r).sort(te.LAYER_SORT)}},{key:"addXYZ",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.o8)(n.Z.prototype.addXYZ)&&(0,u.Z)((0,l.NA)("exception").addxyz_method),(0,a.kJ)(r)||(r=[r]);var i=[];r.forEach((function(e){if((0,a.Kn)(e)&&e instanceof W.Z)e.setMap(t),i.push(e);else if(!(e instanceof C.Z)){var r=new W.Z(e,e.options);r.setMap(t),i.push(r)}})),this.getImpl().addXYZ(i),this.fire(d.N5,[i]),this.fire(d.L8,[i])}return this}},{key:"removeXYZ",value:function(e){if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeXYZ)&&(0,u.Z)((0,l.NA)("exception").removexyz_method);var t=this.getXYZs(e);t.length>0&&(this.fire(d.K6,[t]),this.getImpl().removeXYZ(t))}return this}},{key:"getTMS",value:function(e){var t=e;(0,a.o8)(n.Z.prototype.getTMS)&&(0,u.Z)((0,l.NA)("exception").gettms_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]);var r=[];return t.length>0&&(r=t.map(p.EY)),this.getImpl().getTMS(r).sort(te.LAYER_SORT)}},{key:"addTMS",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.o8)(n.Z.prototype.addTMS)&&(0,u.Z)((0,l.NA)("exception").addtms_method),(0,a.kJ)(r)||(r=[r]);var i=[];r.forEach((function(e){if((0,a.Kn)(e)&&e instanceof K.Z)e.setMap(t),i.push(e);else if(!(e instanceof C.Z)){var r=new K.Z(e,e.options);r.setMap(t),i.push(r)}})),this.getImpl().addTMS(i),this.fire(d.N5,[i]),this.fire(d.D8,[i])}return this}},{key:"removeTMS",value:function(e){if(!(0,a.Ew)(e)){(0,a.o8)(n.Z.prototype.removeTMS)&&(0,u.Z)((0,l.NA)("exception").removetms_method);var t=this.getTMS(e);t.length>0&&(this.fire(d.K6,[t]),this.getImpl().removeTMS(t))}return this}},{key:"addQuickLayers",value:function(e){var t=e;if(!(0,a.Ew)(t)){(0,a.kJ)(t)||(t=[t]);var r=[];t.forEach((function(e){if((0,a.HD)(e)){var t=e;-1===e.indexOf("QUICK*")&&(t="QUICK*".concat(e)),r.push(t)}else r.push(e)})),this.addLayers(r),this.fire(d.RE,[r])}return this}},{key:"getControls",value:function(e){var t=e;return(0,a.o8)(n.Z.prototype.getControls)&&(0,u.Z)((0,l.NA)("exception").getcontrols_method),(0,a.Ft)(t)?t=[]:(0,a.kJ)(t)||(t=[t]),this.getImpl().getControls(t)}},{key:"addControls",value:function(e){var t=this,r=e;if(!(0,a.Ew)(r)){(0,a.o8)(n.Z.prototype.addControls)&&(0,u.Z)((0,l.NA)("exception").addcontrols_method),(0,a.kJ)(r)||(r=[r]);var i=[];r.forEach((function(e){var r,n,o=e;if((0,a.HD)(o))switch((o=(0,a.Fv)(o).split("*"))[0]){case b.Z.NAME:var s={};o.forEach((function(e){"true"===e&&(s.exactScale=Boolean(e)),isNaN(e)||(s.order=Number(e))})),r=new b.Z(s),n=t.getPanels("map-info")[0],(0,a.Ew)(n)&&(n=new N.Z("map-info",{collapsible:!1,className:"m-map-info",position:Z.BR,order:s.order?s.order:null})).on(d.GY,(function(e){3===t.getControls(["wmcselector","scale","scaleline"]).length&&t.getControls(["scaleline"])[0].getImpl().getElement().classList.add("ol-scale-line-up")})),n.addClassName("m-with-scale");break;case E.Z.NAME:r=new E.Z,(n=new N.Z(E.Z.NAME,{collapsible:!1,className:"m-scaleline",position:Z.BL,tooltip:"Línea de escala"})).on(d.GY,(function(e){3===t.getControls(["wmcselector","scale","scaleline"]).length&&t.getControls(["scaleline"])[0].getImpl().getElement().classList.add("ol-scale-line-up")}));break;case I.Z.NAME:r=new I.Z,n=new N.Z(I.Z.NAME,{collapsible:!1,className:"m-panzoombar",position:Z.TL,tooltip:"Nivel de zoom"});break;case x.Z.NAME:r=new x.Z,n=new N.Z(x.Z.NAME,{collapsible:!1,className:"m-panzoom",position:Z.TL});break;case A.Z.NAME:r=new A.Z,n=new N.Z(A.Z.NAME,{collapsible:!1,className:"m-location",position:Z.BR});break;case v.Z.NAME:r=new v.Z(!0);break;case Y.Z.NAME:return void(2===o.length?t.createAttribution({collectionsAttributions:[o[1]]}):t.createAttribution());case w.Z.NAME:r=new w.Z,n=new N.Z(w.Z.name,{collapsible:!1,className:"m-rotate",position:Z.TR});break;case S.Z.NAME:r=new S.Z(t),n=new N.Z(S.Z.NAME,{collapsible:!1,position:Z.TR,className:"m-plugin-baselayer"});break;default:if(/backgroundlayers\*([0-9])+\*(true|false)/.test(o)){var l=o.match(/backgroundlayers\*([0-9])+\*(true|false)/)[1],c="true"===o.match(/backgroundlayers\*([0-9])+\*(true|false)/)[2];r=new S.Z(t,Number.parseInt(l,10),c),n=new N.Z(S.Z.NAME,{collapsible:!1,position:Z.TR,className:"m-plugin-baselayer"})}else{var f=(0,a.wQ)([M.config.MAPEA_URL,"/api/actions/controls"]);m.error("El control ".concat(o," no está definido. Consulte los controles disponibles <a href='").concat(f,'\' target="_blank">aquí</a>'))}}else o instanceof _.Z?r=o:(0,u.Z)('El control "'.concat(o).concat('" no es un control válido.'));(0,a.Ew)(n)||n.hasControl(r)?(r.addTo(t),i.push(r)):(n.addControls(r),t.addPanels(n))})),this.getImpl().addControls(i)}return this}},{key:"removeControls",value:function(e){(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").remove_control),(0,a.o8)(n.Z.prototype.removeControls)&&(0,u.Z)((0,l.NA)("exception").removecontrol_method);var t=this.getControls(e);return(t=[].concat(t)).length>0&&(t.forEach((function(e){(0,a.Ew)(e.getPanel())||e.getPanel().removeControls(e)})),this.getImpl().removeControls(t)),this}},{key:"getMaxExtent",value:function(){var e=this.userMaxExtent;return(0,a.Ew)(e)&&(e=this.getProjection().getExtent()),e}},{key:"calculateMaxExtent",value:function(){var e=this;return new Promise((function(t){var r=e.userMaxExtent;if((0,a.Ew)(r)){var n=e.getLayers().filter((function(e){return"__draw__"!==e.name})).map((function(e){return e.calculateMaxExtent()}));Promise.all(n).then((function(n){r=(0,a.ZM)(n),(0,a.Ew)(r)&&(r=e.getProjection().getExtent()),(0,a.Ew)(e.userMaxExtent)||(r=e.userMaxExtent),t(r)}))}else t(r)}))}},{key:"setMaxExtent",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,a.Ew)(e)&&this.resetMaxExtent(),(0,a.o8)(n.Z.prototype.setMaxExtent)&&(0,u.Z)((0,l.NA)("exception").setmaxextent_method);try{var r=p.ov(e);!(0,a.kJ)(r)&&(0,a.Kn)(r)&&(r=[r.x.min,r.y.min,r.x.max,r.y.max]),this.userMaxExtent=r,this.getImpl().setMaxExtent(r,t)}catch(e){throw m.error(e.toString()),e}return this}},{key:"resetMaxExtent",value:function(){var e=this;return this.userMaxExtent=null,this.calculateMaxExtent().then((function(t){var r=p.ov(t);(0,a.Kn)(r)&&(r=[r.x.min,r.y.min,r.x.max,r.y.max]),e.getImpl().setMaxExtent(r,!0)})),this}},{key:"getBbox",value:function(){return(0,a.o8)(n.Z.prototype.getBbox)&&(0,u.Z)((0,l.NA)("exception").getbbox_method),this.getImpl().getBbox()}},{key:"setBbox",value:function(e,t){(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").no_bbox),(0,a.o8)(n.Z.prototype.setBbox)&&(0,u.Z)((0,l.NA)("exception").setbbox_method);try{var r=p.ov(e);this.getImpl().setBbox(r,t)}catch(e){throw m.error((0,l.NA)("exception").incorrect_format_bbox),e}return this}},{key:"getZoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,a.o8)(n.Z.prototype.getZoom)&&(0,u.Z)((0,l.NA)("exception").getzoom_method);var t=this.getImpl().getZoom();return e||(t=Math.floor(t)),t}},{key:"getMinZoom",value:function(){return(0,a.o8)(n.Z.prototype.getMinZoom)&&(0,u.Z)((0,l.NA)("exception").getzoom_method),this.getImpl().getMinZoom()}},{key:"getMaxZoom",value:function(){return(0,a.o8)(n.Z.prototype.getMaxZoom)&&(0,u.Z)((0,l.NA)("exception").getzoom_method),this.getImpl().getMaxZoom()}},{key:"setZoom",value:function(e){(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").no_zoom),(0,a.o8)(n.Z.prototype.setZoom)&&(0,u.Z)((0,l.NA)("exception").setzoom_method);try{var t=p.sP(e);this._userZoom=t,this.getImpl().setZoom(t)}catch(e){throw m.error(e.toString()),e}return this}},{key:"setMinZoom",value:function(e){(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").no_zoom),(0,a.o8)(n.Z.prototype.setMinZoom)&&(0,u.Z)((0,l.NA)("exception").setzoom_method);var t=p.lJ(e);return this.minZoom=t,this.getImpl().setMinZoom(t),this}},{key:"setMaxZoom",value:function(e){(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").no_zoom),(0,a.o8)(n.Z.prototype.setMaxZoom)&&(0,u.Z)((0,l.NA)("exception").setzoom_method);var t=p.Hw(e);return this.userMaxZoom_=t,this.getImpl().setMaxZoom(t),this}},{key:"getCenter",value:function(){return(0,a.o8)(n.Z.prototype.getCenter)&&(0,u.Z)((0,l.NA)("exception").getcenter_method),this.getImpl().getCenter()}},{key:"setZoomConstrains",value:function(e){return(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").no_zoomConstrains),(0,a.o8)(n.Z.prototype.setZoomConstrains)&&(0,u.Z)((0,l.NA)("exception").setZoomConstrains_method),this.getImpl().setZoomConstrains(e),this}},{key:"getZoomConstrains",value:function(){return(0,a.o8)(n.Z.prototype.setZoomConstrains)&&(0,u.Z)((0,l.NA)("exception").setZoomConstrains_method),this.getImpl().getZoomConstrains()}},{key:"setCenter",value:function(e){var t=this;(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").no_center),(0,a.o8)(n.Z.prototype.setCenter)&&(0,u.Z)((0,l.NA)("exception").setcenter_method);var r=p.be(e);return this.getImpl().setCenter(r),this.userCenter_=r,!0===r.draw&&(this.drawLayer_.clear(),this.centerFeature_=new g.Z("__mapeacenter__",{type:"Feature",geometry:{type:"Point",coordinates:[r.x,r.y]},properties:{vendor:{mapea:{click:function(e){var r=t.getLabel();(0,a.Ew)(r)||r.show(t)}}}}}),this.drawFeatures([this.centerFeature_])),this}},{key:"getFeatureCenter",value:function(){return this.centerFeature_}},{key:"removeCenter",value:function(){this.removeFeatures(this.centerFeature_),this.centerFeature_=null,this.zoomToMaxExtent()}},{key:"getResolutions",value:function(){return(0,a.o8)(n.Z.prototype.getResolutions)&&(0,u.Z)((0,l.NA)("exception").getresolutions_method),this.getImpl().getResolutions()}},{key:"setResolutions",value:function(e){(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").no_resolutions),(0,a.o8)(n.Z.prototype.setResolutions)&&(0,u.Z)((0,l.NA)("exception").setresolutions_method);var t=p._5(e);return this.getImpl().setResolutions(t),this}},{key:"getScale",value:function(){return(0,a.o8)(n.Z.prototype.getScale)&&(0,u.Z)((0,l.NA)("exception").getscale_method),this.getImpl().getScale()}},{key:"getExactScale",value:function(){return(0,a.o8)(n.Z.prototype.getExactScale)&&(0,u.Z)("La implementación usada no posee el método getScale"),this.getImpl().getExactScale()}},{key:"getProjection",value:function(){return(0,a.o8)(n.Z.prototype.getProjection)&&(0,u.Z)((0,l.NA)("exception").getprojection_method),this.getImpl().getProjection()}},{key:"setProjection",value:function(e,t){var r=e;(0,a.Ew)(r)&&(0,u.Z)((0,l.NA)("exception").no_projection),(0,a.o8)(n.Z.prototype.setProjection)&&(0,u.Z)((0,l.NA)("exception").setprojection_method);try{var i=this.getProjection();r=p.CJ(r),this.getImpl().setProjection(r),this._defaultProj=this._defaultProj&&!0===t,this.fire(d.h9,[i,r])}catch(e){m.error(e.toString()),String(e).indexOf("El formato del parámetro projection no es correcto")>=0&&this.setProjection(M.config.DEFAULT_PROJ,!0)}return this}},{key:"getPlugins",value:function(e){var t=this,r=e;(0,a.Ft)(r)?r=[]:(0,a.kJ)(r)||(r=[r]);var n=[];return 0===r.length?n=this._plugins:r.forEach((function(e){n=n.concat(t._plugins.filter((function(t){return e===t.name})))})),n}},{key:"addPlugin",value:function(e){return(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").no_plugins),(0,a.o8)(e.addTo)&&(0,u.Z)((0,l.NA)("exception").no_add_plugin_to_map),this._plugins.push(e),e.addTo(this),this}},{key:"removePlugins",value:function(e){var t=this,r=e;return(0,a.Ew)(r)&&(0,u.Z)((0,l.NA)("exception").no_plugin_to_remove),(0,a.kJ)(r)||(r=[r]),(r=[].concat(r)).length>0&&r.forEach((function(e){e.destroy(),t._plugins=t._plugins.filter((function(t){return e.name!==t.name}))})),this}},{key:"getEnvolvedExtent",value:function(){var e=this;return new Promise((function(t){var r=e.getBaseLayers().find((function(e){return e.isVisible()}));if((0,a.Ew)(r)){var n=e.getLayers().filter((function(e){return"__draw__"!==e.name}));Promise.all(n.map((function(e){return e.calculateMaxExtent()}))).then((function(r){var n=(0,a.Ew)(r)?[e.getProjection().getExtent()]:r,i=(0,a.ZM)(n);t(i)}))}else t(r.getMaxExtent(t))}))}},{key:"zoomToMaxExtent",value:function(e){var t=this;return this.calculateMaxExtent().then((function(r){(!0!==e||(0,a.Ew)(t._userZoom))&&t.setBbox(r),t._finishedMaxExtent=!0,t._checkCompleted()})),this}},{key:"setTicket",value:function(e){return(0,a.Ew)(e)||(-1===M.config.PROXY_POST_URL.indexOf("ticket=")&&M.config("PROXY_POST_URL",(0,a.h1)(M.config.PROXY_POST_URL,{ticket:e})),-1===M.config.PROXY_URL.indexOf("ticket=")&&M.config("PROXY_URL",(0,a.h1)(M.config.PROXY_URL,{ticket:e}))),this}},{key:"getInitCenter_",value:function(){var e=this;return new Promise((function(t,r){e.calculateMaxExtent().then((function(e){var r;r=(0,a.kJ)(e)?{x:(e[0]+e[2])/2,y:(e[1]+e[3])/2}:{x:(e.x.max+e.x.min)/2,y:(e.y.max+e.y.min)/2},t(r)}))}))}},{key:"destroy",value:function(){return(0,a.o8)(n.Z.prototype.destroy)&&(0,u.Z)((0,l.NA)("exception").destroy_method),this.getImpl().destroy(),this}},{key:"addLabel",value:function(e,t){var r=this,i=void 0===e.panMapIfOutOfView||e.panMapIfOutOfView;(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").no_projection),(0,a.o8)(n.Z.prototype.addLabel)&&(0,u.Z)((0,l.NA)("exception").addlabel_method);var o=null,s=null;if((0,a.Kn)(e)?(o=(0,a.Aj)(e.text),s=e.coord):(o=(0,a.Aj)(e),s=t),s=(0,a.Ew)(s)?this.getCenter():p.be(s),(0,a.Ew)(s))this.getInitCenter_().then((function(e){var t=new c.Z(o,e,i);r.getImpl().addLabel(t)}));else{var f=new c.Z(o,s,i);this.getImpl().addLabel(f)}return this}},{key:"getLabel",value:function(){return this.getImpl().getLabel()}},{key:"removeLabel",value:function(){return this.getImpl().removeLabel()}},{key:"drawPoints",value:function(e){var t=e;(0,a.Ew)(t)&&(0,u.Z)((0,l.NA)("exception").no_point),(0,a.kJ)(t)||(t=[t]);var r=t.map((function(e){var t={type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},properties:{}};return(0,a.mf)(e.click)&&(t.properties.vendor={mapea:{click:e.click}}),new g.Z(null,t)}));this.drawLayer_.addFeatures(r)}},{key:"drawFeatures",value:function(e){return this.drawLayer_.addFeatures(e),this}},{key:"removeFeatures",value:function(e){return this.drawLayer_.removeFeatures(e),this}},{key:"addPanels",value:function(e){var t=this,r=e;return(0,a.Ew)(r)||((0,a.kJ)(r)||(r=[r]),r.forEach((function(e){var r=t._panels.some((function(t){return t.equals(e)}));if(e instanceof N.Z&&!r){t._panels.push(e);var n="div.m-area".concat(e.position),i=t._areasContainer.querySelector(n);e.addTo(t,i)}}))),this}},{key:"removePanel",value:function(e){return e.getControls().length>0&&(0,u.Z)((0,l.NA)("exception").remove_control_from_panel),e instanceof N.Z&&(e.destroy(),this._panels=this._panels.filter((function(t){return!t.equals(e)}))),this}},{key:"getPanels",value:function(e){var t=this,r=e,n=[];return(0,a.Ew)(r)?n=this._panels:((0,a.kJ)(r)||(r=[r]),r.forEach((function(e){t._panels.filter((function(t){return t.name===e})).forEach((function(e){(0,a.Ew)(e)||n.push(e)}))}))),n}},{key:"createMainPanels_",value:function(){this._areasContainer=document.createElement("div"),this._areasContainer.classList.add("m-areas");var e=document.createElement("div");e.classList.add("m-area"),e.classList.add("m-top"),e.classList.add("m-left");var t=document.createElement("div");t.classList.add("m-area"),t.classList.add("m-top"),t.classList.add("m-right");var r=document.createElement("div");r.classList.add("m-area"),r.classList.add("m-bottom"),r.classList.add("m-left");var n=document.createElement("div");n.classList.add("m-area"),n.classList.add("m-bottom"),n.classList.add("m-right"),this._areasContainer.appendChild(e),this._areasContainer.appendChild(t),this._areasContainer.appendChild(r),this._areasContainer.appendChild(n),this.getContainer().appendChild(this._areasContainer)}},{key:"getContainer",value:function(){return(0,a.o8)(n.Z.prototype.getContainer)&&(0,u.Z)((0,l.NA)("exception").getcontainer_method),this.getImpl().getContainer()}},{key:"getMapImpl",value:function(){return(0,a.o8)(n.Z.prototype.getMapImpl)&&(0,u.Z)((0,l.NA)("exception").getmapimpl_method),this.getImpl().getMapImpl()}},{key:"getPopup",value:function(){return this.popup_}},{key:"removePopup",value:function(){return(0,a.o8)(n.Z.prototype.removePopup)&&(0,u.Z)((0,l.NA)("exception").removepopup_method),(0,a.Ew)(this.popup_)||(this.getImpl().removePopup(this.popup_),this.popup_.destroy(),this.popup_=null),this}},{key:"addPopup",value:function(e,t){return(0,a.Ew)(e)&&(0,u.Z)((0,l.NA)("exception").no_popup),e instanceof f.Z||(0,u.Z)((0,l.NA)("exception").invalid_popup),(0,a.Ew)(this.popup_)||this.removePopup(),this.popup_=e,this.popup_.addTo(this,t),this}},{key:"_checkCompleted",value:function(){this._finishedInitCenter&&this._finishedMaxExtent&&this._finishedMapImpl&&(this._finishedMap=!0,this.fire(d.Qc))}},{key:"on",value:function(e,t,r){ae(ce(te.prototype),"on",this).call(this,e,t,r),e===d.Qc&&!0===this._finishedMap&&this.fire(d.Qc)}},{key:"evtSetAttributions_",value:function(){var e=this;this.on(d.N5,(function(t){if(e.getControls().some((function(e){return"attributions"===e.name}))){var r=t;Array.isArray(r)||(r=[r]),r.forEach((function(t){if(t.attribution&&"__draw__"!==r.name){var n=t.attribution;"string"==typeof n||n.name||(n.name=t.name),e.addAttribution(n,!1)}}))}}))}},{key:"evtRemoveAttributions_",value:function(){var e=this;this.on(d.K6,(function(t){var r=e.getControls().filter((function(e){return"attributions"===e.name}))[0];if(t&&r){var n=t;Array.isArray(t)||(n=[t]),n.forEach((function(t){var n=t.attribution;if("__draw__"!==t.name)if(/<[a-z][\s\S]*>/i.test(n)){var i=r.collectionsAttributions_.filter((function(e){return e.attribuccion===n}));i.length>0&&e.removeAttribution(i[0].id)}else n&&e.removeAttribution(n.id)}))}}))}},{key:"refresh",value:function(){return!(0,a.o8)(this.getImpl().refresh)&&(0,a.mf)(this.getImpl().refresh)&&this.getImpl().refresh(),this.getLayers().forEach((function(e){return e.refresh()})),this}},{key:"defaultProj",get:function(){return this._defaultProj}},{key:"isFinished",value:function(){return this._finishedMap}},{key:"areasContainer",get:function(){return this._areasContainer}}],i=[{key:"LAYER_SORT",value:function(e,t,r){if(!(0,a.Ew)(e)&&!(0,a.Ew)(t)){var n=e.getZIndex()-t.getZIndex();return 0!==n||(0,a.o8)(r)?n:r.getImpl().layers_.findIndex((function(t){return t.name===e.name}))-r.getImpl().layers_.findIndex((function(e){return e.name===t.name}))}return 0}}],r&&ie(t.prototype,r),i&&ie(t,i),Object.defineProperty(t,"prototype",{writable:!1}),te}(i.Z);fe.DRAWLAYER_STYLE={fill:{color:"#009e00"},stroke:{color:"#fcfcfc",width:2},radius:7};const he=fe},68079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(30306),i=r(40398);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}const s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventsManager_=new n.Z}var t,r,o;return t=e,(r=[{key:"on",value:function(e,t,r){return this.eventsManager_.add(e,t,r)}},{key:"once",value:function(e,t,r){return this.eventsManager_.add(e,t,r,!0)}},{key:"un",value:function(e,t,r){this.eventsManager_.remove(e,t,r)}},{key:"unByKey",value:function(e,t){this.eventsManager_.remove(e,t)}},{key:"fire",value:function(e,t){var r=t;(0,i.Ew)(r)&&(r=[this]),this.eventsManager_.fire(e,r)}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},60894:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(28640),i=r(73810),o=r.n(i),a=r(40398),s=r(81638),l=r(391),u=r(77055),c=r(2808);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}function g(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=g((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(this,e),this.icon=t.icon,this.title=t.title,this.content=t.content,(!0===t.intelligence||!(0,a.o8)(t.intelligence)&&!0===t.intelligence.activate)&&(this.content=(0,a.VC)(this.content,t.intelligence.sizes)),this.listeners=t.listeners||[]})),v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(r,e);var t=p(r);function r(e){var i;m(this,r);var o=new n.Z(e);return(i=t.call(this,o)).coord_=null,i.tabs_=[],i.element_=null,i.status_=r.status.COLLAPSED,i}return g(r,[{key:"getTabs",value:function(){return this.tabs_}},{key:"removeTab",value:function(e){this.tabs_=this.tabs_.filter((function(t){return t.content!==e.content})),this.update()}},{key:"addTab",value:function(e){var t=e;t instanceof _||(t=new _(e)),this.tabs_.push(t),this.update()}},{key:"addTo",value:function(e,t){if(this.map_=e,(0,a.Ew)(this.element_)){var r=(0,l.Mp)(o(),{jsonp:!0,vars:{tabs:this.tabs_}});this.tabs_.length>0&&(this.element_=r,this.addEvents(r),this.getImpl().addTo(e,r),this.show(t))}else this.getImpl().addTo(e,this.element_),this.show(t);(/Mobi|Android/i.test(window.navigator.userAgent)||c.Z.WIDTH<=M.config.MOBILE_WIDTH)&&(M.config.MOVE_MAP_EXTRACT=!1),M.config.MOVE_MAP_EXTRACT&&this.map_.getMapImpl().getView().animate({zoom:this.map_.getZoom(),center:(0,a.vp)("m-popup",this.map_),duration:1e3})}},{key:"update",value:function(){if(!(0,a.Ew)(this.map_)){var e=(0,l.Mp)(o(),{jsonp:!0,vars:{tabs:this.tabs_}});this.tabs_.length>0&&(this.element_=e,this.addEventTabs(this.tabs_[0],e),this.addEvents(e),this.getImpl().setContainer(e),this.show(this.coord_))}}},{key:"show",value:function(e){var t=this;this.coord_=e,this.getImpl().show(this.coord_,(function(){t.fire(u.nr)}))}},{key:"hide",value:function(e){(0,a.Ew)(e)||e.preventDefault(),this.getImpl().hide()}},{key:"switchTab",value:function(e){if(this.tabs_.length>e){var t=this.tabs_[e];this.setContent_(t.content),this.addEventTabs(t,this.getContent()),this.show(this.coord_)}}},{key:"addEventTabs",value:function(e,t){e.listeners.forEach((function(e){!0===e.all?t.querySelectorAll(e.selector).forEach((function(t){t.addEventListener(e.type,(function(t){return e.callback(t)}))})):t.querySelector(e.selector).addEventListener(e.type,(function(t){return e.callback(t)}))}))}},{key:"setContent_",value:function(e){this.getContent().innerHTML=e}},{key:"getContent",value:function(){return this.getImpl().getContent()}},{key:"addEvents",value:function(e){var t,n=this,i=e,o=i.querySelectorAll("div.m-tab");Array.prototype.forEach.call(o,(function(e){e.addEventListener("click",(function(r){r.preventDefault();var i=r.clientY;if("click"===r.type||Math.abs(t-i)<5){Array.prototype.forEach.call(o,(function(e){e.classList.remove("m-activated")})),e.classList.add("m-activated");var a=e.getAttribute("data-index");n.switchTab(a)}})),e.addEventListener("touchend",(function(r){r.preventDefault();var i=r.clientY;if("touchend"===r.type||Math.abs(t-i)<5){Array.prototype.forEach.call(o,(function(e){e.classList.remove("m-activated")})),e.classList.add("m-activated");var a=e.getAttribute("data-index");n.switchTab(a)}}))}));var s=i.querySelector("a.m-popup-closer");s.addEventListener("click",this.hide.bind(this),!1),s.addEventListener("touchend",this.hide.bind(this),!1);var l=i.querySelector("div.m-tabs");if((0,a.Ew)(l)&&(l=i.querySelector("div.m-content > div.m-header")),!(0,a.Ew)(l)){var u;l.addEventListener("touchstart",(function(e){e.preventDefault(),t=e.touches[0].clientY,n.status_===r.status.COLLAPSED?u=.9*c.Z.HEIGHT:n.status_===r.status.DEFAULT?u=.45*c.Z.HEIGHT:n.status_===r.status.FULL&&(u=0),i.classList.add("m-no-animation")}),!1),l.addEventListener("touchmove",(function(e){e.preventDefault(),n.touchY=e.touches[0].clientY;var r=n.touchY-t;i.style.top="".concat(u+r,"px")}),!1),l.addEventListener("touchend",(function(e){e.preventDefault(),n.manageCollapsiblePopup_(t,n.touchY)}),!1);var f=window.matchMedia("(max-width: 768px)");setTimeout((function(){return n.manageTransform(f,i)}),10),f.addEventListener("change",(function(e){n.manageTransform(e,i)})),l.addEventListener("mouseup",(function(e){e.preventDefault(),n.tabs_.length<=1&&(n.status_===r.status.COLLAPSED?n.setStatus_(r.status.DEFAULT):n.status_===r.status.DEFAULT?n.setStatus_(r.status.FULL):n.setStatus_(r.status.COLLAPSED))}))}}},{key:"setStatus_",value:function(e){e!==this.status_&&(this.element_.classList.remove(this.status_),this.status_=e,this.element_.classList.add(this.status_),this.element_.style.top="",this.element_.classList.remove("m-no-animation"),c.Z.WIDTH<=M.config.MOBILE_WIDTH&&this.getImpl().centerByStatus(e,this.coord_))}},{key:"manageTransform",value:function(e,t){t&&t.parentElement&&(e.matches?t.parentElement.classList.add("unsetTransform"):t.parentElement.classList.remove("unsetTransform"))}},{key:"manageCollapsiblePopup_",value:function(e,t){var n=100*t/c.Z.HEIGHT;100*Math.abs(e-t)/c.Z.HEIGHT>10?this.status_===r.status.COLLAPSED?n<45?this.setStatus_(r.status.FULL):n<85?this.setStatus_(r.status.DEFAULT):this.setStatus_(r.status.COLLAPSED):this.status_===r.status.DEFAULT?n>45?this.setStatus_(r.status.COLLAPSED):n<45?this.setStatus_(r.status.FULL):this.setStatus_(r.status.DEFAULT):this.status_===r.status.FULL&&(n>45?this.setStatus_(r.status.COLLAPSED):n>0?this.setStatus_(r.status.DEFAULT):this.setStatus_(r.status.FULL)):this.setStatus_(this.status_)}},{key:"getCoordinate",value:function(){return this.coord_}},{key:"setCoordinate",value:function(e){this.coord_=e,(0,a.Ew)(this.element_)||this.getImpl().show(e)}},{key:"destroy",value:function(){this.tabs_.length=0,this.coord_=null,this.fire(u.Kn)}}]),r}(s.Z);v.status={},v.status.COLLAPSED="m-collapsed",v.status.DEFAULT="m-default",v.status.FULL="m-full";const A=v},17486:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(81945),i=r.n(n),o=r(27483),a=r.n(o),s=r(66149),l=r(5922),u=r(391),c=r(2532),f=r(68772),h=r(40398),p=r(81517),d=r(4143),y=r(71145);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===g(o)?o:String(o)),n)}var i,o}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(l,e);var t,r,n,o=v(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=new s.Z;return(e=o.call(this,r,l.NAME)).position=t.position,e.closePanel=t.closePanel,e.urlAttribute=t.urlAttribute||"Gobierno de España",e.options=t,e.url_=t.url||"https://componentes.cnig.es/api-core/files/attributions/WMTS_PNOA_20170220/atribucionPNOA_Url.kml",e.type_=t.type||"kml",e.layerName_=t.layerName||"attributions",e.layer_=t.layer,e.scale_=Number.parseInt(t.scale,10)||1e4,e.attributionParam_=t.attributionParam||"atribucion",e.urlParam_=t.urlParam||"url",e.defaultAttribution_=t.defaultAttribution||"Instituto Geogr&aacute;fico Nacional",e.defaultURL_=t.defaultURL||"https://www.ign.es/",e.tooltip_=t.tooltip||(0,c.NA)("attributionsControl").tooltip,e.collectionsAttributions_=t.collectionsAttributions||[],e.collectionsAttributions_=e.collectionsAttributions_.map((function(t){return"string"==typeof t?e.transformString(t):t})),e.order=t.order,e}return t=l,(r=[{key:"transformString",value:function(e){return{attribuccion:e,id:window.crypto.randomUUID?window.crypto.randomUUID():(new Date).getTime()}}},{key:"createView",value:function(e){var t=this;return this.map_=e,new Promise((function(e,r){var n=(0,u.Mp)(i(),{vars:{collapsible:window.innerWidth<769,order:t.order}});n.querySelector("#close-button").addEventListener("click",(function(){return t.closePanel()})),t.html_=n,t.initMode(),t.onMoveEnd((function(){t.changeAttributions()})),t.accessibilityTab(n),t.map_.getLayers().forEach((function(e){var r=e.attribution;r&&("string"==typeof r?t.addHTMLContent(r):t.addAttributions(r))})),e(n)}))}},{key:"initMode",value:function(){var e=this;this.collectionsAttributions_.forEach((function(t){var r=t.id,n=t.contentAttributions,i=t.contentType;n&&e.createVectorLayer(r,n,i)}))}},{key:"createVectorLayer",value:function(e,t,r){var n=this.layer_;if(!(n instanceof d.Z)){var i={name:"".concat(e,"_attributions"),url:t,legend:"".concat(e,"_attributions")};"geojson"===r?n=new d.Z(i,{displayInLayerSwitcher:!1}):"kml"===r?n=new y.Z(i,{displayInLayerSwitcher:!1}):this.type}this.map_.getLayers({name:n}).length<1&&(this.map_.addLayers(n),n.displayInLayerSwitcher=!1,n.setVisible(!1))}},{key:"changeAttributions",value:function(){var e=this;this.clearContent(),this.collectionsAttributions_.forEach((function(t){if("string"==typeof t&&(t=e.transformString(t)),/<[a-z][\s\S]*>/i.test(t.attribuccion))e.addHTMLContent(t.attribuccion);else{var r=!1,n=e.map_.getZoom(),i=[],o=!1;if(e.checkDefaultAttribution(t)&&(0,h.Ew)(t.name)&&(o=e.defaultAttribution(t,n,i)),i=o||[t],e.map_.getScale()<=e.scale_){e.setVisible(!0);var a=e.map_.getLayers().filter((function(e){return!(!e.name&&!e.legend)&&(e.name?e.name.includes("".concat(t.id,"_attributions")):e.legend.includes("".concat(t.id,"_attributions")))}));if(a.length>0){var s=a[0].getFeatures();r=e.getMapAttributions(s)}}r&&(i=i.concat(r)),e.addContent(i)}}))}},{key:"defaultAttribution",value:function(e,t){var r=this.map_.getLayers().filter((function(e){return"WMTS"===e.type&&!e.displayInLayerSwitcher&&"OI.OrthoimageCoverage"===e.name})).length>0;return void 0!==e&&"OI.OrthoimageCoverage"===e.name||r?t<14?[{name:"Copernicus Sentinel 2019",url:"https://sentinel.esa.int/web/sentinel/home"}]:[{name:"Sistema Cartográfico Nacional",url:"http://www.scne.es/"}]:void 0===e||"IGNBaseTodo"!==e.name&&"EL.GridCoverageDSM"!==e.name?void 0!==e&&"LC.LandCoverSurfaces"===e.name&&(t<14?[{name:"CORINE-Land Cover. Instituto Geográfico Nacional",url:this.defaultURL_}]:[{name:"Sistema Cartográfico Nacional",url:"http://www.scne.es/"}]):[{name:"Sistema Cartográfico Nacional",url:"http://www.scne.es/"}]}},{key:"checkDefaultAttribution",value:function(e){return["OI.OrthoimageCoverage","EL.GridCoverageDSM","IGNBaseTodo","LC.LandCoverSurfaces"].includes(e.name)}},{key:"addContent",value:function(e){var t=this,r=this.html_,n=e[0].name||"",i=e.map((function(e){var r=e.url?"a":"p",n=document.createElement(r);"a"===r&&(n.target="_blank",n.href=e.url||"",n.setAttribute("rol","link")),n.setAttribute("tabindex",t.order);var i=e.description?e.description:"".concat(e.name,", ").concat(t.urlAttribute);return n.innerHTML=i||"",n})),o=document.createElement("div");o.classList.add("attributionElements"),i[0].innerHTML="<span>".concat(n,"</span> ").concat(i[0].innerHTML),i.forEach((function(e){o.append(e)})),r.append(o)}},{key:"addHTMLContent",value:function(e){this.html_.innerHTML+='<section class="attributionElements">'.concat(e,"</section>")}},{key:"clearContent",value:function(){if(!(0,h.Ew)(this.html_)){var e=this.html_;e.querySelectorAll(".attributionElements").forEach((function(t){return e.removeChild(t)}))}}},{key:"setVisible",value:function(e){this.html_.style.display=!1===e?"none":""}},{key:"getMapAttributions",value:function(e){var t=this;return this.updateBBoxFeature(),(0,f.S3)(this.bboxFeature_).execute(e).map((function(e){return{name:e.getAttribute(t.attributionParam_)||"",url:e.getAttribute(t.urlParam_)||t.defaultURL_}})).filter((function(e,t,r){return r.map((function(e){return e.attribution})).indexOf(e.attribution)===t}))}},{key:"addAttributions",value:function(e){var t=this;if(!this.collectionsAttributions_.some((function(t){var r=t.id;return e===r})))if(/<[a-z][\s\S]*>/i.test(e.attribuccion))this.addHTMLContent(e.attribuccion),this.collectionsAttributions_.push(e);else if(e.collectionsAttributions)e.collectionsAttributions.forEach((function(r){t.collectionsAttributions_.push(e),t.addHTMLContent(r)}));else{this.collectionsAttributions_.push(e),this.addContent([e]);var r=e.id,n=e.contentType,i=e.contentAttributions;this.createVectorLayer(r,i,n)}}},{key:"closePanel",value:function(){this.getPanel().collapse()}},{key:"updateBBoxFeature",value:function(){var e=this.map_.getBbox(),t=e.x,r=e.y;this.bboxFeature_=new p.Z("bbox_feature",{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[t.min,r.min],[t.min,r.max],[t.max,r.max],[t.max,r.min],[t.min,r.min]]]}})}},{key:"setCollapsiblePanel",value:function(e){this.getPanel()&&this.getPanel().getTemplatePanel()&&(e.target.innerWidth<769?(this.getPanel().getTemplatePanel().classList.remove("no-collapsible"),this.closePanel()):(this.getPanel().getTemplatePanel().classList.add("no-collapsible"),this.getPanel().getTemplatePanel().classList.remove("collapsed")))}},{key:"getAttributionsFromMap",value:function(e){return e.map((function(e){return e.getAttributions()})).filter(Boolean)}},{key:"onMoveEnd",value:function(e){this.impl_.registerEvent("moveend",this.map_,(function(t){return e(t)}))}},{key:"getHelp",value:function(){var e=(0,c.NA)("attributionsControl").textHelp;return{title:l.NAME,content:new Promise((function(t){t((0,u.Mp)(a(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"assets/images"),translations:{help1:e.text1,help2:e.text2}}}))}))}}},{key:"equals",value:function(e){var t=e instanceof l;return t}},{key:"getAttributions",value:function(){return this.collectionsAttributions_}},{key:"setAttributions",value:function(e){this.collectionsAttributions_=e,this.changeAttributions()}},{key:"destroy",value:function(){this.getImpl().destroy()}},{key:"accessibilityTab",value:function(e){var t=this;e.querySelectorAll('[tabindex="0"]').forEach((function(e){return e.setAttribute("tabindex",t.order)}))}}])&&m(t.prototype,r),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(l.Z);b.NAME="attributions";const w=b},81213:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(33841),i=r.n(n),o=r(98429),a=r.n(o),s=r(39645),l=r(9396),u=r(86659),c=r(4884),f=r(73477),h=r(70514),p=r(5922),d=r(391),y=r(77055),g=r(2532);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===m(o)?o:String(o)),n)}var i,o}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(p,e);var t,r,n,o=A(p);function p(e,t,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var i=new s.Z;return n=o.call(this,i,p.NAME),e.getBaseLayers().forEach((function(t){t.on(y.VX,e.removeLayers(t))})),n.layers=M.config.backgroundlayers.slice(0,5).map((function(e){return{id:e.id,title:e.title,layers:e.layers.map((function(e){var t=e;return"string"==typeof e&&(/QUICK.*/.test(e)&&(t=(0,h.l6)(e.replace("QUICK*",""))),"string"==typeof t&&(t=/WMTS.*/.test(t)?new u.Z(t):/TMS.*/.test(t)?new c.Z(t):/MapLibre.*/.test(t)?new f.Z(t):new l.Z(t))),t}))}})),n.flattedLayers=n.layers.reduce((function(e,t){return e.concat(t.layers)}),[]),n.activeLayer=-1,n.idLayer=null==t?0:t,n.visible=null==r||r,n}return t=p,(r=[{key:"createView",value:function(e){var t=this;return this.map=e,new Promise((function(e,r){var n=(0,d.Mp)(i(),{vars:{layers:t.layers}});t.html=n,t.listen(n),t.uniqueButton=t.html.querySelector("#m-baselayerselector-unique-btn"),t.uniqueButton.innerHTML=t.layers[0].title,t.on(y.GY,(function(){var e=t.visible;t.idLayer>-1&&(window.innerWidth>M.config.MOBILE_WIDTH&&(t.activeLayer=t.idLayer),t.showBaseLayer({target:{parentElement:n}},t.layers[t.activeLayer],t.activeLayer)),!1===e&&t.map_.removeLayers(t.map_.getBaseLayers())})),e(n)}))}},{key:"equals",value:function(e){return e instanceof p}},{key:"showBaseLayer",value:function(e,t,r){var n=this.handlerClickDesktop.bind(this);window.innerWidth<=M.config.MOBILE_WIDTH&&(n=this.handlerClickMobile.bind(this)),n(e,t,r)}},{key:"changeStyleResponsive",value:function(e){M.config.MOBILE_WIDTH=e?"2000":"768",document.querySelectorAll(".m-plugin-baselayer .m-panel-controls #div-contenedor button").forEach((function(t){t.classList.contains("m-background-unique-btn")?t.style.display=e?"block":"none":t.style.display=e?"none":"block"}))}},{key:"handlerClickDesktop",value:function(e,t,r){this.removeLayers(),this.visible=!1;var n=t.layers,i=t.title,o=e.target.parentElement.querySelector("#m-baselayerselector-".concat(t.id)).classList.contains("activeBaseLayerButton");n.forEach((function(e,t,r){return e.setZIndex(t-r.length)})),e.target.parentElement.querySelectorAll('button[id^="m-baselayerselector-"]').forEach((function(e){e.classList.contains("activeBaseLayerButton")&&e.classList.remove("activeBaseLayerButton")})),o||(this.visible=!0,this.activeLayer=r,e.target.parentElement.querySelector("#m-baselayerselector-unique-btn").innerText=i,e.target.parentElement.querySelector("#m-baselayerselector-".concat(t.id)).classList.add("activeBaseLayerButton"),this.map.addLayers(n))}},{key:"handlerClickMobile",value:function(e){this.removeLayers(),this.activeLayer+=1,this.activeLayer%=this.layers.length;var t=this.layers[this.activeLayer],r=t.layers,n=t.id,i=t.title;r.forEach((function(e,t,r){return e.setZIndex(t-r.length)})),e.target.parentElement.querySelectorAll('button[id^="m-baselayerselector-"]').forEach((function(e){e.classList.contains("activeBaseLayerButton")&&e.classList.remove("activeBaseLayerButton")})),e.target.innerHTML=i,e.target.parentElement.querySelector("#m-baselayerselector-".concat(n)).classList.add("activeBaseLayerButton"),this.map.addLayers(r)}},{key:"removeLayers",value:function(){this.map.removeLayers(this.flattedLayers),this.map.removeLayers(this.map.getBaseLayers())}},{key:"listen",value:function(e){var t=this;e.querySelectorAll("button.m-background-group-btn").forEach((function(e,r){return e.addEventListener("click",(function(e){return t.showBaseLayer(e,t.layers[r],r)}))})),e.querySelector("#m-baselayerselector-unique-btn").addEventListener("click",(function(e){return t.showBaseLayer(e)}))}},{key:"getHelp",value:function(){var e=(0,g.NA)("backgroundlayers").textHelp;return{title:p.NAME,content:new Promise((function(t){t((0,d.Mp)(a(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"assets/images"),translations:{help1:e.text1}}}))}))}}}])&&_(t.prototype,r),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(p.Z);w.NAME="backgroundlayers";const E=w},5922:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(40398),i=r(81971),o=r(81638),a=r(77055),s=r(2532);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(h,e);var t,r,o,l=f(h);function h(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var o=e;return r=l.call(this,o),(0,n.o8)(o.addTo)&&(0,i.Z)((0,s.NA)("exception").addto_method),(0,n.o8)(o.getElement)&&(0,i.Z)((0,s.NA)("exception").getelement_method),(0,n.o8)(o.isByDefault)&&(o.isByDefault=!0),r.name=t,r.map_=null,r.element_=null,r.activationBtn_=null,r.activated=!1,r.panel_=null,r.controls_=null,r}return t=h,(r=[{key:"setImpl",value:function(e){var t=e;(0,n.o8)(t.addTo)&&(0,i.Z)((0,s.NA)("exception").addto_method),(0,n.o8)(t.getElement)&&(0,i.Z)((0,s.NA)("exception").getelement_method),(0,n.o8)(t.isByDefault)&&(t.isByDefault=!0)}},{key:"addTo",value:function(e){var t=this;this.map_=e;var r=this.getImpl(),n=this.createView(e);n instanceof Promise?n.then((function(n){t.manageActivation(n),r.addTo(e,n),t.fire(a.GY)})):(this.manageActivation(n),r.addTo(e,n),this.fire(a.GY))}},{key:"createView",value:function(e){}},{key:"manageActivation",value:function(e){var t=this;this.element_=e,this.activationBtn_=this.getActivationButton(this.element_),(0,n.Ew)(this.activationBtn_)||this.activationBtn_.addEventListener("click",(function(e){e.preventDefault(),t.activated?(t.deactivate(),t.activated=!1):(t.activate(),t.activated=!0)}),!1)}},{key:"getActivationButton",value:function(e){}},{key:"activate",value:function(){(0,n.Ew)(this.element_)||this.element_.classList.add("activated"),(0,n.o8)(this.getImpl().activate)||this.getImpl().activate(),this.activated=!0,this.fire(a.J_)}},{key:"deactivate",value:function(){(0,n.Ew)(this.element_)||this.element_.classList.remove("activated"),(0,n.o8)(this.getImpl().deactivate)||this.getImpl().deactivate(),this.activated=!1,this.fire(a.Lt)}},{key:"getElement",value:function(){return this.getImpl().getElement()}},{key:"setPanel",value:function(e){this.panel_=e}},{key:"getPanel",value:function(){return this.panel_}},{key:"destroy",value:function(){}}])&&u(t.prototype,r),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),h}(o.Z)},42792:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(1597),i=r(73996),o=r.n(i),a=r(5922),s=r(40398),l=r(81971),u=r(2532),c=r(391);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(f,e);var t,r,i,a=d(f);function f(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var i=new n.Z(e,r);return t=a.call(this,i,f.NAME),(0,s.o8)(n.Z)&&(0,l.Z)((0,u.NA)("exception").getfeatureinfo_method),t}return t=f,(r=[{key:"createView",value:function(e){return""}},{key:"getActivationButton",value:function(e){return null}},{key:"getHelp",value:function(){var e=(0,u.NA)("getfeatureinfo").textHelp;return{title:f.NAME,content:new Promise((function(t){t((0,c.Mp)(o(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"assets/images"),translations:{help1:e.text1}}}))}))}}},{key:"equals",value:function(e){var t=!1;return e instanceof f&&(t=this.name===e.name),t}}])&&h(t.prototype,r),i&&h(t,i),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.Z);g.NAME="getfeatureinfo";const m=g},14738:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(94531),i=r(86326),o=r.n(i),a=r(61365),s=r.n(a),l=r(2532),u=r(5922),c=r(40398),f=r(81971),h=r(391);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(u,e);var t,r,i,a=g(u);function u(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(0,c.o8)(n.Z)&&(0,f.Z)((0,l.NA)("exception").location_method);var i=new n.Z(e,t,6e4,r);return a.call(this,i,u.NAME)}return t=u,(r=[{key:"createView",value:function(e){return(0,h.Mp)(o(),{vars:{title:(0,l.NA)("location").title}})}},{key:"getActivationButton",value:function(e){return e.querySelector("button#m-location-button")}},{key:"getHelp",value:function(){var e=(0,l.NA)("location").textHelp;return{title:u.NAME,content:new Promise((function(t){t((0,h.Mp)(s(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"assets/images"),translations:{help1:e.text1,help2:e.text2,help3:e.text2}}}))}))}}},{key:"equals",value:function(e){var t=e instanceof u;return t}},{key:"setTracking",value:function(e){this.getImpl().tracking=e}}])&&d(t.prototype,r),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),u}(u.Z);_.NAME="location";const v=_},30269:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(60072),i=r.n(n),o=r(12984),a=r.n(o),s=r(63997),l=r(5922),u=r(40398),c=r(81971),f=r(391),h=r(2532);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(l,e);var t,r,n,o=g(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=new s.Z(t);return e=o.call(this,r,l.NAME),(0,u.o8)(s.Z)&&(0,c.Z)((0,h.NA)("exception").panzoom_method),e}return t=l,(r=[{key:"createView",value:function(e){return(0,f.Mp)(i())}},{key:"equals",value:function(e){var t=e instanceof l;return t}},{key:"getHelp",value:function(){var e=(0,h.NA)("panzoom").textHelp;return{title:l.NAME,content:new Promise((function(t){t((0,f.Mp)(a(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"assets/images"),translations:{help1:e.text1}}}))}))}}}])&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(l.Z);_.NAME="panzoom";const v=_},63920:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(50107),i=r.n(n),o=r(58242),a=r.n(o),s=r(67719),l=r(5922),u=r(40398),c=r(81971),f=r(391),h=r(2532);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(l,e);var t,r,n,o=g(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=new s.Z(t);return e=o.call(this,r,l.NAME),(0,u.o8)(s.Z)&&(0,c.Z)((0,h.NA)("exception").panzoombar_method),e}return t=l,(r=[{key:"createView",value:function(e){return(0,f.Mp)(i())}},{key:"getHelp",value:function(){var e=(0,h.NA)("panzoombar").textHelp;return{title:l.NAME,content:new Promise((function(t){t((0,f.Mp)(a(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"assets/images"),translations:{help1:e.text1}}}))}))}}},{key:"equals",value:function(e){var t=e instanceof l;return t}}])&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(l.Z);_.NAME="panzoombar";const v=_},13381:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(50006),i=r(2029),o=r.n(i),a=r(45268),s=r.n(a),l=r(5922),u=r(391),c=r(40398),f=r(81971),h=r(2532);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(l,e);var t,r,i,a=g(l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(0,c.o8)(n.Z)&&(0,f.Z)("La implementación usada no puede crear controles Scale");var e=new n.Z;return a.call(this,e,l.NAME)}return t=l,(r=[{key:"createView",value:function(e){return(0,u.Mp)(o(),{vars:{title:(0,h.NA)("rotate").title}})}},{key:"getHelp",value:function(){var e=(0,h.NA)("rotate").textHelp;return{title:l.NAME,content:new Promise((function(t){t((0,u.Mp)(s(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"assets/images"),translations:{help1:e.text1,help2:e.text2}}}))}))}}},{key:"equals",value:function(e){var t=e instanceof l;return t}}])&&d(t.prototype,r),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(l.Z);_.NAME="rotate";const v=_},40711:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(87797),i=r.n(n),o=r(23546),a=r(22221),s=r.n(a),l=r(5922),u=r(40398),c=r(81971),f=r(391),h=r(2532);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(l,e);var t,r,n,a=g(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=new o.Z(t);return e=a.call(this,r,l.NAME),(0,u.o8)(o.Z)&&(0,c.Z)((0,h.NA)("exception").scale_method),e.order=t.order,e}return t=l,(r=[{key:"createView",value:function(e){return(0,f.Mp)(i(),{vars:{title:(0,h.NA)("scale").title,scale:(0,h.NA)("scale").scale,level:(0,h.NA)("scale").level,order:this.order}})}},{key:"getHelp",value:function(){var e=(0,h.NA)("scale").textHelp;return{title:l.NAME,content:new Promise((function(t){t((0,f.Mp)(s(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"assets/images"),translations:{help1:e.text1,help2:e.text2}}}))}))}}},{key:"equals",value:function(e){var t=e instanceof l;return t}}])&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(l.Z);_.NAME="scale";const v=_},1507:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(32391),i=r(90959),o=r.n(i),a=r(11304),s=r.n(a),l=r(5922),u=r(40398),c=r(81971),f=r(391),h=r(2532);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(l,e);var t,r,i,a=g(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var r=new n.Z(t);return e=a.call(this,r,l.NAME),(0,u.o8)(n.Z)&&(0,c.Z)((0,h.NA)("exception").scaleline_method),e}return t=l,(r=[{key:"createView",value:function(e){return(0,f.Mp)(o())}},{key:"getHelp",value:function(){var e=(0,h.NA)("scaleline").textHelp;return{title:l.NAME,content:new Promise((function(t){t((0,f.Mp)(s(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"assets/images"),translations:{help1:e.text1,help2:e.text2,help3:e.text3}}}))}))}}},{key:"equals",value:function(e){var t=e instanceof l;return t}}])&&d(t.prototype,r),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(l.Z);_.NAME="scaleline";const v=_},83473:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,error:()=>h,info:()=>f,remove:()=>u,removeElement:()=>l,show:()=>c,success:()=>p});var n=r(42200),i=r.n(n),o=r(40398),a=r(391),s=r(2532),l=function(e){e.parentElement.removeChild(e)},u=function(){var e=document.querySelectorAll("div.m-dialog");Array.prototype.forEach.call(e,(function(e){e.parentElement.removeChild(e)}))},c=function(e,t,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s={message:e,title:t,severity:r,order:arguments.length>3&&void 0!==arguments[3]?arguments[3]:300};(!0===n.intelligence||!(0,o.o8)(n.intelligence)&&!0===n.intelligence.activate)&&(s.message=(0,o.VC)(e,n.intelligence.sizes));var u=(0,a.Mp)(i(),{vars:s}),c=document.querySelector("div.m-mapea-container");u.querySelector("div.m-button > button").addEventListener("click",(function(e){return l(u)})),c.appendChild(u)},f=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=t;(0,o.Ew)(i)&&(i=(0,s.NA)("dialog").info),c(e,i,"info",r,n)},h=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=t;(0,o.Ew)(i)&&(i=(0,s.NA)("dialog").error),c(e,i,"error",r,n)},p=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=t;(0,o.Ew)(i)&&(i=(0,s.NA)("dialog").success),c(e,i,"success",r,n)};const d={}},30994:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(40398);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}const a=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._listener=t,this._scope=r,this.eventKey_=(0,n.cL)(),this.once_=i}var t,r,i;return t=e,(r=[{key:"fire",value:function(e){var t=e;(0,n.kJ)(t)||(t=[t]),this._listener.apply(this._scope,t)}},{key:"getEventKey",value:function(){return this.eventKey_}},{key:"isOnce",value:function(){return this.once_}},{key:"has",value:function(e,t){var r=!1;return r=(0,n.mf)(e)?this._listener===e&&this._scope===t:this.eventKey_===e,r}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},30306:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(40398),i=r(30994);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}const s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events_={}}var t,r,o;return t=e,r=[{key:"add",value:function(e,t,r){var o,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(0,n.Ew)(e)&&(0,n.mf)(t)&&((0,n.Ew)(this.events_[e])&&(this.events_[e]=[]),-1===this.indexOf(e,t,r))){var s=new i.Z(t,r,a);this.events_[e].push(s),o=s.getEventKey()}return o}},{key:"remove",value:function(e,t,r){var i=this.events_[e];if(!(0,n.Ew)(i)){var o=this.indexOf(e,t,r);-1!==o&&i.splice(o,1)}}},{key:"removeByKey",value:function(e,t){var r=this.events_[e];if(!(0,n.Ew)(r)){var i=r.map((function(e,r){var n=-1;return e.getEventKey()===t&&(n=r),n}));-1!==i&&r.splice(i,1)}}},{key:"fire",value:function(e,t){var r=this,i=[].concat(this.events_[e]);(0,n.Ew)(i)||i.forEach((function(n){n.fire(t),!0===n.isOnce()&&r.remove(e,n.getEventKey())}))}},{key:"indexOf",value:function(e,t,r){var i=-1,o=this.events_[e];if(!(0,n.Ew)(o))for(var a=0,s=o.length;a<s;a+=1)if(o[a].has(t,r)){i=a;break}return i}}],r&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},77055:(e,t,r)=>{"use strict";r.d(t,{B8:()=>x,CK:()=>B,D8:()=>y,ED:()=>v,GY:()=>n,IF:()=>u,J_:()=>b,K6:()=>_,Kn:()=>I,L8:()=>d,Lt:()=>w,N5:()=>o,Nm:()=>P,Oj:()=>S,Qc:()=>M,RE:()=>g,TI:()=>A,V7:()=>O,VX:()=>T,Ve:()=>k,WI:()=>h,W_:()=>c,Yn:()=>F,cF:()=>C,dQ:()=>s,h$:()=>m,h9:()=>R,jB:()=>f,l8:()=>L,nU:()=>p,nr:()=>E,oR:()=>l,ot:()=>D,tP:()=>j,w$:()=>a,zm:()=>i});var n="added:map",i="added:panel",o="added:layer",a="added:kml",s="added:wms",l="added:geotiff",u="added:maplibre",c="added:wfs",f="added:vectortile",h="added:mbtiles",p="added:mbtilesvector",d="added:xyz",y="added:tms",g="added:quicklayers",m="added:ogcapifeatures",_="removed:layer",v="removed:map",A="added:wmts",b="activated",w="deactivated",E="show",x="hide",I="destroy",S="select:features",C="unselect:features",P="hover:features",O="leave:features",T="load",M="completed",k="change",R="change:proj",B="change:style",L="change:zoom",D="click",j="move",F="movemouse"},81971:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(e){throw e}},62557:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(81517),i=r(40398);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,o=l(u);function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=o.call(this,(0,i.cL)("_mapea_cluster_"))).setAttributes(t),r.setAttribute("features",e),r}return t=u,r&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(n.Z)},81517:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(94551),i=r(81638),o=r(40398),a=r(7508),s=r(83473),l=r(76732),u=r(30386),c=r(77055),f=r(2532);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===h(o)?o:String(o)),n)}var i,o}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}const m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(m,e);var t,r,i,g=y(m);function m(e,t,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var o=new n.Z(e,t,r);return(i=g.call(this,o)).style_=null,i.formatGeoJSON_=new a.Z,i.setStyle(r),i}return t=m,(r=[{key:"setId",value:function(e){this.getImpl().setId(e)}},{key:"getId",value:function(){return this.getImpl().getId()}},{key:"getGeometry",value:function(){return this.getGeoJSON().geometry}},{key:"setGeometry",value:function(e){this.getImpl().setGeometry(e)}},{key:"getGeoJSON",value:function(){return this.formatGeoJSON_.write(this)[0]}},{key:"getAttributes",value:function(){return this.getImpl().getAttributes()}},{key:"setAttributes",value:function(e){"object"===h(e)?this.getImpl().setAttributes(e):s.info((0,f.NA)("feature").incorrect_attributes)}},{key:"getAttribute",value:function(e){var t;if(t=this.getImpl().getAttribute(e),(0,o.Ew)(t)){var r=e.split(".");r.length>1&&(t=r.reduce((function(e,t){var r;return(0,o.Ew)(e)||(r=e instanceof m?e.getAttribute(t):e[t]),r}),this))}return t}},{key:"setAttribute",value:function(e,t){return this.getImpl().setAttribute(e,t)}},{key:"setStyle",value:function(e){!(0,o.Ew)(e)&&e instanceof l.Z?(this.style_=e,this.style_.applyToFeature(this)):(0,o.Ew)(e)&&(this.style_=null,this.getImpl().clearStyle()),this.fire(c.CK,[e,this])}},{key:"equals",value:function(e){return this.getId()===e.getId()}},{key:"getStyle",value:function(){return this.style_}},{key:"clearStyle",value:function(){this.setStyle(null)}},{key:"getCentroid",value:function(){var e=this.getId(),t=this.getAttributes(),r=new u.Z({stroke:{color:"#67af13",width:2},radius:8,fill:{color:"#67af13",opacity:.2}}),n=this.getImpl().getCentroid();return(0,o.Ew)(n)||(n.id("".concat(e," centroid}")),n.attributes(t),n.style=r),n}}])&&p(t.prototype,r),i&&p(t,i),Object.defineProperty(t,"prototype",{writable:!1}),m}(i.Z)},45686:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(77707),i=r(81638),o=r(40398);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,r,i,a=u(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=new n.Z;return(e=a.call(this,t)).id_=(0,o.cL)("mapea","render_feature"),e}return t=c,(r=[{key:"getId",value:function(){return this.id_}},{key:"getGeometry",value:function(){return null}},{key:"getAttributes",value:function(){return this.getImpl().getAttributes()}},{key:"getType",value:function(){return this.getImpl().getType()}},{key:"getAttribute",value:function(e){var t;if(t=this.getImpl().getAttribute(e),(0,o.Ew)(t)){var r=e.split(".");r.length>1&&(t=r.reduce((function(e,t){var r;return(0,o.Ew)(e)||(r=e instanceof c?e.getAttribute(t):e[t]),r}),this))}return t}},{key:"equals",value:function(e){return this.getId()===e.getId()}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.Z)},54832:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.d(t,{Z:()=>o});const o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"getFunctionFilter",value:function(){}},{key:"execute",value:function(e){}},{key:"toCQL",value:function(){}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},36184:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(54832),i=r(40398);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,o=l(u);function u(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=o.call(this)).filterFunction_=e,t.cqlFilter_="",(0,i.Ew)(r.cqlFilter)||(t.cqlFilter_=r.cqlFilter),t}return t=u,(r=[{key:"setFunction",value:function(e){this.filterFunction_=e}},{key:"getFunctionFilter",value:function(){return this.filterFunction_}},{key:"execute",value:function(e){return e.filter(this.filterFunction_)}},{key:"toCQL",value:function(){return this.cqlFilter_}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Z)},68772:(e,t,r)=>{"use strict";function n(e,t){return e.interfaces_&&e.interfaces_.indexOf(t)>-1}r.d(t,{_E:()=>Dr,Y5:()=>jr,S3:()=>Nr,ok:()=>Fr,oi:()=>Br});class i{constructor(e,t){this.low=t||0,this.high=e||0}static toBinaryString(e){let t,r="";for(t=2147483648;t>0;t>>>=1)r+=(e.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)r+=(e.low&t)===t?"1":"0";return r}}function o(){}function a(){}o.NaN=NaN,o.isNaN=e=>Number.isNaN(e),o.isInfinite=e=>!Number.isFinite(e),o.MAX_VALUE=Number.MAX_VALUE,o.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,o.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?function(){const e=2146435072,t=new Float64Array(1),r=new Int32Array(t.buffer);o.doubleToLongBits=function(n){t[0]=n;let o=0|r[0],a=0|r[1];return(a&e)===e&&1048575&a&&0!==o&&(o=0,a=2146959360),new i(a,o)},o.longBitsToDouble=function(e){return r[0]=e.low,r[1]=e.high,t[0]}}():function(){const e=1023,t=Math.log2,r=Math.floor,n=Math.pow,a=function(){for(let e=53;e>0;e--){const i=n(2,e)-1;if(r(t(i))+1===e)return i}return 0}();o.doubleToLongBits=function(o){let s,l,u,c,f,h,p,d,y;if(o<0||1/o===Number.NEGATIVE_INFINITY?(h=1<<31,o=-o):h=0,0===o)return y=0,d=h,new i(d,y);if(o===1/0)return y=0,d=2146435072|h,new i(d,y);if(o!=o)return y=0,d=2146959360,new i(d,y);if(c=0,y=0,s=r(o),s>1)if(s<=a)c=r(t(s)),c<=20?(y=0,d=s<<20-c&1048575):(u=c-20,l=n(2,u),y=s%l<<32-u,d=s/l&1048575);else for(u=s,y=0;l=u/2,u=r(l),0!==u;)c++,y>>>=1,y|=(1&d)<<31,d>>>=1,l!==u&&(d|=524288);if(p=c+e,f=0===s,s=o-s,c<52&&0!==s)for(u=0;;){if(l=2*s,l>=1?(s=l-1,f?(p--,f=!1):(u<<=1,u|=1,c++)):(s=l,f?0==--p&&(c++,f=!1):(u<<=1,c++)),20===c)d|=u,u=0;else if(52===c){y|=u;break}if(1===l){c<20?d|=u<<20-c:c<52&&(y|=u<<52-c);break}}return d|=p<<20,d|=h,new i(d,y)},o.longBitsToDouble=function(t){let r,i,o,a;const s=t.high,l=t.low,u=s&1<<31?-1:1;for(o=((2146435072&s)>>20)-e,a=0,i=1<<19,r=1;r<=20;r++)s&i&&(a+=n(2,-r)),i>>>=1;for(i=1<<31,r=21;r<=52;r++)l&i&&(a+=n(2,-r)),i>>>=1;if(-1023===o){if(0===a)return 0*u;o=-1022}else{if(1024===o)return 0===a?u/0:NaN;a+=1}return u*a*n(2,o)}}();class s{getM(e){if(this.hasM()){const t=this.getDimension()-this.getMeasures();return this.getOrdinate(e,t)}return o.NaN}setOrdinate(e,t,r){}getZ(e){return this.hasZ()?this.getOrdinate(e,2):o.NaN}size(){}getOrdinate(e,t){}getCoordinate(){if(1===arguments.length){}else if(2===arguments.length){}}getCoordinateCopy(e){}createCoordinate(){}getDimension(){}hasM(){return this.getMeasures()>0}getX(e){}hasZ(){return this.getDimension()-this.getMeasures()>2}getMeasures(){return 0}expandEnvelope(e){}copy(){}getY(e){}toCoordinateArray(){}get interfaces_(){return[a]}}s.X=0,s.Y=1,s.Z=2,s.M=3;class l{create(){if(1===arguments.length){if(arguments[0]instanceof Array){}else if(n(arguments[0],s)){}}else if(2===arguments.length){}else if(3===arguments.length){const e=arguments[0],t=arguments[1];return this.create(e,t)}}}class u extends Error{constructor(e){super(e),this.name=Object.keys({Exception:u})[0]}toString(){return this.message}}class c extends u{constructor(e){super(e),this.name=Object.keys({IllegalArgumentException:c})[0]}}class f{filter(e){}}function h(){}function p(){}class d{static equalsWithTolerance(e,t,r){return Math.abs(e-t)<=r}}function y(){}class g extends u{constructor(e){super(e),this.name=Object.keys({RuntimeException:g})[0]}}class m extends g{constructor(){super(),m.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)g.constructor_.call(this);else if(1===arguments.length){const e=arguments[0];g.constructor_.call(this,e)}}}class _{static shouldNeverReachHere(){if(0===arguments.length)_.shouldNeverReachHere(null);else if(1===arguments.length){const e=arguments[0];throw new m("Should never reach here"+(null!==e?": "+e:""))}}static isTrue(){if(1===arguments.length){const e=arguments[0];_.isTrue(e,null)}else if(2===arguments.length){const e=arguments[1];if(!arguments[0])throw null===e?new m:new m(e)}}static equals(){if(2===arguments.length){const e=arguments[0],t=arguments[1];_.equals(e,t,null)}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];if(!t.equals(e))throw new m("Expected "+e+" but encountered "+t+(null!==r?": "+r:""))}}}const v=new ArrayBuffer(8),A=new Float64Array(v),b=new Int32Array(v);class w{constructor(){w.constructor_.apply(this,arguments)}static constructor_(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)w.constructor_.call(this,0,0);else if(1===arguments.length){const e=arguments[0];w.constructor_.call(this,e.x,e.y,e.getZ())}else if(2===arguments.length){const e=arguments[0],t=arguments[1];w.constructor_.call(this,e,t,w.NULL_ORDINATE)}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];this.x=e,this.y=t,this.z=r}}static hashCode(e){return A[0]=e,b[0]^b[1]}getM(){return o.NaN}setOrdinate(e,t){switch(e){case w.X:this.x=t;break;case w.Y:this.y=t;break;case w.Z:this.setZ(t);break;default:throw new c("Invalid ordinate index: "+e)}}equals2D(){if(1===arguments.length){const e=arguments[0];return this.x===e.x&&this.y===e.y}if(2===arguments.length){const e=arguments[0],t=arguments[1];return!!d.equalsWithTolerance(this.x,e.x,t)&&!!d.equalsWithTolerance(this.y,e.y,t)}}setM(e){throw new c("Invalid ordinate index: "+w.M)}getZ(){return this.z}getOrdinate(e){switch(e){case w.X:return this.x;case w.Y:return this.y;case w.Z:return this.getZ()}throw new c("Invalid ordinate index: "+e)}equals3D(e){return this.x===e.x&&this.y===e.y&&(this.getZ()===e.getZ()||o.isNaN(this.getZ())&&o.isNaN(e.getZ()))}equals(e){return e instanceof w&&this.equals2D(e)}equalInZ(e,t){return d.equalsWithTolerance(this.getZ(),e.getZ(),t)}setX(e){this.x=e}compareTo(e){const t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}getX(){return this.x}setZ(e){this.z=e}clone(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return _.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}}copy(){return new w(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}distance3D(e){const t=this.x-e.x,r=this.y-e.y,n=this.getZ()-e.getZ();return Math.sqrt(t*t+r*r+n*n)}getY(){return this.y}setY(e){this.y=e}distance(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}hashCode(){let e=17;return e=37*e+w.hashCode(this.x),e=37*e+w.hashCode(this.y),e}setCoordinate(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}get interfaces_(){return[h,a,p]}}class E{constructor(){E.constructor_.apply(this,arguments)}static constructor_(){if(this._dimensionsToTest=2,0===arguments.length)E.constructor_.call(this,2);else if(1===arguments.length){const e=arguments[0];if(2!==e&&3!==e)throw new c("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}}static compare(e,t){return e<t?-1:e>t?1:o.isNaN(e)?o.isNaN(t)?0:-1:o.isNaN(t)?1:0}compare(e,t){const r=E.compare(e.x,t.x);if(0!==r)return r;const n=E.compare(e.y,t.y);if(0!==n)return n;if(this._dimensionsToTest<=2)return 0;return E.compare(e.getZ(),t.getZ())}get interfaces_(){return[y]}}w.DimensionalComparator=E,w.NULL_ORDINATE=o.NaN,w.X=0,w.Y=1,w.Z=2,w.M=3;class x{constructor(){x.constructor_.apply(this,arguments)}static constructor_(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof w){const e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof x){const e=arguments[0];this.init(e)}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.init(e.x,t.x,e.y,t.y)}else if(4===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];this.init(e,t,r,n)}}static intersects(){if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];return r.x>=(e.x<t.x?e.x:t.x)&&r.x<=(e.x>t.x?e.x:t.x)&&r.y>=(e.y<t.y?e.y:t.y)&&r.y<=(e.y>t.y?e.y:t.y)}if(4===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];let i=Math.min(r.x,n.x),o=Math.max(r.x,n.x),a=Math.min(e.x,t.x),s=Math.max(e.x,t.x);return!(a>o)&&(!(s<i)&&(i=Math.min(r.y,n.y),o=Math.max(r.y,n.y),a=Math.min(e.y,t.y),s=Math.max(e.y,t.y),!(a>o)&&!(s<i)))}}getArea(){return this.getWidth()*this.getHeight()}equals(e){if(!(e instanceof x))return!1;const t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()}intersection(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new x;const t=this._minx>e._minx?this._minx:e._minx,r=this._miny>e._miny?this._miny:e._miny,n=this._maxx<e._maxx?this._maxx:e._maxx,i=this._maxy<e._maxy?this._maxy:e._maxy;return new x(t,n,r,i)}isNull(){return this._maxx<this._minx}getMaxX(){return this._maxx}covers(){if(1===arguments.length){if(arguments[0]instanceof w){const e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof x){const e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy)}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];return!this.isNull()&&(e>=this._minx&&e<=this._maxx&&t>=this._miny&&t<=this._maxy)}}intersects(){if(1===arguments.length){if(arguments[0]instanceof x){const e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof w){const e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){if(arguments[0]instanceof w&&arguments[1]instanceof w){const e=arguments[0],t=arguments[1];if(this.isNull())return!1;if((e.x<t.x?e.x:t.x)>this._maxx)return!1;if((e.x>t.x?e.x:t.x)<this._minx)return!1;if((e.y<t.y?e.y:t.y)>this._maxy)return!1;return!((e.y>t.y?e.y:t.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const e=arguments[0],t=arguments[1];return!this.isNull()&&!(e>this._maxx||e<this._minx||t>this._maxy||t<this._miny)}}}getMinY(){return this._miny}getDiameter(){if(this.isNull())return 0;const e=this.getWidth(),t=this.getHeight();return Math.sqrt(e*e+t*t)}getMinX(){return this._minx}expandToInclude(){if(1===arguments.length){if(arguments[0]instanceof w){const e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof x){const e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.isNull()?(this._minx=e,this._maxx=e,this._miny=t,this._maxy=t):(e<this._minx&&(this._minx=e),e>this._maxx&&(this._maxx=e),t<this._miny&&(this._miny=t),t>this._maxy&&(this._maxy=t))}}minExtent(){if(this.isNull())return 0;const e=this.getWidth(),t=this.getHeight();return e<t?e:t}getWidth(){return this.isNull()?0:this._maxx-this._minx}compareTo(e){const t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0}translate(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)}copy(){return new x(this)}toString(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}setToNull(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}disjoint(e){return!(!this.isNull()&&!e.isNull())||(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}getHeight(){return this.isNull()?0:this._maxy-this._miny}maxExtent(){if(this.isNull())return 0;const e=this.getWidth(),t=this.getHeight();return e>t?e:t}expandBy(){if(1===arguments.length){const e=arguments[0];this.expandBy(e,e)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=t,this._maxy+=t,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}contains(){if(1===arguments.length){if(arguments[0]instanceof x){const e=arguments[0];return this.covers(e)}if(arguments[0]instanceof w){const e=arguments[0];return this.covers(e)}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];return this.covers(e,t)}}centre(){return this.isNull()?null:new w((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}init(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof w){const e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof x){const e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.init(e.x,t.x,e.y,t.y)}else if(4===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];e<t?(this._minx=e,this._maxx=t):(this._minx=t,this._maxx=e),r<n?(this._miny=r,this._maxy=n):(this._miny=n,this._maxy=r)}}getMaxY(){return this._maxy}distance(e){if(this.intersects(e))return 0;let t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);let r=0;return this._maxy<e._miny?r=e._miny-this._maxy:this._miny>e._maxy&&(r=this._miny-e._maxy),0===t?r:0===r?t:Math.sqrt(t*t+r*r)}hashCode(){let e=17;return e=37*e+w.hashCode(this._minx),e=37*e+w.hashCode(this._maxx),e=37*e+w.hashCode(this._miny),e=37*e+w.hashCode(this._maxy),e}get interfaces_(){return[h,p]}}class I{constructor(){I.constructor_.apply(this,arguments)}isGeometryCollection(){return this.getTypeCode()===I.TYPECODE_GEOMETRYCOLLECTION}getFactory(){return this._factory}getGeometryN(e){return this}getArea(){return 0}isRectangle(){return!1}equalsExact(e){return this===e||this.equalsExact(e,0)}geometryChanged(){this.apply(I.geometryChangedFilter)}geometryChangedAction(){this._envelope=null}equalsNorm(e){return null!==e&&this.norm().equalsExact(e.norm())}getLength(){return 0}getNumGeometries(){return 1}compareTo(){let e;if(1===arguments.length){const t=arguments[0];return e=t,this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){const t=arguments[0],r=arguments[1];return e=t,this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t,r)}}getUserData(){return this._userData}getSRID(){return this._SRID}getEnvelope(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}static checkNotGeometryCollection(e){if(e.getTypeCode()===I.TYPECODE_GEOMETRYCOLLECTION)throw new c("This method does not support GeometryCollection arguments")}equal(e,t,r){return 0===r?e.equals(t):e.distance(t)<=r}norm(){const e=this.copy();return e.normalize(),e}reverse(){const e=this.reverseInternal();return null!=this.envelope&&(e.envelope=this.envelope.copy()),e.setSRID(this.getSRID()),e}copy(){const e=this.copyInternal();return e.envelope=null==this._envelope?null:this._envelope.copy(),e._SRID=this._SRID,e._userData=this._userData,e}getPrecisionModel(){return this._factory.getPrecisionModel()}getEnvelopeInternal(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new x(this._envelope)}setSRID(e){this._SRID=e}setUserData(e){this._userData=e}compare(e,t){const r=e.iterator(),n=t.iterator();for(;r.hasNext()&&n.hasNext();){const e=r.next(),t=n.next(),i=e.compareTo(t);if(0!==i)return i}return r.hasNext()?1:n.hasNext()?-1:0}hashCode(){return this.getEnvelopeInternal().hashCode()}isEquivalentClass(e){return this.getTypeCode()==e.getTypeCode()}get interfaces_(){return[a,h,p]}getClass(){return I}static hasNonEmptyElements(e){for(let t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1}static hasNullElements(e){for(let t=0;t<e.length;t++)if(null===e[t])return!0;return!1}}I.constructor_=function(e){e&&(this._envelope=null,this._userData=null,this._factory=e,this._SRID=e.getSRID())},I.TYPECODE_POINT=0,I.TYPECODE_MULTIPOINT=1,I.TYPECODE_LINESTRING=2,I.TYPECODE_LINEARRING=3,I.TYPECODE_MULTILINESTRING=4,I.TYPECODE_POLYGON=5,I.TYPECODE_MULTIPOLYGON=6,I.TYPECODE_GEOMETRYCOLLECTION=7,I.TYPENAME_POINT="Point",I.TYPENAME_MULTIPOINT="MultiPoint",I.TYPENAME_LINESTRING="LineString",I.TYPENAME_LINEARRING="LinearRing",I.TYPENAME_MULTILINESTRING="MultiLineString",I.TYPENAME_POLYGON="Polygon",I.TYPENAME_MULTIPOLYGON="MultiPolygon",I.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",I.geometryChangedFilter={get interfaces_(){return[f]},filter(e){e.geometryChangedAction()}};class S{filter(e){}}class C{static ofLine(e){const t=e.size();if(t<=1)return 0;let r=0;const n=new w;e.getCoordinate(0,n);let i=n.x,o=n.y;for(let a=1;a<t;a++){e.getCoordinate(a,n);const t=n.x,s=n.y,l=t-i,u=s-o;r+=Math.sqrt(l*l+u*u),i=t,o=s}return r}}class P{}class O{static copyCoord(e,t,r,n){const i=Math.min(e.getDimension(),r.getDimension());for(let o=0;o<i;o++)r.setOrdinate(n,o,e.getOrdinate(t,o))}static isRing(e){const t=e.size();return 0===t||!(t<=3)&&(e.getOrdinate(0,s.X)===e.getOrdinate(t-1,s.X)&&e.getOrdinate(0,s.Y)===e.getOrdinate(t-1,s.Y))}static scroll(){if(2===arguments.length){if(n(arguments[0],s)&&Number.isInteger(arguments[1])){const e=arguments[0],t=arguments[1];O.scroll(e,t,O.isRing(e))}else if(n(arguments[0],s)&&arguments[1]instanceof w){const e=arguments[0],t=arguments[1],r=O.indexOf(t,e);if(r<=0)return null;O.scroll(e,r)}}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];if(t<=0)return null;const n=e.copy(),i=r?e.size()-1:e.size();for(let r=0;r<i;r++)for(let o=0;o<e.getDimension();o++)e.setOrdinate(r,o,n.getOrdinate((t+r)%i,o));if(r)for(let t=0;t<e.getDimension();t++)e.setOrdinate(i,t,e.getOrdinate(0,t))}}static isEqual(e,t){const r=e.size();if(r!==t.size())return!1;const n=Math.min(e.getDimension(),t.getDimension());for(let i=0;i<r;i++)for(let r=0;r<n;r++){const n=e.getOrdinate(i,r),a=t.getOrdinate(i,r);if(e.getOrdinate(i,r)!==t.getOrdinate(i,r)&&(!o.isNaN(n)||!o.isNaN(a)))return!1}return!0}static minCoordinateIndex(){if(1===arguments.length){const e=arguments[0];return O.minCoordinateIndex(e,0,e.size()-1)}if(3===arguments.length){const e=arguments[0],t=arguments[2];let r=-1,n=null;for(let i=arguments[1];i<=t;i++){const t=e.getCoordinate(i);(null===n||n.compareTo(t)>0)&&(n=t,r=i)}return r}}static extend(e,t,r){const n=e.create(r,t.getDimension()),i=t.size();if(O.copy(t,0,n,0,i),i>0)for(let e=i;e<r;e++)O.copy(t,i-1,n,e,1);return n}static reverse(e){const t=e.size()-1,r=Math.trunc(t/2);for(let n=0;n<=r;n++)O.swap(e,n,t-n)}static swap(e,t,r){if(t===r)return null;for(let n=0;n<e.getDimension();n++){const i=e.getOrdinate(t,n);e.setOrdinate(t,n,e.getOrdinate(r,n)),e.setOrdinate(r,n,i)}}static copy(e,t,r,n,i){for(let o=0;o<i;o++)O.copyCoord(e,t+o,r,n+o)}static ensureValidRing(e,t){const r=t.size();if(0===r)return t;if(r<=3)return O.createClosedRing(e,t,4);return t.getOrdinate(0,s.X)===t.getOrdinate(r-1,s.X)&&t.getOrdinate(0,s.Y)===t.getOrdinate(r-1,s.Y)?t:O.createClosedRing(e,t,r+1)}static indexOf(e,t){for(let r=0;r<t.size();r++)if(e.x===t.getOrdinate(r,s.X)&&e.y===t.getOrdinate(r,s.Y))return r;return-1}static createClosedRing(e,t,r){const n=e.create(r,t.getDimension()),i=t.size();O.copy(t,0,n,0,i);for(let e=i;e<r;e++)O.copy(t,0,n,e,1);return n}static minCoordinate(e){let t=null;for(let r=0;r<e.size();r++){const n=e.getCoordinate(r);(null===t||t.compareTo(n)>0)&&(t=n)}return t}}class T extends u{constructor(e){super(e),this.name=Object.keys({UnsupportedOperationException:T})[0]}}class M{static isWhitespace(e){return e<=32&&e>=0||127===e}static toUpperCase(e){return e.toUpperCase()}}class k{static toDimensionSymbol(e){switch(e){case k.FALSE:return k.SYM_FALSE;case k.TRUE:return k.SYM_TRUE;case k.DONTCARE:return k.SYM_DONTCARE;case k.P:return k.SYM_P;case k.L:return k.SYM_L;case k.A:return k.SYM_A}throw new c("Unknown dimension value: "+e)}static toDimensionValue(e){switch(M.toUpperCase(e)){case k.SYM_FALSE:return k.FALSE;case k.SYM_TRUE:return k.TRUE;case k.SYM_DONTCARE:return k.DONTCARE;case k.SYM_P:return k.P;case k.SYM_L:return k.L;case k.SYM_A:return k.A}throw new c("Unknown dimension symbol: "+e)}}k.P=0,k.L=1,k.A=2,k.FALSE=-1,k.TRUE=-2,k.DONTCARE=-3,k.SYM_FALSE="F",k.SYM_TRUE="T",k.SYM_DONTCARE="*",k.SYM_P="0",k.SYM_L="1",k.SYM_A="2";class R{filter(e){}}class B{filter(e,t){}isDone(){}isGeometryChanged(){}}class L extends I{constructor(){super(),L.constructor_.apply(this,arguments)}static constructor_(){if(this._points=null,0===arguments.length);else if(2===arguments.length){const e=arguments[0],t=arguments[1];I.constructor_.call(this,t),this.init(e)}}computeEnvelopeInternal(){return this.isEmpty()?new x:this._points.expandEnvelope(new x)}isRing(){return this.isClosed()&&this.isSimple()}getCoordinates(){return this._points.toCoordinateArray()}copyInternal(){return new L(this._points.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof I){const e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;const r=e;if(this._points.size()!==r._points.size())return!1;for(let e=0;e<this._points.size();e++)if(!this.equal(this._points.getCoordinate(e),r._points.getCoordinate(e),t))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let e=0;e<Math.trunc(this._points.size()/2);e++){const t=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(t))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(t))>0){const e=this._points.copy();O.reverse(e),this._points=e}return null}}}getCoordinate(){return this.isEmpty()?null:this._points.getCoordinate(0)}getBoundaryDimension(){return this.isClosed()?k.FALSE:0}isClosed(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}reverseInternal(){const e=this._points.copy();return O.reverse(e),this.getFactory().createLineString(e)}getEndPoint(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}getTypeCode(){return I.TYPECODE_LINESTRING}getDimension(){return 1}getLength(){return C.ofLine(this._points)}getNumPoints(){return this._points.size()}compareToSameClass(){if(1===arguments.length){const e=arguments[0];let t=0,r=0;for(;t<this._points.size()&&r<e._points.size();){const n=this._points.getCoordinate(t).compareTo(e._points.getCoordinate(r));if(0!==n)return n;t++,r++}return t<this._points.size()?1:r<e._points.size()?-1:0}if(2===arguments.length){const e=arguments[0];return arguments[1].compare(this._points,e._points)}}apply(){if(n(arguments[0],S)){const e=arguments[0];for(let t=0;t<this._points.size();t++)e.filter(this._points.getCoordinate(t))}else if(n(arguments[0],B)){const e=arguments[0];if(0===this._points.size())return null;for(let t=0;t<this._points.size()&&(e.filter(this._points,t),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(n(arguments[0],R)){arguments[0].filter(this)}else if(n(arguments[0],f)){arguments[0].filter(this)}}getBoundary(){throw new T}isEquivalentClass(e){return e instanceof L}getCoordinateN(e){return this._points.getCoordinate(e)}getGeometryType(){return I.TYPENAME_LINESTRING}getCoordinateSequence(){return this._points}isEmpty(){return 0===this._points.size()}init(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new c("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}isCoordinate(e){for(let t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(e))return!0;return!1}getStartPoint(){return this.isEmpty()?null:this.getPointN(0)}getPointN(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}get interfaces_(){return[P]}}class D{}class j extends u{constructor(e){super(e),this.name=Object.keys({IllegalStateException:j})[0]}}class F extends I{constructor(){super(),F.constructor_.apply(this,arguments)}static constructor_(){this._coordinates=null;const e=arguments[0],t=arguments[1];I.constructor_.call(this,t),this.init(e)}computeEnvelopeInternal(){if(this.isEmpty())return new x;const e=new x;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}getCoordinates(){return this.isEmpty()?[]:[this.getCoordinate()]}copyInternal(){return new F(this._coordinates.copy(),this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof I){const e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),t))}return super.equalsExact.apply(this,arguments)}normalize(){}getCoordinate(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}getBoundaryDimension(){return k.FALSE}reverseInternal(){return this.getFactory().createPoint(this._coordinates.copy())}getTypeCode(){return I.TYPECODE_POINT}getDimension(){return 0}getNumPoints(){return this.isEmpty()?0:1}getX(){if(null===this.getCoordinate())throw new j("getX called on empty Point");return this.getCoordinate().x}compareToSameClass(){if(1===arguments.length){const e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){const e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}}apply(){if(n(arguments[0],S)){const e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(n(arguments[0],B)){const e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(n(arguments[0],R)){arguments[0].filter(this)}else if(n(arguments[0],f)){arguments[0].filter(this)}}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return I.TYPENAME_POINT}getCoordinateSequence(){return this._coordinates}getY(){if(null===this.getCoordinate())throw new j("getY called on empty Point");return this.getCoordinate().y}isEmpty(){return 0===this._coordinates.size()}init(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),_.isTrue(e.size()<=1),this._coordinates=e}isSimple(){return!0}get interfaces_(){return[D]}}class N{static ofRing(){if(arguments[0]instanceof Array){const e=arguments[0];return Math.abs(N.ofRingSigned(e))}if(n(arguments[0],s)){const e=arguments[0];return Math.abs(N.ofRingSigned(e))}}static ofRingSigned(){if(arguments[0]instanceof Array){const e=arguments[0];if(e.length<3)return 0;let t=0;const r=e[0].x;for(let n=1;n<e.length-1;n++){const i=e[n].x-r,o=e[n+1].y;t+=i*(e[n-1].y-o)}return t/2}if(n(arguments[0],s)){const e=arguments[0],t=e.size();if(t<3)return 0;const r=new w,n=new w,i=new w;e.getCoordinate(0,n),e.getCoordinate(1,i);const o=n.x;i.x-=o;let a=0;for(let s=1;s<t-1;s++)r.y=n.y,n.x=i.x,n.y=i.y,e.getCoordinate(s+1,i),i.x-=o,a+=n.x*(r.y-i.y);return a/2}}}class Z{add(){}addAll(){}isEmpty(){}iterator(){}size(){}toArray(){}remove(){}}class U extends u{constructor(e){super(e),this.name=Object.keys({IndexOutOfBoundsException:U})[0]}}class Q extends Z{get(){}set(){}isEmpty(){}}class G extends u{constructor(e){super(e),this.name=Object.keys({NoSuchElementException:G})[0]}}class z extends Q{constructor(e){super(),this.array=[],e instanceof Z&&this.addAll(e)}get interfaces_(){return[Q,Z]}ensureCapacity(){}add(e){return 1===arguments.length?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}clear(){this.array=[]}addAll(e){for(const t of e)this.array.push(t)}set(e,t){const r=this.array[e];return this.array[e]=t,r}iterator(){return new q(this)}get(e){if(e<0||e>=this.size())throw new U;return this.array[e]}isEmpty(){return 0===this.array.length}sort(e){e?this.array.sort(((t,r)=>e.compare(t,r))):this.array.sort()}size(){return this.array.length}toArray(){return this.array.slice()}remove(e){for(let t=0,r=this.array.length;t<r;t++)if(this.array[t]===e)return!!this.array.splice(t,1);return!1}[Symbol.iterator](){return this.array.values()}}class q{constructor(e){this.arrayList=e,this.position=0}next(){if(this.position===this.arrayList.size())throw new G;return this.arrayList.get(this.position++)}hasNext(){return this.position<this.arrayList.size()}set(e){return this.arrayList.set(this.position-1,e)}remove(){this.arrayList.remove(this.arrayList.get(this.position))}}class V{static sort(){const e=arguments[0];if(1===arguments.length)e.sort(((e,t)=>e.compareTo(t)));else if(2===arguments.length)e.sort(((e,t)=>arguments[1].compare(e,t)));else if(3===arguments.length){const t=e.slice(arguments[1],arguments[2]);t.sort();const r=e.slice(0,arguments[1]).concat(t,e.slice(arguments[2],e.length));e.splice(0,e.length);for(const t of r)e.push(t)}else if(4===arguments.length){const t=e.slice(arguments[1],arguments[2]);t.sort(((e,t)=>arguments[3].compare(e,t)));const r=e.slice(0,arguments[1]).concat(t,e.slice(arguments[2],e.length));e.splice(0,e.length);for(const t of r)e.push(t)}}static asList(e){const t=new z;for(const r of e)t.add(r);return t}static copyOf(e,t){return e.slice(0,t)}}class W{constructor(e){this.str=e}append(e){this.str+=e}setCharAt(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)}toString(){return this.str}}class K{constructor(e){this.value=e}intValue(){return this.value}compareTo(e){return this.value<e?-1:this.value>e?1:0}static compare(e,t){return e<t?-1:e>t?1:0}static isNan(e){return Number.isNaN(e)}static valueOf(e){return new K(e)}}class H{constructor(){H.constructor_.apply(this,arguments)}static constructor_(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){const e=arguments[0];this.init(e)}else if(arguments[0]instanceof H){const e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){const e=arguments[0];H.constructor_.call(this,H.parse(e))}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.init(e,t)}}static determinant(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];return H.determinant(H.valueOf(e),H.valueOf(t),H.valueOf(r),H.valueOf(n))}if(arguments[3]instanceof H&&arguments[2]instanceof H&&arguments[0]instanceof H&&arguments[1]instanceof H){const e=arguments[1],t=arguments[2],r=arguments[3];return arguments[0].multiply(r).selfSubtract(e.multiply(t))}}static sqr(e){return H.valueOf(e).selfMultiply(e)}static valueOf(){if("string"==typeof arguments[0]){const e=arguments[0];return H.parse(e)}if("number"==typeof arguments[0]){return new H(arguments[0])}}static sqrt(e){return H.valueOf(e).sqrt()}static parse(e){let t=0;const r=e.length;for(;M.isWhitespace(e.charAt(t));)t++;let n=!1;if(t<r){const r=e.charAt(t);"-"!==r&&"+"!==r||(t++,"-"===r&&(n=!0))}const i=new H;let o=0,a=0,s=0,l=!1;for(;!(t>=r);){const r=e.charAt(t);if(t++,M.isDigit(r)){const e=r-"0";i.selfMultiply(H.TEN),i.selfAdd(e),o++}else{if("."!==r){if("e"===r||"E"===r){const r=e.substring(t);try{s=K.parseInt(r)}catch(t){throw t instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+r+" in string "+e):t}break}throw new NumberFormatException("Unexpected character '"+r+"' at position "+t+" in string "+e)}a=o,l=!0}}let u=i;l||(a=o);const c=o-a-s;if(0===c)u=i;else if(c>0){const e=H.TEN.pow(c);u=i.divide(e)}else if(c<0){const e=H.TEN.pow(-c);u=i.multiply(e)}return n?u.negate():u}static createNaN(){return new H(o.NaN,o.NaN)}static copy(e){return new H(e)}static magnitude(e){const t=Math.abs(e),r=Math.log(t)/Math.log(10);let n=Math.trunc(Math.floor(r));return 10*Math.pow(10,n)<=t&&(n+=1),n}static stringOfChar(e,t){const r=new W;for(let n=0;n<t;n++)r.append(e);return r.toString()}le(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<=e._lo}extractSignificantDigits(e,t){let r=this.abs(),n=H.magnitude(r._hi);const i=H.TEN.pow(n);r=r.divide(i),r.gt(H.TEN)?(r=r.divide(H.TEN),n+=1):r.lt(H.ONE)&&(r=r.multiply(H.TEN),n-=1);const o=n+1,a=new W,s=H.MAX_PRINT_DIGITS-1;for(let t=0;t<=s;t++){e&&t===o&&a.append(".");const n=Math.trunc(r._hi);if(n<0)break;let i=!1,l=0;n>9?(i=!0,l="9"):l="0"+n,a.append(l),r=r.subtract(H.valueOf(n)).multiply(H.TEN),i&&r.selfAdd(H.TEN);let u=!0;const c=H.magnitude(r._hi);if(c<0&&Math.abs(c)>=s-t&&(u=!1),!u)break}return t[0]=n,a.toString()}sqr(){return this.multiply(this)}doubleValue(){return this._hi+this._lo}subtract(){if(arguments[0]instanceof H){const e=arguments[0];return this.add(e.negate())}if("number"==typeof arguments[0]){const e=arguments[0];return this.add(-e)}}equals(){if(1===arguments.length&&arguments[0]instanceof H){const e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}}isZero(){return 0===this._hi&&0===this._lo}selfSubtract(){if(arguments[0]instanceof H){const e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if("number"==typeof arguments[0]){const e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}getSpecialNumberString(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}min(e){return this.le(e)?this:e}selfDivide(){if(1===arguments.length){if(arguments[0]instanceof H){const e=arguments[0];return this.selfDivide(e._hi,e._lo)}if("number"==typeof arguments[0]){const e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];let r=null,n=null,i=null,o=null,a=null,s=null,l=null,u=null;return a=this._hi/e,s=H.SPLIT*a,r=s-a,u=H.SPLIT*e,r=s-r,n=a-r,i=u-e,l=a*e,i=u-i,o=e-i,u=r*i-l+r*o+n*i+n*o,s=(this._hi-l-u+this._lo-a*t)/e,u=a+s,this._hi=u,this._lo=a-u+s,this}}dump(){return"DD<"+this._hi+", "+this._lo+">"}divide(){if(arguments[0]instanceof H){const e=arguments[0];let t=null,r=null,n=null,i=null,o=null,a=null,s=null,l=null;o=this._hi/e._hi,a=H.SPLIT*o,t=a-o,l=H.SPLIT*e._hi,t=a-t,r=o-t,n=l-e._hi,s=o*e._hi,n=l-n,i=e._hi-n,l=t*n-s+t*i+r*n+r*i,a=(this._hi-s-l+this._lo-o*e._lo)/e._hi,l=o+a;return new H(l,o-l+a)}if("number"==typeof arguments[0]){const e=arguments[0];return o.isNaN(e)?H.createNaN():H.copy(this).selfDivide(e,0)}}ge(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>=e._lo}pow(e){if(0===e)return H.valueOf(1);let t=new H(this),r=H.valueOf(1),n=Math.abs(e);if(n>1)for(;n>0;)n%2==1&&r.selfMultiply(t),n/=2,n>0&&(t=t.sqr());else r=t;return e<0?r.reciprocal():r}ceil(){if(this.isNaN())return H.NaN;const e=Math.ceil(this._hi);let t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new H(e,t)}compareTo(e){const t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0}rint(){if(this.isNaN())return this;return this.add(.5).floor()}setValue(){if(arguments[0]instanceof H){const e=arguments[0];return this.init(e),this}if("number"==typeof arguments[0]){const e=arguments[0];return this.init(e),this}}max(e){return this.ge(e)?this:e}sqrt(){if(this.isZero())return H.valueOf(0);if(this.isNegative())return H.NaN;const e=1/Math.sqrt(this._hi),t=this._hi*e,r=H.valueOf(t),n=this.subtract(r.sqr())._hi*(.5*e);return r.add(n)}selfAdd(){if(1===arguments.length){if(arguments[0]instanceof H){const e=arguments[0];return this.selfAdd(e._hi,e._lo)}if("number"==typeof arguments[0]){const e=arguments[0];let t=null,r=null,n=null,i=null,o=null,a=null;return n=this._hi+e,o=n-this._hi,i=n-o,i=e-o+(this._hi-i),a=i+this._lo,t=n+a,r=a+(n-t),this._hi=t+r,this._lo=r+(t-this._hi),this}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];let r=null,n=null,i=null,o=null,a=null,s=null,l=null,u=null;a=this._hi+e,i=this._lo+t,l=a-this._hi,u=i-this._lo,s=a-l,o=i-u,s=e-l+(this._hi-s),o=t-u+(this._lo-o),l=s+i,r=a+l,n=l+(a-r),l=o+n;const c=r+l,f=l+(r-c);return this._hi=c,this._lo=f,this}}selfMultiply(){if(1===arguments.length){if(arguments[0]instanceof H){const e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if("number"==typeof arguments[0]){const e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];let r=null,n=null,i=null,o=null,a=null,s=null;a=H.SPLIT*this._hi,r=a-this._hi,s=H.SPLIT*e,r=a-r,n=this._hi-r,i=s-e,a=this._hi*e,i=s-i,o=e-i,s=r*i-a+r*o+n*i+n*o+(this._hi*t+this._lo*e);const l=a+s;r=a-l;const u=s+r;return this._hi=l,this._lo=u,this}}selfSqr(){return this.selfMultiply(this)}floor(){if(this.isNaN())return H.NaN;const e=Math.floor(this._hi);let t=0;return e===this._hi&&(t=Math.floor(this._lo)),new H(e,t)}negate(){return this.isNaN()?this:new H(-this._hi,-this._lo)}clone(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return null;throw e}}multiply(){if(arguments[0]instanceof H){const e=arguments[0];return e.isNaN()?H.createNaN():H.copy(this).selfMultiply(e)}if("number"==typeof arguments[0]){const e=arguments[0];return o.isNaN(e)?H.createNaN():H.copy(this).selfMultiply(e,0)}}isNaN(){return o.isNaN(this._hi)}intValue(){return Math.trunc(this._hi)}toString(){const e=H.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()}toStandardNotation(){const e=this.getSpecialNumberString();if(null!==e)return e;const t=new Array(1).fill(null),r=this.extractSignificantDigits(!0,t),n=t[0]+1;let i=r;if("."===r.charAt(0))i="0"+r;else if(n<0)i="0."+H.stringOfChar("0",-n)+r;else if(-1===r.indexOf(".")){const e=n-r.length;i=r+H.stringOfChar("0",e)+".0"}return this.isNegative()?"-"+i:i}reciprocal(){let e=null,t=null,r=null,n=null,i=null,o=null,a=null,s=null;i=1/this._hi,o=H.SPLIT*i,e=o-i,s=H.SPLIT*this._hi,e=o-e,t=i-e,r=s-this._hi,a=i*this._hi,r=s-r,n=this._hi-r,s=e*r-a+e*n+t*r+t*n,o=(1-a-s-i*this._lo)/this._hi;const l=i+o;return new H(l,i-l+o)}toSciNotation(){if(this.isZero())return H.SCI_NOT_ZERO;const e=this.getSpecialNumberString();if(null!==e)return e;const t=new Array(1).fill(null),r=this.extractSignificantDigits(!1,t),n=H.SCI_NOT_EXPONENT_CHAR+t[0];if("0"===r.charAt(0))throw new j("Found leading zero: "+r);let i="";r.length>1&&(i=r.substring(1));const o=r.charAt(0)+"."+i;return this.isNegative()?"-"+o+n:o+n}abs(){return this.isNaN()?H.NaN:this.isNegative()?this.negate():new H(this)}isPositive(){return this._hi>0||0===this._hi&&this._lo>0}lt(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<e._lo}add(){if(arguments[0]instanceof H){const e=arguments[0];return H.copy(this).selfAdd(e)}if("number"==typeof arguments[0]){const e=arguments[0];return H.copy(this).selfAdd(e)}}init(){if(1===arguments.length){if("number"==typeof arguments[0]){const e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof H){const e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this._hi=e,this._lo=t}}gt(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>e._lo}isNegative(){return this._hi<0||0===this._hi&&this._lo<0}trunc(){return this.isNaN()?H.NaN:this.isPositive()?this.floor():this.ceil()}signum(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}get interfaces_(){return[p,h,a]}}H.PI=new H(3.141592653589793,12246467991473532e-32),H.TWO_PI=new H(6.283185307179586,24492935982947064e-32),H.PI_2=new H(1.5707963267948966,6123233995736766e-32),H.E=new H(2.718281828459045,14456468917292502e-32),H.NaN=new H(o.NaN,o.NaN),H.EPS=123259516440783e-46,H.SPLIT=134217729,H.MAX_PRINT_DIGITS=32,H.TEN=H.valueOf(10),H.ONE=H.valueOf(1),H.SCI_NOT_EXPONENT_CHAR="E",H.SCI_NOT_ZERO="0.0E0";class Y{static orientationIndex(e,t,r){const n=Y.orientationIndexFilter(e,t,r);if(n<=1)return n;const i=H.valueOf(t.x).selfAdd(-e.x),o=H.valueOf(t.y).selfAdd(-e.y),a=H.valueOf(r.x).selfAdd(-t.x),s=H.valueOf(r.y).selfAdd(-t.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()}static signOfDet2x2(){if(arguments[3]instanceof H&&arguments[2]instanceof H&&arguments[0]instanceof H&&arguments[1]instanceof H){const e=arguments[1],t=arguments[2],r=arguments[3];return arguments[0].multiply(r).selfSubtract(e.multiply(t)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3],i=H.valueOf(e),o=H.valueOf(t),a=H.valueOf(r),s=H.valueOf(n);return i.multiply(s).selfSubtract(o.multiply(a)).signum()}}static intersection(e,t,r,n){const i=new H(e.y).selfSubtract(t.y),a=new H(t.x).selfSubtract(e.x),s=new H(e.x).selfMultiply(t.y).selfSubtract(new H(t.x).selfMultiply(e.y)),l=new H(r.y).selfSubtract(n.y),u=new H(n.x).selfSubtract(r.x),c=new H(r.x).selfMultiply(n.y).selfSubtract(new H(n.x).selfMultiply(r.y)),f=a.multiply(c).selfSubtract(u.multiply(s)),h=l.multiply(s).selfSubtract(i.multiply(c)),p=i.multiply(u).selfSubtract(l.multiply(a)),d=f.selfDivide(p).doubleValue(),y=h.selfDivide(p).doubleValue();return o.isNaN(d)||o.isInfinite(d)||o.isNaN(y)||o.isInfinite(y)?null:new w(d,y)}static orientationIndexFilter(e,t,r){let n=null;const i=(e.x-r.x)*(t.y-r.y),o=(e.y-r.y)*(t.x-r.x),a=i-o;if(i>0){if(o<=0)return Y.signum(a);n=i+o}else{if(!(i<0))return Y.signum(a);if(o>=0)return Y.signum(a);n=-i-o}const s=Y.DP_SAFE_EPSILON*n;return a>=s||-a>=s?Y.signum(a):2}static signum(e){return e>0?1:e<0?-1:0}}Y.DP_SAFE_EPSILON=1e-15;class X{static index(e,t,r){return Y.orientationIndex(e,t,r)}static isCCW(){if(arguments[0]instanceof Array){const e=arguments[0],t=e.length-1;if(t<3)throw new c("Ring has fewer than 4 points, so orientation cannot be determined");let r=e[0],n=0;for(let i=1;i<=t;i++){const t=e[i];t.y>r.y&&(r=t,n=i)}let i=n;do{i-=1,i<0&&(i=t)}while(e[i].equals2D(r)&&i!==n);let o=n;do{o=(o+1)%t}while(e[o].equals2D(r)&&o!==n);const a=e[i],s=e[o];if(a.equals2D(r)||s.equals2D(r)||a.equals2D(s))return!1;const l=X.index(a,r,s);let u=null;return u=0===l?a.x>s.x:l>0,u}if(n(arguments[0],s)){const e=arguments[0],t=e.size()-1;if(t<3)throw new c("Ring has fewer than 4 points, so orientation cannot be determined");let r=e.getCoordinate(0),n=0;for(let i=1;i<=t;i++){const t=e.getCoordinate(i);t.y>r.y&&(r=t,n=i)}let i=null,o=n;do{o-=1,o<0&&(o=t),i=e.getCoordinate(o)}while(i.equals2D(r)&&o!==n);let a=null,s=n;do{s=(s+1)%t,a=e.getCoordinate(s)}while(a.equals2D(r)&&s!==n);if(i.equals2D(r)||a.equals2D(r)||i.equals2D(a))return!1;const l=X.index(i,r,a);let u=null;return u=0===l?i.x>a.x:l>0,u}}}X.CLOCKWISE=-1,X.RIGHT=X.CLOCKWISE,X.COUNTERCLOCKWISE=1,X.LEFT=X.COUNTERCLOCKWISE,X.COLLINEAR=0,X.STRAIGHT=X.COLLINEAR;class J{}class $ extends I{constructor(){super(),$.constructor_.apply(this,arguments)}static constructor_(){this._shell=null,this._holes=null;let e=arguments[0],t=arguments[1],r=arguments[2];if(I.constructor_.call(this,r),null===e&&(e=this.getFactory().createLinearRing()),null===t&&(t=[]),I.hasNullElements(t))throw new c("holes must not contain null elements");if(e.isEmpty()&&I.hasNonEmptyElements(t))throw new c("shell is empty but holes are not");this._shell=e,this._holes=t}computeEnvelopeInternal(){return this._shell.getEnvelopeInternal()}getCoordinates(){if(this.isEmpty())return[];const e=new Array(this.getNumPoints()).fill(null);let t=-1;const r=this._shell.getCoordinates();for(let n=0;n<r.length;n++)t++,e[t]=r[n];for(let r=0;r<this._holes.length;r++){const n=this._holes[r].getCoordinates();for(let r=0;r<n.length;r++)t++,e[t]=n[r]}return e}getArea(){let e=0;e+=N.ofRing(this._shell.getCoordinateSequence());for(let t=0;t<this._holes.length;t++)e-=N.ofRing(this._holes[t].getCoordinateSequence());return e}copyInternal(){const e=this._shell.copy(),t=new Array(this._holes.length).fill(null);for(let e=0;e<this._holes.length;e++)t[e]=this._holes[e].copy();return new $(e,t,this._factory)}isRectangle(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;const e=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal();for(let r=0;r<5;r++){const n=e.getX(r);if(n!==t.getMinX()&&n!==t.getMaxX())return!1;const i=e.getY(r);if(i!==t.getMinY()&&i!==t.getMaxY())return!1}let r=e.getX(0),n=e.getY(0);for(let t=1;t<=4;t++){const i=e.getX(t),o=e.getY(t);if(i!==r===(o!==n))return!1;r=i,n=o}return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof I){const e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;const r=e,n=this._shell,i=r._shell;if(!n.equalsExact(i,t))return!1;if(this._holes.length!==r._holes.length)return!1;for(let e=0;e<this._holes.length;e++)if(!this._holes[e].equalsExact(r._holes[e],t))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(let e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);V.sort(this._holes)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];if(e.isEmpty())return null;const r=e.getCoordinateSequence(),n=O.minCoordinateIndex(r,0,r.size()-2);O.scroll(r,n,!0),X.isCCW(r)===t&&O.reverse(r)}}getCoordinate(){return this._shell.getCoordinate()}getNumInteriorRing(){return this._holes.length}getBoundaryDimension(){return 1}reverseInternal(){const e=this.getExteriorRing().reverse(),t=new Array(this.getNumInteriorRing()).fill(null);for(let e=0;e<t.length;e++)t[e]=this.getInteriorRingN(e).reverse();return this.getFactory().createPolygon(e,t)}getTypeCode(){return I.TYPECODE_POLYGON}getDimension(){return 2}getLength(){let e=0;e+=this._shell.getLength();for(let t=0;t<this._holes.length;t++)e+=this._holes[t].getLength();return e}getNumPoints(){let e=this._shell.getNumPoints();for(let t=0;t<this._holes.length;t++)e+=this._holes[t].getNumPoints();return e}convexHull(){return this.getExteriorRing().convexHull()}normalized(e,t){const r=e.copy();return this.normalize(r,t),r}compareToSameClass(){if(1===arguments.length){const e=arguments[0],t=this._shell,r=e._shell;return t.compareToSameClass(r)}if(2===arguments.length){const e=arguments[1],t=arguments[0],r=this._shell,n=t._shell,i=r.compareToSameClass(n,e);if(0!==i)return i;const o=this.getNumInteriorRing(),a=t.getNumInteriorRing();let s=0;for(;s<o&&s<a;){const r=this.getInteriorRingN(s),n=t.getInteriorRingN(s),i=r.compareToSameClass(n,e);if(0!==i)return i;s++}return s<o?1:s<a?-1:0}}apply(){if(n(arguments[0],S)){const e=arguments[0];this._shell.apply(e);for(let t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(n(arguments[0],B)){const e=arguments[0];if(this._shell.apply(e),!e.isDone())for(let t=0;t<this._holes.length&&(this._holes[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(n(arguments[0],R)){arguments[0].filter(this)}else if(n(arguments[0],f)){const e=arguments[0];e.filter(this),this._shell.apply(e);for(let t=0;t<this._holes.length;t++)this._holes[t].apply(e)}}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(let t=0;t<this._holes.length;t++)e[t+1]=this._holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}getGeometryType(){return I.TYPENAME_POLYGON}getExteriorRing(){return this._shell}isEmpty(){return this._shell.isEmpty()}getInteriorRingN(e){return this._holes[e]}get interfaces_(){return[J]}}class ee extends Z{contains(){}}class te extends ee{}class re extends te{constructor(e){super(),this.array=[],e instanceof Z&&this.addAll(e)}contains(e){for(const t of this.array)if(0===t.compareTo(e))return!0;return!1}add(e){if(this.contains(e))return!1;for(let t=0,r=this.array.length;t<r;t++){if(1===this.array[t].compareTo(e))return!!this.array.splice(t,0,e)}return this.array.push(e),!0}addAll(e){for(const t of e)this.add(t);return!0}remove(){throw new T}size(){return this.array.length}isEmpty(){return 0===this.array.length}toArray(){return this.array.slice()}iterator(){return new ne(this.array)}}class ne{constructor(e){this.array=e,this.position=0}next(){if(this.position===this.array.length)throw new G;return this.array[this.position++]}hasNext(){return this.position<this.array.length}remove(){throw new T}}class ie extends I{constructor(){super(),ie.constructor_.apply(this,arguments)}static constructor_(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){let e=arguments[0],t=arguments[1];if(I.constructor_.call(this,t),null===e&&(e=[]),I.hasNullElements(e))throw new c("geometries must not contain null elements");this._geometries=e}}computeEnvelopeInternal(){const e=new x;for(let t=0;t<this._geometries.length;t++)e.expandToInclude(this._geometries[t].getEnvelopeInternal());return e}getGeometryN(e){return this._geometries[e]}getCoordinates(){const e=new Array(this.getNumPoints()).fill(null);let t=-1;for(let r=0;r<this._geometries.length;r++){const n=this._geometries[r].getCoordinates();for(let r=0;r<n.length;r++)t++,e[t]=n[r]}return e}getArea(){let e=0;for(let t=0;t<this._geometries.length;t++)e+=this._geometries[t].getArea();return e}copyInternal(){const e=new Array(this._geometries.length).fill(null);for(let t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new ie(e,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof I){const e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;const r=e;if(this._geometries.length!==r._geometries.length)return!1;for(let e=0;e<this._geometries.length;e++)if(!this._geometries[e].equalsExact(r._geometries[e],t))return!1;return!0}return super.equalsExact.apply(this,arguments)}normalize(){for(let e=0;e<this._geometries.length;e++)this._geometries[e].normalize();V.sort(this._geometries)}getCoordinate(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}getBoundaryDimension(){let e=k.FALSE;for(let t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getBoundaryDimension());return e}reverseInternal(){const e=this._geometries.length,t=new z(e);for(let r=0;r<e;r++)t.add(this._geometries[r].reverse());return this.getFactory().buildGeometry(t)}getTypeCode(){return I.TYPECODE_GEOMETRYCOLLECTION}getDimension(){let e=k.FALSE;for(let t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getDimension());return e}getLength(){let e=0;for(let t=0;t<this._geometries.length;t++)e+=this._geometries[t].getLength();return e}getNumPoints(){let e=0;for(let t=0;t<this._geometries.length;t++)e+=this._geometries[t].getNumPoints();return e}getNumGeometries(){return this._geometries.length}compareToSameClass(){if(1===arguments.length){const e=arguments[0],t=new re(V.asList(this._geometries)),r=new re(V.asList(e._geometries));return this.compare(t,r)}if(2===arguments.length){const e=arguments[1],t=arguments[0],r=this.getNumGeometries(),n=t.getNumGeometries();let i=0;for(;i<r&&i<n;){const r=this.getGeometryN(i),n=t.getGeometryN(i),o=r.compareToSameClass(n,e);if(0!==o)return o;i++}return i<r?1:i<n?-1:0}}apply(){if(n(arguments[0],S)){const e=arguments[0];for(let t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(n(arguments[0],B)){const e=arguments[0];if(0===this._geometries.length)return null;for(let t=0;t<this._geometries.length&&(this._geometries[t].apply(e),!e.isDone());t++);e.isGeometryChanged()&&this.geometryChanged()}else if(n(arguments[0],R)){const e=arguments[0];e.filter(this);for(let t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}else if(n(arguments[0],f)){const e=arguments[0];e.filter(this);for(let t=0;t<this._geometries.length;t++)this._geometries[t].apply(e)}}getBoundary(){return I.checkNotGeometryCollection(this),_.shouldNeverReachHere(),null}getGeometryType(){return I.TYPENAME_GEOMETRYCOLLECTION}isEmpty(){for(let e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}}class oe extends ie{constructor(){super(),oe.constructor_.apply(this,arguments)}static constructor_(){const e=arguments[0],t=arguments[1];ie.constructor_.call(this,e,t)}copyInternal(){const e=new Array(this._geometries.length).fill(null);for(let t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new oe(e,this._factory)}isValid(){return!0}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof I){const e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&super.equalsExact.call(this,e,t)}return super.equalsExact.apply(this,arguments)}getCoordinate(){if(1===arguments.length&&Number.isInteger(arguments[0])){const e=arguments[0];return this._geometries[e].getCoordinate()}return super.getCoordinate.apply(this,arguments)}getBoundaryDimension(){return k.FALSE}getTypeCode(){return I.TYPECODE_MULTIPOINT}getDimension(){return 0}getBoundary(){return this.getFactory().createGeometryCollection()}getGeometryType(){return I.TYPENAME_MULTIPOINT}get interfaces_(){return[D]}}class ae extends L{constructor(){super(),ae.constructor_.apply(this,arguments)}static constructor_(){const e=arguments[0],t=arguments[1];L.constructor_.call(this,e,t),this.validateConstruction()}copyInternal(){return new ae(this._points.copy(),this._factory)}getBoundaryDimension(){return k.FALSE}isClosed(){return!!this.isEmpty()||super.isClosed.call(this)}reverseInternal(){const e=this._points.copy();return O.reverse(e),this.getFactory().createLinearRing(e)}getTypeCode(){return I.TYPECODE_LINEARRING}validateConstruction(){if(!this.isEmpty()&&!super.isClosed.call(this))throw new c("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<ae.MINIMUM_VALID_SIZE)throw new c("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}getGeometryType(){return I.TYPENAME_LINEARRING}}ae.MINIMUM_VALID_SIZE=4;class se extends w{constructor(){super(),se.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length)w.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof se){const e=arguments[0];w.constructor_.call(this,e.x,e.y)}else if(arguments[0]instanceof w){const e=arguments[0];w.constructor_.call(this,e.x,e.y)}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];w.constructor_.call(this,e,t,w.NULL_ORDINATE)}}setOrdinate(e,t){switch(e){case se.X:this.x=t;break;case se.Y:this.y=t;break;default:throw new c("Invalid ordinate index: "+e)}}getZ(){return w.NULL_ORDINATE}getOrdinate(e){switch(e){case se.X:return this.x;case se.Y:return this.y}throw new c("Invalid ordinate index: "+e)}setZ(e){throw new c("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new se(this)}toString(){return"("+this.x+", "+this.y+")"}setCoordinate(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}}se.X=0,se.Y=1,se.Z=-1,se.M=-1;class le extends w{constructor(){super(),le.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)w.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof le){const e=arguments[0];w.constructor_.call(this,e.x,e.y),this._m=e._m}else if(arguments[0]instanceof w){const e=arguments[0];w.constructor_.call(this,e.x,e.y),this._m=this.getM()}}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];w.constructor_.call(this,e,t,w.NULL_ORDINATE),this._m=r}}getM(){return this._m}setOrdinate(e,t){switch(e){case le.X:this.x=t;break;case le.Y:this.y=t;break;case le.M:this._m=t;break;default:throw new c("Invalid ordinate index: "+e)}}setM(e){this._m=e}getZ(){return w.NULL_ORDINATE}getOrdinate(e){switch(e){case le.X:return this.x;case le.Y:return this.y;case le.M:return this._m}throw new c("Invalid ordinate index: "+e)}setZ(e){throw new c("CoordinateXY dimension 2 does not support z-ordinate")}copy(){return new le(this)}toString(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}setCoordinate(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}le.X=0,le.Y=1,le.Z=-1,le.M=2;class ue extends w{constructor(){super(),ue.constructor_.apply(this,arguments)}static constructor_(){if(this._m=null,0===arguments.length)w.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof ue){const e=arguments[0];w.constructor_.call(this,e),this._m=e._m}else if(arguments[0]instanceof w){const e=arguments[0];w.constructor_.call(this,e),this._m=this.getM()}}else if(4===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];w.constructor_.call(this,e,t,r),this._m=n}}getM(){return this._m}setOrdinate(e,t){switch(e){case w.X:this.x=t;break;case w.Y:this.y=t;break;case w.Z:this.z=t;break;case w.M:this._m=t;break;default:throw new c("Invalid ordinate index: "+e)}}setM(e){this._m=e}getOrdinate(e){switch(e){case w.X:return this.x;case w.Y:return this.y;case w.Z:return this.getZ();case w.M:return this.getM()}throw new c("Invalid ordinate index: "+e)}copy(){return new ue(this)}toString(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}setCoordinate(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}class ce{static measures(e){return e instanceof se?0:e instanceof le||e instanceof ue?1:0}static dimension(e){return e instanceof se?2:e instanceof le?3:e instanceof ue?4:3}static create(){if(1===arguments.length){const e=arguments[0];return ce.create(e,0)}if(2===arguments.length){const e=arguments[0],t=arguments[1];return 2===e?new se:3===e&&0===t?new w:3===e&&1===t?new le:4===e&&1===t?new ue:new w}}}class fe extends z{constructor(){super(),fe.constructor_.apply(this,arguments)}static constructor_(){if(0===arguments.length);else if(1===arguments.length){const e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.ensureCapacity(e.length),this.add(e,t)}}getCoordinate(e){return this.get(e)}addAll(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&n(arguments[0],Z)){const e=arguments[1];let t=!1;for(let r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),t=!0;return t}return super.addAll.apply(this,arguments)}clone(){const e=super.clone.call(this);for(let t=0;t<this.size();t++)e.add(t,this.get(t).clone());return e}toCoordinateArray(){if(0===arguments.length)return this.toArray(fe.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(fe.coordArrayType);const e=this.size(),t=new Array(e).fill(null);for(let r=0;r<e;r++)t[r]=this.get(e-r-1);return t}}add(){if(1===arguments.length){const e=arguments[0];return super.add.call(this,e)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const e=arguments[0],t=arguments[1];return this.add(e,t,!0),!0}if(arguments[0]instanceof w&&"boolean"==typeof arguments[1]){const e=arguments[0];if(!arguments[1]&&this.size()>=1){if(this.get(this.size()-1).equals2D(e))return null}super.add.call(this,e)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){const e=arguments[0],t=arguments[1];return this.add(e,t),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){const e=arguments[0],t=arguments[1];if(arguments[2])for(let r=0;r<e.length;r++)this.add(e[r],t);else for(let r=e.length-1;r>=0;r--)this.add(e[r],t);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof w){const e=arguments[0],t=arguments[1];if(!arguments[2]){const r=this.size();if(r>0){if(e>0){if(this.get(e-1).equals2D(t))return null}if(e<r){if(this.get(e).equals2D(t))return null}}}super.add.call(this,e,t)}}else if(4===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];let i=1;r>n&&(i=-1);for(let o=r;o!==n;o+=i)this.add(e[o],t);return!0}}closeRing(){if(this.size()>0){const e=this.get(0).copy();this.add(e,!1)}}}fe.coordArrayType=new Array(0).fill(null);class he{static log10(e){const t=Math.log(e);return o.isInfinite(t)||o.isNaN(t)?t:t/he.LOG_10}static min(e,t,r,n){let i=e;return t<i&&(i=t),r<i&&(i=r),n<i&&(i=n),i}static clamp(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){const e=arguments[0],t=arguments[1],r=arguments[2];return e<t?t:e>r?r:e}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const e=arguments[0],t=arguments[1],r=arguments[2];return e<t?t:e>r?r:e}}static wrap(e,t){return e<0?t- -e%t:e%t}static max(){if(3===arguments.length){const e=arguments[1],t=arguments[2];let r=arguments[0];return e>r&&(r=e),t>r&&(r=t),r}if(4===arguments.length){const e=arguments[1],t=arguments[2],r=arguments[3];let n=arguments[0];return e>n&&(n=e),t>n&&(n=t),r>n&&(n=r),n}}static average(e,t){return(e+t)/2}}he.LOG_10=Math.log(10);class pe{static arraycopy(e,t,r,n,i){let o=0;for(let a=t;a<t+i;a++)r[n+o]=e[a],o++}static getProperty(e){return{"line.separator":"\n"}[e]}}class de{static isRing(e){return!(e.length<4)&&!!e[0].equals2D(e[e.length-1])}static ptNotInList(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(de.indexOf(n,t)<0)return n}return null}static scroll(e,t){const r=de.indexOf(t,e);if(r<0)return null;const n=new Array(e.length).fill(null);pe.arraycopy(e,r,n,0,e.length-r),pe.arraycopy(e,0,n,e.length-r,r),pe.arraycopy(n,0,e,0,e.length)}static equals(){if(2===arguments.length){const e=arguments[0],t=arguments[1];if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].equals(t[r]))return!1;return!0}if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(0!==r.compare(e[n],t[n]))return!1;return!0}}static intersection(e,t){const r=new fe;for(let n=0;n<e.length;n++)t.intersects(e[n])&&r.add(e[n],!0);return r.toCoordinateArray()}static measures(e){if(null===e||0===e.length)return 0;let t=0;for(const r of e)t=Math.max(t,ce.measures(r));return t}static hasRepeatedPoints(e){for(let t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1}static removeRepeatedPoints(e){if(!de.hasRepeatedPoints(e))return e;return new fe(e,!1).toCoordinateArray()}static reverse(e){const t=e.length-1,r=Math.trunc(t/2);for(let n=0;n<=r;n++){const r=e[n];e[n]=e[t-n],e[t-n]=r}}static removeNull(e){let t=0;for(let r=0;r<e.length;r++)null!==e[r]&&t++;const r=new Array(t).fill(null);if(0===t)return r;let n=0;for(let t=0;t<e.length;t++)null!==e[t]&&(r[n++]=e[t]);return r}static copyDeep(){if(1===arguments.length){const e=arguments[0],t=new Array(e.length).fill(null);for(let r=0;r<e.length;r++)t[r]=e[r].copy();return t}if(5===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3],i=arguments[4];for(let o=0;o<i;o++)r[n+o]=e[t+o].copy()}}static isEqualReversed(e,t){for(let r=0;r<e.length;r++){const n=e[r],i=t[e.length-r-1];if(0!==n.compareTo(i))return!1}return!0}static envelope(e){const t=new x;for(let r=0;r<e.length;r++)t.expandToInclude(e[r]);return t}static toCoordinateArray(e){return e.toArray(de.coordArrayType)}static dimension(e){if(null===e||0===e.length)return 3;let t=0;for(const r of e)t=Math.max(t,ce.dimension(r));return t}static atLeastNCoordinatesOrNothing(e,t){return t.length>=e?t:[]}static indexOf(e,t){for(let r=0;r<t.length;r++)if(e.equals(t[r]))return r;return-1}static increasingDirection(e){for(let t=0;t<Math.trunc(e.length/2);t++){const r=e.length-1-t,n=e[t].compareTo(e[r]);if(0!==n)return n}return 1}static compare(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=e[r].compareTo(t[r]);if(0!==n)return n;r++}return r<t.length?-1:r<e.length?1:0}static minCoordinate(e){let t=null;for(let r=0;r<e.length;r++)(null===t||t.compareTo(e[r])>0)&&(t=e[r]);return t}static extract(e,t,r){t=he.clamp(t,0,e.length);let n=(r=he.clamp(r,-1,e.length))-t+1;r<0&&(n=0),t>=e.length&&(n=0),r<t&&(n=0);const i=new Array(n).fill(null);if(0===n)return i;let o=0;for(let n=t;n<=r;n++)i[o++]=e[n];return i}}de.ForwardComparator=class{compare(e,t){const r=e,n=t;return de.compare(r,n)}get interfaces_(){return[y]}},de.BidirectionalComparator=class{compare(e,t){const r=e,n=t;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;const i=de.compare(r,n);return de.isEqualReversed(r,n)?0:i}OLDcompare(e,t){const r=e,n=t;if(r.length<n.length)return-1;if(r.length>n.length)return 1;if(0===r.length)return 0;const i=de.increasingDirection(r),o=de.increasingDirection(n);let a=i>0?0:r.length-1,s=o>0?0:r.length-1;for(let e=0;e<r.length;e++){const e=r[a].compareTo(n[s]);if(0!==e)return e;a+=i,s+=o}return 0}get interfaces_(){return[y]}},de.coordArrayType=new Array(0).fill(null);class ye{constructor(e){this.str=e}append(e){this.str+=e}setCharAt(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)}toString(){return this.str}}class ge{constructor(){ge.constructor_.apply(this,arguments)}static constructor_(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){const e=arguments[0];ge.constructor_.call(this,e,de.dimension(e),de.measures(e))}else if(Number.isInteger(arguments[0])){const e=arguments[0];this._coordinates=new Array(e).fill(null);for(let t=0;t<e;t++)this._coordinates[t]=new w}else if(n(arguments[0],s)){const e=arguments[0];if(null===e)return this._coordinates=new Array(0).fill(null),null;this._dimension=e.getDimension(),this._measures=e.getMeasures(),this._coordinates=new Array(e.size()).fill(null);for(let t=0;t<this._coordinates.length;t++)this._coordinates[t]=e.getCoordinateCopy(t)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const e=arguments[0],t=arguments[1];ge.constructor_.call(this,e,t,de.measures(e))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const e=arguments[0],t=arguments[1];this._coordinates=new Array(e).fill(null),this._dimension=t;for(let r=0;r<e;r++)this._coordinates[r]=ce.create(t)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){const e=arguments[0],t=arguments[1],r=arguments[2];this._dimension=t,this._measures=r,this._coordinates=null===e?new Array(0).fill(null):e}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){const e=arguments[0],t=arguments[1],r=arguments[2];this._coordinates=new Array(e).fill(null),this._dimension=t,this._measures=r;for(let t=0;t<e;t++)this._coordinates[t]=this.createCoordinate()}}getM(e){return this.hasM()?this._coordinates[e].getM():o.NaN}setOrdinate(e,t,r){switch(t){case s.X:this._coordinates[e].x=r;break;case s.Y:this._coordinates[e].y=r;break;default:this._coordinates[e].setOrdinate(t,r)}}getZ(e){return this.hasZ()?this._coordinates[e].getZ():o.NaN}size(){return this._coordinates.length}getOrdinate(e,t){switch(t){case s.X:return this._coordinates[e].x;case s.Y:return this._coordinates[e].y;default:return this._coordinates[e].getOrdinate(t)}}getCoordinate(){if(1===arguments.length){const e=arguments[0];return this._coordinates[e]}if(2===arguments.length){const e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}getCoordinateCopy(e){const t=this.createCoordinate();return t.setCoordinate(this._coordinates[e]),t}createCoordinate(){return ce.create(this.getDimension(),this.getMeasures())}getDimension(){return this._dimension}getX(e){return this._coordinates[e].x}getMeasures(){return this._measures}expandEnvelope(e){for(let t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e}copy(){const e=new Array(this.size()).fill(null);for(let t=0;t<this._coordinates.length;t++){const r=this.createCoordinate();r.setCoordinate(this._coordinates[t]),e[t]=r}return new ge(e,this._dimension,this._measures)}toString(){if(this._coordinates.length>0){const e=new ye(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(let t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"}getY(e){return this._coordinates[e].y}toCoordinateArray(){return this._coordinates}get interfaces_(){return[s,p]}}class me{static instance(){return me.instanceObject}readResolve(){return me.instance()}create(){if(1===arguments.length){if(arguments[0]instanceof Array){return new ge(arguments[0])}if(n(arguments[0],s)){return new ge(arguments[0])}}else{if(2===arguments.length){let e=arguments[1];return e>3&&(e=3),e<2&&(e=2),new ge(arguments[0],e)}if(3===arguments.length){let e=arguments[2],t=arguments[1]-e;return e>1&&(e=1),t>3&&(t=3),t<2&&(t=2),new ge(arguments[0],t+e,e)}}}get interfaces_(){return[l,p]}}me.instanceObject=new me;class _e extends ie{constructor(){super(),_e.constructor_.apply(this,arguments)}static constructor_(){const e=arguments[0],t=arguments[1];ie.constructor_.call(this,e,t)}copyInternal(){const e=new Array(this._geometries.length).fill(null);for(let t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new _e(e,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof I){const e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&super.equalsExact.call(this,e,t)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return 1}getTypeCode(){return I.TYPECODE_MULTIPOLYGON}getDimension(){return 2}getBoundary(){if(this.isEmpty())return this.getFactory().createMultiLineString();const e=new z;for(let t=0;t<this._geometries.length;t++){const r=this._geometries[t].getBoundary();for(let t=0;t<r.getNumGeometries();t++)e.add(r.getGeometryN(t))}const t=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(t))}getGeometryType(){return I.TYPENAME_MULTIPOLYGON}get interfaces_(){return[J]}}class ve{get(){}put(){}size(){}values(){}entrySet(){}}class Ae extends ee{constructor(e){super(),this.map=new Map,e instanceof Z&&this.addAll(e)}contains(e){const t=e.hashCode?e.hashCode():e;return!!this.map.has(t)}add(e){const t=e.hashCode?e.hashCode():e;return!this.map.has(t)&&!!this.map.set(t,e)}addAll(e){for(const t of e)this.add(t);return!0}remove(){throw new T}size(){return this.map.size}isEmpty(){return 0===this.map.size}toArray(){return Array.from(this.map.values())}iterator(){return new be(this.map)}[Symbol.iterator](){return this.map}}class be{constructor(e){this.iterator=e.values();const{done:t,value:r}=this.iterator.next();this.done=t,this.value=r}next(){if(this.done)throw new G;const e=this.value,{done:t,value:r}=this.iterator.next();return this.done=t,this.value=r,e}hasNext(){return!this.done}remove(){throw new T}}class we extends ve{constructor(){super(),this.map=new Map}get(e){return this.map.get(e)||null}put(e,t){return this.map.set(e,t),t}values(){const e=new z,t=this.map.values();let r=t.next();for(;!r.done;)e.add(r.value),r=t.next();return e}entrySet(){const e=new Ae;return this.map.entries().forEach((t=>e.add(t))),e}size(){return this.map.size()}}class Ee{constructor(){Ee.constructor_.apply(this,arguments)}static constructor_(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=Ee.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof xe){const e=arguments[0];this._modelType=e,e===Ee.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){const e=arguments[0];this._modelType=Ee.FIXED,this.setScale(e)}else if(arguments[0]instanceof Ee){const e=arguments[0];this._modelType=e._modelType,this._scale=e._scale}}static mostPrecise(e,t){return e.compareTo(t)>=0?e:t}equals(e){if(!(e instanceof Ee))return!1;const t=e;return this._modelType===t._modelType&&this._scale===t._scale}compareTo(e){const t=e,r=this.getMaximumSignificantDigits(),n=t.getMaximumSignificantDigits();return K.compare(r,n)}getScale(){return this._scale}isFloating(){return this._modelType===Ee.FLOATING||this._modelType===Ee.FLOATING_SINGLE}getType(){return this._modelType}toString(){let e="UNKNOWN";return this._modelType===Ee.FLOATING?e="Floating":this._modelType===Ee.FLOATING_SINGLE?e="Floating-Single":this._modelType===Ee.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e}makePrecise(){if("number"==typeof arguments[0]){const e=arguments[0];if(o.isNaN(e))return e;if(this._modelType===Ee.FLOATING_SINGLE){return e}return this._modelType===Ee.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof w){const e=arguments[0];if(this._modelType===Ee.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}getMaximumSignificantDigits(){let e=16;return this._modelType===Ee.FLOATING?e=16:this._modelType===Ee.FLOATING_SINGLE?e=6:this._modelType===Ee.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e}setScale(e){this._scale=Math.abs(e)}get interfaces_(){return[p,h]}}class xe{constructor(){xe.constructor_.apply(this,arguments)}static constructor_(){this._name=null;const e=arguments[0];this._name=e,xe.nameToTypeMap.put(e,this)}readResolve(){return xe.nameToTypeMap.get(this._name)}toString(){return this._name}get interfaces_(){return[p]}}xe.nameToTypeMap=new we,Ee.Type=xe,Ee.FIXED=new xe("FIXED"),Ee.FLOATING=new xe("FLOATING"),Ee.FLOATING_SINGLE=new xe("FLOATING SINGLE"),Ee.maximumPreciseValue=9007199254740992;class Ie extends ie{constructor(){super(),Ie.constructor_.apply(this,arguments)}static constructor_(){const e=arguments[0],t=arguments[1];ie.constructor_.call(this,e,t)}copyInternal(){const e=new Array(this._geometries.length).fill(null);for(let t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new Ie(e,this._factory)}equalsExact(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof I){const e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&super.equalsExact.call(this,e,t)}return super.equalsExact.apply(this,arguments)}getBoundaryDimension(){return this.isClosed()?k.FALSE:0}isClosed(){if(this.isEmpty())return!1;for(let e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}getTypeCode(){return I.TYPECODE_MULTILINESTRING}getDimension(){return 1}getBoundary(){throw new T}getGeometryType(){return I.TYPENAME_MULTILINESTRING}get interfaces_(){return[P]}}class Se{constructor(){Se.constructor_.apply(this,arguments)}static constructor_(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)Se.constructor_.call(this,new Ee,0);else if(1===arguments.length){if(n(arguments[0],l)){const e=arguments[0];Se.constructor_.call(this,new Ee,0,e)}else if(arguments[0]instanceof Ee){const e=arguments[0];Se.constructor_.call(this,e,0,Se.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];Se.constructor_.call(this,e,t,Se.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];this._precisionModel=e,this._coordinateSequenceFactory=r,this._SRID=t}}static toMultiPolygonArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toGeometryArray(e){if(null===e)return null;const t=new Array(e.size()).fill(null);return e.toArray(t)}static getDefaultCoordinateSequenceFactory(){return me.instance()}static toMultiLineStringArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toLineStringArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toMultiPointArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toLinearRingArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toPointArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static toPolygonArray(e){const t=new Array(e.size()).fill(null);return e.toArray(t)}static createPointFromInternalCoord(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}createEmpty(e){switch(e){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new c("Invalid dimension: "+e)}}toGeometry(e){return e.isNull()?this.createPoint():e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new w(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new w(e.getMinX(),e.getMinY()),new w(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new w(e.getMinX(),e.getMinY()),new w(e.getMinX(),e.getMaxY()),new w(e.getMaxX(),e.getMaxY()),new w(e.getMaxX(),e.getMinY()),new w(e.getMinX(),e.getMinY())]),null)}createLineString(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const e=arguments[0];return this.createLineString(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(n(arguments[0],s)){return new L(arguments[0],this)}}}createMultiLineString(){if(0===arguments.length)return new Ie(null,this);if(1===arguments.length){return new Ie(arguments[0],this)}}buildGeometry(e){let t=null,r=!1,n=!1;for(let i=e.iterator();i.hasNext();){const e=i.next(),o=e.getTypeCode();null===t&&(t=o),o!==t&&(r=!0),e instanceof ie&&(n=!0)}if(null===t)return this.createGeometryCollection();if(r||n)return this.createGeometryCollection(Se.toGeometryArray(e));const i=e.iterator().next();if(e.size()>1){if(i instanceof $)return this.createMultiPolygon(Se.toPolygonArray(e));if(i instanceof L)return this.createMultiLineString(Se.toLineStringArray(e));if(i instanceof F)return this.createMultiPoint(Se.toPointArray(e));_.shouldNeverReachHere("Unhandled geometry type: "+i.getGeometryType())}return i}createMultiPointFromCoords(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}createPoint(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof w){const e=arguments[0];return this.createPoint(null!==e?this.getCoordinateSequenceFactory().create([e]):null)}if(n(arguments[0],s)){return new F(arguments[0],this)}}}getCoordinateSequenceFactory(){return this._coordinateSequenceFactory}createPolygon(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(n(arguments[0],s)){const e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Array){const e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ae){const e=arguments[0];return this.createPolygon(e,null)}}else if(2===arguments.length){return new $(arguments[0],arguments[1],this)}}getSRID(){return this._SRID}createGeometryCollection(){if(0===arguments.length)return new ie(null,this);if(1===arguments.length){return new ie(arguments[0],this)}}getPrecisionModel(){return this._precisionModel}createLinearRing(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){const e=arguments[0];return this.createLinearRing(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(n(arguments[0],s)){return new ae(arguments[0],this)}}}createMultiPolygon(){if(0===arguments.length)return new _e(null,this);if(1===arguments.length){return new _e(arguments[0],this)}}createMultiPoint(){if(0===arguments.length)return new oe(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){return new oe(arguments[0],this)}if(n(arguments[0],s)){const e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));const t=new Array(e.size()).fill(null);for(let r=0;r<e.size();r++){const n=this.getCoordinateSequenceFactory().create(1,e.getDimension(),e.getMeasures());O.copy(e,r,n,0,1),t[r]=this.createPoint(n)}return this.createMultiPoint(t)}}}get interfaces_(){return[p]}}const Ce=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];class Pe{constructor(e){this.geometryFactory=e||new Se}read(e){let t;t="string"==typeof e?JSON.parse(e):e;const r=t.type;if(!Oe[r])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==Ce.indexOf(r)?Oe[r].call(this,t.coordinates):"GeometryCollection"===r?Oe[r].call(this,t.geometries):Oe[r].call(this,t)}write(e){const t=e.getGeometryType();if(!Te[t])throw new Error("Geometry is not supported");return Te[t].call(this,e)}}const Oe={Feature:function(e){const t={};for(const r in e)t[r]=e[r];if(e.geometry){const r=e.geometry.type;if(!Oe[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=Oe.bbox.call(this,e.bbox)),t},FeatureCollection:function(e){const t={};if(e.features){t.features=[];for(let r=0;r<e.features.length;++r)t.features.push(this.read(e.features[r]))}return e.bbox&&(t.bbox=this.parse.bbox.call(this,e.bbox)),t},coordinates:function(e){const t=[];for(let r=0;r<e.length;++r){const n=e[r];t.push(new w(...n))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new w(e[0],e[1]),new w(e[2],e[1]),new w(e[2],e[3]),new w(e[0],e[3]),new w(e[0],e[1])])},Point:function(e){const t=new w(...e);return this.geometryFactory.createPoint(t)},MultiPoint:function(e){const t=[];for(let r=0;r<e.length;++r)t.push(Oe.Point.call(this,e[r]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){const t=Oe.coordinates.call(this,e);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){const t=[];for(let r=0;r<e.length;++r)t.push(Oe.LineString.call(this,e[r]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){const t=Oe.coordinates.call(this,e[0]),r=this.geometryFactory.createLinearRing(t),n=[];for(let t=1;t<e.length;++t){const r=e[t],i=Oe.coordinates.call(this,r),o=this.geometryFactory.createLinearRing(i);n.push(o)}return this.geometryFactory.createPolygon(r,n)},MultiPolygon:function(e){const t=[];for(let r=0;r<e.length;++r){const n=e[r];t.push(Oe.Polygon.call(this,n))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){const t=[];for(let r=0;r<e.length;++r){const n=e[r];t.push(this.read(n))}return this.geometryFactory.createGeometryCollection(t)}},Te={coordinate:function(e){const t=[e.x,e.y];return e.z&&t.push(e.z),e.m&&t.push(e.m),t},Point:function(e){return{type:"Point",coordinates:Te.coordinate.call(this,e.getCoordinate())}},MultiPoint:function(e){const t=[];for(let r=0;r<e._geometries.length;++r){const n=e._geometries[r],i=Te.Point.call(this,n);t.push(i.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){const t=[],r=e.getCoordinates();for(let e=0;e<r.length;++e){const n=r[e];t.push(Te.coordinate.call(this,n))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){const t=[];for(let r=0;r<e._geometries.length;++r){const n=e._geometries[r],i=Te.LineString.call(this,n);t.push(i.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){const t=[],r=Te.LineString.call(this,e._shell);t.push(r.coordinates);for(let r=0;r<e._holes.length;++r){const n=e._holes[r],i=Te.LineString.call(this,n);t.push(i.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){const t=[];for(let r=0;r<e._geometries.length;++r){const n=e._geometries[r],i=Te.Polygon.call(this,n);t.push(i.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){const t=[];for(let r=0;r<e._geometries.length;++r){const n=e._geometries[r],i=n.getGeometryType();t.push(Te[i].call(this,n))}return{type:"GeometryCollection",geometries:t}}};class Me{constructor(e){this.parser=new Pe(e||new Se)}read(e){return this.parser.read(e)}}const ke="XY",Re="XYZ",Be="XYM",Le="XYZM",De={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},je="EMPTY",Fe="Z",Ne="M",Ze=1,Ue=2,Qe=3,Ge=4,ze=5,qe=6,Ve={};for(const e in De)Ve[e]=De[e].toUpperCase();class We{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,t){return e>="0"&&e<="9"||"."==e&&!(void 0!==t&&t)}isWhiteSpace_(e){return" "==e||"\t"==e||"\r"==e||"\n"==e}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const e=this.nextChar_(),t=this.index_;let r,n=e;if("("==e)r=Ue;else if(","==e)r=ze;else if(")"==e)r=Qe;else if(this.isNumeric_(e)||"-"==e)r=Ge,n=this.readNumber_();else if(this.isAlpha_(e))r=Ze,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);r=qe}return{position:t,value:n,type:r}}readNumber_(){let e;const t=this.index_;let r=!1,n=!1;do{"."==e?r=!0:"e"!=e&&"E"!=e||(n=!0),e=this.nextChar_()}while(this.isNumeric_(e,r)||!n&&("e"==e||"E"==e)||n&&("-"==e||"+"==e));return parseFloat(this.wkt.substring(t,this.index_--))}readText_(){let e;const t=this.index_;do{e=this.nextChar_()}while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}class Ke{constructor(e,t){this.lexer_=e,this.token_,this.layout_=ke,this.factory=t}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){const t=this.isTokenType(e);return t&&this.consume_(),t}parse(){this.consume_();return this.parseGeometry_()}parseGeometryLayout_(){let e=ke;const t=this.token_;if(this.isTokenType(Ze)){const r=t.value;r===Fe?e=Re:r===Ne?e=Be:"ZM"===r&&(e=Le),e!==ke&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(Ue)){const e=[];do{e.push(this.parseGeometry_())}while(this.match(ze));if(this.match(Qe))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(Ue)){const e=this.parsePoint_();if(this.match(Qe))return e}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(Ue)){const e=this.parsePointList_();if(this.match(Qe))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(Ue)){const e=this.parseLineStringTextList_();if(this.match(Qe))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(Ue)){let e;if(e=this.token_.type==Ue?this.parsePointTextList_():this.parsePointList_(),this.match(Qe))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(Ue)){const e=this.parseLineStringTextList_();if(this.match(Qe))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(Ue)){const e=this.parsePolygonTextList_();if(this.match(Qe))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}parsePoint_(){const e=[],t=this.layout_.length;for(let r=0;r<t;++r){const t=this.token_;if(!this.match(Ge))break;e.push(t.value)}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){const e=[this.parsePoint_()];for(;this.match(ze);)e.push(this.parsePoint_());return e}parsePointTextList_(){const e=[this.parsePointText_()];for(;this.match(ze);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){const e=[this.parseLineStringText_()];for(;this.match(ze);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){const e=[this.parsePolygonText_()];for(;this.match(ze);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){const e=this.isTokenType(Ze)&&this.token_.value==je;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const e=this.factory,t=e=>new w(...e),r=r=>{const n=r.map((r=>e.createLinearRing(r.map(t))));return n.length>1?e.createPolygon(n[0],n.slice(1)):e.createPolygon(n[0])},n=this.token_;if(this.match(Ze)){const i=n.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==i){const t=this.parseGeometryCollectionText_();return e.createGeometryCollection(t)}switch(i){case"POINT":{const t=this.parsePointText_();return t?e.createPoint(new w(...t)):e.createPoint()}case"LINESTRING":{const r=this.parseLineStringText_().map(t);return e.createLineString(r)}case"LINEARRING":{const r=this.parseLineStringText_().map(t);return e.createLinearRing(r)}case"POLYGON":{const t=this.parsePolygonText_();return t&&0!==t.length?r(t):e.createPolygon()}case"MULTIPOINT":{const r=this.parseMultiPointText_();if(!r||0===r.length)return e.createMultiPoint();const n=r.map(t).map((t=>e.createPoint(t)));return e.createMultiPoint(n)}case"MULTILINESTRING":{const r=this.parseMultiLineStringText_().map((r=>e.createLineString(r.map(t))));return e.createMultiLineString(r)}case"MULTIPOLYGON":{const t=this.parseMultiPolygonText_();if(!t||0===t.length)return e.createMultiPolygon();const n=t.map(r);return e.createMultiPolygon(n)}default:throw new Error("Invalid geometry type: "+i)}}throw new Error(this.formatErrorMessage_())}}function He(e){if(e.isEmpty())return"";const t=e.getCoordinate(),r=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||r.push(t.z),void 0===t.m||Number.isNaN(t.m)||r.push(t.m),r.join(" ")}function Ye(e){const t=e.getCoordinates().map((e=>{const t=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||t.push(e.z),void 0===e.m||Number.isNaN(e.m)||t.push(e.m),t})),r=[];for(let e=0,n=t.length;e<n;++e)r.push(t[e].join(" "));return r.join(", ")}function Xe(e){const t=[];t.push("("+Ye(e.getExteriorRing())+")");for(let r=0,n=e.getNumInteriorRing();r<n;++r)t.push("("+Ye(e.getInteriorRingN(r))+")");return t.join(", ")}const Je={Point:He,LineString:Ye,LinearRing:Ye,Polygon:Xe,MultiPoint:function(e){const t=[];for(let r=0,n=e.getNumGeometries();r<n;++r)t.push("("+He(e.getGeometryN(r))+")");return t.join(", ")},MultiLineString:function(e){const t=[];for(let r=0,n=e.getNumGeometries();r<n;++r)t.push("("+Ye(e.getGeometryN(r))+")");return t.join(", ")},MultiPolygon:function(e){const t=[];for(let r=0,n=e.getNumGeometries();r<n;++r)t.push("("+Xe(e.getGeometryN(r))+")");return t.join(", ")},GeometryCollection:function(e){const t=[];for(let r=0,n=e.getNumGeometries();r<n;++r)t.push($e(e.getGeometryN(r)));return t.join(", ")}};function $e(e){let t=e.getGeometryType();const r=Je[t];t=t.toUpperCase();const n=function(e){let t="";if(e.isEmpty())return t;const r=e.getCoordinate();return void 0===r.z||Number.isNaN(r.z)||(t+=Fe),void 0===r.m||Number.isNaN(r.m)||(t+=Ne),t}(e);if(n.length>0&&(t+=" "+n),e.isEmpty())return t+" "+je;return t+" ("+r(e)+")"}class et{constructor(e){this.geometryFactory=e||new Se,this.precisionModel=this.geometryFactory.getPrecisionModel()}read(e){const t=new We(e);return new Ke(t,this.geometryFactory).parse()}write(e){return $e(e)}}class tt{constructor(e){this.parser=new et(e)}write(e){return this.parser.write(e)}static toLineString(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"}}class rt{static toLocationSymbol(e){switch(e){case rt.EXTERIOR:return"e";case rt.BOUNDARY:return"b";case rt.INTERIOR:return"i";case rt.NONE:return"-"}throw new c("Unknown location value: "+e)}}rt.INTERIOR=0,rt.BOUNDARY=1,rt.EXTERIOR=2,rt.NONE=-1;class nt{static intersection(e,t,r,n){const i=e.x<t.x?e.x:t.x,a=e.y<t.y?e.y:t.y,s=e.x>t.x?e.x:t.x,l=e.y>t.y?e.y:t.y,u=r.x<n.x?r.x:n.x,c=r.y<n.y?r.y:n.y,f=r.x>n.x?r.x:n.x,h=r.y>n.y?r.y:n.y,p=((i>u?i:u)+(s<f?s:f))/2,d=((a>c?a:c)+(l<h?l:h))/2,y=e.x-p,g=e.y-d,m=t.x-p,_=t.y-d,v=r.x-p,A=r.y-d,b=n.x-p,E=n.y-d,x=g-_,I=m-y,S=y*_-m*g,C=A-E,P=b-v,O=v*E-b*A,T=x*P-C*I,M=(I*O-P*S)/T,k=(C*S-x*O)/T;return o.isNaN(M)||o.isInfinite(M)||o.isNaN(k)||o.isInfinite(k)?null:new w(M+p,k+d)}}class it{static segmentToSegment(e,t,r,n){if(e.equals(t))return it.pointToSegment(e,r,n);if(r.equals(n))return it.pointToSegment(n,e,t);let i=!1;if(x.intersects(e,t,r,n)){const o=(t.x-e.x)*(n.y-r.y)-(t.y-e.y)*(n.x-r.x);if(0===o)i=!0;else{const a=(e.y-r.y)*(n.x-r.x)-(e.x-r.x)*(n.y-r.y),s=((e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y))/o,l=a/o;(l<0||l>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?he.min(it.pointToSegment(e,r,n),it.pointToSegment(t,r,n),it.pointToSegment(r,e,t),it.pointToSegment(n,e,t)):0}static pointToSegment(e,t,r){if(t.x===r.x&&t.y===r.y)return e.distance(t);const n=(r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y),i=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;if(i<=0)return e.distance(t);if(i>=1)return e.distance(r);const o=((t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y))/n;return Math.abs(o)*Math.sqrt(n)}static pointToLinePerpendicular(e,t,r){const n=(r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y),i=((t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y))/n;return Math.abs(i)*Math.sqrt(n)}static pointToSegmentString(e,t){if(0===t.length)throw new c("Line array must contain at least one vertex");let r=e.distance(t[0]);for(let n=0;n<t.length-1;n++){const i=it.pointToSegment(e,t[n],t[n+1]);i<r&&(r=i)}return r}}class ot{constructor(){ot.constructor_.apply(this,arguments)}static constructor_(){this._result=null,this._inputLines=Array(2).fill().map((()=>Array(2))),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new w,this._intPt[1]=new w,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}static computeEdgeDistance(e,t,r){const n=Math.abs(r.x-t.x),i=Math.abs(r.y-t.y);let o=-1;if(e.equals(t))o=0;else if(e.equals(r))o=n>i?n:i;else{const r=Math.abs(e.x-t.x),a=Math.abs(e.y-t.y);o=n>i?r:a,0!==o||e.equals(t)||(o=Math.max(r,a))}return _.isTrue(!(0===o&&!e.equals(t)),"Bad distance calculation"),o}static nonRobustComputeEdgeDistance(e,t,r){const n=e.x-t.x,i=e.y-t.y,o=Math.sqrt(n*n+i*i);return _.isTrue(!(0===o&&!e.equals(t)),"Invalid distance calculation"),o}getIndexAlongSegment(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]}getTopologySummary(){const e=new ye;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()}computeIntersection(e,t,r,n){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=r,this._inputLines[1][1]=n,this._result=this.computeIntersect(e,t,r,n)}getIntersectionNum(){return this._result}computeIntLineIndex(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((()=>Array(2))),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){const e=arguments[0];this.getEdgeDistance(e,0)>this.getEdgeDistance(e,1)?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}}isProper(){return this.hasIntersection()&&this._isProper}setPrecisionModel(e){this._precisionModel=e}isInteriorIntersection(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){const e=arguments[0];for(let t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}}getIntersection(e){return this._intPt[e]}isEndPoint(){return this.hasIntersection()&&!this._isProper}hasIntersection(){return this._result!==ot.NO_INTERSECTION}getEdgeDistance(e,t){return ot.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1])}isCollinear(){return this._result===ot.COLLINEAR_INTERSECTION}toString(){return tt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+tt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}getEndpoint(e,t){return this._inputLines[e][t]}isIntersection(e){for(let t=0;t<this._result;t++)if(this._intPt[t].equals2D(e))return!0;return!1}getIntersectionAlongSegment(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]}}ot.DONT_INTERSECT=0,ot.DO_INTERSECT=1,ot.COLLINEAR=2,ot.NO_INTERSECTION=0,ot.POINT_INTERSECTION=1,ot.COLLINEAR_INTERSECTION=2;class at extends ot{constructor(){super()}static nearestEndpoint(e,t,r,n){let i=e,o=it.pointToSegment(e,r,n),a=it.pointToSegment(t,r,n);return a<o&&(o=a,i=t),a=it.pointToSegment(r,e,t),a<o&&(o=a,i=r),a=it.pointToSegment(n,e,t),a<o&&(o=a,i=n),i}isInSegmentEnvelopes(e){const t=new x(this._inputLines[0][0],this._inputLines[0][1]),r=new x(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(e)&&r.contains(e)}computeIntersection(){if(3!==arguments.length)return super.computeIntersection.apply(this,arguments);{const e=arguments[0],t=arguments[1],r=arguments[2];if(this._isProper=!1,x.intersects(t,r,e)&&0===X.index(t,r,e)&&0===X.index(r,t,e))return this._isProper=!0,(e.equals(t)||e.equals(r))&&(this._isProper=!1),this._result=ot.POINT_INTERSECTION,null;this._result=ot.NO_INTERSECTION}}intersection(e,t,r,n){let i=this.intersectionSafe(e,t,r,n);return this.isInSegmentEnvelopes(i)||(i=new w(at.nearestEndpoint(e,t,r,n))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i}checkDD(e,t,r,n,i){const o=Y.intersection(e,t,r,n),a=this.isInSegmentEnvelopes(o);pe.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&pe.out.println("Distance = "+i.distance(o))}intersectionSafe(e,t,r,n){let i=nt.intersection(e,t,r,n);return null===i&&(i=at.nearestEndpoint(e,t,r,n)),i}computeCollinearIntersection(e,t,r,n){const i=x.intersects(e,t,r),o=x.intersects(e,t,n),a=x.intersects(r,n,e),s=x.intersects(r,n,t);return i&&o?(this._intPt[0]=r,this._intPt[1]=n,ot.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=e,this._intPt[1]=t,ot.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||s?ot.COLLINEAR_INTERSECTION:ot.POINT_INTERSECTION):i&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||o||a?ot.COLLINEAR_INTERSECTION:ot.POINT_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||i||s?ot.COLLINEAR_INTERSECTION:ot.POINT_INTERSECTION):o&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||i||a?ot.COLLINEAR_INTERSECTION:ot.POINT_INTERSECTION):ot.NO_INTERSECTION}computeIntersect(e,t,r,n){if(this._isProper=!1,!x.intersects(e,t,r,n))return ot.NO_INTERSECTION;const i=X.index(e,t,r),o=X.index(e,t,n);if(i>0&&o>0||i<0&&o<0)return ot.NO_INTERSECTION;const a=X.index(r,n,e),s=X.index(r,n,t);if(a>0&&s>0||a<0&&s<0)return ot.NO_INTERSECTION;return 0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(e,t,r,n):(0===i||0===o||0===a||0===s?(this._isProper=!1,e.equals2D(r)||e.equals2D(n)?this._intPt[0]=e:t.equals2D(r)||t.equals2D(n)?this._intPt[0]=t:0===i?this._intPt[0]=new w(r):0===o?this._intPt[0]=new w(n):0===a?this._intPt[0]=new w(e):0===s&&(this._intPt[0]=new w(t))):(this._isProper=!0,this._intPt[0]=this.intersection(e,t,r,n)),ot.POINT_INTERSECTION)}}class st{constructor(){st.constructor_.apply(this,arguments)}static constructor_(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;const e=arguments[0];this._p=e}static locatePointInRing(){if(arguments[0]instanceof w&&n(arguments[1],s)){const e=arguments[1],t=new st(arguments[0]),r=new w,n=new w;for(let i=1;i<e.size();i++)if(e.getCoordinate(i,r),e.getCoordinate(i-1,n),t.countSegment(r,n),t.isOnSegment())return t.getLocation();return t.getLocation()}if(arguments[0]instanceof w&&arguments[1]instanceof Array){const e=arguments[1],t=new st(arguments[0]);for(let r=1;r<e.length;r++){const n=e[r],i=e[r-1];if(t.countSegment(n,i),t.isOnSegment())return t.getLocation()}return t.getLocation()}}countSegment(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){let r=e.x,n=t.x;return r>n&&(r=t.x,n=e.x),this._p.x>=r&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){let r=X.index(e,t,this._p);if(r===X.COLLINEAR)return this._isPointOnSegment=!0,null;t.y<e.y&&(r=-r),r===X.LEFT&&this._crossingCount++}}isPointInPolygon(){return this.getLocation()!==rt.EXTERIOR}getLocation(){return this._isPointOnSegment?rt.BOUNDARY:this._crossingCount%2==1?rt.INTERIOR:rt.EXTERIOR}isOnSegment(){return this._isPointOnSegment}}class lt{static isOnLine(){if(arguments[0]instanceof w&&n(arguments[1],s)){const e=arguments[0],t=arguments[1],r=new at,n=new w,i=new w,o=t.size();for(let a=1;a<o;a++)if(t.getCoordinate(a-1,n),t.getCoordinate(a,i),r.computeIntersection(e,n,i),r.hasIntersection())return!0;return!1}if(arguments[0]instanceof w&&arguments[1]instanceof Array){const e=arguments[0],t=arguments[1],r=new at;for(let n=1;n<t.length;n++){const i=t[n-1],o=t[n];if(r.computeIntersection(e,i,o),r.hasIntersection())return!0}return!1}}static locateInRing(e,t){return st.locatePointInRing(e,t)}static isInRing(e,t){return lt.locateInRing(e,t)!==rt.EXTERIOR}}class ut{isInBoundary(e){}}class ct{isInBoundary(e){return e%2==1}get interfaces_(){return[ut]}}class ft{isInBoundary(e){return e>0}get interfaces_(){return[ut]}}class ht{isInBoundary(e){return e>1}get interfaces_(){return[ut]}}class pt{isInBoundary(e){return 1===e}get interfaces_(){return[ut]}}ut.Mod2BoundaryNodeRule=ct,ut.EndPointBoundaryNodeRule=ft,ut.MultiValentEndPointBoundaryNodeRule=ht,ut.MonoValentEndPointBoundaryNodeRule=pt,ut.MOD2_BOUNDARY_RULE=new ct,ut.ENDPOINT_BOUNDARY_RULE=new ft,ut.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new ht,ut.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new pt,ut.OGC_SFS_BOUNDARY_RULE=ut.MOD2_BOUNDARY_RULE;class dt{hasNext(){}next(){}remove(){}}class yt{constructor(){yt.constructor_.apply(this,arguments)}static constructor_(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;const e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()}static isAtomic(e){return!(e instanceof ie)}next(){if(this._atStart)return this._atStart=!1,yt.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new G;const e=this._parent.getGeometryN(this._index++);return e instanceof ie?(this._subcollectionIterator=new yt(e),this._subcollectionIterator.next()):e}remove(){throw new T(this.getClass().getName())}hasNext(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}get interfaces_(){return[dt]}}class gt{constructor(){gt.constructor_.apply(this,arguments)}static constructor_(){if(this._boundaryRule=ut.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){const e=arguments[0];if(null===e)throw new c("Rule must be non-null");this._boundaryRule=e}}locateInPolygonRing(e,t){return t.getEnvelopeInternal().intersects(e)?lt.locateInRing(e,t.getCoordinates()):rt.EXTERIOR}intersects(e,t){return this.locate(e,t)!==rt.EXTERIOR}updateLocationInfo(e){e===rt.INTERIOR&&(this._isIn=!0),e===rt.BOUNDARY&&this._numBoundaries++}computeLocation(e,t){if(t instanceof F&&this.updateLocationInfo(this.locateOnPoint(e,t)),t instanceof L)this.updateLocationInfo(this.locateOnLineString(e,t));else if(t instanceof $)this.updateLocationInfo(this.locateInPolygon(e,t));else if(t instanceof Ie){const r=t;for(let t=0;t<r.getNumGeometries();t++){const n=r.getGeometryN(t);this.updateLocationInfo(this.locateOnLineString(e,n))}}else if(t instanceof _e){const r=t;for(let t=0;t<r.getNumGeometries();t++){const n=r.getGeometryN(t);this.updateLocationInfo(this.locateInPolygon(e,n))}}else if(t instanceof ie){const r=new yt(t);for(;r.hasNext();){const n=r.next();n!==t&&this.computeLocation(e,n)}}}locateOnPoint(e,t){return t.getCoordinate().equals2D(e)?rt.INTERIOR:rt.EXTERIOR}locateOnLineString(e,t){if(!t.getEnvelopeInternal().intersects(e))return rt.EXTERIOR;const r=t.getCoordinateSequence();return t.isClosed()||!e.equals(r.getCoordinate(0))&&!e.equals(r.getCoordinate(r.size()-1))?lt.isOnLine(e,r)?rt.INTERIOR:rt.EXTERIOR:rt.BOUNDARY}locateInPolygon(e,t){if(t.isEmpty())return rt.EXTERIOR;const r=t.getExteriorRing(),n=this.locateInPolygonRing(e,r);if(n===rt.EXTERIOR)return rt.EXTERIOR;if(n===rt.BOUNDARY)return rt.BOUNDARY;for(let r=0;r<t.getNumInteriorRing();r++){const n=t.getInteriorRingN(r),i=this.locateInPolygonRing(e,n);if(i===rt.INTERIOR)return rt.EXTERIOR;if(i===rt.BOUNDARY)return rt.BOUNDARY}return rt.INTERIOR}locate(e,t){return t.isEmpty()?rt.EXTERIOR:t instanceof L?this.locateOnLineString(e,t):t instanceof $?this.locateInPolygon(e,t):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(e,t),this._boundaryRule.isInBoundary(this._numBoundaries)?rt.BOUNDARY:this._numBoundaries>0||this._isIn?rt.INTERIOR:rt.EXTERIOR)}}class mt{constructor(){mt.constructor_.apply(this,arguments)}static constructor_(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map((()=>Array(3))),this.setAll(k.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){const e=arguments[0];mt.constructor_.call(this),this.set(e)}else if(arguments[0]instanceof mt){const e=arguments[0];mt.constructor_.call(this),this._matrix[rt.INTERIOR][rt.INTERIOR]=e._matrix[rt.INTERIOR][rt.INTERIOR],this._matrix[rt.INTERIOR][rt.BOUNDARY]=e._matrix[rt.INTERIOR][rt.BOUNDARY],this._matrix[rt.INTERIOR][rt.EXTERIOR]=e._matrix[rt.INTERIOR][rt.EXTERIOR],this._matrix[rt.BOUNDARY][rt.INTERIOR]=e._matrix[rt.BOUNDARY][rt.INTERIOR],this._matrix[rt.BOUNDARY][rt.BOUNDARY]=e._matrix[rt.BOUNDARY][rt.BOUNDARY],this._matrix[rt.BOUNDARY][rt.EXTERIOR]=e._matrix[rt.BOUNDARY][rt.EXTERIOR],this._matrix[rt.EXTERIOR][rt.INTERIOR]=e._matrix[rt.EXTERIOR][rt.INTERIOR],this._matrix[rt.EXTERIOR][rt.BOUNDARY]=e._matrix[rt.EXTERIOR][rt.BOUNDARY],this._matrix[rt.EXTERIOR][rt.EXTERIOR]=e._matrix[rt.EXTERIOR][rt.EXTERIOR]}}static matches(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){const e=arguments[0],t=arguments[1];return t===k.SYM_DONTCARE||(t===k.SYM_TRUE&&(e>=0||e===k.TRUE)||(t===k.SYM_FALSE&&e===k.FALSE||(t===k.SYM_P&&e===k.P||(t===k.SYM_L&&e===k.L||t===k.SYM_A&&e===k.A))))}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){const e=arguments[1];return new mt(arguments[0]).matches(e)}}static isTrue(e){return e>=0||e===k.TRUE}isIntersects(){return!this.isDisjoint()}isCovers(){return(mt.isTrue(this._matrix[rt.INTERIOR][rt.INTERIOR])||mt.isTrue(this._matrix[rt.INTERIOR][rt.BOUNDARY])||mt.isTrue(this._matrix[rt.BOUNDARY][rt.INTERIOR])||mt.isTrue(this._matrix[rt.BOUNDARY][rt.BOUNDARY]))&&this._matrix[rt.EXTERIOR][rt.INTERIOR]===k.FALSE&&this._matrix[rt.EXTERIOR][rt.BOUNDARY]===k.FALSE}isCoveredBy(){return(mt.isTrue(this._matrix[rt.INTERIOR][rt.INTERIOR])||mt.isTrue(this._matrix[rt.INTERIOR][rt.BOUNDARY])||mt.isTrue(this._matrix[rt.BOUNDARY][rt.INTERIOR])||mt.isTrue(this._matrix[rt.BOUNDARY][rt.BOUNDARY]))&&this._matrix[rt.INTERIOR][rt.EXTERIOR]===k.FALSE&&this._matrix[rt.BOUNDARY][rt.EXTERIOR]===k.FALSE}set(){if(1===arguments.length){const e=arguments[0];for(let t=0;t<e.length;t++){const r=Math.trunc(t/3),n=t%3;this._matrix[r][n]=k.toDimensionValue(e.charAt(t))}}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];this._matrix[e][t]=r}}isContains(){return mt.isTrue(this._matrix[rt.INTERIOR][rt.INTERIOR])&&this._matrix[rt.EXTERIOR][rt.INTERIOR]===k.FALSE&&this._matrix[rt.EXTERIOR][rt.BOUNDARY]===k.FALSE}setAtLeast(){if(1===arguments.length){const e=arguments[0];for(let t=0;t<e.length;t++){const r=Math.trunc(t/3),n=t%3;this.setAtLeast(r,n,k.toDimensionValue(e.charAt(t)))}}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];this._matrix[e][t]<r&&(this._matrix[e][t]=r)}}setAtLeastIfValid(e,t,r){e>=0&&t>=0&&this.setAtLeast(e,t,r)}isWithin(){return mt.isTrue(this._matrix[rt.INTERIOR][rt.INTERIOR])&&this._matrix[rt.INTERIOR][rt.EXTERIOR]===k.FALSE&&this._matrix[rt.BOUNDARY][rt.EXTERIOR]===k.FALSE}isTouches(e,t){return e>t?this.isTouches(t,e):(e===k.A&&t===k.A||e===k.L&&t===k.L||e===k.L&&t===k.A||e===k.P&&t===k.A||e===k.P&&t===k.L)&&(this._matrix[rt.INTERIOR][rt.INTERIOR]===k.FALSE&&(mt.isTrue(this._matrix[rt.INTERIOR][rt.BOUNDARY])||mt.isTrue(this._matrix[rt.BOUNDARY][rt.INTERIOR])||mt.isTrue(this._matrix[rt.BOUNDARY][rt.BOUNDARY])))}isOverlaps(e,t){return e===k.P&&t===k.P||e===k.A&&t===k.A?mt.isTrue(this._matrix[rt.INTERIOR][rt.INTERIOR])&&mt.isTrue(this._matrix[rt.INTERIOR][rt.EXTERIOR])&&mt.isTrue(this._matrix[rt.EXTERIOR][rt.INTERIOR]):e===k.L&&t===k.L&&(1===this._matrix[rt.INTERIOR][rt.INTERIOR]&&mt.isTrue(this._matrix[rt.INTERIOR][rt.EXTERIOR])&&mt.isTrue(this._matrix[rt.EXTERIOR][rt.INTERIOR]))}isEquals(e,t){return e===t&&(mt.isTrue(this._matrix[rt.INTERIOR][rt.INTERIOR])&&this._matrix[rt.INTERIOR][rt.EXTERIOR]===k.FALSE&&this._matrix[rt.BOUNDARY][rt.EXTERIOR]===k.FALSE&&this._matrix[rt.EXTERIOR][rt.INTERIOR]===k.FALSE&&this._matrix[rt.EXTERIOR][rt.BOUNDARY]===k.FALSE)}toString(){const e=new ye("123456789");for(let t=0;t<3;t++)for(let r=0;r<3;r++)e.setCharAt(3*t+r,k.toDimensionSymbol(this._matrix[t][r]));return e.toString()}setAll(e){for(let t=0;t<3;t++)for(let r=0;r<3;r++)this._matrix[t][r]=e}get(e,t){return this._matrix[e][t]}transpose(){let e=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=e,e=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=e,e=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=e,this}matches(e){if(9!==e.length)throw new c("Should be length 9: "+e);for(let t=0;t<3;t++)for(let r=0;r<3;r++)if(!mt.matches(this._matrix[t][r],e.charAt(3*t+r)))return!1;return!0}add(e){for(let t=0;t<3;t++)for(let r=0;r<3;r++)this.setAtLeast(t,r,e.get(t,r))}isDisjoint(){return this._matrix[rt.INTERIOR][rt.INTERIOR]===k.FALSE&&this._matrix[rt.INTERIOR][rt.BOUNDARY]===k.FALSE&&this._matrix[rt.BOUNDARY][rt.INTERIOR]===k.FALSE&&this._matrix[rt.BOUNDARY][rt.BOUNDARY]===k.FALSE}isCrosses(e,t){return e===k.P&&t===k.L||e===k.P&&t===k.A||e===k.L&&t===k.A?mt.isTrue(this._matrix[rt.INTERIOR][rt.INTERIOR])&&mt.isTrue(this._matrix[rt.INTERIOR][rt.EXTERIOR]):e===k.L&&t===k.P||e===k.A&&t===k.P||e===k.A&&t===k.L?mt.isTrue(this._matrix[rt.INTERIOR][rt.INTERIOR])&&mt.isTrue(this._matrix[rt.EXTERIOR][rt.INTERIOR]):e===k.L&&t===k.L&&0===this._matrix[rt.INTERIOR][rt.INTERIOR]}get interfaces_(){return[a]}}class _t{static isNorthern(e){return e===_t.NE||e===_t.NW}static isOpposite(e,t){if(e===t)return!1;return 2===(e-t+4)%4}static commonHalfPlane(e,t){if(e===t)return e;if(2===(e-t+4)%4)return-1;const r=e<t?e:t;return 0===r&&3===(e>t?e:t)?3:r}static isInHalfPlane(e,t){return t===_t.SE?e===_t.SE||e===_t.SW:e===t||e===t+1}static quadrant(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){const e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new c("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?_t.NE:_t.SE:t>=0?_t.NW:_t.SW}if(arguments[0]instanceof w&&arguments[1]instanceof w){const e=arguments[0],t=arguments[1];if(t.x===e.x&&t.y===e.y)throw new c("Cannot compute the quadrant for two identical points "+e);return t.x>=e.x?t.y>=e.y?_t.NE:_t.SE:t.y>=e.y?_t.NW:_t.SW}}}_t.NE=0,_t.NW=1,_t.SW=2,_t.SE=3;class vt{constructor(){vt.constructor_.apply(this,arguments)}static constructor_(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){const e=arguments[0];this._edge=e}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];vt.constructor_.call(this,e,t,r,null)}else if(4===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];vt.constructor_.call(this,e),this.init(t,r),this._label=n}}compareDirection(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:X.index(e._p0,e._p1,this._p1)}getDy(){return this._dy}getCoordinate(){return this._p0}setNode(e){this._node=e}print(e){const t=Math.atan2(this._dy,this._dx),r=this.getClass().getName(),n=r.lastIndexOf("."),i=r.substring(n+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)}compareTo(e){const t=e;return this.compareDirection(t)}getDirectedCoordinate(){return this._p1}getDx(){return this._dx}getLabel(){return this._label}getEdge(){return this._edge}getQuadrant(){return this._quadrant}getNode(){return this._node}toString(){const e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),r=t.lastIndexOf(".");return"  "+t.substring(r+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label}computeLabel(e){}init(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=_t.quadrant(this._dx,this._dy),_.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}get interfaces_(){return[h]}}class At{static opposite(e){return e===At.LEFT?At.RIGHT:e===At.RIGHT?At.LEFT:e}}At.ON=0,At.LEFT=1,At.RIGHT=2;class bt{constructor(){bt.constructor_.apply(this,arguments)}static constructor_(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){const e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){const e=arguments[0];this.init(1),this.location[At.ON]=e}else if(arguments[0]instanceof bt){const e=arguments[0];if(this.init(e.location.length),null!==e)for(let t=0;t<this.location.length;t++)this.location[t]=e.location[t]}}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];this.init(3),this.location[At.ON]=e,this.location[At.LEFT]=t,this.location[At.RIGHT]=r}}setAllLocations(e){for(let t=0;t<this.location.length;t++)this.location[t]=e}isNull(){for(let e=0;e<this.location.length;e++)if(this.location[e]!==rt.NONE)return!1;return!0}setAllLocationsIfNull(e){for(let t=0;t<this.location.length;t++)this.location[t]===rt.NONE&&(this.location[t]=e)}isLine(){return 1===this.location.length}merge(e){if(e.location.length>this.location.length){const e=new Array(3).fill(null);e[At.ON]=this.location[At.ON],e[At.LEFT]=rt.NONE,e[At.RIGHT]=rt.NONE,this.location=e}for(let t=0;t<this.location.length;t++)this.location[t]===rt.NONE&&t<e.location.length&&(this.location[t]=e.location[t])}getLocations(){return this.location}flip(){if(this.location.length<=1)return null;const e=this.location[At.LEFT];this.location[At.LEFT]=this.location[At.RIGHT],this.location[At.RIGHT]=e}toString(){const e=new W;return this.location.length>1&&e.append(rt.toLocationSymbol(this.location[At.LEFT])),e.append(rt.toLocationSymbol(this.location[At.ON])),this.location.length>1&&e.append(rt.toLocationSymbol(this.location[At.RIGHT])),e.toString()}setLocations(e,t,r){this.location[At.ON]=e,this.location[At.LEFT]=t,this.location[At.RIGHT]=r}get(e){return e<this.location.length?this.location[e]:rt.NONE}isArea(){return this.location.length>1}isAnyNull(){for(let e=0;e<this.location.length;e++)if(this.location[e]===rt.NONE)return!0;return!1}setLocation(){if(1===arguments.length){const e=arguments[0];this.setLocation(At.ON,e)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.location[e]=t}}init(e){this.location=new Array(e).fill(null),this.setAllLocations(rt.NONE)}isEqualOnSide(e,t){return this.location[t]===e.location[t]}allPositionsEqual(e){for(let t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0}}class wt{constructor(){wt.constructor_.apply(this,arguments)}static constructor_(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){const e=arguments[0];this.elt[0]=new bt(e),this.elt[1]=new bt(e)}else if(arguments[0]instanceof wt){const e=arguments[0];this.elt[0]=new bt(e.elt[0]),this.elt[1]=new bt(e.elt[1])}}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.elt[0]=new bt(rt.NONE),this.elt[1]=new bt(rt.NONE),this.elt[e].setLocation(t)}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];this.elt[0]=new bt(e,t,r),this.elt[1]=new bt(e,t,r)}else if(4===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];this.elt[0]=new bt(rt.NONE,rt.NONE,rt.NONE),this.elt[1]=new bt(rt.NONE,rt.NONE,rt.NONE),this.elt[e].setLocations(t,r,n)}}static toLineLabel(e){const t=new wt(rt.NONE);for(let r=0;r<2;r++)t.setLocation(r,e.getLocation(r));return t}getGeometryCount(){let e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e}setAllLocations(e,t){this.elt[e].setAllLocations(t)}isNull(e){return this.elt[e].isNull()}setAllLocationsIfNull(){if(1===arguments.length){const e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.elt[e].setAllLocationsIfNull(t)}}isLine(e){return this.elt[e].isLine()}merge(e){for(let t=0;t<2;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new bt(e.elt[t]):this.elt[t].merge(e.elt[t])}flip(){this.elt[0].flip(),this.elt[1].flip()}getLocation(){if(1===arguments.length){const e=arguments[0];return this.elt[e].get(At.ON)}if(2===arguments.length){const e=arguments[0],t=arguments[1];return this.elt[e].get(t)}}toString(){const e=new W;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()}isArea(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){const e=arguments[0];return this.elt[e].isArea()}}isAnyNull(e){return this.elt[e].isAnyNull()}setLocation(){if(2===arguments.length){const e=arguments[0],t=arguments[1];this.elt[e].setLocation(At.ON,t)}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];this.elt[e].setLocation(t,r)}}isEqualOnSide(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)}allPositionsEqual(e,t){return this.elt[e].allPositionsEqual(t)}toLine(e){this.elt[e].isArea()&&(this.elt[e]=new bt(this.elt[e].location[0]))}}class Et{createEdgeEndForNext(e,t,r,n){const i=r.segmentIndex+1;if(i>=e.getNumPoints()&&null===n)return null;let o=e.getCoordinate(i);null!==n&&n.segmentIndex===r.segmentIndex&&(o=n.coord);const a=new vt(e,r.coord,o,new wt(e.getLabel()));t.add(a)}createEdgeEndForPrev(e,t,r,n){let i=r.segmentIndex;if(0===r.dist){if(0===i)return null;i--}let o=e.getCoordinate(i);null!==n&&n.segmentIndex>=i&&(o=n.coord);const a=new wt(e.getLabel());a.flip();const s=new vt(e,r.coord,o,a);t.add(s)}computeEdgeEnds(){if(1===arguments.length){const e=arguments[0],t=new z;for(let r=e;r.hasNext();){const e=r.next();this.computeEdgeEnds(e,t)}return t}if(2===arguments.length){const e=arguments[0],t=arguments[1],r=e.getEdgeIntersectionList();r.addEndpoints();const n=r.iterator();let i=null,o=null;if(!n.hasNext())return null;let a=n.next();do{i=o,o=a,a=null,n.hasNext()&&(a=n.next()),null!==o&&(this.createEdgeEndForPrev(e,t,o,i),this.createEdgeEndForNext(e,t,o,a))}while(null!==o)}}}class xt{constructor(){xt.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){const e=arguments[0];this._label=e}}setVisited(e){this._isVisited=e}setInResult(e){this._isInResult=e}isCovered(){return this._isCovered}isCoveredSet(){return this._isCoveredSet}setLabel(e){this._label=e}getLabel(){return this._label}setCovered(e){this._isCovered=e,this._isCoveredSet=!0}updateIM(e){_.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}isInResult(){return this._isInResult}isVisited(){return this._isVisited}}class It extends xt{constructor(){super(),It.constructor_.apply(this,arguments)}static constructor_(){this._coord=null,this._edges=null;const e=arguments[0],t=arguments[1];this._coord=e,this._edges=t,this._label=new wt(0,rt.NONE)}isIncidentEdgeInResult(){for(let e=this.getEdges().getEdges().iterator();e.hasNext();){if(e.next().getEdge().isInResult())return!0}return!1}isIsolated(){return 1===this._label.getGeometryCount()}getCoordinate(){return this._coord}print(e){e.println("node "+this._coord+" lbl: "+this._label)}computeIM(e){}computeMergedLocation(e,t){let r=rt.NONE;if(r=this._label.getLocation(t),!e.isNull(t)){const n=e.getLocation(t);r!==rt.BOUNDARY&&(r=n)}return r}setLabel(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return super.setLabel.apply(this,arguments);{const e=arguments[0],t=arguments[1];null===this._label?this._label=new wt(e,t):this._label.setLocation(e,t)}}getEdges(){return this._edges}mergeLabel(){if(arguments[0]instanceof It){const e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof wt){const e=arguments[0];for(let t=0;t<2;t++){const r=this.computeMergedLocation(e,t);this._label.getLocation(t)===rt.NONE&&this._label.setLocation(t,r)}}}add(e){this._edges.insert(e),e.setNode(this)}setLabelBoundary(e){if(null===this._label)return null;let t=rt.NONE;null!==this._label&&(t=this._label.getLocation(e));let r=null;switch(t){case rt.BOUNDARY:r=rt.INTERIOR;break;case rt.INTERIOR:default:r=rt.BOUNDARY}this._label.setLocation(e,r)}}class St extends ve{}function Ct(e){return null==e?0:e.color}function Pt(e){return null==e?null:e.parent}function Ot(e,t){null!==e&&(e.color=t)}function Tt(e){return null==e?null:e.left}function Mt(e){return null==e?null:e.right}class kt extends St{constructor(){super(),this.root_=null,this.size_=0}get(e){let t=this.root_;for(;null!==t;){const r=e.compareTo(t.key);if(r<0)t=t.left;else{if(!(r>0))return t.value;t=t.right}}return null}put(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:0,getValue(){return this.value},getKey(){return this.key}},this.size_=1,null;let r,n,i=this.root_;do{if(r=i,n=e.compareTo(i.key),n<0)i=i.left;else{if(!(n>0)){const e=i.value;return i.value=t,e}i=i.right}}while(null!==i);const o={key:e,left:null,right:null,value:t,parent:r,color:0,getValue(){return this.value},getKey(){return this.key}};return n<0?r.left=o:r.right=o,this.fixAfterInsertion(o),this.size_++,null}fixAfterInsertion(e){let t;for(e.color=1;null!=e&&e!==this.root_&&1===e.parent.color;)Pt(e)===Tt(Pt(Pt(e)))?(t=Mt(Pt(Pt(e))),1===Ct(t)?(Ot(Pt(e),0),Ot(t,0),Ot(Pt(Pt(e)),1),e=Pt(Pt(e))):(e===Mt(Pt(e))&&(e=Pt(e),this.rotateLeft(e)),Ot(Pt(e),0),Ot(Pt(Pt(e)),1),this.rotateRight(Pt(Pt(e))))):(t=Tt(Pt(Pt(e))),1===Ct(t)?(Ot(Pt(e),0),Ot(t,0),Ot(Pt(Pt(e)),1),e=Pt(Pt(e))):(e===Tt(Pt(e))&&(e=Pt(e),this.rotateRight(e)),Ot(Pt(e),0),Ot(Pt(Pt(e)),1),this.rotateLeft(Pt(Pt(e)))));this.root_.color=0}values(){const e=new z;let t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=kt.successor(t));)e.add(t.value);return e}entrySet(){const e=new Ae;let t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=kt.successor(t));)e.add(t);return e}rotateLeft(e){if(null!=e){const t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}}rotateRight(e){if(null!=e){const t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}}getFirstEntry(){let e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e}static successor(e){let t;if(null===e)return null;if(null!==e.right){for(t=e.right;null!==t.left;)t=t.left;return t}{t=e.parent;let r=e;for(;null!==t&&r===t.right;)r=t,t=t.parent;return t}}size(){return this.size_}containsKey(e){let t=this.root_;for(;null!==t;){const r=e.compareTo(t.key);if(r<0)t=t.left;else{if(!(r>0))return!0;t=t.right}}return!1}}class Rt{constructor(){Rt.constructor_.apply(this,arguments)}static constructor_(){this.nodeMap=new kt,this.nodeFact=null;const e=arguments[0];this.nodeFact=e}find(e){return this.nodeMap.get(e)}addNode(){if(arguments[0]instanceof w){const e=arguments[0];let t=this.nodeMap.get(e);return null===t&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof It){const e=arguments[0],t=this.nodeMap.get(e.getCoordinate());return null===t?(this.nodeMap.put(e.getCoordinate(),e),e):(t.mergeLabel(e),t)}}print(e){for(let t=this.iterator();t.hasNext();){t.next().print(e)}}iterator(){return this.nodeMap.values().iterator()}values(){return this.nodeMap.values()}getBoundaryNodes(e){const t=new z;for(let r=this.iterator();r.hasNext();){const n=r.next();n.getLabel().getLocation(e)===rt.BOUNDARY&&t.add(n)}return t}add(e){const t=e.getCoordinate();this.addNode(t).add(e)}}class Bt extends g{constructor(e,t){super(t?e+" [ "+t+" ]":e),this.pt=t?new w(t):void 0,this.name=Object.keys({TopologyException:Bt})[0]}getCoordinate(){return this.pt}}class Lt{locate(e){}}class Dt{constructor(){Dt.constructor_.apply(this,arguments)}static constructor_(){this._geom=null;const e=arguments[0];this._geom=e}static locatePointInPolygon(e,t){if(t.isEmpty())return rt.EXTERIOR;const r=t.getExteriorRing(),n=Dt.locatePointInRing(e,r);if(n!==rt.INTERIOR)return n;for(let r=0;r<t.getNumInteriorRing();r++){const n=t.getInteriorRingN(r),i=Dt.locatePointInRing(e,n);if(i===rt.BOUNDARY)return rt.BOUNDARY;if(i===rt.INTERIOR)return rt.EXTERIOR}return rt.INTERIOR}static locatePointInRing(e,t){return t.getEnvelopeInternal().intersects(e)?lt.locateInRing(e,t.getCoordinates()):rt.EXTERIOR}static containsPointInPolygon(e,t){return rt.EXTERIOR!==Dt.locatePointInPolygon(e,t)}static locateInGeometry(e,t){if(t instanceof $)return Dt.locatePointInPolygon(e,t);if(t instanceof ie){const r=new yt(t);for(;r.hasNext();){const n=r.next();if(n!==t){const t=Dt.locateInGeometry(e,n);if(t!==rt.EXTERIOR)return t}}}return rt.EXTERIOR}static isContained(e,t){return rt.EXTERIOR!==Dt.locate(e,t)}static locate(e,t){return t.isEmpty()?rt.EXTERIOR:t.getEnvelopeInternal().intersects(e)?Dt.locateInGeometry(e,t):rt.EXTERIOR}locate(e){return Dt.locate(e,this._geom)}get interfaces_(){return[Lt]}}class jt{constructor(){jt.constructor_.apply(this,arguments)}static constructor_(){this._edgeMap=new kt,this._edgeList=null,this._ptInAreaLocation=[rt.NONE,rt.NONE]}getNextCW(e){this.getEdges();const t=this._edgeList.indexOf(e);let r=t-1;return 0===t&&(r=this._edgeList.size()-1),this._edgeList.get(r)}propagateSideLabels(e){let t=rt.NONE;for(let r=this.iterator();r.hasNext();){const n=r.next().getLabel();n.isArea(e)&&n.getLocation(e,At.LEFT)!==rt.NONE&&(t=n.getLocation(e,At.LEFT))}if(t===rt.NONE)return null;let r=t;for(let t=this.iterator();t.hasNext();){const n=t.next(),i=n.getLabel();if(i.getLocation(e,At.ON)===rt.NONE&&i.setLocation(e,At.ON,r),i.isArea(e)){const t=i.getLocation(e,At.LEFT),o=i.getLocation(e,At.RIGHT);if(o!==rt.NONE){if(o!==r)throw new Bt("side location conflict",n.getCoordinate());t===rt.NONE&&_.shouldNeverReachHere("found single null side (at "+n.getCoordinate()+")"),r=t}else _.isTrue(i.getLocation(e,At.LEFT)===rt.NONE,"found single null side"),i.setLocation(e,At.RIGHT,r),i.setLocation(e,At.LEFT,r)}}}getCoordinate(){const e=this.iterator();if(!e.hasNext())return null;return e.next().getCoordinate()}print(e){pe.out.println("EdgeEndStar:   "+this.getCoordinate());for(let t=this.iterator();t.hasNext();){t.next().print(e)}}isAreaLabelsConsistent(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}checkAreaLabelsConsistent(e){const t=this.getEdges();if(t.size()<=0)return!0;const r=t.size()-1,n=t.get(r).getLabel().getLocation(e,At.LEFT);_.isTrue(n!==rt.NONE,"Found unlabelled area edge");let i=n;for(let t=this.iterator();t.hasNext();){const r=t.next().getLabel();_.isTrue(r.isArea(e),"Found non-area edge");const n=r.getLocation(e,At.LEFT),o=r.getLocation(e,At.RIGHT);if(n===o)return!1;if(o!==i)return!1;i=n}return!0}findIndex(e){this.iterator();for(let t=0;t<this._edgeList.size();t++){if(this._edgeList.get(t)===e)return t}return-1}iterator(){return this.getEdges().iterator()}getEdges(){return null===this._edgeList&&(this._edgeList=new z(this._edgeMap.values())),this._edgeList}getLocation(e,t,r){return this._ptInAreaLocation[e]===rt.NONE&&(this._ptInAreaLocation[e]=Dt.locate(t,r[e].getGeometry())),this._ptInAreaLocation[e]}toString(){const e=new W;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(let t=this.iterator();t.hasNext();){const r=t.next();e.append(r),e.append("\n")}return e.toString()}computeEdgeEndLabels(e){for(let t=this.iterator();t.hasNext();){t.next().computeLabel(e)}}computeLabelling(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);const t=[!1,!1];for(let e=this.iterator();e.hasNext();){const r=e.next().getLabel();for(let e=0;e<2;e++)r.isLine(e)&&r.getLocation(e)===rt.BOUNDARY&&(t[e]=!0)}for(let r=this.iterator();r.hasNext();){const n=r.next(),i=n.getLabel();for(let r=0;r<2;r++)if(i.isAnyNull(r)){let o=rt.NONE;if(t[r])o=rt.EXTERIOR;else{const t=n.getCoordinate();o=this.getLocation(r,t,e)}i.setAllLocationsIfNull(r,o)}}}getDegree(){return this._edgeMap.size()}insertEdgeEnd(e,t){this._edgeMap.put(e,t),this._edgeList=null}}class Ft{constructor(){Ft.constructor_.apply(this,arguments)}static constructor_(){this.mce=null,this.chainIndex=null;const e=arguments[0],t=arguments[1];this.mce=e,this.chainIndex=t}computeIntersections(e,t){this.mce.computeIntersectsForChain(this.chainIndex,e.mce,e.chainIndex,t)}}class Nt{constructor(){Nt.constructor_.apply(this,arguments)}static constructor_(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){const e=arguments[0],t=arguments[1];this._eventType=Nt.DELETE,this._xValue=e,this._insertEvent=t}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];this._eventType=Nt.INSERT,this._label=e,this._xValue=t,this._obj=r}}isDelete(){return this._eventType===Nt.DELETE}setDeleteEventIndex(e){this._deleteEventIndex=e}getObject(){return this._obj}compareTo(e){const t=e;return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0}getInsertEvent(){return this._insertEvent}isInsert(){return this._eventType===Nt.INSERT}isSameLabel(e){return null!==this._label&&this._label===e._label}getDeleteEventIndex(){return this._deleteEventIndex}get interfaces_(){return[h]}}Nt.INSERT=1,Nt.DELETE=2;class Zt{}const Ut={reverseOrder:function(){return{compare:(e,t)=>t.compareTo(e)}},min:function(e){return Ut.sort(e),e.get(0)},sort:function(e,t){const r=e.toArray();t?V.sort(r,t):V.sort(r);const n=e.iterator();for(let e=0,t=r.length;e<t;e++)n.next(),n.set(r[e])},singletonList:function(e){const t=new z;return t.add(e),t}},Qt=Ut;class Gt{constructor(){Gt.constructor_.apply(this,arguments)}static constructor_(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;const e=arguments[0],t=arguments[1],r=arguments[2];this._li=e,this._includeProper=t,this._recordIsolated=r}static isAdjacentSegments(e,t){return 1===Math.abs(e-t)}isTrivialIntersection(e,t,r,n){if(e===r&&1===this._li.getIntersectionNum()){if(Gt.isAdjacentSegments(t,n))return!0;if(e.isClosed()){const r=e.getNumPoints()-1;if(0===t&&n===r||0===n&&t===r)return!0}}return!1}getProperIntersectionPoint(){return this._properIntersectionPoint}setIsDoneIfProperInt(e){this._isDoneWhenProperInt=e}hasProperInteriorIntersection(){return this._hasProperInterior}isBoundaryPointInternal(e,t){for(let r=t.iterator();r.hasNext();){const t=r.next().getCoordinate();if(e.isIntersection(t))return!0}return!1}hasProperIntersection(){return this._hasProper}hasIntersection(){return this._hasIntersection}isDone(){return this._isDone}isBoundaryPoint(e,t){return null!==t&&(!!this.isBoundaryPointInternal(e,t[0])||!!this.isBoundaryPointInternal(e,t[1]))}setBoundaryNodes(e,t){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=e,this._bdyNodes[1]=t}addIntersections(e,t,r,n){if(e===r&&t===n)return null;this.numTests++;const i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=r.getCoordinates()[n],s=r.getCoordinates()[n+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(e.setIsolated(!1),r.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(e,t,r,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(e.addIntersections(this._li,t,0),r.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))}}class zt extends Zt{constructor(){super(),zt.constructor_.apply(this,arguments)}static constructor_(){this.events=new z,this.nOverlaps=null}prepareEvents(){Qt.sort(this.events);for(let e=0;e<this.events.size();e++){const t=this.events.get(e);t.isDelete()&&t.getInsertEvent().setDeleteEventIndex(e)}}computeIntersections(){if(1===arguments.length){const e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(let t=0;t<this.events.size();t++){const r=this.events.get(t);if(r.isInsert()&&this.processOverlaps(t,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof Gt&&n(arguments[0],Q)&&n(arguments[1],Q)){const e=arguments[0],t=arguments[1],r=arguments[2];this.addEdges(e,e),this.addEdges(t,t),this.computeIntersections(r)}else if("boolean"==typeof arguments[2]&&n(arguments[0],Q)&&arguments[1]instanceof Gt){const e=arguments[0],t=arguments[1];arguments[2]?this.addEdges(e,null):this.addEdges(e),this.computeIntersections(t)}}addEdge(e,t){const r=e.getMonotoneChainEdge(),n=r.getStartIndexes();for(let e=0;e<n.length-1;e++){const n=new Ft(r,e),i=new Nt(t,r.getMinX(e),n);this.events.add(i),this.events.add(new Nt(r.getMaxX(e),i))}}processOverlaps(e,t,r,n){const i=r.getObject();for(let o=e;o<t;o++){const e=this.events.get(o);if(e.isInsert()){const t=e.getObject();r.isSameLabel(e)||(i.computeIntersections(t,n),this.nOverlaps++)}}}addEdges(){if(1===arguments.length){for(let e=arguments[0].iterator();e.hasNext();){const t=e.next();this.addEdge(t,t)}}else if(2===arguments.length){const e=arguments[1];for(let t=arguments[0].iterator();t.hasNext();){const r=t.next();this.addEdge(r,e)}}}}class qt{visitItem(e){}}class Vt{constructor(){Vt.constructor_.apply(this,arguments)}static constructor_(){this._min=o.POSITIVE_INFINITY,this._max=o.NEGATIVE_INFINITY}getMin(){return this._min}intersects(e,t){return!(this._min>t||this._max<e)}getMax(){return this._max}toString(){return tt.toLineString(new w(this._min,0),new w(this._max,0))}}Vt.NodeComparator=class{compare(e,t){const r=e,n=t,i=(r._min+r._max)/2,o=(n._min+n._max)/2;return i<o?-1:i>o?1:0}get interfaces_(){return[y]}};class Wt extends Vt{constructor(){super(),Wt.constructor_.apply(this,arguments)}static constructor_(){this._item=null;const e=arguments[0],t=arguments[1],r=arguments[2];this._min=e,this._max=t,this._item=r}query(e,t,r){if(!this.intersects(e,t))return null;r.visitItem(this._item)}}class Kt extends Vt{constructor(){super(),Kt.constructor_.apply(this,arguments)}static constructor_(){this._node1=null,this._node2=null;const e=arguments[0],t=arguments[1];this._node1=e,this._node2=t,this.buildExtent(this._node1,this._node2)}buildExtent(e,t){this._min=Math.min(e._min,t._min),this._max=Math.max(e._max,t._max)}query(e,t,r){if(!this.intersects(e,t))return null;null!==this._node1&&this._node1.query(e,t,r),null!==this._node2&&this._node2.query(e,t,r)}}class Ht{constructor(){Ht.constructor_.apply(this,arguments)}static constructor_(){this._leaves=new z,this._root=null,this._level=0}buildTree(){Qt.sort(this._leaves,new Vt.NodeComparator);let e=this._leaves,t=null,r=new z;for(;;){if(this.buildLevel(e,r),1===r.size())return r.get(0);t=e,e=r,r=t}}insert(e,t,r){if(null!==this._root)throw new j("Index cannot be added to once it has been queried");this._leaves.add(new Wt(e,t,r))}query(e,t,r){if(this.init(),null===this._root)return null;this._root.query(e,t,r)}buildRoot(){if(null!==this._root)return null;this._root=this.buildTree()}printNode(e){pe.out.println(tt.toLineString(new w(e._min,this._level),new w(e._max,this._level)))}init(){return null!==this._root||0===this._leaves.size()?null:void this.buildRoot()}buildLevel(e,t){this._level++,t.clear();for(let r=0;r<e.size();r+=2){const n=e.get(r);if(null===(r+1<e.size()?e.get(r):null))t.add(n);else{const n=new Kt(e.get(r),e.get(r+1));t.add(n)}}}}class Yt{constructor(){Yt.constructor_.apply(this,arguments)}static constructor_(){if(this.p0=null,this.p1=null,0===arguments.length)Yt.constructor_.call(this,new w,new w);else if(1===arguments.length){const e=arguments[0];Yt.constructor_.call(this,e.p0,e.p1)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.p0=e,this.p1=t}else if(4===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];Yt.constructor_.call(this,new w(e,t),new w(r,n))}}static midPoint(e,t){return new w((e.x+t.x)/2,(e.y+t.y)/2)}minX(){return Math.min(this.p0.x,this.p1.x)}orientationIndex(){if(arguments[0]instanceof Yt){const e=arguments[0],t=X.index(this.p0,this.p1,e.p0),r=X.index(this.p0,this.p1,e.p1);return t>=0&&r>=0||t<=0&&r<=0?Math.max(t,r):0}if(arguments[0]instanceof w){const e=arguments[0];return X.index(this.p0,this.p1,e)}}toGeometry(e){return e.createLineString([this.p0,this.p1])}isVertical(){return this.p0.x===this.p1.x}equals(e){if(!(e instanceof Yt))return!1;const t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)}intersection(e){const t=new at;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null}project(){if(arguments[0]instanceof w){const e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new w(e);const t=this.projectionFactor(e),r=new w;return r.x=this.p0.x+t*(this.p1.x-this.p0.x),r.y=this.p0.y+t*(this.p1.y-this.p0.y),r}if(arguments[0]instanceof Yt){const e=arguments[0],t=this.projectionFactor(e.p0),r=this.projectionFactor(e.p1);if(t>=1&&r>=1)return null;if(t<=0&&r<=0)return null;let n=this.project(e.p0);t<0&&(n=this.p0),t>1&&(n=this.p1);let i=this.project(e.p1);return r<0&&(i=this.p0),r>1&&(i=this.p1),new Yt(n,i)}}normalize(){this.p1.compareTo(this.p0)<0&&this.reverse()}angle(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}getCoordinate(e){return 0===e?this.p0:this.p1}distancePerpendicular(e){return it.pointToLinePerpendicular(e,this.p0,this.p1)}minY(){return Math.min(this.p0.y,this.p1.y)}midPoint(){return Yt.midPoint(this.p0,this.p1)}projectionFactor(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;const t=this.p1.x-this.p0.x,r=this.p1.y-this.p0.y,n=t*t+r*r;if(n<=0)return o.NaN;return((e.x-this.p0.x)*t+(e.y-this.p0.y)*r)/n}closestPoints(e){const t=this.intersection(e);if(null!==t)return[t,t];const r=new Array(2).fill(null);let n=o.MAX_VALUE,i=null;const a=this.closestPoint(e.p0);n=a.distance(e.p0),r[0]=a,r[1]=e.p0;const s=this.closestPoint(e.p1);i=s.distance(e.p1),i<n&&(n=i,r[0]=s,r[1]=e.p1);const l=e.closestPoint(this.p0);i=l.distance(this.p0),i<n&&(n=i,r[0]=this.p0,r[1]=l);const u=e.closestPoint(this.p1);return i=u.distance(this.p1),i<n&&(n=i,r[0]=this.p1,r[1]=u),r}closestPoint(e){const t=this.projectionFactor(e);if(t>0&&t<1)return this.project(e);return this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1}maxX(){return Math.max(this.p0.x,this.p1.x)}getLength(){return this.p0.distance(this.p1)}compareTo(e){const t=e,r=this.p0.compareTo(t.p0);return 0!==r?r:this.p1.compareTo(t.p1)}reverse(){const e=this.p0;this.p0=this.p1,this.p1=e}equalsTopo(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)}lineIntersection(e){return nt.intersection(this.p0,this.p1,e.p0,e.p1)}maxY(){return Math.max(this.p0.y,this.p1.y)}pointAlongOffset(e,t){const r=this.p0.x+e*(this.p1.x-this.p0.x),n=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o);let s=0,l=0;if(0!==t){if(a<=0)throw new j("Cannot compute offset from zero-length line segment");s=t*i/a,l=t*o/a}return new w(r-l,n+s)}setCoordinates(){if(1===arguments.length){const e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=t.x,this.p1.y=t.y}}segmentFraction(e){let t=this.projectionFactor(e);return t<0?t=0:(t>1||o.isNaN(t))&&(t=1),t}toString(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}isHorizontal(){return this.p0.y===this.p1.y}reflect(e){const t=this.p1.getY()-this.p0.getY(),r=this.p0.getX()-this.p1.getX(),n=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),i=t*t+r*r,o=t*t-r*r,a=e.getX(),s=e.getY();return new w((-o*a-2*t*r*s-2*t*n)/i,(o*s-2*t*r*a-2*r*n)/i)}distance(){if(arguments[0]instanceof Yt){const e=arguments[0];return it.segmentToSegment(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof w){const e=arguments[0];return it.pointToSegment(e,this.p0,this.p1)}}pointAlong(e){const t=new w;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}hashCode(){let e=o.doubleToLongBits(this.p0.x);e^=31*o.doubleToLongBits(this.p0.y);const t=Math.trunc(e)^Math.trunc(e>>32);let r=o.doubleToLongBits(this.p1.x);r^=31*o.doubleToLongBits(this.p1.y);return t^(Math.trunc(r)^Math.trunc(r>>32))}get interfaces_(){return[h,p]}}class Xt{constructor(){Xt.constructor_.apply(this,arguments)}static constructor_(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){const e=arguments[0];this._lines=e}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this._lines=e,this._isForcedToLineString=t}}static getGeometry(){if(1===arguments.length){const e=arguments[0];return e.getFactory().buildGeometry(Xt.getLines(e))}if(2===arguments.length){const e=arguments[0],t=arguments[1];return e.getFactory().buildGeometry(Xt.getLines(e,t))}}static getLines(){if(1===arguments.length){const e=arguments[0];return Xt.getLines(e,!1)}if(2===arguments.length){if(n(arguments[0],Z)&&n(arguments[1],Z)){const e=arguments[1];for(let t=arguments[0].iterator();t.hasNext();){const r=t.next();Xt.getLines(r,e)}return e}if(arguments[0]instanceof I&&"boolean"==typeof arguments[1]){const e=arguments[0],t=arguments[1],r=new z;return e.apply(new Xt(r,t)),r}if(arguments[0]instanceof I&&n(arguments[1],Z)){const e=arguments[0],t=arguments[1];return e instanceof L?t.add(e):e.apply(new Xt(t)),t}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&n(arguments[0],Z)&&n(arguments[1],Z)){const e=arguments[1],t=arguments[2];for(let r=arguments[0].iterator();r.hasNext();){const n=r.next();Xt.getLines(n,e,t)}return e}if("boolean"==typeof arguments[2]&&arguments[0]instanceof I&&n(arguments[1],Z)){const e=arguments[1],t=arguments[2];return arguments[0].apply(new Xt(e,t)),e}}}filter(e){if(this._isForcedToLineString&&e instanceof ae){const t=e.getFactory().createLineString(e.getCoordinateSequence());return this._lines.add(t),null}e instanceof L&&this._lines.add(e)}setForceToLineString(e){this._isForcedToLineString=e}get interfaces_(){return[f]}}class Jt{constructor(){Jt.constructor_.apply(this,arguments)}static constructor_(){this._items=new z}visitItem(e){this._items.add(e)}getItems(){return this._items}get interfaces_(){return[qt]}}class $t{constructor(){$t.constructor_.apply(this,arguments)}static constructor_(){this._geom=null,this._index=null;const e=arguments[0];if(!(n(e,J)||e instanceof ae))throw new c("Argument must be Polygonal or LinearRing");this._geom=e}locate(e){null===this._index&&(this._index=new tr(this._geom),this._geom=null);const t=new st(e),r=new er(t);return this._index.query(e.y,e.y,r),t.getLocation()}get interfaces_(){return[Lt]}}class er{constructor(){er.constructor_.apply(this,arguments)}static constructor_(){this._counter=null;const e=arguments[0];this._counter=e}visitItem(e){const t=e;this._counter.countSegment(t.getCoordinate(0),t.getCoordinate(1))}get interfaces_(){return[qt]}}class tr{constructor(){tr.constructor_.apply(this,arguments)}static constructor_(){this._isEmpty=!1,this._index=new Ht;const e=arguments[0];e.isEmpty()?this._isEmpty=!0:this.init(e)}init(e){for(let t=Xt.getLines(e).iterator();t.hasNext();){const e=t.next().getCoordinates();this.addLine(e)}}addLine(e){for(let t=1;t<e.length;t++){const r=new Yt(e[t-1],e[t]),n=Math.min(r.p0.y,r.p1.y),i=Math.max(r.p0.y,r.p1.y);this._index.insert(n,i,r)}}query(){if(2===arguments.length){const e=arguments[0],t=arguments[1];if(this._isEmpty)return new z;const r=new Jt;return this._index.query(e,t,r),r.getItems()}if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];if(this._isEmpty)return null;this._index.query(e,t,r)}}}$t.SegmentVisitor=er,$t.IntervalIndexedGeometry=tr;class rr{constructor(){rr.constructor_.apply(this,arguments)}static constructor_(){this.coord=null,this.segmentIndex=null,this.dist=null;const e=arguments[0],t=arguments[1],r=arguments[2];this.coord=new w(e),this.segmentIndex=t,this.dist=r}getSegmentIndex(){return this.segmentIndex}getCoordinate(){return this.coord}print(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)}compareTo(e){const t=e;return this.compare(t.segmentIndex,t.dist)}isEndPoint(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e}toString(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}getDistance(){return this.dist}compare(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0}get interfaces_(){return[h]}}class nr{constructor(){nr.constructor_.apply(this,arguments)}static constructor_(){this._nodeMap=new kt,this.edge=null;const e=arguments[0];this.edge=e}print(e){e.println("Intersections:");for(let t=this.iterator();t.hasNext();){t.next().print(e)}}iterator(){return this._nodeMap.values().iterator()}addSplitEdges(e){this.addEndpoints();const t=this.iterator();let r=t.next();for(;t.hasNext();){const n=t.next(),i=this.createSplitEdge(r,n);e.add(i),r=n}}addEndpoints(){const e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)}createSplitEdge(e,t){let r=t.segmentIndex-e.segmentIndex+2;const n=this.edge.pts[t.segmentIndex],i=t.dist>0||!t.coord.equals2D(n);i||r--;const o=new Array(r).fill(null);let a=0;o[a++]=new w(e.coord);for(let r=e.segmentIndex+1;r<=t.segmentIndex;r++)o[a++]=this.edge.pts[r];return i&&(o[a]=t.coord),new lr(o,new wt(this.edge._label))}add(e,t,r){const n=new rr(e,t,r),i=this._nodeMap.get(n);return null!==i?i:(this._nodeMap.put(n,n),n)}isIntersection(e){for(let t=this.iterator();t.hasNext();){if(t.next().coord.equals(e))return!0}return!1}}class ir{constructor(){ir.constructor_.apply(this,arguments)}static constructor_(){if(this._data=null,this._size=0,0===arguments.length)ir.constructor_.call(this,10);else if(1===arguments.length){const e=arguments[0];this._data=new Array(e).fill(null)}}size(){return this._size}addAll(e){return null===e||0===e.length?null:(this.ensureCapacity(this._size+e.length),pe.arraycopy(e,0,this._data,this._size,e.length),void(this._size+=e.length))}ensureCapacity(e){if(e<=this._data.length)return null;const t=Math.max(e,2*this._data.length);this._data=V.copyOf(this._data,t)}toArray(){const e=new Array(this._size).fill(null);return pe.arraycopy(this._data,0,e,0,this._size),e}add(e){this.ensureCapacity(this._size+1),this._data[this._size]=e,++this._size}}class or{static toIntArray(e){const t=new Array(e.size()).fill(null);for(let r=0;r<t.length;r++)t[r]=e.get(r).intValue();return t}getChainStartIndices(e){let t=0;const r=new ir(Math.trunc(e.length/2));r.add(t);do{const n=this.findChainEnd(e,t);r.add(n),t=n}while(t<e.length-1);return r.toArray()}findChainEnd(e,t){const r=_t.quadrant(e[t],e[t+1]);let n=t+1;for(;n<e.length;){if(_t.quadrant(e[n-1],e[n])!==r)break;n++}return n-1}OLDgetChainStartIndices(e){let t=0;const r=new z;r.add(t);do{const n=this.findChainEnd(e,t);r.add(n),t=n}while(t<e.length-1);return or.toIntArray(r)}}class ar{constructor(){ar.constructor_.apply(this,arguments)}static constructor_(){this.e=null,this.pts=null,this.startIndex=null;const e=arguments[0];this.e=e,this.pts=e.getCoordinates();const t=new or;this.startIndex=t.getChainStartIndices(this.pts)}getCoordinates(){return this.pts}getMaxX(e){const t=this.pts[this.startIndex[e]].x,r=this.pts[this.startIndex[e+1]].x;return t>r?t:r}getMinX(e){const t=this.pts[this.startIndex[e]].x,r=this.pts[this.startIndex[e+1]].x;return t<r?t:r}computeIntersectsForChain(){if(4===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[r],t.startIndex[r+1],n)}else if(6===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2],n=arguments[3],i=arguments[4],o=arguments[5];if(t-e==1&&i-n==1)return o.addIntersections(this.e,e,r.e,n),null;if(!this.overlaps(e,t,r,n,i))return null;const a=Math.trunc((e+t)/2),s=Math.trunc((n+i)/2);e<a&&(n<s&&this.computeIntersectsForChain(e,a,r,n,s,o),s<i&&this.computeIntersectsForChain(e,a,r,s,i,o)),a<t&&(n<s&&this.computeIntersectsForChain(a,t,r,n,s,o),s<i&&this.computeIntersectsForChain(a,t,r,s,i,o))}}overlaps(e,t,r,n,i){return x.intersects(this.pts[e],this.pts[t],r.pts[n],r.pts[i])}getStartIndexes(){return this.startIndex}computeIntersects(e,t){for(let r=0;r<this.startIndex.length-1;r++)for(let n=0;n<e.startIndex.length-1;n++)this.computeIntersectsForChain(r,e,n,t)}}class sr{constructor(){sr.constructor_.apply(this,arguments)}static constructor_(){this._depth=Array(2).fill().map((()=>Array(3)));for(let e=0;e<2;e++)for(let t=0;t<3;t++)this._depth[e][t]=sr.NULL_VALUE}static depthAtLocation(e){return e===rt.EXTERIOR?0:e===rt.INTERIOR?1:sr.NULL_VALUE}getDepth(e,t){return this._depth[e][t]}setDepth(e,t,r){this._depth[e][t]=r}isNull(){if(0===arguments.length){for(let e=0;e<2;e++)for(let t=0;t<3;t++)if(this._depth[e][t]!==sr.NULL_VALUE)return!1;return!0}if(1===arguments.length){const e=arguments[0];return this._depth[e][1]===sr.NULL_VALUE}if(2===arguments.length){const e=arguments[0],t=arguments[1];return this._depth[e][t]===sr.NULL_VALUE}}normalize(){for(let e=0;e<2;e++)if(!this.isNull(e)){let t=this._depth[e][1];this._depth[e][2]<t&&(t=this._depth[e][2]),t<0&&(t=0);for(let r=1;r<3;r++){let n=0;this._depth[e][r]>t&&(n=1),this._depth[e][r]=n}}}getDelta(e){return this._depth[e][At.RIGHT]-this._depth[e][At.LEFT]}getLocation(e,t){return this._depth[e][t]<=0?rt.EXTERIOR:rt.INTERIOR}toString(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}add(){if(1===arguments.length){const e=arguments[0];for(let t=0;t<2;t++)for(let r=1;r<3;r++){const n=e.getLocation(t,r);n!==rt.EXTERIOR&&n!==rt.INTERIOR||(this.isNull(t,r)?this._depth[t][r]=sr.depthAtLocation(n):this._depth[t][r]+=sr.depthAtLocation(n))}}else if(3===arguments.length){const e=arguments[0],t=arguments[1];arguments[2]===rt.INTERIOR&&this._depth[e][t]++}}}sr.NULL_VALUE=-1;class lr extends xt{constructor(){super(),lr.constructor_.apply(this,arguments)}static constructor_(){if(this.pts=null,this._env=null,this.eiList=new nr(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new sr,this._depthDelta=0,1===arguments.length){const e=arguments[0];lr.constructor_.call(this,e,null)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];this.pts=e,this._label=t}}static updateIM(){if(!(2===arguments.length&&arguments[1]instanceof mt&&arguments[0]instanceof wt))return super.updateIM.apply(this,arguments);{const e=arguments[0],t=arguments[1];t.setAtLeastIfValid(e.getLocation(0,At.ON),e.getLocation(1,At.ON),1),e.isArea()&&(t.setAtLeastIfValid(e.getLocation(0,At.LEFT),e.getLocation(1,At.LEFT),2),t.setAtLeastIfValid(e.getLocation(0,At.RIGHT),e.getLocation(1,At.RIGHT),2))}}getDepth(){return this._depth}getCollapsedEdge(){const e=new Array(2).fill(null);e[0]=this.pts[0],e[1]=this.pts[1];return new lr(e,wt.toLineLabel(this._label))}isIsolated(){return this._isIsolated}getCoordinates(){return this.pts}setIsolated(e){this._isIsolated=e}setName(e){this._name=e}equals(e){if(!(e instanceof lr))return!1;const t=e;if(this.pts.length!==t.pts.length)return!1;let r=!0,n=!0,i=this.pts.length;for(let e=0;e<this.pts.length;e++)if(this.pts[e].equals2D(t.pts[e])||(r=!1),this.pts[e].equals2D(t.pts[--i])||(n=!1),!r&&!n)return!1;return!0}getCoordinate(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){const e=arguments[0];return this.pts[e]}}print(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(let t=0;t<this.pts.length;t++)t>0&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this._label+" "+this._depthDelta)}computeIM(e){lr.updateIM(this._label,e)}isCollapsed(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))}isClosed(){return this.pts[0].equals(this.pts[this.pts.length-1])}getMaximumSegmentIndex(){return this.pts.length-1}getDepthDelta(){return this._depthDelta}getNumPoints(){return this.pts.length}printReverse(e){e.print("edge "+this._name+": ");for(let t=this.pts.length-1;t>=0;t--)e.print(this.pts[t]+" ");e.println("")}getMonotoneChainEdge(){return null===this._mce&&(this._mce=new ar(this)),this._mce}getEnvelope(){if(null===this._env){this._env=new x;for(let e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}addIntersection(e,t,r,n){const i=new w(e.getIntersection(n));let o=t,a=e.getEdgeDistance(r,n);const s=o+1;if(s<this.pts.length){const e=this.pts[s];i.equals2D(e)&&(o=s,a=0)}this.eiList.add(i,o,a)}toString(){const e=new ye;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(let t=0;t<this.pts.length;t++)t>0&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}isPointwiseEqual(e){if(this.pts.length!==e.pts.length)return!1;for(let t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0}setDepthDelta(e){this._depthDelta=e}getEdgeIntersectionList(){return this.eiList}addIntersections(e,t,r){for(let n=0;n<e.getIntersectionNum();n++)this.addIntersection(e,t,r,n)}}class ur extends vt{constructor(){super(),ur.constructor_.apply(this,arguments)}static constructor_(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];const e=arguments[0],t=arguments[1];if(vt.constructor_.call(this,e),this._isForward=t,t)this.init(e.getCoordinate(0),e.getCoordinate(1));else{const t=e.getNumPoints()-1;this.init(e.getCoordinate(t),e.getCoordinate(t-1))}this.computeDirectedLabel()}static depthFactor(e,t){return e===rt.EXTERIOR&&t===rt.INTERIOR?1:e===rt.INTERIOR&&t===rt.EXTERIOR?-1:0}getNextMin(){return this._nextMin}getDepth(e){return this._depth[e]}setVisited(e){this._isVisited=e}computeDirectedLabel(){this._label=new wt(this._edge.getLabel()),this._isForward||this._label.flip()}getNext(){return this._next}setDepth(e,t){if(-999!==this._depth[e]&&this._depth[e]!==t)throw new Bt("assigned depths do not match",this.getCoordinate());this._depth[e]=t}isInteriorAreaEdge(){let e=!0;for(let t=0;t<2;t++)this._label.isArea(t)&&this._label.getLocation(t,At.LEFT)===rt.INTERIOR&&this._label.getLocation(t,At.RIGHT)===rt.INTERIOR||(e=!1);return e}setNextMin(e){this._nextMin=e}print(e){super.print.call(this,e),e.print(" "+this._depth[At.LEFT]+"/"+this._depth[At.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}setMinEdgeRing(e){this._minEdgeRing=e}isLineEdge(){const e=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,rt.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,rt.EXTERIOR);return e&&t&&r}setEdgeRing(e){this._edgeRing=e}getMinEdgeRing(){return this._minEdgeRing}getDepthDelta(){let e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}setInResult(e){this._isInResult=e}getSym(){return this._sym}isForward(){return this._isForward}getEdge(){return this._edge}printEdge(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}setSym(e){this._sym=e}setVisitedEdge(e){this.setVisited(e),this._sym.setVisited(e)}setEdgeDepths(e,t){let r=this.getEdge().getDepthDelta();this._isForward||(r=-r);let n=1;e===At.LEFT&&(n=-1);const i=At.opposite(e),o=t+r*n;this.setDepth(e,t),this.setDepth(i,o)}getEdgeRing(){return this._edgeRing}isInResult(){return this._isInResult}setNext(e){this._next=e}isVisited(){return this._isVisited}}class cr{createNode(e){return new It(e,null)}}class fr{constructor(){fr.constructor_.apply(this,arguments)}static constructor_(){if(this._edges=new z,this._nodes=null,this._edgeEndList=new z,0===arguments.length)this._nodes=new Rt(new cr);else if(1===arguments.length){const e=arguments[0];this._nodes=new Rt(e)}}static linkResultDirectedEdges(e){for(let t=e.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}}printEdges(e){e.println("Edges:");for(let t=0;t<this._edges.size();t++){e.println("edge "+t+":");const r=this._edges.get(t);r.print(e),r.eiList.print(e)}}find(e){return this._nodes.find(e)}addNode(){if(arguments[0]instanceof It){const e=arguments[0];return this._nodes.addNode(e)}if(arguments[0]instanceof w){const e=arguments[0];return this._nodes.addNode(e)}}getNodeIterator(){return this._nodes.iterator()}linkResultDirectedEdges(){for(let e=this._nodes.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}}debugPrintln(e){pe.out.println(e)}isBoundaryNode(e,t){const r=this._nodes.find(t);if(null===r)return!1;const n=r.getLabel();return null!==n&&n.getLocation(e)===rt.BOUNDARY}linkAllDirectedEdges(){for(let e=this._nodes.iterator();e.hasNext();){e.next().getEdges().linkAllDirectedEdges()}}matchInSameDirection(e,t,r,n){return!!e.equals(r)&&(X.index(e,t,n)===X.COLLINEAR&&_t.quadrant(e,t)===_t.quadrant(r,n))}getEdgeEnds(){return this._edgeEndList}debugPrint(e){pe.out.print(e)}getEdgeIterator(){return this._edges.iterator()}findEdgeInSameDirection(e,t){for(let r=0;r<this._edges.size();r++){const n=this._edges.get(r),i=n.getCoordinates();if(this.matchInSameDirection(e,t,i[0],i[1]))return n;if(this.matchInSameDirection(e,t,i[i.length-1],i[i.length-2]))return n}return null}insertEdge(e){this._edges.add(e)}findEdgeEnd(e){for(let t=this.getEdgeEnds().iterator();t.hasNext();){const r=t.next();if(r.getEdge()===e)return r}return null}addEdges(e){for(let t=e.iterator();t.hasNext();){const e=t.next();this._edges.add(e);const r=new ur(e,!0),n=new ur(e,!1);r.setSym(n),n.setSym(r),this.add(r),this.add(n)}}add(e){this._nodes.add(e),this._edgeEndList.add(e)}getNodes(){return this._nodes.values()}findEdge(e,t){for(let r=0;r<this._edges.size();r++){const n=this._edges.get(r),i=n.getCoordinates();if(e.equals(i[0])&&t.equals(i[1]))return n}return null}}class hr extends fr{constructor(){super(),hr.constructor_.apply(this,arguments)}static constructor_(){if(this._parentGeom=null,this._lineEdgeMap=new we,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new gt,2===arguments.length){const e=arguments[0],t=arguments[1];hr.constructor_.call(this,e,t,ut.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];this._argIndex=e,this._parentGeom=t,this._boundaryNodeRule=r,null!==t&&this.add(t)}}static determineBoundary(e,t){return e.isInBoundary(t)?rt.BOUNDARY:rt.INTERIOR}insertBoundaryPoint(e,t){const r=this._nodes.addNode(t).getLabel();let n=1,i=rt.NONE;i=r.getLocation(e,At.ON),i===rt.BOUNDARY&&n++;const o=hr.determineBoundary(this._boundaryNodeRule,n);r.setLocation(e,o)}computeSelfNodes(){if(2===arguments.length){const e=arguments[0],t=arguments[1];return this.computeSelfNodes(e,t,!1)}if(3===arguments.length){const e=arguments[1],t=arguments[2],r=new Gt(arguments[0],!0,!1);r.setIsDoneIfProperInt(t);const n=this.createEdgeSetIntersector(),i=this._parentGeom instanceof ae||this._parentGeom instanceof $||this._parentGeom instanceof _e,o=e||!i;return n.computeIntersections(this._edges,r,o),this.addSelfIntersectionNodes(this._argIndex),r}}computeSplitEdges(e){for(let t=this._edges.iterator();t.hasNext();){t.next().eiList.addSplitEdges(e)}}computeEdgeIntersections(e,t,r){const n=new Gt(t,r,!0);n.setBoundaryNodes(this.getBoundaryNodes(),e.getBoundaryNodes());return this.createEdgeSetIntersector().computeIntersections(this._edges,e._edges,n),n}getGeometry(){return this._parentGeom}getBoundaryNodeRule(){return this._boundaryNodeRule}hasTooFewPoints(){return this._hasTooFewPoints}addPoint(){if(arguments[0]instanceof F){const e=arguments[0].getCoordinate();this.insertPoint(this._argIndex,e,rt.INTERIOR)}else if(arguments[0]instanceof w){const e=arguments[0];this.insertPoint(this._argIndex,e,rt.INTERIOR)}}addPolygon(e){this.addPolygonRing(e.getExteriorRing(),rt.EXTERIOR,rt.INTERIOR);for(let t=0;t<e.getNumInteriorRing();t++){const r=e.getInteriorRingN(t);this.addPolygonRing(r,rt.INTERIOR,rt.EXTERIOR)}}addEdge(e){this.insertEdge(e);const t=e.getCoordinates();this.insertPoint(this._argIndex,t[0],rt.BOUNDARY),this.insertPoint(this._argIndex,t[t.length-1],rt.BOUNDARY)}addLineString(e){const t=de.removeRepeatedPoints(e.getCoordinates());if(t.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=t[0],null;const r=new lr(t,new wt(this._argIndex,rt.INTERIOR));this._lineEdgeMap.put(e,r),this.insertEdge(r),_.isTrue(t.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,t[0]),this.insertBoundaryPoint(this._argIndex,t[t.length-1])}getInvalidPoint(){return this._invalidPoint}getBoundaryPoints(){const e=this.getBoundaryNodes(),t=new Array(e.size()).fill(null);let r=0;for(let n=e.iterator();n.hasNext();){const e=n.next();t[r++]=e.getCoordinate().copy()}return t}getBoundaryNodes(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes}addSelfIntersectionNode(e,t,r){if(this.isBoundaryNode(e,t))return null;r===rt.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(e,t):this.insertPoint(e,t,r)}addPolygonRing(e,t,r){if(e.isEmpty())return null;const n=de.removeRepeatedPoints(e.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;let i=t,o=r;X.isCCW(n)&&(i=r,o=t);const a=new lr(n,new wt(this._argIndex,rt.BOUNDARY,i,o));this._lineEdgeMap.put(e,a),this.insertEdge(a),this.insertPoint(this._argIndex,n[0],rt.BOUNDARY)}insertPoint(e,t,r){const n=this._nodes.addNode(t),i=n.getLabel();null===i?n._label=new wt(e,r):i.setLocation(e,r)}createEdgeSetIntersector(){return new zt}addSelfIntersectionNodes(e){for(let t=this._edges.iterator();t.hasNext();){const r=t.next(),n=r.getLabel().getLocation(e);for(let t=r.eiList.iterator();t.hasNext();){const r=t.next();this.addSelfIntersectionNode(e,r.coord,n)}}}add(){if(!(1===arguments.length&&arguments[0]instanceof I))return super.add.apply(this,arguments);{const e=arguments[0];if(e.isEmpty())return null;if(e instanceof _e&&(this._useBoundaryDeterminationRule=!1),e instanceof $)this.addPolygon(e);else if(e instanceof L)this.addLineString(e);else if(e instanceof F)this.addPoint(e);else if(e instanceof oe)this.addCollection(e);else if(e instanceof Ie)this.addCollection(e);else if(e instanceof _e)this.addCollection(e);else{if(!(e instanceof ie))throw new T(e.getGeometryType());this.addCollection(e)}}}addCollection(e){for(let t=0;t<e.getNumGeometries();t++){const r=e.getGeometryN(t);this.add(r)}}locate(e){return n(this._parentGeom,J)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new $t(this._parentGeom)),this._areaPtLocator.locate(e)):this._ptLocator.locate(e,this._parentGeom)}findEdge(){if(1===arguments.length&&arguments[0]instanceof L){const e=arguments[0];return this._lineEdgeMap.get(e)}return super.findEdge.apply(this,arguments)}}class pr extends vt{constructor(){super(),pr.constructor_.apply(this,arguments)}static constructor_(){if(this._edgeEnds=new z,1===arguments.length){const e=arguments[0];pr.constructor_.call(this,null,e)}else if(2===arguments.length){const e=arguments[1];vt.constructor_.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new wt(e.getLabel())),this.insert(e)}}insert(e){this._edgeEnds.add(e)}print(e){e.println("EdgeEndBundle--\x3e Label: "+this._label);for(let t=this.iterator();t.hasNext();){t.next().print(e),e.println()}}iterator(){return this._edgeEnds.iterator()}getEdgeEnds(){return this._edgeEnds}computeLabelOn(e,t){let r=0,n=!1;for(let t=this.iterator();t.hasNext();){const i=t.next().getLabel().getLocation(e);i===rt.BOUNDARY&&r++,i===rt.INTERIOR&&(n=!0)}let i=rt.NONE;n&&(i=rt.INTERIOR),r>0&&(i=hr.determineBoundary(t,r)),this._label.setLocation(e,i)}computeLabelSide(e,t){for(let r=this.iterator();r.hasNext();){const n=r.next();if(n.getLabel().isArea()){const r=n.getLabel().getLocation(e,t);if(r===rt.INTERIOR)return this._label.setLocation(e,t,rt.INTERIOR),null;r===rt.EXTERIOR&&this._label.setLocation(e,t,rt.EXTERIOR)}}}getLabel(){return this._label}computeLabelSides(e){this.computeLabelSide(e,At.LEFT),this.computeLabelSide(e,At.RIGHT)}updateIM(e){lr.updateIM(this._label,e)}computeLabel(e){let t=!1;for(let e=this.iterator();e.hasNext();){e.next().getLabel().isArea()&&(t=!0)}this._label=t?new wt(rt.NONE,rt.NONE,rt.NONE):new wt(rt.NONE);for(let r=0;r<2;r++)this.computeLabelOn(r,e),t&&this.computeLabelSides(r)}}class dr extends jt{constructor(){super()}updateIM(e){for(let t=this.iterator();t.hasNext();){t.next().updateIM(e)}}insert(e){let t=this._edgeMap.get(e);null===t?(t=new pr(e),this.insertEdgeEnd(e,t)):t.insert(e)}}class yr extends It{constructor(){super(),yr.constructor_.apply(this,arguments)}static constructor_(){const e=arguments[0],t=arguments[1];It.constructor_.call(this,e,t)}updateIMFromEdges(e){this._edges.updateIM(e)}computeIM(e){e.setAtLeastIfValid(this._label.getLocation(0),this._label.getLocation(1),0)}}class gr extends cr{constructor(){super()}createNode(e){return new yr(e,new dr)}}class mr{constructor(){mr.constructor_.apply(this,arguments)}static constructor_(){this._li=new at,this._ptLocator=new gt,this._arg=null,this._nodes=new Rt(new gr),this._im=null,this._isolatedEdges=new z,this._invalidPoint=null;const e=arguments[0];this._arg=e}insertEdgeEnds(e){for(let t=e.iterator();t.hasNext();){const e=t.next();this._nodes.add(e)}}computeProperIntersectionIM(e,t){const r=this._arg[0].getGeometry().getDimension(),n=this._arg[1].getGeometry().getDimension(),i=e.hasProperIntersection(),o=e.hasProperInteriorIntersection();2===r&&2===n?i&&t.setAtLeast("212101212"):2===r&&1===n?(i&&t.setAtLeast("FFF0FFFF2"),o&&t.setAtLeast("1FFFFF1FF")):1===r&&2===n?(i&&t.setAtLeast("F0FFFFFF2"),o&&t.setAtLeast("1F1FFFFFF")):1===r&&1===n&&o&&t.setAtLeast("0FFFFFFFF")}labelIsolatedEdges(e,t){for(let r=this._arg[e].getEdgeIterator();r.hasNext();){const e=r.next();e.isIsolated()&&(this.labelIsolatedEdge(e,t,this._arg[t].getGeometry()),this._isolatedEdges.add(e))}}labelIsolatedEdge(e,t,r){if(r.getDimension()>0){const n=this._ptLocator.locate(e.getCoordinate(),r);e.getLabel().setAllLocations(t,n)}else e.getLabel().setAllLocations(t,rt.EXTERIOR)}computeIM(){const e=new mt;if(e.set(rt.EXTERIOR,rt.EXTERIOR,2),!this._arg[0].getGeometry().getEnvelopeInternal().intersects(this._arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(e),e;this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1);const t=this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(t,e);const r=new Et,n=r.computeEdgeEnds(this._arg[0].getEdgeIterator());this.insertEdgeEnds(n);const i=r.computeEdgeEnds(this._arg[1].getEdgeIterator());return this.insertEdgeEnds(i),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(e),e}labelNodeEdges(){for(let e=this._nodes.iterator();e.hasNext();){e.next().getEdges().computeLabelling(this._arg)}}copyNodesAndLabels(e){for(let t=this._arg[e].getNodeIterator();t.hasNext();){const r=t.next();this._nodes.addNode(r.getCoordinate()).setLabel(e,r.getLabel().getLocation(e))}}labelIntersectionNodes(e){for(let t=this._arg[e].getEdgeIterator();t.hasNext();){const r=t.next(),n=r.getLabel().getLocation(e);for(let t=r.getEdgeIntersectionList().iterator();t.hasNext();){const r=t.next(),i=this._nodes.find(r.coord);i.getLabel().isNull(e)&&(n===rt.BOUNDARY?i.setLabelBoundary(e):i.setLabel(e,rt.INTERIOR))}}}labelIsolatedNode(e,t){const r=this._ptLocator.locate(e.getCoordinate(),this._arg[t].getGeometry());e.getLabel().setAllLocations(t,r)}computeIntersectionNodes(e){for(let t=this._arg[e].getEdgeIterator();t.hasNext();){const r=t.next(),n=r.getLabel().getLocation(e);for(let t=r.getEdgeIntersectionList().iterator();t.hasNext();){const r=t.next(),i=this._nodes.addNode(r.coord);n===rt.BOUNDARY?i.setLabelBoundary(e):i.getLabel().isNull(e)&&i.setLabel(e,rt.INTERIOR)}}}labelIsolatedNodes(){for(let e=this._nodes.iterator();e.hasNext();){const t=e.next(),r=t.getLabel();_.isTrue(r.getGeometryCount()>0,"node with empty label found"),t.isIsolated()&&(r.isNull(0)?this.labelIsolatedNode(t,0):this.labelIsolatedNode(t,1))}}updateIM(e){for(let t=this._isolatedEdges.iterator();t.hasNext();){t.next().updateIM(e)}for(let t=this._nodes.iterator();t.hasNext();){const r=t.next();r.updateIM(e),r.updateIMFromEdges(e)}}computeDisjointIM(e){const t=this._arg[0].getGeometry();t.isEmpty()||(e.set(rt.INTERIOR,rt.EXTERIOR,t.getDimension()),e.set(rt.BOUNDARY,rt.EXTERIOR,t.getBoundaryDimension()));const r=this._arg[1].getGeometry();r.isEmpty()||(e.set(rt.EXTERIOR,rt.INTERIOR,r.getDimension()),e.set(rt.EXTERIOR,rt.BOUNDARY,r.getBoundaryDimension()))}}class _r{constructor(){_r.constructor_.apply(this,arguments)}static constructor_(){if(this._li=new at,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){const e=arguments[0];this.setComputationPrecision(e.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new hr(0,e)}else if(2===arguments.length){const e=arguments[0],t=arguments[1];_r.constructor_.call(this,e,t,ut.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];e.getPrecisionModel().compareTo(t.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new hr(0,e,r),this._arg[1]=new hr(1,t,r)}}getArgGeometry(e){return this._arg[e].getGeometry()}setComputationPrecision(e){this._resultPrecisionModel=e,this._li.setPrecisionModel(this._resultPrecisionModel)}}class vr{constructor(){vr.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null;const e=arguments[0];this._rectEnv=e.getEnvelopeInternal()}static contains(e,t){return new vr(e).contains(t)}isContainedInBoundary(e){if(e instanceof $)return!1;if(e instanceof F)return this.isPointContainedInBoundary(e);if(e instanceof L)return this.isLineStringContainedInBoundary(e);for(let t=0;t<e.getNumGeometries();t++){const r=e.getGeometryN(t);if(!this.isContainedInBoundary(r))return!1}return!0}isLineSegmentContainedInBoundary(e,t){if(e.equals(t))return this.isPointContainedInBoundary(e);if(e.x===t.x){if(e.x===this._rectEnv.getMinX()||e.x===this._rectEnv.getMaxX())return!0}else if(e.y===t.y&&(e.y===this._rectEnv.getMinY()||e.y===this._rectEnv.getMaxY()))return!0;return!1}isLineStringContainedInBoundary(e){const t=e.getCoordinateSequence(),r=new w,n=new w;for(let e=0;e<t.size()-1;e++)if(t.getCoordinate(e,r),t.getCoordinate(e+1,n),!this.isLineSegmentContainedInBoundary(r,n))return!1;return!0}isPointContainedInBoundary(){if(arguments[0]instanceof F){const e=arguments[0];return this.isPointContainedInBoundary(e.getCoordinate())}if(arguments[0]instanceof w){const e=arguments[0];return e.x===this._rectEnv.getMinX()||e.x===this._rectEnv.getMaxX()||e.y===this._rectEnv.getMinY()||e.y===this._rectEnv.getMaxY()}}contains(e){return!!this._rectEnv.contains(e.getEnvelopeInternal())&&!this.isContainedInBoundary(e)}}class Ar{constructor(){Ar.constructor_.apply(this,arguments)}static constructor_(){this._li=new at,this._rectEnv=null,this._diagUp0=null,this._diagUp1=null,this._diagDown0=null,this._diagDown1=null;const e=arguments[0];this._rectEnv=e,this._diagUp0=new w(e.getMinX(),e.getMinY()),this._diagUp1=new w(e.getMaxX(),e.getMaxY()),this._diagDown0=new w(e.getMinX(),e.getMaxY()),this._diagDown1=new w(e.getMaxX(),e.getMinY())}intersects(e,t){const r=new x(e,t);if(!this._rectEnv.intersects(r))return!1;if(this._rectEnv.intersects(e))return!0;if(this._rectEnv.intersects(t))return!0;if(e.compareTo(t)>0){const r=e;e=t,t=r}let n=!1;return t.y>e.y&&(n=!0),n?this._li.computeIntersection(e,t,this._diagDown0,this._diagDown1):this._li.computeIntersection(e,t,this._diagUp0,this._diagUp1),!!this._li.hasIntersection()}}class br{constructor(){br.constructor_.apply(this,arguments)}static constructor_(){this._isDone=!1}applyTo(e){for(let t=0;t<e.getNumGeometries()&&!this._isDone;t++){const r=e.getGeometryN(t);if(r instanceof ie)this.applyTo(r);else if(this.visit(r),this.isDone())return this._isDone=!0,null}}}class wr{constructor(){wr.constructor_.apply(this,arguments)}static constructor_(){this._rectangle=null,this._rectEnv=null;const e=arguments[0];this._rectangle=e,this._rectEnv=e.getEnvelopeInternal()}static intersects(e,t){return new wr(e).intersects(t)}intersects(e){if(!this._rectEnv.intersects(e.getEnvelopeInternal()))return!1;const t=new Er(this._rectEnv);if(t.applyTo(e),t.intersects())return!0;const r=new xr(this._rectangle);if(r.applyTo(e),r.containsPoint())return!0;const n=new Ir(this._rectangle);return n.applyTo(e),!!n.intersects()}}class Er extends br{constructor(){super(),Er.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._intersects=!1;const e=arguments[0];this._rectEnv=e}isDone(){return!0===this._intersects}visit(e){const t=e.getEnvelopeInternal();return this._rectEnv.intersects(t)?this._rectEnv.contains(t)||t.getMinX()>=this._rectEnv.getMinX()&&t.getMaxX()<=this._rectEnv.getMaxX()||t.getMinY()>=this._rectEnv.getMinY()&&t.getMaxY()<=this._rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null}intersects(){return this._intersects}}class xr extends br{constructor(){super(),xr.constructor_.apply(this,arguments)}static constructor_(){this._rectSeq=null,this._rectEnv=null,this._containsPoint=!1;const e=arguments[0];this._rectSeq=e.getExteriorRing().getCoordinateSequence(),this._rectEnv=e.getEnvelopeInternal()}isDone(){return!0===this._containsPoint}visit(e){if(!(e instanceof $))return null;const t=e.getEnvelopeInternal();if(!this._rectEnv.intersects(t))return null;const r=new w;for(let n=0;n<4;n++)if(this._rectSeq.getCoordinate(n,r),t.contains(r)&&Dt.containsPointInPolygon(r,e))return this._containsPoint=!0,null}containsPoint(){return this._containsPoint}}class Ir extends br{constructor(){super(),Ir.constructor_.apply(this,arguments)}static constructor_(){this._rectEnv=null,this._rectIntersector=null,this._hasIntersection=!1,this._p0=new w,this._p1=new w;const e=arguments[0];this._rectEnv=e.getEnvelopeInternal(),this._rectIntersector=new Ar(this._rectEnv)}intersects(){return this._hasIntersection}isDone(){return!0===this._hasIntersection}visit(e){const t=e.getEnvelopeInternal();if(!this._rectEnv.intersects(t))return null;const r=Xt.getLines(e);this.checkIntersectionWithLineStrings(r)}checkIntersectionWithLineStrings(e){for(let t=e.iterator();t.hasNext();){const e=t.next();if(this.checkIntersectionWithSegments(e),this._hasIntersection)return null}}checkIntersectionWithSegments(e){const t=e.getCoordinateSequence();for(let e=1;e<t.size();e++)if(t.getCoordinate(e-1,this._p0),t.getCoordinate(e,this._p1),this._rectIntersector.intersects(this._p0,this._p1))return this._hasIntersection=!0,null}}class Sr extends _r{constructor(){super(),Sr.constructor_.apply(this,arguments)}static constructor_(){if(this._relate=null,2===arguments.length){const e=arguments[0],t=arguments[1];_r.constructor_.call(this,e,t),this._relate=new mr(this._arg)}else if(3===arguments.length){const e=arguments[0],t=arguments[1],r=arguments[2];_r.constructor_.call(this,e,t,r),this._relate=new mr(this._arg)}}static covers(e,t){return!(2===t.getDimension()&&e.getDimension()<2)&&(!(1===t.getDimension()&&e.getDimension()<1&&t.getLength()>0)&&(!!e.getEnvelopeInternal().covers(t.getEnvelopeInternal())&&(!!e.isRectangle()||new Sr(e,t).getIntersectionMatrix().isCovers())))}static intersects(e,t){if(!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal()))return!1;if(e.isRectangle())return wr.intersects(e,t);if(t.isRectangle())return wr.intersects(t,e);if(e.isGeometryCollection()||t.isGeometryCollection()){for(let r=0;r<e.getNumGeometries();r++)for(let n=0;n<t.getNumGeometries();n++)if(e.getGeometryN(r).intersects(t.getGeometryN(n)))return!0;return!1}return new Sr(e,t).getIntersectionMatrix().isIntersects()}static touches(e,t){return!!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new Sr(e,t).getIntersectionMatrix().isTouches(e.getDimension(),t.getDimension())}static equalsTopo(e,t){return!!e.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&Sr.relate(e,t).isEquals(e.getDimension(),t.getDimension())}static relate(){if(2===arguments.length){return new Sr(arguments[0],arguments[1]).getIntersectionMatrix()}if(3===arguments.length){return new Sr(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix()}}static overlaps(e,t){return!!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new Sr(e,t).getIntersectionMatrix().isOverlaps(e.getDimension(),t.getDimension())}static crosses(e,t){return!!e.getEnvelopeInternal().intersects(t.getEnvelopeInternal())&&new Sr(e,t).getIntersectionMatrix().isCrosses(e.getDimension(),t.getDimension())}static contains(e,t){return!(2===t.getDimension()&&e.getDimension()<2)&&(!(1===t.getDimension()&&e.getDimension()<1&&t.getLength()>0)&&(!!e.getEnvelopeInternal().contains(t.getEnvelopeInternal())&&(e.isRectangle()?vr.contains(e,t):new Sr(e,t).getIntersectionMatrix().isContains())))}getIntersectionMatrix(){return this._relate.computeIM()}}var Cr=r(19170),Pr=r(63330),Or=r(40398),Tr=r(12479),Mr=r(81517);function kr(e){return function(e){if(Array.isArray(e))return Rr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Br=function(e){var t=e,r=[];return t instanceof Tr.Z?r=kr(t.getFeatures().map((function(e){return e.getGeometry()}))):((0,Or.kJ)(t)||(t=[t]),r=t.map((function(e){var t;return e instanceof Mr.Z?t=e.getGeometry():(0,Or.Kn)(e)&&(t=e),t}))),r},Lr=function(e,t){var r="",n=new Pr.Z;return t.forEach((function(t,i){0!==i&&(r+=" OR ");var o=t;"point"===o.type.toLowerCase()&&(o.coordinates.length=2);var a=n.writeFeature(o);r+="".concat(e,"({{geometryName}}, ").concat(a,")")})),r},Dr=function(e){var t=Br(e);return new Cr.Z((function(e,r){var n=new Me,i=n.read(e);return t.some((function(e){var t=n.read(e);return Sr.contains(t,i)}))}),{cqlFilter:Lr("CONTAINS",t)})},jr=function(e){var t=Br(e);return new Cr.Z((function(e,r){var n=new Me,i=n.read(e);return t.some((function(e){var t=n.read(e);return!Sr.intersects(i,t)}))}),{cqlFilter:Lr("DISJOINT",t)})},Fr=function(e){var t=Br(e);return new Cr.Z((function(e,r){var n=new Me,i=n.read(e);return t.some((function(e){var t=n.read(e);return Sr.contains(t,i)}))}),{cqlFilter:Lr("WITHIN",t)})},Nr=function(e){var t=Br(e);return new Cr.Z((function(e,r){var n=new Me,i=n.read(e);return t.some((function(e){var t=n.read(e);return Sr.intersects(i,t)}))}),{cqlFilter:Lr("INTERSECTS",t)})}},19170:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(36184),i=r(40398);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,o=l(u);function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);return o.call(this,(function(t,r){var n=null;return(0,i.Ew)(t)||(n=t.getGeometry()),e(n,r)}),t)}return t=u,r&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(n.Z)},7508:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(87162),i=r(81638),o=r(40398),a=r(81971),s=r(2532);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(h,e);var t,r,i,l=f(h);function h(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var r=new n.Z(t);return e=l.call(this,r),(0,o.o8)(n.Z)&&(0,a.Z)((0,s.NA)("exception").geojson_method),e}return t=h,(r=[{key:"write",value:function(e){var t=e;return(0,o.kJ)(t)||(t=[t]),this.getImpl().write(t)}},{key:"read",value:function(e,t){var r=e,n=[];if(!(0,o.Ew)(r)){(0,o.HD)(r)&&(r=JSON.parse(r));var i=[];"FeatureCollection"===r.type?i=r.features:"Feature"===r.type&&(i=[r]),n=this.getImpl().read(r,i,t)}return n}}])&&u(t.prototype,r),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),h}(i.Z)},63330:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(6155),i=r(81638),o=r(40398),a=r(81971),s=r(2532);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(h,e);var t,r,i,l=f(h);function h(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var r=new n.Z(t);return e=l.call(this,r),(0,o.o8)(n.Z)&&(0,a.Z)((0,s.NA)("exception").wkt_method),e}return t=h,r=[{key:"read",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getImpl().read(e,t)}},{key:"readCollection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getImpl().readCollection(e,t)}},{key:"write",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getImpl().write(e,t)}},{key:"writeFeature",value:function(e){return this.getImpl().writeFeature(e)}},{key:"writeCollection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getImpl().writeCollection(e,t)}}],r&&u(t.prototype,r),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),h}(i.Z)},85992:(e,t,r)=>{"use strict";r.d(t,{N6:()=>s,Qc:()=>a});var n=r(40398),i=r(92482),o=r(81347),a=function(e){var t=(0,n.Fv)(e,!0);return o[t]},s=function(e){var t;return e===o.POINT?t=i.e_:e===o.LINE?t=i.Sd:e===o.POLYGON?t=i.KX:e===o.MPOINT?t=i.V0:e===o.MLINE?t=i.jW:e===o.MPOLYGON&&(t=i.rl),t}},81347:(e,t,r)=>{"use strict";r.r(t),r.d(t,{LINE:()=>i,MLINE:()=>s,MPOINT:()=>a,MPOLYGON:()=>l,POINT:()=>n,POLYGON:()=>o,default:()=>u});var n="POINT",i="LINE",o="POLYGON",a="MPOINT",s="MLINE",l="MPOLYGON";const u={}},92482:(e,t,r)=>{"use strict";r.d(t,{KX:()=>o,Md:()=>h,NB:()=>u,Sd:()=>i,V0:()=>a,e_:()=>c,hF:()=>f,jW:()=>s,rl:()=>l,x2:()=>n});var n="Geometry",i="LineString",o="Polygon",a="MultiPoint",s="MultiLineString",l="MultiPolygon",u="LinearRing",c="Point",f="GeometryCollection",h="Circle"},70939:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(31700),i=r(40398),o=r(81971),a=r(81638),s=r(77055),l=r(2532);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(f,e);var t,r,a,u=d(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new n.Z(t);return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=u.call(this,r)).map_=null,e.layers_=[],e.activated_=!1,e.prevSelectedFeatures_={},e.prevHoverFeatures_={},(0,i.mf)(r.addTo)||(0,o.Z)((0,l.NA)("exception").addto_method),(0,i.mf)(r.getFeaturesByLayer)||(0,o.Z)((0,l.NA)("exception").getfeaturesbylayer_method),e}return t=f,(r=[{key:"addTo",value:function(e){this.map_=e,this.map_.on(s.Yn,this.moveOverMap_.bind(this)),this.map_.on(s.ot,this.clickOnMap_.bind(this)),this.getImpl().addTo(this.map_),this.fire(s.GY)}},{key:"clickOnMap_",value:function(e){var t=this;if(!0===this.activated_){var r=this.getImpl();this.map_.removePopup(),this.layers_.forEach((function(n,i){var o=r.getFeaturesByLayer(e,n),a=c(t.prevSelectedFeatures_[n.name]);if(a[0]===o[0]&&1===i&&o!==[]&&"click"===n.infoEventType&&t.selectFeatures(a,n,e),0===o.length&&a.length>0)"click"===n.infoEventType&&t.unselectFeatures(a,n,e);else if(o.length>0&&void 0!==o[0]){var s=o.filter((function(e){return!a.some((function(t){return t.equals(e)}))})),l=a.filter((function(e){return!o.some((function(t){return t.equals(e)}))}));l.length>0&&"click"===n.infoEventType&&t.unselectFeatures(l,n,e),s.length>0&&"click"===n.infoEventType&&t.selectFeatures(s,n,e)}}))}}},{key:"moveOverMap_",value:function(e){var t=this;if(!0===this.activated_){var r=this.getImpl();this.hookStopMoveEvent_(e).then((function(n){t.layers_.forEach((function(i){var o=r.getFeaturesByLayer(e,i),a=c(t.prevHoverFeatures_[i.name]);if(0===o.length&&a.length>0)"hover"===i.infoEventType&&t.unselectFeatures(a,i,e),t.leaveFeatures_(a,i,e);else if(o.length>0){var s=o.filter((function(e){return!a.some((function(t){return t.equals(e)}))})),l=a.filter((function(e){return!o.some((function(t){return t.equals(e)}))}));l.length>0&&("hover"===i.infoEventType&&t.unselectFeatures(l,i,e),t.leaveFeatures_(l,i,e)),s.length>0&&("hover"===i.infoEventType&&t.selectFeatures(s,i,n),t.hoverFeatures_(s,i,n))}}))}))}}},{key:"hookStopMoveEvent_",value:function(e){var t=this;return clearTimeout(this.mouseMoverTimer),new Promise((function(r){t.mouseMoverTimer=setTimeout((function(){r(e)}),50)}))}},{key:"selectFeatures",value:function(e,t,r){this.prevSelectedFeatures_[t.name]=this.prevSelectedFeatures_[t.name].concat(e);var n=t.getImpl();(0,i.mf)(n.selectFeatures)&&n.selectFeatures(e,r.coord,r),t.fire(s.Oj,[e,r])}},{key:"unselectFeatures",value:function(e,t,r){this.prevSelectedFeatures_[t.name]=this.prevSelectedFeatures_[t.name].filter((function(t){return!e.some((function(e){return e.equals(t)}))}));var n=t.getImpl();(0,i.mf)(n.unselectFeatures)&&n.unselectFeatures(e,r.coord),this.map_.getPopup()&&this.map_.getPopup().hide(),t.fire(s.cF,[e,r.coord])}},{key:"hoverFeatures_",value:function(e,t,r){t.name&&(this.prevHoverFeatures_[t.name]=this.prevHoverFeatures_[t.name].concat(e),t.fire(s.Nm,[e,r]),this.getImpl().addCursorPointer(r))}},{key:"leaveFeatures_",value:function(e,t,r){this.prevHoverFeatures_[t.name]=this.prevHoverFeatures_[t.name].filter((function(t){return!e.some((function(e){return e.equals(t)}))})),t.fire(s.V7,[e,r.coord]),this.getImpl().removeCursorPointer(r)}},{key:"activate",value:function(){!1===this.activated_&&(this.activated_=!0,this.fire(s.J_))}},{key:"deactivate",value:function(){!0===this.activated_&&(this.activated_=!1,this.fire(s.Lt))}},{key:"addLayer",value:function(e){(0,i.q9)(this.layers_,e)||(this.layers_.push(e),this.prevSelectedFeatures_[e.name]=[],this.prevHoverFeatures_[e.name]=[])}},{key:"removeLayer",value:function(e){this.layers_=this.layers_.filter((function(t){return!t.equals(e)})),this.prevSelectedFeatures_[e.name]=null,this.prevHoverFeatures_[e.name]=null,delete this.prevSelectedFeatures_[e.name],delete this.prevHoverFeatures_[e.name]}},{key:"destroy",value:function(){}},{key:"clearSelectedFeatures",value:function(){var e=this;Object.keys(this.prevSelectedFeatures_).forEach((function(t){e.prevSelectedFeatures_[t]=[]}))}},{key:"clearHoverFeatures",value:function(){var e=this;Object.keys(this.prevHoverFeatures_).forEach((function(t){e.prevHoverFeatures_[t]=[]}))}}])&&h(t.prototype,r),a&&h(t,a),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.Z)},2532:(e,t,r)=>{"use strict";r.d(t,{Zt:()=>l,DN:()=>s,VQ:()=>h,i0:()=>u,NA:()=>c,Wg:()=>f});const n=JSON.parse('{"panzoom":{"textHelp":{"text1":"This tool allows you to change the zoom of the viewer from a panel with a slider. The display map changes zoom in or out as you move the slider up or down."}},"panzoombar":{"textHelp":{"text1":"This tool allows you to change the zoom of the viewer from a panel with a slider. The display map changes zoom in or out as you move the slider up or down."}},"backgroundlayers":{"textHelp":{"text1":"The base layer selector tool allows you to switch between different base layers or background layers, configured in a viewer."}},"location":{"title":"Get current location","textHelp":{"text1":"The location tool allows you to obtain the position of a device and position it on the map. Its operation is restricted to WEB pages that are published securely over the HTTPS protocol and in local environments.","text2":"If used on a mobile device equipped with a GNSS system, the position will be obtained according to the device\'s location permissions.","text3":"On devices without GNSS systems, positioning is obtained using the IP address assigned by the internet operator in a delimited area."}},"layerswitcher":{"title":"Layer selector"},"scale":{"title":"Scale","scale":"Scale","level":"Zoom level","textHelp":{"text1":"Information panel showing the zoom level and approximate scale of the current view.","text2":"The zoom level is the corresponding one for the EPSG coordinate system: 3857 WGS84 / Pseudo-Mercator."}},"scaleline":{"textHelp":{"text1":"The graphic scale is a line located on the map, often in the margin of the sheet, that has been subdivided into segments to indicate the lengths on the map of terrestrial distance units.","text2":"Thanks to this element it is possible to measure the real distance directly on the map with the help of a ruler or a compass.","text3":"Source"}},"attributionsControl":{"attribution":"attribution","tooltip":"Recognitions","textHelp":{"text1":"The base layer selector tool allows you to switch between different base layers or background layers, configured in a viewer.","text2":"With this information, attribution can be given to each layer, allowing the user to know its source."}},"getfeatureinfo":{"info":"Information","title":"Consult layer","no_info":"No associated info","info_of":"Information about","unsupported_format":"Unsupported format","textHelp":{"text1":"The obtain information tool allows obtaining the GetFeatureInfo (the information associated with the point clicked on the viewer) in WMS and WMTS services."}},"wmcselector":{"title":"Context selector"},"rotate":{"title":"Turn north","textHelp":{"text1":"The rotation tool allows you to return the viewer to a North orientation.","text2":"To be able to rotate the map in the viewer, it is done with the key combination Shit + Alt + left mouse click + move mouse to rotate."}},"mouse":{"title":"Pointer coordinates"},"dialog":{"info":"INFORMATION","error":"ERROR","success":"SUCCESS","id_feature":"An ID has not been indicated to obtain the feature","invalid_type_layer":"A valid type was not specified for the layer","vector_filter":"The indicated filter is not correct","unauthorized_user":"An error occurred while loading the layer: Unauthorized user.","only_one_filter":"FeatureID and CQL are mutually exclusive, indicate only one type of filtering.","any_format":"TXT, HTML and GML are and unsupported"},"toast":{"close":"Cerrar"},"feature":{"incorrect_attributes":"The attributes were not specified correctly."},"heatmap":{"features":"The layer does not have any <br/> features with the specified attribute in set symbology. <br/>A default weighting is set","name":"Heatmap"},"exception":{"addto_method":"The used implementation does not have the addTo method","getelement_method":"The used implementation does not have the getElement method","getfeatureinfo_method":"The used implementation can not create GetFeatureInfo controls","mouse_method":"The used implementation can not create Mouse controls","navtoolbar_method":"The used implementation can not create navtoolbar controls","overviewmap_method":"The used implementation can not create OverviewMap controls","panzoom_method":"The used implementation can not create Panzoom controls","panzoombar_method":"The used implementation can not create Panzoombar controls","scale_method":"The used implementation can not create Scale controls","scaleline_method":"The used implementation can not create ScaleLine controls","wmcselector_method":"The used implementation can not create WMCSelector controls","geojson_method":"The used implementation can not create objects M.impl.format.GeoJSON","wkt_method":"The used implementation can not creat objects M.impl.format.WKT","getfeaturesbylayer_method":"The used implementation does not have the getFeaturesByLayer method","geojsonlayer_method":"The used implementation can not create GeoJSON layers","no_param":"No parameters specified","no_name":"You have not specified any name","kmllayer_method":"The used implementation can not create KML layers","isvisible_method":"The used implementation does not have the isVisible method","isqueryable_methd":"The used implementation does not have the isQueryable method","visibility_param":"You have not specified any visibility parameters","setvisible_method":"The used implementation does not have the setVisible method","inrange_method":"The used implementation does not have the inRange method","mapbox_method":"The used implementation can not create Mapbox layers","osm_method":"The used implementation can not create OSM layers","vectorlayer_method":"The used implementation can not create Vector layers","wfslayer_method":"The used implementation can not create WFS layers","wmclayer_method":"The used implementation can not create WMC layers","select_method":"The used implementation does not have the select method","unselect_method":"The used implementation does not have the unselect method","constructor_impl":"The used implementation does not have a constructor.","getlayers_method":"The used implementation does not have the getLayers method.","getbaselayers_method":"The used implementation does not have the getBaseLayers method.","addlayers_method":"The used implementation does not have the addLayers method.","removelayers_method":"The used implementation does not have the removeLayers method.","getwmc_method":"The implementation used does not have the getWMC method.","addwmc_method":"The used implementation does not have the addWMC method.","removewmc_method":"The used implementation does not have the removeWMC method.","getkml_method":"The used implementation does not have the getKML method.","addkml_method":"The implementation used does not have the addKML method.","removekml_method":"The implementation used does not have the removeKML method.","getwms_method":"The used implementation does not have the getWMS method.","getgeotiff_method":"The used implementation does not have the getWMS method.","addwms_method":"The used implementation does not have the addWMS method.","addgeotiff_method":"The used implementation does not have the addGeoTIFF method.","removewms_method":"The used implementation does not have the removeWMS method.","removegeotiff_method":"The used implementation does not have the removeGeoTIFF method.","getwfs_method":"The implementation used does not have the getWFS method.","getgeojson_method":"The used implementation does not have the getGeoJSON method.","getogcapif_method":"The used implementation does not have the getOGCAPIFeatures method.","addwfs_method":"The used implementation does not have the addWFS method.","removewfs_method":"The used implementation does not have the removeWFS method.","getwmts_method":"The implementation used does not have the getWMTS method.","addwmts_method":"The used implementation does not have the addWMTS method.","removewmts_method":"The used implementation does not have the removeWMTS method.","getmbtiles_method":"The used implementation does not have the getMBtiles method.","getxyzs_method":"The used implementation does not have the getXYZs method.","gettms_method":"The used implementation does not have the getTMS method.","getcontrols_method":"The used implementation does not have the getControls method.","addcontrols_method":"The used implementation does not have the addControls method.","remove_control":"You have not specified any control to delete.","removecontrol_method":"The used implementation does not have the removeControls method.","setmaxextent_method":"The used implementation does not have the setMaxExtent method.","getbbox_method":"The used implementation does not have the getBbox method.","no_bbox":"You have not specified any bbox.","setbbox_method":"The used implementation does not have the setBbox method.","incorrect_bbox_format":"The format of the bbox parameter is not correct.","getzoom_method":"The used implementation does not have the getZoom method.","no_zoom":"You have not specified any zoom.","setzoom_method":"The implementation used does not have the setZoom method.","getcenter_method":"The used implementation does not have the getCenter method.","setcenter_method":"The used implementation does not have the setCenter method.","getresolutions_method":"The used implementation does not have the getResolutions method.","no_resolutions":"You have not specified any resolution.","setresolutions_method":"The used implementation does not have the setResolutions method.","getscale_method":"The used implementation does not have the getScale method.","getprojection_method":"The implementation used does not have the getProjection method.","no_projection":"You have not specified any projection.","setprojection_method":"The used implementation does not have the setProjection method.","no_plugins":"You have not specified any plugins.","no_add_plugin_to_map":"The plugin can not be added to the map.","no_plugin_to_remove":"You have not specified any plugins to delete.","destroy_method":"The used implementation does not have the destroy method.","addlabel_method":"The used implementation does not have the addLabel method.","no_point":"You have not specified any points.","remove_control_from_panel":"You must remove the controls from the panel previously.","getcontainer_method":"The used implementation does not have the getContainer method.","getmapimpl_method":"The used implementation does not have the getMapImpl method.","removepopup_method":"The used implementation does not have the removePopup method.","no_popup":"You have not specified any popup.","invalid_popup":"The specified popup is not valid.","no_maxextent":"You have not specified any maxExtent","must_be_document":"doc.nodeType must be DOCUMENT type","no_service_response":"There was no reply from the service","no_kml_response":"There was no response from the KML","no_getfeature_response":"There was no response in the GetFeature operation","no_map":"You have not specified any map","layerswitcher_method":"The used implementation can not create LayerSwitcher controls","location_method":"The used implementation can not create Location controls","wms_method":"The used implementation can not create WMS layers","geotiff_method":"The used implementation can not create GeoTIFF layers","mapLibre_method":"The used implementation can not create MapLibre layers","generic_method":"The used implementation can not create Generic layers","wmts_method":"The used implementation can not create WMTS layers","no_impl":"No implementation specified","no_container":"You have not specified any container parameters","no_id_container":"There is no container with the specified id","no_center":"You have not specified any center parameters","no_attr_name":"The name of the attribute was not specified","no_empty":"The attribute name can not be null. Specify string or function","invalid_center_param":"The format of the center parameter is not correct","invalid_maxextent_param":"The format of the maxExtent parameter is not correct","invalid_resolutions_param":"The format of the resolutions parameter is not correct","invalid_zoom_param":"The format of the zoom parameter is not correct","min_gt_max":"A minimum radius greater than the maximum can not be established.","max_lt_min":"A maximum radius of less than the minimum can not be established.","no_geojson":"No GeoJSON has been specified","unsupported_lang":"A language without support has been established","mbtilesvector_method":"The used implementation can not create MBTilesVector layers","mbtiles_method":"The used implementation can not create MBTiles layers","no_source":"No source was specified.","addmbtiles_method":"The implementation used does not have the method addMBTilesVector.","removembtiles_method":"The implementation used does not have the method removeMBTilesVector.","browser_audio":"Your browser does not support the audio element","browser_video":"Your browser does not support the video element","versionError":"Layer [replace1] of type [replace2] does not support the version.","sldBODYError":"Layer [replace1] of type [replace2] does not support SLD_BODY.","styleError":"Layer [replace1] of type [replace2] does not support STYLE.","formatError":"Layer [replace1] of type [replace2] does not support FORMAT.","file_size":"The selected file exceeds the maximum 20 MB allowed.","file_load":"Error when loading the file.","no_geoms":"No geometries have been detected in this file.","file_load_correct":"Error when loading the file. Check that it is the right file.","file_extension":"A not allowed file extension has been inserted. The allowed ones are: KML, SHP(.zip), GPX, GML and GeoJSON."}}'),i=JSON.parse('{"panzoom":{"textHelp":{"text1":"Esta herramienta permite cambiar el zoom del visualizador a partir de un panel con un desplazador. El mapa del visualizador cambia acercándose o alejándose según se cambie el desplazador hacia arriba o hacia abajo."}},"panzoombar":{"textHelp":{"text1":"Esta herramienta permite cambiar el zoom del visualizador a partir de un panel con un desplazador. El mapa del visualizador cambia acercándose o alejándose según se cambie el desplazador hacia arriba o hacia abajo."}},"backgroundlayers":{"textHelp":{"text1":"La herramienta de selector de capas base permite cambiar entre distintas capas base o capas de fondo, configuradas en un visualizador."}},"location":{"error":"El control ubicación no acepta http. Debe usar https.","title":"Obtener ubicación actual","textHelp":{"text1":"La herramienta de localización permite obtener la posición de un dispositivo y posicionarla en el mapa. Su funcionamiento queda restringido a páginas WEB que se publiquen de forma segura sobre el protocolo HTTPS y en entornos locales.","text2":"En el caso de su utilización en un dispositivo móvil provisto de un sistema GNSS, se obtendrá la posición según los permisos de localización del dispositivo.","text3":"En dispositivos sin sistemas GNSS, la obtención del posicionamiento se realiza mediante la dirección IP asignada por el operador de internet en una zona delimitada."}},"layerswitcher":{"title":"Selector de capas"},"scale":{"title":"Escala","scale":"Escala","level":"Nivel de zoom","textHelp":{"text1":"Panel informativo que muestra el nivel de zoom y la escala aproximada de la vista actual.","text2":"El nivel de zoom es el correspondiente para para el sistema de coordenadas EPSG: 3857 WGS84 / Pseudo-Mercator."}},"scaleline":{"textHelp":{"text1":"La escala gráfica es una línea situada en el mapa, a menudo en el margen de la hoja, que se ha subdividido en segmentos para indicar las longitudes sobre el mapa de las unidades terrestres de distancia.","text2":"Gracias a este elemento es posible medir la distancia real directamente sobre el mapa con la ayuda de una regla o un compás.","text3":"Fuente"}},"attributionsControl":{"attribution":"atribución","tooltip":"Reconocimientos","textHelp":{"text1":"La herramienta de selector de capas base permite cambiar entre distintas capas base o capas de fondo, configuradas en un visualizador.","text2":"Con esta información, se puede dar la atribución a cada capa, permitiendo al usuario saber su fuente."}},"getfeatureinfo":{"info":"Información","title":"Consultar capa","no_info":"No existe información asociada","info_of":"Información de","unsupported_format":"Formato no soportado","textHelp":{"text1":"La herramienta de obtener información permite obtener el GetFeatureInfo (la información asociada al punto clickado sobre el visualizador) en servicios WMS y WMTS."}},"wmcselector":{"title":"Selector de contextos"},"rotate":{"title":"Girar al norte","textHelp":{"text1":"La herramienta de rotación permite volver a una orientación Norte al visualizador.","text2":"Para poder girar el mapa en el visualizador, se realiza con la combinación de teclas Shit + Alt + click izquierdo del ratón + mover ratón para girar."}},"mouse":{"title":"Coordenadas del puntero"},"dialog":{"info":"INFORMACIÓN","error":"ERROR","success":"ÉXITO","id_feature":"No se ha indicado un ID para obtener el feature","invalid_type_layer":"No se ha especificado un tipo válido para la capa","vector_filter":"El filtro indicado no es correcto","unauthorized_user":"Ha ocurrido un error al cargar la capa: Usuario no autorizado.","only_one_filter":"FeatureID y CQL son mutuamente excluyentes. Indicar sólo un tipo de filtrado.","any_format":"TXT, ni HTML ni GML están soportados"},"toast":{"close":"Cerrar"},"feature":{"incorrect_attributes":"No se han especificado correctamente los atributos."},"heatmap":{"features":"La capa no tiene ninguna feature <br/> con el atributo especificado en simbología establecida. <br/>Se setea una ponderación por defecto","name":"Mapa de calor"},"exception":{"addto_method":"La implementación usada no posee el método addTo","getelement_method":"La implementación usada no posee el método getElement","getfeatureinfo_method":"La implementación usada no puede crear controles GetFeatureInfo","mouse_method":"La implementación usada no puede crear controles Mouse","navtoolbar_method":"La implementación usada no puede crear controles Navtoolbar","overviewmap_method":"La implementación usada no puede crear controles OverviewMap","panzoom_method":"La implementación usada no puede crear controles Panzoom","panzoombar_method":"La implementación usada no puede crear controles Panzoombar","scale_method":"La implementación usada no puede crear controles Scale","scaleline_method":"La implementación usada no puede crear controles ScaleLine","wmcselector_method":"La implementación usada no puede crear controles WMCSelector","geojson_method":"La implementación usada no puede crear objetos M.impl.format.GeoJSON","wkt_method":"La implementación usada no puede creat objetos M.impl.format.WKT","getfeaturesbylayer_method":"La implementación usada no posee el método getFeaturesByLayer","geojsonlayer_method":"La implementación usada no puede crear capas GeoJSON","no_param":"No se ha especificado ningun parámetro","no_name":"No ha especificado ningún nombre","kmllayer_method":"La implementación usada no puede crear capas KML","isvisible_method":"La implementación usada no posee el método isVisible","isqueryable_methd":"La implementación usada no posee el método isQueryable","visibility_param":"No ha especificado ningún parámetro de visibilidad","setvisible_method":"La implementación usada no posee el método setVisible","inrange_method":"La implementación usada no posee el método inRange","mapbox_method":"La implementación usada no puede crear capas Mapbox","osm_method":"La implementación usada no puede crear capas OSM","vectorlayer_method":"La implementación usada no puede crear capas Vector","wfslayer_method":"La implementación usada no puede crear capas WFS","wmclayer_method":"La implementación usada no puede crear capas WMC","select_method":"La implementación usada no posee el método select","unselect_method":"La implementación usada no posee el método unselect","constructor_impl":"La implementación usada no posee un constructor.","getlayers_method":"La implementación usada no posee el método getLayers.","getbaselayers_method":"La implementación usada no posee el método getBaseLayers.","addlayers_method":"La implementación usada no posee el método addLayers.","removelayers_method":"La implementación usada no posee el método removeLayers.","getwmc_method":"La implementación usada no posee el método getWMC.","addwmc_method":"La implementación usada no posee el método addWMC.","removewmc_method":"La implementación usada no posee el método removeWMC.","getkml_method":"La implementación usada no posee el método getKML.","addkml_method":"La implementación usada no posee el método addKML.","removekml_method":"La implementación usada no posee el método removeKML.","getwms_method":"La implementación usada no posee el método getWMS.","getgeotiff_method":"La implementación usada no posee el método getGeoTIFF.","addwms_method":"La implementación usada no posee el método addWMS.","addgeotiff_method":"La implementación usada no posee el método addGeoTIFF.","removewms_method":"La implementación usada no posee el método removeWMS.","removegeotiff_method":"La implementación usada no posee el método removeGeoTIFF.","getwfs_method":"La implementación usada no posee el método getWFS.","getgeojson_method":"La implementación usada no posee el método getGeoJSON.","getogcapif_method":"La implementación usada no posee el método getOGCAPIFeatures.","addwfs_method":"La implementación usada no posee el método addWFS.","removewfs_method":"La implementación usada no posee el método removeWFS.","getwmts_method":"La implementación usada no posee el método getWMTS.","addwmts_method":"La implementación usada no posee el método addWMTS.","removewmts_method":"La implementación usada no posee el método removeWMTS.","getmbtiles_method":"La implementación usada no posee el método getMBtiles.","getxyzs_method":"La implementación usada no posee el método getXYZs.","gettms_method":"La implementación usada no posee el método getTMS.","getcontrols_method":"La implementación usada no posee el método getControls.","addcontrols_method":"La implementación usada no posee el método addControls.","remove_control":"No ha especificado ningún control a eliminar.","removecontrol_method":"La implementación usada no posee el método removeControls.","setmaxextent_method":"La implementación usada no posee el método setMaxExtent.","getbbox_method":"La implementación usada no posee el método getBbox.","no_bbox":"No ha especificado ningún bbox.","setbbox_method":"La implementación usada no posee el método setBbox.","incorrect_bbox_format":"El formato del parámetro bbox no es el correcto.","getzoom_method":"La implementación usada no posee el método getZoom.","no_zoom":"No ha especificado ningún zoom.","setzoom_method":"La implementación usada no posee el método setZoom.","getcenter_method":"La implementación usada no posee el método getCenter.","setcenter_method":"La implementación usada no posee el método setCenter.","getresolutions_method":"La implementación usada no posee el método getResolutions.","no_resolutions":"No ha especificado ninguna resolución.","setresolutions_method":"La implementación usada no posee el método setResolutions.","getscale_method":"La implementación usada no posee el método getScale.","getprojection_method":"La implementación usada no posee el método getProjection.","no_projection":"No ha especificado ninguna proyección.","setprojection_method":"La implementación usada no posee el método setProjection.","no_plugins":"No ha especificado ningún plugin.","no_add_plugin_to_map":"El plugin no puede añadirse al mapa.","no_plugin_to_remove":"No ha especificado ningún plugin a eliminar.","destroy_method":"La implementación usada no posee el método destroy.","addlabel_method":"La implementación usada no posee el método addLabel.","no_point":"No ha especificado ningún punto.","remove_control_from_panel":"Debe eliminar los controles del panel previamente.","getcontainer_method":"La implementación usada no posee el método getContainer.","getmapimpl_method":"La implementación usada no posee el método getMapImpl.","removepopup_method":"La implementación usada no posee el método removePopup.","no_popup":"No ha especificado ningún popup.","invalid_popup":"El popup especificado no es válido.","no_maxextent":"No ha especificado ningún maxExtent","must_be_document":"doc.nodeType debe ser de tipo DOCUMENT","no_service_response":"No hubo respuesta del servicio","no_kml_response":"No hubo respuesta del KML","no_getfeature_response":"No hubo respuesta en la operación GetFeature","no_map":"No ha especificado ningun mapa","layerswitcher_method":"La implementación usada no puede crear controles LayerSwitcher","location_method":"La implementación usada no puede crear controles Location","wms_method":"La implementación usada no puede crear capas WMS","geotiff_method":"La implementación usada no puede crear capas GeoTIFF","mapLibre_method":"La implementación usada no puede crear capas MapLibre","generic_method":"La implementación usada no puede crear capas Genéricas","wmts_method":"La implementación usada no puede crear capas WMTS","no_impl":"No se ha especificado ninguna implementación","no_container":"No ha especificado ningún parámetro contenedor","no_id_container":"No existe ningún contenedor con el id especificado","no_center":"No ha especificado ningún parámetro center","no_attr_name":"No se ha especificado el nombre del atributo","no_empty":"El nombre de atributo no puede ser nulo. Especifique cadena o función","invalid_center_param":"El formato del parámetro center no es correcto","invalid_maxextent_param":"El formato del parámetro maxExtent no es correcto","invalid_resolutions_param":"El formato del parámetro resolutions no es correcto","invalid_zoom_param":"El formato del parámetro zoom no es correcto","min_gt_max":"No puede establecerse un radio mínimo mayor que el máximo.","max_lt_min":"No puede establecerse un radio máximo menor que el mínimo.","no_geojson":"No se ha especificado ningun GeoJSON","unsupported_lang":"Se ha establecido un idioma sin soporte","mbtilesvector_method":"La implementación usada no puede crear capas MBTilesVector","mbtiles_method":"La implementación usada no puede crear capas MBTiles","no_source":"Fuente no especificada.","addmbtiles_method":"La implementación usada no posee el método addMBTilesVector.","removembtiles_method":"La implementación usada no posee el método removeMBTilesVector.","browser_audio":"Su navegador no soporta el elemento de audio","browser_video":"Su navegador no soporta el elemento de video","versionError":"La capa [replace1] de tipo [replace2] no soporta la versión.","sldBODYError":"La capa [replace1] de tipo [replace2] no soporta SLD_BODY","styleError":"La capa [replace1] de tipo [replace2] no soporta STYLE","formatError":"La capa [replace1] de tipo [replace2] no soporta FORMAT","file_size":"El fichero seleccionado sobrepasa el máximo de 20 MB permitido.","file_load":"Error al cargar el fichero.","no_geoms":"No se han detectado geometrías en este fichero.","file_load_correct":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","file_extension":"No se ha insertado una extensión de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX, GML y GeoJSON."}}');var o=r(81971),a=r(38234),s={translations:{en:n,es:i},lang:"es"},l=function(e,t){s.translations[e]=t},u=function(e){return"es"===e?(s.translations[e].attributions=a.Z.attributions.esAttributions,s.translations[e].backimglayer=a.Z.backimglayer.esBackimglayer,s.translations[e].beautytoc=a.Z.beautytoc.esBeautytoc,s.translations[e].buffer=a.Z.buffer.esBuffer,s.translations[e].calendar=a.Z.calendar.esCalendar,s.translations[e].comparators=a.Z.comparators.esComparators,s.translations[e].comparepanel=a.Z.comparepanel.esComparepanel,s.translations[e].contactlink=a.Z.contactlink.esContactlink,s.translations[e].fulltoc=a.Z.fulltoc.esFulltoc,s.translations[e].geometrydraw=a.Z.geometrydraw.esGeometrydraw,s.translations[e].georefimage=a.Z.georefimage.esGeorefimage,s.translations[e].georefimage2=a.Z.georefimage2.esGeorefimage2,s.translations[e].help=a.Z.help.esHelp,s.translations[e].iberpixcompare=a.Z.iberpixcompare.esIberpixcompare,s.translations[e].ignsearch=a.Z.ignsearch.esIgnsearch,s.translations[e].ignsearchlocator=a.Z.ignsearchlocator.esIgnsearchlocator,s.translations[e].incicarto=a.Z.incicarto.esIncicarto,s.translations[e].infocatastro=a.Z.infocatastro.esInfocatastro,s.translations[e].infocoordinates=a.Z.infocoordinates.esInfocoordinates,s.translations[e].information=a.Z.information.esInformation,s.translations[e].lyrcompare=a.Z.lyrcompare.esLyrcompare,s.translations[e].layerswitcher=a.Z.layerswitcher.esLayerswitcher,s.translations[e].measurebar=a.Z.measurebar.esMeasurebar,s.translations[e].mirrorpanel=a.Z.mirrorpanel.esMirrorpanel,s.translations[e].mousesrs=a.Z.mousesrs.esMousesrs,s.translations[e].popup=a.Z.popup.esPopup,s.translations[e].predefinedzoom=a.Z.predefinedzoom.esPredefinedzoom,s.translations[e].printermap=a.Z.printermap.esPrintermap,s.translations[e].printviewmanagement=a.Z.printviewmanagement.esPrintviewmanagement,s.translations[e].queryattributes=a.Z.queryattributes.esQueryattributes,s.translations[e].rescale=a.Z.rescale.esRescale,s.translations[e].selectiondraw=a.Z.selectiondraw.esSelectiondraw,s.translations[e].selectionzoom=a.Z.selectionzoom.esSelectionzoom,s.translations[e].sharemap=a.Z.sharemap.esSharemap,s.translations[e].stylemanager=a.Z.stylemanager.esStylemanager,s.translations[e].timeline=a.Z.timeline.esTimeline,s.translations[e].toc=a.Z.toc.esToc,s.translations[e].topographicprofile=a.Z.topographicprofile.esTopographicprofile,s.translations[e].transparency=a.Z.transparency.esTransparency,s.translations[e].vectors=a.Z.vectors.esVectors,s.translations[e].viewhistory=a.Z.viewhistory.esViewhistory,s.translations[e].xylocator=a.Z.xylocator.esXylocator,s.translations[e].zoomextent=a.Z.zoomextent.esZoomextent,s.translations[e].zoompanel=a.Z.zoompanel.esZoompanel,s.translations[e].viewshed=a.Z.viewshed.esViewshed,s.translations[e].viewmanagement=a.Z.viewmanagement.esViewmanagement,s.translations[e].locator=a.Z.locator.esLocator,s.translations[e].locatorscn=a.Z.locatorscn.esLocatorscn,s.translations[e].vectorsmanagement=a.Z.vectorsmanagement.esVectorsmanagement):"en"===e&&(s.translations[e].attributions=a.Z.attributions.enAttributions,s.translations[e].backimglayer=a.Z.backimglayer.enBackimglayer,s.translations[e].beautytoc=a.Z.beautytoc.enBeautytoc,s.translations[e].buffer=a.Z.buffer.enBuffer,s.translations[e].calendar=a.Z.calendar.enCalendar,s.translations[e].comparators=a.Z.comparators.enComparators,s.translations[e].comparepanel=a.Z.comparepanel.enComparepanel,s.translations[e].contactlink=a.Z.contactlink.enContactlink,s.translations[e].fulltoc=a.Z.fulltoc.enFulltoc,s.translations[e].geometrydraw=a.Z.geometrydraw.enGeometrydraw,s.translations[e].georefimage=a.Z.georefimage.enGeorefimage,s.translations[e].georefimage2=a.Z.georefimage2.enGeorefimage2,s.translations[e].help=a.Z.help.enHelp,s.translations[e].iberpixcompare=a.Z.iberpixcompare.enIberpixcompare,s.translations[e].ignsearch=a.Z.ignsearch.enIgnsearch,s.translations[e].ignsearchlocator=a.Z.ignsearchlocator.enIgnsearchlocator,s.translations[e].incicarto=a.Z.incicarto.enIncicarto,s.translations[e].infocatastro=a.Z.infocatastro.enInfocatastro,s.translations[e].infocoordinates=a.Z.infocoordinates.enInfocoordinates,s.translations[e].information=a.Z.information.enInformation,s.translations[e].lyrcompare=a.Z.lyrcompare.enLyrcompare,s.translations[e].layerswitcher=a.Z.layerswitcher.enLayerswitcher,s.translations[e].measurebar=a.Z.measurebar.enMeasurebar,s.translations[e].mirrorpanel=a.Z.mirrorpanel.enMirrorpanel,s.translations[e].mousesrs=a.Z.mousesrs.enMousesrs,s.translations[e].popup=a.Z.popup.enPopup,s.translations[e].predefinedzoom=a.Z.predefinedzoom.enPredefinedzoom,s.translations[e].printermap=a.Z.printermap.enPrintermap,s.translations[e].rescale=a.Z.rescale.enRescale,s.translations[e].selectiondraw=a.Z.selectiondraw.enSelectiondraw,s.translations[e].queryattributes=a.Z.queryattributes.enQueryattributes,s.translations[e].selectionzoom=a.Z.selectionzoom.enSelectionzoom,s.translations[e].sharemap=a.Z.sharemap.enSharemap,s.translations[e].stylemanager=a.Z.stylemanager.enStylemanager,s.translations[e].timeline=a.Z.timeline.enTimeline,s.translations[e].toc=a.Z.toc.enToc,s.translations[e].topographicprofile=a.Z.topographicprofile.enTopographicprofile,s.translations[e].transparency=a.Z.transparency.enTransparency,s.translations[e].vectors=a.Z.vectors.enVectors,s.translations[e].viewhistory=a.Z.viewhistory.enViewhistory,s.translations[e].xylocator=a.Z.xylocator.enXylocator,s.translations[e].zoomextent=a.Z.zoomextent.enZoomextent,s.translations[e].zoompanel=a.Z.zoompanel.enZoompanel,s.translations[e].viewshed=a.Z.viewshed.enViewshed,s.translations[e].viewmanagement=a.Z.viewmanagement.enViewmanagement,s.translations[e].locator=a.Z.locator.enLocator,s.translations[e].locatorscn=a.Z.locatorscn.enLocatorscn,s.translations[e].vectorsmanagement=a.Z.vectorsmanagement.enVectorsmanagement),s.translations[e]},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.lang;return u(t)[e]},f=function(e){Object.keys(s.translations).includes(e)||(0,o.Z)(c("exception").unsupported_lang),s.lang=e},h=function(){return s.lang}},38234:(e,t,r)=>{"use strict";r.d(t,{Z:()=>se});const n=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution.","mode":"La opción \'mode\' no ha sido establecida correctamente. Consejo: {mode: 1 | 2 | 3}.","type":"La opción \'type\' no ha sido establecida. Cuando la opción \'url\' es usada el plugin necesita la opción \'type\'. Valores = geojson | kml | topojson.","layer_name":"La opción \'layerName\' no ha sido establecida. Cuando la opción \'url\' es usada el plugin necesita la opción \'layerName\'.","attribution_obsolete":"Mensaje para el desarrollador: M.plugin.Attributions ha quedado obsoleto, utilice en su lugar el control Attributions"},"attribution":"atribución","tooltip":"Reconocimientos"}'),i=JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls.","mode":"Options mode is bad setted. Tip: {mode: 1 | 2 | 3}.","type":"Missing \'type\' options. When \'url\' option is setted the plugin needs \'type\' option. Values = geojson | kml | topojson.","layer_name":"Missing \'layerName\' options. When \'url\' option is setted the plugin needs \'layerName\' option.","attribution_obsolete":"Developer message: M.plugin.Attributions has been deprecated, use the Attributions control instead"},"attribution":"attribution","tooltip":"Acknowledgments"}'),o=JSON.parse('{"textHelp":{"help1":"Mapas y cartografía del Instituto Geográfico Nacional y el Sistema Cartográfico Nacional utilizadas como capas de fondo.","help2":"Muestra una serie de capas preconfiguradas. Se trata de servicios WMTS que tienen un gran rendimiento en la visualización y que están disponibles como capa base para todo el territorio nacional.","help3":"Mapa. Servicio Mapa Ráster del Sistema Cartográfico Nacional (Mapa de España(ME) 1: 2.000.000, ME 1: 1.250.000, ME500 1: 500.000, Mapa Provincial 1: 200.000 (MP200), Mapa Topográfico Nacional 1: 50.000 (MTN50), MTN25 1: 25.000).","help4":"Imagen. Servicio Ortofotos máxima actualidad PNOA del Sistema Cartográfico Nacional (Sentinel 2, Ortofotos PNOA).","help5":"Callejero. Servicio Mapa Base del Sistema Cartográfico Nacional (Callejero Cartociudad).","help6":"Híbrido. Combinación Servicio Ortofotos máxima actualidad del PNOA y Servicio Mapa Base del Sistema Cartográfico Nacional.","help7":"LiDAR. (Relieve) Servicio LiDAR del Sistema Cartográfico Nacional.","help8":"Ocupación del suelo. Servicio Ocupación del suelo del Sistema Cartográfico Nacional (SIOSE).","help9":"Mapas Históricos Cartografía correspondiente a las primeras ediciones del Mapa Topográfico Nacional escala 1: 50.000","help10":"La capa activa se muestra con un recuadro azul oscuro. Para dejar la zona de mapa sin ninguna capa de fondo haga clic sobre la capa activa, lo que hará que deje de mostrarse el recuadro azul oscuro y la capa en el mapa. También puede utiliza la opción \'Ninguna\'.","help11":"Sólo es posible visualizar una única capa a la vez. Si quiere combinar más de una de estas capas, debe cargarse desde la herramienta Capas, añadiendo la URL del servicio o seleccionándola entre las capas preconfiguradas (se ha dispuesto un apartado a tal efecto con el nombre \'Capas de Fondo\'). Puede consultar las URL para estos servicios, y otras más, en el portal web de la IDEE en el apartado","help12":"Directorio de Servicios."},"tooltip":"Capas de fondo","none":"Ninguna"}'),a=JSON.parse('{"textHelp":{"help1":"Maps and cartography from the National Geographic Institute and the National Cartographic System used as background layers.","help2":"Shows a series of preconfigured layers. These are WMTS services that have great visualization performance and are available as a base layer for the entire national territory.","help3":"Map. Raster Map Service of the National Cartographic System (Map of Spain (ME) 1: 2,000,000, ME 1: 1,250,000, ME500 1: 500,000, Provincial Map 1: 200,000 (MP200), Topographic Map National 1: 50,000 (MTN50), MTN25 1: 25,000).","help4":"Image. Maximum current PNOA Orthophotos Service of the National Cartographic System (Sentinel 2, PNOA Ortophotos).","help5":"Street. Base Map Service of the National Cartographic System (Cartociudad Street).","help6":"Hybrid. Combination of the maximum current Orthophoto Service of the PNOA and Base Map Service of the National Cartographic System.","help7":"LiDAR. (Relief) LiDAR Service of the National Cartographic System.","help8":"Land occupation. Land occupation service of the National Cartographic System (SIOSE).","help9":"Historical Maps Cartography corresponding to the first editions of the National Topographic Map scale 1: 50,000","help10":"The active layer is shown with a dark blue box. To leave the map area without any background layer, click on the active layer, which will stop the dark blue box from showing and the layer in the map. You can also use the \'None\' option.","help11":"It is only possible to view a single layer at a time. If you want to combine more than one of these layers, it must be loaded from the Layers tool, adding the URL of the service or selecting it among the preconfigured layers (a section has been provided for this purpose with the name \'Background Layers\'). You can consult the URLs for these services, and others, on the IDEE web portal in the section","help12":"Service Directory."},"tooltip":"Background layers","none":"None"}'),s=JSON.parse('{"exception":{"cobertura":"Comprobando cobertura en la zona...","nocobertura":"Esta capa no tiene cobertura en esta zona"},"tooltip":"Capas Adicionales","layers":"Capas Adicionales","vectoriallayers":"Capas vectoriales","ortofotos":"Ortofotos","warning":"AVISO"}'),l=JSON.parse('{"exception":{"cobertura":"Checking coverage in the area...","nocobertura":"This layer has no coverage in this area"},"tooltip":"Additional Layers","layers":"Additional Layers","vectoriallayers":"Vectorial layers","ortofotos":"Orthophotos","warning":"WARNING"}'),u=JSON.parse('{"exception":{"buffer_obsolete":"Mensaje para el desarrollador: M.plugin.Buffer ha quedado obsoleto, utilice en su lugar M.plugin.VectorsManagement"},"tooltip":"Área de influencia","tooltip_point":"Pintar punto","tooltip_line":"Pintar línea","tooltip_polygon":"Pintar polígono","tooltip_remove":"Eliminar","title_popup":"ÁREA DE INFLUENCIA","unit_m":"Metros","unit_km":"Kilómetros","exception_layer":"La implementación usada no puede crear capas BufferLayer","exception_control":"La implementación usada no puede crear controles influenceareaControl"}'),c=JSON.parse('{"exception":{"buffer_obsolete":"Developer message: M.plugin.Buffer has been deprecated, use the M.plugin.VectorsManagement instead"},"tooltip":"Influence Area","tooltip_point":"Draw Point","tooltip_line":"Draw Line","tooltip_polygon":"Draw Polygon","tooltip_remove":"Remove","title_popup":"INFLUENCE AREA","unit_m":"Metres","unit_km":"Kilometres","exception_layer":"The implementation used cannot create BufferLayer layers","exception_control":"The implementation used cannot create influenceareaControl controls"}'),f=JSON.parse('{"tooltip":"Cita previa","exception_calendarcontrol":"La implementación usada no puede crear controles CalendarControl"}'),h=JSON.parse('{"tooltip":"Previous appointment","exception_calendarcontrol":"The implementation used cannot create CalendarControl controls"}'),p=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles comparatorsControl","no_controls":"El plugin Comparators necesita activar al menos un control.","mirrorDefaultCompareViz":"El parámetro modeVizTypes no contiene el valor de defaultCompareViz","mirrorModeVizTypes":"modeVizTypes no tiene un valor válido","fourLayers":"El número de capas es insuficiente para aplicar el efecto.","notLayers":"El número de capas es insuficiente para aplicar el efecto.","errorPlugin":"Error al cargar el plugin","errorObjectLayer":"no se puede cargar las capas como objeto","errorLinkUrl":"Falta por incluir el link del plugin","errorScriptUrl":"Falta por incluir el script del plugin","errorScriptOrLinkUrl":"Falta por incluir el script o link de un plugin","errorURL":"no se puede compartir porque no tiene URL","errorUrlMBTiles":"La capa de tipo MBTiles o MBTilesVector no tiene tiene URL y no se puede compartir","errorGeneric":"La capa de tipo GenericRaster y GenericVector no se puede compartir"},"textHelp":{"help1":"La extensión de comparación permite distintas opciones para comparar mapas y capas de un visualizador.","help2":"Las opciones de comparación son personalizables, por lo que puede que no todos lso visualizadores tengan las mismas opciones.","help3":"La primera opción es la comparación en espejo.","help4":"Con esta opción se abren mapas sincronizados en una misma ventana. Desde el panel de la extensión, se pueden seleccionar cómo y cuantos cuadrantes de comparación se quieren y las capas de comparación a mostrar en cada uno de ellos.","help5":"La segunda opción es la comparación en ventanas  sincronizadas.","help6":"Esta opción es ideal para entornos con más de una pantallas, permitiendo tener una en cada monitor con mapas sincronizados entre sí. Permite abrir tantas ventanas sincronizadas se deseen y cerrar todas desde el panel de la extensión.","help7":"La tercera opción es la comparación en cortina.","help8":"Esta opción, al igual que la primera, permite elegir entre qué capas se quieren comparar en cada división del mapa y el tipo de división del mapa a comparar.","help9":"Y la cuarta opción, la comparación en lupa.","help10":"Permite comparar mediante una lupa la capa seleccionada en el panel de la extensión.","help11":"Con el comando Ctrl+Shift+Enter  se puede dejar fija la comparación y mover el mapa.","help12":"La información relevante a la extensión y su posible parametrización está documentada en","help13":"El ejemplo de uso de sus parámetros puede comprobarse en"},"nolayertext":"No hay capas de comparación","title":"Panel de Comparadores","play":"Iniciar","pause":"Parar","intervals_error":"Los intervalos no fueron definidos correctamente","tooltipLyr":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","tooltip_deactivatecurtain":"Desactivar cortina","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyrLeftSelect_tooltip":"Selecciona la capa de la izquierda","lyrRightSelect_tooltip":"Selecciona la capa de la derecha","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"El número de capas es insuficiente para aplicar el efecto","repeated_layers":"Las capas seleccionadas no se pueden repetir","tooltipMirrorpanel":"Comparador de mapas espejo","titleMirrorpanel":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","tooltipTransparency":"Transparencia","transparency":"Transparencia","errorLayer":"Transparency: No se ha especificado una capa válida sobre la que aplicar el efecto","freeze":"Inmovilizar cursor","unfreeze":"liberar cursor","activate_spyeye":"Activar Spy Eye","deactivate_spyeye":"Desactivar Spy Eye","tooltip":"Comparador de mapas","inputTransparentRadius":"Modifica la opacidad del radio","selectTransparentRadius":"Selector de capas, se le aplicará la opacidad del radio","tooltip_void":"Vista de un solo mapa","selectLayers":"Selector de capas","openWindow":"Abrir nueva venta","closeAll":"Cerrar todas las ventanas","tooltipWindSync":"Comparador de capas síncrono","selector":"Ninguna capa"}'),d=JSON.parse('{"exception":{"impl":"The implementation used cannot create comparatorsControl controls","no_controls":"The Comparators plugin needs to activate at least one control.","mirrorDefaultCompareViz":"modeVizTypes parameter does not contain the value of defaultCompareViz","mirrorModeVizTypes":"modeVizTypes does not have a valid value","fourLayers":"The number of layers is insufficient to apply the effect","notLayers":"The number of layers is insufficient to apply the effect","errorPlugin":"Error loading the plugin","errorObjectLayer":"Layers cannot be loaded as objects","errorLinkUrl":"Missing plugin link","errorScriptUrl":"Missing plugin script","errorScriptOrLinkUrl":"Missing plugin script or link","errorURL":"Cannot be shared because it does not have a URL","errorUrlMBTiles":"The MBTiles or MBTilesVector layer does not have a URL and cannot be shared","errorGeneric":"The GenericRaster and GenericVector layer cannot be shared"},"textHelp":{"help1":"The compare extension allows different options for comparing maps and layers in a viewer.","help2":"Comparison options are customizable, so not all viewers may have the same options.","help3":"The first option is mirror comparison.","help4":"With this option, synchronized maps are opened in the same window. From the extension panel, you can select how and how many comparison quadrants you want and the comparison layers to show in each of them.","help5":"The second option is the comparison in synchronized windows.","help6":"This option is ideal for environments with more than one screen, allowing you to have one on each monitor with maps synchronized with each other. It allows you to open as many synchronized windows as you want and close them all from the extension panel.","help7":"The third option is the curtain comparison.","help8":"This option, like the first, allows you to choose which layers you want to compare in each map division and the type of map division to compare.","help9":"And the fourth option, the magnifying glass comparison.","help10":"Allows you to compare the selected layer in the extension panel using a magnifying glass.","help11":"With the command Ctrl+Shift+Enter you can leave the comparison fixed and move the map.","help12":"The information relevant to the extension and its possible parameterization is documented in","help13":"The example of using its parameters can be checked in"},"mirrorpanelParams_tooltip":"mirrorpanelParams_tooltip","lyrcompareParams_tooltip":"lyrcompareParams_tooltip","transparencyParams_tooltip":"transparencyParams_tooltip","nolayertext":"No Layout","title":"Comparators","play":"Play","pause":"Pause","intervals_error":"The intervals were not defined correctly","tooltipLyr":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","tooltip_deactivatecurtain":"Deactivate curtain","layers":"Layers","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyrLeftSelect_tooltip":"Select layer on the left","lyrRightSelect_tooltip":"Select layer on the right","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"The number of layers is insufficient to apply the effect","repeated_layers":"Selected layers cannot be repeated","tooltipMirrorpanel":"Mirror Comparison","titleMirrorpanel":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","tooltipTransparency":"Transparency","transparency":"Transparency","errorLayer":"Transparency: No valid layer specified on which to apply the effect","freeze":"freeze cursor","unfreeze":"defrost cursor","activate_spyeye":"SpyEye ON","deactivate_spyeye":"SpyEye OFF","tooltip":"Compare panel","inputTransparentRadius":"Modify the opacity of the radius","selectTransparentRadius":"Layer selector, the radius opacity will be applied","tooltip_void":"Single map view","selectLayers":"Layers selected","openWindow":"Open new sale","closeAll":"Close all windows","tooltipWindSync":"Synchronous layer comparator","selector":"None"}'),y=JSON.parse('{"tooltip":"Panel de Comparadores","title":"Panel de Comparadores","play":"Iniciar","pause":"Parar","exception":"La implementación usada no puede crear controles ComparepanelControl","intervals_error":"Los intervalos no fueron definidos correctamente","tooltipLyr":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","tooltip_deactivatecurtain":"Desactivar cortina","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyrLeftSelect_tooltip":"Selecciona la capa de la izquierda","lyrRightSelect_tooltip":"Selecciona la capa de la derecha","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"El número de capas es insuficiente para aplicar el efecto","repeated_layers":"Las capas seleccionadas no se pueden repetir","tooltipMirrorpanel":"Comparador de mapas espejo","titleMirrorpanel":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","tooltipTimeline":"Línea de tiempo","titleTimeline":"Línea de tiempo","tooltipTransparency":"Transparencia","transparency":"Transparencia","errorLayer":"Transparency: No se ha especificado una capa válida sobre la que aplicar el efecto","nolayertext":"Ninguna capa","freeze":"Inmovilizar cursor","unfreeze":"liberar cursor","activate_spyeye":"Activar Spy Eye","deactivate_spyeye":"Desactivar Spy Eye","comparepanel_obsolete":"Mensaje para el desarrollador: M.plugin.Comparepanel ha quedado obsoleto, utilice en su lugar M.plugin.Comparators"}'),g=JSON.parse('{"tooltip":"Comparepanel","title":"Comparepanel","play":"Play","pause":"Pause","exception":"The implementation used cannot create comparepanelControl controls","intervals_error":"The intervals were not defined correctly","tooltipLyr":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","tooltip_deactivatecurtain":"Deactivate curtain","layers":"Layers","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyrLeftSelect_tooltip":"Select layer on the left","lyrRightSelect_tooltip":"Select layer on the right","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"The number of layers is insufficient to apply the effect","repeated_layers":"Selected layers cannot be repeated","tooltipMirrorpanel":"Mirror Comparison","titleMirrorpanel":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","tooltipTimeline":"Timeline","titleTimeline":"Timeline","tooltipTransparency":"Transparency","transparency":"Transparency","errorLayer":"Transparency: No valid layer specified on which to apply the effect","nolayertext":"No layer selected","freeze":"freeze cursor","unfreeze":"defrost cursor","activate_spyeye":"SpyEye ON","deactivate_spyeye":"SpyEye OFF","comparepanel_obsolete":"Developer Message: M.plugin.Comparepanel has been deprecated, please use M.plugin.Comparators instead"}'),m=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution."},"textHelp":{"help1":"En la parte superior puede encontrar enlaces a otros visualizadores especializados del IGN que pueden resultar de su interés.","help2":"Descargas CNIG.","help3":"Herramienta para la descarga gratuita de ficheros digitales de carácter geográfico generados por la Dirección General del Instituto Geográfico Nacional (IGN).","help4":"Comparador PNOA.","help5":"Permite consultar y comparar las ortofotos de diferentes años, desde su inicio en el año 2004 hasta la actualidad, así como comparar esta información con otras fuentes.","help6":"Visualizador 3D.","help7":"Servicio capaz de mostrar el relieve mediante anaglifos en 3D. Son necesarios unos gafas para anáglifos con colores rojo y azules.","help8":"Fototeca.","help9":"Visualizar, imprimir (en formato PDF) y solicitar certificados de fotogramas originales de vuelos fotogramétricos realizados sobre España.","help10":"En la parte inferior tiene un enlace directo a las redes sociales del IGN y correo electrónico de consulta consulta@cnig.es a través de las cuales puede mantenerse al día de la actualidad del IGN además de contactarnos directamente.","help11":"La información relevante a la extensión y su posible parametrización está documentada en","help12":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Enlaces y contacto IGN","title":"Enlaces y contacto","links":{"downloads":"Descargas CNIG","compare":"Comparador PNOA","3d":"Visualizador 3D","photo":"Fototeca"},"accessibility":{"webLinks":"Links to IGN websites","socialMedia":"Links to IGN\'s social networks"}}'),_=JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls."},"textHelp":{"help1":"At the top you can find links to other specialized IGN viewers that may be of interest to you.","help2":"CNIG downloads","help3":"CNIG downloads. Tool for free downloading digital files of a geographical nature generated by the General Directorate of the National Geographic Institute (IGN).","help4":"PNOA comparator.","help5":"Allows you to consult and compare orthophotos from different years, from its beginning in 2004 to the present, as well as compare this information with other sources.","help6":"3D viewer.","help7":"Service capable of showing the relief using anaglyphs in 3D. Glasses for anaglyphs with red and blue colors are necessary.","help8":"Photo library.","help9":"View, print (in PDF format) and request certificates of original frames from photogrammetric flights carried out over Spain.","help10":"At the bottom you have a direct link to the IGN social networks and consultation email consulta@cnig.es through which you can stay up to date with IGN news in addition to contacting us directly.","help11":"The information relevant to the extension and its possible parameterization is documented in","help12":"The example of use of its parameters can be checked in"},"tooltip":"IGN links and contact","title":"Links and contact","links":{"downloads":"CNIG Downloads","compare":"PNOA Comparator","3d":"3D Display","photo":"Aerial Photography Viewer"},"accessibility":{"webLinks":"Enlaces a sitios web del IGN","socialMedia":"Enlaces a las redes sociales del IGN"}}'),v=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles FullTOCControl.","extent":"No se puede obtener la extensión de la capa","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","only_http":"Sólo se permiten servicios http","only_https":"Sólo se permiten servicios https","no_http_https":"No se permiten servicios http ni https","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","select_layer":"Debes seleccionar al menos una capa","no_results":"No se han encontrado capas en este servicio","codsi":"Ha ocurrido un error al consultar el catálogo CODSI","codsi_no_results":"No hay resultados para su búsqueda","fulltoc_obsolete":"Mensaje para el desarrollador: M.plugin.FullTOC ha quedado obsoleto, utilice en su lugar M.plugin.Layerswitcher"},"tooltip":"Capas","info":"Información","layer_info":"Información de la capa","configure_layer":"Configurar capa","close":"Cerrar","load_ext_services":"Cargar capas de información geográfica","layers":"Capas","add_service":"Añadir servicio","show_hide":"Mostrar/Ocultar leyenda","zoom":"Zoom a la capa","info_metadata":"Ver información","change_style":"Cambiar estilo","remove_layer":"Eliminar capa del mapa","select_style":"Selecciona un estilo","change":"Cambiar","url_service":"Incluir URL del servicio a cargar","query":"Consultar","loaded_services":"Capas de información geográfica","codsi_services":"Catálogo de Servicios INSPIRE (CODSI)","clean":"Limpiar búsqueda","availables":"Listado de algunas capas disponibles","title":"Título","name":"Nombre","abstract":"Resumen","provider":"Proveedor","service_info":"Información del servicio (Capabilities)","download_center":"Centro de descargas","add":"Añadir","drag_drop":"Arrastre y suelte para cambiar el orden de visualización","see_more":"Mostrar metadato del conjunto de datos","see_less":"Ocultar metadato del conjunto de datos","service":"Servicio","metadata_abstract":"Resumen (metadato)","responsible":"Responsable","access_constraints":"Restricciones de acceso","use_constraints":"Restricciones de uso","online_resources":"Recursos online","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","filter_results":"Filtrar resultados","clean_filter":"Limpiar filtro","filter_text":"Texto a buscar","metadata":"Metadatos","see_more_layer":"Ver más información de la capa","see_more_service":"Ver más información del servicio","select_service":"Selecciona una capa","amount_results":"Obtener ","amount_results_2":" elementos","bbox-select":"Solo de la extensión actual","no-limit":"Obtener todos los elementos","custom_query":"Consulta personalizada","no_results":"No se han encontrado resultados","search":"Buscar","yes":"Sí","no":"No","filters":"Filtros","other_filters":"Otros filtros","id_filter":"Filtrar por ID","warning":"ADVERTENCIA: No se recomiendan límites altos","add_btn":"Añadir","custom_query_btn":"Más filtros","apply_btn":"Aplicar","style":"Estilo","default_style":"Estilo predeterminado","selected":"seleccionado","custom_query_warning":"ATENCIÓN: La opción buscar por «Más filtros» se basa en un estándar en estado borrador. El resultado de la consulta puede no ser el deseado.","check_results":"Comprobar resultados","results_1_plural":"Se han encontrado ","results_2_plural":" features","results_1_singular":"Se ha encontrado ","results_2_singular":" feature"}'),A=JSON.parse('{"exception":{"impl":"The implementation used cannot create FullTOCControl.","extent":"Cannot get the extent of the layer","capabilities":"An error has occurred in obtaining the GetCapabilities document","only_http":"Only http services are allowed","only_https":"Only https services are allowed","no_http_https":"No http or https services allowed","valid_url":"You must provide a valid URL","empty":"The fields are empty","select_layer":"You must select at least one layer","no_results":"No layers found in this service","codsi":"An error occurred while consulting the CODSI catalog","codsi_no_results":"There are no results for your search","fulltoc_obsolete":"Message to the developer: M.plugin.FullTOC has been deprecated, please use M.plugin.Layerswitcher instead"},"tooltip":"Layers","info":"Information","layer_info":"Layer information","configure_layer":"Configure layer","close":"Close","load_ext_services":"Load geographic information layers","layers":"Layers","add_service":"Add service","show_hide":"Show/Hide legend","zoom":"Zoom to the layer","info_metadata":"View information","change_style":"Change style","remove_layer":"Remove layer from map","select_style":"Select a style","change":"Change","url_service":"Include URL of the service to load","query":"Consult","loaded_services":"Preloaded geographic information layers","codsi_services":"INSPIRE Services Catalog (CODSI)","clean":"Clean search","availables":"List of some available layers","title":"Title","name":"Name","abstract":"Abstract","provider":"Provider","service_info":"Service information (Capabilities)","download_center":"Download center","add":"Add","drag_drop":"Drag and drop to change display order","see_more":"Show dataset metadata","see_less":"Hide dataset metadata","service":"Service","metadata_abstract":"Abstract (metadata)","responsible":"Responsible","access_constraints":"Access constraints","use_constraints":"Use constraints","online_resources":"Online resources","show_service_info":"Show service information","hide_service_info":"Hide service information","filter_results":"Filter results","clean_filter":"Clean filter","filter_text":"Text to search","metadata":"Metadata","see_more_layer":"View more information about the layer (Metadata)","see_more_service":"View more service information (Metadata)","select_service":"Select layer","amount_results":"Get ","amount_results_2":" elements","bbox-select":"Find features within rendered map","no-limit":"Get all results","custom_query":"Custom query","no_results":"No results found","search":"Search","yes":"Sí","no":"No","filters":"Filters","other_filters":"Other filters","id_filter":"Filter by ID","warning":"WARNING: High limits are not recommended","add_btn":"Add","custom_query_btn":"More filters","apply_btn":"Apply","style":"Style","default_style":"Default style","selected":"selected","custom_query_warning":"WARNING: Filtering by \\"More filters\\" it is based on a draft standard. The result of the query may not be as desired.","check_results":"Check results","results_1_plural":"","results_2_plural":" features have been found.","results_1_singular":"","results_2_singular":" feature has been found."}'),b=JSON.parse('{"exception":{"emptylater":"La capa de dibujo está vacía.","geometrianoencontrar":"Geometría no reconocida.","formatocoord":"Las coordenadas introducidas no tienen el formato correcto.","introduzcoord":"No se han introducido las coordenadas correctamente.","errorfichero":"Error al cargar el fichero.","nodetectado":"No se han detectado geometrías en este fichero.","comprobar":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","insertado":"No se ha insertado una extensión de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX y GeoJSON.","maxfichero":"El fichero seleccionado sobrepasa el máximo de 20 MB permitido.","ficherosel":"No se ha seleccionado formato de descarga.","obsolete":"Mensaje para el desarrollador: M.plugin.GeometryDraw ha quedado obsoleto, utilice en su lugar M.plugin.VectorsManagement"},"tooltip":"Dibujo de geometrías","punto":"Punto","coordenadas":"Punto por coordenadas","linea":"Línea","poligono":"Polígono","texto":"Texto","editgeometria":"Editar geometría","descgeometria":"Descargar geometrías","subircapa":"Subir capa","limpiar":"Limpiar","color":"Color","grosor":"Grosor","borrar":"Borrar geometría","dibujar":"Dibujar geometría","descargar":"Descargar","sistema":"Sistema de coordenadas","longitud":"Longitud","latitud":"Latitud","fuente":"Fuente","tamaño":"Tamaño","eliminar":"Eliminar texto","ficheros":"Los formatos aceptados son KML, SHP (.zip), GPX y GeoJSON.","seleccionar":"Selecciona el fichero","cargarcapa":"Cargar capa"}'),w=JSON.parse('{"exception":{"emptylater":"The drawing layer is empty.","geometrianoencontrar":"Unrecognized geometry.","formatocoord":"The entered coordinates are not in the correct format.","introduzcoord":"Coordinates are not entered correctly.","errorfichero":"Error loading the file.","nodetectado":"No geometries have been detected in this file.","comprobar":"Error loading the file. Verify that this is the correct file.","insertado":"A permitted file extension has not been inserted. The allowed ones are: KML, SHP (.zip), GPX and GeoJSON.","maxfichero":"The selected file exceeds the maximum of 20 MB allowed","ficherosel":"Download format has not been selected.","obsolete":"Developer message: M.plugin.GeometryDraw has been deprecated, use the M.plugin.VectorsManagement instead"},"tooltip":"Geometry drawing","punto":"Point","coordenadas":"Coordinate point","linea":"Line","poligono":"Polygon","texto":"Text","editgeometria":"Edit geometry","descgeometria":"Download geometry","subircapa":"Import layer","limpiar":"Clean","color":"Color","grosor":"Stroke","borrar":"Delete geometry","dibujar":"Draw geometry","descargar":"Download","sistema":"Coordinate system","longitud":"Longitude","latitud":"Latitude","fuente":"Font","tamaño":"Size","eliminar":"Delete text","ficheros":"The accepted formats are KML, SHP (.zip), GPX and GeoJSON.","seleccionar":"Select file","cargarcapa":"Load layer"}'),E=JSON.parse('{"exception":{"loaderror":"La imagen no ha podido ser cargada.","teselaError":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","printError":"Se ha producido un error en la impresión.","georefimage_obsolete":"Mensaje para el desarrollador: M.plugin.georefimage ha quedado obsoleto, utilice en su lugar M.plugin.PrintViewManagement"},"errorProjectionCapabilities":"La proyeccion seleccionada no está disponible para esta capa base. Por favor elija otra proyección.","printInfo":"Impresión generada a través de Mapea","tooltip":"Descargar Imagen georreferenciada","referenced":"Imagen georreferenciada","projection":"Proyección","downImg":"Descargar imagen","delete":"Borrar","down":"Descargar","title":"Título","notitle":"(Sin título)","keep":"Conservar vista"}'),x=JSON.parse('{"exception":{"loaderror":"The image could not be loaded.","teselaError":"The request has caused an error in printing. < br / > Please try again.","printError":"Printing has failed.","georefimage_obsolete":"Message to the developer: M.plugin.georefimage has been deprecated, please use M.plugin.PrintViewManagement instead"},"errorProjectionCapabilities":"The selected projection is not available for this base layer. Please choose another projection.","printInfor":"Print generated by Mapea","tooltip":"Download Georeferenced image","referenced":"Georeferenced image","projection":"Projection","downImg":"Download image","delete":"Delete","down":"Download","title":"Title","notitle":"(No title)","keep":"Keep view"}'),I=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles Georefimage2","encode_method":"La implementación usada no posee el método encodeLayer","loaderror":"La imagen no ha podido ser cargada.","teselaError":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","printError":"Se ha producido un error en la impresión.","imageError":"No ha podido realizarse la descarga en este momento. Por favor, inténtelo más tarde.","georefimage2_obsolete":"Mensaje para el desarrollador: M.plugin.georefimage2 ha quedado obsoleto, utilice en su lugar M.plugin.PrintViewManagement"},"errorProjectionCapabilities":"La proyeccion seleccionada no está disponible para esta capa base. Por favor elija otra proyección.","printInfo":"Impresión generada a través de Mapea","tooltip":"Descargar Imagen georreferenciada","generating":"Generando imagen georreferenciada","referenced":"Imagen georreferenciada","projection":"Proyección","downImg":"Descargar imagen","delete":"Borrar","down":"Descargar","title":"Título","notitle":"(Sin título)","keep":"Conservar vista","cancel":"Cancelar","accept":"Aceptar","download_modal":"El uso de la información de los productos y servicios de datos geográficos definidos en la <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"https://www.boe.es/boe/dias/2015/12/26/pdfs/BOE-A-2015-14129.pdf\\">Orden FOM/2807/2015</a>, así como sus derivados, conlleva la aceptación por el usuario de las condiciones generales de dicha orden, concretada en la siguiente <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"http://www.ign.es/resources/licencia/Condiciones_licenciaUso_IGN.pdf\\">licencia de uso</a>, compatible con CC-BY 4.0.","use_license":"Licencia de uso","map":"Mapa","pnoa":"Imagen (PNOA)","screen":"Imagen Pantalla"}'),S=JSON.parse('{"exception":{"impl":"The used implementation cannot create Georefimage2 controls","encode_method":"The used implementation does not have the encodeLayer method","loaderror":"The image could not be loaded.","teselaError":"The request has caused an error in printing. < br / > Please try again.","printError":"Printing has failed.","imageError":"The download could not be completed at this time. Please try again later.","georefimage2_obsolete":"Message to the developer: M.plugin.georefimage2 has been deprecated, please use M.plugin.PrintViewManagement instead"},"errorProjectionCapabilities":"The selected projection is not available for this base layer. Please choose another projection.","printInfor":"Print generated by Mapea","tooltip":"Download Georeferenced image","generating":"Generating georeferenced image","referenced":"Georeferenced image","projection":"Projection","downImg":"Download image","delete":"Delete","down":"Download","title":"Title","notitle":"(No title)","keep":"Keep view","cancel":"Cancel","accept":"Accept","download_modal":"The use of the information of the geographic data products and services defined in the <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"https://www.boe.es/boe/dias/2015/12/26/pdfs/BOE-A-2015-14129.pdf\\">Order FOM/2807/2015</a>, as well as its derivatives, entails the acceptance by the user of the general conditions of said order, specified in the following <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"http://www.ign.es/resources/licencia/Condiciones_licenciaUso_IGN.pdf\\">license of use</a>, compatible with CC-BY 4.0.","use_license":"License of use","map":"Map","pnoa":"Image (PNOA)","screen":"Screen Image"}'),C=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles HelpControl."},"textHelp":{"help1":"Esta herramienta permite crear al vuelo una página HTML con la ayuda de los plugins y controles que tengan implementado el método \'getHelp\' para obtener la ayuda de cada uno de ellos.","help2":"Además permite mostrar a la ayuda contenido extra que añada el usuario."},"tooltip":"Ayuda","help":"Ayuda","short_title":"Ayuda API-CNIG","long_title":"Ayuda API-CNIG","tools":"Herramientas","welcome0":"Visualizador realizado con la API-CNIG","welcome1":"API CNIG es una herramienta que permite integrar de una forma muy sencilla un visualizador de mapas interactivo en cualquier página web y configurarlo consumiendo ficheros WMC, servicios WMS, servicios WFS, ficheros KML, etc. Además, provee la capacidad de añadir una gran cantidad de herramientas y controles.","welcome2":"Código API-CNIG","welcome3":"Enlace al repositorio","welcome4":"Galería de plugins","welcome5":"Enlace a la galería de plugins","welcome6":"Enlace a la Wiki de API-CNIG","welcome7":"Galería de ejemplos","welcome8":"Enlace a la galería de ejemplos","welcome9":"Recursos Formativos","welcome10":"Enlace a los recursos formativos","tools1":"La API-CNIG cuenta con una serie de herramientas que permiten interactuar con la información que se ofrece en el visualizador:","tools2":"Los controles son las herramientas que incluye el mapa y que permiten trabajar con él. Por ejemplo, podemos tener un control que dibuje la escala en el mapa, otro que ofrezca una selección de capas base de fondo del mapa, otro que vaya mostrando las coordenadas del cursor, etc.","tools3":"Los plugins o extensiones son funcionalidades que ofrecen utilidades específicas que, a diferencia de los controles básicos, suelen usarse en escenarios concretos, por lo que se separan del core o núcleo principal de la API para no penalizar con su descarga a quien no los necesite.","tools4":"Por ejemplo, se agruparían en un mismo plugin aquellos controles que, aunque ofrezcan funcionalidades atómicas diferentes, funcionen en grupo sobre una misma capa vectorial. De esta manera, se optimiza la gestión de la información y los elementos comunes que comparten.","write":"Escribe aquí","search":"Buscar","pdf":"Descargar en pdf"}'),P=JSON.parse('{"exception":{"impl":"The implementation used cannot create HelpControl controls."},"textHelp":{"help1":"This tool allows you to create an HTML page on the fly with the help of plugins and controls that have implemented the \'getHelp\' method to obtain help from each of them.","help2":"It also allows you to display extra content added by the user to the help."},"tooltip":"Help","help":"Help","short_title":"API-CNIG Help","long_title":"API-CNIG Help","tools":"Tools","welcome0":"Viewer made with the API-CNIG","welcome1":"CNIG API is a tool that allows you to easily integrate an interactive map viewer into any web page and configure it by consuming WMC files, WMS services, WFS services, KML files, etc. In addition, it provides the ability to add a lot of tools and controls.","welcome2":"API-CNIG code","welcome3":"Link to repository","welcome4":"Plugin Gallery","welcome5":"Link to plugin gallery","welcome6":"Link to the API-CNIG Wiki","welcome7":"Example Gallery","welcome8":"Link to gallery of examples","welcome9":"Training Resources","welcome10":"Link to training resources","tools1":"The API-CNIG has a series of tools that allow you to interact with the information offered in the viewer:","tools2":"Controls are the tools that the map includes and that allow you to work with it. For example, we can have a control that draws the scale on the map, another that offers a selection of base layers for the background of the map, another that shows the coordinates of the cursor, etc.","tools3":"Plugins or extensions are functionalities that offer specific utilities that, unlike basic controls, are usually used in specific scenarios, so they are separated from the core or main core of the API so as not to penalize downloading. who doesn\'t need them.","tools4":"For example, those controls that, although offering different atomic functionalities, work as a group on the same vector layer would be grouped in the same plugin. In this way, the management of the information and the common elements that they share are optimized. .","write":"Write here","search":"Search","pdf":"Download as PDF"}'),O=JSON.parse('{"tooltip":"Panel de Comparadores","title":"Panel de Comparadores","play":"Iniciar","pause":"Parar","exception":"La implementación usada no puede crear controles IberpixCompareControl","intervals_error":"Los intervalos no fueron definidos correctamente","tooltipLyr":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyrLeftSelect_tooltip":"Selecciona la capa de la izquierda","lyrRightSelect_tooltip":"Selecciona la capa de la derecha","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"Para utilizar esta opción de comparación, debe tener cargadas tantas capas en la herramienta \\"Capas\\" como divisiones haya seleccionado","tooltipMirrorpanel":"Comparador de mapas espejo","titleMirrorpanel":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","nolayertext":"Ninguna capa","no_coverage":"La capa seleccionada no tiene cobertura en la zona del mapa en la que se encuentra","warning":"Advertencia","print_disabled":"La impresión no está disponible","georef_download_disabled":"La descarga no está disponible","printmap":"Impresión del mapa","georef_download":"Descargar Imagen georreferenciada","no_layer":"Sin capa","iberpixcompare_obsolete":"Mensaje para el desarrollador: M.plugin.IberpixCompare ha quedado obsoleto, utilice en su lugar M.plugin.Comparators"}'),T=JSON.parse('{"tooltip":"IberpixCompare","title":"IberpixCompare","play":"Play","pause":"Pause","exception":"The implementation used cannot create iberpixcompareControl controls","intervals_error":"The intervals were not defined correctly","tooltipLyr":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","layers":"Layers","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyrLeftSelect_tooltip":"Select layer on the left","lyrRightSelect_tooltip":"Select layer on the right","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"In order to use this comparison option, you must have as many layers loaded in the \\"Layers\\" tool as divisions you have selected.","tooltipMirrorpanel":"Mirror Comparison","titleMirrorpanel":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","nolayertext":"No layer selected","no_coverage":"The selected layer does not have coverage in this area of the map","warning":"Warning","print_disabled":"Printing is not available","georef_download_disabled":"Image download is not available","printmap":"Map Printing","georef_download":"Download Georeferenced image","no_layer":"No layer","iberpixcompare_obsolete":"Message to developer: M.plugin.IberpixCompare has been deprecated, please use M.plugin.Comparators instead"}'),M=JSON.parse('{"exception":{"exists":"No existe dirección asociada para esta ubicación.","results":"No se han encontrado resultados","ignsearch_obsolete":"Mensaje para el desarrollador: M.plugin.IGNSearch ha quedado obsoleto, utilice en su lugar M.plugin.Locator"},"searchresult":"searchresult","tooltip":"Búsqueda de lugares","tooltip_input":"Topónimo, dirección o código postal","deleteresults":"Borrar resultados de la búsqueda","obtener":"Obtener dirección en un punto del mapa","direccion":"Topónimo, dirección o código postal","aprox":"Dirección aproximada","exact":"Dirección exacta"}'),k=JSON.parse('{"exception":{"exists":"There is no associated address for this location.","results":"No results found","ignsearch_obsolete":"Message to the developer: M.plugin.IGNSearch has been deprecated, please use M.plugin.Locator instead"},"searchresult":"searchresult","tooltip":"Search places","tooltip_input":"Place name, address or postal code","deleteresults":"Delete search results","obtener":"Get direction at a point on the map","direccion":"Place name, address or postal code","aprox":"Approximate address","exact":"Exact address"}'),R=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles InformationControl.","wrong_coords":"Las coordenadas introducidas no son correctas.","transforming":"Error realizando la transformación.","mapeaerror":"No es posible establecer la conexión con el servidor de Catastro.","noresults":"No se han encontrado resultados","noubi":"No existe dirección asociada para esta ubicación.","wrong_values":"Algún valor introducido no es correcto. Recuerda que los minutos y los segundos tienen que tener un valor entre 0 y 59 y los grados entre 0 y 180.","ignsearchlocator_obsolete":"Mensaje para el desarrollador: M.plugin.IGNSearchLocator ha quedado obsoleto, utilice en su lugar M.plugin.Locator"},"informacion":"Información","informacionCatastral":"Información catastral","errorConexion":"No es posible establecer conexión con el servidor de Catastro.","consultar":"Consultar Catastro","description":"Descripción","reference":"Referencia catastral","noReference":"No hay referencia","noInfo":"PARA ESAS COORDENADAS NO HAY REFERENCIA DISPONIBLE","searchresult":"searchresult","coordinateresult":"coordinateresult","tooltip":"Búsqueda de lugares","tooltip_input":"Topónimo, dirección o código postal","geographic":"Geograficas","zone":"huso","title":"Buscar por coordenadas","titleparcela":"Buscar parcela/catastro","province":"Provincia","municipality":"Municipio","selectmuni":"Seleccione municipio","selectprov":"Seleccione provincia","estate":"Polígono","plot":"Parcela","search":"Buscar","titlerefCatastral":"Búsqueda referencia catastral","refCastatro":"Referencia catastral","placeHolderRC":"Introduzca los 14 ó 20 dígitos de la RC","consultReference":"Consultar Referencia","srs":"Sistema de coordenadas","longitude":"Longitud","latitude":"Latitud","locate":"Localizar","north":"Norte","south":"Sur","east":"Este","west":"Oeste","dms":"GMS","dd":"GD","negative":"Nota: Los valores negativos se corresponden con latitud sur y longitud oeste respectivamente","notaRef":"Código de parcela (14 primeros dígitos). Ej.9977715VK3797F (edificio del IGN)","RCnull":"Debe introducir una referencia catastral","direccion":"Topónimo, dirección o código postal","obtener":"Obtener dirección en un punto del mapa","buscparcela":"Buscar parcela/catastro","busccoord":"Buscar por coordenadas","borrarresult":"Borrar resultados de la búsqueda","exact":"Dirección exacta","aprox":"Dirección aproximada","debeprov":"Debe seleccionar una provincia.","debemuni":"Debe seleccionar un municipio.","debepoli":"Debe seleccionar un polígono.","debeparce":"Debe seleccionar una parcela.","accessibility":{"province":"Seleccionar una provincia.","town":"Seleccione un municipio.","estate":"Insertar polígono","plot":"Insertar parcela","cadastre":"Insertar catastro","srs":"Seleccionar sistema de coordenadas"}}'),B=JSON.parse('{"exception":{"impl":"The implementation used cannot create XYLocatorControl.","wrong_coords":"The coordinates entered are not correct.","transforming":"Error performing the transformation.","mapeaerror":"It is not possible to establish a connection with the Cadastre server.","noresults":"No results found","noubi":"There is no associated address for this location.","wrong_values":"Some value entered are not correct. Remember that minutes and seconds must be between 0 and 59 and degrees between 0 and 180.","ignsearchlocator_obsolete":"Message to the developer: M.plugin.IGNSearchLocator has been deprecated, please use M.plugin.Locator instead"},"searchresult":"searchresult","coordinateresult":"coordinateresult","informacion":"Information","informacionCatastral":"Cadastre information","errorConexion":"It is not possible to establish a connection with the Cadastre server.","consultar":"Cadastre information","description":"Description","reference":"Cadastral reference","noReference":"No reference","noInfo":"NO REFERENCES AVAILABLE FOR THESE COORDINATES ","tooltip":"Search places","tooltip_input":"Place name, address or postal code","geographic":"Geographic","zone":"zone","title":"Coordinate locator","titleparcela":"Search parcel/cadastre","municipality":"Municipality","selectmuni":"Select a municipality","selectprov":"Select a province","estate":"Polygon","plot":"Parcel","search":"Search","placeHolderRC":"Enter the 14 or 20 digits of the RC","consultReference":"Consult Reference","titlerefCatastral":"Cadastral reference search","refCastatro":"Cadastral reference","province":"Province","srs":"Coordinate system","longitude":"Longitude","latitude":"Latitude","locate":"Locate","north":"North","south":"South","east":"East","west":"West","dms":"DMS","dd":"DD","negative":"Note: Negative values​​ correspond to south latitude and west longitude respectively ","notaRef":"Parcel code (first 14 digits). Ex.9977715VK3797F (IGN building)","RCnull":"You must enter a cadastral reference","direccion":"Place name, address or postal code","obtener":"Get direction at a point on the map","buscparcela":"Search parcel/cadastre","busccoord":"Search coordinates","borrarresult":"Delete results","exact":"Exact address","aprox":"Approximate address","debeprov":"You must select a province.","debemuni":"You must select a municipality.","debepoli":"You must select an polygon.","debeparce":"You must select a parcel.","accessibility":{"province":"Select a province.","town":"Select a town.","estate":"Insert polygon","plot":"Insert parcel","cadastre":"Insert cadastre","srs":"Select coordinate system"}}'),L=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles VectorsControl.","unknown_geom":"Geometría no reconocida.","format_not_selected":"No se ha seleccionado formato de descarga.","size":"El fichero seleccionado sobrepasa el máximo de 20 MB permitido.","load":"Error al cargar el fichero.","no_geoms":"No se han detectado geometrías en este fichero.","load_correct":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","extension":"No se ha insertado una extensión de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX, GML y GeoJSON.","not_extent":"No se puede obtener la extensión de la capa.","no_features":"Esta capa todavía no tiene ninguna entidad. Añada entidades primero.","query_profile":"No se han podido consultar los datos de altitud para esta entidad.","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","error_features_wfs":"No se han podido cargar features de la capa. Inténtalo aumentando el nivel de zoom en la zona de interés.","error_no_features_wfs":"No se han podido cargar features de la capa. Inténtalo de nuevo en otra zona.","error_wfs":"No se ha podido cargar el servicio WFS","wfs_zoom":"Aumente el nivel de zoom * niveles si quiere añadir este servicio WFS,","error_email":"No se ha podido realizar el envío del email.","error_email_exception":"El mensaje no ha podido ser enviado, posiblemente por el tamaño del archivo adjunto.","error_email_size":"Se ha excedido el límite de peso para el correo. Disminuya el tamaño del archivo adjunto o póngase en contacto con consulta@cnig.es en el caso de querer enviar el archivo."},"textHelp":{"help1":"La extensión InciCarto permite mandar un objeto geográfico digitalizado o cargado al visualizador en un correo electrónico.","help2":"La extensión es personalizable, por lon que puede cambiar de un visualizador a otro.","help3":"En el panel inicial de la extensión, se realiza una explicación de su uso: se digitaliza un punto/línea/superficie  o se sube un archivo vectorial y se hace click para iniciar con el proceso de mandar la incidencia.","help4":"En el caso simple de la extensión, se puede elegir un tema (asociado a un correo electrónico de destino) y el usuario puede rellenar su nombre, su correo electrónico para un seguimiento, una descripción y adjuntar un archivo.","help5":"En el caso avanzado, se puede elegir un tema, el tipo de error, el productor y los destinatarios.","help6":"A nivel usuario se puede rellenar el nombre, el correo electrónico al que realizar las notificaciones de seguimiento y la descripción.","help7":"Además, se puede adjuntar un archivo al correo.","help8":"Dándole al botón de enviar e-mail, se manda un correo al correo seleccionado en destinatarios.","help9":"Al darle al botón de enviar correo electrónico, llega al destinatario un correo con el contenido de la incidencia rellenado por el usuario, un geojson con la capa digitalizada y el archivo adjunto ene l caso que el usuario haya subido uno.","help10":"La información relevante a la extensión y su posible parametrización está documentada en","help11":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Notificar incidencia en cartografía","change_name":"Cambiar nombre","close":"Cerrar","info":"Información","warning":"Advertencia","coordinates":"Coordenadas","length":"Longitud","area":"Área","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)","vector_layers":"Capas vectoriales","profile":"Perfil Topográfico","add_point_layer":"Dibujar incidencias puntuales","add_line_layer":"Dibujar incidencias lineales","add_poly_layer":"Dibujar incidencias superficiales","add_wfs_layer":"Añadir capa WFS","load_layer":"Cargar ruta o capa","point_layer":"Capa incidencias puntuales","line_layer":"Capa incidencias lineales","poly_layer":"Capa incidencias superficiales","show_hide":"Ver/Ocultar","add_geom":"Añadir geometría a la incidencia","edit_geom":"Editar geometría de la incidencia","edit_geom_line":"Editar/Perfil","layer_zoom":"Zoom a la incidencia","download_layer":"Descargar capa","notify_err":"Notificar incidencia","delete_layer":"Eliminar incidencia","color":"Color","thickness":"Grosor","line":"Trazo","delete_geom":"Borrar geometría","query_profile":"Perfil topográfico","accepted":"Los formatos aceptados son KML, SHP (.zip), GPX, GML y GeoJSON.","select_file":"Selecciona el fichero","download":"Descargar","notifyerr":"Enviar incidencia","change":"Cambiar","expand":"Mostrar","collapse":"Ocultar","url_service":"URL del servicio","query":"Consultar","clean":"Limpiar búsqueda","select_service":"Selecciona una capa","select":"Seleccionar","loading":"Cargando","cancel":"Cancelar","reload_from_view":"Recargar desde la vista","loaded_services":"Servicios precargados","availables":"Servicios precargados disponibles","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","title":"Título","abstract":"Resumen","responsible":"Responsable","access_constraints":"Restricciones de acceso","symbology":"Simbología","symbology_profile":"Simbología/Perfil","generating_profile":"Generando perfil","calculate":"Calcular","calculating":"Calculando","try_again":"No se ha podido realizar la consulta. Por favor, inténtelo de nuevo más tarde","email_correct":"El correo con la incidencia se ha enviado correctamente.","sending_email":"El correo está siendo enviado..."}'),D=JSON.parse('{"exception":{"impl":"The implementation used cannot create VectorsControl controls.","unknown_geom":"Unrecognized geometry.","format_not_selected":"No download format selected.","size":"The selected file exceeds the maximum 20 MB allowed.","load":"Error when loading the file.","no_geoms":"No geometries have been detected in this file.","load_correct":"Error when loading the file. Check that it is the right file.","extension":"A not allowed file extension has been inserted. The allowed ones are: KML, SHP(.zip), GPX, GML and GeoJSON.","not_extent":"Cannot get the layer extension.","no_features":"This layer does not yet have any entities. Add entities first.","query_profile":"The altitude data for this entity could not be queried.","capabilities":"An error has occurred in obtaining the GetCapabilities document","valid_url":"You must provide a valid URL","empty":"The fields are empty","error_features_wfs":"Unable to load layer features. Try increasing the zoom level in the area of interest.","error_no_features_wfs":"Unable to load layer features. Try again in another area.","error_wfs":"Could not load WFS service","wfs_zoom":"Increase the zoom in * levels if you want to add this WFS service","error_email":"The email could not be sent.","error_email_exception":"The message could not be sent, possibly due to the size of the attached file.","error_email_size":"The weight limit for mail has been exceeded. Reduce the size of the attached file or contact consulta@cnig.es if you want to send the file."},"textHelp":{"help1":"The InciCarto extension allows you to send a digitized or uploaded geographic object to the viewer in an email.","help2":"The extension is customizable, so it can change from one viewer to another.","help3":"In the initial panel of the extension, an explanation of its use is made: a point/line/surface is digitized or a vector file is uploaded and click to start the process of sending the incident.","help4":"In the simple case of the extension, you can choose a topic (associated with a destination email) and the user can fill in their name, their email for follow-up, a description and attach a file.","help5":"In the advanced case, you can choose a topic, the type of error, the producer and the recipients.","help6":"At the user level you can fill in the name, the email to which follow-up notifications are sent and the description.","help7":"In addition, you can attach a file to the email.","help8":"Clicking the send email button sends an email to the selected recipient email address.","help9":"When you click the send email button, the recipient receives an email with the content of the incident filled out by the user, a geojson with the digitized layer and the attached file in case the user has uploaded one. ","help10":"The information relevant to the extension and its possible parameterization is documented in","help11":"The example of use of its parameters can be checked in"},"tooltip":"Report error in cartography","change_name":"Change name","close":"Close","info":"Information","warning":"Warning","coordinates":"Coordinates","length":"Length","area":"Area","zmin":"Min. Height","zmax":"Max. Height","altitude":"Height","distance":"Total Dist.","ytitle":"Height (m)","xtitle":"Distance (km)","vector_layers":"Vector layers","profile":"Topographic Profile","add_point_layer":"Drawing points","add_line_layer":"Drawing lines","add_poly_layer":"Drawing polygons","add_wfs_layer":"Add WFS layer","load_layer":"Load route or layer","point_layer":"Point layer","line_layer":"Linear layer","poly_layer":"Polygonal layer","show_hide":"Show/Hide","add_geom":"Add geometry","edit_geom":"Edit geometry","edit_geom_line":"Edit/Profile","layer_zoom":"Zoom to the layer","download_layer":"Download layer","notify_err":"Reporting error","delete_layer":"Remove layer","color":"Color","thickness":"Thickness","line":"Stroke","delete_geom":"Remove geometry","query_profile":"Topographic profile","accepted":"The accepted formats are KML, SHP (.zip), GPX, GML and GeoJSON.","select_file":"Select the file","download":"Download","notifyerr":"Enviar incidencia","change":"Change","expand":"Show","collapse":"Hide","url_service":"Service URL","query":"Consult","clean":"Clean search","select_service":"Select layer","select":"Select","loading":"Loading","cancel":"Cancel","reload_from_view":"Reload from the view","loaded_services":"Preloaded services","availables":"Preloaded services available","show_service_info":"Show service information","hide_service_info":"Hide service information","title":"Title","abstract":"Abstract","responsible":"Responsible","access_constraints":"Access constraints","symbology":"Symbology","symbology_profile":"Symbology/Profile","generating_profile":"Generating profile","calculate":"Calculate","calculating":"Calculating","try_again":"The query could not be executed. Please try again later","email_correct":"The email with the incident has been sent correctly.","sending_email":"The email is being sent..."}'),j=JSON.parse('{"tooltip":"Consultar Catastro","informacionCatastral":"Información catastral","errorConexion":"No es posible establecer conexión con el servidor de Catastro.","consultar":"Consultar Catastro","infocatastro_obsolete":"Mensaje para el desarrollador: M.plugin.InfoCatastro ha quedado obsoleto, utilice en su lugar M.plugin.Locator","description":"Descripción","reference":"Referencia catastral","noReference":"No hay referencia","noInfo":"PARA ESAS COORDENADAS NO HAY REFERENCIA DISPONIBLE"}'),F=JSON.parse('{"tooltip":"Cadastre information","informacionCatastral":"Cadastre information","errorConexion":"It is not possible to establish a connection with the Cadastre server.","consultar":"Cadastre information","infocatastro_obsolete":"Message to the developer: M.plugin.InfoCatastro has been deprecated, please use M.plugin.Locator instead","description":"Description","reference":"Cadastral reference","noReference":"No reference","noInfo":"NO REFERENCES AVAILABLE FOR THESE COORDINATES "}'),N=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Infocoordinates"},"textHelp":{"help1":"Haga clic en el mapa para obtener las coordenadas de un punto en el sistema de referencia seleccionado.","help2":"Si hace clic en varios lugares puede obtener las coordenadas de varios puntos.","help3":"1. CRS. Selecciona el sistema de coordenadas en el que se muestran las coordenadas de los puntos. Las coordenadas se muestran tanto proyectadas como en geográficas Estas últimas pueden ser mostradas en notación decimal como sexagesimal.","help4":"Los sistemas de referencia y los sistemas de proyección disponibles son los oficiales para el territorio nacional:","help5":"Para Península y Baleares.","help6":"Para las Islas Canarias.","help7":"Adicionalmente se ofrecen coordenadas en EPSG 3857: WGS 84 / Pseudo-Mercator que empiezan a ser habituales en algunos visualizadores geográficos, si bien, no son oficiales en España.","help8":"2. Información de un punto. Puede consultar la coordenadas de cada punto haciendo clic sobre el número correspondiente en el panel de \'Información de Coordenadas\'.","help9":"3. Eliminar punto. Borrar el punto actual.","help10":"4. Elimina todos los puntos. Borra todos los puntos y reinicia la numeración.","help11":"5. Mostrar coordenadas en pantalla. Muestra u oculta las coordenadas de los puntos sobre el mapa.","help12":"La información relevante a la extensión y su posible parametrización está documentada en","help13":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Información Coordenadas","title":"Información Coordenadas","point":"Punto:","datum":"Datum:","latitude":"Latitud:","longitude":"Longitud:","formatCoordinates":"GMS","coordX":"Coord.X (m):","coordY":"Coord.Y (m):","altitude":"Altitud (m):","readingAltitude":"Consultando...","noDatafromWCS":"Sin datos","removePoint":"Elimina el punto","copyLatLon":"Copiar latitud/longitud","copyxy":"Copiar x/y","removeAllPoints":"Elimina todos los puntos","importAllPoints":"Exportar todos los puntos","copyAllPoints":"Copiar todos los puntos","displayONAllPoints":"Mostrar coordenadas de todos los puntos","displayOFFAllPoints":"Ocultar coordenadas de todos los puntos","clipboard":"Resultado copiado al portapapeles"}'),Z=JSON.parse('{"exception":{"impl":"The implementation used cannot create Infocoordinates controls."},"textHelp":{"help1":"Click on the map to obtain the coordinates of a point in the selected reference system.","help2":"If you click on multiple places you can get the coordinates of multiple points.","help3":"1. CRS. Select the coordinate system in which the coordinates of the points are displayed. The coordinates are displayed both projected and geographical. The latter can be displayed in decimal notation as well as sexagesimal.","help4":"The reference systems and projection systems available are the official ones for the national territory:","help5":"For the Peninsula and the Balearic Islands.","help6":"For the Canary Islands.","help7":"Additionally, coordinates are offered in EPSG 3857: WGS 84 / Pseudo-Mercator, which are beginning to be common in some geographic viewers, although they are not official in Spain.","help8":"2. Point information. You can check the coordinates of each point by clicking on the corresponding number in the \'Coordinate Information\' panel.","help9":"3. Delete point. Delete the current point.","help10":"4. Delete all points. Delete all points and restart the numbering.","help11":"5. Show coordinates on screen. Show or hide the coordinates of points on the map.","help12":"The information relevant to the extension and its possible parameterization is documented in","help13":"The example of use of its parameters can be checked in"},"tooltip":"Coordinates Information","title":"Coordinates Information","point":"Point:","datum":"Datum:","latitude":"Latitude:","longitude":"Longitude:","formatCoordinates":"DMS","coordX":"Coord.X (m):","coordY":"Coord.Y (m):","altitude":"Altitude (m):","readingAltitude":"Reading...","noDatafromWCS":"No data","removePoint":"Removes point","copyLatLon":"Copy latitude/longitude","copyxy":"Copy x/y","removeAllPoints":"Remove all points","importAllPoints":"Export all points","copyAllPoints":"Copy all points","displayONAllPoints":"Show coordinates of all points","displayOFFAllPoints":"Hide coordinates of all points","clipboard":"Result copied to clipboard"}'),U=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles InformationControl."},"textHelp":{"help1":"Proporciona información adicional sobre los elementos de las capas, en el caso en el que el servicio permita la operación de consulta.","help2":"Se realiza por una petición de información al servicio de mapas a través de la operación getFeatureInfo. También es posible pedir información a ficheros vectoriales como .geojson o .kml","help3":"Seleccione la herramienta y haga clic sobre el elemento del que desee conocer más información. En el panel, aparecerán las capas que dispongan de información en el punto.","help4":"Utilice la flecha para desplegar toda la información disponible de cada capa.","help5":"Si no existen capas consultables, al hacer clic sobre el mapa aparece el siguiente mensaje informativo.","help6":"La información relevante a la extensión y su posible parametrización está documentada en","help7":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Consultar capas","title":"Información","not_queryable":"No existen capas consultables","querying":"Obteniendo información...","unsupported_format":"Formato no soportado","no_info":"No existe información asociada","info_of":"Información de"}'),Q=JSON.parse('{"exception":{"impl":"The implementation used cannot create InformationControl."},"textHelp":{"help1":"Provides additional information about layer elements, in the case where the service allows the query operation.","help2":"It is done by requesting information from the map service through the getFeatureInfo operation. It is also possible to request information from vector files such as .geojson or .kml","help3":"Select the tool and click on the element you want to know more information about. The layers that have information on the point will appear in the panel.","help4":"Use the arrow to display all the available information for each layer.","help5":"If there are no searchable layers, clicking on the map displays the following information message.","help6":"The information relevant to the extension and its possible parameterization is documented in","help7":"The example of use of its parameters can be checked in"},"tooltip":"Consult layers","title":"Information","not_queryable":"There are no queryable layers","querying":"Getting information...","unsupported_format":"Unsupported format","no_info":"No associated info","info_of":"Information about"}'),G=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles LayerswitcherControl.","extent":"No se puede obtener la extensión de la capa","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","ogcfeatures":"La url proporcionada no se corresponde con un tipo de capa válida","only_http":"Sólo se permiten servicios http","only_https":"Sólo se permiten servicios https","no_http_https":"No se permiten servicios http ni https","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","select_layer":"Debes seleccionar al menos una capa","no_results":"No se han encontrado capas en este servicio","codsi":"Ha ocurrido un error al consultar el catálogo CODSI","codsi_no_results":"No hay resultados para su búsqueda"},"textHelp":{"help1":"La extensión selector de capas permite gestionar las capas que se muestran en un visualizador cartográfico.","help2":"Esta extensión es personalizable mediante parámetros, por lo que la extensión puede cambiar de un visualizador a otro.","help3":"Las distintas herramientas disponibles en el selector de capas son:","help4":"Añadir capa:","help5":"La primer opción es la de introducir la URL de un servicio en la caja de texto. Para ello, partiendo del directorio de servicios IDEE (https://www.idee.es/segun-tipo-de-servicio) por ejemplo, utilizando el servicio de Mosaicos de Satélite históricos de España (https://wms-satelites-historicos.idee.es/satelites-historicos). Al darle a la lupa de buscar, aparece un listado de capas disponibles en el servicio. En este ejemplo, se elije la capa \'filomena\' y se le da a añadir:","help6":"En el caso que se quisieran más capas, se podrían seleccionar todas las que se quisieran. Una vez añadida, tendríamos el siguiente aspecto en el visualizador:","help7":"Otra forma de cargar capas es desde el catálogo de servicios d ela IDEE (https://www.idee.es/csw-inspire-idee/srv/spa/catalog.search#/home). Haciendo click sobre el botón de los prismáticos, aparecerá otro buscador por texto y un listado de posibilidades. Por ejemplo si buscamos \'unidades administrativas IGN\'","help8":"y hacemos click sobre \'WMS de Unidades Administrativas de España\', podremos cargar las capas del servicio buscado:","help9":"Por último, se pueden cargar capas desde un listado de algunas capas disponibles, que se configura por temáticas. En el ejemplo mostrado, se va a cargar la primera edición del MTN 50 que se encuentra en cartografía:","help10":"Aparecerá de nuevo el selector de capas del servicio, y se marca la primera edición del MTN 50 y se añade al mapa:","help11":"Una vez se tienen cargadas en el mapa las capas, se puede trabajar con ellas desde el selector de capas.","help12":"La primera funcionalidad sería la de encender las capas, esto se puede hacer desde el botón ojo amarillo que permite encender y apagar todas, o desde los distintos botones ojo verde-rojo para encender o apagar solo una capa:","help13":"Otra funcionalidad sería eliminar la capa, desde el botón del cubo de basura.","help14":"Dentro de las opciones de una capa visible, se tienen las herramientas de añadir transparencia a la capa:","help15":"mostrar la leyenda de la capa:","help16":"centrar el visualizador a la extensión de la capa:","help17":"obtener más información de la capa:","help18":"y en el caso que la capa lo permita, poder aplicarle otro estilo cartográfico:","help19":"La información relevante a la extensión y su posible parametrización está documentada en","help20":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Gestor de capas","info":"Información","layer_info":"Información de la capa","configure_layer":"Configurar capa","close":"Cerrar","load_ext_services":"Cargar capas de información geográfica","layers":"Capas","add_service":"Añadir servicio","show_hide":"Mostrar/Ocultar leyenda","zoom":"Zoom a la capa","info_metadata":"Ver información","change_style":"Cambiar estilo","remove_layer":"Eliminar capa del mapa","select_style":"Selecciona un estilo","change":"Cambiar","url_service":"Incluir URL del servicio a cargar","query":"Consultar","loaded_services":"Capas de información geográfica","codsi_services":"Catálogo de Servicios","clean":"Limpiar búsqueda","availables":"Listado de algunas capas disponibles","title":"Título","name":"Nombre","abstract":"Resumen","provider":"Proveedor","service_info":"Información del servicio (Capabilities)","download_center":"Centro de descargas","add":"Añadir","drag_drop":"Arrastre y suelte para cambiar el orden de visualización","see_more":"Mostrar metadato del conjunto de datos","see_less":"Ocultar metadato del conjunto de datos","service":"Servicio","metadata_abstract":"Resumen (metadato)","responsible":"Responsable","access_constraints":"Restricciones de acceso","use_constraints":"Restricciones de uso","online_resources":"Recursos online","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","hide_service":"Ocultar servicio","show_service":"Mostrar servicio","show_all_services":"Mostrar todos los servicios","hide_all_services":"Ocultar todos los servicios","type_service":"Tipo de servicio","filter_results":"Filtrar resultados","clean_filter":"Limpiar filtro","filter_text":"Texto a buscar","metadata":"Metadatos","see_more_layer":"Ver más información de la capa","see_more_service":"Ver más información del servicio","select_service":"Selecciona una capa","amount_results":"Obtener ","amount_results_2":" elementos","bbox-select":"Solo de la extensión actual","no-limit":"Obtener todos los elementos","custom_query":"Consulta personalizada","no_results":"No se han encontrado resultados","search":"Buscar","yes":"Sí","no":"No","filters":"Filtros","other_filters":"Otros filtros","id_filter":"Filtrar por ID","warning":"ADVERTENCIA: No se recomiendan límites altos","add_btn":"Añadir","custom_query_btn":"Más filtros","apply_btn":"Aplicar","style":"Estilo","default_style":"Estilo predeterminado","selected":"seleccionado","custom_query_warning":"ATENCIÓN: La opción buscar por «Más filtros» se basa en un estándar en estado borrador. El resultado de la consulta puede no ser el deseado.","check_results":"Comprobar resultados","results_1_plural":"Se han encontrado ","results_2_plural":" features","results_1_singular":"Se ha encontrado ","results_2_singular":" feature","legend":"Leyenda","legend_error":"Error en la leyenda","data_layer":"Datos para la capa","n_obj_geo":"Número de objetos geográficos","extension":"Extensión","loading":"Cargando","attributes":"Atributos","values":"Valores","attribution":"Atributo","description":"Descripción","minzoom":"Zoom mínimo","maxzoom":"Zoom máximo","center":"Centro","addAllLayers":"Añadir todos los servicios","previous":"Anterior","next":"Siguiente","separatedby":"Identificador separados por comas \',\'","placeHolderLegend":"Texto que se muestra en el TOC","upload_file":"Subir fichero"}'),z=JSON.parse('{"exception":{"impl":"The implementation used cannot create LayerswitcherControl.","extent":"Cannot get the extent of the layer","capabilities":"An error has occurred in obtaining the GetCapabilities document","ogcfeatures":"The provided url does not correspond to a valid layer type","only_http":"Only http services are allowed","only_https":"Only https services are allowed","no_http_https":"No http or https services allowed","valid_url":"You must provide a valid URL","empty":"The fields are empty","select_layer":"You must select at least one layer","no_results":"No layers found in this service","codsi":"An error occurred while consulting the CODSI catalog","codsi_no_results":"There are no results for your search"},"textHelp":{"help1":"The layer selector extension allows you to manage the layers displayed in a cartographic viewer.","help2":"This extension is customizable via parameters, so the extension can change from one viewer to another.","help3":"The different tools available in the layer selector are:","help4":"Add layer:","help5":"The first option is to enter the URL of a service in the text box. To do this, start from the IDEE services directory (https://www.idee.es/segun-tipo-de-servicio ) for example, using the Historical Satellite Mosaics service of Spain (https://wms-satelites-historicos.idee.es/satelites-historicos). When you click the search magnifying glass, a list of available layers appears in the service. In this example, we choose the \'filomena\' layer and add:","help6":"If you wanted more layers, you could select as many as you wanted. Once added, we would have the following appearance in the viewer:","help7":"Another way to load layers is from the IDEE service catalog (https://www.idee.es/csw-inspire-idee/srv/spa/catalog.search#/home). Click On the binoculars button, another text search engine and a list of possibilities will appear. For example, if we search for \'IGN administrative units\'","help8":"and we click on \'WMS of Administrative Units of Spain\', we can load the layers of the searched service:","help9":"Finally, layers can be loaded from a list of some available layers, which is configured by theme. In the example shown, the first edition of MTN 50 that is in cartography will be loaded:","help10":"The service layer selector will appear again, and the first edition of MTN 50 is marked and added to the map:","help11":"Once the layers are loaded into the map, you can work with them from the layer selector.","help12":"The first functionality would be to turn on the layers, this can be done from the yellow eye button that allows you to turn all of them on and off, or from the different green-red eye buttons to turn on or off just one layer:","help13":"Another functionality would be to delete the layer, from the trash can button.","help14":"Within the options of a visible layer, you have the tools to add transparency to the layer:","help15":"show layer legend:","help16":"center the viewer to the extent of the layer:","help17":"get more layer information:","help18":"and if the layer allows it, be able to apply another cartographic style:","help19":"The information relevant to the extension and its possible parameterization is documented in","help20":"The example of use of its parameters can be checked in"},"tooltip":"Layer Manager","info":"Information","layer_info":"Layer information","configure_layer":"Configure layer","close":"Close","load_ext_services":"Load geographic information layers","layers":"Layers","add_service":"Add service","show_hide":"Show/Hide legend","zoom":"Zoom to the layer","info_metadata":"View information","change_style":"Change style","remove_layer":"Remove layer from map","select_style":"Select a style","change":"Change","url_service":"Include URL of the service to load","query":"Consult","loaded_services":"Preloaded geographic information layers","codsi_services":"Services Catalog","clean":"Clean search","availables":"List of some available layers","title":"Title","name":"Name","abstract":"Abstract","provider":"Provider","service_info":"Service information (Capabilities)","download_center":"Download center","add":"Add","drag_drop":"Drag and drop to change display order","see_more":"Show dataset metadata","see_less":"Hide dataset metadata","service":"Service","metadata_abstract":"Abstract (metadata)","responsible":"Responsible","access_constraints":"Access constraints","use_constraints":"Use constraints","online_resources":"Online resources","show_service_info":"Show service information","hide_service_info":"Hide service information","hide_service":"Hide service","show_service":"Show service","show_all_services":"Show all services","hide_all_services":"Hide all services","type_service":"Tipo de servicio","filter_results":"Filter results","clean_filter":"Clean filter","filter_text":"Text to search","metadata":"Metadata","see_more_layer":"View more information about the layer (Metadata)","see_more_service":"View more service information (Metadata)","select_service":"Select layer","amount_results":"Get ","amount_results_2":" elements","bbox-select":"Find features within rendered map","no-limit":"Get all results","custom_query":"Custom query","no_results":"No results found","search":"Search","yes":"Sí","no":"No","filters":"Filters","other_filters":"Other filters","id_filter":"Filter by ID","warning":"WARNING: High limits are not recommended","add_btn":"Add","custom_query_btn":"More filters","apply_btn":"Apply","style":"Style","default_style":"Default style","selected":"selected","custom_query_warning":"WARNING: Filtering by \\"More filters\\" it is based on a draft standard. The result of the query may not be as desired.","check_results":"Check results","results_1_plural":"","results_2_plural":" features have been found.","results_1_singular":"","results_2_singular":" feature has been found.","legend":"Legend","legend_error":"Error in legend","data_layer":"Data for GeoJSON layer","n_obj_geo":"Number of geographical objects","extension":"Extension","loading":"Loading","attributes":"Attributes","values":"Values","attribution":"Attribute","description":"Description","minzoom":"Minimum zoom","maxzoom":"Maximum zoom","center":"Center","addAllLayers":"Add all services","previous":"Previous","next":"Next","separatedby":"Identifier separated by commas \',\'","placeHolderLegend":"Text displayed in TOC","upload_file":"Upload file"}'),q=JSON.parse('{"tooltip":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyr1Select_tooltip":"Selecciona la capa de la posición 1","lyr2Select_tooltip":"Selecciona la capa de la posición 2","lyr3Select_tooltip":"Selecciona la capa de la posición 3","lyr4Select_tooltip":"Selecciona la capa de la posición 4","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"El número de capas es insuficiente para aplicar el efecto","repeated_layers":"Las capas seleccionadas no se pueden repetir","lyrcompare_obsolete":"Mensaje para el desarrollador: M.plugin.LyrCompare ha quedado obsoleto, utilice en su lugar M.plugin.Comparators"}'),V=JSON.parse('{"tooltip":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","layers":"Layers","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyr1Select_tooltip":"Select layer on the first position","lyr2Select_tooltip":"Select layer on the second position","lyr3Select_tooltip":"Select layer on the third position","lyr4Select_tooltip":"Select layer on the fourth position","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"The number of layers is insufficient to apply the effect","repeated_layers":"Selected layers cannot be repeated","lyrcompare_obsolete":"Message to developer: M.plugin.LyrCompare has been deprecated, please use M.plugin.Comparators instead"}'),W=JSON.parse('{"exception":{"impl_length":"La implementación usada no puede crear controles MeasureLength.","impl_clear":"La implementación usada no puede crear controles MeasureClear.","impl_area":"La implementación usada no puede crear controles MeasureArea"},"textHelp":{"help1":"Mide longitudes y superficies sobre el mapa.","help2":"1. Medir distancias.","help3":"2. Medir área.","help4":"3. Borrar Medidas.","help5":"Haga clic sobre la herramienta para seleccionarla y luego sobre el mapa para dibujar la distancia que quiere medir. A medida que se va dibujando se va actualizando la longitud total.","help6":"Haga doble clic para terminar la medición de distancia, y empezar otra.","help7":"Con la tecla Escape se desactiva la herramienta y se borra la medición activa. Esto puede ser útil para reiniciar la herramienta si se ha cometido un error en la última medición, sin borrar el resto de mediciones ya realizadas.","help8":"La herramienta se queda activa hasta que la desactive, haciendo clic de nuevo sobre el botón \'Medir distancias\'.","help9":"Haga clic sobre la herramienta para seleccionarla y luego sobre el mapa para dibujar el área que quiere medir. A medida que se va dibujando se va actualizando la superficie medida.","help10":"Haga doble clic para terminar la medición de área, y empezar otra.","help11":"Con la tecla Escape se desactiva la herramienta y se borra la medición activa. Esto puede ser útil para reiniciar la herramienta si se ha cometido un error en la última medición, sin borrar el resto de mediciones ya realizadas.","help12":"La herramienta se queda activa hasta que la desactive, haciendo clic de nuevo sobre el botón \'Medir área\'.","help13":"Borra todas las mediciones realizadas, tanto áreas como distancias.","help14":"La información relevante a la extensión y su posible parametrización está documentada en","help15":"El ejemplo de uso de sus parámetros puede comprobarse en"},"text":{"tooltip":"Herramientas de medición","keep_drawing":"Click para continuar dibujando la línea","click_draw":"Click para empezar a dibujar","keep_drawing_area":"Click para continuar dibujando el área","measure_area":"Medir área","delete":"Borrar medidas","measure":"Medir distancias"}}'),K=JSON.parse('{"exception":{"impl_length":"The implementation used cannot create MeasureLength.","impl_clear":"The implementation used cannot create MeasureClear.","impl_area":"The implementation used cannot create MeasureArea"},"textHelp":{"help1":"Measure lengths and surfaces on the map.","help2":"1. Measure distances.","help3":"2. Measure area.","help4":"3. Delete Measurements.","help5":"Click on the tool to select it and then on the map to draw the distance you want to measure. As you draw, the total length is updated.","help6":"Double click to finish the distance measurement, and start another one.","help7":"Using the Escape key deactivates the tool and deletes the active measurement. This can be useful to restart the tool if an error was made in the last measurement, without deleting the rest of the measurements already made.","help8":"The tool remains active until you deactivate it by clicking the \'Measure distances\' button again.","help9":"Click on the tool to select it and then on the map to draw the area you want to measure. As you draw, the measured area is updated.","help10":"Double click to finish area measurement, and start another one.","help11":"Using the Escape key deactivates the tool and deletes the active measurement. This can be useful to restart the tool if an error was made in the last measurement, without deleting the rest of the measurements already made.","help12":"The tool remains active until you deactivate it by clicking the \'Measure area\' button again.","help13":"Delete all measurements made, both areas and distances.","help14":"The information relevant to the extension and its possible parameterization is documented in","help15":"The example of use of its parameters can be checked in"},"text":{"tooltip":"Measurement tools","keep_drawing":"Click to continue drawing the line","click_draw":"Click to start drawing","keep_drawing_area":"Click to continue drawing the area","measure_area":"Measure area","delete":"Remove measures","measure":"Measuring distances"}}'),H=JSON.parse('{"tooltip":"Comparador de mapas espejo","title":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","backimglayersparams_undefined":"Los parámetros de BackImgLayers no están definidos correctamente.","mirrorpanel_obsolete":"Mensaje para el desarrollador: M.plugin.Mirrorpanel ha quedado obsoleto, utilice en su lugar M.plugin.Comparators"}'),Y=JSON.parse('{"tooltip":"Mirror Comparison","title":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","backimglayersparams_undefined":"BackImgLayers\' parameters are not defined correctly.","mirrorpanel_obsolete":"Message to developer: M.plugin.Mirrorpanel has been deprecated, please use M.plugin.Comparators instead"}'),X=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles MouseSRSControl.","srs":"Plugin MouseSRS: El parámetro srs no es correcto. Por defecto se usará EPSG:4326"},"textHelp":{"help1":"Para seleccionar el sistema de coordenadas basta con hacer clic en cualquier punto de la barra.","help2":"Los valores disponibles son:","help3":"Unidades: grados","help4":"Unidades: metros","help5":"Más información sobre sistemas de referencia en:","help6":"Según el sistema de coordenadas elegido visualizaremos coordenadas geográficas en grados con formato decimal o proyectadas en metros. También se muestra la altura aproximada sobre el nivel del mar en Alicante.","help7":"La información relevante a la extensión y su posible parametrización está documentada en","help8":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Coordenadas","select_srs":"Selecciona un sistema de referencia","close":"Cerrar","accessibility":{"src":"Clic o Enter para modificar el EPSG"}}'),J=JSON.parse('{"exception":{"impl":"The implementation used cannot create MouseSRSControl.","srs":"MouseSRS plugin: The srs parameter is not correct. By default EPSG:4326 will be used"},"textHelp":{"help1":"To select the coordinate system just click on any point on the bar.","help2":"The available values are:","help3":"Units: degrees","help4":"Units: meters","help5":"More information about reference systems in:","help6":"Depending on the chosen coordinate system, we will display geographic coordinates in degrees with decimal format or projected in meters. The approximate height above sea level in Alicante is also shown.","help7":"The information relevant to the extension and its possible parameterization is documented in","help8":"The example of use of its parameters can be checked in"},"tooltip":"Coordinates","select_srs":"Select a reference system","close":"Close","accessibility":{"src":"Click or Enter to modify the EPSG"}}'),$=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles OverviewMapControl."},"textHelp":{"help1":"Muestra una vista general con un recuadro que corresponde a la zona donde nos encontramos en la vista principal.","help2":"El recuadro del mapa de situación está sincronizado con la vista principal. Permite desplazar la vista principal, moviendo el recuadro desde el mapa de situación.","help3":"Para ocultar de nuevo el mapa de situación haga clic en el botón \'Minimizar\'.","help4":"La información relevante a la extensión y su posible parametrización está documentada en","help5":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Mapa de situación"}'),ee=JSON.parse('{"exception":{"impl":"The implementation used cannot create OverviewMapControl."},"textHelp":{"help1":"Shows a general view with a box that corresponds to the area where we are in the main view.","help2":"The situation map box is synchronized with the main view. Allows you to scroll the main view, moving the box from the situation map.","help3":"To hide the location map again, click the \'Minimize\' button.","help4":"The information relevant to the extension and its possible parameterization is documented in","help5":"The example of use of its parameters can be checked in"},"tooltip":"Overview Map"}'),te=JSON.parse('{"exception":{"popup_obsolete":"Mensaje para el desarrollador: M.plugin.Popup ha quedado obsoleto, utilice en su lugar M.plugin.Modal"},"tooltip":"Más información","exception_popupcontrol":"La implementación usada no puede crear controles PopupControl"}'),re=JSON.parse('{"exception":{"popup_obsolete":"Message to the developer: M.plugin.Popup has been deprecated, please use M.plugin.Modal instead"},"tooltip":"More information","exception_popupcontrol":"The implementation used cannot create PopupControl controls"}'),ne=JSON.parse('{"exception_predefinedzoomcontrol":"La implementación usada no puede crear controles PredefinedZoomControl","predefinedzoom_obsolete":"Mensaje para el desarrollador: M.plugin.PredefinedZoom ha quedado obsoleto, utilice en su lugar M.plugin.ViewManagement"}'),ie=JSON.parse('{"exception_predefinedzoomcontrol":"The implementation used cannot create controls PredefinedZoomControl","predefinedzoom_obsolete":"Message to the developer: M.plugin.PredefinedZoom has been deprecated, please use M.plugin.ViewManagement instead"}'),oe=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles PrinterMap.","encode":"La implementación usada no posee el método encodeLayer.","tile":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","error":"Se ha producido un error en la impresión.","imageError":"No ha podido realizarse la descarga en este momento. Por favor, inténtelo más tarde.","error_layers":"Las siguientes capas no se visualizarán al imprimir el mapa: ","printermap_obsolete":"Mensaje para el desarrollador: M.plugin.printermap ha quedado obsoleto, utilice en su lugar M.plugin.PrintViewManagement"},"errorProjectionCapabilities":"La proyeccion seleccionada no está disponible para esta capa base. Por favor elija otra proyección.","tooltip":"Impresión del mapa","credits":"Impresión generada a través del api-core","no_title":"(Sin título)","zone":"huso","base":"Cartografía base","title":"Título","description":"Descripción","layout":"Plantilla","format":"Formato","projection":"Proyección","keep":"Conservar vista","geo":"Imagen Georreferenciada","print":"Imprimir","delete":"Borrar","download":"Descargar","minimize":"Minimizar el control de impresión","fototeca":"Este documento carece de validez legal"}'),ae=JSON.parse('{"exception":{"impl":"The implementation used cannot create PrinterMap.","encode":"The implementation used cannot use encodeLayer.","tile":"The request for some tile has caused a printing error. <br/>Please try again.","error":"An error has occurred while printing.","imageError":"The download could not be completed at this time. Please try again later.","error_layers":"The following layers will not be displayed when printing the map: ","printermap_obsolete":"Message to the developer: M.plugin.printermap has been deprecated, please use M.plugin.PrintViewManagement instead"},"errorProjectionCapabilities":"The selected projection is not available for this base layer. Please choose another projection.","tooltip":"Map Printing","credits":"Print generated through api-core","no_title":"(Untitled)","zone":"zone","base":"Base Cartography","title":"Title","description":"Description","layout":"Layout","format":"Format","projection":"Projection","keep":"Keep view","geo":"Georeferenced Image","print":"Print","delete":"Remove","download":"Download","minimize":"Minimize print control","fototeca":"This document has no legal validity"}');const se={attributions:{esAttributions:n,enAttributions:i},backimglayer:{esBackimglayer:o,enBackimglayer:a},beautytoc:{esBeautytoc:s,enBeautytoc:l},buffer:{esBuffer:u,enBuffer:c},calendar:{esCalendar:f,enCalendar:h},comparators:{esComparators:p,enComparators:d},comparepanel:{esComparepanel:y,enComparepanel:g},contactlink:{esContactlink:m,enContactlink:_},fulltoc:{esFulltoc:v,enFulltoc:A},geometrydraw:{esGeometrydraw:b,enGeometrydraw:w},georefimage:{esGeorefimage:E,enGeorefimage:x},georefimage2:{esGeorefimage2:I,enGeorefimage2:S},help:{esHelp:C,enHelp:P},iberpixcompare:{esIberpixcompare:O,enIberpixcompare:T},ignsearch:{esIgnsearch:M,enIgnsearch:k},ignsearchlocator:{esIgnsearchlocator:R,enIgnsearchlocator:B},incicarto:{esIncicarto:L,enIncicarto:D},infocatastro:{esInfocatastro:j,enInfocatastro:F},infocoordinates:{esInfocoordinates:N,enInfocoordinates:Z},information:{esInformation:U,enInformation:Q},layerswitcher:{esLayerswitcher:G,enLayerswitcher:z},lyrcompare:{esLyrcompare:q,enLyrcompare:V},measurebar:{esMeasurebar:W,enMeasurebar:K},mirrorpanel:{esMirrorpanel:H,enMirrorpanel:Y},mousesrs:{esMousesrs:X,enMousesrs:J},overviewmap:{esOverviewmap:$,enOverviewmap:ee},popup:{esPopup:te,enPopup:re},predefinedzoom:{esPredefinedzoom:ne,enPredefinedzoom:ie},printviewmanagement:{esPrintviewmanagement:JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles PrintViewManagementControl.","impl_printermap":"La implementación usada no puede crear controles PrinterMapControl.","no_controls":"El plugin PrintViewManagement necesita activar al menos un control.","encode":"La implementación usada no posee el método encodeLayer.","error":"Se ha producido un error en la impresión.","imageError":"No ha podido realizarse la descarga en este momento. Por favor, inténtelo más tarde.","error_layers":"Las siguientes capas no se visualizarán al imprimir el mapa: ","teselaError":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","printError":"Se ha producido un error en la impresión.","encode_method":"La implementación usada no posee el método encodeLayer","tile":"La petición de alguna tesela ha provocado un error en la impresión. <br/>Por favor, inténtelo de nuevo.","support":"Las capas MBTiles y MBTilesVector no están soportadas.","error_download_image":"No ha podido realizarse la descarga."},"textHelp":{"help1":"La extensión de imprimir permite exportar tanto mapas a partir de plantillas como imágenes georreferenciadas.","help2":"La extensión es personalizable, por lon que puede cambiar de un visualizador a otro.","help3":"Mediante el control imprimir mapa, se puede descargar un mapa a partir de una plantilla seleccionada, unos DPI (Dots per inch, la resolución de impresión), y un formato.  Además permite añadir un título y una descripción.","help4":"Para obtener el mapa, habrá que hacer click sobre el botón de descargar, lo que hará que se genere el documento y aparezca disponible para su descargar.","help5":"Actualmente, el mapa se descarga en el EPSG:3857  (WGS84 / Pseudomercator).","help6":"A través del control de descarga de imagen georreferenciada a través de la vista, se puede obtener una imagen georreferenciada junto al archivo de georreferenciación.","help7":"Las opciones disponibles son: añadir un título al archivo, seleccionar el formato, obtener el fichero de georreferenciación, seleccionar los DPI (en caso de utilizar la descarga a través de servicios) y seleccionar el tipo de descarga.","help8":"La descarga por vista, hace una captura del mapa del visualizador, obteniendo las capas cargadas en ese momento y el estado del mapa. El sistema de coordenadas de la descarga será el sistema de coordenadas y/o proyección del mapa en ese momento.","help9":"La descarga de capas cargadas por servicios, hace una llamada a los propios servicios creando una imagen de su conjunto. El sistema de coordenadas será WGS84 / Pseudomercator (EPSG:3857).","help10":"El control de descarga de imágenes georreferenciadas por lista, permite descargar distintos servicios WMS con distintos sistemas de coordenadas y proyecciones, indicados a la hora de construir la extensión.","help11":"Se obtiene la extensión de la imagen del estado del visualizador en ese momento, y se realiza una petición al servicio con la proyección asignada","help12":"La información relevante a la extensión y su posible parametrización está documentada en","help13":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Impresión del mapa","map_printing":"Impresión del mapa","nextView":"Vista siguiente","previousView":"Vista anterior","service_epsg":"Servicios EPSG","georeferenced_img":"Imagen georreferenciada","format":"Formato","errorProjectionCapabilities":"La proyeccion seleccionada no está disponible para esta capa base. Por favor elija otra proyección.","printInfo":"Impresión generada a través de Mapea","generating":"Generando imagen georreferenciada","referenced":"Imagen georreferenciada","projection":"Proyección","downImg":"Descargar Imagen","downMap":"Descargar Mapa","delete":"Borrar","down":"Descargar","title":"Título","notitle":"(Sin título)","cancel":"Cancelar","accept":"Aceptar","download_modal":"El uso de la información de los productos y servicios de datos geográficos definidos en la <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"https://www.boe.es/boe/dias/2015/12/26/pdfs/BOE-A-2015-14129.pdf\\">Orden FOM/2807/2015</a>, así como sus derivados, conlleva la aceptación por el usuario de las condiciones generales de dicha orden, concretada en la siguiente <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"http://www.ign.es/resources/licencia/Condiciones_licenciaUso_IGN.pdf\\">licencia de uso</a>, compatible con CC-BY 4.0.","use_license":"Licencia de uso","map":"Mapa","pnoa":"Imagen (PNOA)","screen":"Imagen Pantalla","fixeddescription":"Este documento no tiene validez legal","description":"Descripción","layout":"Plantilla","credits":"Print generated through api-core","base":"Cartografía base","zone":"huso","georefimageWld":"Fichero de georreferenciación (WLD)","typeDownload":"Selecciona el tipo de descarga:","typeClient":"Descarga de la vista en pantalla","typeServer":"Descarga de capas cargadas por servicios","selectLayer":"Selecciona la capa a descargar","clipBoard":"Copiar al portapapeles","layer_wms":"WMS devuelve un mapa en formato imagen de un conjunto capas ráster o vectoriales. Permitiendo las personalización de las capas mediante estilos. ","layer_wmts":" WMTS (Web Map Tile Service) es un estándar OGC para servir información geográfica en forma de tiles pregenerados a unas resoluciones específicas.","layer_tms":"Las capas TMS (Tile Map Service) son servicios de información geográfica en forma de tiles muy similares a las capas XYZ.","layer_xyz":"Las capas XYZ son servicios de información geográfica en forma de tiles. Cada tile representa una combinación de tres parámetros.","layer_raster":"Capas ráster:","layer_vector":"Capas vectoriales:","layer_geojson":"Pese a no ser un estándar OGC (está camino de convertirse en ello), es un formato de intercambio de información geográfica muy extendido que, al igual que WFS, permite tener todos los elementos en el cliente.","layer_wfs":"(Web Feature Service) es un estándar OGC para la descarga y transferencia de información geográfica, donde los elementos geográficos o features se transmiten en su totalidad al cliente.","layer_kml":"(Keyhole Markup Language). KML es un lenguaje de marcado basado en XML para representar datos geográficos en tres dimensiones.","layer_OGCAPIFeatures":"(OGC API - FEATURES) es un estándar OGC que ofrece la capacidad de crear, modificar y consultar datos espaciales en la Web y especifica requisitos y recomendaciones para las API que desean seguir una forma estándar de compartir datos de entidades.","tooltip_georefimageepsg":"Georreferenciar imagen predefinida","title_map":"Impresión del mapa","title_view":"Descarga de imagen georreferenciada de la vista","title_list":"Descarga de imagen georreferenciada a partir de listado","available_sources":"Fuentes disponibles","maintain_view":"Se mantiene la vista de impresión con DPI = 120"}'),enPrintviewmanagement:JSON.parse('{"exception":{"impl":"The implementation used cannot create PrintViewManagementControl.","impl_printermap":"The implementation used cannot create PrinterMapControl.","no_controls":"The PrintViewManagement plugin needs to activate at least one control.","encode":"The implementation used cannot use encodeLayer.","error":"An error has occurred while printing.","imageError":"The download could not be completed at this time. Please try again later.","error_layers":"The following layers will not be displayed when printing the map: ","teselaError":"The request has caused an error in printing. < br / > Please try again.","printError":"Printing has failed.","encode_method":"The used implementation does not have the encodeLayer method","tile":"The request for some tile has caused a printing error. <br/>Please try again.","support":"MBTiles and MBTilesVector layers are not supported","error_download_image":"The download could not be completed at this time."},"textHelp":{"help1":"The print extension allows you to export both maps from templates and georeferenced images.","help2":"The extension is customizable, so it can change from one viewer to another.","help3":"Using the print map control, you can download a map based on a selected template, a DPI (Dots per inch, the printing resolution), and a format. It also allows you to add a title and a description.","help4":"To obtain the map, you will have to click on the download button, which will cause the document to be generated and appear available for download.","help5":"The map is currently downloaded to EPSG:3857 (WGS84 / Pseudomercator).","help6":"Through the georeferenced image download control through the view, a georeferenced image can be obtained next to the georeference file.","help7":"The available options are: add a title to the file, select the format, obtain the georeferencing file, select the DPI (in case of using download through services) and select the type of download.","help8":"The download by view takes a snapshot of the viewer map, obtaining the layers loaded at that moment and the state of the map. The coordinate system of the download will be the coordinate system and/or projection of the map in that moment.","help9":"The download of layers loaded by services makes a call to the services themselves creating an image of their set. The coordinate system will be WGS84 / Pseudomercator (EPSG:3857).","help10":"The download control of georeferenced images by list allows you to download different WMS services with different coordinate systems and projections, indicated when building the extension.","help11":"The extension of the image of the display state at that moment is obtained, and a request is made to the service with the assigned projection","help12":"The information relevant to the extension and its possible parameterization is documented in","help13":"The example of using its parameters can be checked in"},"tooltip":"Map printing","map_printing":"Map printing","nextView":"Next view","previousView":"Previous view","service_epsg":"Service EPSG","georeferenced_img":"Georeferenced image","format":"Format","errorProjectionCapabilities":"The selected projection is not available for this base layer. Please choose another projection.","printInfor":"Print generated by Mapea","generating":"Generating georeferenced image","referenced":"Georeferenced image","projection":"Projection","downImg":"Download Image","downMap":"Download Map","delete":"Delete","down":"Download","title":"Title","notitle":"(No title)","cancel":"Cancel","accept":"Accept","download_modal":"The use of the information of the geographic data products and services defined in the <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"https://www.boe.es/boe/dias/2015/12/26/pdfs/BOE-A-2015-14129.pdf\\">Order FOM/2807/2015</a>, as well as its derivatives, entails the acceptance by the user of the general conditions of said order, specified in the following <a tabindex=\\"0\\" target=\\"_blank\\" href=\\"http://www.ign.es/resources/licencia/Condiciones_licenciaUso_IGN.pdf\\">license of use</a>, compatible with CC-BY 4.0.","use_license":"License of use","map":"Map","pnoa":"Image (PNOA)","screen":"Screen Image","fixeddescription":"This document has no legal validity","description":"Description","layout":"Layout","credits":"Print generated through api-core","base":"Base Cartography","zone":"zone","georefimageWld":"Georeferencing file (WLD)","typeDownload":"Select the type of download:","typeClient":"Screen view download","typeServer":"Downloading layers loaded by services","selectLayer":"Select the layer to download","clipBoard":"Copy to clipboard","layer_wms":"WMS returns a map in image format from a set of raster or vector layers. Allowing customization of layers through styles.","layer_wmts":" WMTS (Web Map Tile Service) es un estándar OGC para servir información geográfica en forma de tiles pregenerados a unas resoluciones específicas.","layer_tms":"TMS (Tile Map Service) layers are geographic information services in the form of tiles very similar to XYZ layers.","layer_xyz":"Las capas XYZ son servicios de información geográfica en forma de tiles. Cada tile representa una combinación de tres parámetros.","layer_raster":"Layers raster:","layer_vector":"Layers vector:","layer_geojson":"Despite not being an OGC standard (it is on its way to becoming one), it is a very widespread geographic information exchange format that, like WFS, allows all the elements to be on the client.","layers_wfs":"(Web Feature Service) is an OGC standard for the download and transfer of geographic information, where the geographic elements or features are transmitted in their entirety to the client.","layers_kml":"(Keyhole Markup Language). KML is an XML-based markup language for representing geographic data in three dimensions.","layer_OGCAPIFeatures":"(OGC API - FEATURES) is an OGC standard that provides the ability to create, modify, and query spatial data on the Web and specifies requirements and recommendations for APIs that want to follow a standard way of sharing feature data.","tooltip_georefimageepsg":"EPSG code of the georeferenced image","title_map":"Map printing","title_view":"View georeferenced image download","title_list":"Download georeferenced image from list","available_sources":"Available sources","maintain_view":"Maintain print view with DPI = 120"}')},printermap:{esPrintermap:oe,enPrintermap:ae},queryattributes:{esQueryattributes:JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles QueryAttributesControl.","no_data":"No hay datos para exportar."},"textHelp":{"help1":"La extensión tabla de atributos permite visualizar los datos temáticos de una fuente de datos espacial.","help2":"Además, permite hacer búsquedas en un atributo por un valor introducido por el usuario, búsquedas por vista, por área, limpiar los filtros y exportar los datos.","help3":"La información relevante a la extensión y su posible parametrización está documentada en","help4":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Tabla de atributos","values":"Valores","attribute_table":"Tabla de atributos","clean_filters":"Limpiar filtros aplicados","export":"Exportar datos","not_attributes":"No se han encontrado atributos.","close":"Cerrar","filters":"Filtros","bbox":"Por vista","area":"Por área","csv":"CSV (sólo atributos)","download":"Descargar","loading":"Cargando datos...","search":"Buscar","filter_by_bbox":"Filtrar resultados por vista actual","filter_by_area":"Filtrar resultados dibujando geometría","show_hide":"Ocultar / Mostrar","information":"Información","search_all_fields":"Búsqueda en todos los campos"}'),enQueryattributes:JSON.parse('{"exception":{"impl":"The implementation used cannot create QueryAttributesControl.","no_data":"No data for export."},"textHelp":{"help1":"The attribute table extension allows you to display the thematic data of a spatial data source.","help2":"In addition, it allows you to search an attribute by a value entered by the user, searches by view, by area, clearing the filters and exporting the data.","help3":"The information relevant to the extension and its possible parameterization is documented in","help4":"The example of use of its parameters can be checked in"},"tooltip":"Search by filters","values":"Values","attribute_table":"Table of attributes","clean_filters":"Clean applied filters","export":"Export data","not_attributes":"No attributes found.","close":"Close","filters":"Filters","bbox":"By view","area":"By area","csv":"CSV (only attributes)","download":"Download","loading":"Loading information...","search":"Search","filter_by_bbox":"Filter results by current view","filter_by_area":"Filter results by drawing geometry","show_hide":"Hide / Show","information":"Information","search_all_fields":"Search over all fields"}')},rescale:{esRescale:JSON.parse('{"tooltip":"Cambiar escala","insertscale":"Introducir escala","textHelp":{"help1":"La extensión de re-escalar cambia el nivel de zoom de un visualizador a la escala introducida por el usuario.","help2":"La información relevante a la extensión y su posible parametrización está documentada en","help3":"El ejemplo de uso de sus parámetros puede comprobarse en"}}'),enRescale:JSON.parse('{"tooltip":"Change scale","insertscale":"Insert scale","textHelp":{"help1":"The rescale extension changes the zoom level of a viewer to the scale entered by the user.","help2":"The information relevant to the extension and its possible parameterization is documented in","help3":"The example of use of its parameters can be checked in"}}')},selectiondraw:{esSelectiondraw:JSON.parse('{"exception":{"obsolete":"Mensaje para el desarrollador: M.plugin.SelectionDraw ha quedado obsoleto, utilice en su lugar M.plugin.VectorsManagement"},"tooltip":"Búsqueda por geometría","exception_selectiondrawcontrol":"La implementación usada no puede crear controles SelectionDrawImplControl"}'),enSelectiondraw:JSON.parse('{"exception":{"obsolete":"Developer message: M.plugin.SelectionDraw has been deprecated, use the M.plugin.VectorsManagement instead"},"tooltip":"Search by geometry","exception_selectiondrawcontrol":"The implementation used cannot create SelectionDrawImplControl controls"}')},selectionzoom:{esSelectionzoom:JSON.parse('{"exception":{"formatMRE":"No se ha especificado ningún valor para los parámetros bbox o zoom y centro.","parameterizationDeprecated":"Advertencia M.plugin.selectionzoom: la definición de parámetros establecidas en el plugin ha quedado obsoleta. Revise la nueva definición: https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/selectionzoom","formatBBoxAndZoom":"No se ha especificado ningún valor para los parámetros bbox o zoom."},"textHelp":{"help1":"Permite desplazar el mapa de una manera rápida a las vistas predefinidas: Península, Canarias, Baleares, Ceuta o Melilla.","help2":"La información relevante a la extensión y su posible parametrización está documentada en","help3":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Vistas predefinidas"}'),enSelectionzoom:JSON.parse('{"exception":{"formatMRE":"No value specified for the bbox or zoom and center parameters.","parameterizationDeprecated":"Warning M.plugin.selectionzoom: The parameter definition set in the plugin has been deprecated. Review the new definition: https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/selectionzoom","formatBBoxAndZoom":"No value specified for the bbox or zoom parameters."},"textHelp":{"help1":"Allows you to quickly move the map to the predefined views: Peninsula, Canary Islands, Balearic Islands, Ceuta or Melilla.","help2":"The information relevant to the extension and its possible parameterization is documented in","help3":"The example of use of its parameters can be checked in"},"tooltip":"Default views"}')},sharemap:{esSharemap:JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution."},"textHelp":{"help1":"Permite compartir la vista de mapa con las capas de información cargadas a través de un enlace Web. También proporciona el código HTML por si se quiere embeber el visualizador en otro portal Web.","help2":"1. Haga clic en “Copiar” para copiar el enlace al portapapeles. Puede pegarlo en un navegador, correo electrónico o mensaje.","help3":"2. Abre las diferentes redes sociales, que tenga ya instaladas en su dispositivo y genera la publicación para compartir la vista.","help4":"3. Genera el código HTML necesario para incrustar en una página web la vista actual.","help5":"Pulse \'Aceptar\' para cerrar el panel.","help6":"La información relevante a la extensión y su posible parametrización está documentada en","help7":"El ejemplo de uso de sus parámetros puede comprobarse en"},"title":"Compartir URL","text":"HTML embebido","copy":"Copiar","tooltip":"¡Copiado!","tooltipPanel":"Compartir"}'),enSharemap:JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls."},"textHelp":{"help1":"Allows you to share the map view with the loaded information layers through a Web link. It also provides the HTML code in case you want to embed the viewer in another Web portal.","help2":"1. Click “Copy” to copy the link to the clipboard. You can paste it into a browser, email, or message.","help3":"2. Open the different social networks that you already have installed on your device and generate the publication to share the view.","help4":"3. Generate the HTML code necessary to embed the current view in a web page.","help5":"Press \'OK\' to close the panel.","help6":"The information relevant to the extension and its possible parameterization is documented in","help7":"The example of use of its parameters can be checked in"},"title":"Share URL","text":"Embedded HTML","copy":"Copy","tooltip":"Copied!","tooltipPanel":"Share"}')},stylemanager:{esStylemanager:JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles StyleManager.","geomNotSupported":"Geometría no soportada","attributeAdded":"El atributo ya se ha agregado.","repeatedVariable":"Nombre de variable repetido","variableName":"No existe ninguna variable con ese nombre.","incorrectName":"Nombre de variable incorrecto.","emptyString":"No está permitido introducir una cadena vacía.","emptyVariable":"Nombre de variable vacía.","moreColorsRanges":"No pueden existir más colores que rangos.","numberColors":"Número de colores incorrecto.","chooseStyle":"Debe elegir al menos un estilo","choStyle":"Elija estilo","layerNoFeaturesLoad":"La capa no tiene features o aún no se han cargado.","chooseLayer":"Tiene que elegir una capa","choLayer":"Elija capa","numberColorAllowed":"Ha llegado al número máximo de colores permitidos","information":"Información"},"textHelp":{"help1":"La extensión de gestión de estilos cartográficos permite crear estilos a las capas vectoriales cargadas en un visualizador.","help2":"En el panel de la extensión se aprecian dos partes diferenciadas: la de simbología simple, que permite aplicar distintos estilos a toda la capa y avanzada, permitiendo aplicar estilos más complejos como líneas de flujo, agrupaciones (clusters), mapas de calor, categóricos, coropletas, simbología proporcional o simbología estadística.","help3":"Los 4 primeros botones del panel son; el selector de capa vectorial (amarillo), aplicar estilo a la capa (naranja), reiniciar al estilo por defecto (azul) y copiar estilo (verde). De este último botón se hablará más adelante.","help4":"En la parte de simbolización simple, se organiza en relleno, donde se puede aplicar el color de relleno de los objetos geográficos de la capa y su opacidad, por ejemplo naranja al 90% de opacidad:","help5":"también permite añadir un patrón superficial al relleno marcando la casilla de \'patrón\'. En el ejemplo, se asocia un patrón ladrillo de color verde:","help6":"En la parte de trazo, se asigna el color del borde de las geometrías de la capa:","help7":"además se puede asignar un espaciado lineal al borde añadiendo valores en \'Linedash\', por ejemplo:","help8":"también permite aplicar patrones al borde de las geometrías activando la opción \'patrón\'","help9":"La siguiente sección es el etiquetado de las geometrías mostradas en la capa, permite seleccionar el tipo de fuente, color, tamaño, alineación, habilitar el giro con el mapa o no y la rotación inicial:","help10":"también permite aplicar estilo al trazo de las etiquetas:","help11":"En el caso de capas puntuales, se puede añadir simbología pictórica ya sea en formato Fuente o mediante una imagen. Si es en formato imagen se selecciona icono. En la sección \'icono\' está el parámetro URL, donde se puede añadir la URL de una imagen (En el caso de ser SVG, permitirá cambios de estilo posteriormente).","help12":"Además se puede seleccionar tamaño, dónde debe ir el anclaje de la imagen, offset, escala de la imagen, habilitar rotación junto al mapa, rotación inicial y la opacidad.","help13":"Para el ejemplo se usará: https://componentes.cnig.es/api-core/assets/svg/circleIcons/accidenteGeografico.svg :","help14":"en el caso de tener un SVG, haciendo click sobre \'Modificar SVG\', se pueden cambiar el borde y relleno de la imagen:","help15":"En el caso de elegir la opción \'Fuente\', se añadirá un icono interno a la geometría puntual:","help16":"Para ello, se puede elegir una forma del icono, una familia (lo que permite añadir internamente otro icono), el radio de la forma, el tamaño del icono interior, el color, si se quiere con gradiente, el offset, la opacidad y habilitar la rotación del icono junto a la rotación inicial.","help17":"Hasta aquí estarían explicados los estilos cartográficos simples, que son los que se aplican a toda la capa en general.","help18":"Los estilos cartográficos avanzados, utilizan algoritmia geomática para la representación de la capa, de forma que representa cada geometría de la cade de una forma distinta, pudiendo representar distintos atributos o formas, lo que permite asociar rasgos de la realidad al estilo asociado a una capa.","help19":"Las líneas de flujo (o diagramas de Sankey) permiten asociar un valor y un color al inicio y al final de la línea, lo que visualmente lleva a un degradado mostrando una pérdida o aumento de valor según se recorre la línea. Uno de los más famosos es el mapa de flujo de la invasión napoleónica de Rusia (https://es.wikipedia.org/wiki/Diagrama_de_Sankey#/media/Archivo:Minard.png)","help20":"Para su creación, habrá que seleccionar los colores de inicio y fin, los valores de inicio y fin y el tipo, offset y color de la flecha ","help21":"La agrupación o \'cluster\', permite agrupar geometrías representando la cantidad de ellas que se encuentran a una distancia dada y a un intervalo de número de geometrías por grupo.","help22":"Para su creación, hay que elegir el número de rangos (cuántas geometrías va a haber en cada grupo), el color de relleno y borde, junto al radio, ancho y opacidad. Además, se puede mostrar la envoltura de cada grupo si se pasa el ratón por el grupo, se puede mostrar la cantidad , se puede seleccionar para desplegar cada geometría contenida en el grupo y se puede animar las transiciones entre zooms del visualizador. Por último, se puede parametrizar la distancia a la que se creará un grupo yel texto de la cantidad a mostrar.","help23":"Los mapas de calor permiten representar la densidad o distribución de geometrías en una zona del territorio o su ponderación por un atributo.","help24":"Para su creación, se elige en el caso de querer ponderar por un atributo, el nombre del mismo, la elección de colores para el gradiente de representación del mapa de calor, el tamaño de difuminado y el radio.","help25":"El estilo categórico permite representar atributos cualitativos mediante la variable visual del color, tono. Representa cada geometría con un tono distinto según su atributo.","help26":"Para su uso, se elige el atributo categórico y en el caso de querer personalizar algún valor en concreto, se haría click sobre el valor seleccionando su estilo.","help27":"El estilo por coropletas, permite representar valores cuantitativos asociados a las geometrías, mediante la variable visual del color, valor.","help28":"Para su uso, habrá que elegir ela tributo cuantitativo, el algoritmo de agrupación de los intervalos, el número de rangos y los colores de la rampa de color.","help29":"Los algoritmos de la agrupación del intervalo son: cuantil (los límites de cada intervalo se realizan en partes iguales a partir del valor máximo y mínimo), intervalos iguales (cada grupo de intervalos tienen las mismas geometrías), ruptura natural (los límites se asocian según las agrupaciones internas de los datos según su histograma) por progresión aritmética o geométrica (los límites del intervalo se asocian según estas progresiones matemáticas) y por media-sigma (se asocian los intervalos mediante los estadísticos de la media y la desviación estándar)","help30":"La simbología proporcional permite asociar a un valor cuantitativo un radio, mostrando los valores más altos a radios más grandes.","help31":"Para su uso, se elige el atributo cuantitativo, la escala (absoluta o con compensación de Flannery) y los radios máximos y mínimos de representación.","help32":"Por último, la simbología por estadísticos, permite representar más de un atributo cuantitativo en un gráfico estadístico.","help33":"Los tipos de gráfico ofrecidos son: de tarda, tarda 3D, donut y gráfico de barras.","help34":"A parte del tipo de gráfico, se puede elegir la rampa de color a usar en el gráfico,un offset en los ejes X e Y y el radio del gráfico.","help35":"Además, para cada atributo añadido, se puede mostrar la etiqueta y el estilo de la misma.","help36":"Por último, en el caso de copiar un estilo desde el botón de copiar de la cabecera de la extensión, se puede utilizar tanto para cargar estilos a una capa a nivel de objeto javascript como por apirest.","help37":"Para aplicar un estilo serializado a una capa en javascript se puede seguir el siguiente flujo de trabajo explicado en la documentación de estilos: https://github.com/IGN-CNIG/API-CNIG/wiki/2.1.2.-Simbolizaci%C3%B3n#serializaci%C3%B3n-de-estilos-vectoriales","help38":"En el caso de su utilización por api-rest, partiendo de:","help39":"Se puede añadir al final el estilo copiado:","help40":"Quedando la siguiente URL:","help41":"La información relevante a la extensión y su posible parametrización está documentada en","help42":"El ejemplo de uso de sus parámetros puede comprobarse en"},"selectLayer":"Seleccione una capa...","applyStyle":"Aplicar estilo","clearStyle":"Limpiar estilo","symbology":"Simbología","heatMap":"Mapa de calor","category":"Categoría","choropleths":"Coropleta","proportional":"Proporcional","statistic":"Estadísticos","attributeValue":"Valor de atributo","preview":"Previsualización","others":"Otros","type":"Tipo","options":"Opciones","pointOptions":"Opciones de punto","lineOptions":"Opciones de línea","polygonOptions":"Opciones de polígono","opacity":"Opacidad","radius":"Radio","width":"Ancho","pattern":"Patrón","size":"Tamaño","space":"Espacio","rotation":"Rotación","scale":"Escala","none":"Ninguno","text":"Texto","font":"Fuente","horizontalAlignment":"Alineación horizontal","verticalAlignment":"Alineación vertical","enableRotation":"Habilitar rotación con el mapa","fitGeometry":"Ajustar a geometría","minimumWidth":"Ancho Mínimo","smooth":"Suavizar","overflow":"Desbordar","hidden":"Oculto","visible":"Visible","ellipsis":"Puntos suspensivos","labelStroke":"Trazo de la etiqueta","label":"Trazo","anchorage":"Anclaje","form":"Forma","family":"Familia","iconSize":"Tamaño icono","gradient":"Gradiente","iconColor":"Color de icono","legend":"Leyenda","showLabel":"Mostrar etiqueta","fill":"Relleno","border":"Borde","bulk":"Grosor","attributes":"Atributos","attribute":"Atributo","minimumRadius":"Radio mínimo","maximumRadius":"Radio máximo","addColor":"Añadir color","blur":"Difuminado","ranks":"Rangos","rank":"Rango","numberRanks":"Número de rangos","since":"Desde","until":"Hasta","envelope":"Envoltura","quantity":"Cantidad","selectable":"Seleccionable","animated":"Animado","distance":"Distancia","points":"Puntos","fanDistance":"Distancia de abanico","textColor":"Color de texto","algorithm":"Algoritmo","arithmeticProgression":"Progresión aritmética","equalIntervals":"Intervalos iguales","geometricProgression":"Progresión geométrica","meanSigma":"Media sigma","naturalBreaks":"Rupturas naturales","quantile":"Cuantil","colorRamp":"Rampa de color","initial":"Inicial","final":"Final","cake":"Tarta","tDcake":"Tarta 3D","donut":"Donut","graphic":"Gráfico","classic":"Clásico","dark":"Oscuro","pale":"Pálido","neon":"Neón","pie":"Pastel","xAxis":"Eje X","yAxis":"Eje Y","addAttribute":"Añadir atributo","bevel":"Bisel","miter":"Inglete","rounded":"Redondeado","extreme":"Extremo","square":"Cuadrado","labelText":"Etiqueta","icon":"Icono","stroke":"Trazo","center":"Centro","justified":"Justificado","left":"Izquierda","right":"Derecha","alphabetical":"Alfabetico","down":"Abajo","hanging":"Colgando","ideographic":"Ideografico","up":"Arriba","patternOptions":"Opciones de patrón","adjust":"Ajustar","ranges":"Rangos","flowLine":"Línea de flujo","absolute":"Absoluto","arrow":"Flecha","arrowColor":"Color flecha","generateSerialized":"Generar estilo serializado","serializedStyle":"Estilo serializado","clipboard":"Copiado estilo serializado en el portapapeles","modifySVG":"Modificar SVG","infoURL":"Se encuentra disponible una galería de ficheros SVG en <a target=\'blank\' href=\'https://componentes.cnig.es/api-core/api/actions/resources/svg\'>https://componentes.cnig.es/api-core/api/actions/resources/svg</a>","tooltip":"Gestor de estilos"}'),enStylemanager:JSON.parse('{"exception":{"impl":"The implementation used cannot create StyleManager controls.","geomNotSupported":"Geometry not supported","attributeAdded":"Attribute has already been added.","repeatedVariable":"Repeated variable name","variableName":"No variable with that name exists.","incorrectName":"Incorrect variable name.","emptyString":"It is not allowed to enter an empty string.","emptyVariable":"Empty variable name.","moreColorsRanges":"There cannot be more colors than ranges.","numberColors":"Incorrect number of colors.","chooseStyle":"You must choose at least one style","choStyle":"Choose style","layerNoFeaturesLoad":"The layer has no features or they have not been loaded yet.","chooseLayer":"You have to choose a layer","choLayer":"Choose layer","numberColorAllowed":"You have reached the maximum number of colors allowed","information":"Information"},"textHelp":{"help1":"The cartographic style management extension allows you to create styles for vector layers loaded in a viewer.","help2":"In the extension panel you can see two different parts: the simple symbology part, which allows you to apply different styles to the entire layer, and the advanced part, which allows you to apply more complex styles such as flow lines, clusters, maps of heat, categorical, choropleth, proportional symbology or statistical symbology.","help3":"The first 4 buttons of the panel are; the vector layer selector (yellow), apply style to the layer (orange), reset to the default style (blue) and copy style (green). This last button will be discussed later.","help4":"In the simple symbolization part, it is organized in fill, where you can apply the fill color of the layer\'s geographic objects and their opacity, for example orange at 90% opacity:","help5":"also allows you to add a surface pattern to the fill by checking the \'pattern\' box. In the example, a green brick pattern is associated:","help6":"In the stroke part, the border color of the layer geometries is assigned:","help7":"you can also assign linear spacing to the border by adding values in \'Linedash\', for example:","help8":"also allows you to apply patterns to the edges of geometries by activating the \'pattern\' option","help9":"The next section is the labeling of the geometries displayed on the layer, it allows you to select the font type, color, size, alignment, enable rotation with the map or not and the initial rotation:","help10":"also allows you to style the labels\' stroke:","help11":"In the case of specific layers, pictorial symbology can be added either in Source format or through an image. If it is in image format, icon is selected. In the \'icon\' section there is the URL parameter, where you can add the URL of an image (If it is SVG, it will allow style changes later).","help12":"In addition you can select size, where the image anchor should go, offset, image scale, enable rotation next to the map, initial rotation and opacity.","help13":"For the example we will use: https://componentes.cnig.es/api-core/assets/svg/circleIcons/accidenteGeografico.svg :","help14":"if you have an SVG, by clicking on \'Modify SVG\', you can change the border and padding of the image:","help15":"If you choose the \'Source\' option, an internal icon will be added to the point geometry:","help16":"To do this, you can choose a shape of the icon, a family (which allows you to add another icon internally), the radius of the shape, the size of the inner icon, the color, if you want with a gradient, the offset, opacity and enable icon rotation next to the initial rotation.","help17":"Up to this point the simple cartographic styles would be explained, which are those that are applied to the entire layer in general.","help18":"Advanced cartographic styles use geomatic algorithms for the representation of the layer, so that each geometry of the chain is represented in a different way, being able to represent different attributes or shapes, which allows us to associate features of reality with the style associated with a layer.","help19":"Flow lines (or Sankey diagrams) allow you to associate a value and a color at the beginning and end of the line, which visually leads to a gradient showing a loss or increase in value as the line is traversed One of the most famous is the flow map of the Napoleonic invasion of Russia (https://es.wikipedia.org/wiki/Sankey_Diagram#/media/File:Minard.png)","help20":"To create it, you will have to select the start and end colors, the start and end values and the type, offset and color of the arrow","help21":"The grouping or \'cluster\' allows geometries to be grouped together, representing the number of them that are at a given distance and at an interval of number of geometries per group.","help22":"To create it, you must choose the number of ranges (how many geometries will be in each group), the fill and border color, along with the radius, width and opacity. In addition, you can show the envelope of each group if you hover the mouse over the group, You can display the quantity, you can select to display each geometry contained in the group and you can animate the transitions between zooms of the viewer. Finally, you can parameterize the distance at which a group will be created and the text of the quantity to be displayed. .","help23":"Heat maps allow you to represent the density or distribution of geometries in an area of the territory or their weighting by an attribute.","help24":"For its creation, if you want to weight by an attribute, you choose its name, the choice of colors for the heat map representation gradient, the blur size and the radius.","help25":"The categorical style allows qualitative attributes to be represented using the visual variable of color and tone. It represents each geometry with a different tone depending on its attribute.","help26":"To use it, choose the categorical attribute and if you want to customize a specific value, click on the value and select its style.","help27":"The choropleth style allows representing quantitative values associated with geometries, through the visual variable of color, value.","help28":"To use it, you will have to choose the quantitative tribute, the interval grouping algorithm, the number of ranges and the colors of the color ramp.","help29":"The interval grouping algorithms are: quantile (the limits of each interval are made in equal parts from the maximum and minimum value), equal intervals (each group of intervals have the same geometries), natural break (the limits are associated according to the internal groupings of the data according to their histogram) by arithmetic or geometric progression (the limits of the interval are associated according to these mathematical progressions) and by mean-sigma (the intervals are associated using the statistics of the mean and the standard deviation)","help30":"Proportional symbology allows a quantitative value to be associated with a radius, showing higher values at larger radii.","help31":"To use it, choose the quantitative attribute, the scale (absolute or with Flannery compensation) and the maximum and minimum representation radii.","help32":"Finally, statistical symbology allows you to represent more than one quantitative attribute in a statistical graph.","help33":"The chart types offered are: tard, 3D tard, donut and bar chart.","help34":"Apart from the type of graph, you can choose the color ramp to use in the graph, an offset on the X and Y axes and the radius of the graph.","help35":"In addition, for each added attribute, the label and its style can be displayed.","help36":"Finally, in the case of copying a style from the copy button in the extension header, it can be used both to load styles to a layer at the javascript object level or by apirest.","help37":"To apply a serialized style to a layer in javascript you can follow the following workflow explained in the styles documentation: https://github.com/IGN-CNIG/API-CNIG/wiki/2.1. 2.-Symbolization%C3%B3n#serialization%C3%B3n-of-vector-styles","help38":"In the case of use by api-rest, starting from:","help39":"You can add the copied style at the end:","help40":"Leaving the following URL:","help41":"The information relevant to the extension and its possible parameterization is documented in","help42":"The example of use of its parameters can be checked in"},"selectLayer":"Select a layer...","applyStyle":"Apply Style","clearStyle":"Clear Style","symbology":"Symbology","heatMap":"Heat Map","category":"Category","choropleths":"Choroplet","proportional":"Proportional","statistic":"Statistics","attributeValue":"Attribute Value","preview":"Preview","others":"Others","type":"Type","options":"Options","pointOptions":"Point Options","lineOptions":"Line Options","polygonOptions":"Polygon Options","opacity":"Opacity","radius":"Radius","width":"Width","pattern":"Pattern","size":"Size","space":"Space","rotation":"Rotation","scale":"Scale","none":"None","text":"Text","font":"Font","horizontalAlignment":"Horizontal Alignment","verticalAlignment":"Vertical Alignment","enableRotation":"Enable rotation with the map","fitGeometry":"Fit Geometry","minimumWidth":"Minimum Width","smooth":"Smooth","overflow":"Overflow","hidden":"Hidden","visible":"Visible","ellipsis":"Ellipsis","labelStroke":"Label Stroke","label":"Stroke","anchorage":"Anchorage","form":"Form","family":"Family","iconSize":"Icon size","gradient":"Gradient","iconColor":"Icon Color","legend":"Legend","showLabel":"Show Label","fill":"Fill","border":"Border","bulk":"Thickness","attributes":"Attributes","attribute":"Attribute","minimumRadius":"Minimum radius","maximumRadius":"Maximum Radius","addColor":"Add Color","blur":"Blur","ranks":"Ranks","rank":"Rank","numberRanks":"Number of ranks","since":"Since","until":"Until","envelope":"Envelope","quantity":"Quantity","selectable":"Selectable","animated":"Animated","distance":"Distance","points":"Points","fanDistance":"Fan Distance","textColor":"Text Color","algorithm":"Algorithm","arithmeticProgression":"Arithmetic Progression","equalIntervals":"Equal Intervals","geometricProgression":"Geometric Progression","meanSigma":"Mean Sigma","naturalBreaks":"Natural Breaks","quantile":"Quantile","colorRamp":"Color Ramp","initial":"Initial","final":"Final","cake":"Cake","tDcake":"3D Cake","donut":"Donut","graphic":"Graphic","classic":"Classic","dark":"Dark","pale":"Pale","neon":"Neon","pie":"Cake","xAxis":"X axis","yAxis":"Y axis","addAttribute":"Add Attribute","bevel":"Bezel","miter":"Miter","rounded":"Rounded","extreme":"Extreme","square":"Square","labelText":"Label","icon":"Icon","stroke":"Stroke","center":"Center","justified":"Justified","left":"Left","right":"Right","alphabetical":"Alphabetical","down":"Down","hanging":"Hanging","ideographic":"Ideographic","up":"Up","patternOptions":"Pattern options","adjust":"Adjust","ranges":"Ranges","flowLine":"Flowline","absolute":"Absolute","arrow":"Arrow","arrowColor":"Arrow color","generateSerialized":"Generate serialized style","serializedStyle":"Serialized style","clipboard":"Copied serialized style to clipboard","modifySVG":"Modify SVG","infoURL":"A gallery of SVG files is available at <a target=\'blank\' href=\'https://componentes.cnig.es/api-core/api/actions/resources/svg\'>https://componentes.cnig.es/api-core/api/actions/resources/svg</a>","tooltip":"Style manager"}')},timeline:{esTimeline:JSON.parse('{"tooltip":"Línea de tiempo","title":"Línea de tiempo","play":"Iniciar","pause":"Parar","excepcion":"La implementación usada no puede crear controles TimelineControl","intervals_error":"Los intervalos no fueron definidos correctamente","initValue":"Valor inicio","endValue":"Valor final","textHelp":{"help1":"La extensión línea de tiempo.","help2":"La extensión es personalizable, por lo que puede cambiar de un visualizador a otro.","help3":"La línea de tiempo permite hacer filtros espaciales en capas a partir de un atributo de tiempo, o añadir una fecha a una capa y filtrar por ella.","help4":"La información relevante a la extensión y su posible parametrización está documentada en","help5":"El ejemplo de uso de sus parámetros puede comprobarse en"}}'),enTimeline:JSON.parse('{"tooltip":"Timeline","title":"Timeline","play":"Play","pause":"Pause","excepcion":"The implementation used cannot create timelineControl controls","intervals_error":"The intervals were not defined correctly","initValue":"Start value","endValue":"Final value","textHelp":{"help1":"The timeline extension.","help2":"The extension is customizable, so you can switch from one viewer to another.","help3":"The timeline allows you to make spatial filters on layers based on a time attribute, or add a date to a layer and filter by it.","help4":"The information relevant to the extension and its possible parameterization is documented in","help5":"The example of use of its parameters can be checked in"}}')},toc:{esToc:JSON.parse('{"exception":{"toc_obsolete":"Mensaje para el desarrollador: M.plugin.TOC ha quedado obsoleto, utilice en su lugar M.plugin.Layerswitcher"},"tooltip":"Capas","capas":"Capas"}'),enToc:JSON.parse('{"exception":{"toc_obsolete":"Message to the developer: M.plugin.TOC has been deprecated, please use M.plugin.Layerswitcher instead"},"tooltip":"Layers","capas":"Layers"}')},topographicprofile:{esTopographicprofile:JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Perfiltopografico.","obsolete":"Mensaje para el desarrollador: M.plugin.Topographicprofile ha quedado obsoleto, utilice en su lugar M.plugin.VectorsManagement"},"tooltip":"Perfil Topográfico","title":"Perfil Topográfico","profil":{"title":"Perfil Topográfico","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)"}}'),enTopographicprofile:JSON.parse('{"exception":{"impl":"The implementation used cannot create Perfiltopografico controls.","obsolete":"Developer message: M.plugin.Topographicprofile has been deprecated, use the M.plugin.VectorsManagement instead"},"tooltip":"Topography Profile","title":"Topography Profile","profil":{"title":"Topographic Profile","zmin":"Min Alt.","zmax":"Max Alt.","altitude":"Alt.","distance":"Full Distance","ytitle":"Altitude (m)","xtitle":"Distance (km)"}}')},transparency:{esTransparency:JSON.parse('{"tooltip":"Transparencia","layers":"Capas","radius":"Radio","transparency":"Transparencia","errorLayer":"Transparency: No se ha especificado una capa válida sobre la que aplicar el efecto","excepcion":"La implementación usada no puede crear controles TransparencyControl","transparency_obsolete":"Mensaje para el desarrollador: M.plugin.Transparency ha quedado obsoleto, utilice en su lugar M.plugin.Comparators"}'),enTransparency:JSON.parse('{"tooltip":"Transparency","layers":"Layers","radius":"Radius","transparency":"Transparency","errorLayer":"Transparency: No valid layer specified on which to apply the effect","excepcion":"The implementation used cannot create TransparencyControl controls","transparency_obsolete":"Message to developer: M.plugin.Transparency has been deprecated, please use M.plugin.Comparators instead"}')},vectors:{esVectors:JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles VectorsControl.","unknown_geom":"Geometría no reconocida.","format_not_selected":"No se ha seleccionado formato de descarga.","size":"El fichero seleccionado sobrepasa el máximo de 20 MB permitido.","load":"Error al cargar el fichero.","no_geoms":"No se han detectado geometrías en este fichero.","load_correct":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","extension":"No se ha insertado una extensión de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX, GML y GeoJSON.","not_extent":"No se puede obtener la extensión de la capa.","no_features":"Esta capa todavía no tiene ninguna entidad. Añada entidades primero.","query_profile":"No se han podido consultar los datos de altitud para esta entidad.","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","error_features_wfs":"No se han podido cargar features de la capa. Inténtalo aumentando el nivel de zoom en la zona de interés.","error_no_features_wfs":"No se han podido cargar features de la capa. Inténtalo de nuevo en otra zona.","error_wfs":"No se ha podido cargar el servicio WFS","wfs_zoom":"Aumente el nivel de zoom * niveles si quiere añadir este servicio WFS","url_not_valid":"La URL introducida no es válida","obsolete":"Mensaje para el desarrollador: M.plugin.Vectors ha quedado obsoleto, utilice en su lugar M.plugin.VectorsManagement"},"help_template":{"help":"Ayuda","create_layers":"Crear capas de puntos (<span class=\'icon-points\'></span>), de líneas/rutas (<span class=\'icon-lines\'></span>) o polígonos (<span class=\'icon-polygon\'></span>)","create_layers_content":"<p>Al hacer clic sobre <span class=\'icon-points\'></span>, <span class=\'icon-lines\'></span> o <span class=\'icon-polygon\'></span> se añadirá una capa vacía con un nombre provisional. <b>Cada capa puede tener uno o varios elementos de dibujo y se pueden tener tantas capas como se desee.</b></p><p>Si quiere cambiar el nombre de la capa pulse sobre el nombre de la capa e introduzca el nombre que desea.</p><p>Con la opción <b>\\"Añadir Geometría\\"</b> (<span class=\'icon-add m-vector-layer-add\'></span>) seleccionada podemos añadir nuevos elementos de dibujo a nuestra capa. El procedimiento de dibujo tiene las siguientes características:</p><ul><li><b>Un clic dibuja un punto o vértice</b> de línea o de polígono.</li><li><b>Doble clic finaliza el dibujo</b> de línea o polígono.</li><li>Pulsando la tecla <b>ESCape se interrumpe y borra el dibujo</b> que estuviera ejecutándose en ese momento.</li><li>Mientras se está realizando un elemento de dibujo, al pulsar la combinación de teclas <b>Ctrl+Z se elimina el último punto dibujado</b> dentro de la geometría en curso. Deshace, elimina el último vértice que se está dibujando.</li><li>Para elementos lineales o superficiales, al mantener pulsada la tecla \\"Shift\\" o \\"Mayúscula\\" durante un proceso de dibujo, se realiza el <b>dibujo de forma continua o libre</b> y no vértice a vértice.</li></ul>","add_wfs":"Añadir capa WFS","add_wfs_content":"<p>Para <b>descargar Features</b> añada la URL del servicio WFS o seleccione uno de los que se encuentran <b>preconfigurados</b> y elija la capa que sea de su interés. Al igual que con el resto de elementos puede editar su color y grosor. <b>La consulta de estos servicios se encuentra limitada y sólo están activos para niveles de zoom superiores al nivel 12</b>.</p>","loaded_layer":"Cargar ruta o capa (<span class=\'icon-upload\'></span>)","loaded_layer_content":"<p>Haga clic en el botón <span class=\'icon-upload\'></span> y seleccione el fichero en su ordenador personal. También, puede desde su el explorador arrastrar el fichero a la zona de mapa y el fichero quedará cargado. Los formatos aceptados son: <b> KML, SHP(.zip), GPX, GML y GeoJSON.</b> Una vez añadida al panel, el comportamiento es igual al resto de capas y rutas vectoriales.</p>"},"tooltip":"Capas Vectoriales","change_name":"Cambiar nombre","close":"Cerrar","info":"Información","warning":"Advertencia","coordinates":"Coordenadas","length":"Longitud","area":"Área","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)","title_plugin":"Capas Vectoriales","vector_layers":"Capas vectoriales","profile":"Perfil Topográfico","add_point_layer":"Crear capas de puntos","add_line_layer":"Crear capas de líneas/rutas","add_poly_layer":"Crear capas de polígonos","add_wfs_layer":"Añadir capa WFS","load_layer":"Cargar ruta o capa","point_layer":"Capa puntual","line_layer":"Capa lineal","poly_layer":"Capa poligonal","show_hide":"Ver/Ocultar","add_geom":"Añadir geometría","edit_geom":"Editar geometría","edit_geom_line":"Editar/Perfil","layer_zoom":"Zoom a la capa","download_layer":"Descargar capa","delete_layer":"Eliminar capa","color":"Color","thickness":"Grosor","line":"Trazo","delete_geom":"Borrar geometría","query_profile":"Perfil topográfico","accepted":"Los formatos aceptados son KML, SHP (.zip), GPX, GML y GeoJSON.","select_file":"Selecciona el fichero","download":"Descargar","change":"Cambiar","expand":"Mostrar","collapse":"Ocultar","url_service":"URL del servicio","query":"Consultar","clean":"Limpiar búsqueda","select_service":"Selecciona una capa","select":"Seleccionar","loading":"Cargando","cancel":"Cancelar","reload_from_view":"Recargar desde la vista","loaded_services":"Servicios precargados","availables":"Servicios precargados disponibles","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","title":"Título","abstract":"Resumen","responsible":"Responsable","access_constraints":"Restricciones de acceso","symbology":"Simbología","symbology_profile":"Simbología/Perfil","generating_profile":"Generando perfil","calculate":"Calcular","calculating":"Calculando","try_again":"No se ha podido realizar la consulta. Por favor, inténtelo de nuevo más tarde","from_url":"Desde URL","url_layer":"URL del fichero","add_layer":"Añadir capa","add_from_url":"Añadir capa desde URL","add_points":"Añadir puntos"}'),enVectors:JSON.parse('{"exception":{"impl":"The implementation used cannot create VectorsControl controls.","unknown_geom":"Unrecognized geometry.","format_not_selected":"No download format selected.","size":"The selected file exceeds the maximum 20 MB allowed.","load":"Error when loading the file.","no_geoms":"No geometries have been detected in this file.","load_correct":"Error when loading the file. Check that it is the right file.","extension":"A not allowed file extension has been inserted. The allowed ones are: KML, SHP(.zip), GPX, GML and GeoJSON.","not_extent":"Cannot get the layer extension.","no_features":"This layer does not yet have any entities. Add entities first.","query_profile":"The altitude data for this entity could not be queried.","capabilities":"An error has occurred in obtaining the GetCapabilities document","valid_url":"You must provide a valid URL","empty":"The fields are empty","error_features_wfs":"Unable to load layer features. Try increasing the zoom level in the area of interest.","error_no_features_wfs":"Unable to load layer features. Try again in another area.","error_wfs":"Could not load WFS service","wfs_zoom":"Increase the zoom in * levels if you want to add this WFS service","url_not_valid":"The entered URL is not valid","obsolete":"Developer message: M.plugin.Vectors has been deprecated, use the M.plugin.VectorsManagement instead"},"help_template":{"help":"Help","create_layers":"Create points (<span class=\'icon-points\'></span>), lines/routes (<span class=\'icon-lines\'></span>), or polygons (<span class=\'icon-polygon\'></span>) layers","create_layers_content":"<p>When clicking on <span class=\'icon-points\'></span>, <span class=\'icon-lines\'></span> or <span class=\'icon-polygon\'></span > an empty layer with a temporary name will be added. <b>Each layer can have one or several drawing elements and you can have as many layers as you want.</b></p><p>If you want to change the name of the layer, click on the name of the layer and enter the name you want.</p><p>With the option <b>\\"Add Geometry\\"</b> (<span class=\'icon-add m-vector-layer-add\'></span>) selected we can add new drawing elements to our layer. The drawing procedure has the following characteristics:</p><ul><li><b>One click draws a point or vertex</b> of line or polygon.</li><li><b>Double click ends drawing</b> of line or polygon.</li><li>Pressing the <b>ESCape key interrupts and deletes the drawing</b> that was running at that moment.</li><li >While an element is being drawn, pressing the <b>Ctrl+Z key combination deletes the last drawn point</b> within the current geometry. Undo, removes the last vertex being drawn.</li><li>For linear or surface elements, holding down the \\"Shift\\" or \\"Caps Lock\\" key during a drawing process performs the <b>drawing continuously or freely</b> and not vertex by vertex.</li></ul>","add_wfs":"Add WFS layer","add_wfs_content":"<p>To <b>download Features</b> add the URL of the WFS service or select one of the <b>preconfigured ones</b> and choose the layer that is of interest to you. As with the rest of the elements you can edit their color and thickness.<b> The consultation of these services is limited and they are only active for zoom levels higher than level 12</b>.</p>","loaded_layer":"Load route or layer (<span class=\'icon-upload\'></span>)","loaded_layer_content":"<p>Click the <span class=\'icon-upload\'></span> button and select the file on your personal computer. Also, you can from your browser drag the file to the map area and the file will be loaded. The accepted formats are: <b> KML, SHP(.zip), GPX, GML and GeoJSON.</b> Once added to the panel, the behavior is the same as the rest of the layers and vector routes.</p>"},"tooltip":"vector layers","change_name":"Change name","close":"Close","info":"Information","warning":"Warning","coordinates":"Coordinates","length":"Length","area":"Area","zmin":"Min. Height","zmax":"Max. Height","altitude":"Height","distance":"Total Dist.","ytitle":"Height (m)","xtitle":"Distance (km)","title_plugin":"Vector Layers","vector_layers":"Vector layers","profile":"Topographic Profile","add_point_layer":"Create points layers","add_line_layer":"Create lines layers/routes","add_poly_layer":"Create polygons layers","add_wfs_layer":"Add WFS layer","load_layer":"Load route or layer","point_layer":"Point layer","line_layer":"Linear layer","poly_layer":"Polygonal layer","show_hide":"Show/Hide","add_geom":"Add geometry","edit_geom":"Edit geometry","edit_geom_line":"Edit/Profile","layer_zoom":"Zoom to the layer","download_layer":"Download layer","delete_layer":"Remove layer","color":"Color","thickness":"Thickness","line":"Stroke","delete_geom":"Remove geometry","query_profile":"Topographic profile","accepted":"The accepted formats are KML, SHP (.zip), GPX, GML and GeoJSON.","select_file":"Select the file","download":"Download","change":"Change","expand":"Show","collapse":"Hide","url_service":"Service URL","query":"Consult","clean":"Clean search","select_service":"Select layer","select":"Select","loading":"Loading","cancel":"Cancel","reload_from_view":"Reload from the view","loaded_services":"Preloaded services","availables":"Preloaded services available","show_service_info":"Show service information","hide_service_info":"Hide service information","title":"Title","abstract":"Abstract","responsible":"Responsible","access_constraints":"Access constraints","symbology":"Symbology","symbology_profile":"Symbology/Profile","generating_profile":"Generating profile","calculate":"Calculate","calculating":"Calculating","try_again":"The query could not be executed. Please try again later","from_url":"From URL","url_layer":"File URL","add_layer":"Add layer","add_from_url":"Add layer from URL","add_points":"Add points"}')},viewhistory:{esViewhistory:JSON.parse('{"nextView":"Vista siguiente","previousView":"Vista anterior","viewhistory_obsolete":"Mensaje para el desarrollador: M.plugin.ViewHistory ha quedado obsoleto, utilice en su lugar M.plugin.ViewManagement"}'),enViewhistory:JSON.parse('{"nextView":"Next View","previousView":"Previous View","viewhistory_obsolete":"Message to the developer: M.plugin.ViewHistory has been deprecated, please use M.plugin.ViewManagement instead"}')},xylocator:{esXylocator:JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles XYLocatorControl.","wrong_coords":"Las coordenadas introducidas no son correctas.","transforming":"Error realizando la transformación.","wrong_values":"Algún valor introducido no es correcto. Recuerda que los minutos y los segundos tienen que tener un valor entre 0 y 59 y los grados entre 0 y 180.","xylocator_obsolete":"Mensaje para el desarrollador: M.plugin.XYLocator ha quedado obsoleto, utilice en su lugar M.plugin.Locator"},"coordinateresult":"coordinateresult","tooltip":"Buscar por coordenadas","geographic":"Geograficas","zone":"huso","title":"Localizador por coordenadas","srs":"Sistema de coordenadas","longitude":"Longitud","latitude":"Latitud","locate":"Localizar","clean":"Limpiar","north":"Norte","south":"Sur","east":"Este","west":"Oeste","dms":"GMS","dd":"GD"}'),enXylocator:JSON.parse('{"exception":{"impl":"The implementation used cannot create XYLocatorControl.","wrong_coords":"The coordinates entered are not correct.","transforming":"Error performing the transformation.","wrong_values":"Some value entered are not correct. Remember that minutes and seconds must be between 0 and 59 and degrees between 0 and 180.","xylocator_obsolete":"Message to the developer: M.plugin.XYLocator has been deprecated, please use M.plugin.Locator instead"},"coordinateresult":"coordinateresult","tooltip":"Search by coordinates","geographic":"Geographic","zone":"zone","title":"Coordinate locator","srs":"Coordinate system","longitude":"Longitude","latitude":"Latitude","locate":"Locate","clean":"Clean","north":"North","south":"South","east":"East","west":"West","dms":"DMS","dd":"DD"}')},zoomextent:{esZoomextent:JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles ZoomExtentControl.","zoomextent_obsolete":"Mensaje para el desarrollador: M.plugin.ZoomExtent ha quedado obsoleto, utilice en su lugar M.plugin.ViewManagement"},"tooltip":"Zoom al recuadro"}'),enZoomextent:JSON.parse('{"exception":{"impl":"The implementation used cannot create ZoomExtentControl.","zoomextent_obsolete":"Message to the developer: M.plugin.ZoomExtent has been deprecated, please use M.plugin.ViewManagement instead"},"tooltip":"Zoom to box"}')},zoompanel:{esZoompanel:JSON.parse('{"tooltip":"Herramientas de zoom","zoomin":"Aumentar zoom","zoomout":"Disminuir zoom","previouszoom":"Zoom anterior","nextzoom":"Zoom posterior","rectzoom":"Zoom ventana","zoom_extent":"Zoom a la extensión del mapa","zoompanel_obsolete":"Mensaje para el desarrollador: M.plugin.ZoomPanel ha quedado obsoleto, utilice en su lugar M.plugin.ViewManagement"}'),enZoompanel:JSON.parse('{"tooltip":"Zoom tools","zoomin":"Zoom In","zoomout":"Zoom Out","previouszoom":"Previous history","nextzoom":"Next history","rectzoom":"Rectangular zoom","zoom_extent":"Zoom to the map extension","zoompanel_obsolete":"Message to the developer: M.plugin.ZoomPanel has been deprecated, please use M.plugin.ViewManagement instead"}')},viewshed:{esViewshed:JSON.parse('{"tooltip":"Calcular área de visibilidad","calculating":"Realizando geoproceso de análisis","warning":"Advertencia","outbox":"Las coordenadas no están dentro del ámbito de cálculo","error_query":"No se ha podido realizar la consulta","active_viewshed":"Hacer click en punto del mapa","clear":"Limpiar resultado"}'),enViewshed:JSON.parse('{"tooltip":"Calculate visibility area","calculating":"Performing geoprocessing analysis","warning":"Warning","outbox":"he coordinates are not within the calculation range","error_query":"Unable to perform query","active_viewshed":"Click a point on the map","clear":"Clean result"}')},viewmanagement:{esViewmanagement:JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles ViewManagementControl.","impl_zoomextent":"La implementación usada no puede crear controles ZoomExtentControl.","impl_viewhistory":"La implementación usada no puede crear controles ViewHistoryControl.","impl_zoompanel":"La implementación usada no puede crear controles ZoomPanelControl.","impl_predefinedzoom":"La implementación usada no puede crear controles PredefinedZoomControl.","no_controls":"El plugin ViewManagement necesita activar al menos un control."},"textHelp":{"help1":"La extensión gestión de la vista, permite interactuar mediante un panel con los controles de la vista.","help2":"La extensión es personalizable, por lon que puede cambiar de un visualizador a otro.","help3":"El panel de la extensión tiene varios controles, cada uno con sus propias herramientas.","help4":"El primero de ellos es el control de vistas predefinidas, que por defecto permite volver a una vista por defecto","help5":"El control de acercar la vista por rectángulo. Habilita el dibujo de un rectángulo mediante dos puntos en el visualizador, que al terminarlo, hace zoom al mismo.","help6":"El control de histórico permite ir haca delante y hacia atrás a las distintas vistas que se han ido almacenando en el visualizador","help7":"El control de acercar/alejarse, permite mediante dos botones hacer \'zoom in\' o \'zoom out\' en el visualizador.","help8":"La información relevante a la extensión y su posible parametrización está documentada en","help9":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Gestión de la vista","viewhistory":"Historial","nextView":"Vista siguiente","previousView":"Vista anterior","predefinedzoom":"Zoom predefinido","zoomextent":"Zoom al recuadro","zoompanel":"Herramientas de zoom","zoomin":"Aumentar zoom","zoomout":"Disminuir zoom"}'),enViewmanagement:JSON.parse('{"exception":{"impl":"The implementation used cannot create ViewManagementControl.","impl_zoomextent":"The implementation used cannot create ZoomExtentControl.","impl_viewhistory":"The implementation used cannot create ViewHistoryControl.","impl_zoompanel":"The implementation used cannot create ZoomPanelControl.","impl_predefinedzoom":"The implementation used cannot create PredefinedZoomControl.","no_controls":"The ViewManagement plugin needs to activate at least one control."},"textHelp":{"help1":"The view management extension allows you to interact through a panel with the view controls.","help2":"The extension is customizable, so it can change from one viewer to another.","help3":"The extension panel has several controls, each with its own tools.","help4":"The first of them is the predefined views control, which by default allows you to return to a default view","help5":"The zoom in view by rectangle control. Enables the drawing of a rectangle using two points in the viewer, which when finished, zooms into it.","help6":"The history control allows you to go forward and backward to the different views that have been stored in the viewer","help7":"The zoom in/out control allows using two buttons to \'zoom in\' or \'zoom out\' in the viewer.","help8":"The information relevant to the extension and its possible parameterization is documented in","help9":"The example of use of its parameters can be checked in"},"tooltip":"View Management","viewhistory":"View history","nextView":"Next view","previousView":"Previous view","predefinedzoom":"Predefined zoom","zoomextent":"Zoom to box","zoompanel":"Zoom tools","zoomin":"Zoom In","zoomout":"Zoom Out"}')},locator:{esLocator:JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles LocatorControl.","impl_infocatastro":"La implementación usada no puede crear controles InfoCatastroControl.","impl_xylocator":"La implementación usada no puede crear controles XYLocatorControl.","impl_ignsearchlocator":"La implementación usada no puede crear controles IGNSearchLocatorControl.","no_controls":"El plugin Locator necesita activar al menos un control.","wrong_coords":"Las coordenadas introducidas no son correctas.","transforming":"Error realizando la transformación.","wrong_values":"Algún valor introducido no es correcto. Recuerda que los minutos y los segundos tienen que tener un valor entre 0 y 59 y los grados entre 0 y 180.","mapeaerror":"No es posible establecer la conexión con el servidor de Catastro.","no_province":"Debe seleccionar una provincia.","no_mun":"Debe seleccionar un municipio.","no_polygon":"Debe seleccionar un polígono.","no_parcel":"Debe seleccionar una parcela.","json_invalid":"La respuesta no es un JSON válido:","no_refcatastro":"Debe introducir una referencia catastral.","noInfo":"PARA ESAS COORDENADAS NO HAY REFERENCIA DISPONIBLE","noresults":"No se han encontrado resultados","no_direction":"No existe dirección","error_findjsonp":"Error en la petición del servicio findJSONp.","error_candidates":"Error en la petición del servicio candidatesJSONp."},"textHelp":{"help1":"La extensión de búsqueda de lugares permite encontrar sitios por coordenadas o al revés, coordenadas y sitios en el mapa mediante la introducción de texto.","help2":"Esta extensión es personalizable mediante parámetros, por lo que la extensión puede cambiar de un visualizador a otro.","help3":"La extensión se compone de varios controles:","help4":"El control de búsqueda por lugares. Es una fachada del geocodificador de Cartociudad (https://www.idee.es/resources/documentos/Cartociudad/CartoCiudad_ServiciosWeb.pdf), que permite realizar dos tipos de búsquedas:","help5":"Por texto, por ejemplo, si queremos buscar la Calle mayor de Pamplona:","help6":"Al buscar, nos aparecen varias alternativas. En este caso buscamos la primera. Al hacer click sobre la opción uno, nos lleva a la calle marcando la geometría:","help7":"Por coordenadas, activando la herramienta de obtener dirección por punto del mapa, el cursor nos cambiará a una chincheta. Haciendo click sobre un punto del mapa, nos devuelve la información asociada a ese punto:","help8":"El siguiente control es la búsqueda mediante catastro y se compone de dos herramientas:","help9":"La primera de ellas permite buscar una parcela mediante provincia, municipio, polígono y parcela:","help10":"La segunda permite la búsqueda por referencia catastral o consultar la referencia catastral por un punto.","help11":"Por ejemplo, si queremos buscar la referencia catastral \'0910001QD3101S\':","help12":"O el caso contrario, si quisiéramos saber la referencia catastral de un punto del mapa:","help13":"Por último, el control de búsqueda de un punto, permite introducir la longitud y latitud de un punto y obtenerlo en el mapa. Por ejemplo para longitud -3,43556 y latitud 40,938274 :","help14":"La información relevante a la extensión y su posible parametrización está documentada en","help15":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Buscar un lugar","xylocator":"Buscar por coordenadas","geographic":"Geográficas","zone":"huso","dms":"GMS","dd":"GD","srs":"Sistema de coordenadas","longitude":"Longitud","latitude":"Latitud","locate":"Localizar","clean":"Eliminar","north":"Norte","south":"Sur","east":"Este","west":"Oeste","infocatastro":"Buscar parcela/catastro","plot":"Parcela","searchplot":"Buscar parcela","searchcadastre":"Buscar catastro","province":"Provincia","selectprov":"Seleccione provincia","municipality":"Municipio","selectmuni":"Seleccione municipio","estate":"Polígono","search":"Buscar","refCastatro":"Referencia catastral","insertCadastre":"Insertar catastro","notaRef":"Código de parcela (14 primeros dígitos). Ej.9977715VK3797F (edificio del IGN)","consultReference":"Consultar Referencia","exact":"Dirección exacta","aprox":"Dirección aproximada","cadastral_information":"Información catastral","reference":"Referencia catastral","description":"Descripción","noReference":"No hay referencia","ignsearch":"Buscar por lugares","search_direction":"Topónimo, dirección o código postal","get_direction":"Obtener dirección en un punto del mapa","toponimo":"Toponimo"}'),enLocator:JSON.parse('{"exception":{"impl":"The implementation used cannot create LocatorControl.","impl_infocatastro":"The implementation used cannot create InfoCatastroControl.","impl_xylocator":"The implementation used cannot create XYLocatorControl.","impl_ignsearchlocator":"The implementation used cannot create IGNSearchLocatorControl.","no_controls":"The Locator plugin needs to activate at least one control.","wrong_coords":"The coordinates entered are not correct.","transforming":"Error performing the transformation.","wrong_values":"Some value entered are not correct. Remember that minutes and seconds must be between 0 and 59 and degrees between 0 and 180.","mapeaerror":"It is not possible to establish a connection with the Cadastre server.","no_province":"You must select a province.","no_mun":"You must select a municipality.","no_polygon":"You must select an polygon.","no_parcel":"You must select a parcel.","json_invalid":"The response is not a valid JSON:","no_refcatastro":"You must enter a cadastral reference.","noInfo":"NO REFERENCES AVAILABLE FOR THESE COORDINATES","noresults":"No results found","no_direction":"No address","error_findjsonp":"Error in the findJSONp service request.","error_candidates":"Error in the candidatesJSONp service request."},"textHelp":{"help1":"The place search extension allows you to find places by coordinates or the other way around, coordinates and places on the map by entering text.","help2":"This extension is customizable via parameters, so the extension can change from one viewer to another.","help3":"The extension is made up of several controls:","help4":"The search control by places. It is a façade of the Cartociudad geocoder (https://www.idee.es/resources/documentos/Cartociudad/CartoCiudad_ServiciosWeb.pdf), which allows two types of searches to be carried out:","help5":"By text, for example, if we want to search for the main street of Pamplona:","help6":"When searching, several alternatives appear. In this case we look for the first one. When we click on option one, it takes us to the street marking the geometry:","help7":"By coordinates, activating the tool to obtain address by point on the map, the cursor will change to a pin. Clicking on a point on the map returns the information associated with that point:","help8":"The next control is the cadastre search and is made up of two tools:","help9":"The first of them allows you to search for a plot by province, municipality, polygon and plot:","help10":"The second allows searching by cadastral reference or consulting the cadastral reference by a point.","help11":"For example, if we want to search for the cadastral reference \'0910001QD3101S\':","help12":"Or the opposite case, if we wanted to know the cadastral reference of a point on the map:","help13":"Finally, the point search control allows you to enter the longitude and latitude of a point and obtain it on the map. For example, for longitude -3.43556 and latitude 40.938274:","help14":"The information relevant to the extension and its possible parameterization is documented in","help15":"The example of use of its parameters can be seen in"},"tooltip":"Find a place","xylocator":"Search by coordinates","geographic":"Geographic","zone":"zone","dms":"DMS","dd":"DD","srs":"Coordinate system","longitude":"Longitude","latitude":"Latitude","locate":"Locate","clean":"Delete","north":"North","south":"South","east":"East","west":"West","infocatastro":"Search parcel/cadastre","plot":"Parcel","searchplot":"Search parcel","searchcadastre":"Search cadastre","province":"Province","selectprov":"Select a province","municipality":"Municipality","selectmuni":"Select a municipality","estate":"Polygon","search":"Search","refCastatro":"Cadastral reference","insertCadastre":"Insert cadastre","notaRef":"Parcel code (first 14 digits). Ex.9977715VK3797F (IGN building)","consultReference":"Consult Reference","exact":"Exact address","aprox":"Approximate address","cadastral_information":"Cadastre information","reference":"Cadastral reference","description":"Description","noReference":"No reference","ignsearch":"Search places","search_direction":"Place name, address or postal code","get_direction":"Get direction at a point on the map","toponimo":"Place name"}')},locatorscn:{esLocatorscn:JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles LocatorscnControl.","impl_infocatastro":"La implementación usada no puede crear controles InfoCatastroControl.","impl_xylocatorscn":"La implementación usada no puede crear controles XYLocatorscnControl.","impl_ignsearchlocatorscn":"La implementación usada no puede crear controles IGNSearchLocatorscnControl.","no_controls":"El plugin Locatorscn necesita activar al menos un control.","wrong_coords":"Las coordenadas introducidas no son correctas.","transforming":"Error realizando la transformación.","wrong_values":"Algún valor introducido no es correcto. Recuerda que los minutos y los segundos tienen que tener un valor entre 0 y 59 y los grados entre 0 y 180.","mapeaerror":"No es posible establecer la conexión con el servidor de Catastro.","no_province":"Debe seleccionar una provincia.","no_mun":"Debe seleccionar un municipio.","no_polygon":"Debe seleccionar un polígono.","no_parcel":"Debe seleccionar una parcela.","json_invalid":"La respuesta no es un JSON válido:","no_refcatastro":"Debe introducir una referencia catastral.","noInfo":"PARA ESAS COORDENADAS NO HAY REFERENCIA DISPONIBLE","noresults":"No se han encontrado resultados","no_direction":"No existe dirección","error_findjsonp":"Error en la petición del servicio findJSONp.","error_candidates":"Error en la petición del servicio candidatesJSONp."},"tooltip":"Localizador","xylocatorscn":"Buscar por coordenadas","geographic":"Geográficas","zone":"huso","dms":"GMS","dd":"GD","srs":"Sistema de coordenadas","longitude":"Longitud","latitude":"Latitud","locate":"Localizar","clean":"Eliminar","north":"Norte","south":"Sur","east":"Este","west":"Oeste","infocatastro":"Buscar parcela/catastro","plot":"Parcela","searchplot":"Buscar parcela","searchcadastre":"Buscar catastro","province":"Provincia","selectprov":"Seleccione provincia","municipality":"Municipio","selectmuni":"Seleccione municipio","estate":"Polígono","search":"Buscar","refCastatro":"Referencia catastral","insertCadastre":"Insertar catastro","notaRef":"Código de parcela (14 primeros dígitos). Ej.9977715VK3797F (edificio del IGN)","consultReference":"Consultar Referencia","exact":"Dirección exacta","aprox":"Dirección aproximada","cadastral_information":"Información catastral","reference":"Referencia catastral","description":"Descripción","noReference":"No hay referencia","ignsearch":"Buscar por lugares","search_direction":"Topónimo o dirección","get_direction":"Obtener dirección en un punto del mapa","toponimo":"Toponimo"}'),enLocatorscn:JSON.parse('{"exception":{"impl":"The implementation used cannot create LocatorscnControl.","impl_infocatastro":"The implementation used cannot create InfoCatastroControl.","impl_xylocatorscn":"The implementation used cannot create XYLocatorscnControl.","impl_ignsearchlocatorscn":"The implementation used cannot create IGNSearchLocatorscnControl.","no_controls":"The Locatorscn plugin needs to activate at least one control.","wrong_coords":"The coordinates entered are not correct.","transforming":"Error performing the transformation.","wrong_values":"Some value entered are not correct. Remember that minutes and seconds must be between 0 and 59 and degrees between 0 and 180.","mapeaerror":"It is not possible to establish a connection with the Cadastre server.","no_province":"You must select a province.","no_mun":"You must select a municipality.","no_polygon":"You must select an polygon.","no_parcel":"You must select a parcel.","json_invalid":"The response is not a valid JSON:","no_refcatastro":"You must enter a cadastral reference.","noInfo":"NO REFERENCES AVAILABLE FOR THESE COORDINATES","noresults":"No results found","no_direction":"No address","error_findjsonp":"Error in the findJSONp service request.","error_candidates":"Error in the candidatesJSONp service request."},"tooltip":"Locatorscn","xylocatorscn":"Search by coordinates","geographic":"Geographic","zone":"zone","dms":"DMS","dd":"DD","srs":"Coordinate system","longitude":"Longitude","latitude":"Latitude","locate":"Locate","clean":"Delete","north":"North","south":"South","east":"East","west":"West","infocatastro":"Search parcel/cadastre","plot":"Parcel","searchplot":"Search parcel","searchcadastre":"Search cadastre","province":"Province","selectprov":"Select a province","municipality":"Municipality","selectmuni":"Select a municipality","estate":"Polygon","search":"Search","refCastatro":"Cadastral reference","insertCadastre":"Insert cadastre","notaRef":"Parcel code (first 14 digits). Ex.9977715VK3797F (IGN building)","consultReference":"Consult Reference","exact":"Exact address","aprox":"Approximate address","cadastral_information":"Cadastre information","reference":"Cadastral reference","description":"Description","noReference":"No reference","ignsearch":"Search places","search_direction":"Place name or address","get_direction":"Get direction at a point on the map","toponimo":"Place name"}')},vectorsmanagement:{esVectorsmanagement:JSON.parse('{"exception":{"emptylayer":"La capa de dibujo está vacía.","geometrianoencontrar":"Geometría no reconocida.","formatocoord":"Las coordenadas introducidas no tienen el formato correcto.","introduzcoord":"No se han introducido las coordenadas correctamente.","errorfichero":"Error al cargar el fichero.","nodetectado":"No se han detectado geometrías en este fichero.","comprobar":"Error al cargar el fichero. Compruebe que se trata del fichero correcto.","insertado":"No se ha insertado una extensión de archivo permitida. Las permitidas son: KML, SHP(.zip), GPX y GeoJSON.","maxfichero":"El fichero seleccionado sobrepasa el máximo de 20 MB permitido.","ficherosel":"No se ha seleccionado formato de descarga.","query_profile":"No se han podido consultar los datos de altitud para esta entidad.","featuresel":"No se han seleccionado elementos","topographic_one_element":"El perfil topografico solo se puede realizar para un único elemento","typeLayer":"Las capas de tipo MVT y MBTilesVector no son editables"},"help_template":{"title":"Ayuda","addlayer_title":"Crear capa","addlayer_content":"Esta herramienta añade al mapa una nueva capa vectorial. Al hacer click se abre una ventana en la que se puede introducir el nombre de la capa.","selection_title":"Selección","selection_content":"Herramienta para seleccionar elementos de la capa. Hay varias herramientas que funcionan diferente si esta herramienta esta activa o no.","creation_title":"Creación","creation_content":"Herramienta para dibujar diferentes tipos de geometrías en la capa seleccionada.","creation_content_1":"Punto","creation_content_1_1":"Permite dibujar un punto mediante click en el mapa.","creation_content_2":"Punto por coordenadas","creation_content_2_1":"Permite crear un punto introduciendo las coordenadas.","creation_content_3":"Linea","creation_content_3_1":"Permite dibujar una linea en el mapa. Un click dibuja un punto o vértice, doble click finaliza el dibujo.","creation_content_4":"Poligono","creation_content_4_1":"Permite dibujar un polígono en el mapa. Un click dibuja un punto o vértice, doble click finaliza el dibujo.","creation_content_5":"Figura","creation_content_5_1":"Permite dibujar una figura regular o irregular en el mapa. Un click establece la esquina superior izquierda, un segundo click finaliza el dibujo.","creation_content_6":"Texto","creation_content_6_1":"Permite escribir un texto en un punto del mapa.","edition_title":"Edición","edition_content":"Herramienta para editar las geometrías de los elementos de la capa.","edition_content_1":"Editar geometría","edition_content_1_1":"Permite editar los vértices de una geometría","edition_content_2":"Agujero","edition_content_2_1":"Permite crear un agujero en un elemento. Solo válido para polígonos.","edition_content_3":"Rotación","edition_content_3_1":"Permite rotar los elementos seleccionados.","edition_content_4":"Escalar","edition_content_4_1":"Permite escalar los elementos seleccionados.","edition_content_5":"Mover","edition_content_5_1":"Permite mover los elementos seleccionados.","edition_content_6":"Editar atributos","edition_content_6_1":"Permite editar los atributos de los elementos de la capa o los seleccionados.","edition_content_7":"Limpiar","edition_content_7_1":"Permite eliminar todos los elementos de la capa.","style_title":"Edición de estilos","style_content":"Herramienta para editar los estilos de la capa o elementos seleccionados. Se dividen en estilos para punto, linea o polígono.","analysis_title":"Analisis","analysis_content":"Herramienta para el distintos análisis geográficos.","analysis_content_1":"Perfil topográfico","analysis_content_1_1":"Permite mostrar un gráfico que representa el relieve del terreno. En el caso de elementos puntuales se indica unicamente su altura y coordenadas.","analysis_content_2":"Área de influencia","analysis_content_2_1":"Permite dibujar un área de influencia de un elemento.","analysis_content_3":"Extensión","analysis_content_3_1":"Permite mostrar la extensión de un objeto geográfico.","analysis_content_4":"GeoJSON","analysis_content_4_1":"Permite ver el GeoJSON de la capa o elementos seleccionados.","download_title":"Descarga","download_content":"Esta herramienta permite descargar la capa completa o los elementos seleccionados en formato GeoJSON, KML, GPX y Shapefile."},"textHelp":{"help1":"La extensión de gestión de vectores permite al usuario crear, modificar, borrar, aplicar estilos, aplicar análisis espaciales y descargar capas vectoriales.","help2":"Para crear una capa, se seleccionará el botón añadir capa en el panel principal de la extensión.","help3":"Una vez creada la capa, se pueden activar los controles de edición y creación de geometrías. El primer control es el de añadir nuevas geometrías a la capa, permitiendo poder digitalizar puntos, líneas, superficies, figuras geométricas y textos.","help4":"A partir de tener geometrías en una capa, existen dos maneras de tratar estas geometrías: todas las geometrías de la capa a la vez o sólo las seleccionadas. Para seleccionarlas, habrá que tener activado el control de selección. PAra poder seleccionar más de una geometría a la vez, habrá que mantener pulsada la tecla control y hacer clic sobre las geometrías a seleccionar.","help5":"El siguiente control de edición, permite modificar las geometrías existentes en una capa vectorial. En éste control se podrá modificar vértices de una geometría: ","help6":"añadir agujeros a geometrías poligonales:","help7":"rotar geometrías:","help8":"escalar geometrías. En esta acción existen unos accesos rápidos por teclado. Para dejar fijo un punto de escalado, se puede dejar presionada la tecla control, para escalar manteniendo la forma, la tecla Shift y si se mantienen las dos a la vez, mantiene la forma desde un punto:","help9":"mover geometrías:","help10":"añadir tabla de atributos:","help11":"y eliminar las geometrías de una capa:","help12":"El siguiente control del panel de gestión de vectores es aplicar estilos a geometrías. En él, se puede asignar color, relleno, opacidad, grosor, tipo de fuente para textos, color de fuente, texto a mostrar y radio para geometrías puntuales","help13":"El control de análisis permite hacer un análisis espacial de las geometrías cargadas en una capa. Entre ellas están las opciones de perfil topográfico: ","help14":"área de influencia (buffer):","help15":"cálculo de distancia/área:","help16":"y mostrar las geometrías en texto plano en formato json","help17":"Por último, el último control permite descargar la capa en distintos formatos: GeoJSON, KML, GPX y SHP","help18":"La información relevante a la extensión y su posible parametrización está documentada en:","help19":"El ejemplo de uso de sus parámetros puede comprobarse en:"},"tooltip":"Gestión de Vectores","selection":"Seleccionar","analysis":"Análisis","creation":"Creación","download":"Descargar","edition":"Edición","help":"Ayuda","style":"Estilo","selectLayerDefault":"Seleccionar capa","selectionLayer":"Capa","selectionFeature":"Feature","creationLayer":"Capa","creationLayer_done":"¡La capa se ha creado con éxito!","creationPoint":"Punto","creationCoordPoint":"Punto coordenadas","creationLine":"Linea","creationPolygon":"Polígono","creationFigure":"Figura","creationText":"Texto","creationLongitude":"Longitud","creationLatitude":"Latitud","styleColor":"Color","styleThickness":"Grosor","styleFont":"Fuente","styleSize":"Tamaño","opacity":"Opacidad","radius":"Radio","style_options":"Opciones","apply_style":"Aplicar","analysisProfile":"Perfil topográfico","analysisBuffer":"Área de influencia","getGeoJSON":"Ver GeoJSON","extension":"Extensión","draw":"Dibujar","createdLayer":"Creada capa","zmin":"Alt. min","zmax":"Alt. max","altitude":"Altitud","distance":"Dist. total","ytitle":"Altitud (m)","xtitle":"Distancia (km)","title_popup_buffer":"ÁREA DE INFLUENCIA","title_popup_attribute":"NUEVO ATRIBUTO","title_popup_editAttribute":"RENOMBRAR ATRIBUTO","unit_m":"Metros","unit_km":"Kilómetros","editgeometria":"Editar geometria","clean":"Limpiar","hole":"Agujero","rotation":"Rotación","scale":"Escalar","move":"Mover","attributes":"Atributos","delete":"Borrar geometría","newcolumn":"Nueva columna","layerName":"Nombre","layerLegend":"Leyenda","title_new_layer":"NUEVA CAPA VECTORIAL","title_attribute_table":"Edición de atributos","title_point_profile":"Datos punto","point_profile_map_coordinates":"Coordenadas mapa","point_profile_geographic_coordinates":"Coordenadas geográficas","calculate":"Calcular","title_clear_geometries":"Limpiar capa","clear_geometries_msg":"¿Seguro que desea eliminar todos los elementos de la capa?","confirm":"Confirmar","accept":"Aceptar","cancel":"Cancelar","cuadrilatero":"Cuadrilátero","circulo":"Círculo","triangulo":"Triángulo","pentagono":"Pentágono","hexagono":"Hexágono","close":"Cerrar","fill":"Relleno","stroke":"Trazo","opts_point":"Opciones de puntos"}'),enVectorsmanagement:JSON.parse('{"exception":{"emptylayer":"The drawing layer is empty.","geometrianoencontrar":"Unrecognized geometry.","formatocoord":"The entered coordinates are not in the correct format.","introduzcoord":"Coordinates are not entered correctly.","errorfichero":"Error loading the file.","nodetectado":"No geometries have been detected in this file.","comprobar":"Error loading the file. Verify that this is the correct file.","insertado":"A permitted file extension has not been inserted. The allowed ones are: KML, SHP (.zip), GPX and GeoJSON.","maxfichero":"The selected file exceeds the maximum of 20 MB allowed","ficherosel":"Download format has not been selected.","query_profile":"The altitude data for this entity could not be queried.","featuresel":"No elements have been selected","topographic_one_element":"The topographic profile can only be made for a single element","typeLayer":"Layers of type MVT and MBTilesVector are not editable"},"help_template":{"title":"Help","addlayer_title":"Create layer","addlayer_content":"This tool adds a new vector layer to the map. Clicking on it opens a window in which you can enter the layer name.","selection_title":"Selection","selection_content":"Tool for selecting elements of the layer. There are several tools that work differently if this tool is active or not.","creation_title":"Creation","creation_content":"Tool to draw different types of geometries on the selected layer.","creation_content_1":"Point","creation_content_1_1":"Allows you to draw a point by clicking on the map.","creation_content_2":"Point by coordinates","creation_content_2_1":"Allows you to create a point by entering the coordinates.","creation_content_3":"Line","creation_content_3_1":"Allows you to draw a line on the map. One click draws a point or vertex, double click finishes the drawing.","creation_content_4":"Polygon","creation_content_4_1":"Allows you to draw a polygon on the map. One click draws a point or vertex, double click finishes the drawing.","creation_content_5":"Figure","creation_content_5_1":"Allows you to draw a regular or irregular shape on the map. One click sets the top left corner, a second click finishes the drawing.","creation_content_6":"Text","creation_content_6_1":"Allows you to write text at a point on the map.","edition_title":"Edition","edition_content":"Tool to edit the geometries of the layer elements.","edition_content_1":"Edit geometry","edition_content_1_1":"Allows you to edit the vertices of a geometry","edition_content_2":"Hole","edition_content_2_1":"Allows you to create a hole in an element. Only valid for polygons.","edition_content_3":"Rotation","edition_content_3_1":"Allows you to rotate the selected elements.","edition_content_4":"Scale","edition_content_4_1":"Allows scaling of selected elements.","edition_content_5":"Move","edition_content_5_1":"Allows you to move the selected elements.","edition_content_6":"Edit attributes","edition_content_6_1":"Allows you to edit the attributes of the layer or selected elements.","edition_content_7":"Clear","edition_content_7_1":"Allows you to delete all elements of the layer.","style_title":"Style editing","style_content":"Tool to edit the styles of the layer or selected elements. They are divided into styles for point, line or polygon.","analysis_title":"Analysis","analysis_content":"Tool for different geographic analyses.","analysis_content_1":"Topographic profile","analysis_content_1_1":"Allows you to display a graph that represents the relief of the terrain. In the case of specific elements, only their height and coordinates are indicated.","analysis_content_2":"Area of influence","analysis_content_2_1":"Allows you to draw an area of influence of an element.","analysis_content_3":"Extension","analysis_content_3_1":"Allows you to show the extension of a geographical object.","analysis_content_4":"GeoJSON","analysis_content_4_1":"Allows you to view the GeoJSON of the layer or selected elements.","download_title":"Download","download_content":"This tool allows you to download the complete layer or selected elements in GeoJSON, KML and Shapefile format."},"textHelp":{"help1":"Vectors management extension allows for the user to create, modify, delete, apply styles, apply spatial analysis and download vector layers.","help2":"To create a layer, the add layer button on the main panel of the extension must be selected.","help3":"Once the layer has been created, it is possible to enable the geometry edition and creation controls. The first control is the one for adding new geometries to the layer, allowing digitalize points, lines, surfaces, geometric figures and texts.","help4":"Given any layer\'s geometries, there are two ways of managing them: all the geometries of the layer at the same time or just the selected ones. To select the geometries, the selection control must be active. To select multiple geometries at once, the control key must be kept pressed, and the geometries will be selected on click.","help5":"The next control for editing, allows to modify the existing geometries in a vector layer. In this control it is possible to modify the geometry\'s vertices: ","help6":"add holes to polygon geometries:","help7":"rotate geometries:","help8":"scale geometries. There are some keyboard shortcuts for this action. The control key can be kept pressed to fix a scaling point, the Shift key can be used to scale keeping the shape and if both are pressed simultaneously, the shape from a certain point is kept:","help9":"move geometries:","help10":"add attributes table:","help11":"and delete geometries from a layer:","help12":"The following control from the vectors management panel is for applying styles to the geometries. From this control, color, fill, opacity, width, font family for texts, font color, text to be shown and radius for point geometries can be defined.","help13":"The analysis control allows to execute an spatial analysis of the available layer\'s geometries. Among them, the topographic profile options: ","help14":"area of influence (buffer):","help15":"calculation of distance/area:","help16":"and showing the geometries in plain text as a json format","help17":"Finally, the last control allows to download the layer in various formats: GeoJSON, KML, GPX y SHP","help18":"Information about this plugin and its possible parametrization is documented in:","help19":"A use case for its parameters can be found in:"},"tooltip":"Vector Management","selection":"Selection","analysis":"Analysis","creation":"Creation","download":"Download","edition":"Edition","help":"Help","style":"Style","selectLayerDefault":"Select layer","selectionLayer":"Layer","selectionFeature":"Feature","creationLayer":"Layer","creationLayer_done":"The layer has been successfully created!","creationPoint":"Point","creationCoordPoint":"Coordinates point","creationLine":"Line","creationPolygon":"Polygon","creationFigure":"Figure","creationText":"Text","creationLongitude":"Longitude","creationLatitude":"Latitude","styleColor":"Color","styleThickness":"Thickness","styleFont":"Font","styleSize":"Size","opacity":"Opacity","radius":"Radius","style_options":"Options","apply_style":"Apply","analysisProfile":"Topographic profile","analysisBuffer":"Buffer","getGeoJSON":"Get GeoJSON","extension":"Extension","draw":"Draw","createdLayer":"Created layer","zmin":"Min alt.","zmax":"Max. alt.","altitude":"Altitude","distance":"Total dist.","ytitle":"Altitud (m)","xtitle":"Distance (km)","title_popup_buffer":"INFLUENCE AREA","title_popup_attribute":"NEW ATTRIBUTE","title_popup_editAttribute":"RENAME ATTRIBUTE","unit_m":"Metres","unit_km":"Kilometres","editgeometria":"Edit geometry","clean":"Clean","hole":"Hole","rotation":"Rotation","scale":"Scale","move":"Move","attributes":"Attributes","delete":"Delete geometry","newcolumn":"New column","layerName":"Name","layerLegend":"Legend","title_new_layer":"NEW VECTOR LAYER","title_attribute_table":"Attribute edition","title_point_profile":"Point data","point_profile_map_coordinates":"Map coordinates","point_profile_geographic_coordinates":"Geographic coordinates","calculate":"Calculate","title_clear_geometries":"Clear layer","clear_geometries_msg":"Are you sure you want to remove all elements from the layer?","confirm":"Ok","accept":"Accept","cancel":"Cancel","cuadrilatero":"Quadrilateral","circulo":"Circle","triangulo":"Triangle","pentagono":"Pentagon","hexagono":"Hexagon","close":"Close","fill":"Fill","stroke":"Stroke","opts_point":"Point Options"}')}}},84842:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(8312),i=r(9220),o=r(40398),a=r(81971),s=r(89437),l=r(2532),u=r(70992),c=r(68524);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,r)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}const b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(h,e);var t,r,s,f=_(h);function h(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var d=p(p({},t),r);delete d.minZoom,delete d.maxZoom;var y=r,g=s;"string"==typeof t?g=(d=u.EY(t,c.GenericRaster)).vendorOptions:(0,o.Ew)(t)||(d.type=c.GenericRaster),d.name?y.name=d.name:g&&(y.name=i.Z.addFacadeName(d.name,g),d.name=d.name||y.name),d.legend?y.legend=d.legend:g&&(y.legend=i.Z.addFacadeLegend(g)||d.name,d.legend=d.legend||y.legend),(0,o.o8)(n.Z)&&(0,a.Z)((0,l.NA)("exception").generic_method),y.userMaxExtent=d.maxExtent||y.userMaxExtent;var m=new n.Z(y,g,"raster");return(e=f.call(this,d,m)).minZoom=y.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=y.maxZoom||Number.POSITIVE_INFINITY,e.version=d.version||"1.3.0",!(0,o.Ew)(m)&&(0,o.mf)(m.setFacadeObj)&&m.setFacadeObj(v(e)),e}return t=h,r=[{key:"getMaxExtent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.maxExtent_:this.getImpl().getMaxExtent();return((0,o.o8)(e)||(0,o.Ew)(e))&&(e=this.map_.getProjection().getExtent()),e}},{key:"calculateMaxExtent",value:function(){var e=this;return new Promise((function(t){t(e.getMaxExtent(!1))}))}},{key:"setMaxExtent",value:function(e){var t=e;!(0,o.kJ)(e)&&(0,o.Kn)(e)&&(t=[e.x.min,e.y.min,e.x.max,e.y.max]),this.getImpl().setMaxExtent(t)}},{key:"url",get:function(){return this.getImpl().getURLService()},set:function(e){this.getImpl().setURLService(e)}},{key:"version",get:function(){return this.getImpl().version},set:function(e){(0,o.Ew)(e)||this.getImpl().setVersion(e)}},{key:"equals",value:function(e){var t=!1;return e instanceof h&&(t=this.legend===e.legend,t=t&&this.url===e.url,t=t&&this.name===e.name),t}}],r&&y(t.prototype,r),s&&y(t,s),Object.defineProperty(t,"prototype",{writable:!1}),h}(s.Z)},50561:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(68311),i=r(9220),o=r(40398),a=r(81971),s=r(12479),l=r(2532),u=r(77055),c=r(70992),f=r(68524),h=r(73579);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function _(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,r)}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}const E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(d,e);var t,r,s,p=A(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var u=y(y({},t),r);delete u.minZoom,delete u.maxZoom;var h=r,g=s;"string"==typeof t?g=(u=c.EY(t,f.GenericVector)).vendorOptions:(0,o.Ew)(t)||(u.type=f.GenericVector),u.name?h.name=u.name:g&&(h.name=i.Z.addFacadeName(u.name,g),u.name=u.name||h.name),u.legend?h.legend=u.legend:g&&(h.legend=i.Z.addFacadeLegend(g)||u.name,u.legend=u.legend||h.legend),u.infoEventType=t.infoEventType||"click",h.userMaxExtent=u.maxExtent||h.userMaxExtent,(0,o.o8)(n.Z)&&(0,a.Z)((0,l.NA)("exception").generic_method);var m=new n.Z(r,g,"vector");return e=p.call(this,u,r,g,m),!(0,o.Ew)(m)&&(0,o.mf)(m.setFacadeObj)&&m.setFacadeObj(b(e)),e.sourceType=m.sourceType,e.ids=t.ids,e.version=u.version,e.cql=u.cql,(0,o.Ew)(e.namespace)&&((0,o.Ew)(t.namespace)?e.namespace=void 0:e.namespace=t.namespace),e.extract=void 0!==t.extract&&t.extract,e.styleFacade=u.style,e}return t=d,r=[{key:"getMaxExtent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.maxExtent_:this.getImpl().getMaxExtent();return((0,o.o8)(e)||(0,o.Ew)(e))&&(e=this.map_.getProjection().getExtent()),e}},{key:"calculateMaxExtent",value:function(){var e=this;return new Promise((function(t){t(e.getMaxExtent(!1))}))}},{key:"setMaxExtent",value:function(e){var t=e;!(0,o.kJ)(e)&&(0,o.Kn)(e)&&(t=[e.x.min,e.y.min,e.x.max,e.y.max]),this.getImpl().setMaxExtent(t)}},{key:"url",get:function(){return this.getImpl().getURLService()},set:function(e){this.getImpl().setURLService(e)}},{key:"extract",get:function(){return this.getImpl().extract},set:function(e){(0,o.Ew)(e)?this.getImpl().extract=!1:(0,o.HD)(e)?this.getImpl().extract="true"===(0,o.Fv)(e):this.getImpl().extract=e}},{key:"version",get:function(){return this.getImpl().version},set:function(e){(0,o.Ew)(e)?this.getImpl().version="1.0.0":this.getImpl().version=e}},{key:"cql",get:function(){return this.getImpl().cql},set:function(e){this.getImpl().cql=e}},{key:"setCQL",value:function(e){var t=this,r=e;this.getImpl().getDescribeFeatureType().then((function(e){if(!(0,o.Ew)(r)){var n=e.geometryName;r=r.replace(/{{geometryName}}/g,n)}t.getImpl().cql!==r&&t.getImpl().setCQL(r)}))}},{key:"ids",get:function(){return this.getImpl().ids},set:function(e){(0,o.Ew)(e)?this.getImpl().ids=this.ids:this.getImpl().ids=e}},{key:"getStyle",value:function(){return this.styleFacade?this.style_:new h.Z(this.constructor.DEFAULT_OPTIONS_STYLE)}},{key:"equals",value:function(e){var t=!1;return e instanceof d&&(t=this.legend===e.legend,t=t&&this.url===e.url,t=t&&this.name===e.name,t=t&&this.cql===e.cql),t}},{key:"addFeatures",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;(0,o.Ew)(n)||((0,o.kJ)(n)||(n=[n]),this.getImpl().isLoaded()?this.getImpl().addFeatures(n,r):this.getImpl().on(u.VX,(function(){t.getImpl().addFeatures(n,r)})))}}],r&&m(t.prototype,r),s&&m(t,s),Object.defineProperty(t,"prototype",{writable:!1}),d}(s.Z)},4143:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(71635),i=r(12479),o=r(68524),a=r(40398),s=r(81971),l=r(2532);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},y.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(c,e);var t,r,i,u=m(c);function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var f=r;"string"!=typeof t&&(f.maxExtent=t.maxExtent);var h=new n.Z(t,f,i),p=t;return p.type=o.GeoJSON,e=u.call(this,p,f,void 0,h),(0,a.o8)(n.Z)&&(0,s.Z)((0,l.NA)("exception").geojsonlayer_method),(0,a.Ew)(t)&&(0,s.Z)((0,l.NA)("exception").no_param),(0,a.HD)(t)?e.url=t:(0,a.kJ)(t)?e.source=t:(e.url=t.url,e.name=t.name,e.source=t.source,(0,a.HD)(e.source)&&(e.source=e.deserialize(e.source)),e.extract=void 0!==t.extract&&t.extract,(0,a.Ew)(t.crs)||((0,a.Ew)(e.source)&&(e.source={type:"FeatureCollection",features:[]}),e.source.crs={type:"EPSG",properties:{code:t.crs}})),e.minZoom=f.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=f.maxZoom||Number.POSITIVE_INFINITY,e.options=r,e}return t=c,r=[{key:"source",get:function(){return this.getImpl().source},set:function(e){this.getImpl().source=e}},{key:"extract",get:function(){return this.getImpl().extract},set:function(e){(0,a.Ew)(e)?this.getImpl().extract=!1:(0,a.HD)(e)?this.getImpl().extract="true"===(0,a.Fv)(e):this.getImpl().extract=e}},{key:"equals",value:function(e){var t=!1;return e instanceof c&&(t=this.name===e.name,t=t&&this.extract===e.extract),t}},{key:"setSource",value:function(e){this.source=e,this.getImpl().refresh(e)}},{key:"setStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.DEFAULT_OPTIONS_STYLE;y(_(c.prototype),"setStyle",this).call(this,e,t,r)}},{key:"serialize",value:function(){return window.btoa(unescape(encodeURIComponent(JSON.stringify(this.source))))}},{key:"deserialize",value:function(e){return JSON.parse(decodeURIComponent(escape(window.atob(e.replace(" ","+")))))}}],r&&p(t.prototype,r),i&&p(t,i),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.Z);v.DEFAULT_PARAMS={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},v.DEFAULT_OPTIONS_STYLE={point:f(f({},v.DEFAULT_PARAMS),{},{radius:5}),line:f({},v.DEFAULT_PARAMS),polygon:f({},v.DEFAULT_PARAMS)};const A=v},98210:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(58227),i=r(40398),o=r(81971),a=r(89437),s=r(70992),l=r(68524),u=r(2532);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(f,e);var t,r,a,c=m(f);function f(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(0,i.o8)(n.Z)&&(0,o.Z)((0,u.NA)("exception").geotiff_method),(0,i.Ew)(e)&&(0,o.Z)((0,u.NA)("exception").no_param);var p=s.EY(e,l.GeoTIFF),d=h(h({},r),{},{visibility:p.visibility,queryable:p.queryable,displayInLayerSwitcher:p.displayInLayerSwitcher,projection:p.projection,maxExtent:e.maxExtent,normalize:p.normalize}),y=new n.Z(d,a);return(t=c.call(this,p,y)).legend=p.legend,t.transparent=p.transparent,t.minZoom=r.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=r.maxZoom||Number.POSITIVE_INFINITY,t.options=d,t}return t=f,(r=[{key:"type",get:function(){return l.GeoTIFF},set:function(e){(0,i.o8)(e)||(0,i.Ew)(e)||e===l.GeoTIFF||(0,o.Z)("El tipo de capa debe ser '".concat(l.GeoTIFF).concat("' pero se ha especificado '").concat(e).concat("'"))}},{key:"options",get:function(){return this.getImpl().options},set:function(e){this.getImpl().options=e}},{key:"getMaxExtent",value:function(){return this.getImpl().getMaxExtent()}},{key:"equals",value:function(e){var t=!1;return e instanceof f&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.legend===e.legend),t}}])&&d(t.prototype,r),a&&d(t,a),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.Z)},71145:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(95280),i=r(12479),o=r(40398),a=r(81971),s=r(68524),l=r(70992),u=r(2532);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(o)?o:String(o)),n)}var i,o}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(d,e);var t,r,i,c=p(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var f=l.EY(t,s.KML),h=r;h.label=f.label,h.visibility=f.visibility,h.layers=t.layers||void 0,h.removeFolderChildren=!!(0,o.o8)(t.removeFolderChildren)||t.removeFolderChildren,"string"!=typeof t&&(h.maxExtent=t.maxExtent);var p=new n.Z(h,i);return e=c.call(this,f,r,void 0,p),(0,o.o8)(n.Z)&&(0,a.Z)((0,u.NA)("exception").kmllayer_method),(0,o.Ew)(t)&&(0,a.Z)((0,u.NA)("exception").no_param),e.extract=void 0!==f.extract&&f.extract,e.options=r,e.label=f.label,e.layers=h.layers,e.minZoom=h.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=h.maxZoom||Number.POSITIVE_INFINITY,e.removeFolderChildren=h.removeFolderChildren,e}return t=d,(r=[{key:"extract",get:function(){return this.getImpl().extract},set:function(e){(0,o.Ew)(e)?this.getImpl().extract=!1:(0,o.HD)(e)?this.getImpl().extract="true"===(0,o.Fv)(e):this.getImpl().extract=e}},{key:"options",get:function(){return this.getImpl().options},set:function(e){this.getImpl().options=e}},{key:"equals",value:function(e){var t=!1;return e instanceof d&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.extract===e.extract,t=t&&this.predefinedStyles===e.predefinedStyles),t}}])&&f(t.prototype,r),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.Z)},89437:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(81971),i=r(70992),o=r(81638),a=r(40398),s=r(2532);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(h,e);var t,r,o,l=f(h);function h(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),r=l.call(this,t);var n=i.EY(e);return r.attribution=e.attribution,r._type=n.type,r.url=n.url,r.name=n.name,r.transparent=!0,(0,a.Ew)(n.transparent)?(0,a.Ew)(e.isBase)||(r.transparent=!e.isBase):r.transparent=n.transparent,r.isBase=!r.transparent,r.maxExtent_=null,r.zindex_=null,r.map_=null,r.userMaxExtent=n.maxExtent||e.maxExtent,r.legend=n.legend,r.minZoom=n.minZoom||Number.NEGATIVE_INFINITY,r.maxZoom=n.maxZoom||Number.POSITIVE_INFINITY,r}return t=h,(r=[{key:"type",get:function(){return this._type},set:function(e){(0,a.o8)(e)||(0,a.Ew)(e)||e===this._type||(0,n.Z)("El tipo de capa debe ser '".concat(this._type).concat("' pero se ha especificado '").concat(e).concat("'"))}},{key:"legend",get:function(){return this.getImpl().legend},set:function(e){(0,a.Ew)(e)?this.getImpl().legend=this.name:this.getImpl().legend=e}},{key:"getLegend",value:function(){return this.getImpl().legend}},{key:"setLegend",value:function(e){this.legend=e,this.getImpl().legend=e}},{key:"url",get:function(){return this.getImpl().url},set:function(e){this.getImpl().url=e}},{key:"name",get:function(){return this.getImpl().name},set:function(e){var t=e;if((0,a.o8)(e)){var r=Math.floor(9e3*Math.random())+1e3;t="layer_".concat(r)}this.getImpl().name=t}},{key:"isBase",get:function(){return this.getImpl().isBase},set:function(e){(0,a.Ew)(e)?(this.getImpl().isBase=!1,this.transparent=!0):(0,a.HD)(e)?(this.getImpl().isBase="true"===e,this.transparent="true"!==e):(this.transparent=!e,this.getImpl().isBase=e)}},{key:"transparent",get:function(){return this.getImpl().transparent},set:function(e){(0,a.Ew)(e)?this.getImpl().transparent=!0:(0,a.HD)(e)?this.getImpl().transparent="true"===(0,a.Fv)(e):this.getImpl().transparent=e}},{key:"displayInLayerSwitcher",get:function(){return this.getImpl().displayInLayerSwitcher},set:function(e){(0,a.Ew)(e)?this.getImpl().displayInLayerSwitcher=!0:(0,a.HD)(e)?this.getImpl().displayInLayerSwitcher="true"===(0,a.Fv)(e):this.getImpl().displayInLayerSwitcher=e}},{key:"getMaxExtent",value:function(){var e=this.userMaxExtent;return(0,a.Ew)(e)&&(e=this.map_.userMaxExtent,(0,a.Ew)(e)&&(e=this.map_.getProjection().getExtent())),e}},{key:"calculateMaxExtent",value:function(){var e=this;return new Promise((function(t){t(e.getMaxExtent())}))}},{key:"setMaxExtent",value:function(e){this.userMaxExtent=e,!(0,a.kJ)(e)&&(0,a.Kn)(e)&&(this.userMaxExtent=[e.x.min,e.y.min,e.x.max,e.y.max]),(0,a.mf)(this.getImpl().setMaxExtent)&&((0,a.Ew)(e)?this.resetMaxExtent():this.getImpl().setMaxExtent(e))}},{key:"resetMaxExtent",value:function(){var e=this;this.userMaxExtent=null,this.calculateMaxExtent().then((function(t){(0,a.mf)(e.getImpl().setMaxExtent)&&e.getImpl().setMaxExtent(t)}))}},{key:"setMap",value:function(e){this.map_=e}},{key:"getLayerGroup",value:function(){return this.getImpl().layerGroup}},{key:"setLayerGroup",value:function(e){this.getImpl().layerGroup=e}},{key:"isVisible",value:function(){return(0,a.o8)(this.getImpl().isVisible)&&(0,n.Z)((0,s.NA)("exception").isvisible_method),this.getImpl().isVisible()}},{key:"isQueryable",value:function(){return(0,a.o8)(this.getImpl().isQueryable)&&(0,n.Z)((0,s.NA)("exception").isqueryable_method),this.getImpl().isQueryable()}},{key:"setVisible",value:function(e){var t=e;(0,a.Ew)(t)&&(0,n.Z)((0,s.NA)("exception").visibility_param),(0,a.HD)(t)||(0,a.jn)(t)||(0,n.Z)((0,s.NA)("exception").visibility_param),(0,a.o8)(this.getImpl().setVisible)&&(0,n.Z)((0,s.NA)("exception").setvisible_method),t=/^1|(true)$/i.test(t),this.getImpl().setVisible(t)}},{key:"inRange",value:function(){return(0,a.o8)(this.getImpl().inRange)&&(0,n.Z)((0,s.NA)("exception").inrage_method),this.getImpl().inRange()}},{key:"getLegendURL",value:function(){return this.getImpl().getLegendURL()}},{key:"setLegendURL",value:function(e){var t=e;(0,a.Ew)(t)&&(t=(0,a.wQ)([M.config.THEME_URL,h.LEGEND_DEFAULT])),this.getImpl().setLegendURL(t)}},{key:"getZIndex",value:function(){return this.zindex_}},{key:"setZIndex",value:function(e){this.zindex_=e,this.getImpl().setZIndex(e)}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"setMinZoom",value:function(e){this.minZoom=e,this.getImpl().setMinZoom(e)}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"setMaxZoom",value:function(e){this.maxZoom=e,this.getImpl().setMaxZoom(e)}},{key:"getOpacity",value:function(){return this.getImpl().getOpacity()}},{key:"setOpacity",value:function(e){this.getImpl().setOpacity(e)}},{key:"getAttribution",value:function(){return this.attribution}},{key:"refresh",value:function(){!(0,a.o8)(this.getImpl().refresh)&&(0,a.mf)(this.getImpl().refresh)&&this.getImpl().refresh()}},{key:"generateName_",value:function(){this.name=(0,a.cL)("layer_","_".concat(this.type))}}])&&u(t.prototype,r),o&&u(t,o),Object.defineProperty(t,"prototype",{writable:!1}),h}(o.Z);p.LEGEND_DEFAULT="/img/legend-default.png",p.LEGEND_ERROR="/img/legend-error.png";const d=p},86018:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(94476),i=r(89437),o=r(68524),a=r(40398),s=r(81971),l=r(2532),u=r(70992);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(o)?o:String(o)),n)}var i,o}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(d,e);var t,r,i,c=p(d);function d(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(0,a.o8)(n.Z)&&(0,s.Z)((0,l.NA)("exception").mbtiles_method);var f=u.EY(e,o.MBTiles),h=r,p=new n.Z(f,r,i);return(t=c.call(this,f,p)).name=f.name,t.legend=f.legend,t.source=f.source,t.url=f.url,t.minZoom=h.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=h.maxZoom||Number.POSITIVE_INFINITY,t.options=r,t}return t=d,(r=[{key:"getMaxExtent",value:function(){return this.getImpl().getMaxExtent()}},{key:"equals",value:function(e){var t=!1;return e instanceof d&&(t=this.url===e.url,t=t&&this.source===e.source,t=t&&this.legend===e.legend,t=t&&this.name===e.name,t=t&&this.options===e.options),t}}])&&f(t.prototype,r),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.Z)},14279:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E,x:()=>b});var n=r(36472),i=r(77707),o=r(12479),a=r(68524),s=r(40398),l=r(81971),u=r(2532),c=r(70992);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},m.apply(this,arguments)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var b={RENDER:"render",FEATURE:"feature"},w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(h,e);var t,r,o,f=v(h);function h(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var o=c.EY(t,a.MBTilesVector),p=r;"string"!=typeof t&&(p.maxExtent=t.maxExtent);var d=new n.Z(o,p,i);return e=f.call(this,o,r,i,d),(0,s.o8)(n.Z)&&(0,l.Z)((0,u.NA)("exception").mbtilesvector_method),e.minZoom=p.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=p.maxZoom||Number.POSITIVE_INFINITY,e.extract=void 0!==o.extract&&o.extract,e}return t=h,r=[{key:"setStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.DEFAULT_OPTIONS_STYLE;m(A(h.prototype),"setStyle",this).call(this,e,t,r)}},{key:"getProjection",value:function(){return this.getImpl().getProjection()}},{key:"getGeometryType",value:function(){var e=null,t=this.getFeatures();if(!(0,s.Ew)(t)){var r=t[0];(0,s.Ew)(r)||(e=r.getType())}return e}},{key:"getFeatures",value:function(){return this.getImpl().getFeatures().map((function(e){return i.Z.olFeature2Facade(e)}))}},{key:"extract",get:function(){return this.getImpl().extract},set:function(e){(0,s.Ew)(e)?this.getImpl().extract=!1:(0,s.HD)(e)?this.getImpl().extract="true"===(0,s.Fv)(e):this.getImpl().extract=e}},{key:"equals",value:function(e){var t=!1;return e instanceof h&&(t=this.url===e.url,t=t&&this.source===e.source,t=t&&this.legend===e.legend,t=t&&this.name===e.name,t=t&&this.options===e.options,t=t&&this.extract===e.extract,t=t&&this.predefinedStyles===e.predefinedStyles),t}},{key:"setFilter",value:function(){}},{key:"addFeatures",value:function(){}},{key:"removeFeatures",value:function(){}},{key:"refresh",value:function(){}},{key:"redraw",value:function(){}},{key:"toGeoJSON",value:function(){}}],r&&y(t.prototype,r),o&&y(t,o),Object.defineProperty(t,"prototype",{writable:!1}),h}(o.Z);w.DEFAULT_PARAMS={fill:{color:"#fff",opacity:.6},stroke:{color:"#827ec5",width:2},radius:5},w.DEFAULT_OPTIONS_STYLE={point:p({},w.DEFAULT_PARAMS),line:p({},w.DEFAULT_PARAMS),polygon:p({},w.DEFAULT_PARAMS)};const E=w},50729:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I,x:()=>E});var n=r(68189),i=r(77707),o=r(94551),a=r(12479),s=r(40398),l=r(81971),u=r(83473),c=r(68524),f=r(70992),h=r(2532);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function _(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},v.apply(this,arguments)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var E={RENDER:"render",FEATURE:"feature"},x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(d,e);var t,r,a,p=b(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var a=f.EY(t,c.MVT),u=r;"string"!=typeof t&&(a=y(y({},a),t),u.maxExtent=t.maxExtent);var h=o||new n.Z(a,u,i);return e=p.call(this,a,u,i,h),(0,s.o8)(n.Z)&&(0,l.Z)("La implementación usada no puede crear capas Vector"),e.minZoom=u.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=u.maxZoom||Number.POSITIVE_INFINITY,e.extract=void 0!==a.extract&&a.extract,e.mode=a.mode||E.RENDER,e}return t=d,r=[{key:"extract",get:function(){return this.getImpl().extract},set:function(e){(0,s.Ew)(e)?this.getImpl().extract=!1:(0,s.HD)(e)?this.getImpl().extract="true"===(0,s.Fv)(e):this.getImpl().extract=e}},{key:"setStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.DEFAULT_OPTIONS_STYLE;v(w(d.prototype),"setStyle",this).call(this,e,t,r)}},{key:"getProjection",value:function(){return this.getImpl().getProjection()}},{key:"getGeometryType",value:function(){var e=null,t=this.getFeatures();if(!(0,s.Ew)(t)){var r=t[0];(0,s.Ew)(r)||(e=r.getType())}return e}},{key:"getFeatures",value:function(){var e=this;return this.getImpl().getFeatures().map((function(t){return e.mode===E.RENDER?i.Z.olFeature2Facade(t):e.mode===E.FEATURE?o.Z.olFeature2Facade(t,void 0,e.getProjection()):null}))}},{key:"getFeatureById",value:function(e){var t=this;if((0,s.Ew)(e))return u.error((0,h.NA)("dialog").id_feature),null;var r=this.getImpl().getFeatureById(e);return r.map((function(e){return t.mode===E.RENDER?i.Z.olFeature2Facade(e):t.mode===E.FEATURE?o.Z.olFeature2Facade(e,void 0,t.getProjection()):null})),r}},{key:"getFilter",value:function(){}},{key:"setFilter",value:function(){}},{key:"removeFilter",value:function(){}},{key:"addFeatures",value:function(){}},{key:"removeFeatures",value:function(){}},{key:"refresh",value:function(){}},{key:"redraw",value:function(){}},{key:"toGeoJSON",value:function(){}}],r&&m(t.prototype,r),a&&m(t,a),Object.defineProperty(t,"prototype",{writable:!1}),d}(a.Z);x.DEFAULT_PARAMS_STYLE={fill:{color:"#fff",opacity:.6},stroke:{color:"#827ec5",width:2}},x.DEFAULT_OPTIONS_STYLE={point:y(y({},x.DEFAULT_PARAMS_STYLE),{},{radius:5}),line:y({},x.DEFAULT_PARAMS_STYLE),polygon:y({},x.DEFAULT_PARAMS_STYLE)};const I=x},73477:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(65634),i=r(89437),o=r(40398),a=r(81971),s=r(68524),l=r(70992),u=r(83473),c=r(2532);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,r)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(h,e);var t,r,i,f=_(h);function h(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var u=l.EY(t,s.MapLibre),c=r;u=p(p({},u),c),(0,o.HD)(t)&&(c.disableBackgroundColor=u.disableBackgroundColor,c.displayInLayerSwitcher=u.displayInLayerSwitcher),u.maxExtent&&(u.maxExtent=void 0,console.warn("La propiedad maxExtent no está soportada")),(u.isBase||!u.transparent&&void 0!==u.transparent)&&(u.isBase=!1,u.transparent=!0),u.type=s.MapLibre;var d=new n.Z(u,c,i);return e=f.call(this,u,d),d.facade=v(e),(0,o.o8)(n.Z)&&(0,a.Z)("La implementación usada no puede crear capas Vector"),e.extract=void 0!==u.extract&&u.extract,e.minZoom=c.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=c.maxZoom||Number.POSITIVE_INFINITY,e.infoEventType=u.infoEventType||"click",e.disableBackgroundColor=void 0!==c.disableBackgroundColor?c.disableBackgroundColor:void 0,e.maplibrestyle=u.maplibrestyle,e}return t=h,(r=[{key:"extract",get:function(){return this.getImpl().extract},set:function(e){(0,o.Ew)(e)?this.getImpl().extract=!1:(0,o.HD)(e)?this.getImpl().extract="true"===(0,o.Fv)(e):this.getImpl().extract=e}},{key:"getStyle",value:function(){}},{key:"setMaxExtent",value:function(){}},{key:"getFeatureById",value:function(e){var t=null;return(0,o.Ew)(e)?u.error((0,c.NA)("dialog").id_feature):t=this.getImpl().getFeatureById(e),t}},{key:"setFilter",value:function(e){}},{key:"setMapLibreStyleFromId",value:function(e){var t=this;(0,o.Ew)(e)||Array.isArray(e)&&e.forEach((function(e){var r=e.id,n=e.paint,i=void 0!==n&&n,o=e.layout,a=void 0!==o&&o;i&&i.forEach((function(e){var n=e.property,i=e.value;t.setPaintProperty(r,n,i)})),a&&a.forEach((function(e){var n=e.property,i=e.value;t.setLayoutProperty(r,n,i)}))}))}},{key:"getMapLibreStyleFromId",value:function(e){return this.getImpl().getMapLibreStyleFromId(e)}},{key:"setPaintProperty",value:function(e,t,r){this.getImpl().setPaintProperty(e,t,r)}},{key:"setLayoutProperty",value:function(e,t,r){this.getImpl().setLayoutProperty(e,t,r)}},{key:"getProjection",value:function(){return this.getImpl().getProjection()}},{key:"getGeometryType",value:function(){return null}},{key:"getFeatures",value:function(){return this.getImpl().getFeatures()}},{key:"addFeatures",value:function(){}},{key:"removeFeatures",value:function(){}},{key:"refresh",value:function(){}},{key:"redraw",value:function(){}},{key:"toGeoJSON",value:function(){}},{key:"maplibrestyle",get:function(){return this.getImpl().maplibrestyle},set:function(e){(0,o.Ew)(e)||(this.getImpl().maplibrestyle=e,this.getImpl().ol3Layer&&this.getImpl().setStyleMap(e))}},{key:"url",get:function(){return this.getImpl().url},set:function(e){(0,o.Ew)(e)||(this.getImpl().url=e,this.getImpl().ol3Layer&&this.getImpl().setStyleMap(e))}},{key:"type",get:function(){return s.MapLibre},set:function(e){(0,o.o8)(e)||(0,o.Ew)(e)||e===s.MapLibre||(0,a.Z)("El tipo de capa debe ser '".concat(s.MapLibre).concat("' pero se ha especificado '").concat(e).concat("'"))}},{key:"equals",value:function(e){var t=!1;return e instanceof h&&(t=this.url===e.url,t=t&&this.name===e.name),t}}])&&y(t.prototype,r),i&&y(t,i),Object.defineProperty(t,"prototype",{writable:!1}),h}(i.Z);b.DEFAULT_PARAMS_STYLE={fill:{color:"#fff",opacity:.6},stroke:{color:"#827ec5",width:2}},b.DEFAULT_OPTIONS_STYLE={point:p(p({},b.DEFAULT_PARAMS_STYLE),{},{radius:5}),line:p({},b.DEFAULT_PARAMS_STYLE),polygon:p({},b.DEFAULT_PARAMS_STYLE)};const w=b},61901:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(39802),i=r(40398),o=r(81971),a=r(12479),s=r(68524),l=r(70992),u=r(2532);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},g.apply(this,arguments)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(f,e);var t,r,a,c=_(f);function f(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var h=l.EY(e,s.OGCAPIFeatures),p=r;"string"!=typeof e&&(p.maxExtent=e.maxExtent);var d=new n.Z(p,a);return t=c.call(this,h,p,void 0,d),(0,i.o8)(n.Z)&&(0,o.Z)((0,u.NA)("exception").OGCAPIFeatureslayer_method),(0,i.Ew)(e)&&(0,o.Z)((0,u.NA)("exception").no_param),t.legend=h.legend,t.url=h.url,t.name=h.name,t.limit=h.limit,t.bbox=h.bbox,t.format=h.format,t.offset=h.offset,t.id=h.id,t.extract=void 0!==h.extract&&h.extract,t.cql=a.cql,t.conditional=h.conditional,t.crs=h.crs,t.geometry=h.geometry,t.minZoom=p.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=p.maxZoom||Number.POSITIVE_INFINITY,t.opt=r,t}return t=f,r=[{key:"name",get:function(){return this.getImpl().name},set:function(e){(0,i.Ew)(e)?this.getImpl().name=this.name:this.getImpl().name=e}},{key:"limit",get:function(){return this.getImpl().limit},set:function(e){(0,i.Ew)(e)?this.getImpl().limit=this.limit:this.getImpl().limit=e}},{key:"bbox",get:function(){return this.getImpl().bbox},set:function(e){(0,i.Ew)(e)?this.getImpl().bbox=this.bbox:this.getImpl().bbox=e}},{key:"format",get:function(){return this.getImpl().format},set:function(e){(0,i.Ew)(e)&&(this.getImpl().format=this.format),this.getImpl().format=e}},{key:"offset",get:function(){return this.getImpl().offset},set:function(e){(0,i.Ew)(e)?this.getImpl().offset=this.offset:this.getImpl().offset=e}},{key:"id",get:function(){return this.getImpl().id},set:function(e){(0,i.Ew)(e)?this.getImpl().id=this.id:this.getImpl().id=e}},{key:"conditional",get:function(){return this.getImpl().conditional},set:function(e){(0,i.Ew)(e)?this.getImpl().conditional=this.conditional:this.getImpl().conditional=e}},{key:"setStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.DEFAULT_OPTS_STYLE;g(v(f.prototype),"setStyle",this).call(this,e,t,r)}},{key:"extract",get:function(){return this.getImpl().extract},set:function(e){(0,i.Ew)(e)?this.getImpl().extract=!1:(0,i.HD)(e)?this.getImpl().extract="true"===(0,i.Fv)(e):this.getImpl().extract=e}},{key:"equals",value:function(e){var t=!1;return e instanceof f&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.legend===e.legend,t=t&&this.limit===e.limit,t=t&&this.format===e.format,t=t&&this.offset===e.offset,t=t&&this.bbox===e.bbox,t=t&&this.id===e.id,t=t&&this.extract===e.extract,t=t&&this.predefinedStyles===e.predefinedStyles),t}}],r&&d(t.prototype,r),a&&d(t,a),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.Z);A.DEFAULT_PARAMS={fill:{color:"rgba(103, 175, 19, 0.2)",opacity:.4},stroke:{color:"#67af13",width:1}},A.DEFAULT_OPTS_STYLE={point:h(h({},A.DEFAULT_PARAMS),{},{radius:5}),line:h({},A.DEFAULT_PARAMS),polygon:h({},A.DEFAULT_PARAMS)};const b=A},12417:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(48609),i=r(89437),o=r(40398),a=r(81971),s=r(68524),l=r(70992),u=r(2532);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}const _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(d,e);var t,r,i,c=g(d);function d(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var p=e;(0,o.o8)(n.Z)&&(0,a.Z)((0,u.NA)("exception").osm_method),(0,o.Ew)(p)&&(p="OSM");var y=l.EY(p,s.OSM),g=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},y),m=new n.Z(y,g,i);return(0,o.Ew)(y.name)&&(y.name="osm"),(t=c.call(this,y,m)).name=y.name,t.legend=y.legend,(0,o.Ew)(y.legend)&&(t.legend="OpenStreetMap"),t.transparent=y.transparent,t.options=r,t}return t=d,(r=[{key:"type",get:function(){return s.OSM},set:function(e){(0,o.o8)(e)||(0,o.Ew)(e)||e===s.OSM||(0,a.Z)("El tipo de capa debe ser '".concat(s.OSM).concat("' pero se ha especificado '").concat(e).concat("'"))}},{key:"equals",value:function(e){var t=!1;return e instanceof d&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.options===e.options),t}}])&&p(t.prototype,r),i&&p(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.Z)},4884:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(9538),i=r(89437),o=r(40398),a=r(81971),s=r(70992),l=r(68524),u=r(2532);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(o)?o:String(o)),n)}var i,o}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(d,e);var t,r,i,c=p(d);function d(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(0,o.o8)(n.Z)&&(0,a.Z)((0,u.NA)("exception").tms_method);var f=s.EY(e,l.TMS),h=r;"string"!=typeof e&&(h.maxExtent=e.maxExtent),(0,o.Ew)(f.crossOrigin)||(h.crossOrigin=f.crossOrigin);var p=new n.Z(f,h,i);return(t=c.call(this,f,p)).url=f.url,t.userMaxExtent=e.maxExtent,t.name=f.name,t.legend=f.legend,t.tileGridMaxZoom=f.tileGridMaxZoom,(0,o.o8)(t.tileGridMaxZoom)&&(t.minZoom=r.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=r.maxZoom||Number.POSITIVE_INFINITY),t.options=r,t}return t=d,(r=[{key:"equals",value:function(e){var t=!1;return e instanceof d&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.options===e.options),t}}])&&f(t.prototype,r),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.Z)},68524:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GenericRaster:()=>A,GenericVector:()=>v,GeoJSON:()=>p,GeoTIFF:()=>a,KML:()=>i,MBTiles:()=>m,MBTilesVector:()=>_,MVT:()=>y,MapLibre:()=>g,OGCAPIFeatures:()=>l,OSM:()=>c,TMS:()=>h,Vector:()=>d,WFS:()=>s,WMS:()=>o,WMTS:()=>u,XYZ:()=>f,default:()=>x,know:()=>E,parse:()=>w});var n=r(40398),i="KML",o="WMS",a="GeoTIFF",s="WFS",l="OGCAPIFeatures",u="WMTS",c="OSM",f="XYZ",h="TMS",p="GeoJSON",d="Vector",y="MVT",g="MapLibre",m="MBTiles",_="MBTilesVector",v="GenericVector",A="GenericRaster",b={KML:i,WMS:o,GeoTIFF:a,WFS:s,WMTS:u,OSM:c,GeoJSON:p,Vector:d,MVT:y,MapLibre:g,XYZ:f,TMS:h,MBTiles:m,MBTilesVector:_,OGCAPIFeatures:l,GenericRaster:A,GenericVector:v},w=function(e){var t=(0,n.Fv)(e,!0);return t="WMS_FULL"===t?o:"WFST"===t?s:Object.keys(b).find((function(e){var r=b[e];return(0,n.HD)(r)&&(0,n.Fv)(r,!0)===t})),b[t]},E=function(e){return-1!==[i,o,a,s,u,y,g,f,h,m,_,l].indexOf(w(e))};const x={}},12479:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(54180),i=r(9220),o=r(32825),a=r(40398),s=r(81971),l=r(89437),u=r(68524),c=r(83473),f=r(71085),h=r(54832),p=r(46329),d=r(77055),y=r(2532),g=r(73579);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(v,e);var t,r,m,_=x(v);function v(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v);var l=t;l.type=t.type?t.type:u.Vector;var c=r;"string"!=typeof t&&(c.maxExtent=t.maxExtent?t.maxExtent:r.maxExtent,l.maxExtent=c.maxExtent);var f=o||new n.Z(c,i);e=_.call(this,l,f),(0,a.o8)(n.Z)&&(0,s.Z)((0,y.NA)("exception").vectorlayer_method),e.style_=null,e.filter_=null,e.minZoom=c.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=c.maxZoom||Number.POSITIVE_INFINITY,e.infoEventType=l.infoEventType||"click",e.extract=void 0!==l.extract&&l.extract,e.predefinedStyles=(0,a.o8)(r.predefinedStyles)?[]:r.predefinedStyles;var h=(0,a.o8)(e.constructor.DEFAULT_OPTS_STYLE)?e.constructor.DEFAULT_OPTIONS_STYLE:e.constructor.DEFAULT_OPTS_STYLE;return(0,a.o8)(r.style)&&h?e.predefinedStyles.unshift(new g.Z(h)):(0,a.o8)(r.style)?e.predefinedStyles.unshift(new g.Z(v.DEFAULT_OPTIONS_STYLE)):e.predefinedStyles.unshift(r.style),e.setStyle(r.style),f.on(d.VX,(function(t){return e.fire(d.VX,[t])})),e}return t=v,r=[{key:"getFilter",value:function(){return this.filter_}},{key:"removeFilter",value:function(){this.setFilter(null)}},{key:"addFeatures",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e;(0,a.Ew)(r)||((0,a.kJ)(r)||(r=[r]),this.getImpl().addFeatures(r,t))}},{key:"getFeatures",value:function(e){var t=e;return(0,a.Ew)(this.getFilter())&&(t=!0),this.getImpl().getFeatures(t,this.filter_)}},{key:"getFeatureById",value:function(e){var t=null;return(0,a.Ew)(e)?c.error((0,y.NA)("dialog").id_feature):t=this.getImpl().getFeatureById(e),t}},{key:"removeFeatures",value:function(e){var t=e;(0,a.kJ)(t)||(t=[t]),this.getImpl().removeFeatures(t)}},{key:"clear",value:function(){this.removeFilter(),this.removeFeatures(this.getFeatures(!0))}},{key:"refresh",value:function(){this.getImpl().refresh(!0),this.redraw()}},{key:"redraw",value:function(){this.getImpl().redraw()}},{key:"getFeaturesExtent",value:function(e){return this.getImpl().getFeaturesExtent(!0,this.filter_)}},{key:"extract",get:function(){return this.getImpl().extract},set:function(e){(0,a.Ew)(e)?this.getImpl().extract=!1:(0,a.HD)(e)?this.getImpl().extract="true"===(0,a.Fv)(e):this.getImpl().extract=e}},{key:"equals",value:function(e){var t=!1;return e instanceof v&&(t=this.name===e.name),t}},{key:"setStyle",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.DEFAULT_OPTIONS_STYLE;this.getImpl().isLoaded()?((0,a.Ew)(this.getStyle())&&this.applyStyle_(n,r),(0,a.Ew)(e)||this.applyStyle_(e,r)):this.once(d.VX,(function(){(0,a.Ew)(t.getStyle())&&t.applyStyle_(n,r),(0,a.Ew)(e)||t.applyStyle_(e,r)}))}},{key:"applyStyle_",value:function(e,t){var r=this,n=e;if((0,a.HD)(n)?n=f.Z.deserialize(n):n instanceof f.Z||(n=new g.Z(n)),n instanceof f.Z){var i=n.getOptions();i.point&&(i=i.point),i.icon&&i.icon.src&&"string"==typeof i.icon.src&&i.icon.src.endsWith(".svg")&&(i.icon.fill||i.icon.stroke)?(0,a.XO)(i.icon.src,i).then((function(n){i.icon.src=n,r.applyStyle_(e,t)})):n instanceof f.Z&&(!(0,a.Ew)(this.style_)&&this.style_ instanceof f.Z&&this.style_.unapply(this),n.apply(this,t),this.style_=n,this.fire(d.CK,[n,this]))}this.fire(d.CK,[n,this])}},{key:"getStyle",value:function(){return this.style_}},{key:"clearStyle",value:function(){this.setStyle(null),this.getFeatures().forEach((function(e){return e.clearStyle()}))}},{key:"getLegendURL",value:function(){var e=this.getImpl().getLegendURL();return-1!==e.indexOf(l.Z.LEGEND_DEFAULT)&&-1===e.indexOf(l.Z.LEGEND_ERROR)&&this.style_ instanceof f.Z&&(e=this.style_.toImage()),e}},{key:"getGeometryType",value:function(){var e=null;if(!(0,a.Ew)(this.getFeatures())){var t=this.getFeatures()[0];(0,a.Ew)(t)||(0,a.Ew)(t.getGeometry())||(e=t.getGeometry().type)}return e}},{key:"getMaxExtent",value:function(){return this.getFeaturesExtent()}},{key:"calculateMaxExtent",value:function(){return this.getImpl().getFeaturesExtentPromise(!0,this.filter_)}},{key:"setFilter",value:function(e){if((0,a.Ew)(e)||e instanceof h.Z){this.filter_=e;var t=this.style_;t instanceof p.Z&&t.getImpl().deactivateChangeEvent(),this.redraw(),t instanceof p.Z&&(t.getImpl().activateChangeEvent(),t.refresh())}else c.error((0,y.NA)("dialog").vector_filter)}},{key:"toGeoJSON",value:function(){var e=this.map_.getProjection().code,t=this.getFeatures().map((function(e){return e.getGeoJSON()})),r=o.Z.getSupportedProjs().filter((function(e){return e.codes.includes("EPSG:4326")}))[0];return{type:"FeatureCollection",crs:{type:"name",properties:{name:r.codes[r.codes.length-2]}},features:(0,i.w)(t,e)}}}],r&&b(t.prototype,r),m&&b(t,m),Object.defineProperty(t,"prototype",{writable:!1}),v}(l.Z);S.DEFAULT_PARAMS={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},S.DEFAULT_OPTIONS_STYLE={point:v(v({},S.DEFAULT_PARAMS),{},{radius:5}),line:v({},S.DEFAULT_PARAMS),polygon:v({},S.DEFAULT_PARAMS)};const C=S},32974:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(99368),i=r(40398),o=r(81971),a=r(12479),s=r(68524),l=r(70992),u=r(85992),c=r(2532);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},m.apply(this,arguments)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(h,e);var t,r,a,f=v(h);function h(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var p=l.EY(t,s.WFS),d=r;"string"!=typeof t&&(d.maxExtent=t.maxExtent);var y=u||new n.Z(d,a);return e=f.call(this,p,d,void 0,y),(0,i.o8)(n.Z)&&(0,o.Z)((0,c.NA)("exception").wfslayer_method),(0,i.Ew)(t)&&(0,o.Z)((0,c.NA)("exception").no_param),e.namespace=p.namespace,e.legend=p.legend,e.cql=p.cql,e.geometry=p.geometry,e.ids=p.ids,e.version=p.version,e.extract=void 0!==p.extract&&p.extract,e.minZoom=d.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=d.maxZoom||Number.POSITIVE_INFINITY,e.options=r,e}return t=h,r=[{key:"extract",get:function(){return this.getImpl().extract},set:function(e){(0,i.Ew)(e)?this.getImpl().extract=!1:(0,i.HD)(e)?this.getImpl().extract="true"===(0,i.Fv)(e):this.getImpl().extract=e}},{key:"namespace",get:function(){return this.getImpl().namespace},set:function(e){this.getImpl().namespace=e}},{key:"cql",get:function(){return this.getImpl().cql},set:function(e){this.getImpl().cql=e}},{key:"geometry",get:function(){return this.getImpl().geometry},set:function(e){if(!(0,i.Ew)(e)){var t=(0,u.Qc)(e);(0,i.Ew)(t)&&(0,o.Z)("El tipo de capa WFS <b>".concat(e,"</b> no se reconoce. Los tipos disponibles son: POINT, LINE, POLYGON, MPOINT, MLINE, MPOLYGON")),this.getImpl().geometry=t}}},{key:"ids",get:function(){return this.getImpl().ids},set:function(e){(0,i.Ew)(e)?this.getImpl().ids=this.ids:this.getImpl().ids=e}},{key:"version",get:function(){return this.getImpl().version},set:function(e){(0,i.Ew)(e)?this.getImpl().version="1.0.0":this.getImpl().version=e}},{key:"setCQL",value:function(e){var t=this,r=e;this.getImpl().getDescribeFeatureType().then((function(e){if(!(0,i.Ew)(r)){var n=e.geometryName;r=r.replace(/{{geometryName}}/g,n)}t.getImpl().cql!==r&&t.getImpl().setCQL(r)}))}},{key:"setStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.DEFAULT_OPTIONS_STYLE;m(A(h.prototype),"setStyle",this).call(this,e,t,r)}},{key:"equals",value:function(e){var t=!1;return e instanceof h&&(t=this.url===e.url,t=t&&this.namespace===e.namespace,t=t&&this.name===e.name,t=t&&this.ids===e.ids,t=t&&this.cql===e.cql,t=t&&this.version===e.version,t=t&&this.extract===e.extract,t=t&&this.predefinedStyles===e.predefinedStyles),t}}],r&&y(t.prototype,r),a&&y(t,a),Object.defineProperty(t,"prototype",{writable:!1}),h}(a.Z);b.DEFAULT_PARAMS={fill:{color:"rgba(103, 175, 19, 0.2)",opacity:.4},stroke:{color:"#67af13",width:1}},b.DEFAULT_OPTIONS_STYLE={point:p(p({},b.DEFAULT_PARAMS),{},{radius:5}),line:p({},b.DEFAULT_PARAMS),polygon:p({},b.DEFAULT_PARAMS)};const w=b},9396:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(71321),i=r(40398),o=r(81971),a=r(89437),s=r(70992),l=r(68524),u=r(2532);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(f,e);var t,r,a,c=m(f);function f(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(0,i.o8)(n.Z)&&(0,o.Z)((0,u.NA)("exception").wms_method),(0,i.Ew)(e)&&(0,o.Z)((0,u.NA)("exception").no_param);var p=s.EY(e,l.WMS),d=h(h({},r),{},{visibility:p.visibility,queryable:p.queryable,displayInLayerSwitcher:p.displayInLayerSwitcher,useCapabilities:p.useCapabilities,transparent:p.transparent,isWMSfull:void 0===p.name}),y=new n.Z(d,a);return(t=c.call(this,p,y)).legend=p.legend,t.version=p.version,(0,i.Ew)(p.tiled)||(t.tiled=p.tiled),(0,i.Ew)(a.capabilitiesMetadata)||(t.capabilitiesMetadata=a.capabilitiesMetadata),t.minZoom=r.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=r.maxZoom||Number.POSITIVE_INFINITY,t.options=d,t.getCapabilitiesPromise_=null,t.useCapabilities=!1!==e.useCapabilities,t._updateNoCache(),t}return t=f,(r=[{key:"tiled",get:function(){return this.getImpl().tiled},set:function(e){(0,i.Ew)(e)?this.getImpl().tiled=!0:(0,i.HD)(e)?this.getImpl().tiled="true"===(0,i.Fv)(e):this.getImpl().tiled=e}},{key:"version",get:function(){return this.getImpl().version},set:function(e){(0,i.Ew)(e)?this.getImpl().version="1.3.0":this.getImpl().version=e}},{key:"options",get:function(){return this.getImpl().options},set:function(e){this.getImpl().options=e}},{key:"getMaxExtent",value:function(e){var t,r=this;return(0,i.Ew)(this.userMaxExtent)?((0,i.Ew)(this.options.wmcMaxExtent)?(0,i.Ew)(this.map_.userMaxExtent)?this.getCapabilities().then((function(t){var n=r.getImpl().getExtentFromCapabilities(t);if((0,i.Ew)(n)){var o=r.map_.getProjection().getExtent();r.maxExtent_=o}else r.maxExtent_=n;(0,i.mf)(e)&&e(r.maxExtent_)})):this.maxExtent_=this.map_.userMaxExtent:this.maxExtent_=this.options.wmcMaxExtent,t=this.maxExtent_):t=this.userMaxExtent,!(0,i.Ew)(t)&&(0,i.mf)(e)&&e(t),t}},{key:"calculateMaxExtent",value:function(){var e=this;return new Promise((function(t){e.getMaxExtent(t)}))}},{key:"calculateMaxExtentWithCapabilities",value:function(e){if((0,i.Ew)(this.userMaxExtent)&&this.userMaxExtent)return this.userMaxExtent;if((0,i.Ew)(this.options.wmcMaxExtent)&&this.options.wmcMaxExtent)return this.maxExtent_=this.options.wmcMaxExtent,this.maxExtent_;if((0,i.Ew)(this.map_.userMaxExtent)&&this.map_.userMaxExtent)return this.maxExtent_=this.map_.userMaxExtent,this.maxExtent_;var t=this.getImpl().getExtentFromCapabilities(e);if((0,i.Ew)(t)){var r=this.map_.getProjection().getExtent();return this.maxExtent_=r,this.maxExtent_}return t}},{key:"getCapabilities",value:function(){return(0,i.Ew)(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=this.getImpl().getCapabilities()),this.getCapabilitiesPromise_}},{key:"getNoCacheUrl",value:function(){return this._noCacheUrl}},{key:"getNoCacheName",value:function(){return this._noCacheName}},{key:"updateMinMaxResolution",value:function(e){return this.getImpl().updateMinMaxResolution(e)}},{key:"_updateNoCache",value:function(){var e=M.config.tileMappgins.tiledNames.indexOf(this.name);-1!==e&&(0,i.yB)(M.config.tileMappgins.tiledUrls[e],this.url)&&(this._noCacheUrl=M.config.tileMappgins.urls[e],this._noCacheName=M.config.tileMappgins.names[e])}},{key:"equals",value:function(e){var t=!1;return e instanceof f&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.version===e.version),t}}])&&d(t.prototype,r),a&&d(t,a),Object.defineProperty(t,"prototype",{writable:!1}),f}(a.Z)},86659:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(52344),i=r(40398),o=r(81971),a=r(89437),s=r(70992),l=r(68524),u=r(2532);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(o)?o:String(o)),n)}var i,o}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(d,e);var t,r,a,c=p(d);function d(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var f=s.EY(e,l.WMTS),h=r;"string"!=typeof e&&(h.maxExtent=e.maxExtent),void 0!==e.minZoom&&(h.minZoom=e.minZoom),void 0!==e.maxZoom&&(h.maxZoom=e.maxZoom);var p=new n.Z(h,a);return t=c.call(this,f,p),(0,i.o8)(n.Z)&&(0,o.Z)((0,u.NA)("exception").wmts_method),(0,i.Ew)(e)&&(0,o.Z)((0,u.NA)("exception").no_param),t.matrixSet=f.matrixSet,t.legend=f.legend,t.options=h,t.useCapabilities=!1!==f.useCapabilities,t.minZoom=h.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=h.maxZoom||Number.POSITIVE_INFINITY,(0,i.Ew)(a.capabilitiesMetadata)||(t.capabilitiesMetadata=a.capabilitiesMetadata),t}return t=d,(r=[{key:"matrixSet",get:function(){return this.getImpl().matrixSet},set:function(e){this.getImpl().matrixSet=e}},{key:"options",get:function(){return this.getImpl().options},set:function(e){this.getImpl().options=e}},{key:"getCapabilities",value:function(){return(0,i.Ew)(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=this.getImpl().getCapabilities()),this.getCapabilitiesPromise_}},{key:"getMaxExtent",value:function(){return this.getImpl().getMaxExtent()}},{key:"equals",value:function(e){var t=!1;return e instanceof d&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.matrixSet===e.matrixSet),t}},{key:"getFeatureInfoUrl",value:function(e,t,r){return this.getImpl().getFeatureInfoUrl(e,t,r)}},{key:"getTileColTileRow",value:function(e,t){return this.getImpl().getTileColTileRow(e,t)}},{key:"setFormat",value:function(e){this.options.format=e}}])&&f(t.prototype,r),a&&f(t,a),Object.defineProperty(t,"prototype",{writable:!1}),d}(a.Z)},38189:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(68586),i=r(89437),o=r(40398),a=r(81971),s=r(70992),l=r(68524),u=r(2532);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(o)?o:String(o)),n)}var i,o}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(d,e);var t,r,i,c=p(d);function d(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(0,o.o8)(n.Z)&&(0,a.Z)((0,u.NA)("exception").xyz_method);var f=s.EY(e,l.XYZ),h=r;"string"!=typeof e&&(h.maxExtent=e.maxExtent);var p=new n.Z(e,h,i);return(t=c.call(this,f,p)).url=f.url,t.userMaxExtent=e.maxExtent,t.name=f.name,t.legend=f.legend,t.tileGridMaxZoom=f.tileGridMaxZoom||e.tileGridMaxZoom,(0,o.o8)(t.tileGridMaxZoom)&&(t.minZoom=r.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=r.maxZoom||Number.POSITIVE_INFINITY),t.options=r,t}return t=d,(r=[{key:"equals",value:function(e){var t=!1;return e instanceof d&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.options===e.options),t}}])&&f(t.prototype,r),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.Z)},70514:(e,t,r)=>{"use strict";r.d(t,{FD:()=>m,O7:()=>d,UI:()=>p,l6:()=>_,sj:()=>y,vc:()=>h});r(32825);var n=r(99075),i=r(14116),o=r(32974),a=r(4884),s=r(86659),l=r(30386),u=r(40398),c=r(81971),f=(r(2808),r(25559),r(2532)),h=function e(t,r){e[t]=r},p=function(e,t,r){return(0,u.Ew)(n.Z)&&(0,c.Z)((0,f.NA)("exception").no_impl),new i.Z(e,t,r)},d=!0,y=function(e){"boolean"==typeof e&&(d=e)},g=function(){return{BASE_MapaBase_IGNBaseTodo_WMTS:new s.Z({url:"https://www.ign.es/wmts/ign-base?",name:"IGNBaseTodo",legend:"Mapa IGN",matrixSet:"GoogleMapsCompatible",transparent:!1,attribution:'<p><b>IDEE</b>: <a style="color: #0000FF" href="https://www.scne.es" target="_blank">SCNE</a></p>'},{format:"image/jpeg",displayInLayerSwitcher:!1,queryable:!1,visible:!0}),MapaBase_CallejeroGris_WMTS:"WMTS*https://www.ign.es/wmts/ign-base?*IGNBase-gris*GoogleMapsCompatible*IGNBaseGris*true*image/jpeg",OcupacionSuelo_LandCoverSurfaces_WMTS:"WMTS*https://servicios.idee.es/wmts/ocupacion-suelo?*LC.LandCoverSurfaces*GoogleMapsCompatible*LandCoverSurfaces*true*image/png",MDT_ElevationGridCoverage_WMTS:"WMTS*https://servicios.idee.es/wmts/mdt?*EL.ElevationGridCoverage*GoogleMapsCompatible*ElevationGridCoverage*true*image/jpeg",CartografiaRaster_MTN_WMTS:"WMTS*https://www.ign.es/wmts/mapa-raster?*MTN*GoogleMapsCompatible*MTN*true*image/jpeg",PNOA_MA_OrthoimageCoverage_WMTS:"WMTS*https://www.ign.es/wmts/pnoa-ma?*OI.OrthoimageCoverage*GoogleMapsCompatible*OrthoimageCoverage*true*image/jpeg",MapaLiDAR_GridCoverageDSM_WMTS:"WMTS*https://wmts-mapa-lidar.idee.es/lidar?*EL.GridCoverageDSM*GoogleMapsCompatible*GridCoverageDSM*true*image/png",MTN_Historico_Catastrones_WMTS:"WMTS*https://www.ign.es/wmts/primera-edicion-mtn?*Catastrones*GoogleMapsCompatible*catastrones*true*image/jpeg",Planos_Historicos_MadridMancelliMadrid_WMTS:"WMTS*https://www.ign.es/wmts/planos?*MancelliMadrid*GoogleMapsCompatible*MancelliMadrid*true*image/png",NGBE_GeographicalNames_WMS:"WMS*GeographicalNames*https://www.ign.es/wms-inspire/ngbe?*GN.GeographicalNames",UnidadesAdministrativas_AdministrativeUnit_WMS:"WMS*UnidadesAdministrativas*https://www.ign.es/wms-inspire/unidades-administrativas?*AU.AdministrativeUnit",Hidrografia_HydroPointOfInterest_WMS:"WMS*HydroPointOfInterest*https://servicios.idee.es/wms-inspire/hidrografia?*HY.PhysicalWaters.HydroPointOfInterest",Usos_Coberturas_HRLForestTCD2015_WMS:"WMS*HRLForestTCD2015*https://servicios.idee.es/wms/copernicus-landservice-spain?*HRLForestTCD2015",Cuadriculas_GridETRS89_WMS:"WMS*GridETRS89*https://www.ign.es/wms-inspire/cuadriculas?*Grid-ETRS89-lonlat-50k",CaminoSantiago_CaminoFrances_WMS:"WMS*CaminoFrances*https://www.ign.es/wms-inspire/camino-santiago?*camino_frances",RedesGeodesicas_RedRegente_WMS:"WMS*RedRegente*https://www.ign.es/wms-inspire/redes-geodesicas?*RED_REGENTE",Informacionsismica_Ultimos10dias_WMS:"WMS*Ultimos10dias*https://www.ign.es/wms-inspire/geofisica?*Ultimos10dias",RedVigilanciaVolcanica_SIS_WMS:"WMS*SIS*https://wms-volcanologia.ign.es/volcanologia?*sis",PNOA_Historico_PNOA2019_WMS:"WMS*SIPNOA2019S*https://www.ign.es/wms/pnoa-historico?*PNOA2019",MinutasCartograficas_Minutas_WMS:"WMS*Minutas*https://www.ign.es/wms/minutas-cartograficas?*Minutas",HojasKilometricas_ParcelasCatastrales_WMS:"WMS*ParcelasCatastrales*https://www.ign.es/wms/hojas-kilometricas?*Parcelas_Catastrales",Fototeca_InfoVuelos_WMS:"WMS*InfoVuelos*https://wms-fototeca.idee.es/fototeca?*infoVuelos",SatelitesHistoricos_SentinelInvierno23_WMS:"WMS*SentinelInvierno23*https://wms-satelites-historicos.idee.es/satelites-historicos?*SENTINEL.2023invierno_432-1184",PNOA_Provisional_MosaicElement_WMS:"WMS*MosaicElement*https://wms-pnoa.idee.es/pnoa-provisionales?*OI.MosaicElement",Base_IGNBaseTodo_TMS:new a.Z({url:"https://tms-ign-base.idee.es/1.0.0/IGNBaseTodo/{z}/{x}/{-y}.jpeg",legend:"IGNBaseTodo",visible:!0,transparent:!1,tileGridMaxZoom:17,name:"IGNBaseTodo",attribution:'<p><b>IDEE</b>: <a style="color: #0000FF" href="https://www.scne.es" target="_blank">SCNE</a></p>'},{crossOrigin:"anonymous",displayInLayerSwitcher:!1}),IGNBaseTodo_TMS:"TMS*IGNBaseTodo*https://tms-ign-base.idee.es/1.0.0/IGNBaseTodo/{z}/{x}/{-y}.jpeg",BASE_IGNBaseOrto_TMS:new a.Z({url:"https://tms-ign-base.idee.es/1.0.0/IGNBaseOrto/{z}/{x}/{-y}.png",legend:"IGNBaseOrto",name:"IGNBaseOrto",visible:!0,transparent:!1,tileGridMaxZoom:17,attribution:'<p><b>IDEE</b>: <a style="color: #0000FF" href="https://www.scne.es" target="_blank">SCNE</a></p>'},{crossOrigin:"anonymous",displayInLayerSwitcher:!1}),IGNBaseOrto_TMS:"TMS*IGNBaseOrto*https://tms-ign-base.idee.es/1.0.0/IGNBaseOrto/{z}/{x}/{-y}.png",IGNBaseSimplificado_TMS:"TMS*IGNBaseSimplificado*https://tms-ign-base.idee.es/1.0.0/IGNBaseSimplificado/{z}/{x}/{-y}.png",MapaRaster_TMS:"TMS*MapaRaster*https://tms-mapa-raster.ign.es/1.0.0/mapa-raster/{z}/{x}/{-y}.jpeg",BASE_PNOA_MA_TMS:new a.Z({url:"https://tms-pnoa-ma.idee.es/1.0.0/pnoa-ma/{z}/{x}/{-y}.jpeg",legend:"PNOA_MA",name:"PNOA_MA",visible:!0,transparent:!1,tileGridMaxZoom:19,attribution:{name:"PNOA-MA",description:"IGN",url:"https://www.ign.es",contentAttributions:"https://componentes.cnig.es/api-core/files/attributions/WMTS_PNOA_20170220/atribucionPNOA_Url.kml",contentType:"kml"}},{crossOrigin:"anonymous",displayInLayerSwitcher:!1}),PNOA_MA_TMS:"TMS*PNOA_MA*https://tms-pnoa-ma.idee.es/1.0.0/pnoa-ma/{z}/{x}/{-y}.jpeg",RelieveSombreado_TMS:"TMS*RelieveSombreado*https://tms-relieve.idee.es/1.0.0/relieve/{z}/{x}/{-y}.jpeg",UnidadesAdministrativas_MVT:"MVT*https://vt-unidades-administrativas.ign.es/1.0.0/uadministrativa/{z}/{x}/{y}.pbf*UnidadesAdministrativas",Senderos_MVT:"MVT*https://vt-fedme.idee.es/vt.senderogr,vt.senderopr,vt.senderosl/{z}/{x}/{y}.pbf*Senderos",RedAlberguesJuveniles_MVT:"MVT*https://vt-reaj.idee.es/vt.alberguesjuveniles/{z}/{x}/{y}.pbf*RedAlberguesJuveniles",ViasVerdes_MVT:"MVT*https://vt-viasverdes.idee.es/vt.viasverdes/{z}/{x}/{y}.pbf*ViasVerdes",BTN_MVT:"MVT*https://vt-btn.idee.es/1.0.0/btn/tile/{z}/{y}/{x}.pbf*BTN",RedesGeodesicas_Regente_WFS:new o.Z({url:"https://www.ign.es/wfs/redes-geodesicas?",legend:"REGENTE",name:"RED_REGENTE",geometry:"POINT",extract:!0},{style:new l.Z({radius:2,fill:{color:"black",opacity:.5}})})}},m=function(e,t){if(!0===t)g=function(){return e};else{var r=Object.assign(g(),e);g=function(){return r}}return g()},_=function(e){var t=g();return(0,u.o8)(e)||(t=g()[e]),t}},38073:(e,t,r)=>{"use strict";r.d(t,{$L:()=>v,BU:()=>h,Cc:()=>A,Cw:()=>d,ED:()=>I,Fs:()=>E,GF:()=>P,HB:()=>p,Ih:()=>m,JO:()=>f,LK:()=>u,Nh:()=>c,Nq:()=>g,Ps:()=>C,ZP:()=>O,c4:()=>x,d5:()=>S,k_:()=>w,sh:()=>y,vV:()=>b,w_:()=>_});var n=r(40398),i=r(81971),o=r(2532);function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}var u=function e(t){var r;return(0,n.HD)(t)?r=document.getElementById(t):(0,n.Kn)(t)?(0,n.Ew)(t.id)?(0,n.Ew)(t.container)?(0,i.Z)((0,o.NA)("exception").no_container):r=e(t.container):r=document.getElementById(t.id):(0,i.Z)("El tipo del parámetro container no es válido: ".concat(l(t))),(0,n.Ew)(r)&&(0,i.Z)((0,o.NA)("exception").no_id_container),r},c=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("layers",e):(0,n.Kn)(e)?t=e.layers:(0,i.Z)("El tipo del parámetro container no es válido: ".concat(l(e))),t},f=function(e){var t;return(0,n.HD)(e)?(t=(0,n.X_)("wmc",e),(0,n.Ew)(t)&&(t=(0,n.X_)("wmcfile",e)),(0,n.Ew)(t)&&(t=(0,n.X_)("wmcfiles",e))):(0,n.Kn)(e)?(t=e.wmc,(0,n.Ew)(t)&&(t=e.wmcfile),(0,n.Ew)(t)&&(t=e.wmcfiles)):(0,i.Z)("El tipo del parámetro container no es válido: ".concat(l(e))),t},h=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("wms",e):(0,n.Kn)(e)?t=e.wms:(0,i.Z)("El tipo del parámetro container no es válido: ".concat(l(e))),t},p=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("wmts",e):(0,n.Kn)(e)?t=e.wmts:(0,i.Z)("El tipo del parámetro container no es válido: ".concat(l(e))),t},d=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("kml",e):(0,n.Kn)(e)?t=e.kml:(0,i.Z)("El tipo del parámetro container no es válido: ".concat(l(e))),t},y=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("controls",e):(0,n.Kn)(e)?t=e.controls:(0,i.Z)("El tipo del parámetro controls no es válido: ".concat(l(e))),t},g=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("getfeatureinfo",e):(0,n.Kn)(e)?(t=e.getfeatureinfo,!(0,n.o8)(t)&&(0,n.Ew)(t)&&(t="plain")):(0,i.Z)("El tipo del parámetro controls no es válido: ".concat(l(e))),t},m=function(e){var t;return(0,n.HD)(e)?(t=(0,n.X_)("maxExtent",e),(0,n.Ew)(t)&&(t=(0,n.X_)("maxextent",e))):(0,n.Kn)(e)?(t=e.maxExtent,(0,n.Ew)(t)&&(t=e.maxextent)):(0,i.Z)("El tipo del parámetro container no es válido: ".concat(l(e))),t},_=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("bbox",e):(0,n.Kn)(e)?t=e.bbox:(0,i.Z)("El tipo del parámetro container no es válido: ".concat(l(e))),t},v=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("zoom",e):(0,n.Kn)(e)?t=e.zoom:(0,i.Z)("El tipo del parámetro zoom no es válido: ".concat(l(e))),t},A=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("maxZoom",e):(0,n.Kn)(e)?t=e.maxZoom:(0,i.Z)("El tipo del parámetro maxZoom no es válido: ".concat(l(e))),t},b=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("minZoom",e):(0,n.Kn)(e)?t=e.minZoom:(0,i.Z)("El tipo del parámetro minZoom no es válido: ".concat(l(e))),t},w=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("center",e):(0,n.Kn)(e)?t=e.center:(0,i.Z)("El tipo del parámetro center no es válido: ".concat(l(e))),t},E=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("ticket",e):(0,n.Kn)(e)?t=e.ticket:(0,i.Z)("El tipo del parámetro ticket no es válido: ".concat(l(e))),t},x=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("zoomConstrains",e):(0,n.Kn)(e)?t=e.zoomConstrains:(0,i.Z)("El tipo del parámetro zoomConstrains no es válido: ".concat(l(e))),t},I=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("resolutions",e):(0,n.Kn)(e)?t=e.resolutions:(0,i.Z)("El tipo del parámetro container no es válido: ".concat(l(e))),t},S=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("projection",e):(0,n.Kn)(e)?t=e.projection:(0,i.Z)("El tipo del parámetro container no es válido: ".concat(l(e))),t},C=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("label",e):(0,n.Kn)(e)?t=e.label:(0,i.Z)("El tipo del parámetro container no es válido: ".concat(l(e))),t},P=function(e){var t;return(0,n.HD)(e)?t=(0,n.X_)("viewExtent",e):(0,n.Kn)(e)?t=e.viewExtent:(0,i.Z)("El tipo del parámetro viewExtent no es válido: ".concat(l(e))),(0,n.Ew)(t)||(0,n.kJ)(t)||(t=t.split(",").map(Number)),t};const O=s((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,n.Ew)(t)&&(0,i.Z)((0,o.NA)("exception").no_param),this.container=u(t),this.layers=c(t),this.wmc=f(t),this.wms=h(t),this.wmts=p(t),this.kml=d(t),this.controls=y(t),this.getfeatureinfo=g(t),this.maxExtent=m(t),this.bbox=_(t),this.zoom=v(t),this.minZoom=b(t),this.maxZoom=A(t),this.center=w(t),this.resolutions=I(t),this.projection=S(t),this.label=C(t),this.ticket=E(t),this.zoomConstrains=x(t),this.viewExtent=P(t)}))},70992:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{AM:()=>getExtractOGC,AT:()=>getOpacityMBTiles,Au:()=>getConditionalOGC,B5:()=>getOptionsWMTS,CJ:()=>projection,D8:()=>getNamespaceWFS,DC:()=>getNameWMTS,DS:()=>kml,E2:()=>getNameTMS,EG:()=>getStyleMBTilesVector,EY:()=>layer,Ek:()=>getQueryableWMS,HC:()=>wmts,HE:()=>getTileLoadFunctionMBTilesVector,Hw:()=>maxZoom,I:()=>getStyleWFS,IE:()=>getTransparentWMTS,IZ:()=>getQueryableWMTS,K7:()=>getNameMBTiles,Ki:()=>getExtractKML,Lm:()=>getVisibilityWMS,Ms:()=>geojson,ON:()=>getVersionWMS,QK:()=>getNameXYZ,QP:()=>getVisibilityMBTiles,RX:()=>getIdsWFS,TD:()=>getVersionWFS,U5:()=>getCQLWFS,U7:()=>getLegendGeoJSON,Up:()=>wms,VJ:()=>geotiff,Vj:()=>getNameKML,Vr:()=>getMaxExtentMBTilesVector,Vv:()=>mbtiles,Vx:()=>getTileSizeMBTilesVector,W1:()=>getVisibilityWMTS,WB:()=>getMaxZoomLevelMBTiles,YK:()=>getStyleOGC,YR:()=>getTiledWMS,Yv:()=>getURLKML,ZP:()=>__WEBPACK_DEFAULT_EXPORT__,Zo:()=>getNameMVT,_5:()=>resolutions,aC:()=>getOptionsWFS,ag:()=>getOptionsWMS,bC:()=>ogcapifeatures,be:()=>center,c5:()=>getSourceGeoJSON,cy:()=>getTransparentGeoTIFF,dG:()=>getLegendWMS,dc:()=>getNameWFS,eK:()=>mvt,eL:()=>getExtractWFS,ee:()=>getLegendKML,fK:()=>getVisibilityGeoTIFF,fW:()=>getURLGeoTIFF,gI:()=>getURLWFS,gc:()=>getVisibilityKML,hO:()=>getGeometryWFS,hv:()=>getTransparentMBTiles,hw:()=>getLegendMBTilesVector,i8:()=>getURLMBTiles,ii:()=>getSourceMBTilesVector,jI:()=>getURLMVT,jh:()=>mbtilesvector,kp:()=>getStyleGeoJSON,lJ:()=>minZoom,lN:()=>getURLMBTilesVector,mC:()=>getLegendMBTiles,mx:()=>getURLWMS,my:()=>getSourceMBTiles,nJ:()=>getExtraParameter,nt:()=>getVisibilityMBTilesVector,oK:()=>getExtractGeoJSON,oL:()=>getType,ov:()=>maxExtent,p1:()=>getDisplayInLayerSwitcherWMTS,pi:()=>getLabelKML,r7:()=>getMaxExtentWMS,s$:()=>getURLWMTS,sP:()=>zoom,sX:()=>getURLXYZSource,sd:()=>getNameWMS,t2:()=>getMatrixSetWMTS,tY:()=>getDisplayInLayerSwitcherGeoTIFF,tw:()=>xyz,u0:()=>getProjectionGeoTIFF,uR:()=>getNameMBTilesVector,uS:()=>wfs,ux:()=>getDisplayInLayerSwitcherWMS,vT:()=>getExtractMBTilesVector,vU:()=>getTileLoadFunctionMBTiles,w0:()=>getNormalizeGeoTIFF,w1:()=>getLegendWMTS,w8:()=>getFormatWMTS,wM:()=>getUseCapabilitiesWMS,wz:()=>getLegendWFS,xH:()=>getLegendMVT,y3:()=>getNameGeoTIFF,yc:()=>getLegendGeoTIFF,yj:()=>getTransparentWMS,z9:()=>getMaxExtentMBTiles,zK:()=>getURLGeoJSON,zb:()=>tms,zv:()=>getTileSizeMBTiles});var _util_Utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(40398),_exception_exception__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(81971),_layer_Type__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(68524),_layer_Layer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(89437),_i18n_language__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2532);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var center=function(e){var t=e,r={};if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_center),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t))if(t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(t),/^-?\d+(\.\d+)?[,;]-?\d+(\.\d+)?([*](true|false))?$/i.test(t)){var n=t.split(/\*/),i=n[0],o=n[1],a=i.split(/[,;]+/);2===a.length?(r.x=Number.parseFloat(a[0]),r.y=Number.parseFloat(a[1])):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_center_param),r.draw=/^1|(true)$/i.test(o)}else(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_center_param);else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(t)?2===t.length||3===t.length?((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t[0])&&(t[0]=Number.parseFloat(t[0])),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t[1])&&(t[1]=Number.parseFloat(t[1])),r.x=t[0],r.y=t[1]):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_center_param):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(t)?((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(t.x)?(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_center_param):((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t.x)&&(t.x=Number.parseFloat(t.x)),r.x=t.x),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(t.y)?(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_center_param):((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t.y)&&(t.y=Number.parseFloat(t.y)),r.y=t.y),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(t.draw)?r.draw=!1:r.draw=/^true$/.test(t.draw)):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat("undefined"==typeof maxExtentParameter?"undefined":_typeof(maxExtentParameter)));return(Number.isNaN(r.x)||Number.isNaN(r.y))&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_center_param),r},getParameters=function(e){var t=_slicedToArray(e.split(/\*/),6),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5];return{type:r,name:n,legend:i,url:o,visibility:void 0===a?void 0:"true"===a,transparent:"true"===(void 0!==s&&s)}},getType=function(e,t){var r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e))if(/^\s*osm\s*$/i.test(e))r=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.OSM;else{var n=e.match(/^(\w+)\*.+$/);n&&n.length>1&&(r=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.parse(n[1]),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.o8)(r)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("No se reconoce el tipo de capa ".concat(n[1]))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.o8)(r)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)?r=t:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.o8)(r)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("No se reconoce el tipo de capa ".concat(r))}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.type)||(r=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.parse(e.type),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.o8)(r)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("No se reconoce el tipo de capa ".concat(r))):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(r)||(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||r===t||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El tipo de la capa (".concat(r).concat(") no era el esperado (").concat(t).concat(")")),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(r)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)&&(r=t),r},maxExtent=function(e){var t,r=e;if(!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(r)){if(t={x:{},y:{}},(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(r)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_maxextent),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r))if(/^\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?\s*[,;]\s*-?\d+(\.\d+)?$/.test(r)){var n=r.split(/[,;]+/);4===n.length?(t.x.min=Number.parseFloat(n[0]),t.y.min=Number.parseFloat(n[1]),t.x.max=Number.parseFloat(n[2]),t.y.max=Number.parseFloat(n[3])):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_maxextent_param)}else(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_maxextent_param);else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(r)?4===r.length?((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r[0])&&(r[0]=Number.parseFloat(r[0])),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r[1])&&(r[1]=Number.parseFloat(r[1])),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r[2])&&(r[2]=Number.parseFloat(r[2])),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r[3])&&(r[3]=Number.parseFloat(r[3])),t.x.min=r[0],t.y.min=r[1],t.x.max=r[2],t.y.max=r[3]):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_maxextent_param):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(r)?((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(r.left)?(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(r.x.min)?(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_maxextent_param):((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r.x.min)&&(r.x.min=Number.parseFloat(r.x.min)),t.x.min=r.x.min):((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r.left)&&(r.left=Number.parseFloat(r.left)),t.x.min=r.left),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(r.bottom)?(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(r.y.min)?(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_maxextent_param):((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r.y.min)&&(r.y.min=Number.parseFloat(r.y.min)),t.y.min=r.y.min):((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r.bottom)&&(r.bottom=Number.parseFloat(r.bottom)),t.y.min=r.bottom),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(r.right)?(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(r.x.max)?(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_maxextent_param):((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r.x.max)&&(r.x.max=Number.parseFloat(r.x.max)),t.x.max=r.x.max):((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r.right)&&(r.right=Number.parseFloat(r.right)),t.x.max=r.right),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(r.top)?(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(r.y.max)?(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_maxextent_param):((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r.y.max)&&(r.y.max=Number.parseFloat(r.y.max)),t.y.max=r.y.max):((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r.top)&&(r.top=Number.parseFloat(r.top)),t.y.max=r.top)):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(r)));(Number.isNaN(t.x.min)||Number.isNaN(t.y.min)||Number.isNaN(t.x.max)||Number.isNaN(t.y.max))&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_maxextent_param)}return t},projection=function(e){var t={code:null,units:null};if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_projection),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e))if(/^(EPSG:)?\d+\*((d(egrees)?)|(m(eters)?))$/i.test(e)){var r=e.split(/\*/);t.code=r[0],t.units=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(r[1].substring(0,1))}else(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El formato del parámetro projection no es correcto. </br>Se usará la proyección por defecto: ".concat(M.config.DEFAULT_PROJ));else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(e.code)||(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ft)(e.units)?(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El formato del parámetro projection no es correcto. </br>Se usará la proyección por defecto: ".concat(M.config.DEFAULT_PROJ)):(t.code=e.code,t.units=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.units.substring(0,1))):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return"m"!==t.units&&"d"!==t.units&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)('La unidad "'.concat(e.units,'" del parámetro projection no es válida. Las disponibles son: "m" o "d"')),t},resolutions=function(e){var t=e,r=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_resolutions),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t)&&(/^\d+(\.\d+)?([,;]\d+(\.\d+)?)*$/.test(t)?t=t.split(/[,;]+/):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_resolutions_param)),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(t)?r=t.map((function(e){return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?Number.parseFloat(e):e})):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(t)));for(var n=!0,i=0,o=r.length;i<o&&n;i+=1)n=!Number.isNaN(r[i]);return n||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_resolutions_param),r},zoom=function(e){var t,r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(r)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_zoom),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r)?t=Number.parseFloat(r):"number"==typeof r?t=r:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(r))),Number.isNaN(t)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_zoom_param),t},minZoom=function(e){var t,r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(r)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_zoom),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r)?t=Number.parseInt(r,10):"number"==typeof r?t=r:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(r))),Number.isNaN(t)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_zoom_param),t},maxZoom=function(e){var t,r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(r)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_zoom),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(r)?t=Number.parseInt(r,10):"number"==typeof r?t=r:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(r))),Number.isNaN(t)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_zoom_param),t},getNameKML=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^KML\*.+/i.test(e)?/^KML\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(e)&&(t=e.split(/\*/)[1].trim()):(/^[^*]*\*[^*]+/.test(e)||/^[^*]*/.test(e))&&(t=e.split(/\*/)[0].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.name)?t=e.name.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getExtractKML=function(e){var t,r;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^KML\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(e)?t=(r=e.split(/\*/))[r.length-3].trim():/^[^*]+\*[^*]+\*(true|false)$/i.test(e)?t=(r=e.split(/\*/))[2].trim():/^[^*]+\*(true|false)$/i.test(e)&&(t=(r=e.split(/\*/))[1].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.extract):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)?void 0:/^1|(true)$/i.test(t)},getLabelKML=function(e){var t,r;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?t="false"!==(t=(r=e.split(/\*/))[r.length-2].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.label):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),t},getVisibilityKML=function(e){var t,r;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?t="false"!==(t=(r=e.split(/\*/))[r.length-1].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.visibility):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),t},getLegendKML=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&(t=e.legend),t},getURLKML=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e))if(/^KML\*[^*]+\*[^*]+\*[^*]+\.kml\*(true|false)$/i.test(e)){var r=e.split(/\*/);t=r[2].concat(r[3])}else{var n=e.match(/^([^*]*\*)*(https?:\/\/[^*]+)\*.*/i);n&&n.length>2&&(t=n[2])}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.url:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},kml=function(e){var t=e,r=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var n=t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(n)||(n=[n]),r=n.map((function(e){var t={};return t.type=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.KML,t.name=getNameKML(e),t.url=getURLKML(e),t.extract=getExtractKML(e),t.label=getLabelKML(e),t.visibility=getVisibilityKML(e),t.legend=getLegendKML(e),t})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(t)||(r=r[0]),r},getNameWFS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WFS(T)?\*.+/i.test(e)?/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+/i.test(e)||/^[^*]*\*[^*]+:[^*]+/.test(e)?t=e.split(/\*/)[3].trim().split(":")[1]:/^WFS(T)?\*[^*]*\*[^*]+[^*]+/i.test(e)&&(t=e.split(/\*/)[3].trim()):/^[^*]*\*[^*]+:[^*]+/.test(e)&&(t=e.split(/\*/)[1].trim().split(":")[1]):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.name)?t=e.name.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getURLWFS=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){var r=e.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(t=r[2])}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.url:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getNamespaceWFS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WFS(T)?\*.+/i.test(e)?/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+/i.test(e)&&(t=e.split(/\*/)[3].trim().split(":")[0]):/^[^*]*\*[^*]+:[^*]+/.test(e)&&(t=e.split(/\*/)[1].trim().split(":")[0]):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.namespace)?t=e.namespace.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getLegendWFS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WFS(T)?\*[^*]/i.test(e)?t=e.split(/\*/)[1].trim():/^[^*]+\*[^*]+:[^*]+\*[^*]+/.test(e)&&(t=e.split(/\*/)[2].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.legend)?t=e.legend.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getCQLWFS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?(/^[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]+/i.test(e)&&(t=e.split(/\*/)[3].trim()),/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]*\*[^*]*/i.test(e)&&(t=e.split(/\*/)[6].trim())):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.cql)||!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.ecql)?t=e.cql?e.cql.trim():e.ecql.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(/^(true|false)$/i.test(t)||/^\d\.\d\.\d$/.test(t))&&(t=void 0),t},getGeometryWFS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WFS(T)?\*.+/i.test(e)&&(/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+/i.test(e)||/^WFS(T)?\*[^*]*\*[^*][^*]+\*[^*]+/i.test(e))&&(t=e.split(/\*/)[4].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.geometry)?t=e.geometry.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getIdsWFS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WFS(T)?\*.+/i.test(e)&&(/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*(.-?)+$/i.test(e)||/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+\*[^*]+\*(.-?)+$/i.test(e))&&(t=e.split(/\*/)[5].trim().split("-")):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.ids)?t=e.ids:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)&&(t=null),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(t)||(t=[t]),t},getStyleWFS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WFS(T)?\*.+/i.test(e)&&/^WFS(T)?\*[^*]*\*[^*]+\*[^*]+:[^*]+\*[^*]+\*[^*]*\*[^*]*\*[^*]*/i.test(e)&&(t=e.split(/\*/)[7].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.style)?t=e.style:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),t},getVersionWFS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/(\d\.\d\.\d)$/.test(e)&&(t=e.match(/\d\.\d\.\d$/)[0]):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.version:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),t},getExtractWFS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&(t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.extract)),t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)?void 0:/^1|(true)$/i.test(t)},getOptionsWFS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)||((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.options:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)))),t},wfs=function(e){var t=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(r)||(r=[r]),t=r.map((function(t){var r={};return r.type=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.WFS,r.name=getNameWFS(t),r.url=getURLWFS(t),r.namespace=getNamespaceWFS(t),r.legend=getLegendWFS(t),r.cql=getCQLWFS(t),r.geometry=getGeometryWFS(t),r.ids=getIdsWFS(t),r.version=getVersionWFS(t),r.extract=getExtractWFS(t),r.style=getStyleWFS(t),r.options=getOptionsWFS(t),r.outputFormat=e.outputFormat,r})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(e)||(t=t[0]),t},getLegendGeoJSON=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^GeoJSON(T)?\*[^*]/i.test(e)?t=e.split(/\*/)[1].trim():/^[^*]+\*[^*]+:[^*]+\*[^*]+/.test(e)&&(t=e.split(/\*/)[2].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.legend)?t=e.legend.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getURLGeoJSON=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){var r=e.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(t=r[2])}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.url:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getSourceGeoJSON=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if(r=e.split(/\*/),/^GeoJSON\*[^*]+\*[^*]/i.test(e)){var n=r[2];-1===n.indexOf("http")&&-1===n.indexOf("https")&&(t=n)}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.source:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getExtractGeoJSON=function(e){var t,r;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^GeoJSON\*[^*]+\*[^*]+\*[^*]*(true|false)/i.test(e)?t=e.split(/\*/)[3].trim():(r=e.split(/\*/)[3],t=!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(r)&&[r]):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.extract):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),t},getStyleGeoJSON=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^GeoJSON\*[^*]+\*[^*]+\*[^*]*(true|false)+\*[^*]/i.test(e)&&(/^GeoJSON(T)?\*[^*]*\*[^*]+\*[^*]+\*[^*]*/i.test(e)||/^GeoJSON(T)?\*[^*]*\*[^*]+\*/i.test(e))&&(t=e.split(/\*/)[4].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.style)?t=e.style:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),t},geojson=function(e){var t=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(r)||(r=[r]),t=r.map((function(e){var t={};return t.type=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.GeoJSON,t.name=getLegendGeoJSON(e),t.legend=getLegendGeoJSON(e),t.url=getURLGeoJSON(e),t.source=getSourceGeoJSON(e),t.extract=getExtractGeoJSON(e),t.style=getStyleGeoJSON(e),t})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(e)||(t=t[0]),t},getURLMVT=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if(/^MVT\*.+/i.test(e)){var r=e.match(/.*\*(https?:\/\/[^*]+).*/i);r&&r.length>1&&(t=r[1])}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.url)?t=e.url.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getNameMVT=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if(/^MVT\*.+/i.test(e)){var r=e.match(/.*\*(https?:\/\/[^*]+)\*([^*]+)/i);r&&r.length>2&&(t=r[2])}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.name)?t=e.name.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getLegendMVT=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.legend)&&(t=e.legend.trim()),t},mvt=function(e){var t=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("No ha especificado ningún parámetro");var r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(r)||(r=[r]),t=r.map((function(e){var t={};return t.type=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.MVT,t.name=getNameMVT(e),t.legend=getLegendMVT(e),t.url=getURLMVT(e),t})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(e)||(t=t[0]),t},getNameWMS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMS\*.+/i.test(e)?/^WMS\*[^*]+\*[^*]+\*[^*]+/i.test(e)&&(t=e.split(/\*/)[3].trim()):/^[^*]*\*[^*]+/.test(e)?t=e.split(/\*/)[1].trim():/^[^*]*/.test(e)&&(t=e.split(/\*/)[0].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.name)?t=e.name.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getURLWMS=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){var r=e.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(t=r[2])}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.url:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getLegendWMS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMS\*[^*]/i.test(e)?t=e.split(/\*/)[1].trim():/^[^*]+\*[^*]+\*[^*]+/.test(e)&&(t=e.split(/\*/)[2].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.legend)?t=e.legend.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getTransparentWMS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(e)?t=e.split(/\*/)[4].trim():/^WMS_FULL\*[^*]+(\*(true|false))?/i.test(e)?(e.split(/\*/),t=!0):/^[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(e)?t=e.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*(true|false)/i.test(e)&&(t=e.split(/\*/)[2].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.transparent):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getTiledWMS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(e)?t=e.split(/\*/)[5].trim():/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(e)?t=!0:/^WMS_FULL\*[^*]+\*(true|false)/i.test(e)?t=e.split(/\*/)[2].trim():(/^[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(e)||/^[^*]+\*[^*]+\*(true|false)\*(true|false)/i.test(e))&&e.split(/\*/):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.tiled):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getMaxExtentWMS=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if(/^WMS(\*[^*]*){6}$/i.test(e))t=e.split(/\*/)[6].trim();else if(/^WMS_FULL(\*[^*]*){3}/i.test(e)){t=e.split(/\*/)[3].trim()}(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=t.split(/[,;]+/))}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.maxExtent:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||4!==t.length?(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").invalid_maxextent_param):((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t[0])&&(t[0]=Number.parseFloat(t[0])),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t[1])&&(t[1]=Number.parseFloat(t[1])),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t[2])&&(t[2]=Number.parseFloat(t[2])),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t[3])&&(t[3]=Number.parseFloat(t[3]))),t},getVersionWMS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/(\d\.\d\.\d)$/.test(e)&&(t=e.match(/\d\.\d\.\d$/)[0]):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.version:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),t},getOptionsWMS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)||((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.options:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)))),t},getDisplayInLayerSwitcherWMS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)/i.test(e)&&(t=e.split(/\*/)[8].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.displayInLayerSwitcher):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getQueryableWMS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)\*(true|false)/i.test(e)&&(t=e.split(/\*/)[9].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.queryable):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getVisibilityWMS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)\*(true|false)\*(true|false)/i.test(e)&&(t=e.split(/\*/)[10].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.visibility):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getUseCapabilitiesWMS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMS\*[^*]+\*[^*]+\*[^*]+\*(true|false)\*(true|false)\*.*\*(\d\.\d\.\d)\*(true|false)\*(true|false)\*(true|false)\*(true|false)/i.test(e)&&(t=e.split(/\*/)[11].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.useCapabilities):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.o8)(t)&&(t=!0),t},wms=function(e){var t=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(r)||(r=[r]),t=r.map((function(e){var t=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.WMS,r=getNameWMS(e),n=getURLWMS(e),i=getLegendWMS(e),o=getTransparentWMS(e),a=getTiledWMS(e),s=getMaxExtentWMS(e),l=getVersionWMS(e),u=getOptionsWMS(e);return{type:t,name:r,url:n,legend:i,transparent:o,tiled:a,maxExtent:s,version:l,displayInLayerSwitcher:getDisplayInLayerSwitcherWMS(e),queryable:getQueryableWMS(e),visibility:getVisibilityWMS(e),options:u,useCapabilities:getUseCapabilitiesWMS(e)}})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(e)||(t=t[0]),t},getNameGeoTIFF=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=4){var n=r[3];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.name)?t=e.name.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getURLGeoTIFF=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=3){var n=r[2];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.url)?t=e.url.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getProjectionGeoTIFF=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=6){var n=r[5];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.projection)?t=e.projection.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getLegendGeoTIFF=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=2){var n=r[1];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.legend)?t=e.legend.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getTransparentGeoTIFF=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=5){var n=r[4];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.transparent)?t=e.transparent:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getDisplayInLayerSwitcherGeoTIFF=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=7){var n=r[6];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.displayInLayerSwitcher)?t=e.displayInLayerSwitcher:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getVisibilityGeoTIFF=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=8){var n=r[7];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.visibility)?t=e.visibility:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getNormalizeGeoTIFF=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=8){var n=r[7];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.normalize)?t=e.normalize:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getNameWMTS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMTS\*.+/i.test(e)?/^WMTS\*[^*]+\*[^*]+/i.test(e)&&(t=e.split(/\*/)[2].trim()):/^[^*]*\*[^*]+/.test(e)&&(t=e.split(/\*/)[1].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.name)?t=e.name.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getURLWMTS=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){var r=e.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(t=r[2])}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.url:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getMatrixSetWMTS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMTS\*[^*]+\*[^*]+\*[^*]+/i.test(e)?t=e.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*[^*]+/.test(e)&&(t=e.split(/\*/)[2].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.matrixSet)?t=e.matrixSet.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getLegendWMTS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMTS\*.+/i.test(e)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]+/i.test(e)&&(t=e.split(/\*/)[4].trim()):/^[^*]+\*[^*]+\*[^*]*\*[^*]+/.test(e)&&(t=e.split(/\*/)[3].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.legend)?t=e.legend.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getOptionsWMTS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)||((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.options:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)))),t},getTransparentWMTS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)/i.test(e)?t=e.split(/\*/)[5].trim():/^WMS_FULL\*[^*]+(\*(true|false))?/i.test(e)?(e.split(/\*/),t=!0):/^[^*]+\*[^*]+\*[^*]+\*(true|false)/i.test(e)?t=e.split(/\*/)[3].trim():/^[^*]+\*[^*]+\*(true|false)/i.test(e)&&(t=e.split(/\*/)[2].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.transparent):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getFormatWMTS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)/i.test(e)&&(t=e.split(/\*/)[6].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.format):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),t},getDisplayInLayerSwitcherWMTS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)/i.test(e)&&(t=e.split(/\*/)[7].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.displayInLayerSwitcher):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getQueryableWMTS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)\*(true|false)/i.test(e)&&(t=e.split(/\*/)[8].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.queryable):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getVisibilityWMTS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)\*(true|false)\*(true|false)/i.test(e)&&(t=e.split(/\*/)[9].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.visibility):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),t},getUseCapabilitiesWMTS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^WMTS\*[^*]+\*[^*]+\*[^*]*\*[^*]*\*(true|false)\*(image\/.*)\*(true|false)\*(true|false)\*(true|false)\*(true|false)/i.test(e)&&(t=e.split(/\*/)[10].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.useCapabilities):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(t=/^1|(true)$/i.test(t)),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.o8)(t)&&(t=!0),t},geotiff=function(e){var t=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(r)||(r=[r]),t=r.map((function(e){var t={};return t.type=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.GeoTIFF,t.legend=getLegendGeoTIFF(e),t.url=getURLGeoTIFF(e),t.name=getNameGeoTIFF(e),t.transparent=getTransparentGeoTIFF(e),t.projection=getProjectionGeoTIFF(e),t.displayInLayerSwitcher=getDisplayInLayerSwitcherGeoTIFF(e),t.visibility=getVisibilityGeoTIFF(e),t.normalize=getNormalizeGeoTIFF(e),t.isBase=void 0===t.transparent?e.isBase:!t.transparent,t})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(e)||(t=t[0]),t},maplibre=function(e){var t=e;if(!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t))return e;var r=t.split(/\*/);return{type:_layer_Type__WEBPACK_IMPORTED_MODULE_1__.MapLibre,legend:r[1]||void 0,url:r[2]||void 0,name:r[3]||void 0,transparent:""===r[4]?void 0:"true"===r[4],extract:""===r[5]?void 0:"true"===r[5],visibility:""===r[6]?void 0:"true"===r[6],displayInLayerSwitcher:""===r[7]||"true"===r[7],disableBackgroundColor:""===r[8]?void 0:"true"===r[8],style:r[9]||void 0}},getNameXYZ=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^XYZ\*.+/i.test(e)?/^XYZ\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(e)&&(t=e.split(/\*/)[1].trim()):(/^[^*]*\*[^*]+/.test(e)||/^[^*]*/.test(e))&&(t=e.split(/\*/)[0].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.name)?t=e.name.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},getURLXYZSource=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){var r=e.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(t=r[2])}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.url:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getExtraParameter=function(e,t,r,n){var i,o;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?r+3<=(o=e.split(/\*/)).length-1?(i=o[r+3].trim(),isNaN(i)?"true"!==i.toLowerCase()&&"false"!==i.toLowerCase()||(i="false"!==i.toLowerCase()):i=Number(i)):i=t:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?i="legend"!==n?(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e[n]):e[n]:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),i},xyz=function(e){var t=e,r=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var n=t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(n)||(n=[n]),r=n.map((function(e){var t={};return t.type=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.XYZ,t.name=getNameXYZ(e),t.url=getURLXYZSource(e),t.visibility=getExtraParameter(e,"true",0,"visibility"),t.transparent=getExtraParameter(e,"true",1,"transparent"),t.displayInLayerSwitcher=getExtraParameter(e,"true",2,"displayInLayerSwitcher"),t.legend=getExtraParameter(e,t.name,3,"legend")||t.name,t})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(t)||(r=r[0]),r},getNameTMS=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)?/^TMS\*.+/i.test(e)?/^TMS\*[^*]+\*[^*]+(\*[^*]+)?(\*(true|false))?/i.test(e)&&(t=e.split(/\*/)[1].trim()):(/^[^*]*\*[^*]+/.test(e)||/^[^*]*/.test(e))&&(t=e.split(/\*/)[0].trim()):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.name)?t=e.name.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e))),((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.CB)(t)||/^(true|false)$/i.test(t))&&(t=null),t},tms=function(e){var t=e,r=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var n=t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(n)||(n=[n]),r=n.map((function(e){var t={};return t.type=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.TMS,t.name=getNameTMS(e),t.url=getURLXYZSource(e),t.visibility=getExtraParameter(e,"true",0,"visibility"),t.transparent=getExtraParameter(e,"true",1,"transparent"),t.tileGridMaxZoom=getExtraParameter(e,"17",2,"tileGridMaxZoom"),t.displayInLayerSwitcher=getExtraParameter(e,"true",3,"displayInLayerSwitcher"),t.legend=getExtraParameter(e,t.name,4,"legend"),t.crossOrigin=getExtraParameter(e,void 0,5,"crossOrigin"),t.tileSize=getExtraParameter(e,void 0,6,"tileSize"),t})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(t)||(r=r[0]),r},wmts=function(e){var t=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(r)||(r=[r]),t=r.map((function(e){var t={};return t.type=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.WMTS,t.name=getNameWMTS(e),t.url=getURLWMTS(e),t.matrixSet=getMatrixSetWMTS(e),t.legend=getLegendWMTS(e),t.options=getOptionsWMTS(e),t.transparent=getTransparentWMTS(e),t.format=getFormatWMTS(e),t.displayInLayerSwitcher=getDisplayInLayerSwitcherWMTS(e),t.queryable=getQueryableWMTS(e),t.visibility=getVisibilityWMTS(e),t.useCapabilities=getUseCapabilitiesWMTS(e),t})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(e)||(t=t[0]),t},getLegendMBTiles=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length-1>=1){var n=r[1].trim();t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.legend)?t=e.legend.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getURLMBTiles=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){var r=e.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(t=r[2])}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.url:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getSourceMBTiles=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&(t=e.source),t},getTileLoadFunctionMBTiles=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&(t=e.tileLoadFunction),t},getNameMBTiles=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e))if((r=e.split("*")).length-1>=3){var n=r[3].trim();t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}else/^[^*]*/.test(e)&&(t=(r=e.split(/\*/))[0].trim());else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.name)?t=e.name.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getTransparentMBTiles=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length-1>=4){var n=r[4].trim();t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.transparent)?t=e.transparent:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getVisibilityMBTiles=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length-1>=5){var n=r[5].trim();t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:"false"!==n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.visibility)?t=e.visibility:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getOpacityMBTiles=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length-1>=6){var n=r[6].trim();t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:parseInt(n,10)}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.opacity)?t=e.opacity:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getMaxZoomLevelMBTiles=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length-1>=7){var n=r[7].trim();t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:parseInt(n,10)}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.maxZoomLevel)?t=e.maxZoomLevel:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getMaxExtentMBTiles=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length-1>=8){var n=r[8].trim();(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?t=void 0:(n=n.split(";"),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)||4!==n.length||(t=n=n.map((function(e){return parseFloat(e.trim())}))))}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.maxExtent)?t=e.maxExtent:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getTileSizeMBTiles=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((t=e.split("*")).length-1>=9){var n=t[9].trim();r=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:parseInt(n,10)}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.tileSize)?r=parseInt((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.tileSize),10):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return r},mbtiles=function(e){var t=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(r)||(r=[r]),t=r.map((function(e){var t={};return t.type=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.MBTiles,t.legend=getLegendMBTiles(e),t.url=getURLMBTiles(e),t.source=getSourceMBTiles(e),t.name=getNameMBTiles(e),t.transparent=getTransparentMBTiles(e),t.visibility=getVisibilityMBTiles(e),t.opacity=getOpacityMBTiles(e),t.maxZoomLevel=getMaxZoomLevelMBTiles(e),t.maxExtent=getMaxExtentMBTiles(e),t.tileLoadFunction=getTileLoadFunctionMBTiles(e),t.tileSize=getTileSizeMBTiles(e),t})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(e)||(t=t[0]),t},getLegendMBTilesVector=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length-1>=1){var n=r[1].trim();t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.legend)?t=e.legend.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getURLMBTilesVector=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){var r=e.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(t=r[2])}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.url:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getSourceMBTilesVector=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&(t=e.source),t},getTileLoadFunctionMBTilesVector=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&(t=e.tileLoadFunction),t},getNameMBTilesVector=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e))if((r=e.split("*")).length-1>=3){var n=r[3].trim();t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}else/^[^*]*/.test(e)&&(t=(r=e.split(/\*/))[0].trim());else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.name)?t=e.name.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getVisibilityMBTilesVector=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length-1>=4){var n=r[4].trim();t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:"false"!==n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.visibility)?t=e.visibility:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getMaxExtentMBTilesVector=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.maxExtent)&&(t=e.maxExtent),t},getTileSizeMBTilesVector=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((t=e.split("*")).length-1>=5){var n=t[5].trim();r=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:parseInt(n,10)}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.tileSize)?r=parseInt((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.tileSize),10):(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return r},getStyleMBTilesVector=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((t=e.split("*")).length-1>=6){var n=t[6].trim();r=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.style)?r=e.style:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return r},getExtractMBTilesVector=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((t=e.split("*")).length-1>=7){var n=t[7].trim();r=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.extract)?r=e.extract:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return r},mbtilesvector=function(e){var t=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(r)||(r=[r]),t=r.map((function(e){var t={};return t.type=_layer_Type__WEBPACK_IMPORTED_MODULE_1__.MBTilesVector,t.legend=getLegendMBTilesVector(e),t.url=getURLMBTilesVector(e),t.source=getSourceMBTilesVector(e),t.name=getNameMBTilesVector(e),t.visibility=getVisibilityMBTilesVector(e),t.tileSize=getTileSizeMBTilesVector(e),t.maxExtent=getMaxExtentMBTilesVector(e),t.tileLoadFunction=getTileLoadFunctionMBTilesVector(e),t.style=getStyleMBTilesVector(e),t.extract=getExtractMBTilesVector(e),t})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(e)||(t=t[0]),t},getLegendOGC=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=1){var n=r[1];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.legend)?t=e.legend.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getURLOGC=function(e){var t;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){var r=e.match(/^([^*]*\*)*(https?:\/\/[^*]+)([^*]*\*?)*$/i);r&&r.length>2&&(t=r[2])}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.url:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getNameOGC=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e))if((r=e.split("*")).length>=3){var n=r[3];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}else t=r[0].trim();else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.name)?t=e.name.trim():(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getLimitOGC=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=4){var n=r[4];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:parseInt(n,10)}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.o8)(e.limit)||(t=parseInt((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.limit),10)):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getBboxOGC=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=5){var n=r[5];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.bbox):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(t)||(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(t)||(t=t.split(";")).forEach((function(e,r){t[r]=parseFloat(e)})),t},getIdOGC=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=6){var n=r[6];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:parseInt(n,10)}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=e.id:(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getOffsetOGC=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=7){var n=r[7];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:parseInt(n,10)}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.offset):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getFormatOGC=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((r=e.split("*")).length>=8){var n=r[8];t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)?t=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(e.format):(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return t},getStyleOGC=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((t=e.split("*")).length>=9){var n=t[9];r=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.style)?r=e.style:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return r},getConditionalOGC=function(e){var t;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.conditional)&&(t=e.conditional),t},getExtractOGC=function(e){var t,r;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(e)){if((t=e.split("*")).length>=10){var n=t[10];r=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(n)?void 0:n}}else(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.extract)?r=e.extract:(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)||(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)("El parámetro no es de un tipo soportado: ".concat(_typeof(e)));return r},ogcapifeatures=function(e){var t=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var r=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(r)||(r=[r]),t=r.map((function(e){return{type:_layer_Type__WEBPACK_IMPORTED_MODULE_1__.OGCAPIFeatures,legend:getLegendOGC(e),url:getURLOGC(e),name:getNameOGC(e),limit:getLimitOGC(e),bbox:getBboxOGC(e),format:getFormatOGC(e),offset:getOffsetOGC(e),id:getIdOGC(e),style:getStyleOGC(e),conditional:getConditionalOGC(e),extract:getExtractOGC(e)}})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(e)||(t=t[0]),t},generic=function generic(userParameters,type){var params=userParameters;if(!(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(params))return userParameters;var urlParams=params.split(/\*/);return{type,vendorOptions:eval(decodeURIComponent(escape(window.atob(urlParams[1]))))||void 0,name:urlParams[2]||void 0,legend:urlParams[3]||void 0,transparent:urlParams[4]||void 0,minZoom:urlParams[5]||void 0,maxZoom:urlParams[6]||void 0,displayInLayerSwitcher:urlParams[7]||void 0,visibility:urlParams[8]||void 0}},genericvector=function(e){return generic(e,"GenericVector")},genericraster=function(e){return generic(e,"GenericRaster")},osm=function(e){var t=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.HD)(t)?getParameters(t):_objectSpread(_objectSpread({},t),{},{type:"osm"})},parameterFunction={kml,wfs,osm,wms,geotiff,maplibre,wmts,geojson,mvt,xyz,tms,mbtiles,mbtilesvector,ogcapifeatures,genericvector,genericraster},layer=function(e,t){var r=[];(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e)&&(0,_exception_exception__WEBPACK_IMPORTED_MODULE_4__.Z)((0,_i18n_language__WEBPACK_IMPORTED_MODULE_3__.NA)("exception").no_param);var n=e;return(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(n)||(n=[n]),r=n.map((function(e){var r=null;if((0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Kn)(e)&&e instanceof _layer_Layer__WEBPACK_IMPORTED_MODULE_2__.Z)r=e;else{var n=getType(e,t);n=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Fv)(n),r=(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.mf)(parameterFunction[n])?parameterFunction[n](e):e,(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.isBase)||(r.transparent=!e.isBase),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.infoEventType)||(r.infoEventType=e.infoEventType),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.Ew)(e.attribution)||(r.attribution=e.attribution)}return r})),(0,_util_Utils__WEBPACK_IMPORTED_MODULE_0__.kJ)(e)||(r=r[0]),r};const __WEBPACK_DEFAULT_EXPORT__={}},18798:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c,p:()=>u});var n=r(26657),i=r.n(n),o=r(99591),a=r(40398);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}var u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAQAAAD2e2DtAAABu0lEQVR42u3SQREAAAzCsOHf9F6oIJXQS07TxQIABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAgAACwAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAAsAEAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAKg9kK0BATSHu+YAAAAASUVORK5CYII=";const c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tiles_={},this.db_=null,this.init(t)}var t,r,n;return t=e,(r=[{key:"init",value:function(e){var t=this;this.initPromise_=new Promise((function(r,n){i()({locateFile:function(e){return"".concat(M.config.SQL_WASM_URL).concat(e)}}).then((function(n){(0,a.L0)(e).then((function(e){t.db_=new n.Database(e),r(t.db_)}))})).catch((function(e){n(e)}))}))}},{key:"executeQuery",value:function(e){return this.initPromise_.then((function(t){return t.exec(e)[0]}))}},{key:"getTile",value:function(e){var t="select tile_data from tiles where zoom_level={z} and tile_column={x} and tile_row={y}".replace("{z}",e[0]).replace("{x}",e[1]).replace("{y}",e[2]),r=this.tiles_[e]||null,n=u;if(this.db_&&(0,a.Ew)(r)){var i=this.db_.exec(t)[0];if(!(0,a.Ew)(i)){var o=i.values[0][0];n=(0,a.J2)(o),this.setTile(e,n)}}else n=r;return n}},{key:"getVectorTile",value:function(e){var t,r=this,n="select tile_data from tiles where zoom_level={z} and tile_column={x} and tile_row={y}".replace("{z}",e[0]).replace("{x}",e[1]).replace("{y}",e[2]),i=this.tiles_[e]||null;return i=i?new Promise((function(e){e(i)})):this.executeQuery(n).then((function(n){return(0,a.Ew)(n)||(t=n.values[0][0],t=(0,o.inflate)(t)),r.setTile(e,t),t}))}},{key:"setTile",value:function(e,t){this.tiles_[e]=t}},{key:"getExtent",value:function(){var e=null;return this.executeQuery('select value from metadata where name="bounds"').then((function(t){if(t){var r=t.values[0][0];e=r.split(",").map(Number.parseFloat)}return e}))}},{key:"getFormat",value:function(){var e="png";return this.executeQuery('select value from metadata where name="format"').then((function(t){return t&&(e=t.values[0][0]),e}))}},{key:"getMaxZoomLevel",value:function(){var e=16;return this.executeQuery("select * from (select zoom_level from tiles group by zoom_level order by zoom_level DESC LIMIT 1)").then((function(t){return t&&(e=t.values[0][0]),e}))}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},80417:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CENTER:()=>i,JUSTIFY:()=>a,LEFT:()=>n,RIGHT:()=>o});var n="left",i="center",o="right",a="justify"},42755:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ALPHABETIC:()=>a,BOTTOM:()=>o,HANGING:()=>s,IDEOGRAPHIC:()=>l,MIDDLE:()=>i,TOP:()=>n});var n="top",i="middle",o="bottom",a="alphabetic",s="hanging",l="ideographic"},46329:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(24225),i=r(71085),o=r(73475),a=r(40398);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},f.apply(this,arguments)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(u,e);var t,r,o,s=p(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var i=new n.Z(t,r);return e=s.call(this,t,i),(0,a.cU)(t,u.DEFAULT),(0,a.cU)(r,u.DEFAULT_VENDOR),e.optsVendor_=r,e.oldStyle_=null,e}return t=u,o=[{key:"deserialize",value:function(e){var t=l(e,3),r=t[0],n=t[1],o=t[2],s=r;s.ranges.forEach((function(e){e.style=i.Z.deserialize(e.style)})),s=(0,a.Q8)(r);var u=(0,a.Q8)(n),c=new Function(["options","optsVendor"],"return new M.style.Cluster(options, optsVendor)")(s,u),f=o.map((function(e){return i.Z.deserialize(e)}));return c.add(f),c}}],(r=[{key:"apply",value:function(e){f(d(u.prototype),"apply",this).call(this,e);var t=e.getStyle();this.oldStyle_=t instanceof u?t.getOldStyle():t}},{key:"unapplySoft",value:function(e){this.getImpl().unapply()}},{key:"add",value:function(e){return(0,a.Ew)(this.layer_)||this.unapplySoft(this.layer_),f(d(u.prototype),"add",this).call(this,e)}},{key:"applyInternal",value:function(e){this.layer_=e,this.getImpl().applyToLayer(e),this.updateCanvas()}},{key:"getOldStyle",value:function(){return this.oldStyle_}},{key:"getRanges",value:function(){return this.options_.ranges}},{key:"getOptions",value:function(){return this.options_}},{key:"setRanges",value:function(e){return this.getImpl().ranges=e,this.unapply(this.layer_),this.layer_.style=this,this}},{key:"getRange",value:function(e,t){return this.options_.ranges.find((function(r){return r.min===e&&r.max===t}))}},{key:"updateRange",value:function(e,t,r){return n.Z.updateRangeImpl(e,t,r,this.layer_,this),this.unapply(this.layer_),this.layer_.style=this,this}},{key:"setAnimated",value:function(e){return this.getImpl().setAnimated(e,this.layer_,this)}},{key:"isAnimated",value:function(){return this.options_.animated}},{key:"toImage",value:function(){return this.oldStyle_ instanceof i.Z?this.oldStyle_.toImage():f(d(u.prototype),"toImage",this).call(this)}},{key:"refresh",value:function(){if(!(0,a.Ew)(this.layer_)){var e=this.layer_;this.unapply(this.layer_),this.apply(e),this.updateCanvas()}}},{key:"ORDER",get:function(){return 4}},{key:"addSelectInteraction",value:function(){this.getImpl().addSelectInteraction()}},{key:"removeSelectInteraction",value:function(){this.getImpl().removeSelectInteraction()}},{key:"toJSON",value:function(){var e=(0,a.cU)({},this.getOptions());e.ranges=this.getRanges().map((function(e){var t=(0,a.cU)({},e);return t.style=e.style.serialize(),t})),e=(0,a.sV)(e);var t=(0,a.cU)({},this.optsVendor_);return{parameters:[e,t=(0,a.sV)(t),this.getStyles().map((function(e){return e.serialize()}))],deserializedMethod:"M.style.Cluster.deserialize"}}}])&&c(t.prototype,r),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(o.Z);y.DEFAULT={ranges:[],hoverInteraction:!0,displayAmount:!0,selectInteraction:!0,distance:60,animated:!0,maxFeaturesToSelect:15,label:{text:function(e){var t,r=e.getAttribute("features");return r.length&&(t=r.length.toString()),t},color:"#fff",font:"bold 15px Arial",baseline:"middle",align:"center"}},y.DEFAULT_VENDOR={animationDuration:250,animationMethod:"linear",distanceSelectFeatures:15,convexHullStyle:{fill:{color:"#fff",opacity:.25},stroke:{color:"#7b98bc"}}},y.RANGE_1_DEFAULT={fill:{color:"#81c89a"},stroke:{color:"#6eb988",width:3},radius:15},y.RANGE_2_DEFAULT={fill:{color:"#85b9d2"},stroke:{color:"#6da4be",width:3},radius:20},y.RANGE_3_DEFAULT={fill:{color:"#938fcf"},stroke:{color:"#827ec5",width:3},radius:25};const g=y},73475:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(71085),i=r(40398);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,r,o,u=l(c);function c(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=u.call(this,e,t)).styles_=[],r}return t=c,(r=[{key:"apply",value:function(e){this.layer_=e,(0,i.Ew)(e)||this.updateInternal_(e)}},{key:"add",value:function(e){var t=this,r=e,n=this.layer_;return this.unapplyInternal(this.layer_),(0,i.kJ)(r)||(r=[r]),(r=r.filter((function(e){return e.constructor!==t.constructor}))).forEach((function(e){t.styles_=t.styles_.filter((function(t){return t.constructor!==e.constructor}))})),this.styles_=this.styles_.concat(r),(0,i.Ew)(n)||this.updateInternal_(n),this}},{key:"remove",value:function(e){var t=e,r=this.layer_;(0,i.kJ)(t)||(t=[t]),(0,i.Ew)(this.layer_)||this.unapplyInternal(this.layer_),this.styles_=this.styles_.filter((function(e){return!t.includes(e)})),r.setStyle(this.oldStyle_,!0),r.setStyle(this)}},{key:"getStyles",value:function(){return this.styles_}},{key:"getOldStyle",value:function(){return this.oldStyle_}},{key:"clear",value:function(){this.remove(this.styles_)}},{key:"unapplyInternal",value:function(e){this.styles_.concat(this).sort((function(e,t){return(0,i.o)(t,e)})).forEach((function(t){t instanceof c&&t.unapplySoft(e)}))}},{key:"unapplySoft",value:function(e){}},{key:"unapply",value:function(e){this.unapplyInternal(e),this.layer_=null}},{key:"updateInternal_",value:function(e){this.styles_.concat(this).sort((function(e,t){return(0,i.o)(e,t)})).forEach((function(t){t instanceof c?t.applyInternal(e):t instanceof n.Z&&t.apply(e,!0)}))}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Z)},76732:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(40398);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}const u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(u,e);var t,r,i,l=s(u);function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=l.call(this,e,t)).feature_=null,r}return t=u,(r=[{key:"applyToFeature",value:function(e){var t=this;this.feature_=e;var r=e.getStyle().getOptions();r.point&&(r=r.point),r.icon&&r.icon.src&&"string"==typeof r.icon.src&&r.icon.src.endsWith(".svg")&&(r.icon.fill||r.icon.stroke)?(0,n.XO)(r.icon.src,r).then((function(e){r.icon.src=e,t.applyToFeature(t.feature_)})):this.getImpl().applyToFeature(e)}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),u}(r(71085).Z)},73579:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(21030),i=r(56880),o=r(40398);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(s,e);var t,r,i,a=p(s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=e;t=(0,o.Ew)(t)?s.DEFAULT_NULL:(0,o.cU)(t,s.DEFAULT),t=(0,o.cU)({},t);var r=new n.Z(t);return a.call(this,t,r)}return t=s,(r=[{key:"toImage",value:function(){return this.getImpl().toImage(this.canvas_)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Generic'))"}}])&&c(t.prototype,r),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(i.Z);y.DEFAULT={point:{radius:5}},y.PARAMS_DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}},y.DEFAULT_NULL={point:l(l({},y.PARAMS_DEFAULT_NULL),{},{radius:5}),line:l({},y.PARAMS_DEFAULT_NULL),polygon:l({},y.PARAMS_DEFAULT_NULL)};const g=y},30386:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(53444),i=r(56880),o=r(40398);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,r,i,a=u(c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=e;t=(0,o.Ew)(t)?c.DEFAULT_NULL:(0,o.cU)(t,c.DEFAULT),t=(0,o.cU)({},t);var r=new n.Z(t);return a.call(this,t,r)}return t=c,(r=[{key:"toImage",value:function(){return this.getImpl().toImage(this.canvas_)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Point'))"}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.Z);f.DEFAULT={radius:5},f.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5},radius:5},f.getFonts=function(){return n.Z.getFonts()},f.getFontsIcons=function(e){return n.Z.getFontsIcons(e)};const h=f},56880:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(40398);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},l.apply(this,arguments)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(h,e);var t,r,i,a=c(h);function h(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),a.apply(this,arguments)}return t=h,i=[{key:"deserialize",value:function(e,t){var r=(0,n.Q8)(e),i=r.map((function(e,t){return"arg".concat(t)})),a=i.reduce((function(e,t){return e.concat(", ").concat(t)}));return new Function(i,"return new ".concat(t,"(").concat(a,")")).apply(void 0,o(r))}}],(r=[{key:"apply",value:function(e,t,r){var n=this;this.layer_=e,this.getImpl().applyToLayer(e),!0===t&&(r?e.getFeatures().forEach((function(e){e.style=null})):e.getFeatures().forEach((function(e){e.setStyle(n.clone())}))),this.updateCanvas()}},{key:"toImage",value:function(){var e=l(f(h.prototype),"toImage",this).call(this),t={fill:this.options_.fill,stroke:this.options_.stroke};return!0===(0,n.vV)(t)&&(e=(0,n.Is)(this.canvas_)),e}},{key:"ORDER",get:function(){return 1}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),h}(r(76732).Z)},71085:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(81638),i=r(40398),o=r(77055);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(c,e);var t,r,n,a=d(c);function c(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=a.call(this,t)).options_=e,r.canvas_=document.createElement("canvas"),r.updateCanvasPromise_=null,r.layer_=null,r}return t=c,r=[{key:"canvas",get:function(){return this.canvas_}},{key:"apply",value:function(e){this.layer_=e,this.getImpl().applyToLayer(e),this.updateCanvas()}},{key:"unapply",value:function(e){}},{key:"get",value:function(e){var t;if(t=this.options_[e],(0,i.Ew)(t)){var r=e.split(".");r.length>1&&(t=r.reduce((function(e,t){var r;return(0,i.Ew)(e)||(r=e[t],e instanceof c&&(r=e.get(t))),r}),this))}return t}},{key:"set",value:function(e,t){var r=this.get(e);return c.setValue(this.options_,e,t),(0,i.Ew)(this.layer_)||this.getImpl().updateFacadeOptions(this.options_),(0,i.Ew)(this.feature_)||this.applyToFeature(this.feature_),this.fire(o.Ve,[e,r,t]),this.refresh(),this}},{key:"refresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,i.Ew)(e)||(this.layer_=e),(0,i.Ew)(this.layer_)||(this.apply(this.layer_),this.updateCanvas())}},{key:"getOptions",value:function(){return this.options_}},{key:"toImage",value:function(){var e,t=this;if((0,i.Ew)(this.updateCanvasPromise_))if((0,i.Ew)(this.options_.icon)||(0,i.Ew)(this.options_.icon.src))e=this.canvas_.toDataURL("png");else{var r=new Image;r.crossOrigin="Anonymous";var n=this.canvas_;r.onload=function(){n.getContext("2d").drawImage(t,0,0,50,50)},r.src=this.options_.icon.src,e=this.canvas_.toDataURL("png")}else e=this.updateCanvasPromise_.then((function(){return t.canvas_.toDataURL("png")}));return e}},{key:"updateCanvas",value:function(){this.updateCanvasPromise_=this.getImpl().updateCanvas(this.canvas_)}},{key:"equals",value:function(e){return this.constructor===e.constructor}},{key:"clone",value:function(){var e={};(0,i.cU)(e,this.options_);var t=new(0,this.getImpl().constructor)(e);return new this.constructor(e,t)}},{key:"toJSON",value:function(){return{parameters:[(0,i.sV)(this.getOptions())],deserializedMethod:this.getDeserializedMethod_()}}},{key:"serialize",value:function(){return window.btoa(unescape(encodeURIComponent(JSON.stringify(this))))}}],n=[{key:"setValue",value:function(e,t,r){var n=r,o=e,a=(0,i.kJ)(t)?t:t.split("."),f=a.length,h=a[0];1===f?((0,i.kJ)(n)?n=u(n):(0,i.Kn)(n)&&(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},n)),o[h]=n):f>1&&((0,i.Ew)(o[h])&&(o[h]={}),c.setValue(o[h],a.slice(1,f),n))}},{key:"deserialize",value:function(e){var t=decodeURIComponent(escape(window.atob(e.replace(" ","+")))),r=JSON.parse(t),n=r.parameters,i=r.deserializedMethod;return new Function("serializedParams","return ".concat(i,"(serializedParams)"))(n)}}],r&&f(t.prototype,r),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Z)},20683:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(83),i=r.n(n),o=r(67070),a=r(40398),s=r(68079),l=r(77055),u=r(5922),c=r(391);function f(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}const _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(h,e);var t,r,n,s=g(h);function h(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=s.call(this)).name=e,t._map=null,t._controls=[],t._buttonPanel=null,t._collapsible=!1,(0,a.Ew)(r.collapsible)||(t._collapsible=r.collapsible),t.position=o.TL,(0,a.Ew)(r.position)||(t.position=r.position),t._collapsed=t._collapsible,(0,a.Ew)(r.collapsed)||(t._collapsed=r.collapsed&&!0===t._collapsible),t._multiActivation=!1,(0,a.Ew)(r.multiActivation)||(t._multiActivation=r.multiActivation),t._className=null,(0,a.Ew)(r.className)||(t._className=r.className),t._collapsedButtonClass=null,(0,a.Ew)(r.collapsedButtonClass)?t.position===o.TL||t.position===o.BL?t._collapsedButtonClass="g-cartografia-flecha-derecha":t.position!==o.TR&&t.position!==o.BR||(t._collapsedButtonClass="g-cartografia-flecha-izquierda"):t._collapsedButtonClass=r.collapsedButtonClass,t._openedButtonClass=null,(0,a.Ew)(r.openedButtonClass)?t.position===o.TL||t.position===o.BL?t._openedButtonClass="g-cartografia-flecha-izquierda":t.position!==o.TR&&t.position!==o.BR||(t._openedButtonClass="g-cartografia-flecha-derecha"):t._openedButtonClass=r.openedButtonClass,t._element=null,t._areaContainer=null,t._controlsContainer=null,t._tooltip=null,(0,a.Ew)(r.tooltip)||(t._tooltip=r.tooltip),(0,a.Ew)(r.order)||(t._order=r.order),t}return t=h,(r=[{key:"destroy",value:function(){null!=this._element&&this._areaContainer.removeChild(this._element),this._controlsContainer=null}},{key:"addTo",value:function(e,t){var r=this;this._map=e,this._areaContainer=t;var n=(0,c.Mp)(i()),o=n.querySelector(".m-panel-btn");o.setAttribute("type","button"),this._element=n,o.setAttribute("role","button"),o.setAttribute("aria-label","Plugin ".concat(this.name)),this._order?(this._element.style.setProperty("order",this._order,"important"),o.setAttribute("tabIndex",this._order)):o.setAttribute("tabIndex","300"),this._tabAccessibility(),(0,a.Ew)(this._tooltip)||this._element.setAttribute("title",this._tooltip),this._buttonPanel=n.querySelector("button.m-panel-btn"),(0,a.Ew)(this._className)||this._className.split(/\s+/).forEach((function(e){n.classList.add(e)})),!0===this._collapsed?this.collapse():this.open(),!0!==this._collapsible&&n.classList.add("no-collapsible"),this._controlsContainer=n.querySelector("div.m-panel-controls"),t.appendChild(n),this._buttonPanel.addEventListener("click",(function(e){e.preventDefault(),!1===r._collapsed?r.collapse():r.open()})),this.addControls(this._controls),this.fire(l.GY,n)}},{key:"_tabAccessibility",value:function(){document.body.addEventListener("keyup",(function(e){var t=e.key,r=e.target;"Tab"===t&&(document.querySelector(".focusStyle")&&document.querySelector(".focusStyle").classList.remove("focusStyle"),r.classList.add("focusStyle"))})),document.body.addEventListener("click",(function(){document.querySelector(".focusStyle")&&document.querySelector(".focusStyle").classList.remove("focusStyle")}))}},{key:"_collapse",value:function(e){e.classList.remove("opened"),this._buttonPanel.classList.remove(this._openedButtonClass),e.classList.add("collapsed"),this._buttonPanel.classList.add(this._collapsedButtonClass),this._collapsed=!0,this.fire(l.B8)}},{key:"_open",value:function(e){e.classList.remove("collapsed"),this._buttonPanel.classList.remove(this._collapsedButtonClass),e.classList.add("opened"),this._buttonPanel.classList.add(this._openedButtonClass),this._collapsed=!1,this.fire(l.nr)}},{key:"open",value:function(){this._open(this._element)}},{key:"collapse",value:function(){this._collapse(this._element)}},{key:"getControls",value:function(e){if(!e)return this._controls;var t=null,r=null;return Array.isArray(e)||(t=[e]),"object"===p(t[0])&&(r=Object.values.apply(Object,f(t))),this._controls.filter((function(e){var t=e.name;return!r||r.includes(t)}))}},{key:"addControls",value:function(e){var t=this;this.contador=0;var r=e;(0,a.Ew)(r)||((0,a.kJ)(r)||(r=[r]),r.forEach((function(e,r){e instanceof u.Z&&(t.hasControl(e)||(t._controls.push(e),e.setPanel(t),e.on(l.Kn,t._removeControl.bind(t),t)),(0,a.Ew)(t._controlsContainer)||(e.on(l.GY,t._moveControlView.bind(t),t),t._map.addControls(e)),e.on(l.J_,t._manageActivation.bind(t),t)),e.on(l.GY,(function(){}))})))}},{key:"hasControl",value:function(e){var t=!1;return(0,a.Ew)(e)||((0,a.HD)(e)?t=null!=this._controls.filter((function(t){return t.name===e}))[0]:e instanceof u.Z&&(t=(0,a.q9)(this._controls,e))),t}},{key:"removeControls",value:function(e){var t=this,r=e;(0,a.Ew)(r)||((0,a.kJ)(r)||(r=[r]),r.forEach((function(e){var r=e;r instanceof u.Z&&t.hasControl(r)&&(t._controls=t._controls.filter((function(e){return!r.equals(e)})),r.setPanel(null))}),this),0===this._controls.length&&this._map.removePanel(this))}},{key:"_removeControl",value:function(e){var t=this;this._map.controls(e).forEach((function(e){var r=t._controls.indexOf(e);-1!==r&&t._controls.splice(r,1)}))}},{key:"removeClassName",value:function(e){(0,a.Ew)(this._element)?this._className=this._className.replace(new RegExp("s* ".concat(e," s*")),""):this._element.classList.remove(e)}},{key:"addClassName",value:function(e){(0,a.Ew)(this._element)?this._className=this._className.concat(" ").concat(e):this._element.classList.add(e)}},{key:"_moveControlView",value:function(e){var t=e.getElement();(0,a.Ew)(this._controlsContainer)||this._controlsContainer.appendChild(t),e.fire(l.zm)}},{key:"_manageActivation",value:function(e){!0!==this._multiActivation&&this._controls.forEach((function(t){!t.equals(e)&&t.activated&&t.deactivate()}))}},{key:"equals",value:function(e){var t=!1;return e instanceof h&&(t=e.name===this.name),t}},{key:"getTemplatePanel",value:function(){return this._element}},{key:"getButtonPanel",value:function(){return this._buttonPanel}},{key:"isCollapsed",value:function(){return this._collapsed}},{key:"getControlsContainer",value:function(){return this._controlsContainer}}])&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(s.Z)},67070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BL:()=>o,BR:()=>a,TL:()=>n,TR:()=>i});var n=".m-top.m-left",i=".m-top.m-right",o=".m-bottom.m-left",a=".m-bottom.m-right"},62582:(e,t,r)=>{"use strict";r.d(t,{ZV:()=>n,h8:()=>i});var n=72,i={inches:1,in:1,Inch:1,ft:12,mi:63360,m:39.3701,dd:4374754,yd:36,d:4374754,degrees:4374754,nmi:72913.4252,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500,mm:39.37/1e3,cm:.3937,dm:39.37*100,km:39370,kmi:72913.4252,fath:71.999856,ch:791.998416,link:7.91998416,"us-in":1,"us-ft":12,"us-yd":36,"us-ch":792.0000000000001,"us-mi":63360,"ind-yd":35.999740205100004,"ind-ft":11.9999134017,"ind-ch":791.9942845122}},55395:(e,t,r)=>{"use strict";r.d(t,{LJ:()=>u,ft:()=>l});var n=r(79003),i=r(23061),o=r(83473),a=r(2532),s=r(12479),l=function(e,t,r,l){try{var u=[],c=e.getProjection().code;if("zip"===l){var f=[].concat(n.parseZip(t));u=i.Z.loadAllInGeoJSONLayer(f,c)}else if("kml"===l)u=i.Z.loadKMLLayer(t,c,!1);else if("gpx"===l)u=i.Z.loadGPXLayer(t,c);else if("geojson"===l||"json"===l)u=i.Z.loadGeoJSONLayer(t,c);else{if("gml"!==l)return void o.error((0,a.NA)("exception").file_load);u=i.Z.loadGMLLayer(t,c)}if(0===u.length)o.info((0,a.NA)("exception").no_geoms);else{var h=new s.Z({name:r,legend:r,extract:!0});h.addFeatures(u),e.addLayers(h),i.Z.centerFeatures(u,e)}}catch(e){o.error((0,a.NA)("exception").file_load_correct)}},u=function(e,t){if(t)if(t.size>20971520)o.info((0,a.NA)("exception").file_size);else{var r=t.name.slice(2+(t.name.lastIndexOf(".")-1>>>0)).toLowerCase(),n=t.name.split(".").slice(0,-1).join("."),i=new window.FileReader;i.addEventListener("load",(function(t){l(e,i.result,n,r)})),"zip"===r?i.readAsArrayBuffer(t):"kml"===r||"gpx"===r||"geojson"===r||"gml"===r||"json"===r?i.readAsText(t):o.error((0,a.NA)("exception").file_extension)}}},54414:(e,t,r)=>{"use strict";r.d(t,{U2:()=>c,UD:()=>a,ZP:()=>h,v_:()=>f});var n=r(40398),i=r(70514),o=r(47973),a={GET:"GET",POST:"POST"},s=function(e,t){var r=M.config.PROXY_URL;return t===a.POST&&(r=M.config.PROXY_POST_URL),r=(0,n.h1)(r,{url:e})},l=function(e,t,r){var l=e;(0,n.Ew)(t)||(l=(0,n.h1)(l,t)),i.O7&&(l=s(l,a.GET));var u=(0,n.cL)("mapea_jsonphandler_");l=(0,n.h1)(l,{callback:u});var c=new Promise((function(e,t){var r=e;new Promise((function(e){window[u]=e})).then((function(e){delete window[u],function(e){var t=document.getElementById(e);t.parentNode.removeChild(t)}(u);var t=new o.Z;t.parseProxy(e),r(t)}))}));return function(e,t){var r=document.createElement("script");r.type="text/javascript",r.id=t,r.src=e,r.setAttribute("async",""),window.document.body.appendChild(r)}(l,u),c},u=function(e,t,r,a){var l=e,u=t;return!1!==a&&!0===i.O7&&(l=s(l,r)),(0,n.Kn)(u)&&(u=JSON.stringify(u)),new Promise((function(e,t){var n;window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n.onreadystatechange=function(){if(4===n.readyState){var t=new o.Z;t.parseXmlHttp(n),e(t)}},n.open(r,l,!0),n.send(u)}))},c=function(e,t,r){return!0===(((0,n.Ew)(r)||!1!==r.jsonp)&&!1!==i.O7)?l(e,t):u(e,t,a.GET,!1)},f=function(e,t,r){return u(e,t,a.POST)};const h={}},47973:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.d(t,{Z:()=>o});const o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=null,this.xml=null,this.headers={},this.error=!1,this.code=0}var t,r,n;return t=e,(r=[{key:"parseXmlHttp",value:function(e){var t=this;this.text=e.responseText,this.xml=e.responseXML,this.code=e.status,this.error="OK"!==e.statusText;var r=e.getAllResponseHeaders();(r=r.split("\n")).forEach((function(e){var r=e,n=(r=r.trim()).replace(/^([^:]+):(.+)$/,"$1").trim(),i=r.replace(/^([^:]+):(.+)$/,"$2").trim();""!==n&&(t.headers[n]=i)}))}},{key:"parseProxy",value:function(e){var t=this;if(this.code=e.code,this.error=e.error,200===this.code&&!0!==this.error){this.text=e.content.trim();try{var r=e.headers["Content-Type"];"undefined"!=typeof DOMParser&&/text\/html/i.test(r)?this.xml=(new DOMParser).parseFromString(this.text,"text/html"):/xml/i.test(r)&&(this.xml=(new DOMParser).parseFromString(this.text,"text/xml"))}catch(e){this.xml=null,this.error=!0}}Object.keys(e.headers).forEach((function(r){t.headers[r]=e.headers[r]}))}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},391:(e,t,r)=>{"use strict";r.d(t,{IH:()=>p,MY:()=>h,Mp:()=>c,ZP:()=>d,U2:()=>f});var n=r(177),i=r.n(n);function o(e){return function(e){const t=e.compile;return e.compile=function(e,r){const n=t.call(this,e,r);return function(e,t){return n(e,function(e){return{allowProtoPropertiesByDefault:!0,allowProtoMethodsByDefault:!0,...e}}(t))}},e}(e.create())}var a=r(54414),s=r(40398),l=r(10593),u={},c=function(e,t){var r,n={};(0,s.o8)(t)||(n=(0,s.cU)(n,t.vars),r=t.parseToHtml);var a=o(i());(0,l.Z)(a);var u=a.compile(e)(n);return!1!==r?(0,s.KJ)(u):u},f=function(e,t){var r;return(0,s.o8)(t)||(r=t.scope),new Promise((function(n,c){var f=u[e];if((0,s.o8)(f)){var h=e;(0,s.o8)(t)||!0!==t.jsonp||(h=function(e){var t=null;return(0,s.Ew)(e)||(t=(t=M.config.MAPEA_URL.concat(M.config.TEMPLATES_PATH)).concat(e)),t}(e));var p=(0,s.Ew)(t)&&!0===t.jsonp;(0,a.U2)(h,null,{jsonp:p}).then((function(t){var a=o(i());(0,l.Z)(a),f=a.compile(t.text),u[e]=f,n.call(r,f)}))}else n.call(r,f)}))},h=function(e,t){var r,n,i={};return(0,s.o8)(t)||(i=(0,s.cU)(i,t.vars),r=t.parseToHtml,n=t.scope),new Promise((function(o,a){f(e,t).then((function(e){var t=e.call(null,i);!1!==r?o.call(n,(0,s.KJ)(t)):o.call(n,t)}))}))},p=function(e,t){(0,s.o8)(u[e])&&(u[e]=t)};const d={}},40398:(e,t,r)=>{"use strict";r.d(t,{bu:()=>Te,h1:()=>P,Hx:()=>U,EF:()=>Q,tQ:()=>Z,J2:()=>ye,wQ:()=>G,bE:()=>Ce,NV:()=>be,m9:()=>ee,ZP:()=>Me,Q8:()=>ue,GC:()=>ve,Em:()=>Ee,al:()=>we,Is:()=>pe,Sg:()=>K,oF:()=>Ae,Aj:()=>W,iT:()=>V,l7:()=>q,cU:()=>ie,_5:()=>R,WL:()=>Pe,G:()=>me,cw:()=>oe,cL:()=>O,Cp:()=>D,iQ:()=>L,ZM:()=>de,v2:()=>Se,Ad:()=>se,uN:()=>X,X_:()=>C,AC:()=>B,HY:()=>ne,qu:()=>j,Mw:()=>te,L0:()=>ge,sE:()=>T,BP:()=>k,WX:()=>N,q9:()=>z,V5:()=>re,kJ:()=>A,jn:()=>_,vV:()=>ce,mf:()=>w,Ec:()=>$,Ft:()=>v,Ew:()=>b,Kn:()=>E,HD:()=>x,o8:()=>m,CB:()=>I,XO:()=>_e,Fv:()=>S,vp:()=>xe,vq:()=>H,s:()=>Y,yB:()=>J,bU:()=>he,KJ:()=>F,sV:()=>le,o:()=>ae,VC:()=>Oe});var n=r(54414),i=r(65792),o=r.n(i),a=r(98384),s=r.n(a);var l=r.t("data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAAwADADAREAAhEBAxEB/8QAGwAAAwADAQEAAAAAAAAAAAAAAgQGAAMFBwj/xAAaAQACAwEBAAAAAAAAAAAAAAABAwACBQQG/9oADAMBAAIQAxAAAAH6nAjsJBGa6wjLHdfHYSKvZeqmvnvmeW03ujmclCMS56qpDj7We++Xx06aCfzF5J29Bj3RYKgROx3M3XMzkpERpxsd18dhIIzJBEsd1/8A/8QAHBAAAwEBAQEBAQAAAAAAAAAAAgMFBAEAEwYU/9oACAEBAAEFAiLg8Oppos5Cc33Y5p4FTTOYJcLlQzo7UIDMqi5mfHzC183D3tSdLM522Fz66aFrQLc1Rj/H+aLvkZ15hu8+WmSPfpn0BIsbNa69U6blulVia27366agHO2/y5aGTPNQhOrNsx08AtW2WB0dpDwuHL0zmcuuV7t1zfBL00WCPB5//8QAIBEAAgEEAwEBAQAAAAAAAAAAAQIAERIhIgMTMRAyQv/aAAgBAwEBPwGXlsJOsn0yynhl5XD/AB9jYIBTAjGgqJaSt1Yu67RNTYZx5JMbkOVgcmikTqgAHk5MEGJ/SwGx8xje2JeRqsR64M5MkCPqbxKKwxAgApCGVqiLX9tE2N5+WFcpOwj0TsJ8EsLZf5//xAAoEQABBAEDAwQCAwAAAAAAAAACAAEDBBESIUExUWEFFSIzExQjMkL/2gAIAQIBAT8Bd2ZsuiuTWi0VG27r26Q/tldPRIN4pnZDcmqlottt3TOztllcIrUzVA6cqOMYhYAbZWjOKFzDq3dfrnJXe1r844Vd3uV/58PlUyKrM9Q+nC9O+cksvlWr8rEddh34worhyaKsgZfnKL0p3zguenGFHEETYBsL1H4SRS+VSb5T1843UUo0bZa31eVPMN20Oh9PlFbkAxggyTj1zyqd0jJ4pv75XqPzkii8q4JVZmth05X4YLMTuH+lHUijAQxnCmisQWfyxPqcvCrMYkVycsd2wqYlame2fThOzO2HRU5qpa6j7dl7jIH2xOvcZD+qJ0NOa0Wu2+3ZMzM2GX//xAAlEAABAwIGAwEBAQAAAAAAAAABAAIDBBEFEhMhMUEiMlEUQiP/2gAIAQEABj8CJJsB2jFh7PEczv4V6iulcfjUXQYi9ttvI7XQixBnieJ2cIEG4PaZh8Rs32lKbHG3KwdKSSMtDm7+fCkrv0Wu4y6X83V6kMeJOm9J+Hym7faIquqDy6TKFUUYh/0OzCw72UFBNTB7rgO1U+0oAMlxH/OVZYmBg5sFQ1A5bJlKxKkzFjsxsRypNV5qBbKZO1BpOMA9dQ8qGmptSeWK4kDx7J1PUB/6Mx2y7NCoaccukzFMxCIXb6yhSGMNyz7l4G91FHka/T3DiO/qbUQO15JrjKW2ACmxGql0dy17MvKfiEos31iCIIuD0jLh7/E8wP4VqihlafrVanoZXH65CXEH+I4gZwgALAdL/8QAIBABAAIBBQEBAQEAAAAAAAAAAQARITFBUXHwYcGBof/aAAgBAQABPyEGxrVoErNNRMOvX8mTK3aD3Uvhexf8HMvNNRMu/X8gNjWDRI4U8PY49ukPsWgQg3/YcdxUFIAyD3rM7VfN+McK+Xuce3GanEJwHiZmdd0I17qN3TltoZuneWOplXW0ftRenthouaHAJyPmGyKtMGyz/I7iEDNsff5NJkDFbMLdyg6m9/vUDGbaWoqanABwHmOFfD3OfbhMM8ofZ2S00dBuBIGrTCqFvg+aQ3Od9IKAe604jhTy9jn26wGxqVokvNNbMuvX9mDK2bH3cyZWzQe7lZprZh36/sBsagaBP//aAAwDAQACAAMAAAAQo4FGBA7SvIwnAyQo/F//xAAdEQEBAAIDAQEBAAAAAAAAAAABABGBITFBYXFR/9oACAEDAQE/EFxyyvBu9nL5WLwbhzyST2QGGeMh+2LL6JL6Lc4qBzcwn7L5w+9fIXAxbnHnoibLMJ9PsoMincq97c4J7LNvqKYdXedYhUx/YL6JM8MryavZ3s4Xk1Bjgv/EACIRAQABAwQDAQEBAAAAAAAAAAERACExQVFhcYHB8LHhkf/aAAgBAgEBPxBEkBSC3ZePHy8FF292LH76odjjF2Sdm/qgF+wcefh4aBJI0g8ZPjb7VNqj4ClFC5s67cHND9GV5g9xO1uKmADSaHpH/KQecnxt9qO9CfyxOif5V3rskzCZ7i9oisy4ErgvMOsbzPmpbEMy7JrrMfaiY4b23oR+SD0x/acuCUJkmSfFqSnEQ5M23cmG9HrDErM358F6GSSAIs1nJuPVE03LRYMx13xelH5ZPRH9oB5wPG/2ob1DQi9QJnfs/ZpgHKKEzvR68ZDAAiBZ2M2bVl8U1AQEPcREzGaAeMDxv9qu1IgkaQX7Lx4+HloszO5c/PdNm53bH57oBbsHHn5eSgQQFf/EACAQAQACAgIDAQEBAAAAAAAAAAERIQAxQVFhcZGBobH/2gAIAQEAAT8QTtB2AWq8GCJrqeglfoodN5zBhY7xKn8Zpp6KkEgAZQhHeCJvqegF/gANt4HaDsosR5MIyQ/phPKJGNPQc/0ACRXldq7yF3EzgMvsKPKYgZRAxGSmrFPBzImVkJYGgbpRaarCMEv7ZXwkFjR2DNrBDalj4/OOoUT4gQCVKaiJ8YKEllTEEgLuZjV5UGvGh5N2qoJuR5z5kIBY9B8zSwQ2oY+H3hA6OtTzAP8AcD15MbErKsRVvPrCI2DdxCA1bBZbxhvy/ugNKhakjtOsh6thgYJLAsFnZbOaWCG1BPx+cIyQftgPCYCdHYcZCYkxClOk4eZ5XF6Qd6bLtf8ADrI2LMXISFBcp7S41YIXgyJ6AgzSbcIwSfpkfKBSdPQMTtA2UUicmCJvqewt/qANtZxBhY7xIH9ZxBgY7zAn8YIGup7A1+Kh01gdoGwCgDgz/9k="),u=r(2532),c=r(62582),f=r(92482);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}var m=function(e){return void 0===e},_=function(e){var t=!1;return null===e||m(e)||(t="boolean"==typeof e),t},v=function(e){var t=!1;return _(e)||"number"==typeof e||(m(e)?t=!0:e?null===e&&(t=!0):t=!0),t},A=function(e){var t=!1;return v(e)||(t=Object.prototype.toString.call(e)===Object.prototype.toString.call([])),t},b=function e(t){var r=!1;return v(t)?r=!0:A(t)?(r=!0,t.length>0&&(r=!t.some((function(t){return!e(t)})))):"string"==typeof t&&0===t.trim().length&&(r=!0),r},w=function(e){var t=!1;return v(e)||(t="function"==typeof e&&!m(e.call)),t},E=function(e){var t=!1;return v(e)||(t="object"===g(e)&&!m(e.toString)),t},x=function(e){var t=!1;return v(e)||(t="string"==typeof e),t},I=function(e){var t=!1;return!v(e)&&x(e)&&(t=/(https?:\/\/[^*]+)/.test(e)),t},S=function(e,t){var r=e;return!b(r)&&x(r)&&(r=r.trim(),r=t?r.toUpperCase():r.toLowerCase()),r},C=function(e,t){var r=null,n=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=t,o=i.indexOf("?");-1!==o&&(i=i.substring(o),null!==(r=new RegExp("[\\?&]".concat(n,"=([^&#]*)")).exec(i))&&(r=decodeURIComponent(r[1].replace(/\+/g," "))));return r},P=function(e,t){var r=e;-1===r.indexOf("?")?r+="?":"?"!==r.charAt(r.length-1)&&(r+="&");var n="";E(t)?(Object.keys(t).forEach((function(e){var r=t[e];n+=e,n+="=",n+=encodeURIComponent(r),n+="&"})),n=n.substring(0,n.length-1)):x(t)&&(n=t);return r+=n},O=function(e,t){var r="";return b(e)||(r=e),r=r.concat(Math.random()).replace(/0\./,""),b(t)||(r=r.concat(t)),r},T=function(e,t){var r=e;return r=P(r,"request=GetCapabilities"),r=P(r,"service=WMS"),r=P(r,{version:t})},k=function(e,t){var r=e;return r=P(r,"request=GetCapabilities"),r=P(r,"service=WMTS"),b(t)||(r=P(r,{version:t})),r},R=function(e,t,r){var n=e,i=t,o=new Array(r);n=Number.parseFloat(n),i=Number.parseFloat(i);var a=2;Number.isNaN(n)||(a=Math.pow(i/n,1/(r-1)));for(var s=0;s<r;s+=1)o[s]=i/Math.pow(a,s);return o.sort((function(e,t){return t-e})),o},B=function(e,t){var r,n=t;b(e)||(v(n)&&(n="degrees"),r=1/((e>1?1/e:e)*c.h8[n]*c.ZV));return r},L=function(e,t,r,n){var i=B(e,n),o=B(t,n);return R(i,o,r)},D=function(e,t,r,n){var i=e,o=null,a=null;A(i)?(o=i[2]-i[0],a=i[3]-i[1]):E(i)?(o=i.x.max-i.x.min,a=i.y.max-i.y.min):x(i)&&(o=(i=i.split(","))[2]-i[0],a=i[3]-i[1]);var s=o/t[0],l=a/t[1],u=Math.max(s,l);return R(null,u,r)},j=function(e,t){var r=t;return b(r)&&(r="degrees"),e*c.h8[r]*c.ZV},F=function(e){var t;if(!b(e)){var r=document.createElement("div");r.innerHTML=e,t=r.children[0]}return t},N=function(e){var t;if(!b(e)){var r=document.createElement("div");r.appendChild(e),t=r.innerHTML}return t},Z=function(e){var t;return t=(t=(t=(t=(t=(t=(t=e.toLowerCase()).trim(t)).charAt(0).toUpperCase()+t.slice(1)).replace(/_/g," ")).replace(/\s+/," ")).replace(/(\s\w)+/g,(function(e){return e.toUpperCase()}))).replace(/\s+(de|del|las?|el|los?|un|unas?|unos?|y|a|al|en)\s+/gi,(function(e){return e.toLowerCase()}))},U=function(e){var t=e;if(t&&(t=t.trim()).length>0){var r=t.indexOf(":");-1!==r&&(r+=1,t=t.substring(r,t.length))}return t},Q=function(e){var t=S(e);return t=(t=t.replace(/_(\w)/g,(function(e,t){return" ".concat(t.toUpperCase())}))).replace(/^\w/,(function(e){return e.toUpperCase()}))},G=function(e){var t=null;if(!b(e)){t=(t=e[0]).replace(/\/+\s*$/,"");for(var r=1,n=e.length;r<n;r+=1){var i=e[r];0!==i.indexOf("/")&&(t=t.concat("/")),t=t.concat(i)}}return t},z=function(e,t,r){var n=Object(e),i=parseInt(n.length,10)||0;if(0===i)return!1;var o,a,s=parseInt(r,10)||0;for(s>=0?o=s:(o=i+s)<0&&(o=0);o<i;){if(t===(a=n[o])||Object.equals(t,a))return!0;o+=1}return!1},q=function e(t,r,n){var i=t;return Object.keys(r).forEach((function(t){m(i[t])?i[t]=r[t]:Object.getPrototypeOf(i[t])===Object.prototype?e(i[t],r[t],n):!0===n&&(i[t]=r[t])})),i},V=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},W=function(e){return e.replace(/(<\s*script[^>]*>)+[^<]*(<\s*\/\s*script[^>]*>)+/gi,"").replace(/(('|')\s*\+\s*)?\s*eval\s*\(.*\)\s*(\+\s*('|'))?/gi,"")},K=function(e){var t=e;if("ontouchstart"in document){var r=0;t.addEventListener("touchstart",(function(e){r=t.scrollTop+e.touches[0].pageY})),t.addEventListener("touchmove",(function(e){t.scrollTop=r-e.touches[0].pageY}))}},H=function(e){return o()(e).hex()},Y=function(e){return o()(e).hex()},X=function(e){var t,r=/^rgba\s*\((\s*\d+\s*,){3}\s*([\d.]+)\s*\)$/;return r.test(e)&&(t=e.replace(r,"$2"),t=parseFloat(t)),t},J=function(e,t){var r=e.replace(/^(.+)\/$/,"$1").replace(/^(.+)\?$/,"$1"),n=t.replace(/^(.+)\/$/,"$1").replace(/^(.+)\?$/,"$1");return r.toLowerCase()===n.toLowerCase()},$=function(e){var t=[f.x2.toLowerCase(),"GeometryPropertyType".toLowerCase(),f.e_.toLowerCase(),f.Sd.toLowerCase(),f.NB.toLowerCase(),f.KX.toLowerCase(),f.V0.toLowerCase(),f.jW.toLowerCase(),f.rl.toLowerCase(),f.hF.toLowerCase(),f.Md.toLowerCase(),"pointpropertytype","polygonpropertytype","linestringpropertytype","geometrypropertytype","multisurfacepropertytype","multilinestringpropertytype","surfacepropertytype","geometrypropertytype","geometryarraypropertytype","multigeometrypropertytype","multipolygonpropertytype","multipointpropertytype","abstractgeometricaggregatetype","pointarraypropertytype","curvearraypropertytype","solidpropertytype","solidarraypropertytype"],r=e.toLowerCase();return-1!==t.indexOf(r)},ee=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},te=function(e){var t=e;!x(e)&&e.outerHTML&&(t=e.outerHTML);var r=document.createElement("DIV");return r.innerHTML=t,r.textContent||r.innerText||""},re=function(e){var t;if(x(e)){var r=o()(e).hex();r=r.replace(/^#/,"0x"),t=o()(16777215-r).hex()}return t},ne=function(e,t){return o()(e).alpha(t).css()},ie=function e(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b(t)||Object.keys(t).forEach((function(n){var i=t[n];A(i)?i=p(i):E(i)&&(i=e({},i)),b(r[n])?r[n]=i:E(r[n])&&e(r[n],i)})),r},oe=function(e,t){var r=p(e);if(e.length<t){for(var n=(e[0]+e[1])/(t-1),i=1;i<t-1;i+=1)r[i]=n*i;r=[].concat(p(r),[e[1]])}return r},ae=function(e,t){return e.ORDER-t.ORDER},se=function(e){var t=new Image;return new Promise((function(r,n){t.onload=function(){return r(t)},t.src=e}))},le=function e(t){var r;return A(t)?r=(r=p(t)).map(e):E(t)?(r=ie({},t),Object.keys(r).forEach((function(t){var n=r[t];w(n)?r[t]="{{f}}".concat(n.toString()):E(n)&&(r[t]=e(n))}))):r=w(t)?"{{f}}".concat(t.toString()):t,r},ue=function e(t){var r=t;if(/^\{\{f\}\}/.test(t)){var n=t.replace(/^\{\{f\}\}(.+)/,"$1");r=new Function("f","return ".concat(n))()}else Object.keys(r).forEach((function(t){var n=r[t];if(/^\{\{f\}\}/.test(n)){var i=n.replace(/^\{\{f\}\}(.+)/,"$1");r[t]=new Function("f","return ".concat(i))()}else E(n)&&e(n)}));return r},ce=function e(t){var r=!1;return Array.isArray(t)||"object"!==g(t)||b(t)?("function"==typeof t||"string"==typeof t&&/\{\{.*\}\}/.test(t))&&(r=!0):r=Object.values(t).some((function(t){return e(t)})),r},fe=l,he=function(e){fe=e},pe=function(e){return fe},de=function(e){var t=null;return b(e)||(t=[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],e.forEach((function(e){b(e)||(t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[2]),t[3]=Math.max(t[3],e[3]))}))),t},ye=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png",n=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],i="",o=e.length;for(t=2;t<o;t+=3)i+=n[e[t-2]>>2],i+=n[(3&e[t-2])<<4|e[t-1]>>4],i+=n[(15&e[t-1])<<2|e[t]>>6],i+=n[63&e[t]];return t===o+1&&(i+=n[e[t-2]>>2],i+=n[(3&e[t-2])<<4],i+="=="),t===o&&(i+=n[e[t-2]>>2],i+=n[(3&e[t-2])<<4|e[t-1]>>4],i+=n[(15&e[t-1])<<2],i+="="),"data:".concat(r,";base64,").concat(i)},ge=function e(t){return new Promise((function(r,n){var i=new Uint8Array;t instanceof ArrayBuffer?(i=new Uint8Array(t),r(i)):t instanceof File?t.arrayBuffer().then((function(e){i=new Uint8Array(e),r(i)})):t instanceof Response?r(t.arrayBuffer().then(e)):t instanceof Uint8Array?r(t):r(i)}))},me=function(e,t){return o().scale(e).colors(t)},_e=function(e,t){return(0,n.U2)(e).then((function(e){var r="";try{var n=t.icon.tag?t.icon.tag:["path","circle","ellipse","line","polygon","polyline","rect","foreignObject"],i=Array.from(e.xml.getElementsByTagName("svg"))[0],o=t.icon.stroke&&t.icon.stroke.width?t.icon.stroke.width:1,a=i.getAttribute("width")?i.getAttribute("width").replace(/[^0-9.]/g,""):null,s=i.getAttribute("height")?i.getAttribute("height").replace(/[^0-9.]/g,""):null;if(i.getAttribute("viewBox")){var l=i.getAttribute("viewBox").split(" ");a||(i.setAttribute("width",l[2]),a=l[2]),s||(i.setAttribute("height",l[3]),s=l[3])}if(t.icon.stroke&&o&&a&&s)if(i.getAttribute("viewBox")){var u=i.getAttribute("viewBox").split(" ");i.setAttribute("viewBox","".concat(-o," ").concat(-o," ").concat(Math.ceil(Number(u[2]))+2*o," ").concat(Number(u[3])+2*o))}else i.setAttribute("viewBox","".concat(-o," ").concat(-o," ").concat(Math.ceil(Number(a))+2*o," ").concat(Number(s)+2*o));n.forEach((function(r){Array.from(e.xml.getElementsByTagName(r)).forEach((function(e){var r;(r=e.classList).remove.apply(r,p(e.classList)),t.icon.fill&&t.icon.fill.color&&e.setAttribute("fill",t.icon.fill.color),t.icon.fill&&t.icon.fill.opacity&&e.setAttribute("fill-opacity",t.icon.fill.opacity),t.icon.stroke&&t.icon.stroke.color&&e.setAttribute("stroke",t.icon.stroke.color),t.icon.stroke&&o&&e.setAttribute("stroke-width",o)}))})),Array.from(e.xml.getElementsByTagName("g")).forEach((function(e){t.icon.stroke&&o&&e.removeAttribute("clip-path")})),r="data:image/svg+xml,".concat(encodeURIComponent((new XMLSerializer).serializeToString(e.xml,"text/xml")))}catch(e){}return r}))},ve=function(e,t){document.getElementById(t).onmousedown=function(t){var r=0,n=0,i=0,o=0,a=document.getElementById(e),s=t||window.event;s.preventDefault(),i=s.clientX,o=s.clientY,document.onmouseup=function(){document.onmouseup=null,document.onmousemove=null},document.onmousemove=function(e){var t=e||window.event;t.preventDefault(),r=i-t.clientX,n=o-t.clientY,i=t.clientX,o=t.clientY,a.offsetTop-n>=a.parentElement.clientHeight-a.clientHeight||(a.style.top="".concat(Math.abs(a.offsetTop-n),"px")),a.offsetLeft-r>=a.parentElement.clientWidth-a.clientWidth||(a.style.left="".concat(Math.abs(a.offsetLeft-r),"px"))}}},Ae=function(e){var t=JSON.stringify(e);return window.btoa(unescape(encodeURIComponent(t)))},be=function(e){return JSON.parse(decodeURIComponent(escape(window.atob(e.replace(" ","+")))))},we=function(e,t){var r=e.getTemplatePanel(),n=null;setTimeout((function(){n=new(s())(r,{containment:".m-mapea-container",handle:t}),M.utils.isNull(n)||e.isCollapsed()||n.enable();var i=r.querySelector(".m-panel-btn");i&&i.addEventListener("click",(function(){e.isCollapsed()?(r.style.removeProperty("left"),r.style.removeProperty("top"),r.style.position="relative",n.disable()):n.enable()}))}),1e3)},Ee=function(e,t){setTimeout((function(){var r=document.querySelector(e);null!==r&&new(s())(r,{containment:"body",handle:t}).enable()}),50)},xe=function(e,t){var r=document.querySelector(".".concat(e)).getBoundingClientRect(),n=t.getMapImpl().getViewport().getBoundingClientRect(),i=r.left-n.left+r.width/2,o=r.top-n.top+r.height/2;return t.getMapImpl().getCoordinateFromPixel([i,o])},Ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg",r=e.getMapImpl().getViewport().querySelectorAll(".ol-layer canvas, canvas.ol-layer");if(1===r.length)return r[0];var n=document.createElement("canvas"),i=n.getContext("2d"),o=e.getMapImpl().getSize();return n.width=o[0],n.height=o[1],/jp.*g$/.test(t)&&(i.fillStyle="white",i.fillRect(0,0,n.width,n.height)),r.forEach((function(e){if(e.width){if(i.save(),"0"===e.parentNode.style.opacity)return;i.globalAlpha=parseFloat(e.parentNode.style.opacity)||1,i.globalCompositeOperation=e.parentNode.style.mixBlendMode,i.filter=e.parentNode.style.filter;var t=e.style.transform||e.style.webkitTransform;/^matrix/.test(t)?((t=t.replace(/^matrix\(|\)$/g,"").split(",")).forEach((function(e,r){t[r]=parseFloat(e)})),i.transform(t[0],t[1],t[2],t[3],t[4],t[5]),i.drawImage(e,0,0)):i.drawImage(e,0,0,e.width,e.height),i.restore()}})),n},Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(arguments.length>3&&void 0!==arguments[3]&&arguments[3])return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/jpeg";return new Promise((function(r){var n=e.getMapImpl().getViewport().querySelectorAll(".ol-layer canvas, canvas.ol-layer, canvas.maplibregl-canvas"),i=function(e){if(!e)throw new Error("No obtenido canvas para el generado de Print");r(e.toDataURL(t))};if(1===n.length)i(n[0]);else{var o=document.createElement("canvas"),a=o.getContext("2d"),s=h(e.getMapImpl().getSize(),2);o.width=s[0],o.height=s[1],/jp.*g$/.test(t)&&(a.fillStyle="white",a.fillRect(0,0,o.width,o.height));var l,u=function(e,t){if(e.width){if(a.save(),"0"===t)return;a.globalAlpha=parseFloat(t)||1;var r=e.parentNode.style;a.globalCompositeOperation=r.mixBlendMode,a.filter=r.filter;var n=e.style.transform||e.style.webkitTransform;/^matrix/.test(n)?((n=n.replace(/^matrix\(|\)$/g,"").split(",")).forEach((function(e,t){n[t]=parseFloat(e)})),a.transform(n[0],n[1],n[2],n[3],n[4],n[5]),a.drawImage(e,0,0)):a.drawImage(e,0,0,e.width,e.height),a.restore()}},c=0,f=n.length,p=e.getMapLibre(),d=function(e){var t=n[e];if("maplibregl-canvas"===t.className){var r=p.find((function(e){return"MapLibre"===e.type&&e.getImpl().getOL3Layer().mapLibreMap.getCanvas()===t}));r?((r=r.getImpl().getOL3Layer().mapLibreMap).once("render",(function(){u(t,t.style.opacity),l(1)})),r.triggerRepaint()):l(1)}else u(t,t.parentNode.style.opacity),l(1)};(l=function(e){(c+=e)<f?d(c):i(o)})(0)}}))}(e,t);var n=r||Ie(e,t),i=null;return n&&(i=n.toDataURL(t)),i},Ce=function(e,t){var r=t||Ie(e,"image/png");r&&r.toBlob((function(e){if(e){var t=new window.ClipboardItem({"image/png":e});window.navigator.clipboard.write([t]).then((function(){console.log("Image copied to clipboard")})).catch((function(e){console.error("Error copying image to clipboard:",e)}))}}))},Pe=function(e){return e.match(/(^|\s)(https?:\/\/[^\s<>"']+)/g)||[]},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;return Pe(r).forEach((function(e){var n=e.slice(-1),i="";e=e.trim(),/^[a-zA-Z0-9]+$/.test(n)||(i=n,e=e.slice(0,-1));var o={images:t.images||["120px","75px"],videos:t.videos||["500px","300px"],documents:t.documents||["500px","300px"],audios:t.audios||["250px","40px"]};r=/\.(jpg||jpeg|png|gif|svg)$/i.test(e)?r.replace("".concat(e).concat(i),"</br><img src='".concat(e,"' style='max-width: ").concat(o.images[0],"; max-height: ").concat(o.images[1],";'/></br>").concat(i)):/\.(pdf||txt|json|geojson)$/i.test(e)?r.replace("".concat(e).concat(i),"</br><iframe src='".concat(e,"' width='").concat(o.documents[0],"' height='").concat(o.documents[1],"'></iframe></br>").concat(i)):/\.(mp4|mov|3gp)$/i.test(e)?r.replace("".concat(e).concat(i),"</br><video style='max-width: ".concat(o.videos[0],"; max-height: ").concat(o.videos[1],"' controls><source src='").concat(e,"'>\n        <p>").concat((0,u.NA)("exception").browser_video,"</p></video></br>").concat(i)):/\.(mp3|ogg|ogv|wav)$/i.test(e)?r.replace("".concat(e).concat(i),"</br><audio style='max-width: ".concat(o.audios[0],"; max-height: ").concat(o.audios[1],"'controls><source src='").concat(e,"'>").concat((0,u.NA)("exception").browser_audio,"</audio></br>").concat(i)):r.replace("".concat(e).concat(i),"<a href=".concat(e,">").concat(e,"</a>").concat(i))})),r},Te=function(e,t){return M.impl.ol.js.projections.getSupportedProjs().filter((function(e){return e.codes.includes(t)}))[0].def.includes("+proj=longlat")?[e.y.min,e.x.min,e.y.max,e.x.max]:[e.x.min,e.y.min,e.x.max,e.y.max]};const Me={}},2808:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.d(t,{Z:()=>a});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"listen",value:function(){e.WIDTH=window.innerWidth,e.HEIGHT=window.innerHeight,window.addEventListener("resize",(function(t){e.WIDTH=t.target.innerWidth,e.HEIGHT=t.target.innerHeight}))}}],(r=null)&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();o.WIDTH=window.innerWidth,o.HEIGHT=window.innerHeight,o.listen();const a=o},10593:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(40398),i=void 0;const o=function(e){e.registerHelper("gt",(function(e,t,r){return e>t?r.fn(this):r.inverse(this)})),e.registerHelper("lt",(function(e,t,r){return e<t?r.fn(this):r.inverse(this)})),e.registerHelper("eq",(function(e,t,r){return Object.equals(e,t)?r.fn(this):r.inverse(this)})),e.registerHelper("oneword",(function(e,t){return/\s/g.test((0,n.Mw)(e))?t.inverse(this):t.fn(this)})),e.registerHelper("printType",(function(e,t,r,n,i){var o="<li id=".concat(r,'><span id="info">').concat(t,"</span>");return"Municipio"!==e&&"provincia"!==e&&"comunidad autonoma"!==e&&!0!==i||(o+=" (".concat(e,")")),void 0!==n&&(o+=" en ".concat(n)),o})),e.registerHelper("pattern",(function(e){var t="";return e.data.root.fields.forEach((function(e){if(e.isFormatter&&void 0!==e.typeparam)for(var r=e.typeparam,n=e.value,i=0;i<n;i+=1)t+=r})),t})),e.registerHelper("formatterStr",(function(e){var t,r,n="";r=e.value,t=e.typeparam;for(var i=0;i<r;i+=1)n+=t;return n})),e.registerHelper("ifCond",(function(e,t,r){return e===t?r.fn(i):r.inverse(i)})),e.registerHelper("sum",(function(e,t){return e+t})),e.registerHelper("neq",(function(e,t,r){return Object.equals(e,t)?r.inverse(i):r.fn(i)})),e.registerHelper("unless",(function(e,t){return e?t.inverse(i):t.fn(i)})),e.registerHelper("get",(function(e,t){return t[e]})),e.registerHelper("uppercase",(function(e){return e.toUpperCase()})),e.registerHelper("lowercase",(function(e){return e.toLowerCase()}))}},25559:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>i});[].includes||(Array.prototype.includes=function(e){var t=Object(this),r=parseInt(t.length)||0;if(0===r)return!1;var n,i,o=parseInt(arguments[1])||0;for(o>=0?n=o:(n=r+o)<0&&(n=0);n<r;){if(e===(i=t[n])||Object.equals(e,i)||e!=e&&i!=i)return!0;n++}return!1}),[].remove||(Array.prototype.remove=function(e){var t=Object(this),r=parseInt(t.length)||0;if(0===r)return!1;var n,i=parseInt(arguments[1])||0;i>=0?n=i:(n=r+i)<0&&(n=0);for(var o,a=[];n<r;)(e===(o=t[n])||Object.equals(e,o)||e!=e&&o!=o)&&a.push(n),n++;var s=0;a.forEach((function(e){e+=s,t.splice(e,1),s--}))}),Object.equals||(Object.equals=function(e,t){if(null!==e.equals&&"function"==typeof e.equals&&e.equals.call)return e.equals(t);if(null!==t.equals&&"function"==typeof t.equals&&t.equals.call)return t.equals(e);var r,i=[],o=[];if(isNaN(e)&&isNaN(t)&&"number"==typeof e&&"number"==typeof t)return!0;if(e===t)return!0;if("function"==typeof e&&"function"==typeof t||e instanceof Date&&t instanceof Date||e instanceof RegExp&&t instanceof RegExp||e instanceof String&&t instanceof String||e instanceof Number&&t instanceof Number)return e.toString()===t.toString();if(!(e instanceof Object&&t instanceof Object))return!1;if(e.isPrototypeOf(t)||t.isPrototypeOf(e))return!1;if(e.constructor!==t.constructor)return!1;if(e.prototype!==t.prototype)return!1;if(i.indexOf(e)>-1||o.indexOf(t)>-1)return!1;for(r in t){if(t.hasOwnProperty(r)!==e.hasOwnProperty(r))return!1;if(n(t[r])!==n(e[r]))return!1}for(r in e){if(t.hasOwnProperty(r)!==e.hasOwnProperty(r))return!1;if(n(t[r])!==n(e[r]))return!1;switch(n(e[r])){case"object":case"function":if(i.push(e),o.push(t),!Object.equals(e[r],t[r]))return!1;i.pop(),o.pop();break;default:if(e[r]!==t[r])return!1}}return!0});const i={}},16451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(391),i=r(60894),o=r(40398),a=r(93340),s=r.n(a);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}const c=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text_=t,this.coord_=[r.x,r.y],this.popup_=null,this.facadeMap_=null,this.panMapIfOutOfView=n}var t,r,a;return t=e,(r=[{key:"show",value:function(e){this.facadeMap_=e;var t=(0,n.Mp)(s(),{vars:{info:this.text_},parseToHtml:!1});e.removePopup(),this.popup_=new i.Z({panMapIfOutOfView:this.panMapIfOutOfView}),this.popup_.addTab({icon:"g-cartografia-comentarios",title:"Información",content:t}),e.addPopup(this.popup_,this.coord_)}},{key:"hide",value:function(){this.facadeMap_.removePopup()}},{key:"getPopup",value:function(){return this.popup_}},{key:"getCoordinate",value:function(){var e=this.coord;return(0,o.Ew)(e)&&(e=this.getPopup().getCoordinate()),e}},{key:"setCoordinate",value:function(e){var t=this.getPopup();(0,o.Ew)(t)||t.setCoordinate(e)}}])&&u(t.prototype,r),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},99075:(e,t,r)=>{"use strict";r.d(t,{Z:()=>N});var n=r(25769),i=r(27811),o=r(40546),a=r(14752),s=r(54999),l=r(68079),u=r(63920),c=r(68524),f=r(5922),h=r(9396),p=r(77055),d=r(89437),y=r(81971),g=r(2532),m=r(54414),_=r(40398),v=(r(45056),r(9220)),A=r(19441),b=r(62513),w=r(43938);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function x(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(){S=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new C(i||[]);return n(a,"_invoke",{value:b(e,r,s)}),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function h(){}function p(){}function d(){}var y={};l(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(P([])));m&&m!==t&&r.call(m,o)&&(y=m);var _=d.prototype=h.prototype=Object.create(y);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function i(n,o,a,s){var l=c(e[n],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==E(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return i("throw",e,a,s)}))}s(l.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function b(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=c(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function w(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var i=c(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,n(_,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},v(A.prototype),l(A.prototype,a,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new A(u(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(_),l(_,s,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;I(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function C(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return(t=R(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function R(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}(this,r)}}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(T,e);var t,r,l,E,I,P=L(T);function T(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T),(r=P.call(this)).facadeMap_=t,r.layers_=[],r.layerGroups_=[],r.controls_=[],r.initZoom_=!0,r.userResolutions_=null,r.userBbox_=null,r.maxExtentForResolutions_=null,r.envolvedMaxExtent_=null,r._calculatedResolutions=!1,r._resolutionsEnvolvedExtent=!1,r._resolutionsBaseLayer=!1,r.currentZoom=null,r.viewExtent=i.viewExtent,r.objectView=o,void 0!==r.viewExtent&&4===r.viewExtent.length&&(r.objectView.extent=r.viewExtent);var a=new b.Z(r.objectView);return r.map_=new n.Z({controls:[],target:e.id,view:a}),r.registerEvents_(),r.facadeMap_.on(p.Qc,(function(){r.map_.updateSize()})),r.map_.on("singleclick",r.onMapClick_.bind(D(r))),r.map_.addInteraction(new s.ZP({handleEvent:function(e){return"pointerdrag"===e.type||"wheel"===e.type?r.onMapMove_(e):"pointermove"===e.type&&r.onMapMoveMouse_(e),!0}})),r}return t=T,r=[{key:"getLayers",value:function(e){var t=this.getKML(e),r=this.getWMS(e),n=this.getGeoTIFF(e),i=this.getMapLibre(e),o=this.getWFS(e),a=this.getOGCAPIFeatures(e),s=this.getWMTS(e),l=this.getMVT(e),u=this.getMBTiles(e),c=this.getMBTilesVector(e),f=this.getXYZs(e),h=this.getTMS(e),p=this.getUnknowLayers_(e);return t.concat(r).concat(n).concat(i).concat(o).concat(a).concat(s).concat(l).concat(u).concat(c).concat(f).concat(h).concat(p)}},{key:"getBaseLayers",value:function(){return this.layers_.filter((function(e){return!1===e.transparent}))}},{key:"addLayers",value:function(e){var t=this,r=e;return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length||r.forEach((function(e){e.type===c.WMS?t.facadeMap_.addWMS(e):e.type===c.WMTS?t.facadeMap_.addWMTS(e):e.type===c.KML?t.facadeMap_.addKML(e):e.type===c.WFS?t.facadeMap_.addWFS(e):e.type===c.GeoTIFF?t.facadeMap_.addGeoTIFF(e):e.type===c.OGCAPIFeatures?t.facadeMap_.addOGCAPIFeatures(e):e.type===c.MVT?t.facadeMap_.addMVT(e):e.type===c.MapLibre?t.facadeMap_.addMapLibre(e):"MBTiles"===e.type?t.facadeMap_.addMBTiles(e):"MBTilesVector"===e.type?t.facadeMap_.addMBTilesVector(e):e.type===c.XYZ?t.facadeMap_.addXYZ(e):e.type===c.TMS?t.facadeMap_.addTMS(e):c.know(e.type)||(t.addUnknowLayers_([e]),t.facadeMap_.addUnknowLayers_(e))})),this}},{key:"removeLayers",value:function(e){var t=e.filter((function(e){return!c.know(e.type)})),r=e.filter((function(e){return c.know(e.type)}));return r.length>0&&(this.removeKML(r),this.removeWMS(r),this.removeGeoTIFF(r),this.removeMapLibre(r),this.removeWFS(r),this.removeOGCAPIFeatures(r),this.removeWMTS(r),this.removeMVT(r),this.removeMBTiles(r),this.removeMBTilesVector(r),this.removeXYZ(r),this.removeTMS(r)),t.length>0&&this.removeUnknowLayers_(t),this.facadeMap_.fire(p.K6,[e]),this}},{key:"getKML",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return e.type===c.KML}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name),(0,_.Ew)(e.extract)||(n=n&&e.extract===r.extract)),n}));t=t.concat(r)}),this),t}},{key:"addKML",value:function(e){var t=this,r=this.getBaseLayers().length>0;return e.forEach((function(e){if(e.type===c.KML&&!(0,_.q9)(t.layers_,e)){if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),null==e.getZIndex()){var n=t.layers_.length+T.Z_INDEX[c.KML];e.setZIndex(n)}r||t.updateResolutionsFromBaseLayer()}}),this),this}},{key:"removeKML",value:function(e){var t=this;return this.getKML(e).forEach((function(e){t.layers_=t.layers_.filter((function(t){return!e.equals(t)})),e.getImpl().destroy(),e.fire(p.ED,[e])}),this),this}},{key:"getWMS",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return e.type===c.WMS}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:e instanceof h.Z?n=e===r:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name),(0,_.Ew)(e.legend)||(n=n&&e.legend===r.legend),(0,_.Ew)(e.isBase)||(n=n&&e.isBase===r.isBase),(0,_.Ew)(e.transparent)||(n=n&&e.transparent===r.transparent),(0,_.Ew)(e.tiled)||(n=n&&e.tiled===r.tiled),(0,_.Ew)(e.cql)||(n=n&&e.cql===r.cql),(0,_.Ew)(e.version)||(n=n&&e.version===r.version)),n}));t=t.concat(r)}),this),t}},{key:"addWMS",value:function(e){var t=this,r=this.getBaseLayers().length>0,n=[];return e.forEach((function(e){if(e.type===c.WMS&&!(0,_.q9)(t.layers_,e))if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),n.push(e),!1===e.transparent)e.setVisible(!r),r=!0,e.setZIndex(T.Z_INDEX_BASELAYER);else if(null==e.getZIndex()){var i=t.layers_.length+T.Z_INDEX[c.WMS];e.setZIndex(i)}})),(n.length>0&&!r||n.some((function(e){return!0!==e.transparent&&e.isVisible()})))&&this.updateResolutionsFromBaseLayer(),this}},{key:"removeWMS",value:function(e){var t=this;return this.getWMS(e).forEach((function(e){e.fire(p.ED,[e]),t.layers_=t.layers_.filter((function(t){return!e.equals(t)})),e.getImpl().destroy()})),this}},{key:"getGeoJSON",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return e.type===c.GeoJSON}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name),(0,_.Ew)(e.legend)||(n=n&&e.legend===r.legend)),n}));t=t.concat(r)})),t}},{key:"getWFS",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return e.type===c.WFS}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name),(0,_.Ew)(e.namespace)||(n=n&&e.namespace===r.namespace),(0,_.Ew)(e.legend)||(n=n&&e.legend===r.legend),(0,_.Ew)(e.cql)||(n=n&&e.cql===r.cql),(0,_.Ew)(e.geometry)||(n=n&&e.geometry===r.geometry),(0,_.Ew)(e.ids)||(n=n&&e.ids===r.ids),(0,_.Ew)(e.version)||(n=n&&e.version===r.version)),n}));t=t.concat(r)})),t}},{key:"addWFS",value:function(e){var t=this,r=this.getBaseLayers().length>0;return e.forEach((function(e){if(e.type===c.WFS&&!(0,_.q9)(t.layers_,e)){if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),e.setZIndex(e.getZIndex()),null==e.getZIndex()){var n=t.layers_.length+T.Z_INDEX[c.WFS];e.setZIndex(n)}r||t.updateResolutionsFromBaseLayer()}})),this}},{key:"removeWFS",value:function(e){var t=this;return this.getWFS(e).forEach((function(e){t.layers_=t.layers_.filter((function(t){return!t.equals(e)})),e.getImpl().destroy(),e.fire(p.ED,[e])})),this}},{key:"getGeoTIFF",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return e.type===c.GeoTIFF}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name),(0,_.Ew)(e.namespace)||(n=n&&e.namespace===r.namespace),(0,_.Ew)(e.legend)||(n=n&&e.legend===r.legend),(0,_.Ew)(e.cql)||(n=n&&e.cql===r.cql),(0,_.Ew)(e.geometry)||(n=n&&e.geometry===r.geometry),(0,_.Ew)(e.ids)||(n=n&&e.ids===r.ids),(0,_.Ew)(e.version)||(n=n&&e.version===r.version)),n}));t=t.concat(r)})),t}},{key:"addGeoTIFF",value:function(e){var t=this,r=this.getBaseLayers().length>0;return e.forEach((function(e){if(e.type===c.GeoTIFF&&!(0,_.q9)(t.layers_,e)){if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),e.setZIndex(e.getZIndex()),null==e.getZIndex()){var n=t.layers_.length+T.Z_INDEX[c.GeoTIFF];e.setZIndex(n)}r||t.updateResolutionsFromBaseLayer()}})),this}},{key:"removeGeoTIFF",value:function(e){var t=this;return this.getGeoTIFF(e).forEach((function(e){t.layers_=t.layers_.filter((function(t){return!t.equals(e)})),e.getImpl().destroy(),e.fire(p.ED,[e])})),this}},{key:"getOGCAPIFeatures",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return e.type===c.OGCAPIFeatures}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name),(0,_.Ew)(e.legend)||(n=n&&e.legend===r.legend),(0,_.Ew)(e.cql)||(n=n&&e.cql===r.cql),(0,_.Ew)(e.geometry)||(n=n&&e.geometry===r.geometry),(0,_.Ew)(e.id)||(n=n&&e.id===r.id)),n}));t=t.concat(r)})),t}},{key:"addOGCAPIFeatures",value:function(e){var t=this,r=this.getBaseLayers().length>0;return e.forEach((function(e){if(e.type===c.OGCAPIFeatures&&!(0,_.q9)(t.layers_,e)){if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),e.setZIndex(e.getZIndex()),null==e.getZIndex()){var n=t.layers_.length+T.Z_INDEX[c.OGCAPIFeatures];e.setZIndex(n)}r||t.updateResolutionsFromBaseLayer()}})),this}},{key:"removeOGCAPIFeatures",value:function(e){var t=this;return this.getOGCAPIFeatures(e).forEach((function(e){t.layers_=t.layers_.filter((function(t){return!t.equals(e)})),e.getImpl().destroy(),e.fire(p.ED,[e])})),this}},{key:"getWMTS",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return e.type===c.WMTS}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name),(0,_.Ew)(e.matrixSet)||(n=n&&e.matrixSet===r.matrixSet),(0,_.Ew)(e.legend)||(n=n&&e.legend===r.legend)),n}));t=t.concat(r)})),t}},{key:"addWMTS",value:function(e){var t=this,r=this.getBaseLayers().length>0;return e.forEach((function(e){if(e.type===c.WMTS&&!(0,_.q9)(t.layers_,e))if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),!1===e.transparent)e.setVisible(!r),r=!0,e.isVisible()&&t.updateResolutionsFromBaseLayer(),e.setZIndex(T.Z_INDEX_BASELAYER);else{if(null==e.getZIndex()){var n=t.layers_.length+T.Z_INDEX[c.WMTS];e.setZIndex(n)}r||t.updateResolutionsFromBaseLayer()}})),this}},{key:"removeWMTS",value:function(e){var t=this;return this.getWMTS(e).forEach((function(e){t.layers_=t.layers_.filter((function(t){return!t.equals(e)})),e.getImpl().destroy(),e.fire(p.ED,[e])})),this}},{key:"getMBTiles",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return"MBTiles"===e.type}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name),(0,_.Ew)(e.legend)||(n=n&&e.legend===r.legend)),n}));t=t.concat(r)})),t}},{key:"addMBTiles",value:function(e){var t=this,r=this.getBaseLayers().length>0,n=[];return e.forEach((function(e){if(e.type===c.MBTiles&&!(0,_.q9)(t.layers_,e))if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),n.push(e),!1===e.transparent)e.setVisible(!r),r=!0,e.setZIndex(T.Z_INDEX_BASELAYER);else if(null==e.getZIndex()){var i=t.layers_.length+T.Z_INDEX.MBTiles;e.setZIndex(i)}})),(n.length>0&&!r||n.some((function(e){return!0!==e.transparent&&e.isVisible()})))&&this.updateResolutionsFromBaseLayer(),this}},{key:"removeMBTiles",value:function(e){var t=this;return this.getMBTiles(e).forEach((function(e){t.layers_=t.layers_.filter((function(t){return!t.equals(e)})),e.getImpl().destroy(),e.fire(p.ED,[e])})),this}},{key:"getMBTilesVector",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return"MBTilesVector"===e.type}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name),(0,_.Ew)(e.legend)||(n=n&&e.legend===r.legend)),n}));t=t.concat(r)})),t}},{key:"addMBTilesVector",value:function(e){var t=this,r=this.getBaseLayers().length>0;return e.forEach((function(e){if(e.type===c.MBTilesVector&&!(0,_.q9)(t.layers_,e)){if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),e.setZIndex(e.getZIndex()),null==e.getZIndex()){var n=t.layers_.length+T.Z_INDEX.MBTilesVector;e.setZIndex(n)}r||t.updateResolutionsFromBaseLayer()}})),this}},{key:"removeMBTilesVector",value:function(e){var t=this;return this.getMBTilesVector(e).forEach((function(e){t.layers_=t.layers_.filter((function(t){return!t.equals(e)})),e.getImpl().destroy(),e.fire(p.ED,[e])})),this}},{key:"getUnknowLayers_",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return!c.know(e.type)}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:e instanceof d.Z?n=e.equals(r):((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.name)||(n=n&&e.name===r.name)),n}));t=t.concat(r)})),t}},{key:"addUnknowLayers_",value:function(e){var t=this,r=this.getBaseLayers().length>0;return e.forEach((function(e){if(!(0,_.q9)(t.layers_,e))if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),!1===e.transparent)e.setVisible(!r),r=!0,e.isVisible()&&t.updateResolutionsFromBaseLayer(),e.setZIndex(T.Z_INDEX_BASELAYER);else{if(e.setZIndex(e.getZIndex()),null==e.getZIndex()){var n=t.layers_.length+T.Z_INDEX[e.type];e.setZIndex(n)}r||t.updateResolutionsFromBaseLayer()}})),this}},{key:"removeUnknowLayers_",value:function(e){var t=this;e.forEach((function(e){if((0,_.q9)(t.layers_,e)&&(t.layers_=t.layers_.filter((function(t){return!t.equals(e)})),e.getImpl().destroy(),!1===e.transparent)){var r=t.facadeMap_.getBaseLayers();r.length>0&&r[0].setVisible(!0)}}))}},{key:"getMVT",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return e.type===c.MVT}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name)),n}));t=t.concat(r)})),t}},{key:"removeMVT",value:function(e){var t=this;return this.getMVT(e).forEach((function(e){t.layers_=t.layers_.filter((function(t){return!t.equals(e)})),e.getImpl().destroy(),e.fire(p.ED,[e])})),this}},{key:"addMVT",value:function(e){var t=this,r=this.getBaseLayers().length>0;return e.forEach((function(e){if(e.type===c.MVT&&!(0,_.q9)(t.layers_,e)){if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),e.setZIndex(e.getZIndex()),null==e.getZIndex()){var n=t.layers_.length+T.Z_INDEX[c.MVT];e.setZIndex(n)}r||t.updateResolutionsFromBaseLayer()}})),this}},{key:"getMapLibre",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return e.type===c.MapLibre}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name)),n}));t=t.concat(r)})),t}},{key:"removeMapLibre",value:function(e){var t=this;return this.getMapLibre(e).forEach((function(e){t.layers_=t.layers_.filter((function(t){return!t.equals(e)})),e.getImpl().destroy(),e.fire(p.ED,[e])})),this}},{key:"addMapLibre",value:function(e){var t=this;return e.forEach((function(e){if(e.type===c.MapLibre&&!(0,_.q9)(t.layers_,e))if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),!0===e.transparent){var r=t.layers_.length+T.Z_INDEX[c.MapLibre];e.setZIndex(r)}else e.setZIndex(0)})),this}},{key:"getXYZs",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return e.type===c.XYZ}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name)),n}));t=t.concat(r)})),t}},{key:"addXYZ",value:function(e){var t=this;return e.forEach((function(e){if(e.type===c.XYZ&&!(0,_.q9)(t.layers_,e))if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),!0===e.transparent){var r=t.layers_.length+T.Z_INDEX[c.XYZ];e.setZIndex(r)}else e.setZIndex(0)})),this}},{key:"removeXYZ",value:function(e){var t=this;return this.getXYZs(e).forEach((function(e){e.getImpl().destroy(),t.layers_=t.layers_.filter((function(t){return!t.equals(e)})),e.fire(p.ED,[e])})),this}},{key:"getTMS",value:function(e){var t=[],r=e,n=this.layers_.filter((function(e){return e.type===c.TMS}));return(0,_.Ew)(r)&&(r=[]),(0,_.kJ)(r)||(r=[r]),0===r.length?t=n:r.forEach((function(e){var r=n.filter((function(r){var n=!0;return t.includes(r)?n=!1:((0,_.Ew)(e.type)||(n=n&&e.type===r.type),(0,_.Ew)(e.url)||(n=n&&e.url===r.url),(0,_.Ew)(e.name)||(n=n&&e.name===r.name)),n}));t=t.concat(r)})),t}},{key:"addTMS",value:function(e){var t=this;return e.forEach((function(e){if(e.type===c.TMS&&!(0,_.q9)(t.layers_,e))if(e.getImpl().addTo(t.facadeMap_),t.layers_.push(e),!0===e.transparent){var r=t.layers_.length+T.Z_INDEX[c.TMS];e.setZIndex(r)}else e.setZIndex(0)})),this}},{key:"removeTMS",value:function(e){var t=this;return this.getTMS(e).forEach((function(e){e.getImpl().destroy(),t.layers_=t.layers_.filter((function(t){return!t.equals(e)})),e.fire(p.ED,[e])})),this}},{key:"getControls",value:function(e){var t=e,r=[],n=this.facadeMap_.getPanels().map((function(e){return e.getControls()}));n.length>0&&(n=n.reduce((function(e,t){return e.concat(t)})));var i=this.controls_.concat(n);(0,_.Ew)(t)&&(t=[]),(0,_.kJ)(t)||(t=[t]),0===t.length?r=i:t.forEach((function(e){r=r.concat(i.filter((function(t){var n=!1;return(0,_.q9)(r,t)||((0,_.HD)(e)?n=e===t.name:e instanceof f.Z?n=e===t:(0,_.Kn)(e)&&(n=e.name===t.name)),n})))}));var o=[];return r.forEach((function(e){o.map((function(e){return e.name})).includes(e.name)||o.push(e)})),o}},{key:"addControls",value:function(e){var t=this;return e.forEach((function(e){e instanceof u.Z&&t.facadeMap_.addControls(M.config.controls.default.split(",")),(0,_.q9)(t.controls_,e)||t.controls_.push(e)})),this}},{key:"removeControls",value:function(e){var t=this;return this.getControls(e).forEach((function(e){e.destroy(),t.controls_=t.controls_.filter((function(t){var r=t.constructor===e.constructor;return(0,_.Ew)(t.equals)||(r=!t.equals(e)),r}))})),this}},{key:"setMaxExtent",value:function(e,t){var r=e;(0,_.Ew)(r)||(0,_.kJ)(r)||!(0,_.Kn)(r)||(r=[e.x.min,e.y.min,e.x.max,e.y.max]);var n=this.getMapImpl(),i=n.getView(),o=new b.Z(O(O({},i),{},{extent:e}));return n.setView(o),this.updateResolutionsFromBaseLayer(),(0,_.Ew)(r)||!1===t||this.setBbox(r),this}},{key:"getMaxExtent",value:function(){var e=this.getMapImpl().getView().get("extent");return(0,_.Ew)(e)?this.envolvedMaxExtent_:{x:{min:e[0],max:e[2]},y:{min:e[1],max:e[3]}}}},{key:"getCapabilities",value:(E=S().mark((function e(t,r,n){var i,a,s,l,u,c,f,h,p;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t,a=r,s=this.getProjection(),l="WMS"===n?(0,_.sE)(i,a):(0,_.BP)(i,a),e.next=6,(0,m.U2)(l);case 6:if(u=e.sent,c=u.xml,f="WMS"===n?new w.Z:new o.Z,"WMS"!==n){e.next=15;break}return e.next=12,f.customRead(c);case 12:e.t0=e.sent,e.next=18;break;case 15:return e.next=17,f.read(c);case 17:e.t0=e.sent;case 18:if(h=e.t0,"WMS"!==n){e.next=26;break}return e.next=22,new A.Z(h,i,s);case 22:p=e.sent,this.getCapabilitiesPromise=p,e.next=28;break;case 26:try{h.Contents.Layer.forEach((function(e){var t=e.Identifier;e.Style.forEach((function(e){var r=u.text.split("Layer>").filter((function(e){return e.indexOf("Identifier>".concat(t,"<"))>-1}))[0];e.LegendURL=r.split("LegendURL")[1].split('xlink:href="')[1].split('"')[0]}))}))}catch(e){}this.getCapabilitiesPromise=h;case 28:return e.abrupt("return",this.getCapabilitiesPromise);case 29:case"end":return e.stop()}}),e,this)})),I=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=E.apply(e,t);function o(e){C(i,r,n,o,a,"next",e)}function a(e){C(i,r,n,o,a,"throw",e)}o(void 0)}))},function(e,t,r){return I.apply(this,arguments)})},{key:"setBbox",value:function(e,t){var r;return(0,_.Ew)(e)&&(0,y.Z)((0,g.NA)("exception").no_bbox),this.userBbox_=e,(0,_.kJ)(e)?r=e:(0,_.Kn)(e)&&(r=[e.x.min,e.y.min,e.x.max,e.y.max]),this.getMapImpl().getView().fit(r,t),this}},{key:"getBbox",value:function(){var e=null,t=this.getMapImpl(),r=t.getView();if(!(0,_.Ew)(r.getCenter())){var n=r.calculateExtent(t.getSize());(0,_.Ew)(n)||(e={x:{min:n[0],max:n[2]},y:{min:n[1],max:n[3]}})}return e}},{key:"setZoom",value:function(e){return(0,_.Ew)(e)&&(0,y.Z)((0,g.NA)("exception").no_zoom),this.getMapImpl().getView().setUserZoom(e),this}},{key:"setMinZoom",value:function(e){return(0,_.Ew)(e)&&(0,y.Z)((0,g.NA)("exception").no_zoom),this.getMapImpl().getView().setMinZoom(e),this}},{key:"setMaxZoom",value:function(e){return(0,_.Ew)(e)&&(0,y.Z)((0,g.NA)("exception").no_zoom),this.getMapImpl().getView().setMaxZoom(e),this}},{key:"getZoom",value:function(){var e=null,t=this.getMapImpl().getView(),r=t.getResolution(),n=this.getResolutions();if((0,_.Ew)(n))(0,_.Ew)(r)||(e=t.getZoomForResolution(r));else for(var i=0,o=n.length;i<o;i+=1)if(n[i]<=r){e=i;break}return e}},{key:"getMinZoom",value:function(){var e;return this.getMapImpl()&&this.getMapImpl().getView()&&(e=this.getMapImpl().getView().getMinZoom()),e}},{key:"getMaxZoom",value:function(){var e;return this.getMapImpl()&&this.getMapImpl().getView()&&(e=this.getMapImpl().getView().getMaxZoom()),e}},{key:"setCenter",value:function(e){(0,_.Ew)(e)&&(0,y.Z)((0,g.NA)("exception").no_center);var t=[e.x,e.y],r=this.getMapImpl().getView(),n=r.getCenter();return(0,_.Ew)(n)||this.getMapImpl().getView().animate({duration:250,source:n}),r.setCenter(t),this}},{key:"getCenter",value:function(){var e=null,t=this.getMapImpl().getView().getCenter();return(0,_.Ew)(t)||(e={x:t[0],y:t[1]}),e}},{key:"setZoomConstrains",value:function(e){return(0,_.Ew)(e)&&(0,y.Z)((0,g.NA)("exception").no_zoomConstrains),this.getMapImpl().getView().setConstrainResolution(e),this}},{key:"getZoomConstrains",value:function(){return this.getMapImpl().getView().getConstrainResolution()}},{key:"getResolutions",value:function(){return this.getMapImpl().getView().getResolutions()}},{key:"setResolutions",value:function(e,t){(0,_.Ew)(e)&&(0,y.Z)((0,g.NA)("exception").no_resolutions),(0,_.Ew)(t)&&(this.userResolutions_=e);var r,n=(0,i.U2)(this.getProjection().code),o=this.getMapImpl(),a=o.getView().getProperties(),s=o.getView().getUserZoom(),l=o.getView().getMinZoom(),u=o.getView().getMaxZoom(),c=o.getSize(),f=new b.Z(O(O({},this.objectView),{},{projection:n}));if(void 0!==this.viewExtent&&4===this.viewExtent.length&&(f=new b.Z(O(O({},this.objectView),{},{projection:n,extent:this.viewExtent}))),f.setProperties(a),f.setResolutions(e),f.setUserZoom(s),f.setMinZoom(l),f.setMaxZoom(u),(0,_.Ew)(s)){var h=this.facadeMap_.getBbox();if(!(0,_.Ew)(h)){var p=f.getResolutionForExtent([h.x.min,h.y.min,h.x.max,h.y.max],c),d=e.map((function(e){return Math.abs(e-p)})),m=d.indexOf(Math.min.apply(Math,x(d)));r=e[m]}}else r=e[s];return f.setResolution(r),o.setView(f),this.getWMS().forEach((function(t){t.getImpl().setResolutions(e)})),this}},{key:"getScale",value:function(){var e=this.getMapImpl().getView().getResolution(),t=this.getProjection().units,r=(0,_.qu)(e,t);return(0,_.Ew)(r)||(r=r>=1e3&&r<=95e4?1e3*Math.round(r/1e3):r>=95e4?1e6*Math.round(r/1e6):Math.round(r)),r}},{key:"getExactScale",value:function(){var e=this.getMapImpl().getView().getResolution(),t=this.getProjection().units,r=(0,_.qu)(e,t);return Math.trunc(r)}},{key:"setProjection",value:function(e){(0,_.Ew)(e)&&(0,y.Z)((0,g.NA)("exception").no_projection);var t=(0,i.U2)(e.code);(0,_.Ew)(t)&&(t=new a.Z(e));var r=(0,i.U2)(this.getProjection().code),n=this.facadeMap_.getMaxExtent(),o=this.facadeMap_.getResolutions(),s=this.getMapImpl(),l=s.getView().getProperties(),u=s.getView().getResolution(),c=s.getView().getUserZoom(),f=s.getView().getMinZoom(),h=s.getView().getMaxZoom(),d=new b.Z(O(O({},this.objectView),{},{projection:t}));void 0!==this.viewExtent&&4===this.viewExtent.length&&(d=new b.Z(O(O({},this.objectView),{},{projection:t,extent:this.viewExtent}))),d.setProperties(l),(0,_.Ew)(o)||d.setResolutions(o),(0,_.Ew)(u)||d.setResolution(u),d.setUserZoom(c),d.setMinZoom(f),d.setMaxZoom(h),s.setView(d),this.facadeMap_.getWMS().forEach((function(t){t.updateMinMaxResolution(e)})),(0,_.Ew)(n)||((0,_.kJ)(n)||(n=[n.x.min,n.y.min,n.x.max,n.y.max]),this.setBbox(v.Z.transformExtent(n,r,t),!1)),this.updateResolutionsFromBaseLayer();var m=this.facadeMap_.getPopup();if(!(0,_.Ew)(m)){var A=m.getCoordinate();(0,_.Ew)(A)||(A=(0,i.vs)(A,r,t),m.setCoordinate(A))}var w=this.facadeMap_.getLabel();if(!(0,_.Ew)(w)){var E=w.getCoordinate();(0,_.Ew)(E)||(E=(0,i.vs)(E,r,t),w.setCoordinate(E))}return this.fire(p.Ve),this}},{key:"getProjection",value:function(){var e=this.getMapImpl().getView().getProjection(),t=null;return(0,_.Ew)(e)||(t={code:e.getCode(),units:e.getUnits(),getExtent:function(){return e.getExtent()}}),t}},{key:"getMapImpl",value:function(){return this.map_}},{key:"removePopup",value:function(e){if(!(0,_.Ew)(e)){var t=e.getImpl();this.getMapImpl().removeOverlay(t)}return this}},{key:"destroy",value:function(){this.layers_.length=0,this.controls_.length=0,this.popup_=null,this.options_=null,this.map_.setTarget(null),this.map_=null}},{key:"updateResolutionsFromBaseLayer",value:function(){this.fire(p.Qc),this.refresh()}},{key:"addLabel",value:function(e){return this.label=e,e.show(this.facadeMap_),this}},{key:"getLabel",value:function(){return this.label}},{key:"removeLabel",value:function(){if(!(0,_.Ew)(this.label)){var e=this.label.getPopup();this.removePopup(e),this.label=null}}},{key:"refresh",value:function(){return this.map_.updateSize(),this}},{key:"getContainer",value:function(){return this.map_.getOverlayContainerStopEvent()}},{key:"setFacadeMap",value:function(e){this.facadeMap_=e}},{key:"registerEvents_",value:function(){this.map_.on("moveend",this.zoomEvent_.bind(this))}},{key:"zoomEvent_",value:function(){this.currentZoom!==this.getZoom()&&(this.facadeMap_.fire(p.l8,this.facadeMap_),this.currentZoom=this.getZoom())}},{key:"onMapClick_",value:function(e){var t=e.pixel,r=this.map_.getCoordinateFromPixel(t),n=this.facadeMap_.getLabel();(0,_.Ew)(n)||n.hide(),this.facadeMap_.fire(p.ot,[{pixel:t,coord:r,vendor:e}])}},{key:"onMapMove_",value:function(e){var t=e.pixel,r=this.map_.getCoordinateFromPixel(t);this.facadeMap_.fire(p.tP,[{pixel:t,coord:r,vendor:e}])}},{key:"onMapMoveMouse_",value:function(e){var t=e.pixel,r=this.map_.getCoordinateFromPixel(t);this.facadeMap_.fire(p.Yn,[{pixel:t,coord:r,vendor:e}])}}],r&&k(t.prototype,r),l&&k(t,l),Object.defineProperty(t,"prototype",{writable:!1}),T}(l.Z);F.Z_INDEX={},F.Z_INDEX_BASELAYER=0,F.Z_INDEX[c.OSM]=40,F.Z_INDEX[c.WMS]=40,F.Z_INDEX[c.WMTS]=40,F.Z_INDEX[c.KML]=40,F.Z_INDEX[c.WFS]=40,F.Z_INDEX[c.MVT]=40,F.Z_INDEX[c.Vector]=40,F.Z_INDEX[c.GeoJSON]=40,F.Z_INDEX[c.GeoTIFF]=40,F.Z_INDEX[c.MapLibre]=40,F.Z_INDEX[c.MBTiles]=40,F.Z_INDEX[c.MBTilesVector]=40,F.Z_INDEX[c.XYZ]=40,F.Z_INDEX[c.TMS]=40,F.Z_INDEX[c.OGCAPIFeatures]=40,F.Z_INDEX[c.GenericVector]=40,F.Z_INDEX[c.GenericRaster]=40;const N=F},28640:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(6015),i=r(40398),o=r(60894),a=r(2808);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,s=c(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=s.call(this,{})).panMapIfOutOfView=t.panMapIfOutOfView,void 0===e.panMapIfOutOfView&&(e.panMapIfOutOfView=!0),e.ani_opts=t.ani_opts,void 0===e.ani_opts&&(e.ani_opts={duration:250}),e.facadeMap_=null,e.cachedAniPixel_=null,e}return t=f,(r=[{key:"addTo",value:function(e,t){this.facadeMap_=e,this.container=t,this.content=this.getContentFromContainer(t),(0,i.Sg)(this.content),this.setElement(this.container),e.getMapImpl().addOverlay(this)}},{key:"show",value:function(e,t){return this.setPosition(e),this.panMapIfOutOfView&&this.panIntoView(e),this.content.scrollTop=0,(0,i.mf)(t)&&t(),this}},{key:"centerByStatus",value:function(e,t){var r=this.getMap().getView().getResolution(),n=[].concat(t);if(e===o.Z.status.COLLAPSED)n[1]-=.1*a.Z.HEIGHT*r;else{if(e!==o.Z.status.DEFAULT)return;n[1]-=.275*a.Z.HEIGHT*r}var s=this.facadeMap_.getFeatureCenter();this.facadeMap_.setCenter({x:n[0],y:n[1]}),(0,i.Ew)(s)||this.facadeMap_.drawFeatures([s])}},{key:"getContentFromContainer",value:function(e){return e.querySelector("div.m-body")}},{key:"panIntoView",value:function(e){var t=this;return this.panIntoSynchronizedAnim_().then((function(){t.isAnimating_=!0;var r=t.element.querySelector(".m-popup"),n=r.clientWidth+20,o=r.clientHeight+20+30,a=t.getMap().getSize(),s=t.getMap().getView().getCenter(),l=n-60,u=t.getOffset(),c=t.getMap().getPixelFromCoordinate(e);if(!(0,i.Ew)(c)){var f=c[0]-60,h=a[0]-(c[0]+l),p=c[1]-(o+u[1]),d=a[1]-(c[1]+20)-u[1],y=t.getMap().getPixelFromCoordinate(s),g=y.slice();h<0?g[0]-=h:f<0&&(g[0]+=f),p<0?g[1]+=p:d<0&&(g[1]-=d),!(0,i.Ew)(t.ani_opts)&&(0,i.Ew)(t.ani_opts.source)&&(t.ani_opts.source=s,t.getMap().getView().animate(t.ani_opts)),g[0]===y[0]&&g[1]===y[1]||t.getMap().getView().setCenter(t.getMap().getCoordinateFromPixel(g))}t.isAnimating_=!1})),this.getMap().getView().getCenter()}},{key:"panIntoSynchronizedAnim_",value:function(){var e=this;return new Promise((function(t,r){if(!0===e.isAnimating_){var n=300;(0,i.Ew)(e.ani_opts)||(n=e.ani_opts.duration),setTimeout(t,n)}else t()}))}},{key:"hide",value:function(){this.facadeMap_.removePopup()}},{key:"setContainer",value:function(e){this.setElement(e),this.content=this.getContentFromContainer(e),(0,i.Sg)(this.content)}},{key:"getContent",value:function(){return this.content}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},62513:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(40398);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}const u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(u,e);var t,r,i,l=s(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).userZoom_=null,t}return t=u,(r=[{key:"setUserZoom",value:function(e){this.userZoom_=e,(0,n.Ew)(e)||this.setZoom(e)}},{key:"getUserZoom",value:function(){return this.userZoom_}},{key:"setProjection",value:function(e){this.projection_=e}},{key:"getResolutions",value:function(){return this.get("resolutions")}},{key:"setResolutions",value:function(e){this.set("resolutions",e),this.maxResolution_=e[0],this.minResolution_=e[e.length-1],this.applyOptions_({minZoom:this.minZoom_,resolutions:e,zoomFactor:this.zoomFactor_,minResolution:this.minResolution_,maxResolution:this.maxResolution_,projection:this.projection_,center:this.getCenter()}),(0,n.Ew)(this.userZoom_)||this.setZoom(this.userZoom_)}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),u}(r(92922).ZP)},66149:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(62953);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},a.apply(this,arguments)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(f,e);var t,r,i,c=l(f);function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=c.call(this)).map_=null,e}return t=f,(r=[{key:"addTo",value:function(e,t){var r=this;e.getMapImpl().getInteractions().forEach((function(e){e instanceof n.Z&&(r.dblClickInteraction_=e)})),a(u(f.prototype),"addTo",this).call(this,e,t)}},{key:"registerEvent",value:function(e,t,r){t.getMapImpl().on(e,r)}},{key:"destroy",value:function(){a(u(f.prototype),"destroy",this).call(this)}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),f}(r(39645).Z)},39645:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this,{})).facadeMap_=null,e}return t=l,(r=[{key:"addTo",value:function(e,t){this.facadeMap_=e,this.element=t,e.getMapImpl().addControl(this)}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"getElement",value:function(){return this.element}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(r(17160).Z)},1597:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(67033),i=r(82428),o=r(20632),a=r(60138),s=r(24871),l=r(83473),u=r(92690),c=r.n(u),f=r(96512),h=r.n(f),p=r(60894),d=r(54414),y=r(391),g=r(40398),m=r(2532);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===_(o)?o:String(o)),n)}var i,o}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(_,e);var t,r,u,f=I(_);function _(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(r=f.call(this)).userFormats=["text/html","text/plain","application/vnd.ogc.gml"],r.featureCount=t.featureCount,(0,g.Ew)(r.featureCount)&&(r.featureCount=10),r.buffer=t.buffer||5,r.element=document.createElement("div"),r.activated=e,r.currentFormat=0,r}return t=_,u=[{key:"insert",value:function(e,t){var r=!1;switch(t){case"text/html":var i=document.createElement("div");i.innerHTML=e;var o="";Array.prototype.forEach.call(i.querySelectorAll("body"),(function(e){o+=e.innerHTML.trim()})),Array.prototype.forEach.call(i.querySelectorAll("div"),(function(e){o+=e.innerHTML.trim()})),Array.prototype.forEach.call(i.querySelectorAll("table"),(function(e){o+=e.innerHTML.trim()})),Array.prototype.forEach.call(i.querySelectorAll("b"),(function(e){o+=e.innerHTML.trim()})),Array.prototype.forEach.call(i.querySelectorAll("span"),(function(e){o+=e.innerHTML.trim()})),Array.prototype.forEach.call(i.querySelectorAll("input"),(function(e){o+=e.innerHTML.trim()})),Array.prototype.forEach.call(i.querySelectorAll("a"),(function(e){o+=e.innerHTML.trim()})),Array.prototype.forEach.call(i.querySelectorAll("img"),(function(e){o+=e.innerHTML.trim()})),Array.prototype.forEach.call(i.querySelectorAll("p"),(function(e){o+=e.innerHTML.trim()})),Array.prototype.forEach.call(i.querySelectorAll("ul"),(function(e){o+=e.innerHTML.trim()})),Array.prototype.forEach.call(i.querySelectorAll("li"),(function(e){o+=e.innerHTML.trim()})),o.length>0&&!/WMS\s+server\s+error/i.test(e)&&(r=!0);break;case"application/vnd.ogc.gml":r=(new n.Z).readFeatures(e).length>0;break;case"text/plain":/returned\s+no\s+results/i.test(e)||/features\s+were\s+found/i.test(e)||/:$/i.test(e)||(r=!0)}return r}},{key:"unsupportedFormat",value:function(e,t){var r=!1;return"text/html"===t&&(r=_.regExs.msUnsupportedFormat.test(e)),r}}],(r=[{key:"addTo",value:function(e,t){!1===e.getMapImpl().getControls().getArray().some((function(e){return e instanceof _}))&&(this.facadeMap_=e,e.getMapImpl().addControl(this),this.addOnClickEvent_())}},{key:"deleteOnClickEvent_",value:function(){(0,i.B)(this.clickEventKey_)}},{key:"addOnClickEvent_",value:function(){var e=this,t=this.facadeMap_.getMapImpl();!0===this.activated&&(this.clickEventKey_=t.on("singleclick",(function(t){return e.buildUrl_(l,t)})))}},{key:"buildUrl_",value:function(e,t){this.evt=t;var r=this.facadeMap_.getMapImpl(),n=A(this.buildGenericInfoURL(),2),i=n[0],o=n[1],a=this.buildWMSInfoURL([].concat(v(this.facadeMap_.getWMS()),v(o))),s=this.buildWMTSInfoURL([].concat(v(this.facadeMap_.getWMTS()),v(i))),l=[].concat(v(s),v(a)).filter((function(e){return!(0,g.Ew)(e)}));l.length>0?this.showInfoFromURL_(l,t.coordinate,r):e.info("No existen capas consultables")}},{key:"buildGenericInfoURL",value:function(){var e=this.facadeMap_.getLayers().filter((function(e){return"GenericRaster"===e.type})),t=[],r=[];return e.forEach((function(e){e.getImpl().getOL3Layer().getSource()instanceof o.Z?t.push(e):(e.getImpl().getOL3Layer().getSource()instanceof a.Z||e.getImpl().getOL3Layer().getSource()instanceof s.Z)&&r.push(e)})),[t,r]}},{key:"buildWMSInfoURL",value:function(e){var t=this,r=this.facadeMap_.getMapImpl().getView().getResolution(),n=this.facadeMap_.getProjection().code;return e.map((function(e){var i,o=e.getImpl().getOL3Layer();if(e.isVisible()&&e.isQueryable()&&!(0,g.Ew)(o)){i={};var a={INFO_FORMAT:t.userFormats[t.currentFormat],FEATURE_COUNT:t.featureCount},s=o.getSource(),l=t.evt.coordinate;/buffer/i.test(e.url)||(a.BUFFER=t.buffer);var u=s.getFeatureInfoUrl(l,r,n,a);i={layer:e.legend||e.name,url:u}}return i}))}},{key:"buildWMTSInfoURL",value:function(e){var t=this;return e.map((function(e){var r;if(e.isVisible()&&e.isQueryable()){r={};var n=t.userFormats[t.currentFormat],i=t.evt.coordinate,o=e.getFeatureInfoUrl(i,t.facadeMap_.getZoom(),n);r={layer:e.legend||e.name,url:o}}return r}))}},{key:"formatInfo",value:function(e,t,r){var i=null;switch(t){case"text/html":i=e;break;case"application/vnd.ogc.gml":var o=(new n.Z).readFeatures(e);i="",o.forEach((function(e){var t=e.getKeys();i+="<div class='divinfo'>",i+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>' ".concat((0,g.Hx)(r)," '</td></tr>'");for(var n=0,o=t.length;n<o;n+=1){var a=t[n],s=e.get(a);i+='<tr><td class="key"><b>',i+=(0,g.Hx)(a),i+='</b></td><td class="value">',i+=s,i+="</td></tr>"}i+="</tbody></table></div>"}));break;case"text/plain":i=_.regExs.gsResponse.test(e)?this.txtToHtmlGeoserver(e,r):this.txtToHtmlMapserver(e,r)}return i}},{key:"txtToHtmlGeoserver",value:function(e,t){var r=e,n=(r=(r=r.replace(/[\w\s\S]*':/i,"")).replace(/---(-*)(n+)---(-*)/g,"#newfeature#")).split("\n"),i="<div class='divinfo'>";i+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat((0,g.Hx)(t),"</td></tr>");for(var o=0,a=n.length;o<a;o+=1){var s=n[o].trim();if(-1!==s.indexOf("=")){var l=s.split("="),u=l[0].trim(),c="-";l.length>1&&(0!==(c=l[1].trim()).length&&"null"!==c||(c="-")),!1===_.regExs.gsGeometry.test(u)&&(i+='<tr><td class="key"><b>',i+=(0,g.Hx)(u),i+='</b></td><td class="value">',i+=c,i+="</td></tr>")}else _.regExs.gsNewFeature.test(s)&&(i+='<tr><td class="header" colspan="3">'.concat((0,g.Hx)(t),"</td></tr>"))}return i+="</tbody></table></div>"}},{key:"txtToHtmlMapserver",value:function(e){for(var t=e,r=(t=t.replace(/[\w\s\S]*(layer)/i,"$1")).replace(/layer(\s*)'(\w+)'[\w\s\S]*/i,"$2"),n=(t=(t=(t=(t=t.replace(/layer(\s*)'(\w+)'([\w\s\S]*)/i,"$3")).replace(/feature(\s*)(\w*)(\s*)(:)([\w\s\S]*)/i,"$5")).replace(/'/g,"")).replace(/=/g,";")).split("\n"),i="",o="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat((0,g.Hx)(r),"</td></tr>"),a=0,s=n.length;a<s;a+=1){var l=n[a].trim(),u=n[a]?n[a].trim():"",c=l.split(";"),f=c[0].trim(),h="-";c.length>1&&0===(h=c[1].trim()).length&&(h="-"),f.length>0&&(_.regExs.msNewFeature.test(f)?u.length>0&&!_.regExs.msNewFeature.test(u)&&(i+="<tr><td class='header' colspan='3'>".concat((0,g.Hx)(r),"</td><td></td></tr>")):(i+='<tr><td class="key"><b>',i+=(0,g.Hx)(f),i+='</b></td><td class="value">',i+=h,i+="</td></tr>"))}return i.length>0&&(i="".concat(o+i,"</tbody></table>")),i}},{key:"showInfoFromURL_",value:function(e,t,r){var n=this,i=(0,y.Mp)(c(),{vars:{info:_.LOADING_MESSAGE},parseToHtml:!1}),o=[],a=this.userFormats[this.currentFormat],s=0,u={icon:"g-cartografia-info",title:_.POPUP_TITLE,content:i},f=this.facadeMap_.getPopup();(0,g.Ew)(f)?((f=new p.Z).addTab(u),this.facadeMap_.addPopup(f,t)):f.getTabs().some((function(e){return e.title!==_.POPUP_TITLE}))?f.addTab(u):(this.facadeMap_.removePopup(),(f=new p.Z).addTab(u),this.facadeMap_.addPopup(f,t)),e.forEach((function(t){var r=t.url,i=t.layer;(0,d.U2)(r).then((function(t){if(f=n.facadeMap_.getPopup(),200===t.code&&!1===t.error){var r=t.text;if(!0===_.insert(r,a)){var c=n.formatInfo(r,a,i);o.push({formatedInfo:c,layerName:i})}else if(_.unsupportedFormat(r,a)){if(!(n.currentFormat>2))return n.currentFormat+=1,void n.buildUrl_(l,n.evt);o.push({formatedInfo:(0,m.NA)("getfeatureinfo").any_format,layerName:i})}}if(s+=1,e.length===s&&!(0,g.Ew)(f))if(f.removeTab(u),0===o.length)f.addTab({icon:"g-cartografia-info",title:_.POPUP_TITLE,content:(0,m.NA)("getfeatureinfo").no_info});else{var p=(0,y.Mp)(h(),{vars:{layers:o,info_of:(0,m.NA)("getfeatureinfo").info_of},parseToHtml:!1}).replace(/(.*)(<a href=.*)(>.*<\/a.*)/g,'$1$2 target="_blank"$3');f.addTab({icon:"g-cartografia-info",title:_.POPUP_TITLE,content:p,listeners:[{selector:".m-getfeatureinfo-content-info div.m-arrow-right",all:!0,type:"click",callback:function(e){return n.toogleSection(e)}}]})}}))})),this.popup_=f}},{key:"toogleSection",value:function(e){var t=e.target,r=t.parentElement.parentElement.querySelector(".m-getfeatureinfo-content-info-body");if(r.classList.contains("m-content-collapsed")){r.classList.remove("m-content-collapsed"),t.classList.remove("m-arrow-right"),t.classList.add("m-arrow-down");var n=this.popup_.getCoordinate();(0,g.Ew)(this.popup_.getImpl().panIntoView)||this.popup_.getImpl().panIntoView(n)}else r.classList.add("m-content-collapsed"),t.classList.add("m-arrow-right"),t.classList.remove("m-arrow-down")}}])&&E(t.prototype,r),u&&E(t,u),Object.defineProperty(t,"prototype",{writable:!1}),_}(r(39645).Z);C.LOADING_MESSAGE="Obteniendo información...",C.POPUP_TITLE=(0,m.NA)("getfeatureinfo").info,C.regExs={gsResponse:/^results[\w\s\S]*'http:/i,msNewFeature:/feature(\s*)(\w+)(\s*):/i,gsNewFeature:/#newfeature#/,gsGeometry:/geom$/i,msGeometry:/boundedby$/i,msUnsupportedFormat:/error(.*)unsupported(.*)info_format/i};const P=C},94531:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(40398),i=r(27811),o=r(44993),a=r(72742),s=r(61900),l=r(78456),u=r(87908),c=r(53969),f=r(17774),h=r(39645),p=r(94551);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===d(o)?o:String(o)),n)}var i,o}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},g.apply(this,arguments)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(c,e);var t,r,l,u=_(c);function c(e,t,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(i=u.call(this,n)).vendorOptions_=n,i.geolocation_=null,i.accuracyFeature_=p.Z.olFeature2Facade(new o.Z),i.tracking_=e,i.highAccuracy_=t,i.maximumAge_=r,i.activated_=!1,i.positionFeature_=p.Z.olFeature2Facade(new o.Z({style:c.POSITION_STYLE})),i}return t=c,(r=[{key:"activate",value:function(){var e=this;if(this.element.classList.add("m-locating"),(0,n.Ew)(this.geolocation_)){var t=(0,i.U2)(this.facadeMap_.getProjection().code);this.geolocation_=new a.Z((0,n.l7)({projection:t,tracking:this.tracking_,trackingOptions:{enableHighAccuracy:this.highAccuracy_,maximumAge:this.maximumAge_}},this.vendorOptions_,!0)),this.geolocation_.on("change:accuracyGeometry",(function(t){var r=t.target.get(t.key);e.accuracyFeature_.getImpl().getOLFeature().setGeometry(r)})),this.geolocation_.once("change:position",(function(t){var r=t.target.get(t.key),i=(0,n.Ew)(r)?null:new s.Z(r);e.positionFeature_.getImpl().getOLFeature().setGeometry(i),e.facadeMap_.setCenter(r),e.element.classList.contains("m-locating")&&e.facadeMap_.setZoom(c.ZOOM),e.element.classList.remove("m-locating"),e.element.classList.add("m-located"),e.geolocation_.setTracking(e.tracking_)}))}this.geolocation_.setTracking(!0),this.facadeMap_.drawFeatures([this.accuracyFeature_])}},{key:"removePositions_",value:function(){(0,n.Ew)(this.accuracyFeature_)||this.facadeMap_.removeFeatures([this.accuracyFeature_]),(0,n.Ew)(this.positionFeature_)||this.facadeMap_.removeFeatures([this.positionFeature_]),this.geolocation_.setTracking(!1)}},{key:"deactivate",value:function(){this.removePositions_(),this.element.classList.remove("m-located"),this.element.classList.remove("m-locating"),this.geolocation_=null}},{key:"setTracking",value:function(e){this.tracking_=e,this.geolocation_.setTracking(e)}},{key:"destroy",value:function(){this.removePositions_(),g(v(c.prototype),"destroy",this).call(this)}}])&&y(t.prototype,r),l&&y(t,l),Object.defineProperty(t,"prototype",{writable:!1}),c}(h.Z);A.POSITION_STYLE=new l.ZP({image:new u.Z({radius:6,fill:new c.Z({color:"#3399CC"}),stroke:new f.Z({color:"#fff",width:2})})}),A.ZOOM=16;const b=A},63997:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,e)).facadeMap_=null,t}return t=l,(r=[{key:"addTo",value:function(e,t){this.facadeMap_=e,e.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(r(94432).Z)},67719:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(40398);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}const u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(u,e);var t,r,i,l=s(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,(0,n.l7)({},e,!0))).facadeMap_=null,t}return t=u,(r=[{key:"addTo",value:function(e,t){this.facadeMap_=e,e.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),u}(r(86206).Z)},50006:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},o.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}r.d(t,{Z:()=>c});var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,r,n,u=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=u.call(this,e)).facadeMap_=null,t}return t=c,(r=[{key:"addTo",value:function(e,t){var r=this;o(l(c.prototype),"addTo",this).call(this,e,t);var n=e.getMapImpl();this.panel=t,this.panel.querySelector("button").addEventListener("click",(function(){n.getView().setRotation(0)})),this.addRotationEvent(n),n.on("change:view",(function(e){r.addRotationEvent(e.target)}))}},{key:"addRotationEvent",value:function(e){var t=this;e.getView().on("change:rotation",(function(e){var r=e.target.getRotation(),n="rotate(".concat(360*r/(2*Math.PI),"deg)");t.panel.querySelector("button").style.transform=n}))}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(r(39645).Z);u.PANEL_ID="m-layerswitcher-panel";const c=u},23546:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p,m:()=>h});var n=r(40398),i=r(9220),o=r(39645);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},l.apply(this,arguments)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")};const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(p,e);var t,r,o,a=c(p);function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(e=a.call(this)).facadeMap_=null,e.exactScale=t.exactScale||!1,e}return t=p,(r=[{key:"addTo",value:function(e,t){this.facadeMap_=e,this.scaleContainer_=t.querySelector("#".concat("m-scale-span")),this.element=t,this.render=this.renderCB,this.target_=null,e.getMapImpl().addControl(this)}},{key:"renderCB",value:function(e){var t=e.frameState;(0,n.Ew)(t)||function(e,t,r,o){var a,s=t;r.getWMTS().length>0||r.getWMTS().length<=0&&!0===o?a=i.Z.getWMTSScale(r,o):r.getWMTS().length<=0&&1==!o&&(a=r.getScale()),(0,n.Ew)(a)||(s.innerHTML=h(a));var l=document.querySelector("#m-level-number");null!==l&&(l.innerHTML=Math.round(r.getZoom(),2))}(t.viewState,this.scaleContainer_,this.facadeMap_,this.exactScale)}},{key:"destroy",value:function(){l(f(p.prototype),"destroy",this).call(this),this.scaleContainer_=null}}])&&s(t.prototype,r),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),p}(o.Z)},32391:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(87853),i=r(27811),o=r(97972);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var f="units",h="degrees",p="imperial",d="nautical",y="metric",g="us",m=[1,2,5];const _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,r,n,a=u(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).facadeMap_=null,t}return t=c,(r=[{key:"addTo",value:function(e,t){this.facadeMap_=e,this.removeChangeListener(f,this.handleUnitsChanged),this.keyEvent_=this.addChangeListener(f,this.handleUnitsChanged),e.getMapImpl().addControl(this)}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"handleUnitsChanged_",value:function(){this.updateElement_()}},{key:"updateElement_",value:function(){var e=this.viewState_;if(e){var t=e.center,r=e.projection,n=this.getUnits(),a=n===h?"degrees":"m",s=(0,i._Q)(r,e.resolution,t,a);"degrees"!==r.getUnits()&&r.getMetersPerUnit()&&"m"===a&&(s*=r.getMetersPerUnit()),"d"===r.getUnits()&&(s/=12e4);var l=this.minWidth_*s,u="";if(n===h){var c=i.Wm.degrees;"degrees"===r.getUnits()?l*=c:s/=c,l<c/60?(u="″",s*=3600):l<c?(u="′",s*=60):u="°"}else n===p?l<.9144?(u="in",s/=.0254):l<1609.344?(u="ft",s/=.3048):(u="mi",s/=1609.344):n===d?(s/=1852,u="nm"):n===y?l<.001?(u="μm",s*=1e6):l<1?(u="mm",s*=1e3):l<1e3?u="m":(u="km",s/=1e3):n===g?l<.9144?(u="in",s*=39.37):l<1609.344?(u="ft",s/=.30480061):(u="mi",s/=1609.3472):(0,o.h)(!1,33);for(var f,_,v=3*Math.floor(Math.log(this.minWidth_*s)/Math.log(10));;){if(f=m[(v%3+3)%3]*Math.pow(10,Math.floor(v/3)),_=Math.round(f/s),Number.isNaN(_))return this.element.style.display="none",void(this.renderedVisible_=!1);if(_>=this.minWidth_)break;v+=1}var A=f.toString().concat(" ").concat(u);this.renderedHTML_!==A&&(this.innerElement_.innerHTML=A,this.renderedHTML_=A),this.renderedWidth_!==_&&(this.innerElement_.style.width=_.toString().concat("px"),this.renderedWidth_=_),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Z)},11297:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(53969),i=r(45907),o=r(22072);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,r,n,a=u(c);function c(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=document.createElement("canvas"),s=(Number(r.scale)>0?Number(r.scale):1)*i.MP||i.MP,l=n.getContext("2d");if(r.image){r.image.load();var u=r.image.getImage();u.width?(n.width=Math.round(u.width*s),n.height=Math.round(u.height*s),l.globalAlpha="number"==typeof r.opacity?r.opacity:1,l.drawImage(u,0,0,u.width,u.height,0,0,n.width,n.height),t=l.createPattern(n,"repeat")):(t=[0,0,0,0],u.onload=function(){n.width=Math.round(u.width*s),n.height=Math.round(u.height*s),l.globalAlpha="number"==typeof r.opacity?r.opacity:1,l.drawImage(u,0,0,u.width,u.height,0,0,n.width,n.height),t=l.createPattern(n,"repeat"),this.color_=t,this.checksum_=void 0,r.layer&&r.layer.refresh()})}else{var f=c.getPattern(r);if(n.width=Math.round(f.width*s),n.height=Math.round(f.height*s),l.beginPath(),r.fill&&(l.fillStyle=(0,o.XC)(r.fill.getColor()),l.fillRect(0,0,n.width,n.height)),l.scale(s,s),l.lineCap="round",l.lineWidth=f.stroke||1,l.fillStyle=(0,o.XC)(r.color||"#000"),l.strokeStyle=(0,o.XC)(r.color||"#000"),f.circles)for(var h=0;h<f.circles.length;h+=1){var p=f.circles[h];l.beginPath(),l.arc(p[0],p[1],p[2],0,2*Math.PI),f.fill&&l.fill(),f.stroke&&l.stroke()}if(f.repeat||(f.repeat=[[0,0]]),f.char&&(l.font=f.font||"".concat(f.width,"px Arial"),l.textAlign="center",l.textBaseline="middle",f.angle?(l.fillText(f.char,f.width/4,f.height/4),l.fillText(f.char,5*f.width/4,5*f.height/4),l.fillText(f.char,f.width/4,5*f.height/4),l.fillText(f.char,5*f.width/4,f.height/4),l.fillText(f.char,3*f.width/4,3*f.height/4),l.fillText(f.char,-f.width/4,-f.height/4),l.fillText(f.char,3*f.width/4,-f.height/4),l.fillText(f.char,-f.width/4,3*f.height/4)):l.fillText(f.char,f.width/2,f.height/2)),f.lines)for(var d=0;d<f.lines.length;d+=1)for(var y=0;y<f.repeat.length;y+=1){var g=f.lines[d];l.beginPath(),l.moveTo(g[0]+f.repeat[y][0],g[1]+f.repeat[y][1]);for(var m=2;m<g.length;m+=2)l.lineTo(g[m]+f.repeat[y][0],g[m+1]+f.repeat[y][1]);f.fill&&l.fill(),f.stroke&&l.stroke(),l.save(),l.strokeStyle="red",l.strokeWidth=.1,l.restore()}if(t=l.createPattern(n,"repeat"),r.offset){var _=r.offset;if("number"==typeof _&&(_=[_,_]),_ instanceof Array){var v=Math.round(_[0]*s),A=Math.round(_[1]*s);l.scale(1/s,1/s),l.clearRect(0,0,n.width,n.height),l.translate(v,A),l.fillStyle=t,l.fillRect(-v,-A,n.width,n.height),t=l.createPattern(n,"repeat")}}}return(e=a.call(this,{color:t})).canvas_=n,e.options_=r,e}return t=c,n=[{key:"getPattern",value:function(e){var t=e,r=c.patterns[t.pattern]||c.patterns.dot,n=Math.round(t.spacing)||10;switch(t.pattern){case"dot":case"circle":var i=0===t.size?0:t.size/2||2;t.angle?(n=Math.round(1.4*n),r.width=n,r.height=n,r.circles=[[n/4,n/4,i],[3*n/4,3*n/4,i]],"circle"===t.pattern&&(r.circles=r.circles.concat([[n/4+n,n/4,i],[n/4,n/4+n,i],[3*n/4-n,3*n/4,i],[3*n/4,3*n/4-n,i],[n/4+n,n/4+n,i],[3*n/4-n,3*n/4-n,i]]))):(r.width=n,r.height=n,r.circles=[[n/2,n/2,i]],"circle"===t.pattern&&(r.circles=r.circles.concat([[n/2+n,n/2,i],[n/2-n,n/2,i],[n/2,n/2+n,i],[n/2,n/2-n,i],[n/2+n,n/2+n,i],[n/2+n,n/2-n,i],[n/2-n,n/2+n,i],[n/2-n,n/2-n,i]])));break;case"tile":case"square":i=0===t.size?0:t.size/2||2,t.angle?(r.width=n,r.height=n,r.lines=[[n/2-i,n/2,n/2,n/2-i,n/2+i,n/2,n/2,n/2+i,n/2-i,n/2]]):(r.width=n,r.height=n,r.lines=[[n/2-i,n/2-i,n/2+i,n/2-i,n/2+i,n/2+i,n/2-i,n/2+i,n/2-i,n/2-i]]),"square"===t.pattern&&(r.repeat=[[0,0],[0,n],[n,0],[0,-n],[-n,0],[-n,-n],[n,n],[-n,n],[n,-n]]);break;case"cross":case"hatch":"cross"===t.pattern&&t.angle&&(t.angle=45);var o=Math.round(((t.angle||0)-90)%360);o>180&&(o-=360),o*=Math.PI/180;var a=Math.cos(o),s=Math.sin(o);if(Math.abs(s)<1e-4)r.width=n,r.height=n,r.lines=[[0,.5,n,.5]],r.repeat=[[0,0],[0,n]];else if(Math.abs(a)<1e-4)r.height=n,r.width=n,r.lines=[[.5,0,.5,n]],r.repeat=[[0,0],[n,0]],"cross"===t.pattern&&(r.lines.push([0,.5,n,.5]),r.repeat.push([0,n]));else{r.width=Math.round(Math.abs(n/s))||1,r.height=Math.round(Math.abs(n/a))||1;var l=r.width,u=r.height;"cross"===t.pattern?(r.lines=[[-l,-u,2*l,2*u],[2*l,-u,-l,2*u]],r.repeat=[[0,0]]):a*s>0?(r.lines=[[-l,-u,2*l,2*u]],r.repeat=[[0,0],[l,0],[0,u]]):(r.lines=[[2*l,-u,-l,2*u]],r.repeat=[[0,0],[-l,0],[0,u]])}r.stroke=0===t.size?0:t.size||4}return r}},{key:"addPattern",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.patterns[e||t.char]={width:t.width||t.size||10,height:t.height||t.size||10,font:t.font,char:t.char,circles:t.circles,lines:t.lines,repeat:t.repeat,stroke:t.stroke,angle:t.angle,fill:t.fill}}}],(r=[{key:"clone",value:function(){return new c(this.options_)}},{key:"getImage",value:function(){return this.canvas_}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Z);f.patterns={hatch:{width:5,height:5,lines:[[0,2.5,5,2.5]],stroke:1},cross:{width:7,height:7,lines:[[0,3,10,3],[3,0,3,10]],stroke:1},dot:{width:8,height:8,circles:[[5,5,2]],stroke:!1,fill:!0},circle:{width:10,height:10,circles:[[5,5,2]],stroke:1,fill:!1},square:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],stroke:1,fill:!1},tile:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],fill:!0},woven:{width:12,height:12,lines:[[3,3,9,9],[0,12,3,9],[9,3,12,0],[-1,1,1,-1],[13,11,11,13]],stroke:1},crosses:{width:8,height:8,lines:[[2,2,6,6],[2,6,6,2]],stroke:1},caps:{width:8,height:8,lines:[[2,6,4,2,6,6]],stroke:1},nylon:{width:20,height:20,lines:[[1,6,1,1,6,1],[6,11,11,11,11,6],[11,16,11,21,16,21],[16,11,21,11,21,16]],repeat:[[0,0],[-20,0],[0,-20]],stroke:1},hexagon:{width:20,height:12,lines:[[0,10,4,4,10,4,14,10,10,16,4,16,0,10]],stroke:1,repeat:[[0,0],[10,6],[10,-6],[-10,-6]]},cemetry:{width:15,height:19,lines:[[0,3.5,7,3.5],[3.5,0,3.5,10]],stroke:1,repeat:[[0,0],[7,9]]},sand:{width:20,height:20,circles:[[1,2,1],[9,3,1],[2,16,1],[7,8,1],[6,14,1],[4,19,1],[14,2,1],[12,10,1],[14,18,1],[18,8,1],[18,14,1]],fill:1},conglomerate:{width:30,height:20,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],stroke:1},gravel:{width:15,height:10,circles:[[4,2,1],[5,9,1],[1,7,1]],lines:[[7,5,6,6,7,7,8,7,9,7,10,5,9,4,7,5],[11,2,14,4,14,1,12,1,11,2]],stroke:1},brick:{width:18,height:16,lines:[[0,1,18,1],[0,10,18,10],[6,1,6,10],[12,10,12,18],[12,0,12,1]],stroke:1},dolomite:{width:20,height:16,lines:[[0,1,20,1],[0,9,20,9],[1,9,6,1],[11,9,14,16],[14,0,14.4,1]],stroke:1},coal:{width:20,height:16,lines:[[1,5,7,1,7,7],[11,10,12,5,18,9],[5,10,2,15,9,15],[15,16,15,13,20,16],[15,0,15,2,20,0]],fill:1},breccia:{width:20,height:16,lines:[[1,5,7,1,7,7,1,5],[11,10,12,5,18,9,11,10],[5,10,2,15,9,15,5,10],[15,16,15,13,22,18],[15,0,15,2,20,0]],stroke:1},clay:{width:20,height:20,lines:[[0,0,3,11,0,20],[11,0,10,3,13,13,11,20],[0,0,10,3,20,0],[0,12,3,11,13,13,20,12]],stroke:1},flooded:{width:15,height:10,lines:[[0,1,10,1],[0,6,5,6],[10,6,15,6]],stroke:1},chaos:{width:40,height:40,lines:[[40,2,40,0,38,0,40,2],[4,0,3,2,2,5,0,0,0,3,2,7,5,6,7,7,8,10,9,12,9,13,9,14,8,14,6,15,2,15,0,20,0,22,2,20,5,19,8,15,10,14,11,12.25,10,12,10,10,12,9,13,7,12,6,13,4,16,7,17,4,20,0,18,0,15,3,14,2,14,0,12,1,11,0,10,1,11,4,10,7,9,8,8,5,6,4,5,3,5,1,5,0,4,0],[7,1,7,3,8,3,8,2,7,1],[4,3,5,5,4,5,4,3],[34,5,33,7,38,10,38,8,36,5,34,5],[27,0,23,2,21,8,30,0,27,0],[25,8,26,12,26,16,22.71875,15.375,20,13,18,15,17,18,13,22,17,21,19,22,21,20,19,18,22,17,30,25,26,26,24,28,21.75,33.34375,20,36,18,40,20,40,24,37,25,32,27,31,26,38,27,37,30,32,32,35,36,37,38,40,38,39,40,40,37,36,34,32,37,31,36,29,33,27,34,24,39,21,40,21,40,16,37,20,31,22,32,25,27,20,29,15,30,20,32,20,34,18,33,12,31,11,29,14,26,9,25,8],[39,24,37,26,40,28,39,24],[13,15,9,19,14,18,13,15],[18,23,14,27,16,27,17,25,20,26,18,23],[6,24,2,26,1,28,2,30,5,28,12,30,16,32,18,30,15,30,12,28,9,25,7,27,6,24],[29,27,32,28,33,31,30,29,27,28,29,27],[5,35,1,33,3,36,13,38,15,35,10,36,5,35]],fill:1},grass:{width:27,height:22,lines:[[0,10.5,13,10.5],[2.5,10,1.5,7],[4.5,10,4.5,5,3.5,4],[7,10,7.5,6,8.5,3],[10,10,11,6]],repeat:[[0,0],[14,10]],stroke:1},swamp:{width:24,height:23,lines:[[0,10.5,9.5,10.5],[2.5,10,2.5,7],[4.5,10,4.5,4],[6.5,10,6.5,6],[3,12.5,7,12.5]],repeat:[[0,0],[14,10]],stroke:1},wave:{width:10,height:8,lines:[[0,0,5,4,10,0]],stroke:1},vine:{width:13,height:13,lines:[[3,0,3,6],[9,7,9,13]],stroke:1},forest:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],stroke:1},scrub:{width:26,height:20,lines:[[1,4,4,8,6,4]],circles:[[20,13,1.5]],stroke:1},tree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78]],repeat:[[3,1],[18,16]],stroke:1},pine:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49]],repeat:[[3,1],[18,16]],stroke:1},pines:{width:22,height:20,lines:[[1,4,3.5,1,6,4],[1,8,3.5,5,6,8],[3.5,1,3.5,11],[12,14.5,14.5,14,17,14.5],[12,18,17,18],[14.5,12,14.5,18]],repeat:[[2,1]],stroke:1},rock:{width:20,height:20,lines:[[1,0,1,9],[4,0,4,9],[7,0,7,9],[10,1,19,1],[10,4,19,4],[10,7,19,7],[0,11,9,11],[0,14,9,14],[0,17,9,17],[12,10,12,19],[15,10,15,19],[18,10,18,19]],repeat:[[.5,.5]],stroke:1},rocks:{width:20,height:20,lines:[[5,0,3,0,5,4,4,6,0,3,0,5,3,6,5,9,3.75,10,2.5,10,0,9,0,10,4,11,5,14,4,15,0,13,0,13,0,13,0,14,0,14,5,16,5,18,3,19,0,19,-.25,19.9375,5,20,10,19,10,20,11,20,12,19,14,20,15,20,17,19,20,20,20,19,19,16,20,15,20,11,20,10,19,8,20,5,20,0,19,0,20,2,19,4,17,4,16,3,15,0,14,0,15,4,11,5,10,4,11,0,10,0,9,4,6,5,5,0],[18,5,19,6,18,10,16,10,14,9,16,5,18,5],[5,6,9,5,10,6,10,9,6,10,5,6],[14,5,14,8,13,9,12,9,11,7,12,5,14,5],[5,11,8,10,9,11,10,14,6,15,6,15,5,11],[13,10,14,11,15,14,15,14,15,14,11,15,10,11,11,10,13,10],[15,12,16,11,19,11,19,15,16,14,16,14,15,12],[6,16,9,15,10,18,5,19,6,16],[10,16,14,16,14,18,13,19,11,18,10,16],[15,15,18,16,18,18,16,19,15,18,15,15]],stroke:1}};const h=f},15637:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(62356),i=r(22072);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,o=l(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var r=0;return t.stroke&&(r=t.stroke.getWidth()),e=o.call(this,{radius:t.radius,fill:t.fill,rotation:t.rotation,rotateWithView:t.rotateWithView}),"number"==typeof t.opacity&&e.setOpacity(t.opacity),e.color_=t.color,e.fontSize_=t.fontSize||1,e.stroke_=t.stroke,e.fill_=t.fill,e.radius_=t.radius-r,e.form_=t.form||"none",e.gradient_=t.gradient,e.offset_=[t.offsetX?t.offsetX:0,t.offsetY?t.offsetY:0],e.glyph_=e.getGlyph(t.glyph)||"",e.renderMaker(),e}return t=u,n=[{key:"addDefs",value:function(e,t){var r=e;if("string"==typeof e&&(r={font:e,name:e,copyright:""}),!r.font||"string"!=typeof r.font)throw new Error("bad font def");var n=r.font;u.defs.fonts[n]=r,Object.keys(t).forEach((function(e){var n=t[e];"string"==typeof n&&1===n.length&&(n={char:n}),u.defs.glyphs[e]={font:r.font,char:n.char||"".concat(String.fromCharCode(n.code))||"",theme:n.theme||r.name,name:n.name||e,search:n.search||""}}))}}],(r=[{key:"clone",value:function(){var e=new u({glyph:"",color:this.color_,fontSize:this.fontSize_,stroke:this.stroke_,fill:this.fill_,radius:this.radius_+(this.stroke_?this.stroke_.getWidth():0),form:this.form_,gradient:this.gradient_,offsetX:this.offset_[0],offsetY:this.offset_[1],opacity:this.getOpacity(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});return e.setScale(this.getScale()),e.setGlyph(this.getGlyph()),e.renderMaker(),e}},{key:"setGlyph",value:function(e){this.glyph_=e}},{key:"getFill",value:function(){return this.fill_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getGlyph",value:function(e){var t=this.glyph_;return e&&(t=(t=u.defs.glyphs[e])||{font:"none",char:e.charAt(0),theme:"none",name:"none",search:""}),t}},{key:"getGlyphName",value:function(){var e=this,t="";return Object.keys(u.defs.glyphs).forEach((function(r){u.defs.glyph[r]===e.glyph_&&(t=r)})),t}},{key:"getFontInfo",value:function(e){return u.defs.fonts[e.font]}},{key:"renderMaker",value:function(e){var t,r=0;this.stroke_&&(t=(0,i.XC)(this.stroke_.getColor()),r=this.stroke_.getWidth());var n=this.getImage(1),o={strokeStyle:t,strokeWidth:r,size:n.width},a=n.getContext("2d");a.clearRect(0,0,n.width,n.height),this.drawMarker_(o,a,0,0);var s=this.getAnchor();s[0]=n.width/2-this.offset_[0],s[1]=n.width/2-this.offset_[1]}},{key:"drawPath_",value:function(e,t){var r=t,n=2*this.radius_+e.strokeWidth+1,i=e.strokeWidth/2,o=e.size/2,a={fac:1,posX:e.size/2,posY:e.size/2};r.lineJoin="round",r.beginPath();var s=Math.PI;switch(this.form_){case"none":a.fac=1;break;case"circle":case"ban":r.arc(o,o,n/2,0,2*Math.PI,!0);break;case"poi":r.arc(o,o-.4*this.radius_,.6*this.radius_,.15*s,.85*s,!0),r.lineTo(o-.89*.05*n,(.95+.45*.05)*n+i),r.arc(o,.95*n+i,.05*n,.85*Math.PI,.15*Math.PI,!0),a={fac:.45,posX:o,posY:o-.35*this.radius_};break;case"bubble":r.arc(o,o-.2*this.radius_,.8*this.radius_,.4*s,.6*s,!0),r.lineTo(.5*n+i,n+i),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;case"marker":r.arc(o,o-.2*this.radius_,.8*this.radius_,.25*s,.75*s,!0),r.lineTo(.5*n+i,n+i),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;case"coma":r.moveTo(o+.8*this.radius_,o-.2*this.radius_),r.quadraticCurveTo(.95*n+i,.75*n+i,.5*n+i,n+i),r.arc(o,o-.2*this.radius_,.8*this.radius_,.45*s,0,!1),a={fac:.7,posX:o,posY:o-.2*this.radius_};break;default:var l;switch(this.form_){case"shield":l=[.05,0,.95,0,.95,.8,.5,1,.05,.8,.05,0],a.posY=.45*n+i;break;case"blazon":l=[.1,0,.9,0,.9,.8,.6,.8,.5,1,.4,.8,.1,.8,.1,0],a.fac=.8,a.posY=.4*n+i;break;case"bookmark":l=[.05,0,.95,0,.95,1,.5,.8,.05,1,.05,0],a.fac=.9,a.posY=.4*n+i;break;case"hexagon":l=[.05,.2,.5,0,.95,.2,.95,.8,.5,1,.05,.8,.05,.2],a.fac=.9,a.posY=.5*n+i;break;case"diamond":l=[.25,0,.75,0,1,.2,1,.4,.5,1,0,.4,0,.2,.25,0],a.fac=.75,a.posY=.35*n+i;break;case"triangle":l=[0,0,1,0,.5,1,0,0],a.fac=.6,a.posY=.3*n+i;break;case"sign":l=[.5,.05,1,.95,0,.95,.5,.05],a.fac=.7,a.posY=.65*n+i;break;case"lozenge":l=[.5,0,1,.5,.5,1,0,.5,.5,0],a.fac=.7;break;default:l=[0,0,1,0,1,1,0,1,0,0]}for(var u=0;u<l.length;u+=2)r.lineTo(l[u]*n+i,l[u+1]*n+i)}return r.closePath(),a}},{key:"drawMarker_",value:function(e,t,r,n){var o=t,a=this.fill_?this.fill_.getColor():"#000",s=this.stroke_?this.stroke_.getColor():"#000";"none"===this.form_&&this.stroke_&&this.fill_&&(s=this.fill_.getColor(),a=this.stroke_.getColor()),o.setTransform(1,0,0,1,0,0),o.translate(r,n);var l=this.drawPath_(e,o);if(this.fill_){if(this.gradient_&&"none"!==this.form_){var u=o.createLinearGradient(0,0,e.size/2,e.size);u.addColorStop(1,(0,i.XC)(a)),u.addColorStop(0,(0,i.XC)(s)),o.fillStyle=u}else o.fillStyle=(0,i.XC)(a);o.fill()}if(this.stroke_&&e.strokeWidth&&(o.strokeStyle=e.strokeStyle,o.lineWidth=e.strokeWidth,o.stroke()),this.glyph_.char){o.font="".concat(2*l.fac*this.radius_*this.fontSize_,"px ").concat(this.glyph_.font),o.strokeStyle=o.fillStyle,o.lineWidth=e.strokeWidth*("none"===this.form_?2:1),o.fillStyle=(0,i.XC)(this.color_||s),o.textAlign="center",o.textBaseline="middle";var c=this.glyph_.char;e.strokeWidth&&"transparent"!==s&&o.strokeText(c,l.posX,l.posY),o.fillText(c,l.posX,l.posY)}if("ban"===this.form_&&this.stroke_&&e.strokeWidth){o.strokeStyle=e.strokeStyle,o.lineWidth=e.strokeWidth;var f=this.radius_+e.strokeWidth,h=this.radius_*Math.cos(Math.PI/4);o.moveTo(f+h,f-h),o.lineTo(f-h,f+h),o.stroke()}}},{key:"getChecksum",value:function(){var e=null!==this.stroke_?this.stroke_.getChecksum():"-",t=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||e!==this.checksums_[1]||t!==this.checksums_[2]||this.radius_!==this.checksums_[3]||"".concat(this.form_,"-").concat(this.glyphs_!==this.checksums_[4])){var r="c"+e+t+(void 0!==this.radius_?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[r,e,t,this.radius_,"".concat(this.form_,"-").concat(this.glyphs_)]}return this.checksums_[0]}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Z);c.defs={fonts:{},glyphs:{}},c.addDefs({font:"g-cartografia",name:"g-cartografia",prefix:"g-cartografia-"},{"g-cartografia-spinner":{font:"g-cartografia",code:59663,name:"spinner",search:"spinner"},"g-cartografia-posicion3":{font:"g-cartografia",code:59661,name:"posicion3",search:"posicion3"},"g-cartografia-brujula-norte":{font:"g-cartografia",code:59648,name:"brujula-norte",search:"brujula-norte"},"g-cartografia-capas2":{font:"g-cartografia",code:59649,name:"capas2",search:"capas2"},"g-cartografia-comentarios":{font:"g-cartografia",code:59650,name:"comentarios",search:"comentarios"},"g-cartografia-escala3":{font:"g-cartografia",code:59651,name:"escala3",search:"escala3"},"g-cartografia-flecha":{font:"g-cartografia",code:59652,name:"flecha",search:"flecha"},"g-cartografia-flecha-abajo":{font:"g-cartografia",code:59653,name:"flecha-abajo",search:"flecha-abajo"},"g-cartografia-flecha-arriba":{font:"g-cartografia",code:59654,name:"flecha-arriba",search:"flecha-arriba"},"g-cartografia-flecha-derecha":{font:"g-cartografia",code:59655,name:"flecha-derecha",search:"flecha-derecha"},"g-cartografia-flecha-izquierda":{font:"g-cartografia",code:59656,name:"flecha-izquierda",search:"flecha-izquierda"},"g-cartografia-gps2":{font:"g-cartografia",code:59657,name:"gps2",search:"gps2"},"g-cartografia-info":{font:"g-cartografia",code:59658,name:"info",search:"info"},"g-cartografia-papelera":{font:"g-cartografia",code:59659,name:"papelera",search:"papelera"},"g-cartografia-pin":{font:"g-cartografia",code:59660,name:"pin",search:"pin"},"g-cartografia-zoom-extension":{font:"g-cartografia",code:59662,name:"zoom-extension",search:"zoom-extension"}});const f=c},63039:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(45907),i=r(17774),o=r(22072),a=r(11297);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},u.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,r)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(d,e);var t,r,i,s=f(d);function d(){var e,t,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),e=s.call(this,i);var a=document.createElement("canvas");e.canvas_=document.createElement("canvas");var l=(Number(i.scale)>0?Number(i.scale):1)*n.MP||n.MP,u=a.getContext("2d");if(i.image){i.image.load();var c=i.image.getImage();if(c.width)a.width=Math.round(c.width*l),a.height=Math.round(c.height*l),u.globalAlpha="number"==typeof i.opacity?i.opacity:1,u.drawImage(c,0,0,c.width,c.height,0,0,a.width,a.height),t=u.createPattern(a,"repeat");else{var f=h(e);t=[0,0,0,0],c.onload=function(){a.width=Math.round(c.width*l),a.height=Math.round(c.height*l),u.globalAlpha="number"==typeof i.opacity?i.opacity:1,u.drawImage(c,0,0,c.width,c.height,0,0,a.width,a.height),t=u.createPattern(a,"repeat"),f.setColor(t),i.layer&&i.layer.refresh()}}}else{var p=e.getPattern_(i);if(a.width=Math.round(p.width*l),a.height=Math.round(p.height*l),u.beginPath(),i.fill&&(u.fillStyle=(0,o.XC)(i.fill.getColor()),u.fillRect(0,0,a.width,a.height)),u.scale(l,l),u.lineCap="round",u.lineWidth=p.stroke||1,u.fillStyle=(0,o.XC)(i.color||"#000"),u.strokeStyle=(0,o.XC)(i.color||"#000"),p.circles)for(r=0;r<p.circles.length;r+=1){var y=p.circles[r];u.beginPath(),u.arc(y[0],y[1],y[2],0,2*Math.PI),p.fill&&u.fill(),p.stroke&&u.stroke()}if(p.repeat||(p.repeat=[[0,0]]),p.char&&(u.font="".concat(p.font||p.width," px Arial"),u.textAlign="center",u.textBaseline="middle",p.angle?(u.fillText(p.char,p.width/4,p.height/4),u.fillText(p.char,5*p.width/4,5*p.height/4),u.fillText(p.char,p.width/4,5*p.height/4),u.fillText(p.char,5*p.width/4,p.height/4),u.fillText(p.char,3*p.width/4,3*p.height/4),u.fillText(p.char,-p.width/4,-p.height/4),u.fillText(p.char,3*p.width/4,-p.height/4),u.fillText(p.char,-p.width/4,3*p.height/4)):u.fillText(p.char,p.width/2,p.height/2)),p.lines)for(r=0;r<p.lines.length;r+=1)for(var g=0;g<p.repeat.length;g+=1){var m=p.lines[r];u.beginPath(),u.moveTo(m[0]+p.repeat[g][0],m[1]+p.repeat[g][1]);for(var _=2;_<m.length;_+=2)u.lineTo(m[_]+p.repeat[g][0],m[_+1]+p.repeat[g][1]);p.fill&&u.fill(),p.stroke&&u.stroke(),u.save(),u.strokeStyle="red",u.strokeWidth=.1,u.restore()}if(t=u.createPattern(a,"repeat"),i.offset){var v=i.offset;if("number"==typeof v&&(v=[v,v]),v instanceof Array){var A=Math.round(v[0]*l),b=Math.round(v[1]*l);u.scale(1/l,1/l),u.clearRect(0,0,a.width,a.height),u.translate(A,b),u.fillStyle=t,u.fillRect(-A,-b,a.width,a.height),t=u.createPattern(a,"repeat")}}}return e.setColor(t),e}return t=d,(r=[{key:"clone",value:function(){var e=u(p(d.prototype),"clone",this).call(this);return e.canvas_=this.canvas_,e}},{key:"getImage",value:function(){return this.canvas_}},{key:"getPattern_",value:function(e){var t,r=a.Z.patterns[e.pattern]||a.Z.patterns.dot,n=Math.round(e.spacing)||10;switch(e.pattern){case"dot":case"circle":t=0===e.size?0:e.size/2||2,e.angle?(n=Math.round(1.4*n),r.width=Math.round(1.4*n),r.height=Math.round(1.4*n),r.circles=[[n/4,n/4,t],[3*n/4,3*n/4,t]],"circle"===e.pattern&&(r.circles=r.circles.concat([[n/4+n,n/4,t],[n/4,n/4+n,t],[3*n/4-n,3*n/4,t],[3*n/4,3*n/4-n,t],[n/4+n,n/4+n,t],[3*n/4-n,3*n/4-n,t]]))):(r.width=n,r.height=n,r.circles=[[n/2,n/2,t]],"circle"===e.pattern&&(r.circles=r.circles.concat([[n/2+n,n/2,t],[n/2-n,n/2,t],[n/2,n/2+n,t],[n/2,n/2-n,t],[n/2+n,n/2+n,t],[n/2+n,n/2-n,t],[n/2-n,n/2+n,t],[n/2-n,n/2-n,t]])));break;case"tile":case"square":t=0===e.size?0:e.size/2||2,e.angle?(r.width=n,r.height=n,r.lines=[[n/2-t,n/2,n/2,n/2-t,n/2+t,n/2,n/2,n/2+t,n/2-t,n/2]]):(r.width=n,r.height=n,r.lines=[[n/2-t,n/2-t,n/2+t,n/2-t,n/2+t,n/2+t,n/2-t,n/2+t,n/2-t,n/2-t]]),"square"===e.pattern&&(r.repeat=[[0,0],[0,n],[n,0],[0,-n],[-n,0],[-n,-n],[n,n],[-n,n],[n,-n]]);break;case"cross":e.angle&&(e.angle=45);case"hatch":var i=Math.round(((e.angle||0)-90)%360);i>180&&(i-=360),i*=Math.PI/180;var o=Math.cos(i),s=Math.sin(i);if(Math.abs(s)<1e-4)r.width=n,r.height=n,r.lines=[[0,.5,n,.5]],r.repeat=[[0,0],[0,n]];else if(Math.abs(o)<1e-4)r.width=n,r.height=n,r.lines=[[.5,0,.5,n]],r.repeat=[[0,0],[n,0]],"cross"===e.pattern&&(r.lines.push([0,.5,n,.5]),r.repeat.push([0,n]));else{var l=Math.round(Math.abs(n/s))||1;r.width=Math.round(Math.abs(n/s))||1;var u=Math.round(Math.abs(n/o))||1;r.height=Math.round(Math.abs(n/o))||1,"cross"===e.pattern?(r.lines=[[-l,-u,2*l,2*u],[2*l,-u,-l,2*u]],r.repeat=[[0,0]]):o*s>0?(r.lines=[[-l,-u,2*l,2*u]],r.repeat=[[0,0],[l,0],[0,u]]):(r.lines=[[2*l,-u,-l,2*u]],r.repeat=[[0,0],[-l,0],[0,u]])}r.stroke=0===e.size?0:e.size||4}return r}}])&&l(t.prototype,r),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.Z)},94551:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(81517),i=r(40398),o=r(21815),a=r(61900),s=r(36818),l=r(48843),u=r(38815),c=r(92882),f=r(70278),h=r(44133),p=r(44993),d=r(87162),y=r(9220);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===g(o)?o:String(o)),n)}var i,o}const _=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=r;this.facadeFeature_=null,this.formatter_=new d.Z,(0,i.Ew)(r)?this.olFeature_=new p.Z:((0,i.Ew)(r.type)&&(o.type="Feature"),this.olFeature_=this.formatter_.readFeature(o)),(0,i.Ew)(t)?(0,i.Ew)(this.olFeature_.getId())&&this.olFeature_.setId((0,i.cL)("mapea_feature_")):this.olFeature_.setId(t)}var t,r,g;return t=e,g=[{key:"olFeature2Facade",value:function(e,t){var r=null;return(0,i.Ew)(e)||(r=new n.Z).getImpl().setOLFeature(e,t),r}},{key:"olRenderFeature2Facade",value:function(t,r,n){var i=y.Z.olRenderFeature2olFeature(t,r,n);return e.olFeature2Facade(i)}},{key:"facade2OLFeature",value:function(e){return e.getImpl().getOLFeature()}},{key:"getGeometry",value:function(e){var t,r=e.geometry.type;return"circle"===r?t=new s.Z(e.geometry.coordinates):"geometry"===r?t=new o.Z(e.geometry.coordinates):"linestring"===r?t=new u.Z(e.geometry.coordinates):"multilinestring"===r?t=new f.Z(e.geometry.coordinates):"multipoint"===r?t=new l.Z(e.geometry.coordinates):"multipolygon"===r?t=new h.Z(e.geometry.coordinates):"point"===r?t=new a.Z(e.geometry.coordinates):"polygon"===r&&(t=new c.ZP(e.geometry.coordinates)),t}}],(r=[{key:"getOLFeature",value:function(){return this.olFeature_}},{key:"setOLFeature",value:function(e,t){(0,i.Ew)(e)||(this.olFeature_=e,!1!==t&&(0,i.Ew)(this.olFeature_.getId())&&this.olFeature_.setId((0,i.cL)("mapea_feature_")))}},{key:"getAttributes",value:function(){var e=this.olFeature_.getProperties(),t=e.geometry;return!(0,i.Ew)(t)&&t instanceof o.Z&&delete e.geometry,e}},{key:"getId",value:function(){return this.olFeature_.getId()}},{key:"setId",value:function(e){this.olFeature_.setId(e)}},{key:"setAttributes",value:function(e){this.olFeature_.setProperties(e)}},{key:"getAttribute",value:function(e){return this.olFeature_.get(e)}},{key:"setAttribute",value:function(e,t){return this.olFeature_.set(e,t)}},{key:"setGeometry",value:function(e){var t=e.type.toLowerCase();"circle"===t?this.olFeature_.setGeometry(new s.Z(e.coordinates)):"geometry"===t?this.olFeature_.setGeometry(new o.Z(e.coordinates)):"linestring"===t?this.olFeature_.setGeometry(new u.Z(e.coordinates)):"multilinestring"===t?this.olFeature_.setGeometry(new f.Z(e.coordinates)):"multipoint"===t?this.olFeature_.setGeometry(new l.Z(e.coordinates)):"multipolygon"===t?this.olFeature_.setGeometry(new h.Z(e.coordinates)):"point"===t?this.olFeature_.setGeometry(new a.Z(e.coordinates)):"polygon"===t&&this.olFeature_.setGeometry(new c.ZP(e.coordinates))}},{key:"setFacadeObj",value:function(e){this.facadeFeature_=e}},{key:"getCentroid",value:function(){var t,r=this.getOLFeature().getGeometry(),n=y.Z.getCentroid(r);if(!(0,i.Ew)(n)){var o=new a.Z;o.setCoordinates(n),t=new p.Z({geometry:o,name:"centroid"})}return t=t||e.olFeature2Facade(t)}},{key:"clearStyle",value:function(){this.olFeature_.setStyle(null)}}])&&m(t.prototype,r),g&&m(t,g),Object.defineProperty(t,"prototype",{writable:!1}),e}()},77707:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(45686),i=r(40398);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}const s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.olFeature_=null}var t,r,o;return t=e,o=[{key:"olFeature2Facade",value:function(e,t){var r=null;return(0,i.Ew)(e)||(r=new n.Z).getImpl().setOLFeature(e),r}},{key:"facade2OLFeature",value:function(e){return e.getImpl().getOLFeature()}}],(r=[{key:"getOLFeature",value:function(){return this.olFeature_}},{key:"getType",value:function(){return this.getOLFeature().getType()}},{key:"setOLFeature",value:function(e){(0,i.Ew)(e)||(this.olFeature_=e)}},{key:"getAttributes",value:function(){return this.olFeature_.getProperties()}},{key:"getAttribute",value:function(e){return this.olFeature_.get(e)}},{key:"setFacadeObj",value:function(e){this.facadeFeature_=e}},{key:"getCentroid",value:function(){}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},4833:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(17275),i=r(96903),o=r(22386),a=r(40398),s=r(27811),l=r(94551);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}const f=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.projection=t,this.olFormatVersionGML_=this.returnFormatOl_(r)}var t,r,u;return t=e,(r=[{key:"read",value:function(e,t){var r=this,n=t.code;return(0,a.Ew)(n)&&(n=(0,a.Ew)(t.featureProjection)?(0,s.U2)(t.getCode()):(0,s.U2)(t.featureProjection.getCode())),this.olFormatVersionGML_.readFeatures(e).map((function(e){var t=e.getId(),i=l.Z.olFeature2Facade(e);if(i.setId(t),null!==i.getGeometry()){var o=i.getImpl().getOLFeature().getGeometry().transform(r.projection.code,n);i.getImpl().getOLFeature().setGeometry(o)}return i}))}},{key:"returnFormatOl_",value:function(e){var t=e.replaceAll('"',"");return"text/xml; subtype=gml/3.1.1"===t?new n.Z:"text/xml; subtype=gml/2.1.2"===t?new i.Z:"text/xml; subtype=gml/3.2.1"===t?new o.Z:"gml3"===t?new n.Z:"gml32"===t?new o.Z:"GML2"===t?new i.Z:new n.Z}}])&&c(t.prototype,r),u&&c(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},87162:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(40398),i=r(81517),o=r(34795),a=r(27811),s=r(78456),l=r(52076);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},f.apply(this,arguments)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(y,e);var t,r,o,u=p(y);function y(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(e=u.call(this,t)).mapProj=t.featureProjection,e}return t=y,o=[{key:"readProjectionFromObject",value:function(e){var t,r=e.crs;if(r)if("name"===r.type)t=(0,a.U2)(r.properties.name);else{if("EPSG"!==r.type)throw t=null,new Error("Unknown crs.type: ".concat(r.type));t=(0,a.U2)("EPSG:".concat(r.properties.code))}else t="EPSG:4326";return t}},{key:"applyIcon",value:function(e,t){var r,n=document.createElement("IMG");n.src=t.url,n.width=t.width,n.height=t.height,n.crossOrigin="anonymous",t.anchor&&t.anchor.x&&t.anchor.y&&(r=[t.anchor.x,t.anchor.y]),e.setStyle(new s.ZP({image:new l.Z({img:n,imgSize:[t.width,t.height],anchor:r})}))}}],(r=[{key:"readFeatureFromObject",value:function(e,t){var r=e,i=f(d(y.prototype),"readFeatureFromObject",this).call(this,r,t);return this.geometryName_&&i.setGeometryName(this.geometryName_),(0,n.Ew)(r.id)?i.setId((0,n.cL)("geojson_")):i.setId(r.id),r.properties&&i.setProperties(r.properties),r.click&&(i.click=r.click),r.properties&&r.properties.vendor&&r.properties.vendor.mapea&&r.properties.vendor.mapea.icon&&y.applyIcon(i,r.properties.vendor.mapea.icon),i}},{key:"writeFeatureObject",value:function(e,t){var r=t,i={type:"Feature"},o=e.getId();o&&(i.id=o);var a=e.getGeometry();i.geometry=a?f(d(y.prototype),"writeGeometryObject",this).call(this,a,r):null;var s=e.getProperties();return delete s[e.getGeometryName()],(0,n.Ew)(s)?i.properties=null:i.properties=s,(0,n.Ew)(e.click)||(i.click=e.click),i}},{key:"write",value:function(e){var t=this;return e.map((function(e){return t.writeFeatureObject(e.getImpl().getOLFeature())}))}},{key:"read",value:function(e,t,r){var o=r.code;(0,n.Ew)(o)&&(o=(0,n.Ew)(r.featureProjection)?(0,a.U2)(r.getCode()):(0,a.U2)(r.featureProjection.getCode()));var s=y.readProjectionFromObject(e);return t.map((function(e){var t=e.id,r=new i.Z(t,e),n=r.getImpl().getOLFeature();if(null!==n.getGeometry()){var a=n.getGeometry().transform(s,o);n.setGeometry(a)}return r}))}}])&&c(t.prototype,r),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),y}(o.Z)},73008:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(42188),i=r(40398),o=r(43950),a=r(52076);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,o,s=c(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=s.call(this,{showPointNames:t.label,extractStyles:t.extractStyles})).screenOverlay_=null,e}return t=f,(r=[{key:"readCustomFeatures",value:function(e,t){var r=this.readFeatures(e,t).map((function(e){var t=e.getStyle();if(!(0,i.Ew)(t)){var r=t(e);Array.isArray(r)||(r=[r]),r.forEach((function(e){if(e.getImage()instanceof a.Z){var t=e.getImage();e.setImage(t)}}))}return e.set("name",(0,i.m9)(e.get("name"))),e}));return this.readScreenOverlay(e),r}},{key:"readScreenOverlay",value:function(e){var t="xunits",r="yunits",i=(0,n.Qc)(e).querySelector("ScreenOverlay");if(null!==i){var o,s,l,u,c,h,p=i.querySelector("Icon"),d=null!==p?p.querySelector("href").innerHTML:f.DEFAULT_NO_IMAGE_STYLE,y=i.querySelector("overlayXY");null!==y&&(o=[parseFloat(y.getAttribute("x")),parseFloat(y.getAttribute("y"))],s=y.getAttribute(t),l=y.getAttribute(r));var g,m,_,v=i.querySelector("screenXY");null!==v?(u=[parseFloat(v.getAttribute("x")),parseFloat(v.getAttribute("y"))],c=v.getAttribute(t),h=v.getAttribute(r)):d===f.DEFAULT_IMAGE_STYLE_SRC?(u=f.DEFAULT_IMAGE_STYLE_ANCHOR,c=f.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,h=f.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(d)&&(u=[.5,0],c=a.Z.FRACTION,h=a.Z.FRACTION);var A,b,w,E=i.querySelector("rotationXY");if(null!==E){var x=parseFloat(E.getAttribute("x"));g=Math.PI/180*x,m=E.getAttribute(t),_=E.getAttribute(r)}var I=i.querySelector("size");null!==I&&(A=[parseFloat(I.getAttribute("x")),parseFloat(I.getAttribute("y"))],b=I.getAttribute(t),w=I.getAttribute(r)),this.screenOverlay_={screenXY:u,screenXUnits:c,screenYUnits:h,overlayXY:o,overlayXUnits:s,overlayYUnits:l,rotationXY:g,rotationXUnits:m,rotationYUnits:_,size:A,sizeXUnits:b,sizeYUnits:w,src:d}}}},{key:"getScreenOverlay",value:function(){return this.screenOverlay_}}])&&l(t.prototype,r),o&&l(t,o),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.ZP);h.DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",h.DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",h.DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],h.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",h.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels";const p=h},6155:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(68079),i=r(64317),o=r(27811),a=r(94551),s=r(87162);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var g=function(e){return{dataProjection:(0,o.U2)(e.dataProjection),featureProjection:(0,o.U2)(e.featureProjection)}};const m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(l,e);var t,r,n,o=d(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=o.call(this,t)).gjFormat_=new s.Z,e.formatter_=new i.Z(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({splitCollection:!0},t)),e}return t=l,r=[{key:"getFormatter",value:function(){return this.formatter_}},{key:"read",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=g(t),n=t.id,i=this.formatter_.readFeatureFromText(e,r),o=a.Z.olFeature2Facade(i);return null!=n&&o.setId(n),o}},{key:"readCollection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=g(t),n=t.ids,i=this.formatter_.readFeaturesFromText(e,r).map((function(e){return a.Z.olFeature2Facade(e)}));return null!=n&&n.length===i.length&&i.forEach((function(e,t){return e.setId(n[t])})),i}},{key:"write",value:function(e){var t=g(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),r=a.Z.facade2OLFeature(e);return this.formatter_.writeFeatureText(r,t)}},{key:"writeFeature",value:function(e){var t=this.gjFormat_.readGeometryFromObject(e);if("point"===t.getType().toLowerCase()){var r=t.getCoordinates();t.setCoordinates([r[0],r[1]])}return this.formatter_.writeGeometryText(t)}},{key:"writeCollection",value:function(e){var t=g(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),r=e.map((function(e){return a.Z.facade2OLFeature(e)}));return this.formatter_.writeFeaturesText(r,t)}}],r&&f(t.prototype,r),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(n.Z)},43938:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(40398),i=r(88440);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var c=["SRS","BoundingBox","ScaleHint","LatLonBoundingBox"],f=function(e,t){null!==e&&c.forEach((function(r){var n,i;(n=t,i=r,Array.prototype.filter.call(n.children,(function(e){return e.tagName===i})).length>0)||Array.prototype.filter.call(e.children,(function(e){return e.tagName===r})).forEach((function(e){var r=e.cloneNode(!0);t.appendChild(r)}))}))},h=function e(t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t;if(!0===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&null!==t&&(i=t.querySelector("Layer")),null!==i){f(r,i);var o=i.querySelector("Name").innerHTML,a=i.children;Array.prototype.forEach.call(a,(function(t){"Layer"===t.tagName&&(n=e(t,!1,n,i))})),n[o]=i}return n},p=[function e(t,r){var i=t,o=r[i.Name];if((0,n.Ew)(o))(0,n.kJ)(i.Layer)&&i.Layer.forEach((function(t){return e(t,r)}));else{var a=o.querySelector("SRS");if(null!==a){var s=a.innerHTML;i.SRS=[s]}}},function e(t,r){var i=r[t.Name];if((0,n.Ew)(i))(0,n.kJ)(t.Layer)&&t.Layer.forEach((function(t){return e(t,r)}));else if((0,n.kJ)(t.BoundingBox)){var o=Array.prototype.map.call(i.children,(function(e){return e}));o=o.filter((function(e){return["BoundingBox"].includes(e.tagName)})),t.BoundingBox.forEach((function(e,t){var r=e;if(null===r.crs){var i=o[t];if(!(0,n.Ew)(i)){var a=i.getAttribute("SRS");(0,n.Ew)(a)||(r.crs=a)}}}))}},function e(t,r){var i=t,o=r[t.Name];if((0,n.Ew)(o))(0,n.kJ)(t.Layer)&&t.Layer.forEach((function(t){return e(t,r)}));else{i.ScaleHint=[];var a=Array.prototype.map.call(o.children,(function(e){return e}));(a=a.filter((function(e){return"ScaleHint"===e.tagName}))).forEach((function(e){var t={minScale:parseFloat(e.getAttribute("min")),maxScale:parseFloat(e.getAttribute("max"))};i.ScaleHint.push(t)}))}},function e(t,r){var i=t,o=r[t.Name];if((0,n.Ew)(o))(0,n.kJ)(i.Layer)&&i.Layer.forEach((function(t){return e(t,r)}));else{i.LatLonBoundingBox=[];var a=Array.prototype.map.call(o.children,(function(e){return e}));(a=a.filter((function(e){return"LatLonBoundingBox"===e.tagName}))).forEach((function(e){var t={crs:"EPSG:4326",extent:[parseFloat(e.getAttribute("minx")),parseFloat(e.getAttribute("miny")),parseFloat(e.getAttribute("maxx")),parseFloat(e.getAttribute("maxy"))]};i.LatLonBoundingBox.push(t)}))}},function(e,t){var r=e,i="LatLonBoundingBox",o="BoundingBox";(0,n.Ew)(r[o])&&!(0,n.Ew)(r[i])&&(r[o]=r[i])},function(e,t){var r=e,i="MaxScaleDenominator";(0,n.Ew)(r[i])&&!(0,n.Ew)(r.ScaleHint)&&(r[i]=r.ScaleHint[0].maxScale)},function(e,t){var r=e,i="MinScaleDenominator";(0,n.Ew)(r[i])&&!(0,n.Ew)(r.ScaleHint)&&(r[i]=r.ScaleHint[0].minScale)}],d=function e(t,r){(0,n.kJ)(t)?t.forEach((function(t){e(t,r)})):(0,n.Kn)(t)&&(!function(e,t){p.forEach((function(r){r(e,t)}))}(t,r),e(t.Layer,r))};const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,i,o=l(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o.apply(this,arguments)}return t=u,(r=[{key:"customRead",value:function(e){var t=this.read(e),r=h(e),i=t.Capability;return(0,n.Ew)(i)||(0,n.Ew)(i.Layer)||d(i.Layer,r),t}}])&&a(t.prototype,r),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.Z)},74524:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(40398);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(l,e);var t,r,n,i=s(l);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this,e)}return t=l,r&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(17275).Z);const c=u;function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}const p=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.typeName_=t,this.outputFormat_=r,this.projection_=n,this.gmlFormatter_=new c({outputFormat:r,featureType:t,srsName:this.projection_.code})}var t,r,i;return t=e,(r=[{key:"read",value:function(e){var t,r=this,i={};return/json/gi.test(this.outputFormat_)&&(t=JSON.parse(e.text)),t||(t=this.gmlFormatter_.read(e.text)),i.featureNS=t.targetNamespace,i.featurePrefix=t.targetPrefix,t.featureTypes.some((function(e){return e.typeName===r.typeName_&&(i.properties=e.properties,i.properties.some((function(e){return(0,n.Ec)(e.localType)&&(i.geometryName=e.name),(0,n.Ec)(e.localType)}))),e.typeName===r.typeName_})),i}}])&&h(t.prototype,r),i&&h(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},31700:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y,t:()=>d});var n=r(62557),i=r(46329),o=r(40398),a=r(26890),s=r(44993),l=r(36181),u=r(4597),c=r(77707),f=r(94551);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===h(o)?o:String(o)),n)}var i,o}var d=function(e,t){var r,n=e.getId();return(0,o.Ew)(n)||(r=t.getFeatureById(n)),(0,o.Ew)(r)&&e instanceof a.ZP?r=c.Z.olFeature2Facade(e):(0,o.Ew)(r)&&e instanceof s.Z&&(r=f.Z.olFeature2Facade(e)),r};const y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map_=null,this.defaultCursor_=void 0}var t,r,a;return t=e,(r=[{key:"addTo",value:function(e){this.map_=e}},{key:"getFeaturesByLayer",value:function(e,t){var r=this,a=[],s=t.getImpl().getOL3Layer(),l=t.userMaxExtent;return(0,o.Ew)(t)||!t.isVisible()||(0,o.Ew)(s)||this.map_.getMapImpl().forEachFeatureAtPixel(e.pixel,(function(s,c){if(!l||r.handleFeatureInExtent(l,e.pixel))if(c instanceof u.Z&&!(0,o.Ew)(s.get("features"))){var f=s.get("features").map((function(e){return d(e,t)}));if(1===f.length)a.push(f[0]);else{var h=t.getStyle();h instanceof i.Z||(h=h.getStyles().find((function(e){return e instanceof i.Z}))),a.push(new n.Z(f,{ranges:h.getRanges(),hoverInteraction:h.getOptions().hoverInteraction,maxFeaturesToSelect:h.getOptions().maxFeaturesToSelect,distance:h.getOptions().distance}))}}else Object.prototype.hasOwnProperty.call(s.getProperties(),"selectclusterlink")||a.push(d(s,t))}),{layerFilter:function(e){var r=!1;return t.getStyle()instanceof i.Z&&t.getStyle().getOptions().selectInteraction&&(r=e===t.getStyle().getImpl().selectClusterInteraction.getLayer()),r=r||e===s}}),a}},{key:"handleFeatureInExtent",value:function(e,t){var r=this.map_.getMapImpl().getCoordinateFromPixel(t);return(0,l.jE)(e,r[0],r[1])}},{key:"addCursorPointer",value:function(e){var t=e.pixel,r=this.map_.getMapImpl().getViewport();"pointer"!==r.style.cursor&&(this.defaultCursor_=r.style.cursor),r.style.cursor="pointer",this.map_.getMapImpl().getFeaturesAtPixel(t).length>0&&(this.map_.getMapImpl().getTargetElement().style.cursor="pointer")}},{key:"removeCursorPointer",value:function(e){var t=e.pixel;this.map_.getMapImpl().getViewport().style.cursor=this.defaultCursor_,0===this.map_.getMapImpl().getFeaturesAtPixel(t).length&&(this.map_.getMapImpl().getTargetElement().style.cursor=this.defaultCursor_)}},{key:"destroy",value:function(){this.map_.un("click",this.onMapClick_,this),this.map_=null}}])&&p(t.prototype,r),a&&p(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},17768:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(44993),i=r(61900),o=r(38815),a=r(98831),s=r(57649),l=r(24615),u=r(45004),c=r(82428),f=r(66646),h=r(25558),p=r(97906),d=r(9220);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===y(o)?o:String(o)),n)}var i,o}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,r)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}const b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(b,e);var t,r,y,A=_(b);function b(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b);var r=t,n=new s.Z({source:new l.Z({features:new u.Z,useSpatialIndex:!0}),name:"Cluster overlay",updateWhileAnimating:!0,updateWhileInteracting:!0,displayInLayerSwitcher:!1,style:r.featureStyle});return t.layers.push(n),r.filter=function(e,t){return!(!t&&e.get("selectclusterlink"))},(e=A.call(this,r)).map=r.map,e.pointRadius=r.pointRadius||12,e.circleMaxObjects=r.circleMaxObjects||10,e.maxObjects=r.maxObjects||60,e.spiral=!1!==r.spiral,e.animate=r.animate,e.animationDuration=r.animationDuration||500,e.selectCluster_=!1!==r.selectCluster,e.maxFeaturesToSelect=r.maxFeaturesToSelect,e.facadeLayer_=r.fLayer,e.style_=r.style,e.filter_=r.filter,e.overlayLayer_=n,e.originalHandleEvent=e.handleEvent,e.on("select",e.selectCluster.bind(v(e)),v(e)),e}return t=b,(r=[{key:"setMap",value:function(e){var t=this;this.getMap()&&(this.getMap().getView()&&this.getMap().getView().un("change:resolution",this.clear.bind(this)),this.getMap().removeLayer(this.overlayLayer_)),a.Z.prototype.setMap.call(this,e),this.overlayLayer_.setMap(e),e&&e.getView()&&e.getView().on("change:resolution",this.clear.bind(this)),this.handleEvent=function(e){return t.originalHandleEvent.apply(t,[e]),!0}}},{key:"clear",value:function(){this.getFeatures().clear(),this.overlayLayer_.getSource().clear()}},{key:"getLayer",value:function(){return this.overlayLayer_}},{key:"refreshViewEvents",value:function(){this.getMap()&&this.getMap().getView()&&this.getMap().getView().on("change:resolution",this.clear.bind(this))}},{key:"selectCluster",value:function(e){if(e.selected.length){var t=e.selected[0];if(!t.get("selectclusterfeature")){var r=t.get("features");if(r&&1!==r.length)if(r&&!(r.length>this.maxFeaturesToSelect)||this.facadeLayer_.getImpl().getNumZoomLevels()-this.map.getZoom()==1){this.selectCluster_||this.getFeatures().clear();var n=t.getGeometry().getCoordinates(),i=this.getMap().getView().getResolution(),o=i*this.pointRadius*(.5+r.length/4);!this.spiral||r.length<=this.circleMaxObjects?(this.overlayLayer_.getSource().refresh(),this.drawFeaturesAndLinsInCircle_(r,i,o,n)):(this.overlayLayer_.getSource().refresh(),this.drawFeaturesAndLinsInSpiral_(r,i,n)),this.animate&&this.animateCluster_(n)}else{var a=d.Z.getFeaturesExtent(r,this.map.getProjection().code);this.map.setBbox(a)}}}else this.clear()}},{key:"drawFeaturesAndLinsInCircle_",value:function(e,t,r,n){for(var i=Math.min(e.length,this.circleMaxObjects),o=0;o<i;o+=1){var a=2*Math.PI*(o/i);2!==i&&4!==i||(a+=Math.PI/4);var s=[n[0]+r*Math.sin(a),n[1]+r*Math.cos(a)];this.drawAnimatedFeatureAndLink_(e[o],t,n,s)}}},{key:"drawFeaturesAndLinsInSpiral_",value:function(e,t,r){for(var n,i=0,o=2*this.pointRadius,a=Math.min(this.maxObjects,e.length),s=0;s<a;s+=1){i+=(o+.1)/(n=o/2+o*i/(2*Math.PI));var l=t*n*Math.sin(i),u=t*n*Math.cos(i),c=[r[0]+l,r[1]+u];this.drawAnimatedFeatureAndLink_(e[s],t,r,c)}}},{key:"drawAnimatedFeatureAndLink_",value:function(e,t,r,a){var s=new n.Z;e.getKeys().forEach((function(t){s.set(t,e.get(t))}));var l=e.getStyle();l||(l=this.facadeLayer_.getStyle().getImpl().oldOL3Layer.getStyle());var u=l(e,t),c=u.map?u.map((function(e){return e.clone()})):[u.clone()];s.setId(e.getId()),s.setStyle(c),s.set("features",[e]);var f=!0===["Point","MultiPoint"].includes(e.getGeometry().getType())?new i.Z(a):e.getGeometry(),h=!0===["Point","MultiPoint"].includes(e.getGeometry().getType())?new o.Z([r,a]):new o.Z([r,d.Z.getCentroid(e.getGeometry())]);s.set("geometry",f),this.overlayLayer_.getSource().addFeature(s);var p=new n.Z({selectclusterlink:!0,geometry:h});this.overlayLayer_.getSource().addFeature(p)}},{key:"animateCluster_",value:function(e,t){var r=this;this.listenerKey_&&(this.overlayLayer_.setVisible(!0),(0,c.B)(this.listenerKey_));var n=this.overlayLayer_.getSource().getFeatures();if(n.length){this.overlayLayer_.setVisible(!1);var a=this.animationDuration||500,s=(new Date).getTime();this.listenerKey_=this.facadeLayer_.getImpl().getOL3Layer().on(["postrender","postcompose"],(function(t){for(var l=(0,h.u3)(t),u=r.getMap().getView().getResolution(),d=(0,f.easeOut)((t.frameState.time-s)/a),y=0;y<n.length;y+=1){if(n[y].get("features")){var g=n[y],m=g.get("features")[0],_=g.getGeometry().getCoordinates();_[0]=e[0]+d*(_[0]-e[0]),_[1]=e[1]+d*(_[1]-e[1]);for(var v=new i.Z(_),A=r.overlayLayer_.getStyle()(m,u).map((function(e){return e.clone()})),b=0;b<A.length;b+=1){var w=A[b];w.getImage().size||(w.getImage().size=[42,42]),l.setStyle(w),l.drawLineString(new o.Z([e,_]))}var E=m.getStyle();E||(E=r.facadeLayer_.getStyle().getImpl().oldOL3Layer.getStyle());for(var x=E(m,u),I=x.map?x.map((function(e){return e.clone()})):[x.clone()],S=0;S<I.length;S+=1){var C=I[S],P=C.getImage();if(P instanceof p.Z){var O=null==P.getOrigin()?[0,0]:P.getOrigin(),T=null==P.getAnchor()?[0,0]:P.getAnchor(),M=null==P.getSize()?[42,42]:P.getSize();P.size=M,P.anchor=T,P.origin=O,C.setImage(P)}l.setStyle(C),l.drawGeometry(v)}}if(d>1)return(0,c.B)(r.listenerKey_),r.overlayLayer_.setVisible(!0),void r.overlayLayer_.changed();t.frameState.animate=!0}}),this)}}}])&&g(t.prototype,r),y&&g(t,y),Object.defineProperty(t,"prototype",{writable:!1}),b}(a.Z)},4597:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(40398),i=r(57649),o=r(24615),a=r(61900),s=r(66646),l=r(36181),u=r(25558);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(o)?o:String(o)),n)}var i,o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},h.apply(this,arguments)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,r)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}const m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(m,e);var t,r,i,c=d(m);function m(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(e=c.call(this,t)).styleCluster_=t.style,e.oldCluster_=new o.Z,e.clusters_=[],e.animation_={start:!1},e.set("animationDuration","number"==typeof t.animationDuration?t.animationDuration:700),e.set("animationMethod",t.animationMethod||s.easeOut),e.getSource().on("change",e.saveCluster_.bind(y(e))),e.on("prerender",e.animate.bind(y(e))),e.on("postrender",e.postanimate.bind(y(e))),e.setStyle(t.style),e}return t=m,i=[{key:"getClusterForFeature",value:function(e,t){return t.find((function(t){var r,i=t.get("features");return(0,n.Ew)(i)||(r=i.find((function(t){return t===e}))),r}))}}],(r=[{key:"saveCluster_",value:function(){if(this.oldCluster_.clear(),this.get("animationDuration")){var e=this.getSource().getFeatures();e.length&&e[0].get("features")&&(this.oldCluster_.addFeatures(this.clusters_),this.clusters_=e.slice(0),this.sourceChanged=!0)}}},{key:"animate",value:function(e){var t=this,r=e,i=this.get("animationDuration");if(i){if(this.animation_.resolution!==r.frameState.viewState.resolution&&this.sourceChanged){var o=r.frameState.viewState.resolution,s=r.frameState.extent;this.animation_.reverse=this.animation_.resolution>=o,this.prepareAnimation_(s,r.frameState.viewState.resolution),r.frameState.time=this.animation_.start}var l=this.animation_.clustersFrom.length;if(l>0&&l<=1e3&&this.animation_.start){var c=(0,u.u3)(r),f=(r.frameState.time-this.animation_.start)/i;f>1&&(this.animation_.start=!1,f=1),f=this.get("animationMethod")(f),r.context.save(),r.context.globalAlpha=this.getOpacity(),this.animation_.clustersFrom.forEach((function(e,i){var o=e.getGeometry().getCoordinates(),s=t.animation_.clustersTo[i].getGeometry().getCoordinates();t.animation_.reverse?(o[0]=s[0]+f*(o[0]-s[0]),o[1]=s[1]+f*(o[1]-s[1])):(o[0]+=f*(s[0]-o[0]),o[1]+=f*(s[1]-o[1]));var l=t.getStyle()(e,r.frameState.viewState.resolution),u=new a.Z(o);(0,n.Ew)(l)||l.forEach((function(e){var t=e.getImage();(0,n.Ew)(t)||(null==t.getOrigin()&&(t.origin_=[]),null==t.getAnchor()&&(t.normalizedAnchor_=[]),null==t.getSize()&&(t.size_=[])),c.setStyle(e),c.drawGeometry(u)}))})),r.context.restore(),r.frameState.animate=!0,r.context.save(),r.context.beginPath(),r.context.rect(0,0,0,0),r.context.clip(),this.clip_=!0}else this.animation_.clustersFrom.length=0,this.animation_.clustersTo.length=0,this.animation_.start=!1}}},{key:"prepareAnimation_",value:function(e,t){var r=this;this.animation_.clustersFrom=[],this.animation_.clustersTo=[];var i=(0,l.f3)(e,100*t),o=this.oldCluster_.getFeaturesInExtent(i),a=this.getSource().getFeaturesInExtent(i),s=this.animation_.reverse?a:o,u=this.animation_.reverse?o:a;s.forEach((function(e){var t=e.get("features");if(!(0,n.Ew)(t)){var i=m.getClusterForFeature(t[0],u);(0,n.Ew)(i)||!1===i||(r.animation_.clustersFrom.push(e),r.animation_.clustersTo.push(i))}})),this.animation_.resolution=t,this.sourceChanged=!1,this.animation_.start=(new Date).getTime()}},{key:"postanimate",value:function(e){this.clip_&&(e.context.restore(),this.clip_=!1)}},{key:"setStyle",value:function(e){h(g(m.prototype),"setStyle",this).call(this,this.styleCluster_)}}])&&f(t.prototype,r),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),m}(i.Z)},8312:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(68524),i=r(2532),o=r(40398),a=r(60138),s=r(24871),l=r(20632),u=r(40546),c=r(54414),f=r(27811),h=r(15967),p=r(43938),d=r(19441),y=r(17195),g=r(99075),m=r(9220);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===_(o)?o:String(o)),n)}var i,o}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}const E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(w,e);var t,r,h,_=b(w);function w(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(e=_.call(this,t,r)).options=t,e.map=null,e.zIndex_=g.Z.Z_INDEX[n.GenericRaster],e.sldBody=t.sldBody,e.styles=e.options.styles||"",e.style=void 0===r.getStyle?null:r.getStyle().name,"createDefaultStyle"!==e.style&&r.getStyle&&(e.style=r.getStyle()),e.format=e.options.format,e.ol3Layer=r,e.maxExtent=t.userMaxExtent||[],e.ids=t.ids,e.version=t.version,e.legend=t.legend,e}return t=w,(r=[{key:"addTo",value:function(e){var t=this;if(this.map=e,(0,o.Ew)(this.visibility)||this.ol3Layer.setVisible(this.visibility),(0,o.Ew)(this.maxZoom)||this.ol3Layer.setMaxZoom(this.maxZoom),(0,o.Ew)(this.minZoom)||this.ol3Layer.setMinZoom(this.minZoom),(0,o.Ew)(this.zIndex_)||this.ol3Layer.setZIndex(this.zIndex_),(0,o.Ew)(this.visibility)||this.ol3Layer.setVisible(this.visibility),!(0,o.Ew)(this.sldBody))try{this.ol3Layer.getSource().updateParams({SLD_BODY:this.sldBody})}catch(e){var r=(0,i.NA)("exception").sldBODYError.replace("[replace1]",this.name).replace("[replace2]",this.ol3Layer.constructor.name);console.warn(r)}if(!(0,o.Ew)(this.styles))try{this.ol3Layer.getSource().updateParams({STYLES:this.styles})}catch(e){var n=(0,i.NA)("exception").styleError.replace("[replace1]",this.name).replace("[replace2]",this.ol3Layer.constructor.name);console.warn(n)}if(!(0,o.Ew)(this.format))try{this.ol3Layer.getSource().updateParams({FORMAT:this.format})}catch(e){var u=(0,i.NA)("exception").formatError.replace("[replace1]",this.name).replace("[replace2]",this.ol3Layer.constructor.name);console.warn(u)}if(this.capabilities=this.getCapabilities(this.ol3Layer,e.getProjection()),(0,o.Ew)(this.maxExtent)?this.ol3Layer.getSource()instanceof a.Z||this.ol3Layer.getSource()instanceof s.Z?this.ol3Layer.getExtent()?(this.maxExtent=this.ol3Layer.getExtent(),this.ol3Layer.setExtent(this.maxExtent)):this.capabilities.then((function(e){t.maxExtent=e.getLayerExtent(),t.ol3Layer.setExtent(t.maxExtent),t.facadeLayer_.maxExtent_=t.maxExtent})):this.ol3Layer.getSource()instanceof l.Z&&this.getCapabilitiesWMTS_(this.ol3Layer).then((function(e){t.maxExtent=t.getMaxExtentCapabilitiesWMTS_(e),t.ol3Layer.setExtent(t.maxExtent),t.facadeLayer_.maxExtent_=t.maxExtent})):this.ol3Layer.setExtent(this.maxExtent),(0,o.o8)(this.ol3Layer.getSource().getLegendUrl)||(this.legendUrl_=this.ol3Layer.getSource().getLegendUrl()),this.ol3Layer.setOpacity(this.opacity_),this.ol3Layer.setVisible(this.visibility),(0,o.Ft)(this.options)||(0,o.Ft)(this.options.minScale)||(0,o.Ft)(this.options.maxScale))(0,o.Ft)(this.options)||(0,o.Ft)(this.options.minResolution)||(0,o.Ft)(this.options.maxResolution)||(this.ol3Layer.setMaxResolution(this.options.maxResolution),this.ol3Layer.setMinResolution(this.options.minResolution));else{var c=this.map.getProjection().units;this.options.minResolution=(0,o.AC)(this.options.minScale,c),this.options.maxResolution=(0,o.AC)(this.options.maxScale,c),this.ol3Layer.setMaxResolution(this.options.maxResolution),this.ol3Layer.setMinResolution(this.options.minResolution)}e.getMapImpl().addLayer(this.ol3Layer)}},{key:"getCapabilities",value:function(e,t){var r=e.getSource();return r instanceof a.Z||r instanceof s.Z?this.getCapabilitiesWMS_(e,t):null}},{key:"getCapabilitiesWMS_",value:function(e,t){var r=this,n=e.getSource(),i=n.getProjection()?n.getProjection().getCode():t,a=n.getUrl?n.getUrl():n.getUrls()[0];return new Promise((function(e,t){var n=(0,o.sE)(a,r.version);(0,c.U2)(n).then((function(t){var r=t.xml,n=(new p.Z).customRead(r),o=new d.Z(n,a,i);e(o)}))}))}},{key:"getCapabilitiesWMTS_",value:function(e){var t=this,r=e.getSource().getUrls()[0];return new Promise((function(e,n){var i=(0,o.BP)(r),a=new u.Z;(0,c.U2)(i).then((function(r){var n=r.xml;if(n.getElementsByTagName("ows:Style").length>0){var i=(new XMLSerializer).serializeToString(n).replaceAll("ows:Style","Style");n=(new DOMParser).parseFromString(i,"text/xml")}var o=a.read(n);try{o.Contents.Layer.forEach((function(e){var t=e.Identifier;e.Style.forEach((function(e){var n=r.text.split("Layer>").filter((function(e){return e.indexOf("Identifier>".concat(t,"<"))>-1}))[0];e.LegendURL=n.split("LegendURL")[1].split('xlink:href="')[1].split('"')[0]}))}))}catch(e){}e.call(t,o)}))}))}},{key:"getMaxExtentCapabilitiesWMTS_",value:function(e){var t=e.Contents,r=this.map.getMaxExtent();return(0,o.Ft)(t)?r:(0,y.Z)(t,this.name,this.map.getProjection().code,r)}},{key:"setURLService",value:function(e){(0,o.Ew)(this.ol3Layer)||(0,o.Ew)(this.ol3Layer.getSource)||(0,o.Ew)(this.ol3Layer.getSource())||(0,o.Ew)(e)||this.ol3Layer.getSource().setUrl(e)}},{key:"getURLService",value:function(){var e="";if(!(0,o.Ew)(this.ol3Layer)&&!(0,o.Ew)(this.ol3Layer.getSource)&&!(0,o.Ew)(this.ol3Layer.getSource())){var t=this.ol3Layer.getSource();(0,o.Ew)(t.getUrl)?(0,o.Ew)(t.getUrls)||(e=this.ol3Layer.getSource().getUrls()):e=this.ol3Layer.getSource().getUrl()}return e}},{key:"setFacadeObj",value:function(e){this.facadeLayer_=e}},{key:"getMaxResolution",value:function(){return this.ol3Layer.getMaxResolution()}},{key:"getMinResolution",value:function(){return this.ol3Layer.getMinResolution()}},{key:"refresh",value:function(){this.ol3Layer.getSource().refresh()}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(e){(0,o.Ew)(e)||(this.legendUrl_=e)}},{key:"getMaxExtent",value:function(){var e=this.ol3Layer.getExtent();if((0,o.o8)(e)){var t=this.ol3Layer.getSource().getTileGrid;if((0,o.o8)(t))e=this.ol3Layer.getSource().getImageExtent();else{e=this.ol3Layer.getSource().getTileGrid().getExtent();var r=this.ol3Layer.getSource().getProjection().getCode();e=m.Z.transformExtent(e,r,(0,f.U2)(this.map.getProjection().code))}}return e}},{key:"setMaxExtent",value:function(e){return this.ol3Layer.setExtent(e)}},{key:"isQueryable",value:function(){return!1!==this.options.queryable}},{key:"setVersion",value:function(e){this.version=e;try{this.ol3Layer.getSource().updateParams({VERSION:e})}catch(e){var t=(0,i.NA)("exception").versionError.replace("[replace1]",this.name).replace("[replace2]",this.ol3Layer.constructor.name);console.warn(t)}}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,o.Ew)(this.ol3Layer)||e.removeLayer(this.ol3Layer),this.map=null}},{key:"equals",value:function(e){var t=!1;return e instanceof w&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.version===e.version),t}}])&&v(t.prototype,r),h&&v(t,h),Object.defineProperty(t,"prototype",{writable:!1}),w}(h.Z)},68311:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(68524),i=r(77055),o=r(391),a=r(60894),s=r(2532),l=r(40398),u=r(37130),c=r.n(u),f=r(54180),h=r(99075),p=r(94551);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===d(o)?o:String(o)),n)}var i,o}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}const b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(d,e);var t,r,u,f=v(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(e=f.call(this,t,r)).options=t,e.map=null,e.zIndex_=h.Z.Z_INDEX[n.GenericVector],e.sldBody=t.sldBody,e.style=e.options.style||null,e.cql=e.options.cql,e.fnAddFeatures_=null,e.ol3Layer=r,e.maxExtent=t.userMaxExtent||[],e.ids=t.ids,e.version=t.version,e.legend=t.legend,e}return t=d,(r=[{key:"addTo",value:function(e){var t=this;if(this.map=e,this.facadeVector_=this.facadeLayer_,this.style||this.ol3Layer.getStyle&&(this.styleOl="function"==typeof this.ol3Layer.getStyle()?this.ol3Layer.getStyle()():this.ol3Layer.getStyle(),this.facadeVector_.style_=this.styleOl,this.ol3Layer.setStyle(this.styleOl)),(0,l.Ew)(this.visibility)||this.ol3Layer.setVisible(this.visibility),(0,l.Ew)(this.maxZoom)||this.ol3Layer.setMaxZoom(this.maxZoom),(0,l.Ew)(this.minZoom)||this.ol3Layer.setMinZoom(this.minZoom),(0,l.Ew)(this.zIndex_)||this.ol3Layer.setZIndex(this.zIndex_),(0,l.Ew)(this.maxExtent)||this.ol3Layer.setExtent(this.maxExtent),(0,l.o8)(this.ol3Layer.getSource().getLegendUrl)||(this.legendUrl_=this.ol3Layer.getSource().getLegendUrl()),this.ol3Layer.setOpacity(this.opacity_),this.ol3Layer.setVisible(this.visibility),!(0,l.Ew)(this.ids)){var r=this.ids.split(",").map((function(e){return t.name.concat(".").concat(e)}));this.ol3Layer.getSource().setUrl("".concat(this.ol3Layer.getSource().getUrl(),"&featureId=").concat(r))}if((0,l.Ew)(this.cql)||this.ol3Layer.getSource().setUrl("".concat(this.ol3Layer.getSource().getUrl(),"&CQL_FILTER=").concat(window.encodeURIComponent(this.cql))),(0,l.Ft)(this.options)||(0,l.Ft)(this.options.minScale)||(0,l.Ft)(this.options.maxScale))(0,l.Ft)(this.options)||(0,l.Ft)(this.options.minResolution)||(0,l.Ft)(this.options.maxResolution)||(this.ol3Layer.setMaxResolution(this.options.maxResolution),this.ol3Layer.setMinResolution(this.options.minResolution));else{var n=this.map.getProjection().units;this.options.minResolution=(0,l.AC)(this.options.minScale,n),this.options.maxResolution=(0,l.AC)(this.options.maxScale,n),this.ol3Layer.setMaxResolution(this.options.maxResolution),this.ol3Layer.setMinResolution(this.options.minResolution)}e.getMapImpl().addLayer(this.ol3Layer);var o=this.ol3Layer.getSource();if(o.getFeatures().length>0&&"ready"===o.getState()){var a=o.getFeatures().map((function(e){return p.Z.olFeature2Facade(e)}));this.loaded_=!0,this.facadeLayer_.addFeatures(a),this.fire(i.VX,[this.features_])}else o.loading&&"ready"===o.getState()?this.loaded_=!0:(this.fnAddFeatures_=this.addFeaturesToFacade.bind(this),o.on("change",this.fnAddFeatures_))}},{key:"addFeaturesToFacade",value:function(){var e=this.ol3Layer.getSource();if("ready"===e.getState()&&!this.loaded_)if(e.getFeatures){var t=e.getFeatures().map((function(e){return p.Z.olFeature2Facade(e)}));t.length>0&&(this.loaded_=!0,this.facadeLayer_.addFeatures(t),this.deactivate(),this.fire(i.VX,[this.features_]))}else("error"===e.getState()||"ready"===e.getState()&&this.loaded_)&&this.deactivate()}},{key:"redraw",value:function(){var e=this.getOL3Layer();if(!(0,l.Ew)(e)){var t=e.getSource();y(t.getFeatures()).forEach(t.removeFeature,t);var r=this.facadeLayer_.getFeatures();t.addFeatures(r.map(p.Z.facade2OLFeature))}}},{key:"deactivate",value:function(){this.ol3Layer.getSource().un("change",this.fnAddFeatures_),this.fnAddFeatures_=null}},{key:"selectFeatures",value:function(e,t,r){var n=e[0];if(!0===this.extract&&(this.unselectFeatures(),!(0,l.Ew)(n))){var i=(0,o.Mp)(c(),{vars:this.parseFeaturesForTemplate_(e),parseToHtml:!1}),s={icon:"g-cartografia-pin",title:this.name,content:i},u=this.map.getPopup();(0,l.Ew)(u)?((u=new a.Z).addTab(s),this.map.addPopup(u,t)):u.addTab(s)}}},{key:"setURLService",value:function(e){(0,l.Ew)(this.ol3Layer)||(0,l.Ew)(this.ol3Layer.getSource)||(0,l.Ew)(this.ol3Layer.getSource())||(0,l.Ew)(e)||this.ol3Layer.getSource().setUrl(e)}},{key:"getURLService",value:function(){var e="";if(!(0,l.Ew)(this.ol3Layer)&&!(0,l.Ew)(this.ol3Layer.getSource)&&!(0,l.Ew)(this.ol3Layer.getSource())){var t=this.ol3Layer.getSource();(0,l.Ew)(t.getUrl)?(0,l.Ew)(t.getUrls)||(e=this.ol3Layer.getSource().getUrls()):e=this.ol3Layer.getSource().getUrl()}return e}},{key:"setFacadeObj",value:function(e){this.facadeLayer_=e}},{key:"getMaxResolution",value:function(){return this.ol3Layer.getMaxResolution()}},{key:"getMinResolution",value:function(){return this.ol3Layer.getMinResolution()}},{key:"refresh",value:function(){this.ol3Layer.getSource().refresh()}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(e){(0,l.Ew)(e)||(this.legendUrl_=e)}},{key:"getMaxExtent",value:function(){return 0!==this.maxExtent.length?this.maxExtent:this.ol3Layer.getSource().getExtent()}},{key:"setMaxExtent",value:function(e){return this.maxExtent=e,this.ol3Layer.setExtent(e)}},{key:"setVersion",value:function(e){this.version=e;try{this.ol3Layer.getSource().updateParams({VERSION:e})}catch(e){var t=(0,s.NA)("exception").versionError.replace("[replace1]",this.name).replace("[replace2]",this.ol3Layer.constructor.name);console.warn(t)}}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,l.Ew)(this.ol3Layer)||e.removeLayer(this.ol3Layer),this.map=null}},{key:"equals",value:function(e){var t=!1;return e instanceof d&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.version===e.version),t}}])&&m(t.prototype,r),u&&m(t,u),Object.defineProperty(t,"prototype",{writable:!1}),d}(f.Z)},71635:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(40398),i=r(77055),o=r(60894),a=r(391),s=r(37130),l=r.n(s),u=r(7508),c=r(24615),f=r(27811),h=r(54180),p=r(64313),d=r(9220);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===y(o)?o:String(o)),n)}var i,o}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},m.apply(this,arguments)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}const b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(y,e);var t,r,s,h=v(y);function y(e,t,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(i=h.call(this,t,r)).popup_=null,i.formater_=null,i.loader_=null,i.loadFeaturesPromise_=null,i.loaded_=!1,i.hiddenAttributes_=[],(0,n.Ew)(t.hide)||(i.hiddenAttributes_=t.hide),i.showAttributes_=[],(0,n.Ew)(t.show)||(i.showAttributes_=t.show),i}return t=y,r=[{key:"addTo",value:function(e){this.formater_=new u.Z({defaultDataProjection:(0,f.U2)(e.getProjection().code)}),(0,n.Ew)(this.url)||(this.loader_=new p.Z(e,this.url,this.formater_)),m(A(y.prototype),"addTo",this).call(this,e)}},{key:"refresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={type:"FeatureCollection",features:this.formater_.write(this.facadeVector_.getFeatures()),crs:{properties:{code:this.map.getProjection().code.split(":")[1]},type:"EPSG"}};(0,n.Kn)(e)&&(t=e),this.source=t,this.updateSource_()}},{key:"setSource",value:function(e){this.source=e,(0,n.Ew)(this.map)||this.updateSource_()}},{key:"requestFeatures_",value:function(){var e=this;return(0,n.Ew)(this.loadFeaturesPromise_)&&(this.loadFeaturesPromise_=new Promise((function(t){if(e.source){var r=e.formater_.read(e.source,e.map.getProjection());t(r)}else e.loader_.getLoaderFn((function(e){t(e)}))(null,null,(0,f.U2)(e.map.getProjection().code))}))),this.loadFeaturesPromise_}},{key:"updateSource_",value:function(){var e=this;(0,n.Ew)(this.vendorOptions_.source)&&this.requestFeatures_().then((function(t){e.ol3Layer&&e.ol3Layer.setSource(new c.Z({loader:function(r,n,o){e.loaded_=!0,e.facadeVector_.clear(),e.facadeVector_.addFeatures(t),e.fire(i.VX,[t])}})),e.facadeVector_.addFeatures(t)}))}},{key:"getFeaturesExtentPromise",value:function(e,t){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(e,t),a=d.Z.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(e){var t=d.Z.getFeaturesExtent(e,i);n(t)}))}))}},{key:"selectFeatures",value:function(e,t,r){var i=e[0];if(!0===this.extract&&(this.unselectFeatures(),!(0,n.Ew)(i))){var s=i.getAttribute("vendor.mapea.click");if((0,n.mf)(s))s(r,i);else{var u=(0,a.Mp)(l(),{vars:this.parseFeaturesForTemplate_(e),parseToHtml:!1}),c={icon:"g-cartografia-pin",title:this.name,content:u},f=this.map.getPopup();(0,n.Ew)(f)?((f=new o.Z).addTab(c),this.map.addPopup(f,t)):f.addTab(c)}}}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"equals",value:function(e){var t=!1;return e instanceof y&&(t=t&&this.name===e.name,t=t&&this.extract===e.extract),t}}],r&&g(t.prototype,r),s&&g(t,s),Object.defineProperty(t,"prototype",{writable:!1}),y}(h.Z)},58227:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(40398),i=r(68524),o=r(77055),a=r(86357),s=r(45091),l=r(27811),u=r(99075),c=r(15967),f=r(9220);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===h(o)?o:String(o)),n)}var i,o}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}const m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(g,e);var t,r,c,h=y(g);function g(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(e=h.call(this,t,r)).facadeLayer_=null,e.options=t,e.displayInLayerSwitcher_=!0,e.resolutions_=null,e.extentProj_=null,e.opacity_=e.options.opacity||1,!1===e.options.visibility&&(e.visibility=!1),e.maxExtent_=e.options.maxExtent||null,(0,n.Ew)(e.options.animated)&&(e.options.animated=!1),e.style=e.options.style||"",e.normalize=!!(0,n.o8)(e.options.normalize)||e.options.normalize,e.projection_=e.options.projection,e.zIndex_=u.Z.Z_INDEX[i.GeoTIFF],e.convertToRGB_=(0,n.Ew)(t.convertToRGB)?"auto":t.convertToRGB,e.bands_=t.bands?t.bands:[],e.nodata_=t.nodata,e.minZoom=t.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=t.maxZoom||Number.POSITIVE_INFINITY,e}return t=g,(r=[{key:"setVisible",value:function(e){var t=this;if(this.visibility=e,!0===e&&!0!==this.transparent){this.map.getBaseLayers().filter((function(e){return!e.equals(t.facadeLayer_)&&e.isVisible()})).forEach((function(e){return e.setVisible(!1)})),(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e);var r=this.map.getZoom();this.map.getImpl().updateResolutionsFromBaseLayer(),(0,n.Ew)(r)||this.map.setZoom(r)}else(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e)}},{key:"addTo",value:function(e){this.map=e,this.createOLLayer_(null),this.fire(o.GY)}},{key:"createOLLayer_",value:function(){var e=this.zIndex_;if(!(0,n.Ft)(this.options)&&!(0,n.Ft)(this.options.minScale)&&!(0,n.Ft)(this.options.maxScale)){var t=this.map.getProjection().units;this.options.minResolution=(0,n.AC)(this.options.minScale,t),this.options.maxResolution=(0,n.AC)(this.options.maxScale,t)}var r=this.createOLSource_(),i=(0,n.l7)({opacity:this.opacity_,source:r,extent:this.maxExtent_,style:this.style,minResolution:this.options.minResolution,maxResolution:this.options.maxResolution},this.vendorOptions_,!0);this.ol3Layer=new a.Z(i),this.map.getMapImpl().addLayer(this.ol3Layer),this.fire(o.GY),this.setVisible(this.visibility),null!==e&&this.setZIndex(e),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom)}},{key:"getMinResolution",value:function(){return this.options.minResolution}},{key:"getMaxResolution",value:function(){return this.options.maxResolution}},{key:"createOLSource_",value:function(){var e=this.vendorOptions_.source;if((0,n.Ew)(this.vendorOptions_.source)){var t=this.convertToRGB_,r=this.bands_,i=this.nodata_,o=this.options.projection,a=[{url:this.url,nodata:i}];0!==r.length&&a.forEach((function(e){e.bands=r})),e=new s.Z({sources:a,convertToRGB:t,projection:o,normalize:this.normalize})}return e}},{key:"getMaxExtent",value:function(){var e=(0,l.U2)(this.map.getProjection().code),t=this.getOL3Layer().getProperties();return t.source.tileGrid?(this.extent_=t.source.getTileGrid().getExtent(),this.extentProj_=t.source.projection.getCode(),this.extent_=f.Z.transformExtent(this.extent_,this.extentProj_,e)):this.extent_=e.getExtent(),this.extent_}},{key:"setMaxExtent",value:function(e){if(this.getOL3Layer().setExtent(e),!0===this.tiled){var t=this.map.getResolutions();if((0,n.Ew)(t)&&!(0,n.Ew)(this.resolutions_)&&(t=this.resolutions_),!(0,n.Ew)(t)){var r=this.createOLSource_();this.ol3Layer.setSource(r)}}}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(e){this.legendUrl_=e}},{key:"refresh",value:function(){var e=this.getOL3Layer();(0,n.Ew)(e)||e.getSource().refresh()}},{key:"setFacadeObj",value:function(e){this.facadeLayer_=e}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,n.Ew)(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(e){var t=!1;return e instanceof g&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.version===e.version),t}}])&&p(t.prototype,r),c&&p(t,c),Object.defineProperty(t,"prototype",{writable:!1}),g}(c.Z)},95280:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(391),i=r(27811),o=r(40402),a=r.n(o),s=r(60894),l=r(40398),u=r(77055),c=r(57649),f=r(24615),h=r(54180),p=r(32828),d=r(73008),y=r(9220);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===g(o)?o:String(o)),n)}var i,o}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=A(e);if(t){var i=A(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}const b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(g,e);var t,r,o,h=v(g);function g(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(r=h.call(this,e,t)).popup_=null,r.tabPopup_=null,r.loadFeaturesPromise_=null,r.screenOverlayImg_=null,r.label_=e.label,r.extractStyles_=e.extractStyles,r.visibility=null==e.visibility||e.visibility,r.scaleLabel=e.scaleLabel,r.layers=e.layers,r.removeFolderChildren=e.removeFolderChildren,r}return t=g,(r=[{key:"setVisible",value:function(e){if(this.visibility=e,(0,l.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e),!(0,l.Ew)(this.screenOverlayImg_)){var t="none";!0===e&&(t="inherit"),this.screenOverlayImg_.style[t]=t}}},{key:"addTo",value:function(e){this.map=e,this.fire(u.GY),e.on(u.h9,this.setProjection_.bind(this),this),this.formater_=new d.Z({label:this.label_,extractStyles:this.extractStyles_}),this.loader_=new p.Z(this.map,this.url,this.formater_),this.ol3Layer=new c.Z((0,l.l7)({extent:this.maxExtent_,opacity:this.opacity_},this.vendorOptions_,!0)),this.updateSource_(),this.setVisible(this.visibility),null!==this.zIndex_&&this.setZIndex(this.zIndex_);var t=this.map.getMapImpl();this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom),t.addLayer(this.ol3Layer)}},{key:"selectFeatures",value:function(e,t,r){var i=e[0];if(!0===this.extract&&!(0,l.Ew)(i)){var o=i.getAttribute("name"),u=i.getAttribute("description"),c=i.getImpl().getOLFeature().getGeometry().getFirstCoordinate(),f=(0,n.Mp)(a(),{vars:{name:o,desc:u},parseToHtml:!1});this.tabPopup_={icon:"g-cartografia-comentarios",title:o,content:f};var h=this.map.getPopup();(0,l.Ew)(h)?(this.popup_=new s.Z,this.popup_.addTab(this.tabPopup_),this.map.addPopup(this.popup_,c)):h.addTab(this.tabPopup_)}}},{key:"unselectFeatures",value:function(){(0,l.Ew)(this.popup_)||(this.popup_.hide(),this.popup_=null)}},{key:"updateSource_",value:function(){var e=this;(0,l.Ew)(this.vendorOptions_.source)&&this.requestFeatures_().then((function(t){e.ol3Layer.setSource(new f.Z({loader:function(){var r=t.screenOverlay;if(e.facadeVector_.clear(),e.facadeVector_.addFeatures(t.features),e.fire(u.VX,[t.features]),e.loaded_=!0,!(0,l.Ew)(r)){var n=y.Z.addOverlayImage(r,e.map);e.setScreenOverlayImg(n)}}})),e.facadeVector_.addFeatures(t.features)}))}},{key:"setScreenOverlayImg",value:function(e){this.screenOverlayImg_=e}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,l.Ew)(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.removePopup(),this.options=null,this.map=null}},{key:"removePopup",value:function(){(0,l.Ew)(this.popup_)||(this.popup_.getTabs().length>1?this.popup_.removeTab(this.tabPopup_):this.map.removePopup())}},{key:"getFeaturesExtentPromise",value:function(e,t){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(e,t),a=y.Z.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(e){var t=y.Z.getFeaturesExtent(e.features,i);n(t)}))}))}},{key:"requestFeatures_",value:function(){var e=this;return(0,l.Ew)(this.loadFeaturesPromise_)&&(this.loadFeaturesPromise_=new Promise((function(t){e.loader_.getLoaderFn((function(e){t(e)}))(null,null,(0,i.U2)(e.map.getProjection().code),e.scaleLabel,e.layers,e.removeFolderChildren)}))),this.loadFeaturesPromise_}},{key:"equals",value:function(e){var t=!1;return e instanceof g&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.extract===e.extract),t}}])&&m(t.prototype,r),o&&m(t,o),Object.defineProperty(t,"prototype",{writable:!1}),g}(h.Z)},15967:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(40398),i=r(68079),o=r(89437);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,r,i,a=u(c);function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this,t)).vendorOptions_=r,e.map=null,e.ol3Layer=null,e.options=t,e.visibility=!1!==e.options.visibility,e.displayInLayerSwitcher=!1!==e.options.displayInLayerSwitcher,e.zIndex_=null,e.opacity_=e.options.opacity||1,e.legendUrl_=(0,n.wQ)([M.config.THEME_URL,o.Z.LEGEND_DEFAULT]),e.minZoom=e.options.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=e.options.maxZoom||Number.POSITIVE_INFINITY,e.userMaxExtent=t.maxExtent,e}return t=c,(r=[{key:"isVisible",value:function(){return(0,n.Ew)(this.ol3Layer)?this.visibility:this.ol3Layer.getVisible()}},{key:"isQueryable",value:function(){return!1}},{key:"inRange",value:function(){var e=!1;if(!(0,n.Ew)(this.ol3Layer)){var t=this.map.getMapImpl().getView().getResolution(),r=this.ol3Layer.getMaxResolution();e=t>=this.ol3Layer.getMinResolution()&&t<=r}return e}},{key:"setVisible",value:function(e){this.visibility=e,(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e)}},{key:"getMinZoom",value:function(){return(0,n.Ew)(this.getOL3Layer())||(this.minZoom=this.getOL3Layer().getMinZoom()),this.minZoom}},{key:"setMinZoom",value:function(e){this.minZoom=e,(0,n.Ew)(this.getOL3Layer())||this.getOL3Layer().setMinZoom(e)}},{key:"getMaxZoom",value:function(){return(0,n.Ew)(this.getOL3Layer())||(this.maxZoom=this.getOL3Layer().getMaxZoom()),this.maxZoom}},{key:"setMaxZoom",value:function(e){this.maxZoom=e,(0,n.Ew)(this.getOL3Layer())||this.getOL3Layer().setMaxZoom(e)}},{key:"getZIndex",value:function(){return(0,n.Ew)(this.getOL3Layer())||(this.zIndex_=this.getOL3Layer().getZIndex()),this.zIndex_}},{key:"setZIndex",value:function(e){this.zIndex_=e,(0,n.Ew)(this.getOL3Layer())||this.getOL3Layer().setZIndex(e)}},{key:"getOpacity",value:function(){return(0,n.Ew)(this.getOL3Layer())||(this.opacity_=this.getOL3Layer().getOpacity()),this.opacity_}},{key:"setOpacity",value:function(e){var t=e;!(0,n.Ew)(e)&&(0,n.HD)(e)&&(t=Number(e)),this.opacity_=t,(0,n.Ew)(this.getOL3Layer())||this.getOL3Layer().setOpacity(t)}},{key:"getOL3Layer",value:function(){return this.ol3Layer}},{key:"setOL3Layer",value:function(e){var t=this.map.getMapImpl();return t.removeLayer(this.ol3Layer),this.ol3Layer=e,t.addLayer(e),this}},{key:"getMap",value:function(){return this.map}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setMaxExtent",value:function(e){this.ol3Layer.setExtent(e)}},{key:"getMaxExtent",value:function(){this.ol3Layer.getExtent()}},{key:"setLegendURL",value:function(e){this.legendUrl_=e}},{key:"getNumZoomLevels",value:function(){return this.numZoomLevels||20}},{key:"unselectFeatures",value:function(e,t,r){}},{key:"selectFeatures",value:function(e,t,r){}}])&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.Z)},94476:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(40398),i=r(27811),o=r(17246),a=r(36839),s=r(36181),l=r(26185),u=r(2532),c=r(99075),f=r(15967),h=r(18798);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var _=function(e,t,r){for(var n=(0,s.dz)(e)/t,i=new Array(r+1),o=0;o<r+1;o+=1)i[o]=n/Math.pow(2,o);return i};const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(m,e);var t,r,f,p=g(m);function m(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=p.call(this,r,n)).tileLoadFunction=e.tileLoadFunction||null,t.url_=e.url,t.source_=e.source,t.maxExtent_=e.maxExtent||null,t.opacity_="number"==typeof e.opacity?e.opacity:1,t.zIndex_=c.Z.Z_INDEX.MBTiles,t.maxZoomLevel_=e.maxZoomLevel||null,t.visibility=!1!==e.visibility||e.visibility,t.crossOrigin=null===r.crossOrigin||!1===r.crossOrigin?void 0:"anonymous",t}return t=m,(r=[{key:"setVisible",value:function(e){var t=this;this.visibility=e,!0===e&&!0!==this.transparent?(this.map.getBaseLayers().forEach((function(e){!e.equals(t.facadeLayer_)&&e.isVisible()&&e.setVisible(!1)})),(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e),this.map.getImpl().updateResolutionsFromBaseLayer()):(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e)}},{key:"getExtentFromProvider",value:function(){var e=this;return new Promise((function(t){e.fetchSource().then((function(r){r.getExtent().then((function(r){var n,o=e.map.getProjection().code;r&&(n=(0,i.$A)(r,"EPSG:4326",o)),t(n)}))}))}))}},{key:"getMaxExtent",value:function(){return this.maxExtent_||this.getExtentFromProvider()||(this.maxExtent_=this.map.getExtent()),this.maxExtent_}},{key:"getMaxZoomLevel",value:function(){return this.maxZoomLevel_}},{key:"addTo",value:function(e){var t=this;this.map=e;var r=this.map.getProjection().code,n=(0,i.U2)(r),o=n.getExtent();if(this.tileLoadFunction){var a=_(o,256,this.maxZoomLevel_||28);this.maxExtent_=this.maxExtent_||o,this.ol3Layer=this.createLayer({resolutions:a,extent:this.maxExtent_||o,sourceExtent:o,projection:n}),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom),this.map.getMapImpl().addLayer(this.ol3Layer)}else this.fetchSource().then((function(e){e.getMaxZoomLevel().then((function(r){t.maxZoomLevel_||(t.maxZoomLevel_=r);var i=_(o,256,t.maxZoomLevel_);t.getExtentFromProvider().then((function(r){t.maxExtent_=t.maxExtent_||r||o,t.ol3Layer=t.createLayer({tileProvider:e,resolutions:i,extent:t.maxExtent_,sourceExtent:o,projection:n}),t.ol3Layer.setMaxZoom(t.maxZoom),t.ol3Layer.setMinZoom(t.minZoom),t.map.getMapImpl().addLayer(t.ol3Layer)}))}))}))}},{key:"createLayer",value:function(e){var t=this,r=this.loadTileWithProvider;return this.tileLoadFunction&&(r=this.loadTile),new o.Z((0,n.l7)({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:this.maxExtent_||e.sourceExtent,source:new l.Z({url:"{z},{x},{y}",projection:e.projection,crossOrigin:this.crossOrigin,tileLoadFunction:function(n){return r(n,e.tileProvider,t)},tileGrid:new a.Z({extent:e.sourceExtent,origin:(0,s.hC)(e.sourceExtent),resolutions:e.resolutions})})},this.vendorOptions_,!0))}},{key:"loadTile",value:function(e,t,r){var n=e,i=e.getTileCoord();r.tileLoadFunction(i[0],i[1],-i[2]-1).then((function(e){n.getImage().src=e||h.p}))}},{key:"loadTileWithProvider",value:function(e,t){var r=e,n=e.getTileCoord(),i=t.getTile([n[0],n[1],-n[2]-1]);r.getImage().src=i}},{key:"fetchSource",value:function(){var e=this;return new Promise((function(t,r){if(e.tileProvider_)t(e.tileProvider_);else if(e.source_){var n=new h.Z(e.source_);e.tileProvider_=n,t(n)}else e.url_?window.fetch(e.url_).then((function(r){e.source=r;var n=new h.Z(r);e.tileProvider_=n,t(n)})):r(new Error((0,u.NA)("exception").no_source))}))}},{key:"setFacadeObj",value:function(e){this.facadeLayer_=e}},{key:"setMaxExtent",value:function(e){this.ol3Layer.setExtent(e)}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,n.Ew)(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(e){var t=!1;return e instanceof m&&(t=this.name===e.name),t}},{key:"cloneOLLayer",value:function(){var e=null;if(null!=this.ol3Layer){var t=this.ol3Layer.getProperties();e=new o.Z(t)}return e}}])&&d(t.prototype,r),f&&d(t,f),Object.defineProperty(t,"prototype",{writable:!1}),m}(f.Z)},36472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(40398),i=r(391),o=r(60894),a=r(37130),s=r.n(a),l=r(27811),u=r(17246),c=r(66327),f=r(67156),h=r(36839),p=r(36181),d=r(18798),y=r(77055),g=r(7707),m=r(2532),_=r(99075),v=r(54180);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===A(o)?o:String(o)),n)}var i,o}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var I=function(e,t,r){for(var n=(0,p.dz)(e)/t,i=new Array(r),o=0;o<r;o+=1)i[o]=n/Math.pow(2,o);return i};const S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(A,e);var t,r,a,v=E(A);function A(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),(t=v.call(this,r,n)).tileLoadFunction_=e.tileLoadFunction||null,t.url_=e.url,t.source_=e.source,t.style_=e.style,t.tileSize_="number"==typeof e.tileSize?e.tileSize:256,t.maxExtent_=e.maxExtent||null,t.maxZoomLevel_="number"==typeof e.maxZoomLevel?e.maxZoomLevel:0,t.opacity_="number"==typeof r.opacity?r.opacity:1,t.zIndex_=_.Z.Z_INDEX.MBTilesVector,t.visibility=!1!==e.visibility||e.visibility,t}return t=A,(r=[{key:"setVisible",value:function(e){this.visibility=e,(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e)}},{key:"addTo",value:function(e){var t=this;this.map=e;var r=this.map.getProjection().code,n=(0,l.U2)(r),i=n.getExtent();if(this.tileLoadFunction_){var o=I(i,256,this.maxZoomLevel_||28);this.ol3Layer=this.createLayer({resolutions:o,extent:i,sourceExtent:i,projection:n}),this.ol3Layer.getSource().on("tileloaderror",(function(e){return t.checkAllTilesLoaded_(e)})),this.ol3Layer.getSource().on("tileloadend",(function(e){return t.checkAllTilesLoaded_(e)})),this.map.on(y.l8,(function(){if(t.map){var e=t.map.getZoom();t.lastZoom_!==e&&(t.features_.length=0,t.lastZoom_=e)}})),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom),this.map.getMapImpl().addLayer(this.ol3Layer)}else this.fetchSource().then((function(e){e.getMaxZoomLevel().then((function(o){t.maxZoomLevel_||(t.maxZoomLevel_=o);var a=I(i,256,t.maxZoomLevel_);t.tileProvider_=e,t.tileProvider_.getExtent().then((function(o){var s=o;s&&(s=(0,l.$A)(o,"EPSG:4326",r)),t.tileProvider_.getFormat().then((function(r){t.ol3Layer=t.createLayer({tileProvider:e,resolutions:a,extent:s,sourceExtent:i,projection:n,format:r}),t.ol3Layer.getSource().on("tileloaderror",(function(e){return t.checkAllTilesLoaded_(e)})),t.ol3Layer.getSource().on("tileloadend",(function(e){return t.checkAllTilesLoaded_(e)})),t.map.on(y.l8,(function(){if(t.map){var e=t.map.getZoom();t.lastZoom_!==e&&(t.features_.length=0,t.lastZoom_=e)}})),t.ol3Layer.setMaxZoom(t.maxZoom),t.ol3Layer.setMinZoom(t.minZoom),t.map.getMapImpl().addLayer(t.ol3Layer)}))}))}))}))}},{key:"createLayer",value:function(e){var t=this,r=this.loadVectorTileWithProvider;this.tileLoadFunction_&&(r=this.loadVectorTile);var i=new g.Z;return new c.Z((0,n.l7)({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:this.maxExtent_||e.sourceExtent,source:new f.Z({projection:e.projection,url:"{z},{x},{y}",tileLoadFunction:function(n){return r(n,i,e,t)},tileGrid:new h.Z({extent:e.sourceExtent,origin:(0,p.hC)(e.sourceExtent),resolutions:e.resolutions})})},this.vendorOptions_,!0))}},{key:"loadVectorTile",value:function(e,t,r,n){e.setState(1),e.setLoader((function(r,i,o){var a=e.getTileCoord();n.tileLoadFunction_(a[0],a[1],-a[2]-1).then((function(n){if(n)try{var i=new Uint8Array(n),a=t.readFeatures(i,{extent:r,featureProjection:o});e.setFeatures(a),e.setState(2)}catch(t){e.setState(3)}else e.setState(3)}))}))}},{key:"loadVectorTileWithProvider",value:function(e,t,r){e.setState(1),e.setLoader((function(n,i,o){var a=e.getTileCoord();r.tileProvider.getVectorTile([a[0],a[1],-a[2]-1]).then((function(r){if(r){var i=t.readFeatures(r,{extent:n,featureProjection:o});e.setFeatures(i),e.setState(2)}else e.setState(3)}))}))}},{key:"fetchSource",value:function(){var e=this;return new Promise((function(t,r){if(e.tileProvider_)t(e.tileProvider_);else if(e.source_){var n=new d.Z(e.source_);t(n)}else e.url_?window.fetch(e.url_).then((function(r){e.source=r;var n=new d.Z(r);e.tileProvider_=n,t(n)})):r(new Error((0,m.NA)("exception").no_source))}))}},{key:"selectFeatures",value:function(e,t,r){var a=e[0];if(!0===this.extract&&(this.unselectFeatures(),!(0,n.Ew)(a))){var l=a.getAttribute("vendor.mapea.click");if((0,n.mf)(l))l(r,a);else{var u=(0,i.Mp)(s(),{vars:this.parseFeaturesForTemplate_(e),parseToHtml:!1}),c={icon:"g-cartografia-pin",title:this.name,content:u},f=this.map.getPopup();(0,n.Ew)(f)?((f=new o.Z).addTab(c),this.map.addPopup(f,t)):f.addTab(c)}}}},{key:"setFacadeObj",value:function(e){this.facadeLayer_=e}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,n.Ew)(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(e){var t=!1;return e instanceof A&&(t=this.name===e.name,t=t&&this.extract===e.extract),t}},{key:"getFeatures",value:function(){var e=[];if(this.ol3Layer){var t=this.ol3Layer.getSource().tileCache;if(0===t.getCount())return e;var r=t.peekFirstKey().split("/").map(Number)[0];t.forEach((function(t){if(t.tileCoord[0]===r&&2===t.getState())for(var n=t.getSourceTiles(),i=0,o=n.length;i<o;i+=1){var a=n[i].getFeatures();a&&(e=e.concat(a))}}))}return e}},{key:"checkAllTilesLoaded_",value:function(e){var t=this.map.getProjection().code,r=e.tile.getTileCoord(),n=(0,l.U2)(t);this.ol3Layer.getSource().getTileCacheForProjection(n).getValues().some((function(e){var t=e.getTileCoord(),n=e.getState();return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]||1!==n}))&&!this.loaded_&&(this.loaded_=!0,this.facadeLayer_.fire(y.VX))}},{key:"cloneOLLayer",value:function(){var e=null;if(null!=this.ol3Layer){var t=this.ol3Layer.getProperties();e=new u.Z(t)}return e}}])&&b(t.prototype,r),a&&b(t,a),Object.defineProperty(t,"prototype",{writable:!1}),A}(v.Z)},68189:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var n=r(67156),i=r(66327),o=r(391),a=r(37130),s=r.n(a),l=r(60894),u=r(40398),c=r(77055),f=r(82493),h=r(57223),p=r(7707),d=r(27811),y=r(62718),g=r(44993),m=r(26890),_=r(50729),v=r(54180),A=r(9220);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===b(o)?o:String(o)),n)}var i,o}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}const S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(b,e);var t,r,a,v=x(b);function b(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(n=v.call(this,t,r)).formater_=null,n.popup_=null,n.lastZoom_=-1,n.projection_=e.projection||"EPSG:3857",n.features_=[],n.mode_=e.mode,n.loaded_=!1,n.opacity_=e.opacity||1,n.visibility_=!1!==e.visibility,n.layers_=e.layers,n.extract=e.extract,n}return t=b,(r=[{key:"addTo",value:function(e){var t=this;this.map=e,this.fire(c.GY),void 0!==this.layers_?this.formater_=new p.Z({layers:this.layers_,featureClass:this.mode_===_.x.FEATURE?g.Z:m.ZP}):this.formater_=new p.Z({featureClass:this.mode_===_.x.FEATURE?g.Z:m.ZP});var r=this.maxExtent_||this.facadeVector_.getMaxExtent(),o=new n.Z({format:this.formater_,url:this.url,projection:this.projection_});o.on(f.Z.TILELOADERROR,(function(e){return t.checkAllTilesLoaded_(e)})),this.ol3Layer=new i.Z((0,u.l7)({source:o,extent:r},this.vendorOptions_,!0)),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom),this.setOpacity(this.opacity_),this.setVisible(this.visibility_),this.map.getMapImpl().addLayer(this.ol3Layer),this.map.on(c.l8,(function(){if(t.map){var e=t.map.getZoom();t.lastZoom_!==e&&(t.features_.length=0,t.lastZoom_=e)}})),this.map.on(c.tP,(function(e){if(t.map){var r=t.map.getContainer().parentElement.parentElement.id;document.getElementById(r).style.cursor="inherit",t.map.getMapImpl().forEachFeatureAtPixel(e.pixel,(function(e){e&&(document.getElementById(r).style.cursor="pointer")}))}})),setTimeout((function(){var e=t.map.getLayers().filter((function(e){var r=void 0===e.getImpl().layers_||e.getImpl().layers_===t.layers_;return e.url===t.url&&r}));e.length>0&&null!==e[0].getStyle()&&e[0].setStyle(e[0].getStyle())}),10)}},{key:"selectFeatures",value:function(e,t,r){var n=e[0];if(!0===this.extract&&(this.unselectFeatures(),!(0,u.Ew)(n))){var i=(0,o.Mp)(s(),{vars:this.parseFeaturesForTemplate_(e),parseToHtml:!1}),a={icon:"g-cartografia-pin",title:this.name,content:i},c=this.map.getPopup();(0,u.Ew)(c)?((c=new l.Z).addTab(a),this.map.addPopup(c,t)):c.addTab(a)}}},{key:"unselectFeatures",value:function(){(0,u.Ew)(this.popup_)||(this.popup_.hide(),this.popup_=null)}},{key:"removePopup",value:function(){(0,u.Ew)(this.popup_)||(this.popup_.getTabs().length>1?this.popup_.removeTab(this.tabPopup_):this.map.removePopup())}},{key:"getFeatures",value:function(e,t){var r=[];if(this.ol3Layer){var n=this.ol3Layer.getSource().tileCache;if(0===n.getCount())return r;var i=(0,y.Ul)(n.peekFirstKey())[0];n.forEach((function(e){if(e.tileCoord[0]===i&&e.getState()===h.Z.LOADED)for(var t=e.getSourceTiles(),n=0,o=t.length;n<o;n+=1){var a=t[n].getFeatures();a&&(r=r.concat(a))}}))}return r}},{key:"getFeatureById",value:function(e){var t=[];if(this.ol3Layer){var r=this.ol3Layer.getSource().tileCache,n=r.getCount();if(0===n)return t;for(var i=(0,y.Ul)(r.peekFirstKey())[0],o=0;o<n;o+=1){var a=r.getValues()[o];if(a.tileCoord[0]===i&&a.getState()===h.Z.LOADED)for(var s=a.getSourceTiles(),l=0,u=s.length;l<u;l+=1){var c=s[l].getFeatures().find((function(t){return t.getProperties().id===e}));c&&t.push(c)}}}return t}},{key:"checkAllTilesLoaded_",value:function(e){var t=e.tile.getTileCoord(),r=(0,d.U2)(this.projection_);this.ol3Layer.getSource().getTileCacheForProjection(r).getValues().every((function(e){var r=e.getTileCoord(),n=e.getState();return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||n!==h.Z.LOADING}))&&!this.loaded_&&(this.loaded_=!0,this.facadeVector_.fire(c.VX))}},{key:"getFeaturesExtentPromise",value:function(e,t){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(e,t),a=A.Z.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(e){var t=A.Z.getFeaturesExtent(e,i);n(t)}))}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"isLoaded",value:function(){return!0}},{key:"equals",value:function(e){var t=!1;return e instanceof b&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.extract===e.extract),t}}])&&w(t.prototype,r),a&&w(t,a),Object.defineProperty(t,"prototype",{writable:!1}),b}(v.Z)},65634:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var n=r(40398),i=r(37130),o=r.n(i),a=r(391),s=r(60894),l=r(77055),u=r(24613),c=r(54115),f=r(28513),h=r(82428),p=r(8553),d=r(7697),y=r(27811),g=r(49721),m=r(34795),_=r(14206);const v={"EPSG:3857":new m.Z({featureProjection:"EPSG:3857"})};class A extends g.Z{getFeaturesAtCoordinate(e,t=5){const r=this.getMapLibrePixels(e,t);if(!r)return[];const n=this.getLayer().get("queryRenderedFeaturesOptions")||{},i=this.getLayer().mapLibreMap?.queryRenderedFeatures(r,n).map((e=>this.toOlFeature(e)));return i||[]}prepareFrame(){return!0}renderFrame(e){const t=this.getLayer(),{mapLibreMap:r}=t,n=t.getMapInternal();if(!t||!n||!r)return null;const i=r.getCanvas(),{viewState:o}=e;r.jumpTo({center:(0,y.bU)(o.center),zoom:o.zoom-1,bearing:(0,d.Ux)(-o.rotation)});const a=t.getOpacity().toString();return i&&a!==i.style.opacity&&(i.style.opacity=a),i.isConnected?function(e,t){return e.width===Math.floor(t.size[0]*t.pixelRatio)&&e.height===Math.floor(t.size[1]*t.pixelRatio)}(i,e)||r.resize():n.render(),r.redraw(),r.getContainer()}getFeatures(e){const t=this.getLayer().getMapInternal()?.getCoordinateFromPixel(e);return Promise.resolve(this.getFeaturesAtCoordinate(t))}forEachFeatureAtCoordinate(e,t,r,n){const i=this.getFeaturesAtCoordinate(e,r);return i.forEach((e=>{const t=e.getGeometry();t instanceof _.ZP&&n(e,this.layer_,t)})),i?.[0]}getMapLibrePixels(e,t){if(!e)return;const r=this.getLayer().mapLibreMap?.project((0,y.bU)(e));if(void 0===r?.x||void 0===r?.y)return;let n=[r.x,r.y];if(t){const[e,r]=n;n=[[e-t,r-t],[e+t,r+t]]}return n}toOlFeature(e){const t=this.getLayer().getMapInternal(),r=t?.getView()?.getProjection()?.getCode()||"EPSG:3857";v[r]||(v[r]=new m.Z({featureProjection:r}));const n=v[r].readFeature(e);return n&&n.set("vectorTileFeature",e,!0),n}}const b=e=>{const t=e.filter((e=>null!=e&&e.trim&&e.trim())),r=t.map((e=>e.toLowerCase()));return[...new Set(r)].map((e=>t.find((t=>t.toLowerCase()===e))))},w=e=>{if(!e)return[];const{style:t}=e;if(!t)return[];const{sourceCaches:r}=t;let n=[];return Object.values(r).forEach((e=>{if(e.used){const{attribution:t}=e.getSource();t&&(n=n.concat(t.replace(/&copy;/g,"©").split(/(<a.*?<\/a>)/)))}})),b(n)};class E extends c.Z{mapLibreMap;loaded=!1;olListenersKeys=[];constructor(e){super({source:new p.Z({attributions:()=>w(this.mapLibreMap)}),...e})}disposeInternal(){(0,h.B)(this.olListenersKeys),this.loaded=!1,this.mapLibreMap&&(this.mapLibreMap.triggerRepaint=()=>{},this.mapLibreMap.remove()),super.disposeInternal()}setMapInternal(e){super.setMapInternal(e),e?this.loadMapLibreMap():this.dispose()}loadMapLibreMap(){this.loaded=!1;const e=this.getMapInternal();if(e&&this.olListenersKeys.push(e.on("change:target",this.loadMapLibreMap.bind(this))),!e?.getTargetElement())return;if(!this.getVisible())return void this.olListenersKeys.push(this.once("change:visible",this.loadMapLibreMap.bind(this)));const t=document.createElement("div");t.style.position="absolute",t.style.width="100%",t.style.height="100%";const r=this.get("mapLibreOptions");this.mapLibreMap=new u.Map(Object.assign({},r,{container:t,attributionControl:!1,interactive:!1,trackResize:!1})),this.mapLibreMap.on("sourcedata",(()=>{this.getSource()?.refresh()})),this.mapLibreMap.once("load",(()=>{this.loaded=!0,this.dispatchEvent(new f.ZP("load"))}))}createRenderer(){return new A(this)}}function x(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function C(){C=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new I(i||[]);return n(a,"_invoke",{value:b(e,r,s)}),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function h(){}function p(){}function d(){}var y={};l(y,o,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(P([])));m&&m!==t&&r.call(m,o)&&(y=m);var _=d.prototype=h.prototype=Object.create(y);function v(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function i(n,o,a,s){var l=c(e[n],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==S(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return i("throw",e,a,s)}))}s(l.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function b(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=c(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function w(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var i=c(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=d,n(_,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=l(d,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},v(A.prototype),l(A.prototype,a,(function(){return this})),e.AsyncIterator=A,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new A(u(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(_),l(_,s,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function P(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==S(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===S(o)?o:String(o)),n)}var i,o}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var i=k(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}const R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(h,e);var t,r,i,u,c,f=M(h);function h(e,t,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(i=f.call(this,t,r)).formater_=null,i.popup_=null,i.lastZoom_=-1,i.projection_=e.projection||"EPSG:3857",i.features_=[],i.mode_=e.mode,i.loaded_=!1,i.opacity_=t.opacity||1,i.visibility_=!1!==e.visibility,i.layers_=e.layers,i.extract=e.extract,i.url=e.url,i.maplibrestyle=e.maplibrestyle,i.options=t,i.vendorOptions=r,i.disableBackgroundColor=t.disableBackgroundColor,(0,n.HD)(e.style)&&(i.deserializedStyle=JSON.parse(decodeURIComponent(escape(window.atob(e.style.replace(" ","+")))))),i}return t=h,r=[{key:"addTo",value:function(e){this.map=e,this.fire(l.GY);var t=0!==Object.keys(this.vendorOptions).length?this.vendorOptions:{mapLibreOptions:{style:this.url||this.maplibrestyle}};this.ol3Layer=new E(t),this.setZooms_(),this.setResolutions_(),this.setVisible(this.visibility_),this.map.getMapImpl().addLayer(this.ol3Layer),void 0!==this.disableBackgroundColor&&this.changeDisableBackgroundColor_(),this.setOpacity(this.opacity_),this.url&&void 0===this.maplibrestyle&&this.setMapLibreStyleByUrl_(),this.deserializedStyle&&this.facade.setMapLibreStyleFromId(this.deserializedStyle)}},{key:"handlerLoadMapLibre_",value:function(){var e=this;return new Promise((function(t){if(void 0!==e.ol3Layer.mapLibreMap&&e.ol3Layer.mapLibreMap.loaded())t();else{var r=function r(){e.ol3Layer.mapLibreMap&&e.ol3Layer.mapLibreMap.loaded()&&(e.ol3Layer.un("change:visible",r),e.ol3Layer.mapLibreMap.off("load",r),t())};void 0===e.ol3Layer.mapLibreMap?e.ol3Layer.on("change:visible",r):e.ol3Layer.mapLibreMap.on("load",r)}}))}},{key:"handlerStyleLoad_",value:function(){var e=this;return new Promise((function(t){e.handlerLoadMapLibre_().then((function(){e.ol3Layer.mapLibreMap.isStyleLoaded()?t():e.ol3Layer.mapLibreMap.once("style.load",(function(){t()}))}))}))}},{key:"changeDisableBackgroundColor_",value:function(){var e=this;this.handlerStyleLoad_().then((function(){var t=e.ol3Layer.mapLibreMap,r=t.getStyle().layers.filter((function(e){return"background"===e.type}))[0].id;!0===e.disableBackgroundColor&&t.setPaintProperty(r,"background-color","transparent"),!1===e.disableBackgroundColor&&(t.setPaintProperty(r,"background-color","#f2f2f2"),t.setLayoutProperty(r,"visibility","visible"))}))}},{key:"setMapLibreStyleByUrl_",value:(u=C().mark((function e(){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.url).then((function(e){return e.json()}));case 2:t=e.sent,this.maplibrestyle=t;case 4:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=u.apply(e,t);function o(e){P(i,r,n,o,a,"next",e)}function a(e){P(i,r,n,o,a,"throw",e)}o(void 0)}))},function(){return c.apply(this,arguments)})},{key:"getMapLibreStyleFromId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.ol3Layer)return 0===e.length?this.ol3Layer.mapLibreMap.getStyle().layers:this.ol3Layer.mapLibreMap.getStyle().layers.filter((function(t){var r=t.id;return e.includes(r)}))}},{key:"setStyleMap",value:function(e){var t=this;this.handlerStyleLoad_().then((function(){t.ol3Layer.mapLibreMap.style._loaded=!1,t.ol3Layer.mapLibreMap.setStyle(e)}))}},{key:"setResolutions_",value:function(){if(!(0,n.Ft)(this.options)&&!(0,n.Ft)(this.options.minScale)&&!(0,n.Ft)(this.options.maxScale)){var e=this.map.getProjection().units;this.options.minResolution=(0,n.AC)(this.options.minScale,e),this.options.maxResolution=(0,n.AC)(this.options.maxScale,e),this.ol3Layer.setMinResolution(this.options.minResolution),this.ol3Layer.setMaxResolution(this.options.maxResolution)}(0,n.Ft)(this.options)||(0,n.Ft)(this.options.minResolution)||(0,n.Ft)(this.options.maxResolution)||(this.ol3Layer.setMinResolution(this.options.minResolution),this.ol3Layer.setMaxResolution(this.options.maxResolution))}},{key:"setZooms_",value:function(){this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom)}},{key:"setPaintProperty",value:function(e,t,r){var n=this;this.handlerStyleLoad_().then((function(){n.ol3Layer.mapLibreMap.isStyleLoaded()?n.ol3Layer.mapLibreMap.setPaintProperty(e,t,r):n.ol3Layer.mapLibreMap.once("style.load",(function(){n.ol3Layer.mapLibreMap.setPaintProperty(e,t,r)}))}))}},{key:"setLayoutProperty",value:function(e,t,r){var n=this;this.handlerStyleLoad_().then((function(){n.ol3Layer.mapLibreMap.isStyleLoaded()?n.ol3Layer.mapLibreMap.setLayoutProperty(e,t,r):n.ol3Layer.mapLibreMap.once("style.load",(function(){n.ol3Layer.mapLibreMap.setLayoutProperty(e,t,r)}))}))}},{key:"getFeaturesExtentPromise",value:function(){}},{key:"parseFeaturesForTemplate_",value:function(e){var t=this,r={features:[]};return e.forEach((function(e){var n={id:e.getId(),attributes:t.recursiveExtract_(e.getAttributes())};r.features.push(n)})),r}},{key:"recursiveExtract_",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[];return Object.keys(e).forEach((function(o){var a=!0;if((0,n.Ew)(t.showAttributes_)?(0,n.Ew)(t.hiddenAttributes_)||(a=!(0,n.q9)(t.hiddenAttributes_,o)):a=(0,n.q9)(t.showAttributes_,o),"vectorTileFeature"!==o)if("object"===S(e[o])&&e[o]&&!Array.isArray(e[o])){var s=t.recursiveExtract_(e[o],r?"".concat(r," | ").concat(o):o);i.push.apply(i,x(s))}else if(a){var l=(r?"".concat(r," | ").concat(o):o).split(" | ");i.push({key:r?"".concat(l[l.length-2]," | ").concat(l[l.length-1]):o,value:e[o]})}})),i}},{key:"selectFeatures",value:function(e,t,r){var i=e[0];if(!0===this.extract&&(this.unselectFeatures(),!(0,n.Ew)(i))){var l=(0,a.Mp)(o(),{vars:this.parseFeaturesForTemplate_(e),parseToHtml:!1}),u={icon:"g-cartografia-pin",title:this.name,content:l},c=this.map.getPopup();(0,n.Ew)(c)?((c=new s.Z).addTab(u),this.map.addPopup(c,t)):c.addTab(u)}}},{key:"unselectFeatures",value:function(){(0,n.Ew)(this.popup_)||(this.popup_.hide(),this.popup_=null)}},{key:"removePopup",value:function(){(0,n.Ew)(this.popup_)||(this.popup_.getTabs().length>1?this.popup_.removeTab(this.tabPopup_):this.map.removePopup())}},{key:"getFeatures",value:function(e,t){return[]}},{key:"getStyle",value:function(){}},{key:"getFeatureById",value:function(e){return this.features_.filter((function(t){return t.getId()===e}))[0]}},{key:"getProjection",value:function(){return this.projection_}},{key:"isLoaded",value:function(){return!0}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,n.Ew)(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),(0,n.Ew)(this.layers)||(this.layers.map(this.map.removeLayers,this.map),this.layers.length=0),this.map=null}},{key:"equals",value:function(e){return!1}}],r&&O(t.prototype,r),i&&O(t,i),Object.defineProperty(t,"prototype",{writable:!1}),h}(r(15967).Z)},39802:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(7508),i=r(391),o=r(37130),a=r.n(o),s=r(40398),l=r(77055),u=r(60894),c=r(24615),f=r(27811),h=r(14814),p=r(94857),d=r(87162),y=r(4833),g=r(8671),m=r(54180),_=r(9220);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===v(o)?o:String(o)),n)}var i,o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},b.apply(this,arguments)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}const I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(v,e);var t,r,o,m=E(v);function v(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(e=m.call(this,t,r)).describeFeatureType_=null,e.formater_=null,e.loader_=null,e.service_=null,e.loaded_=!1,e.bbox=t.bbox,(0,s.Ew)(e.options.getFeatureOutputFormat)&&(e.options.getFeatureOutputFormat="application/json"),e}return t=v,(r=[{key:"addTo",value:function(e){var t=this;b(x(v.prototype),"addTo",this).call(this,e),e.getImpl().on(l.Ve,(function(){return t.refresh()}))}},{key:"refresh",value:function(e){e&&this.facadeVector_.removeFeatures(this.facadeVector_.getFeatures(!0)),this.updateSource_(e)}},{key:"setCQL",value:function(e){this.vendorOptions_.cql=e,this.refresh(!0)}},{key:"updateSource_",value:function(e){var t=this;if((0,s.Ew)(this.vendorOptions_.source)){this.service_=new p.Z({url:this.url,namespace:this.namespace,name:this.name,limit:this.limit,offset:this.offset,format:this.format||"json",id:this.id,bbox:this.bbox,conditional:this.conditional,projection:this.map.getProjection(),getFeatureOutputFormat:this.options.getFeatureOutputFormat,describeFeatureTypeOutputFormat:this.options.describeFeatureTypeOutputFormat},this.vendorOptions_),/json/gi.test(this.options.getFeatureOutputFormat)?this.formater_=new n.Z({defaultDataProjection:(0,f.U2)(this.map.getProjection().code)}):this.formater_=new y.Z(this.name,this.version,this.map.getProjection()),this.loader_=new g.Z(this.map,this.service_,this.formater_);var r=this.ol3Layer.getSource();this.requestFeatures_().then((function(n){if(!0===e||(0,s.Ew)(r)){var i=new c.Z({loader:function(){t.loaded_=!0,t.facadeVector_.addFeatures(n),t.fire(l.VX,[n]),t.facadeVector_.redraw()}});t.ol3Layer.setSource(i)}else r.set("format",t.formater_),r.set("loader",t.loader_.getLoaderFn((function(e){t.loaded_=!0,t.facadeVector_.addFeatures(e),t.fire(l.VX,[e]),t.facadeVector_.redraw()}))),r.set("strategy",h.$6),r.changed()}))}}},{key:"selectFeatures",value:function(e,t,r){var n=e[0];if(!0===this.extract&&(this.unselectFeatures(),!(0,s.Ew)(n))){var o=n.getAttribute("vendor.mapea.click");if((0,s.mf)(o))o(r,n);else{var l=(0,i.Mp)(a(),{vars:this.parseFeaturesForTemplate_(e),parseToHtml:!1}),c={icon:"g-cartografia-pin",title:this.name,content:l},f=this.map.getPopup();(0,s.Ew)(f)?((f=new u.Z).addTab(c),this.map.addPopup(f,t)):f.addTab(c)}}}},{key:"getFeaturesExtentPromise",value:function(e,t){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(e,t),a=_.Z.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(e){var t=_.Z.getFeaturesExtent(e,i);n(t)}))}))}},{key:"getDescribeFeatureType",value:function(){var e=this;return(0,s.Ew)(this.describeFeatureType_)&&(this.describeFeatureType_=this.service_.getDescribeFeatureType().then((function(t){return(0,s.Ew)(t)||(e.formater_=new d.Z({geometryName:t.geometryName,defaultDataProjection:(0,f.U2)(e.map.getProjection().code)})),t}))),this.describeFeatureType_}},{key:"getDefaultValue",value:function(e){return"dateTime"===e?"0000-00-00T00:00:00":"date"===e?"0000-00-00":"time"===e?"00:00:00":"duration"===e?"P0Y":"int"===e||"number"===e||"float"===e||"double"===e||"decimal"===e||"short"===e||"byte"===e||"integer"===e||"long"===e||"negativeInteger"===e||"nonNegativeInteger"===e||"nonPositiveInteger"===e||"positiveInteger"===e||"unsignedLong"===e||"unsignedInt"===e||"unsignedShort"===e||"unsignedByte"===e?0:"hexBinary"===e?null:"-"}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"requestFeatures_",value:function(){var e=this;return new Promise((function(t){e.loader_.getLoaderFn((function(e){t(e)}))(null,null,(0,f.U2)(e.map.getProjection().code))}))}},{key:"equals",value:function(e){var t=!1;return e instanceof v&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.limit===e.limit,t=t&&this.offset===e.offset,t=t&&this.format===e.format,t=t&&this.extract===e.extract,t=t&&this.bbox===e.bbox,t=t&&this.id===e.id,t=t&&this.getFeatureOutputFormat===e.getFeatureOutputFormat,t=t&&this.describeFeatureTypeOutputFormat===e.describeFeatureTypeOutputFormat),t}}])&&A(t.prototype,r),o&&A(t,o),Object.defineProperty(t,"prototype",{writable:!1}),v}(m.Z)},48609:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(12417),i=r(68524),o=r(40398),a=r(77055),s=r(17246),l=r(10725),u=r(19529),c=r(99075);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(g,e);var t,r,f,y=d(g);function g(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=y.call(this,r,n)).resolutions_=null,t.facadeLayer_=null,t.hasAttributtion=!1,t.haveOSMorMapboxLayer=!1,!1===r.visibility&&(t.visibility=!1),t.zIndex_=c.Z.Z_INDEX[i.OSM],t}return t=g,(r=[{key:"setVisible",value:function(e){var t=this;if(this.visibility=e,!0===this.inRange())if(!0===e&&!1===this.transparent){this.map.getBaseLayers().forEach((function(e){!e.equals(t)&&e.isVisible()&&e.setVisible(!1)})),(0,o.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e);var r=this.map.getBbox();this.map.getImpl().updateResolutionsFromBaseLayer(),(0,o.Ew)(r)||this.map.setBbox(r)}else(0,o.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e)}},{key:"addTo",value:function(e){var t=this;this.map=e,this.fire(a.GY),this.ol3Layer=new s.Z((0,o.l7)({visible:this.visibility},this.vendorOptions_,!0)),this.updateSource_(),this.opacity_&&this.setOpacity(this.opacity_),this.map.getMapImpl().addLayer(this.ol3Layer),this.map.getImpl().getMapImpl().getControls().getArray().forEach((function(e){e instanceof l.Z&&(t.hasAttributtion=!0)}),this),this.hasAttributtion||this.facadeLayer_.attribution||(this.map.getMapImpl().addControl(new l.Z({className:"ol-attribution ol-unselectable ol-control ol-collapsed m-attribution",collapsible:!0})),this.hasAttributtion=!1),this.map.getMapImpl().updateSize();var r=this.map.getMapImpl().getSize(),n=this.map.getProjection().units;this.resolutions_=(0,o.Cp)(this.facadeLayer_.getMaxExtent(),r,16,n),this.isVisible()&&!this.inRange()&&this.setVisible(!1),null!==this.zIndex_&&this.setZIndex(this.zIndex_),null!==this.resolutions_&&this.setResolutions(this.resolutions_),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom);var i=!1===this.transparent||!0===this.options.animated;this.ol3Layer.set("animated",i),this.map.on(a.h9,(function(){return t.updateSource_()}))}},{key:"setResolutions",value:function(e){this.resolutions_=e,this.updateSource_(e)}},{key:"updateSource_",value:function(e){if((0,o.Ew)(e)&&!(0,o.Ew)(this.map)){this.map.getMapImpl().updateSize();var t=this.map.getMapImpl().getSize(),r=this.map.getProjection().units;this.resolutions_=(0,o.Cp)(this.facadeLayer_.getMaxExtent(),t,16,r)}if(!(0,o.Ew)(this.ol3Layer)&&(0,o.Ew)(this.vendorOptions_.source)){var n=this.facadeLayer_.getMaxExtent(),i=new u.Z({url:this.url});this.ol3Layer.setSource(i),this.ol3Layer.setExtent(n)}}},{key:"setFacadeObj",value:function(e){this.facadeLayer_=e}},{key:"setMaxExtent",value:function(e){this.ol3Layer.setExtent(e)}},{key:"getMinResolution",value:function(){}},{key:"getMaxResolution",value:function(){}},{key:"destroy",value:function(){var e=this,t=this.map.getMapImpl();(0,o.Ew)(this.ol3Layer)||(t.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map.getLayers().forEach((function(t){t instanceof n.Z&&(e.haveOSMorMapboxLayer=!0)})),this.haveOSMorMapboxLayer||this.map.getImpl().getMapImpl().getControls().getArray().forEach((function(t){t instanceof l.Z&&e.map.getImpl().getMapImpl().removeControl(t)})),this.map=null}},{key:"equals",value:function(e){var t=!1;return e instanceof g&&(t=this.url===e.url,t=t&&this.name===e.name),t}},{key:"cloneOLLayer",value:function(){var e=null;if(null!=this.ol3Layer){var t=this.ol3Layer.getProperties();e=new s.Z(t)}return e}}])&&h(t.prototype,r),f&&h(t,f),Object.defineProperty(t,"prototype",{writable:!1}),g}(r(15967).Z)},9538:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(68586),i=r(68524),o=r(99075);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,r,n,a=u(c);function c(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e,r,n)).zIndex_=o.Z.Z_INDEX[i.TMS],t.displayInLayerSwitcher=!1!==e.displayInLayerSwitcher,t}return t=c,(r=[{key:"equals",value:function(e){var t=!1;return e instanceof c&&(t=this.name===e.name),t}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Z)},54180:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(40398),i=r(391),o=r(60894),a=r(37130),s=r.n(a),l=r(77055),u=r(71085),c=r(27811),f=r(57649),h=r(24615),p=r(15967),d=r(9220),y=r(94551);function g(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===_(o)?o:String(o)),n)}var i,o}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}const E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(m,e);var t,r,a,p=b(m);function m(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(r=p.call(this,e,t)).facadeVector_=null,r.features_=[],r.postComposeEvtKey_=null,r.load_=!1,r.loaded_=!1,r.visibility=!1!==e.visibility,r.maxExtent_=e.maxExtent,r}return t=m,r=[{key:"addTo",value:function(e){this.map=e,this.fire(l.GY),e.on(l.h9,this.setProjection_.bind(this),this),this.ol3Layer=new f.Z(this.vendorOptions_),this.updateSource_(),this.opacity_&&this.setOpacity(this.opacity_),this.setVisible(this.visibility),this.map.getMapImpl().addLayer(this.ol3Layer),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom),this.ol3Layer.setExtent(this.maxExtent_)}},{key:"updateSource_",value:function(){(0,n.Ew)(this.vendorOptions_.source)&&((0,n.Ew)(this.ol3Layer.getSource())&&this.ol3Layer.setSource(new h.Z),this.redraw(),this.loaded_=!0,this.fire(l.VX,[this.features_]))}},{key:"inRange",value:function(){return!0}},{key:"parseFeaturesForTemplate_",value:function(e){var t=this,r={features:[]};return e.forEach((function(e){var n={id:e.getId(),attributes:t.recursiveExtract_(e.getAttributes())};r.features.push(n)})),r}},{key:"recursiveExtract_",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[];return Object.keys(e).forEach((function(o){var a=!0;if((0,n.Ew)(t.showAttributes_)?(0,n.Ew)(t.hiddenAttributes_)||(a=!(0,n.q9)(t.hiddenAttributes_,o)):a=(0,n.q9)(t.showAttributes_,o),"object"===_(e[o])&&e[o]&&!Array.isArray(e[o])){var s=t.recursiveExtract_(e[o],r?"".concat(r," | ").concat(o):o);i.push.apply(i,g(s))}else if(a){var l=(r?"".concat(r," | ").concat(o):o).split(" | ");i.push({key:r?"".concat(l[l.length-2]," | ").concat(l[l.length-1]):o,value:e[o]})}})),i}},{key:"addFeatures",value:function(e,t){var r=this;e.forEach((function(e){var t=r.features_.find((function(t){return t.equals(e)}));(0,n.Ew)(t)&&r.features_.push(e)})),t&&this.updateLayer_(),this.redraw()}},{key:"updateLayer_",value:function(){var e=this.facadeVector_.getStyle();(0,n.Ew)(e)||(e instanceof u.Z?this.facadeVector_.setStyle(e):e.apply(this.facadeVector_))}},{key:"getFeatures",value:function(e,t){var r=this.features_;return e||(r=t.execute(r)),r}},{key:"getFeatureById",value:function(e){return this.features_.filter((function(t){return t.getId()===e}))[0]}},{key:"removeFeatures",value:function(e){this.features_=this.features_.filter((function(t){return!e.includes(t)})),this.redraw()}},{key:"redraw",value:function(){var e=this.getOL3Layer();if(!(0,n.Ew)(e)){var t=e.getSource();g(t.getFeatures()).forEach(t.removeFeature,t);var r=this.facadeVector_.getFeatures();t.addFeatures(r.map(y.Z.facade2OLFeature))}}},{key:"getFeaturesExtent",value:function(e,t){var r=this.getFeatures(e,t),n=d.Z.getFeaturesExtent(r,this.map.getProjection().code);return null===n&&(n=this.map.getProjection().getExtent()),n}},{key:"selectFeatures",value:function(e,t,r){if(!0===this.extract){var a=e[0];if(!(0,n.Ew)(a)){var l=a.getAttribute("vendor.mapea.click");if((0,n.mf)(l))l(r,a);else{var u=(0,i.Mp)(s(),{vars:this.parseFeaturesForTemplate_(e),parseToHtml:!1}),c={icon:"g-cartografia-pin",title:this.name,content:u},f=this.map.getPopup();(0,n.Ew)(f)?((f=new o.Z).addTab(c),this.map.addPopup(f,t)):f.addTab(c)}}}}},{key:"unselectFeatures",value:function(){}},{key:"setFacadeObj",value:function(e){this.facadeVector_=e}},{key:"setProjection_",value:function(e,t){if(e.code!==t.code){var r=(0,c.U2)(e.code),n=(0,c.U2)(t.code);this.facadeVector_.getFeatures().forEach((function(e){return e.getImpl().getOLFeature().getGeometry().transform(r,n)}))}}},{key:"equals",value:function(e){var t=!1;return e instanceof m&&this.constructor===e.constructor&&(t=!0),t}},{key:"refresh",value:function(){this.getOL3Layer().getSource().clear()}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,n.Ew)(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}}],r&&v(t.prototype,r),a&&v(t,a),Object.defineProperty(t,"prototype",{writable:!1}),m}(p.Z)},99368:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(7508),i=r(40398),o=r(60894),a=r(391),s=r(37130),l=r.n(s),u=r(77055),c=r(24615),f=r(27811),h=r(14814),p=r(29128),d=r(87162),y=r(4833),g=r(8671),m=r(54180),_=r(9220);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===v(o)?o:String(o)),n)}var i,o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},b.apply(this,arguments)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}const I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(v,e);var t,r,s,m=E(v);function v(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(e=m.call(this,t,r)).describeFeatureType_=null,e.formater_=null,e.loader_=null,e.service_=null,e.loaded_=!1,e.popup_=null,(0,i.Ew)(e.options.getFeatureOutputFormat)&&(e.options.getFeatureOutputFormat="application/json"),e.GMLVersion_=e.options.getFeatureOutputFormat.toUpperCase().includes("GML")?e.options.getFeatureOutputFormat:null,e}return t=v,(r=[{key:"addTo",value:function(e){var t=this;b(x(v.prototype),"addTo",this).call(this,e),e.getImpl().on(u.Ve,(function(){return t.refresh()}))}},{key:"refresh",value:function(e){e&&this.facadeVector_.removeFeatures(this.facadeVector_.getFeatures(!0)),this.updateSource_(e)}},{key:"selectFeatures",value:function(e,t,r){var n=e[0];if(!0===this.extract&&(this.unselectFeatures(),!(0,i.Ew)(n))){var s=n.getAttribute("vendor.mapea.click");if((0,i.mf)(s))s(r,n);else{var u=(0,a.Mp)(l(),{vars:this.parseFeaturesForTemplate_(e),parseToHtml:!1}),c={icon:"g-cartografia-pin",title:this.name,content:u},f=this.map.getPopup();(0,i.Ew)(f)?((f=new o.Z).addTab(c),this.map.addPopup(f,t)):f.addTab(c)}}}},{key:"updateSource_",value:function(e){var t=this;if((0,i.Ew)(this.vendorOptions_.source)){this.service_=new p.Z({url:this.url,namespace:this.namespace,name:this.name,version:this.version,ids:this.ids,cql:this.cql,projection:this.map.getProjection(),getFeatureOutputFormat:this.options.getFeatureOutputFormat,describeFeatureTypeOutputFormat:this.options.describeFeatureTypeOutputFormat},this.options.vendor),/json/gi.test(this.options.getFeatureOutputFormat)?this.formater_=new n.Z({defaultDataProjection:(0,f.U2)(this.map.getProjection().code)}):this.formater_=new y.Z(this.map.getProjection(),this.GMLVersion_),this.loader_=new g.Z(this.map,this.service_,this.formater_);var r=this.ol3Layer.getSource();this.requestFeatures_().then((function(n){if(!0===e||(0,i.Ew)(r)){var o=new c.Z({loader:function(){t.loaded_=!0,t.facadeVector_.addFeatures(n),t.fire(u.VX,[n]),t.facadeVector_.redraw()}});t.ol3Layer.setSource(o)}else r.set("format",t.formater_),r.set("loader",t.loader_.getLoaderFn((function(e){t.loaded_=!0,t.facadeVector_.addFeatures(e),t.fire(u.VX,[e]),t.facadeVector_.redraw()}))),r.set("strategy",h.$6),r.changed()}))}}},{key:"getFeaturesExtentPromise",value:function(e,t){var r=this;return new Promise((function(n){var i=r.map.getProjection().code;if(!0===r.isLoaded()){var o=r.getFeatures(e,t),a=_.Z.getFeaturesExtent(o,i);n(a)}else r.requestFeatures_().then((function(e){var t=_.Z.getFeaturesExtent(e,i);n(t)}))}))}},{key:"setCQL",value:function(e){this.cql=e,this.refresh(!0)}},{key:"getDescribeFeatureType",value:function(){var e=this;return(0,i.Ew)(this.describeFeatureType_)&&(this.describeFeatureType_=this.service_.getDescribeFeatureType().then((function(t){return(0,i.Ew)(t)||(e.formater_=new d.Z({geometryName:t.geometryName,defaultDataProjection:(0,f.U2)(e.map.getProjection().code)})),t}))),this.describeFeatureType_}},{key:"getDefaultValue",value:function(e){return"dateTime"===e?"0000-00-00T00:00:00":"date"===e?"0000-00-00":"time"===e?"00:00:00":"duration"===e?"P0Y":"int"===e||"number"===e||"float"===e||"double"===e||"decimal"===e||"short"===e||"byte"===e||"integer"===e||"long"===e||"negativeInteger"===e||"nonNegativeInteger"===e||"nonPositiveInteger"===e||"positiveInteger"===e||"unsignedLong"===e||"unsignedInt"===e||"unsignedShort"===e||"unsignedByte"===e?0:"hexBinary"===e?null:"-"}},{key:"isLoaded",value:function(){return this.loaded_}},{key:"requestFeatures_",value:function(){var e=this;return new Promise((function(t){e.loader_.getLoaderFn((function(e){t(e)}))(null,null,(0,f.U2)(e.map.getProjection().code))}))}},{key:"equals",value:function(e){var t=!1;return e instanceof v&&(t=this.url===e.url,t=t&&this.namespace===e.namespace,t=t&&this.name===e.name,t=t&&this.ids===e.ids,t=t&&this.cql===e.cql,t=t&&this.version===e.version,t=t&&this.extract===e.extract),t}}])&&A(t.prototype,r),s&&A(t,s),Object.defineProperty(t,"prototype",{writable:!1}),v}(m.Z)},71321:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(40398),i=r(89437),o=r(68524),a=r(9396),s=r(54414),l=r(77055),u=r(17246),c=r(94867),f=r(27811),h=r(36839),p=r(36181),d=r(9220),y=r(99075),g=r(15967),m=r(19441),_=r(43938),v=r(52568),A=r(95934);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===b(o)?o:String(o)),n)}var i,o}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=I(e);if(t){var i=I(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(I,e);var t,r,g,b=x(I);function I(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,I),(e=b.call(this,t,r)).facadeLayer_=null,e.options=t,e.layers=[],e.displayInLayerSwitcher_=!0,e.getCapabilitiesPromise=null,e.extentPromise=null,e.extent=null,e.resolutions_=null,e.extentProj_=null,!1===e.options.visibility&&(e.visibility=!1),(0,n.Ew)(e.tiled)&&(e.tiled=!0!==e.options.singleTile),(0,n.Ew)(e.options.numZoomLevels)&&(e.options.numZoomLevels=20),(0,n.Ew)(e.options.animated)&&(e.options.animated=!1),e.format=(0,n.Ew)(e.options.format)?"image/png":e.options.format,e.styles=e.options.styles||"",e.sldBody=t.sldBody,e.zIndex_=y.Z.Z_INDEX[o.WMS],e.minZoom=t.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=t.maxZoom||Number.POSITIVE_INFINITY,e.useCapabilities=!1!==t.useCapabilities,e.ratio=t.ratio||1,t.ratio<1&&console.error("El ratio debe ser 1 o superior"),e.crossOrigin=null===t.crossOrigin||!1===t.crossOrigin?void 0:"anonymous",e.isWMSfull=t.isWMSfull,e}return t=I,(r=[{key:"setVisible",value:function(e){var t=this;if(this.visibility=e,!0===e&&!0!==this.transparent){this.map.getBaseLayers().filter((function(e){return!e.equals(t.facadeLayer_)&&e.isVisible()})).forEach((function(e){return e.setVisible(!1)})),(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e);var r=this.map.getZoom();this.map.getImpl().updateResolutionsFromBaseLayer(),(0,n.Ew)(r)||this.map.setZoom(r)}else(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e)}},{key:"isQueryable",value:function(){return!1!==this.options.queryable}},{key:"addTo",value:function(e){var t=this;if(this.map=e,this.fire(l.GY),!(0,n.Ft)(this.options)&&!(0,n.Ft)(this.options.minScale)&&!(0,n.Ft)(this.options.maxScale)){var r=this.map.getProjection().units;this.options.minResolution=(0,n.AC)(this.options.minScale,r),this.options.maxResolution=(0,n.AC)(this.options.maxScale,r)}this.isWMSfull?this.addAllLayers_():this.useCapabilities?this.getCapabilities().then((function(e){t.addSingleLayer_(e)})):this.addSingleLayer_(null),this.legendUrl_===(0,n.wQ)([M.config.THEME_URL,i.Z.LEGEND_DEFAULT])&&(this.legendUrl_=(0,n.h1)(this.url,{SERVICE:"WMS",VERSION:this.version,REQUEST:"GetLegendGraphic",LAYER:this.name,FORMAT:"image/png"}))}},{key:"setResolutions",value:function(e){var t=this;this.resolutions_=e,this.facadeLayer_.calculateMaxExtent().then((function(r){if(!(0,n.Ew)(t.ol3Layer)){var i=t.options.minResolution,o=t.options.maxResolution,a=t.createOLSource_(e,i,o,r);t.ol3Layer.setSource(a),t.ol3Layer.setExtent(r)}}))}},{key:"addSingleLayer_",value:function(e){var t=this.facadeLayer_.userMaxExtent;if(e){var r=e.capabilities.Capability.Layer.Layer;if((0,n.kJ)(r)){var i=this.formatCapabilities_(r,this);this.addCapabilitiesMetadata(i)}this.addCapabilitiesMetadata(r),(0,n.Ew)(t)&&(t=this.facadeLayer_.calculateMaxExtentWithCapabilities(e),this.facadeLayer_.maxExtent_=t)}var o=this.options.minResolution,a=this.options.maxResolution,s=this.opacity_,l=this.zIndex_,f=this.visibility&&!1!==this.options.visibility,h=this.map.getResolutions();if((0,n.Ew)(h)&&!(0,n.Ew)(this.resolutions_))h=this.resolutions_;else if((0,n.Ew)(h)){var p=this.getNumZoomLevels(),d=this.map.getMapImpl().getSize(),y=this.map.getProjection().units;h=(0,n.Ew)(o)||(0,n.Ew)(a)?(0,n.Cp)(t,d,p,y):(0,n._5)(o,a,p)}var g=this.createOLSource_(h,o,a,t);!0===this.tiled?this.ol3Layer=new u.Z((0,n.l7)({visible:f,source:g,extent:t,minResolution:o,maxResolution:a,opacity:s,zIndex:l},this.vendorOptions_,!0)):this.ol3Layer=new c.Z((0,n.l7)({visible:f,source:g,extent:t,minResolution:o,maxResolution:a,opacity:s,zIndex:l},this.vendorOptions_,!0)),this.map.getMapImpl().addLayer(this.ol3Layer),this.setVisible(this.visibility),null!==l&&this.setZIndex(l),null!==this.resolutions_&&this.setResolutions(this.resolutions_);var m=!1===this.transparent||!0===this.options.animated;this.ol3Layer.set("animated",m),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom)}},{key:"formatCapabilities_",value:function(e,t){for(var r=e,n=0,i=r.length;n<i;n+=1)if(void 0!==r[n]&&void 0!==r[n].Name&&r[n].Name===t.facadeLayer_.name){r=r[n];try{this.legendUrl_=r.Style[0].LegendURL[0].OnlineResource}catch(e){}}else if(void 0!==r[n]&&void 0!==r[n].Layer&&void 0!==r[n].Layer.filter((function(e){return e.Name===t.facadeLayer_.name}))[0]){r=r[n].Layer.filter((function(e){return e.Name===t.facadeLayer_.name}))[0];try{this.legendUrl_=r.Style[0].LegendURL[0].OnlineResource}catch(e){}}return r}},{key:"addCapabilitiesMetadata",value:function(e){var t={abstract:(0,n.Ew)(e.Abstract)?"":e.Abstract,attribution:(0,n.Ew)(e.Attribution)?"":e.Attribution,metadataURL:(0,n.Ew)(e.MetadataURL)?"":e.MetadataURL,style:(0,n.Ew)(e.Style)?"":e.Style};void 0===this.facadeLayer_.capabilitiesMetadata&&(this.facadeLayer_.capabilitiesMetadata=t)}},{key:"createOLSource_",value:function(e,t,r,i){var o=this,a=this.vendorOptions_.source;if((0,n.Ew)(this.vendorOptions_.source)){var s={LAYERS:this.name,VERSION:this.version,TRANSPARENT:this.transparent,FORMAT:this.format,STYLES:this.styles};"1.3.0"!==this.version&&(s.TILED=this.tiled),(0,n.Ew)(this.sldBody)||(s.SLD_BODY=this.sldBody),(0,n.Ew)(this.options.params)||Object.keys(this.options.params).forEach((function(e){s[e.toUpperCase()]=o.options.params[e]}));var l=this.opacity_,u=this.zIndex_;if(!0===this.tiled){var c=!!this.useCapabilities&&new h.Z({resolutions:e,extent:i,origin:(0,p.hC)(i)});a=new v.Z({crossOrigin:this.crossOrigin,url:this.url,params:s,tileGrid:c,extent:i,minResolution:t,maxResolution:r,opacity:l,zIndex:u})}else a=new A.Z({crossOrigin:this.crossOrigin,url:this.url,params:s,extent:i,minResolution:t,maxResolution:r,opacity:l,zIndex:u,ratio:this.ratio})}return a}},{key:"addAllLayers_",value:function(){var e=this;this.getCapabilities().then((function(t){e.useCapabilities&&((e.map.collectionCapabilities.find((function(t){return t.url===e.url}))||{capabilities:!1}).capabilites=t),t.getLayers().forEach((function(t){var r=new a.Z({url:e.url,name:t.name,version:t.version,tiled:e.tiled,useCapabilities:e.useCapabilities},e.vendorOptions_);e.layers.push(r)})),e.map.addWMS(e.layers);var r=e.layers.length;e.layers.forEach((function(e){e.setZIndex(y.Z.Z_INDEX[o.WMS]+r),r+=1}))}))}},{key:"getExtent",value:function(){var e=this,t=(0,f.U2)(this.map.getProjection().code);return this.extentPromise=new Promise((function(r,i){(0,n.Ew)(e.extent_)?e.getCapabilities().then((function(n){e.extent_=n.getLayerExtent(e.name),e.extentProj_=t,r(e.extent_)})):(e.extent_=d.Z.transformExtent(e.extent_,e.extentProj_,t),e.extentProj_=t,r(e.extent_))})),this.extentPromise}},{key:"getMinResolution",value:function(){return this.options.minResolution}},{key:"getMaxResolution",value:function(){return this.options.maxResolution}},{key:"updateMinMaxResolution",value:function(e){(0,n.Ew)(this.options.minResolution)||(this.options.minResolution=(0,n.AC)(this.options.minScale,e.units),this.ol3Layer.setMinResolution(this.options.minResolution)),(0,n.Ew)(this.options.maxResolution)||(this.options.maxResolution=(0,n.AC)(this.options.maxScale,e.units),this.ol3Layer.setMaxResolution(this.options.maxResolution))}},{key:"setMaxExtent",value:function(e){var t=this.options.minResolution,r=this.options.maxResolution;if(this.getOL3Layer().setExtent(e),!0===this.tiled){var i=this.map.getResolutions();if((0,n.Ew)(i)&&!(0,n.Ew)(this.resolutions_)&&(i=this.resolutions_),!(0,n.Ew)(i)){var o=this.createOLSource_(i,t,r,e);this.ol3Layer.setSource(o)}}}},{key:"getNumZoomLevels",value:function(){return this.options.numZoomLevels}},{key:"getLayers",value:function(){return this.layers}},{key:"getCapabilities",value:function(){var e=this,t=this.map.collectionCapabilities.find((function(t){return t.url===e.url}))||{capabilities:!1};if(t.capabilities)this.getCapabilitiesPromise=t.capabilities;else if((0,n.Ew)(this.getCapabilitiesPromise)){var r=this.url,i=this.version,o=this.map.getProjection();this.getCapabilitiesPromise=new Promise((function(e,t){var a=(0,n.sE)(r,i);(0,s.U2)(a).then((function(t){var n=t.xml,i=(new _.Z).customRead(n),a=new m.Z(i,r,o);e(a)}))})),t.capabilities=this.getCapabilitiesPromise}return this.getCapabilitiesPromise}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(e){this.legendUrl_=e}},{key:"refresh",value:function(){var e=this.getOL3Layer();(0,n.Ew)(e)||e.getSource().changed()}},{key:"getExtentFromCapabilities",value:function(e){var t=this.facadeLayer_.name;return e.getLayerExtent(t)?e.getLayerExtent(t):[]}},{key:"setFacadeObj",value:function(e){this.facadeLayer_=e}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,n.Ew)(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),(0,n.Ew)(this.layers)||(this.layers.map(this.map.removeLayers,this.map),this.layers.length=0),this.map=null}},{key:"equals",value:function(e){var t=!1;return e instanceof I&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.version===e.version),t}}])&&w(t.prototype,r),g&&w(t,g),Object.defineProperty(t,"prototype",{writable:!1}),I}(g.Z);S.LEGEND_IMAGE=null;const C=S},52344:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(40398),i=r(20632),o=r(40546),a=r(67858),s=r(36181),l=r(54414),u=r(77055),c=r(27811),f=r(17246),h=r(45056),p=r(15967),d=r(17195);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===y(o)?o:String(o)),n)}var i,o}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}const A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(v,e);var t,r,p,y=_(v);function v(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(e=y.call(this,t,r)).facadeLayer_=null,e.capabilitiesOptionsPromise=null,e.getCapabilitiesPromise_=null,e.minZoom=t.minZoom||Number.NEGATIVE_INFINITY,e.maxZoom=t.maxZoom||Number.POSITIVE_INFINITY,e.options=t,e.useCapabilities=!1!==t.useCapabilities,e.crossOrigin=null===t.crossOrigin||!1===t.crossOrigin?void 0:"anonymous",e.maxExtent=t.maxExtent||null,e}return t=v,(r=[{key:"addTo",value:function(e){var t=this;if(this.map=e,this.fire(u.GY),!(0,n.Ft)(this.options)&&!(0,n.Ft)(this.options.minScale)&&!(0,n.Ft)(this.options.maxScale)){var r=this.map.getMapImpl().getView().getProjection().getUnits();this.options.minResolution=(0,n.AC)(this.options.minScale,r),this.options.maxResolution=(0,n.AC)(this.options.maxScale,r)}this.useCapabilities?(this.capabilitiesOptionsPromise=this.getCapabilitiesOptions_(),this.capabilitiesOptionsPromise.then((function(e){t.getWGS84BoundingBoxCapabilities_(e);var r=t.getFilterCapabilities_(e);t.addLayer_(r)}))):this.addLayerNotCapabilities_()}},{key:"getWGS84BoundingBoxCapabilities_",value:function(e){var t=e.Contents,r=this.map.getMaxExtent();return(0,n.Ft)(t)||(this.maxExtent=(0,d.Z)(t,this.name,this.map.getProjection().code,r)),this.maxExtent}},{key:"getMaxExtent",value:function(){return this.maxExtent||(this.maxExtent=this.map.getMaxExtent()),this.maxExtent}},{key:"setResolutions",value:function(e){var t=this;if((0,n.Ew)(this.vendorOptions_.source)){var r=this.facadeLayer_.getMaxExtent(),o=(0,c.U2)(this.map.getProjection().code);this.getCapabilities().then((function(n){var l=n.getMatrixSet(t.name),u=n.getMatrixIds(t.name),c=n.getFormat(t.name),f=new i.Z({crossOrigin:t.crossOrigin,url:t.url,layer:t.name,matrixSet:l,format:c,projection:o,tileGrid:new a.Z({origin:(0,s.hC)(r),resolutions:e,matrixIds:u}),extent:r});t.ol3Layer.setSource(f)}))}}},{key:"setVisible",value:function(e){var t=this;if(this.visibility=e,!0===e&&!0===this.isBase){this.map.getBaseLayers().filter((function(e){return!e.equals(t.facadeLayer_)&&e.isVisible()})).forEach((function(e){return e.setVisible(!1)})),(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e);var r=this.map.getZoom();this.map.getImpl().updateResolutionsFromBaseLayer(),(0,n.Ew)(r)||this.map.setZoom(r)}else(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e)}},{key:"addLayer_",value:function(e){if(!(0,n.Ew)(this.map)){var t=this.facadeLayer_.getMaxExtent(),r=e,o=this.options.minResolution,a=this.options.maxResolution;r.format=this.options.format||e.format;var s=new i.Z((0,n.l7)(r,{extent:t,crossOrigin:this.crossOrigin},!0));this.facadeLayer_.setFormat(r.format),this.ol3Layer=new f.Z((0,n.l7)({visible:this.visibility,source:s,minResolution:o,maxResolution:a,extent:this.userMaxExtent,opacity:this.opacity_},this.vendorOptions_,!0));var l=this.zIndex_;this.map.getMapImpl().addLayer(this.ol3Layer),this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom),null!==l&&this.setZIndex(l),this.ol3Layer.set("animated",!0),this.fire(u.GY,this)}}},{key:"addLayerNotCapabilities_",value:function(){var e=this;if(!(0,n.Ew)(this.map)){for(var t=this.facadeLayer_.getMaxExtent(),r=this.options.minResolution,o=this.options.maxResolution,l=this.options.format?this.options.format:"image/png",h=(0,s.dz)(t)/256,p=new Array(19),d=new Array(19),y=0;y<19;++y)p[y]=h/Math.pow(2,y),d[y]=y;var g=new a.Z({origin:(0,s.rL)(t),resolutions:p,matrixIds:d}),m=new i.Z({attributions:" https://www.ign.es/",url:this.url,layer:this.name,matrixSet:this.options.matrixSet,format:this.options.format,projection:(0,c.U2)(this.map.getProjection().code),tileGrid:g},t,!0);this.facadeLayer_.setFormat(l),this.ol3Layer=new f.Z((0,n.l7)({visible:this.visibility,source:m,minResolution:r,maxResolution:o,extent:this.userMaxExtent},this.vendorOptions_,!0));var _=this.zIndex_;this.map.getMapImpl().addLayer(this.ol3Layer),setTimeout((function(){e.ol3Layer.setMaxZoom(e.maxZoom),e.ol3Layer.setMinZoom(e.minZoom)}),500),null!==_&&this.setZIndex(_),this.ol3Layer.set("animated",!0),this.fire(u.GY,this)}}},{key:"setMaxExtent",value:function(e){this.getOL3Layer().setExtent(e)}},{key:"getFilterCapabilities_",value:function(e){var t=this,r=this.name,i=this.matrixSet;(0,n.Ew)(i)&&(i=this.map.getProjection().code);var o=e.Contents.Layer;(0,n.kJ)(o)&&(o=o.filter((function(e){return e.Identifier===t.facadeLayer_.name}))[0]),o.Style.length>0&&void 0!==o.Style[0].LegendURL&&(this.legendUrl_=o.Style[0].LegendURL.replaceAll("&amp;","&"));var a=(0,n.Ew)(o.Abstract)?"":o.Abstract,s=(0,n.Ew)(o.Style)?"":o.Style,l=this.facadeLayer_.getMaxExtent(),u=(0,n.Ew)(e.ServiceProvider)?"":e.ServiceProvider,c=(0,h.B)(e,{layer:r,matrixSet:i,extent:l}),f={abstract:a,attribution:u,style:s};return c.tileGrid.extent=l,void 0===this.facadeLayer_.capabilitiesMetadata&&(this.facadeLayer_.capabilitiesMetadata=f),c}},{key:"getCapabilitiesOptions_",value:function(){var e=this;if((0,n.Ew)(this.capabilitiesOptionsPromise)){var t=this.map.collectionCapabilities.find((function(t){return t.url===e.url}))||{};t.capabilities?this.capabilitiesOptionsPromise=t.capabilities:(this.capabilitiesOptionsPromise=this.getCapabilities().then((function(e){return e})),t.capabilities=this.capabilitiesOptionsPromise)}return this.capabilitiesOptionsPromise}},{key:"getCapabilities",value:function(){var e=this;return(0,n.Ew)(this.getCapabilitiesPromise_)&&(this.getCapabilitiesPromise_=new Promise((function(t,r){var i=(0,n.BP)(e.url),a=new o.Z;(0,l.U2)(i).then((function(r){var n=r.xml;if(n.getElementsByTagName("ows:Style").length>0){var i=(new XMLSerializer).serializeToString(n).replaceAll("ows:Style","Style");n=(new DOMParser).parseFromString(i,"text/xml")}var o=a.read(n);try{o.Contents.Layer.forEach((function(e){var t=e.Identifier;e.Style.forEach((function(e){var n=r.text.split("Layer>").filter((function(e){return e.indexOf("Identifier>".concat(t,"<"))>-1}))[0];e.LegendURL=n.split("LegendURL")[1].split('xlink:href="')[1].split('"')[0]}))}))}catch(e){}t.call(e,o)}))}))),this.getCapabilitiesPromise_}},{key:"getMinResolution",value:function(){return this.options.minResolution}},{key:"getMaxResolution",value:function(){return this.options.maxResolution}},{key:"setFacadeObj",value:function(e){this.facadeLayer_=e}},{key:"isQueryable",value:function(){return!1!==this.options.queryable}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,n.Ew)(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(e){var t=!1;return e instanceof v&&(t=this.url===e.url,t=t&&this.name===e.name,t=t&&this.matrixSet===e.matrixSet),t}},{key:"getFeatureInfoUrl",value:function(e,t,r){var i=this.getTileColTileRow(e,t),o=this.getRelativeTileCoordInPixel_(e,t),a=this.name,s=this.matrixSet,l=r,u=i[0],c=i[1],f=o[0],h=o[1],p=t;return this.matrixSet.indexOf(":4326")>-1&&(p="".concat(this.matrixSet,":").concat(p)),(0,n.h1)(this.url,{service:"WMTS",request:"GetFeatureInfo",version:"1.0.0",layer:a,tilematrixset:s,tilematrix:p,tilerow:c,tilecol:u,J:h,I:f,infoFormat:l})}},{key:"getTileColTileRow",value:function(e,t){var r=null;if(!(0,n.Ew)(this.ol3Layer)){var i=this.ol3Layer.getSource();(0,n.Ew)(i)||(r=i.tileGrid.getTileCoordForCoordAndZ(e,t))}return r.slice(1)}},{key:"getRelativeTileCoordInPixel_",value:function(e,t){var r;if(!(0,n.Ew)(this.ol3Layer)){var i=this.ol3Layer.getSource();if(!(0,n.Ew)(i)){var o=i.tileGrid,a=o.getTileCoordForCoordAndZ(e,t),s=o.getTileCoordExtent(a,[]),l=o.getResolution(a[0]);r=[Math.floor((e[0]-s[0])/l),Math.floor((s[3]-e[1])/l)]}}return r}},{key:"getLegendURL",value:function(){return this.legendUrl_}},{key:"setLegendURL",value:function(e){this.legendUrl_=e}}])&&g(t.prototype,r),p&&g(t,p),Object.defineProperty(t,"prototype",{writable:!1}),v}(p.Z)},68586:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(40398),i=r(17246),o=r(27811),a=r(26185),s=r(68524),l=r(15967),u=r(99075);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(o)?o:String(o)),n)}var i,o}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(d,e);var t,r,l,c=p(d);function d(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=c.call(this,r,n)).url=e.url,t.tileSize_="number"==typeof e.tileSize?e.tileSize:256,t.opacity_="number"==typeof r.opacity?r.opacity:1,t.zIndex_=u.Z.Z_INDEX[s.XYZ],t.visibility=!1!==e.visibility||e.visibility,t.minZoom=r.minZoom||Number.NEGATIVE_INFINITY,t.maxZoom=r.maxZoom||Number.POSITIVE_INFINITY,t.tileGridMaxZoom=e.tileGridMaxZoom,t.displayInLayerSwitcher=!1!==e.displayInLayerSwitcher,t.crossOrigin=null===r.crossOrigin||!1===r.crossOrigin?void 0:"anonymous",t}return t=d,(r=[{key:"setVisible",value:function(e){if(this.visibility=e,!0===e&&!0!==this.transparent){(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e);var t=this.map.getZoom();this.map.getImpl().updateResolutionsFromBaseLayer(),(0,n.Ew)(t)||this.map.setZoom(t)}else(0,n.Ew)(this.ol3Layer)||this.ol3Layer.setVisible(e)}},{key:"addTo",value:function(e){this.map=e;var t=(0,o.U2)("EPSG:3857").getExtent();this.ol3Layer=new i.Z((0,n.l7)({visible:this.visibility,opacity:this.opacity_,zIndex:this.zIndex_,extent:this.userMaxExtent||t},this.vendorOptions_,!0)),this.map.getMapImpl().addLayer(this.ol3Layer);var r=new a.Z({projection:this.map.getProjection().code,url:this.url,tileSize:this.getTileSize(),crossOrigin:this.crossOrigin});this.ol3Layer.setSource(r),void 0!==this.tileGridMaxZoom&&this.tileGridMaxZoom>0?this.ol3Layer.getSource().tileGrid.maxZoom=this.tileGridMaxZoom:(this.ol3Layer.setMaxZoom(this.maxZoom),this.ol3Layer.setMinZoom(this.minZoom))}},{key:"setTileUrlFunction",value:function(e){this.ol3Layer.getSource().setTileUrlFunction(e)}},{key:"getTileUrlFunction",value:function(){this.ol3Layer.getSource().getTileUrlFunction()}},{key:"getTileSize",value:function(){return this.tileSize_}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,n.Ew)(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.map=null}},{key:"equals",value:function(e){var t=!1;return e instanceof d&&(t=this.name===e.name),t}}])&&f(t.prototype,r),l&&f(t,l),Object.defineProperty(t,"prototype",{writable:!1}),d}(l.Z)},64313:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(68079),i=r(54414),o=r(81971),a=r(40398),s=r(2532);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(h,e);var t,r,n,l=f(h);function h(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(n=l.call(this)).map_=e,n.url_=t,n.format_=r,n}return t=h,(r=[{key:"getLoaderFn",value:function(e){var t=this;return function(r,n,i){t.loadInternal_(i).then((function(r){e.apply(t,r)}))}}},{key:"loadInternal_",value:function(e){var t=this;return new Promise((function(r){(0,i.U2)(t.url_).then((function(n){if((0,a.Ew)(n.text))(0,o.Z)((0,s.NA)("exception").no_service_response);else{var i=n.text.replace("urn:ogc:def:crs:OGC:1.3:CRS84","urn:ogc:def:crs:EPSG::4326"),l=t.format_.read(i,{featureProjection:e});r.call(t,[l])}}))}))}}])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(n.Z)},32828:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(68079),i=r(54414),o=r(40398),a=r(81517),s=r(81971),l=r(2532);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(f,e);var t,r,n,u=d(f);function f(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=u.call(this)).map_=e,n.url_=t,n.format_=r,n}return t=f,(r=[{key:"getLoaderFn",value:function(e){var t=this;return function(r,n,i,o,a,s){t.loadInternal_(i,o,a,s).then((function(t){e(t)}))}}},{key:"loadInternal_",value:function(e,t,r,n){var u=this;return new Promise((function(e,f){(0,i.U2)(u.url_).then((function(i){var f=(new DOMParser).parseFromString(i.text,"text/xml"),h=!1;if(!(0,o.o8)(r)){var p=f.getElementsByTagName("Folder"),d=-1,y=c(p).map((function(e){return e.cloneNode(!0)}));n&&y.map((function(e){var t;do{(t=e.querySelector(":scope > Folder"))&&e.removeChild(t)}while(t);return e})),Array.from(p).forEach((function(e){e.parentNode.removeChild(e)}));var g=y.filter((function(e){var t=e.querySelector(":scope > name");return d+=1,t?r.includes(t.textContent.trim()):r.includes("Layer__".concat(d))})),m=f.querySelector("kml > Document");g.forEach((function(e){m.appendChild(e)})),h=!0}if(!(0,o.o8)(t)){var _=f.getElementsByTagName("Style");if(0===_.length){var v=f.createElement("Style");v.id="defaultLabelStyle";var A=f.createElement("LabelStyle");A.innerHTML="<scale>".concat(t,"</scale>"),v.appendChild(A),f.getElementsByTagName("Document")[0].appendChild(v),Array.from(f.getElementsByTagName("Placemark")).forEach((function(e){var t=e.getElementsByTagName("styleUrl");if(0===t.length){var r=f.createElement("styleUrl");r.innerHTML="#defaultLabelStyle",e.appendChild(r)}else t[0].innerHTML="#defaultLabelStyle"}))}else Array.from(_).forEach((function(e){var r=e.getElementsByTagName("LabelStyle");if(0===r.length){var n=f.createElement("LabelStyle");n.innerHTML="<scale>".concat(t,"</scale>"),e.appendChild(n)}else{var i=r[0].getElementsByTagName("scale");if(0===i.length){var o=f.createElement("scale");o.innerHTML="".concat(t),r[0].appendChild(o)}else i[0].innerHTML="".concat(t)}}));h=!0}if(h){var b=(new XMLSerializer).serializeToString(f);i.text=b}var w=u.map_.getProjection().code;if((0,o.Ew)(i.text))(0,s.Z)((0,l.NA)("exception").no_kml_response);else{var E=u.format_.readCustomFeatures(i.text,{featureProjection:w}),x=u.format_.getScreenOverlay(),I=E.map((function(e){var t=new a.Z(e.getId(),{geometry:{coordinates:e.getGeometry().getCoordinates(),type:e.getGeometry().getType()},properties:e.getProperties()});return t.getImpl().getOLFeature().setStyle(e.getStyle()),t}));e({features:I,screenOverlay:x})}}))}))}}])&&h(t.prototype,r),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},8671:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(68079),i=r(54414),o=r(40398),a=r(81971),s=r(83473),l=r(2532);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(p,e);var t,r,n,u=h(p);function p(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(n=u.call(this)).map_=e,n.service_=t,n.format_=r,n}return t=p,(r=[{key:"getLoaderFn",value:function(e){var t=this;return function(r,n,i){var o=t.getRequestUrl_(r,i);t.loadInternal_(o,i).then(e.bind(t))}}},{key:"loadInternal_",value:function(e,t){var r=this;return new Promise((function(n,u){(0,i.U2)(e).then((function(e){if(!(0,o.Ew)(e.text)&&e.text.indexOf("ServiceExceptionReport")<0){var i=r.format_.read(e.text,t);n(i)}else 401===e.code?s.error((0,l.NA)("dialog").unauthorized_user):e.text.indexOf("featureId and cql_filter")>=0?s.error((0,l.NA)("dialog").only_one_filter):(0,a.Z)((0,l.NA)("exception").no_getfeature_response)}))}))}},{key:"getRequestUrl_",value:function(e,t){return this.service_.getFeatureUrl(null,t)}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.Z)},45056:(e,t,r)=>{"use strict";r.d(t,{B:()=>s});var n=r(75934),i=r(4546),o=r(27811),a=r(67858);n.Z.prototype.writePos_=function(e,t,r){var n=t.getCoordinates(),o="".concat(n[0]," ").concat(n[1]);(0,i.bZ)(e,o)},n.Z.prototype.getCoords_=function(e,t){return"".concat(e[0]," ").concat(e[1])};var s=function(e,t){var r=e.Contents.Layer.find((function(e){return e.Identifier==t.layer}));if(null===r)return null;var n,i=e.Contents.TileMatrixSet;(n=r.TileMatrixSetLink.length>1?"projection"in t?r.TileMatrixSetLink.findIndex((function(e,r,n){var a=i.find((function(t){return t.Identifier==e.TileMatrixSet})).SupportedCRS,s=(0,o.U2)(a.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,o.U2)(a),l=(0,o.U2)(t.projection);return s&&l?equivalent(s,l):a==t.projection})):r.TileMatrixSetLink.findIndex((function(e,r,n){return e.TileMatrixSet==t.matrixSet})):0)<0&&(n=0);var s=r.TileMatrixSetLink[n].TileMatrixSet,l=r.TileMatrixSetLink[n].TileMatrixSetLimits,u=r.Format[0];"format"in t&&(u=t.format),(n=r.Style.findIndex((function(e){return"style"in t?e.Title==t.style:e.isDefault})))<0&&(n=0);var c=r.Style[n].Identifier,f={};"Dimension"in r&&r.Dimension.forEach((function(e,t,r){var n=e.Identifier,i=e.Default;void 0===i&&(i=e.Value[0]),f[n]=i}));var h,p=e.Contents.TileMatrixSet.find((function(e){return e.Identifier==s})),d=p.SupportedCRS;if(d&&(h=(0,o.U2)(d.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||(0,o.U2)(d)),"projection"in t){var y=(0,o.U2)(t.projection);y&&(h&&!equivalent(y,h)||(h=y))}var g,m,_=r.WGS84BoundingBox;if(t.extent)g=t.extent;else if(void 0!==_){var v=(0,o.U2)("EPSG:4326").getExtent();m=_[0]==v[0]&&_[2]==v[2],g=transformExtent(_,"EPSG:4326",h);var A=h.getExtent();A&&(containsExtent(A,g)||(g=void 0))}var b=(0,a.b)(p,g,l),w=[],E=t.requestEncoding;if(E=void 0!==E?E:"","OperationsMetadata"in e&&"GetTile"in e.OperationsMetadata)for(var x=e.OperationsMetadata.GetTile.DCP.HTTP.Get,I=0,S=x.length;I<S;++I)if(x[I].Constraint){var C=x[I].Constraint.find((function(e){return"GetEncoding"==e.name})).AllowedValues.Value;if(""===E&&(E=C[0]),"KVP"!==E)break;C.includes("KVP")&&w.push(x[I].href)}else x[I].href&&(E="KVP",w.push(x[I].href));return 0===w.length&&(E="REST",r.ResourceURL.forEach((function(e){"tile"===e.resourceType&&(u=e.format,w.push(e.template))}))),{urls:w,layer:t.layer,matrixSet:s,format:u,projection:h,requestEncoding:E,tileGrid:b,style:c,dimensions:f,wrapX:m,crossOrigin:t.crossOrigin}}},92933:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,{points:1/0,fill:e.fill,radius:e.radius,snapToPixel:e.snapToPixel,stroke:e.stroke,atlasManager:e.atlasManager})}return t=l,(r=[{key:"clone",value:function(){var e=new l({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return e.setOpacity(this.getOpacity()),e.setScale(this.getScale()),e}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(r(87908).Z)},47142:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=e;return e.anchor||(t.anchor=[]),e.offset||(t.offset=[]),s.call(this,{glyph:e.glyph,color:e.color,fontSize:e.fontSize,stroke:e.stroke,fill:e.fill,radius:e.radius,form:e.form,gradient:e.gradient,offsetX:e.offset[0],offsetY:e.offset[1],opacity:e.opacity,rotation:e.rotation,rotateWithView:e.rotateWithView})}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(15637).Z)},97906:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,{anchor:e.anchor?e.anchor.slice():void 0,anchorOrigin:e.anchorOrigin,anchorXUnits:e.anchorXUnits,anchorYUnits:e.anchorYUnits,crossOrigin:e.crossOrigin||null,color:e.color&&e.color.slice?e.color.slice():e.color||void 0,src:e.src,offset:e.offset?e.offset.slice():void 0,offsetOrigin:e.offsetOrigin,size:e.size?e.size.slice():void 0,imgSize:e.imgSize,opacity:e.opacity,scale:e.scale,snapToPixel:e.snapToPixel,rotation:e.rotation,rotateWithView:e.rotateWithView})}return t=l,(r=[{key:"clone",value:function(){return new l({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})}},{key:"size",set:function(e){this.size_=Array.isArray(e)?e:null}},{key:"anchor",set:function(e){this.anchor_=Array.isArray(e)?e:null}},{key:"origin",set:function(e){this.origin_=Array.isArray(e)?e:null}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(r(52076).Z)},32825:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(73213),i=r.n(n),o=r(14752),a=r(85243),s=r(27811),l=[{def:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",extent:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],codes:["EPSG:3857","EPSG:102100","EPSG:102113","EPSG:900913","urn:ogc:def:crs:EPSG:6.18:3:3857","urn:ogc:def:crs:EPSG::3857","http://www.opengis.net/gml/srs/epsg.xml#3857"],units:"m",metersPerUnit:1,datum:"WGS 84",proj:"Pseudo-Mercator",global:!0,coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/3857"},{def:"+proj=longlat +datum=WGS84 +no_defs",extent:[-180,-90,180,90],codes:["EPSG:4326","urn:ogc:def:crs:EPSG::4326","urn:ogc:def:crs:OGC:1.3:CRS84","http://www.opengis.net/def/crs/OGC/1.3/CRS84"],units:"d",metersPerUnit:111319.49079327358,axisOrientation:"neu",datum:"WGS 84",proj:"longitud, latitud",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/4326"},{def:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32627","urn:ogc:def:crs:EPSG::32627","http://www.opengis.net/gml/srs/epsg.xml#32627"],units:"m",datum:"WGS 84",proj:"UTM 27 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/32627"},{def:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.44317933178,0,833978.5568206678,9329005.18301614],codes:["EPSG:32628","urn:ogc:def:crs:EPSG::32628","http://www.opengis.net/gml/srs/epsg.xml#32628"],units:"m",datum:"WGS 84",proj:"UTM 28 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/32628"},{def:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32629","urn:ogc:def:crs:EPSG::32629","http://www.opengis.net/gml/srs/epsg.xml#32629"],units:"m",datum:"WGS 84",proj:"UTM 29 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/32629"},{def:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32630","urn:ogc:def:crs:EPSG::32630","http://www.opengis.net/gml/srs/epsg.xml#32630"],units:"m",datum:"WGS 84",proj:"UTM 30 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/32630"},{def:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs",extent:[166021.4431,0,833978.5569,9329005.1825],codes:["EPSG:32631","urn:ogc:def:crs:EPSG::32631","http://www.opengis.net/gml/srs/epsg.xml#32631"],units:"m",datum:"WGS 84",proj:"UTM 31 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/32631"},{def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",extent:[-16.1,32.88,39.65,84.17],codes:["EPSG:4258","urn:ogc:def:crs:EPSG::4258","http://www.opengis.net/gml/srs/epsg.xml#4258"],units:"d",metersPerUnit:111319.49079327358,datum:"GRS80 (ETRS89)",proj:"long, lat",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/4258"},{def:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-164850.78,3660417.01,988728.57,9567111.85],codes:["EPSG:25829","urn:ogc:def:crs:EPSG::25829","http://www.opengis.net/gml/srs/epsg.xml#25829"],units:"m",datum:"GRS80 (ETRS89)",proj:"UTM 29 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/25829"},{def:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[397101.09,3638520.14,1034670.43,9625438.82],codes:["EPSG:25828","urn:ogc:def:crs:EPSG::25828","http://www.opengis.net/gml/srs/epsg.xml#25828"],units:"m",datum:"GRS80 (ETRS89)",proj:"UTM 28 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/25828"},{def:"+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-729785.83,3715125.82,940929.67,9518470.69],codes:["EPSG:25830","urn:ogc:def:crs:EPSG::25830","http://www.opengis.net/gml/srs/epsg.xml#23030"],units:"m",datum:"GRS80 (ETRS89)",proj:"UTM 30 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/25830"},{def:"+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-1300111.74,3804640.43,893164.13,9478718.31],codes:["EPSG:25831","urn:ogc:def:crs:EPSG::25831","http://www.opengis.net/gml/srs/epsg.xml#25831"],units:"m",datum:"GRS80 (ETRS89)",proj:"UTM 31 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/25831"},{def:"+proj=longlat +ellps=intl +no_defs",extent:[-16.09882145355955,25.711114310330917,48.60999527749605,84.16977336415472],codes:["EPSG:4230","urn:ogc:def:crs:EPSG::4230","http://www.opengis.net/gml/srs/epsg.xml#4230"],units:"d",metersPerUnit:111319.49079327358,datum:"ED50",proj:"long, lat",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/4230"},{def:"+proj=utm +zone=28 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[997517.95,3873475.61,2024693.05,8529441.99],codes:["EPSG:23028","urn:ogc:def:crs:EPSG::23028","http://www.opengis.net/gml/srs/epsg.xml#23028"],units:"m",datum:"ED50",proj:"UTM 28 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/23028"},{def:"+proj=utm +zone=29 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[448933.91,3860083.93,1860436.11,8381369.16],codes:["EPSG:23029","urn:ogc:def:crs:EPSG::23029","http://www.opengis.net/gml/srs/epsg.xml#23029"],units:"m",datum:"ED50",proj:"UTM 29 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/23029"},{def:"+proj=utm +zone=30 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[-99844.71,3879626.63,1682737.72,8251830.8],codes:["EPSG:23030","urn:ogc:def:crs:EPSG::23030","http://www.opengis.net/gml/srs/epsg.xml#23030"],units:"m",datum:"ED50",proj:"UTM 30 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/23030"},{def:"+proj=utm +zone=31 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs",extent:[-650883.16,3932764.97,1493695.91,8141744.84],codes:["EPSG:23031","urn:ogc:def:crs:EPSG::23031","http://www.opengis.net/gml/srs/epsg.xml#23031"],units:"m",datum:"ED50",proj:"UTM 31 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/23031"},{def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",extent:[-21.93,24.6,-11.75,32.76],codes:["EPSG:4081","urn:ogc:def:crs:EPSG::4081","http://www.opengis.net/gml/srs/epsg.xml#4081"],units:"d",metersPerUnit:111319.49079327358,datum:"REGCAN95",proj:"long, lat",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/4081"},{def:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[405849.71,2720975.6,1367994.77,3662797.15],codes:["EPSG:4082","urn:ogc:def:crs:EPSG::4082","http://www.opengis.net/gml/srs/epsg.xml#4082"],units:"m",datum:"REGCAN95",proj:"UTM 27 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/4082"},{def:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",extent:[-202677.94,2738405.48,804488.92,3629357.1],codes:["EPSG:4083","urn:ogc:def:crs:EPSG::4083","http://www.opengis.net/gml/srs/epsg.xml#4083"],units:"m",datum:"REGCAN95",proj:"UTM 28 N",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/4083"},{def:"+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs +type=crs",extent:[-20037508.34,-15496570.74,20037508.34,18764656.23],codes:["EPSG:3395","urn:ogc:def:crs:EPSG::3395","http://www.opengis.net/gml/srs/epsg.xml#3395"],units:"m",datum:"WGS 84",proj:"World Mercator",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/3395"},{def:"+proj=geocent +datum=WGS84 +units=m +no_defs +type=crs",extent:[-1/0,-1/0,1/0,1/0],codes:["EPSG:4328","urn:ogc:def:crs:EPSG::4328","https://www.opengis.net/def/crs/EPSG/0/4328"],units:"m",datum:"WGS 84",proj:"XYZ (geocéntricas)",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/4328"},{def:"+proj=geocent +ellps=GRS80 +units=m +no_defs +type=crs",extent:[-1/0,-1/0,1/0,1/0],codes:["EPSG:4346","urn:ogc:def:crs:EPSG::4346","https://www.opengis.net/def/crs/EPSG/0/4346"],units:"m",datum:"GRS80 (ETRS89)",proj:"XYZ (geocéntricas)",coordRefSys:"http://www.opengis.net/def/crs/EPSG/0/4346"}],u=function(e){e.forEach((function(e){e.codes.forEach((function(t){i().defs(t,e.def)}));var t=e.codes.map((function(t){return new o.Z({code:t,extent:e.extent,units:e.units,metersPerUnit:e.metersPerUnit,axisOrientation:e.axisOrientation,global:e.global})}));(0,s.rM)(t)}))};u(l),(0,a.z2)(i());const c={addProjections:u,getSupportedProjs:function(){return l}}},94857:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(54414),i=r(40398),o=r(74524);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}const l=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url_=t.url,this.name_=t.name,this.format_=t.format,this.limit_=t.limit,this.offset_=t.offset,this.id_=t.id,this.bbox_=t.bbox,this.cql_=r.cql,this.conditional_=t.conditional,this.projection_=t.projection,this.getFeatureOutputFormat_=t.getFeatureOutputFormat,(0,i.Ew)(this.getFeatureOutputFormat_)&&(this.getFeatureOutputFormat_="application/json"),this.describeFeatureTypeOutputFormat_=t.describeFeatureTypeOutputFormat,this.getFeatureVendor_={},(0,i.Ew)(r)||(0,i.Ew)(r.getFeature)||(this.getFeatureVendor_=r.getFeature),this.describeFeatureTypeVendor_={},(0,i.Ew)(r)||(0,i.Ew)(r.describeFeatureType)||(this.describeFeatureTypeVendor_=r.describeFeatureType)}var t,r,a;return t=e,(r=[{key:"getDescribeFeatureType",value:function(){var e={service:"OGCAPIFeatures",request:"DescribeFeatureType"};(0,i.Ew)(this.describeFeatureTypeOutputFormat_)||(e.outputFormat=this.describeFeatureTypeOutputFormat_);var t=(0,i.h1)(this.url_,e),r=(0,i.h1)(t,this.describeFeatureTypeVendor_),a=this.describeFeatureTypeOutputFormat_,s=new o.Z(this.name_,a,this.projection_);return new Promise((function(e,t){(0,n.U2)(r).then((function(t){e(s.read(t))}))}))}},{key:"getFeatureUrl",value:function(){var e,t=this,r={};if((0,i.Ew)(this.name_)||(this.url_="".concat(this.url_).concat(this.name_,"/items")),(0,i.Ew)(this.format_)||(r.f=this.format_),(0,i.Ew)(this.id_)){if(this.url_="".concat(this.url_,"?"),(0,i.Ew)(this.limit_)||(r.limit=this.limit_),(0,i.Ew)(this.offset_)||(r.offset=this.offset_),(0,i.Ew)(this.bbox_)||(r.bbox=this.bbox_),e=(0,i.h1)((0,i.h1)(this.url_,r),this.getFeatureVendor_),(0,i.Ew)(this.cql_)||(r.filter=this.cql_,e+="filter=".concat(encodeURIComponent(this.cql_))),!(0,i.Ew)(this.conditional_)){var n="";Object.keys(this.conditional_).forEach((function(e){var r="&".concat(e,"=").concat(t.conditional_[e],"&");n+=r})),r.conditional=n,e+=r.conditional}}else this.url_="".concat(this.url_).concat(this.id_,"?"),e=(0,i.h1)((0,i.h1)(this.url_,r),this.getFeatureVendor_);return e=e.replaceAll(" ","%20")}}])&&s(t.prototype,r),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},29128:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(54414),i=r(40398),o=r(74524);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}const l=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url_=t.url,this.namespace_=t.namespace,this.name_=t.name,this.typeName_=this.name_,(0,i.Ew)(this.namespace_)||(this.typeName_=this.namespace_.concat(":").concat(this.name_)),this.version_=t.version,this.ids_=t.ids,this.cql_=t.cql,this.projection_=t.projection,this.getFeatureOutputFormat_=t.getFeatureOutputFormat,(0,i.Ew)(this.getFeatureOutputFormat_)&&(this.getFeatureOutputFormat_="application/json"),this.describeFeatureTypeOutputFormat_=t.describeFeatureTypeOutputFormat,this.getFeatureVendor_={},(0,i.Ew)(r)||(0,i.Ew)(r.getFeature)||(this.getFeatureVendor_=r.getFeature),this.describeFeatureTypeVendor_={},(0,i.Ew)(r)||(0,i.Ew)(r.describeFeatureType)||(this.describeFeatureTypeVendor_=r.describeFeatureType)}var t,r,a;return t=e,(r=[{key:"getDescribeFeatureType",value:function(){var e={service:"WFS",version:this.version_,request:"DescribeFeatureType",typename:this.typeName_};(0,i.Ew)(this.describeFeatureTypeOutputFormat_)||(e.outputFormat=this.describeFeatureTypeOutputFormat_);var t=(0,i.h1)(this.url_,e),r=(0,i.h1)(t,this.describeFeatureTypeVendor_),a=this.describeFeatureTypeOutputFormat_,s=new o.Z(this.name_,a,this.projection_);return new Promise((function(e,t){(0,n.U2)(r).then((function(t){e(s.read(t))}))}))}},{key:"getFeatureUrl",value:function(e,t){var r=this,n={service:"WFS",version:this.version_,request:"GetFeature",typename:this.typeName_,outputFormat:this.getFeatureOutputFormat_,srsname:t.getCode()};return(0,i.Ew)(this.ids_)||(n.featureId=this.ids_.map((function(e){return r.name_.concat(".").concat(e)}))),(0,i.Ew)(this.cql_)?(0,i.Ew)(e)||(n.bbox="".concat(e.join(","),",").concat(t.getCode())):n.CQL_FILTER=this.cql_,(0,i.h1)((0,i.h1)(this.url_,n),this.getFeatureVendor_)}}])&&s(t.prototype,r),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},95934:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},o.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}r.d(t,{Z:()=>u});const u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,r,n,u=s(c);function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var r=t;return(e=u.call(this,r)).imageLoadFunction_=r.imageLoadFunction||e.imageLoadFunction,e}return t=c,(r=[{key:"changed",value:function(){o(l(c.prototype),"changed",this).call(this)}},{key:"imageLoadFunction",value:function(e,t){e.getImage().src="".concat(t,"&_=").concat(this.revision_)}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(r(24871).Z)},52568:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(40398);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},a.apply(this,arguments)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(f,e);var t,r,i,c=l(f);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var t=e;return(0,n.Ew)(e.tileLoadFunction)&&(t.tileLoadFunction=f.tileLoadFunction),c.call(this,t)}return t=f,i=[{key:"tileLoadFunction",value:function(e,t){e.getImage().src="".concat(t,"&_= ").concat(this.revision_)}}],(r=[{key:"changed",value:function(){(0,n.Ew)(this.tileCache)||this.tileCache.clear(),a(u(f.prototype),"changed",this).call(this)}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),f}(r(60138).Z)},45103:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,e)}return t=l,(r=[{key:"clone",value:function(){var e=this.getGeometry();return e&&e.clone&&(e=e.clone()),new l({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(r(78456).ZP)},24225:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(82428),i=r(36181),o=r(12479),a=r(82992),s=r(24615),l=r(66646),u=r(44993),c=r(92882),f=r(61900),h=r(73579),p=r(46329),d=r(40398),y=r(77055),g=r(62557),m=r(71160),_=r(4597),v=r(17768),A=r(45103),b=r(94551),w=function(e,t,r){return(e[0]-r[0])*(t[1]-r[1])-(e[1]-r[1])*(t[0]-r[0])<=0};const E=function(e){e.sort((function(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}));for(var t=[],r=0;r<e.length;r+=1){for(;t.length>=2&&w(t[t.length-2],t[t.length-1],e[r]);)t.pop();t.push(e[r])}for(var n=[],i=e.length-1;i>=0;i-=1){for(;n.length>=2&&w(n[n.length-2],n[n.length-1],e[i]);)n.pop();n.push(e[i])}return n.pop(),t.pop(),t.concat(n)};function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function I(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==x(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===x(o)?o:String(o)),n)}var i,o}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}const M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(x,e);var t,r,m,w=O(x);function x(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x),(r=w.call(this,{})).convexHullLayer_=null,r.oldOL3Layer_=null,r.optionsVendor_=t,r.options_=e,r.clusterLayer_=null,r.selectClusterInteraction_=null,r.hoverInteraction_=null,r}return t=x,m=[{key:"updateRangeImpl",value:function(e,t,r,n,i){var o=i.getOptions().ranges.find((function(r){return r.min===e&&r.max===t}))||!1;return o&&(o.style=r),o}}],(r=[{key:"applyToLayer",value:function(e,t){this.layer_=e,this.options_=this.updateLastRange_(),(0,d.Ew)(this.selectClusterInteraction_)||this.selectClusterInteraction_.clear(),this.updateCanvas();var r=e.getFeatures();r.length>0?this.clusterize_(r):this.layer_.on(y.VX,this.clusterize_.bind(this),this)}},{key:"selectClusterInteraction",get:function(){return this.selectClusterInteraction_}},{key:"clusterize_",value:function(e){var t=e.map((function(e){return e.getImpl().getOLFeature()}));this.clusterLayer_=new _.Z({name:"Cluster",source:new a.Z({distance:this.options_.distance,geometryFunction:function(e){return new f.Z((0,i.qg)(e.getGeometry().getExtent()))},source:new s.Z({features:t})}),animationDuration:this.optionsVendor_.animationDuration,style:this.clusterStyleFn_.bind(this),animationMethod:l[this.optionsVendor_.animationMethod]}),!1===this.options_.animated&&this.clusterLayer_.set("animationDuration",void 0),this.clusterLayer_.setZIndex(99999);var r=this.layer_.getImpl().getOL3Layer();r instanceof _.Z||(this.oldOL3Layer_=r),this.clusterLayer_.setMaxResolution(this.oldOL3Layer_.getMaxResolution()),this.clusterLayer_.setMinResolution(this.oldOL3Layer_.getMinResolution()),this.layer_.getImpl().setOL3Layer(this.clusterLayer_),(0,d.Ew)(this.options_.ranges)&&(this.options_.ranges=this.getDefaultRanges_()),!1!==this.options_.hoverInteraction&&this.addCoverInteraction_(),!1!==this.options_.selectInteraction&&this.addSelectInteraction_()}},{key:"setRanges",value:function(e){(0,d.Ew)(e)?this.options_.ranges=this.getDefaultRanges_():this.options_.ranges=e}},{key:"updateLastRange_",value:function(){var e=(0,d.cU)({},this.options_);if(!(0,d.Ew)(this.options_)&&!(0,d.Ew)(this.options_.ranges)){var t=e.ranges;if(t.length>0){var r=(t=t.sort((function(e,t){return e.min-t.min}))).pop();if((0,d.Ew)(r.max)){var n=this.layer_.getFeatures().length;r.max=n}e.ranges.push(r)}}return e}},{key:"setAnimated",value:function(e,t,r){return r.getOptions().animated=e,!1===e?this.clusterLayer_.set("animationDuration",void 0):this.clusterLayer_.set("animationDuration",this.optionsVendor_.animationDuration),this}},{key:"addSelectInteraction",value:function(){this.addSelectInteraction_()}},{key:"addSelectInteraction_",value:function(){var e=this,t=this.layer_.getImpl().getMap();this.selectClusterInteraction_=new v.Z({fLayer:this.layer_,map:t,maxFeaturesToSelect:this.options_.maxFeaturesToSelect,pointRadius:this.optionsVendor_.distanceSelectFeatures,animate:!0,layers:[this.clusterLayer_]}),this.selectClusterInteraction_.on("select",this.selectClusterFeature_.bind(this),this),t.getMapImpl().addInteraction(this.selectClusterInteraction_),t.getMapImpl().on("change:view",(function(t){return e.selectClusterInteraction_.refreshViewEvents(t)}))}},{key:"removeSelectInteraction",value:function(){this.removeSelectInteraction_()}},{key:"removeSelectInteraction_",value:function(){this.layer_.getImpl().getMap().getMapImpl().removeInteraction(this.selectClusterInteraction_)}},{key:"hoverFeatureFn_",value:function(e,t){if(!(0,d.Ew)(e)){var r=[];e.forEach((function(e){e instanceof g.Z?r=r.concat(e.getAttribute("features")):r.push(e)}));var n=r.map((function(e){return e.getImpl().getOLFeature().getGeometry().getCoordinates()})),i=E(n);if(i.length>2){var a=new u.Z(new c.ZP([i])),s=b.Z.olFeature2Facade(a);(0,d.Ew)(this.convexHullLayer_)?(this.convexHullLayer_=new o.Z({name:"cluster_cover_".concat(this.layer_.name),extract:!1},{displayInLayerSwitcher:!1,style:new h.Z({polygon:this.optionsVendor_.convexHullStyle})}),this.convexHullLayer_.addFeatures(s),this.layer_.getImpl().getMap().addLayers(this.convexHullLayer_),this.layer_.getImpl().getMap().getMapImpl().getView().on("change:resolution",this.clearConvexHull.bind(this),this),this.convexHullLayer_.setStyle(new h.Z({polygon:this.optionsVendor_.convexHullStyle})),this.convexHullLayer_.setZIndex(99990)):(this.convexHullLayer_.removeFeatures(this.convexHullLayer_.getFeatures()),this.convexHullLayer_.addFeatures(s))}}}},{key:"leaveFeatureFn_",value:function(e,t){(0,d.Ew)(this.convexHullLayer_)||this.convexHullLayer_.removeFeatures(this.convexHullLayer_.getFeatures())}},{key:"addCoverInteraction_",value:function(){this.hoverKey_=this.layer_.on(y.Nm,this.hoverFeatureFn_.bind(this)),this.leaveKey_=this.layer_.on(y.V7,this.leaveFeatureFn_.bind(this))}},{key:"removeCoverInteraction_",value:function(){this.layer_.unByKey(y.Nm,this.hoverKey_),this.layer_.unByKey(y.V7,this.leaveKey_)}},{key:"clusterStyleFn_",value:function(e,t,r){var n,i=e.get("features");if(!i)return new A.Z;var o=i.length,a=this.options_.ranges.find((function(e){return e.min<=o&&e.max>=o}));if((0,d.Ew)(a)){if(1===o){var s=i[0].getStyle();s||(s=this.oldOL3Layer_.getStyle()),n=s(i[0],t),(0,d.kJ)(n)||(n=[n]),n[0].setGeometry(i[0].getGeometry())}}else{var l=a.style.clone();if(l instanceof h.Z||(l=new h.Z({point:l.getOptions()})),r)l.set("point.fill.opacity",.33);else if(this.options_.displayAmount){l.set("point.label",this.options_.label);var u=l.get("point.label.color");if((0,d.Ew)(u)){var c=l.get("point.fill.color");u=(0,d.Ew)(c)?"#000":(0,d.V5)(c),l.set("point.label.color",u)}}n=l.getImpl().olStyleFn(e,t)}return n}},{key:"getDefaultRanges_",value:function(){var e=this.layer_.getFeatures().length,t=Math.floor(e/3),r=[{min:2,max:t=Math.max(t,3),style:new h.Z({point:p.Z.RANGE_1_DEFAULT})},{min:t,max:2*t,style:new h.Z({point:p.Z.RANGE_2_DEFAULT})},{min:2*t,max:e+1,style:new h.Z({point:p.Z.RANGE_3_DEFAULT})}];return this.options_.ranges=r,r}},{key:"selectClusterFeature_",value:function(e){this.clearConvexHull()}},{key:"unapply",value:function(){(0,d.Ew)(this.clusterLayer_)?(0,d.Ew)(this.layer_)||this.layer_.un(y.VX,this.clusterize_.bind(this),this):(this.layer_.getImpl().setOL3Layer(this.oldOL3Layer_),this.oldOL3Layer_.setMaxResolution(this.clusterLayer_.getMaxResolution()),this.oldOL3Layer_.setMinResolution(this.clusterLayer_.getMinResolution()),this.removeCoverInteraction_(),this.removeSelectInteraction_(),this.clearConvexHull(),this.deactivateChangeResolutionEvent(),this.layer_.redraw(),this.deactivateChangeEvent())}},{key:"clearConvexHull",value:function(){null!==this.convexHullLayer_&&(this.layer_.getImpl().getMap().removeLayers(this.convexHullLayer_),this.convexHullLayer_=null)}},{key:"updateCanvas",value:function(){}},{key:"activateChangeEvent",value:function(){if(null!==this.clusterLayer_){var e=this.clusterLayer_.getSource(),t=a.Z.prototype.refresh;e.getSource().on("change",t)}}},{key:"deactivateChangeEvent",value:function(){if(null!==this.clusterLayer_){var e=this.clusterLayer_.getSource(),t=a.Z.prototype.refresh;(0,n.B)({bindTo:void 0,callOnce:!1,listener:t,target:e.getSource(),type:"change"})}}},{key:"deactivateChangeResolutionEvent",value:function(){if(!(0,d.Ew)(this.layer_)&&!(0,d.Ew)(this.layer_.getImpl())){var e=this.layer_.getImpl().getMap();if(!(0,d.Ew)(e)&&!(0,d.Ew)(e.getMapImpl())){var t=e.getMapImpl().getView();(0,n.B)({type:"change:resolution",bindTo:void 0,listener:this.clearConvexHull,target:t,callOnce:!1})}}}},{key:"deactivateTemporarilyChangeEvent",value:function(e,t){this.deactivateChangeEvent(),(0,d.mf)(e)&&(null==t?e():e.apply(void 0,I(t)))}},{key:"oldOL3Layer",get:function(){return this.oldOL3Layer_}}])&&C(t.prototype,r),m&&C(t,m),Object.defineProperty(t,"prototype",{writable:!1}),x}(m.Z)},21030:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(40398),i=r(44993),o=r(26890),a=r(52076),s=r(92882),l=r(38815),u=r(25558),c=r(15637),f=r(56422),h=r(13754);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var _={Point:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,h.sG)(t[0].point,t[1],t[2])},LineString:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,h.v9)(t[0].line,t[1],t[2])},Polygon:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,h.H5)(t[0].polygon,t[1],t[2])},MultiPoint:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,h.sG)(t[0].point,t[1],t[2])},MultiLineString:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,h.v9)(t[0].line,t[1],t[2])},MultiPolygon:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,h.H5)(t[0].polygon,t[1],t[2])}};const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(p,e);var t,r,f,h=g(p);function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(e=h.call(this,t)).styles_={},e}return t=p,(r=[{key:"toImage",value:function(){var e=this,t=30,r=null,i=null,o=null,a=(0,n.Is)(),c=[];(0,n.o8)(this.options_.point)||(r=function(r){return new Promise((function(i,o){var a=new Image;if(a.onload=function(){return i(a)},a.onerror=o,a.width=t,a.height=t,!0===(0,n.vV)(e.options_.point))a.src=r;else{var s=(0,_.Point)(e.options_,e,e.layer_);s[0].getImage().setRadius(5);var l=s[0].getImage().getImage(1).toDataURL();a.src=l}}))},c.push(r(a))),(0,n.o8)(this.options_.polygon)||(i=function(r){return new Promise((function(i,o){var a=new Image;if(a.onload=function(){return i(a)},a.onerror=o,!0===(0,n.vV)(e.options_.polygon))a.src=r,a.width=t,a.height=t;else{var l=(0,_.Polygon)(e.options_,e,e.layer_),c=document.createElement("canvas");c.width=t,c.height=t;var f=c.getContext("2d"),h=(0,u.Pt)(f);h.setStyle(l[0],0,0);var p=[25,15],d=Math.floor(p[0]),y=Math.floor(p[1]),g=p[0]-d,m=p[1]-y;h.drawGeometry(new s.ZP([[[g+3,m+3],[d-3,m+3],[d-3,y-3],[g+3,y-3],[g+3,m+3]]])),a.src=c.toDataURL()}}))},c.push(i(a))),(0,n.o8)(this.options_.line)||(o=function(t){return new Promise((function(r,i){var o=new Image;if(o.onload=function(){return r(o)},o.onerror=i,!0===(0,n.vV)(e.options_.line))o.src=t,o.width=30,o.height=30;else{var a=(0,_.LineString)(e.options_,e,e.layer_),s=document.createElement("canvas");s.width=30,s.height=30;var c=s.getContext("2d"),f=(0,u.Pt)(c);f.setStyle(a[0],0,0);var h=(0,n.o8)(a[0].getStroke())?1.5:a[0].getStroke().getWidth();f.drawGeometry(new l.Z([[0+h/2,0+h/2],[25/3,7.5-h/2],[50/3,0+h/2],[25-h/2,7.5-h/2]])),o.src=s.toDataURL()}}))},c.push(o(a)));var f=document.createElement("canvas");f.width=200,f.height=50;var h=f.getContext("2d"),p=[0,60,120],d=0;return Promise.all(c).then((function(e){return e.forEach((function(e){h.drawImage(e,p[d],0),d+=1})),f.toDataURL()}))}},{key:"updateFacadeOptions",value:function(e){var t=this;this.olStyleFn_=function(r){var a=JSON.stringify(r.getProperties()),s=[];t.styles_=[];var l=r;if(l instanceof i.Z||l instanceof o.ZP){var u=l.getGeometry().getType(),c=_[u];(0,n.mf)(c)&&(s=c(e,l,t.layer_),t.styles_[a]=s)}else l=t;return s}}},{key:"drawGeometryToCanvas",value:function(e){}},{key:"updateCanvas",value:function(e){}},{key:"getCanvasSize",value:function(){return 0}},{key:"getRadius_",value:function(e){return e instanceof a.Z?25:e instanceof c.Z?e.getRadius():this.olStyleFn_()[0].getImage().getRadius()}}])&&d(t.prototype,r),f&&d(t,f),Object.defineProperty(t,"prototype",{writable:!1}),p}(f.Z)},39398:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=s.call(this,t)).textOverflow_=void 0!==t.textOverflow?t.textOverflow:"",e.minWidth_=t.minWidth||0,e}return t=l,(r=[{key:"getTextOverflow",value:function(){return this.textOverflow_}},{key:"getMinWidth",value:function(){return this.minWidth_}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(r(5460).Z)},53444:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var n=r(40398),i=r(65792),o=r.n(i),a=r(86534),s=r(44993),l=r(80417),u=r(42755),c=r(53969),f=r(61900),h=r(48843),p=r(17774),d=r(36818),y=r(5460),g=r(52076),m=r(25558),_=r(26890),v=r(15637),A=r(56422),b=r(9220),w=r(45103),E=r(47142),x=r(97906),I=r(92933);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==S(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===S(o)?o:String(o)),n)}var i,o}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(T,e);var t,r,i,S=O(T);function T(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,T),S.apply(this,arguments)}return t=T,(r=[{key:"toImage",value:function(e){var t=null,r={fill:this.options_.fill,stroke:this.options_.stroke,icon:this.options_.icon};if(!0===(0,n.vV)(r))t=(0,n.Is)(e);else{if((0,n.Ew)(this.olStyleFn_))return null;var i=this.olStyleFn_()[1];if(i.getImage&&null!=i.getImage()&&i.getImage()instanceof a.Z){if(i.getImage()instanceof E.Z){var o=i.getImage().getImage();null!=o&&o&&(t=o.toDataURL())}else if(i.getImage()instanceof x.Z){var s=i.getImage();if(!(0,n.Ew)(s)&&!(t=s.getSrc()).startsWith(window.location.origin)){var l=(0,n.wQ)([M.config.PROXY_URL,"/image"]);t=(0,n.h1)(l,{url:t})}}}else{null!=(i=this.olStyleFn_()[0]).getImage()&&null!=i.getImage().getStroke()&&(i.getImage().getStroke().getWidth()>T.DEFAULT_WIDTH_POINT&&i.getImage().getStroke().setWidth(T.DEFAULT_WIDTH_POINT),i.getImage().render());var u=i.getImage().getImage();null!=u&&(t=u.toDataURL())}}return t}},{key:"updateFacadeOptions",value:function(e){var t=this;this.olStyleFn_=function(r){var i=r;i instanceof s.Z||r instanceof _.ZP||(i=t);var a,d,g=new w.Z({zIndex:A.Z.getValue(e.zindex,i,t.layer_),geometry:function(e){var t=b.Z.getCentroid(e.getGeometry()),r=new f.Z(t);if("MultiPoint"===e.getGeometry().getType()||"Point"===e.getGeometry().getType()&&e instanceof _.ZP)if(e instanceof _.ZP){for(var n=e.getFlatCoordinates(),i=[],o=0;o<n.length;o+=2)i.push(n.slice(o,o+2));r=new h.Z(i)}else r=new h.Z(e.getGeometry().getCoordinates());return r}}),m=new w.Z({zIndex:A.Z.getValue(e.zindex,i,t.layer_),geometry:function(e){var t=b.Z.getCentroid(e.getGeometry()),r=new f.Z(t);if("MultiPoint"===e.getGeometry().getType()||"Point"===e.getGeometry().getType()&&e instanceof _.ZP)if(e instanceof _.ZP){for(var n=e.getFlatCoordinates(),i=[],o=0;o<n.length;o+=2)i.push(n.slice(o,o+2));r=new h.Z(i)}else r=new h.Z(e.getGeometry().getCoordinates());return r}});if(!(0,n.Ew)(e.fill)){var v=A.Z.getValue(e.fill.color,i,t.layer_),S=A.Z.getValue(e.fill.opacity,i,t.layer_);S||0===S||(S=1),(0,n.Ew)(v)||(a=new c.Z({color:o()(v).alpha(S).css()}))}if(!(0,n.Ew)(e.stroke)){var C=A.Z.getValue(e.stroke.color,i,t.layer_),P=A.Z.getValue(e.stroke.opacity,i,t.layer_);if(P||0===P||(P=1),!(0,n.Ew)(C)){var O=e.stroke.linedashoffset;d=new p.Z({color:o()(C).alpha(P).css(),width:A.Z.getValue(e.stroke.width,i,t.layer_),lineDash:A.Z.getValue(e.stroke.linedash,i,t.layer_),lineDashOffset:A.Z.getValue(O,i,t.layer_),lineCap:A.Z.getValue(e.stroke.linecap,i,t.layer_),lineJoin:A.Z.getValue(e.stroke.linejoin,i,t.layer_),miterLimit:A.Z.getValue(e.stroke.miterlimit,i,t.layer_)})}}if(!(0,n.Ew)(e.label)){var T=A.Z.getValue(e.label.text,i,t.layer_),M=A.Z.getValue(e.label.align,i,t.layer_),k=A.Z.getValue(e.label.baseline,i,t.layer_),R=new y.Z({font:A.Z.getValue(e.label.font,i,t.layer_),rotateWithView:A.Z.getValue(e.label.rotate,i,t.layer_),scale:A.Z.getValue(e.label.scale,i,t.layer_),offsetX:A.Z.getValue(e.label.offset?e.label.offset[0]:void 0,i,t.layer_),offsetY:A.Z.getValue(e.label.offset?e.label.offset[1]:void 0,i,t.layer_),fill:new c.Z({color:A.Z.getValue(e.label.color||"#000000",i,t.layer_)}),textAlign:Object.values(l).includes(M)?M:"center",textBaseline:Object.values(u).includes(k)?k:"top",text:void 0===T?void 0:String(T),rotation:A.Z.getValue(e.label.rotation,i,t.layer_)});if(!(0,n.Ew)(e.label.stroke)){var B=e.label.stroke,L=B.miterlimit,D=B.linedashoffset;R.setStroke(new p.Z({color:A.Z.getValue(e.label.stroke.color,i,t.layer_),width:A.Z.getValue(e.label.stroke.width,i,t.layer_),lineCap:A.Z.getValue(e.label.stroke.linecap,i,t.layer_),lineJoin:A.Z.getValue(e.label.stroke.linejoin,i,t.layer_),lineDash:A.Z.getValue(e.label.stroke.linedash,i,t.layer_),lineDashOffset:A.Z.getValue(D,i,t.layer_),miterLimit:A.Z.getValue(L,i,t.layer_)}))}g.setText(R)}var j=A.Z.getValue(e.radius,i,t.layer_);return(0,n.kJ)(e.radius)&&(j=A.Z.getValue((function(t,r){var i=e.radius.find((function(e){return e.zoom===r.getZoom()}));return(0,n.o8)(i)&&(i=e.radius.find((function(e){return"default"===e.zoom}))),i?i.value:5}),i,t.layer_)),g.setImage(new I.Z({fill:a,stroke:d,radius:j,snapToPixel:A.Z.getValue(e.snapToPixel,i,t.layer_)})),(0,n.Ew)(e.icon)||((0,n.Ew)(e.icon.src)?(0,n.Ew)(e.icon.form)||m.setImage(new E.Z({form:(0,n.Ew)(A.Z.getValue(e.icon.form,i,t.layer_))?"":A.Z.getValue(e.icon.form,i,t.layer_).toLowerCase(),gradient:A.Z.getValue(e.icon.gradient,i,t.layer_),glyph:A.Z.getValue(e.icon.class,i,t.layer_),fontSize:A.Z.getValue(e.icon.fontsize,i,t.layer_),radius:A.Z.getValue(e.icon.radius,i,t.layer_),rotation:A.Z.getValue(e.icon.rotation,i,t.layer_),rotateWithView:A.Z.getValue(e.icon.rotate,i,t.layer_),offsetX:A.Z.getValue(e.icon.offset?e.icon.offset[0]:void 0,i,t.layer_),offsetY:A.Z.getValue(e.icon.offset?e.icon.offset[1]:void 0,i,t.layer_),fill:new c.Z({color:A.Z.getValue(void 0!==e.icon.fill?e.icon.fill:"#FFFFFF",i,t.layer_)}),stroke:e.icon.color?new p.Z({color:A.Z.getValue(e.icon.color,i,t.layer_),width:1}):void 0,anchor:A.Z.getValue(e.icon.anchor,i,t.layer_),anchorXUnits:A.Z.getValue(e.icon.anchorxunits,i,t.layer_),anchorYUnits:A.Z.getValue(e.icon.anchoryunits,i,t.layer_),src:A.Z.getValue(e.icon.src,i,t.layer_),opacity:A.Z.getValue(e.icon.opacity,i,t.layer_),scale:A.Z.getValue(e.icon.scale,i,t.layer_),snapToPixel:A.Z.getValue(e.icon.snaptopixel,i,t.layer_),offsetOrigin:A.Z.getValue(e.icon.offsetorigin,i,t.layer_),offset:A.Z.getValue(e.icon.offset,i,t.layer_),crossOrigin:A.Z.getValue(e.icon.crossorigin,i,t.layer_),anchorOrigin:A.Z.getValue(e.icon.anchororigin,i,t.layer_),size:A.Z.getValue(e.icon.size,i,t.layer_)})):m.setImage(new x.Z({anchor:A.Z.getValue(e.icon.anchor,i,t.layer_),anchorXUnits:A.Z.getValue(e.icon.anchorxunits,i,t.layer_),anchorYUnits:A.Z.getValue(e.icon.anchoryunits,i,t.layer_),src:A.Z.getValue(e.icon.src,i,t.layer_),opacity:A.Z.getValue(e.icon.opacity,i,t.layer_),scale:A.Z.getValue(e.icon.scale,i,t.layer_),rotation:A.Z.getValue(e.icon.rotation,i,t.layer_),rotateWithView:A.Z.getValue(e.icon.rotate,i,t.layer_),snapToPixel:A.Z.getValue(e.icon.snaptopixel,i,t.layer_),offsetOrigin:A.Z.getValue(e.icon.offsetorigin,i,t.layer_),offset:A.Z.getValue(e.icon.offset,i,t.layer_),crossOrigin:A.Z.getValue(e.icon.crossorigin,i,t.layer_),anchorOrigin:A.Z.getValue(e.icon.anchororigin,i,t.layer_),size:A.Z.getValue(e.icon.size,i,t.layer_)}))),[g,m]}}},{key:"drawGeometryToCanvas",value:function(e){this.olStyleFn_()[1].getImage()instanceof v.Z?e.drawGeometry(new f.Z([10,10])):e.drawCircle(new d.Z([this.getCanvasSize()[0]/2,this.getCanvasSize()[1]/2],this.getRadius_()))}},{key:"updateCanvas",value:function(e){var t=this,r=this.options_;if(r.point&&(r=r.point),r.icon&&r.icon.src&&"string"==typeof r.icon.src&&r.icon.src.endsWith(".svg")&&(r.icon.fill||r.icon.stroke))(0,n.XO)(r.icon.src,r).then((function(){t.updateCanvas(e)}));else if(this.updateFacadeOptions(r),!(0,n.vV)(r)){var i=this.getCanvasSize(),o=(0,m.Pt)(e.getContext("2d"),{size:i}),a=this.olStyleFn_()[0];(0,n.Ew)(a.getText())||a.setText(null),!(0,n.Ew)(this.olStyleFn_()[1])&&this.olStyleFn_()[1].getImage()instanceof v.Z&&(a=this.olStyleFn_()[1]);var s=a.getImage().getStroke();(0,n.Ew)(s)||(0,n.Ew)(s.getWidth())||s.setWidth(3),o.setStyle(a),this.drawGeometryToCanvas(o)}}},{key:"getCanvasSize",value:function(){var e,t=this.olStyleFn_()[1].getImage();if(t instanceof v.Z)e=[90,90];else{var r=this.getRadius_(t);e=[2*r+4,2*r+4]}return e}},{key:"getRadius_",value:function(e){return e instanceof g.Z?25:e instanceof v.Z?e.getRadius():this.olStyleFn_()[0].getImage().getRadius()}}])&&C(t.prototype,r),i&&C(t,i),Object.defineProperty(t,"prototype",{writable:!1}),T}(A.Z);k.DEFAULT_WIDTH_POINT=3,k.getFonts=function(){var e=[],t=v.Z.defs.fonts;return Object.keys(t).forEach((function(t){e.push(t)})),e},k.getFontsIcons=function(e){var t=[],r=v.Z.defs.glyphs;return Object.entries(r).forEach((function(r){r[1].font===e&&t.push(r[0])})),t};const R=k},56422:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(44993),i=r(26890),o=r(40398),a=r(71160),s=r(94551);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(h,e);var t,r,a,l=f(h);function h(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(e=l.call(this,t)).updateFacadeOptions(t),e}return t=h,a=[{key:"getValue",value:function(e,t,r){var a=/^\{\{([^}]+)\}\}$/,l=e;if(a.test(e)||(0,o.mf)(e))if(t instanceof n.Z||t instanceof i.ZP){var u=s.Z.olFeature2Facade(t,!1);if(a.test(e)){var c=e.replace(a,"$1");l=u.getAttribute(c)}else if((0,o.mf)(e)){var f;(0,o.Ew)(r)||(f=r.getImpl().getMap()),l=e(u,f)}}else l=void 0;return(0,o.Ew)(l)&&(l=void 0),l}}],(r=[{key:"olStyleFn",get:function(){return this.olStyleFn_}},{key:"applyToLayer",value:function(e){this.layer_=e;var t=e.getImpl().getOL3Layer();(0,o.Ew)(t)||t.setStyle(this.olStyleFn_)}},{key:"applyToFeature",value:function(e){e.getImpl().getOLFeature().setStyle(this.olStyleFn_)}}])&&u(t.prototype,r),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),h}(a.Z)},71160:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(25558);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}const u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options_=t,this.layer_=null,this.updateFacadeOptions(t)}var t,r,i;return t=e,r=[{key:"updateFacadeOptions",value:function(){}},{key:"applyToLayer",value:function(e){this.layer_=e,e.getFeatures().forEach(this.applyToFeature,this)}},{key:"applyToFeature",value:function(e){e.getImpl().getOLFeature().setStyle(this.olStyleFn_)}},{key:"updateCanvas",value:function(t){var r=e.getCanvasSize(),i=(0,n.Pt)(t.getContext("2d"),{size:r});i.setStyle(this.olStyleFn_()[0]),this.drawGeometryToCanvas(i)}},{key:"drawGeometryToCanvas",value:function(e){}},{key:"clone",value:function(){return new e(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.options_))}}],i=[{key:"getCanvasSize",value:function(){return[100,100]}}],r&&s(t.prototype,r),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},13754:(e,t,r)=>{"use strict";r.d(t,{Gn:()=>P,H5:()=>k,Li:()=>O,_M:()=>A,gW:()=>S,id:()=>E,mx:()=>b,ow:()=>C,sG:()=>T,uB:()=>x,v9:()=>M,yP:()=>w,zW:()=>I});var n=r(65792),i=r.n(n),o=r(40398),a=r(80417),s=r(42755),l=r(78456),u=r(53969),c=r(17774),f=r(5460),h=r(52076),p=r(56422),d=r(39398),y=r(97906),g=r(47142),m=r(11297),_=r(92933),v=r(63039),A=function(e,t,r){var n;if(!(0,o.Ew)(e.fill)){var a=p.Z.getValue(e.fill.color,t,r),s=p.Z.getValue(e.fill.opacity,t,r);s||0===s||(s=1),(0,o.Ew)(a)||(n=new u.Z({color:i()(a).alpha(s).css()}))}return n},b=function(e,t,r){var n;if(!(0,o.Ew)(e.stroke)){var a=p.Z.getValue(e.stroke.color,t,r),s=p.Z.getValue(e.stroke.opacity,t,r);if(s||0===s||(s=1),!(0,o.Ew)(a)){var l=e.stroke.linedashoffset;n=new c.Z({color:i()(a).alpha(s).css(),width:p.Z.getValue(e.stroke.width,t,r),lineDash:p.Z.getValue(e.stroke.linedash,t,r),lineDashOffset:p.Z.getValue(l,t,r),lineCap:p.Z.getValue(e.stroke.linecap,t,r),lineJoin:p.Z.getValue(e.stroke.linejoin,t,r),miterLimit:p.Z.getValue(e.stroke.miterlimit,t,r)})}}return n},w=function(e,t,r){var n="rgba(0,0,0,1)";(0,o.Ew)(e.stroke.pattern.color)||(n=p.Z.getValue(e.stroke.pattern.color,t,r));var i=new u.Z({color:e.stroke.color?e.stroke.color:"rgba(0,0,0,0)",opacity:e.stroke.opacity?e.stroke.opacity:1});return new v.Z({pattern:(p.Z.getValue(e.stroke.pattern.name,t,r)||"").toLowerCase(),color:n,width:p.Z.getValue(e.stroke.width,t,r),size:p.Z.getValue(e.stroke.pattern.size,t,r),spacing:p.Z.getValue(e.stroke.pattern.spacing,t,r),image:"Image"===p.Z.getValue(e.stroke.pattern.name,t,r)?new h.Z({src:p.Z.getValue(e.stroke.pattern.src,t,r),crossOrigin:"anonymous"}):void 0,angle:p.Z.getValue(e.stroke.pattern.rotation,t,r),scale:p.Z.getValue(e.stroke.pattern.scale,t,r),offset:p.Z.getValue(e.stroke.pattern.offset,t,r),fill:i,layer:r})},E=function(e,t,r){var n;if(e.label){var i=p.Z.getValue(e.label.text,t,r),l=p.Z.getValue(e.label.align,t,r),h=p.Z.getValue(e.label.baseline,t,r);if(n=new f.Z({font:p.Z.getValue(e.label.font,t,r),rotateWithView:p.Z.getValue(e.label.rotate,t,r),scale:p.Z.getValue(e.label.scale,t,r),offsetX:p.Z.getValue(e.label.offset?e.label.offset[0]:void 0,t,r),offsetY:p.Z.getValue(e.label.offset?e.label.offset[1]:void 0,t,r),fill:new u.Z({color:p.Z.getValue(e.label.color||"#000",t,r)}),textAlign:Object.values(a).includes(l)?l:"center",textBaseline:Object.values(s).includes(h)?h:"top",text:void 0===i?void 0:String(i),rotation:p.Z.getValue(e.label.rotation,t,r)}),!(0,o.Ew)(e.label.stroke)){var d=e.label.stroke,y=d.miterlimit,g=d.linedashoffset;n.setStroke(new c.Z({color:p.Z.getValue(e.label.stroke.color,t,r),width:p.Z.getValue(e.label.stroke.width,t,r),lineCap:p.Z.getValue(e.label.stroke.linecap,t,r),lineJoin:p.Z.getValue(e.label.stroke.linejoin,t,r),lineDash:p.Z.getValue(e.label.stroke.linedash,t,r),lineDashOffset:p.Z.getValue(g,t,r),miterLimit:p.Z.getValue(y,t,r)}))}}return n},x={},I=function(e,t,r){var n=p.Z.getValue(e.icon.anchor,t,r),i=p.Z.getValue(e.icon.anchorxunits,t,r),o=p.Z.getValue(e.icon.anchoryunits,t,r),a=p.Z.getValue(e.icon.src,t,r),s=p.Z.getValue(e.icon.opacity,t,r),l=p.Z.getValue(e.icon.scale,t,r),u=p.Z.getValue(e.icon.rotation,t,r),c=p.Z.getValue(e.icon.rotate,t,r),f=p.Z.getValue(e.icon.snaptopixel,t,r),h=p.Z.getValue(e.icon.offsetorigin,t,r),d=p.Z.getValue(e.icon.offset,t,r),g=p.Z.getValue(e.icon.crossorigin,t,r),m=p.Z.getValue(e.icon.anchororigin,t,r),_=a+n+i+o+s+l+u+c+f+h+d+g+m+m+p.Z.getValue(e.icon.size,t,r),v=x[_];return v||(v=new y.Z({anchor:p.Z.getValue(e.icon.anchor,t,r),anchorXUnits:p.Z.getValue(e.icon.anchorxunits,t,r),anchorYUnits:p.Z.getValue(e.icon.anchoryunits,t,r),src:p.Z.getValue(e.icon.src,t,r),opacity:p.Z.getValue(e.icon.opacity,t,r),scale:p.Z.getValue(e.icon.scale,t,r),rotation:p.Z.getValue(e.icon.rotation,t,r),rotateWithView:p.Z.getValue(e.icon.rotate,t,r),snapToPixel:p.Z.getValue(e.icon.snaptopixel,t,r),offsetOrigin:p.Z.getValue(e.icon.offsetorigin,t,r),offset:p.Z.getValue(e.icon.offset,t,r),crossOrigin:p.Z.getValue(e.icon.crossorigin,t,r),anchorOrigin:p.Z.getValue(e.icon.anchororigin,t,r),size:p.Z.getValue(e.icon.size,t,r)}),x[_]=v),v},S=function(e,t,r){return new g.Z({form:(0,o.Ew)(p.Z.getValue(e.icon.form,t,r))?"":p.Z.getValue(e.icon.form,t,r).toLowerCase(),gradient:p.Z.getValue(e.icon.gradient,t,r),glyph:p.Z.getValue(e.icon.class,t,r),fontSize:p.Z.getValue(e.icon.fontsize,t,r),radius:p.Z.getValue(e.icon.radius,t,r),rotation:p.Z.getValue(e.icon.rotation,t,r),rotateWithView:p.Z.getValue(e.icon.rotate,t,r),offsetX:p.Z.getValue(e.icon.offset?e.icon.offset[0]:void 0,t,r),offsetY:p.Z.getValue(e.icon.offset?e.icon.offset[1]:void 0,t,r),fill:new u.Z({color:p.Z.getValue(void 0!==e.icon.fill?e.icon.fill:"#FFFFFF",t,r)}),stroke:e.icon.color?new c.Z({color:p.Z.getValue(e.icon.color,t,r),width:1}):void 0,anchor:p.Z.getValue(e.icon.anchor,t,r),anchorXUnits:p.Z.getValue(e.icon.anchorxunits,t,r),anchorYUnits:p.Z.getValue(e.icon.anchoryunits,t,r),src:p.Z.getValue(e.icon.src,t,r),opacity:p.Z.getValue(e.icon.opacity,t,r),scale:p.Z.getValue(e.icon.scale,t,r),snapToPixel:p.Z.getValue(e.icon.snaptopixel,t,r),offsetOrigin:p.Z.getValue(e.icon.offsetorigin,t,r),offset:p.Z.getValue(e.icon.offset,t,r),crossOrigin:p.Z.getValue(e.icon.crossorigin,t,r),anchorOrigin:p.Z.getValue(e.icon.anchororigin,t,r),size:p.Z.getValue(e.icon.size,t,r)})},C=function(e,t,r,n){var a="rgba(0,0,0,1)";if(!(0,o.Ew)(e.fill.pattern.color)){var s=p.Z.getValue(e.fill.pattern.opacity,t,r)||1;s||0===s||(s=1),a=i()(e.fill.pattern.color).alpha(s).css()}return"LineString"===t.getGeometry().getType()||"MultiLineString"===t.getGeometry().getType()?new v.Z({pattern:(p.Z.getValue(e.fill.pattern.name,t,r)||"").toLowerCase(),color:a,width:p.Z.getValue(e.fill.width,t,r),size:p.Z.getValue(e.fill.pattern.size,t,r),spacing:p.Z.getValue(e.fill.pattern.spacing,t,r),image:"Image"===p.Z.getValue(e.fill.pattern.name,t,r)?new h.Z({src:p.Z.getValue(e.fill.pattern.src,t,r),crossOrigin:"anonymous"}):void 0,angle:p.Z.getValue(e.fill.pattern.rotation,t,r),scale:p.Z.getValue(e.fill.pattern.scale,t,r),offset:p.Z.getValue(e.fill.pattern.offset,t,r),fill:n,layer:r}):new m.Z({pattern:(p.Z.getValue(e.fill.pattern.name,t,r)||"").toLowerCase(),color:a,size:p.Z.getValue(e.fill.pattern.size,t,r),spacing:p.Z.getValue(e.fill.pattern.spacing,t,r),image:"IMAGE"===p.Z.getValue(e.fill.pattern.name,t,r)?new h.Z({src:p.Z.getValue(e.fill.pattern.src,t,r)}):void 0,angle:p.Z.getValue(e.fill.pattern.rotation,t,r),scale:p.Z.getValue(e.fill.pattern.scale,t,r),offset:p.Z.getValue(e.fill.pattern.offset,t,r),fill:n,layer:r})},P=function(e,t,r){var n;if(!(0,o.Ew)(e.fill)){var a=p.Z.getValue(e.fill.color,t,r),s=p.Z.getValue(e.fill.opacity,t,r);s||0===s||(s=1);var l=p.Z.getValue(e.fill.width,t,r);(0,o.Ew)(a)||(n=new c.Z({color:i()(a).alpha(s).css(),width:l}))}return n},O=function(e,t,r){var n,i=e.label;if(!(0,o.Ew)(i)){var a={text:void 0===p.Z.getValue(i.text,t)?void 0:String(p.Z.getValue(i.text,t)),font:p.Z.getValue(i.font,t),fill:new u.Z({color:p.Z.getValue(i.color||"#000",t)}),textBaseline:(p.Z.getValue(i.baseline,t)||"").toLowerCase(),textAlign:p.Z.getValue(i.align,t),scale:p.Z.getValue(i.scale,t),rotateWithView:p.Z.getValue(i.rotate,t)||!1,overflow:p.Z.getValue(i.textoverflow,t)||!1,minWidth:p.Z.getValue(i.minwidth,t)||0,geometry:p.Z.getValue(i.geometry,t),offsetX:p.Z.getValue(e.label.offset?e.label.offset[0]:void 0,t),offsetY:p.Z.getValue(e.label.offset?e.label.offset[1]:void 0,t)};n=new d.Z(a),(0,o.Ew)(i.stroke)||n.setStroke(new c.Z({color:p.Z.getValue(i.stroke.color,t),width:p.Z.getValue(i.stroke.width,t),lineCap:p.Z.getValue(i.stroke.linecap,t),lineJoin:p.Z.getValue(i.stroke.linejoin,t),lineDash:p.Z.getValue(i.stroke.linedash,t),lineDashOffset:p.Z.getValue(i.stroke.linedashoffset,t),miterLimit:p.Z.getValue(i.stroke.miterlimit,t)}))}return n},T=function(e,t,r){var n=e||{},i=A(n,t,r),a=b(n,t,r),s=new _.Z({fill:i,stroke:a,radius:p.Z.getValue(n.radius,t,r),snapToPixel:p.Z.getValue(n.snapToPixel,t,r)}),u=new l.ZP({image:s}),c=new l.ZP;if(!(0,o.Ew)(n.icon)){var f,h=p.Z.getValue(n.icon.src,t,r);(0,o.Ew)(h)?(0,o.Ew)(n.icon.form)||(f=S(n,t,r),c.setImage(f)):(f=I(n,t,r),c.setImage(f))}var d=E(n,t,r);return(0,o.Ew)(n.label)||(0,o.o8)(d.getText())||u.setText(d),[u,c]},M=function(e,t,r){var n=e||{},i=b(n,t,r),a=P(n,t,r),s=O(n,t,r);n.fill&&!(0,o.Ew)(n.fill.pattern)&&(a=C(n,t,r,a));var u=new l.ZP,c=new l.ZP;(0,o.Ew)(n.label)||(!0===p.Z.getValue(n.label.path,t)&&(u.textPath=s,!(0,o.Ew)(n.label.smooth)&&!0===n.label.smooth&&(0,o.mf)(t.getGeometry)&&u.setGeometry(t.getGeometry().cspline()),s.setPlacement("line")),u.setText(s));return u.setStroke(i),c.setStroke(a),[u,c]},k=function(e,t,r){var n=e||{},i=new l.ZP,a=b(n,t,r);n.stroke&&!(0,o.Ew)(n.stroke.pattern)&&(a=w(n,t,r));var s=A(n,t,r),u=E(n,t,r);return n.fill&&!(0,o.Ew)(n.fill.pattern)&&(s=C(n,t,r,s)),i.setFill(s),i.setStroke(a),i.setText(u),[i]}},23061:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(43950),i=r(34795),o=r(97874),a=r(92882),s=r(38815),l=r(61900),u=r(67033),c=r(96903),f=r(75934),h=r(92922),p=r(27811),d=r(44993),y=r(9220),g=r(94551);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===m(o)?o:String(o)),n)}var i,o}const v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,m;return t=e,m=[{key:"centerFeatures",value:function(e,t){if(1===e.length&&"Point"===e[0].getGeometry().type){var r=new h.ZP({center:e[0].getGeometry().coordinates,zoom:15});t.getMapImpl().setView(r)}else{var n=y.Z.getFeaturesExtent(e);t.getMapImpl().getView().fit(n,{duration:500,minResolution:1})}}},{key:"loadGeoJSONLayer",value:function(e,t){var r=(new i.Z).readFeatures(e,{featureProjection:t});return r=(r=this.featuresToFacade(r)).filter((function(e){return null!==e.getGeometry()}))}},{key:"loadAllInGeoJSONLayer",value:function(e,t){var r=this,n=[];return e.forEach((function(e){var i=r.loadGeoJSONLayer(e,t);null!=i&&i.length>0&&(n=n.concat(i))})),n}},{key:"loadGPXLayer",value:function(e,t){var r=[];return(new o.Z).readFeatures(e,{featureProjection:t}).forEach((function(e){if("MultiLineString"===e.getGeometry().getType()&&1===e.getGeometry().getLineStrings().length){var t=e.getGeometry().getLineStrings()[0];e.setGeometry(t)}r.push(e)})),r=this.featuresToFacade(r)}},{key:"parseSurfacesGml",value:function(e){var t=[];return(new DOMParser).parseFromString(e,"text/xml").querySelectorAll("Surface").forEach((function(e){t.push({surface:e,id:"",sistema:""})})),t}},{key:"parseGeometriesGml",value:function(e){var t=[],r=(new DOMParser).parseFromString(e,"text/xml"),n=r.querySelectorAll("Point"),i=r.querySelectorAll("LineString"),o=r.querySelectorAll("Polygon");return n.forEach((function(e){t.push({surface:e,id:"",sistema:"",type:"Point"})})),i.forEach((function(e){t.push({surface:e,id:"",sistema:"",type:"LineString"})})),o.forEach((function(e){t.push({surface:e,id:"",sistema:"",type:"Polygon"})})),t}},{key:"getEPSGFromGML32",value:function(e){return e.map((function(e){var t=e,r=e.surface.getAttribute("srsName");if(r.indexOf("EPSG::326")>-1){var n=parseInt(r.substring(r.indexOf("::")+2,r.length),10)-6800;r="EPSG::".concat(n)}else if(-1===r.indexOf("::")){if(r.indexOf("opengis.net/def/crs")){var i=-1===r.indexOf("258")?r.indexOf("326"):r.indexOf("258");r="EPSG::".concat(r.substring(i,r.length))}}else r=r.substring(r.indexOf("EPSG"),r.length);return t.sistema=r.replace("::",":"),t})),e}},{key:"parseCoordinatesGML32",value:function(e,t,r){for(var n=[],i=0;i<e.length;i+=2){var o=[parseFloat(e[i+1]),parseFloat(e[i])];n.push((0,p.vs)(o,t,r))}return n}},{key:"getGML32PolygonCoordinates",value:function(e,t){var r=this,n=e.surface.querySelector("exterior"),i=e.surface.querySelectorAll("interior"),o=e.sistema,a=[],s=n.querySelector("posList").textContent.split(" ");return a.push(this.parseCoordinatesGML32(s,o,t)),i.forEach((function(e){var n=e.querySelector("posList").textContent.split(" ");a.push(r.parseCoordinatesGML32(n,o,t))})),a}},{key:"getGML32LineCoordinates",value:function(e,t){var r=e.sistema,n=e.surface.querySelector("posList").textContent.split(" ");return this.parseCoordinatesGML32(n,r,t)}},{key:"getGML32PointCoordinates",value:function(e,t){var r=e.sistema,n=e.surface.querySelector("pos").textContent.split(" ");return this.parseCoordinatesGML32(n,r,t)[0]}},{key:"getCoordinatesFromGML32",value:function(e,t){var r=this,n=[],i=1;return e.forEach((function(e){var o=[],a=""!==e.id?e.id:"ID_".concat(i),s=""!==e.id?e.id:"nombre_".concat(i);"Polygon"===e.type?o=r.getGML32PolygonCoordinates(e,t):"LineString"===e.type?o=r.getGML32LineCoordinates(e,t):"Point"===e.type&&(o=r.getGML32PointCoordinates(e,t)),i+=1,n.push({fichero:void 0,tipo:e.type,id:"".concat(a),coordenadas:o,nombre:"".concat(s),sistema:e.sistema})})),n}},{key:"gmlParser",value:function(e,t){var r=[],n=this.parseSurfacesGml(e);return 0===n.length&&(n=this.parseGeometriesGml(e)),n=this.getEPSGFromGML32(n),this.getCoordinatesFromGML32(n,t).forEach((function(e){var t;"Polygon"===e.tipo?t=new a.ZP(e.coordenadas):"LineString"===e.tipo?t=new s.Z(e.coordenadas):"Point"===e.tipo&&(t=new l.Z(e.coordenadas));var n=new d.Z({geometry:t});n.setId("GML ".concat(r.length+1)),r.push(n)})),r}},{key:"loadGMLLayer",value:function(e,t){var r=e,n=t;if(r.indexOf('srsName="GCS_WGS_1984"')>-1&&(r=r.replace(/srsName="GCS_WGS_1984"/gi,'srsName="EPSG:4326"')),r.indexOf("cp:geometry")>-1&&(r=r.replace(/cp:geometry/gi,"ogr:geometryProperty")),r.indexOf("certificacion:the_geom")>-1&&(r=r.replace(/certificacion:the_geom/gi,"ogr:geometryProperty")),r.split('srsName="')[1].split('"')[0].indexOf("http")>-1)try{n="EPSG:".concat(r.split('srsName="')[1].split("#")[1].split('"')[0])}catch(e){n="EPSG:".concat(r.split('srsName="')[1].split("/EPSG/")[1].split("/")[1])}else n=r.split('srsName="')[1].indexOf("crs:EPSG::")>-1?"EPSG:".concat(r.split('srsName="')[1].split("::")[1].split('"')[0]):r.split('srsName="')[1].split('"')[0];r.indexOf("<member>")>-1?r=r.replace(/member/gi,"gml:featureMember"):r.indexOf("<wfs:member>")>-1?r=r.replace(/wfs:member/gi,"gml:featureMember"):r.indexOf("<ogr:featureMember>")>-1&&(r=r.replace(/ogr:featureMember/gi,"gml:featureMember"));var i=new u.Z({gmlFormat:new c.Z}).readFeatures(r,{dataProjection:n,featureProjection:t});return 0!==(i=i.map((function(e,t){var r=e;return e.getGeometry()||r.setGeometry(e.get("geometry")),r}))).length&&void 0!==i[0].getGeometry()||(i=(i=new u.Z({gmlFormat:new f.Z}).readFeatures(r,{dataProjection:n,featureProjection:t})).map((function(e,t){var r=e;return e.getGeometry()||r.setGeometry(e.get("geometry")),r}))),(0===i.length||void 0===i[0].getGeometry())&&r.indexOf("gml/3.2")>0&&(i=this.gmlParser(r,t)),i=this.featuresToFacade(i)}},{key:"loadKMLLayer",value:function(e,t,r){var i=new n.ZP({extractStyles:r}).readFeatures(e,{featureProjection:t});return i=this.featuresToFacade(i)}},{key:"featuresToFacade",value:function(e){return e.map((function(e){return g.Z.olFeature2Facade(e)}))}}],(r=null)&&_(t.prototype,r),m&&_(t,m),Object.defineProperty(t,"prototype",{writable:!1}),e}()},9220:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T,w:()=>O});var n=r(81517),i=r(92482),o=r(40398),a=r(36181),s=r(27811),l=r(44993),u=r(26890),c=r(61900),f=r(38815),h=r(85302),p=r(92882),d=r(48843),y=r(70278),g=r(44133),m=r(76527),_=r(36818);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function A(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===v(t)?t:String(t)}var C=function(e,t){return function(e,t){var r=e;return r[0]=t[0],r[1]=t[1],r}(t,(0,s.Ck)(e,"EPSG:4326")(function(e){for(var t=[],r=0;r<e.length;r+=1)t.push(e[r]);for(;t.length>2;)t.pop();return t}(t)))},P=function(e,t,r){var n=[];switch(e){case"Point":return C(t,r);case"MultiPoint":case"LineString":for(var i=0;i<r.length;i+=1){var o=C(t,r[i]);n.push(o)}return n;case"MultiLineString":case"Polygon":for(var a=0;a<r.length;a+=1){for(var s=[],l=0;l<r[a].length;l+=1){var u=C(t,r[a][l]);s.push(u)}n.push(s)}return n;case"MultiPolygon":for(var c=0;c<r.length;c+=1){for(var f=[],h=0;h<r[c].length;h+=1){for(var p=[],d=r[c][h],y=0;y<d.length;y+=1){var g=C(t,d[y]);p.push(g)}f.push(p)}n.push(f)}return n;default:return n}},O=function(e,t){var r=[];return e.forEach((function(e){var n,i,o;if("GeometryCollection"!==e.geometry.type){var a=P(e.geometry.type,t,e.geometry.coordinates);o=a,n=x(x({},i=e),{},{geometry:{type:i.geometry.type,coordinates:o}})}else{var s=e.geometry.geometries.map((function(e){return{type:e.type,coordinates:P(e.type,t,e.coordinates)}}));n=x(x({},e),{},{geometry:{type:"GeometryCollection",geometries:s}})}r.push(n)})),r};const T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,v;return t=e,v=[{key:"generateResolutions",value:function(e,t,r,n){var i,s,l,u=[];(0,o.Ew)(t)&&(i=e.getExtent());var c=(0,a.dz)(i)/256;(0,o.Ew)(r)&&(s=0),(0,o.Ew)(n)&&(l=20);for(var f=l-s,h=0;h<f;h+=1)u[h]=c/Math.pow(2,h);return u}},{key:"addOverlayImage",value:function(e,t){t.getMapImpl().updateSize();var r=t.getMapImpl().getSize(),n=e.screenXY,i=e.screenXUnits,o=e.screenYUnits,a=e.overlayXY,s=e.overlayXUnits,l=e.overlayYUnits,u=e.size,c=e.src,f=document.createElement("img");f.src=c,f.style.width="".concat(u[0],"px"),f.style.height="".concat(u[1],"px");var h=a[0];"fraction"===s&&(h*=u[0]);var p=a[1];"fraction"===l&&(p=u[1]-p*u[1]),f.style.position="absolute";var d=n[0];"fraction"===i&&(d=d*r[0]-h);var y=n[1];return"fraction"===o&&(y=r[1]-y*r[1]-p),f.style.top="".concat(y,"px"),f.style.left="".concat(d,"px"),t.getMapImpl().getOverlayContainerStopEvent().appendChild(f),f}},{key:"addFacadeName",value:function(e,t){var r=t;if((0,o.Ew)(e)&&!(0,o.Ew)(r.getSource())&&!(0,o.Ew)(r.getSource().getParams)&&!(0,o.Ew)(r.getSource().getParams().LAYERS))return r.getSource().getParams().LAYERS;if((0,o.Ew)(e)&&!(0,o.Ew)(r.getSource())&&!(0,o.Ew)(r.getSource().getUrl)&&!(0,o.Ew)(r.getSource().getUrl())&&"function"!=typeof r.getSource().getUrl()){var n=null,i=r.getSource().getUrl().split("&typeName=")[1];return(0,o.Ew)(i)||(n=i.split("&")[0].split(":")),(0,o.Ew)(n)?(0,o.cL)("layer_"):n[1]}return r.getSource().getLayer?r.getSource().getLayer():(0,o.Ew)(e)?(0,o.cL)("layer_"):e}},{key:"addFacadeLegend",value:function(e){var t=e;return t.getProperties()&&t.getProperties().legend?t.getProperties().legend:null}},{key:"getExtentHeight",value:function(e){return e[3]-e[1]}},{key:"getExtentWidth",value:function(e){return e[2]-e[0]}},{key:"getCentroid",value:function(t){var r,n,i,a,s;if((0,o.Ew)(t))r=null;else if(t instanceof u.ZP)r=t;else switch(t.getType()){case"Point":r=t.getCoordinates();break;case"LineString":case"LinearRing":r=(n=t.getCoordinates())[i=Math.floor(n.length/2)];break;case"Polygon":r=e.getCentroid(t.getInteriorPoint());break;case"MultiPoint":a=t.getPoints(),i=Math.floor(a.length/2),r=e.getCentroid(a[i]);break;case"MultiLineString":s=t.getLineStrings(),i=Math.floor(s.length/2),r=e.getCentroid(s[i]);break;case"MultiPolygon":a=t.getInteriorPoints(),r=e.getCentroid(a);break;case"Circle":r=t.getCenter();break;default:return null}return r}},{key:"getFeaturesExtent",value:function(e,t){var r=e.map((function(e){return e instanceof n.Z?e.getImpl().getOLFeature():e})),i=[];if(r.forEach((function(e){e.getGeometry()&&i.push(e.getGeometry().getExtent().slice(0))})),1===i.length){var o=r[0].getGeometry();if("Point"===o.getType()){var l=function(e,t){return t/(0,s.U2)(e).getMetersPerUnit()}(t,1e3),u=o.getCoordinates()[0],c=o.getCoordinates()[1];i=[[u-l,c-l,u+l,c+l]]}}return 0===i.length?null:i.reduce((function(e,t){return(0,a.l7)(e,t)}))}},{key:"getCentroidCoordinate",value:function(t){var r,n,o,a,s,l;return t.getType()===i.e_?r=t.getCoordinates():t.getType()===i.Sd||t.getType()===i.NB?r=(n=t.getCoordinates())[o=Math.floor(n.length/2)]:t.getType()===i.KX?r=e.getCentroidCoordinate(t.getInteriorPoint()):t.getType()===i.V0?(a=t.getPoints(),o=Math.floor(a.length/2),r=e.getCentroidCoordinate(a[o])):t.getType()===i.jW?(s=t.getLineStrings(),o=Math.floor(s.length/2),r=e.getCentroidCoordinate(s[o])):t.getType()===i.rl?(a=t.getInteriorPoints(),r=e.getCentroidCoordinate(a)):t.getType()===i.Md?r=t.getCenter():t.getType()===i.hF&&(l=t.getGeometries(),o=Math.floor(l.length/2),r=e.getCentroidCoordinate(l[o])),r}},{key:"transformExtent",value:function(e,t,r){var n=(0,o.HD)(t)?(0,s.U2)(t):t,i=(0,o.HD)(r)?(0,s.U2)(r):r,a=n.getExtent();return e.every((function(e,t){return t<2?e<=a[t]:e>=a[t]}))?i.getExtent():(0,s.$A)(e,n,i)}},{key:"olRenderFeature2olFeature",value:function(e,t,r){var n;if(!(0,o.Ew)(e)){var i,a=e.getId(),s=e.getProperties();if((0,o.Ew)(t)&&(0,o.Ew)(t))i=this.getGeometryFromRenderFeature(e.getGeometry());else{var u=t.getExtent(),c=t.getWorldExtent();if(!(0,o.Ew)(u)&&!(0,o.Ew)(c)){var f=this.cloneOLRenderFeature(e);f.transform(t,r),i=this.getGeometryFromRenderFeature(f.getGeometry())}}n=new l.Z,(0,o.Ew)(a)?n.setId((0,o.cL)("mapea_feature_")):n.setId(a),n.setProperties(s,!0),n.setGeometry(i)}return n}},{key:"cloneOLRenderFeature",value:function(e){var t=e.getType(),r=e.getFlatCoordinates(),n=e.getEnds(),i=e.getProperties(),o=e.getId(),a=A(r),s=Object.assign(i),l=A(n);return new u.ZP(t,a,l,s,o)}},{key:"getGeometryFromRenderFeature",value:function(e){var t,r=e.getFlatCoordinates(),n=e.getEnds(),i=e.getEndss();switch(e.getType()){case"Point":t=new c.Z(r);break;case"LineString":t=new f.Z(r);break;case"LinearRing":t=new h.Z(r);break;case"Polygon":t=new p.ZP(r);break;case"MultiPoint":t=new d.Z(r);break;case"MultiLineString":t=new y.Z(r,void 0,n);break;case"MultiPolygon":t=new g.Z(r,void 0,i);break;case"GeometryCollection":var o=e.getGeometries();t=new m.Z(o);break;case"Circle":var a=e.getFlatInteriorPoint();t=new _.Z(a);break;default:t=null}return t}},{key:"getWMTSScale",value:function(e,t){var r=e.getProjection().code,n=(0,s.U2)(r).getMetersPerUnit(),i=e.getMapImpl().getSize(),o=i[0],a=e.getMapImpl().getView().calculateExtent(i),l=n*(a[2]-a[0])/o*1e3/.28;return 1==!t&&(l=l>=1e3&&l<=95e4?1e3*Math.round(l/1e3):l>=95e4?1e6*Math.round(l/1e6):Math.round(l)),Math.trunc(l)}}],(r=null)&&w(t.prototype,r),v&&w(t,v),Object.defineProperty(t,"prototype",{writable:!1}),e}()},19441:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(40398),i=r(9396),o=r(27811),a=r(9220);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}const u=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.capabilities_=t,this.projection_=n,this.serviceUrl_=r}var t,r,s;return t=e,(r=[{key:"capabilities",get:function(){return this.capabilities_}},{key:"projection",get:function(){return this.projection_}},{key:"serviceUrl",get:function(){return this.serviceUrl_}},{key:"getLayerExtent",value:function(e){var t=this.capabilities_.Capability.Layer,r=this.getExtentRecursive_(t,e);return this.transformExtent(r)}},{key:"getExtentRecursive_",value:function(e,t){var r,i=this,s=null;if(!(0,n.Ew)(e))if((0,n.kJ)(e))for(r=0;r<e.length&&null===s;r+=1)s=this.getExtentRecursive_(e[r],t);else if((0,n.Kn)(e))if((0,n.Ew)(t)||e.Name===t)if((0,n.Ew)(e.BoundingBox)){if(!(0,n.Ew)(e.LatLonBoundingBox)){var l=e.LatLonBoundingBox[0];this.capabilitiesProj="EPSG:4326";var u=(0,o.U2)("EPSG:4326"),c=(0,o.U2)(this.projection_.code);s=a.Z.transformExtent(l.extent,u,c)}}else{var f=e.BoundingBox.find((function(e){return e.crs===i.projection_.code}));if((0,n.Ew)(f)){var h=e.BoundingBox[0];this.capabilitiesProj=h.crs;var p=(0,o.U2)(h.crs),d=(0,o.U2)(this.projection_.code);s=a.Z.transformExtent(h.extent,p,d)}else this.capabilitiesProj=f.crs,s=f.extent}else(0,n.o8)(e.Layer)||(s=this.getExtentRecursive_(e.Layer,t));return s}},{key:"getLayers",value:function(){var e=this.capabilities_.Capability.Layer;return this.getLayersRecursive_(e)}},{key:"getLayersRecursive_",value:function(e){var t=this,r=[];if((0,n.Ew)(e.Layer))if((0,n.kJ)(e))e.forEach((function(e){r=r.concat(t.getLayersRecursive_(e))}));else{var o="image/png";try{var a=this.capabilities_.Capability.Request.GetMap.Format;1===a.length&&(o=a[0])}catch(e){}r.push(new i.Z({url:this.serviceUrl_,name:e.Name,legend:(0,n.Ew)(e.Title)?"":e.Title},{format:o},{capabilitiesMetadata:{abstract:(0,n.Ew)(e.Abstract)?"":e.Abstract,attribution:(0,n.Ew)(e.Attribution)?"":e.Attribution,metadataURL:(0,n.Ew)(e.MetadataURL)?"":e.MetadataURL,style:(0,n.Ew)(e.Style)?"":e.Style}}))}else r=this.getLayersRecursive_(e.Layer);return r}},{key:"transformExtent",value:function(e){var t=e;if("1.3.0"===this.capabilities_.version&&(0,n.HD)(this.capabilitiesProj)){var r=(0,o.U2)(this.capabilitiesProj).getAxisOrientation();Array.isArray(t)&&"ne"===r.substr(0,2)&&(t=[e[1],e[0],e[3],e[2]])}return t}}])&&l(t.prototype,r),s&&l(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},17195:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c,x:()=>u});var n=r(86659),i=r(40398),o=r(27811),a=r(9220),s=function e(t,r,n,s){var l=null;if(!(0,i.Ew)(t))if((0,i.kJ)(t))for(var u=0;u<t.length&&null===l;u+=1)l=e(t[u],r,n,s);else if((0,i.Kn)(t)&&((0,i.Ew)(r)||t.Identifier===r))if(l=t.WGS84BoundingBox){var c=(0,o.U2)("EPSG:4326"),f=(0,o.U2)(n);l=a.Z.transformExtent(l,c,f)}else l=s;return l},l=function e(t,r,o,a){var s=[];if((0,i.Ew)(t.Layer))if((0,i.kJ)(t))t.forEach((function(t){s=s.concat(e(t,r,o,a))}));else{var l=t.TileMatrixSetLink,u=o;"EPSG:3857"===o&&(l.includes("EPSG:3857")||(u="GoogleMapsCompatible")),s.push(new n.Z({url:r,name:t.Identifier,matrixSet:u,legend:(0,i.Ew)(t.Title)?"":t.Title},{},{capabilitiesMetadata:{abstract:(0,i.Ew)(t.Abstract)?"":t.Abstract,attribution:(0,i.Ew)(a.ServiceProvider)?"":a.ServiceProvider,style:(0,i.Ew)(t.Style)?"":t.Style}}))}else s=e(t.Layer);return s},u=function(e,t,r){return l(e.Contents.Layer,t,r,e)};const c=function(e,t,r,n){return s(e.Layer,t,r,n)}},79742:(e,t)=>{"use strict";t.byteLength=function(e){var t=s(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=s(e),a=o[0],l=o[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,l)),c=0,f=l>0?a-4:a;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===l&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t);1===l&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(l(e,s,s+a>u?u:s+a));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function s(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},48764:(e,t,r)=>{"use strict";const n=r(79742),i=r(80645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|y(e,t);let n=s(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(H(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(H(e,ArrayBuffer)||e&&H(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(H(e,SharedArrayBuffer)||e&&H(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,r);const i=function(e){if(l.isBuffer(e)){const t=0|d(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||Y(e.length)?s(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return c(e),s(e<0?0:0|d(e))}function h(e){const t=e.length<0?0:0|d(e.length),r=s(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,l.prototype),n}function d(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function y(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||H(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(i)return n?-1:V(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function _(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===l)return n*a}else-1!==n&&(o-=o-n),n=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){let r=!0;for(let n=0;n<l;n++)if(u(e,o+n)!==u(t,n)){r=!1;break}if(r)return o}return-1}function A(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let a;for(n>o/2&&(n=o/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(Y(n))return a;e[r+a]=n}return a}function b(e,t,r,n){return K(V(t,e.length-r),e,r,n)}function w(e,t,r,n){return K(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function E(e,t,r,n){return K(W(t),e,r,n)}function x(e,t,r,n){return K(function(e,t){let r,n,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function I(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,s,l;switch(a){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(o=l));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(l=(15&t)<<12|(63&r)<<6|63&n,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:r=e[i+1],n=e[i+2],s=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=C));return r}(n)}t.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return function(e,t,r){return c(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},l.allocUnsafe=function(e){return f(e)},l.allocUnsafeSlow=function(e){return f(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(H(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),H(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=l.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(H(t,Uint8Array))i+t.length>n.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},l.byteLength=y,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,i){if(H(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const s=Math.min(o,a),u=this.slice(n,i),c=e.slice(t,r);for(let e=0;e<s;++e)if(u[e]!==c[e]){o=u[e],a=c[e];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return A(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":case"latin1":case"binary":return w(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function P(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function O(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function T(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=X[e[n]];return i}function M(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function k(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function B(e,t,r,n,i){Q(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function L(e,t,r,n,i){Q(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function D(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,r,n,o){return t=+t,r>>>=0,o||D(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,o){return t=+t,r>>>=0,o||D(e,0,r,8),i.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=J((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=J((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||k(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||k(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||k(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=J((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=J((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=J((function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=J((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}let i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=J((function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=J((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=l.isBuffer(e)?e:l.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%a]}return this};const N={};function Z(e,t,r){N[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Q(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new N.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){G(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||z(t,e.length-(r+1))}(n,i,o)}function G(e,t){if("number"!=typeof e)throw new N.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,r){if(Math.floor(e)!==e)throw G(e,r),new N.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}Z("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),Z("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),Z("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=U(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=U(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function H(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function J(e){return"undefined"==typeof BigInt?$:e}function $(){throw new Error("BigInt not supported")}},65792:function(e,t,r){var n;e=r.nmd(e),function(){var r,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v,A,b,w,E,x,I,S,C,P,O,T,M,k,R,B,L,D,j,F,N,Z,U,Q,G,z,q,V,W,K,H,Y,X,J,$,ee,te,re,ne,ie,oe,ae,se,le,ue,ce,fe,he,pe,de,ye,ge,me,_e,ve,Ae,be,we,Ee,xe,Ie,Se,Ce,Pe,Oe=[].slice;xe=function(){var e,t,r,n,i;for(e={},n=0,t=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;n<t;n++)r=i[n],e["[object "+r+"]"]=r.toLowerCase();return function(t){var r;return r=Object.prototype.toString.call(t),e[r]||"object"}}(),H=function(e,t,r){return null==t&&(t=0),null==r&&(r=1),e<t&&(e=t),e>r&&(e=r),e},Ie=function(e){return e.length>=3?Array.prototype.slice.call(e):e[0]},E=function(e){var t,r;for(e._clipped=!1,e._unclipped=e.slice(0),t=r=0;r<3;t=++r)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e._clipped||delete e._unclipped,e},a=Math.PI,ve=Math.round,I=Math.cos,T=Math.floor,ne=Math.pow,Y=Math.log,be=Math.sin,we=Math.sqrt,g=Math.atan2,$=Math.max,y=Math.abs,u=2*a,s=a/3,i=a/180,l=180/a,w=function(){return arguments[0]instanceof r?arguments[0]:function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,arguments,(function(){}))},w.default=w,d=[],null!==e&&null!=e.exports&&(e.exports=w),void 0===(n=function(){return w}.apply(t,[]))||(e.exports=n),w.version="1.4.1",p={},f=[],h=!1,r=function(){function e(){var e,t,r,n,i,o,a,s,l;for(o=this,t=[],s=0,n=arguments.length;s<n;s++)null!=(e=arguments[s])&&t.push(e);if(t.length>1&&(a=t[t.length-1]),null!=p[a])o._rgb=E(p[a](Ie(t.slice(0,-1))));else{for(h||(f=f.sort((function(e,t){return t.p-e.p})),h=!0),l=0,i=f.length;l<i&&!(a=(r=f[l]).test.apply(r,t));l++);a&&(o._rgb=E(p[a].apply(p,t)))}null==o._rgb&&console.warn("unknown format: "+t),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e}(),w._input=p,w.brewer=A={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,t;for(e in t=[],A)t.push(A[e.toLowerCase()]=A[e])}(),w.colors=Se={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},z=function(){var e,t,r,n,i,a,s;return n=(t=Ie(arguments))[0],e=t[1],r=t[2],a=(n+16)/116,i=isNaN(e)?a:a+e/500,s=isNaN(r)?a:a-r/200,a=o.Yn*q(a),i=o.Xn*q(i),s=o.Zn*q(s),[Pe(3.2404542*i-1.5371385*a-.4985314*s),Pe(-.969266*i+1.8760108*a+.041556*s),r=Pe(.0556434*i-.2040259*a+1.0572252*s),t.length>3?t[3]:1]},Pe=function(e){return 255*(e<=.00304?12.92*e:1.055*ne(e,1/2.4)-.055)},q=function(e){return e>o.t1?e*e*e:o.t2*(e-o.t0)},o={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},fe=function(){var e,t,r,n,i,o,a;return r=(n=Ie(arguments))[0],t=n[1],e=n[2],o=(i=ge(r,t,e))[0],[116*(a=i[1])-16,500*(o-a),200*(a-i[2])]},me=function(e){return(e/=255)<=.04045?e/12.92:ne((e+.055)/1.055,2.4)},Ce=function(e){return e>o.t3?ne(e,1/3):e/o.t2+o.t0},ge=function(){var e,t,r,n;return r=(n=Ie(arguments))[0],t=n[1],e=n[2],r=me(r),t=me(t),e=me(e),[Ce((.4124564*r+.3575761*t+.1804375*e)/o.Xn),Ce((.2126729*r+.7151522*t+.072175*e)/o.Yn),Ce((.0193339*r+.119192*t+.9503041*e)/o.Zn)]},w.lab=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,Oe.call(arguments).concat(["lab"]),(function(){}))},p.lab=z,r.prototype.lab=function(){return fe(this._rgb)},m=function(e){var t,r,n,i,o,a,s,l,u,c,f;return 2===(e=function(){var t,r,n;for(n=[],r=0,t=e.length;r<t;r++)i=e[r],n.push(w(i));return n}()).length?(u=function(){var t,r,n;for(n=[],r=0,t=e.length;r<t;r++)i=e[r],n.push(i.lab());return n}(),o=u[0],a=u[1],t=function(e){var t,r;return r=function(){var r,n;for(n=[],t=r=0;r<=2;t=++r)n.push(o[t]+e*(a[t]-o[t]));return n}(),w.lab.apply(w,r)}):3===e.length?(c=function(){var t,r,n;for(n=[],r=0,t=e.length;r<t;r++)i=e[r],n.push(i.lab());return n}(),o=c[0],a=c[1],s=c[2],t=function(e){var t,r;return r=function(){var r,n;for(n=[],t=r=0;r<=2;t=++r)n.push((1-e)*(1-e)*o[t]+2*(1-e)*e*a[t]+e*e*s[t]);return n}(),w.lab.apply(w,r)}):4===e.length?(f=function(){var t,r,n;for(n=[],r=0,t=e.length;r<t;r++)i=e[r],n.push(i.lab());return n}(),o=f[0],a=f[1],s=f[2],l=f[3],t=function(e){var t,r;return r=function(){var r,n;for(n=[],t=r=0;r<=2;t=++r)n.push((1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*a[t]+3*(1-e)*e*e*s[t]+e*e*e*l[t]);return n}(),w.lab.apply(w,r)}):5===e.length&&(r=m(e.slice(0,3)),n=m(e.slice(2,5)),t=function(e){return e<.5?r(2*e):n(2*(e-.5))}),t},w.bezier=function(e){var t;return(t=m(e)).scale=function(){return w.scale(t)},t},w.cubehelix=function(e,t,r,n,i){var o,a,s;return null==e&&(e=300),null==t&&(t=-1.5),null==r&&(r=1),null==n&&(n=1),null==i&&(i=[0,1]),o=0,"array"===xe(i)?a=i[1]-i[0]:(a=0,i=[i,i]),(s=function(s){var l,c,f,h,p;return l=u*((e+120)/360+t*s),h=ne(i[0]+a*s,n),c=(0!==o?r[0]+s*o:r)*h*(1-h)/2,f=I(l),p=be(l),w(E([255*(h+c*(-.14861*f+1.78277*p)),255*(h+c*(-.29227*f-.90649*p)),255*(h+c*(1.97294*f)),1]))}).start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?n:(n=e,s)},s.hue=function(e){return null==e?r:("array"===xe(r=e)?0===(o=r[1]-r[0])&&(r=r[1]):o=0,s)},s.lightness=function(e){return null==e?i:("array"===xe(e)?(i=e,a=e[1]-e[0]):(i=[e,e],a=0),s)},s.scale=function(){return w.scale(s)},s.hue(r),s},w.random=function(){var e,t;for(e="#",t=0;t<6;++t)e+="0123456789abcdef".charAt(T(16*Math.random()));return new r(e)},d=[],j=function(e,t,r,n){var i,o,a,s;for(null==r&&(r=.5),null==n&&(n="rgb"),"object"!==xe(e)&&(e=w(e)),"object"!==xe(t)&&(t=w(t)),a=0,o=d.length;a<o;a++)if(n===(i=d[a])[0]){s=i[1](e,t,r,n);break}if(null==s)throw"color mode "+n+" is not supported";return s.alpha(e.alpha()+r*(t.alpha()-e.alpha()))},w.interpolate=j,r.prototype.interpolate=function(e,t,r){return j(this,e,t,r)},w.mix=j,r.prototype.mix=r.prototype.interpolate,p.rgb=function(){var e,t,r,n;for(e in r=[],t=Ie(arguments))n=t[e],r.push(n);return r},w.rgb=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,Oe.call(arguments).concat(["rgb"]),(function(){}))},r.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},r.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},f.push({p:3,test:function(e){var t;return t=Ie(arguments),"array"===xe(t)&&3===t.length||4===t.length&&"number"===xe(t[3])&&t[3]>=0&&t[3]<=1?"rgb":void 0}}),p.lrgb=p.rgb,Z=function(e,t,n,i){var o,a;return o=e._rgb,a=t._rgb,new r(we(ne(o[0],2)*(1-n)+ne(a[0],2)*n),we(ne(o[1],2)*(1-n)+ne(a[1],2)*n),we(ne(o[2],2)*(1-n)+ne(a[2],2)*n),i)},c=function(e){var t,n,i,o,a;for(t=1/e.length,a=[0,0,0,0],i=0,n=e.length;i<n;i++)o=e[i]._rgb,a[0]+=ne(o[0],2)*t,a[1]+=ne(o[1],2)*t,a[2]+=ne(o[2],2)*t,a[3]+=o[3]*t;return a[0]=we(a[0]),a[1]=we(a[1]),a[2]=we(a[2]),a[3]>1&&(a[3]=1),new r(E(a))},d.push(["lrgb",Z]),w.average=function(e,t){var r,n,i,o,s,l,u,f,h,p,d,y,m;if(null==t&&(t="rgb"),h=e.length,e=e.map((function(e){return w(e)})),u=e.splice(0,1)[0],"lrgb"===t)return c(e);for(f in o=[],s=0,l=0,y=u.get(t))y[f]=y[f]||0,o.push(isNaN(y[f])?0:1),"h"!==t.charAt(f)||isNaN(y[f])||(r=y[f]/180*a,s+=I(r),l+=be(r));for(n=u.alpha(),d=0,p=e.length;d<p;d++)for(f in m=(i=e[d]).get(t),n+=i.alpha(),y)isNaN(m[f])||(o[f]+=1,"h"===t.charAt(f)?(r=m[f]/180*a,s+=I(r),l+=be(r)):y[f]+=m[f]);for(f in y)if("h"===t.charAt(f)){for(r=g(l/o[f],s/o[f])/a*180;r<0;)r+=360;for(;r>=360;)r-=360;y[f]=r}else y[f]=y[f]/o[f];return w(y,t).alpha(n/h)},k=function(e){var t,r;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(r=parseInt(e,16))>>16,r>>8&255,255&r,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),[(r=parseInt(e,16))>>24&255,r>>16&255,r>>8&255,ve((255&r)/255*100)/100];if(null!=p.css&&(t=p.css(e)))return t;throw"unknown color: "+e},se=function(e,t){var r,n,i,o,a,s;return null==t&&(t="auto"),a=e[0],i=e[1],n=e[2],r=e[3],"auto"===t&&(t=r<1?"rgba":"rgb"),a=Math.round(a),i=Math.round(i),n=Math.round(n),s=(s="000000"+(a<<16|i<<8|n).toString(16)).substr(s.length-6),o=(o="0"+ve(255*r).toString(16)).substr(o.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return s+o;case"argb":return o+s;default:return s}}()},p.hex=function(e){return k(e)},w.hex=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,Oe.call(arguments).concat(["hex"]),(function(){}))},r.prototype.hex=function(e){return null==e&&(e="auto"),se(this._rgb,e)},f.push({p:4,test:function(e){if(1===arguments.length&&"string"===xe(e))return"hex"}}),L=function(){var e,t,r,n,i,o,a,s,l,u,c,f,h,p;if(i=(e=Ie(arguments))[0],c=e[1],a=e[2],0===c)l=n=t=255*a;else{for(r=[0,0,0],f=2*a-(h=a<.5?a*(1+c):a+c-a*c),(p=[0,0,0])[0]=(i/=360)+1/3,p[1]=i,p[2]=i-1/3,o=s=0;s<=2;o=++s)p[o]<0&&(p[o]+=1),p[o]>1&&(p[o]-=1),6*p[o]<1?r[o]=f+6*(h-f)*p[o]:2*p[o]<1?r[o]=h:3*p[o]<2?r[o]=f+(h-f)*(2/3-p[o])*6:r[o]=f;l=(u=[ve(255*r[0]),ve(255*r[1]),ve(255*r[2])])[0],n=u[1],t=u[2]}return e.length>3?[l,n,t,e[3]]:[l,n,t]},ue=function(e,t,r){var n,i,o,a,s;return void 0!==e&&e.length>=3&&(e=(a=e)[0],t=a[1],r=a[2]),e/=255,t/=255,r/=255,o=Math.min(e,t,r),i=(($=Math.max(e,t,r))+o)/2,$===o?(s=0,n=Number.NaN):s=i<.5?($-o)/($+o):($-o)/(2-$-o),e===$?n=(t-r)/($-o):t===$?n=2+(r-e)/($-o):r===$&&(n=4+(e-t)/($-o)),(n*=60)<0&&(n+=360),[n,s,i]},w.hsl=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,Oe.call(arguments).concat(["hsl"]),(function(){}))},p.hsl=L,r.prototype.hsl=function(){return ue(this._rgb)},D=function(){var e,t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m;if(i=(e=Ie(arguments))[0],y=e[1],m=e[2],m*=255,0===y)l=n=t=m;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),a=m*(1-y),s=m*(1-y*(r=(i/=60)-(o=T(i)))),g=m*(1-y*(1-r)),o){case 0:l=(u=[m,g,a])[0],n=u[1],t=u[2];break;case 1:l=(c=[s,m,a])[0],n=c[1],t=c[2];break;case 2:l=(f=[a,m,g])[0],n=f[1],t=f[2];break;case 3:l=(h=[a,s,m])[0],n=h[1],t=h[2];break;case 4:l=(p=[g,a,m])[0],n=p[1],t=p[2];break;case 5:l=(d=[m,a,s])[0],n=d[1],t=d[2]}return[l,n,t,e.length>3?e[3]:1]},ce=function(){var e,t,r,n,i,o,a,s,l;return o=(a=Ie(arguments))[0],r=a[1],e=a[2],i=Math.min(o,r,e),t=($=Math.max(o,r,e))-i,l=$/255,0===$?(n=Number.NaN,s=0):(s=t/$,o===$&&(n=(r-e)/t),r===$&&(n=2+(e-o)/t),e===$&&(n=4+(o-r)/t),(n*=60)<0&&(n+=360)),[n,s,l]},w.hsv=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,Oe.call(arguments).concat(["hsv"]),(function(){}))},p.hsv=D,r.prototype.hsv=function(){return ce(this._rgb)},te=function(e){return"number"===xe(e)&&e>=0&&e<=16777215?[e>>16,e>>8&255,255&e,1]:(console.warn("unknown num color: "+e),[0,0,0,1])},de=function(){var e;return((e=Ie(arguments))[0]<<16)+(e[1]<<8)+e[2]},w.num=function(e){return new r(e,"num")},r.prototype.num=function(e){return null==e&&(e="rgb"),de(this._rgb,e)},p.num=te,f.push({p:1,test:function(e){if(1===arguments.length&&"number"===xe(e)&&e>=0&&e<=16777215)return"num"}}),M=function(){var e,t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v;if(s=(r=Ie(arguments))[0],i=r[1],t=r[2],a=a/100*255,e=255*(i/=100),0===i)f=a=n=t;else switch(360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360),c=(u=t*(1-i))+e*(1-(o=(s/=60)-(l=T(s)))),_=u+e*o,v=u+e,l){case 0:f=(h=[v,_,u])[0],a=h[1],n=h[2];break;case 1:f=(p=[c,v,u])[0],a=p[1],n=p[2];break;case 2:f=(d=[u,v,_])[0],a=d[1],n=d[2];break;case 3:f=(y=[u,c,v])[0],a=y[1],n=y[2];break;case 4:f=(g=[_,u,v])[0],a=g[1],n=g[2];break;case 5:f=(m=[v,u,c])[0],a=m[1],n=m[2]}return[f,a,n,r.length>3?r[3]:1]},ae=function(){var e,t,r,n,i,o,a,s,l;return s=(l=Ie(arguments))[0],i=l[1],t=l[2],a=Math.min(s,i,t),r=100*(n=($=Math.max(s,i,t))-a)/255,e=a/(255-n)*100,0===n?o=Number.NaN:(s===$&&(o=(i-t)/n),i===$&&(o=2+(t-s)/n),t===$&&(o=4+(s-i)/n),(o*=60)<0&&(o+=360)),[o,r,e]},w.hcg=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,Oe.call(arguments).concat(["hcg"]),(function(){}))},p.hcg=M,r.prototype.hcg=function(){return ae(this._rgb)},S=function(e){var t,r,n,i,o,a,s,l;if(e=e.toLowerCase(),null!=w.colors&&w.colors[e])return k(w.colors[e]);if(o=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=o.slice(1,4),i=a=0;a<=2;i=++a)s[i]=+s[i];s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=o.slice(1,5),i=l=0;l<=3;i=++l)s[i]=+s[i];else if(o=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=o.slice(1,4),i=t=0;t<=2;i=++t)s[i]=ve(2.55*s[i]);s[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=o.slice(1,5),i=r=0;r<=2;i=++r)s[i]=ve(2.55*s[i]);s[3]=+s[3]}else(o=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(s=L(n))[3]=1):(o=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(s=L(n))[3]=+o[4]);return s},oe=function(e){var t;return"rgb"===(t=e[3]<1?"rgba":"rgb")?t+"("+e.slice(0,3).map(ve).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(ve).join(",")+","+e[3]+")":void 0},_e=function(e){return ve(100*e)/100},B=function(e,t){var r;return r=t<1?"hsla":"hsl",e[0]=_e(e[0]||0),e[1]=_e(100*e[1])+"%",e[2]=_e(100*e[2])+"%","hsla"===r&&(e[3]=t),r+"("+e.join(",")+")"},p.css=function(e){return S(e)},w.css=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,Oe.call(arguments).concat(["css"]),(function(){}))},r.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?oe(this._rgb):"hsl"===e.slice(0,3)?B(this.hsl(),this.alpha()):void 0},p.named=function(e){return k(Se[e])},f.push({p:5,test:function(e){if(1===arguments.length&&null!=Se[e])return"named"}}),r.prototype.name=function(e){var t,r;for(r in arguments.length&&(Se[e]&&(this._rgb=k(Se[e])),this._rgb[3]=1),t=this.hex("rgb"),Se)if(t===Se[r])return r;return t},V=function(){var e,t,r,n;return r=(n=Ie(arguments))[0],e=n[1],t=n[2],[r,I(t*=i)*e,be(t)*e]},W=function(){var e,t,r,n,i,o,a,s,l;return a=(r=Ie(arguments))[0],i=r[1],o=r[2],e=(s=V(a,i,o))[0],t=s[1],n=s[2],[(l=z(e,t,n))[0],l[1],n=l[2],r.length>3?r[3]:1]},G=function(){var e,t,r,n,i,o;return i=(o=Ie(arguments))[0],e=o[1],t=o[2],r=we(e*e+t*t),n=(g(t,e)*l+360)%360,0===ve(1e4*r)&&(n=Number.NaN),[i,r,n]},he=function(){var e,t,r,n,i,o,a;return i=(o=Ie(arguments))[0],r=o[1],t=o[2],n=(a=fe(i,r,t))[0],e=a[1],t=a[2],G(n,e,t)},w.lch=function(){var e;return e=Ie(arguments),new r(e,"lch")},w.hcl=function(){var e;return e=Ie(arguments),new r(e,"hcl")},p.lch=W,p.hcl=function(){var e,t,r,n;return t=(n=Ie(arguments))[0],e=n[1],r=n[2],W([r,e,t])},r.prototype.lch=function(){return he(this._rgb)},r.prototype.hcl=function(){return he(this._rgb).reverse()},ie=function(e){var t,r,n,i,o,a;return null==e&&(e="rgb"),o=(a=Ie(arguments))[0],n=a[1],t=a[2],n/=255,t/=255,[(1-(o/=255)-(i=1-Math.max(o,Math.max(n,t))))*(r=i<1?1/(1-i):0),(1-n-i)*r,(1-t-i)*r,i]},x=function(){var e,t,r,n,i,o;return r=(t=Ie(arguments))[0],i=t[1],o=t[2],n=t[3],e=t.length>4?t[4]:1,1===n?[0,0,0,e]:[r>=1?0:255*(1-r)*(1-n),i>=1?0:255*(1-i)*(1-n),o>=1?0:255*(1-o)*(1-n),e]},p.cmyk=function(){return x(Ie(arguments))},w.cmyk=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,Oe.call(arguments).concat(["cmyk"]),(function(){}))},r.prototype.cmyk=function(){return ie(this._rgb)},p.gl=function(){var e,t,r,n,i;for(n=function(){var e,r;for(t in r=[],e=Ie(arguments))i=e[t],r.push(i);return r}.apply(this,arguments),e=r=0;r<=2;e=++r)n[e]*=255;return n},w.gl=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,Oe.call(arguments).concat(["gl"]),(function(){}))},r.prototype.gl=function(){var e;return[(e=this._rgb)[0]/255,e[1]/255,e[2]/255,e[3]]},pe=function(e,t,r){var n;return e=(n=Ie(arguments))[0],t=n[1],r=n[2],.2126*(e=X(e))+.7152*(t=X(t))+.0722*(r=X(r))},X=function(e){return(e/=255)<=.03928?e/12.92:ne((e+.055)/1.055,2.4)},Q=function(e,t,n,i){var o,a;return o=e._rgb,a=t._rgb,new r(o[0]+n*(a[0]-o[0]),o[1]+n*(a[1]-o[1]),o[2]+n*(a[2]-o[2]),i)},d.push(["rgb",Q]),r.prototype.luminance=function(e,t){var r,n,i,o;return null==t&&(t="rgb"),arguments.length?(i=this._rgb,0===e?i=[0,0,0,this._rgb[3]]:1===e?i=[255,255,255,this[3]]:(r=pe(this._rgb),n=20,o=function(r,i){var a,s;return a=(s=r.interpolate(i,.5,t)).luminance(),Math.abs(e-a)<1e-7||!n--?s:a>e?o(r,s):o(s,i)},i=r>e?o(w("black"),this).rgba():o(this,w("white")).rgba()),w(i).alpha(this.alpha())):pe(this._rgb)},Ee=function(e){var t,r,n,i;return(i=e/100)<66?(n=255,r=-155.25485562709179-.44596950469579133*(r=i-2)+104.49216199393888*Y(r),t=i<20?0:.8274096064007395*(t=i-10)-254.76935184120902+115.67994401066147*Y(t)):(n=351.97690566805693+.114206453784165*(n=i-55)-40.25366309332127*Y(n),r=325.4494125711974+.07943456536662342*(r=i-50)-28.0852963507957*Y(r),t=255),[n,r,t]},ye=function(){var e,t,r,n,i,o,a;for(n=(i=Ie(arguments))[0],i[1],e=i[2],r=1e3,t=4e4,.4;t-r>.4;)(o=Ee(a=.5*(t+r)))[2]/o[0]>=e/n?t=a:r=a;return ve(a)},w.temperature=w.kelvin=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,Oe.call(arguments).concat(["temperature"]),(function(){}))},p.temperature=p.kelvin=p.K=Ee,r.prototype.temperature=function(){return ye(this._rgb)},r.prototype.kelvin=r.prototype.temperature,w.contrast=function(e,t){var n,i,o,a;return"string"!==(o=xe(e))&&"number"!==o||(e=new r(e)),"string"!==(a=xe(t))&&"number"!==a||(t=new r(t)),(n=e.luminance())>(i=t.luminance())?(n+.05)/(i+.05):(i+.05)/(n+.05)},w.distance=function(e,t,n){var i,o,a,s,l,u,c;for(o in null==n&&(n="lab"),"string"!==(l=xe(e))&&"number"!==l||(e=new r(e)),"string"!==(u=xe(t))&&"number"!==u||(t=new r(t)),a=e.get(n),s=t.get(n),c=0,a)c+=(i=(a[o]||0)-(s[o]||0))*i;return Math.sqrt(c)},w.deltaE=function(e,t,n,i){var o,s,l,u,c,f,h,p,d,m,_,v,A,b,w,E,x,S,C,P,O,T,M,k;for(null==n&&(n=1),null==i&&(i=1),"string"!==(w=xe(e))&&"number"!==w||(e=new r(e)),"string"!==(E=xe(t))&&"number"!==E||(t=new r(t)),o=(x=e.lab())[0],l=x[1],c=x[2],s=(S=t.lab())[0],u=S[1],f=S[2],h=we(l*l+c*c),p=we(u*u+f*f),P=o<16?.511:.040975*o/(1+.01765*o),C=.0638*h/(1+.0131*h)+.638,b=h<1e-6?0:180*g(c,l)/a;b<0;)b+=360;for(;b>=360;)b-=360;return O=b>=164&&b<=345?.56+y(.2*I(a*(b+168)/180)):.36+y(.4*I(a*(b+35)/180)),A=we((d=h*h*h*h)/(d+1900)),we((T=(o-s)/(n*P))*T+(M=(v=h-p)/(i*C))*M+((m=l-u)*m+(_=c-f)*_-v*v)/((k=C*(A*O+1-A))*k))},r.prototype.get=function(e){var t,r,n,i,o;return n=(i=e.split("."))[0],t=i[1],o=this[n](),t?(r=n.indexOf(t))>-1?o[r]:console.warn("unknown channel "+t+" in mode "+n):o},r.prototype.set=function(e,t){var r,n,i,o,a;if(i=(o=e.split("."))[0],r=o[1])if(a=this[i](),(n=i.indexOf(r))>-1)if("string"===xe(t))switch(t.charAt(0)){case"+":case"-":a[n]+=+t;break;case"*":a[n]*=+t.substr(1);break;case"/":a[n]/=+t.substr(1);break;default:a[n]=+t}else a[n]=t;else console.warn("unknown channel "+r+" in mode "+i);else a=t;return w(a,i).alpha(this.alpha())},r.prototype.clipped=function(){return this._rgb._clipped||!1},r.prototype.alpha=function(e){return arguments.length?w.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},r.prototype.darken=function(e){var t;return null==e&&(e=1),(t=this.lab())[0]-=o.Kn*e,w.lab(t).alpha(this.alpha())},r.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},r.prototype.darker=r.prototype.darken,r.prototype.brighter=r.prototype.brighten,r.prototype.saturate=function(e){var t;return null==e&&(e=1),(t=this.lch())[1]+=e*o.Kn,t[1]<0&&(t[1]=0),w.lch(t).alpha(this.alpha())},r.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},r.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),w(t[0]*e,t[1]*e,t[2]*e,e)},ee=function(e,t){return e*t/255},C=function(e,t){return e>t?t:e},K=function(e,t){return e>t?e:t},Ae=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},re=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},b=function(e,t){return 255*(1-(1-t/255)/(e/255))},P=function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e},(_=function(e,t,r){if(!_[r])throw"unknown blend mode "+r;return _[r](e,t)}).normal=(v=function(e){return function(t,r){var n,i;return n=w(r).rgb(),i=w(t).rgb(),w(e(n,i),"rgb")}})((O=function(e){return function(t,r){var n,i,o;for(o=[],n=i=0;i<=3;n=++i)o[n]=e(t[n],r[n]);return o}})((function(e,t){return e}))),_.multiply=v(O(ee)),_.screen=v(O(Ae)),_.overlay=v(O(re)),_.darken=v(O(C)),_.lighten=v(O(K)),_.dodge=v(O(P)),_.burn=v(O(b)),w.blend=_,w.analyze=function(e){var t,r,n,i;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},r=0,t=e.length;r<t;r++)null==(i=e[r])||isNaN(i)||(n.values.push(i),n.sum+=i,i<n.min&&(n.min=i),i>n.max&&(n.max=i),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(e,t){return w.limits(n,e,t)},n},w.scale=function(e,t){var r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v,A,b,E;return c="rgb",f=w("#ccc"),y=0,a=[0,1],d=[],p=[0,0],r=!1,i=[],h=!1,u=0,l=1,o=!1,n={},g=!0,s=1,b=function(e){var t,r,n,o,a,s;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===xe(e)&&null!=w.brewer&&(e=w.brewer[e]||w.brewer[e.toLowerCase()]||e),"array"===xe(e)){for(1===e.length&&(e=[e[0],e[0]]),t=n=0,o=(e=e.slice(0)).length-1;0<=o?n<=o:n>=o;t=0<=o?++n:--n)r=e[t],"string"===xe(r)&&(e[t]=w(r));for(d.length=0,t=s=0,a=e.length-1;0<=a?s<=a:s>=a;t=0<=a?++s:--s)d.push(t/(e.length-1))}return A(),i=e},_=function(e){var t,n;if(null!=r){for(n=r.length-1,t=0;t<n&&e>=r[t];)t++;return t-1}return 0},E=function(e){return e},v=function(e,t){var o,a,h,y,m,v,A;if(null==t&&(t=!1),isNaN(e)||null===e)return f;if(A=t?e:r&&r.length>2?_(e)/(r.length-2):l!==u?(e-u)/(l-u):1,t||(A=E(A)),1!==s&&(A=ne(A,s)),A=p[0]+A*(1-p[0]-p[1]),A=Math.min(1,Math.max(0,A)),h=Math.floor(1e4*A),g&&n[h])o=n[h];else{if("array"===xe(i))for(a=y=0,v=d.length-1;0<=v?y<=v:y>=v;a=0<=v?++y:--y){if(A<=(m=d[a])){o=i[a];break}if(A>=m&&a===d.length-1){o=i[a];break}if(A>m&&A<d[a+1]){A=(A-m)/(d[a+1]-m),o=w.interpolate(i[a],i[a+1],A,c);break}}else"function"===xe(i)&&(o=i(A));g&&(n[h]=o)}return o},A=function(){return n={}},b(e),(m=function(e){var t;return t=w(v(e)),h&&t[h]?t[h]():t}).classes=function(e){var t;return null!=e?("array"===xe(e)?(r=e,a=[e[0],e[e.length-1]]):(t=w.analyze(a),r=0===e?[t.min,t.max]:w.limits(t,"e",e)),m):r},m.domain=function(e){var t,r,n,o,s,c,f;if(!arguments.length)return a;if(u=e[0],l=e[e.length-1],d=[],n=i.length,e.length===n&&u!==l)for(s=0,o=e.length;s<o;s++)r=e[s],d.push((r-u)/(l-u));else for(t=f=0,c=n-1;0<=c?f<=c:f>=c;t=0<=c?++f:--f)d.push(t/(n-1));return a=[u,l],m},m.mode=function(e){return arguments.length?(c=e,A(),m):c},m.range=function(e,t){return b(e),m},m.out=function(e){return h=e,m},m.spread=function(e){return arguments.length?(y=e,m):y},m.correctLightness=function(e){return null==e&&(e=!0),o=e,A(),E=o?function(e){var t,r,n,i,o,a,s,l,u;for(t=v(0,!0).lab()[0],r=v(1,!0).lab()[0],s=t>r,n=v(e,!0).lab()[0],i=n-(o=t+(r-t)*e),l=0,u=1,a=20;Math.abs(i)>.01&&a-- >0;)s&&(i*=-1),i<0?(l=e,e+=.5*(u-e)):(u=e,e+=.5*(l-e)),n=v(e,!0).lab()[0],i=n-o;return e}:function(e){return e},m},m.padding=function(e){return null!=e?("number"===xe(e)&&(e=[e,e]),p=e,m):p},m.colors=function(t,n){var o,s,l,u,c,f,h,p;if(arguments.length<2&&(n="hex"),c=[],0===arguments.length)c=i.slice(0);else if(1===t)c=[m(.5)];else if(t>1)s=a[0],o=a[1]-s,c=function(){f=[];for(var e=0;0<=t?e<t:e>t;0<=t?e++:e--)f.push(e);return f}.apply(this).map((function(e){return m(s+e/(t-1)*o)}));else{if(e=[],h=[],r&&r.length>2)for(l=p=1,u=r.length;1<=u?p<u:p>u;l=1<=u?++p:--p)h.push(.5*(r[l-1]+r[l]));else h=a;c=h.map((function(e){return m(e)}))}return w[n]&&(c=c.map((function(e){return e[n]()}))),c},m.cache=function(e){return null!=e?(g=e,m):g},m.gamma=function(e){return null!=e?(s=e,m):s},m.nodata=function(e){return null!=e?(f=w(e),m):f},m},null==w.scales&&(w.scales={}),w.scales.cool=function(){return w.scale([w.hsl(180,1,.9),w.hsl(250,.7,.4)])},w.scales.hot=function(){return w.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},w.analyze=function(e,t,r){var n,i,o,a,s,l;if(s={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),n=function(e){null==e||isNaN(e)||(s.values.push(e),s.sum+=e,e<s.min&&(s.min=e),e>s.max&&(s.max=e),s.count+=1)},l=function(e,i){if(r(e,i))return null!=t&&"function"===xe(t)?n(t(e)):null!=t&&"string"===xe(t)||"number"===xe(t)?n(e[t]):n(e)},"array"===xe(e))for(a=0,o=e.length;a<o;a++)l(e[a]);else for(i in e)l(e[i],i);return s.domain=[s.min,s.max],s.limits=function(e,t){return w.limits(s,e,t)},s},w.limits=function(e,t,r){var n,i,o,a,s,l,u,c,f,h,p,d,g,m,_,v,A,b,E,x,I,S,C,P,O,M,k,R,B,L,D,j,F,N,Z,U,Q,G,z,q,V,W,K,H,X,J,ee,te,re,ie,oe,ae,se,le,ue;if(null==t&&(t="equal"),null==r&&(r=7),"array"===xe(e)&&(e=w.analyze(e)),O=e.min,$=e.max,e.sum,le=e.values.sort((function(e,t){return e-t})),1===r)return[O,$];if(C=[],"c"===t.substr(0,1)&&(C.push(O),C.push($)),"e"===t.substr(0,1)){for(C.push(O),x=D=1,Z=r-1;1<=Z?D<=Z:D>=Z;x=1<=Z?++D:--D)C.push(O+x/r*($-O));C.push($)}else if("l"===t.substr(0,1)){if(O<=0)throw"Logarithmic scales are only possible for values > 0";for(M=Math.LOG10E*Y(O),P=Math.LOG10E*Y($),C.push(O),x=ue=1,U=r-1;1<=U?ue<=U:ue>=U;x=1<=U?++ue:--ue)C.push(ne(10,M+x/r*(P-M)));C.push($)}else if("q"===t.substr(0,1)){for(C.push(O),x=n=1,W=r-1;1<=W?n<=W:n>=W;x=1<=W?++n:--n)j=(le.length-1)*x/r,(F=T(j))===j?C.push(le[F]):(N=j-F,C.push(le[F]*(1-N)+le[F+1]*N));C.push($)}else if("k"===t.substr(0,1)){for(R=le.length,m=new Array(R),b=new Array(r),ie=!0,B=0,v=null,(v=[]).push(O),x=i=1,K=r-1;1<=K?i<=K:i>=K;x=1<=K?++i:--i)v.push(O+x/r*($-O));for(v.push($);ie;){for(I=o=0,H=r-1;0<=H?o<=H:o>=H;I=0<=H?++o:--o)b[I]=0;for(x=a=0,X=R-1;0<=X?a<=X:a>=X;x=0<=X?++a:--a){for(se=le[x],k=Number.MAX_VALUE,I=s=0,J=r-1;0<=J?s<=J:s>=J;I=0<=J?++s:--s)(E=y(v[I]-se))<k&&(k=E,_=I);b[_]++,m[x]=_}for(L=new Array(r),I=l=0,ee=r-1;0<=ee?l<=ee:l>=ee;I=0<=ee?++l:--l)L[I]=null;for(x=u=0,te=R-1;0<=te?u<=te:u>=te;x=0<=te?++u:--u)null===L[A=m[x]]?L[A]=le[x]:L[A]+=le[x];for(I=c=0,re=r-1;0<=re?c<=re:c>=re;I=0<=re?++c:--c)L[I]*=1/b[I];for(ie=!1,I=f=0,Q=r-1;0<=Q?f<=Q:f>=Q;I=0<=Q?++f:--f)if(L[I]!==v[x]){ie=!0;break}v=L,++B>200&&(ie=!1)}for(S={},I=h=0,G=r-1;0<=G?h<=G:h>=G;I=0<=G?++h:--h)S[I]=[];for(x=p=0,z=R-1;0<=z?p<=z:p>=z;x=0<=z?++p:--p)S[A=m[x]].push(le[x]);for(oe=[],I=d=0,q=r-1;0<=q?d<=q:d>=q;I=0<=q?++d:--d)oe.push(S[I][0]),oe.push(S[I][S[I].length-1]);for(oe=oe.sort((function(e,t){return e-t})),C.push(oe[0]),x=g=1,V=oe.length-1;g<=V;x=g+=2)ae=oe[x],isNaN(ae)||-1!==C.indexOf(ae)||C.push(ae)}return C},R=function(e,t,r){var n,i,o,a;return e=(n=Ie(arguments))[0],t=n[1],r=n[2],isNaN(e)&&(e=0),(e/=360)<1/3?o=1-((i=(1-t)/3)+(a=(1+t*I(u*e)/I(s-u*e))/3)):e<2/3?i=1-((a=(1-t)/3)+(o=(1+t*I(u*(e-=1/3))/I(s-u*e))/3)):a=1-((o=(1-t)/3)+(i=(1+t*I(u*(e-=2/3))/I(s-u*e))/3)),[255*(a=H(r*a*3)),255*(o=H(r*o*3)),255*(i=H(r*i*3)),n.length>3?n[3]:1]},le=function(){var e,t,r,n,i,o,a;return i=(o=Ie(arguments))[0],t=o[1],e=o[2],u=2*Math.PI,i/=255,t/=255,e/=255,0===(a=1-Math.min(i,t,e)/(n=(i+t+e)/3))?r=0:(r=(i-t+(i-e))/2,r/=Math.sqrt((i-t)*(i-t)+(i-e)*(t-e)),r=Math.acos(r),e>t&&(r=u-r),r/=u),[360*r,a,n]},w.hsi=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(r,Oe.call(arguments).concat(["hsi"]),(function(){}))},p.hsi=R,r.prototype.hsi=function(){return le(this._rgb)},F=function(e,t,r,n){var i,o,a,s,l,u,c,f,h,p;return"hsl"===n?(h=e.hsl(),p=t.hsl()):"hsv"===n?(h=e.hsv(),p=t.hsv()):"hcg"===n?(h=e.hcg(),p=t.hcg()):"hsi"===n?(h=e.hsi(),p=t.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",h=e.hcl(),p=t.hcl()),"h"===n.substr(0,1)&&(o=h[0],c=h[1],s=h[2],a=p[0],f=p[1],l=p[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==s&&0!==s||"hsv"===n||(u=f)):(i=o,1!==l&&0!==l||"hsv"===n||(u=c)):i=o+r*(a>o&&a-o>180?a-(o+360):a<o&&o-a>180?a+360-o:a-o),null==u&&(u=c+r*(f-c)),w[n](i,u,s+r*(l-s))},U=function(e,t,r,n){var i,o;return i=e.num(),o=t.num(),w.num(i+(o-i)*r,"num")},(d=d.concat(function(){var e,t,r,n;for(n=[],t=0,e=(r=["hsv","hsl","hsi","hcl","lch","hcg"]).length;t<e;t++)J=r[t],n.push([J,F]);return n}())).push(["num",U]),N=function(e,t,n,i){var o,a;return o=e.lab(),a=t.lab(),new r(o[0]+n*(a[0]-o[0]),o[1]+n*(a[1]-o[1]),o[2]+n*(a[2]-o[2]),i)},d.push(["lab",N])}.call(this)},98384:function(e,t,r){!function(t,n){e.exports?e.exports=n(t,r(66131),r(54842)):t.Draggabilly=n(t,t.getSize,t.Unidragger)}("undefined"!=typeof window?window:this,(function(e,t,r){let n=e.jQuery;function i(e,t){this.element="string"==typeof e?document.querySelector(e):e,n&&(this.$element=n(this.element)),this.options={},this.option(t),this._create()}let o=i.prototype=Object.create(r.prototype);o.option=function(e){this.options={...this.options,...e}};const a=["relative","absolute","fixed"];o._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition={...this.position};let e=getComputedStyle(this.element);a.includes(e.position)||(this.element.style.position="relative"),this.on("pointerDown",this.handlePointerDown),this.on("pointerUp",this.handlePointerUp),this.on("dragStart",this.handleDragStart),this.on("dragMove",this.handleDragMove),this.on("dragEnd",this.handleDragEnd),this.setHandles(),this.enable()},o.setHandles=function(){let{handle:e}=this.options;"string"==typeof e?this.handles=this.element.querySelectorAll(e):"object"==typeof e&&e.length?this.handles=e:e instanceof HTMLElement?this.handles=[e]:this.handles=[this.element]};const s=["dragStart","dragMove","dragEnd"];let l=o.emitEvent;function u(e,t,r){return t?(r=r||"round",Math[r](e/t)*t):e}o.emitEvent=function(t,r){if(!this.isEnabled&&s.includes(t))return;l.call(this,t,r);let n,i=e.jQuery;if(!i||!this.$element)return;let o=r;r&&r[0]instanceof Event&&([n,...o]=r);let a=i.Event(n);a.type=t,this.$element.trigger(a,o)},o._getPosition=function(){let e=getComputedStyle(this.element),t=this._getPositionCoord(e.left,"width"),r=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(r)?0:r,this._addTransformPosition(e)},o._getPositionCoord=function(e,r){if(e.includes("%")){let n=t(this.element.parentNode);return n?parseFloat(e)/100*n[r]:0}return parseInt(e,10)},o._addTransformPosition=function(e){let t=e.transform;if(!t.startsWith("matrix"))return;let r=t.split(","),n=t.startsWith("matrix3d")?12:4,i=parseInt(r[n],10),o=parseInt(r[n+1],10);this.position.x+=i,this.position.y+=o},o.handlePointerDown=function(e,t){this.isEnabled&&(this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},e.preventDefault(),document.activeElement.blur(),this.bindActivePointerEvents(e),this.element.classList.add("is-pointer-down"))},o.handleDragStart=function(){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.animate())},o.measureContainment=function(){let e=this.getContainer();if(!e)return;let r=t(this.element),n=t(e),{borderLeftWidth:i,borderRightWidth:o,borderTopWidth:a,borderBottomWidth:s}=n,l=this.element.getBoundingClientRect(),u=e.getBoundingClientRect(),c=i+o,f=a+s,h=this.relativeStartPosition={x:l.left-(u.left+i),y:l.top-(u.top+a)};this.containSize={width:n.width-c-h.x-r.width,height:n.height-f-h.y-r.height}},o.getContainer=function(){let e=this.options.containment;if(e)return e instanceof HTMLElement?e:"string"==typeof e?document.querySelector(e):this.element.parentNode},o.handleDragMove=function(e,t,r){if(!this.isEnabled)return;let n=r.x,i=r.y,o=this.options.grid,a=o&&o[0],s=o&&o[1];n=u(n,a),i=u(i,s),n=this.containDrag("x",n,a),i=this.containDrag("y",i,s),n="y"==this.options.axis?0:n,i="x"==this.options.axis?0:i,this.position.x=this.startPosition.x+n,this.position.y=this.startPosition.y+i,this.dragPoint.x=n,this.dragPoint.y=i},o.containDrag=function(e,t,r){if(!this.options.containment)return t;let n="x"==e?"width":"height",i=u(-this.relativeStartPosition[e],r,"ceil"),o=this.containSize[n];return o=u(o,r,"floor"),Math.max(i,Math.min(o,t))},o.handlePointerUp=function(){this.element.classList.remove("is-pointer-down")},o.handleDragEnd=function(){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"))},o.animate=function(){this.isDragging&&(this.positionDrag(),requestAnimationFrame((()=>this.animate())))},o.setLeftTop=function(){let{x:e,y:t}=this.position;this.element.style.left=`${e}px`,this.element.style.top=`${t}px`},o.positionDrag=function(){let{x:e,y:t}=this.dragPoint;this.element.style.transform=`translate3d(${e}px, ${t}px, 0)`},o.setPosition=function(e,t){this.position.x=e,this.position.y=t,this.setLeftTop()},o.enable=function(){this.isEnabled||(this.isEnabled=!0,this.bindHandles())},o.disable=function(){this.isEnabled&&(this.isEnabled=!1,this.isDragging&&this.dragEnd(),this.unbindHandles())};const c=["transform","left","top","position"];return o.destroy=function(){this.disable(),c.forEach((e=>{this.element.style[e]=""})),this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},o._init=function(){},n&&n.bridget&&n.bridget("draggabilly",i),i}))},9187:e=>{"use strict";function t(e,t,n){n=n||2;var o,a,s,l,f,h,d,y=t&&t.length,g=y?t[0]*n:e.length,m=r(e,0,g,n,!0),_=[];if(!m||m.next===m.prev)return _;if(y&&(m=function(e,t,n,i){var o,a,s,l=[];for(o=0,a=t.length;o<a;o++)(s=r(e,t[o]*i,o<a-1?t[o+1]*i:e.length,i,!1))===s.next&&(s.steiner=!0),l.push(p(s));for(l.sort(u),o=0;o<l.length;o++)n=c(l[o],n);return n}(e,t,m,n)),e.length>80*n){o=s=e[0],a=l=e[1];for(var v=n;v<g;v+=n)(f=e[v])<o&&(o=f),(h=e[v+1])<a&&(a=h),f>s&&(s=f),h>l&&(l=h);d=0!==(d=Math.max(s-o,l-a))?32767/d:0}return i(m,_,n,o,a,d,0),_}function r(e,t,r,n,i){var o,a;if(i===S(e,t,r,n)>0)for(o=t;o<r;o+=n)a=E(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=E(o,e[o],e[o+1],a);return a&&m(a,a.next)&&(x(a),a=a.next),a}function n(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!m(n,n.next)&&0!==g(n.prev,n,n.next))n=n.next;else{if(x(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function i(e,t,r,u,c,f,p){if(e){!p&&f&&function(e,t,r,n){var i=e;do{0===i.z&&(i.z=h(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ);t++);for(l=u;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1)}(i)}(e,u,c,f);for(var d,y,g=e;e.prev!==e.next;)if(d=e.prev,y=e.next,f?a(e,u,c,f):o(e))t.push(d.i/r|0),t.push(e.i/r|0),t.push(y.i/r|0),x(e),e=y.next,g=y.next;else if((e=y)===g){p?1===p?i(e=s(n(e),t,r),t,r,u,c,f,2):2===p&&l(e,t,r,u,c,f):i(n(e),t,r,u,c,f,1);break}}}function o(e){var t=e.prev,r=e,n=e.next;if(g(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,c=i<o?i<a?i:a:o<a?o:a,f=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,p=s>l?s>u?s:u:l>u?l:u,y=n.next;y!==t;){if(y.x>=c&&y.x<=h&&y.y>=f&&y.y<=p&&d(i,s,o,l,a,u,y.x,y.y)&&g(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function a(e,t,r,n){var i=e.prev,o=e,a=e.next;if(g(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,f=o.y,p=a.y,y=s<l?s<u?s:u:l<u?l:u,m=c<f?c<p?c:p:f<p?f:p,_=s>l?s>u?s:u:l>u?l:u,v=c>f?c>p?c:p:f>p?f:p,A=h(y,m,t,r,n),b=h(_,v,t,r,n),w=e.prevZ,E=e.nextZ;w&&w.z>=A&&E&&E.z<=b;){if(w.x>=y&&w.x<=_&&w.y>=m&&w.y<=v&&w!==i&&w!==a&&d(s,c,l,f,u,p,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,E.x>=y&&E.x<=_&&E.y>=m&&E.y<=v&&E!==i&&E!==a&&d(s,c,l,f,u,p,E.x,E.y)&&g(E.prev,E,E.next)>=0)return!1;E=E.nextZ}for(;w&&w.z>=A;){if(w.x>=y&&w.x<=_&&w.y>=m&&w.y<=v&&w!==i&&w!==a&&d(s,c,l,f,u,p,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=b;){if(E.x>=y&&E.x<=_&&E.y>=m&&E.y<=v&&E!==i&&E!==a&&d(s,c,l,f,u,p,E.x,E.y)&&g(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function s(e,t,r){var i=e;do{var o=i.prev,a=i.next.next;!m(o,a)&&_(o,i,i.next,a)&&b(o,a)&&b(a,o)&&(t.push(o.i/r|0),t.push(i.i/r|0),t.push(a.i/r|0),x(i),x(i.next),i=e=a),i=i.next}while(i!==e);return n(i)}function l(e,t,r,o,a,s){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&y(l,u)){var c=w(l,u);return l=n(l,l.next),c=n(c,c.next),i(l,t,r,o,a,s,0),void i(c,t,r,o,a,s,0)}u=u.next}l=l.next}while(l!==e)}function u(e,t){return e.x-t.x}function c(e,t){var r=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a&&(a=s,r=n.x<n.next.x?n:n.next,s===i))return r}n=n.next}while(n!==t);if(!r)return null;var l,u=r,c=r.x,h=r.y,p=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&d(o<h?i:a,o,c,h,o<h?a:i,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(i-n.x),b(n,e)&&(l<p||l===p&&(n.x>r.x||n.x===r.x&&f(r,n)))&&(r=n,p=l)),n=n.next}while(n!==u);return r}(e,t);if(!r)return t;var i=w(r,e);return n(i,i.next),n(r,r.next)}function f(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function h(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function d(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function y(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&_(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(b(e,t)&&b(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||m(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function _(e,t,r,n){var i=A(g(e,t,r)),o=A(g(e,t,n)),a=A(g(r,n,e)),s=A(g(r,n,t));return i!==o&&a!==s||(!(0!==i||!v(e,r,t))||(!(0!==o||!v(e,n,t))||(!(0!==a||!v(r,e,n))||!(0!==s||!v(r,t,n)))))}function v(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function A(e){return e>0?1:e<0?-1:0}function b(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function w(e,t){var r=new I(e.i,e.x,e.y),n=new I(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function E(e,t,r,n){var i=new I(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function x(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function I(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=t,e.exports.default=t,t.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(S(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(S(e,u,c,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,p=n[s+1]*r,d=n[s+2]*r;f+=Math.abs((e[h]-e[d])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[d+1]-e[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},t.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}},7158:function(e){!function(t,r){e.exports?e.exports=r():t.EvEmitter=r()}("undefined"!=typeof window?window:this,(function(){function e(){}let t=e.prototype;return t.on=function(e,t){if(!e||!t)return this;let r=this._events=this._events||{},n=r[e]=r[e]||[];return n.includes(t)||n.push(t),this},t.once=function(e,t){if(!e||!t)return this;this.on(e,t);let r=this._onceEvents=this._onceEvents||{};return(r[e]=r[e]||{})[t]=!0,this},t.off=function(e,t){let r=this._events&&this._events[e];if(!r||!r.length)return this;let n=r.indexOf(t);return-1!=n&&r.splice(n,1),this},t.emitEvent=function(e,t){let r=this._events&&this._events[e];if(!r||!r.length)return this;r=r.slice(0),t=t||[];let n=this._onceEvents&&this._onceEvents[e];for(let i of r){n&&n[i]&&(this.off(e,i),delete n[i]),i.apply(this,t)}return this},t.allOff=function(){return delete this._events,delete this._onceEvents,this},e}))},66131:e=>{!function(t,r){e.exports?e.exports=r():t.getSize=r()}(window,(function(){function e(e){let t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}let t=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];t.length;return function(r){if("string"==typeof r&&(r=document.querySelector(r)),!(r&&"object"==typeof r&&r.nodeType))return;let n=getComputedStyle(r);if("none"==n.display)return function(){let e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};return t.forEach((t=>{e[t]=0})),e}();let i={};i.width=r.offsetWidth,i.height=r.offsetHeight;let o=i.isBorderBox="border-box"==n.boxSizing;t.forEach((e=>{let t=n[e],r=parseFloat(t);i[e]=isNaN(r)?0:r}));let a=i.paddingLeft+i.paddingRight,s=i.paddingTop+i.paddingBottom,l=i.marginLeft+i.marginRight,u=i.marginTop+i.marginBottom,c=i.borderLeftWidth+i.borderRightWidth,f=i.borderTopWidth+i.borderBottomWidth,h=e(n.width);!1!==h&&(i.width=h+(o?0:a+c));let p=e(n.height);return!1!==p&&(i.height=p+(o?0:s+f)),i.innerWidth=i.width-(a+c),i.innerHeight=i.height-(s+f),i.outerWidth=i.width+l,i.outerHeight=i.height+u,i}}))},177:function(e){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(){var e=h();return e.compile=function(t,r){return l.compile(t,r,e)},e.precompile=function(t,r){return l.precompile(t,r,e)},e.AST=a.default,e.Compiler=l.Compiler,e.JavaScriptCompiler=u.default,e.Parser=s.parser,e.parse=s.parse,e.parseWithoutProcessing=s.parseWithoutProcessing,e}var i=r(1).default;t.__esModule=!0;var o=i(r(2)),a=i(r(45)),s=r(46),l=r(51),u=i(r(52)),c=i(r(49)),f=i(r(44)),h=o.default.create,p=n();p.create=n,f.default(p),p.Visitor=c.default,p.default=p,t.default=p,e.exports=t.default},function(e,t){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,r){"use strict";function n(){var e=new a.HandlebarsEnvironment;return u.extend(e,a),e.SafeString=s.default,e.Exception=l.default,e.Utils=u,e.escapeExpression=u.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e}var i=r(3).default,o=r(1).default;t.__esModule=!0;var a=i(r(4)),s=o(r(37)),l=o(r(6)),u=i(r(5)),c=i(r(38)),f=o(r(44)),h=n();h.create=n,f.default(h),h.default=h,t.default=h,e.exports=t.default},function(e,t){"use strict";t.default=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},t.__esModule=!0},function(e,t,r){"use strict";function n(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},s.registerDefaultHelpers(this),l.registerDefaultDecorators(this)}var i=r(1).default;t.__esModule=!0,t.HandlebarsEnvironment=n;var o=r(5),a=i(r(6)),s=r(10),l=r(30),u=i(r(32)),c=r(33),f="4.7.7";t.VERSION=f;var h=8;t.COMPILER_REVISION=h;var p=7;t.LAST_COMPATIBLE_COMPILER_REVISION=p;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};t.REVISION_CHANGES=d;var y="[object Object]";n.prototype={constructor:n,logger:u.default,log:u.default.log,registerHelper:function(e,t){if(o.toString.call(e)===y){if(t)throw new a.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===y)o.extend(this.partials,e);else{if(void 0===t)throw new a.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===y){if(t)throw new a.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var g=u.default.log;t.log=g,t.createFrame=o.createFrame,t.logger=u.default},function(e,t){"use strict";function r(e){return c[e]}function n(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}function i(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function o(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return h.test(e)?e.replace(f,r):e}function a(e){return!e&&0!==e||!(!y(e)||0!==e.length)}function s(e){var t=n({},e);return t._parent=e,t}function l(e,t){return e.path=t,e}function u(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=n,t.indexOf=i,t.escapeExpression=o,t.isEmpty=a,t.createFrame=s,t.blockParams=l,t.appendContextPath=u;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},f=/[&<>"'`=]/g,h=/[&<>"'`=]/,p=Object.prototype.toString;t.toString=p;var d=function(e){return"function"==typeof e};d(/x/)&&(t.isFunction=d=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)}),t.isFunction=d;var y=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===p.call(e)};t.isArray=y},function(e,t,r){"use strict";function n(e,t){var r=t&&t.loc,a=void 0,s=void 0,l=void 0,u=void 0;r&&(a=r.start.line,s=r.end.line,l=r.start.column,u=r.end.column,e+=" - "+a+":"+l);for(var c=Error.prototype.constructor.call(this,e),f=0;f<o.length;f++)this[o[f]]=c[o[f]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=a,this.endLineNumber=s,i?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:u,enumerable:!0})):(this.column=l,this.endColumn=u))}catch(e){}}var i=r(7).default;t.__esModule=!0;var o=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];n.prototype=new Error,t.default=n,e.exports=t.default},function(e,t,r){e.exports={default:r(8),__esModule:!0}},function(e,t,r){var n=r(9);e.exports=function(e,t,r){return n.setDesc(e,t,r)}},function(e,t){var r=Object;e.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(e,t,r){"use strict";function n(e){a.default(e),s.default(e),l.default(e),u.default(e),c.default(e),f.default(e),h.default(e)}function i(e,t,r){e.helpers[t]&&(e.hooks[t]=e.helpers[t],r||delete e.helpers[t])}var o=r(1).default;t.__esModule=!0,t.registerDefaultHelpers=n,t.moveHelperToHooks=i;var a=o(r(11)),s=o(r(12)),l=o(r(25)),u=o(r(26)),c=o(r(27)),f=o(r(28)),h=o(r(29))},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,r){var i=r.inverse,o=r.fn;if(!0===t)return o(this);if(!1===t||null==t)return i(this);if(n.isArray(t))return t.length>0?(r.ids&&(r.ids=[r.name]),e.helpers.each(t,r)):i(this);if(r.data&&r.ids){var a=n.createFrame(r.data);a.contextPath=n.appendContextPath(r.data.contextPath,r.name),r={data:a}}return o(t,r)}))},e.exports=t.default},function(e,t,r){(function(n){"use strict";var i=r(13).default,o=r(1).default;t.__esModule=!0;var a=r(5),s=o(r(6));t.default=function(e){e.registerHelper("each",(function(e,t){function r(t,r,n){f&&(f.key=t,f.index=r,f.first=0===r,f.last=!!n,h&&(f.contextPath=h+t)),c+=o(e[t],{data:f,blockParams:a.blockParams([e[t],t],[h+t,null])})}if(!t)throw new s.default("Must pass iterator to #each");var o=t.fn,l=t.inverse,u=0,c="",f=void 0,h=void 0;if(t.data&&t.ids&&(h=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),a.isFunction(e)&&(e=e.call(this)),t.data&&(f=a.createFrame(t.data)),e&&"object"==typeof e)if(a.isArray(e))for(var p=e.length;u<p;u++)u in e&&r(u,u,u===e.length-1);else if(n.Symbol&&e[n.Symbol.iterator]){for(var d=[],y=e[n.Symbol.iterator](),g=y.next();!g.done;g=y.next())d.push(g.value);for(p=(e=d).length;u<p;u++)r(u,u,u===e.length-1)}else!function(){var t=void 0;i(e).forEach((function(e){void 0!==t&&r(t,u-1),t=e,u++})),void 0!==t&&r(t,u-1,!0)}();return 0===u&&(c=l(this)),c}))},e.exports=t.default}).call(t,function(){return this}())},function(e,t,r){e.exports={default:r(14),__esModule:!0}},function(e,t,r){r(15),e.exports=r(21).Object.keys},function(e,t,r){var n=r(16);r(18)("keys",(function(e){return function(t){return e(n(t))}}))},function(e,t,r){var n=r(17);e.exports=function(e){return Object(n(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(19),i=r(21),o=r(24);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},function(e,t,r){var n=r(20),i=r(21),o=r(22),a="prototype",s=function(e,t,r){var l,u,c,f=e&s.F,h=e&s.G,p=e&s.S,d=e&s.P,y=e&s.B,g=e&s.W,m=h?i:i[t]||(i[t]={}),_=h?n:p?n[t]:(n[t]||{})[a];for(l in h&&(r=t),r)(u=!f&&_&&l in _)&&l in m||(c=u?_[l]:r[l],m[l]=h&&"function"!=typeof _[l]?r[l]:y&&u?o(c,n):g&&_[l]==c?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[a]=e[a],t}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((m[a]||(m[a]={}))[l]=c))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,e.exports=s},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(23);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0;var i=n(r(6));t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0;var i=r(5),o=n(r(6));t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return i.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||i.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,r){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:r.inverse,inverse:r.fn,hash:r.hash})}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],r=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)t.push(arguments[n]);var i=1;null!=r.hash.level?i=r.hash.level:r.data&&null!=r.data.level&&(i=r.data.level),t[0]=i,e.log.apply(e,t)}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,r){return e?r.lookupProperty(e,t):e}))},e.exports=t.default},function(e,t,r){"use strict";var n=r(1).default;t.__esModule=!0;var i=r(5),o=n(r(6));t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");i.isFunction(e)&&(e=e.call(this));var r=t.fn;if(i.isEmpty(e))return t.inverse(this);var n=t.data;return t.data&&t.ids&&((n=i.createFrame(t.data)).contextPath=i.appendContextPath(t.data.contextPath,t.ids[0])),r(e,{data:n,blockParams:i.blockParams([e],[n&&n.contextPath])})}))},e.exports=t.default},function(e,t,r){"use strict";function n(e){o.default(e)}var i=r(1).default;t.__esModule=!0,t.registerDefaultDecorators=n;var o=i(r(31))},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5);t.default=function(e){e.registerDecorator("inline",(function(e,t,r,i){var o=e;return t.partials||(t.partials={},o=function(i,o){var a=r.partials;r.partials=n.extend({},a,t.partials);var s=e(i,o);return r.partials=a,s}),t.partials[i.args[0]]=i.fn,o}))},e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0;var n=r(5),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=n.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];console[t].apply(console,n)}}};t.default=i,e.exports=t.default},function(e,t,r){"use strict";function n(e){var t=l(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var r=l(null);return r.__proto__=!1,{properties:{whitelist:f.createNewLookupObject(r,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:f.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}}function i(e,t,r){return o("function"==typeof e?t.methods:t.properties,r)}function o(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(a(t),!1)}function a(e){!0!==p[e]&&(p[e]=!0,h.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}function s(){u(p).forEach((function(e){delete p[e]}))}var l=r(34).default,u=r(13).default,c=r(3).default;t.__esModule=!0,t.createProtoAccessControl=n,t.resultIsAllowed=i,t.resetLoggedProperties=s;var f=r(36),h=c(r(32)),p=l(null)},function(e,t,r){e.exports={default:r(35),__esModule:!0}},function(e,t,r){var n=r(9);e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.extend.apply(void 0,[i(null)].concat(t))}var i=r(34).default;t.__esModule=!0,t.createNewLookupObject=n;var o=r(5)},function(e,t){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t.default=r,e.exports=t.default},function(e,t,r){"use strict";function n(e){var t=e&&e[0]||1,r=v.COMPILER_REVISION;if(!(t>=v.LAST_COMPATIBLE_COMPILER_REVISION&&t<=v.COMPILER_REVISION)){if(t<v.LAST_COMPATIBLE_COMPILER_REVISION){var n=v.REVISION_CHANGES[r],i=v.REVISION_CHANGES[t];throw new _.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+i+").")}throw new _.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){function r(r,n,i){i.hash&&(n=m.extend({},n,i.hash),i.ids&&(i.ids[0]=!0)),r=t.VM.resolvePartial.call(this,r,n,i);var o=m.extend({},i,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),a=t.VM.invokePartial.call(this,r,n,o);if(null==a&&t.compile&&(i.partials[i.name]=t.compile(r,e.compilerOptions,t),a=i.partials[i.name](n,o)),null!=a){if(i.indent){for(var s=a.split("\n"),l=0,u=s.length;l<u&&(s[l]||l+1!==u);l++)s[l]=i.indent+s[l];a=s.join("\n")}return a}throw new _.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function n(t){function r(t){return""+e.main(a,t,a.helpers,a.partials,o,l,s)}var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=i.data;n._setup(i),!i.partial&&e.useData&&(o=u(t,o));var s=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(s=i.depths?t!=i.depths[0]?[t].concat(i.depths):i.depths:[t]),(r=c(e.main,r,a,i.depths||[],o,l))(t,i)}if(!t)throw new _.default("No environment passed to template");if(!e||!e.main)throw new _.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var i=e.compiler&&7===e.compiler[0],a={strict:function(e,t,r){if(!e||!(t in e))throw new _.default('"'+t+'" not defined in '+e,{loc:r});return a.lookupProperty(e,t)},lookupProperty:function(e,t){var r=e[t];return null==r||Object.prototype.hasOwnProperty.call(e,t)||w.resultIsAllowed(r,a.protoAccessControl,t)?r:void 0},lookup:function(e,t){for(var r=e.length,n=0;n<r;n++)if(null!=(e[n]&&a.lookupProperty(e[n],t)))return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:m.escapeExpression,invokePartial:r,fn:function(t){var r=e[t];return r.decorator=e[t+"_d"],r},programs:[],program:function(e,t,r,n,i){var a=this.programs[e],s=this.fn(e);return t||i||n||r?a=o(this,e,s,t,r,n,i):a||(a=this.programs[e]=o(this,e,s)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var r=e||t;return e&&t&&e!==t&&(r=m.extend({},t,e)),r},nullContext:p({}),noop:t.VM.noop,compilerInfo:e.compiler};return n.isTop=!0,n._setup=function(r){if(r.partial)a.protoAccessControl=r.protoAccessControl,a.helpers=r.helpers,a.partials=r.partials,a.decorators=r.decorators,a.hooks=r.hooks;else{var n=m.extend({},t.helpers,r.helpers);f(n,a),a.helpers=n,e.usePartial&&(a.partials=a.mergeIfNeeded(r.partials,t.partials)),(e.usePartial||e.useDecorators)&&(a.decorators=m.extend({},t.decorators,r.decorators)),a.hooks={},a.protoAccessControl=w.createProtoAccessControl(r);var o=r.allowCallsToHelperMissing||i;A.moveHelperToHooks(a,"helperMissing",o),A.moveHelperToHooks(a,"blockHelperMissing",o)}},n._child=function(t,r,n,i){if(e.useBlockParams&&!n)throw new _.default("must pass block params");if(e.useDepths&&!i)throw new _.default("must pass parent depths");return o(a,t,e[t],r,0,n,i)},n}function o(e,t,r,n,i,o,a){function s(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return!a||t==a[0]||t===e.nullContext&&null===a[0]||(s=[t].concat(a)),r(e,t,e.helpers,e.partials,i.data||n,o&&[i.blockParams].concat(o),s)}return(s=c(r,s,e,a,n,o)).program=t,s.depth=a?a.length:0,s.blockParams=i||0,s}function a(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e}function s(e,t,r){var n=r.data&&r.data["partial-block"];r.partial=!0,r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath);var i=void 0;if(r.fn&&r.fn!==l&&function(){r.data=v.createFrame(r.data);var e=r.fn;i=r.data["partial-block"]=function(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.data=v.createFrame(r.data),r.data["partial-block"]=n,e(t,r)},e.partials&&(r.partials=m.extend({},r.partials,e.partials))}(),void 0===e&&i&&(e=i),void 0===e)throw new _.default("The partial "+r.name+" could not be found");if(e instanceof Function)return e(t,r)}function l(){return""}function u(e,t){return t&&"root"in t||((t=t?v.createFrame(t):{}).root=e),t}function c(e,t,r,n,i,o){if(e.decorator){var a={};t=e.decorator(t,a,r,n&&n[0],i,o,n),m.extend(t,a)}return t}function f(e,t){d(e).forEach((function(r){var n=e[r];e[r]=h(n,t)}))}function h(e,t){var r=t.lookupProperty;return b.wrapHelper(e,(function(e){return m.extend({lookupProperty:r},e)}))}var p=r(39).default,d=r(13).default,y=r(3).default,g=r(1).default;t.__esModule=!0,t.checkRevision=n,t.template=i,t.wrapProgram=o,t.resolvePartial=a,t.invokePartial=s,t.noop=l;var m=y(r(5)),_=g(r(6)),v=r(4),A=r(10),b=r(43),w=r(33)},function(e,t,r){e.exports={default:r(40),__esModule:!0}},function(e,t,r){r(41),e.exports=r(21).Object.seal},function(e,t,r){var n=r(42);r(18)("seal",(function(e){return function(t){return e&&n(t)?e(t):t}}))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){"use strict";function r(e,t){if("function"!=typeof e)return e;var r=function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)};return r}t.__esModule=!0,t.wrapHelper=r},function(e,t){(function(r){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==r?r:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t.default}).call(t,function(){return this}())},function(e,t){"use strict";t.__esModule=!0;var r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}};t.default=r,e.exports=t.default},function(e,t,r){"use strict";function n(e,t){return"Program"===e.type?e:(s.default.yy=f,f.locInfo=function(e){return new f.SourceLocation(t&&t.srcName,e)},s.default.parse(e))}function i(e,t){var r=n(e,t);return new l.default(t).accept(r)}var o=r(1).default,a=r(3).default;t.__esModule=!0,t.parseWithoutProcessing=n,t.parse=i;var s=o(r(47)),l=o(r(48)),u=a(r(50)),c=r(5);t.parser=s.default;var f={};c.extend(f,u)},function(e,t){"use strict";t.__esModule=!0;var r=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,r,n,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:this.$=n.prepareProgram(o[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(o[s]),strip:n.stripFlags(o[s],o[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 16:case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:n.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var l=n.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),u=n.prepareProgram([l],o[s-1].loc);u.chained=!0,this.$={strip:o[s-2].strip,program:u,chain:!0};break;case 21:this.$={path:o[s-1],strip:n.stripFlags(o[s-2],o[s])};break;case 22:case 23:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:n.stripFlags(o[s-4],o[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:n.stripFlags(o[s-4],o[s])};break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(o[s-2]),value:o[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(o[s-1]);break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 42:this.$=n.preparePath(!0,o[s],this._$);break;case 43:this.$=n.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:n.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:n.id(o[s]),original:o[s]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:o[s-1].push(o[s]);break;case 98:case 100:this.$=[o[s]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){function t(){var e;return"number"!=typeof(e=r.lexer.lex()||1)&&(e=r.symbols_[e]||e),e}var r=this,n=[0],i=[null],o=[],a=this.table,s="",l=0,u=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var f=this.lexer.yylloc;o.push(f);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,d,y,g,m,_,v,A,b,w={};;){if(y=n[n.length-1],this.defaultActions[y]?g=this.defaultActions[y]:(null!=p||(p=t()),g=a[y]&&a[y][p]),void 0===g||!g.length||!g[0]){var E="";if(!c){for(_ in b=[],a[y])this.terminals_[_]&&_>2&&b.push("'"+this.terminals_[_]+"'");E=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:f,expected:b})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+p);switch(g[0]){case 1:n.push(p),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(g[1]),p=null,d?(p=d,d=null):(u=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,f=this.lexer.yylloc,c>0&&c--);break;case 2:if(v=this.productions_[g[1]][1],w.$=i[i.length-v],w._$={first_line:o[o.length-(v||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(v||1)].first_column,last_column:o[o.length-1].last_column},h&&(w._$.range=[o[o.length-(v||1)].range[0],o[o.length-1].range[1]]),void 0!==(m=this.performAction.call(w,s,u,l,this.yy,g[1],i,o)))return m;v&&(n=n.slice(0,-1*v*2),i=i.slice(0,-1*v),o=o.slice(0,-1*v)),n.push(this.productions_[g[1]][0]),i.push(w.$),o.push(w._$),A=a[n[n.length-2]][n[n.length-1]],n.push(A);break;case 3:return!0}}return!0}},r=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,r,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(!(r=this._input.match(this.rules[o[a]]))||t&&!(r[0].length>t[0].length)||(t=r,n=a,this.options.flex));a++);return t?((i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,r,n){function i(e,r){return t.yytext=t.yytext.substring(e,t.yyleng-r+e)}switch(r){case 0:if("\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return e}();return t.lexer=r,e.prototype=t,t.Parser=e,new e}();t.default=r,e.exports=t.default},function(e,t,r){"use strict";function n(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function i(e,t,r){void 0===t&&(t=e.length);var n=e[t-1],i=e[t-2];return n?"ContentStatement"===n.type?(i||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function o(e,t,r){void 0===t&&(t=-1);var n=e[t+1],i=e[t+2];return n?"ContentStatement"===n.type?(i||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function a(e,t,r){var n=e[null==t?0:t+1];if(n&&"ContentStatement"===n.type&&(r||!n.rightStripped)){var i=n.value;n.value=n.value.replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.value!==i}}function s(e,t,r){var n=e[null==t?e.length-1:t-1];if(n&&"ContentStatement"===n.type&&(r||!n.leftStripped)){var i=n.value;return n.value=n.value.replace(r?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.value!==i,n.leftStripped}}var l=r(1).default;t.__esModule=!0;var u=l(r(49));n.prototype=new u.default,n.prototype.Program=function(e){var t=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,l=0,u=n.length;l<u;l++){var c=n[l],f=this.accept(c);if(f){var h=i(n,l,r),p=o(n,l,r),d=f.openStandalone&&h,y=f.closeStandalone&&p,g=f.inlineStandalone&&h&&p;f.close&&a(n,l,!0),f.open&&s(n,l,!0),t&&g&&(a(n,l),s(n,l)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(n[l-1].original)[1])),t&&d&&(a((c.program||c.inverse).body),s(n,l)),t&&y&&(a(n,l),s((c.inverse||c.program).body))}}return e},n.prototype.BlockStatement=n.prototype.DecoratorBlock=n.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,r=e.program&&e.inverse,n=r,l=r;if(r&&r.chained)for(n=r.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var u={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:o(t.body),closeStandalone:i((n||t).body)};if(e.openStrip.close&&a(t.body,null,!0),r){var c=e.inverseStrip;c.open&&s(t.body,null,!0),c.close&&a(n.body,null,!0),e.closeStrip.open&&s(l.body,null,!0),!this.options.ignoreStandalone&&i(t.body)&&o(n.body)&&(s(t.body),a(n.body))}else e.closeStrip.open&&s(t.body,null,!0);return u},n.prototype.Decorator=n.prototype.MustacheStatement=function(e){return e.strip},n.prototype.PartialStatement=n.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(){this.parents=[]}function i(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function o(e){i.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function a(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}var s=r(1).default;t.__esModule=!0;var l=s(r(6));n.prototype={constructor:n,mutating:!1,acceptKey:function(e,t){var r=this.accept(e[t]);if(this.mutating){if(r&&!n.prototype[r.type])throw new l.default('Unexpected node type "'+r.type+'" found when accepting '+t+" on "+e.type);e[t]=r}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new l.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,r=e.length;t<r;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,r--)},accept:function(e){if(e){if(!this[e.type])throw new l.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:i,Decorator:i,BlockStatement:o,DecoratorBlock:o,PartialStatement:a,PartialBlockStatement:function(e){a.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=n,e.exports=t.default},function(e,t,r){"use strict";function n(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var r={loc:e.path.loc};throw new y.default(e.path.original+" doesn't match "+t,r)}}function i(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function o(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e}function a(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function s(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function l(e,t,r){r=this.locInfo(r);for(var n=e?"@":"",i=[],o=0,a=0,s=t.length;a<s;a++){var l=t[a].part,u=t[a].original!==l;if(n+=(t[a].separator||"")+l,u||".."!==l&&"."!==l&&"this"!==l)i.push(l);else{if(i.length>0)throw new y.default("Invalid path: "+n,{loc:r});".."===l&&o++}}return{type:"PathExpression",data:e,depth:o,parts:i,original:n,loc:r}}function u(e,t,r,n,i,o){var a=n.charAt(3)||n.charAt(2),s="{"!==a&&"&"!==a;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:e,params:t,hash:r,escaped:s,strip:i,loc:this.locInfo(o)}}function c(e,t,r,i){n(e,r);var o={type:"Program",body:t,strip:{},loc:i=this.locInfo(i)};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}}function f(e,t,r,i,o,a){i&&i.path&&n(e,i);var s=/\*/.test(e.open);t.blockParams=e.blockParams;var l=void 0,u=void 0;if(r){if(s)throw new y.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=i.strip),u=r.strip,l=r.program}return o&&(o=l,l=t,t=o),{type:s?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:l,openStrip:e.strip,inverseStrip:u,closeStrip:i&&i.strip,loc:this.locInfo(a)}}function h(e,t){if(!t&&e.length){var r=e[0].loc,n=e[e.length-1].loc;r&&n&&(t={source:r.source,start:{line:r.start.line,column:r.start.column},end:{line:n.end.line,column:n.end.column}})}return{type:"Program",body:e,strip:{},loc:t}}function p(e,t,r,i){return n(e,r),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:r&&r.strip,loc:this.locInfo(i)}}var d=r(1).default;t.__esModule=!0,t.SourceLocation=i,t.id=o,t.stripFlags=a,t.stripComment=s,t.preparePath=l,t.prepareMustache=u,t.prepareRawBlock=c,t.prepareBlock=f,t.prepareProgram=h,t.preparePartialBlock=p;var y=d(r(6))},function(e,t,r){"use strict";function n(){}function i(e,t,r){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new c.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0),t.compat&&(t.useDepths=!0);var n=r.parse(e,t),i=(new r.Compiler).compile(n,t);return(new r.JavaScriptCompiler).compile(i,t)}function o(e,t,r){function n(){var n=r.parse(e,t),i=(new r.Compiler).compile(n,t),o=(new r.JavaScriptCompiler).compile(i,t,void 0,!0);return r.template(o)}function i(e,t){return o||(o=n()),o.call(this,e,t)}if(void 0===t&&(t={}),null==e||"string"!=typeof e&&"Program"!==e.type)throw new c.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);"data"in(t=f.extend({},t))||(t.data=!0),t.compat&&(t.useDepths=!0);var o=void 0;return i._setup=function(e){return o||(o=n()),o._setup(e)},i._child=function(e,t,r,i){return o||(o=n()),o._child(e,t,r,i)},i}function a(e,t){if(e===t)return!0;if(f.isArray(e)&&f.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!a(e[r],t[r]))return!1;return!0}}function s(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}var l=r(34).default,u=r(1).default;t.__esModule=!0,t.Compiler=n,t.precompile=i,t.compile=o;var c=u(r(6)),f=r(5),h=u(r(45)),p=[].slice;n.prototype={compiler:n,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var r=0;r<t;r++){var n=this.opcodes[r],i=e.opcodes[r];if(n.opcode!==i.opcode||!a(n.args,i.args))return!1}for(t=this.children.length,r=0;r<t;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=f.extend(l(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),r=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[r]=t,this.useDepths=this.useDepths||t.useDepths,r},accept:function(e){if(!this[e.type])throw new c.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,r=t.length,n=0;n<r;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){s(e);var t=e.program,r=e.inverse;t=t&&this.compileProgram(t),r=r&&this.compileProgram(r);var n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,t,r):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,r),this.opcode("pushProgram",t),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),r=this.setupFullMustacheParams(e,t,void 0),n=e.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,n.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var r=e.params;if(r.length>1)throw new c.default("Unsupported number of partial arguments: "+r.length,e);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var n=e.name.original,i="SubExpression"===e.name.type;i&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var o=e.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,n,o),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){s(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,r){var n=e.path,i=n.parts[0],o=null!=t||null!=r;this.opcode("getContext",n.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",r),n.strict=!0,this.accept(n),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var n=this.setupFullMustacheParams(e,t,r),i=e.path,o=i.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",n.length,o);else{if(this.options.knownHelpersOnly)throw new c.default("You specified knownHelpersOnly, but used the unknown helper "+o,e);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",n.length,i.original,h.default.helpers.simpleId(i))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],r=h.default.helpers.scopedId(e),n=!e.depth&&!r&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,r=0,n=t.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(t[r].value);for(;r--;)this.opcode("assignToHash",t[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:p.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=h.default.helpers.simpleId(e.path),r=t&&!!this.blockParamIndex(e.path.parts[0]),n=!r&&h.default.helpers.helperExpression(e),i=!r&&(n||t);if(i&&!n){var o=e.path.parts[0],a=this.options;a.knownHelpers[o]?n=!0:a.knownHelpersOnly&&(i=!1)}return n?"helper":i?"ambiguous":"simple"},pushParams:function(e){for(var t=0,r=e.length;t<r;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var r=void 0;if(!e.parts||h.default.helpers.scopedId(e)||e.depth||(r=this.blockParamIndex(e.parts[0])),r){var n=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,n)}else(t=e.original||t).replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,r,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),i},blockParamIndex:function(e){for(var t=0,r=this.options.blockParams.length;t<r;t++){var n=this.options.blockParams[t],i=n&&f.indexOf(n,e);if(n&&i>=0)return[t,i]}}}},function(e,t,r){"use strict";function n(e){this.value=e}function i(){}function o(e,t,r,n){var i=t.popStack(),o=0,a=r.length;for(e&&a--;o<a;o++)i=t.nameLookup(i,r[o],n);return e?[t.aliasable("container.strict"),"(",i,", ",t.quotedString(r[o]),", ",JSON.stringify(t.source.currentLocation)," )"]:i}var a=r(13).default,s=r(1).default;t.__esModule=!0;var l=r(4),u=s(r(6)),c=r(5),f=s(r(53));i.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=l.COMPILER_REVISION;return[e,l.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,r){return c.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,r,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var i=e.opcodes,o=void 0,a=void 0,s=void 0,l=void 0;for(s=0,l=i.length;s<l;s++)o=i[s],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new u.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var c=this.createFunctionContext(n);if(this.isChild)return c;var f={compiler:this.compilerInfo(),main:c};this.decorators&&(f.main_d=this.decorators,f.useDecorators=!0);var h=this.context,p=h.programs,d=h.decorators;for(s=0,l=p.length;s<l;s++)p[s]&&(f[s]=p[s],d[s]&&(f[s+"_d"]=d[s],f.useDecorators=!0));return this.environment.usePartial&&(f.usePartial=!0),this.options.data&&(f.useData=!0),this.useDepths&&(f.useDepths=!0),this.useBlockParams&&(f.useBlockParams=!0),this.options.compat&&(f.compat=!0),n?f.compilerOptions=this.options:(f.compiler=JSON.stringify(f.compiler),this.source.currentLocation={start:{line:1,column:0}},f=this.objectLiteral(f),t.srcName?(f=f.toStringWithSourceMap({file:t.destName})).map=f.map&&f.map.toString():f=f.toString()),f},preamble:function(){this.lastContext=0,this.source=new f.default(this.options.srcName),this.decorators=new f.default(this.options.srcName)},createFunctionContext:function(e){var t=this,r="",n=this.stackVars.concat(this.registers.list);n.length>0&&(r+=", "+n.join(", "));var i=0;a(this.aliases).forEach((function(e){var n=t.aliases[e];n.children&&n.referenceCount>1&&(r+=", alias"+ ++i+"="+e,n.children[0]="alias"+i)})),this.lookupPropertyFunctionIsUsed&&(r+=", "+this.lookupPropertyFunctionVarDeclaration());var o=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var s=this.mergeSource(r);return e?(o.push(s),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",s,"}"])},mergeSource:function(e){var t=this.environment.isSimple,r=!this.forceBuffer,n=void 0,i=void 0,o=void 0,a=void 0;return this.source.each((function(e){e.appendToBuffer?(o?e.prepend("  + "):o=e,a=e):(o&&(i?o.prepend("buffer += "):n=!0,a.add(";"),o=a=void 0),i=!0,t||(r=!1))})),r?o?(o.prepend("return "),a.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(e,0,r);var n=this.popStack();r.splice(1,0,n),this.push(this.source.functionCall(t,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var r=this.topStack();t.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack((function(e){return[" != null ? ",e,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,r,n){var i=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[i++])),this.resolvePath("context",e,i,t,r)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,r){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,r)},resolvePath:function(e,t,r,n,i){var a=this;if(this.options.strict||this.options.assumeObjects)this.push(o(this.options.strict&&i,this,t,e));else for(var s=t.length;r<s;r++)this.replaceStack((function(i){var o=a.nameLookup(i,t[r],e);return n?[" && ",o]:[" != null ? ",o," : ",i]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var r=this.nameLookup("decorators",t,"decorator"),n=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",n])," || fn;"])},invokeHelper:function(e,t,r){var n=this.popStack(),i=this.setupHelper(e,t),o=[];r&&o.push(i.name),o.push(n),this.options.strict||o.push(this.aliasable("container.hooks.helperMissing"));var a=["(",this.itemsSeparatedBy(o,"||"),")"],s=this.source.functionCall(a,"call",i.callParams);this.push(s)},itemsSeparatedBy:function(e,t){var r=[];r.push(e[0]);for(var n=1;n<e.length;n++)r.push(t,e[n]);return r},invokeKnownHelper:function(e,t){var r=this.setupHelper(e,t);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var r=this.popStack();this.emptyHash();var n=this.setupHelper(0,e,t),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",r,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",i,n.paramsInit?["),(",n.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",n.callParams)," : helper))"])},invokePartial:function(e,t,r){var n=[],i=this.setupParams(t,1,n);e&&(t=this.popStack(),delete i.name),r&&(i.indent=JSON.stringify(r)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",e?n.unshift(t):n.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),n.push(i),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),r=void 0,n=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack());var o=this.hash;r&&(o.contexts[e]=r),n&&(o.types[e]=n),i&&(o.ids[e]=i),o.values[e]=t},pushId:function(e,t,r){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(e,t){for(var r=e.children,n=void 0,i=void 0,o=0,a=r.length;o<a;o++){n=r[o],i=new this.compiler;var s=this.matchExistingProgram(n);if(null==s){this.context.programs.push("");var l=this.context.programs.length;n.index=l,n.name="program"+l,this.context.programs[l]=i.compile(n,t,this.context,!this.precompile),this.context.decorators[l]=i.decorators,this.context.environments[l]=n,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams}else n.index=s.index,n.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(e){for(var t=0,r=this.context.environments.length;t<r;t++){var n=this.context.environments[t];if(n&&n.equals(e))return n}},programExpression:function(e){var t=this.environment.children[e],r=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof n||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],r=void 0,i=void 0,o=void 0;if(!this.isInline())throw new u.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof n)t=["(",r=[a.value]],o=!0;else{i=!0;var s=this.incrStack();t=["((",this.push(s)," = ",a,")"],r=this.topStack()}var l=e.call(this,r);o||this.popStack(),i&&this.stackSlot--,this.push(t.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,r=e.length;t<r;t++){var i=e[t];if(i instanceof n)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof n)return r.value;if(!t){if(!this.stackSlot)throw new u.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof n?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,r){var n=[];return{params:n,paramsInit:this.setupHelperArgs(t,e,n,r),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(e,t,r){var n={},i=[],o=[],a=[],s=!r,l=void 0;s&&(r=[]),n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var u=this.popStack(),c=this.popStack();(c||u)&&(n.fn=c||"container.noop",n.inverse=u||"container.noop");for(var f=t;f--;)l=this.popStack(),r[f]=l,this.trackIds&&(a[f]=this.popStack()),this.stringParams&&(o[f]=this.popStack(),i[f]=this.popStack());return s&&(n.args=this.source.generateArray(r)),this.trackIds&&(n.ids=this.source.generateArray(a)),this.stringParams&&(n.types=this.source.generateArray(o),n.contexts=this.source.generateArray(i)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,r,n){var i=this.setupParams(e,t,r);return i.loc=JSON.stringify(this.source.currentLocation),i=this.objectLiteral(i),n?(this.useRegister("options"),r.push("options"),["options=",i]):r?(r.push(i),""):i}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=i.RESERVED_WORDS={},r=0,n=e.length;r<n;r++)t[e[r]]=!0}(),i.isValidJavaScriptVariableName=function(e){return!i.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=i,e.exports=t.default},function(e,t,r){"use strict";function n(e,t,r){if(a.isArray(e)){for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.wrap(e[i],r));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function i(e){this.srcFile=e,this.source=[]}var o=r(13).default;t.__esModule=!0;var a=r(5),s=void 0;s||(s=function(e,t,r,n){this.src="",n&&this.add(n)},s.prototype={add:function(e){a.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){a.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each((function(t){e.add(["  ",t,"\n"])})),e},each:function(e){for(var t=0,r=this.source.length;t<r;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new s(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof s?e:(e=n(e,this,t),new s(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,r){return r=this.generateList(r),this.wrap([e,t?"."+t+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,r=[];o(e).forEach((function(i){var o=n(e[i],t);"undefined"!==o&&r.push([t.quotedString(i),":",o])}));var i=this.generateList(r);return i.prepend("{"),i.add("}"),i},generateList:function(e){for(var t=this.empty(),r=0,i=e.length;r<i;r++)r&&t.add(","),t.add(n(e[r],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=i,e.exports=t.default}])},81945:e=>{e.exports='<div id="m-attributions-container" class="m-control m-container m-attributions">\n    <button id=\'close-button\' class="{{icon}}"></button>\n    <header>\n        <h1>Attributions</h1>\n    </header>\n</div>'},27483:e=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">ATTRIBUTIONS</h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <img src="{{urlImages}}/attributions.png" style="margin: 0 auto; display: block">\n   </div>\n</div>'},33841:e=>{e.exports='<div id="div-contenedor" class="m-control m-container m-background">\n    {{#each layers}}\n        <button class="m-background-group-btn" id="m-baselayerselector-{{this.id}}" title="Selección de capa de fondo">{{{this.title}}}</button>\n    {{/each}}\n    <button class="m-background-unique-btn" id="m-baselayerselector-unique-btn" title="Selección de capa de fondo"></button>\n</div>'},98429:e=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">BACKGROUNDLAYERS</h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <img src="{{urlImages}}/backgroundlayers.png" style="margin: 0 auto; display: block">\n   </div>\n</div>'},42200:e=>{e.exports='<div class="m-dialog {{severity}}">\n   <div class="m-modal">\n      <div class="m-content">\n         <div class="m-title">\n            <i class="m-icon"></i>\n            <span tabindex="{{order}}" role="heading">{{{title}}}</span>\n         </div>\n         <div tabindex="{{order}}" role="main" class="m-message">{{{message}}}</div>\n         <div class="m-button">\n            <button tabindex="{{order}}" type="button">OK</button>\n         </div>\n      </div>\n   </div>\n</div>'},37130:e=>{e.exports='<div class="m-geojson-content">\n   {{#each features}}\n   <div id="{{id}}" class="result">\n      {{#each attributes}}\n      <table>\n         <tr>\n            <td class="key">{{key}}</td>\n            <td class="value">{{{value}}}</td>\n         </tr>\n      </table>\n      {{/each}}\n   </div>\n   <div class="m-separator"></div>\n   {{/each}}\n</div>'},96512:e=>{e.exports="  {{#each layers}}\n      <div class='m-getfeatureinfo-content-info'>\n          <div class='m-getfeatureinfo-content-info-header'>\n              <div class=\"m-arrow-right\"></div>\n              <div>\n                  <p> {{../info_of}} <strong>{{layerName}}</strong></p>\n              </div>\n          </div>\n          <div class='m-getfeatureinfo-content-info-body m-content-collapsed'>\n              {{{formatedInfo}}}\n          </div>\n      </div>\n  {{/each}}"},92690:e=>{e.exports='<div class="m-getfeatureinfo-content">\n   {{{info}}}\n</div>'},73996:e=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">GETFEATUREINFO</h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <img src="{{urlImages}}/getfeatureinfo.png" style="margin: 0 auto; display: block">\n   </div>\n</div>'},40402:e=>{e.exports='<div class="m-kml-content">\n   <p class="m-kml-name">{{{name}}}</p>\n   <div class="m-kml-desc">{{{desc}}}</div>\n</div>'},93340:e=>{e.exports='<div class="m-label-content">\n   {{{info}}}\n</div>'},86326:e=>{e.exports='<div class="m-control m-location-container" title="{{title}}">\n    <button id="m-location-button" class="g-cartografia-gps2"></button>\n</div>'},61365:e=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">LOCATION</h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <p>{{translations.help3}}</p>\n      <img src="{{urlImages}}/location.png" style="margin: 0 auto; display: block">\n   </div>\n</div>'},83:e=>{e.exports='<div class="m-panel">\n   <button class="m-panel-btn"></button>\n   <div class="m-panel-controls"></div>\n</div>'},60072:e=>{e.exports='<div class="m-control"></div>'},50107:e=>{e.exports='<div class="m-control"></div>'},58242:e=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">PANZOOMBAR</h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <img src="{{urlImages}}/panzoombar.png" style="margin: 0 auto; display: block">\n   </div>\n</div>'},12984:e=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">PANZOOM</h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <img src="{{urlImages}}/panzoom.png" style="margin: 0 auto; display: block">\n   </div>\n</div>'},73810:e=>{e.exports='<div class="m-popup{{#gt tabs.length 1}} m-has-tabs{{/gt}} m-collapsed">\n  {{#gt tabs.length 1}}\n    <div class="m-tabs">\n      {{#each tabs}}\n        <div class="m-tab{{#eq @index 0}} m-activated{{/eq}}" data-index="{{@index}}">\n          <i class="{{icon}}"></i>\n        </div>\n      {{/each}}\n    </div>\n  {{/gt}}\n  <div class="m-content">\n    <div class="m-header">\n      {{#eq tabs.length 1}}\n        <div class="m-title">{{{tabs.0.title}}}</div>\n        <div class="m-subtitle">{{{tabs.0.subtitle}}}</div>\n      {{/eq}}\n      <a class="m-popup-closer" href="#" title="cerrar popup"></a>\n    </div>\n    <div class="m-body">{{{tabs.0.content}}}</div>\n  </div>\n</div>'},2029:e=>{e.exports='<div class="m-control m-rotate-container">\n    <button id="m-rotate-button" class="g-cartografia-brujula-norte" title="{{title}}"></button>\n</div>'},45268:e=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">ROTATE</h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <img src="{{urlImages}}/rotate.png" style="margin: 0 auto; display: block">\n   </div>\n</div>'},87797:e=>{e.exports='<div \n    role="button" \n    tabindex="{{order}}" \n    class="m-control m-scale-container" \n    title="Control {{title}}"\n    >\n    <div role="text" class="m-level">{{level}} </div>\n    <div role="text" id="m-level-number"></div>\n    <span class="m-scale-separator"> | </span>\n    <div role="text" class="m-unit">{{scale}} = 1 : </div>\n    <div role="text" class="m-scale" id="m-scale-span"></div>\n</div>'},22221:e=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">SCALE</h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <img src="{{urlImages}}/scale.png" style="margin: 0 auto; display: block">\n   </div>\n</div>'},90959:e=>{e.exports='<div class="m-control"></div>'},11304:e=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">SCALELINE</h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <p>{{translations.help3}}: <a tabindex="0" href="https://blogs.upm.es/espacio-geotig/cartografia/escala-cartografica/" target="_blank">https://blogs.upm.es/espacio-geotig/cartografia/escala-cartografica/</a></p>\n      <img src="{{urlImages}}/scaleline.png" style="margin: 0 auto; display: block">\n   </div>\n</div>'},48184:e=>{e.exports='<div class="m-toast {{severity}}">\n    <span class="{{icon}}"></span>\n    <div class="m-toast-message" tabindex="{{order}}">{{{message}}}</div>\n    <button type="button" class="g-cartografia-cancelar m-toast-button" tabindex="{{order}}" title="{{translations.close}}"></button>\n</div>'},80645:(e,t)=>{t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=u}return(p?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?h/l:h*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+p]=255&a,p+=d,a/=256,u-=8);e[r+p-d]|=128*y}},25705:(e,t,r)=>{"use strict";var n,i,o=r.g.MutationObserver||r.g.WebKitMutationObserver;if(o){var a=0,s=new o(f),l=r.g.document.createTextNode("");s.observe(l,{characterData:!0}),n=function(){l.data=a=++a%2}}else if(r.g.setImmediate||void 0===r.g.MessageChannel)n="document"in r.g&&"onreadystatechange"in r.g.document.createElement("script")?function(){var e=r.g.document.createElement("script");e.onreadystatechange=function(){f(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},r.g.document.documentElement.appendChild(e)}:function(){setTimeout(f,0)};else{var u=new r.g.MessageChannel;u.port1.onmessage=f,n=function(){u.port2.postMessage(0)}}var c=[];function f(){var e,t;i=!0;for(var r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}i=!1}e.exports=function(e){1!==c.push(e)||i||n()}},15946:(e,t,r)=>{"use strict";var n=r(32640);function i(e){if(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0;for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}}i.prototype=new n,i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===r&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},78458:(e,t)=>{"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e,t){for(var n,i,o,a,s,l,u,c="",f=0;f<e.length;)a=(n=e.charCodeAt(f++))>>2,s=(3&n)<<4|(i=e.charCodeAt(f++))>>4,l=(15&i)<<2|(o=e.charCodeAt(f++))>>6,u=63&o,isNaN(i)?l=u=64:isNaN(o)&&(u=64),c=c+r.charAt(a)+r.charAt(s)+r.charAt(l)+r.charAt(u);return c},t.decode=function(e,t){var n,i,o,a,s,l,u="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)n=r.indexOf(e.charAt(c++))<<2|(a=r.indexOf(e.charAt(c++)))>>4,i=(15&a)<<4|(s=r.indexOf(e.charAt(c++)))>>2,o=(3&s)<<6|(l=r.indexOf(e.charAt(c++))),u+=String.fromCharCode(n),64!=s&&(u+=String.fromCharCode(i)),64!=l&&(u+=String.fromCharCode(o));return u}},37326:e=>{"use strict";function t(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}t.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=t},61678:(e,t,r)=>{"use strict";t.STORE={magic:"\0\0",compress:function(e,t){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},t.DEFLATE=r(51033)},86988:(e,t,r)=>{"use strict";var n=r(58910),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(e,t){if(void 0===e||!e.length)return 0;var r="string"!==n.getTypeOf(e);void 0===t&&(t=0);var o=0;t=~t;for(var a=0,s=e.length;a<s;a++)o=r?e[a]:e.charCodeAt(a),t=t>>>8^i[255&(t^o)];return~t}},32640:(e,t,r)=>{"use strict";var n=r(58910);function i(e){this.data=null,this.length=0,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1)}},e.exports=i},26032:(e,t)=>{"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!1,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},60172:(e,t,r)=>{"use strict";var n=r(58910);t.string2binary=function(e){return n.string2binary(e)},t.string2Uint8Array=function(e){return n.transformTo("uint8array",e)},t.uint8Array2String=function(e){return n.transformTo("string",e)},t.string2Blob=function(e){var t=n.transformTo("arraybuffer",e);return n.arrayBuffer2Blob(t)},t.arrayBuffer2Blob=function(e){return n.arrayBuffer2Blob(e)},t.transformTo=function(e,t){return n.transformTo(e,t)},t.getTypeOf=function(e){return n.getTypeOf(e)},t.checkSupport=function(e){return n.checkSupport(e)},t.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,t.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,t.pretty=function(e){return n.pretty(e)},t.findCompression=function(e){return n.findCompression(e)},t.isRegExp=function(e){return n.isRegExp(e)}},51033:(e,t,r)=>{"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=r(99591);t.uncompressInputType=n?"uint8array":"array",t.compressInputType=n?"uint8array":"array",t.magic="\b\0",t.compress=function(e,t){return i.deflateRaw(e,{level:t.level||-1})},t.uncompress=function(e){return i.inflateRaw(e)}},66085:(e,t,r)=>{"use strict";var n=r(78458);function i(e,t){if(!(this instanceof i))return new i(e,t);this.files=Object.create(null),this.comment=null,this.root="",e&&this.load(e,t),this.clone=function(){var e=new i;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}i.prototype=r(17132),i.prototype.load=r(81062),i.support=r(53790),i.defaults=r(26032),i.utils=r(60172),i.base64={encode:function(e){return n.encode(e)},decode:function(e){return n.decode(e)}},i.compressions=r(61678),e.exports=i},81062:(e,t,r)=>{"use strict";var n=r(78458),i=r(83600),o=r(58910),a=r(6624);e.exports=function(e,t){var r,s,l,u;for((t=o.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode})).base64&&(e=n.decode(e)),r=(s=new a(e,t)).files,l=0;l<r.length;l++)u=r[l],this.file(u.fileNameStr,u.decompressed,{binary:!0,optimizedBinaryString:!0,date:u.date,dir:u.dir,comment:u.fileCommentStr.length?u.fileCommentStr:null,unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions,createFolders:t.createFolders});return s.zipComment.length&&(this.comment=s.zipComment),this}},49939:e=>{"use strict";e.exports=function(e,t){return new Buffer(e,t)},e.exports.test=function(e){return Buffer.isBuffer(e)}},60696:(e,t,r)=>{"use strict";var n=r(82123);function i(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0}i.prototype=new n,i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},17132:(e,t,r)=>{"use strict";var n=r(53790),i=r(58910),o=r(86988),a=r(71141),s=r(26032),l=r(78458),u=r(61678),c=r(37326),f=r(49939),h=r(83600),p=r(86175),d=r(6378),y=function(e){if(e._data instanceof c&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===i.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},g=function(e){var t=y(e);return"string"===i.getTypeOf(t)?!e.options.binary&&n.nodebuffer?f(t,"utf-8"):e.asBinary():t},m=function(e){var t=y(this);return null==t?"":(this.options.base64&&(t=l.decode(t)),t=e&&this.options.binary?S.utf8decode(t):i.transformTo("string",t),e||this.options.binary||(t=i.transformTo("string",S.utf8encode(t))),t)},_=function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}};_.prototype={asText:function(){return m.call(this,!0)},asBinary:function(){return m.call(this,!1)},asNodeBuffer:function(){var e=g(this);return i.transformTo("nodebuffer",e)},asUint8Array:function(){var e=g(this);return i.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var v=function(e,t){var r,n="";for(r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n},A=function(e,t,r){var n,o=i.getTypeOf(t);if("string"==typeof(r=function(e){return!0!==(e=e||{}).base64||null!==e.binary&&void 0!==e.binary||(e.binary=!0),(e=i.extend(e,s)).date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e}(r)).unixPermissions&&(r.unixPermissions=parseInt(r.unixPermissions,8)),r.unixPermissions&&16384&r.unixPermissions&&(r.dir=!0),r.dosPermissions&&16&r.dosPermissions&&(r.dir=!0),r.dir&&(e=w(e)),r.createFolders&&(n=b(e))&&E.call(this,n,!0),r.dir||null==t)r.base64=!1,r.binary=!1,t=null,o=null;else if("string"===o)r.binary&&!r.base64&&!0!==r.optimizedBinaryString&&(t=i.string2binary(t));else{if(r.base64=!1,r.binary=!0,!(o||t instanceof c))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===o&&(t=i.transformTo("uint8array",t))}var a=new _(e,t,r);return this.files[e]=a,a},b=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},w=function(e){return"/"!=e.slice(-1)&&(e+="/"),e},E=function(e,t){return t=void 0!==t&&t,e=w(e),this.files[e]||A.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},x=function(e,t,r){var n,a=new c;return e._data instanceof c?(a.uncompressedSize=e._data.uncompressedSize,a.crc32=e._data.crc32,0===a.uncompressedSize||e.dir?(t=u.STORE,a.compressedContent="",a.crc32=0):e._data.compressionMethod===t.magic?a.compressedContent=e._data.getCompressedContent():(n=e._data.getContent(),a.compressedContent=t.compress(i.transformTo(t.compressInputType,n),r))):((n=g(e))&&0!==n.length&&!e.dir||(t=u.STORE,n=""),a.uncompressedSize=n.length,a.crc32=o(n),a.compressedContent=t.compress(i.transformTo(t.compressInputType,n),r)),a.compressedSize=a.compressedContent.length,a.compressionMethod=t.magic,a},I=function(e,t,r,n,s,l){r.compressedContent;var u,c,f,p,d=l!==h.utf8encode,y=i.transformTo("string",l(t.name)),g=i.transformTo("string",h.utf8encode(t.name)),m=t.comment||"",_=i.transformTo("string",l(m)),A=i.transformTo("string",h.utf8encode(m)),b=g.length!==t.name.length,w=A.length!==m.length,E=t.options,x="",I="",S="";f=t._initialMetadata.dir!==t.dir?t.dir:E.dir,p=t._initialMetadata.date!==t.date?t.date:E.date;var C,P,O,T=0,M=0;f&&(T|=16),"UNIX"===s?(M=798,T|=(C=t.unixPermissions,P=f,O=C,C||(O=P?16893:33204),(65535&O)<<16)):(M=20,T|=63&(t.dosPermissions||0)),u=p.getHours(),u<<=6,u|=p.getMinutes(),u<<=5,u|=p.getSeconds()/2,c=p.getFullYear()-1980,c<<=4,c|=p.getMonth()+1,c<<=5,c|=p.getDate(),b&&(I=v(1,1)+v(o(y),4)+g,x+="up"+v(I.length,2)+I),w&&(S=v(1,1)+v(this.crc32(_),4)+A,x+="uc"+v(S.length,2)+S);var k="";return k+="\n\0",k+=d||!b&&!w?"\0\0":"\0\b",k+=r.compressionMethod,k+=v(u,2),k+=v(c,2),k+=v(r.crc32,4),k+=v(r.compressedSize,4),k+=v(r.uncompressedSize,4),k+=v(y.length,2),k+=v(x.length,2),{fileRecord:a.LOCAL_FILE_HEADER+k+y+x,dirRecord:a.CENTRAL_FILE_HEADER+v(M,2)+k+v(_.length,2)+"\0\0\0\0"+v(T,4)+v(n,4)+y+x+_,compressedObject:r}},S={load:function(e,t){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,r,n,o,a=[];for(t in this.files)n=this.files[t],o=new _(n.name,n._data,i.extend(n.options)),r=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(r,o)&&a.push(o);return a},file:function(e,t,r){if(1===arguments.length){if(i.isRegExp(e)){var n=e;return this.filter((function(e,t){return!t.dir&&n.test(e)}))}return this.filter((function(t,r){return!r.dir&&t===e}))[0]||null}return e=this.root+e,A.call(this,e,t,r),this},folder:function(e){if(!e)return this;if(i.isRegExp(e))return this.filter((function(t,r){return r.dir&&e.test(t)}));var t=this.root+e,r=E.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter((function(t,r){return r.name.slice(0,e.length)===e})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(e){e=i.extend(e||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:h.utf8encode}),i.checkSupport(e.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var t,r,n=[],o=0,s=0,c=i.transformTo("string",e.encodeFileName(e.comment||this.comment||""));for(var f in this.files){var y=this.files[f],g=y.options.compression||e.compression.toUpperCase(),m=u[g];if(!m)throw new Error(g+" is not a valid compression method !");var _=y.options.compressionOptions||e.compressionOptions||{},A=x.call(this,y,m,_),b=I.call(this,f,y,A,o,e.platform,e.encodeFileName);o+=b.fileRecord.length+A.compressedSize,s+=b.dirRecord.length,n.push(b)}var w;w=a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+v(n.length,2)+v(n.length,2)+v(s,4)+v(o,4)+v(c.length,2)+c;var E=e.type.toLowerCase();for(t="uint8array"===E||"arraybuffer"===E||"blob"===E||"nodebuffer"===E?new d(o+s+w.length):new p(o+s+w.length),r=0;r<n.length;r++)t.append(n[r].fileRecord),t.append(n[r].compressedObject.compressedContent);for(r=0;r<n.length;r++)t.append(n[r].dirRecord);t.append(w);var S=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return i.transformTo(e.type.toLowerCase(),S);case"blob":return i.arrayBuffer2Blob(i.transformTo("arraybuffer",S),e.mimeType);case"base64":return e.base64?l.encode(S):S;default:return S}},crc32:function(e,t){return o(e,t)},utf8encode:function(e){return i.transformTo("string",h.utf8encode(e))},utf8decode:function(e){return h.utf8decode(e)}};e.exports=S},71141:(e,t)=>{"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\b"},69001:(e,t,r)=>{"use strict";var n=r(32640),i=r(58910);function o(e,t){this.data=e,t||(this.data=i.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}o.prototype=new n,o.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},o.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},o.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=o},86175:(e,t,r)=>{"use strict";var n=r(58910),i=function(){this.data=[]};i.prototype={append:function(e){e=n.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},e.exports=i},53790:(e,t)=>{"use strict";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer="undefined"!=typeof Buffer,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);n.append(r),t.blob=0===n.getBlob("application/zip").size}catch(e){t.blob=!1}}}},82123:(e,t,r)=>{"use strict";var n=r(15946);function i(e){e&&(this.data=e,this.length=this.data.length,this.index=0,this.zero=0)}i.prototype=new n,i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},e.exports=i},6378:(e,t,r)=>{"use strict";var n=r(58910),i=function(e){this.data=new Uint8Array(e),this.index=0};i.prototype={append:function(e){0!==e.length&&(e=n.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},e.exports=i},83600:(e,t,r)=>{"use strict";for(var n=r(58910),i=r(53790),o=r(49939),a=new Array(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;a[254]=a[254]=1;var l=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t},u=function(e){var t,r,i,o,s=e.length,l=new Array(2*s);for(r=0,t=0;t<s;)if((i=e[t++])<128)l[r++]=i;else if((o=a[i])>4)l[r++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&t<s;)i=i<<6|63&e[t++],o--;o>1?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),n.applyFromCharCode(l)};t.utf8encode=function(e){return i.nodebuffer?o(e,"utf-8"):function(e){var t,r,n,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),a=0,o=0;a<l;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t}(e)},t.utf8decode=function(e){if(i.nodebuffer)return n.transformTo("nodebuffer",e).toString("utf-8");for(var t=[],r=0,o=(e=n.transformTo(i.uint8array?"uint8array":"array",e)).length;r<o;){var a=l(e,Math.min(r+65536,o));i.uint8array?t.push(u(e.subarray(r,a))):t.push(u(e.slice(r,a))),r=a}return t.join("")}},58910:(e,t,r)=>{"use strict";var n=r(53790),i=r(61678),o=r(49939);function a(e){return e}function s(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}function l(e){var r=65536,n=[],i=e.length,a=t.getTypeOf(e),s=0,l=!0;try{switch(a){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,o(0))}}catch(e){l=!1}if(!l){for(var u="",c=0;c<e.length;c++)u+=String.fromCharCode(e[c]);return u}for(;s<i&&r>1;)try{"array"===a||"nodebuffer"===a?n.push(String.fromCharCode.apply(null,e.slice(s,Math.min(s+r,i)))):n.push(String.fromCharCode.apply(null,e.subarray(s,Math.min(s+r,i)))),s+=r}catch(e){r=Math.floor(r/2)}return n.join("")}function u(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}t.string2binary=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r));return t},t.arrayBuffer2Blob=function(e,r){t.checkSupport("blob"),r=r||"application/zip";try{return new Blob([e],{type:r})}catch(t){try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return n.append(e),n.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}},t.applyFromCharCode=l;var c={};c.string={string:a,array:function(e){return s(e,new Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return s(e,new Uint8Array(e.length))},nodebuffer:function(e){return s(e,o(e.length))}},c.array={string:l,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o(e)}},c.arraybuffer={string:function(e){return l(new Uint8Array(e))},array:function(e){return u(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o(new Uint8Array(e))}},c.uint8array={string:l,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return o(e)}},c.nodebuffer={string:l,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:a},t.transformTo=function(e,r){if(r||(r=""),!e)return r;t.checkSupport(e);var n=t.getTypeOf(r);return c[n][e](r)},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&o.test(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this browser")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},t.findCompression=function(e){for(var t in i)if(i.hasOwnProperty(t)&&i[t].magic===e)return i[t];return null},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r}},6624:(e,t,r)=>{"use strict";var n=r(69001),i=r(60696),o=r(82123),a=r(15946),s=r(58910),l=r(71141),u=r(39392),c=r(53790);r(17132);function f(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}f.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+s.pretty(t)+", expected "+s.pretty(e)+")")},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=c.uint8array?"uint8array":"array",r=s.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readString(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===l.CENTRAL_FILE_HEADER;)(e=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(e<0)throw!this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory");this.reader.setIndex(e);var t=e;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(n>0)this.isSignature(t,l.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){var t=s.getTypeOf(e);if(s.checkSupport(t),"string"!==t||c.uint8array)if("nodebuffer"===t)this.reader=new i(e);else if(c.uint8array)this.reader=new o(s.transformTo("uint8array",e));else{if(!c.array)throw new Error("Unexpected error: unsupported type '"+t+"'");this.reader=new a(s.transformTo("array",e))}else this.reader=new n(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=f},39392:(e,t,r)=>{"use strict";var n=r(69001),i=r(58910),o=r(37326),a=r(17132),s=r(53790);function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},prepareCompressedContent:function(e,t,r){return function(){var n=e.index;e.setIndex(t);var i=e.readData(r);return e.setIndex(n),i}},prepareContent:function(e,t,r,n,o){return function(){var e=i.transformTo(n.uncompressInputType,this.getCompressedContent()),t=n.uncompress(e);if(t.length!==o)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(t=i.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");if(this.decompressed=new o,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=i.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readInt(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readData(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=new n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index;for(this.extraFields=this.extraFields||{};e.index<i+this.extraFieldsLength;)t=e.readInt(2),r=e.readInt(2),n=e.readString(r),this.extraFields[t]={id:t,length:r,value:n}},handleUTF8:function(){var e=s.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new n(e.value);return 1!==t.readInt(1)||a.crc32(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new n(e.value);return 1!==t.readInt(1)||a.crc32(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readString(e.length-5))}return null}},e.exports=l},67197:(e,t)=>{var r,n,i,o,a,s,l,u,c,f,h,p,d;n={defaultNoDataValue:-34027999387901484e22,decode:function(e,t){var r=(t=t||{}).encodedMaskData||null===t.encodedMaskData,l=s(e,t.inputOffset||0,r),u=null!==t.noDataValue?t.noDataValue:n.defaultNoDataValue,c=i(l,t.pixelType||Float32Array,t.encodedMaskData,u,t.returnMask),f={width:l.width,height:l.height,pixelData:c.resultPixels,minValue:c.minValue,maxValue:l.pixels.maxValue,noDataValue:u};return c.resultMask&&(f.maskData=c.resultMask),t.returnEncodedMask&&l.mask&&(f.encodedMaskData=l.mask.bitset?l.mask.bitset:null),t.returnFileInfo&&(f.fileInfo=o(l),t.computeUsedBitDepths&&(f.fileInfo.bitDepths=a(l))),f}},i=function(e,t,r,n,i){var o,a,s,u=0,c=e.pixels.numBlocksX,f=e.pixels.numBlocksY,h=Math.floor(e.width/c),p=Math.floor(e.height/f),d=2*e.maxZError,y=Number.MAX_VALUE;r=r||(e.mask?e.mask.bitset:null),a=new t(e.width*e.height),i&&r&&(s=new Uint8Array(e.width*e.height));for(var g,m,_=new Float32Array(h*p),v=0;v<=f;v++){var A=v!==f?p:e.height%f;if(0!==A)for(var b=0;b<=c;b++){var w=b!==c?h:e.width%c;if(0!==w){var E,x,I,S,C=v*e.width*p+b*h,P=e.width-w,O=e.pixels.blocks[u];if(O.encoding<2?(0===O.encoding?E=O.rawData:(l(O.stuffedData,O.bitsPerPixel,O.numValidPixels,O.offset,d,_,e.pixels.maxValue),E=_),x=0):I=2===O.encoding?0:O.offset,r)for(m=0;m<A;m++){for(7&C&&(S=r[C>>3],S<<=7&C),g=0;g<w;g++)7&C||(S=r[C>>3]),128&S?(s&&(s[C]=1),y=y>(o=O.encoding<2?E[x++]:I)?o:y,a[C++]=o):(s&&(s[C]=0),a[C++]=n),S<<=1;C+=P}else if(O.encoding<2)for(m=0;m<A;m++){for(g=0;g<w;g++)y=y>(o=E[x++])?o:y,a[C++]=o;C+=P}else for(y=y>I?I:y,m=0;m<A;m++){for(g=0;g<w;g++)a[C++]=I;C+=P}if(1===O.encoding&&x!==O.numValidPixels)throw"Block and Mask do not match";u++}}}return{resultPixels:a,resultMask:s,minValue:y}},o=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},a=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},n=0;n<t;n++){var i=e.pixels.blocks[n];0===i.encoding?r.float32=!0:1===i.encoding?r[i.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},s=function(e,t,r){var n={},i=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,i),"CntZImage"!==n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;t+=10;var o=new DataView(e,t,24);if(n.fileVersion=o.getInt32(0,!0),n.imageType=o.getInt32(4,!0),n.height=o.getUint32(8,!0),n.width=o.getUint32(12,!0),n.maxZError=o.getFloat64(16,!0),t+=24,!r)if(o=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=o.getUint32(0,!0),n.mask.numBlocksX=o.getUint32(4,!0),n.mask.numBytes=o.getUint32(8,!0),n.mask.maxValue=o.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var a=new Uint8Array(Math.ceil(n.width*n.height/8)),s=(o=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),l=2,u=0;do{if(s>0)for(;s--;)a[u++]=o.getUint8(l++);else{var c=o.getUint8(l++);for(s=-s;s--;)a[u++]=c}s=o.getInt16(l,!0),l+=2}while(l<n.mask.numBytes);if(-32768!==s||u<a.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=a,t+=n.mask.numBytes}else n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue||(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));o=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=o.getUint32(0,!0),n.pixels.numBlocksX=o.getUint32(4,!0),n.pixels.numBytes=o.getUint32(8,!0),n.pixels.maxValue=o.getFloat32(12,!0),t+=16;var f=n.pixels.numBlocksX,h=n.pixels.numBlocksY,p=f+(n.width%f>0?1:0),d=h+(n.height%h>0?1:0);n.pixels.blocks=new Array(p*d);for(var y=0,g=0;g<d;g++)for(var m=0;m<p;m++){var _=0,v=e.byteLength-t;o=new DataView(e,t,Math.min(10,v));var A={};n.pixels.blocks[y++]=A;var b=o.getUint8(0);if(_++,A.encoding=63&b,A.encoding>3)throw"Invalid block encoding ("+A.encoding+")";if(2!==A.encoding){if(0!==b&&2!==b){if(b>>=6,A.offsetType=b,2===b)A.offset=o.getInt8(1),_++;else if(1===b)A.offset=o.getInt16(1,!0),_+=2;else{if(0!==b)throw"Invalid block offset type";A.offset=o.getFloat32(1,!0),_+=4}if(1===A.encoding)if(b=o.getUint8(_),_++,A.bitsPerPixel=63&b,b>>=6,A.numValidPixelsType=b,2===b)A.numValidPixels=o.getUint8(_),_++;else if(1===b)A.numValidPixels=o.getUint16(_,!0),_+=2;else{if(0!==b)throw"Invalid valid pixel count type";A.numValidPixels=o.getUint32(_,!0),_+=4}}var w;if(t+=_,3!==A.encoding)if(0===A.encoding){var E=(n.pixels.numBytes-1)/4;if(E!==Math.floor(E))throw"uncompressed block has invalid length";w=new ArrayBuffer(4*E),new Uint8Array(w).set(new Uint8Array(e,t,4*E));var x=new Float32Array(w);A.rawData=x,t+=4*E}else if(1===A.encoding){var I=Math.ceil(A.numValidPixels*A.bitsPerPixel/8),S=Math.ceil(I/4);w=new ArrayBuffer(4*S),new Uint8Array(w).set(new Uint8Array(e,t,I)),A.stuffedData=new Uint32Array(w),t+=I}}else t++}return n.eofOffset=t,n},l=function(e,t,r,n,i,o,a){var s,l,u,c=(1<<t)-1,f=0,h=0,p=Math.ceil((a-n)/i),d=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*d,s=0;s<r;s++){if(0===h&&(u=e[f++],h=32),h>=t)l=u>>>h-t&c,h-=t;else{var y=t-h;l=(u&c)<<y&c,l+=(u=e[f++])>>>(h=32-y)}o[s]=l<p?n+l*i:a}return o},f=n,h=function(){"use strict";var e=function(e,t,r,n,i,o,a,s){var l,u,c,f,h,p=(1<<r)-1,d=0,y=0,g=4*e.length-Math.ceil(r*n/8);if(e[e.length-1]<<=8*g,i)for(l=0;l<n;l++)0===y&&(c=e[d++],y=32),y>=r?(u=c>>>y-r&p,y-=r):(u=(c&p)<<(f=r-y)&p,u+=(c=e[d++])>>>(y=32-f)),t[l]=i[u];else for(h=Math.ceil((s-o)/a),l=0;l<n;l++)0===y&&(c=e[d++],y=32),y>=r?(u=c>>>y-r&p,y-=r):(u=(c&p)<<(f=r-y)&p,u+=(c=e[d++])>>>(y=32-f)),t[l]=u<h?o+u*a:s},t=function(e,t,r,n,i,o){var a,s=(1<<t)-1,l=0,u=0,c=0,f=0,h=0,p=[],d=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*d;var y=Math.ceil((o-n)/i);for(u=0;u<r;u++)0===f&&(a=e[l++],f=32),f>=t?(h=a>>>f-t&s,f-=t):(h=(a&s)<<(c=t-f)&s,h+=(a=e[l++])>>>(f=32-c)),p[u]=h<y?n+h*i:o;return p.unshift(n),p},r=function(e,t,r,n,i,o,a,s){var l,u,c,f,h=(1<<r)-1,p=0,d=0,y=0;if(i)for(l=0;l<n;l++)0===d&&(c=e[p++],d=32,y=0),d>=r?(u=c>>>y&h,d-=r,y+=r):(u=c>>>y&h,d=32-(f=r-d),u|=((c=e[p++])&(1<<f)-1)<<r-f,y=f),t[l]=i[u];else{var g=Math.ceil((s-o)/a);for(l=0;l<n;l++)0===d&&(c=e[p++],d=32,y=0),d>=r?(u=c>>>y&h,d-=r,y+=r):(u=c>>>y&h,d=32-(f=r-d),u|=((c=e[p++])&(1<<f)-1)<<r-f,y=f),t[l]=u<g?o+u*a:s}return t},n=function(e,t,r,n,i,o){var a,s=(1<<t)-1,l=0,u=0,c=0,f=0,h=0,p=0,d=[],y=Math.ceil((o-n)/i);for(u=0;u<r;u++)0===f&&(a=e[l++],f=32,p=0),f>=t?(h=a>>>p&s,f-=t,p+=t):(h=a>>>p&s,f=32-(c=t-f),h|=((a=e[l++])&(1<<c)-1)<<t-c,p=c),d[u]=h<y?n+h*i:o;return d.unshift(n),d},i=function(e,t,r,n){var i,o,a,s,l=(1<<r)-1,u=0,c=0,f=4*e.length-Math.ceil(r*n/8);for(e[e.length-1]<<=8*f,i=0;i<n;i++)0===c&&(a=e[u++],c=32),c>=r?(o=a>>>c-r&l,c-=r):(o=(a&l)<<(s=r-c)&l,o+=(a=e[u++])>>>(c=32-s)),t[i]=o;return t},o=function(e,t,r,n){var i,o,a,s,l=(1<<r)-1,u=0,c=0,f=0;for(i=0;i<n;i++)0===c&&(a=e[u++],c=32,f=0),c>=r?(o=a>>>f&l,c-=r,f+=r):(o=a>>>f&l,c=32-(s=r-c),o|=((a=e[u++])&(1<<s)-1)<<r-s,f=s),t[i]=o;return t},a={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,n=e.length,i=Math.floor(n/2),o=0;i;){var a=i>=359?359:i;i-=a;do{t+=e[o++]<<8,r+=t+=e[o++]}while(--a);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&n&&(r+=t+=e[o]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,n=new Uint8Array(e,r,6),i={};if(i.fileIdentifierString=String.fromCharCode.apply(null,n),0!==i.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+i.fileIdentifierString;r+=6;var o,a=new DataView(e,r,8),s=a.getInt32(0,!0);if(i.fileVersion=s,r+=4,s>=3&&(i.checksum=a.getUint32(4,!0),r+=4),a=new DataView(e,r,12),i.height=a.getUint32(0,!0),i.width=a.getUint32(4,!0),r+=8,s>=4?(i.numDims=a.getUint32(8,!0),r+=4):i.numDims=1,a=new DataView(e,r,40),i.numValidPixel=a.getUint32(0,!0),i.microBlockSize=a.getInt32(4,!0),i.blobSize=a.getInt32(8,!0),i.imageType=a.getInt32(12,!0),i.maxZError=a.getFloat64(16,!0),i.zMin=a.getFloat64(24,!0),i.zMax=a.getFloat64(32,!0),r+=40,t.headerInfo=i,t.ptr=r,s>=3&&(o=s>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,r-o,i.blobSize-14))!==i.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,n=this.getDataTypeArray(r.imageType),i=r.numDims*this.getDataTypeSize(r.imageType),o=this.readSubArray(e,t.ptr,n,i),a=this.readSubArray(e,t.ptr+i,n,i);t.ptr+=2*i;var s,l=!0;for(s=0;s<r.numDims;s++)if(o[s]!==a[s]){l=!1;break}return r.minValues=o,r.maxValues=a,l},readSubArray:function(e,t,r,n){var i;if(r===Uint8Array)i=new Uint8Array(e,t,n);else{var o=new ArrayBuffer(n);new Uint8Array(o).set(new Uint8Array(e,t,n)),i=new r(o)}return i},readMask:function(e,t){var r,n,i=t.ptr,o=t.headerInfo,a=o.width*o.height,s=o.numValidPixel,l=new DataView(e,i,4),u={};if(u.numBytes=l.getUint32(0,!0),i+=4,(0===s||a===s)&&0!==u.numBytes)throw"invalid mask";if(0===s)r=new Uint8Array(Math.ceil(a/8)),u.bitset=r,n=new Uint8Array(a),t.pixels.resultMask=n,i+=u.numBytes;else if(u.numBytes>0){r=new Uint8Array(Math.ceil(a/8));var c=(l=new DataView(e,i,u.numBytes)).getInt16(0,!0),f=2,h=0,p=0;do{if(c>0)for(;c--;)r[h++]=l.getUint8(f++);else for(p=l.getUint8(f++),c=-c;c--;)r[h++]=p;c=l.getInt16(f,!0),f+=2}while(f<u.numBytes);if(-32768!==c||h<r.length)throw"Unexpected end of mask RLE encoding";n=new Uint8Array(a);var d=0,y=0;for(y=0;y<a;y++)7&y?(d=r[y>>3],d<<=7&y):d=r[y>>3],128&d&&(n[y]=1);t.pixels.resultMask=n,u.bitset=r,i+=u.numBytes}return t.ptr=i,t.mask=u,!0},readDataOneSweep:function(e,t,r,n){var i,o=t.ptr,s=t.headerInfo,l=s.numDims,u=s.width*s.height,c=s.imageType,f=s.numValidPixel*a.getDataTypeSize(c)*l,h=t.pixels.resultMask;if(r===Uint8Array)i=new Uint8Array(e,o,f);else{var p=new ArrayBuffer(f);new Uint8Array(p).set(new Uint8Array(e,o,f)),i=new r(p)}if(i.length===u*l)t.pixels.resultPixels=n?a.swapDimensionOrder(i,u,l,r,!0):i;else{t.pixels.resultPixels=new r(u*l);var d=0,y=0,g=0,m=0;if(l>1){if(n){for(y=0;y<u;y++)if(h[y])for(m=y,g=0;g<l;g++,m+=u)t.pixels.resultPixels[m]=i[d++]}else for(y=0;y<u;y++)if(h[y])for(m=y*l,g=0;g<l;g++)t.pixels.resultPixels[m+g]=i[d++]}else for(y=0;y<u;y++)h[y]&&(t.pixels.resultPixels[y]=i[d++])}return o+=f,t.ptr=o,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,n=new DataView(e,t.ptr,16);if(t.ptr+=16,n.getInt32(0,!0)<2)throw"unsupported Huffman version";var i=n.getInt32(4,!0),o=n.getInt32(8,!0),l=n.getInt32(12,!0);if(o>=l)return!1;var u=new Uint32Array(l-o);a.decodeBits(e,t,u);var c,f,h,p,d=[];for(c=o;c<l;c++)d[f=c-(c<i?0:i)]={first:u[c-o],second:null};var y=e.byteLength-t.ptr,g=Math.ceil(y/4),m=new ArrayBuffer(4*g);new Uint8Array(m).set(new Uint8Array(e,t.ptr,y));var _,v=new Uint32Array(m),A=0,b=0;for(_=v[0],c=o;c<l;c++)(p=d[f=c-(c<i?0:i)].first)>0&&(d[f].second=_<<A>>>32-p,32-A>=p?32===(A+=p)&&(A=0,_=v[++b]):(A+=p-32,_=v[++b],d[f].second|=_>>>32-A));var w=0,E=0,x=new s;for(c=0;c<d.length;c++)void 0!==d[c]&&(w=Math.max(w,d[c].first));E=w>=r?r:w;var I,S,C,P,O,T=[];for(c=o;c<l;c++)if((p=d[f=c-(c<i?0:i)].first)>0)if(I=[p,f],p<=E)for(S=d[f].second<<E-p,C=1<<E-p,h=0;h<C;h++)T[S|h]=I;else for(S=d[f].second,O=x,P=p-1;P>=0;P--)S>>>P&1?(O.right||(O.right=new s),O=O.right):(O.left||(O.left=new s),O=O.left),0!==P||O.val||(O.val=I[1]);return{decodeLut:T,numBitsLUTQick:E,numBitsLUT:w,tree:x,stuffedData:v,srcPtr:b,bitPos:A}},readHuffman:function(e,t,r,n){var i,o,s,l,u,c,f,h,p,d=t.headerInfo.numDims,y=t.headerInfo.height,g=t.headerInfo.width,m=g*y,_=this.readHuffmanTree(e,t),v=_.decodeLut,A=_.tree,b=_.stuffedData,w=_.srcPtr,E=_.bitPos,x=_.numBitsLUTQick,I=_.numBitsLUT,S=0===t.headerInfo.imageType?128:0,C=t.pixels.resultMask,P=0;E>0&&(w++,E=0);var O,T=b[w],M=1===t.encodeMode,k=new r(m*d),R=k;if(d<2||M){for(O=0;O<d;O++)if(d>1&&(R=new r(k.buffer,m*O,m),P=0),t.headerInfo.numValidPixel===g*y)for(h=0,c=0;c<y;c++)for(f=0;f<g;f++,h++){if(o=0,u=l=T<<E>>>32-x,32-E<x&&(u=l|=b[w+1]>>>64-E-x),v[u])o=v[u][1],E+=v[u][0];else for(u=l=T<<E>>>32-I,32-E<I&&(u=l|=b[w+1]>>>64-E-I),i=A,p=0;p<I;p++)if(!(i=l>>>I-p-1&1?i.right:i.left).left&&!i.right){o=i.val,E=E+p+1;break}E>=32&&(E-=32,T=b[++w]),s=o-S,M?(s+=f>0?P:c>0?R[h-g]:P,s&=255,R[h]=s,P=s):R[h]=s}else for(h=0,c=0;c<y;c++)for(f=0;f<g;f++,h++)if(C[h]){if(o=0,u=l=T<<E>>>32-x,32-E<x&&(u=l|=b[w+1]>>>64-E-x),v[u])o=v[u][1],E+=v[u][0];else for(u=l=T<<E>>>32-I,32-E<I&&(u=l|=b[w+1]>>>64-E-I),i=A,p=0;p<I;p++)if(!(i=l>>>I-p-1&1?i.right:i.left).left&&!i.right){o=i.val,E=E+p+1;break}E>=32&&(E-=32,T=b[++w]),s=o-S,M?(f>0&&C[h-1]?s+=P:c>0&&C[h-g]?s+=R[h-g]:s+=P,s&=255,R[h]=s,P=s):R[h]=s}}else for(h=0,c=0;c<y;c++)for(f=0;f<g;f++)if(h=c*g+f,!C||C[h])for(O=0;O<d;O++,h+=m){if(o=0,u=l=T<<E>>>32-x,32-E<x&&(u=l|=b[w+1]>>>64-E-x),v[u])o=v[u][1],E+=v[u][0];else for(u=l=T<<E>>>32-I,32-E<I&&(u=l|=b[w+1]>>>64-E-I),i=A,p=0;p<I;p++)if(!(i=l>>>I-p-1&1?i.right:i.left).left&&!i.right){o=i.val,E=E+p+1;break}E>=32&&(E-=32,T=b[++w]),s=o-S,R[h]=s}t.ptr=t.ptr+4*(w+1)+(E>0?4:0),t.pixels.resultPixels=k,d>1&&!n&&(t.pixels.resultPixels=a.swapDimensionOrder(k,m,d,r))},decodeBits:function(a,s,l,u,c){var f=s.headerInfo,h=f.fileVersion,p=0,d=a.byteLength-s.ptr>=5?5:a.byteLength-s.ptr,y=new DataView(a,s.ptr,d),g=y.getUint8(0);p++;var m=g>>6,_=0===m?4:3-m,v=(32&g)>0,A=31&g,b=0;if(1===_)b=y.getUint8(p),p++;else if(2===_)b=y.getUint16(p,!0),p+=2;else{if(4!==_)throw"Invalid valid pixel count type";b=y.getUint32(p,!0),p+=4}var w,E,x,I,S,C,P,O,T,M=2*f.maxZError,k=f.numDims>1?f.maxValues[c]:f.zMax;if(v){for(s.counter.lut++,O=y.getUint8(p),p++,I=Math.ceil((O-1)*A/8),S=Math.ceil(I/4),E=new ArrayBuffer(4*S),x=new Uint8Array(E),s.ptr+=p,x.set(new Uint8Array(a,s.ptr,I)),P=new Uint32Array(E),s.ptr+=I,T=0;O-1>>>T;)T++;I=Math.ceil(b*T/8),S=Math.ceil(I/4),E=new ArrayBuffer(4*S),(x=new Uint8Array(E)).set(new Uint8Array(a,s.ptr,I)),w=new Uint32Array(E),s.ptr+=I,C=h>=3?n(P,A,O-1,u,M,k):t(P,A,O-1,u,M,k),h>=3?r(w,l,T,b,C):e(w,l,T,b,C)}else s.counter.bitstuffer++,T=A,s.ptr+=p,T>0&&(I=Math.ceil(b*T/8),S=Math.ceil(I/4),E=new ArrayBuffer(4*S),(x=new Uint8Array(E)).set(new Uint8Array(a,s.ptr,I)),w=new Uint32Array(E),s.ptr+=I,h>=3?null==u?o(w,l,T,b):r(w,l,T,b,!1,u,M,k):null==u?i(w,l,T,b):e(w,l,T,b,!1,u,M,k))},readTiles:function(e,t,r,n){var i=t.headerInfo,o=i.width,s=i.height,l=o*s,u=i.microBlockSize,c=i.imageType,f=a.getDataTypeSize(c),h=Math.ceil(o/u),p=Math.ceil(s/u);t.pixels.numBlocksY=p,t.pixels.numBlocksX=h,t.pixels.ptr=0;var d,y,g,m,_,v,A,b,w,E,x=0,I=0,S=0,C=0,P=0,O=0,T=0,M=0,k=0,R=0,B=0,L=0,D=0,j=0,F=0,N=new r(u*u),Z=s%u||u,U=o%u||u,Q=i.numDims,G=t.pixels.resultMask,z=t.pixels.resultPixels,q=i.fileVersion>=5?14:15,V=i.zMax;for(S=0;S<p;S++)for(P=S!==p-1?u:Z,C=0;C<h;C++)for(R=S*o*u+C*u,B=o-(O=C!==h-1?u:U),b=0;b<Q;b++){if(Q>1?(E=z,R=S*o*u+C*u,z=new r(t.pixels.resultPixels.buffer,l*b*f,l),V=i.maxValues[b]):E=null,T=e.byteLength-t.ptr,y={},F=0,M=(d=new DataView(e,t.ptr,Math.min(10,T))).getUint8(0),F++,w=i.fileVersion>=5?4&M:0,k=M>>6&255,(M>>2&q)!=(C*u>>3&q))throw"integrity issue";if(w&&0===b)throw"integrity issue";if((_=3&M)>3)throw t.ptr+=F,"Invalid block encoding ("+_+")";if(2!==_)if(0===_){if(w)throw"integrity issue";if(t.counter.uncompressed++,t.ptr+=F,L=(L=P*O*f)<(D=e.byteLength-t.ptr)?L:D,g=new ArrayBuffer(L%f==0?L:L+f-L%f),new Uint8Array(g).set(new Uint8Array(e,t.ptr,L)),m=new r(g),j=0,G)for(x=0;x<P;x++){for(I=0;I<O;I++)G[R]&&(z[R]=m[j++]),R++;R+=B}else for(x=0;x<P;x++){for(I=0;I<O;I++)z[R++]=m[j++];R+=B}t.ptr+=j*f}else if(v=a.getDataTypeUsed(w&&c<6?4:c,k),A=a.getOnePixel(y,F,v,d),F+=a.getDataTypeSize(v),3===_)if(t.ptr+=F,t.counter.constantoffset++,G)for(x=0;x<P;x++){for(I=0;I<O;I++)G[R]&&(z[R]=w?Math.min(V,E[R]+A):A),R++;R+=B}else for(x=0;x<P;x++){for(I=0;I<O;I++)z[R]=w?Math.min(V,E[R]+A):A,R++;R+=B}else if(t.ptr+=F,a.decodeBits(e,t,N,A,b),F=0,w)if(G)for(x=0;x<P;x++){for(I=0;I<O;I++)G[R]&&(z[R]=N[F++]+E[R]),R++;R+=B}else for(x=0;x<P;x++){for(I=0;I<O;I++)z[R]=N[F++]+E[R],R++;R+=B}else if(G)for(x=0;x<P;x++){for(I=0;I<O;I++)G[R]&&(z[R]=N[F++]),R++;R+=B}else for(x=0;x<P;x++){for(I=0;I<O;I++)z[R++]=N[F++];R+=B}else{if(w)if(G)for(x=0;x<P;x++)for(I=0;I<O;I++)G[R]&&(z[R]=E[R]),R++;else for(x=0;x<P;x++)for(I=0;I<O;I++)z[R]=E[R],R++;t.counter.constant++,t.ptr+=F}}Q>1&&!n&&(t.pixels.resultPixels=a.swapDimensionOrder(t.pixels.resultPixels,l,Q,r))},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:a.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,t){var r=e.headerInfo.zMax,n=e.headerInfo.zMin,i=e.headerInfo.maxValues,o=e.headerInfo.numDims,a=e.headerInfo.height*e.headerInfo.width,s=0,l=0,u=0,c=e.pixels.resultMask,f=e.pixels.resultPixels;if(c)if(o>1){if(t)for(s=0;s<o;s++)for(u=s*a,r=i[s],l=0;l<a;l++)c[l]&&(f[u+l]=r);else for(l=0;l<a;l++)if(c[l])for(u=l*o,s=0;s<o;s++)f[u+o]=i[s]}else for(l=0;l<a;l++)c[l]&&(f[l]=r);else if(o>1&&n!==r)if(t)for(s=0;s<o;s++)for(u=s*a,r=i[s],l=0;l<a;l++)f[u+l]=r;else for(l=0;l<a;l++)for(u=l*o,s=0;s<o;s++)f[u+s]=i[s];else for(l=0;l<a*o;l++)f[l]=r},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:default:t=Float32Array;break;case 7:t=Float64Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:default:t="F32";break;case 7:t="F64"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=-17976931348623157e292&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=0===t?e:1===t?2:1;break;case 7:r=0===t?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,n){var i=0;switch(r){case 0:i=n.getInt8(t);break;case 1:i=n.getUint8(t);break;case 2:i=n.getInt16(t,!0);break;case 3:i=n.getUint16(t,!0);break;case 4:i=n.getInt32(t,!0);break;case 5:i=n.getUInt32(t,!0);break;case 6:i=n.getFloat32(t,!0);break;case 7:i=n.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return i},swapDimensionOrder:function(e,t,r,n,i){var o=0,a=0,s=0,l=0,u=e;if(r>1)if(u=new n(t*r),i)for(o=0;o<t;o++)for(l=o,s=0;s<r;s++,l+=t)u[l]=e[a++];else for(o=0;o<t;o++)for(l=o,s=0;s<r;s++,l+=t)u[a++]=e[l];return u}},s=function(e,t,r){this.val=e,this.left=t,this.right=r};return{decode:function(e,t){var r=(t=t||{}).noDataValue,n=0,i={};if(i.ptr=t.inputOffset||0,i.pixels={},a.readHeaderInfo(e,i)){var o=i.headerInfo,s=o.fileVersion,l=a.getDataTypeArray(o.imageType);if(s>5)throw"unsupported lerc version 2."+s;a.readMask(e,i),o.numValidPixel===o.width*o.height||i.pixels.resultMask||(i.pixels.resultMask=t.maskData);var u=o.width*o.height;i.pixels.resultPixels=new l(u*o.numDims),i.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var c,f=!t.returnPixelInterleavedDims;if(0!==o.numValidPixel)if(o.zMax===o.zMin)a.constructConstantSurface(i,f);else if(s>=4&&a.checkMinMaxRanges(e,i))a.constructConstantSurface(i,f);else{var h=new DataView(e,i.ptr,2),p=h.getUint8(0);if(i.ptr++,p)a.readDataOneSweep(e,i,l,f);else if(s>1&&o.imageType<=1&&Math.abs(o.maxZError-.5)<1e-5){var d=h.getUint8(1);if(i.ptr++,i.encodeMode=d,d>2||s<4&&d>1)throw"Invalid Huffman flag "+d;d?a.readHuffman(e,i,l,f):a.readTiles(e,i,l,f)}else a.readTiles(e,i,l,f)}i.eofOffset=i.ptr,t.inputOffset?(c=i.headerInfo.blobSize+t.inputOffset-i.ptr,Math.abs(c)>=1&&(i.eofOffset=t.inputOffset+i.headerInfo.blobSize)):(c=i.headerInfo.blobSize-i.ptr,Math.abs(c)>=1&&(i.eofOffset=i.headerInfo.blobSize));var y={width:o.width,height:o.height,pixelData:i.pixels.resultPixels,minValue:o.zMin,maxValue:o.zMax,validPixelCount:o.numValidPixel,dimCount:o.numDims,dimStats:{minValues:o.minValues,maxValues:o.maxValues},maskData:i.pixels.resultMask};if(i.pixels.resultMask&&a.isValidPixelValue(o.imageType,r)){var g=i.pixels.resultMask;for(n=0;n<u;n++)g[n]||(y.pixelData[n]=r);y.noDataValue=r}return i.noDataValue=r,t.returnFileInfo&&(y.fileInfo=a.formatFileInfo(i)),y}},getBandCount:function(e){for(var t=0,r=0,n={ptr:0,pixels:{}};r<e.byteLength-58;)a.readHeaderInfo(e,n),r+=n.headerInfo.blobSize,t++,n.ptr=r;return t}}}(),u=new ArrayBuffer(4),c=new Uint8Array(u),new Uint32Array(u)[0]=1,p=1===c[0],d={decode:function(e,t){if(!p)throw"Big endian system is not supported.";var r,n,i=(t=t||{}).inputOffset||0,o=new Uint8Array(e,i,10),a=String.fromCharCode.apply(null,o);if("CntZImage"===a.trim())r=f,n=1;else{if("Lerc2"!==a.substring(0,5))throw"Unexpected file identifier string: "+a;r=h,n=2}for(var s,l,u,c,d,y,g=0,m=e.byteLength-10,_=[],v={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]},A=0;i<m;){var b=r.decode(e,{inputOffset:i,encodedMaskData:s,maskData:u,returnMask:0===g,returnEncodedMask:0===g,returnFileInfo:!0,returnPixelInterleavedDims:t.returnPixelInterleavedDims,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null});i=b.fileInfo.eofOffset,u=b.maskData,0===g&&(s=b.encodedMaskData,v.width=b.width,v.height=b.height,v.dimCount=b.dimCount||1,v.pixelType=b.pixelType||b.fileInfo.pixelType,v.mask=u),n>1&&(u&&_.push(u),b.fileInfo.mask&&b.fileInfo.mask.numBytes>0&&A++),g++,v.pixels.push(b.pixelData),v.statistics.push({minValue:b.minValue,maxValue:b.maxValue,noDataValue:b.noDataValue,dimStats:b.dimStats})}if(n>1&&A>1){for(y=v.width*v.height,v.bandMasks=_,(u=new Uint8Array(y)).set(_[0]),c=1;c<_.length;c++)for(l=_[c],d=0;d<y;d++)u[d]=u[d]&l[d];v.maskData=u}return v}},void 0===(r=function(){return d}.apply(t,[]))||(e.exports=r)},43389:(e,t,r)=>{"use strict";var n=r(25705);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function c(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,t,r){n((function(){var n;try{n=t(r)}catch(t){return o.reject(e,t)}n===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var r=!1;function n(t){r||(r=!0,o.reject(e,t))}function i(t){r||(r=!0,o.resolve(e,t))}var a=d((function(){t(i,n)}));"error"===a.status&&n(a.value)}function d(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}e.exports=u,u.prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(r){return t.resolve(e()).then((function(){return r}))}),(function(r){return t.resolve(e()).then((function(){throw r}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(i);this.state!==l?f(r,this.state===s?e:t,this.outcome):this.queue.push(new c(r,e,t));return r},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var r=d(h,t);if("error"===r.status)return o.reject(e,r.value);var n=r.value;if(n)p(e,n);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},u.resolve=function(e){if(e instanceof this)return e;return o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var a=new Array(r),s=0,l=-1,u=new this(i);for(;++l<r;)c(e[l],l);return u;function c(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==r||n||(n=!0,o.resolve(u,a))}),(function(e){n||(n=!0,o.reject(u,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);var a=-1,s=new this(i);for(;++a<r;)l=e[a],t.resolve(l).then((function(e){n||(n=!0,o.resolve(s,e))}),(function(e){n||(n=!0,o.reject(s,e))}));var l;return s}},99591:(e,t,r)=>{"use strict";var n={};(0,r(24236).assign)(n,r(24555),r(78843),r(71619)),e.exports=n},24555:(e,t,r)=>{"use strict";var n=r(30405),i=r(24236),o=r(29373),a=r(48898),s=r(62292),l=Object.prototype.toString,u=0,c=-1,f=0,h=8;function p(e){if(!(this instanceof p))return new p(e);this.options=i.assign({level:c,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==u)throw new Error(a[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var d;if(d="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,d))!==u)throw new Error(a[r]);this._dict_set=!0}}function d(e,t){var r=new p(t);if(r.push(e,!0),r.err)throw r.msg||a[r.err];return r.result}p.prototype.push=function(e,t){var r,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(c),s.next_out=0,s.avail_out=c),1!==(r=n.deflate(s,a))&&r!==u)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===u):2!==a||(this.onEnd(u),s.avail_out=0,!0)},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=p,t.deflate=d,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,d(e,t)}},78843:(e,t,r)=>{"use strict";var n=r(27948),i=r(24236),o=r(29373),a=r(71619),s=r(48898),l=r(62292),u=r(42401),c=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,t.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);if(this.header=new u,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=n.inflateSetDictionary(this.strm,t.dictionary))!==a.Z_OK))throw new Error(s[r])}function h(e,t){var r=new f(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}f.prototype.push=function(e,t){var r,s,l,u,f,h=this.strm,p=this.options.chunkSize,d=this.options.dictionary,y=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(p),h.next_out=0,h.avail_out=p),(r=n.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&d&&(r=n.inflateSetDictionary(this.strm,d)),r===a.Z_BUF_ERROR&&!0===y&&(r=a.Z_OK,y=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&r!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(h.output,h.next_out),u=h.next_out-l,f=o.buf2string(h.output,l),h.next_out=u,h.avail_out=p-u,u&&i.arraySet(h.output,h.output,l,u,0),this.onData(f)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(y=!0)}while((h.avail_in>0||0===h.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),h.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=f,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},24236:(e,t)=>{"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,a;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},29373:(e,t,r)=>{"use strict";var n=r(24236),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function l(e,t){if(t<65534&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var r="",a=0;a<t;a++)r+=String.fromCharCode(e[a]);return r}a[254]=a[254]=1,t.string2buf=function(e){var t,r,i,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new n.Buf8(l),a=0,o=0;a<l;o++)55296==(64512&(r=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var t=new n.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t},t.buf2string=function(e,t){var r,n,i,o,s=t||e.length,u=new Array(2*s);for(n=0,r=0;r<s;)if((i=e[r++])<128)u[n++]=i;else if((o=a[i])>4)u[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&e[r++],o--;o>1?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return l(u,n)},t.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t}},66069:e=>{"use strict";e.exports=function(e,t,r,n){for(var i=65535&e,o=e>>>16&65535,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+t[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16}},71619:e=>{"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},2869:e=>{"use strict";var t=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,r,n,i){var o=t,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^r[s])];return~e}},30405:(e,t,r)=>{"use strict";var n,i=r(24236),o=r(10342),a=r(66069),s=r(2869),l=r(48898),u=0,c=4,f=0,h=-2,p=-1,d=4,y=2,g=8,m=9,_=286,v=30,A=19,b=2*_+1,w=15,E=3,x=258,I=x+E+1,S=42,C=103,P=113,O=666,T=1,M=2,k=3,R=4;function B(e,t){return e.msg=l[t],t}function L(e){return(e<<1)-(e>4?9:0)}function D(e){for(var t=e.length;--t>=0;)e[t]=0}function j(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(i.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function F(e,t){o._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,j(e.strm)}function N(e,t){e.pending_buf[e.pending++]=t}function Z(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function U(e,t){var r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-I?e.strstart-(e.w_size-I):0,u=e.window,c=e.w_mask,f=e.prev,h=e.strstart+x,p=u[o+a-1],d=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(r=t)+a]===d&&u[r+a-1]===p&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<h);if(n=x-(h-o),o=h-x,n>a){if(e.match_start=t,a=n,n>=s)break;p=u[o+a-1],d=u[o+a]}}}while((t=f[t&c])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead}function Q(e){var t,r,n,o,l,u,c,f,h,p,d=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-I)){i.arraySet(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=d?n-d:0}while(--r);t=r=d;do{n=e.prev[--t],e.prev[t]=n>=d?n-d:0}while(--r);o+=d}if(0===e.strm.avail_in)break;if(u=e.strm,c=e.window,f=e.strstart+e.lookahead,h=o,p=void 0,(p=u.avail_in)>h&&(p=h),r=0===p?0:(u.avail_in-=p,i.arraySet(c,u.input,u.next_in,p,f),1===u.state.wrap?u.adler=a(u.adler,c,p,f):2===u.state.wrap&&(u.adler=s(u.adler,c,p,f)),u.next_in+=p,u.total_in+=p,p),e.lookahead+=r,e.lookahead+e.insert>=E)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+E-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<E)););}while(e.lookahead<I&&0!==e.strm.avail_in)}function G(e,t){for(var r,n;;){if(e.lookahead<I){if(Q(e),e.lookahead<I&&t===u)return T;if(0===e.lookahead)break}if(r=0,e.lookahead>=E&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-I&&(e.match_length=U(e,r)),e.match_length>=E)if(n=o._tr_tally(e,e.strstart-e.match_start,e.match_length-E),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=E){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(F(e,!1),0===e.strm.avail_out))return T}return e.insert=e.strstart<E-1?e.strstart:E-1,t===c?(F(e,!0),0===e.strm.avail_out?k:R):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?T:M}function z(e,t){for(var r,n,i;;){if(e.lookahead<I){if(Q(e),e.lookahead<I&&t===u)return T;if(0===e.lookahead)break}if(r=0,e.lookahead>=E&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=E-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-I&&(e.match_length=U(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===E&&e.strstart-e.match_start>4096)&&(e.match_length=E-1)),e.prev_length>=E&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-E,n=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-E),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=E-1,e.strstart++,n&&(F(e,!1),0===e.strm.avail_out))return T}else if(e.match_available){if((n=o._tr_tally(e,0,e.window[e.strstart-1]))&&F(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return T}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<E-1?e.strstart:E-1,t===c?(F(e,!0),0===e.strm.avail_out?k:R):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?T:M}function q(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*b),this.dyn_dtree=new i.Buf16(2*(2*v+1)),this.bl_tree=new i.Buf16(2*(2*A+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(w+1),this.heap=new i.Buf16(2*_+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*_+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=y,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?S:P,e.adler=2===t.wrap?0:1,t.last_flush=u,o._tr_init(t),f):B(e,h)}function K(e){var t,r=W(e);return r===f&&((t=e.state).window_size=2*t.w_size,D(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=E-1,t.match_available=0,t.ins_h=0),r}function H(e,t,r,n,o,a){if(!e)return h;var s=1;if(t===p&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>m||r!==g||n<8||n>15||t<0||t>9||a<0||a>d)return B(e,h);8===n&&(n=9);var l=new V;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+E-1)/E),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=r,K(e)}n=[new q(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Q(e),0===e.lookahead&&t===u)return T;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,F(e,!1),0===e.strm.avail_out))return T;if(e.strstart-e.block_start>=e.w_size-I&&(F(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?k:R):(e.strstart>e.block_start&&(F(e,!1),e.strm.avail_out),T)})),new q(4,4,8,4,G),new q(4,5,16,8,G),new q(4,6,32,32,G),new q(4,4,16,16,z),new q(8,16,32,32,z),new q(8,16,128,128,z),new q(8,32,128,256,z),new q(32,128,258,1024,z),new q(32,258,258,4096,z)],t.deflateInit=function(e,t){return H(e,t,g,15,8,0)},t.deflateInit2=H,t.deflateReset=K,t.deflateResetKeep=W,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,f):h},t.deflate=function(e,t){var r,i,a,l;if(!e||!e.state||t>5||t<0)return e?B(e,h):h;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===O&&t!==c)return B(e,0===e.avail_out?-5:h);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===S)if(2===i.wrap)e.adler=0,N(i,31),N(i,139),N(i,8),i.gzhead?(N(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),N(i,255&i.gzhead.time),N(i,i.gzhead.time>>8&255),N(i,i.gzhead.time>>16&255),N(i,i.gzhead.time>>24&255),N(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),N(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(N(i,255&i.gzhead.extra.length),N(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(N(i,0),N(i,0),N(i,0),N(i,0),N(i,0),N(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),N(i,3),i.status=P);else{var p=g+(i.w_bits-8<<4)<<8;p|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=P,Z(i,p),0!==i.strstart&&(Z(i,e.adler>>>16),Z(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),j(e),a=i.pending,i.pending!==i.pending_buf_size));)N(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),j(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,N(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),j(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,N(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=C)}else i.status=C;if(i.status===C&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&j(e),i.pending+2<=i.pending_buf_size&&(N(i,255&e.adler),N(i,e.adler>>8&255),e.adler=0,i.status=P)):i.status=P),0!==i.pending){if(j(e),0===e.avail_out)return i.last_flush=-1,f}else if(0===e.avail_in&&L(t)<=L(r)&&t!==c)return B(e,-5);if(i.status===O&&0!==e.avail_in)return B(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==u&&i.status!==O){var d=2===i.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(Q(e),0===e.lookahead)){if(t===u)return T;break}if(e.match_length=0,r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(F(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?k:R):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?T:M}(i,t):3===i.strategy?function(e,t){for(var r,n,i,a,s=e.window;;){if(e.lookahead<=x){if(Q(e),e.lookahead<=x&&t===u)return T;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=E&&e.strstart>0&&(n=s[i=e.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=e.strstart+x;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);e.match_length=x-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=E?(r=o._tr_tally(e,1,e.match_length-E),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(F(e,!1),0===e.strm.avail_out))return T}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?k:R):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?T:M}(i,t):n[i.level].func(i,t);if(d!==k&&d!==R||(i.status=O),d===T||d===k)return 0===e.avail_out&&(i.last_flush=-1),f;if(d===M&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(D(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),j(e),0===e.avail_out))return i.last_flush=-1,f}return t!==c?f:i.wrap<=0?1:(2===i.wrap?(N(i,255&e.adler),N(i,e.adler>>8&255),N(i,e.adler>>16&255),N(i,e.adler>>24&255),N(i,255&e.total_in),N(i,e.total_in>>8&255),N(i,e.total_in>>16&255),N(i,e.total_in>>24&255)):(Z(i,e.adler>>>16),Z(i,65535&e.adler)),j(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?f:1)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==S&&69!==t&&73!==t&&91!==t&&t!==C&&t!==P&&t!==O?B(e,h):(e.state=null,t===P?B(e,-3):f):h},t.deflateSetDictionary=function(e,t){var r,n,o,s,l,u,c,p,d=t.length;if(!e||!e.state)return h;if(2===(s=(r=e.state).wrap)||1===s&&r.status!==S||r.lookahead)return h;for(1===s&&(e.adler=a(e.adler,t,d,0)),r.wrap=0,d>=r.w_size&&(0===s&&(D(r.head),r.strstart=0,r.block_start=0,r.insert=0),p=new i.Buf8(r.w_size),i.arraySet(p,t,d-r.w_size,r.w_size,0),t=p,d=r.w_size),l=e.avail_in,u=e.next_in,c=e.input,e.avail_in=d,e.next_in=0,e.input=t,Q(r);r.lookahead>=E;){n=r.strstart,o=r.lookahead-(E-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+E-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=E-1,Q(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=E-1,r.match_available=0,e.next_in=u,e.input=c,e.avail_in=l,r.wrap=s,f},t.deflateInfo="pako deflate (from Nodeca project)"},42401:e=>{"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},94264:e=>{"use strict";e.exports=function(e,t){var r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v,A,b,w,E,x,I,S;r=e.state,n=e.next_in,I=e.input,i=n+(e.avail_in-5),o=e.next_out,S=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=r.dmax,u=r.wsize,c=r.whave,f=r.wnext,h=r.window,p=r.hold,d=r.bits,y=r.lencode,g=r.distcode,m=(1<<r.lenbits)-1,_=(1<<r.distbits)-1;e:do{d<15&&(p+=I[n++]<<d,d+=8,p+=I[n++]<<d,d+=8),v=y[p&m];t:for(;;){if(p>>>=A=v>>>24,d-=A,0===(A=v>>>16&255))S[o++]=65535&v;else{if(!(16&A)){if(64&A){if(32&A){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}v=y[(65535&v)+(p&(1<<A)-1)];continue t}for(b=65535&v,(A&=15)&&(d<A&&(p+=I[n++]<<d,d+=8),b+=p&(1<<A)-1,p>>>=A,d-=A),d<15&&(p+=I[n++]<<d,d+=8,p+=I[n++]<<d,d+=8),v=g[p&_];;){if(p>>>=A=v>>>24,d-=A,16&(A=v>>>16&255)){if(w=65535&v,d<(A&=15)&&(p+=I[n++]<<d,(d+=8)<A&&(p+=I[n++]<<d,d+=8)),(w+=p&(1<<A)-1)>l){e.msg="invalid distance too far back",r.mode=30;break e}if(p>>>=A,d-=A,w>(A=o-a)){if((A=w-A)>c&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(E=0,x=h,0===f){if(E+=u-A,A<b){b-=A;do{S[o++]=h[E++]}while(--A);E=o-w,x=S}}else if(f<A){if(E+=u+f-A,(A-=f)<b){b-=A;do{S[o++]=h[E++]}while(--A);if(E=0,f<b){b-=A=f;do{S[o++]=h[E++]}while(--A);E=o-w,x=S}}}else if(E+=f-A,A<b){b-=A;do{S[o++]=h[E++]}while(--A);E=o-w,x=S}for(;b>2;)S[o++]=x[E++],S[o++]=x[E++],S[o++]=x[E++],b-=3;b&&(S[o++]=x[E++],b>1&&(S[o++]=x[E++]))}else{E=o-w;do{S[o++]=S[E++],S[o++]=S[E++],S[o++]=S[E++],b-=3}while(b>2);b&&(S[o++]=S[E++],b>1&&(S[o++]=S[E++]))}break}if(64&A){e.msg="invalid distance code",r.mode=30;break e}v=g[(65535&v)+(p&(1<<A)-1)]}}break}}while(n<i&&o<s);n-=b=d>>3,p&=(1<<(d-=b<<3))-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<s?s-o+257:257-(o-s),r.hold=p,r.bits=d}},27948:(e,t,r)=>{"use strict";var n=r(24236),i=r(66069),o=r(2869),a=r(94264),s=r(9241),l=1,u=2,c=0,f=-2,h=1,p=12,d=30,y=852,g=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(y),t.distcode=t.distdyn=new n.Buf32(g),t.sane=1,t.back=-1,c):f}function A(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,v(e)):f}function b(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?f:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,A(e))):f}function w(e,t){var r,n;return e?(n=new _,e.state=n,n.window=null,(r=b(e,t))!==c&&(e.state=null),r):f}var E,x,I=!0;function S(e){if(I){var t;for(E=new n.Buf32(512),x=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,E,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,x,0,e.work,{bits:5}),I=!1}e.lencode=E,e.lenbits=9,e.distcode=x,e.distbits=5}function C(e,t,r,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,t,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,t,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}t.inflateReset=A,t.inflateReset2=b,t.inflateResetKeep=v,t.inflateInit=function(e){return w(e,15)},t.inflateInit2=w,t.inflate=function(e,t){var r,y,g,_,v,A,b,w,E,x,I,P,O,T,M,k,R,B,L,D,j,F,N,Z,U=0,Q=new n.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return f;(r=e.state).mode===p&&(r.mode=13),v=e.next_out,g=e.output,b=e.avail_out,_=e.next_in,y=e.input,A=e.avail_in,w=r.hold,E=r.bits,x=A,I=b,F=c;e:for(;;)switch(r.mode){case h:if(0===r.wrap){r.mode=13;break}for(;E<16;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}if(2&r.wrap&&35615===w){r.check=0,Q[0]=255&w,Q[1]=w>>>8&255,r.check=o(r.check,Q,2,0),w=0,E=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&w)<<8)+(w>>8))%31){e.msg="incorrect header check",r.mode=d;break}if(8!=(15&w)){e.msg="unknown compression method",r.mode=d;break}if(E-=4,j=8+(15&(w>>>=4)),0===r.wbits)r.wbits=j;else if(j>r.wbits){e.msg="invalid window size",r.mode=d;break}r.dmax=1<<j,e.adler=r.check=1,r.mode=512&w?10:p,w=0,E=0;break;case 2:for(;E<16;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}if(r.flags=w,8!=(255&r.flags)){e.msg="unknown compression method",r.mode=d;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=d;break}r.head&&(r.head.text=w>>8&1),512&r.flags&&(Q[0]=255&w,Q[1]=w>>>8&255,r.check=o(r.check,Q,2,0)),w=0,E=0,r.mode=3;case 3:for(;E<32;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}r.head&&(r.head.time=w),512&r.flags&&(Q[0]=255&w,Q[1]=w>>>8&255,Q[2]=w>>>16&255,Q[3]=w>>>24&255,r.check=o(r.check,Q,4,0)),w=0,E=0,r.mode=4;case 4:for(;E<16;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}r.head&&(r.head.xflags=255&w,r.head.os=w>>8),512&r.flags&&(Q[0]=255&w,Q[1]=w>>>8&255,r.check=o(r.check,Q,2,0)),w=0,E=0,r.mode=5;case 5:if(1024&r.flags){for(;E<16;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}r.length=w,r.head&&(r.head.extra_len=w),512&r.flags&&(Q[0]=255&w,Q[1]=w>>>8&255,r.check=o(r.check,Q,2,0)),w=0,E=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((P=r.length)>A&&(P=A),P&&(r.head&&(j=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,y,_,P,j)),512&r.flags&&(r.check=o(r.check,y,P,_)),A-=P,_+=P,r.length-=P),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===A)break e;P=0;do{j=y[_+P++],r.head&&j&&r.length<65536&&(r.head.name+=String.fromCharCode(j))}while(j&&P<A);if(512&r.flags&&(r.check=o(r.check,y,P,_)),A-=P,_+=P,j)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===A)break e;P=0;do{j=y[_+P++],r.head&&j&&r.length<65536&&(r.head.comment+=String.fromCharCode(j))}while(j&&P<A);if(512&r.flags&&(r.check=o(r.check,y,P,_)),A-=P,_+=P,j)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;E<16;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}if(w!==(65535&r.check)){e.msg="header crc mismatch",r.mode=d;break}w=0,E=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=p;break;case 10:for(;E<32;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}e.adler=r.check=m(w),w=0,E=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=v,e.avail_out=b,e.next_in=_,e.avail_in=A,r.hold=w,r.bits=E,2;e.adler=r.check=1,r.mode=p;case p:if(5===t||6===t)break e;case 13:if(r.last){w>>>=7&E,E-=7&E,r.mode=27;break}for(;E<3;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}switch(r.last=1&w,E-=1,3&(w>>>=1)){case 0:r.mode=14;break;case 1:if(S(r),r.mode=20,6===t){w>>>=2,E-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=d}w>>>=2,E-=2;break;case 14:for(w>>>=7&E,E-=7&E;E<32;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",r.mode=d;break}if(r.length=65535&w,w=0,E=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(P=r.length){if(P>A&&(P=A),P>b&&(P=b),0===P)break e;n.arraySet(g,y,_,P,v),A-=P,_+=P,b-=P,v+=P,r.length-=P;break}r.mode=p;break;case 17:for(;E<14;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}if(r.nlen=257+(31&w),w>>>=5,E-=5,r.ndist=1+(31&w),w>>>=5,E-=5,r.ncode=4+(15&w),w>>>=4,E-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=d;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;E<3;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}r.lens[G[r.have++]]=7&w,w>>>=3,E-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,N={bits:r.lenbits},F=s(0,r.lens,0,19,r.lencode,0,r.work,N),r.lenbits=N.bits,F){e.msg="invalid code lengths set",r.mode=d;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;k=(U=r.lencode[w&(1<<r.lenbits)-1])>>>16&255,R=65535&U,!((M=U>>>24)<=E);){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}if(R<16)w>>>=M,E-=M,r.lens[r.have++]=R;else{if(16===R){for(Z=M+2;E<Z;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}if(w>>>=M,E-=M,0===r.have){e.msg="invalid bit length repeat",r.mode=d;break}j=r.lens[r.have-1],P=3+(3&w),w>>>=2,E-=2}else if(17===R){for(Z=M+3;E<Z;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}E-=M,j=0,P=3+(7&(w>>>=M)),w>>>=3,E-=3}else{for(Z=M+7;E<Z;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}E-=M,j=0,P=11+(127&(w>>>=M)),w>>>=7,E-=7}if(r.have+P>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=d;break}for(;P--;)r.lens[r.have++]=j}}if(r.mode===d)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=d;break}if(r.lenbits=9,N={bits:r.lenbits},F=s(l,r.lens,0,r.nlen,r.lencode,0,r.work,N),r.lenbits=N.bits,F){e.msg="invalid literal/lengths set",r.mode=d;break}if(r.distbits=6,r.distcode=r.distdyn,N={bits:r.distbits},F=s(u,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,N),r.distbits=N.bits,F){e.msg="invalid distances set",r.mode=d;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(A>=6&&b>=258){e.next_out=v,e.avail_out=b,e.next_in=_,e.avail_in=A,r.hold=w,r.bits=E,a(e,I),v=e.next_out,g=e.output,b=e.avail_out,_=e.next_in,y=e.input,A=e.avail_in,w=r.hold,E=r.bits,r.mode===p&&(r.back=-1);break}for(r.back=0;k=(U=r.lencode[w&(1<<r.lenbits)-1])>>>16&255,R=65535&U,!((M=U>>>24)<=E);){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}if(k&&!(240&k)){for(B=M,L=k,D=R;k=(U=r.lencode[D+((w&(1<<B+L)-1)>>B)])>>>16&255,R=65535&U,!(B+(M=U>>>24)<=E);){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}w>>>=B,E-=B,r.back+=B}if(w>>>=M,E-=M,r.back+=M,r.length=R,0===k){r.mode=26;break}if(32&k){r.back=-1,r.mode=p;break}if(64&k){e.msg="invalid literal/length code",r.mode=d;break}r.extra=15&k,r.mode=22;case 22:if(r.extra){for(Z=r.extra;E<Z;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}r.length+=w&(1<<r.extra)-1,w>>>=r.extra,E-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;k=(U=r.distcode[w&(1<<r.distbits)-1])>>>16&255,R=65535&U,!((M=U>>>24)<=E);){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}if(!(240&k)){for(B=M,L=k,D=R;k=(U=r.distcode[D+((w&(1<<B+L)-1)>>B)])>>>16&255,R=65535&U,!(B+(M=U>>>24)<=E);){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}w>>>=B,E-=B,r.back+=B}if(w>>>=M,E-=M,r.back+=M,64&k){e.msg="invalid distance code",r.mode=d;break}r.offset=R,r.extra=15&k,r.mode=24;case 24:if(r.extra){for(Z=r.extra;E<Z;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}r.offset+=w&(1<<r.extra)-1,w>>>=r.extra,E-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=d;break}r.mode=25;case 25:if(0===b)break e;if(P=I-b,r.offset>P){if((P=r.offset-P)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=d;break}P>r.wnext?(P-=r.wnext,O=r.wsize-P):O=r.wnext-P,P>r.length&&(P=r.length),T=r.window}else T=g,O=v-r.offset,P=r.length;P>b&&(P=b),b-=P,r.length-=P;do{g[v++]=T[O++]}while(--P);0===r.length&&(r.mode=21);break;case 26:if(0===b)break e;g[v++]=r.length,b--,r.mode=21;break;case 27:if(r.wrap){for(;E<32;){if(0===A)break e;A--,w|=y[_++]<<E,E+=8}if(I-=b,e.total_out+=I,r.total+=I,I&&(e.adler=r.check=r.flags?o(r.check,g,I,v-I):i(r.check,g,I,v-I)),I=b,(r.flags?w:m(w))!==r.check){e.msg="incorrect data check",r.mode=d;break}w=0,E=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;E<32;){if(0===A)break e;A--,w+=y[_++]<<E,E+=8}if(w!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=d;break}w=0,E=0}r.mode=29;case 29:F=1;break e;case d:F=-3;break e;case 31:return-4;default:return f}return e.next_out=v,e.avail_out=b,e.next_in=_,e.avail_in=A,r.hold=w,r.bits=E,(r.wsize||I!==e.avail_out&&r.mode<d&&(r.mode<27||4!==t))&&C(e,e.output,e.next_out,I-e.avail_out)?(r.mode=31,-4):(x-=e.avail_in,I-=e.avail_out,e.total_in+=x,e.total_out+=I,r.total+=I,r.wrap&&I&&(e.adler=r.check=r.flags?o(r.check,g,I,e.next_out-I):i(r.check,g,I,e.next_out-I)),e.data_type=r.bits+(r.last?64:0)+(r.mode===p?128:0)+(20===r.mode||15===r.mode?256:0),(0===x&&0===I||4===t)&&F===c&&(F=-5),F)},t.inflateEnd=function(e){if(!e||!e.state)return f;var t=e.state;return t.window&&(t.window=null),e.state=null,c},t.inflateGetHeader=function(e,t){var r;return e&&e.state&&2&(r=e.state).wrap?(r.head=t,t.done=!1,c):f},t.inflateSetDictionary=function(e,t){var r,n=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?f:11===r.mode&&i(1,t,n,0)!==r.check?-3:C(e,t,n,n)?(r.mode=31,-4):(r.havedict=1,c):f},t.inflateInfo="pako inflate (from Nodeca project)"},9241:(e,t,r)=>{"use strict";var n=r(24236),i=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,u,c,f,h,p){var d,y,g,m,_,v,A,b,w,E=p.bits,x=0,I=0,S=0,C=0,P=0,O=0,T=0,M=0,k=0,R=0,B=null,L=0,D=new n.Buf16(16),j=new n.Buf16(16),F=null,N=0;for(x=0;x<=i;x++)D[x]=0;for(I=0;I<u;I++)D[t[r+I]]++;for(P=E,C=i;C>=1&&0===D[C];C--);if(P>C&&(P=C),0===C)return c[f++]=20971520,c[f++]=20971520,p.bits=1,0;for(S=1;S<C&&0===D[S];S++);for(P<S&&(P=S),M=1,x=1;x<=i;x++)if(M<<=1,(M-=D[x])<0)return-1;if(M>0&&(0===e||1!==C))return-1;for(j[1]=0,x=1;x<i;x++)j[x+1]=j[x]+D[x];for(I=0;I<u;I++)0!==t[r+I]&&(h[j[t[r+I]]++]=I);if(0===e?(B=F=h,v=19):1===e?(B=o,L-=257,F=a,N-=257,v=256):(B=s,F=l,v=-1),R=0,I=0,x=S,_=f,O=P,T=0,g=-1,m=(k=1<<P)-1,1===e&&k>852||2===e&&k>592)return 1;for(;;){A=x-T,h[I]<v?(b=0,w=h[I]):h[I]>v?(b=F[N+h[I]],w=B[L+h[I]]):(b=96,w=0),d=1<<x-T,S=y=1<<O;do{c[_+(R>>T)+(y-=d)]=A<<24|b<<16|w}while(0!==y);for(d=1<<x-1;R&d;)d>>=1;if(0!==d?(R&=d-1,R+=d):R=0,I++,0==--D[x]){if(x===C)break;x=t[r+h[I]]}if(x>P&&(R&m)!==g){for(0===T&&(T=P),_+=S,M=1<<(O=x-T);O+T<C&&!((M-=D[O+T])<=0);)O++,M<<=1;if(k+=1<<O,1===e&&k>852||2===e&&k>592)return 1;c[g=R&m]=P<<24|O<<16|_-f}}return 0!==R&&(c[_+R]=x-T<<24|64<<16),p.bits=P,0}},48898:e=>{"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},10342:(e,t,r)=>{"use strict";var n=r(24236),i=0,o=1;function a(e){for(var t=e.length;--t>=0;)e[t]=0}var s=0,l=29,u=256,c=u+1+l,f=30,h=19,p=2*c+1,d=15,y=16,g=7,m=256,_=16,v=17,A=18,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(2*(c+2));a(I);var S=new Array(2*f);a(S);var C=new Array(512);a(C);var P=new Array(256);a(P);var O=new Array(l);a(O);var T,M,k,R=new Array(f);function B(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function L(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function D(e){return e<256?C[e]:C[256+(e>>>7)]}function j(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function F(e,t,r){e.bi_valid>y-r?(e.bi_buf|=t<<e.bi_valid&65535,j(e,e.bi_buf),e.bi_buf=t>>y-e.bi_valid,e.bi_valid+=r-y):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function N(e,t,r){F(e,r[2*t],r[2*t+1])}function Z(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function U(e,t,r){var n,i,o=new Array(d+1),a=0;for(n=1;n<=d;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=Z(o[s]++,s))}}function Q(e){var t;for(t=0;t<c;t++)e.dyn_ltree[2*t]=0;for(t=0;t<f;t++)e.dyn_dtree[2*t]=0;for(t=0;t<h;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*m]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function G(e){e.bi_valid>8?j(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function z(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function q(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&z(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!z(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function V(e,t,r){var n,i,o,a,s=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===n?N(e,i,t):(N(e,(o=P[i])+u+1,t),0!==(a=b[o])&&F(e,i-=O[o],a),N(e,o=D(--n),r),0!==(a=w[o])&&F(e,n-=R[o],a))}while(s<e.last_lit);N(e,m,t)}function W(e,t){var r,n,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=p,r=0;r<l;r++)0!==o[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)q(e,o,r);i=l;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],q(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,q(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,y=t.stat_desc.extra_base,g=t.stat_desc.max_length,m=0;for(o=0;o<=d;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<p;r++)(o=l[2*l[2*(n=e.heap[r])+1]+1]+1)>g&&(o=g,m++),l[2*n+1]=o,n>u||(e.bl_count[o]++,a=0,n>=y&&(a=h[n-y]),s=l[2*n],e.opt_len+=s*(o+a),f&&(e.static_len+=s*(c[2*n+1]+a)));if(0!==m){do{for(o=g-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[g]--,m-=2}while(m>0);for(o=g;0!==o;o--)for(n=e.bl_count[o];0!==n;)(i=e.heap[--r])>u||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),n--)}}(e,t),U(o,u,e.bl_count)}function K(e,t,r){var n,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*_]++):s<=10?e.bl_tree[2*v]++:e.bl_tree[2*A]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))}function H(e,t,r){var n,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<l&&i===a)){if(s<u)do{N(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(N(e,i,e.bl_tree),s--),N(e,_,e.bl_tree),F(e,s-3,2)):s<=10?(N(e,v,e.bl_tree),F(e,s-3,3)):(N(e,A,e.bl_tree),F(e,s-11,7));s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4)}}a(R);var Y=!1;function X(e,t,r,i){F(e,(s<<1)+(i?1:0),3),function(e,t,r,i){G(e),i&&(j(e,r),j(e,~r)),n.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}t._tr_init=function(e){Y||(!function(){var e,t,r,n,i,o=new Array(d+1);for(r=0,n=0;n<l-1;n++)for(O[n]=r,e=0;e<1<<b[n];e++)P[r++]=n;for(P[r-1]=n,i=0,n=0;n<16;n++)for(R[n]=i,e=0;e<1<<w[n];e++)C[i++]=n;for(i>>=7;n<f;n++)for(R[n]=i<<7,e=0;e<1<<w[n]-7;e++)C[256+i++]=n;for(t=0;t<=d;t++)o[t]=0;for(e=0;e<=143;)I[2*e+1]=8,e++,o[8]++;for(;e<=255;)I[2*e+1]=9,e++,o[9]++;for(;e<=279;)I[2*e+1]=7,e++,o[7]++;for(;e<=287;)I[2*e+1]=8,e++,o[8]++;for(U(I,c+1,o),e=0;e<f;e++)S[2*e+1]=5,S[2*e]=Z(e,5);T=new B(I,b,u+1,c,d),M=new B(S,w,0,f,d),k=new B(new Array(0),E,0,h,g)}(),Y=!0),e.l_desc=new L(e.dyn_ltree,T),e.d_desc=new L(e.dyn_dtree,M),e.bl_desc=new L(e.bl_tree,k),e.bi_buf=0,e.bi_valid=0,Q(e)},t._tr_stored_block=X,t._tr_flush_block=function(e,t,r,n){var a,s,l=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<u;t++)if(0!==e.dyn_ltree[2*t])return o;return i}(e)),W(e,e.l_desc),W(e,e.d_desc),l=function(e){var t;for(K(e,e.dyn_ltree,e.l_desc.max_code),K(e,e.dyn_dtree,e.d_desc.max_code),W(e,e.bl_desc),t=h-1;t>=3&&0===e.bl_tree[2*x[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=r+5,r+4<=a&&-1!==t?X(e,t,r,n):4===e.strategy||s===a?(F(e,2+(n?1:0),3),V(e,I,S)):(F(e,4+(n?1:0),3),function(e,t,r,n){var i;for(F(e,t-257,5),F(e,r-1,5),F(e,n-4,4),i=0;i<n;i++)F(e,e.bl_tree[2*x[i]+1],3);H(e,e.dyn_ltree,t-1),H(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),V(e,e.dyn_ltree,e.dyn_dtree)),Q(e),n&&G(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(P[r]+u+1)]++,e.dyn_dtree[2*D(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){F(e,2,3),N(e,m,I),function(e){16===e.bi_valid?(j(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},62292:e=>{"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},11392:(e,t,r)=>{r(29718);var n=r(32553).s;function i(e){var t=new n;return(t.write(e)+t.end()).replace(/\0/g,"").trim()}e.exports=function e(t,r){if(!t)return i;try{new TextDecoder(t.trim())}catch(a){var n=o.exec(t);return n&&!r?e("windows-"+n[1],!0):i}return function(e){var r=new TextDecoder(t);return(r.decode(e,{stream:!0})+r.decode()).replace(/\0/g,"").trim()}};var o=/^(?:ANSI\s)?(\d+)$/m},9462:(e,t,r)=>{var n=r(11392);function i(e,t,r,n,i){var o=i(e.slice(t,t+r));switch(n){case"N":case"F":case"O":return parseFloat(o,10);case"D":return new Date(o.slice(0,4),parseInt(o.slice(4,6),10)-1,o.slice(6,8));case"L":return"y"===o.toLowerCase()||"t"===o.toLowerCase();default:return o}}function o(e,t,r,n){for(var o,a,s={},l=0,u=r.length;l<u;)o=i(e,t,(a=r[l]).len,a.dataType,n),t+=a.len,void 0!==o&&(s[a.name]=o),l++;return s}e.exports=function(e,t){for(var r=n(t),i=function(e){var t={};return t.lastUpdated=new Date(e.readUInt8(1)+1900,e.readUInt8(2),e.readUInt8(3)),t.records=e.readUInt32LE(4),t.headerLen=e.readUInt16LE(8),t.recLen=e.readUInt16LE(10),t}(e),a=function(e,t,r){for(var n=[],i=32;i<t&&(n.push({name:r(e.slice(i,i+11)),dataType:String.fromCharCode(e.readUInt8(i+11)),len:e.readUInt8(i+16),decimal:e.readUInt8(i+17)}),13!==e.readUInt8(i+32));)i+=32;return n}(e,i.headerLen-1,r),s=2+(a.length+1<<5),l=i.recLen,u=i.records,c=[];u;)c.push(o(e,s,a,r)),s+=l,u--;return c}},3614:(e,t,r)=>{"use strict";e.exports=i;var n=r(80645);function i(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o,s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function l(e){return e.type===i.Bytes?e.readVarint()+e.pos:e.pos+1}function u(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function c(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=e;i--)r.buf[i+n]=r.buf[i]}function f(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function h(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function p(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function d(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function y(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function g(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function m(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function _(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function v(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function A(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function b(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function w(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,e(i,t,this),this.pos===o&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=A(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=w(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=A(this.buf,this.pos)+A(this.buf,this.pos+4)*o;return this.pos+=8,e},readSFixed64:function(){var e=A(this.buf,this.pos)+w(this.buf,this.pos+4)*o;return this.pos+=8,e},readFloat:function(){var e=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:function(e,t,r){var n,i,o=r.buf;if(i=o[r.pos++],n=(112&i)>>4,i<128)return u(e,n,t);if(i=o[r.pos++],n|=(127&i)<<3,i<128)return u(e,n,t);if(i=o[r.pos++],n|=(127&i)<<10,i<128)return u(e,n,t);if(i=o[r.pos++],n|=(127&i)<<17,i<128)return u(e,n,t);if(i=o[r.pos++],n|=(127&i)<<24,i<128)return u(e,n,t);if(i=o[r.pos++],n|=(1&i)<<31,i<128)return u(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&s?function(e,t,r){return s.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){var n="",i=t;for(;i<r;){var o,a,s,l=e[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),i+=c}return n}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==i.Bytes)return e.push(this.readVarint(t));var r=l(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==i.Bytes)return e.push(this.readSVarint());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==i.Bytes)return e.push(this.readBoolean());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==i.Bytes)return e.push(this.readFloat());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==i.Bytes)return e.push(this.readDouble());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed32());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed32());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed64());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed64());var t=l(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===i.Varint)for(;this.buf[this.pos++]>127;);else if(t===i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===i.Fixed32)this.pos+=4;else{if(t!==i.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),b(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),b(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),b(this.buf,-1&e,this.pos),b(this.buf,Math.floor(e*a),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),b(this.buf,-1&e,this.pos),b(this.buf,Math.floor(e*a),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,n;e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos]=127&e}(r,0,t),function(e,t){var r=(7&e)<<4;if(t.buf[t.pos++]|=r|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var n,i,o=0;o<t.length;o++){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&c(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),n.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),n.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&c(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,i.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,f,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,h,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,y,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,p,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,d,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,g,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,m,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,_,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,v,t)},writeBytesField:function(e,t){this.writeTag(e,i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},73213:function(e){e.exports=function(){"use strict";function e(e,t){if(e[t])return e[t];for(var r,n=Object.keys(e),i=t.toLowerCase().replace(Re,""),o=-1;++o<n.length;)if((r=n[o]).toLowerCase().replace(Re,"")===i)return e[r]}function t(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Le}function r(e){return new t(e).output()}function n(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var n=t?{}:e,o=r.reduce((function(e,t){return i(t,e),e}),n);t&&(e[t]=o)}function i(e,t){if(Array.isArray(e)){var r=e.shift();if("PARAMETER"===r&&(r=e.shift()),1===e.length)return Array.isArray(e[0])?(t[r]={},void i(e[0],t[r])):void(t[r]=e[0]);if(e.length)if("TOWGS84"!==r){if("AXIS"===r)return r in t||(t[r]=[]),void t[r].push(e);var o;switch(Array.isArray(r)||(t[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[r]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&i(e[2],t[r]));case"SPHEROID":case"ELLIPSOID":return t[r]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&i(e[3],t[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void n(t,r,e);default:for(o=-1;++o<e.length;)if(!Array.isArray(e[o]))return i(e,t[r]);return n(t,r,e)}}else t[r]=e;else t[r]=!0}else t[e]=!0}function o(e,t){var r=t[0],n=t[1];!(r in e)&&n in e&&(e[r]=e[n],3===t.length&&(e[r]=t[2](e[r])))}function a(e){return e*Ue}function s(e){function t(t){return t*(e.to_meter||1)}if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var r="",n=0,i=e.AXIS.length;n<i;++n){var s=[e.AXIS[n][0].toLowerCase(),e.AXIS[n][1].toLowerCase()];-1!==s[0].indexOf("north")||("y"===s[0]||"lat"===s[0])&&"north"===s[1]?r+="n":-1!==s[0].indexOf("south")||("y"===s[0]||"lat"===s[0])&&"south"===s[1]?r+="s":-1!==s[0].indexOf("east")||("x"===s[0]||"lon"===s[0])&&"east"===s[1]?r+="e":-1===s[0].indexOf("west")&&("x"!==s[0]&&"lon"!==s[0]||"west"!==s[1])||(r+="w")}2===r.length&&(r+="u"),3===r.length&&(e.axis=r)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var l=e.GEOGCS;"GEOGCS"===e.type&&(l=e),l&&(l.DATUM?e.datumCode=l.DATUM.name.toLowerCase():e.datumCode=l.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),l.DATUM&&l.DATUM.SPHEROID&&(e.ellps=l.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=l.DATUM.SPHEROID.a,e.rf=parseFloat(l.DATUM.SPHEROID.rf,10)),l.DATUM&&l.DATUM.TOWGS84&&(e.datum_params=l.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",a],["x0","false_easting",t],["y0","false_northing",t],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["azimuth","Azimuth"],["alpha","azimuth",a],["srsCode","name"]].forEach((function(t){return o(e,t)})),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=a(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function l(e){var t=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?l[e]=Be(arguments[1]):l[e]=Qe(arguments[1]):l[e]=r}else if(1===arguments.length){if(Array.isArray(e))return e.map((function(e){Array.isArray(e)?l.apply(t,e):l(e)}));if("string"==typeof e){if(e in l)return l[e]}else"EPSG"in e?l["EPSG:"+e.EPSG]=e:"ESRI"in e?l["ESRI:"+e.ESRI]=e:"IAU2000"in e?l["IAU2000:"+e.IAU2000]=e:console.log(e);return}}function u(e){return"string"==typeof e}function c(e){return e in l}function f(e){return Ge.some((function(t){return e.indexOf(t)>-1}))}function h(t){var r=e(t,"authority");if(r){var n=e(r,"epsg");return n&&ze.indexOf(n)>-1}}function p(t){var r=e(t,"extension");if(r)return e(r,"proj4")}function d(e){return"+"===e[0]}function y(e){if(!u(e))return e;if(c(e))return l[e];if(f(e)){var t=Qe(e);if(h(t))return l["EPSG:3857"];var r=p(t);return r?Be(r):t}return d(e)?Be(e):void 0}function g(e){return e}function m(e,t){var r=$e.length;return e.names?($e[r]=e,e.names.forEach((function(e){Je[e.toLowerCase()]=r})),this):(console.log(t),!0)}function _(e,t,r,n){var i=e*e,o=t*t,a=(i-o)/i,s=0;return n?(i=(e*=1-a*(we+a*(Ee+a*xe)))*e,a=0):s=Math.sqrt(a),{es:a,e:s,ep2:(i-o)/o}}function v(t,r,n,i,o){if(!t){var a=e(tt,i);a||(a=rt),t=a.a,r=a.b,n=a.rf}return n&&!r&&(r=(1-1/n)*t),(0===n||Math.abs(t-r)<Ie)&&(o=!0,r=t),{a:t,b:r,rf:n,sphere:o}}function A(e,t,r,n,i,o,a){var s={};return s.datum_type=void 0===e||"none"===e?ve:_e,t&&(s.datum_params=t.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=ye),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=ge,s.datum_params[3]*=Ae,s.datum_params[4]*=Ae,s.datum_params[5]*=Ae,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=me,s.grids=a),s.a=r,s.b=n,s.es=i,s.ep2=o,s}function b(e){return void 0===e?null:e.split(",").map(w)}function w(e){if(0===e.length)return null;var t="@"===e[0];return t&&(e=e.slice(1)),"null"===e?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:it[e]||null,isNull:!1}}function E(e){return e/3600*Math.PI/180}function x(e){var t=e.getInt32(8,!1);return 11!==t&&(11!==(t=e.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function I(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:S(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function S(e,t,r){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,r)))}function C(e,t,r){for(var n=[],i=0;i<t.nSubgrids;i++){var o=O(e,176,r),a=T(e,176,o,r),s=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),l=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);n.push({ll:[E(o.lowerLongitude),E(o.lowerLatitude)],del:[E(o.longitudeInterval),E(o.latitudeInterval)],lim:[s,l],count:o.gridNodeCount,cvs:P(a)})}return n}function P(e){return e.map((function(e){return[E(e.longitudeShift),E(e.latitudeShift)]}))}function O(e,t,r){return{name:S(e,t+8,t+16).trim(),parent:S(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,r),upperLatitude:e.getFloat64(t+88,r),lowerLongitude:e.getFloat64(t+104,r),upperLongitude:e.getFloat64(t+120,r),latitudeInterval:e.getFloat64(t+136,r),longitudeInterval:e.getFloat64(t+152,r),gridNodeCount:e.getInt32(t+168,r)}}function T(e,t,r,n){for(var i=t+176,o=[],a=0;a<r.gridNodeCount;a++){var s={latitudeShift:e.getFloat32(i+16*a,n),longitudeShift:e.getFloat32(i+16*a+4,n),latitudeAccuracy:e.getFloat32(i+16*a+8,n),longitudeAccuracy:e.getFloat32(i+16*a+12,n)};o.push(s)}return o}function M(t,r){if(!(this instanceof M))return new M(t);r=r||function(e){if(e)throw e};var n=y(t);if("object"==typeof n){var i=M.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var o=e(nt,n.datumCode);o&&(n.datum_params=n.datum_params||(o.towgs84?o.towgs84.split(","):null),n.ellps=o.ellipse,n.datumName=o.datumName?o.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var a=v(n.a,n.b,n.rf,n.ellps,n.sphere),s=_(a.a,a.b,a.rf,n.R_A),l=b(n.nadgrids),u=n.datum||A(n.datumCode,n.datum_params,a.a,a.b,s.es,s.ep2,l);qe(this,n),qe(this,i),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=u,this.init(),r(null,this)}else r(t)}else r(t)}function k(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(e.datum_type===ye?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==ge||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}function R(e,t,r){var n,i,o,a,s=e.x,l=e.y,u=e.z?e.z:0;if(l<-be&&l>-1.001*be)l=-be;else if(l>be&&l<1.001*be)l=be;else{if(l<-be)return{x:-1/0,y:-1/0,z:e.z};if(l>be)return{x:1/0,y:1/0,z:e.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),a=Math.cos(l),o=i*i,{x:((n=r/Math.sqrt(1-t*o))+u)*a*Math.cos(s),y:(n+u)*a*Math.sin(s),z:(n*(1-t)+u)*i}}function B(e,t,r,n){var i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v=e.x,A=e.y,b=e.z?e.z:0;if(i=Math.sqrt(v*v+A*A),o=Math.sqrt(v*v+A*A+b*b),i/r<1e-12){if(m=0,o/r<1e-12)return _=-n,{x:e.x,y:e.y,z:e.z}}else m=Math.atan2(A,v);a=b/o,f=(s=i/o)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*s*s)),h=a*l,g=0;do{g++,u=t*(c=r/Math.sqrt(1-t*h*h))/(c+(_=i*f+b*h-c*(1-t*h*h))),y=(d=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*f-(p=s*(1-u)*l)*h,f=p,h=d}while(y*y>1e-24&&g<30);return{x:m,y:Math.atan(d/Math.abs(p)),z:_}}function L(e,t,r){if(t===ye)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===ge){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],l=r[5],u=r[6];return{x:u*(e.x-l*e.y+s*e.z)+n,y:u*(l*e.x+e.y-a*e.z)+i,z:u*(-s*e.x+a*e.y+e.z)+o}}}function D(e,t,r){if(t===ye)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===ge){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],l=r[5],u=r[6],c=(e.x-n)/u,f=(e.y-i)/u,h=(e.z-o)/u;return{x:c+l*f-s*h,y:-l*c+f+a*h,z:s*c-a*f+h}}}function j(e){return e===ye||e===ge}function F(e,t,r){if(null===e.grids||0===e.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-r.x,y:r.y},i={x:Number.NaN,y:Number.NaN},o=[],a=0;a<e.grids.length;a++){var s=e.grids[a];if(o.push(s.name),s.isNull){i=n;break}if(null!==s.grid){var l=s.grid.subgrids[0],u=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-u,f=l.ll[1]-u,h=l.ll[0]+(l.lim[0]-1)*l.del[0]+u,p=l.ll[1]+(l.lim[1]-1)*l.del[1]+u;if(!(f>n.y||c>n.x||p<n.y||h<n.x||(i=N(n,t,l),isNaN(i.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*Ce+" "+n.y*Ce+" tried: '"+o+"'"),-1):(r.x=-i.x,r.y=i.y,0)}function N(e,t,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var i={x:e.x,y:e.y};i.x-=r.ll[0],i.y-=r.ll[1],i.x=Ke(i.x-Math.PI)+Math.PI;var o=Z(i,r);if(t){if(isNaN(o.x))return n;o.x=i.x-o.x,o.y=i.y-o.y;var a,s,l=9;do{if(s=Z(o,r),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:i.x-(s.x+o.x),y:i.y-(s.y+o.y)},o.x+=a.x,o.y+=a.y}while(l--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Ke(o.x+r.ll[0]),n.y=o.y+r.ll[1]}else isNaN(o.x)||(n.x=e.x+o.x,n.y=e.y+o.y);return n}function Z(e,t){var r,n={x:e.x/t.del[0],y:e.y/t.del[1]},i={x:Math.floor(n.x),y:Math.floor(n.y)},o={x:n.x-1*i.x,y:n.y-1*i.y},a={x:Number.NaN,y:Number.NaN};if(i.x<0||i.x>=t.lim[0])return a;if(i.y<0||i.y>=t.lim[1])return a;r=i.y*t.lim[0]+i.x;var s={x:t.cvs[r][0],y:t.cvs[r][1]};r++;var l={x:t.cvs[r][0],y:t.cvs[r][1]};r+=t.lim[0];var u={x:t.cvs[r][0],y:t.cvs[r][1]};r--;var c={x:t.cvs[r][0],y:t.cvs[r][1]},f=o.x*o.y,h=o.x*(1-o.y),p=(1-o.x)*(1-o.y),d=(1-o.x)*o.y;return a.x=p*s.x+h*l.x+d*c.x+f*u.x,a.y=p*s.y+h*l.y+d*c.y+f*u.y,a}function U(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function Q(e,t){return(e.datum.datum_type===ye||e.datum.datum_type===ge||e.datum.datum_type===me)&&"WGS84"!==t.datumCode||(t.datum.datum_type===ye||t.datum.datum_type===ge||t.datum.datum_type===me)&&"WGS84"!==e.datumCode}function G(e,t,r,n){var i,o=void 0!==(r=Array.isArray(r)?st(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(lt(r),e.datum&&t.datum&&Q(e,t)&&(r=G(e,i=new M("WGS84"),r,n),e=i),n&&"enu"!==e.axis&&(r=at(e,!1,r)),"longlat"===e.projName)r={x:r.x*Se,y:r.y*Se,z:r.z||0};else if(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),!(r=e.inverse(r)))return;if(e.from_greenwich&&(r.x+=e.from_greenwich),r=ot(e.datum,t.datum,r))return t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),"longlat"===t.projName?r={x:r.x*Ce,y:r.y*Ce,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),n&&"enu"!==t.axis?at(t,!0,r):(o||delete r.z,r)}function z(e,t,r,n){var i,o,a;return Array.isArray(r)?(i=G(e,t,r,n)||{x:NaN,y:NaN},r.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(r.splice(3)):[i.x,i.y,r[2]].concat(r.splice(3)):[i.x,i.y].concat(r.splice(2)):[i.x,i.y]):(o=G(e,t,r,n),2===(a=Object.keys(r)).length||a.forEach((function(n){if(void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;o[n]=r[n]})),o)}function q(e){return e instanceof M?e:e.oProj?e.oProj:M(e)}function V(e,t,r){e=q(e);var n,i=!1;return void 0===t?(t=e,e=ut,i=!0):(void 0!==t.x||Array.isArray(t))&&(r=t,t=e,e=ut,i=!0),t=q(t),r?z(e,t,r):(n={forward:function(r,n){return z(e,t,r,n)},inverse:function(r,n){return z(t,e,r,n)}},i&&(n.oProj=t),n)}function W(e,t){return t=t||5,ee(X({lat:e[1],lon:e[0]}),t)}function K(e){var t=J(ie(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function H(e){return e*(Math.PI/180)}function Y(e){return e/Math.PI*180}function X(e){var t,r,n,i,o,a,s=e.lat,l=e.lon,u=6378137,c=H(s),f=H(l);a=Math.floor((l+180)/6)+1,180===l&&(a=60),s>=56&&s<64&&l>=3&&l<12&&(a=32),s>=72&&s<84&&(l>=0&&l<9?a=31:l>=9&&l<21?a=33:l>=21&&l<33?a=35:l>=33&&l<42&&(a=37)),o=H(6*(a-1)-180+3),t=u/Math.sqrt(1-.00669438*Math.sin(c)*Math.sin(c)),r=Math.tan(c)*Math.tan(c),n=.006739496752268451*Math.cos(c)*Math.cos(c);var h=.9996*t*((i=Math.cos(c)*(f-o))+(1-r+n)*i*i*i/6+(5-18*r+r*r+72*n-.39089081163157013)*i*i*i*i*i/120)+5e5,p=.9996*(u*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-3.418046101696858e-9*Math.sin(6*c))+t*Math.tan(c)*(i*i/2+(5-r+9*n+4*n*n)*i*i*i*i/24+(61-58*r+r*r+600*n-2.2240339282485886)*i*i*i*i*i*i/720));return s<0&&(p+=1e7),{northing:Math.round(p),easting:Math.round(h),zoneNumber:a,zoneLetter:$(s)}}function J(e){var t=e.northing,r=e.easting,n=e.zoneLetter,i=e.zoneNumber;if(i<0||i>60)return null;var o,a,s,l,u,c,f,h,p=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),y=r-5e5,g=t;n<"N"&&(g-=1e7),c=6*(i-1)-180+3,h=(f=g/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*f)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*f)+151*d*d*d/96*Math.sin(6*f),o=p/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),a=Math.tan(h)*Math.tan(h),s=.006739496752268451*Math.cos(h)*Math.cos(h),l=.99330562*p/Math.pow(1-.00669438*Math.sin(h)*Math.sin(h),1.5),u=y/(.9996*o);var m=h-o*Math.tan(h)/l*(u*u/2-(5+3*a+10*s-4*s*s-.06065547077041606)*u*u*u*u/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*u*u*u*u*u*u/720);m=Y(m);var _,v=(u-(1+2*a+s)*u*u*u/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*u*u*u*u*u/120)/Math.cos(h);if(v=c+Y(v),e.accuracy){var A=J({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});_={top:A.lat,right:A.lon,bottom:m,left:v}}else _={lat:m,lon:v};return _}function $(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function ee(e,t){var r="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+te(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+n.substr(n.length-5,t)}function te(e,t,r){var n=re(r);return ne(Math.floor(e/1e5),Math.floor(t/1e5)%20,n)}function re(e){var t=e%ct;return 0===t&&(t=ct),t}function ne(e,t,r){var n=r-1,i=ft.charCodeAt(n),o=ht.charCodeAt(n),a=i+e-1,s=o+t,l=!1;return a>mt&&(a=a-mt+pt-1,l=!0),(a===dt||i<dt&&a>dt||(a>dt||i<dt)&&l)&&a++,(a===yt||i<yt&&a>yt||(a>yt||i<yt)&&l)&&++a===dt&&a++,a>mt&&(a=a-mt+pt-1),s>gt?(s=s-gt+pt-1,l=!0):l=!1,(s===dt||o<dt&&s>dt||(s>dt||o<dt)&&l)&&s++,(s===yt||o<yt&&s>yt||(s>yt||o<yt)&&l)&&++s===dt&&s++,s>gt&&(s=s-gt+pt-1),String.fromCharCode(a)+String.fromCharCode(s)}function ie(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,r=e.length,n=null,i="",o=0;!/[A-Z]/.test(t=e.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+e;i+=t,o++}var a=parseInt(i,10);if(0===o||o+3>r)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;n=e.substring(o,o+=2);for(var l=re(a),u=oe(n.charAt(0),l),c=ae(n.charAt(1),l);c<se(s);)c+=2e6;var f=r-o;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var h,p,d,y=f/2,g=0,m=0;return y>0&&(h=1e5/Math.pow(10,y),p=e.substring(o,o+y),g=parseFloat(p)*h,d=e.substring(o+y),m=parseFloat(d)*h),{easting:g+u,northing:m+c,zoneLetter:s,zoneNumber:a,accuracy:h}}function oe(e,t){for(var r=ft.charCodeAt(t-1),n=1e5,i=!1;r!==e.charCodeAt(0);){if(++r===dt&&r++,r===yt&&r++,r>mt){if(i)throw"Bad character: "+e;r=pt,i=!0}n+=1e5}return n}function ae(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var r=ht.charCodeAt(t-1),n=0,i=!1;r!==e.charCodeAt(0);){if(++r===dt&&r++,r===yt&&r++,r>gt){if(i)throw"Bad character: "+e;r=pt,i=!0}n+=1e5}return n}function se(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function le(e,t,r){if(!(this instanceof le))return new le(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function ue(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r="object"==typeof e.PROJECTION?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||-1!==t.indexOf(r)}function ce(e){var t,r=[];return r[0]=e*rr,t=e*e,r[0]+=t*nr,r[1]=t*or,t*=e,r[0]+=t*ir,r[1]+=t*ar,r[2]=t*sr,r}function fe(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}function he(e,t,r,n){var i;return e<Ie?(n.value=Cr.AREA_0,i=0):(i=Math.atan2(t,r),Math.abs(i)<=Pe?n.value=Cr.AREA_0:i>Pe&&i<=be+Pe?(n.value=Cr.AREA_1,i-=be):i>be+Pe||i<=-(be+Pe)?(n.value=Cr.AREA_2,i=i>=0?i-Te:i+Te):(n.value=Cr.AREA_3,i+=be)),i}function pe(e,t){var r=e+t;return r<-Te?r+=Oe:r>+Te&&(r-=Oe),r}function de(e,t,r,n){for(var i=t;n;--n){var o=e(i);if(i-=o,Math.abs(o)<r)break}return i}var ye=1,ge=2,me=3,_e=4,ve=5,Ae=484813681109536e-20,be=Math.PI/2,we=.16666666666666666,Ee=.04722222222222222,xe=.022156084656084655,Ie=1e-10,Se=.017453292519943295,Ce=57.29577951308232,Pe=Math.PI/4,Oe=2*Math.PI,Te=3.14159265359,Me={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},ke={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Re=/[\s_\-\/\(\)]/g,Be=function(t){var r,n,i,o={},a=t.split("+").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var r=t.split("=");return r.push(!0),e[r[0].toLowerCase()]=r[1],e}),{}),s={proj:"projName",datum:"datumCode",rf:function(e){o.rf=parseFloat(e)},lat_0:function(e){o.lat0=e*Se},lat_1:function(e){o.lat1=e*Se},lat_2:function(e){o.lat2=e*Se},lat_ts:function(e){o.lat_ts=e*Se},lon_0:function(e){o.long0=e*Se},lon_1:function(e){o.long1=e*Se},lon_2:function(e){o.long2=e*Se},alpha:function(e){o.alpha=parseFloat(e)*Se},gamma:function(e){o.rectified_grid_angle=parseFloat(e)},lonc:function(e){o.longc=e*Se},x_0:function(e){o.x0=parseFloat(e)},y_0:function(e){o.y0=parseFloat(e)},k_0:function(e){o.k0=parseFloat(e)},k:function(e){o.k0=parseFloat(e)},a:function(e){o.a=parseFloat(e)},b:function(e){o.b=parseFloat(e)},r_a:function(){o.R_A=!0},zone:function(e){o.zone=parseInt(e,10)},south:function(){o.utmSouth=!0},towgs84:function(e){o.datum_params=e.split(",").map((function(e){return parseFloat(e)}))},to_meter:function(e){o.to_meter=parseFloat(e)},units:function(t){o.units=t;var r=e(ke,t);r&&(o.to_meter=r.to_meter)},from_greenwich:function(e){o.from_greenwich=e*Se},pm:function(t){var r=e(Me,t);o.from_greenwich=(r||parseFloat(t))*Se},nadgrids:function(e){"@null"===e?o.datumCode="none":o.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(o.axis=e)},approx:function(){o.approx=!0}};for(r in a)n=a[r],r in s?"function"==typeof(i=s[r])?i(n):o[i]=n:o[r]=n;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o},Le=1,De=/\s/,je=/[A-Za-z]/,Fe=/[A-Za-z84_]/,Ne=/[,\]]/,Ze=/[\d\.E\-\+]/;t.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;De.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case Le:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},t.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(Ne.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},t.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Le)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Le,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},t.prototype.number=function(e){if(!Ze.test(e)){if(Ne.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},t.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},t.prototype.keyword=function(e){if(Fe.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=Le)}if(!Ne.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},t.prototype.neutral=function(e){if(je.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(Ze.test(e))return this.word=e,void(this.state=3);if(!Ne.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},t.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Ue=.017453292519943295,Qe=function(e){var t=r(e),n=t.shift(),o=t.shift();t.unshift(["name",o]),t.unshift(["type",n]);var a={};return i(t,a),s(a),a};!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(l);var Ge=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],ze=["3857","900913","3785","102113"],qe=function(e,t){var r,n;if(e=e||{},!t)return e;for(n in t)void 0!==(r=t[n])&&(e[n]=r);return e},Ve=function(e,t,r){var n=e*t;return r/Math.sqrt(1-n*n)},We=function(e){return e<0?-1:1},Ke=function(e){return Math.abs(e)<=Te?e:e-We(e)*Oe},He=function(e,t,r){var n=e*r,i=.5*e;return n=Math.pow((1-n)/(1+n),i),Math.tan(.5*(be-t))/n},Ye=function(e,t){for(var r,n,i=.5*e,o=be-2*Math.atan(t),a=0;a<=15;a++)if(r=e*Math.sin(o),o+=n=be-2*Math.atan(t*Math.pow((1-r)/(1+r),i))-o,Math.abs(n)<=1e-10)return o;return-9999},Xe=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ve(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,r,n=e.x,i=e.y;if(i*Ce>90&&i*Ce<-90&&n*Ce>180&&n*Ce<-180)return null;if(Math.abs(Math.abs(i)-be)<=Ie)return null;if(this.sphere)t=this.x0+this.a*this.k0*Ke(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(Pe+.5*i));else{var o=Math.sin(i),a=He(this.e,i,o);t=this.x0+this.a*this.k0*Ke(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return e.x=t,e.y=r,e},inverse:function(e){var t,r,n=e.x-this.x0,i=e.y-this.y0;if(this.sphere)r=be-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(r=Ye(this.e,o)))return null}return t=Ke(this.long0+n/(this.a*this.k0)),e.x=t,e.y=r,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:g,inverse:g,names:["longlat","identity"]}],Je={},$e=[],et={start:function(){Xe.forEach(m)},add:m,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==Je[t]&&$e[Je[t]]?$e[Je[t]]:void 0}},tt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},rt=tt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};tt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var nt={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},it={};M.projections=et,M.projections.start();var ot=function(e,t,r){if(k(e,t))return r;if(e.datum_type===ve||t.datum_type===ve)return r;var n=e.a,i=e.es;if(e.datum_type===me){if(0!==F(e,!1,r))return;n=6378137,i=.0066943799901413165}var o=t.a,a=t.b,s=t.es;return t.datum_type===me&&(o=6378137,a=6356752.314,s=.0066943799901413165),i!==s||n!==o||j(e.datum_type)||j(t.datum_type)?(r=R(r,i,n),j(e.datum_type)&&(r=L(r,e.datum_type,e.datum_params)),j(t.datum_type)&&(r=D(r,t.datum_type,t.datum_params)),r=B(r,s,o,a),t.datum_type!==me||0===F(t,!0,r)?r:void 0):r},at=function(e,t,r){var n,i,o,a=r.x,s=r.y,l=r.z||0,u={};for(o=0;o<3;o++)if(!t||2!==o||void 0!==r.z)switch(0===o?(n=a,i=-1!=="ew".indexOf(e.axis[o])?"x":"y"):1===o?(n=s,i=-1!=="ns".indexOf(e.axis[o])?"y":"x"):(n=l,i="z"),e.axis[o]){case"e":case"n":u[i]=n;break;case"w":case"s":u[i]=-n;break;case"u":void 0!==r[i]&&(u.z=n);break;case"d":void 0!==r[i]&&(u.z=-n);break;default:return null}return u},st=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t},lt=function(e){U(e.x),U(e.y)},ut=M("WGS84"),ct=6,ft="AJSAJS",ht="AFAFAF",pt=65,dt=73,yt=79,gt=86,mt=90,_t={forward:W,inverse:function(e){var t=J(ie(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]},toPoint:K};le.fromMGRS=function(e){return new le(K(e))},le.prototype.toMGRS=function(e){return W([this.x,this.y],e)};var vt,At=.01068115234375,bt=function(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*At))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*At)));var r=e*e;return t[2]=r*(.46875-e*(.013020833333333334+.007120768229166667*e)),r*=e,t[3]=r*(.3645833333333333-.005696614583333333*e),t[4]=r*e*.3076171875,t},wt=function(e,t,r,n){return r*=t,t*=t,n[0]*e-r*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))},Et=function(e,t,r){for(var n=1/(1-t),i=e,o=20;o;--o){var a=Math.sin(i),s=1-t*a*a;if(i-=s=(wt(i,a,Math.cos(i),r)-e)*(s*Math.sqrt(s))*n,Math.abs(s)<Ie)return i}return i},xt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=bt(this.es),this.ml0=wt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,r,n,i=e.x,o=e.y,a=Ke(i-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*a,c=Math.pow(u,2),f=this.ep2*Math.pow(l,2),h=Math.pow(f,2),p=Math.abs(l)>Ie?Math.tan(o):0,d=Math.pow(p,2),y=Math.pow(d,2);t=1-this.es*Math.pow(s,2),u/=Math.sqrt(t);var g=wt(o,s,l,this.en);r=this.a*(this.k0*u*(1+c/6*(1-d+f+c/20*(5-18*d+y+14*f-58*d*f+c/42*(61+179*y-y*d-479*d)))))+this.x0,n=this.a*(this.k0*(g-this.ml0+s*a*u/2*(1+c/12*(5-d+9*f+4*h+c/30*(61+y-58*d+270*f-330*d*f+c/56*(1385+543*y-y*d-3111*d))))))+this.y0}else{var m=l*Math.sin(a);if(Math.abs(Math.abs(m)-1)<Ie)return 93;if(r=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,n=l*Math.cos(a)/Math.sqrt(1-Math.pow(m,2)),(m=Math.abs(n))>=1){if(m-1>Ie)return 93;n=0}else n=Math.acos(n);o<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return e.x=r,e.y=n,e},inverse:function(e){var t,r,n,i,o=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+a/this.k0,r=Et(t,this.es,this.en),Math.abs(r)<be){var s=Math.sin(r),l=Math.cos(r),u=Math.abs(l)>Ie?Math.tan(r):0,c=this.ep2*Math.pow(l,2),f=Math.pow(c,2),h=Math.pow(u,2),p=Math.pow(h,2);t=1-this.es*Math.pow(s,2);var d=o*Math.sqrt(t)/this.k0,y=Math.pow(d,2);n=r-(t*=u)*y/(1-this.es)*.5*(1-y/12*(5+3*h-9*c*h+c-4*f-y/30*(61+90*h-252*c*h+45*p+46*c-y/56*(1385+3633*h+4095*p+1574*p*h)))),i=Ke(this.long0+d*(1-y/6*(1+2*h+c-y/20*(5+28*h+24*p+8*c*h+6*c-y/42*(61+662*h+1320*p+720*p*h))))/l)}else n=be*We(a),i=0;else{var g=Math.exp(o/this.k0),m=.5*(g-1/g),_=this.lat0+a/this.k0,v=Math.cos(_);t=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(m,2))),n=Math.asin(t),a<0&&(n=-n),i=0===m&&0===v?0:Ke(Math.atan2(m,v)+this.long0)}return e.x=i,e.y=n,e},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},It=function(e){var t=Math.exp(e);return(t-1/t)/2},St=function(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),n=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))},Ct=function(e){var t=1+e,r=t-1;return 0===r?e:e*Math.log(t)/r},Pt=function(e){var t=Math.abs(e);return t=Ct(t*(1+t/(St(1,t)+1))),e<0?-t:t},Ot=function(e,t){for(var r,n=2*Math.cos(2*t),i=e.length-1,o=e[i],a=0;--i>=0;)r=n*o-a+e[i],a=o,o=r;return t+r*Math.sin(2*t)},Tt=function(e,t){for(var r,n=2*Math.cos(t),i=e.length-1,o=e[i],a=0;--i>=0;)r=n*o-a+e[i],a=o,o=r;return Math.sin(t)*r},Mt=function(e){var t=Math.exp(e);return(t+1/t)/2},kt=function(e,t,r){for(var n,i,o=Math.sin(t),a=Math.cos(t),s=It(r),l=Mt(r),u=2*a*l,c=-2*o*s,f=e.length-1,h=e[f],p=0,d=0,y=0;--f>=0;)n=d,i=p,h=u*(d=h)-n-c*(p=y)+e[f],y=c*d-i+u*p;return[(u=o*l)*h-(c=a*s)*y,u*y+c*h]},Rt={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(xt.init.apply(this),this.forward=xt.forward,this.inverse=xt.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),r*=t,this.cgb[1]=r*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r*=t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),r*=t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(t*(-24832/14175)-2.4)),r*=t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r*=t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(.25+r*(1/64+r/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),r*=t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r*=t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r*=t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r*=t,this.utg[5]=-.03233083094085698*r,this.gtu[5]=.6650675310896665*r;var n=Ot(this.cbg,this.lat0);this.Zb=-this.Qn*(n+Tt(this.gtu,2*n))},forward:function(e){var t=Ke(e.x-this.long0),r=e.y;r=Ot(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),o=Math.sin(t),a=Math.cos(t);r=Math.atan2(n,a*i),t=Math.atan2(o*i,St(n,i*a)),t=Pt(Math.tan(t));var s,l,u=kt(this.gtu,2*r,2*t);return r+=u[0],t+=u[1],Math.abs(t)<=2.623395162778?(s=this.a*(this.Qn*t)+this.x0,l=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,l=1/0),e.x=s,e.y=l,e},inverse:function(e){var t,r,n=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var o=kt(this.utg,2*i,2*n);i+=o[0],n+=o[1],n=Math.atan(It(n));var a=Math.sin(i),s=Math.cos(i),l=Math.sin(n),u=Math.cos(n);i=Math.atan2(a*u,St(l,u*s)),n=Math.atan2(l,u*s),t=Ke(n+this.long0),r=Ot(this.cgb,i)}else t=1/0,r=1/0;return e.x=t,e.y=r,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},Bt=function(e,t){if(void 0===e){if((e=Math.floor(30*(Ke(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e},Lt={init:function(){var e=Bt(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Se,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Rt.init.apply(this),this.forward=Rt.forward,this.inverse=Rt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Dt=function(e,t){return Math.pow((1-e)/(1+e),t)},jt=20,Ft={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Pe)/(Math.pow(Math.tan(.5*this.lat0+Pe),this.C)*Dt(this.e*e,this.ratexp))},forward:function(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+Pe),this.C)*Dt(this.e*Math.sin(r),this.ratexp))-be,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,r=e.y,n=Math.pow(Math.tan(.5*r+Pe)/this.K,1/this.C),i=jt;i>0&&(r=2*Math.atan(n*Dt(this.e*Math.sin(e.y),-.5*this.e))-be,!(Math.abs(r-e.y)<1e-14));--i)e.y=r;return i?(e.x=t,e.y=r,e):null},names:["gauss"]},Nt={init:function(){Ft.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,r,n,i;return e.x=Ke(e.x-this.long0),Ft.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),n=Math.cos(e.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*n),e.x=i*r*Math.sin(e.x),e.y=i*(this.cosc0*t-this.sinc0*r*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,r,n,i,o;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,o=Math.sqrt(e.x*e.x+e.y*e.y)){var a=2*Math.atan2(o,this.R2);t=Math.sin(a),r=Math.cos(a),i=Math.asin(r*this.sinc0+e.y*t*this.cosc0/o),n=Math.atan2(e.x*t,o*this.cosc0*r-e.y*this.sinc0*t)}else i=this.phic0,n=0;return e.x=n,e.y=i,Ft.inverse.apply(this,[e]),e.x=Ke(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Zt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ie&&(this.k0=.5*(1+We(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ie&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ie&&(this.k0=.5*this.cons*Ve(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/He(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ve(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-be,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,r,n,i,o,a,s=e.x,l=e.y,u=Math.sin(l),c=Math.cos(l),f=Ke(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=Ie&&Math.abs(l+this.lat0)<=Ie?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(f)),e.x=this.a*t*c*Math.sin(f)+this.x0,e.y=this.a*t*(this.coslat0*u-this.sinlat0*c*Math.cos(f))+this.y0,e):(r=2*Math.atan(this.ssfn_(l,u,this.e))-be,i=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=Ie?(o=He(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*o/this.cons,e.x=this.x0+a*Math.sin(s-this.long0),e.y=this.y0-this.con*a*Math.cos(s-this.long0),e):(Math.abs(this.sinlat0)<Ie?(t=2*this.a*this.k0/(1+i*Math.cos(f)),e.y=t*n):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*i*Math.cos(f))),e.y=t*(this.cosX0*n-this.sinX0*i*Math.cos(f))+this.y0),e.x=t*i*Math.sin(f)+this.x0,e))},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,i,o,a=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return t=this.long0,r=this.lat0,a<=Ie?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/a),t=Ke(Math.abs(this.coslat0)<Ie?this.lat0>0?this.long0+Math.atan2(e.x,-1*e.y):this.long0+Math.atan2(e.x,e.y):this.long0+Math.atan2(e.x*Math.sin(s),a*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s))),e.x=t,e.y=r,e)}if(Math.abs(this.coslat0)<=Ie){if(a<=Ie)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*Ye(this.e,n),t=this.con*Ke(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,a<=Ie?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/a),t=Ke(this.long0+Math.atan2(e.x*Math.sin(i),a*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))),r=-1*Ye(this.e,Math.tan(.5*(be+o)));return e.x=t,e.y=r,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,t,r){return t*=r,Math.tan(.5*(be+e))*Math.pow((1-t)/(1+t),.5*r)}},Ut={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,n=1/this.rf,i=2*n-Math.pow(n,2),o=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(t,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*a+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,r=e.y-this.y0,n=t/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,f=0;Math.abs(u-c)>1e-7;){if(++f>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=s,e.y=u,e},names:["somerc"]},Qt=1e-7,Gt={init:function(){var e,t,r,n,i,o,a,s,l,u,c,f=0,h=0,p=0,d=0,y=0,g=0,m=0;this.no_off=ue(this),this.no_rot="no_rot"in this;var _=!1;"alpha"in this&&(_=!0);var v=!1;if("rectified_grid_angle"in this&&(v=!0),_&&(m=this.alpha),v&&(f=this.rectified_grid_angle*Se),_||v)h=this.longc;else if(p=this.long1,y=this.lat1,d=this.long2,g=this.lat2,Math.abs(y-g)<=Qt||(e=Math.abs(y))<=Qt||Math.abs(e-be)<=Qt||Math.abs(Math.abs(this.lat0)-be)<=Qt||Math.abs(Math.abs(g)-be)<=Qt)throw new Error;var A=1-this.es;t=Math.sqrt(A),Math.abs(this.lat0)>Ie?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),e=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/A),this.A=this.B*this.k0*t/e,(i=(n=this.B*t/(r*Math.sqrt(e)))*n-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=n,this.E*=Math.pow(He(this.e,this.lat0,s),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=i=1),_||v?(_?(c=Math.asin(Math.sin(m)/n),v||(f=m)):(c=f,m=Math.asin(n*Math.sin(c))),this.lam0=h-Math.asin(.5*(i-1/i)*Math.tan(c))/this.B):(o=Math.pow(He(this.e,y,Math.sin(y)),this.B),a=Math.pow(He(this.e,g,Math.sin(g)),this.B),i=this.E/o,l=(a-o)/(a+o),u=((u=this.E*this.E)-a*o)/(u+a*o),(e=p-d)<-Math.pi?d-=Oe:e>Math.pi&&(d+=Oe),this.lam0=Ke(.5*(p+d)-Math.atan(u*Math.tan(.5*this.B*(p-d))/l)/this.B),c=Math.atan(2*Math.sin(this.B*Ke(p-this.lam0))/(i-1/i)),f=m=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(m))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(Pe-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(Pe+i))},forward:function(e){var t,r,n,i,o,a,s,l,u={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-be)>Ie){if(t=.5*((o=this.E/Math.pow(He(this.e,e.y,Math.sin(e.y)),this.B))-(a=1/o)),r=.5*(o+a),i=Math.sin(this.B*e.x),n=(t*this.singam-i*this.cosgam)/r,Math.abs(Math.abs(n)-1)<Ie)throw new Error;l=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*e.x),s=Math.abs(a)<Qt?this.A*e.x:this.ArB*Math.atan2(t*this.cosgam+i*this.singam,a)}else l=e.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*e.y;return this.no_rot?(u.x=s,u.y=l):(s-=this.u_0,u.x=l*this.cosrot+s*this.sinrot,u.y=s*this.cosrot-l*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(e){var t,r,n,i,o,a,s,l={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(r=e.y,t=e.x):(r=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=.5*((n=Math.exp(-this.BrA*r))-1/n),o=.5*(n+1/n),s=((a=Math.sin(this.BrA*t))*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(s)-1)<Ie)l.x=0,l.y=s<0?-be:be;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=Ye(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},zt={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ie)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),n=Ve(this.e,t,r),i=He(this.e,this.lat1,t),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=Ve(this.e,o,a),l=He(this.e,this.lat2,o),u=He(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ie?this.ns=Math.log(n/s)/Math.log(i/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=Ie&&(r=We(r)*(be-2*Ie));var n,i,o=Math.abs(Math.abs(r)-be);if(o>Ie)n=He(this.e,r,Math.sin(r)),i=this.a*this.f0*Math.pow(n,this.ns);else{if((o=r*this.ns)<=0)return null;i=0}var a=this.ns*Ke(t-this.long0);return e.x=this.k0*(i*Math.sin(a))+this.x0,e.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,e},inverse:function(e){var t,r,n,i,o,a=(e.x-this.x0)/this.k0,s=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(a*a+s*s),r=1):(t=-Math.sqrt(a*a+s*s),r=-1);var l=0;if(0!==t&&(l=Math.atan2(r*a,r*s)),0!==t||this.ns>0){if(r=1/this.ns,n=Math.pow(t/(this.a*this.f0),r),-9999===(i=Ye(this.e,n)))return null}else i=-be;return o=Ke(l/this.ns+this.long0),e.x=o,e.y=i,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},qt={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,r,n,i,o,a,s,l=e.x,u=e.y,c=Ke(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),n=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),o=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),e.y=s*Math.cos(a)/1,e.x=s*Math.sin(a)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,r,n,i,o,a,s,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.atan2(e.y,e.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(t)),e.x=this.long0-r/this.alfa,a=t,s=0;var u=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(s=1),a=e.y,u+=1}while(0===s&&u<15);return u>=15?null:e},names:["Krovak","krovak"]},Vt=function(e,t,r,n,i){return e*i-t*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)},Wt=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},Kt=function(e){return.375*e*(1+.25*e*(1+.46875*e))},Ht=function(e){return.05859375*e*e*(1+.75*e)},Yt=function(e){return e*e*e*(35/3072)},Xt=function(e,t,r){var n=t*r;return e/Math.sqrt(1-n*n)},Jt=function(e){return Math.abs(e)<be?e:e-We(e)*Math.PI},$t=function(e,t,r,n,i){var o,a;o=e/t;for(var s=0;s<15;s++)if(o+=a=(e-(t*o-r*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)))/(t-2*r*Math.cos(2*o)+4*n*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN},er={init:function(){this.sphere||(this.e0=Wt(this.es),this.e1=Kt(this.es),this.e2=Ht(this.es),this.e3=Yt(this.es),this.ml0=this.a*Vt(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,r,n=e.x,i=e.y;if(n=Ke(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=Xt(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),u=n*Math.cos(i),c=u*u,f=this.es*a*a/(1-this.es);t=s*u*(1-c*l*(1/6-(8-l+8*f)*c/120)),r=this.a*Vt(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-l+6*f)*c/24)}return e.x=t+this.x0,e.y=r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n=e.x/this.a,i=e.y/this.a;if(this.sphere){var o=i+this.lat0;t=Math.asin(Math.sin(o)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(o))}else{var a=this.ml0/this.a+i,s=$t(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-be)<=Ie)return e.x=this.long0,e.y=be,i<0&&(e.y*=-1),e;var l=Xt(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),f=n*this.a/l,h=f*f;t=s-l*Math.tan(s)/u*f*f*(.5-(1+3*c)*f*f/24),r=f*(1-h*(c/3+(1+3*c)*c*h/15))/Math.cos(s)}return e.x=Ke(r+this.long0),e.y=Jt(t),e},names:["Cassini","Cassini_Soldner","cass"]},tr=function(e,t){var r;return e>1e-7?(1-e*e)*(t/(1-(r=e*t)*r)-.5/e*Math.log((1-r)/(1+r))):2*t},rr=.3333333333333333,nr=.17222222222222222,ir=.10257936507936508,or=.06388888888888888,ar=.0664021164021164,sr=.016415012942191543,lr={init:function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-be)<Ie?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<Ie?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=tr(this.e,1),this.mmf=.5/(1-this.es),this.apa=ce(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=tr(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,r,n,i,o,a,s,l,u,c,f=e.x,h=e.y;if(f=Ke(f-this.long0),this.sphere){if(o=Math.sin(h),c=Math.cos(h),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*o+this.cosph0*c*n)<=Ie)return null;t=(r=Math.sqrt(2/r))*c*Math.sin(f),r*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(h+this.lat0)<Ie)return null;r=Pe-.5*h,t=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(f),r*=n}}else{switch(s=0,l=0,u=0,n=Math.cos(f),i=Math.sin(f),o=Math.sin(h),a=tr(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=be+h,a=this.qp-a;break;case this.S_POLE:u=h-be,a=this.qp+a}if(Math.abs(u)<Ie)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),r=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*n):(u=Math.sqrt(2/(1+l*n)))*s*this.ymf,t=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(t=(u=Math.sqrt(a))*i,r=n*(this.mode===this.S_POLE?u:-u)):t=r=0}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,i,o,a,s,l=e.x/this.a,u=e.y/this.a;if(this.sphere){var c,f=0,h=0;if((r=.5*(c=Math.sqrt(l*l+u*u)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=Math.sin(r),f=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(c)<=Ie?0:Math.asin(u*h/c),l*=h,u=f*c;break;case this.OBLIQ:r=Math.abs(c)<=Ie?this.lat0:Math.asin(f*this.sinph0+u*h*this.cosph0/c),l*=h*this.cosph0,u=(f-Math.sin(r)*this.sinph0)*c;break;case this.N_POLE:u=-u,r=be-r;break;case this.S_POLE:r-=be}t=0!==u||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,u):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,u*=this.dd,(a=Math.sqrt(l*l+u*u))<Ie)return e.x=this.long0,e.y=this.lat0,e;i=2*Math.asin(.5*a/this.rq),n=Math.cos(i),l*=i=Math.sin(i),this.mode===this.OBLIQ?(s=n*this.sinb1+u*i*this.cosb1/a,o=this.qp*s,u=a*this.cosb1*n-u*this.sinb1*i):(s=u*i/a,o=this.qp*s,u=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(u=-u),!(o=l*l+u*u))return e.x=this.long0,e.y=this.lat0,e;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}t=Math.atan2(l,u),r=fe(Math.asin(s),this.apa)}return e.x=Ke(this.long0+t),e.y=r,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},ur=function(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)},cr={init:function(){Math.abs(this.lat1+this.lat2)<Ie||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ve(this.e3,this.sin_po,this.cos_po),this.qs1=tr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ve(this.e3,this.sin_po,this.cos_po),this.qs2=tr(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=tr(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Ie?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=tr(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*Ke(t-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return e.x=a,e.y=s,e},inverse:function(e){var t,r,n,i,o,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),i=0,0!==t&&(i=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),o=Ke(i/this.ns0+this.long0),e.x=o,e.y=a,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var r,n,i,o,a=ur(.5*t);if(e<Ie)return a;for(var s=e*e,l=1;l<=25;l++)if(a+=o=.5*(i=1-(n=e*(r=Math.sin(a)))*n)*i/Math.cos(a)*(t/(1-s)-r/i+.5/e*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return a;return null}},fr={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,r,n,i,o,a,s,l=e.x,u=e.y;return n=Ke(l-this.long0),t=Math.sin(u),r=Math.cos(u),i=Math.cos(n),(o=this.sin_p14*t+this.cos_p14*r*i)>0||Math.abs(o)<=Ie?(a=this.x0+1*this.a*r*Math.sin(n)/o,s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*r*i)/o):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*i)),e.x=a,e.y=s,e},inverse:function(e){var t,r,n,i,o,a;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(i=Math.atan2(t,this.rc),r=Math.sin(i),n=Math.cos(i),a=ur(n*this.sin_p14+e.y*r*this.cos_p14/t),o=Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r),o=Ke(this.long0+o)):(a=this.phic0,o=0),e.x=o,e.y=a,e},names:["gnom"]},hr=function(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*be:be;for(var n,i,o,a,s=Math.asin(.5*t),l=0;l<30;l++)if(i=Math.sin(s),o=Math.cos(s),a=e*i,s+=n=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-i/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN},pr={init:function(){this.sphere||(this.k0=Ve(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,r,n=e.x,i=e.y,o=Ke(n-this.long0);if(this.sphere)t=this.x0+this.a*o*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=tr(this.e,Math.sin(i));t=this.x0+this.a*this.k0*o,r=this.y0+this.a*a*.5/this.k0}return e.x=t,e.y=r,e},inverse:function(e){var t,r;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=Ke(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=hr(this.e,2*e.y*this.k0/this.a),t=Ke(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e},names:["cea"]},dr={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,r=e.y,n=Ke(t-this.long0),i=Jt(r-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*i,e},inverse:function(e){var t=e.x,r=e.y;return e.x=Ke(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Jt(this.lat0+(r-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},yr=20,gr={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Wt(this.es),this.e1=Kt(this.es),this.e2=Ht(this.es),this.e3=Yt(this.es),this.ml0=this.a*Vt(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,r,n,i=e.x,o=e.y,a=Ke(i-this.long0);if(n=a*Math.sin(o),this.sphere)Math.abs(o)<=Ie?(t=this.a*a,r=-1*this.a*this.lat0):(t=this.a*Math.sin(n)/Math.tan(o),r=this.a*(Jt(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=Ie)t=this.a*a,r=-1*this.ml0;else{var s=Xt(this.a,this.e,Math.sin(o))/Math.tan(o);t=s*Math.sin(n),r=this.a*Vt(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(n))}return e.x=t+this.x0,e.y=r+this.y0,e},inverse:function(e){var t,r,n,i,o,a,s,l,u;if(n=e.x-this.x0,i=e.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Ie)t=Ke(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+i/this.a,s=n*n/this.a/this.a+a*a,l=a,o=yr;o;--o)if(l+=u=-1*(a*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),Math.abs(u)<=Ie){r=l;break}t=Ke(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=Ie)r=0,t=Ke(this.long0+n/this.a);else{var f,h,p,d,y;for(a=(this.ml0+i)/this.a,s=n*n/this.a/this.a+a*a,l=a,o=yr;o;--o)if(y=this.e*Math.sin(l),f=Math.sqrt(1-y*y)*Math.tan(l),h=this.a*Vt(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(a*(f*(d=h/this.a)+1)-d-.5*f*(d*d+s))/(this.es*Math.sin(2*l)*(d*d+s-2*a*d)/(4*f)+(a-d)*(f*p-2/Math.sin(2*l))-p),Math.abs(u)<=Ie){r=l;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=Ke(this.long0+Math.asin(n*f/this.a)/Math.sin(r))}return e.x=t,e.y=r,e},names:["Polyconic","poly"]},mr={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,r=e.x,n=e.y-this.lat0,i=r-this.long0,o=n/Ae*1e-5,a=i,s=1,l=0;for(t=1;t<=10;t++)s*=o,l+=this.A[t]*s;var u,c=l,f=a,h=1,p=0,d=0,y=0;for(t=1;t<=6;t++)u=p*c+h*f,h=h*c-p*f,p=u,d=d+this.B_re[t]*h-this.B_im[t]*p,y=y+this.B_im[t]*h+this.B_re[t]*p;return e.x=y*this.a+this.x0,e.y=d*this.a+this.y0,e},inverse:function(e){var t,r,n=e.x,i=e.y,o=n-this.x0,a=(i-this.y0)/this.a,s=o/this.a,l=1,u=0,c=0,f=0;for(t=1;t<=6;t++)r=u*a+l*s,l=l*a-u*s,u=r,c=c+this.C_re[t]*l-this.C_im[t]*u,f=f+this.C_im[t]*l+this.C_re[t]*u;for(var h=0;h<this.iterations;h++){var p,d=c,y=f,g=a,m=s;for(t=2;t<=6;t++)p=y*c+d*f,d=d*c-y*f,y=p,g+=(t-1)*(this.B_re[t]*d-this.B_im[t]*y),m+=(t-1)*(this.B_im[t]*d+this.B_re[t]*y);d=1,y=0;var _=this.B_re[1],v=this.B_im[1];for(t=2;t<=6;t++)p=y*c+d*f,d=d*c-y*f,y=p,_+=t*(this.B_re[t]*d-this.B_im[t]*y),v+=t*(this.B_im[t]*d+this.B_re[t]*y);var A=_*_+v*v;c=(g*_+m*v)/A,f=(m*_-g*v)/A}var b=c,w=f,E=1,x=0;for(t=1;t<=9;t++)E*=b,x+=this.D[t]*E;var I=this.lat0+x*Ae*1e5,S=this.long0+w;return e.x=S,e.y=I,e},names:["New_Zealand_Map_Grid","nzmg"]},_r={init:function(){},forward:function(e){var t=e.x,r=e.y,n=Ke(t-this.long0),i=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=i,e.y=o,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=Ke(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e},names:["Miller_Cylindrical","mill"]},vr=20,Ar={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=bt(this.es)},forward:function(e){var t,r,n=e.x,i=e.y;if(n=Ke(n-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=vr;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<Ie)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;t=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);r=this.a*wt(i,l,u,this.en),t=this.a*n*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=r,e},inverse:function(e){var t,r,n,i;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n/=this.C_x*(this.m+Math.cos(t)),this.m?t=ur((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=ur(Math.sin(t)/this.n)),n=Ke(n+this.long0),t=Jt(t)):(t=Et(e.y/this.a,this.es,this.en),(i=Math.abs(t))<be?(i=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),n=Ke(r)):i-Ie<be&&(n=this.long0)),e.x=n,e.y=t,e},names:["Sinusoidal","sinu"]},br={init:function(){},forward:function(e){for(var t=e.x,r=e.y,n=Ke(t-this.long0),i=r,o=Math.PI*Math.sin(r);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<Ie)break}i/=2,Math.PI/2-Math.abs(r)<Ie&&(n=0);var s=.900316316158*this.a*n*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return e.x=s,e.y=l,e},inverse:function(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var n=Ke(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return e.x=n,e.y=i,e},names:["Mollweide","moll"]},wr={init:function(){Math.abs(this.lat1+this.lat2)<Ie||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Wt(this.es),this.e1=Kt(this.es),this.e2=Ht(this.es),this.e3=Yt(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ve(this.e,this.sinphi,this.cosphi),this.ml1=Vt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ie?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ve(this.e,this.sinphi,this.cosphi),this.ml2=Vt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Vt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,r=e.x,n=e.y;if(this.sphere)t=this.a*(this.g-n);else{var i=Vt(this.e0,this.e1,this.e2,this.e3,n);t=this.a*(this.g-i)}var o=this.ns*Ke(r-this.long0),a=this.x0+t*Math.sin(o),s=this.y0+this.rh-t*Math.cos(o);return e.x=a,e.y=s,e},inverse:function(e){var t,r,n,i;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var o=0;if(0!==r&&(o=Math.atan2(t*e.x,t*e.y)),this.sphere)return i=Ke(this.long0+o/this.ns),n=Jt(this.g-r/this.a),e.x=i,e.y=n,e;var a=this.g-r/this.a;return n=$t(a,this.e0,this.e1,this.e2,this.e3),i=Ke(this.long0+o/this.ns),e.x=i,e.y=n,e},names:["Equidistant_Conic","eqdc"]},Er={init:function(){this.R=this.a},forward:function(e){var t,r,n=e.x,i=e.y,o=Ke(n-this.long0);Math.abs(i)<=Ie&&(t=this.x0+this.R*o,r=this.y0);var a=ur(2*Math.abs(i/Math.PI));(Math.abs(o)<=Ie||Math.abs(Math.abs(i)-be)<=Ie)&&(t=this.x0,r=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),f=c/(u+c-1),h=f*f,p=f*(2/u-1),d=p*p,y=Math.PI*this.R*(s*(f-d)+Math.sqrt(l*(f-d)*(f-d)-(d+l)*(h-d)))/(d+l);o<0&&(y=-y),t=this.x0+y;var g=l+f;return y=Math.PI*this.R*(p*g-s*Math.sqrt((d+l)*(l+1)-g*g))/(d+l),r=i>=0?this.y0+y:this.y0-y,e.x=t,e.y=r,e},inverse:function(e){var t,r,n,i,o,a,s,l,u,c,f,h;return e.x-=this.x0,e.y-=this.y0,f=Math.PI*this.R,o=(n=e.x/f)*n+(i=e.y/f)*i,f=3*(i*i/(l=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+n*n)*s*s/l/l/l-9*a*s/l/l)/27)/(u=(a-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(f)>1&&(f=f>=0?1:-1),h=Math.acos(f)/3,r=e.y>=0?(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI,t=Math.abs(n)<Ie?this.long0:Ke(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-i*i)+o*o))/2/n),e.x=t,e.y=r,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},xr={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v,A,b,w,E=e.x,x=e.y,I=Math.sin(e.y),S=Math.cos(e.y),C=Ke(E-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Ie?(e.x=this.x0+this.a*(be-x)*Math.sin(C),e.y=this.y0-this.a*(be-x)*Math.cos(C),e):Math.abs(this.sin_p12+1)<=Ie?(e.x=this.x0+this.a*(be+x)*Math.sin(C),e.y=this.y0+this.a*(be+x)*Math.cos(C),e):(_=this.sin_p12*I+this.cos_p12*S*Math.cos(C),m=(g=Math.acos(_))?g/Math.sin(g):1,e.x=this.x0+this.a*m*S*Math.sin(C),e.y=this.y0+this.a*m*(this.cos_p12*I-this.sin_p12*S*Math.cos(C)),e):(t=Wt(this.es),r=Kt(this.es),n=Ht(this.es),i=Yt(this.es),Math.abs(this.sin_p12-1)<=Ie?(o=this.a*Vt(t,r,n,i,be),a=this.a*Vt(t,r,n,i,x),e.x=this.x0+(o-a)*Math.sin(C),e.y=this.y0-(o-a)*Math.cos(C),e):Math.abs(this.sin_p12+1)<=Ie?(o=this.a*Vt(t,r,n,i,be),a=this.a*Vt(t,r,n,i,x),e.x=this.x0+(o+a)*Math.sin(C),e.y=this.y0+(o+a)*Math.cos(C),e):(s=I/S,l=Xt(this.a,this.e,this.sin_p12),u=Xt(this.a,this.e,I),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*S)),v=0===(f=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(C)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(f)-Math.PI)<=Ie?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(C)*Math.cos(c)/Math.sin(f)),h=this.e*this.sin_p12/Math.sqrt(1-this.es),g=l*v*(1-(A=v*v)*(y=(p=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*p)*(1-y)/6+(b=A*v)/8*(d=h*p)*(1-2*y)+(w=b*v)/120*(y*(4-7*y)-3*h*h*(1-7*y))-w*v/48*d),e.x=this.x0+g*Math.sin(f),e.y=this.y0+g*Math.cos(f),e))},inverse:function(e){var t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v,A,b,w,E;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*be*this.a)return;return r=t/this.a,n=Math.sin(r),i=Math.cos(r),o=this.long0,Math.abs(t)<=Ie?a=this.lat0:(a=ur(i*this.sin_p12+e.y*n*this.cos_p12/t),s=Math.abs(this.lat0)-be,o=Ke(Math.abs(s)<=Ie?this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y):this.long0+Math.atan2(e.x*n,t*this.cos_p12*i-e.y*this.sin_p12*n))),e.x=o,e.y=a,e}return l=Wt(this.es),u=Kt(this.es),c=Ht(this.es),f=Yt(this.es),Math.abs(this.sin_p12-1)<=Ie?(h=this.a*Vt(l,u,c,f,be),t=Math.sqrt(e.x*e.x+e.y*e.y),a=$t((h-t)/this.a,l,u,c,f),o=Ke(this.long0+Math.atan2(e.x,-1*e.y)),e.x=o,e.y=a,e):Math.abs(this.sin_p12+1)<=Ie?(h=this.a*Vt(l,u,c,f,be),t=Math.sqrt(e.x*e.x+e.y*e.y),a=$t((t-h)/this.a,l,u,c,f),o=Ke(this.long0+Math.atan2(e.x,e.y)),e.x=o,e.y=a,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),y=Math.atan2(e.x,e.y),p=Xt(this.a,this.e,this.sin_p12),g=Math.cos(y),_=-(m=this.e*this.cos_p12*g)*m/(1-this.es),v=3*this.es*(1-_)*this.sin_p12*this.cos_p12*g/(1-this.es),w=1-_*(b=(A=t/p)-_*(1+_)*Math.pow(A,3)/6-v*(1+3*_)*Math.pow(A,4)/24)*b/2-A*b*b*b/6,d=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*g),o=Ke(this.long0+Math.asin(Math.sin(y)*Math.sin(b)/Math.cos(d))),E=Math.sin(d),a=Math.atan2((E-this.es*w*this.sin_p12)*Math.tan(d),E*(1-this.es)),e.x=o,e.y=a,e)},names:["Azimuthal_Equidistant","aeqd"]},Ir={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,r,n,i,o,a,s,l=e.x,u=e.y;return n=Ke(l-this.long0),t=Math.sin(u),r=Math.cos(u),i=Math.cos(n),((o=this.sin_p14*t+this.cos_p14*r*i)>0||Math.abs(o)<=Ie)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*r*i)),e.x=a,e.y=s,e},inverse:function(e){var t,r,n,i,o,a,s;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),r=ur(t/this.a),n=Math.sin(r),i=Math.cos(r),a=this.long0,Math.abs(t)<=Ie?(s=this.lat0,e.x=a,e.y=s,e):(s=ur(i*this.sin_p14+e.y*n*this.cos_p14/t),o=Math.abs(this.lat0)-be,Math.abs(o)<=Ie?(a=Ke(this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y)),e.x=a,e.y=s,e):(a=Ke(this.long0+Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n)),e.x=a,e.y=s,e))},names:["ortho"]},Sr={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Cr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Pr={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=be-Pe/2?this.face=Sr.TOP:this.lat0<=-(be-Pe/2)?this.face=Sr.BOTTOM:Math.abs(this.long0)<=Pe?this.face=Sr.FRONT:Math.abs(this.long0)<=be+Pe?this.face=this.long0>0?Sr.RIGHT:Sr.LEFT:this.face=Sr.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,r,n,i,o,a,s={x:0,y:0},l={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,r=e.x,this.face===Sr.TOP)i=be-t,r>=Pe&&r<=be+Pe?(l.value=Cr.AREA_0,n=r-be):r>be+Pe||r<=-(be+Pe)?(l.value=Cr.AREA_1,n=r>0?r-Te:r+Te):r>-(be+Pe)&&r<=-Pe?(l.value=Cr.AREA_2,n=r+be):(l.value=Cr.AREA_3,n=r);else if(this.face===Sr.BOTTOM)i=be+t,r>=Pe&&r<=be+Pe?(l.value=Cr.AREA_0,n=-r+be):r<Pe&&r>=-Pe?(l.value=Cr.AREA_1,n=-r):r<-Pe&&r>=-(be+Pe)?(l.value=Cr.AREA_2,n=-r-be):(l.value=Cr.AREA_3,n=r>0?-r+Te:-r-Te);else{var u,c,f,h,p,d;this.face===Sr.RIGHT?r=pe(r,+be):this.face===Sr.BACK?r=pe(r,+Te):this.face===Sr.LEFT&&(r=pe(r,-be)),h=Math.sin(t),p=Math.cos(t),d=Math.sin(r),u=p*Math.cos(r),c=p*d,f=h,this.face===Sr.FRONT?n=he(i=Math.acos(u),f,c,l):this.face===Sr.RIGHT?n=he(i=Math.acos(c),f,-u,l):this.face===Sr.BACK?n=he(i=Math.acos(-u),f,-c,l):this.face===Sr.LEFT?n=he(i=Math.acos(-c),f,u,l):(i=n=0,l.value=Cr.AREA_0)}return a=Math.atan(12/Te*(n+Math.acos(Math.sin(n)*Math.cos(Pe))-be)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===Cr.AREA_1?a+=be:l.value===Cr.AREA_2?a+=Te:l.value===Cr.AREA_3&&(a+=1.5*Te),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,e.x=s.x,e.y=s.y,e},inverse:function(e){var t,r,n,i,o,a,s,l,u,c,f,h,p={lam:0,phi:0},d={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,r=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?d.value=Cr.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(d.value=Cr.AREA_1,t-=be):e.x<0&&-e.x>=Math.abs(e.y)?(d.value=Cr.AREA_2,t=t<0?t+Te:t-Te):(d.value=Cr.AREA_3,t+=be),u=Te/12*Math.tan(t),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(n=Math.cos(t))*n*(i=Math.tan(r))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===Sr.TOP)l=Math.acos(s),p.phi=be-l,d.value===Cr.AREA_0?p.lam=a+be:d.value===Cr.AREA_1?p.lam=a<0?a+Te:a-Te:d.value===Cr.AREA_2?p.lam=a-be:p.lam=a;else if(this.face===Sr.BOTTOM)l=Math.acos(s),p.phi=l-be,d.value===Cr.AREA_0?p.lam=-a+be:d.value===Cr.AREA_1?p.lam=-a:d.value===Cr.AREA_2?p.lam=-a-be:p.lam=a<0?-a-Te:-a+Te;else{var y,g,m;u=(y=s)*y,g=(u+=(m=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*m)>=1?0:Math.sqrt(1-u),d.value===Cr.AREA_1?(u=g,g=-m,m=u):d.value===Cr.AREA_2?(g=-g,m=-m):d.value===Cr.AREA_3&&(u=g,g=m,m=-u),this.face===Sr.RIGHT?(u=y,y=-g,g=u):this.face===Sr.BACK?(y=-y,g=-g):this.face===Sr.LEFT&&(u=y,y=g,g=-u),p.phi=Math.acos(-m)-be,p.lam=Math.atan2(g,y),this.face===Sr.RIGHT?p.lam=pe(p.lam,-be):this.face===Sr.BACK?p.lam=pe(p.lam,-Te):this.face===Sr.LEFT&&(p.lam=pe(p.lam,+be))}return 0!==this.es&&(c=p.phi<0?1:0,f=Math.tan(p.phi),h=this.b/Math.sqrt(f*f+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-h*h)/(this.one_minus_f*h)),c&&(p.phi=-p.phi)),p.lam+=this.long0,e.x=p.lam,e.y=p.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Or=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Tr=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Mr=.8487,kr=1.3523,Rr=Ce/5,Br=1/Rr,Lr=18,Dr=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},jr=function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])},Fr={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=Ke(e.x-this.long0),r=Math.abs(e.y),n=Math.floor(r*Rr);n<0?n=0:n>=Lr&&(n=Lr-1),r=Ce*(r-Br*n);var i={x:Dr(Or[n],r)*t,y:Dr(Tr[n],r)};return e.y<0&&(i.y=-i.y),i.x=i.x*this.a*Mr+this.x0,i.y=i.y*this.a*kr+this.y0,i},inverse:function(e){var t={x:(e.x-this.x0)/(this.a*Mr),y:Math.abs(e.y-this.y0)/(this.a*kr)};if(t.y>=1)t.x/=Or[Lr][0],t.y=e.y<0?-be:be;else{var r=Math.floor(t.y*Lr);for(r<0?r=0:r>=Lr&&(r=Lr-1);;)if(Tr[r][0]>t.y)--r;else{if(!(Tr[r+1][0]<=t.y))break;++r}var n=Tr[r],i=5*(t.y-n[0])/(Tr[r+1][0]-n[0]);i=de((function(e){return(Dr(n,e)-t.y)/jr(n,e)}),i,Ie,100),t.x/=Dr(Or[r],i),t.y=(5*r+i)*Se,e.y<0&&(t.y=-t.y)}return t.x=Ke(t.x+this.long0),t},names:["Robinson","robin"]},Nr={init:function(){this.name="geocent"},forward:function(e){return R(e,this.es,this.a)},inverse:function(e){return B(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Zr={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Ur={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},Qr={init:function(){if(Object.keys(Ur).forEach(function(e){if(void 0===this[e])this[e]=Ur[e].def;else{if(Ur[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);Ur[e].num&&(this[e]=parseFloat(this[e]))}Ur[e].degrees&&(this[e]=this[e]*Se)}.bind(this)),Math.abs(Math.abs(this.lat0)-be)<Ie?this.mode=this.lat0<0?Zr.S_POLE:Zr.N_POLE:Math.abs(this.lat0)<Ie?this.mode=Zr.EQUIT:(this.mode=Zr.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)},forward:function(e){e.x-=this.long0;var t,r,n,i,o=Math.sin(e.y),a=Math.cos(e.y),s=Math.cos(e.x);switch(this.mode){case Zr.OBLIQ:r=this.sinph0*o+this.cosph0*a*s;break;case Zr.EQUIT:r=a*s;break;case Zr.S_POLE:r=-o;break;case Zr.N_POLE:r=o}switch(t=(r=this.pn1/(this.p-r))*a*Math.sin(e.x),this.mode){case Zr.OBLIQ:r*=this.cosph0*o-this.sinph0*a*s;break;case Zr.EQUIT:r*=o;break;case Zr.N_POLE:r*=-a*s;break;case Zr.S_POLE:r*=a*s}return i=1/((n=r*this.cg+t*this.sg)*this.sw*this.h1+this.cw),t=(t*this.cg-r*this.sg)*this.cw*i,r=n*i,e.x=t*this.a,e.y=r*this.a,e},inverse:function(e){e.x/=this.a,e.y/=this.a;var t,r,n,i={x:e.x,y:e.y};n=1/(this.pn1-e.y*this.sw),t=this.pn1*e.x*n,r=this.pn1*e.y*this.cw*n,e.x=t*this.cg+r*this.sg,e.y=r*this.cg-t*this.sg;var o=St(e.x,e.y);if(Math.abs(o)<Ie)i.x=0,i.y=e.y;else{var a,s;switch(s=1-o*o*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/o+o/this.pn1),a=Math.sqrt(1-s*s),this.mode){case Zr.OBLIQ:i.y=Math.asin(a*this.sinph0+e.y*s*this.cosph0/o),e.y=(a-this.sinph0*Math.sin(i.y))*o,e.x*=s*this.cosph0;break;case Zr.EQUIT:i.y=Math.asin(e.y*s/o),e.y=a*o,e.x*=s;break;case Zr.N_POLE:i.y=Math.asin(a),e.y=-e.y;break;case Zr.S_POLE:i.y=-Math.asin(a)}i.x=Math.atan2(e.x,e.y)}return e.x=i.x+this.long0,e.y=i.y,e},names:["Tilted_Perspective","tpers"]},Gr={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(e){var t,r,n,i,o=e.x,a=e.y;if(o-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/St(this.radius_p*Math.cos(a),Math.sin(a));if(r=s*Math.cos(o)*Math.cos(a),n=s*Math.sin(o)*Math.cos(a),i=s*Math.sin(a),(this.radius_g-r)*r-n*n-i*i*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;t=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/St(i,t)),e.y=this.radius_g_1*Math.atan(i/t)):(e.x=this.radius_g_1*Math.atan(n/t),e.y=this.radius_g_1*Math.atan(i/St(n,t)))}else"sphere"===this.shape&&(t=Math.cos(a),r=Math.cos(o)*t,n=Math.sin(o)*t,i=Math.sin(a),t=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/St(i,t)),e.y=this.radius_g_1*Math.atan(i/t)):(e.x=this.radius_g_1*Math.atan(n/t),e.y=this.radius_g_1*Math.atan(i/St(n,t))));return e.x=e.x*this.a,e.y=e.y*this.a,e},inverse:function(e){var t,r,n,i,o=-1,a=0,s=0;if(e.x=e.x/this.a,e.y=e.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(e.y/this.radius_g_1),a=Math.tan(e.x/this.radius_g_1)*St(1,s)):(a=Math.tan(e.x/this.radius_g_1),s=Math.tan(e.y/this.radius_g_1)*St(1,a));var l=s/this.radius_p;if(t=a*a+l*l+o*o,(n=(r=2*this.radius_g*o)*r-4*t*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=(-r-Math.sqrt(n))/(2*t),o=this.radius_g+i*o,a*=i,s*=i,e.x=Math.atan2(a,o),e.y=Math.atan(s*Math.cos(e.x)/o),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(e.y/this.radius_g_1),a=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(e.x/this.radius_g_1),s=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+a*a)),t=a*a+s*s+o*o,(n=(r=2*this.radius_g*o)*r-4*t*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=(-r-Math.sqrt(n))/(2*t),o=this.radius_g+i*o,a*=i,s*=i,e.x=Math.atan2(a,o),e.y=Math.atan(s*Math.cos(e.x)/o)}return e.x=e.x+this.long0,e},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};return V.defaultDatum="WGS84",V.Proj=M,V.WGS84=new V.Proj("WGS84"),V.Point=le,V.toPoint=st,V.defs=l,V.nadgrid=function(e,t){var r=new DataView(t),n=x(r),i=I(r,n);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var o={header:i,subgrids:C(r,i,n)};return it[e]=o,o},V.transform=G,V.mgrs=_t,V.version="2.9.0",(vt=V).Proj.projections.add(xt),vt.Proj.projections.add(Rt),vt.Proj.projections.add(Lt),vt.Proj.projections.add(Nt),vt.Proj.projections.add(Zt),vt.Proj.projections.add(Ut),vt.Proj.projections.add(Gt),vt.Proj.projections.add(zt),vt.Proj.projections.add(qt),vt.Proj.projections.add(er),vt.Proj.projections.add(lr),vt.Proj.projections.add(cr),vt.Proj.projections.add(fr),vt.Proj.projections.add(pr),vt.Proj.projections.add(dr),vt.Proj.projections.add(gr),vt.Proj.projections.add(mr),vt.Proj.projections.add(_r),vt.Proj.projections.add(Ar),vt.Proj.projections.add(br),vt.Proj.projections.add(wr),vt.Proj.projections.add(Er),vt.Proj.projections.add(xr),vt.Proj.projections.add(Ir),vt.Proj.projections.add(Pr),vt.Proj.projections.add(Fr),vt.Proj.projections.add(Nr),vt.Proj.projections.add(Qr),vt.Proj.projections.add(Gr),V}()},82582:function(e){e.exports=function(){"use strict";function e(e,n,i,o,a){!function e(r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,l=n-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);e(r,n,Math.max(i,Math.floor(n-l*c/s+f)),Math.min(o,Math.floor(n+(s-l)*c/s+f)),a)}var h=r[n],p=i,d=o;for(t(r,i,n),a(r[o],h)>0&&t(r,i,o);p<d;){for(t(r,p,d),p++,d--;a(r[p],h)<0;)p++;for(;a(r[d],h)>0;)d--}0===a(r[i],h)?t(r,i,d):t(r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}(e,n,i||0,o||e.length-1,a||r)}function t(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function r(e,t){return e<t?-1:e>t?1:0}var n=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function o(e,t){a(e,0,e.children.length,t,e)}function a(e,t,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t;o<r;o++){var a=e.children[o];s(i,e.leaf?n(a):a)}return i}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function u(e,t){return e.minY-t.minY}function c(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function f(e){return e.maxX-e.minX+(e.maxY-e.minY)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function d(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,r,n,i,o){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=i)){var s=r+Math.ceil((n-r)/i/2)*i;e(t,s,r,n,o),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(e){var t=this.data,r=[];if(!p(e,t))return r;for(var n=this.toBBox,i=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],s=t.leaf?n(a):a;p(e,s)&&(t.leaf?r.push(a):h(e,s)?this._all(a,r):i.push(a))}t=i.pop()}return r},n.prototype.collides=function(e){var t=this.data;if(!p(e,t))return!1;for(var r=[];t;){for(var n=0;n<t.children.length;n++){var i=t.children[n],o=t.leaf?this.toBBox(i):i;if(p(e,o)){if(t.leaf||h(e,o))return!0;r.push(i)}}t=r.pop()}return!1},n.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(e,t){if(!e)return this;for(var r,n,o,a=this.data,s=this.toBBox(e),l=[],u=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],r=u.pop(),o=!0),a.leaf){var c=i(e,a.children,t);if(-1!==c)return a.children.splice(c,1),l.push(a),this._condense(l),this}o||a.leaf||!h(a,s)?n?(r++,a=n.children[r],o=!1):a=null:(l.push(a),u.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(e){return e},n.prototype.compareMinX=function(e,t){return e.minX-t.minX},n.prototype.compareMinY=function(e,t){return e.minY-t.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(e){return this.data=e,this},n.prototype._all=function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},n.prototype._build=function(e,t,r,n){var i,a=r-t+1,s=this._maxEntries;if(a<=s)return o(i=d(e.slice(t,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(i=d([])).leaf=!1,i.height=n;var l=Math.ceil(a/s),u=l*Math.ceil(Math.sqrt(s));y(e,t,r,u,this.compareMinX);for(var c=t;c<=r;c+=u){var f=Math.min(c+u-1,r);y(e,c,f,l,this.compareMinY);for(var h=c;h<=f;h+=l){var p=Math.min(h+l-1,f);i.children.push(this._build(e,h,p,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(e,t,r,n){for(;n.push(t),!t.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<t.children.length;s++){var l=t.children[s],u=c(l),f=(h=e,p=l,(Math.max(p.maxX,h.maxX)-Math.min(p.minX,h.minX))*(Math.max(p.maxY,h.maxY)-Math.min(p.minY,h.minY))-u);f<o?(o=f,i=u<i?u:i,a=l):f===o&&u<i&&(i=u,a=l)}t=a||t.children[0]}var h,p;return t},n.prototype._insert=function(e,t,r){var n=r?e:this.toBBox(e),i=[],o=this._chooseSubtree(n,this.data,t,i);for(o.children.push(e),s(o,n);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(n,i,t)},n.prototype._split=function(e,t){var r=e[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n),s=d(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,o(r,this.toBBox),o(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(e,t){this.data=d([e,t]),this.data.height=e.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(e,t,r){for(var n,i,o,s,l,u,f,h=1/0,p=1/0,d=t;d<=r-t;d++){var y=a(e,0,d,this.toBBox),g=a(e,d,r,this.toBBox),m=(i=y,o=g,s=void 0,l=void 0,u=void 0,f=void 0,s=Math.max(i.minX,o.minX),l=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),f=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,f-l)),_=c(y)+c(g);m<h?(h=m,n=d,p=_<p?_:p):m===h&&_<p&&(p=_,n=d)}return n||r-t},n.prototype._chooseSplitAxis=function(e,t,r){var n=e.leaf?this.compareMinX:l,i=e.leaf?this.compareMinY:u;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)},n.prototype._allDistMargin=function(e,t,r,n){e.children.sort(n);for(var i=this.toBBox,o=a(e,0,t,i),l=a(e,r-t,r,i),u=f(o)+f(l),c=t;c<r-t;c++){var h=e.children[c];s(o,e.leaf?i(h):h),u+=f(o)}for(var p=r-t-1;p>=t;p--){var d=e.children[p];s(l,e.leaf?i(d):d),u+=f(l)}return u},n.prototype._adjustParentBBoxes=function(e,t,r){for(var n=r;n>=0;n--)s(t[n],e)},n.prototype._condense=function(e){for(var t=e.length-1,r=void 0;t>=0;t--)0===e[t].children.length?t>0?(r=e[t-1].children).splice(r.indexOf(e[t]),1):this.clear():o(e[t],this.toBBox)},n}()},89509:(e,t,r)=>{var n=r(48764),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},94830:(e,t,r)=>{"use strict";var n=r(43389),i=r(48764).Buffer;e.exports=function(e){return new n((function(t,r){var n=e.slice(-3),o=new XMLHttpRequest;o.open("GET",e,!0),"prj"!==n&&"cpg"!==n&&(o.responseType="arraybuffer"),o.addEventListener("load",(function(){return o.status>399?"prj"===n||"cpg"===n?t(!1):r(new Error(o.status)):t("prj"!==n&&"cpg"!==n?i.from(o.response):o.response)}),!1),o.send()}))}},9078:(e,t,r)=>{"use strict";var n=r(94830),i=r(48764).Buffer;e.exports=async function(e){if(!r.g.fetch)return n(e);var t=e.slice(-3).toLowerCase(),o="prj"===t||"cpg"===t;try{if((a=await fetch(e)).status>399)throw new Error(a.statusText);if(o)return a.text();var a=await a.arrayBuffer();return i.from(a)}catch(e){if(o)return!1;throw e}}},79003:(e,t,r)=>{"use strict";var n=r(73213);n.default&&(n=n.default);var i=r(32555),o=r(9078),a=r(76415),s=r(9462),l=r(43389),u=r(95079),c=r(48764).Buffer,f=new u({max:20});function h(e){if(!e)throw new Error("forgot to pass buffer");return c.isBuffer(e)?e:e instanceof r.g.ArrayBuffer?c.from(e):e.buffer instanceof r.g.ArrayBuffer?1===e.BYTES_PER_ELEMENT?c.from(e):c.from(e.buffer):void 0}function p(e,t){return"string"==typeof e&&f.has(e)?l.resolve(f.get(e)):p.getShapefile(e,t).then((function(t){return"string"==typeof e&&f.set(e,t),t}))}p.combine=function(e){for(var t={type:"FeatureCollection",features:[]},r=0,n=e[0].length;r<n;)t.features.push({type:"Feature",geometry:e[0][r],properties:e[1][r]}),r++;return t},p.parseZip=function(e,t){var r;e=h(e);var o=i(e),l=[];for(r in t=t||[],o)-1===r.indexOf("__MACOSX")&&("shp"===r.slice(-3).toLowerCase()?(l.push(r.slice(0,-4)),o[r.slice(0,-3)+r.slice(-3).toLowerCase()]=o[r]):"prj"===r.slice(-3).toLowerCase()?o[r.slice(0,-3)+r.slice(-3).toLowerCase()]=n(o[r]):"json"===r.slice(-4).toLowerCase()||t.indexOf(r.split(".").pop())>-1?l.push(r.slice(0,-3)+r.slice(-3).toLowerCase()):"dbf"!==r.slice(-3).toLowerCase()&&"cpg"!==r.slice(-3).toLowerCase()||(o[r.slice(0,-3)+r.slice(-3).toLowerCase()]=o[r]));if(!l.length)throw new Error("no layers founds");var u=l.map((function(e){var r,n,i=e.lastIndexOf(".");return i>-1&&e.slice(i).indexOf("json")>-1?(r=JSON.parse(o[e])).fileName=e.slice(0,i):t.indexOf(e.slice(i+1))>-1?(r=o[e]).fileName=e:(o[e+".dbf"]&&(n=s(o[e+".dbf"],o[e+".cpg"])),(r=p.combine([a(o[e+".shp"],o[e+".prj"]),n])).fileName=e),r}));return 1===u.length?u[0]:u},p.getShapefile=function(e,t){return"string"==typeof e?".zip"===e.slice(-4).toLowerCase()?function(e,t){return o(e).then((function(e){return p.parseZip(e,t)}))}(e,t):l.all([l.all([o(e+".shp"),o(e+".prj")]).then((function(e){var t=!1;try{e[1]&&(t=n(e[1]))}catch(e){t=!1}return a(e[0],t)})),l.all([o(e+".dbf"),o(e+".cpg")]).then((function(e){return s(e[0],e[1])}))]).then(p.combine):new l((function(t){t(p.parseZip(e))}))},p.parseShp=function(e,t){if(e=h(e),c.isBuffer(t)&&(t=t.toString()),"string"==typeof t)try{t=n(t)}catch(e){t=!1}return a(e,t)},p.parseDbf=function(e,t){return e=h(e),s(e,t)},e.exports=p},76415:e=>{"use strict";function t(e,t){return!function(e){for(var t,r,n=0,i=1,o=e.length;i<o;)t=r||e[0],n+=((r=e[i])[0]-t[0])*(r[1]+t[1]),i++;return n>0}(t)&&e.length?e[e.length-1].push(t):e.push([t]),e}n.prototype.parsePoint=function(e){return{type:"Point",coordinates:this.parseCoord(e,0)}},n.prototype.parseZPoint=function(e){var t=this.parsePoint(e);return t.coordinates.push(e.readDoubleLE(16)),t},n.prototype.parsePointArray=function(e,t,r){for(var n=[],i=0;i<r;)n.push(this.parseCoord(e,t)),t+=16,i++;return n},n.prototype.parseZPointArray=function(e,t,r,n){for(var i=0;i<r;)n[i].push(e.readDoubleLE(t)),i++,t+=8;return n},n.prototype.parseArrayGroup=function(e,t,r,n,i){for(var o,a,s=[],l=0,u=0;l<n;)r+=4,o=u,(a=(u=++l===n?i:e.readInt32LE(r))-o)&&(s.push(this.parsePointArray(e,t,a)),t+=a<<4);return s},n.prototype.parseZArrayGroup=function(e,t,r,n){for(var i=0;i<r;)n[i]=this.parseZPointArray(e,t,n[i].length,n[i]),t+=n[i].length<<3,i++;return n},n.prototype.parseMultiPoint=function(e){var t={},r=this.parseCoord(e,0),n=this.parseCoord(e,16);t.bbox=[r[0],r[1],n[0],n[1]];var i=e.readInt32LE(32,!0);return 1===i?(t.type="Point",t.coordinates=this.parseCoord(e,36)):(t.type="MultiPoint",t.coordinates=this.parsePointArray(e,36,i)),t},n.prototype.parseZMultiPoint=function(e){var t,r=this.parseMultiPoint(e);if("Point"===r.type)return r.coordinates.push(e.readDoubleLE(72)),r;var n=52+((t=r.coordinates.length)<<4);return r.coordinates=this.parseZPointArray(e,n,t,r.coordinates),r},n.prototype.parsePolyline=function(e){var t={},r=this.parseCoord(e,0),n=this.parseCoord(e,16);t.bbox=[r[0],r[1],n[0],n[1]];var i,o=e.readInt32LE(32),a=e.readInt32LE(36);return 1===o?(t.type="LineString",i=44,t.coordinates=this.parsePointArray(e,i,a)):(t.type="MultiLineString",i=40+(o<<2),t.coordinates=this.parseArrayGroup(e,i,40,o,a)),t},n.prototype.parseZPolyline=function(e){var t,r=this.parsePolyline(e),n=r.coordinates.length;return"LineString"===r.type?(t=60+(n<<4),r.coordinates=this.parseZPointArray(e,t,n,r.coordinates),r):(t=56+(r.coordinates.reduce((function(e,t){return e+t.length}),0)<<4)+(n<<2),r.coordinates=this.parseZArrayGroup(e,t,n,r.coordinates),r)},n.prototype.polyFuncs=function(e){return"LineString"===e.type?(e.type="Polygon",e.coordinates=[e.coordinates],e):(e.coordinates=e.coordinates.reduce(t,[]),1===e.coordinates.length?(e.type="Polygon",e.coordinates=e.coordinates[0],e):(e.type="MultiPolygon",e))},n.prototype.parsePolygon=function(e){return this.polyFuncs(this.parsePolyline(e))},n.prototype.parseZPolygon=function(e){return this.polyFuncs(this.parseZPolyline(e))};var r={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function n(e,t){if(!(this instanceof n))return new n(e,t);this.buffer=e,this.shpFuncs(t),this.rows=this.getRows()}n.prototype.shpFuncs=function(e){var t,n=this.getShpCode();if(n>20&&(n-=20),!(n in r))throw new Error("I don't know that shp type");this.parseFunc=this[r[n]],this.parseCoord=(t=e)?function(e,r){return t.inverse([e.readDoubleLE(r),e.readDoubleLE(r+8)])}:function(e,t){return[e.readDoubleLE(t),e.readDoubleLE(t+8)]}},n.prototype.getShpCode=function(){return this.parseHeader().shpCode},n.prototype.parseHeader=function(){var e=this.buffer.slice(0,100);return{length:e.readInt32BE(24),version:e.readInt32LE(28),shpCode:e.readInt32LE(32),bbox:[e.readDoubleLE(36),e.readDoubleLE(44),e.readDoubleLE(52),e.readDoubleLE(52)]}},n.prototype.getRows=function(){for(var e,t=100,r=this.buffer.byteLength,n=[];t<r;)e=this.getRow(t),t+=8,t+=e.len,e.type?n.push(this.parseFunc(e.data)):n.push(null);return n},n.prototype.getRow=function(e){var t=this.buffer.slice(e,e+12),r=t.readInt32BE(4)<<1,n=this.buffer.slice(e+12,e+r+8);return{id:t.readInt32BE(0),len:r,data:n,type:t.readInt32LE(8)}},e.exports=function(e,t){return new n(e,t).rows}},32555:(e,t,r)=>{"use strict";var n=r(66085);e.exports=function(e){var t=new n(e).file(/.+/),r={};return t.forEach((function(e){"shp"===e.name.slice(-3).toLowerCase()||"dbf"===e.name.slice(-3).toLowerCase()?r[e.name]=e.asNodeBuffer():r[e.name]=e.asText()})),r}},95079:e=>{!function(){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(){return 1}e.exports?e.exports=o:this.LRUCache=o;var n=!1;function i(e){n||"string"==typeof e||"number"==typeof e||(n=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof e).stack))}function o(e){if(!(this instanceof o))return new o(e);"number"==typeof e&&(e={max:e}),e||(e={}),this._max=e.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=e.length||r,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=r),this._allowStale=e.stale||!1,this._maxAge=e.maxAge||null,this._dispose=e.dispose,this.reset()}function a(e,t,r){i(t);var n=e._cache[t];return n&&(s(e,n)?(c(e,n),e._allowStale||(n=void 0)):r&&function(e,t){u(e,t),t.lu=e._mru++,e._lruList[t.lu]=t}(e,n),n&&(n=n.value)),n}function s(e,t){if(!t||!t.maxAge&&!e._maxAge)return!1;var r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e._maxAge&&r>e._maxAge}function l(e){for(;e._lru<e._mru&&e._length>e._max;)c(e,e._lruList[e._lru])}function u(e,t){for(delete e._lruList[t.lu];e._lru<e._mru&&!e._lruList[e._lru];)e._lru++}function c(e,t){t&&(e._dispose&&e._dispose(t.key,t.value),e._length-=t.length,e._itemCount--,delete e._cache[t.key],u(e,t))}function f(e,t,r,n,i,o){this.key=e,this.value=t,this.lu=r,this.length=n,this.now=i,o&&(this.maxAge=o)}Object.defineProperty(o.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this._max=e,this._length>this._max&&l(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(o.prototype,"lengthCalculator",{set:function(e){if("function"!=typeof e)for(var t in this._lengthCalculator=r,this._length=this._itemCount,this._cache)this._cache[t].length=1;else for(var t in this._lengthCalculator=e,this._length=0,this._cache)this._cache[t].length=this._lengthCalculator(this._cache[t].value),this._length+=this._cache[t].length;this._length>this._max&&l(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(o.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),o.prototype.forEach=function(e,t){t=t||this;for(var r=0,n=this._itemCount,i=this._mru-1;i>=0&&r<n;i--)if(this._lruList[i]){r++;var o=this._lruList[i];s(this,o)&&(c(this,o),this._allowStale||(o=void 0)),o&&e.call(t,o.value,o.key,this)}},o.prototype.keys=function(){for(var e=new Array(this._itemCount),t=0,r=this._mru-1;r>=0&&t<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];e[t++]=n.key}return e},o.prototype.values=function(){for(var e=new Array(this._itemCount),t=0,r=this._mru-1;r>=0&&t<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];e[t++]=n.value}return e},o.prototype.reset=function(){if(this._dispose&&this._cache)for(var e in this._cache)this._dispose(e,this._cache[e].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},o.prototype.dump=function(){for(var e=[],t=0,r=this._mru-1;r>=0&&t<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];s(this,n)||(++t,e.push({k:n.key,v:n.value,e:n.now+(n.maxAge||0)}))}return e},o.prototype.dumpLru=function(){return this._lruList},o.prototype.set=function(e,r,n){n=n||this._maxAge,i(e);var o=n?Date.now():0,a=this._lengthCalculator(r);if(t(this._cache,e))return a>this._max?(c(this,this._cache[e]),!1):(this._dispose&&this._dispose(e,this._cache[e].value),this._cache[e].now=o,this._cache[e].maxAge=n,this._cache[e].value=r,this._length+=a-this._cache[e].length,this._cache[e].length=a,this.get(e),this._length>this._max&&l(this),!0);var s=new f(e,r,this._mru++,a,o,n);return s.length>this._max?(this._dispose&&this._dispose(e,r),!1):(this._length+=s.length,this._lruList[s.lu]=this._cache[e]=s,this._itemCount++,this._length>this._max&&l(this),!0)},o.prototype.has=function(e){return i(e),!!t(this._cache,e)&&!s(this,this._cache[e])},o.prototype.get=function(e){return i(e),a(this,e,!0)},o.prototype.peek=function(e){return i(e),a(this,e,!1)},o.prototype.pop=function(){var e=this._lruList[this._lru];return c(this,e),e||null},o.prototype.del=function(e){i(e),c(this,this._cache[e])},o.prototype.load=function(e){this.reset();for(var t=Date.now(),r=e.length-1;r>=0;r--){var n=e[r];i(n.k);var o=n.e||0;if(0===o)this.set(n.k,n.v);else{var a=o-t;a>0&&this.set(n.k,n.v,a)}}}}()},26657:(e,t,r)=>{e=r.nmd(e);var n=void 0,i=function(t){return n||(n=new Promise((function(n,i){var o,a=void 0!==t?t:{},s=a.onAbort;a.onAbort=function(e){i(new Error(e)),s&&s(e)},a.postRun=a.postRun||[],a.postRun.push((function(){n(a)})),e=void 0,o||(o=void 0!==a?a:{}),o.onRuntimeInitialized=function(){function e(e,t){switch(typeof t){case"boolean":H(e,t?1:0);break;case"number":q(e,t);break;case"string":W(e,t,-1,-1);break;case"object":if(null===t)V(e);else if(null!=t.length){var r=St(t);K(e,r,t.length,-1),Mt(r)}else Y(e,"Wrong API use : tried to return a value of an unknown type ("+t+").",-1);break;default:V(e)}}function t(e,t){for(var r=[],n=0;n<e;n+=1){var i=te(t+4*n,"i32"),o=Z(i);if(1===o||2===o)i=z(i);else if(3===o)i=Q(i);else if(4===o){i=U(o=i),o=G(o);for(var a=new Uint8Array(i),s=0;s<i;s+=1)a[s]=I[o+s];i=a}else i=null;r.push(i)}return r}function r(e,t){this.La=e,this.db=t,this.Ja=1,this.fb=[]}function n(e,t){if(this.db=t,t=j(e)+1,this.Ya=Tt(t),null===this.Ya)throw Error("Unable to allocate memory for the SQL string");D(e,S,this.Ya,t),this.eb=this.Ya,this.Ua=this.ib=null}function i(e){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=e){var t=this.filename,r="/",n=t;if(r&&(r="string"==typeof r?r:Pe(r),n=t?ie(r+"/"+t):r),t=at(!0,!0),n=Qe(n,4095&(void 0!==t?t:438)|32768,0),e){if("string"==typeof e){r=Array(e.length);for(var i=0,o=e.length;i<o;++i)r[i]=e.charCodeAt(i);e=r}Xe(n,146|t),r=$e(n,577),nt(r,e,0,e.length,0),et(r),Xe(n,t)}}this.handleError(l(this.filename,a)),this.db=te(a,"i32"),J(this.db),this.Za={},this.Na={}}var a=Dt(4),s=o.cwrap,l=s("sqlite3_open","number",["string","number"]),u=s("sqlite3_close_v2","number",["number"]),c=s("sqlite3_exec","number",["number","string","number","number","number"]),f=s("sqlite3_changes","number",["number"]),h=s("sqlite3_prepare_v2","number",["number","string","number","number","number"]),p=s("sqlite3_sql","string",["number"]),d=s("sqlite3_normalized_sql","string",["number"]),y=s("sqlite3_prepare_v2","number",["number","number","number","number","number"]),g=s("sqlite3_bind_text","number",["number","number","number","number","number"]),m=s("sqlite3_bind_blob","number",["number","number","number","number","number"]),_=s("sqlite3_bind_double","number",["number","number","number"]),v=s("sqlite3_bind_int","number",["number","number","number"]),A=s("sqlite3_bind_parameter_index","number",["number","string"]),b=s("sqlite3_step","number",["number"]),w=s("sqlite3_errmsg","string",["number"]),E=s("sqlite3_column_count","number",["number"]),x=s("sqlite3_data_count","number",["number"]),C=s("sqlite3_column_double","number",["number","number"]),P=s("sqlite3_column_text","string",["number","number"]),O=s("sqlite3_column_blob","number",["number","number"]),T=s("sqlite3_column_bytes","number",["number","number"]),M=s("sqlite3_column_type","number",["number","number"]),k=s("sqlite3_column_name","string",["number","number"]),R=s("sqlite3_reset","number",["number"]),B=s("sqlite3_clear_bindings","number",["number"]),F=s("sqlite3_finalize","number",["number"]),N=s("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Z=s("sqlite3_value_type","number",["number"]),U=s("sqlite3_value_bytes","number",["number"]),Q=s("sqlite3_value_text","string",["number"]),G=s("sqlite3_value_blob","number",["number"]),z=s("sqlite3_value_double","number",["number"]),q=s("sqlite3_result_double","",["number","number"]),V=s("sqlite3_result_null","",["number"]),W=s("sqlite3_result_text","",["number","string","number","number"]),K=s("sqlite3_result_blob","",["number","number","number","number"]),H=s("sqlite3_result_int","",["number","number"]),Y=s("sqlite3_result_error","",["number","string","number"]),X=s("sqlite3_aggregate_context","number",["number","number"]),J=s("RegisterExtensionFunctions","number",["number"]);r.prototype.bind=function(e){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(e)?this.xb(e):null==e||"object"!=typeof e||this.yb(e)},r.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var e=b(this.La);switch(e){case 100:return!0;case 101:return!1;default:throw this.db.handleError(e)}},r.prototype.sb=function(e){return null==e&&(e=this.Ja,this.Ja+=1),C(this.La,e)},r.prototype.Cb=function(e){if(null==e&&(e=this.Ja,this.Ja+=1),e=P(this.La,e),"function"!=typeof BigInt)throw Error("BigInt is not supported");return BigInt(e)},r.prototype.Db=function(e){return null==e&&(e=this.Ja,this.Ja+=1),P(this.La,e)},r.prototype.getBlob=function(e){null==e&&(e=this.Ja,this.Ja+=1);var t=T(this.La,e);e=O(this.La,e);for(var r=new Uint8Array(t),n=0;n<t;n+=1)r[n]=I[e+n];return r},r.prototype.get=function(e,t){t=t||{},null!=e&&this.bind(e)&&this.step(),e=[];for(var r=x(this.La),n=0;n<r;n+=1)switch(M(this.La,n)){case 1:var i=t.useBigInt?this.Cb(n):this.sb(n);e.push(i);break;case 2:e.push(this.sb(n));break;case 3:e.push(this.Db(n));break;case 4:e.push(this.getBlob(n));break;default:e.push(null)}return e},r.prototype.getColumnNames=function(){for(var e=[],t=E(this.La),r=0;r<t;r+=1)e.push(k(this.La,r));return e},r.prototype.getAsObject=function(e,t){e=this.get(e,t),t=this.getColumnNames();for(var r={},n=0;n<t.length;n+=1)r[t[n]]=e[n];return r},r.prototype.getSQL=function(){return p(this.La)},r.prototype.getNormalizedSQL=function(){return d(this.La)},r.prototype.run=function(e){return null!=e&&this.bind(e),this.step(),this.reset()},r.prototype.nb=function(e,t){null==t&&(t=this.Ja,this.Ja+=1);var r=St(e=le(e));this.fb.push(r),this.db.handleError(g(this.La,t,r,e.length-1,0))},r.prototype.wb=function(e,t){null==t&&(t=this.Ja,this.Ja+=1);var r=St(e);this.fb.push(r),this.db.handleError(m(this.La,t,r,e.length,0))},r.prototype.mb=function(e,t){null==t&&(t=this.Ja,this.Ja+=1),this.db.handleError((e===(0|e)?v:_)(this.La,t,e))},r.prototype.zb=function(e){null==e&&(e=this.Ja,this.Ja+=1),m(this.La,e,0,0,0)},r.prototype.ob=function(e,t){switch(null==t&&(t=this.Ja,this.Ja+=1),typeof e){case"string":return void this.nb(e,t);case"number":return void this.mb(e,t);case"bigint":return void this.nb(e.toString(),t);case"boolean":return void this.mb(e+0,t);case"object":if(null===e)return void this.zb(t);if(null!=e.length)return void this.wb(e,t)}throw"Wrong API use : tried to bind a value of an unknown type ("+e+")."},r.prototype.yb=function(e){var t=this;return Object.keys(e).forEach((function(r){var n=A(t.La,r);0!==n&&t.ob(e[r],n)})),!0},r.prototype.xb=function(e){for(var t=0;t<e.length;t+=1)this.ob(e[t],t+1);return!0},r.prototype.reset=function(){return this.freemem(),0===B(this.La)&&0===R(this.La)},r.prototype.freemem=function(){for(var e;void 0!==(e=this.fb.pop());)Mt(e)},r.prototype.free=function(){this.freemem();var e=0===F(this.La);return delete this.db.Za[this.La],this.La=0,e},n.prototype.next=function(){if(null===this.Ya)return{done:!0};if(null!==this.Ua&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var e=Bt(),t=Dt(4);re(a),re(t);try{this.db.handleError(y(this.db.db,this.eb,-1,a,t)),this.eb=te(t,"i32");var n=te(a,"i32");return 0===n?(this.gb(),{done:!0}):(this.Ua=new r(n,this.db),this.db.Za[n]=this.Ua,{value:this.Ua,done:!1})}catch(e){throw this.ib=L(this.eb),this.gb(),e}finally{Lt(e)}},n.prototype.gb=function(){Mt(this.Ya),this.Ya=null},n.prototype.getRemainingSQL=function(){return null!==this.ib?this.ib:L(this.eb)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(n.prototype[Symbol.iterator]=function(){return this}),i.prototype.run=function(e,t){if(!this.db)throw"Database closed";if(t){e=this.prepare(e,t);try{e.step()}finally{e.free()}}else this.handleError(c(this.db,e,0,0,a));return this},i.prototype.exec=function(e,t,n){if(!this.db)throw"Database closed";var i=Bt(),o=null;try{var s=j(e)+1,l=Dt(s);D(e,I,l,s);var u=l,c=Dt(4);for(e=[];0!==te(u,"i8");){re(a),re(c),this.handleError(y(this.db,u,-1,a,c));var f=te(a,"i32");if(u=te(c,"i32"),0!==f){for(s=null,o=new r(f,this),null!=t&&o.bind(t);o.step();)null===s&&(s={columns:o.getColumnNames(),values:[]},e.push(s)),s.values.push(o.get(null,n));o.free()}}return e}catch(e){throw o&&o.free(),e}finally{Lt(i)}},i.prototype.each=function(e,t,r,n,i){"function"==typeof t&&(n=r,r=t,t=void 0),e=this.prepare(e,t);try{for(;e.step();)r(e.getAsObject(null,i))}finally{e.free()}if("function"==typeof n)return n()},i.prototype.prepare=function(e,t){if(re(a),this.handleError(h(this.db,e,-1,a,0)),0===(e=te(a,"i32")))throw"Nothing to prepare";var n=new r(e,this);return null!=t&&n.bind(t),this.Za[e]=n},i.prototype.iterateStatements=function(e){return new n(e,this)},i.prototype.export=function(){Object.values(this.Za).forEach((function(e){e.free()})),Object.values(this.Na).forEach(Et),this.Na={},this.handleError(u(this.db));var e=it(this.filename);return this.handleError(l(this.filename,a)),this.db=te(a,"i32"),e},i.prototype.close=function(){null!==this.db&&(Object.values(this.Za).forEach((function(e){e.free()})),Object.values(this.Na).forEach(Et),this.Na={},this.handleError(u(this.db)),We("/"+this.filename),this.db=null)},i.prototype.handleError=function(e){if(0===e)return null;throw e=w(this.db),Error(e)},i.prototype.getRowsModified=function(){return f(this.db)},i.prototype.create_function=function(r,n){Object.prototype.hasOwnProperty.call(this.Na,r)&&(Et(this.Na[r]),delete this.Na[r]);var i=wt((function(r,i,o){i=t(i,o);try{var a=n.apply(null,i)}catch(e){return void Y(r,e,-1)}e(r,a)}),"viii");return this.Na[r]=i,this.handleError(N(this.db,r,n.length,1,0,i,0,0,0)),this},i.prototype.create_aggregate=function(r,n){var i=n.init||function(){return null},o=n.finalize||function(e){return e},a=n.step;if(!a)throw"An aggregate function must have a step function in "+r;var s={};Object.hasOwnProperty.call(this.Na,r)&&(Et(this.Na[r]),delete this.Na[r]),n=r+"__finalize",Object.hasOwnProperty.call(this.Na,n)&&(Et(this.Na[n]),delete this.Na[n]);var l=wt((function(e,r,n){var o=X(e,1);Object.hasOwnProperty.call(s,o)||(s[o]=i()),r=t(r,n),r=[s[o]].concat(r);try{s[o]=a.apply(null,r)}catch(t){delete s[o],Y(e,t,-1)}}),"viii"),u=wt((function(t){var r=X(t,1);try{var n=o(s[r])}catch(e){return delete s[r],void Y(t,e,-1)}e(t,n),delete s[r]}),"vi");return this.Na[r]=l,this.Na[n]=u,this.handleError(N(this.db,r,a.length-1,1,0,0,l,u,0)),this},o.Database=i};var l,u,c,f,h,p,d=Object.assign({},o),y="./this.program",g="object"==typeof window,m="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,v="";_?(v=m?r(59547).dirname(v)+"/":"//",p=()=>{h||(f=r(70803),h=r(59547))},l=function(e,t){return p(),e=h.normalize(e),f.readFileSync(e,t?void 0:"utf8")},c=e=>((e=l(e,!0)).buffer||(e=new Uint8Array(e)),e),u=(e,t,r)=>{p(),e=h.normalize(e),f.readFile(e,(function(e,n){e?r(e):t(n.buffer)}))},1<process.argv.length&&(y=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),e.exports=o,o.inspect=function(){return"[Emscripten Module object]"}):(g||m)&&(m?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),u=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)});var A,b=o.print||console.log.bind(console),w=o.printErr||console.warn.bind(console);Object.assign(o,d),d=null,o.thisProgram&&(y=o.thisProgram),o.wasmBinary&&(A=o.wasmBinary);o.noExitRuntime;"object"!=typeof WebAssembly&&Y("no native wasm support detected");var E,x,I,S,C,P,O,T,M,k=!1,R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function B(e,t,r){var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&R)return R.decode(e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(128&i){var o=63&e[t++];if(192==(224&i))n+=String.fromCharCode((31&i)<<6|o);else{var a=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|a:(7&i)<<18|o<<12|a<<6|63&e[t++])?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else n+=String.fromCharCode(i)}return n}function L(e,t){return e?B(S,e,t):""}function D(e,t,r,n){if(!(0<n))return 0;var i=r;n=r+n-1;for(var o=0;o<e.length;++o){var a=e.charCodeAt(o);if(55296<=a&&57343>=a)a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o);if(127>=a){if(r>=n)break;t[r++]=a}else{if(2047>=a){if(r+1>=n)break;t[r++]=192|a>>6}else{if(65535>=a){if(r+2>=n)break;t[r++]=224|a>>12}else{if(r+3>=n)break;t[r++]=240|a>>18,t[r++]=128|a>>12&63}t[r++]=128|a>>6&63}t[r++]=128|63&a}}return t[r]=0,r-i}function j(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t}function F(){var e=E.buffer;x=e,o.HEAP8=I=new Int8Array(e),o.HEAP16=C=new Int16Array(e),o.HEAP32=P=new Int32Array(e),o.HEAPU8=S=new Uint8Array(e),o.HEAPU16=new Uint16Array(e),o.HEAPU32=O=new Uint32Array(e),o.HEAPF32=T=new Float32Array(e),o.HEAPF64=M=new Float64Array(e)}var N,Z=[],U=[],Q=[];function G(){var e=o.preRun.shift();Z.unshift(e)}var z,q,V,W=0,K=null,H=null;function Y(e){throw o.onAbort&&o.onAbort(e),w(e="Aborted("+e+")"),k=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}function X(){return z.startsWith("data:application/octet-stream;base64,")}if(z="sql-wasm.wasm",!X()){var J=z;z=o.locateFile?o.locateFile(J,v):v+J}function $(){var e=z;try{if(e==z&&A)return new Uint8Array(A);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){Y(e)}}function ee(e){for(;0<e.length;)e.shift()(o)}function te(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return I[e|0];case"i16":return C[e>>1];case"i32":case"i64":return P[e>>2];case"float":return T[e>>2];case"double":return M[e>>3];case"*":return O[e>>2];default:Y("invalid type for getValue: "+t)}return null}function re(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":I[e|0]=0;break;case"i16":C[e>>1]=0;break;case"i32":P[e>>2]=0;break;case"i64":V=[0,(q=0,1<=+Math.abs(q)?0<q?(0|Math.min(+Math.floor(q/4294967296),4294967295))>>>0:~~+Math.ceil((q-+(~~q>>>0))/4294967296)>>>0:0)],P[e>>2]=V[0],P[e+4>>2]=V[1];break;case"float":T[e>>2]=0;break;case"double":M[e>>3]=0;break;case"*":O[e>>2]=0;break;default:Y("invalid type for setValue: "+t)}}var ne=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},ie=e=>{var t="/"===e.charAt(0),r="/"===e.substr(-1);return(e=ne(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},oe=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."},ae=e=>{if("/"===e)return"/";var t=(e=(e=ie(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)};function se(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){if("string"!=typeof(t=0<=r?arguments[r]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=ne(e.split("/").filter((e=>!!e)),!t).join("/"))||"."}function le(e,t){var r=Array(j(e)+1);return e=D(e,r,0,r.length),t&&(r.length=e),r}var ue=[];function ce(e,t){ue[e]={input:[],output:[],Xa:t},Ze(e,ye)}var fe,he,pe,de,ye={open:function(e){var t=ue[e.node.rdev];if(!t)throw new Ie(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.Xa.fsync(e.tty)},fsync:function(e){e.tty.Xa.fsync(e.tty)},read:function(e,t,r,n){if(!e.tty||!e.tty.Xa.tb)throw new Ie(60);for(var i=0,o=0;o<n;o++){try{var a=e.tty.Xa.tb(e.tty)}catch(e){throw new Ie(29)}if(void 0===a&&0===i)throw new Ie(6);if(null==a)break;i++,t[r+o]=a}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,r,n){if(!e.tty||!e.tty.Xa.jb)throw new Ie(60);try{for(var i=0;i<n;i++)e.tty.Xa.jb(e.tty,t[r+i])}catch(e){throw new Ie(29)}return n&&(e.node.timestamp=Date.now()),i}},ge={tb:function(e){if(!e.input.length){var t=null;if(_){var r=Buffer.alloc(256),n=0;try{n=f.readSync(process.stdin.fd,r,0,256,-1)}catch(e){if(!e.toString().includes("EOF"))throw e;n=0}t=0<n?r.slice(0,n).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&(null!==(t=readline())&&(t+="\n"));if(!t)return null;e.input=le(t,!0)}return e.input.shift()},jb:function(e,t){null===t||10===t?(b(B(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&0<e.output.length&&(b(B(e.output,0)),e.output=[])}},me={jb:function(e,t){null===t||10===t?(w(B(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&0<e.output.length&&(w(B(e.output,0)),e.output=[])}},_e={Qa:null,Ra:function(){return _e.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(24576==(61440&r)||4096==(61440&r))throw new Ie(63);return _e.Qa||(_e.Qa={dir:{node:{Pa:_e.Ga.Pa,Oa:_e.Ga.Oa,lookup:_e.Ga.lookup,ab:_e.Ga.ab,rename:_e.Ga.rename,unlink:_e.Ga.unlink,rmdir:_e.Ga.rmdir,readdir:_e.Ga.readdir,symlink:_e.Ga.symlink},stream:{Ta:_e.Ha.Ta}},file:{node:{Pa:_e.Ga.Pa,Oa:_e.Ga.Oa},stream:{Ta:_e.Ha.Ta,read:_e.Ha.read,write:_e.Ha.write,lb:_e.Ha.lb,bb:_e.Ha.bb,cb:_e.Ha.cb}},link:{node:{Pa:_e.Ga.Pa,Oa:_e.Ga.Oa,readlink:_e.Ga.readlink},stream:{}},pb:{node:{Pa:_e.Ga.Pa,Oa:_e.Ga.Oa},stream:Ne}}),16384==(61440&(r=ke(e,t,r,n)).mode)?(r.Ga=_e.Qa.dir.node,r.Ha=_e.Qa.dir.stream,r.Ia={}):32768==(61440&r.mode)?(r.Ga=_e.Qa.file.node,r.Ha=_e.Qa.file.stream,r.Ma=0,r.Ia=null):40960==(61440&r.mode)?(r.Ga=_e.Qa.link.node,r.Ha=_e.Qa.link.stream):8192==(61440&r.mode)&&(r.Ga=_e.Qa.pb.node,r.Ha=_e.Qa.pb.stream),r.timestamp=Date.now(),e&&(e.Ia[t]=r,e.timestamp=r.timestamp),r},Jb:function(e){return e.Ia?e.Ia.subarray?e.Ia.subarray(0,e.Ma):new Uint8Array(e.Ia):new Uint8Array(0)},qb:function(e,t){var r=e.Ia?e.Ia.length:0;r>=t||(t=Math.max(t,r*(1048576>r?2:1.125)>>>0),0!=r&&(t=Math.max(t,256)),r=e.Ia,e.Ia=new Uint8Array(t),0<e.Ma&&e.Ia.set(r.subarray(0,e.Ma),0))},Gb:function(e,t){if(e.Ma!=t)if(0==t)e.Ia=null,e.Ma=0;else{var r=e.Ia;e.Ia=new Uint8Array(t),r&&e.Ia.set(r.subarray(0,Math.min(t,e.Ma))),e.Ma=t}},Ga:{Pa:function(e){var t={};return t.dev=8192==(61440&e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,16384==(61440&e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.Ma:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Ab=4096,t.blocks=Math.ceil(t.size/t.Ab),t},Oa:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&_e.Gb(e,t.size)},lookup:function(){throw Se[44]},ab:function(e,t,r,n){return _e.createNode(e,t,r,n)},rename:function(e,t,r){if(16384==(61440&e.mode)){try{var n=Me(t,r)}catch(e){}if(n)for(var i in n.Ia)throw new Ie(55)}delete e.parent.Ia[e.name],e.parent.timestamp=Date.now(),e.name=r,t.Ia[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.Ia[t],e.timestamp=Date.now()},rmdir:function(e,t){var r,n=Me(e,t);for(r in n.Ia)throw new Ie(55);delete e.Ia[t],e.timestamp=Date.now()},readdir:function(e){var t,r=[".",".."];for(t in e.Ia)e.Ia.hasOwnProperty(t)&&r.push(t);return r},symlink:function(e,t,r){return(e=_e.createNode(e,t,41471,0)).link=r,e},readlink:function(e){if(40960!=(61440&e.mode))throw new Ie(28);return e.link}},Ha:{read:function(e,t,r,n,i){var o=e.node.Ia;if(i>=e.node.Ma)return 0;if(8<(e=Math.min(e.node.Ma-i,n))&&o.subarray)t.set(o.subarray(i,i+e),r);else for(n=0;n<e;n++)t[r+n]=o[i+n];return e},write:function(e,t,r,n,i,o){if(t.buffer===I.buffer&&(o=!1),!n)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.Ia||e.Ia.subarray)){if(o)return e.Ia=t.subarray(r,r+n),e.Ma=n;if(0===e.Ma&&0===i)return e.Ia=t.slice(r,r+n),e.Ma=n;if(i+n<=e.Ma)return e.Ia.set(t.subarray(r,r+n),i),n}if(_e.qb(e,i+n),e.Ia.subarray&&t.subarray)e.Ia.set(t.subarray(r,r+n),i);else for(o=0;o<n;o++)e.Ia[i+o]=t[r+o];return e.Ma=Math.max(e.Ma,i+n),n},Ta:function(e,t,r){if(1===r?t+=e.position:2===r&&32768==(61440&e.node.mode)&&(t+=e.node.Ma),0>t)throw new Ie(28);return t},lb:function(e,t,r){_e.qb(e.node,t+r),e.node.Ma=Math.max(e.node.Ma,t+r)},bb:function(e,t,r,n,i){if(32768!=(61440&e.node.mode))throw new Ie(43);if(e=e.node.Ia,2&i||e.buffer!==x){if((0<r||r+t<e.length)&&(e=e.subarray?e.subarray(r,r+t):Array.prototype.slice.call(e,r,r+t)),r=!0,t=65536*Math.ceil(t/65536),(i=Rt(65536,t))?(S.fill(0,i,i+t),t=i):t=0,!t)throw new Ie(48);I.set(e,t)}else r=!1,t=e.byteOffset;return{Fb:t,vb:r}},cb:function(e,t,r,n,i){if(32768!=(61440&e.node.mode))throw new Ie(43);return 2&i||_e.Ha.write(e,t,0,n,r,!1),0}}},ve=null,Ae={},be=[],we=1,Ee=null,xe=!0,Ie=null,Se={},Ce=(e,t={})=>{if(!(e=se("/",e)))return{path:"",node:null};if(8<(t=Object.assign({rb:!0,kb:0},t)).kb)throw new Ie(32);e=ne(e.split("/").filter((e=>!!e)),!1);for(var r=ve,n="/",i=0;i<e.length;i++){var o=i===e.length-1;if(o&&t.parent)break;if(r=Me(r,e[i]),n=ie(n+"/"+e[i]),r.Va&&(!o||o&&t.rb)&&(r=r.Va.root),!o||t.Sa)for(o=0;40960==(61440&r.mode);)if(r=Ke(n),n=se(oe(n),r),r=Ce(n,{kb:t.kb+1}).node,40<o++)throw new Ie(32)}return{path:n,node:r}},Pe=e=>{for(var t;;){if(e===e.parent)return e=e.Ra.ub,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}},Oe=(e,t)=>{for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%Ee.length},Te=e=>{var t=Oe(e.parent.id,e.name);if(Ee[t]===e)Ee[t]=e.Wa;else for(t=Ee[t];t;){if(t.Wa===e){t.Wa=e.Wa;break}t=t.Wa}},Me=(e,t)=>{var r;if(r=(r=Le(e,"x"))?r:e.Ga.lookup?0:2)throw new Ie(r,e);for(r=Ee[Oe(e.id,t)];r;r=r.Wa){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.Ga.lookup(e,t)},ke=(e,t,r,n)=>(e=new Ct(e,t,r,n),t=Oe(e.parent.id,e.name),e.Wa=Ee[t],Ee[t]=e),Re={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},Be=e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},Le=(e,t)=>xe?0:!t.includes("r")||292&e.mode?t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0:2,De=(e,t)=>{try{return Me(e,t),20}catch(e){}return Le(e,"wx")},je=(e,t,r)=>{try{var n=Me(e,t)}catch(e){return e.Ka}if(e=Le(e,"wx"))return e;if(r){if(16384!=(61440&n.mode))return 54;if(n===n.parent||"/"===Pe(n))return 10}else if(16384==(61440&n.mode))return 31;return 0},Fe=(e,t)=>(pe||((pe=function(){this.$a={}}).prototype={},Object.defineProperties(pe.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},flags:{get:function(){return this.$a.flags},set:function(e){this.$a.flags=e}},position:{get:function(){return this.$a.position},set:function(e){this.$a.position=e}}})),e=Object.assign(new pe,e),t=((e=0)=>{for(;4096>=e;e++)if(!be[e])return e;throw new Ie(33)})(t),e.fd=t,be[t]=e),Ne={open:e=>{e.Ha=Ae[e.node.rdev].Ha,e.Ha.open&&e.Ha.open(e)},Ta:()=>{throw new Ie(70)}},Ze=(e,t)=>{Ae[e]={Ha:t}},Ue=(e,t)=>{var r="/"===t,n=!t;if(r&&ve)throw new Ie(10);if(!r&&!n){var i=Ce(t,{rb:!1});if(t=i.path,(i=i.node).Va)throw new Ie(10);if(16384!=(61440&i.mode))throw new Ie(54)}t={type:e,Kb:{},ub:t,Eb:[]},(e=e.Ra(t)).Ra=t,t.root=e,r?ve=e:i&&(i.Va=t,i.Ra&&i.Ra.Eb.push(t))},Qe=(e,t,r)=>{var n=Ce(e,{parent:!0}).node;if(!(e=ae(e))||"."===e||".."===e)throw new Ie(28);var i=De(n,e);if(i)throw new Ie(i);if(!n.Ga.ab)throw new Ie(63);return n.Ga.ab(n,e,t,r)},Ge=(e,t)=>Qe(e,1023&(void 0!==t?t:511)|16384,0),ze=(e,t,r)=>{void 0===r&&(r=t,t=438),Qe(e,8192|t,r)},qe=(e,t)=>{if(!se(e))throw new Ie(44);var r=Ce(t,{parent:!0}).node;if(!r)throw new Ie(44);t=ae(t);var n=De(r,t);if(n)throw new Ie(n);if(!r.Ga.symlink)throw new Ie(63);r.Ga.symlink(r,t,e)},Ve=e=>{var t=Ce(e,{parent:!0}).node;e=ae(e);var r=Me(t,e),n=je(t,e,!0);if(n)throw new Ie(n);if(!t.Ga.rmdir)throw new Ie(63);if(r.Va)throw new Ie(10);t.Ga.rmdir(t,e),Te(r)},We=e=>{var t=Ce(e,{parent:!0}).node;if(!t)throw new Ie(44);e=ae(e);var r=Me(t,e),n=je(t,e,!1);if(n)throw new Ie(n);if(!t.Ga.unlink)throw new Ie(63);if(r.Va)throw new Ie(10);t.Ga.unlink(t,e),Te(r)},Ke=e=>{if(!(e=Ce(e).node))throw new Ie(44);if(!e.Ga.readlink)throw new Ie(28);return se(Pe(e.parent),e.Ga.readlink(e))},He=(e,t)=>{if(!(e=Ce(e,{Sa:!t}).node))throw new Ie(44);if(!e.Ga.Pa)throw new Ie(63);return e.Ga.Pa(e)},Ye=e=>He(e,!0),Xe=(e,t)=>{if(!(e="string"==typeof e?Ce(e,{Sa:!0}).node:e).Ga.Oa)throw new Ie(63);e.Ga.Oa(e,{mode:4095&t|-4096&e.mode,timestamp:Date.now()})},Je=(e,t)=>{if(0>t)throw new Ie(28);if(!(e="string"==typeof e?Ce(e,{Sa:!0}).node:e).Ga.Oa)throw new Ie(63);if(16384==(61440&e.mode))throw new Ie(31);if(32768!=(61440&e.mode))throw new Ie(28);var r=Le(e,"w");if(r)throw new Ie(r);e.Ga.Oa(e,{size:t,timestamp:Date.now()})},$e=(e,t,r)=>{if(""===e)throw new Ie(44);if("string"==typeof t){var n=Re[t];if(void 0===n)throw Error("Unknown file open mode: "+t);t=n}if(r=64&t?4095&(void 0===r?438:r)|32768:0,"object"==typeof e)var i=e;else{e=ie(e);try{i=Ce(e,{Sa:!(131072&t)}).node}catch(e){}}if(n=!1,64&t)if(i){if(128&t)throw new Ie(20)}else i=Qe(e,r,0),n=!0;if(!i)throw new Ie(44);if(8192==(61440&i.mode)&&(t&=-513),65536&t&&16384!=(61440&i.mode))throw new Ie(54);if(!n&&(r=i?40960==(61440&i.mode)?32:16384==(61440&i.mode)&&("r"!==Be(t)||512&t)?31:Le(i,Be(t)):44))throw new Ie(r);return 512&t&&!n&&Je(i,0),t&=-131713,(i=Fe({node:i,path:Pe(i),flags:t,seekable:!0,position:0,Ha:i.Ha,Ib:[],error:!1})).Ha.open&&i.Ha.open(i),!o.logReadFiles||1&t||(de||(de={}),e in de||(de[e]=1)),i},et=e=>{if(null===e.fd)throw new Ie(8);e.hb&&(e.hb=null);try{e.Ha.close&&e.Ha.close(e)}catch(e){throw e}finally{be[e.fd]=null}e.fd=null},tt=(e,t,r)=>{if(null===e.fd)throw new Ie(8);if(!e.seekable||!e.Ha.Ta)throw new Ie(70);if(0!=r&&1!=r&&2!=r)throw new Ie(28);e.position=e.Ha.Ta(e,t,r),e.Ib=[]},rt=(e,t,r,n,i)=>{if(0>n||0>i)throw new Ie(28);if(null===e.fd)throw new Ie(8);if(1==(2097155&e.flags))throw new Ie(8);if(16384==(61440&e.node.mode))throw new Ie(31);if(!e.Ha.read)throw new Ie(28);var o=void 0!==i;if(o){if(!e.seekable)throw new Ie(70)}else i=e.position;return t=e.Ha.read(e,t,r,n,i),o||(e.position+=t),t},nt=(e,t,r,n,i)=>{if(0>n||0>i)throw new Ie(28);if(null===e.fd)throw new Ie(8);if(!(2097155&e.flags))throw new Ie(8);if(16384==(61440&e.node.mode))throw new Ie(31);if(!e.Ha.write)throw new Ie(28);e.seekable&&1024&e.flags&&tt(e,0,2);var o=void 0!==i;if(o){if(!e.seekable)throw new Ie(70)}else i=e.position;return t=e.Ha.write(e,t,r,n,i,void 0),o||(e.position+=t),t},it=e=>{var t;var r=$e(e,r||0);e=He(e).size;var n=new Uint8Array(e);return rt(r,n,0,e,0),t=n,et(r),t},ot=()=>{Ie||((Ie=function(e,t){this.node=t,this.Hb=function(e){this.Ka=e},this.Hb(e),this.message="FS error"}).prototype=Error(),Ie.prototype.constructor=Ie,[44].forEach((e=>{Se[e]=new Ie(e),Se[e].stack="<generic error, no stack>"})))},at=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},st=(e,t,r)=>{e=ie("/dev/"+e);var n=at(!!t,!!r);he||(he=64);var i=he++<<8;Ze(i,{open:e=>{e.seekable=!1},close:()=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(e,r,n,i)=>{for(var o=0,a=0;a<i;a++){try{var s=t()}catch(e){throw new Ie(29)}if(void 0===s&&0===o)throw new Ie(6);if(null==s)break;o++,r[n+a]=s}return o&&(e.node.timestamp=Date.now()),o},write:(e,t,n,i)=>{for(var o=0;o<i;o++)try{r(t[n+o])}catch(e){throw new Ie(29)}return i&&(e.node.timestamp=Date.now()),o}}),ze(e,n,i)},lt={};function ut(e,t,r){if("/"===t.charAt(0))return t;if(e=-100===e?"/":dt(e).path,0==t.length){if(!r)throw new Ie(44);return e}return ie(e+"/"+t)}function ct(e,t,r){try{var n=e(t)}catch(e){if(e&&e.node&&ie(t)!==ie(Pe(e.node)))return-54;throw e}return P[r>>2]=n.dev,P[r+8>>2]=n.ino,P[r+12>>2]=n.mode,O[r+16>>2]=n.nlink,P[r+20>>2]=n.uid,P[r+24>>2]=n.gid,P[r+28>>2]=n.rdev,V=[n.size>>>0,(q=n.size,1<=+Math.abs(q)?0<q?(0|Math.min(+Math.floor(q/4294967296),4294967295))>>>0:~~+Math.ceil((q-+(~~q>>>0))/4294967296)>>>0:0)],P[r+40>>2]=V[0],P[r+44>>2]=V[1],P[r+48>>2]=4096,P[r+52>>2]=n.blocks,V=[Math.floor(n.atime.getTime()/1e3)>>>0,(q=Math.floor(n.atime.getTime()/1e3),1<=+Math.abs(q)?0<q?(0|Math.min(+Math.floor(q/4294967296),4294967295))>>>0:~~+Math.ceil((q-+(~~q>>>0))/4294967296)>>>0:0)],P[r+56>>2]=V[0],P[r+60>>2]=V[1],O[r+64>>2]=0,V=[Math.floor(n.mtime.getTime()/1e3)>>>0,(q=Math.floor(n.mtime.getTime()/1e3),1<=+Math.abs(q)?0<q?(0|Math.min(+Math.floor(q/4294967296),4294967295))>>>0:~~+Math.ceil((q-+(~~q>>>0))/4294967296)>>>0:0)],P[r+72>>2]=V[0],P[r+76>>2]=V[1],O[r+80>>2]=0,V=[Math.floor(n.ctime.getTime()/1e3)>>>0,(q=Math.floor(n.ctime.getTime()/1e3),1<=+Math.abs(q)?0<q?(0|Math.min(+Math.floor(q/4294967296),4294967295))>>>0:~~+Math.ceil((q-+(~~q>>>0))/4294967296)>>>0:0)],P[r+88>>2]=V[0],P[r+92>>2]=V[1],O[r+96>>2]=0,V=[n.ino>>>0,(q=n.ino,1<=+Math.abs(q)?0<q?(0|Math.min(+Math.floor(q/4294967296),4294967295))>>>0:~~+Math.ceil((q-+(~~q>>>0))/4294967296)>>>0:0)],P[r+104>>2]=V[0],P[r+108>>2]=V[1],0}var ft,ht=void 0;function pt(){return P[(ht+=4)-4>>2]}function dt(e){if(!(e=be[e]))throw new Ie(8);return e}function yt(e){return O[e>>2]+4294967296*P[e+4>>2]}function gt(e){var t=j(e)+1,r=Tt(t);return r&&D(e,I,r,t),r}ft=_?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now();var mt={};function _t(){if(!vt){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(e in mt)void 0===mt[e]?delete t[e]:t[e]=mt[e];var r=[];for(e in t)r.push(e+"="+t[e]);vt=r}return vt}var vt,At=void 0,bt=[];function wt(e,t){if(!At){At=new WeakMap;var r=N.length;if(At)for(var n=0;n<0+r;n++){var i=N.get(n);i&&At.set(i,n)}}if(At.has(e))return At.get(e);if(bt.length)r=bt.pop();else{try{N.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}r=N.length-1}try{N.set(r,e)}catch(s){if(!(s instanceof TypeError))throw s;if("function"==typeof WebAssembly.Function){n=WebAssembly.Function,i={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"};for(var o={parameters:[],results:"v"==t[0]?[]:[i[t[0]]]},a=1;a<t.length;++a)o.parameters.push(i[t[a]]);t=new n(o,e)}else{for(n=[1,96],i=t.slice(0,1),o={i:127,p:127,j:126,f:125,d:124},128>(a=(t=t.slice(1)).length)?n.push(a):n.push(a%128|128,a>>7),a=0;a<t.length;++a)n.push(o[t[a]]);"v"==i?n.push(0):n.push(1,o[i]),t=[0,97,115,109,1,0,0,0,1],128>(i=n.length)?t.push(i):t.push(i%128|128,i>>7),t.push.apply(t,n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}N.set(r,t)}return At.set(e,r),r}function Et(e){At.delete(N.get(e)),bt.push(e)}var xt=0,It=1;function St(e){var t=xt==It?Dt(e.length):Tt(e.length);return e.subarray||e.slice||(e=new Uint8Array(e)),S.set(e,t),t}function Ct(e,t,r,n){e||(e=this),this.parent=e,this.Ra=e.Ra,this.Va=null,this.id=we++,this.name=t,this.mode=r,this.Ga={},this.Ha={},this.rdev=n}Object.defineProperties(Ct.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),ot(),Ee=Array(4096),Ue(_e,"/"),Ge("/tmp"),Ge("/home"),Ge("/home/web_user"),(()=>{Ge("/dev"),Ze(259,{read:()=>0,write:(e,t,r,n)=>n}),ze("/dev/null",259),ce(1280,ge),ce(1536,me),ze("/dev/tty",1280),ze("/dev/tty1",1536);var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}if(_)try{var t=r(37607);return()=>t.randomBytes(1)[0]}catch(e){}return()=>Y("randomDevice")}();st("random",e),st("urandom",e),Ge("/dev/shm"),Ge("/dev/shm/tmp")})(),(()=>{Ge("/proc");var e=Ge("/proc/self");Ge("/proc/self/fd"),Ue({Ra:()=>{var t=ke(e,"fd",16895,73);return t.Ga={lookup:(e,t)=>{var r=be[+t];if(!r)throw new Ie(8);return(e={parent:null,Ra:{ub:"fake"},Ga:{readlink:()=>r.path}}).parent=e}},t}},"/proc/self/fd")})();var Pt={a:function(e,t,r,n){Y("Assertion failed: "+L(e)+", at: "+[t?L(t):"unknown filename",r,n?L(n):"unknown function"])},h:function(e,t){try{return e=L(e),Xe(e,t),0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},H:function(e,t,r){try{if(t=ut(e,t=L(t)),-8&r)return-28;var n=Ce(t,{Sa:!0}).node;return n?(e="",4&r&&(e+="r"),2&r&&(e+="w"),1&r&&(e+="x"),e&&Le(n,e)?-2:0):-44}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},i:function(e,t){try{var r=be[e];if(!r)throw new Ie(8);return Xe(r.node,t),0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},g:function(e){try{var t=be[e];if(!t)throw new Ie(8);var r=t.node,n="string"==typeof r?Ce(r,{Sa:!0}).node:r;if(!n.Ga.Oa)throw new Ie(63);return n.Ga.Oa(n,{timestamp:Date.now()}),0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},b:function(e,t,r){ht=r;try{var n=dt(e);switch(t){case 0:var i=pt();return 0>i?-28:Fe(n,i).fd;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:return i=pt(),n.flags|=i,0;case 5:return i=pt(),C[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return P[Ot()>>2]=28,-1}}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},G:function(e,t){try{var r=dt(e);return ct(He,r.path,t)}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},l:function(e,t,r){try{if(t=r+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*r:NaN,isNaN(t))return-61;var n=be[e];if(!n)throw new Ie(8);if(!(2097155&n.flags))throw new Ie(28);return Je(n.node,t),0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},B:function(e,t){try{if(0===t)return-28;var r=j("/")+1;return t<r?-68:(D("/",S,e,t),r)}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},E:function(e,t){try{return e=L(e),ct(Ye,e,t)}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},y:function(e,t,r){try{return t=ut(e,t=L(t)),"/"===(t=ie(t))[t.length-1]&&(t=t.substr(0,t.length-1)),Ge(t,r),0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},D:function(e,t,r,n){try{t=L(t);var i=256&n;return t=ut(e,t,4096&n),ct(i?Ye:He,t,r)}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},v:function(e,t,r,n){ht=n;try{t=ut(e,t=L(t));var i=n?pt():0;return $e(t,r,i).fd}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},t:function(e,t,r,n){try{if(t=ut(e,t=L(t)),0>=n)return-28;var i=Ke(t),o=Math.min(n,j(i)),a=I[r+o];return D(i,S,r,n+1),I[r+o]=a,o}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},s:function(e){try{return e=L(e),Ve(e),0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},F:function(e,t){try{return e=L(e),ct(He,e,t)}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},p:function(e,t,r){try{return t=ut(e,t=L(t)),0===r?We(t):512===r?Ve(t):Y("Invalid flags passed to unlinkat"),0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},o:function(e,t,r){try{if(t=ut(e,t=L(t),!0),r){var n=yt(r),i=P[r+8>>2];o=1e3*n+i/1e6,a=1e3*(n=yt(r+=16))+(i=P[r+8>>2])/1e6}else var o=Date.now(),a=o;e=o;var s=Ce(t,{Sa:!0}).node;return s.Ga.Oa(s,{timestamp:Math.max(e,a)}),0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},e:function(){return Date.now()},j:function(e,t){e=new Date(1e3*yt(e)),P[t>>2]=e.getSeconds(),P[t+4>>2]=e.getMinutes(),P[t+8>>2]=e.getHours(),P[t+12>>2]=e.getDate(),P[t+16>>2]=e.getMonth(),P[t+20>>2]=e.getFullYear()-1900,P[t+24>>2]=e.getDay();var r=new Date(e.getFullYear(),0,1);P[t+28>>2]=(e.getTime()-r.getTime())/864e5|0,P[t+36>>2]=-60*e.getTimezoneOffset();var n=new Date(e.getFullYear(),6,1).getTimezoneOffset();r=r.getTimezoneOffset(),P[t+32>>2]=0|(n!=r&&e.getTimezoneOffset()==Math.min(r,n))},w:function(e,t,r,n,i,o){try{var a=dt(n);if(2&t&&!(2&r)&&2!=(2097155&a.flags))throw new Ie(2);if(1==(2097155&a.flags))throw new Ie(2);if(!a.Ha.bb)throw new Ie(43);var s=a.Ha.bb(a,e,i,t,r),l=s.Fb;return P[o>>2]=s.vb,l}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},x:function(e,t,r,n,i,o){try{var a=dt(i);if(2&r){var s=S.slice(e,e+t);a&&a.Ha.cb&&a.Ha.cb(a,s,o,t,n)}}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return-e.Ka}},n:function e(t,r,n){e.Bb||(e.Bb=!0,function(e,t,r){function n(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}var i=(new Date).getFullYear(),o=new Date(i,0,1),a=new Date(i,6,1);i=o.getTimezoneOffset();var s=a.getTimezoneOffset();P[e>>2]=60*Math.max(i,s),P[t>>2]=Number(i!=s),e=n(o),t=n(a),e=gt(e),t=gt(t),s<i?(O[r>>2]=e,O[r+4>>2]=t):(O[r>>2]=t,O[r+4>>2]=e)}(t,r,n))},q:function(){return 2147483648},d:ft,c:function(e){var t=S.length;if(2147483648<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var i=Math;n=Math.max(e,n),i=i.min.call(i,2147483648,n+(65536-n%65536)%65536);e:{try{E.grow(i-x.byteLength+65535>>>16),F();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},z:function(e,t){var r=0;return _t().forEach((function(n,i){var o=t+r;for(i=O[e+4*i>>2]=o,o=0;o<n.length;++o)I[i++|0]=n.charCodeAt(o);I[i|0]=0,r+=n.length+1})),0},A:function(e,t){var r=_t();O[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),O[t>>2]=n,0},f:function(e){try{var t=dt(e);return et(t),0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return e.Ka}},m:function(e,t){try{var r=dt(e);return I[t|0]=r.tty?2:16384==(61440&r.mode)?3:40960==(61440&r.mode)?7:4,0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return e.Ka}},u:function(e,t,r,n){try{e:{var i=dt(e);e=t;for(var o=t=0;o<r;o++){var a=O[e>>2],s=O[e+4>>2];e+=8;var l=rt(i,I,a,s);if(0>l){var u=-1;break e}if(t+=l,l<s)break}u=t}return O[n>>2]=u,0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return e.Ka}},k:function(e,t,r,n,i){try{if(t=r+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*r:NaN,isNaN(t))return 61;var o=dt(e);return tt(o,t,n),V=[o.position>>>0,(q=o.position,1<=+Math.abs(q)?0<q?(0|Math.min(+Math.floor(q/4294967296),4294967295))>>>0:~~+Math.ceil((q-+(~~q>>>0))/4294967296)>>>0:0)],P[i>>2]=V[0],P[i+4>>2]=V[1],o.hb&&0===t&&0===n&&(o.hb=null),0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return e.Ka}},C:function(e){try{var t=dt(e);return t.Ha&&t.Ha.fsync?t.Ha.fsync(t):0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return e.Ka}},r:function(e,t,r,n){try{e:{var i=dt(e);e=t;for(var o=t=0;o<r;o++){var a=O[e>>2],s=O[e+4>>2];e+=8;var l=nt(i,I,a,s);if(0>l){var u=-1;break e}t+=l}u=t}return O[n>>2]=u,0}catch(e){if(void 0===lt||!(e instanceof Ie))throw e;return e.Ka}}};!function(){function e(e){o.asm=e.exports,E=o.asm.I,F(),N=o.asm.Aa,U.unshift(o.asm.J),W--,o.monitorRunDependencies&&o.monitorRunDependencies(W),0==W&&(null!==K&&(clearInterval(K),K=null),H&&(e=H,H=null,e()))}function t(t){e(t.instance)}function r(e){return function(){if(!A&&(g||m)){if("function"==typeof fetch&&!z.startsWith("file://"))return fetch(z,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+z+"'";return e.arrayBuffer()})).catch((function(){return $()}));if(u)return new Promise((function(e,t){u(z,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return $()}))}().then((function(e){return WebAssembly.instantiate(e,n)})).then((function(e){return e})).then(e,(function(e){w("failed to asynchronously prepare wasm: "+e),Y(e)}))}var n={a:Pt};if(W++,o.monitorRunDependencies&&o.monitorRunDependencies(W),o.instantiateWasm)try{return o.instantiateWasm(n,e)}catch(e){return w("Module.instantiateWasm callback failed with error: "+e),!1}A||"function"!=typeof WebAssembly.instantiateStreaming||X()||z.startsWith("file://")||_||"function"!=typeof fetch?r(t):fetch(z,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,n).then(t,(function(e){return w("wasm streaming compile failed: "+e),w("falling back to ArrayBuffer instantiation"),r(t)}))}))}(),o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.J).apply(null,arguments)},o._sqlite3_free=function(){return(o._sqlite3_free=o.asm.K).apply(null,arguments)},o._sqlite3_value_double=function(){return(o._sqlite3_value_double=o.asm.L).apply(null,arguments)},o._sqlite3_value_text=function(){return(o._sqlite3_value_text=o.asm.M).apply(null,arguments)};var Ot=o.___errno_location=function(){return(Ot=o.___errno_location=o.asm.N).apply(null,arguments)};o._sqlite3_prepare_v2=function(){return(o._sqlite3_prepare_v2=o.asm.O).apply(null,arguments)},o._sqlite3_step=function(){return(o._sqlite3_step=o.asm.P).apply(null,arguments)},o._sqlite3_finalize=function(){return(o._sqlite3_finalize=o.asm.Q).apply(null,arguments)},o._sqlite3_reset=function(){return(o._sqlite3_reset=o.asm.R).apply(null,arguments)},o._sqlite3_value_int=function(){return(o._sqlite3_value_int=o.asm.S).apply(null,arguments)},o._sqlite3_clear_bindings=function(){return(o._sqlite3_clear_bindings=o.asm.T).apply(null,arguments)},o._sqlite3_value_blob=function(){return(o._sqlite3_value_blob=o.asm.U).apply(null,arguments)},o._sqlite3_value_bytes=function(){return(o._sqlite3_value_bytes=o.asm.V).apply(null,arguments)},o._sqlite3_value_type=function(){return(o._sqlite3_value_type=o.asm.W).apply(null,arguments)},o._sqlite3_result_blob=function(){return(o._sqlite3_result_blob=o.asm.X).apply(null,arguments)},o._sqlite3_result_double=function(){return(o._sqlite3_result_double=o.asm.Y).apply(null,arguments)},o._sqlite3_result_error=function(){return(o._sqlite3_result_error=o.asm.Z).apply(null,arguments)},o._sqlite3_result_int=function(){return(o._sqlite3_result_int=o.asm._).apply(null,arguments)},o._sqlite3_result_int64=function(){return(o._sqlite3_result_int64=o.asm.$).apply(null,arguments)},o._sqlite3_result_null=function(){return(o._sqlite3_result_null=o.asm.aa).apply(null,arguments)},o._sqlite3_result_text=function(){return(o._sqlite3_result_text=o.asm.ba).apply(null,arguments)},o._sqlite3_sql=function(){return(o._sqlite3_sql=o.asm.ca).apply(null,arguments)},o._sqlite3_aggregate_context=function(){return(o._sqlite3_aggregate_context=o.asm.da).apply(null,arguments)},o._sqlite3_column_count=function(){return(o._sqlite3_column_count=o.asm.ea).apply(null,arguments)},o._sqlite3_data_count=function(){return(o._sqlite3_data_count=o.asm.fa).apply(null,arguments)},o._sqlite3_column_blob=function(){return(o._sqlite3_column_blob=o.asm.ga).apply(null,arguments)},o._sqlite3_column_bytes=function(){return(o._sqlite3_column_bytes=o.asm.ha).apply(null,arguments)},o._sqlite3_column_double=function(){return(o._sqlite3_column_double=o.asm.ia).apply(null,arguments)},o._sqlite3_column_text=function(){return(o._sqlite3_column_text=o.asm.ja).apply(null,arguments)},o._sqlite3_column_type=function(){return(o._sqlite3_column_type=o.asm.ka).apply(null,arguments)},o._sqlite3_column_name=function(){return(o._sqlite3_column_name=o.asm.la).apply(null,arguments)},o._sqlite3_bind_blob=function(){return(o._sqlite3_bind_blob=o.asm.ma).apply(null,arguments)},o._sqlite3_bind_double=function(){return(o._sqlite3_bind_double=o.asm.na).apply(null,arguments)},o._sqlite3_bind_int=function(){return(o._sqlite3_bind_int=o.asm.oa).apply(null,arguments)},o._sqlite3_bind_text=function(){return(o._sqlite3_bind_text=o.asm.pa).apply(null,arguments)},o._sqlite3_bind_parameter_index=function(){return(o._sqlite3_bind_parameter_index=o.asm.qa).apply(null,arguments)},o._sqlite3_normalized_sql=function(){return(o._sqlite3_normalized_sql=o.asm.ra).apply(null,arguments)},o._sqlite3_errmsg=function(){return(o._sqlite3_errmsg=o.asm.sa).apply(null,arguments)},o._sqlite3_exec=function(){return(o._sqlite3_exec=o.asm.ta).apply(null,arguments)},o._sqlite3_changes=function(){return(o._sqlite3_changes=o.asm.ua).apply(null,arguments)},o._sqlite3_close_v2=function(){return(o._sqlite3_close_v2=o.asm.va).apply(null,arguments)},o._sqlite3_create_function_v2=function(){return(o._sqlite3_create_function_v2=o.asm.wa).apply(null,arguments)},o._sqlite3_open=function(){return(o._sqlite3_open=o.asm.xa).apply(null,arguments)};var Tt=o._malloc=function(){return(Tt=o._malloc=o.asm.ya).apply(null,arguments)},Mt=o._free=function(){return(Mt=o._free=o.asm.za).apply(null,arguments)};o._RegisterExtensionFunctions=function(){return(o._RegisterExtensionFunctions=o.asm.Ba).apply(null,arguments)};var kt,Rt=o._emscripten_builtin_memalign=function(){return(Rt=o._emscripten_builtin_memalign=o.asm.Ca).apply(null,arguments)},Bt=o.stackSave=function(){return(Bt=o.stackSave=o.asm.Da).apply(null,arguments)},Lt=o.stackRestore=function(){return(Lt=o.stackRestore=o.asm.Ea).apply(null,arguments)},Dt=o.stackAlloc=function(){return(Dt=o.stackAlloc=o.asm.Fa).apply(null,arguments)};function jt(){function e(){if(!kt&&(kt=!0,o.calledRun=!0,!k)){if(o.noFSInit||fe||(fe=!0,ot(),o.stdin=o.stdin,o.stdout=o.stdout,o.stderr=o.stderr,o.stdin?st("stdin",o.stdin):qe("/dev/tty","/dev/stdin"),o.stdout?st("stdout",null,o.stdout):qe("/dev/tty","/dev/stdout"),o.stderr?st("stderr",null,o.stderr):qe("/dev/tty1","/dev/stderr"),$e("/dev/stdin",0),$e("/dev/stdout",1),$e("/dev/stderr",1)),xe=!1,ee(U),o.onRuntimeInitialized&&o.onRuntimeInitialized(),o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;){var e=o.postRun.shift();Q.unshift(e)}ee(Q)}}if(!(0<W)){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)G();ee(Z),0<W||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),e()}),1)):e())}}if(o.UTF8ToString=L,o.stackAlloc=Dt,o.stackSave=Bt,o.stackRestore=Lt,o.cwrap=function(e,t,r,n){var i=(r=r||[]).every((e=>"number"===e||"boolean"===e));return"string"!==t&&i&&!n?o["_"+e]:function(){return function(e,t,r,n){var i={string:e=>{var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);t=Dt(r),D(e,S,t,r)}return t},array:e=>{var t=Dt(e.length);return I.set(e,t),t}};e=o["_"+e];var a,s=[],l=0;if(n)for(var u=0;u<n.length;u++){var c=i[r[u]];c?(0===l&&(l=Bt()),s[u]=c(n[u])):s[u]=n[u]}return r=e.apply(null,s),a=r,0!==l&&Lt(l),"string"===t?L(a):"boolean"===t?!!a:a}(e,t,r,arguments)}},H=function e(){kt||jt(),kt||(H=e)},o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return jt(),a})),n)};e.exports=i,e.exports.default=i},32553:(e,t,r)=>{"use strict";var n=r(89509).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=f,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function c(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(i=a(t[n]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(i=a(t[n]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},29718:(e,t,r)=>{e.exports=r(59141)},59141:function(e,t,r){!function(t){"use strict";function n(e,t,r){return t<=e&&e<=r}e.exports&&!t["encoding-indexes"]&&r(37597);var i=Math.floor;function o(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function a(e){return 0<=e&&e<=127}var s=a,l=-1;function u(e){this.tokens=[].slice.call(e),this.tokens.reverse()}u.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():l},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var c=-1;function f(e,t){if(e)throw TypeError("Decoder error");return t||65533}function h(e){throw TypeError("The code point "+e+" could not be encoded.")}function p(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(y,e)?y[e]:null}var d=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],y={};d.forEach((function(e){e.encodings.forEach((function(e){e.labels.forEach((function(t){y[t]=e}))}))}));var g,m,_={},v={};function A(e,t){return t&&t[e]||null}function b(e,t){var r=t.indexOf(e);return-1===r?null:r}function w(e){if(!("encoding-indexes"in t))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return t["encoding-indexes"][e]}var E="utf-8";function x(e,t){if(!(this instanceof x))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):E,t=o(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var r=p(e);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+e);if(!v[r.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");var n=this;return n._encoding=r,Boolean(t.fatal)&&(n._error_mode="fatal"),Boolean(t.ignoreBOM)&&(n._ignoreBOM=!0),Object.defineProperty||(this.encoding=n._encoding.name.toLowerCase(),this.fatal="fatal"===n._error_mode,this.ignoreBOM=n._ignoreBOM),n}function I(e,r){if(!(this instanceof I))throw TypeError("Called as a function. Did you forget 'new'?");r=o(r),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(r.fatal)?"fatal":"replacement";var n=this;if(Boolean(r.NONSTANDARD_allowLegacyEncoding)){var i=p(e=void 0!==e?String(e):E);if(null===i||"replacement"===i.name)throw RangeError("Unknown encoding: "+e);if(!_[i.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");n._encoding=i}else n._encoding=p("utf-8"),void 0!==e&&"console"in t&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=n._encoding.name.toLowerCase()),n}function S(e){var t=e.fatal,r=0,i=0,o=0,a=128,s=191;this.handler=function(e,u){if(u===l&&0!==o)return o=0,f(t);if(u===l)return c;if(0===o){if(n(u,0,127))return u;if(n(u,194,223))o=1,r=31&u;else if(n(u,224,239))224===u&&(a=160),237===u&&(s=159),o=2,r=15&u;else{if(!n(u,240,244))return f(t);240===u&&(a=144),244===u&&(s=143),o=3,r=7&u}return null}if(!n(u,a,s))return r=o=i=0,a=128,s=191,e.prepend(u),f(t);if(a=128,s=191,r=r<<6|63&u,(i+=1)!==o)return null;var h=r;return r=o=i=0,h}}function C(e){e.fatal;this.handler=function(e,t){if(t===l)return c;if(s(t))return t;var r,i;n(t,128,2047)?(r=1,i=192):n(t,2048,65535)?(r=2,i=224):n(t,65536,1114111)&&(r=3,i=240);for(var o=[(t>>6*r)+i];r>0;){var a=t>>6*(r-1);o.push(128|63&a),r-=1}return o}}function P(e,t){var r=t.fatal;this.handler=function(t,n){if(n===l)return c;if(a(n))return n;var i=e[n-128];return null===i?f(r):i}}function O(e,t){t.fatal;this.handler=function(t,r){if(r===l)return c;if(s(r))return r;var n=b(r,e);return null===n&&h(r),n+128}}function T(e){var t=e.fatal,r=0,i=0,o=0;this.handler=function(e,s){if(s===l&&0===r&&0===i&&0===o)return c;var u;if(s!==l||0===r&&0===i&&0===o||(r=0,i=0,o=0,f(t)),0!==o){u=null,n(s,48,57)&&(u=function(e){if(e>39419&&e<189e3||e>1237575)return null;if(7457===e)return 59335;var t,r=0,n=0,i=w("gb18030-ranges");for(t=0;t<i.length;++t){var o=i[t];if(!(o[0]<=e))break;r=o[0],n=o[1]}return n+e-r}(10*(126*(10*(r-129)+i-48)+o-129)+s-48));var h=[i,o,s];return r=0,i=0,o=0,null===u?(e.prepend(h),f(t)):u}if(0!==i)return n(s,129,254)?(o=s,null):(e.prepend([i,s]),r=0,i=0,f(t));if(0!==r){if(n(s,48,57))return i=s,null;var p=r,d=null;r=0;var y=s<127?64:65;return(n(s,64,126)||n(s,128,254))&&(d=190*(p-129)+(s-y)),null===(u=null===d?null:A(d,w("gb18030")))&&a(s)&&e.prepend(s),null===u?f(t):u}return a(s)?s:128===s?8364:n(s,129,254)?(r=s,null):f(t)}}function M(e,t){e.fatal;this.handler=function(e,r){if(r===l)return c;if(s(r))return r;if(58853===r)return h(r);if(t&&8364===r)return 128;var n=b(r,w("gb18030"));if(null!==n){var o=n%190;return[i(n/190)+129,o+(o<63?64:65)]}if(t)return h(r);n=function(e){if(59335===e)return 7457;var t,r=0,n=0,i=w("gb18030-ranges");for(t=0;t<i.length;++t){var o=i[t];if(!(o[1]<=e))break;r=o[1],n=o[0]}return n+e-r}(r);var a=i(n/10/126/10),u=i((n-=10*a*126*10)/10/126),f=i((n-=10*u*126)/10);return[a+129,u+48,f+129,n-10*f+48]}}function k(e){var t=e.fatal,r=0;this.handler=function(e,i){if(i===l&&0!==r)return r=0,f(t);if(i===l&&0===r)return c;if(0!==r){var o=r,s=null;r=0;var u=i<127?64:98;switch((n(i,64,126)||n(i,161,254))&&(s=157*(o-129)+(i-u)),s){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var h=null===s?null:A(s,w("big5"));return null===h&&a(i)&&e.prepend(i),null===h?f(t):h}return a(i)?i:n(i,129,254)?(r=i,null):f(t)}}function R(e){e.fatal;this.handler=function(e,t){if(t===l)return c;if(s(t))return t;var r=function(e){m=m||w("big5").map((function(e,t){return t<5024?null:e}));var t=m;return 9552===e||9566===e||9569===e||9578===e||21313===e||21317===e?t.lastIndexOf(e):b(e,t)}(t);if(null===r)return h(t);var n=i(r/157)+129;if(n<161)return h(t);var o=r%157;return[n,o+(o<63?64:98)]}}function B(e){var t=e.fatal,r=!1,i=0;this.handler=function(e,o){if(o===l&&0!==i)return i=0,f(t);if(o===l&&0===i)return c;if(142===i&&n(o,161,223))return i=0,65216+o;if(143===i&&n(o,161,254))return r=!0,i=o,null;if(0!==i){var s=i;i=0;var u=null;return n(s,161,254)&&n(o,161,254)&&(u=A(94*(s-161)+(o-161),w(r?"jis0212":"jis0208"))),r=!1,n(o,161,254)||e.prepend(o),null===u?f(t):u}return a(o)?o:142===o||143===o||n(o,161,254)?(i=o,null):f(t)}}function L(e){e.fatal;this.handler=function(e,t){if(t===l)return c;if(s(t))return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return[142,t-65377+161];8722===t&&(t=65293);var r=b(t,w("jis0208"));return null===r?h(t):[i(r/94)+161,r%94+161]}}function D(e){var t=e.fatal,r=0,i=1,o=2,a=3,s=4,u=5,h=6,p=r,d=r,y=0,g=!1;this.handler=function(e,m){switch(p){default:case r:return 27===m?(p=u,null):n(m,0,127)&&14!==m&&15!==m&&27!==m?(g=!1,m):m===l?c:(g=!1,f(t));case i:return 27===m?(p=u,null):92===m?(g=!1,165):126===m?(g=!1,8254):n(m,0,127)&&14!==m&&15!==m&&27!==m&&92!==m&&126!==m?(g=!1,m):m===l?c:(g=!1,f(t));case o:return 27===m?(p=u,null):n(m,33,95)?(g=!1,65344+m):m===l?c:(g=!1,f(t));case a:return 27===m?(p=u,null):n(m,33,126)?(g=!1,y=m,p=s,null):m===l?c:(g=!1,f(t));case s:if(27===m)return p=u,f(t);if(n(m,33,126)){p=a;var _=A(94*(y-33)+m-33,w("jis0208"));return null===_?f(t):_}return m===l?(p=a,e.prepend(m),f(t)):(p=a,f(t));case u:return 36===m||40===m?(y=m,p=h,null):(e.prepend(m),g=!1,p=d,f(t));case h:var v=y;y=0;var b=null;if(40===v&&66===m&&(b=r),40===v&&74===m&&(b=i),40===v&&73===m&&(b=o),36!==v||64!==m&&66!==m||(b=a),null!==b){p=p=b;var E=g;return g=!0,E?f(t):null}return e.prepend([v,m]),g=!1,p=d,f(t)}}}function j(e){e.fatal;var t=0,r=1,n=2,o=t;this.handler=function(e,a){if(a===l&&o!==t)return e.prepend(a),o=t,[27,40,66];if(a===l&&o===t)return c;if(!(o!==t&&o!==r||14!==a&&15!==a&&27!==a))return h(65533);if(o===t&&s(a))return a;if(o===r&&(s(a)&&92!==a&&126!==a||165==a||8254==a)){if(s(a))return a;if(165===a)return 92;if(8254===a)return 126}if(s(a)&&o!==t)return e.prepend(a),o=t,[27,40,66];if((165===a||8254===a)&&o!==r)return e.prepend(a),o=r,[27,40,74];8722===a&&(a=65293);var u=b(a,w("jis0208"));return null===u?h(a):o!==n?(e.prepend(a),o=n,[27,36,66]):[i(u/94)+33,u%94+33]}}function F(e){var t=e.fatal,r=0;this.handler=function(e,i){if(i===l&&0!==r)return r=0,f(t);if(i===l&&0===r)return c;if(0!==r){var o=r,s=null;r=0;var u=i<127?64:65,h=o<160?129:193;if((n(i,64,126)||n(i,128,252))&&(s=188*(o-h)+i-u),n(s,8836,10715))return 48508+s;var p=null===s?null:A(s,w("jis0208"));return null===p&&a(i)&&e.prepend(i),null===p?f(t):p}return a(i)||128===i?i:n(i,161,223)?65216+i:n(i,129,159)||n(i,224,252)?(r=i,null):f(t)}}function N(e){e.fatal;this.handler=function(e,t){if(t===l)return c;if(s(t)||128===t)return t;if(165===t)return 92;if(8254===t)return 126;if(n(t,65377,65439))return t-65377+161;8722===t&&(t=65293);var r=function(e){return g=g||w("jis0208").map((function(e,t){return n(t,8272,8835)?null:e})),g.indexOf(e)}(t);if(null===r)return h(t);var o=i(r/188),a=r%188;return[o+(o<31?129:193),a+(a<63?64:65)]}}function Z(e){var t=e.fatal,r=0;this.handler=function(e,i){if(i===l&&0!==r)return r=0,f(t);if(i===l&&0===r)return c;if(0!==r){var o=r,s=null;r=0,n(i,65,254)&&(s=190*(o-129)+(i-65));var u=null===s?null:A(s,w("euc-kr"));return null===s&&a(i)&&e.prepend(i),null===u?f(t):u}return a(i)?i:n(i,129,254)?(r=i,null):f(t)}}function U(e){e.fatal;this.handler=function(e,t){if(t===l)return c;if(s(t))return t;var r=b(t,w("euc-kr"));return null===r?h(t):[i(r/190)+129,r%190+65]}}function Q(e,t){var r=e>>8,n=255&e;return t?[r,n]:[n,r]}function G(e,t){var r=t.fatal,i=null,o=null;this.handler=function(t,a){if(a===l&&(null!==i||null!==o))return f(r);if(a===l&&null===i&&null===o)return c;if(null===i)return i=a,null;var s;if(s=e?(i<<8)+a:(a<<8)+i,i=null,null!==o){var u=o;return o=null,n(s,56320,57343)?65536+1024*(u-55296)+(s-56320):(t.prepend(Q(s,e)),f(r))}return n(s,55296,56319)?(o=s,null):n(s,56320,57343)?f(r):s}}function z(e,t){t.fatal;this.handler=function(t,r){if(r===l)return c;if(n(r,0,65535))return Q(r,e);var i=Q(55296+(r-65536>>10),e),o=Q(56320+(r-65536&1023),e);return i.concat(o)}}function q(e){e.fatal;this.handler=function(e,t){return t===l?c:a(t)?t:63360+t-128}}function V(e){e.fatal;this.handler=function(e,t){return t===l?c:s(t)?t:n(t,63360,63487)?t-63360+128:h(t)}}Object.defineProperty&&(Object.defineProperty(x.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(x.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(x.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),x.prototype.decode=function(e,t){var r;r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=o(t),this._do_not_flush||(this._decoder=v[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var n,i=new u(r),a=[];;){var s=i.read();if(s===l)break;if((n=this._decoder.handler(i,s))===c)break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}if(!this._do_not_flush){do{if((n=this._decoder.handler(i,i.read()))===c)break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}while(!i.endOfStream());this._decoder=null}return function(e){var t,r;return t=["UTF-8","UTF-16LE","UTF-16BE"],r=this._encoding.name,-1===t.indexOf(r)||this._ignoreBOM||this._BOMseen||(e.length>0&&65279===e[0]?(this._BOMseen=!0,e.shift()):e.length>0&&(this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(e)}.call(this,a)},Object.defineProperty&&Object.defineProperty(I.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),I.prototype.encode=function(e,t){e=void 0===e?"":String(e),t=o(t),this._do_not_flush||(this._encoder=_[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var r,n=new u(function(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var a=t.charCodeAt(n+1);if(56320<=a&&a<=57343){var s=1023&o,l=1023&a;i.push(65536+(s<<10)+l),n+=1}else i.push(65533)}n+=1}return i}(e)),i=[];;){var a=n.read();if(a===l)break;if((r=this._encoder.handler(n,a))===c)break;Array.isArray(r)?i.push.apply(i,r):i.push(r)}if(!this._do_not_flush){for(;(r=this._encoder.handler(n,n.read()))!==c;)Array.isArray(r)?i.push.apply(i,r):i.push(r);this._encoder=null}return new Uint8Array(i)},_["UTF-8"]=function(e){return new C(e)},v["UTF-8"]=function(e){return new S(e)},"encoding-indexes"in t&&d.forEach((function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach((function(e){var t=e.name,r=w(t.toLowerCase());v[t]=function(e){return new P(r,e)},_[t]=function(e){return new O(r,e)}}))})),v.GBK=function(e){return new T(e)},_.GBK=function(e){return new M(e,!0)},_.gb18030=function(e){return new M(e)},v.gb18030=function(e){return new T(e)},_.Big5=function(e){return new R(e)},v.Big5=function(e){return new k(e)},_["EUC-JP"]=function(e){return new L(e)},v["EUC-JP"]=function(e){return new B(e)},_["ISO-2022-JP"]=function(e){return new j(e)},v["ISO-2022-JP"]=function(e){return new D(e)},_.Shift_JIS=function(e){return new N(e)},v.Shift_JIS=function(e){return new F(e)},_["EUC-KR"]=function(e){return new U(e)},v["EUC-KR"]=function(e){return new Z(e)},_["UTF-16BE"]=function(e){return new z(!0,e)},v["UTF-16BE"]=function(e){return new G(!0,e)},_["UTF-16LE"]=function(e){return new z(!1,e)},v["UTF-16LE"]=function(e){return new G(!1,e)},_["x-user-defined"]=function(e){return new V(e)},v["x-user-defined"]=function(e){return new q(e)},t.TextEncoder||(t.TextEncoder=I),t.TextDecoder||(t.TextDecoder=x),e.exports&&(e.exports={TextEncoder:t.TextEncoder,TextDecoder:t.TextDecoder,EncodingIndexes:t["encoding-indexes"]})}(this||{})},54842:function(e,t,r){!function(t,n){e.exports?e.exports=n(t,r(7158)):t.Unidragger=n(t,t.EvEmitter)}("undefined"!=typeof window?window:this,(function(e,t){function r(){}let n,i,o=r.prototype=Object.create(t.prototype);o.handleEvent=function(e){let t="on"+e.type;this[t]&&this[t](e)},"ontouchstart"in e?(n="touchstart",i=["touchmove","touchend","touchcancel"]):e.PointerEvent?(n="pointerdown",i=["pointermove","pointerup","pointercancel"]):(n="mousedown",i=["mousemove","mouseup"]),o.touchActionValue="none",o.bindHandles=function(){this._bindHandles("addEventListener",this.touchActionValue)},o.unbindHandles=function(){this._bindHandles("removeEventListener","")},o._bindHandles=function(t,r){this.handles.forEach((i=>{i[t](n,this),i[t]("click",this),e.PointerEvent&&(i.style.touchAction=r)}))},o.bindActivePointerEvents=function(){i.forEach((t=>{e.addEventListener(t,this)}))},o.unbindActivePointerEvents=function(){i.forEach((t=>{e.removeEventListener(t,this)}))},o.withPointer=function(e,t){t.pointerId===this.pointerIdentifier&&this[e](t,t)},o.withTouch=function(e,t){let r;for(let e of t.changedTouches)e.identifier===this.pointerIdentifier&&(r=e);r&&this[e](t,r)},o.onmousedown=function(e){this.pointerDown(e,e)},o.ontouchstart=function(e){this.pointerDown(e,e.changedTouches[0])},o.onpointerdown=function(e){this.pointerDown(e,e)};const a=["TEXTAREA","INPUT","SELECT","OPTION"],s=["radio","checkbox","button","submit","image","file"];return o.pointerDown=function(e,t){let r=a.includes(e.target.nodeName),n=s.includes(e.target.type),i=!r||n;!this.isPointerDown&&!e.button&&i&&(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},this.bindActivePointerEvents(),this.emitEvent("pointerDown",[e,t]))},o.onmousemove=function(e){this.pointerMove(e,e)},o.onpointermove=function(e){this.withPointer("pointerMove",e)},o.ontouchmove=function(e){this.withTouch("pointerMove",e)},o.pointerMove=function(e,t){let r={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};this.emitEvent("pointerMove",[e,t,r]),!this.isDragging&&this.hasDragStarted(r)&&this.dragStart(e,t),this.isDragging&&this.dragMove(e,t,r)},o.hasDragStarted=function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3},o.dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.emitEvent("dragStart",[e,t])},o.dragMove=function(e,t,r){this.emitEvent("dragMove",[e,t,r])},o.onmouseup=function(e){this.pointerUp(e,e)},o.onpointerup=function(e){this.withPointer("pointerUp",e)},o.ontouchend=function(e){this.withTouch("pointerUp",e)},o.pointerUp=function(e,t){this.pointerDone(),this.emitEvent("pointerUp",[e,t]),this.isDragging?this.dragEnd(e,t):this.staticClick(e,t)},o.dragEnd=function(e,t){this.isDragging=!1,setTimeout((()=>delete this.isPreventingClicks)),this.emitEvent("dragEnd",[e,t])},o.pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this.unbindActivePointerEvents(),this.emitEvent("pointerDone")},o.onpointercancel=function(e){this.withPointer("pointerCancel",e)},o.ontouchcancel=function(e){this.withTouch("pointerCancel",e)},o.pointerCancel=function(e,t){this.pointerDone(),this.emitEvent("pointerCancel",[e,t])},o.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},o.staticClick=function(e,t){let r="mouseup"===e.type;r&&this.isIgnoringMouseUp||(this.emitEvent("staticClick",[e,t]),r&&(this.isIgnoringMouseUp=!0,setTimeout((()=>{delete this.isIgnoringMouseUp}),400)))},r}))},17840:e=>{function t(e,t){const r=new RegExp(t,"g"),n=e.match(r);return n?n.length:0}e.exports=t,e.exports.default=t},24635:(e,t,r)=>{const n=r(39622),i=r(32566),o=r(17840);function a(e,t,r){const a=r&&r.debug||!1,s=!(r&&!1===typeof r.nested),l=r&&r.startIndex||0;a&&console.log("[xml-utils] starting findTagByName with",t," and ",r);const u=n(e,`<${t}[ \n>/]`,l);if(a&&console.log("[xml-utils] start:",u),-1===u)return;const c=e.slice(u+t.length);let f=i(c,"^[^<]*[ /]>",0);const h=-1!==f&&"/"===c[f-1];if(a&&console.log("[xml-utils] selfClosing:",h),!1===h)if(s){let e=0,r=1,n=0;for(;-1!==(f=i(c,"[ /]"+t+">",e));){const i=c.substring(e,f+1);if(r+=o(i,"<"+t+"[ \n\t>]"),n+=o(i,"</"+t+">"),n>=r)break;e=f}}else f=i(c,"[ /]"+t+">",0);const p=u+t.length+f+1;if(a&&console.log("[xml-utils] end:",p),-1===p)return;const d=e.slice(u,p);let y;return y=h?null:d.slice(d.indexOf(">")+1,d.lastIndexOf("<")),{inner:y,outer:d,start:u,end:p}}e.exports=a,e.exports.default=a},18602:(e,t,r)=>{const n=r(24635);function i(e,t,r){const i=[],o=r&&r.debug||!1,a=!r||"boolean"!=typeof r.nested||r.nested;let s,l=r&&r.startIndex||0;for(;s=n(e,t,{debug:o,startIndex:l});)l=a?s.start+1+t.length:s.end,i.push(s);return o&&console.log("findTagsByName found",i.length,"tags"),i}e.exports=i,e.exports.default=i},88330:e=>{function t(e,t,r){const n=r&&r.debug||!1;n&&console.log("[xml-utils] getting "+t+" in "+e);const i="object"==typeof e?e.outer:e,o=i.slice(0,i.indexOf(">")+1),a=['"',"'"];for(let e=0;e<a.length;e++){const r=a[e],i=t+"\\="+r+"([^"+r+"]*)"+r;n&&console.log("[xml-utils] pattern:",i);const s=new RegExp(i).exec(o);if(n&&console.log("[xml-utils] match:",s),s)return s[1]}}e.exports=t,e.exports.default=t},32566:e=>{function t(e,t,r){const n=new RegExp(t).exec(e.slice(r));return n?r+n.index+n[0].length-1:-1}e.exports=t,e.exports.default=t},39622:e=>{function t(e,t,r){const n=new RegExp(t).exec(e.slice(r));return n?r+n.index:-1}e.exports=t,e.exports.default=t},73752:()=>{},13640:()=>{},82630:()=>{},37607:()=>{},70803:()=>{},59547:()=>{},37597:()=>{},24613:function(e){e.exports=function(){"use strict";var e={},t={};function r(r,n,i){if(t[r]=i,"index"===r){var o="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",a={};return t.shared(a),t.index(e,a),"undefined"!=typeof window&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))),e}}return r("shared",["exports"],(function(e){function t(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))}function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"function"==typeof SuppressedError&&SuppressedError;var n=i;function i(e,t){this.x=e,this.y=t}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=n,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-n*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(e){return e instanceof i?e:Array.isArray(e)?new i(e[0],e[1]):e};var o=r(n),a=s;function s(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}s.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var i=this.sampleCurveX(r)-e;if(Math.abs(i)<t)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r-=i/o}var a=0,s=1;for(r=e,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-e)<t));n++)e>i?a=r:s=r,r=.5*(s-a)+a;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var l=r(a);let u,c;function f(){return null==u&&(u="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),u}function h(){if(null==c&&(c=!1,f())){const e=5,t=new OffscreenCanvas(e,e).getContext("2d",{willReadFrequently:!0});if(t){for(let r=0;r<e*e;r++){const n=4*r;t.fillStyle=`rgb(${n},${n+1},${n+2})`,t.fillRect(r%e,Math.floor(r/e),1,1)}const r=t.getImageData(0,0,e,e).data;for(let t=0;t<e*e*4;t++)if(t%4!=3&&r[t]!==t){c=!0;break}}}return c||!1}function p(e,t,r,n){const i=new l(e,t,r,n);return e=>i.solve(e)}const d=p(.25,.1,.25,1);function y(e,t,r){return Math.min(r,Math.max(t,e))}function g(e,t,r){const n=r-t,i=((e-t)%n+n)%n+t;return i===t?r:i}function m(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}let _=1;function v(e,t,r){const n={};for(const r in e)n[r]=t.call(this,e[r],r,e);return n}function A(e,t,r){const n={};for(const r in e)t.call(this,e[r],r,e)&&(n[r]=e[r]);return n}function b(e){return Array.isArray(e)?e.map(b):"object"==typeof e&&e?v(e,b):e}const w={};function E(e){w[e]||("undefined"!=typeof console&&console.warn(e),w[e]=!0)}function x(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function I(e){return"undefined"!=typeof WorkerGlobalScope&&void 0!==e&&e instanceof WorkerGlobalScope}let S=null;function C(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}const P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function O(e,r,n,i,o){return t(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const t=new VideoFrame(e,{timestamp:0});try{const a=null==t?void 0:t.format;if(!a||!a.startsWith("BGR")&&!a.startsWith("RGB"))throw new Error(`Unrecognized format ${a}`);const s=a.startsWith("BGR"),l=new Uint8ClampedArray(i*o*4);if(yield t.copyTo(l,function(e,t,r,n,i){const o=4*Math.max(-t,0),a=(Math.max(0,r)-r)*n*4+o,s=4*n,l=Math.max(0,t),u=Math.max(0,r);return{rect:{x:l,y:u,width:Math.min(e.width,t+n)-l,height:Math.min(e.height,r+i)-u},layout:[{offset:a,stride:s}]}}(e,r,n,i,o)),s)for(let e=0;e<l.length;e+=4){const t=l[e];l[e]=l[e+2],l[e+2]=t}return l}finally{t.close()}}))}let T,M;const k="AbortError";function R(){return new Error(k)}const B={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function L(e){return B.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))]}const D="global-dispatcher";class j extends Error{constructor(e,t,r,n){super(`AJAXError: ${t} (${e}): ${r}`),this.status=e,this.statusText=t,this.url=r,this.body=n}}const F=()=>I(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,N=function(e,r){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){const t=L(e.url);if(t)return t(e,r);if(I(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,targetMapId:D},r)}if(!(/^file:/.test(n=e.url)||/^file:/.test(F())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(e,r){return t(this,void 0,void 0,(function*(){const t=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,cache:e.cache,referrer:F(),signal:r.signal});"json"===e.type&&t.headers.set("Accept","application/json");const n=yield fetch(t);if(!n.ok){const t=yield n.blob();throw new j(n.status,n.statusText,e.url,t)}let i;i="arrayBuffer"===e.type||"image"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text();const o=yield i;if(r.signal.aborted)throw R();return{data:o,cacheControl:n.headers.get("Cache-Control"),expires:n.headers.get("Expires")}}))}(e,r);if(I(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,mustQueue:!0,targetMapId:D},r)}var n;return function(e,t){return new Promise(((r,n)=>{const i=new XMLHttpRequest;i.open(e.method||"GET",e.url,!0),"arrayBuffer"!==e.type&&"image"!==e.type||(i.responseType="arraybuffer");for(const t in e.headers)i.setRequestHeader(t,e.headers[t]);"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=()=>{n(new Error(i.statusText))},i.onload=()=>{if(!t.signal.aborted)if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let t=i.response;if("json"===e.type)try{t=JSON.parse(i.response)}catch(e){return void n(e)}r({data:t,cacheControl:i.getResponseHeader("Cache-Control"),expires:i.getResponseHeader("Expires")})}else{const t=new Blob([i.response],{type:i.getResponseHeader("Content-Type")});n(new j(i.status,i.statusText,e.url,t))}},t.signal.addEventListener("abort",(()=>{i.abort(),n(R())})),i.send(e.body)}))}(e,r)};function Z(e){if(!e||e.indexOf("://")<=0||0===e.indexOf("data:image/")||0===e.indexOf("blob:"))return!0;const t=new URL(e),r=window.location;return t.protocol===r.protocol&&t.host===r.host}function U(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function Q(e,t,r){if(r&&r[e]){const n=r[e].indexOf(t);-1!==n&&r[e].splice(n,1)}}class G{constructor(e,t={}){m(this,t),this.type=e}}class z extends G{constructor(e,t={}){super("error",m({error:e},t))}}class q{on(e,t){return this._listeners=this._listeners||{},U(e,t,this._listeners),this}off(e,t){return Q(e,t,this._listeners),Q(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},U(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new G(e,t||{}));const r=e.type;if(this.listens(r)){e.target=this;const t=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of t)r.call(this,e);const n=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const t of n)Q(r,t,this._oneTimeListeners),t.call(this,e);const i=this._eventedParent;i&&(m(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof z&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var V={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const W=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function K(e,t){const r={};for(const t in e)"ref"!==t&&(r[t]=e[t]);return W.forEach((e=>{e in t&&(r[e]=t[e])})),r}function H(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!H(e[r],t[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!H(e[r],t[r]))return!1;return!0}return e===t}function Y(e,t){e.push(t)}function X(e,t,r){Y(r,{command:"addSource",args:[e,t[e]]})}function J(e,t,r){Y(t,{command:"removeSource",args:[e]}),r[e]=!0}function $(e,t,r,n){J(e,r,n),X(e,t,r)}function ee(e,t,r){let n;for(n in e[r])if(Object.prototype.hasOwnProperty.call(e[r],n)&&"data"!==n&&!H(e[r][n],t[r][n]))return!1;for(n in t[r])if(Object.prototype.hasOwnProperty.call(t[r],n)&&"data"!==n&&!H(e[r][n],t[r][n]))return!1;return!0}function te(e,t,r,n,i,o){e=e||{},t=t||{};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(H(e[a],t[a])||r.push({command:o,args:[n,a,t[a],i]}));for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&!Object.prototype.hasOwnProperty.call(e,a)&&(H(e[a],t[a])||r.push({command:o,args:[n,a,t[a],i]}))}function re(e){return e.id}function ne(e,t){return e[t.id]=t,e}class ie{constructor(e,t,r,n){this.message=(e?`${e}: `:"")+r,n&&(this.identifier=n),null!=t&&t.__line__&&(this.line=t.__line__)}}function oe(e,...t){for(const r of t)for(const t in r)e[t]=r[t];return e}class ae extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class se{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,r]of t)this.bindings[e]=r}concat(e){return new se(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const le={kind:"null"},ue={kind:"number"},ce={kind:"string"},fe={kind:"boolean"},he={kind:"color"},pe={kind:"object"},de={kind:"value"},ye={kind:"collator"},ge={kind:"formatted"},me={kind:"padding"},_e={kind:"resolvedImage"},ve={kind:"variableAnchorOffsetCollection"};function Ae(e,t){return{kind:"array",itemType:e,N:t}}function be(e){if("array"===e.kind){const t=be(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const we=[le,ue,ce,fe,he,ge,pe,Ae(de),me,_e,ve];function Ee(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Ee(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of we)if(!Ee(e,t))return null}return`Expected ${be(e)} but found ${be(t)} instead.`}function xe(e,t){return t.some((t=>t.kind===e.kind))}function Ie(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}function Se(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}const Ce=.96422,Pe=.82521,Oe=4/29,Te=6/29,Me=3*Te*Te,ke=Te*Te*Te,Re=Math.PI/180,Be=180/Math.PI;function Le(e){return(e%=360)<0&&(e+=360),e}function De([e,t,r,n]){let i,o;const a=Fe((.2225045*(e=je(e))+.7168786*(t=je(t))+.0606169*(r=je(r)))/1);e===t&&t===r?i=o=a:(i=Fe((.4360747*e+.3850649*t+.1430804*r)/Ce),o=Fe((.0139322*e+.0971045*t+.7141733*r)/Pe));const s=116*a-16;return[s<0?0:s,500*(i-a),200*(a-o),n]}function je(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Fe(e){return e>ke?Math.pow(e,1/3):e/Me+Oe}function Ne([e,t,r,n]){let i=(e+16)/116,o=isNaN(t)?i:i+t/500,a=isNaN(r)?i:i-r/200;return i=1*Ue(i),o=Ce*Ue(o),a=Pe*Ue(a),[Ze(3.1338561*o-1.6168667*i-.4906146*a),Ze(-.9787684*o+1.9161415*i+.033454*a),Ze(.0719453*o-.2289914*i+1.4052427*a),n]}function Ze(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function Ue(e){return e>Te?e*e*e:Me*(e-Oe)}function Qe(e){return parseInt(e.padEnd(2,e),16)/255}function Ge(e,t){return ze(t?e/100:e,0,1)}function ze(e,t,r){return Math.min(Math.max(t,e),r)}function qe(e){return!e.some(Number.isNaN)}const Ve={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class We{constructor(e,t,r,n=1,i=!0){this.r=e,this.g=t,this.b=r,this.a=n,i||(this.r*=n,this.g*=n,this.b*=n,n||this.overwriteGetter("rgb",[e,t,r,n]))}static parse(e){if(e instanceof We)return e;if("string"!=typeof e)return;const t=function(e){if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];const t=Ve[e];if(t){const[e,r,n]=t;return[e/255,r/255,n/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const t=e.length<6?1:2;let r=1;return[Qe(e.slice(r,r+=t)),Qe(e.slice(r,r+=t)),Qe(e.slice(r,r+=t)),Qe(e.slice(r,r+t)||"ff")]}if(e.startsWith("rgb")){const t=e.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(t){const[e,r,n,i,o,a,s,l,u,c,f,h]=t,p=[i||" ",s||" ",c].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){const e=[n,a,u].join(""),t="%%%"===e?100:""===e?255:0;if(t){const e=[ze(+r/t,0,1),ze(+o/t,0,1),ze(+l/t,0,1),f?Ge(+f,h):1];if(qe(e))return e}}return}}const r=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(r){const[e,t,n,i,o,a,s,l,u]=r,c=[n||" ",o||" ",s].join("");if("  "===c||"  /"===c||",,"===c||",,,"===c){const e=[+t,ze(+i,0,100),ze(+a,0,100),l?Ge(+l,u):1];if(qe(e))return function([e,t,r,n]){function i(n){const i=(n+e/30)%12,o=t*Math.min(r,1-r);return r-o*Math.max(-1,Math.min(i-3,9-i,1))}return e=Le(e),t/=100,r/=100,[i(0),i(8),i(4),n]}(e)}}}(e);return t?new We(...t,!1):void 0}get rgb(){const{r:e,g:t,b:r,a:n}=this,i=n||1/0;return this.overwriteGetter("rgb",[e/i,t/i,r/i,n])}get hcl(){return this.overwriteGetter("hcl",function(e){const[t,r,n,i]=De(e),o=Math.sqrt(r*r+n*n);return[Math.round(1e4*o)?Le(Math.atan2(n,r)*Be):NaN,o,t,i]}(this.rgb))}get lab(){return this.overwriteGetter("lab",De(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,n]=this.rgb;return`rgba(${[e,t,r].map((e=>Math.round(255*e))).join(",")},${n})`}}We.black=new We(0,0,0,1),We.white=new We(1,1,1,1),We.transparent=new We(0,0,0,0),We.red=new We(1,0,0,1);class Ke{constructor(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class He{constructor(e,t,r,n,i){this.text=e,this.image=t,this.scale=r,this.fontStack=n,this.textColor=i}}class Ye{constructor(e){this.sections=e}static fromString(e){return new Ye([new He(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Ye?e:Ye.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}}class Xe{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Xe)return e;if("number"==typeof e)return new Xe([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new Xe(e)}}toString(){return JSON.stringify(this.values)}}const Je=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class $e{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof $e)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let t=0;t<e.length;t+=2){const r=e[t],n=e[t+1];if("string"!=typeof r||!Je.has(r))return;if(!Array.isArray(n)||2!==n.length||"number"!=typeof n[0]||"number"!=typeof n[1])return}return new $e(e)}}toString(){return JSON.stringify(this.values)}}class et{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new et({name:e,available:!1}):null}}function tt(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[e,t,r,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rt(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof We||e instanceof Ke||e instanceof Ye||e instanceof Xe||e instanceof $e||e instanceof et)return!0;if(Array.isArray(e)){for(const t of e)if(!rt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!rt(e[t]))return!1;return!0}return!1}function nt(e){if(null===e)return le;if("string"==typeof e)return ce;if("boolean"==typeof e)return fe;if("number"==typeof e)return ue;if(e instanceof We)return he;if(e instanceof Ke)return ye;if(e instanceof Ye)return ge;if(e instanceof Xe)return me;if(e instanceof $e)return ve;if(e instanceof et)return _e;if(Array.isArray(e)){const t=e.length;let r;for(const t of e){const e=nt(t);if(r){if(r===e)continue;r=de;break}r=e}return Ae(r||de,t)}return pe}function it(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof We||e instanceof Ye||e instanceof Xe||e instanceof $e||e instanceof et?e.toString():JSON.stringify(e)}class ot{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!rt(e[1]))return t.error("invalid value");const r=e[1];let n=nt(r);const i=t.expectedType;return"array"!==n.kind||0!==n.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(n=i),new ot(n,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class at{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const st={string:ce,number:ue,boolean:fe,object:pe};class lt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r,n=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const r=e[1];if("string"!=typeof r||!(r in st)||"object"===r)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=st[r],n++}else i=de;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],n++}r=Ae(i,o)}else{if(!st[i])throw new Error(`Types doesn't contain name = ${i}`);r=st[i]}const o=[];for(;n<e.length;n++){const r=t.parse(e[n],n,de);if(!r)return null;o.push(r)}return new lt(r,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(!Ee(this.type,nt(r)))return r;if(t===this.args.length-1)throw new at(`Expected value to be of type ${be(this.type)}, but found ${be(nt(r))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const ut={"to-boolean":fe,"to-color":he,"to-number":ue,"to-string":ce};class ct{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!ut[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");const n=ut[r],i=[];for(let r=1;r<e.length;r++){const n=t.parse(e[r],r,de);if(!n)return null;i.push(n)}return new ct(n,i)}evaluate(e){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(e));case"color":{let t,r;for(const n of this.args){if(t=n.evaluate(e),r=null,t instanceof We)return t;if("string"==typeof t){const r=e.parseColor(t);if(r)return r}else if(Array.isArray(t)&&(r=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:tt(t[0],t[1],t[2],t[3]),!r))return new We(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new at(r||`Could not parse color from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const n=Xe.parse(t);if(n)return n}throw new at(`Could not parse padding from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const n=$e.parse(t);if(n)return n}throw new at(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),null===t)return 0;const n=Number(t);if(!isNaN(n))return n}throw new at(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Ye.fromString(it(this.args[0].evaluate(e)));case"resolvedImage":return et.fromString(it(this.args[0].evaluate(e)));default:return it(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const ft=["Unknown","Point","LineString","Polygon"];class ht{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?ft[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=We.parse(e)),t}}class pt{constructor(e,t,r=[],n,i=new se,o=[]){this.registry=e,this.path=r,this.key=r.map((e=>`[${e}]`)).join(""),this.scope=i,this.errors=o,this.expectedType=n,this._isConstant=t}parse(e,t,r,n,i={}){return t?this.concat(t,r,n)._parse(e,i):this._parse(e,i)}_parse(e,t){function r(e,t,r){return"assert"===r?new lt(t,[e]):"coerce"===r?new ct(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const n=e[0];if("string"!=typeof n)return this.error(`Expression name must be a string, but found ${typeof n} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[n];if(i){let n=i.parse(e,this);if(!n)return null;if(this.expectedType){const e=this.expectedType,i=n.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind)if("padding"!==e.kind||"value"!==i.kind&&"number"!==i.kind&&"array"!==i.kind)if("variableAnchorOffsetCollection"!==e.kind||"value"!==i.kind&&"array"!==i.kind){if(this.checkSubtype(e,i))return null}else n=r(n,e,t.typeAnnotation||"coerce");else n=r(n,e,t.typeAnnotation||"coerce");else n=r(n,e,t.typeAnnotation||"coerce");else n=r(n,e,t.typeAnnotation||"assert")}if(!(n instanceof ot)&&"resolvedImage"!==n.type.kind&&this._isConstant(n)){const t=new ht;try{n=new ot(n.type,n.evaluate(t))}catch(e){return this.error(e.message),null}}return n}return this.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const n="number"==typeof e?this.path.concat(e):this.path,i=r?this.scope.concat(r):this.scope;return new pt(this.registry,this._isConstant,n,t||null,i,this.errors)}error(e,...t){const r=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new ae(r,e))}checkSubtype(e,t){const r=Ee(e,t);return r&&this.error(r),r}}class dt{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let n=1;n<e.length-1;n+=2){const i=e[n];if("string"!=typeof i)return t.error(`Expected string, but found ${typeof i} instead.`,n);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=t.parse(e[n+1],n+1);if(!o)return null;r.push([i,o])}const n=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return n?new dt(r,n):null}outputDefined(){return this.result.outputDefined()}}class yt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new yt(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class gt{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ue),n=t.parse(e[2],2,Ae(t.expectedType||de));return r&&n?new gt(n.type.itemType,r,n):null}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new at(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new at(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new at(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class mt{constructor(e,t){this.type=fe,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,de),n=t.parse(e[2],2,de);return r&&n?xe(r.type,[fe,ce,ue,le,de])?new mt(r,n):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(r.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!Ie(t,["boolean","string","number","null"]))throw new at(`Expected first argument to be of type boolean, string, number or null, but found ${be(nt(t))} instead.`);if(!Ie(r,["string","array"]))throw new at(`Expected second argument to be of type array or string, but found ${be(nt(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class _t{constructor(e,t,r){this.type=ue,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,de),n=t.parse(e[2],2,de);if(!r||!n)return null;if(!xe(r.type,[fe,ce,ue,le,de]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${be(r.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ue);return i?new _t(r,n,i):null}return new _t(r,n)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Ie(t,["boolean","string","number","null"]))throw new at(`Expected first argument to be of type boolean, string, number or null, but found ${be(nt(t))} instead.`);if(!Ie(r,["string","array"]))throw new at(`Expected second argument to be of type array or string, but found ${be(nt(r))} instead.`);if(this.fromIndex){const n=this.fromIndex.evaluate(e);return r.indexOf(t,n)}return r.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class vt{constructor(e,t,r,n,i,o){this.inputType=e,this.type=t,this.input=r,this.cases=n,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let r,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const i={},o=[];for(let a=2;a<e.length-1;a+=2){let s=e[a];const l=e[a+1];Array.isArray(s)||(s=[s]);const u=t.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return u.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return u.error("Numeric branch labels must be integer values.");if(r){if(u.checkSubtype(r,nt(e)))return null}else r=nt(e);if(void 0!==i[String(e)])return u.error("Branch labels must be unique.");i[String(e)]=o.length}const c=t.parse(l,a,n);if(!c)return null;n=n||c.type,o.push(c)}const a=t.parse(e[1],1,de);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,n);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(r,a.type)?null:new vt(r,n,a,i,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(nt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class At{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const n=[];for(let i=1;i<e.length-1;i+=2){const o=t.parse(e[i],i,fe);if(!o)return null;const a=t.parse(e[i+1],i+1,r);if(!a)return null;n.push([o,a]),r=r||a.type}const i=t.parse(e[e.length-1],e.length-1,r);if(!i)return null;if(!r)throw new Error("Can't infer output type");return new At(r,n,i)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}}class bt{constructor(e,t,r,n){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,de),n=t.parse(e[2],2,ue);if(!r||!n)return null;if(!xe(r.type,[Ae(de),ce,de]))return t.error(`Expected first argument to be of type array or string, but found ${be(r.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ue);return i?new bt(r.type,r,n,i):null}return new bt(r.type,r,n)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!Ie(t,["string","array"]))throw new at(`Expected first argument to be of type array or string, but found ${be(nt(t))} instead.`);if(this.endIndex){const n=this.endIndex.evaluate(e);return t.slice(r,n)}return t.slice(r)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function wt(e,t){const r=e.length-1;let n,i,o=0,a=r,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),n=e[s],i=e[s+1],n<=t){if(s===r||t<i)return s;o=s+1}else{if(!(n>t))throw new at("Input is not a number.");a=s-1}return 0}class Et{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of r)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,ue);if(!r)return null;const n=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let r=1;r<e.length;r+=2){const o=1===r?-1/0:e[r],a=e[r+1],s=r,l=r+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(n.length&&n[n.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const u=t.parse(a,l,i);if(!u)return null;i=i||u.type,n.push([o,u])}return new Et(i,r,n)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const i=t.length;return n>=t[i-1]?r[i-1].evaluate(e):r[wt(t,n)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function xt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var It=St;function St(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}St.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var i=this.sampleCurveX(r)-e;if(Math.abs(i)<t)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r-=i/o}var a=0,s=1;for(r=e,n=0;n<20&&(i=this.sampleCurveX(r),!(Math.abs(i-e)<t));n++)e>i?a=r:s=r,r=.5*(s-a)+a;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var Ct=xt(It);function Pt(e,t,r){return e+r*(t-e)}function Ot(e,t,r){return e.map(((e,n)=>Pt(e,t[n],r)))}const Tt={number:Pt,color:function(e,t,r,n="rgb"){switch(n){case"rgb":{const[n,i,o,a]=Ot(e.rgb,t.rgb,r);return new We(n,i,o,a,!1)}case"hcl":{const[n,i,o,a]=e.hcl,[s,l,u,c]=t.hcl;let f,h;if(isNaN(n)||isNaN(s))isNaN(n)?isNaN(s)?f=NaN:(f=s,1!==o&&0!==o||(h=l)):(f=n,1!==u&&0!==u||(h=i));else{let e=s-n;s>n&&e>180?e-=360:s<n&&n-s>180&&(e+=360),f=n+r*e}const[p,d,y,g]=function([e,t,r,n]){return e=isNaN(e)?0:e*Re,Ne([r,Math.cos(e)*t,Math.sin(e)*t,n])}([f,null!=h?h:Pt(i,l,r),Pt(o,u,r),Pt(a,c,r)]);return new We(p,d,y,g,!1)}case"lab":{const[n,i,o,a]=Ne(Ot(e.lab,t.lab,r));return new We(n,i,o,a,!1)}}},array:Ot,padding:function(e,t,r){return new Xe(Ot(e.values,t.values,r))},variableAnchorOffsetCollection:function(e,t,r){const n=e.values,i=t.values;if(n.length!==i.length)throw new at(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const o=[];for(let e=0;e<n.length;e+=2){if(n[e]!==i[e])throw new at(`Cannot interpolate values containing mismatched anchors. from[${e}]: ${n[e]}, to[${e}]: ${i[e]}`);o.push(n[e]);const[t,a]=n[e+1],[s,l]=i[e+1];o.push([Pt(t,s,r),Pt(a,l,r)])}return new $e(o)}};class Mt{constructor(e,t,r,n,i){this.type=e,this.operator=t,this.interpolation=r,this.input=n,this.labels=[],this.outputs=[];for(const[e,t]of i)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,r,n){let i=0;if("exponential"===e.name)i=kt(t,e.base,r,n);else if("linear"===e.name)i=kt(t,1,r,n);else if("cubic-bezier"===e.name){const o=e.controlPoints;i=new Ct(o[0],o[1],o[2],o[3]).solve(kt(t,1,r,n))}return i}static parse(e,t){let[r,n,i,...o]=e;if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){const e=n[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:e}}else{if("cubic-bezier"!==n[0])return t.error(`Unknown interpolation type ${String(n[0])}`,1,0);{const e=n.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,ue),!i)return null;const a=[];let s=null;"interpolate-hcl"===r||"interpolate-lab"===r?s=he:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let e=0;e<o.length;e+=2){const r=o[e],n=o[e+1],i=e+3,l=e+4;if("number"!=typeof r)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=r)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const u=t.parse(n,l,s);if(!u)return null;s=s||u.type,a.push([r,u])}return Se(s,ue)||Se(s,he)||Se(s,me)||Se(s,ve)||Se(s,Ae(ue))?new Mt(s,r,n,i,a):t.error(`Type ${be(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);const i=t.length;if(n>=t[i-1])return r[i-1].evaluate(e);const o=wt(t,n),a=Mt.interpolationFactor(this.interpolation,n,t[o],t[o+1]),s=r[o].evaluate(e),l=r[o+1].evaluate(e);switch(this.operator){case"interpolate":return Tt[this.type.kind](s,l,a);case"interpolate-hcl":return Tt.color(s,l,a,"hcl");case"interpolate-lab":return Tt.color(s,l,a,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function kt(e,t,r,n){const i=n-r,o=e-r;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}class Rt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const n=t.expectedType;n&&"value"!==n.kind&&(r=n);const i=[];for(const n of e.slice(1)){const e=t.parse(n,1+i.length,r,void 0,{typeAnnotation:"omit"});if(!e)return null;r=r||e.type,i.push(e)}if(!r)throw new Error("No output type");const o=n&&i.some((e=>Ee(n,e.type)));return new Rt(o?de:r,i)}evaluate(e){let t,r=null,n=0;for(const i of this.args)if(n++,r=i.evaluate(e),r&&r instanceof et&&!r.available&&(t||(t=r.name),r=null,n===this.args.length&&(r=t)),null!==r)break;return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function Bt(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Lt(e,t,r,n){return 0===n.compare(t,r)}function Dt(e,t,r){const n="=="!==e&&"!="!==e;return class i{constructor(e,t,r){this.type=fe,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const r=e[0];let o=t.parse(e[1],1,de);if(!o)return null;if(!Bt(r,o.type))return t.concat(1).error(`"${r}" comparisons are not supported for type '${be(o.type)}'.`);let a=t.parse(e[2],2,de);if(!a)return null;if(!Bt(r,a.type))return t.concat(2).error(`"${r}" comparisons are not supported for type '${be(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${be(o.type)}' and '${be(a.type)}'.`);n&&("value"===o.type.kind&&"value"!==a.type.kind?o=new lt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new lt(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,ye),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(n&&this.hasUntypedArgument){const t=nt(o),r=nt(a);if(t.kind!==r.kind||"string"!==t.kind&&"number"!==t.kind)throw new at(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${r.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const e=nt(o),r=nt(a);if("string"!==e.kind||"string"!==r.kind)return t(i,o,a)}return this.collator?r(i,o,a,this.collator.evaluate(i)):t(i,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const jt=Dt("==",(function(e,t,r){return t===r}),Lt),Ft=Dt("!=",(function(e,t,r){return t!==r}),(function(e,t,r,n){return!Lt(0,t,r,n)})),Nt=Dt("<",(function(e,t,r){return t<r}),(function(e,t,r,n){return n.compare(t,r)<0})),Zt=Dt(">",(function(e,t,r){return t>r}),(function(e,t,r,n){return n.compare(t,r)>0})),Ut=Dt("<=",(function(e,t,r){return t<=r}),(function(e,t,r,n){return n.compare(t,r)<=0})),Qt=Dt(">=",(function(e,t,r){return t>=r}),(function(e,t,r,n){return n.compare(t,r)>=0}));class Gt{constructor(e,t,r){this.type=ye,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");const n=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,fe);if(!n)return null;const i=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,fe);if(!i)return null;let o=null;return r.locale&&(o=t.parse(r.locale,1,ce),!o)?null:new Gt(n,i,o)}evaluate(e){return new Ke(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class zt{constructor(e,t,r,n,i){this.type=ce,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=n,this.maxFractionDigits=i}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ue);if(!r)return null;const n=e[2];if("object"!=typeof n||Array.isArray(n))return t.error("NumberFormat options argument must be an object.");let i=null;if(n.locale&&(i=t.parse(n.locale,1,ce),!i))return null;let o=null;if(n.currency&&(o=t.parse(n.currency,1,ce),!o))return null;let a=null;if(n["min-fraction-digits"]&&(a=t.parse(n["min-fraction-digits"],1,ue),!a))return null;let s=null;return n["max-fraction-digits"]&&(s=t.parse(n["max-fraction-digits"],1,ue),!s)?null:new zt(r,i,o,a,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class qt{constructor(e){this.type=ge,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");const n=[];let i=!1;for(let r=1;r<=e.length-1;++r){const o=e[r];if(i&&"object"==typeof o&&!Array.isArray(o)){i=!1;let e=null;if(o["font-scale"]&&(e=t.parse(o["font-scale"],1,ue),!e))return null;let r=null;if(o["text-font"]&&(r=t.parse(o["text-font"],1,Ae(ce)),!r))return null;let a=null;if(o["text-color"]&&(a=t.parse(o["text-color"],1,he),!a))return null;const s=n[n.length-1];s.scale=e,s.font=r,s.textColor=a}else{const o=t.parse(e[r],1,de);if(!o)return null;const a=o.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,n.push({content:o,scale:null,font:null,textColor:null})}}return new qt(n)}evaluate(e){return new Ye(this.sections.map((t=>{const r=t.content.evaluate(e);return nt(r)===_e?new He("",r,null,null,null):new He(it(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}}class Vt{constructor(e){this.type=_e,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ce);return r?new Vt(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=et.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class Wt{constructor(e){this.type=ue,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error(`Expected argument of type string or array, but found ${be(r.type)} instead.`):new Wt(r):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new at(`Expected value to be of type string or array, but found ${be(nt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Kt=8192;function Ht(e,t){const r=(180+e[0])/360,n=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(r*i*Kt),Math.round(n*i*Kt)]}function Yt(e,t){const r=Math.pow(2,t.z);return[(i=(e[0]/Kt+t.x)/r,360*i-180),(n=(e[1]/Kt+t.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90)];var n,i}function Xt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Jt(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function $t(e,t,r){const n=e[0]-t[0],i=e[1]-t[1],o=e[0]-r[0],a=e[1]-r[1];return n*a-o*i==0&&n*o<=0&&i*a<=0}function er(e,t,r,n){return 0!=(i=[n[0]-r[0],n[1]-r[1]])[0]*(o=[t[0]-e[0],t[1]-e[1]])[1]-i[1]*o[0]&&!(!ar(e,t,r,n)||!ar(r,n,e,t));var i,o}function tr(e,t,r){for(const n of r)for(let r=0;r<n.length-1;++r)if(er(e,t,n[r],n[r+1]))return!0;return!1}function rr(e,t,r=!1){let n=!1;for(const s of t)for(let t=0;t<s.length-1;t++){if($t(e,s[t],s[t+1]))return r;(o=s[t])[1]>(i=e)[1]!=(a=s[t+1])[1]>i[1]&&i[0]<(a[0]-o[0])*(i[1]-o[1])/(a[1]-o[1])+o[0]&&(n=!n)}var i,o,a;return n}function nr(e,t){for(const r of t)if(rr(e,r))return!0;return!1}function ir(e,t){for(const r of e)if(!rr(r,t))return!1;for(let r=0;r<e.length-1;++r)if(tr(e[r],e[r+1],t))return!1;return!0}function or(e,t){for(const r of t)if(ir(e,r))return!0;return!1}function ar(e,t,r,n){const i=n[0]-r[0],o=n[1]-r[1],a=(e[0]-r[0])*o-i*(e[1]-r[1]),s=(t[0]-r[0])*o-i*(t[1]-r[1]);return a>0&&s<0||a<0&&s>0}function sr(e,t,r){const n=[];for(let i=0;i<e.length;i++){const o=[];for(let n=0;n<e[i].length;n++){const a=Ht(e[i][n],r);Xt(t,a),o.push(a)}n.push(o)}return n}function lr(e,t,r){const n=[];for(let i=0;i<e.length;i++){const o=sr(e[i],t,r);n.push(o)}return n}function ur(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){const t=.5*n;let i=e[0]-r[0]>t?-n:r[0]-e[0]>t?n:0;0===i&&(i=e[0]-r[2]>t?-n:r[2]-e[0]>t?n:0),e[0]+=i}Xt(t,e)}function cr(e,t,r,n){const i=Math.pow(2,n.z)*Kt,o=[n.x*Kt,n.y*Kt],a=[];for(const n of e)for(const e of n){const n=[e.x+o[0],e.y+o[1]];ur(n,t,r,i),a.push(n)}return a}function fr(e,t,r,n){const i=Math.pow(2,n.z)*Kt,o=[n.x*Kt,n.y*Kt],a=[];for(const r of e){const e=[];for(const n of r){const r=[n.x+o[0],n.y+o[1]];Xt(t,r),e.push(r)}a.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const n of e)ur(n,t,r,i)}var s;return a}class hr{constructor(e,t){this.type=fe,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(rt(e[1])){const t=e[1];if("FeatureCollection"===t.type){const e=[];for(const r of t.features){const{type:t,coordinates:n}=r.geometry;"Polygon"===t&&e.push(n),"MultiPolygon"===t&&e.push(...n)}if(e.length)return new hr(t,{type:"MultiPolygon",coordinates:e})}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new hr(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new hr(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=sr(t.coordinates,n,i),a=cr(e.geometry(),r,n,i);if(!Jt(r,n))return!1;for(const e of a)if(!rr(e,o))return!1}if("MultiPolygon"===t.type){const o=lr(t.coordinates,n,i),a=cr(e.geometry(),r,n,i);if(!Jt(r,n))return!1;for(const e of a)if(!nr(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if("Polygon"===t.type){const o=sr(t.coordinates,n,i),a=fr(e.geometry(),r,n,i);if(!Jt(r,n))return!1;for(const e of a)if(!ir(e,o))return!1}if("MultiPolygon"===t.type){const o=lr(t.coordinates,n,i),a=fr(e.geometry(),r,n,i);if(!Jt(r,n))return!1;for(const e of a)if(!or(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let pr=class{constructor(e=[],t=dr){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,n=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(r(n,o)>=0)break;t[e]=o,e=i}t[e]=n}_down(e){const{data:t,compare:r}=this,n=this.length>>1,i=t[e];for(;e<n;){let n=1+(e<<1),o=t[n];const a=n+1;if(a<this.length&&r(t[a],o)<0&&(n=a,o=t[a]),r(o,i)>=0)break;t[e]=o,e=n}t[e]=i}};function dr(e,t){return e<t?-1:e>t?1:0}function yr(e,t,r,n,i){gr(e,t,r,n||e.length-1,i||_r)}function gr(e,t,r,n,i){for(;n>r;){if(n-r>600){var o=n-r+1,a=t-r+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);gr(e,t,Math.max(r,Math.floor(t-a*l/o+u)),Math.min(n,Math.floor(t+(o-a)*l/o+u)),i)}var c=e[t],f=r,h=n;for(mr(e,r,t),i(e[n],c)>0&&mr(e,r,n);f<h;){for(mr(e,f,h),f++,h--;i(e[f],c)<0;)f++;for(;i(e[h],c)>0;)h--}0===i(e[r],c)?mr(e,r,h):mr(e,++h,n),h<=t&&(r=h+1),t<=h&&(n=h-1)}}function mr(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _r(e,t){return e<t?-1:e>t?1:0}function vr(e,t){if(e.length<=1)return[e];const r=[];let n,i;for(const t of e){const e=br(t);0!==e&&(t.area=Math.abs(e),void 0===i&&(i=e<0),i===e<0?(n&&r.push(n),n=[t]):n.push(t))}if(n&&r.push(n),t>1)for(let e=0;e<r.length;e++)r[e].length<=t||(yr(r[e],t,1,r[e].length-1,Ar),r[e]=r[e].slice(0,t));return r}function Ar(e,t){return t.area-e.area}function br(e){let t=0;for(let r,n,i=0,o=e.length,a=o-1;i<o;a=i++)r=e[i],n=e[a],t+=(n.x-r.x)*(r.y+n.y);return t}const wr=1/298.257223563,Er=wr*(2-wr),xr=Math.PI/180;class Ir{constructor(e){const t=6378.137*xr*1e3,r=Math.cos(e*xr),n=1/(1-Er*(1-r*r)),i=Math.sqrt(n);this.kx=t*i*r,this.ky=t*i*n*(1-Er)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,n=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+n*n)}pointOnLine(e,t){let r,n,i,o,a=1/0;for(let s=0;s<e.length-1;s++){let l=e[s][0],u=e[s][1],c=this.wrap(e[s+1][0]-l)*this.kx,f=(e[s+1][1]-u)*this.ky,h=0;0===c&&0===f||(h=(this.wrap(t[0]-l)*this.kx*c+(t[1]-u)*this.ky*f)/(c*c+f*f),h>1?(l=e[s+1][0],u=e[s+1][1]):h>0&&(l+=c/this.kx*h,u+=f/this.ky*h)),c=this.wrap(t[0]-l)*this.kx,f=(t[1]-u)*this.ky;const p=c*c+f*f;p<a&&(a=p,r=l,n=u,i=s,o=h)}return{point:[r,n],index:i,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function Sr(e,t){return t[0]-e[0]}function Cr(e){return e[1]-e[0]+1}function Pr(e,t){return e[1]>=e[0]&&e[1]<t}function Or(e,t){if(e[0]>e[1])return[null,null];const r=Cr(e);if(t){if(2===r)return[e,null];const t=Math.floor(r/2);return[[e[0],e[0]+t],[e[0]+t,e[1]]]}if(1===r)return[e,null];const n=Math.floor(r/2)-1;return[[e[0],e[0]+n],[e[0]+n+1,e[1]]]}function Tr(e,t){if(!Pr(t,e.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let n=t[0];n<=t[1];++n)Xt(r,e[n]);return r}function Mr(e){const t=[1/0,1/0,-1/0,-1/0];for(const r of e)for(const e of r)Xt(t,e);return t}function kr(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function Rr(e,t,r){if(!kr(e)||!kr(t))return NaN;let n=0,i=0;return e[2]<t[0]&&(n=t[0]-e[2]),e[0]>t[2]&&(n=e[0]-t[2]),e[1]>t[3]&&(i=e[1]-t[3]),e[3]<t[1]&&(i=t[1]-e[3]),r.distance([0,0],[n,i])}function Br(e,t,r){const n=r.pointOnLine(t,e);return r.distance(e,n.point)}function Lr(e,t,r,n,i){const o=Math.min(Br(e,[r,n],i),Br(t,[r,n],i)),a=Math.min(Br(r,[e,t],i),Br(n,[e,t],i));return Math.min(o,a)}function Dr(e,t,r,n,i){if(!Pr(t,e.length)||!Pr(n,r.length))return 1/0;let o=1/0;for(let a=t[0];a<t[1];++a){const t=e[a],s=e[a+1];for(let e=n[0];e<n[1];++e){const n=r[e],a=r[e+1];if(er(t,s,n,a))return 0;o=Math.min(o,Lr(t,s,n,a,i))}}return o}function jr(e,t,r,n,i){if(!Pr(t,e.length)||!Pr(n,r.length))return NaN;let o=1/0;for(let a=t[0];a<=t[1];++a)for(let t=n[0];t<=n[1];++t)if(o=Math.min(o,i.distance(e[a],r[t])),0===o)return o;return o}function Fr(e,t,r){if(rr(e,t,!0))return 0;let n=1/0;for(const i of t){const t=i[0],o=i[i.length-1];if(t!==o&&(n=Math.min(n,Br(e,[o,t],r)),0===n))return n;const a=r.pointOnLine(i,e);if(n=Math.min(n,r.distance(e,a.point)),0===n)return n}return n}function Nr(e,t,r,n){if(!Pr(t,e.length))return NaN;for(let n=t[0];n<=t[1];++n)if(rr(e[n],r,!0))return 0;let i=1/0;for(let o=t[0];o<t[1];++o){const t=e[o],a=e[o+1];for(const e of r)for(let r=0,o=e.length,s=o-1;r<o;s=r++){const o=e[s],l=e[r];if(er(t,a,o,l))return 0;i=Math.min(i,Lr(t,a,o,l,n))}}return i}function Zr(e,t){for(const r of e)for(const e of r)if(rr(e,t,!0))return!0;return!1}function Ur(e,t,r,n=1/0){const i=Mr(e),o=Mr(t);if(n!==1/0&&Rr(i,o,r)>=n)return n;if(Jt(i,o)){if(Zr(e,t))return 0}else if(Zr(t,e))return 0;let a=1/0;for(const n of e)for(let e=0,i=n.length,o=i-1;e<i;o=e++){const i=n[o],s=n[e];for(const e of t)for(let t=0,n=e.length,o=n-1;t<n;o=t++){const n=e[o],l=e[t];if(er(i,s,n,l))return 0;a=Math.min(a,Lr(i,s,n,l,r))}}return a}function Qr(e,t,r,n,i,o){if(!o)return;const a=Rr(Tr(n,o),i,r);a<t&&e.push([a,o,[0,0]])}function Gr(e,t,r,n,i,o,a){if(!o||!a)return;const s=Rr(Tr(n,o),Tr(i,a),r);s<t&&e.push([s,o,a])}function zr(e,t,r,n,i=1/0){let o=Math.min(n.distance(e[0],r[0][0]),i);if(0===o)return o;const a=new pr([[0,[0,e.length-1],[0,0]]],Sr),s=Mr(r);for(;a.length>0;){const i=a.pop();if(i[0]>=o)continue;const l=i[1],u=t?50:100;if(Cr(l)<=u){if(!Pr(l,e.length))return NaN;if(t){const t=Nr(e,l,r,n);if(isNaN(t)||0===t)return t;o=Math.min(o,t)}else for(let t=l[0];t<=l[1];++t){const i=Fr(e[t],r,n);if(o=Math.min(o,i),0===o)return 0}}else{const r=Or(l,t);Qr(a,o,n,e,s,r[0]),Qr(a,o,n,e,s,r[1])}}return o}function qr(e,t,r,n,i,o=1/0){let a=Math.min(o,i.distance(e[0],r[0]));if(0===a)return a;const s=new pr([[0,[0,e.length-1],[0,r.length-1]]],Sr);for(;s.length>0;){const o=s.pop();if(o[0]>=a)continue;const l=o[1],u=o[2],c=t?50:100,f=n?50:100;if(Cr(l)<=c&&Cr(u)<=f){if(!Pr(l,e.length)&&Pr(u,r.length))return NaN;let o;if(t&&n)o=Dr(e,l,r,u,i),a=Math.min(a,o);else if(t&&!n){const t=e.slice(l[0],l[1]+1);for(let e=u[0];e<=u[1];++e)if(o=Br(r[e],t,i),a=Math.min(a,o),0===a)return a}else if(!t&&n){const t=r.slice(u[0],u[1]+1);for(let r=l[0];r<=l[1];++r)if(o=Br(e[r],t,i),a=Math.min(a,o),0===a)return a}else o=jr(e,l,r,u,i),a=Math.min(a,o)}else{const o=Or(l,t),c=Or(u,n);Gr(s,a,i,e,r,o[0],c[0]),Gr(s,a,i,e,r,o[0],c[1]),Gr(s,a,i,e,r,o[1],c[0]),Gr(s,a,i,e,r,o[1],c[1])}}return a}function Vr(e){return"MultiPolygon"===e.type?e.coordinates.map((e=>({type:"Polygon",coordinates:e}))):"MultiLineString"===e.type?e.coordinates.map((e=>({type:"LineString",coordinates:e}))):"MultiPoint"===e.type?e.coordinates.map((e=>({type:"Point",coordinates:e}))):[e]}class Wr{constructor(e,t){this.type=ue,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(rt(e[1])){const t=e[1];if("FeatureCollection"===t.type)return new Wr(t,t.features.map((e=>Vr(e.geometry))).flat());if("Feature"===t.type)return new Wr(t,Vr(t.geometry));if("type"in t&&"coordinates"in t)return new Wr(t,Vr(t))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=e.geometry(),n=r.flat().map((t=>Yt([t.x,t.y],e.canonical)));if(0===r.length)return NaN;const i=new Ir(n[0][1]);let o=1/0;for(const e of t){switch(e.type){case"Point":o=Math.min(o,qr(n,!1,[e.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,qr(n,!1,e.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,zr(n,!1,e.coordinates,i,o))}if(0===o)return o}return o}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=e.geometry(),n=r.flat().map((t=>Yt([t.x,t.y],e.canonical)));if(0===r.length)return NaN;const i=new Ir(n[0][1]);let o=1/0;for(const e of t){switch(e.type){case"Point":o=Math.min(o,qr(n,!0,[e.coordinates],!1,i,o));break;case"LineString":o=Math.min(o,qr(n,!0,e.coordinates,!0,i,o));break;case"Polygon":o=Math.min(o,zr(n,!0,e.coordinates,i,o))}if(0===o)return o}return o}(e,this.geometries);if("Polygon"===e.geometryType())return function(e,t){const r=e.geometry();if(0===r.length||0===r[0].length)return NaN;const n=vr(r,0).map((t=>t.map((t=>t.map((t=>Yt([t.x,t.y],e.canonical))))))),i=new Ir(n[0][0][0][1]);let o=1/0;for(const e of t)for(const t of n){switch(e.type){case"Point":o=Math.min(o,zr([e.coordinates],!1,t,i,o));break;case"LineString":o=Math.min(o,zr(e.coordinates,!0,t,i,o));break;case"Polygon":o=Math.min(o,Ur(t,e.coordinates,i,o))}if(0===o)return o}return o}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Kr={"==":jt,"!=":Ft,">":Zt,"<":Nt,">=":Qt,"<=":Ut,array:lt,at:gt,boolean:lt,case:At,coalesce:Rt,collator:Gt,format:qt,image:Vt,in:mt,"index-of":_t,interpolate:Mt,"interpolate-hcl":Mt,"interpolate-lab":Mt,length:Wt,let:dt,literal:ot,match:vt,number:lt,"number-format":zt,object:lt,slice:bt,step:Et,string:lt,"to-boolean":ct,"to-color":ct,"to-number":ct,"to-string":ct,var:yt,within:hr,distance:Wr};class Hr{constructor(e,t,r,n){this.name=e,this.type=t,this._evaluate=r,this.args=n}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],n=Hr.definitions[r];if(!n)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,a=o.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[n,o]of a){s=new pt(t.registry,en,t.path,null,t.scope);const a=[];let l=!1;for(let t=1;t<e.length;t++){const r=e[t],i=Array.isArray(n)?n[t-1]:n.type,o=s.parse(r,1+a.length,i);if(!o){l=!0;break}a.push(o)}if(!l)if(Array.isArray(n)&&n.length!==a.length)s.error(`Expected ${n.length} arguments, but found ${a.length} instead.`);else{for(let e=0;e<a.length;e++){const t=Array.isArray(n)?n[e]:n.type,r=a[e];s.concat(e+1).checkSubtype(t,r.type)}if(0===s.errors.length)return new Hr(r,i,o,a)}}if(1===a.length)t.errors.push(...s.errors);else{const r=(a.length?a:o).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(be).join(", ")})`:`(${be(t.type)}...)`;var t})).join(" | "),n=[];for(let r=1;r<e.length;r++){const i=t.parse(e[r],1+n.length);if(!i)return null;n.push(be(i.type))}t.error(`Expected arguments of type ${r}, but found (${n.join(", ")}) instead.`)}return null}static register(e,t){Hr.definitions=t;for(const r in t)e[r]=Hr}}function Yr(e,[t,r,n,i]){t=t.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);const o=i?i.evaluate(e):1,a=tt(t,r,n,o);if(a)throw new at(a);return new We(t/255,r/255,n/255,o,!1)}function Xr(e,t){return e in t}function Jr(e,t){const r=t[e];return void 0===r?null:r}function $r(e){return{type:e}}function en(e){if(e instanceof yt)return en(e.boundExpression);if(e instanceof Hr&&"error"===e.name)return!1;if(e instanceof Gt)return!1;if(e instanceof hr)return!1;if(e instanceof Wr)return!1;const t=e instanceof ct||e instanceof lt;let r=!0;return e.eachChild((e=>{r=t?r&&en(e):r&&e instanceof ot})),!!r&&tn(e)&&nn(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function tn(e){if(e instanceof Hr){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof hr)return!1;if(e instanceof Wr)return!1;let t=!0;return e.eachChild((e=>{t&&!tn(e)&&(t=!1)})),t}function rn(e){if(e instanceof Hr&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!rn(e)&&(t=!1)})),t}function nn(e,t){if(e instanceof Hr&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild((e=>{r&&!nn(e,t)&&(r=!1)})),r}function on(e){return{result:"success",value:e}}function an(e){return{result:"error",value:e}}function sn(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function ln(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function un(e){return!!e.expression&&e.expression.interpolated}function cn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function fn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function hn(e){return e}function pn(e,t){const r="color"===t.type,n=e.stops&&"object"==typeof e.stops[0][0],i=n||!(n||void 0!==e.property),o=e.type||(un(t)?"exponential":"interval");if(r||"padding"===t.type){const n=r?We.parse:Xe.parse;(e=oe({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],n(e[1])]))),e.default=n(e.default?e.default:t.default)}if(e.colorSpace&&"rgb"!==(a=e.colorSpace)&&"hcl"!==a&&"lab"!==a)throw new Error(`Unknown color space: "${e.colorSpace}"`);var a;let s,l,u;if("exponential"===o)s=mn;else if("interval"===o)s=gn;else if("categorical"===o){s=yn,l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];u=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);s=_n}if(n){const r={},n=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],o=i[0].zoom;void 0===r[o]&&(r[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},n.push(o)),r[o].stops.push([i[0].value,i[1]])}const i=[];for(const e of n)i.push([r[e].zoom,pn(r[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Mt.interpolationFactor.bind(void 0,o),zoomStops:i.map((e=>e[0])),evaluate:({zoom:r},n)=>mn({stops:i,base:e.base},t,r).evaluate(r,n)}}if(i){const r="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:Mt.interpolationFactor.bind(void 0,r),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:r})=>s(e,t,r,l,u)}}return{kind:"source",evaluate(r,n){const i=n&&n.properties?n.properties[e.property]:void 0;return void 0===i?dn(e.default,t.default):s(e,t,i,l,u)}}}function dn(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function yn(e,t,r,n,i){return dn(typeof r===i?n[r]:void 0,e.default,t.default)}function gn(e,t,r){if("number"!==cn(r))return dn(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];const i=wt(e.stops.map((e=>e[0])),r);return e.stops[i][1]}function mn(e,t,r){const n=void 0!==e.base?e.base:1;if("number"!==cn(r))return dn(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[i-1][0])return e.stops[i-1][1];const o=wt(e.stops.map((e=>e[0])),r),a=function(e,t,r,n){const i=n-r,o=e-r;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(r,n,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1],u=Tt[t.type]||hn;return"function"==typeof s.evaluate?{evaluate(...t){const r=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==n)return u(r,n,a,e.colorSpace)}}:u(s,l,a,e.colorSpace)}function _n(e,t,r){switch(t.type){case"color":r=We.parse(r);break;case"formatted":r=Ye.fromString(r.toString());break;case"resolvedImage":r=et.fromString(r.toString());break;case"padding":r=Xe.parse(r);break;default:cn(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0)}return dn(r,e.default,t.default)}Hr.register(Kr,{error:[{kind:"error"},[ce],(e,[t])=>{throw new at(t.evaluate(e))}],typeof:[ce,[de],(e,[t])=>be(nt(t.evaluate(e)))],"to-rgba":[Ae(ue,4),[he],(e,[t])=>{const[r,n,i,o]=t.evaluate(e).rgb;return[255*r,255*n,255*i,o]}],rgb:[he,[ue,ue,ue],Yr],rgba:[he,[ue,ue,ue,ue],Yr],has:{type:fe,overloads:[[[ce],(e,[t])=>Xr(t.evaluate(e),e.properties())],[[ce,pe],(e,[t,r])=>Xr(t.evaluate(e),r.evaluate(e))]]},get:{type:de,overloads:[[[ce],(e,[t])=>Jr(t.evaluate(e),e.properties())],[[ce,pe],(e,[t,r])=>Jr(t.evaluate(e),r.evaluate(e))]]},"feature-state":[de,[ce],(e,[t])=>Jr(t.evaluate(e),e.featureState||{})],properties:[pe,[],e=>e.properties()],"geometry-type":[ce,[],e=>e.geometryType()],id:[de,[],e=>e.id()],zoom:[ue,[],e=>e.globals.zoom],"heatmap-density":[ue,[],e=>e.globals.heatmapDensity||0],"line-progress":[ue,[],e=>e.globals.lineProgress||0],accumulated:[de,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ue,$r(ue),(e,t)=>{let r=0;for(const n of t)r+=n.evaluate(e);return r}],"*":[ue,$r(ue),(e,t)=>{let r=1;for(const n of t)r*=n.evaluate(e);return r}],"-":{type:ue,overloads:[[[ue,ue],(e,[t,r])=>t.evaluate(e)-r.evaluate(e)],[[ue],(e,[t])=>-t.evaluate(e)]]},"/":[ue,[ue,ue],(e,[t,r])=>t.evaluate(e)/r.evaluate(e)],"%":[ue,[ue,ue],(e,[t,r])=>t.evaluate(e)%r.evaluate(e)],ln2:[ue,[],()=>Math.LN2],pi:[ue,[],()=>Math.PI],e:[ue,[],()=>Math.E],"^":[ue,[ue,ue],(e,[t,r])=>Math.pow(t.evaluate(e),r.evaluate(e))],sqrt:[ue,[ue],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[ue,[ue],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[ue,[ue],(e,[t])=>Math.log(t.evaluate(e))],log2:[ue,[ue],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[ue,[ue],(e,[t])=>Math.sin(t.evaluate(e))],cos:[ue,[ue],(e,[t])=>Math.cos(t.evaluate(e))],tan:[ue,[ue],(e,[t])=>Math.tan(t.evaluate(e))],asin:[ue,[ue],(e,[t])=>Math.asin(t.evaluate(e))],acos:[ue,[ue],(e,[t])=>Math.acos(t.evaluate(e))],atan:[ue,[ue],(e,[t])=>Math.atan(t.evaluate(e))],min:[ue,$r(ue),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[ue,$r(ue),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[ue,[ue],(e,[t])=>Math.abs(t.evaluate(e))],round:[ue,[ue],(e,[t])=>{const r=t.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[ue,[ue],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[ue,[ue],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[fe,[ce,de],(e,[t,r])=>e.properties()[t.value]===r.value],"filter-id-==":[fe,[de],(e,[t])=>e.id()===t.value],"filter-type-==":[fe,[ce],(e,[t])=>e.geometryType()===t.value],"filter-<":[fe,[ce,de],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n<i}],"filter-id-<":[fe,[de],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<n}],"filter->":[fe,[ce,de],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n>i}],"filter-id->":[fe,[de],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>n}],"filter-<=":[fe,[ce,de],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n<=i}],"filter-id-<=":[fe,[de],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r<=n}],"filter->=":[fe,[ce,de],(e,[t,r])=>{const n=e.properties()[t.value],i=r.value;return typeof n==typeof i&&n>=i}],"filter-id->=":[fe,[de],(e,[t])=>{const r=e.id(),n=t.value;return typeof r==typeof n&&r>=n}],"filter-has":[fe,[de],(e,[t])=>t.value in e.properties()],"filter-has-id":[fe,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[fe,[Ae(ce)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[fe,[Ae(de)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[fe,[ce,Ae(de)],(e,[t,r])=>r.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[fe,[ce,Ae(de)],(e,[t,r])=>function(e,t,r,n){for(;r<=n;){const i=r+n>>1;if(t[i]===e)return!0;t[i]>e?n=i-1:r=i+1}return!1}(e.properties()[t.value],r.value,0,r.value.length-1)],all:{type:fe,overloads:[[[fe,fe],(e,[t,r])=>t.evaluate(e)&&r.evaluate(e)],[$r(fe),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:fe,overloads:[[[fe,fe],(e,[t,r])=>t.evaluate(e)||r.evaluate(e)],[$r(fe),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[fe,[fe],(e,[t])=>!t.evaluate(e)],"is-supported-script":[fe,[ce],(e,[t])=>{const r=e.globals&&e.globals.isSupportedScript;return!r||r(t.evaluate(e))}],upcase:[ce,[ce],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[ce,[ce],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[ce,$r(de),(e,t)=>t.map((t=>it(t.evaluate(e)))).join("")],"resolved-locale":[ce,[ye],(e,[t])=>t.evaluate(e).resolvedLocale()]});class vn{constructor(e,t){var r;this.expression=e,this._warningHistory={},this._evaluator=new ht,this._defaultValue=t?"color"===(r=t).type&&fn(r.default)?new We(0,0,0,0):"color"===r.type?We.parse(r.default)||null:"padding"===r.type?Xe.parse(r.default)||null:"variableAnchorOffsetCollection"===r.type?$e.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,r,n,i,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,n,i,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new at(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function An(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Kr}function bn(e,t){const r=new pt(Kr,en,[],t?function(e){const t={color:he,string:ce,number:ue,enum:ce,boolean:fe,formatted:ge,padding:me,resolvedImage:_e,variableAnchorOffsetCollection:ve};return"array"===e.type?Ae(t[e.value]||de,e.length):t[e.type]}(t):void 0),n=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?on(new vn(n,t)):an(r.errors)}class wn{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!rn(t.expression)}evaluateWithoutErrorHandling(e,t,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,i,o)}evaluate(e,t,r,n,i,o){return this._styleExpression.evaluate(e,t,r,n,i,o)}}class En{constructor(e,t,r,n){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!rn(t.expression),this.interpolationType=n}evaluateWithoutErrorHandling(e,t,r,n,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,i,o)}evaluate(e,t,r,n,i,o){return this._styleExpression.evaluate(e,t,r,n,i,o)}interpolationFactor(e,t,r){return this.interpolationType?Mt.interpolationFactor(this.interpolationType,e,t,r):0}}function xn(e,t){const r=bn(e,t);if("error"===r.result)return r;const n=r.value.expression,i=tn(n);if(!i&&!sn(t))return an([new ae("","data expressions not supported")]);const o=nn(n,["zoom"]);if(!o&&!ln(t))return an([new ae("","zoom expressions not supported")]);const a=Sn(n);return a||o?a instanceof ae?an([a]):a instanceof Mt&&!un(t)?an([new ae("",'"interpolate" expressions cannot be used with this property')]):on(a?new En(i?"camera":"composite",r.value,a.labels,a instanceof Mt?a.interpolation:void 0):new wn(i?"constant":"source",r.value)):an([new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class In{constructor(e,t){this._parameters=e,this._specification=t,oe(this,pn(this._parameters,this._specification))}static deserialize(e){return new In(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Sn(e){let t=null;if(e instanceof dt)t=Sn(e.result);else if(e instanceof Rt){for(const r of e.args)if(t=Sn(r),t)break}else(e instanceof Et||e instanceof Mt)&&e.input instanceof Hr&&"zoom"===e.input.name&&(t=e);return t instanceof ae||e.eachChild((e=>{const r=Sn(e);r instanceof ae?t=r:!t&&r?t=new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new ae("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Cn(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Cn(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const Pn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function On(e){if(null==e)return{filter:()=>!0,needGeometry:!1};Cn(e)||(e=kn(e));const t=bn(e,Pn);if("error"===t.result)throw new Error(t.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return{filter:(e,r,n)=>t.value.evaluate(e,r,{},n),needGeometry:Mn(e)}}function Tn(e,t){return e<t?-1:e>t?1:0}function Mn(e){if(!Array.isArray(e))return!1;if("within"===e[0]||"distance"===e[0])return!0;for(let t=1;t<e.length;t++)if(Mn(e[t]))return!0;return!1}function kn(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?Rn(e[1],e[2],"=="):"!="===t?Dn(Rn(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Rn(e[1],e[2],t):"any"===t?(r=e.slice(1),["any"].concat(r.map(kn))):"all"===t?["all"].concat(e.slice(1).map(kn)):"none"===t?["all"].concat(e.slice(1).map(kn).map(Dn)):"in"===t?Bn(e[1],e.slice(2)):"!in"===t?Dn(Bn(e[1],e.slice(2))):"has"===t?Ln(e[1]):"!has"!==t||Dn(Ln(e[1]));var r}function Rn(e,t,r){switch(e){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,e,t]}}function Bn(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(Tn)]]:["filter-in-small",e,["literal",t]]}}function Ln(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Dn(e){return["!",e]}function jn(e){const t=typeof e;if("number"===t||"boolean"===t||"string"===t||null==e)return JSON.stringify(e);if(Array.isArray(e)){let t="[";for(const r of e)t+=`${jn(r)},`;return`${t}]`}const r=Object.keys(e).sort();let n="{";for(let t=0;t<r.length;t++)n+=`${JSON.stringify(r[t])}:${jn(e[r[t]])},`;return`${n}}`}function Fn(e){let t="";for(const r of W)t+=`/${jn(e[r])}`;return t}function Nn(e){const t=e.value;return t?[new ie(e.key,t,"constants have been deprecated as of v8")]:[]}function Zn(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Un(e){if(Array.isArray(e))return e.map(Un);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const r in e)t[r]=Un(e[r]);return t}return Zn(e)}function Qn(e){const t=e.key,r=e.value,n=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec,s=e.validateSpec;let l=[];const u=cn(r);if("object"!==u)return[new ie(t,r,`object expected, ${u} found`)];for(const e in r){const u=e.split(".")[0],c=n[u]||n["*"];let f;if(i[u])f=i[u];else if(n[u])f=s;else if(i["*"])f=i["*"];else{if(!n["*"]){l.push(new ie(t,r[e],`unknown property "${e}"`));continue}f=s}l=l.concat(f({key:(t?`${t}.`:t)+e,value:r[e],valueSpec:c,style:o,styleSpec:a,object:r,objectKey:e,validateSpec:s},r))}for(const e in n)i[e]||n[e].required&&void 0===n[e].default&&void 0===r[e]&&l.push(new ie(t,r,`missing required property "${e}"`));return l}function Gn(e){const t=e.value,r=e.valueSpec,n=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||e.validateSpec;if("array"!==cn(t))return[new ie(o,t,`array expected, ${cn(t)} found`)];if(r.length&&t.length!==r.length)return[new ie(o,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new ie(o,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let s={type:r.value,values:r.values};i.$version<7&&(s.function=r.function),"object"===cn(r.value)&&(s=r.value);let l=[];for(let r=0;r<t.length;r++)l=l.concat(a({array:t,arrayIndex:r,value:t[r],valueSpec:s,validateSpec:e.validateSpec,style:n,styleSpec:i,key:`${o}[${r}]`}));return l}function zn(e){const t=e.key,r=e.value,n=e.valueSpec;let i=cn(r);return"number"===i&&r!=r&&(i="NaN"),"number"!==i?[new ie(t,r,`number expected, ${i} found`)]:"minimum"in n&&r<n.minimum?[new ie(t,r,`${r} is less than the minimum value ${n.minimum}`)]:"maximum"in n&&r>n.maximum?[new ie(t,r,`${r} is greater than the maximum value ${n.maximum}`)]:[]}function qn(e){const t=e.valueSpec,r=Zn(e.value.type);let n,i,o,a={};const s="categorical"!==r&&void 0===e.value.property,l=!s,u="array"===cn(e.value.stops)&&"array"===cn(e.value.stops[0])&&"object"===cn(e.value.stops[0][0]),c=Qn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new ie(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const n=e.value;return t=t.concat(Gn({key:e.key,value:n,valueSpec:e.valueSpec,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:f})),"array"===cn(n)&&0===n.length&&t.push(new ie(e.key,n,"array must have at least one stop")),t},default:function(e){return e.validateSpec({key:e.key,value:e.value,valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&s&&c.push(new ie(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||c.push(new ie(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!un(e.valueSpec)&&c.push(new ie(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!sn(e.valueSpec)?c.push(new ie(e.key,e.value,"property functions not supported")):s&&!ln(e.valueSpec)&&c.push(new ie(e.key,e.value,"zoom functions not supported"))),"categorical"!==r&&!u||void 0!==e.value.property||c.push(new ie(e.key,e.value,'"property" property is required')),c;function f(e){let r=[];const n=e.value,s=e.key;if("array"!==cn(n))return[new ie(s,n,`array expected, ${cn(n)} found`)];if(2!==n.length)return[new ie(s,n,`array length 2 expected, length ${n.length} found`)];if(u){if("object"!==cn(n[0]))return[new ie(s,n,`object expected, ${cn(n[0])} found`)];if(void 0===n[0].zoom)return[new ie(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new ie(s,n,"object stop key must have value")];if(o&&o>Zn(n[0].zoom))return[new ie(s,n[0].zoom,"stop zoom values must appear in ascending order")];Zn(n[0].zoom)!==o&&(o=Zn(n[0].zoom),i=void 0,a={}),r=r.concat(Qn({key:`${s}[0]`,value:n[0],valueSpec:{zoom:{}},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:zn,value:h}}))}else r=r.concat(h({key:`${s}[0]`,value:n[0],valueSpec:{},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec},n));return An(Un(n[1]))?r.concat([new ie(`${s}[1]`,n[1],"expressions are not allowed in function stops.")]):r.concat(e.validateSpec({key:`${s}[1]`,value:n[1],valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec}))}function h(e,o){const s=cn(e.value),l=Zn(e.value),u=null!==e.value?e.value:o;if(n){if(s!==n)return[new ie(e.key,u,`${s} stop domain type must match previous stop domain type ${n}`)]}else n=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new ie(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==r){let n=`number expected, ${s} found`;return sn(t)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ie(e.key,u,n)]}return"categorical"!==r||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===s&&void 0!==i&&l<i?[new ie(e.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===r&&l in a?[new ie(e.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new ie(e.key,u,`integer expected, found ${l}`)]}}function Vn(e){const t=("property"===e.expressionContext?xn:bn)(Un(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new ie(`${e.key}${t.key}`,e.value,t.message)));const r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new ie(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!rn(r))return[new ie(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!rn(r))return[new ie(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!nn(r,["zoom","feature-state"]))return[new ie(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!tn(r))return[new ie(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wn(e){const t=e.key,r=e.value,n=e.valueSpec,i=[];return Array.isArray(n.values)?-1===n.values.indexOf(Zn(r))&&i.push(new ie(t,r,`expected one of [${n.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(n.values).indexOf(Zn(r))&&i.push(new ie(t,r,`expected one of [${Object.keys(n.values).join(", ")}], ${JSON.stringify(r)} found`)),i}function Kn(e){return Cn(Un(e.value))?Vn(oe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Hn(e)}function Hn(e){const t=e.value,r=e.key;if("array"!==cn(t))return[new ie(r,t,`array expected, ${cn(t)} found`)];const n=e.styleSpec;let i,o=[];if(t.length<1)return[new ie(r,t,"filter array must have at least 1 element")];switch(o=o.concat(Wn({key:`${r}[0]`,value:t[0],valueSpec:n.filter_operator,style:e.style,styleSpec:e.styleSpec})),Zn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Zn(t[1])&&o.push(new ie(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new ie(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=cn(t[1]),"string"!==i&&o.push(new ie(`${r}[1]`,t[1],`string expected, ${i} found`)));for(let a=2;a<t.length;a++)i=cn(t[a]),"$type"===Zn(t[1])?o=o.concat(Wn({key:`${r}[${a}]`,value:t[a],valueSpec:n.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new ie(`${r}[${a}]`,t[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let n=1;n<t.length;n++)o=o.concat(Hn({key:`${r}[${n}]`,value:t[n],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=cn(t[1]),2!==t.length?o.push(new ie(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new ie(`${r}[1]`,t[1],`string expected, ${i} found`))}return o}function Yn(e,t){const r=e.key,n=e.validateSpec,i=e.style,o=e.styleSpec,a=e.value,s=e.objectKey,l=o[`${t}_${e.layerType}`];if(!l)return[];const u=s.match(/^(.*)-transition$/);if("paint"===t&&u&&l[u[1]]&&l[u[1]].transition)return n({key:r,value:a,valueSpec:o.transition,style:i,styleSpec:o});const c=e.valueSpec||l[s];if(!c)return[new ie(r,a,`unknown property "${s}"`)];let f;if("string"===cn(a)&&sn(c)&&!c.tokens&&(f=/^{([^}]+)}$/.exec(a)))return[new ie(r,a,`"${s}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(f[1])} }\`.`)];const h=[];return"symbol"===e.layerType&&("text-field"===s&&i&&!i.glyphs&&h.push(new ie(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&fn(Un(a))&&"identity"===Zn(a.type)&&h.push(new ie(r,a,'"text-font" does not support identity functions'))),h.concat(n({key:e.key,value:a,valueSpec:c,style:i,styleSpec:o,expressionContext:"property",propertyType:t,propertyKey:s}))}function Xn(e){return Yn(e,"paint")}function Jn(e){return Yn(e,"layout")}function $n(e){let t=[];const r=e.value,n=e.key,i=e.style,o=e.styleSpec;r.type||r.ref||t.push(new ie(n,r,'either "type" or "ref" is required'));let a=Zn(r.type);const s=Zn(r.ref);if(r.id){const o=Zn(r.id);for(let a=0;a<e.arrayIndex;a++){const e=i.layers[a];Zn(e.id)===o&&t.push(new ie(n,r.id,`duplicate layer id "${r.id}", previously used at line ${e.id.__line__}`))}}if("ref"in r){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in r&&t.push(new ie(n,r[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{Zn(t.id)===s&&(e=t)})),e?e.ref?t.push(new ie(n,r.ref,"ref cannot reference another ref layer")):a=Zn(e.type):t.push(new ie(n,r.ref,`ref layer "${s}" not found`))}else if("background"!==a)if(r.source){const e=i.sources&&i.sources[r.source],o=e&&Zn(e.type);e?"vector"===o&&"raster"===a?t.push(new ie(n,r.source,`layer "${r.id}" requires a raster source`)):"raster-dem"!==o&&"hillshade"===a?t.push(new ie(n,r.source,`layer "${r.id}" requires a raster-dem source`)):"raster"===o&&"raster"!==a?t.push(new ie(n,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==o||r["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new ie(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!r.paint||!r.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new ie(n,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ie(n,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new ie(n,r.source,`source "${r.source}" not found`))}else t.push(new ie(n,r,'missing required property "source"'));return t=t.concat(Qn({key:n,value:r,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":()=>[],type:()=>e.validateSpec({key:`${n}.type`,value:r.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:r,objectKey:"type"}),filter:Kn,layout:e=>Qn({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Jn(oe({layerType:a},e))}}),paint:e=>Qn({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Xn(oe({layerType:a},e))}})}})),t}function ei(e){const t=e.value,r=e.key,n=cn(t);return"string"!==n?[new ie(r,t,`string expected, ${n} found`)]:[]}const ti={promoteId:function({key:e,value:t}){if("string"===cn(t))return ei({key:e,value:t});{const r=[];for(const n in t)r.push(...ei({key:`${e}.${n}`,value:t[n]}));return r}}};function ri(e){const t=e.value,r=e.key,n=e.styleSpec,i=e.style,o=e.validateSpec;if(!t.type)return[new ie(r,t,'"type" is required')];const a=Zn(t.type);let s;switch(a){case"vector":case"raster":return s=Qn({key:r,value:t,valueSpec:n[`source_${a.replace("-","_")}`],style:e.style,styleSpec:n,objectElementValidators:ti,validateSpec:o}),s;case"raster-dem":return s=function(e){var t;const r=null!==(t=e.sourceName)&&void 0!==t?t:"",n=e.value,i=e.styleSpec,o=i.source_raster_dem,a=e.style;let s=[];const l=cn(n);if(void 0===n)return s;if("object"!==l)return s.push(new ie("source_raster_dem",n,`object expected, ${l} found`)),s;const u="custom"===Zn(n.encoding),c=["redFactor","greenFactor","blueFactor","baseShift"],f=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const t in n)!u&&c.includes(t)?s.push(new ie(t,n[t],`In "${r}": "${t}" is only valid when "encoding" is set to "custom". ${f} encoding found`)):o[t]?s=s.concat(e.validateSpec({key:t,value:n[t],valueSpec:o[t],validateSpec:e.validateSpec,style:a,styleSpec:i})):s.push(new ie(t,n[t],`unknown property "${t}"`));return s}({sourceName:r,value:t,style:e.style,styleSpec:n,validateSpec:o}),s;case"geojson":if(s=Qn({key:r,value:t,valueSpec:n.source_geojson,style:i,styleSpec:n,validateSpec:o,objectElementValidators:ti}),t.cluster)for(const e in t.clusterProperties){const[n,i]=t.clusterProperties[e],a="string"==typeof n?[n,["accumulated"],["get",e]]:n;s.push(...Vn({key:`${r}.${e}.map`,value:i,validateSpec:o,expressionContext:"cluster-map"})),s.push(...Vn({key:`${r}.${e}.reduce`,value:a,validateSpec:o,expressionContext:"cluster-reduce"}))}return s;case"video":return Qn({key:r,value:t,valueSpec:n.source_video,style:i,validateSpec:o,styleSpec:n});case"image":return Qn({key:r,value:t,valueSpec:n.source_image,style:i,validateSpec:o,styleSpec:n});case"canvas":return[new ie(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Wn({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,validateSpec:o,styleSpec:n})}}function ni(e){const t=e.value,r=e.styleSpec,n=r.light,i=e.style;let o=[];const a=cn(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new ie("light",t,`object expected, ${a} found`)]),o;for(const a in t){const s=a.match(/^(.*)-transition$/);o=o.concat(s&&n[s[1]]&&n[s[1]].transition?e.validateSpec({key:a,value:t[a],valueSpec:r.transition,validateSpec:e.validateSpec,style:i,styleSpec:r}):n[a]?e.validateSpec({key:a,value:t[a],valueSpec:n[a],validateSpec:e.validateSpec,style:i,styleSpec:r}):[new ie(a,t[a],`unknown property "${a}"`)])}return o}function ii(e){const t=e.value,r=e.styleSpec,n=r.sky,i=e.style,o=cn(t);if(void 0===t)return[];if("object"!==o)return[new ie("sky",t,`object expected, ${o} found`)];let a=[];for(const o in t)a=a.concat(n[o]?e.validateSpec({key:o,value:t[o],valueSpec:n[o],style:i,styleSpec:r}):[new ie(o,t[o],`unknown property "${o}"`)]);return a}function oi(e){const t=e.value,r=e.styleSpec,n=r.terrain,i=e.style;let o=[];const a=cn(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new ie("terrain",t,`object expected, ${a} found`)]),o;for(const a in t)o=o.concat(n[a]?e.validateSpec({key:a,value:t[a],valueSpec:n[a],validateSpec:e.validateSpec,style:i,styleSpec:r}):[new ie(a,t[a],`unknown property "${a}"`)]);return o}function ai(e){let t=[];const r=e.value,n=e.key;if(Array.isArray(r)){const i=[],o=[];for(const a in r)r[a].id&&i.includes(r[a].id)&&t.push(new ie(n,r,`all the sprites' ids must be unique, but ${r[a].id} is duplicated`)),i.push(r[a].id),r[a].url&&o.includes(r[a].url)&&t.push(new ie(n,r,`all the sprites' URLs must be unique, but ${r[a].url} is duplicated`)),o.push(r[a].url),t=t.concat(Qn({key:`${n}[${a}]`,value:r[a],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:e.validateSpec}));return t}return ei({key:n,value:r})}const si={"*":()=>[],array:Gn,boolean:function(e){const t=e.value,r=e.key,n=cn(t);return"boolean"!==n?[new ie(r,t,`boolean expected, ${n} found`)]:[]},number:zn,color:function(e){const t=e.key,r=e.value,n=cn(r);return"string"!==n?[new ie(t,r,`color expected, ${n} found`)]:We.parse(String(r))?[]:[new ie(t,r,`color expected, "${r}" found`)]},constants:Nn,enum:Wn,filter:Kn,function:qn,layer:$n,object:Qn,source:ri,light:ni,sky:ii,terrain:oi,string:ei,formatted:function(e){return 0===ei(e).length?[]:Vn(e)},resolvedImage:function(e){return 0===ei(e).length?[]:Vn(e)},padding:function(e){const t=e.key,r=e.value;if("array"===cn(r)){if(r.length<1||r.length>4)return[new ie(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const n={type:"number"};let i=[];for(let o=0;o<r.length;o++)i=i.concat(e.validateSpec({key:`${t}[${o}]`,value:r[o],validateSpec:e.validateSpec,valueSpec:n}));return i}return zn({key:t,value:r,valueSpec:{}})},variableAnchorOffsetCollection:function(e){const t=e.key,r=e.value,n=cn(r),i=e.styleSpec;if("array"!==n||r.length<1||r.length%2!=0)return[new ie(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let n=0;n<r.length;n+=2)o=o.concat(Wn({key:`${t}[${n}]`,value:r[n],valueSpec:i.layout_symbol["text-anchor"]})),o=o.concat(Gn({key:`${t}[${n+1}]`,value:r[n+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:i}));return o},sprite:ai};function li(e){const t=e.value,r=e.valueSpec,n=e.styleSpec;return e.validateSpec=li,r.expression&&fn(Zn(t))?qn(e):r.expression&&An(Un(t))?Vn(e):r.type&&si[r.type]?si[r.type](e):Qn(oe({},e,{valueSpec:r.type?n[r.type]:r}))}function ui(e){const t=e.value,r=e.key,n=ei(e);return n.length||(-1===t.indexOf("{fontstack}")&&n.push(new ie(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&n.push(new ie(r,t,'"glyphs" url must include a "{range}" token'))),n}function ci(e,t=V){let r=[];return r=r.concat(li({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:li,objectElementValidators:{glyphs:ui,"*":()=>[]}})),e.constants&&(r=r.concat(Nn({key:"constants",value:e.constants,style:e,styleSpec:t,validateSpec:li}))),hi(r)}function fi(e){return function(t){return e({...t,validateSpec:li})}}function hi(e){return[].concat(e).sort(((e,t)=>e.line-t.line))}function pi(e){return function(...t){return hi(e.apply(this,t))}}ci.source=pi(fi(ri)),ci.sprite=pi(fi(ai)),ci.glyphs=pi(fi(ui)),ci.light=pi(fi(ni)),ci.sky=pi(fi(ii)),ci.terrain=pi(fi(oi)),ci.layer=pi(fi($n)),ci.filter=pi(fi(Kn)),ci.paintProperty=pi(fi(Xn)),ci.layoutProperty=pi(fi(Jn));const di=ci,yi=di.light,gi=di.paintProperty,mi=di.layoutProperty;function _i(e,t){let r=!1;if(t&&t.length)for(const n of t)e.fire(new z(new Error(n.message))),r=!0;return r}class vi{constructor(e,t,r){const n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(r=i[2]);for(let e=0;e<this.d*this.d;e++){const t=i[3+e],r=i[3+e+1];n.push(t===r?null:i.subarray(t,r))}const o=i[3+n.length+1];this.keys=i.subarray(i[3+n.length],o),this.bboxes=i.subarray(o),this.insert=this._insertReadonly}else{this.d=t+2*r;for(let e=0;e<this.d*this.d;e++)n.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;const i=r/t*e;this.min=-i,this.max=e+i}insert(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,r,n,i,o){this.cells[i].push(o)}query(e,t,r,n,i){const o=this.min,a=this.max;if(e<=o&&t<=o&&a<=r&&a<=n&&!i)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(e,t,r,n,this._queryCell,o,{},i),o}}_queryCell(e,t,r,n,i,o,a,s){const l=this.cells[i];if(null!==l){const i=this.keys,u=this.bboxes;for(let c=0;c<l.length;c++){const f=l[c];if(void 0===a[f]){const l=4*f;(s?s(u[l+0],u[l+1],u[l+2],u[l+3]):e<=u[l+2]&&t<=u[l+3]&&r>=u[l+0]&&n>=u[l+1])?(a[f]=!0,o.push(i[f])):a[f]=!1}}}}_forEachCell(e,t,r,n,i,o,a,s){const l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(r),f=this._convertToCellCoord(n);for(let h=l;h<=c;h++)for(let l=u;l<=f;l++){const u=this.d*l+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(l),this._convertFromCellCoord(h+1),this._convertFromCellCoord(l+1)))&&i.call(this,e,t,r,n,u,o,a,s))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,t=3+this.cells.length+1+1;let r=0;for(let e=0;e<this.cells.length;e++)r+=this.cells[e].length;const n=new Int32Array(t+r+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;let i=t;for(let t=0;t<e.length;t++){const r=e[t];n[3+t]=i,n.set(r,i),i+=r.length}return n[3+e.length]=i,n.set(this.keys,i),i+=this.keys.length,n[3+e.length+1]=i,n.set(this.bboxes,i),i+=this.bboxes.length,n.buffer}static serialize(e,t){const r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}}static deserialize(e){return new vi(e.buffer)}}const Ai={};function bi(e,t,r={}){if(Ai[e])throw new Error(`${e} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Ai[e]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}bi("Object",Object),bi("TransferableGridIndex",vi),bi("Color",We),bi("Error",Error),bi("AJAXError",j),bi("ResolvedImage",et),bi("StylePropertyFunction",In),bi("StyleExpression",vn,{omit:["_evaluator"]}),bi("ZoomDependentExpression",En),bi("ZoomConstantExpression",wn),bi("CompoundExpression",Hr,{omit:["_evaluate"]});for(const e in Kr)Kr[e]._classRegistryKey||bi(`Expression_${e}`,Kr[e]);function wi(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Ei(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof Error)return e;if(wi(e))return t&&t.push(e),e;if(C(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const r=e;return t&&t.push(r.buffer),r}if(e instanceof ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const r=[];for(const n of e)r.push(Ei(n,t));return r}if("object"==typeof e){const r=e.constructor,n=r._classRegistryKey;if(!n)throw new Error(`can't serialize object of unregistered class ${r.name}`);if(!Ai[n])throw new Error(`${n} is not registered.`);const i=r.serialize?r.serialize(e,t):{};if(r.serialize){if(t&&i===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const r in e){if(!e.hasOwnProperty(r))continue;if(Ai[n].omit.indexOf(r)>=0)continue;const o=e[r];i[r]=Ai[n].shallow.indexOf(r)>=0?o:Ei(o,t)}e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==n&&(i.$name=n),i}throw new Error("can't serialize object of type "+typeof e)}function xi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof Error||wi(e)||C(e)||ArrayBuffer.isView(e)||e instanceof ImageData)return e;if(Array.isArray(e))return e.map(xi);if("object"==typeof e){const t=e.$name||"Object";if(!Ai[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:r}=Ai[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(e);const n=Object.create(r.prototype);for(const r of Object.keys(e)){if("$name"===r)continue;const i=e[r];n[r]=Ai[t].shallow.indexOf(r)>=0?i:xi(i)}return n}throw new Error("can't deserialize object of type "+typeof e)}class Ii{constructor(){this.first=!0}update(e,t){const r=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=r,!0))}}const Si={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function Ci(e){for(const t of e)if(Ti(t.charCodeAt(0)))return!0;return!1}function Pi(e){for(const t of e)if(!Oi(t.charCodeAt(0)))return!1;return!0}function Oi(e){return!(Si.Arabic(e)||Si["Arabic Supplement"](e)||Si["Arabic Extended-A"](e)||Si["Arabic Presentation Forms-A"](e)||Si["Arabic Presentation Forms-B"](e))}function Ti(e){return!(746!==e&&747!==e&&(e<4352||!(Si["Bopomofo Extended"](e)||Si.Bopomofo(e)||Si["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Si["CJK Compatibility Ideographs"](e)||Si["CJK Compatibility"](e)||Si["CJK Radicals Supplement"](e)||Si["CJK Strokes"](e)||!(!Si["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Si["CJK Unified Ideographs Extension A"](e)||Si["CJK Unified Ideographs"](e)||Si["Enclosed CJK Letters and Months"](e)||Si["Hangul Compatibility Jamo"](e)||Si["Hangul Jamo Extended-A"](e)||Si["Hangul Jamo Extended-B"](e)||Si["Hangul Jamo"](e)||Si["Hangul Syllables"](e)||Si.Hiragana(e)||Si["Ideographic Description Characters"](e)||Si.Kanbun(e)||Si["Kangxi Radicals"](e)||Si["Katakana Phonetic Extensions"](e)||Si.Katakana(e)&&12540!==e||!(!Si["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Si["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Si["Unified Canadian Aboriginal Syllabics"](e)||Si["Unified Canadian Aboriginal Syllabics Extended"](e)||Si["Vertical Forms"](e)||Si["Yijing Hexagram Symbols"](e)||Si["Yi Syllables"](e)||Si["Yi Radicals"](e))))}function Mi(e){return!(Ti(e)||function(e){return!!(Si["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Si["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Si["Letterlike Symbols"](e)||Si["Number Forms"](e)||Si["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Si["Control Pictures"](e)&&9251!==e||Si["Optical Character Recognition"](e)||Si["Enclosed Alphanumerics"](e)||Si["Geometric Shapes"](e)||Si["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Si["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Si["CJK Symbols and Punctuation"](e)||Si.Katakana(e)||Si["Private Use Area"](e)||Si["CJK Compatibility Forms"](e)||Si["Small Form Variants"](e)||Si["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function ki(e){return e>=1424&&e<=2303||Si["Arabic Presentation Forms-A"](e)||Si["Arabic Presentation Forms-B"](e)}function Ri(e,t){return!(!t&&ki(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Si.Khmer(e))}function Bi(e){for(const t of e)if(ki(t.charCodeAt(0)))return!0;return!1}const Li=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(e){this.pluginStatus=e.pluginStatus,this.pluginURL=e.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(e){this.applyArabicShaping=e.applyArabicShaping,this.processBidirectionalText=e.processBidirectionalText,this.processStyledBidirectionalText=e.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Di{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ii,this.transition={})}isSupportedScript(e){return function(e,t){for(const r of e)if(!Ri(r.charCodeAt(0),t))return!1;return!0}(e,"loaded"===Li.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),r=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*t}}}class ji{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(fn(e))return new In(e,t);if(An(e)){const r=xn(e,t);if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return r.value}{let r=e;return"color"===t.type&&"string"==typeof e?r=We.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)?"variableAnchorOffsetCollection"===t.type&&Array.isArray(e)&&(r=$e.parse(e)):r=Xe.parse(e),{kind:"constant",evaluate:()=>r}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,r){return this.property.possiblyEvaluate(this,e,t,r)}}class Fi{constructor(e){this.property=e,this.value=new ji(e,void 0)}transitioned(e,t){return new Zi(this.property,this.value,t,m({},e.transition,this.transition),e.now)}untransitioned(){return new Zi(this.property,this.value,null,{},0)}}class Ni{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return b(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Fi(this._values[e].property)),this._values[e].value=new ji(this._values[e].property,null===t?void 0:b(t))}getTransition(e){return b(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Fi(this._values[e].property)),this._values[e].transition=b(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r);const n=this.getTransition(t);void 0!==n&&(e[`${t}-transition`]=n)}return e}transitioned(e,t){const r=new Ui(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].transitioned(e,t._values[n]);return r}untransitioned(){const e=new Ui(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Zi{constructor(e,t,r,n,i){this.property=e,this.value=t,this.begin=i+n.delay||0,this.end=this.begin+n.duration||0,e.specification.transition&&(n.delay||n.duration)&&(this.prior=r)}possiblyEvaluate(e,t,r){const n=e.now||0,i=this.value.possiblyEvaluate(e,t,r),o=this.prior;if(o){if(n>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(n<this.begin)return o.possiblyEvaluate(e,t,r);{const a=(n-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,r),i,function(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}(a))}}return i}}class Ui{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,r){const n=new zi(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(e,t,r);return n}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Qi{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}hasValue(e){return void 0!==this._values[e].value}getValue(e){return b(this._values[e].value)}setValue(e,t){this._values[e]=new ji(this._values[e].property,null===t?void 0:b(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r)}return e}possiblyEvaluate(e,t,r){const n=new zi(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].possiblyEvaluate(e,t,r);return n}}class Gi{constructor(e,t,r){this.property=e,this.value=t,this.parameters=r}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,r,n){return this.property.evaluate(this.value,this.parameters,e,t,r,n)}}class zi{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class qi{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,r){const n=Tt[this.specification.type];return n?n(e,t,r):e}}class Vi{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,r,n){return new Gi(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},r,n)}:e.expression,t)}interpolate(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Gi(this,{kind:"constant",value:void 0},e.parameters);const n=Tt[this.specification.type];if(n){const i=n(e.value.value,t.value.value,r);return new Gi(this,{kind:"constant",value:i},e.parameters)}return e}evaluate(e,t,r,n,i,o){return"constant"===e.kind?e.value:e.evaluate(t,r,n,i,o)}}class Wi extends Vi{possiblyEvaluate(e,t,r,n){if(void 0===e.value)return new Gi(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},r,n),o="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,t);return new Gi(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){const r=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Gi(this,{kind:"constant",value:r},t)}return new Gi(this,e.expression,t)}evaluate(e,t,r,n,i,o){if("source"===e.kind){const a=e.evaluate(t,r,n,i,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},r,n),e.evaluate({zoom:Math.floor(t.zoom)},r,n),e.evaluate({zoom:Math.floor(t.zoom)+1},r,n),t):e.value}_calculate(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}}interpolate(e){return e}}class Ki{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,n){if(void 0!==e.value){if("constant"===e.expression.kind){const i=e.expression.evaluate(t,null,{},r,n);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new Di(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Di(Math.floor(t.zoom),t)),e.expression.evaluate(new Di(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,r,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}}interpolate(e){return e}}class Hi{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,n){return!!e.expression.evaluate(t,null,{},r,n)}interpolate(){return!1}}class Yi{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const r=e[t];r.specification.overridable&&this.overridableProperties.push(t);const n=this.defaultPropertyValues[t]=new ji(r,void 0),i=this.defaultTransitionablePropertyValues[t]=new Fi(r);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=n.possiblyEvaluate({})}}}bi("DataDrivenProperty",Vi),bi("DataConstantProperty",qi),bi("CrossFadedDataDrivenProperty",Wi),bi("CrossFadedProperty",Ki),bi("ColorRampProperty",Hi);const Xi="-transition";class Ji extends q{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Qi(t.layout)),t.paint)){this._transitionablePaint=new Ni(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new zi(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,r={}){null!=t&&this._validate(mi,`layers.${this.id}.layout.${e}`,e,t,r)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return e.endsWith(Xi)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,r={}){if(null!=t&&this._validate(gi,`layers.${this.id}.paint.${e}`,e,t,r))return!1;if(e.endsWith(Xi))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const r=this._transitionablePaint._values[e],n="cross-faded-data-driven"===r.property.specification["property-type"],i=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value;return a.isDataDriven()||i||n||this._handleOverridablePaintPropertyUpdate(e,o,a)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,r){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),A(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,r,n,i={}){return(!i||!1!==i.validate)&&_i(this,e.call(di,{key:t,layerType:this.type,objectKey:r,value:n,styleSpec:V,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Gi&&sn(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const $i={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class eo{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class to{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ro(e,t=1){let r=0,n=0;return{members:e.map((e=>{const i=$i[e.type].BYTES_PER_ELEMENT,o=r=no(r,Math.max(t,i)),a=e.components||1;return n=Math.max(n,i),r+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:no(r,Math.max(n,t)),alignment:t}}function no(e,t){return Math.ceil(e/t)*t}class io extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.int16[n+0]=t,this.int16[n+1]=r,e}}io.prototype.bytesPerElement=4,bi("StructArrayLayout2i4",io);class oo extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=r,this.int16[i+2]=n,e}}oo.prototype.bytesPerElement=6,bi("StructArrayLayout3i6",oo);class ao extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=r,this.int16[o+2]=n,this.int16[o+3]=i,e}}ao.prototype.bytesPerElement=8,bi("StructArrayLayout4i8",ao);class so extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i,o)}emplace(e,t,r,n,i,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}so.prototype.bytesPerElement=12,bi("StructArrayLayout2i4i12",so);class lo extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i,o)}emplace(e,t,r,n,i,o,a){const s=4*e,l=8*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.uint8[l+4]=n,this.uint8[l+5]=i,this.uint8[l+6]=o,this.uint8[l+7]=a,e}}lo.prototype.bytesPerElement=8,bi("StructArrayLayout2i4ub8",lo);class uo extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.float32[n+0]=t,this.float32[n+1]=r,e}}uo.prototype.bytesPerElement=8,bi("StructArrayLayout2f8",uo);class co extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a,s,l,u){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,r,n,i,o,a,s,l,u)}emplace(e,t,r,n,i,o,a,s,l,u,c){const f=10*e;return this.uint16[f+0]=t,this.uint16[f+1]=r,this.uint16[f+2]=n,this.uint16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=l,this.uint16[f+8]=u,this.uint16[f+9]=c,e}}co.prototype.bytesPerElement=20,bi("StructArrayLayout10ui20",co);class fo extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a,s,l,u,c,f){const h=this.length;return this.resize(h+1),this.emplace(h,e,t,r,n,i,o,a,s,l,u,c,f)}emplace(e,t,r,n,i,o,a,s,l,u,c,f,h){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=r,this.int16[p+2]=n,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=u,this.int16[p+9]=c,this.int16[p+10]=f,this.int16[p+11]=h,e}}fo.prototype.bytesPerElement=24,bi("StructArrayLayout4i4ui4i24",fo);class ho extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=r,this.float32[i+2]=n,e}}ho.prototype.bytesPerElement=12,bi("StructArrayLayout3f12",ho);class po extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}po.prototype.bytesPerElement=4,bi("StructArrayLayout1ul4",po);class yo extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a,s,l){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,r,n,i,o,a,s,l)}emplace(e,t,r,n,i,o,a,s,l,u){const c=10*e,f=5*e;return this.int16[c+0]=t,this.int16[c+1]=r,this.int16[c+2]=n,this.int16[c+3]=i,this.int16[c+4]=o,this.int16[c+5]=a,this.uint32[f+3]=s,this.uint16[c+8]=l,this.uint16[c+9]=u,e}}yo.prototype.bytesPerElement=20,bi("StructArrayLayout6i1ul2ui20",yo);class go extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i,o)}emplace(e,t,r,n,i,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=n,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}go.prototype.bytesPerElement=12,bi("StructArrayLayout2i2i2i12",go);class mo extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,n,i)}emplace(e,t,r,n,i,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=n,this.int16[s+6]=i,this.int16[s+7]=o,e}}mo.prototype.bytesPerElement=16,bi("StructArrayLayout2f1f2i16",mo);class _o extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,n,i,o)}emplace(e,t,r,n,i,o,a){const s=16*e,l=4*e,u=8*e;return this.uint8[s+0]=t,this.uint8[s+1]=r,this.float32[l+1]=n,this.float32[l+2]=i,this.int16[u+6]=o,this.int16[u+7]=a,e}}_o.prototype.bytesPerElement=16,bi("StructArrayLayout2ub2f2i16",_o);class vo extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=r,this.uint16[i+2]=n,e}}vo.prototype.bytesPerElement=6,bi("StructArrayLayout3ui6",vo);class Ao extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g){const m=this.length;return this.resize(m+1),this.emplace(m,e,t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g)}emplace(e,t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m){const _=24*e,v=12*e,A=48*e;return this.int16[_+0]=t,this.int16[_+1]=r,this.uint16[_+2]=n,this.uint16[_+3]=i,this.uint32[v+2]=o,this.uint32[v+3]=a,this.uint32[v+4]=s,this.uint16[_+10]=l,this.uint16[_+11]=u,this.uint16[_+12]=c,this.float32[v+7]=f,this.float32[v+8]=h,this.uint8[A+36]=p,this.uint8[A+37]=d,this.uint8[A+38]=y,this.uint32[v+10]=g,this.int16[_+22]=m,e}}Ao.prototype.bytesPerElement=48,bi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ao);class bo extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v,A,b,w,E,x,I,S,C){const P=this.length;return this.resize(P+1),this.emplace(P,e,t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v,A,b,w,E,x,I,S,C)}emplace(e,t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v,A,b,w,E,x,I,S,C,P){const O=32*e,T=16*e;return this.int16[O+0]=t,this.int16[O+1]=r,this.int16[O+2]=n,this.int16[O+3]=i,this.int16[O+4]=o,this.int16[O+5]=a,this.int16[O+6]=s,this.int16[O+7]=l,this.uint16[O+8]=u,this.uint16[O+9]=c,this.uint16[O+10]=f,this.uint16[O+11]=h,this.uint16[O+12]=p,this.uint16[O+13]=d,this.uint16[O+14]=y,this.uint16[O+15]=g,this.uint16[O+16]=m,this.uint16[O+17]=_,this.uint16[O+18]=v,this.uint16[O+19]=A,this.uint16[O+20]=b,this.uint16[O+21]=w,this.uint16[O+22]=E,this.uint32[T+12]=x,this.float32[T+13]=I,this.float32[T+14]=S,this.uint16[O+30]=C,this.uint16[O+31]=P,e}}bo.prototype.bytesPerElement=64,bi("StructArrayLayout8i15ui1ul2f2ui64",bo);class wo extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}wo.prototype.bytesPerElement=4,bi("StructArrayLayout1f4",wo);class Eo extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=3*e;return this.uint16[6*e+0]=t,this.float32[i+1]=r,this.float32[i+2]=n,e}}Eo.prototype.bytesPerElement=12,bi("StructArrayLayout1ui2f12",Eo);class xo extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r)}emplace(e,t,r,n){const i=4*e;return this.uint32[2*e+0]=t,this.uint16[i+2]=r,this.uint16[i+3]=n,e}}xo.prototype.bytesPerElement=8,bi("StructArrayLayout1ul2ui8",xo);class Io extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const n=2*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,e}}Io.prototype.bytesPerElement=4,bi("StructArrayLayout2ui4",Io);class So extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}So.prototype.bytesPerElement=2,bi("StructArrayLayout1ui2",So);class Co extends to{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r,n)}emplace(e,t,r,n,i){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=r,this.float32[o+2]=n,this.float32[o+3]=i,e}}Co.prototype.bytesPerElement=16,bi("StructArrayLayout4f16",Co);class Po extends eo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new o(this.anchorPointX,this.anchorPointY)}}Po.prototype.size=20;class Oo extends yo{get(e){return new Po(this,e)}}bi("CollisionBoxArray",Oo);class To extends eo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}To.prototype.size=48;class Mo extends Ao{get(e){return new To(this,e)}}bi("PlacedSymbolArray",Mo);class ko extends eo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ko.prototype.size=64;class Ro extends bo{get(e){return new ko(this,e)}}bi("SymbolInstanceArray",Ro);class Bo extends wo{getoffsetX(e){return this.float32[1*e+0]}}bi("GlyphOffsetArray",Bo);class Lo extends oo{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}bi("SymbolLineVertexArray",Lo);class Do extends eo{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Do.prototype.size=12;class jo extends Eo{get(e){return new Do(this,e)}}bi("TextAnchorOffsetArray",jo);class Fo extends eo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Fo.prototype.size=8;class No extends xo{get(e){return new Fo(this,e)}}bi("FeatureIndexArray",No);class Zo extends io{}class Uo extends io{}class Qo extends io{}class Go extends so{}class zo extends lo{}class qo extends uo{}class Vo extends co{}class Wo extends fo{}class Ko extends ho{}class Ho extends po{}class Yo extends go{}class Xo extends _o{}class Jo extends vo{}class $o extends Io{}const ea=ro([{name:"a_pos",components:2,type:"Int16"}],4),{members:ta}=ea;class ra{constructor(e=[]){this.segments=e}prepareSegment(e,t,r,n){let i=this.segments[this.segments.length-1];return e>ra.MAX_VERTEX_ARRAY_LENGTH&&E(`Max vertices per segment is ${ra.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>ra.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==n)&&(i={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==n&&(i.sortKey=n),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,r,n){return new ra([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:n,vaos:{},sortKey:0}])}}function na(e,t){return 256*(e=y(Math.floor(e),0,255))+y(Math.floor(t),0,255)}ra.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,bi("SegmentVector",ra);const ia=ro([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var oa={exports:{}},aa={exports:function(e,t){var r,n,i,o,a,s,l,u;for(n=e.length-(r=3&e.length),i=t,a=3432918353,s=461845907,u=0;u<n;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,i=27492+(65535&(o=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}},sa={exports:function(e,t){for(var r,n=e.length,i=t^n,o=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}},la=aa.exports,ua=sa.exports;oa.exports=la,oa.exports.murmur3=la,oa.exports.murmur2=ua;var ca=r(oa.exports);class fa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,r,n){this.ids.push(ha(e)),this.positions.push(t,r,n)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const t=ha(e);let r=0,n=this.ids.length-1;for(;r<n;){const e=r+n>>1;this.ids[e]>=t?n=e:r=e+1}const i=[];for(;this.ids[r]===t;)i.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return i}static serialize(e,t){const r=new Float64Array(e.ids),n=new Uint32Array(e.positions);return pa(r,n,0,r.length-1),t&&t.push(r.buffer,n.buffer),{ids:r,positions:n}}static deserialize(e){const t=new fa;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function ha(e){const t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ca(String(e))}function pa(e,t,r,n){for(;r<n;){const i=e[r+n>>1];let o=r-1,a=n+1;for(;;){do{o++}while(e[o]<i);do{a--}while(e[a]>i);if(o>=a)break;da(e,o,a),da(t,3*o,3*a),da(t,3*o+1,3*a+1),da(t,3*o+2,3*a+2)}a-r<n-a?(pa(e,t,r,a),r=a+1):(pa(e,t,a+1,n),n=a)}}function da(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}bi("FeaturePositionMap",fa);class ya{constructor(e,t){this.gl=e.gl,this.location=t}}class ga extends ya{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class ma extends ya{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class _a extends ya{constructor(e,t){super(e,t),this.current=We.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const va=new Float32Array(16);function Aa(e){return[na(255*e.r,255*e.g),na(255*e.b,255*e.a)]}class ba{constructor(e,t,r){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=r}setUniform(e,t,r){e.set(r.constantOr(this.value))}getBinding(e,t,r){return"color"===this.type?new _a(e,t):new ga(e,t)}}class wa{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,r,n){const i="u_pattern_to"===n?this.patternTo:"u_pattern_from"===n?this.patternFrom:"u_pixel_ratio_to"===n?this.pixelRatioTo:"u_pixel_ratio_from"===n?this.pixelRatioFrom:null;i&&e.set(i)}getBinding(e,t,r){return"u_pattern"===r.substr(0,9)?new ma(e,t):new ga(e,t)}}class Ea{constructor(e,t,r,n){this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new n}populatePaintArray(e,t,r,n,i){const o=this.paintVertexArray.length,a=this.expression.evaluate(new Di(0),t,{},n,[],i);this.paintVertexArray.resize(e),this._setPaintValue(o,e,a)}updatePaintArray(e,t,r,n){const i=this.expression.evaluate({zoom:0},r,n);this._setPaintValue(e,t,i)}_setPaintValue(e,t,r){if("color"===this.type){const n=Aa(r);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n[0],n[1])}else{for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xa{constructor(e,t,r,n,i,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=r,this.useIntegerZoom=n,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,r,n,i){const o=this.expression.evaluate(new Di(this.zoom),t,{},n,[],i),a=this.expression.evaluate(new Di(this.zoom+1),t,{},n,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,o,a)}updatePaintArray(e,t,r,n){const i=this.expression.evaluate({zoom:this.zoom},r,n),o=this.expression.evaluate({zoom:this.zoom+1},r,n);this._setPaintValue(e,t,i,o)}_setPaintValue(e,t,r,n){if("color"===this.type){const i=Aa(r),o=Aa(n);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,i[0],i[1],o[0],o[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,r,n);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const r=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,n=y(this.expression.interpolationFactor(r,this.zoom,this.zoom+1),0,1);e.set(n)}getBinding(e,t,r){return new ga(e,t)}}class Ia{constructor(e,t,r,n,i,o){this.expression=e,this.type=t,this.useIntegerZoom=r,this.zoom=n,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i}populatePaintArray(e,t,r){const n=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(n,e,t.patterns&&t.patterns[this.layerId],r)}updatePaintArray(e,t,r,n,i){this._setPaintValues(e,t,r.patterns&&r.patterns[this.layerId],i)}_setPaintValues(e,t,r,n){if(!n||!r)return;const{min:i,mid:o,max:a}=r,s=n[i],l=n[o],u=n[a];if(s&&l&&u)for(let r=e;r<t;r++)this.zoomInPaintVertexArray.emplace(r,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(r,l.tl[0],l.tl[1],l.br[0],l.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1],l.pixelRatio,u.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ia.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ia.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Sa{constructor(e,t,r){this.binders={},this._buffers=[];const n=[];for(const i in e.paint._values){if(!r(i))continue;const o=e.paint.get(i);if(!(o instanceof Gi&&sn(o.property.specification)))continue;const a=Pa(i,e.type),s=o.value,l=o.property.specification.type,u=o.property.useIntegerZoom,c=o.property.specification["property-type"],f="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===s.kind)this.binders[i]=f?new wa(s.value,a):new ba(s.value,a,l),n.push(`/u_${i}`);else if("source"===s.kind||f){const r=Oa(i,l,"source");this.binders[i]=f?new Ia(s,l,u,t,r,e.id):new Ea(s,a,l,r),n.push(`/a_${i}`)}else{const e=Oa(i,l,"composite");this.binders[i]=new xa(s,a,l,u,t,e),n.push(`/z_${i}`)}}this.cacheKey=n.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Ea||t instanceof xa?t.maxValue:0}populatePaintArrays(e,t,r,n,i){for(const o in this.binders){const a=this.binders[o];(a instanceof Ea||a instanceof xa||a instanceof Ia)&&a.populatePaintArray(e,t,r,n,i)}}setConstantPatternPositions(e,t){for(const r in this.binders){const n=this.binders[r];n instanceof wa&&n.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,r,n,i){let o=!1;for(const a in e){const s=t.getPositions(a);for(const t of s){const s=r.feature(t.index);for(const r in this.binders){const l=this.binders[r];if((l instanceof Ea||l instanceof xa||l instanceof Ia)&&!0===l.expression.isStateDependent){const u=n.paint.get(r);l.expression=u.value,l.updatePaintArray(t.start,t.end,s,e[a],i),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const r=this.binders[t];(r instanceof ba||r instanceof wa)&&e.push(...r.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof Ea||r instanceof xa)for(let t=0;t<r.paintVertexAttributes.length;t++)e.push(r.paintVertexAttributes[t].name);else if(r instanceof Ia)for(let t=0;t<ia.members.length;t++)e.push(ia.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof ba||r instanceof wa||r instanceof xa)for(const t of r.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const r=[];for(const n in this.binders){const i=this.binders[n];if(i instanceof ba||i instanceof wa||i instanceof xa)for(const o of i.uniformNames)if(t[o]){const a=i.getBinding(e,t[o],o);r.push({name:o,property:n,binding:a})}}return r}setUniforms(e,t,r,n){for(const{name:e,property:i,binding:o}of t)this.binders[i].setUniform(o,n,r.get(i),e)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const r=this.binders[t];if(e&&r instanceof Ia){const t=2===e.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(r instanceof Ea||r instanceof xa)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const t in this.binders){const r=this.binders[t];(r instanceof Ea||r instanceof xa||r instanceof Ia)&&r.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Ea||t instanceof xa||t instanceof Ia)&&t.destroy()}}}class Ca{constructor(e,t,r=()=>!0){this.programConfigurations={};for(const n of e)this.programConfigurations[n.id]=new Sa(n,t,r);this.needsUpload=!1,this._featureMap=new fa,this._bufferOffset=0}populatePaintArrays(e,t,r,n,i,o){for(const r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(e,t,n,i,o);void 0!==t.id&&this._featureMap.add(t.id,r,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,r,n){for(const i of r)this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(e,this._featureMap,t,i,n)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Pa(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}function Oa(e,t,r){const n={color:{source:uo,composite:Co},number:{source:wo,composite:uo}},i=function(e){return{"line-pattern":{source:Vo,composite:Vo},"fill-pattern":{source:Vo,composite:Vo},"fill-extrusion-pattern":{source:Vo,composite:Vo}}[e]}(e);return i&&i[r]||n[t][r]}bi("ConstantBinder",ba),bi("CrossFadedConstantBinder",wa),bi("SourceExpressionBinder",Ea),bi("CrossFadedCompositeBinder",Ia),bi("CompositeExpressionBinder",xa),bi("ProgramConfiguration",Sa,{omit:["_buffers"]}),bi("ProgramConfigurationSet",Ca);const Ta=8192,Ma=Math.pow(2,14)-1,ka=-Ma-1;function Ra(e){const t=Ta/e.extent,r=e.loadGeometry();for(let e=0;e<r.length;e++){const n=r[e];for(let e=0;e<n.length;e++){const r=n[e],i=Math.round(r.x*t),o=Math.round(r.y*t);r.x=y(i,ka,Ma),r.y=y(o,ka,Ma),(i<r.x||i>r.x+1||o<r.y||o>r.y+1)&&E("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function Ba(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Ra(e):[]}}function La(e,t,r,n,i){e.emplaceBack(2*t+(n+1)/2,2*r+(i+1)/2)}class Da{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Uo,this.indexArray=new Jo,this.segments=new ra,this.programConfigurations=new Ca(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){const n=this.layers[0],i=[];let o=null,a=!1;"circle"===n.type&&(o=n.layout.get("circle-sort-key"),a=!o.isConstant());for(const{feature:t,id:n,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Ba(t,e);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),u,r))continue;const c=a?o.evaluate(u,{},r):void 0,f={id:n,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?u.geometry:Ra(t),patterns:{},sortKey:c};i.push(f)}a&&i.sort(((e,t)=>e.sortKey-t.sortKey));for(const n of i){const{geometry:i,index:o,sourceLayerIndex:a}=n,s=e[o].feature;this.addFeature(n,i,o,r),t.featureIndex.insert(s,i,o,a,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ta),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,r,n){for(const r of t)for(const t of r){const r=t.x,n=t.y;if(r<0||r>=Ta||n<0||n>=Ta)continue;const i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),o=i.vertexLength;La(this.layoutVertexArray,r,n,-1,-1),La(this.layoutVertexArray,r,n,1,-1),La(this.layoutVertexArray,r,n,1,1),La(this.layoutVertexArray,r,n,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),i.vertexLength+=4,i.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{},n)}}function ja(e,t){for(let r=0;r<e.length;r++)if(Va(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(Va(e,t[r]))return!0;return!!Ua(e,t)}function Fa(e,t,r){return!!Va(e,t)||!!Ga(t,e,r)}function Na(e,t){if(1===e.length)return qa(t,e[0]);for(let r=0;r<t.length;r++){const n=t[r];for(let t=0;t<n.length;t++)if(Va(e,n[t]))return!0}for(let r=0;r<e.length;r++)if(qa(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(Ua(e,t[r]))return!0;return!1}function Za(e,t,r){if(e.length>1){if(Ua(e,t))return!0;for(let n=0;n<t.length;n++)if(Ga(t[n],e,r))return!0}for(let n=0;n<e.length;n++)if(Ga(e[n],t,r))return!0;return!1}function Ua(e,t){if(0===e.length||0===t.length)return!1;for(let r=0;r<e.length-1;r++){const n=e[r],i=e[r+1];for(let e=0;e<t.length-1;e++)if(Qa(n,i,t[e],t[e+1]))return!0}return!1}function Qa(e,t,r,n){return x(e,r,n)!==x(t,r,n)&&x(e,t,r)!==x(e,t,n)}function Ga(e,t,r){const n=r*r;if(1===t.length)return e.distSqr(t[0])<n;for(let r=1;r<t.length;r++)if(za(e,t[r-1],t[r])<n)return!0;return!1}function za(e,t,r){const n=t.distSqr(r);if(0===n)return e.distSqr(t);const i=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/n;return e.distSqr(i<0?t:i>1?r:r.sub(t)._mult(i)._add(t))}function qa(e,t){let r,n,i,o=!1;for(let a=0;a<e.length;a++){r=e[a];for(let e=0,a=r.length-1;e<r.length;a=e++)n=r[e],i=r[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(o=!o)}return o}function Va(e,t){let r=!1;for(let n=0,i=e.length-1;n<e.length;i=n++){const o=e[n],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function Wa(e,t,r){const n=r[0],i=r[2];if(e.x<n.x&&t.x<n.x||e.x>i.x&&t.x>i.x||e.y<n.y&&t.y<n.y||e.y>i.y&&t.y>i.y)return!1;const o=x(e,t,r[0]);return o!==x(e,t,r[1])||o!==x(e,t,r[2])||o!==x(e,t,r[3])}function Ka(e,t,r){const n=t.paint.get(e).value;return"constant"===n.kind?n.value:r.programConfigurations.get(t.id).getMaxValue(e)}function Ha(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Ya(e,t,r,n,i){if(!t[0]&&!t[1])return e;const a=o.convert(t)._mult(i);"viewport"===r&&a._rotate(-n);const s=[];for(let t=0;t<e.length;t++)s.push(e[t].sub(a));return s}let Xa,Ja;bi("CircleBucket",Da,{omit:["layers"]});var $a={get paint(){return Ja=Ja||new Yi({"circle-radius":new Vi(V.paint_circle["circle-radius"]),"circle-color":new Vi(V.paint_circle["circle-color"]),"circle-blur":new Vi(V.paint_circle["circle-blur"]),"circle-opacity":new Vi(V.paint_circle["circle-opacity"]),"circle-translate":new qi(V.paint_circle["circle-translate"]),"circle-translate-anchor":new qi(V.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qi(V.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qi(V.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Vi(V.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Vi(V.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Vi(V.paint_circle["circle-stroke-opacity"])})},get layout(){return Xa=Xa||new Yi({"circle-sort-key":new Vi(V.layout_circle["circle-sort-key"])})}},es=1e-6,ts="undefined"!=typeof Float32Array?Float32Array:Array;function rs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ns(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],y=t[12],g=t[13],m=t[14],_=t[15],v=r[0],A=r[1],b=r[2],w=r[3];return e[0]=v*n+A*s+b*f+w*y,e[1]=v*i+A*l+b*h+w*g,e[2]=v*o+A*u+b*p+w*m,e[3]=v*a+A*c+b*d+w*_,e[4]=(v=r[4])*n+(A=r[5])*s+(b=r[6])*f+(w=r[7])*y,e[5]=v*i+A*l+b*h+w*g,e[6]=v*o+A*u+b*p+w*m,e[7]=v*a+A*c+b*d+w*_,e[8]=(v=r[8])*n+(A=r[9])*s+(b=r[10])*f+(w=r[11])*y,e[9]=v*i+A*l+b*h+w*g,e[10]=v*o+A*u+b*p+w*m,e[11]=v*a+A*c+b*d+w*_,e[12]=(v=r[12])*n+(A=r[13])*s+(b=r[14])*f+(w=r[15])*y,e[13]=v*i+A*l+b*h+w*g,e[14]=v*o+A*u+b*p+w*m,e[15]=v*a+A*c+b*d+w*_,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var is,os=ns;function as(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}is=new ts(4),ts!=Float32Array&&(is[0]=0,is[1]=0,is[2]=0,is[3]=0);class ss extends Ji{constructor(e){super(e,$a)}createBucket(e){return new Da(e)}queryRadius(e){const t=e;return Ka("circle-radius",this,t)+Ka("circle-stroke-width",this,t)+Ha(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,r,n,i,o,a,s){const l=Ya(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),u=this.paint.get("circle-radius").evaluate(t,r)+this.paint.get("circle-stroke-width").evaluate(t,r),c="map"===this.paint.get("circle-pitch-alignment"),f=c?l:function(e,t){return e.map((e=>ls(e,t)))}(l,s),h=c?u*a:u;for(const e of n)for(const t of e){const e=c?t:ls(t,s);let r=h;const n=as([],[t.x,t.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?r*=n[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(r*=o.cameraToCenterDistance/n[3]),Fa(f,e,r))return!0}return!1}}function ls(e,t){const r=as([],[e.x,e.y,0,1],t);return new o(r[0]/r[3],r[1]/r[3])}class us extends Da{}let cs;bi("HeatmapBucket",us,{omit:["layers"]});var fs={get paint(){return cs=cs||new Yi({"heatmap-radius":new Vi(V.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Vi(V.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qi(V.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Hi(V.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qi(V.paint_heatmap["heatmap-opacity"])})}};function hs(e,{width:t,height:r},n,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*r*n)throw new RangeError(`mismatched image size. expected: ${i.length} but got: ${t*r*n}`)}else i=new Uint8Array(t*r*n);return e.width=t,e.height=r,e.data=i,e}function ps(e,{width:t,height:r},n){if(t===e.width&&r===e.height)return;const i=hs({},{width:t,height:r},n);ds(e,i,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,r)},n),e.width=t,e.height=r,e.data=i.data}function ds(e,t,r,n,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;if(a===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<i.height;l++){const u=((r.y+l)*e.width+r.x)*o,c=((n.y+l)*t.width+n.x)*o;for(let e=0;e<i.width*o;e++)s[c+e]=a[u+e]}return t}class ys{constructor(e,t){hs(this,e,1,t)}resize(e){ps(this,e,1)}clone(){return new ys({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,i){ds(e,t,r,n,i,1)}}class gs{constructor(e,t){hs(this,e,4,t)}resize(e){ps(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new gs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,n,i){ds(e,t,r,n,i,4)}}function ms(e){const t={},r=e.resolution||256,n=e.clips?e.clips.length:1,i=e.image||new gs({width:r,height:n});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const o=(r,n,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);i.data[r+n+0]=Math.floor(255*a.r/a.a),i.data[r+n+1]=Math.floor(255*a.g/a.a),i.data[r+n+2]=Math.floor(255*a.b/a.a),i.data[r+n+3]=Math.floor(255*a.a)};if(e.clips)for(let t=0,i=0;t<n;++t,i+=4*r)for(let n=0,a=0;n<r;n++,a+=4){const s=n/(r-1),{start:l,end:u}=e.clips[t];o(i,a,l*(1-s)+u*s)}else for(let e=0,t=0;e<r;e++,t+=4)o(0,t,e/(r-1));return i}bi("AlphaImage",ys),bi("RGBAImage",gs);class _s extends Ji{createBucket(e){return new us(e)}constructor(e){super(e,fs),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ms({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let vs;var As={get paint(){return vs=vs||new Yi({"hillshade-illumination-direction":new qi(V.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qi(V.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qi(V.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qi(V.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qi(V.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qi(V.paint_hillshade["hillshade-accent-color"])})}};class bs extends Ji{constructor(e){super(e,As)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const ws=ro([{name:"a_pos",components:2,type:"Int16"}],4),{members:Es}=ws;var xs={exports:{}};function Is(e,t,r){r=r||2;var n,i,o,a,s,l,u,c=t&&t.length,f=c?t[0]*r:e.length,h=Ss(e,0,f,r,!0),p=[];if(!h||h.next===h.prev)return p;if(c&&(h=function(e,t,r,n){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=Ss(e,t[i]*n,i<o-1?t[i+1]*n:e.length,n,!1))===a.next&&(a.steiner=!0),s.push(js(a));for(s.sort(Rs),i=0;i<s.length;i++)r=Bs(s[i],r);return r}(e,t,h,r)),e.length>80*r){n=o=e[0],i=a=e[1];for(var d=r;d<f;d+=r)(s=e[d])<n&&(n=s),(l=e[d+1])<i&&(i=l),s>o&&(o=s),l>a&&(a=l);u=0!==(u=Math.max(o-n,a-i))?32767/u:0}return Ps(h,p,r,n,i,u,0),p}function Ss(e,t,r,n,i){var o,a;if(i===Ys(e,t,r,n)>0)for(o=t;o<r;o+=n)a=Ws(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=Ws(o,e[o],e[o+1],a);return a&&Us(a,a.next)&&(Ks(a),a=a.next),a}function Cs(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!Us(n,n.next)&&0!==Zs(n.prev,n,n.next))n=n.next;else{if(Ks(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Ps(e,t,r,n,i,o,a){if(e){!a&&o&&function(e,t,r,n){var i=e;do{0===i.z&&(i.z=Ds(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ);t++);for(l=u;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1)}(i)}(e,n,i,o);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Ts(e,n,i,o):Os(e))t.push(s.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),Ks(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?Ps(e=Ms(Cs(e),t,r),t,r,n,i,o,2):2===a&&ks(e,t,r,n,i,o):Ps(Cs(e),t,r,n,i,o,1);break}}}function Os(e){var t=e.prev,r=e,n=e.next;if(Zs(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,c=i<o?i<a?i:a:o<a?o:a,f=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,p=s>l?s>u?s:u:l>u?l:u,d=n.next;d!==t;){if(d.x>=c&&d.x<=h&&d.y>=f&&d.y<=p&&Fs(i,s,o,l,a,u,d.x,d.y)&&Zs(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function Ts(e,t,r,n){var i=e.prev,o=e,a=e.next;if(Zs(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,f=o.y,h=a.y,p=s<l?s<u?s:u:l<u?l:u,d=c<f?c<h?c:h:f<h?f:h,y=s>l?s>u?s:u:l>u?l:u,g=c>f?c>h?c:h:f>h?f:h,m=Ds(p,d,t,r,n),_=Ds(y,g,t,r,n),v=e.prevZ,A=e.nextZ;v&&v.z>=m&&A&&A.z<=_;){if(v.x>=p&&v.x<=y&&v.y>=d&&v.y<=g&&v!==i&&v!==a&&Fs(s,c,l,f,u,h,v.x,v.y)&&Zs(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,A.x>=p&&A.x<=y&&A.y>=d&&A.y<=g&&A!==i&&A!==a&&Fs(s,c,l,f,u,h,A.x,A.y)&&Zs(A.prev,A,A.next)>=0)return!1;A=A.nextZ}for(;v&&v.z>=m;){if(v.x>=p&&v.x<=y&&v.y>=d&&v.y<=g&&v!==i&&v!==a&&Fs(s,c,l,f,u,h,v.x,v.y)&&Zs(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;A&&A.z<=_;){if(A.x>=p&&A.x<=y&&A.y>=d&&A.y<=g&&A!==i&&A!==a&&Fs(s,c,l,f,u,h,A.x,A.y)&&Zs(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function Ms(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!Us(i,o)&&Qs(i,n,n.next,o)&&qs(i,o)&&qs(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),Ks(n),Ks(n.next),n=e=o),n=n.next}while(n!==e);return Cs(n)}function ks(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Ns(a,s)){var l=Vs(a,s);return a=Cs(a,a.next),l=Cs(l,l.next),Ps(a,t,r,n,i,o,0),void Ps(l,t,r,n,i,o,0)}s=s.next}a=a.next}while(a!==e)}function Rs(e,t){return e.x-t.x}function Bs(e,t){var r=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a&&(a=s,r=n.x<n.next.x?n:n.next,s===i))return r}n=n.next}while(n!==t);if(!r)return null;var l,u=r,c=r.x,f=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&Fs(o<f?i:a,o,c,f,o<f?a:i,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(i-n.x),qs(n,e)&&(l<h||l===h&&(n.x>r.x||n.x===r.x&&Ls(r,n)))&&(r=n,h=l)),n=n.next}while(n!==u);return r}(e,t);if(!r)return t;var n=Vs(r,e);return Cs(n,n.next),Cs(r,r.next)}function Ls(e,t){return Zs(e.prev,e,t.prev)<0&&Zs(t.next,e,e.next)<0}function Ds(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function js(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function Fs(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function Ns(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Qs(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(qs(e,t)&&qs(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(Zs(e.prev,e,t.prev)||Zs(e,t.prev,t))||Us(e,t)&&Zs(e.prev,e,e.next)>0&&Zs(t.prev,t,t.next)>0)}function Zs(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Us(e,t){return e.x===t.x&&e.y===t.y}function Qs(e,t,r,n){var i=zs(Zs(e,t,r)),o=zs(Zs(e,t,n)),a=zs(Zs(r,n,e)),s=zs(Zs(r,n,t));return i!==o&&a!==s||!(0!==i||!Gs(e,r,t))||!(0!==o||!Gs(e,n,t))||!(0!==a||!Gs(r,e,n))||!(0!==s||!Gs(r,t,n))}function Gs(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function zs(e){return e>0?1:e<0?-1:0}function qs(e,t){return Zs(e.prev,e,e.next)<0?Zs(e,t,e.next)>=0&&Zs(e,e.prev,t)>=0:Zs(e,t,e.prev)<0||Zs(e,e.next,t)<0}function Vs(e,t){var r=new Hs(e.i,e.x,e.y),n=new Hs(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function Ws(e,t,r,n){var i=new Hs(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Ks(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Hs(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ys(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}xs.exports=Is,xs.exports.default=Is,Is.deviation=function(e,t,r,n){var i=t&&t.length,o=Math.abs(Ys(e,0,i?t[0]*r:e.length,r));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(Ys(e,t[a]*r,a<s-1?t[a+1]*r:e.length,r));var l=0;for(a=0;a<n.length;a+=3){var u=n[a]*r,c=n[a+1]*r,f=n[a+2]*r;l+=Math.abs((e[u]-e[f])*(e[c+1]-e[u+1])-(e[u]-e[c])*(e[f+1]-e[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},Is.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&r.holes.push(n+=e[i-1].length)}return r};var Xs=r(xs.exports);function Js(e,t,r){const n=r.patternDependencies;let i=!1;for(const r of t){const t=r.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const o=t.constantOr(null);o&&(i=!0,n[o.to]=!0,n[o.from]=!0)}return i}function $s(e,t,r,n,i){const o=i.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:n-1},r,{},i.availableImages),s=t.evaluate({zoom:n},r,{},i.availableImages),l=t.evaluate({zoom:n+1},r,{},i.availableImages);e=e&&e.name?e.name:e,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[e]=!0,o[s]=!0,o[l]=!0,r.patterns[a.id]={min:e,mid:s,max:l}}}return r}class el{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qo,this.indexArray=new Jo,this.indexArray2=new $o,this.programConfigurations=new Ca(e.layers,e.zoom),this.segments=new ra,this.segments2=new ra,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.hasPattern=Js("fill",this.layers,t);const n=this.layers[0].layout.get("fill-sort-key"),i=!n.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:u}of e){const e=this.layers[0]._featureFilter.needGeometry,c=Ba(a,e);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),c,r))continue;const f=i?n.evaluate(c,{},r,t.availableImages):void 0,h={id:s,properties:a.properties,type:a.type,sourceLayerIndex:u,index:l,geometry:e?c.geometry:Ra(a),patterns:{},sortKey:f};o.push(h)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const n of o){const{geometry:i,index:o,sourceLayerIndex:a}=n;if(this.hasPattern){const e=$s("fill",this.layers,n,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(n,i,o,r,{});t.featureIndex.insert(e[o].feature,i,o,a,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}addFeatures(e,t,r){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Es),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,r,n,i){for(const e of vr(t,500)){let t=0;for(const r of e)t+=r.length;const r=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),n=r.vertexLength,i=[],o=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&o.push(i.length/2);const r=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),n=r.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(n+t.length-1,n),i.push(t[0].x),i.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(n+e-1,n+e),i.push(t[e].x),i.push(t[e].y);r.vertexLength+=t.length,r.primitiveLength+=t.length}const a=Xs(i,o);for(let e=0;e<a.length;e+=3)this.indexArray.emplaceBack(n+a[e],n+a[e+1],n+a[e+2]);r.vertexLength+=t,r.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,n)}}let tl,rl;bi("FillBucket",el,{omit:["layers","patternFeatures"]});var nl={get paint(){return rl=rl||new Yi({"fill-antialias":new qi(V.paint_fill["fill-antialias"]),"fill-opacity":new Vi(V.paint_fill["fill-opacity"]),"fill-color":new Vi(V.paint_fill["fill-color"]),"fill-outline-color":new Vi(V.paint_fill["fill-outline-color"]),"fill-translate":new qi(V.paint_fill["fill-translate"]),"fill-translate-anchor":new qi(V.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wi(V.paint_fill["fill-pattern"])})},get layout(){return tl=tl||new Yi({"fill-sort-key":new Vi(V.layout_fill["fill-sort-key"])})}};class il extends Ji{constructor(e){super(e,nl)}recalculate(e,t){super.recalculate(e,t);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new el(e)}queryRadius(){return Ha(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,r,n,i,o,a){return Na(Ya(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),n)}isTileClipped(){return!0}}const ol=ro([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),al=ro([{name:"a_centroid",components:2,type:"Int16"}],4),{members:sl}=ol;var ll={},ul=n,cl=fl;function fl(e,t,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=i,e.readFields(hl,this,t)}function hl(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var n=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[n]=i}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function pl(e){for(var t,r,n=0,i=0,o=e.length,a=o-1;i<o;a=i++)n+=((r=e[a]).x-(t=e[i]).x)*(t.y+r.y);return n}fl.types=["Unknown","Point","LineString","Polygon"],fl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,n=1,i=0,o=0,a=0,s=[];e.pos<r;){if(i<=0){var l=e.readVarint();n=7&l,i=l>>3}if(i--,1===n||2===n)o+=e.readSVarint(),a+=e.readSVarint(),1===n&&(t&&s.push(t),t=[]),t.push(new ul(o,a));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&s.push(t),s},fl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,n=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(n<=0){var c=e.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,l,s,u]},fl.prototype.toGeoJSON=function(e,t,r){var n,i,o=this.extent*Math.pow(2,r),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=fl.types[this.type];function c(e){for(var t=0;t<e.length;t++){var r=e[t];e[t]=[360*(r.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(n=0;n<l.length;n++)f[n]=l[n][0];c(l=f);break;case 2:for(n=0;n<l.length;n++)c(l[n]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var r,n,i=[],o=0;o<t;o++){var a=pl(e[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(r&&i.push(r),r=[e[o]]):r.push(e[o]))}return r&&i.push(r),i}(l),n=0;n<l.length;n++)for(i=0;i<l[n].length;i++)c(l[n][i])}1===l.length?l=l[0]:u="Multi"+u;var h={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var dl=cl,yl=gl;function gl(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(ml,this,t),this.length=this._features.length}function ml(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}(r))}gl.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new dl(this._pbf,t,this.extent,this._keys,this._values)};var _l=yl;function vl(e,t,r){if(3===e){var n=new _l(r,r.readVarint()+r.pos);n.length&&(t[n.name]=n)}}ll.VectorTile=function(e,t){this.layers=e.readFields(vl,{},t)},ll.VectorTileFeature=cl,ll.VectorTileLayer=yl;const Al=ll.VectorTileFeature.types,bl=Math.pow(2,13);function wl(e,t,r,n,i,o,a,s){e.emplaceBack(t,r,2*Math.floor(n*bl)+a,i*bl*2,o*bl*2,Math.round(s))}class El{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Go,this.centroidVertexArray=new Zo,this.indexArray=new Jo,this.programConfigurations=new Ca(e.layers,e.zoom),this.segments=new ra,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.features=[],this.hasPattern=Js("fill-extrusion",this.layers,t);for(const{feature:n,id:i,index:o,sourceLayerIndex:a}of e){const e=this.layers[0]._featureFilter.needGeometry,s=Ba(n,e);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),s,r))continue;const l={id:i,sourceLayerIndex:a,index:o,geometry:e?s.geometry:Ra(n),properties:n.properties,type:n.type,patterns:{}};this.hasPattern?this.features.push($s("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,o,r,{}),t.featureIndex.insert(n,l.geometry,o,a,this.index,!0)}}addFeatures(e,t,r){for(const e of this.features){const{geometry:n}=e;this.addFeature(e,n,e.index,t,r)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,sl),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,al.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,r,n,i){const o={x:0,y:0,vertexCount:0};for(const r of vr(t,500)){let t=0;for(const e of r)t+=e.length;let n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const e of r){if(0===e.length)continue;if(Il(e))continue;let t=0;for(let r=0;r<e.length;r++){const i=e[r];if(r>=1){const a=e[r-1];if(!xl(i,a)){n.vertexLength+4>ra.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=i.sub(a)._perp()._unit(),r=a.dist(i);t+r>32768&&(t=0),wl(this.layoutVertexArray,i.x,i.y,e.x,e.y,0,0,t),wl(this.layoutVertexArray,i.x,i.y,e.x,e.y,0,1,t),o.x+=2*i.x,o.y+=2*i.y,o.vertexCount+=2,t+=r,wl(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,0,t),wl(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,1,t),o.x+=2*a.x,o.y+=2*a.y,o.vertexCount+=2;const s=n.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),n.vertexLength+=4,n.primitiveLength+=2}}}}if(n.vertexLength+t>ra.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray)),"Polygon"!==Al[e.type])continue;const i=[],a=[],s=n.vertexLength;for(const e of r)if(0!==e.length){e!==r[0]&&a.push(i.length/2);for(let t=0;t<e.length;t++){const r=e[t];wl(this.layoutVertexArray,r.x,r.y,0,0,1,1,0),o.x+=r.x,o.y+=r.y,o.vertexCount+=1,i.push(r.x),i.push(r.y)}}const l=Xs(i,a);for(let e=0;e<l.length;e+=3)this.indexArray.emplaceBack(s+l[e],s+l[e+2],s+l[e+1]);n.primitiveLength+=l.length/3,n.vertexLength+=t}for(let e=0;e<o.vertexCount;e++)this.centroidVertexArray.emplaceBack(Math.floor(o.x/o.vertexCount),Math.floor(o.y/o.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,n)}}function xl(e,t){return e.x===t.x&&(e.x<0||e.x>Ta)||e.y===t.y&&(e.y<0||e.y>Ta)}function Il(e){return e.every((e=>e.x<0))||e.every((e=>e.x>Ta))||e.every((e=>e.y<0))||e.every((e=>e.y>Ta))}let Sl;bi("FillExtrusionBucket",El,{omit:["layers","features"]});var Cl={get paint(){return Sl=Sl||new Yi({"fill-extrusion-opacity":new qi(V["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Vi(V["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qi(V["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qi(V["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Wi(V["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Vi(V["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Vi(V["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qi(V["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Pl extends Ji{constructor(e){super(e,Cl)}createBucket(e){return new El(e)}queryRadius(){return Ha(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,t,r,n,i,a,s,l){const u=Ya(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(t,r),f=this.paint.get("fill-extrusion-base").evaluate(t,r),h=function(e,t,r,n){const i=[];for(const r of e){const e=[r.x,r.y,0,1];as(e,e,t),i.push(new o(e[0]/e[3],e[1]/e[3]))}return i}(u,l),p=function(e,t,r,n){const i=[],a=[],s=n[8]*t,l=n[9]*t,u=n[10]*t,c=n[11]*t,f=n[8]*r,h=n[9]*r,p=n[10]*r,d=n[11]*r;for(const t of e){const e=[],r=[];for(const i of t){const t=i.x,a=i.y,y=n[0]*t+n[4]*a+n[12],g=n[1]*t+n[5]*a+n[13],m=n[2]*t+n[6]*a+n[14],_=n[3]*t+n[7]*a+n[15],v=m+u,A=_+c,b=y+f,w=g+h,E=m+p,x=_+d,I=new o((y+s)/A,(g+l)/A);I.z=v/A,e.push(I);const S=new o(b/x,w/x);S.z=E/x,r.push(S)}i.push(e),a.push(r)}return[i,a]}(n,f,c,l);return function(e,t,r){let n=1/0;Na(r,t)&&(n=Tl(r,t[0]));for(let i=0;i<t.length;i++){const o=t[i],a=e[i];for(let e=0;e<o.length-1;e++){const t=o[e],i=[t,o[e+1],a[e+1],a[e],t];ja(r,i)&&(n=Math.min(n,Tl(r,i)))}}return n!==1/0&&n}(p[0],p[1],h)}}function Ol(e,t){return e.x*t.x+e.y*t.y}function Tl(e,t){if(1===e.length){let r=0;const n=t[r++];let i;for(;!i||n.equals(i);)if(i=t[r++],!i)return 1/0;for(;r<t.length;r++){const o=t[r],a=e[0],s=i.sub(n),l=o.sub(n),u=a.sub(n),c=Ol(s,s),f=Ol(s,l),h=Ol(l,l),p=Ol(u,s),d=Ol(u,l),y=c*h-f*f,g=(h*p-f*d)/y,m=(c*d-f*p)/y,_=n.z*(1-g-m)+i.z*g+o.z*m;if(isFinite(_))return _}return 1/0}{let e=1/0;for(const r of t)e=Math.min(e,r.z);return e}}const Ml=ro([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:kl}=Ml,Rl=ro([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Bl}=Rl,Ll=ll.VectorTileFeature.types,Dl=Math.cos(Math.PI/180*37.5),jl=Math.pow(2,14)/.5;class Fl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new zo,this.layoutVertexArray2=new qo,this.indexArray=new Jo,this.programConfigurations=new Ca(e.layers,e.zoom),this.segments=new ra,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.hasPattern=Js("line",this.layers,t);const n=this.layers[0].layout.get("line-sort-key"),i=!n.isConstant(),o=[];for(const{feature:t,id:a,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Ba(t,e);if(!this.layers[0]._featureFilter.filter(new Di(this.zoom),u,r))continue;const c=i?n.evaluate(u,{},r):void 0,f={id:a,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?u.geometry:Ra(t),patterns:{},sortKey:c};o.push(f)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const n of o){const{geometry:i,index:o,sourceLayerIndex:a}=n;if(this.hasPattern){const e=$s("line",this.layers,n,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(n,i,o,r,{});t.featureIndex.insert(e[o].feature,i,o,a,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}addFeatures(e,t,r){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Bl)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,kl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,r,n,i){const o=this.layers[0].layout,a=o.get("line-join").evaluate(e,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const r of t)this.addLine(r,e,a,s,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,i,n)}addLine(e,t,r,n,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Ll[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===r&&(i=1.05);const u=this.overscaling<=16?15*Ta/(512*this.overscaling):0,c=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let f,h,p,d,y;this.e1=this.e2=-1,a&&(f=e[s-2],y=e[l].sub(f)._unit()._perp());for(let t=l;t<s;t++){if(p=t===s-1?a?e[l+1]:void 0:e[t+1],p&&e[t].equals(p))continue;y&&(d=y),f&&(h=f),f=e[t],y=p?p.sub(f)._unit()._perp():d,d=d||y;let g=d.add(y);0===g.x&&0===g.y||g._unit();const m=d.x*y.x+d.y*y.y,_=g.x*y.x+g.y*y.y,v=0!==_?1/_:1/0,A=2*Math.sqrt(2-2*_),b=_<Dl&&h&&p,w=d.x*y.y-d.y*y.x>0;if(b&&t>l){const e=f.dist(h);if(e>2*u){const t=f.sub(f.sub(h)._mult(u/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,d,0,0,c),h=t}}const E=h&&p;let x=E?r:a?"butt":n;if(E&&"round"===x&&(v<o?x="miter":v<=2&&(x="fakeround")),"miter"===x&&v>i&&(x="bevel"),"bevel"===x&&(v>2&&(x="flipbevel"),v<i&&(x="miter")),h&&this.updateDistance(h,f),"miter"===x)g._mult(v),this.addCurrentVertex(f,g,0,0,c);else if("flipbevel"===x){if(v>100)g=y.mult(-1);else{const e=v*d.add(y).mag()/d.sub(y).mag();g._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(f,g,0,0,c),this.addCurrentVertex(f,g.mult(-1),0,0,c)}else if("bevel"===x||"fakeround"===x){const e=-Math.sqrt(v*v-1),t=w?e:0,r=w?0:e;if(h&&this.addCurrentVertex(f,d,t,r,c),"fakeround"===x){const e=Math.round(180*A/Math.PI/20);for(let t=1;t<e;t++){let r=t/e;if(.5!==r){const e=r-.5;r+=r*e*(r-1)*((1.0904+m*(m*(3.55645-1.43519*m)-3.2452))*e*e+(.848013+m*(.215638*m-1.06021)))}const n=y.sub(d)._mult(r)._add(d)._unit()._mult(w?-1:1);this.addHalfVertex(f,n.x,n.y,!1,w,0,c)}}p&&this.addCurrentVertex(f,y,-t,-r,c)}else if("butt"===x)this.addCurrentVertex(f,g,0,0,c);else if("square"===x){const e=h?1:-1;this.addCurrentVertex(f,g,e,e,c)}else"round"===x&&(h&&(this.addCurrentVertex(f,d,0,0,c),this.addCurrentVertex(f,d,1,1,c,!0)),p&&(this.addCurrentVertex(f,y,-1,-1,c,!0),this.addCurrentVertex(f,y,0,0,c)));if(b&&t<s-1){const e=f.dist(p);if(e>2*u){const t=f.add(p.sub(f)._mult(u/e)._round());this.updateDistance(f,t),this.addCurrentVertex(t,y,0,0,c),f=t}}}}addCurrentVertex(e,t,r,n,i,o=!1){const a=t.y*n-t.x,s=-t.y-t.x*n;this.addHalfVertex(e,t.x+t.y*r,t.y-t.x*r,o,!1,r,i),this.addHalfVertex(e,a,s,o,!0,-n,i),this.distance>jl/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,t,r,n,i,o))}addHalfVertex({x:e,y:t},r,n,i,o,a,s){const l=.5*(this.lineClips?this.scaledDistance*(jl-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(o?1:0),Math.round(63*r)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const u=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),s.primitiveLength++),o?this.e2=u:this.e1=u}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}let Nl,Zl;bi("LineBucket",Fl,{omit:["layers","patternFeatures"]});var Ul={get paint(){return Zl=Zl||new Yi({"line-opacity":new Vi(V.paint_line["line-opacity"]),"line-color":new Vi(V.paint_line["line-color"]),"line-translate":new qi(V.paint_line["line-translate"]),"line-translate-anchor":new qi(V.paint_line["line-translate-anchor"]),"line-width":new Vi(V.paint_line["line-width"]),"line-gap-width":new Vi(V.paint_line["line-gap-width"]),"line-offset":new Vi(V.paint_line["line-offset"]),"line-blur":new Vi(V.paint_line["line-blur"]),"line-dasharray":new Ki(V.paint_line["line-dasharray"]),"line-pattern":new Wi(V.paint_line["line-pattern"]),"line-gradient":new Hi(V.paint_line["line-gradient"])})},get layout(){return Nl=Nl||new Yi({"line-cap":new qi(V.layout_line["line-cap"]),"line-join":new Vi(V.layout_line["line-join"]),"line-miter-limit":new qi(V.layout_line["line-miter-limit"]),"line-round-limit":new qi(V.layout_line["line-round-limit"]),"line-sort-key":new Vi(V.layout_line["line-sort-key"])})}};class Ql extends Vi{possiblyEvaluate(e,t){return t=new Di(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,r,n){return t=m({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,r,n)}}let Gl;class zl extends Ji{constructor(e){super(e,Ul),this.gradientVersion=0,Gl||(Gl=new Ql(Ul.paint.properties["line-width"].specification),Gl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this.gradientExpression();this.stepInterpolant=!!function(e){return void 0!==e._styleExpression}(e)&&e._styleExpression.expression instanceof Et,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Gl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Fl(e)}queryRadius(e){const t=e,r=ql(Ka("line-width",this,t),Ka("line-gap-width",this,t)),n=Ka("line-offset",this,t);return r/2+Math.abs(n)+Ha(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,r,n,i,a,s){const l=Ya(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),u=s/2*ql(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),c=this.paint.get("line-offset").evaluate(t,r);return c&&(n=function(e,t){const r=[];for(let n=0;n<e.length;n++){const i=e[n],a=[];for(let e=0;e<i.length;e++){const r=i[e-1],n=i[e],s=i[e+1],l=0===e?new o(0,0):n.sub(r)._unit()._perp(),u=e===i.length-1?new o(0,0):s.sub(n)._unit()._perp(),c=l._add(u)._unit(),f=c.x*u.x+c.y*u.y;0!==f&&c._mult(1/f),a.push(c._mult(t)._add(n))}r.push(a)}return r}(n,c*s)),function(e,t,r){for(let n=0;n<t.length;n++){const i=t[n];if(e.length>=3)for(let t=0;t<i.length;t++)if(Va(e,i[t]))return!0;if(Za(e,i,r))return!0}return!1}(l,n,u)}isTileClipped(){return!0}}function ql(e,t){return t>0?t+2*e:e}const Vl=ro([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Wl=ro([{name:"a_projected_pos",components:3,type:"Float32"}],4);ro([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Kl=ro([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ro([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Hl=ro([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Yl=ro([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Xl(e,t,r){return e.sections.forEach((e=>{e.text=function(e,t,r){const n=t.layout.get("text-transform").evaluate(r,{});return"uppercase"===n?e=e.toLocaleUpperCase():"lowercase"===n&&(e=e.toLocaleLowerCase()),Li.applyArabicShaping&&(e=Li.applyArabicShaping(e)),e}(e.text,t,r)})),e}ro([{name:"triangle",components:3,type:"Uint16"}]),ro([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ro([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ro([{type:"Float32",name:"offsetX"}]),ro([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ro([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Jl={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var $l=24,eu=nu,tu=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=u}return(p?-1:1)*a*Math.pow(2,o-n)},ru=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?h/l:h*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+p]=255&a,p+=d,a/=256,u-=8);e[r+p-d]|=128*y};function nu(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}nu.Varint=0,nu.Fixed64=1,nu.Bytes=2,nu.Fixed32=5;var iu=4294967296,ou=1/iu,au="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function su(e){return e.type===nu.Bytes?e.readVarint()+e.pos:e.pos+1}function lu(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function uu(e,t,r){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=e;i--)r.buf[i+n]=r.buf[i]}function cu(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function fu(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function hu(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function pu(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function du(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function yu(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function gu(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function mu(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function _u(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function vu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Au(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function bu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}nu.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,e(i,t,this),this.pos===o&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=vu(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=bu(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=vu(this.buf,this.pos)+vu(this.buf,this.pos+4)*iu;return this.pos+=8,e},readSFixed64:function(){var e=vu(this.buf,this.pos)+bu(this.buf,this.pos+4)*iu;return this.pos+=8,e},readFloat:function(){var e=tu(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=tu(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,n=this.buf;return t=127&(r=n[this.pos++]),r<128?t:(t|=(127&(r=n[this.pos++]))<<7,r<128?t:(t|=(127&(r=n[this.pos++]))<<14,r<128?t:(t|=(127&(r=n[this.pos++]))<<21,r<128?t:function(e,t,r){var n,i,o=r.buf;if(n=(112&(i=o[r.pos++]))>>4,i<128)return lu(e,n,t);if(n|=(127&(i=o[r.pos++]))<<3,i<128)return lu(e,n,t);if(n|=(127&(i=o[r.pos++]))<<10,i<128)return lu(e,n,t);if(n|=(127&(i=o[r.pos++]))<<17,i<128)return lu(e,n,t);if(n|=(127&(i=o[r.pos++]))<<24,i<128)return lu(e,n,t);if(n|=(1&(i=o[r.pos++]))<<31,i<128)return lu(e,n,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=n[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&au?function(e,t,r){return au.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){for(var n="",i=t;i<r;){var o,a,s,l=e[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),i+=c}return n}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==nu.Bytes)return e.push(this.readVarint(t));var r=su(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==nu.Bytes)return e.push(this.readSVarint());var t=su(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==nu.Bytes)return e.push(this.readBoolean());var t=su(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==nu.Bytes)return e.push(this.readFloat());var t=su(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==nu.Bytes)return e.push(this.readDouble());var t=su(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==nu.Bytes)return e.push(this.readFixed32());var t=su(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==nu.Bytes)return e.push(this.readSFixed32());var t=su(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==nu.Bytes)return e.push(this.readFixed64());var t=su(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==nu.Bytes)return e.push(this.readSFixed64());var t=su(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===nu.Varint)for(;this.buf[this.pos++]>127;);else if(t===nu.Bytes)this.pos=this.readVarint()+this.pos;else if(t===nu.Fixed32)this.pos+=4;else{if(t!==nu.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Au(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Au(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Au(this.buf,-1&e,this.pos),Au(this.buf,Math.floor(e*ou),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Au(this.buf,-1&e,this.pos),Au(this.buf,Math.floor(e*ou),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,n;if(e>=0?(r=e%4294967296|0,n=e/4294967296|0):(n=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(n,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var n,i,o=0;o<t.length;o++){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):i=n;continue}if(n<56320){e[r++]=239,e[r++]=191,e[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(e[r++]=239,e[r++]=191,e[r++]=189,i=null);n<128?e[r++]=n:(n<2048?e[r++]=n>>6|192:(n<65536?e[r++]=n>>12|224:(e[r++]=n>>18|240,e[r++]=n>>12&63|128),e[r++]=n>>6&63|128),e[r++]=63&n|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&uu(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),ru(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ru(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var n=this.pos-r;n>=128&&uu(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,r){this.writeTag(e,nu.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,cu,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,fu,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,du,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,hu,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,pu,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,yu,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,gu,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,mu,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,_u,t)},writeBytesField:function(e,t){this.writeTag(e,nu.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,nu.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,nu.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,nu.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,nu.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,nu.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,nu.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,nu.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,nu.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,nu.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var wu=r(eu);const Eu=3;function xu(e,t,r){1===e&&r.readMessage(Iu,t)}function Iu(e,t,r){if(3===e){const{id:e,bitmap:n,width:i,height:o,left:a,top:s,advance:l}=r.readMessage(Su,{});t.push({id:e,bitmap:new ys({width:i+2*Eu,height:o+2*Eu},n),metrics:{width:i,height:o,left:a,top:s,advance:l}})}}function Su(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}const Cu=Eu;function Pu(e){let t=0,r=0;for(const n of e)t+=n.w*n.h,r=Math.max(r,n.w);e.sort(((e,t)=>t.h-e.h));const n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let i=0,o=0;for(const t of e)for(let e=n.length-1;e>=0;e--){const r=n[e];if(!(t.w>r.w||t.h>r.h)){if(t.x=r.x,t.y=r.y,o=Math.max(o,t.y+t.h),i=Math.max(i,t.x+t.w),t.w===r.w&&t.h===r.h){const t=n.pop();e<n.length&&(n[e]=t)}else t.h===r.h?(r.x+=t.w,r.w-=t.w):t.w===r.w?(r.y+=t.h,r.h-=t.h):(n.push({x:r.x+t.w,y:r.y,w:r.w-t.w,h:t.h}),r.y+=t.h,r.h-=t.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}const Ou=1;class Tu{constructor(e,{pixelRatio:t,version:r,stretchX:n,stretchY:i,content:o,textFitWidth:a,textFitHeight:s}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=n,this.stretchY=i,this.content=o,this.version=r,this.textFitWidth=a,this.textFitHeight=s}get tl(){return[this.paddedRect.x+Ou,this.paddedRect.y+Ou]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ou,this.paddedRect.y+this.paddedRect.h-Ou]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ou)/this.pixelRatio,(this.paddedRect.h-2*Ou)/this.pixelRatio]}}class Mu{constructor(e,t){const r={},n={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,r,i),this.addImages(t,n,i);const{w:o,h:a}=Pu(i),s=new gs({width:o||1,height:a||1});for(const t in e){const n=e[t],i=r[t].paddedRect;gs.copy(n.data,s,{x:0,y:0},{x:i.x+Ou,y:i.y+Ou},n.data)}for(const e in t){const r=t[e],i=n[e].paddedRect,o=i.x+Ou,a=i.y+Ou,l=r.data.width,u=r.data.height;gs.copy(r.data,s,{x:0,y:0},{x:o,y:a},r.data),gs.copy(r.data,s,{x:0,y:u-1},{x:o,y:a-1},{width:l,height:1}),gs.copy(r.data,s,{x:0,y:0},{x:o,y:a+u},{width:l,height:1}),gs.copy(r.data,s,{x:l-1,y:0},{x:o-1,y:a},{width:1,height:u}),gs.copy(r.data,s,{x:0,y:0},{x:o+l,y:a},{width:1,height:u})}this.image=s,this.iconPositions=r,this.patternPositions=n}addImages(e,t,r){for(const n in e){const i=e[n],o={x:0,y:0,w:i.data.width+2*Ou,h:i.data.height+2*Ou};r.push(o),t[n]=new Tu(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(n)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in e.updatedImages)this.patchUpdatedImage(this.iconPositions[r],e.getImage(r),t),this.patchUpdatedImage(this.patternPositions[r],e.getImage(r),t)}patchUpdatedImage(e,t,r){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[n,i]=e.tl;r.update(t.data,void 0,{x:n,y:i})}}var ku;bi("ImagePosition",Tu),bi("ImageAtlas",Mu),e.ah=void 0,(ku=e.ah||(e.ah={}))[ku.none=0]="none",ku[ku.horizontal=1]="horizontal",ku[ku.vertical=2]="vertical",ku[ku.horizontalOnly=3]="horizontalOnly";const Ru=-17;class Bu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const r=new Bu;return r.scale=e||1,r.fontStack=t,r}static forImage(e){const t=new Bu;return t.imageName=e,t}}class Lu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const r=new Lu;for(let n=0;n<e.sections.length;n++){const i=e.sections[n];i.image?r.addImageSection(i):r.addTextSection(i,t)}return r}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r+1)||null,i=e.charCodeAt(r-1)||null;t+=n&&Mi(n)&&!Jl[e[r+1]]||i&&Mi(i)&&!Jl[e[r-1]]||!Jl[e[r]]?e[r]:Jl[e[r]]}return t}(this.text)}trim(){let e=0;for(let t=0;t<this.text.length&&ju[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let r=this.text.length-1;r>=0&&r>=e&&ju[this.text.charCodeAt(r)];r--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const r=new Lu;return r.text=this.text.substring(e,t),r.sectionIndex=this.sectionIndex.slice(e,t),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Bu.forText(e.scale,e.fontStack||t));const r=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(r)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void E("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(Bu.forImage(t)),this.sectionIndex.push(this.sections.length-1)):E("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Du(t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g){const m=Lu.fromFeature(t,o);let _;h===e.ah.vertical&&m.verticalizePunctuation();const{processBidirectionalText:v,processStyledBidirectionalText:A}=Li;if(v&&1===m.sections.length){_=[];const e=v(m.toString(),zu(m,c,a,r,i,d,y));for(const t of e){const e=new Lu;e.text=t,e.sections=m.sections;for(let r=0;r<t.length;r++)e.sectionIndex.push(0);_.push(e)}}else if(A){_=[];const e=A(m.text,m.sectionIndex,zu(m,c,a,r,i,d,y));for(const t of e){const e=new Lu;e.text=t[0],e.sectionIndex=t[1],e.sections=m.sections,_.push(e)}}else _=function(e,t){const r=[],n=e.text;let i=0;for(const n of t)r.push(e.substring(i,n)),i=n;return i<n.length&&r.push(e.substring(i,n.length)),r}(m,zu(m,c,a,r,i,d,y));const b=[],w={positionedLines:b,text:m.toString(),top:f[1],bottom:f[1],left:f[0],right:f[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(t,r,n,i,o,a,s,l,u,c,f,h){let p=0,d=Ru,y=0,g=0;const m="right"===l?1:"left"===l?0:.5;let _=0;for(const s of o){s.trim();const o=s.getMaxScale(),l=(o-1)*$l,A={positionedGlyphs:[],lineOffset:0};t.positionedLines[_]=A;const b=A.positionedGlyphs;let w=0;if(!s.length()){d+=a,++_;continue}for(let a=0;a<s.length();a++){const y=s.getSection(a),g=s.getSectionIndex(a),m=s.getCharCode(a);let _=0,A=null,E=null,x=null,I=$l;const S=!(u===e.ah.horizontal||!f&&!Ti(m)||f&&(ju[m]||(v=m,Si.Arabic(v)||Si["Arabic Supplement"](v)||Si["Arabic Extended-A"](v)||Si["Arabic Presentation Forms-A"](v)||Si["Arabic Presentation Forms-B"](v))));if(y.imageName){const e=i[y.imageName];if(!e)continue;x=y.imageName,t.iconsInText=t.iconsInText||!0,E=e.paddedRect;const r=e.displaySize;y.scale=y.scale*$l/h,A={width:r[0],height:r[1],left:Ou,top:-Cu,advance:S?r[1]:r[0]},_=l+($l-r[1]*y.scale),I=A.advance;const n=S?r[0]*y.scale-$l*o:r[1]*y.scale-$l*o;n>0&&n>w&&(w=n)}else{const e=n[y.fontStack],t=e&&e[m];if(t&&t.rect)E=t.rect,A=t.metrics;else{const e=r[y.fontStack],t=e&&e[m];if(!t)continue;A=t.metrics}_=(o-y.scale)*$l}S?(t.verticalizable=!0,b.push({glyph:m,imageName:x,x:p,y:d+_,vertical:S,scale:y.scale,fontStack:y.fontStack,sectionIndex:g,metrics:A,rect:E}),p+=I*y.scale+c):(b.push({glyph:m,imageName:x,x:p,y:d+_,vertical:S,scale:y.scale,fontStack:y.fontStack,sectionIndex:g,metrics:A,rect:E}),p+=A.advance*y.scale+c)}0!==b.length&&(y=Math.max(p-c,y),Vu(b,0,b.length-1,m,w)),p=0;const E=a*o+w;A.lineOffset=Math.max(w,l),d+=E,g=Math.max(E,g),++_}var v;const A=d-Ru,{horizontalAlign:b,verticalAlign:w}=qu(s);(function(e,t,r,n,i,o,a,s,l){const u=(t-r)*i;let c=0;c=o!==a?-s*n-Ru:(-n*l+.5)*a;for(const t of e)for(const e of t.positionedGlyphs)e.x+=u,e.y+=c})(t.positionedLines,m,b,w,y,g,a,A,o.length),t.top+=-w*A,t.bottom=t.top+A,t.left+=-b*y,t.right=t.left+y}(w,r,n,i,_,s,l,u,h,c,p,g),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(b)&&w}const ju={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fu={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Nu(e,t,r,n,i,o){if(t.imageName){const e=n[t.imageName];return e?e.displaySize[0]*t.scale*$l/o+i:0}{const n=r[t.fontStack],o=n&&n[e];return o?o.metrics.advance*t.scale+i:0}}function Zu(e,t,r,n){const i=Math.pow(e-t,2);return n?e<t?i/2:2*i:i+Math.abs(r)*r}function Uu(e,t,r){let n=0;return 10===e&&(n-=1e4),r&&(n+=150),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function Qu(e,t,r,n,i,o){let a=null,s=Zu(t,r,i,o);for(const e of n){const n=Zu(t-e.x,r,i,o)+e.badness;n<=s&&(a=e,s=n)}return{index:e,x:t,priorBreak:a,badness:s}}function Gu(e){return e?Gu(e.priorBreak).concat(e.index):[]}function zu(e,t,r,n,i,o,a){if("point"!==o)return[];if(!e)return[];const s=[],l=function(e,t,r,n,i,o){let a=0;for(let r=0;r<e.length();r++){const s=e.getSection(r);a+=Nu(e.getCharCode(r),s,n,i,t,o)}return a/Math.max(1,Math.ceil(a/r))}(e,t,r,n,i,a),u=e.text.indexOf("​")>=0;let c=0;for(let r=0;r<e.length();r++){const o=e.getSection(r),h=e.getCharCode(r);if(ju[h]||(c+=Nu(h,o,n,i,t,a)),r<e.length()-1){const t=!((f=h)<11904||!(Si["Bopomofo Extended"](f)||Si.Bopomofo(f)||Si["CJK Compatibility Forms"](f)||Si["CJK Compatibility Ideographs"](f)||Si["CJK Compatibility"](f)||Si["CJK Radicals Supplement"](f)||Si["CJK Strokes"](f)||Si["CJK Symbols and Punctuation"](f)||Si["CJK Unified Ideographs Extension A"](f)||Si["CJK Unified Ideographs"](f)||Si["Enclosed CJK Letters and Months"](f)||Si["Halfwidth and Fullwidth Forms"](f)||Si.Hiragana(f)||Si["Ideographic Description Characters"](f)||Si["Kangxi Radicals"](f)||Si["Katakana Phonetic Extensions"](f)||Si.Katakana(f)||Si["Vertical Forms"](f)||Si["Yi Radicals"](f)||Si["Yi Syllables"](f)));(Fu[h]||t||o.imageName)&&s.push(Qu(r+1,c,l,s,Uu(h,e.getCharCode(r+1),t&&u),!1))}}var f;return Gu(Qu(e.length(),c,l,s,0,!0))}function qu(e){let t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function Vu(e,t,r,n,i){if(!n&&!i)return;const o=e[r],a=(e[r].x+o.metrics.advance*o.scale)*n;for(let n=t;n<=r;n++)e[n].x-=a,e[n].y+=i}function Wu(e,t,r){const{horizontalAlign:n,verticalAlign:i}=qu(r),o=t[0]-e.displaySize[0]*n,a=t[1]-e.displaySize[1]*i;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Ku(e){var t,r;let n=e.left,i=e.top,o=e.right-n,a=e.bottom-i;const s=null!==(t=e.image.textFitWidth)&&void 0!==t?t:"stretchOrShrink",l=null!==(r=e.image.textFitHeight)&&void 0!==r?r:"stretchOrShrink",u=(e.image.content[2]-e.image.content[0])/(e.image.content[3]-e.image.content[1]);if("proportional"===l){if("stretchOnly"===s&&o/a<u||"proportional"===s){const e=Math.ceil(a*u);n*=e/o,o=e}}else if("proportional"===s&&"stretchOnly"===l&&0!==u&&o/a>u){const e=Math.ceil(o/u);i*=e/a,a=e}return{x1:n,y1:i,x2:n+o,y2:i+a}}function Hu(e,t,r,n,i,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,u=t.right*o;let c,f,h,p;"width"===r||"both"===r?(p=i[0]+l-n[3],f=i[0]+u+n[1]):(p=i[0]+(l+u-a.displaySize[0])/2,f=p+a.displaySize[0]);const d=t.top*o,y=t.bottom*o;return"height"===r||"both"===r?(c=i[1]+d-n[0],h=i[1]+y+n[2]):(c=i[1]+(d+y-a.displaySize[1])/2,h=c+a.displaySize[1]),{image:a,top:c,right:f,bottom:h,left:p,collisionPadding:s}}const Yu=255,Xu=128,Ju=Yu*Xu;function $u(e,t){const{expression:r}=t;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new Di(e+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:n}=r;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let o=i;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[i],s=t[o];return"composite"===r.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:n}:{kind:"camera",minZoom:a,maxZoom:s,minSize:r.evaluate(new Di(a)),maxSize:r.evaluate(new Di(s)),interpolationType:n}}}function ec(e,t,r){let n="never";const i=e.get(t);return i?n=i:e.get(r)&&(n="always"),n}const tc=ll.VectorTileFeature.types,rc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function nc(e,t,r,n,i,o,a,s,l,u,c,f,h){const p=s?Math.min(Ju,Math.round(s[0])):0,d=s?Math.min(Ju,Math.round(s[1])):0;e.emplaceBack(t,r,Math.round(32*n),Math.round(32*i),o,a,(p<<1)+(l?1:0),d,16*u,16*c,256*f,256*h)}function ic(e,t,r){e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r)}function oc(e){for(const t of e.sections)if(Bi(t.text))return!0;return!1}class ac{constructor(e){this.layoutVertexArray=new Wo,this.indexArray=new Jo,this.programConfigurations=e,this.segments=new ra,this.dynamicLayoutVertexArray=new Ko,this.opacityVertexArray=new Ho,this.hasVisibleVertices=!1,this.placedSymbolArray=new Mo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,r,n){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Vl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Wl.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,rc,!0),this.opacityVertexBuffer.itemSize=1),(r||n)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}bi("SymbolBuffers",ac);class sc{constructor(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new ra,this.collisionVertexArray=new Xo}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Kl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}bi("CollisionBuffers",sc);class lc{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=rs([]),this.placementViewportMatrix=rs([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$u(this.zoom,r["text-size"]),this.iconSizeData=$u(this.zoom,r["icon-size"]);const n=this.layers[0].layout,i=n.get("symbol-sort-key"),o=n.get("symbol-z-order");this.canOverlap="never"!==ec(n,"text-overlap","text-allow-overlap")||"never"!==ec(n,"icon-overlap","icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!i.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((t=>e.ah[t]))),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=t.sourceID}createArrays(){this.text=new ac(new Ca(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new ac(new Ca(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new Bo,this.lineVertexArray=new Lo,this.symbolInstances=new Ro,this.textAnchorOffsets=new jo}calculateGlyphDependencies(e,t,r,n,i){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(r||n)&&i){const r=Jl[e.charAt(o)];r&&(t[r.charCodeAt(0)]=!0)}}populate(t,r,n){const i=this.layers[0],o=i.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),u=("constant"!==s.value.kind||s.value.value instanceof Ye&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),c="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,f=o.get("symbol-sort-key");if(this.features=[],!u&&!c)return;const h=r.iconDependencies,p=r.glyphDependencies,d=r.availableImages,y=new Di(this.zoom);for(const{feature:r,id:s,index:l,sourceLayerIndex:g}of t){const t=i._featureFilter.needGeometry,m=Ba(r,t);if(!i._featureFilter.filter(y,m,n))continue;let _,v;if(t||(m.geometry=Ra(r)),u){const e=i.getValueAndResolveTokens("text-field",m,n,d),t=Ye.factory(e),r=this.hasRTLText=this.hasRTLText||oc(t);(!r||"unavailable"===Li.getRTLTextPluginStatus()||r&&Li.isParsed())&&(_=Xl(t,i,m))}if(c){const e=i.getValueAndResolveTokens("icon-image",m,n,d);v=e instanceof et?e:et.fromString(e)}if(!_&&!v)continue;const A=this.sortFeaturesByKey?f.evaluate(m,{},n):void 0;if(this.features.push({id:s,text:_,icon:v,index:l,sourceLayerIndex:g,geometry:m.geometry,properties:r.properties,type:tc[r.type],sortKey:A}),v&&(h[v.name]=!0),_){const t=a.evaluate(m,{},n).join(","),r="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(e.ah.vertical)>=0;for(const e of _.sections)if(e.image)h[e.image.name]=!0;else{const n=Ci(_.toString()),i=e.fontStack||t,o=p[i]=p[i]||{};this.calculateGlyphDependencies(e.text,o,r,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},r={},n=[];let i=0;function o(t){n.push(e[t]),i++}function a(e,t,i){const o=r[e];return delete r[e],r[t]=o,n[o].geometry[0].pop(),n[o].geometry[0]=n[o].geometry[0].concat(i[0]),o}function s(e,r,i){const o=t[r];return delete t[r],t[e]=o,n[o].geometry[0].shift(),n[o].geometry[0]=i[0].concat(n[o].geometry[0]),o}function l(e,t,r){const n=r?t[0][t[0].length-1]:t[0][0];return`${e}:${n.x}:${n.y}`}for(let u=0;u<e.length;u++){const c=e[u],f=c.geometry,h=c.text?c.text.toString():null;if(!h){o(u);continue}const p=l(h,f),d=l(h,f,!0);if(p in r&&d in t&&r[p]!==t[d]){const e=s(p,d,f),i=a(p,d,n[e].geometry);delete t[p],delete r[d],r[l(h,n[i].geometry,!0)]=i,n[e].geometry=null}else p in r?a(p,d,f):d in t?s(p,d,f):(o(u),t[p]=i-1,r[d]=i-1)}return n.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const r=this.lineVertexArray.length;if(void 0!==e.segment){let r=e.dist(t[e.segment+1]),n=e.dist(t[e.segment]);const i={};for(let n=e.segment+1;n<t.length;n++)i[n]={x:t[n].x,y:t[n].y,tileUnitDistanceFromAnchor:r},n<t.length-1&&(r+=t[n+1].dist(t[n]));for(let r=e.segment||0;r>=0;r--)i[r]={x:t[r].x,y:t[r].y,tileUnitDistanceFromAnchor:n},r>0&&(n+=t[r-1].dist(t[r]));for(let e=0;e<t.length;e++){const t=i[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(t,r,n,i,o,a,s,l,u,c,f,h){const p=t.indexArray,d=t.layoutVertexArray,y=t.segments.prepareSegment(4*r.length,d,p,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,m=y.vertexLength,_=this.allowVerticalPlacement&&s===e.ah.vertical?Math.PI/2:0,v=a.text&&a.text.sections;for(let e=0;e<r.length;e++){const{tl:i,tr:o,bl:s,br:u,tex:c,pixelOffsetTL:f,pixelOffsetBR:g,minFontScaleX:m,minFontScaleY:A,glyphOffset:b,isSDF:w,sectionIndex:E}=r[e],x=y.vertexLength,I=b[1];nc(d,l.x,l.y,i.x,I+i.y,c.x,c.y,n,w,f.x,f.y,m,A),nc(d,l.x,l.y,o.x,I+o.y,c.x+c.w,c.y,n,w,g.x,f.y,m,A),nc(d,l.x,l.y,s.x,I+s.y,c.x,c.y+c.h,n,w,f.x,g.y,m,A),nc(d,l.x,l.y,u.x,I+u.y,c.x+c.w,c.y+c.h,n,w,g.x,g.y,m,A),ic(t.dynamicLayoutVertexArray,l,_),p.emplaceBack(x,x+1,x+2),p.emplaceBack(x+1,x+2,x+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b[0]),e!==r.length-1&&E===r[e+1].sectionIndex||t.programConfigurations.populatePaintArrays(d.length,a,a.index,{},h,v&&v[E])}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,m,u,c,l.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],s,0,!1,0,f)}_addCollisionDebugVertex(e,t,r,n,i,o){return t.emplaceBack(0,0),e.emplaceBack(r.x,r.y,n,i,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(e,t,r,n,i,a,s){const l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),u=l.vertexLength,c=i.layoutVertexArray,f=i.collisionVertexArray,h=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(c,f,a,h,p,new o(e,t)),this._addCollisionDebugVertex(c,f,a,h,p,new o(r,t)),this._addCollisionDebugVertex(c,f,a,h,p,new o(r,n)),this._addCollisionDebugVertex(c,f,a,h,p,new o(e,n)),l.vertexLength+=4;const d=i.indexArray;d.emplaceBack(u,u+1),d.emplaceBack(u+1,u+2),d.emplaceBack(u+2,u+3),d.emplaceBack(u+3,u),l.primitiveLength+=4}addDebugCollisionBoxes(e,t,r,n){for(let i=e;i<t;i++){const e=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,n?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,r)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sc(Yo,Hl.members,$o),this.iconCollisionBox=new sc(Yo,Hl.members,$o);for(let e=0;e<this.symbolInstances.length;e++){const t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(e,t,r,n,i,o,a,s,l){const u={};for(let n=t;n<r;n++){const t=e.get(n);u.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},u.textFeatureIndex=t.featureIndex;break}for(let t=n;t<i;t++){const r=e.get(t);u.verticalTextBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},u.verticalTextFeatureIndex=r.featureIndex;break}for(let t=o;t<a;t++){const r=e.get(t);u.iconBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},u.iconFeatureIndex=r.featureIndex;break}for(let t=s;t<l;t++){const r=e.get(t);u.verticalIconBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY},u.verticalIconFeatureIndex=r.featureIndex;break}return u}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const r=e.placedSymbolArray.get(t),n=r.vertexStartIndex+4*r.numGlyphs;for(let t=r.vertexStartIndex;t<n;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),r=Math.cos(e),n=[],i=[],o=[];for(let e=0;e<this.symbolInstances.length;++e){o.push(e);const a=this.symbolInstances.get(e);n.push(0|Math.round(t*a.anchorX+r*a.anchorY)),i.push(a.featureIndex)}return o.sort(((e,t)=>n[e]-n[t]||i[t]-i[e])),o}addToSortKeyRanges(e,t){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===t?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,r)=>{e>=0&&r.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let uc,cc;bi("SymbolBucket",lc,{omit:["layers","collisionBoxArray","features","compareText"]}),lc.MAX_GLYPHS=65535,lc.addDynamicAttributes=ic;var fc={get paint(){return cc=cc||new Yi({"icon-opacity":new Vi(V.paint_symbol["icon-opacity"]),"icon-color":new Vi(V.paint_symbol["icon-color"]),"icon-halo-color":new Vi(V.paint_symbol["icon-halo-color"]),"icon-halo-width":new Vi(V.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Vi(V.paint_symbol["icon-halo-blur"]),"icon-translate":new qi(V.paint_symbol["icon-translate"]),"icon-translate-anchor":new qi(V.paint_symbol["icon-translate-anchor"]),"text-opacity":new Vi(V.paint_symbol["text-opacity"]),"text-color":new Vi(V.paint_symbol["text-color"],{runtimeType:he,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Vi(V.paint_symbol["text-halo-color"]),"text-halo-width":new Vi(V.paint_symbol["text-halo-width"]),"text-halo-blur":new Vi(V.paint_symbol["text-halo-blur"]),"text-translate":new qi(V.paint_symbol["text-translate"]),"text-translate-anchor":new qi(V.paint_symbol["text-translate-anchor"])})},get layout(){return uc=uc||new Yi({"symbol-placement":new qi(V.layout_symbol["symbol-placement"]),"symbol-spacing":new qi(V.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qi(V.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Vi(V.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qi(V.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qi(V.layout_symbol["icon-allow-overlap"]),"icon-overlap":new qi(V.layout_symbol["icon-overlap"]),"icon-ignore-placement":new qi(V.layout_symbol["icon-ignore-placement"]),"icon-optional":new qi(V.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qi(V.layout_symbol["icon-rotation-alignment"]),"icon-size":new Vi(V.layout_symbol["icon-size"]),"icon-text-fit":new qi(V.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qi(V.layout_symbol["icon-text-fit-padding"]),"icon-image":new Vi(V.layout_symbol["icon-image"]),"icon-rotate":new Vi(V.layout_symbol["icon-rotate"]),"icon-padding":new Vi(V.layout_symbol["icon-padding"]),"icon-keep-upright":new qi(V.layout_symbol["icon-keep-upright"]),"icon-offset":new Vi(V.layout_symbol["icon-offset"]),"icon-anchor":new Vi(V.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qi(V.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qi(V.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qi(V.layout_symbol["text-rotation-alignment"]),"text-field":new Vi(V.layout_symbol["text-field"]),"text-font":new Vi(V.layout_symbol["text-font"]),"text-size":new Vi(V.layout_symbol["text-size"]),"text-max-width":new Vi(V.layout_symbol["text-max-width"]),"text-line-height":new qi(V.layout_symbol["text-line-height"]),"text-letter-spacing":new Vi(V.layout_symbol["text-letter-spacing"]),"text-justify":new Vi(V.layout_symbol["text-justify"]),"text-radial-offset":new Vi(V.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qi(V.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Vi(V.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Vi(V.layout_symbol["text-anchor"]),"text-max-angle":new qi(V.layout_symbol["text-max-angle"]),"text-writing-mode":new qi(V.layout_symbol["text-writing-mode"]),"text-rotate":new Vi(V.layout_symbol["text-rotate"]),"text-padding":new qi(V.layout_symbol["text-padding"]),"text-keep-upright":new qi(V.layout_symbol["text-keep-upright"]),"text-transform":new Vi(V.layout_symbol["text-transform"]),"text-offset":new Vi(V.layout_symbol["text-offset"]),"text-allow-overlap":new qi(V.layout_symbol["text-allow-overlap"]),"text-overlap":new qi(V.layout_symbol["text-overlap"]),"text-ignore-placement":new qi(V.layout_symbol["text-ignore-placement"]),"text-optional":new qi(V.layout_symbol["text-optional"])})}};class hc{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:le,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}bi("FormatSectionOverride",hc,{omit:["defaultValue"]});class pc extends Ji{constructor(e){super(e,fc)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const r of e)t.indexOf(r)<0&&t.push(r);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,r,n){const i=this.layout.get(e).evaluate(t,{},r,n),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||An(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,r)=>e&&r in e?String(e[r]):""))}(t.properties,i)}createBucket(e){return new lc(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of fc.paint.overridableProperties){if(!pc.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),r=new hc(t),n=new vn(r,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new wn("source",n):new En("composite",n,t.value.zoomStops),this.paint._values[e]=new Gi(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&pc.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const r=e.get("text-field"),n=fc.paint.properties[t];let i=!1;const o=e=>{for(const t of e)if(n.overrides&&n.overrides.hasOverride(t))return void(i=!0)};if("constant"===r.value.kind&&r.value.value instanceof Ye)o(r.value.value.sections);else if("source"===r.value.kind){const e=t=>{i||(t instanceof ot&&nt(t.value)===ge?o(t.value.sections):t instanceof qt?o(t.sections):t.eachChild(e))},t=r.value;t._styleExpression&&e(t._styleExpression.expression)}return i}}let dc;var yc={get paint(){return dc=dc||new Yi({"background-color":new qi(V.paint_background["background-color"]),"background-pattern":new Ki(V.paint_background["background-pattern"]),"background-opacity":new qi(V.paint_background["background-opacity"])})}};class gc extends Ji{constructor(e){super(e,yc)}}let mc;var _c={get paint(){return mc=mc||new Yi({"raster-opacity":new qi(V.paint_raster["raster-opacity"]),"raster-hue-rotate":new qi(V.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qi(V.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qi(V.paint_raster["raster-brightness-max"]),"raster-saturation":new qi(V.paint_raster["raster-saturation"]),"raster-contrast":new qi(V.paint_raster["raster-contrast"]),"raster-resampling":new qi(V.paint_raster["raster-resampling"]),"raster-fade-duration":new qi(V.paint_raster["raster-fade-duration"])})}};class vc extends Ji{constructor(e){super(e,_c)}}class Ac extends Ji{constructor(e){super(e,{}),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class bc{constructor(e){this._methodToThrottle=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const wc=6371008.8;class Ec{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ec(g(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,r=this.lat*t,n=e.lat*t,i=Math.sin(r)*Math.sin(n)+Math.cos(r)*Math.cos(n)*Math.cos((e.lng-this.lng)*t);return wc*Math.acos(Math.min(i,1))}static convert(e){if(e instanceof Ec)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Ec(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Ec(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const xc=2*Math.PI*wc;function Ic(e){return xc*Math.cos(e*Math.PI/180)}function Sc(e){return(180+e)/360}function Cc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Pc(e,t){return e/Ic(t)}function Oc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}class Tc{constructor(e,t,r=0){this.x=+e,this.y=+t,this.z=+r}static fromLngLat(e,t=0){const r=Ec.convert(e);return new Tc(Sc(r.lng),Cc(r.lat),Pc(t,r.lat))}toLngLat(){return new Ec(360*this.x-180,Oc(this.y))}toAltitude(){return this.z*Ic(Oc(this.y))}meterInMercatorCoordinateUnits(){return 1/xc*(e=Oc(this.y),1/Math.cos(e*Math.PI/180));var e}}function Mc(e,t,r){var n=2*Math.PI*6378137/256/Math.pow(2,r);return[e*n-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}class kc{constructor(e,t,r){if(e<0||e>25||r<0||r>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))throw new Error(`x=${t}, y=${r}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=t,this.y=r,this.key=Lc(0,e,e,t,r)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,r){const n=(o=this.y,a=this.z,s=Mc(256*(i=this.x),256*(o=Math.pow(2,a)-o-1),a),l=Mc(256*(i+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]);var i,o,a,s,l;const u=function(e,t,r){let n,i="";for(let o=e;o>0;o--)n=1<<o-1,i+=(t&n?1:0)+(r&n?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===r?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,u).replace(/{bbox-epsg-3857}/g,n)}isChildOf(e){const t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){const t=Math.pow(2,this.z);return new o((e.x*t-this.x)*Ta,(e.y*t-this.y)*Ta)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Rc{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Lc(e,t.z,t.z,t.x,t.y)}}class Bc{constructor(e,t,r,n,i){if(e<r)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${r}`);this.overscaledZ=e,this.wrap=t,this.canonical=new kc(r,+n,+i),this.key=Lc(t,e,r,n,i)}clone(){return new Bc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const t=this.canonical.z-e;return e>this.canonical.z?new Bc(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bc(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-e;return e>this.canonical.z?Lc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Lc(this.wrap*+t,e,e,this.canonical.x>>r,this.canonical.y>>r)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Bc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,r=2*this.canonical.x,n=2*this.canonical.y;return[new Bc(t,this.wrap,t,r,n),new Bc(t,this.wrap,t,r+1,n),new Bc(t,this.wrap,t,r,n+1),new Bc(t,this.wrap,t,r+1,n+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Bc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Bc(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Rc(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Tc(e.x-this.wrap,e.y))}}function Lc(e,t,r,n,i){(e*=2)<0&&(e=-1*e-1);const o=1<<r;return(o*o*e+o*i+n).toString(36)+r.toString(36)+t.toString(36)}bi("CanonicalTileID",kc),bi("OverscaledTileID",Bc,{omit:["posMatrix"]});class Dc{constructor(e,t,r,n=1,i=1,o=1,a=0){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&!["mapbox","terrarium","custom"].includes(r))return void E(`"${r}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=t.height;const s=this.dim=t.height-2;switch(this.data=new Uint32Array(t.data.buffer),r){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=n,this.greenFactor=i,this.blueFactor=o,this.baseShift=a;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let e=0;e<s;e++)this.data[this._idx(-1,e)]=this.data[this._idx(0,e)],this.data[this._idx(s,e)]=this.data[this._idx(s-1,e)],this.data[this._idx(e,-1)]=this.data[this._idx(e,0)],this.data[this._idx(e,s)]=this.data[this._idx(e,s-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(s,-1)]=this.data[this._idx(s-1,0)],this.data[this._idx(-1,s)]=this.data[this._idx(0,s-1)],this.data[this._idx(s,s)]=this.data[this._idx(s-1,s-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let e=0;e<s;e++)for(let t=0;t<s;t++){const r=this.get(e,t);r>this.max&&(this.max=r),r<this.min&&(this.min=r)}}get(e,t){const r=new Uint8Array(this.data.buffer),n=4*this._idx(e,t);return this.unpack(r[n],r[n+1],r[n+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}unpack(e,t,r){return e*this.redFactor+t*this.greenFactor+r*this.blueFactor-this.baseShift}getPixels(){return new gs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let n=t*this.dim,i=t*this.dim+this.dim,o=r*this.dim,a=r*this.dim+this.dim;switch(t){case-1:n=i-1;break;case 1:i=n+1}switch(r){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-r*this.dim;for(let t=o;t<a;t++)for(let r=n;r<i;r++)this.data[this._idx(r,t)]=e.data[this._idx(r+s,t+l)]}}bi("DEMData",Dc);class jc{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class Fc{constructor(e,t,r,n,i){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=r,e._y=n,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}class Nc{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new vi(Ta,16,0),this.grid3D=new vi(Ta,16,0),this.featureIndexArray=new No,this.promoteId=t}insert(e,t,r,n,i,o){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,n,i);const s=o?this.grid3D:this.grid;for(let e=0;e<t.length;e++){const r=t[e],n=[1/0,1/0,-1/0,-1/0];for(let e=0;e<r.length;e++){const t=r[e];n[0]=Math.min(n[0],t.x),n[1]=Math.min(n[1],t.y),n[2]=Math.max(n[2],t.x),n[3]=Math.max(n[3],t.y)}n[0]<Ta&&n[1]<Ta&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ll.VectorTile(new wu(this.rawTileData)).layers,this.sourceLayerCoder=new jc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,r,n){this.loadVTLayers();const i=e.params||{},a=Ta/e.tileSize/e.scale,s=On(i.filter),l=e.queryGeometry,u=e.queryPadding*a,c=Uc(l),f=this.grid.query(c.minX-u,c.minY-u,c.maxX+u,c.maxY+u),h=Uc(e.cameraQueryGeometry),p=this.grid3D.query(h.minX-u,h.minY-u,h.maxX+u,h.maxY+u,((t,r,n,i)=>function(e,t,r,n,i){for(const o of e)if(t<=o.x&&r<=o.y&&n>=o.x&&i>=o.y)return!0;const a=[new o(t,r),new o(t,i),new o(n,i),new o(n,r)];if(e.length>2)for(const t of a)if(Va(e,t))return!0;for(let t=0;t<e.length-1;t++)if(Wa(e[t],e[t+1],a))return!0;return!1}(e.cameraQueryGeometry,t-u,r-u,n+u,i+u)));for(const e of p)f.push(e);f.sort(Qc);const d={};let y;for(let o=0;o<f.length;o++){const u=f[o];if(u===y)continue;y=u;const c=this.featureIndexArray.get(u);let h=null;this.loadMatchingFeature(d,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,s,i.layers,i.availableImages,t,r,n,((t,r,n)=>(h||(h=Ra(t)),r.queryIntersectsFeature(l,t,n,h,this.z,e.transform,a,e.pixelPosMatrix))))}return d}loadMatchingFeature(e,t,r,n,i,o,a,s,l,u,c){const f=this.bucketLayerIDs[t];if(o&&!function(e,t){for(let r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1}(o,f))return;const h=this.sourceLayerCoder.decode(r),p=this.vtLayers[h].feature(n);if(i.needGeometry){const e=Ba(p,!0);if(!i.filter(new Di(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!i.filter(new Di(this.tileID.overscaledZ),p))return;const d=this.getId(p,h);for(let t=0;t<f.length;t++){const r=f[t];if(o&&o.indexOf(r)<0)continue;const i=s[r];if(!i)continue;let h={};d&&u&&(h=u.getState(i.sourceLayer||"_geojsonTileLayer",d));const y=m({},l[r]);y.paint=Zc(y.paint,i.paint,p,h,a),y.layout=Zc(y.layout,i.layout,p,h,a);const g=!c||c(p,i,h);if(!g)continue;const _=new Fc(p,this.z,this.x,this.y,d);_.layer=y;let v=e[r];void 0===v&&(v=e[r]=[]),v.push({featureIndex:n,feature:_,intersectionZ:g})}}lookupSymbolFeatures(e,t,r,n,i,o,a,s){const l={};this.loadVTLayers();const u=On(i);for(const i of e)this.loadMatchingFeature(l,r,n,i,u,o,a,s,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const r of t)if(e===r)return!0;return!1}getId(e,t){let r=e.id;return this.promoteId&&(r=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof r&&(r=Number(r))),r}}function Zc(e,t,r,n,i){return v(e,((e,o)=>{const a=t instanceof zi?t.get(o):null;return a&&a.evaluate?a.evaluate(r,n,i):a}))}function Uc(e){let t=1/0,r=1/0,n=-1/0,i=-1/0;for(const o of e)t=Math.min(t,o.x),r=Math.min(r,o.y),n=Math.max(n,o.x),i=Math.max(i,o.y);return{minX:t,minY:r,maxX:n,maxY:i}}function Qc(e,t){return t-e}function Gc(e,t,r,n,i){const a=[];for(let s=0;s<e.length;s++){const l=e[s];let u;for(let e=0;e<l.length-1;e++){let s=l[e],c=l[e+1];s.x<t&&c.x<t||(s.x<t?s=new o(t,s.y+(t-s.x)/(c.x-s.x)*(c.y-s.y))._round():c.x<t&&(c=new o(t,s.y+(t-s.x)/(c.x-s.x)*(c.y-s.y))._round()),s.y<r&&c.y<r||(s.y<r?s=new o(s.x+(r-s.y)/(c.y-s.y)*(c.x-s.x),r)._round():c.y<r&&(c=new o(s.x+(r-s.y)/(c.y-s.y)*(c.x-s.x),r)._round()),s.x>=n&&c.x>=n||(s.x>=n?s=new o(n,s.y+(n-s.x)/(c.x-s.x)*(c.y-s.y))._round():c.x>=n&&(c=new o(n,s.y+(n-s.x)/(c.x-s.x)*(c.y-s.y))._round()),s.y>=i&&c.y>=i||(s.y>=i?s=new o(s.x+(i-s.y)/(c.y-s.y)*(c.x-s.x),i)._round():c.y>=i&&(c=new o(s.x+(i-s.y)/(c.y-s.y)*(c.x-s.x),i)._round()),u&&s.equals(u[u.length-1])||(u=[s],a.push(u)),u.push(c)))))}}return a}bi("FeatureIndex",Nc,{omit:["rawTileData","sourceLayerCoder"]});class zc extends o{constructor(e,t,r,n){super(e,t),this.angle=r,void 0!==n&&(this.segment=n)}clone(){return new zc(this.x,this.y,this.angle,this.segment)}}function qc(e,t,r,n,i){if(void 0===t.segment||0===r)return!0;let o=t,a=t.segment+1,s=0;for(;s>-r/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let u=0;for(;s<r/2;){const t=e[a],r=e[a+1];if(!r)return!1;let o=e[a-1].angleTo(t)-t.angleTo(r);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),u+=o;s-l[0].distance>n;)u-=l.shift().angleDelta;if(u>i)return!1;a++,s+=t.dist(r)}return!0}function Vc(e){let t=0;for(let r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function Wc(e,t,r){return e?.6*t*r:0}function Kc(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Hc(e,t,r,n,i,o){const a=Wc(r,i,o),s=Kc(r,n)*o;let l=0;const u=Vc(e)/2;for(let r=0;r<e.length-1;r++){const n=e[r],i=e[r+1],o=n.dist(i);if(l+o>u){const c=(u-l)/o,f=Tt.number(n.x,i.x,c),h=Tt.number(n.y,i.y,c),p=new zc(f,h,i.angleTo(n),r);return p._round(),!a||qc(e,p,s,a,t)?p:void 0}l+=o}}function Yc(e,t,r,n,i,o,a,s,l){const u=Wc(n,o,a),c=Kc(n,i),f=c*a,h=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-f<t/4&&(t=f+t/4),Xc(e,h?t/2*s%t:(c/2+2*o)*a*s%t,t,u,r,f,h,!1,l)}function Xc(e,t,r,n,i,o,a,s,l){const u=o/2,c=Vc(e);let f=0,h=t-r,p=[];for(let t=0;t<e.length-1;t++){const a=e[t],s=e[t+1],d=a.dist(s),y=s.angleTo(a);for(;h+r<f+d;){h+=r;const g=(h-f)/d,m=Tt.number(a.x,s.x,g),_=Tt.number(a.y,s.y,g);if(m>=0&&m<l&&_>=0&&_<l&&h-u>=0&&h+u<=c){const r=new zc(m,_,y,t);r._round(),n&&!qc(e,r,o,n,i)||p.push(r)}}f+=d}return s||p.length||a||(p=Xc(e,f/2,r,n,i,o,a,!0,l)),p}bi("Anchor",zc);const Jc=Ou;function $c(e,t,r,n){const i=[],a=e.image,s=a.pixelRatio,l=a.paddedRect.w-2*Jc,u=a.paddedRect.h-2*Jc;let c={x1:e.left,y1:e.top,x2:e.right,y2:e.bottom};const f=a.stretchX||[[0,l]],h=a.stretchY||[[0,u]],p=(e,t)=>e+t[1]-t[0],d=f.reduce(p,0),y=h.reduce(p,0),g=l-d,m=u-y;let _=0,v=d,A=0,b=y,w=0,E=g,x=0,I=m;if(a.content&&n){const t=a.content,r=t[2]-t[0],n=t[3]-t[1];(a.textFitWidth||a.textFitHeight)&&(c=Ku(e)),_=ef(f,0,t[0]),A=ef(h,0,t[1]),v=ef(f,t[0],t[2]),b=ef(h,t[1],t[3]),w=t[0]-_,x=t[1]-A,E=r-v,I=n-b}const S=c.x1,C=c.y1,P=c.x2-S,O=c.y2-C,T=(e,n,i,l)=>{const u=rf(e.stretch-_,v,P,S),c=nf(e.fixed-w,E,e.stretch,d),f=rf(n.stretch-A,b,O,C),h=nf(n.fixed-x,I,n.stretch,y),p=rf(i.stretch-_,v,P,S),g=nf(i.fixed-w,E,i.stretch,d),m=rf(l.stretch-A,b,O,C),T=nf(l.fixed-x,I,l.stretch,y),M=new o(u,f),k=new o(p,f),R=new o(p,m),B=new o(u,m),L=new o(c/s,h/s),D=new o(g/s,T/s),j=t*Math.PI/180;if(j){const e=Math.sin(j),t=Math.cos(j),r=[t,-e,e,t];M._matMult(r),k._matMult(r),B._matMult(r),R._matMult(r)}const F=e.stretch+e.fixed,N=n.stretch+n.fixed;return{tl:M,tr:k,bl:B,br:R,tex:{x:a.paddedRect.x+Jc+F,y:a.paddedRect.y+Jc+N,w:i.stretch+i.fixed-F,h:l.stretch+l.fixed-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:L,pixelOffsetBR:D,minFontScaleX:E/s/P,minFontScaleY:I/s/O,isSDF:r}};if(n&&(a.stretchX||a.stretchY)){const e=tf(f,g,d),t=tf(h,m,y);for(let r=0;r<e.length-1;r++){const n=e[r],o=e[r+1];for(let e=0;e<t.length-1;e++)i.push(T(n,t[e],o,t[e+1]))}}else i.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}));return i}function ef(e,t,r){let n=0;for(const i of e)n+=Math.max(t,Math.min(r,i[1]))-Math.max(t,Math.min(r,i[0]));return n}function tf(e,t,r){const n=[{fixed:-Jc,stretch:0}];for(const[t,r]of e){const e=n[n.length-1];n.push({fixed:t-e.stretch,stretch:e.stretch}),n.push({fixed:t-e.stretch,stretch:e.stretch+(r-t)})}return n.push({fixed:t+Jc,stretch:r}),n}function rf(e,t,r,n){return e/t*r+n}function nf(e,t,r,n){return e-t*r/n}class of{constructor(e,t,r,n,i,a,s,l,u,c){var f;if(this.boxStartIndex=e.length,u){let e=a.top,t=a.bottom;const r=a.collisionPadding;r&&(e-=r[1],t+=r[3]);let n=t-e;n>0&&(n=Math.max(10,n),this.circleDiameter=n)}else{const u=(null===(f=a.image)||void 0===f?void 0:f.content)&&(a.image.textFitWidth||a.image.textFitHeight)?Ku(a):{x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};u.y1=u.y1*s-l[0],u.y2=u.y2*s+l[2],u.x1=u.x1*s-l[3],u.x2=u.x2*s+l[1];const h=a.collisionPadding;if(h&&(u.x1-=h[0]*s,u.y1-=h[1]*s,u.x2+=h[2]*s,u.y2+=h[3]*s),c){const e=new o(u.x1,u.y1),t=new o(u.x2,u.y1),r=new o(u.x1,u.y2),n=new o(u.x2,u.y2),i=c*Math.PI/180;e._rotate(i),t._rotate(i),r._rotate(i),n._rotate(i),u.x1=Math.min(e.x,t.x,r.x,n.x),u.x2=Math.max(e.x,t.x,r.x,n.x),u.y1=Math.min(e.y,t.y,r.y,n.y),u.y2=Math.max(e.y,t.y,r.y,n.y)}e.emplaceBack(t.x,t.y,u.x1,u.y1,u.x2,u.y2,r,n,i)}this.boxEndIndex=e.length}}class af{constructor(e=[],t=sf){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,n=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(r(n,o)>=0)break;t[e]=o,e=i}t[e]=n}_down(e){const{data:t,compare:r}=this,n=this.length>>1,i=t[e];for(;e<n;){let n=1+(e<<1),o=t[n];const a=n+1;if(a<this.length&&r(t[a],o)<0&&(n=a,o=t[a]),r(o,i)>=0)break;t[e]=o,e=n}t[e]=i}}function sf(e,t){return e<t?-1:e>t?1:0}function lf(e,t=1,r=!1){let n=1/0,i=1/0,a=-1/0,s=-1/0;const l=e[0];for(let e=0;e<l.length;e++){const t=l[e];(!e||t.x<n)&&(n=t.x),(!e||t.y<i)&&(i=t.y),(!e||t.x>a)&&(a=t.x),(!e||t.y>s)&&(s=t.y)}const u=Math.min(a-n,s-i);let c=u/2;const f=new af([],uf);if(0===u)return new o(n,i);for(let t=n;t<a;t+=u)for(let r=i;r<s;r+=u)f.push(new cf(t+c,r+c,c,e));let h=function(e){let t=0,r=0,n=0;const i=e[0];for(let e=0,o=i.length,a=o-1;e<o;a=e++){const o=i[e],s=i[a],l=o.x*s.y-s.x*o.y;r+=(o.x+s.x)*l,n+=(o.y+s.y)*l,t+=3*l}return new cf(r/t,n/t,0,e)}(e),p=f.length;for(;f.length;){const n=f.pop();(n.d>h.d||!h.d)&&(h=n,r&&console.log("found best %d after %d probes",Math.round(1e4*n.d)/1e4,p)),n.max-h.d<=t||(c=n.h/2,f.push(new cf(n.p.x-c,n.p.y-c,c,e)),f.push(new cf(n.p.x+c,n.p.y-c,c,e)),f.push(new cf(n.p.x-c,n.p.y+c,c,e)),f.push(new cf(n.p.x+c,n.p.y+c,c,e)),p+=4)}return r&&(console.log(`num probes: ${p}`),console.log(`best distance: ${h.d}`)),h.p}function uf(e,t){return t.max-e.max}function cf(e,t,r,n){this.p=new o(e,t),this.h=r,this.d=function(e,t){let r=!1,n=1/0;for(let i=0;i<t.length;i++){const o=t[i];for(let t=0,i=o.length,a=i-1;t<i;a=t++){const i=o[t],s=o[a];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(r=!r),n=Math.min(n,za(e,i,s))}}return(r?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}var ff;e.aq=void 0,(ff=e.aq||(e.aq={}))[ff.center=1]="center",ff[ff.left=2]="left",ff[ff.right=3]="right",ff[ff.top=4]="top",ff[ff.bottom=5]="bottom",ff[ff["top-left"]=6]="top-left",ff[ff["top-right"]=7]="top-right",ff[ff["bottom-left"]=8]="bottom-left",ff[ff["bottom-right"]=9]="bottom-right";const hf=7,pf=Number.POSITIVE_INFINITY;function df(e,t){return t[1]!==pf?function(e,t,r){let n=0,i=0;switch(t=Math.abs(t),r=Math.abs(r),e){case"top-right":case"top-left":case"top":i=r-hf;break;case"bottom-right":case"bottom-left":case"bottom":i=-r+hf}switch(e){case"top-right":case"bottom-right":case"right":n=-t;break;case"top-left":case"bottom-left":case"left":n=t}return[n,i]}(e,t[0],t[1]):function(e,t){let r=0,n=0;t<0&&(t=0);const i=t/Math.SQRT2;switch(e){case"top-right":case"top-left":n=i-hf;break;case"bottom-right":case"bottom-left":n=-i+hf;break;case"bottom":n=-t+hf;break;case"top":n=t-hf}switch(e){case"top-right":case"bottom-right":r=-i;break;case"top-left":case"bottom-left":r=i;break;case"left":r=t;break;case"right":r=-t}return[r,n]}(e,t[0])}function yf(e,t,r){var n;const i=e.layout,o=null===(n=i.get("text-variable-anchor-offset"))||void 0===n?void 0:n.evaluate(t,{},r);if(o){const e=o.values,t=[];for(let r=0;r<e.length;r+=2){const n=t[r]=e[r],i=e[r+1].map((e=>e*$l));n.startsWith("top")?i[1]-=hf:n.startsWith("bottom")&&(i[1]+=hf),t[r+1]=i}return new $e(t)}const a=i.get("text-variable-anchor");if(a){let n;n=void 0!==e._unevaluatedLayout.getValue("text-radial-offset")?[i.get("text-radial-offset").evaluate(t,{},r)*$l,pf]:i.get("text-offset").evaluate(t,{},r).map((e=>e*$l));const o=[];for(const e of a)o.push(e,df(e,n));return new $e(o)}return null}function gf(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function mf(t,r,n,i,o,a,s,l,u,c,f){let h=a.textMaxSize.evaluate(r,{});void 0===h&&(h=s);const p=t.layers[0].layout,d=p.get("icon-offset").evaluate(r,{},f),y=vf(n.horizontal),g=s/24,m=t.tilePixelRatio*g,_=t.tilePixelRatio*h/24,v=t.tilePixelRatio*l,A=t.tilePixelRatio*p.get("symbol-spacing"),b=p.get("text-padding")*t.tilePixelRatio,w=function(e,t,r,n=1){const i=e.get("icon-padding").evaluate(t,{},r),o=i&&i.values;return[o[0]*n,o[1]*n,o[2]*n,o[3]*n]}(p,r,f,t.tilePixelRatio),x=p.get("text-max-angle")/180*Math.PI,I="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),S="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),C=p.get("symbol-placement"),P=A/2,O=p.get("icon-text-fit");let T;i&&"none"!==O&&(t.allowVerticalPlacement&&n.vertical&&(T=Hu(i,n.vertical,O,p.get("icon-text-fit-padding"),d,g)),y&&(i=Hu(i,y,O,p.get("icon-text-fit-padding"),d,g)));const M=(l,h)=>{h.x<0||h.x>=Ta||h.y<0||h.y>=Ta||function(t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v,A,b,w,x,I,S){const C=t.addToLineVertexArray(r,n);let P,O,T,M,k=0,R=0,B=0,L=0,D=-1,j=-1;const F={};let N=ca("");if(t.allowVerticalPlacement&&i.vertical){const e=l.layout.get("text-rotate").evaluate(b,{},I)+90;T=new of(u,r,c,f,h,i.vertical,p,d,y,e),s&&(M=new of(u,r,c,f,h,s,m,_,y,e))}if(o){const n=l.layout.get("icon-rotate").evaluate(b,{}),i="none"!==l.layout.get("icon-text-fit"),a=$c(o,n,x,i),p=s?$c(s,n,x,i):void 0;O=new of(u,r,c,f,h,o,m,_,!1,n),k=4*a.length;const d=t.iconSizeData;let y=null;"source"===d.kind?(y=[Xu*l.layout.get("icon-size").evaluate(b,{})],y[0]>Ju&&E(`${t.layerIds[0]}: Value for "icon-size" is >= ${Yu}. Reduce your "icon-size".`)):"composite"===d.kind&&(y=[Xu*w.compositeIconSizes[0].evaluate(b,{},I),Xu*w.compositeIconSizes[1].evaluate(b,{},I)],(y[0]>Ju||y[1]>Ju)&&E(`${t.layerIds[0]}: Value for "icon-size" is >= ${Yu}. Reduce your "icon-size".`)),t.addSymbols(t.icon,a,y,A,v,b,e.ah.none,r,C.lineStartIndex,C.lineLength,-1,I),D=t.icon.placedSymbolArray.length-1,p&&(R=4*p.length,t.addSymbols(t.icon,p,y,A,v,b,e.ah.vertical,r,C.lineStartIndex,C.lineLength,-1,I),j=t.icon.placedSymbolArray.length-1)}const Z=Object.keys(i.horizontal);for(const n of Z){const o=i.horizontal[n];if(!P){N=ca(o.text);const e=l.layout.get("text-rotate").evaluate(b,{},I);P=new of(u,r,c,f,h,o,p,d,y,e)}const s=1===o.positionedLines.length;if(B+=_f(t,r,o,a,l,y,b,g,C,i.vertical?e.ah.horizontal:e.ah.horizontalOnly,s?Z:[n],F,D,w,I),s)break}i.vertical&&(L+=_f(t,r,i.vertical,a,l,y,b,g,C,e.ah.vertical,["vertical"],F,j,w,I));const U=P?P.boxStartIndex:t.collisionBoxArray.length,Q=P?P.boxEndIndex:t.collisionBoxArray.length,G=T?T.boxStartIndex:t.collisionBoxArray.length,z=T?T.boxEndIndex:t.collisionBoxArray.length,q=O?O.boxStartIndex:t.collisionBoxArray.length,V=O?O.boxEndIndex:t.collisionBoxArray.length,W=M?M.boxStartIndex:t.collisionBoxArray.length,K=M?M.boxEndIndex:t.collisionBoxArray.length;let H=-1;const Y=(e,t)=>e&&e.circleDiameter?Math.max(e.circleDiameter,t):t;H=Y(P,H),H=Y(T,H),H=Y(O,H),H=Y(M,H);const X=H>-1?1:0;X&&(H*=S/$l),t.glyphOffsetArray.length>=lc.MAX_GLYPHS&&E("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,b.sortKey);const J=yf(l,b,I),[$,ee]=function(t,r){const n=t.length,i=null==r?void 0:r.values;if((null==i?void 0:i.length)>0)for(let r=0;r<i.length;r+=2){const n=i[r+1];t.emplaceBack(e.aq[i[r]],n[0],n[1])}return[n,t.length]}(t.textAnchorOffsets,J);t.symbolInstances.emplaceBack(r.x,r.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,D,j,N,U,Q,G,z,q,V,W,K,c,B,L,k,R,X,0,p,H,$,ee)}(t,h,l,n,i,o,T,t.layers[0],t.collisionBoxArray,r.index,r.sourceLayerIndex,t.index,m,[b,b,b,b],I,u,v,w,S,d,r,a,c,f,s)};if("line"===C)for(const e of Gc(r.geometry,0,0,Ta,Ta)){const r=Yc(e,A,x,n.vertical||y,i,24,_,t.overscaling,Ta);for(const n of r)y&&Af(t,y.text,P,n)||M(e,n)}else if("line-center"===C){for(const e of r.geometry)if(e.length>1){const t=Hc(e,x,n.vertical||y,i,24,_);t&&M(e,t)}}else if("Polygon"===r.type)for(const e of vr(r.geometry,0)){const t=lf(e,16);M(e[0],new zc(t.x,t.y,0))}else if("LineString"===r.type)for(const e of r.geometry)M(e,new zc(e[0].x,e[0].y,0));else if("Point"===r.type)for(const e of r.geometry)for(const t of e)M([t],new zc(t.x,t.y,0))}function _f(e,t,r,n,i,a,s,l,u,c,f,h,p,d,y){const g=function(e,t,r,n,i,a,s,l){const u=n.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,c=[];for(const e of t.positionedLines)for(const n of e.positionedGlyphs){if(!n.rect)continue;const a=n.rect||{};let f=Cu+1,h=!0,p=1,d=0;const y=(i||l)&&n.vertical,g=n.metrics.advance*n.scale/2;if(l&&t.verticalizable&&(d=e.lineOffset/2-(n.imageName?-($l-n.metrics.width*n.scale)/2:(n.scale-1)*$l)),n.imageName){const e=s[n.imageName];h=e.sdf,p=e.pixelRatio,f=Ou/p}const m=i?[n.x+g,n.y]:[0,0];let _=i?[0,0]:[n.x+g+r[0],n.y+r[1]-d],v=[0,0];y&&(v=_,_=[0,0]);const A=n.metrics.isDoubleResolution?2:1,b=(n.metrics.left-f)*n.scale-g+_[0],w=(-n.metrics.top-f)*n.scale+_[1],E=b+a.w/A*n.scale/p,x=w+a.h/A*n.scale/p,I=new o(b,w),S=new o(E,w),C=new o(b,x),P=new o(E,x);if(y){const e=new o(-g,g-Ru),t=-Math.PI/2,r=$l/2-g,i=new o(5-Ru-r,-(n.imageName?r:0)),a=new o(...v);I._rotateAround(t,e)._add(i)._add(a),S._rotateAround(t,e)._add(i)._add(a),C._rotateAround(t,e)._add(i)._add(a),P._rotateAround(t,e)._add(i)._add(a)}if(u){const e=Math.sin(u),t=Math.cos(u),r=[t,-e,e,t];I._matMult(r),S._matMult(r),C._matMult(r),P._matMult(r)}const O=new o(0,0),T=new o(0,0);c.push({tl:I,tr:S,bl:C,br:P,tex:a,writingMode:t.writingMode,glyphOffset:m,sectionIndex:n.sectionIndex,isSDF:h,pixelOffsetTL:O,pixelOffsetBR:T,minFontScaleX:0,minFontScaleY:0})}return c}(0,r,l,i,a,s,n,e.allowVerticalPlacement),m=e.textSizeData;let _=null;"source"===m.kind?(_=[Xu*i.layout.get("text-size").evaluate(s,{})],_[0]>Ju&&E(`${e.layerIds[0]}: Value for "text-size" is >= ${Yu}. Reduce your "text-size".`)):"composite"===m.kind&&(_=[Xu*d.compositeTextSizes[0].evaluate(s,{},y),Xu*d.compositeTextSizes[1].evaluate(s,{},y)],(_[0]>Ju||_[1]>Ju)&&E(`${e.layerIds[0]}: Value for "text-size" is >= ${Yu}. Reduce your "text-size".`)),e.addSymbols(e.text,g,_,l,a,s,c,t,u.lineStartIndex,u.lineLength,p,y);for(const t of f)h[t]=e.text.placedSymbolArray.length-1;return 4*g.length}function vf(e){for(const t in e)return e[t];return null}function Af(e,t,r,n){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(n.dist(e[t])<r)return!0}else i[t]=[];return i[t].push(n),!1}const bf=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class wf{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const n=r>>4;if(1!==n)throw new Error(`Got v${n} data when expected v1.`);const i=bf[15&r];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new wf(a,o,i,e)}constructor(e,t=64,r=Float64Array,n){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=bf.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${r}.`);n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Ef(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:a}=this,s=[0,i.length-1,0],l=[];for(;s.length;){const u=s.pop()||0,c=s.pop()||0,f=s.pop()||0;if(c-f<=a){for(let a=f;a<=c;a++){const s=o[2*a],u=o[2*a+1];s>=e&&s<=r&&u>=t&&u<=n&&l.push(i[a])}continue}const h=f+c>>1,p=o[2*h],d=o[2*h+1];p>=e&&p<=r&&d>=t&&d<=n&&l.push(i[h]),(0===u?e<=p:t<=d)&&(s.push(f),s.push(h-1),s.push(1-u)),(0===u?r>=p:n>=d)&&(s.push(h+1),s.push(c),s.push(1-u))}return l}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:i,nodeSize:o}=this,a=[0,n.length-1,0],s=[],l=r*r;for(;a.length;){const u=a.pop()||0,c=a.pop()||0,f=a.pop()||0;if(c-f<=o){for(let r=f;r<=c;r++)Cf(i[2*r],i[2*r+1],e,t)<=l&&s.push(n[r]);continue}const h=f+c>>1,p=i[2*h],d=i[2*h+1];Cf(p,d,e,t)<=l&&s.push(n[h]),(0===u?e-r<=p:t-r<=d)&&(a.push(f),a.push(h-1),a.push(1-u)),(0===u?e+r>=p:t+r>=d)&&(a.push(h+1),a.push(c),a.push(1-u))}return s}}function Ef(e,t,r,n,i,o){if(i-n<=r)return;const a=n+i>>1;xf(e,t,a,n,i,o),Ef(e,t,r,n,a-1,1-o),Ef(e,t,r,a+1,i,1-o)}function xf(e,t,r,n,i,o){for(;i>n;){if(i-n>600){const a=i-n+1,s=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);xf(e,t,r,Math.max(n,Math.floor(r-s*u/a+c)),Math.min(i,Math.floor(r+(a-s)*u/a+c)),o)}const a=t[2*r+o];let s=n,l=i;for(If(e,t,n,r),t[2*i+o]>a&&If(e,t,n,i);s<l;){for(If(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*n+o]===a?If(e,t,n,l):(l++,If(e,t,l,i)),l<=r&&(n=l+1),r<=l&&(i=l-1)}}function If(e,t,r,n){Sf(e,r,n),Sf(t,2*r,2*n),Sf(t,2*r+1,2*n+1)}function Sf(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Cf(e,t,r,n){const i=e-r,o=t-n;return i*i+o*o}var Pf;e.be=void 0,(Pf=e.be||(e.be={})).create="create",Pf.load="load",Pf.fullLoad="fullLoad";let Of=null,Tf=[];const Mf=1e3/60,kf="loadTime",Rf="fullLoadTime",Bf={mark(e){performance.mark(e)},frame(e){const t=e;null!=Of&&Tf.push(t-Of),Of=t},clearMetrics(){Of=null,Tf=[],performance.clearMeasures(kf),performance.clearMeasures(Rf);for(const t in e.be)performance.clearMarks(e.be[t])},getPerformanceMetrics(){performance.measure(kf,e.be.create,e.be.load),performance.measure(Rf,e.be.create,e.be.fullLoad);const t=performance.getEntriesByName(kf)[0].duration,r=performance.getEntriesByName(Rf)[0].duration,n=Tf.length,i=1/(Tf.reduce(((e,t)=>e+t),0)/n/1e3),o=Tf.filter((e=>e>Mf)).reduce(((e,t)=>e+(t-Mf)/Mf),0);return{loadTime:t,fullLoadTime:r,fps:i,percentDroppedFrames:o/(n+o)*100,totalFrames:n}}};e.$=ra,e.A=ts,e.B=function(e){if(null==S){const t=e.navigator?e.navigator.userAgent:null;S=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return S},e.C=class{constructor(e,t){this.target=e,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new bc((()=>this.process())),this.subscription=function(e,t,r,n){return e.addEventListener(t,r,!1),{unsubscribe:()=>{e.removeEventListener(t,r,!1)}}}(this.target,"message",(e=>this.receive(e))),this.globalScope=I(self)?e:window}registerMessageHandler(e,t){this.messageHandlers[e]=t}sendAsync(e,t){return new Promise(((r,n)=>{const i=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[i]={resolve:r,reject:n},t&&t.signal.addEventListener("abort",(()=>{delete this.resolveRejects[i];const t={id:i,type:"<cancel>",origin:location.origin,targetMapId:e.targetMapId,sourceMapId:this.mapId};this.target.postMessage(t)}),{once:!0});const o=[],a=Object.assign(Object.assign({},e),{id:i,sourceMapId:this.mapId,origin:location.origin,data:Ei(e.data,o)});this.target.postMessage(a,{transfer:o})}))}receive(e){const t=e.data,r=t.id;if(!("file://"!==t.origin&&"file://"!==location.origin&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if("<cancel>"===t.type){delete this.tasks[r];const e=this.abortControllers[r];return delete this.abortControllers[r],void(e&&e.abort())}if(I(self)||t.mustQueue)return this.tasks[r]=t,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,t)}}process(){if(0===this.taskQueue.length)return;const e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(e,t)}processTask(e,r){return t(this,void 0,void 0,(function*(){if("<response>"===r.type){const t=this.resolveRejects[e];if(delete this.resolveRejects[e],!t)return;return void(r.error?t.reject(xi(r.error)):t.resolve(xi(r.data)))}if(!this.messageHandlers[r.type])return void this.completeTask(e,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const t=xi(r.data),n=new AbortController;this.abortControllers[e]=n;try{const i=yield this.messageHandlers[r.type](r.sourceMapId,t,n);this.completeTask(e,null,i)}catch(t){this.completeTask(e,t)}}))}completeTask(e,t,r){const n=[];delete this.abortControllers[e];const i={id:e,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Ei(t):null,data:Ei(r,n)};this.target.postMessage(i,{transfer:n})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},e.D=qi,e.E=q,e.F=function(){var e=new ts(16);return ts!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.G=D,e.H=function(e,t,r){var n,i,o,a,s,l,u,c,f,h,p,d,y=r[0],g=r[1],m=r[2];return t===e?(e[12]=t[0]*y+t[4]*g+t[8]*m+t[12],e[13]=t[1]*y+t[5]*g+t[9]*m+t[13],e[14]=t[2]*y+t[6]*g+t[10]*m+t[14],e[15]=t[3]*y+t[7]*g+t[11]*m+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],p=t[10],d=t[11],e[0]=n=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=f,e[9]=h,e[10]=p,e[11]=d,e[12]=n*y+s*g+f*m+t[12],e[13]=i*y+l*g+h*m+t[13],e[14]=o*y+u*g+p*m+t[14],e[15]=a*y+c*g+d*m+t[15]),e},e.I=Tu,e.J=function(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.K=ns,e.L=function(e,t){const r={};for(let n=0;n<t.length;n++){const i=t[n];i in e&&(r[i]=e[i])}return r},e.M=Ec,e.N=Sc,e.O=Cc,e.P=o,e.Q=Bc,e.R=gs,e.S=f,e.T=Ni,e.U=h,e.V=O,e.W=Ta,e.X=ro,e.Y=Tc,e.Z=class extends ao{},e._=t,e.a=B,e.a$=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.a0=kc,e.a1=ie,e.a2=e=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((r=>{t.onloadstart=()=>{r(t)};for(const r of e){const e=window.document.createElement("source");Z(r)||(t.crossOrigin="Anonymous"),e.src=r,t.appendChild(e)}}))},e.a3=function(){return _++},e.a4=Oo,e.a5=lc,e.a6=On,e.a7=Ba,e.a8=Di,e.a9=Fc,e.aA=function(e){if("custom"===e.type)return new Ac(e);switch(e.type){case"background":return new gc(e);case"circle":return new ss(e);case"fill":return new il(e);case"fill-extrusion":return new Pl(e);case"heatmap":return new _s(e);case"hillshade":return new bs(e);case"line":return new zl(e);case"raster":return new vc(e);case"symbol":return new pc(e)}},e.aB=b,e.aC=function(e,t){if(!e)return[{command:"setStyle",args:[t]}];let r=[];try{if(!H(e.version,t.version))return[{command:"setStyle",args:[t]}];H(e.center,t.center)||r.push({command:"setCenter",args:[t.center]}),H(e.zoom,t.zoom)||r.push({command:"setZoom",args:[t.zoom]}),H(e.bearing,t.bearing)||r.push({command:"setBearing",args:[t.bearing]}),H(e.pitch,t.pitch)||r.push({command:"setPitch",args:[t.pitch]}),H(e.sprite,t.sprite)||r.push({command:"setSprite",args:[t.sprite]}),H(e.glyphs,t.glyphs)||r.push({command:"setGlyphs",args:[t.glyphs]}),H(e.transition,t.transition)||r.push({command:"setTransition",args:[t.transition]}),H(e.light,t.light)||r.push({command:"setLight",args:[t.light]}),H(e.terrain,t.terrain)||r.push({command:"setTerrain",args:[t.terrain]}),H(e.sky,t.sky)||r.push({command:"setSky",args:[t.sky]});const n={},i=[];!function(e,t,r,n){let i;for(i in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,i)&&(Object.prototype.hasOwnProperty.call(t,i)||J(i,r,n));for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(e,i)?H(e[i],t[i])||("geojson"===e[i].type&&"geojson"===t[i].type&&ee(e,t,i)?Y(r,{command:"setGeoJSONSourceData",args:[i,t[i].data]}):$(i,t,r,n)):X(i,t,r))}(e.sources,t.sources,i,n);const o=[];e.layers&&e.layers.forEach((e=>{"source"in e&&n[e.source]?r.push({command:"removeLayer",args:[e.id]}):o.push(e)})),r=r.concat(i),function(e,t,r){t=t||[];const n=(e=e||[]).map(re),i=t.map(re),o=e.reduce(ne,{}),a=t.reduce(ne,{}),s=n.slice(),l=Object.create(null);let u,c,f,h,p;for(let e=0,t=0;e<n.length;e++)u=n[e],Object.prototype.hasOwnProperty.call(a,u)?t++:(Y(r,{command:"removeLayer",args:[u]}),s.splice(s.indexOf(u,t),1));for(let e=0,t=0;e<i.length;e++)u=i[i.length-1-e],s[s.length-1-e]!==u&&(Object.prototype.hasOwnProperty.call(o,u)?(Y(r,{command:"removeLayer",args:[u]}),s.splice(s.lastIndexOf(u,s.length-t),1)):t++,h=s[s.length-e],Y(r,{command:"addLayer",args:[a[u],h]}),s.splice(s.length-e,0,u),l[u]=!0);for(let e=0;e<i.length;e++)if(u=i[e],c=o[u],f=a[u],!l[u]&&!H(c,f))if(H(c.source,f.source)&&H(c["source-layer"],f["source-layer"])&&H(c.type,f.type)){for(p in te(c.layout,f.layout,r,u,null,"setLayoutProperty"),te(c.paint,f.paint,r,u,null,"setPaintProperty"),H(c.filter,f.filter)||Y(r,{command:"setFilter",args:[u,f.filter]}),H(c.minzoom,f.minzoom)&&H(c.maxzoom,f.maxzoom)||Y(r,{command:"setLayerZoomRange",args:[u,f.minzoom,f.maxzoom]}),c)Object.prototype.hasOwnProperty.call(c,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?te(c[p],f[p],r,u,p.slice(6),"setPaintProperty"):H(c[p],f[p])||Y(r,{command:"setLayerProperty",args:[u,p,f[p]]}));for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&!Object.prototype.hasOwnProperty.call(c,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?te(c[p],f[p],r,u,p.slice(6),"setPaintProperty"):H(c[p],f[p])||Y(r,{command:"setLayerProperty",args:[u,p,f[p]]}))}else Y(r,{command:"removeLayer",args:[u]}),h=s[s.lastIndexOf(u)+1],Y(r,{command:"addLayer",args:[f,h]})}(o,t.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:"setStyle",args:[t]}]}return r},e.aD=function(e){const t=[],r=e.id;return void 0===r&&t.push({message:`layers.${r}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${r}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},e.aE=function e(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(!e(t[n],r[n]))return!1;return!0}return t===r},e.aF=v,e.aG=A,e.aH=class extends ya{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.aI=ga,e.aJ=class extends ya{constructor(e,t){super(e,t),this.current=va}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.aK=ma,e.aL=class extends ya{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.aM=class extends ya{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.aN=_a,e.aO=function(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*u,e[15]=1,e},e.aP=We,e.aQ=os,e.aR=class extends mo{},e.aS=Yl,e.aT=class extends vo{},e.aU=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.aV=ms,e.aW=Zo,e.aX=class extends So{},e.aY=Jo,e.aZ=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},e.a_=function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],p=e[11],d=e[12],y=e[13],g=e[14],m=e[15],_=t[0],v=t[1],A=t[2],b=t[3],w=t[4],E=t[5],x=t[6],I=t[7],S=t[8],C=t[9],P=t[10],O=t[11],T=t[12],M=t[13],k=t[14],R=t[15];return Math.abs(r-_)<=es*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(n-v)<=es*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(i-A)<=es*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(o-b)<=es*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-w)<=es*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-E)<=es*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(l-x)<=es*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(u-I)<=es*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-S)<=es*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-C)<=es*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(h-P)<=es*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(p-O)<=es*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(d-T)<=es*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(y-M)<=es*Math.max(1,Math.abs(y),Math.abs(M))&&Math.abs(g-k)<=es*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(m-R)<=es*Math.max(1,Math.abs(m),Math.abs(R))},e.aa=function(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,r,n,i)=>{const o=n||i;return t[r]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t},e.ab=function(e,t){const r=[];for(const n in e)n in t||r.push(n);return r},e.ac=y,e.ad=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=a*i+c*n,e[2]=s*i+f*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-a*n,e[6]=f*i-s*n,e[7]=h*i-l*n,e},e.ae=function(e){var t=new ts(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.af=as,e.ag=function(e,t){let r=0,n=0;if("constant"===e.kind)n=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=e,s=i?y(Mt.interpolationFactor(i,t,o,a),0,1):0;"camera"===e.kind?n=Tt.number(e.minSize,e.maxSize,s):r=s}return{uSizeT:r,uSize:n}},e.ai=function(e,{uSize:t,uSizeT:r},{lowerSize:n,upperSize:i}){return"source"===e.kind?n/Xu:"composite"===e.kind?Tt.number(n/Xu,i/Xu,r):t},e.aj=ic,e.ak=function(e,t,r,n){const i=t.y-e.y,a=t.x-e.x,s=n.y-r.y,l=n.x-r.x,u=s*a-l*i;if(0===u)return null;const c=(l*(e.y-r.y)-s*(e.x-r.x))/u;return new o(e.x+c*a,e.y+c*i)},e.al=Gc,e.am=ja,e.an=rs,e.ao=function(e){let t=1/0,r=1/0,n=-1/0,i=-1/0;for(const o of e)t=Math.min(t,o.x),r=Math.min(r,o.y),n=Math.max(n,o.x),i=Math.max(i,o.y);return[t,r,n,i]},e.ap=$l,e.ar=ec,e.as=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],p=t[11],d=t[12],y=t[13],g=t[14],m=t[15],_=r*s-n*a,v=r*l-i*a,A=r*u-o*a,b=n*l-i*s,w=n*u-o*s,E=i*u-o*l,x=c*y-f*d,I=c*g-h*d,S=c*m-p*d,C=f*g-h*y,P=f*m-p*y,O=h*m-p*g,T=_*O-v*P+A*C+b*S-w*I+E*x;return T?(e[0]=(s*O-l*P+u*C)*(T=1/T),e[1]=(i*P-n*O-o*C)*T,e[2]=(y*E-g*w+m*b)*T,e[3]=(h*w-f*E-p*b)*T,e[4]=(l*S-a*O-u*I)*T,e[5]=(r*O-i*S+o*I)*T,e[6]=(g*A-d*E-m*v)*T,e[7]=(c*E-h*A+p*v)*T,e[8]=(a*P-s*S+u*x)*T,e[9]=(n*S-r*P-o*x)*T,e[10]=(d*w-y*A+m*_)*T,e[11]=(f*A-c*w-p*_)*T,e[12]=(s*I-a*C-l*x)*T,e[13]=(r*C-n*I+i*x)*T,e[14]=(y*v-d*b-g*_)*T,e[15]=(c*b-f*v+h*_)*T,e):null},e.at=gf,e.au=qu,e.av=wf,e.aw=function(){const e={},t=V.$version;for(const r in V.$root){const n=V.$root[r];if(n.required){let i=null;i="version"===r?t:"array"===n.type?[]:{},null!=i&&(e[r]=i)}}return e},e.ax=Ii,e.ay=F,e.az=function(e){e=e.slice();const t=Object.create(null);for(let r=0;r<e.length;r++)t[e[r].id]=e[r];for(let r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=K(e[r],t[e[r].ref]));return e},e.b=C,e.b0=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},e.b1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.b2=g,e.b3=Rc,e.b4=Pc,e.b5=function(e,t,r,n,i){var o,a=1/Math.tan(t/2);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+n)*(o=1/(n-i)),e[14]=2*i*n*o):(e[10]=-1,e[14]=-2*n),e},e.b6=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=a*i+c*n,e[6]=s*i+f*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-a*n,e[10]=f*i-s*n,e[11]=h*i-l*n,e},e.b7=p,e.b8=d,e.b9=function(e){return e*Math.PI/180},e.bA=bn,e.bB=Li,e.ba=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.bb=class extends oo{},e.bc=wc,e.bd=Bf,e.bf=j,e.bg=function(e,t){B.REGISTERED_PROTOCOLS[e]=t},e.bh=function(e){delete B.REGISTERED_PROTOCOLS[e]},e.bi=function(e,t){const r={};for(let n=0;n<e.length;n++){const i=t&&t[e[n].id]||Fn(e[n]);t&&(t[e[n].id]=i);let o=r[i];o||(o=r[i]=[]),o.push(e[n])}const n=[];for(const e in r)n.push(r[e]);return n},e.bj=bi,e.bk=jc,e.bl=Nc,e.bm=Mu,e.bn=function(t){t.bucket.createArrays(),t.bucket.tilePixelRatio=Ta/(512*t.bucket.overscaling),t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;const r=t.bucket.layers[0],n=r.layout,i=r._unevaluatedLayout._values,o={layoutIconSize:i["icon-size"].possiblyEvaluate(new Di(t.bucket.zoom+1),t.canonical),layoutTextSize:i["text-size"].possiblyEvaluate(new Di(t.bucket.zoom+1),t.canonical),textMaxSize:i["text-size"].possiblyEvaluate(new Di(18))};if("composite"===t.bucket.textSizeData.kind){const{minZoom:e,maxZoom:r}=t.bucket.textSizeData;o.compositeTextSizes=[i["text-size"].possiblyEvaluate(new Di(e),t.canonical),i["text-size"].possiblyEvaluate(new Di(r),t.canonical)]}if("composite"===t.bucket.iconSizeData.kind){const{minZoom:e,maxZoom:r}=t.bucket.iconSizeData;o.compositeIconSizes=[i["icon-size"].possiblyEvaluate(new Di(e),t.canonical),i["icon-size"].possiblyEvaluate(new Di(r),t.canonical)]}const a=n.get("text-line-height")*$l,s="viewport"!==n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),l=n.get("text-keep-upright"),u=n.get("text-size");for(const i of t.bucket.features){const c=n.get("text-font").evaluate(i,{},t.canonical).join(","),f=u.evaluate(i,{},t.canonical),h=o.layoutTextSize.evaluate(i,{},t.canonical),p=o.layoutIconSize.evaluate(i,{},t.canonical),d={horizontal:{},vertical:void 0},y=i.text;let g,m=[0,0];if(y){const o=y.toString(),u=n.get("text-letter-spacing").evaluate(i,{},t.canonical)*$l,p=Pi(o)?u:0,g=n.get("text-anchor").evaluate(i,{},t.canonical),_=yf(r,i,t.canonical);if(!_){const e=n.get("text-radial-offset").evaluate(i,{},t.canonical);m=e?df(g,[e*$l,pf]):n.get("text-offset").evaluate(i,{},t.canonical).map((e=>e*$l))}let v=s?"center":n.get("text-justify").evaluate(i,{},t.canonical);const A=n.get("symbol-placement"),b="point"===A?n.get("text-max-width").evaluate(i,{},t.canonical)*$l:0,w=()=>{t.bucket.allowVerticalPlacement&&Ci(o)&&(d.vertical=Du(y,t.glyphMap,t.glyphPositions,t.imagePositions,c,b,a,g,"left",p,m,e.ah.vertical,!0,A,h,f))};if(!s&&_){const r=new Set;if("auto"===v)for(let e=0;e<_.values.length;e+=2)r.add(gf(_.values[e]));else r.add(v);let n=!1;for(const i of r)if(!d.horizontal[i])if(n)d.horizontal[i]=d.horizontal[0];else{const r=Du(y,t.glyphMap,t.glyphPositions,t.imagePositions,c,b,a,"center",i,p,m,e.ah.horizontal,!1,A,h,f);r&&(d.horizontal[i]=r,n=1===r.positionedLines.length)}w()}else{"auto"===v&&(v=gf(g));const r=Du(y,t.glyphMap,t.glyphPositions,t.imagePositions,c,b,a,g,v,p,m,e.ah.horizontal,!1,A,h,f);r&&(d.horizontal[v]=r),w(),Ci(o)&&s&&l&&(d.vertical=Du(y,t.glyphMap,t.glyphPositions,t.imagePositions,c,b,a,g,v,p,m,e.ah.vertical,!1,A,h,f))}}let _=!1;if(i.icon&&i.icon.name){const e=t.imageMap[i.icon.name];e&&(g=Wu(t.imagePositions[i.icon.name],n.get("icon-offset").evaluate(i,{},t.canonical),n.get("icon-anchor").evaluate(i,{},t.canonical)),_=!!e.sdf,void 0===t.bucket.sdfIcons?t.bucket.sdfIcons=_:t.bucket.sdfIcons!==_&&E("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.bucket.pixelRatio||0!==n.get("icon-rotate").constantOr(1))&&(t.bucket.iconsNeedLinear=!0))}const v=vf(d.horizontal)||d.vertical;t.bucket.iconsInText=!!v&&v.iconsInText,(v||g)&&mf(t.bucket,i,d,g,t.imageMap,o,h,p,m,_,t.canonical)}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()},e.bo=Fl,e.bp=el,e.bq=El,e.br=ll,e.bs=wu,e.bt=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}},e.bu=function(e,r,n,i,o){return t(this,void 0,void 0,(function*(){if(h())try{return yield O(e,r,n,i,o)}catch(e){}return function(e,t,r,n,i){const o=e.width,a=e.height;T&&M||(T=new OffscreenCanvas(o,a),M=T.getContext("2d",{willReadFrequently:!0})),T.width=o,T.height=a,M.drawImage(e,0,0,o,a);const s=M.getImageData(t,r,n,i);return M.clearRect(0,0,o,a),s.data}(e,r,n,i,o)}))},e.bv=Dc,e.bw=r,e.bx=n,e.by=eu,e.bz=function(e){return e.message===k},e.c=R,e.d=e=>t(void 0,void 0,void 0,(function*(){if(0===e.byteLength)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(e)],{type:"image/png"});try{return createImageBitmap(t)}catch(e){throw new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),e.e=m,e.f=e=>new Promise(((t,r)=>{const n=new Image;n.onload=()=>{t(n),URL.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame((()=>{n.src=P}))},n.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?URL.createObjectURL(i):P})),e.g=L,e.h=(e,t)=>N(m(e,{type:"json"}),t),e.i=I,e.j=z,e.k=G,e.l=(e,t)=>N(m(e,{type:"arrayBuffer"}),t),e.m=N,e.n=function(e){return new wu(e).readFields(xu,[])},e.o=ys,e.p=Pu,e.q=Yi,e.r=yi,e.s=Z,e.t=_i,e.u=Si,e.v=V,e.w=E,e.x=di,e.y=function([e,t,r]){return t+=90,t*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(t)*Math.sin(r),y:e*Math.sin(t)*Math.sin(r),z:e*Math.cos(r)}},e.z=Tt})),r("worker",["./shared"],(function(e){class t{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const r of t){this._layerConfigs[r.id]=r;const t=this._layers[r.id]=e.aA(r);t._featureFilter=e.a6(t.filter),this.keyCache[r.id]&&delete this.keyCache[r.id]}for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const n=e.bi(Object.values(this._layerConfigs),this.keyCache);for(const e of n){const t=e.map((e=>this._layers[e.id])),r=t[0];if("none"===r.visibility)continue;const n=r.source||"";let i=this.familiesBySource[n];i||(i=this.familiesBySource[n]={});const o=r.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(t)}}}class r{constructor(t){const r={},n=[];for(const e in t){const i=t[e],o=r[e]={};for(const e in i){const t=i[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const r={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};n.push(r),o[e]={rect:r,metrics:t.metrics}}}const{w:i,h:o}=e.p(n),a=new e.o({width:i||1,height:o||1});for(const n in t){const i=t[n];for(const t in i){const o=i[+t];if(!o||0===o.bitmap.width||0===o.bitmap.height)continue;const s=r[n][t].rect;e.o.copy(o.bitmap,a,{x:0,y:0},{x:s.x+1,y:s.y+1},o.bitmap)}}this.image=a,this.positions=r}}e.bj("GlyphAtlas",r);class n{constructor(t){this.tileID=new e.Q(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.inFlightDependencies=[]}parse(t,n,o,a){return e._(this,void 0,void 0,(function*(){this.status="parsing",this.data=t,this.collisionBoxArray=new e.a4;const s=new e.bk(Object.keys(t.layers).sort()),l=new e.bl(this.tileID,this.promoteId);l.bucketLayerIDs=[];const u={},c={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:o},f=n.familiesBySource[this.source];for(const r in f){const n=t.layers[r];if(!n)continue;1===n.version&&e.w(`Vector tile source "${this.source}" layer "${r}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const a=s.encode(r),h=[];for(let e=0;e<n.length;e++){const t=n.feature(e),i=l.getId(t,r);h.push({feature:t,id:i,index:e,sourceLayerIndex:a})}for(const t of f[r]){const r=t[0];r.source!==this.source&&e.w(`layer.source = ${r.source} does not equal this.source = ${this.source}`),r.minzoom&&this.zoom<Math.floor(r.minzoom)||r.maxzoom&&this.zoom>=r.maxzoom||"none"!==r.visibility&&(i(t,this.zoom,o),(u[r.id]=r.createBucket({index:l.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:a,sourceID:this.source})).populate(h,c,this.tileID.canonical),l.bucketLayerIDs.push(t.map((e=>e.id))))}}const h=e.aF(c.glyphDependencies,(e=>Object.keys(e).map(Number)));this.inFlightDependencies.forEach((e=>null==e?void 0:e.abort())),this.inFlightDependencies=[];let p=Promise.resolve({});if(Object.keys(h).length){const e=new AbortController;this.inFlightDependencies.push(e),p=a.sendAsync({type:"GG",data:{stacks:h,source:this.source,tileID:this.tileID,type:"glyphs"}},e)}const d=Object.keys(c.iconDependencies);let y=Promise.resolve({});if(d.length){const e=new AbortController;this.inFlightDependencies.push(e),y=a.sendAsync({type:"GI",data:{icons:d,source:this.source,tileID:this.tileID,type:"icons"}},e)}const g=Object.keys(c.patternDependencies);let m=Promise.resolve({});if(g.length){const e=new AbortController;this.inFlightDependencies.push(e),m=a.sendAsync({type:"GI",data:{icons:g,source:this.source,tileID:this.tileID,type:"patterns"}},e)}const[_,v,A]=yield Promise.all([p,y,m]),b=new r(_),w=new e.bm(v,A);for(const t in u){const r=u[t];r instanceof e.a5?(i(r.layers,this.zoom,o),e.bn({bucket:r,glyphMap:_,glyphPositions:b.positions,imageMap:v,imagePositions:w.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):r.hasPattern&&(r instanceof e.bo||r instanceof e.bp||r instanceof e.bq)&&(i(r.layers,this.zoom,o),r.addFeatures(c,this.tileID.canonical,w.patternPositions))}return this.status="done",{buckets:Object.values(u).filter((e=>!e.isEmpty())),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:b.image,imageAtlas:w,glyphMap:this.returnDependencies?_:null,iconMap:this.returnDependencies?v:null,glyphPositions:this.returnDependencies?b.positions:null}}))}}function i(t,r,n){const i=new e.a8(r);for(const e of t)e.recalculate(i,n)}class o{constructor(e,t,r){this.actor=e,this.layerIndex=t,this.availableImages=r,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(t,r){return e._(this,void 0,void 0,(function*(){const n=yield e.l(t.request,r);try{return{vectorTile:new e.br.VectorTile(new e.bs(n.data)),rawData:n.data,cacheControl:n.cacheControl,expires:n.expires}}catch(e){const r=new Uint8Array(n.data);let i=`Unable to parse the tile at ${t.request.url}, `;throw i+=31===r[0]&&139===r[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${e.messge}`,new Error(i)}}))}loadTile(t){return e._(this,void 0,void 0,(function*(){const r=t.uid,i=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.bt(t.request),o=new n(t);this.loading[r]=o;const a=new AbortController;o.abort=a;try{const n=yield this.loadVectorTile(t,a);if(delete this.loading[r],!n)return null;const s=n.rawData,l={};n.expires&&(l.expires=n.expires),n.cacheControl&&(l.cacheControl=n.cacheControl);const u={};if(i){const e=i.finish();e&&(u.resourceTiming=JSON.parse(JSON.stringify(e)))}o.vectorTile=n.vectorTile;const c=o.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[r]=o,this.fetching[r]={rawTileData:s,cacheControl:l,resourceTiming:u};try{const t=yield c;return e.e({rawTileData:s.slice(0)},t,l,u)}finally{delete this.fetching[r]}}catch(e){throw delete this.loading[r],o.status="done",this.loaded[r]=o,e}}))}reloadTile(t){return e._(this,void 0,void 0,(function*(){const r=t.uid;if(!this.loaded||!this.loaded[r])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const n=this.loaded[r];if(n.showCollisionBoxes=t.showCollisionBoxes,"parsing"===n.status){const t=yield n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor);let i;if(this.fetching[r]){const{rawTileData:n,cacheControl:o,resourceTiming:a}=this.fetching[r];delete this.fetching[r],i=e.e({rawTileData:n.slice(0)},t,o,a)}else i=t;return i}if("done"===n.status&&n.vectorTile)return n.parse(n.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(t){return e._(this,void 0,void 0,(function*(){const e=this.loading,r=t.uid;e&&e[r]&&e[r].abort&&(e[r].abort.abort(),delete e[r])}))}removeTile(t){return e._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[t.uid]&&delete this.loaded[t.uid]}))}}class a{constructor(){this.loaded={}}loadTile(t){return e._(this,void 0,void 0,(function*(){const{uid:r,encoding:n,rawImageData:i,redFactor:o,greenFactor:a,blueFactor:s,baseShift:l}=t,u=i.width+2,c=i.height+2,f=e.b(i)?new e.R({width:u,height:c},yield e.bu(i,-1,-1,u,c)):i,h=new e.bv(r,f,n,o,a,s,l);return this.loaded=this.loaded||{},this.loaded[r]=h,h}))}removeTile(e){const t=this.loaded,r=e.uid;t&&t[r]&&delete t[r]}}function s(e,t){if(0!==e.length){l(e[0],t);for(var r=1;r<e.length;r++)l(e[r],!t)}}function l(e,t){for(var r=0,n=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),l=r+s;n+=Math.abs(r)>=Math.abs(s)?r-l+s:s-l+r,r=l}r+n>=0!=!!t&&e.reverse()}var u=e.bw((function e(t,r){var n,i=t&&t.type;if("FeatureCollection"===i)for(n=0;n<t.features.length;n++)e(t.features[n],r);else if("GeometryCollection"===i)for(n=0;n<t.geometries.length;n++)e(t.geometries[n],r);else if("Feature"===i)e(t.geometry,r);else if("Polygon"===i)s(t.coordinates,r);else if("MultiPolygon"===i)for(n=0;n<t.coordinates.length;n++)s(t.coordinates[n],r);return t}));const c=e.br.VectorTileFeature.prototype.toGeoJSON;var f={exports:{}},h=e.bx,p=e.br.VectorTileFeature,d=y;function y(e,t){this.options=t||{},this.features=e,this.length=e.length}function g(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}y.prototype.feature=function(e){return new g(this.features[e],this.options.extent)},g.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],n=[],i=0;i<r.length;i++)n.push(new h(r[i][0],r[i][1]));this.geometry.push(n)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,n=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),r=Math.max(r,l.x),n=Math.min(n,l.y),i=Math.max(i,l.y)}return[t,n,r,i]},g.prototype.toGeoJSON=p.prototype.toGeoJSON;var m=e.by,_=d;function v(e){var t=new m;return function(e,t){for(var r in e.layers)t.writeMessage(3,A,e.layers[r])}(e,t),t.finish()}function A(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)n.feature=e.feature(r),t.writeMessage(2,b,n);var i=n.keys;for(r=0;r<i.length;r++)t.writeStringField(3,i[r]);var o=n.values;for(r=0;r<o.length;r++)t.writeMessage(4,S,o[r])}function b(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,w,e),t.writeVarintField(3,r.type),t.writeMessage(4,I,r)}function w(e,t){var r=e.feature,n=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in r.properties){var l=r.properties[s],u=o[s];if(null!==l){void 0===u&&(n.push(s),o[s]=u=n.length-1),t.writeVarint(u);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var f=c+":"+l,h=a[f];void 0===h&&(i.push(l),a[f]=h=i.length-1),t.writeVarint(h)}}}function E(e,t){return(t<<3)+(7&e)}function x(e){return e<<1^e>>31}function I(e,t){for(var r=e.loadGeometry(),n=e.type,i=0,o=0,a=r.length,s=0;s<a;s++){var l=r[s],u=1;1===n&&(u=l.length),t.writeVarint(E(1,u));for(var c=3===n?l.length-1:l.length,f=0;f<c;f++){1===f&&1!==n&&t.writeVarint(E(2,c-1));var h=l[f].x-i,p=l[f].y-o;t.writeVarint(x(h)),t.writeVarint(x(p)),i+=h,o+=p}3===n&&t.writeVarint(E(7,1))}}function S(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}f.exports=v,f.exports.fromVectorTileJs=v,f.exports.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var n in e)r[n]=new _(e[n].features,t),r[n].name=n,r[n].version=t.version,r[n].extent=t.extent;return v({layers:r})},f.exports.GeoJSONWrapper=_;var C=e.bw(f.exports);const P={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},O=Math.fround||(T=new Float32Array(1),e=>(T[0]=+e,T[0]));var T;const M=3,k=5,R=6;class B{constructor(e){this.options=Object.assign(Object.create(P),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:r,maxZoom:n}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const o=[];for(let t=0;t<e.length;t++){const r=e[t];if(!r.geometry)continue;const[n,i]=r.geometry.coordinates,a=O(j(n)),s=O(F(i));o.push(a,s,1/0,t,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[n+1]=this._createTree(o);t&&console.timeEnd(i);for(let e=n;e>=r;e--){const r=+Date.now();a=this.trees[e]=this._createTree(this._cluster(a,e)),t&&console.log("z%d: %d clusters in %dms",e,a.numItems,+Date.now()-r)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const n=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){const e=this.getClusters([r,n,180,o],t),a=this.getClusters([-180,n,i,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(j(r),F(o),j(i),F(n)),l=a.data,u=[];for(const e of s){const t=this.stride*e;u.push(l[t+k]>1?L(l,t,this.clusterProps):this.points[l[t+M]])}return u}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),n="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(n);const o=i.data;if(t*this.stride>=o.length)throw new Error(n);const a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=i.within(o[t*this.stride],o[t*this.stride+1],a),l=[];for(const t of s){const r=t*this.stride;o[r+4]===e&&l.push(o[r+k]>1?L(o,r,this.clusterProps):this.points[o[r+M]])}if(0===l.length)throw new Error(n);return l}getLeaves(e,t,r){const n=[];return this._appendLeaves(n,e,t=t||10,r=r||0,0),n}getTile(e,t,r){const n=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(r-s)/i,u=(r+1+s)/i,c={features:[]};return this._addTileFeatures(n.range((t-s)/i,l,(t+1+s)/i,u),n.data,t,r,i,c),0===t&&this._addTileFeatures(n.range(1-s/i,l,1,u),n.data,i,r,i,c),t===i-1&&this._addTileFeatures(n.range(0,l,s/i,u),n.data,-1,r,i,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,n,i){const o=this.getChildren(t);for(const t of o){const o=t.properties;if(o&&o.cluster?i+o.point_count<=n?i+=o.point_count:i=this._appendLeaves(e,o.cluster_id,r,n,i):i<n?i++:e.push(t),e.length===r)break}return i}_createTree(t){const r=new e.av(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)r.add(t[e],t[e+1]);return r.finish(),r.data=t,r}_addTileFeatures(e,t,r,n,i,o){for(const a of e){const e=a*this.stride,s=t[e+k]>1;let l,u,c;if(s)l=D(t,e,this.clusterProps),u=t[e],c=t[e+1];else{const r=this.points[t[e+M]];l=r.properties;const[n,i]=r.geometry.coordinates;u=j(n),c=F(i)}const f={type:1,geometry:[[Math.round(this.options.extent*(u*i-r)),Math.round(this.options.extent*(c*i-n))]],tags:l};let h;h=s||this.options.generateId?t[e+M]:this.points[t[e+M]].id,void 0!==h&&(f.id=h),o.features.push(f)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:r,extent:n,reduce:i,minPoints:o}=this.options,a=r/(n*Math.pow(2,t)),s=e.data,l=[],u=this.stride;for(let r=0;r<s.length;r+=u){if(s[r+2]<=t)continue;s[r+2]=t;const n=s[r],c=s[r+1],f=e.within(s[r],s[r+1],a),h=s[r+k];let p=h;for(const e of f){const r=e*u;s[r+2]>t&&(p+=s[r+k])}if(p>h&&p>=o){let e,o=n*h,a=c*h,d=-1;const y=(r/u<<5)+(t+1)+this.points.length;for(const n of f){const l=n*u;if(s[l+2]<=t)continue;s[l+2]=t;const c=s[l+k];o+=s[l]*c,a+=s[l+1]*c,s[l+4]=y,i&&(e||(e=this._map(s,r,!0),d=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(s,l)))}s[r+4]=y,l.push(o/p,a/p,1/0,y,-1,p),i&&l.push(d)}else{for(let e=0;e<u;e++)l.push(s[r+e]);if(p>1)for(const e of f){const r=e*u;if(!(s[r+2]<=t)){s[r+2]=t;for(let e=0;e<u;e++)l.push(s[r+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,r){if(e[t+k]>1){const n=this.clusterProps[e[t+R]];return r?Object.assign({},n):n}const n=this.points[e[t+M]].properties,i=this.options.map(n);return r&&i===n?Object.assign({},i):i}}function L(e,t,r){return{type:"Feature",id:e[t+M],properties:D(e,t,r),geometry:{type:"Point",coordinates:[(n=e[t],360*(n-.5)),N(e[t+1])]}};var n}function D(e,t,r){const n=e[t+k],i=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?Math.round(n/100)/10+"k":n,o=e[t+R],a=-1===o?{}:Object.assign({},r[o]);return Object.assign(a,{cluster:!0,cluster_id:e[t+M],point_count:n,point_count_abbreviated:i})}function j(e){return e/360+.5}function F(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function N(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function Z(e,t,r,n){for(var i,o=n,a=r-t>>1,s=r-t,l=e[t],u=e[t+1],c=e[r],f=e[r+1],h=t+3;h<r;h+=3){var p=U(e[h],e[h+1],l,u,c,f);if(p>o)i=h,o=p;else if(p===o){var d=Math.abs(h-a);d<s&&(i=h,s=d)}}o>n&&(i-t>3&&Z(e,t,i,n),e[i+2]=o,r-i>3&&Z(e,i,r,n))}function U(e,t,r,n,i,o){var a=i-r,s=o-n;if(0!==a||0!==s){var l=((e-r)*a+(t-n)*s)/(a*a+s*s);l>1?(r=i,n=o):l>0&&(r+=a*l,n+=s*l)}return(a=e-r)*a+(s=t-n)*s}function Q(e,t,r,n){var i={id:void 0===e?null:e,type:t,geometry:r,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,r=e.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)G(e,t);else if("Polygon"===r||"MultiLineString"===r)for(var n=0;n<t.length;n++)G(e,t[n]);else if("MultiPolygon"===r)for(n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++)G(e,t[n][i])}(i),i}function G(e,t){for(var r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function z(e,t,r,n){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2),s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=n||0),"Point"===o)q(i,s);else if("MultiPoint"===o)for(var u=0;u<i.length;u++)q(i[u],s);else if("LineString"===o)V(i,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(u=0;u<i.length;u++)V(i[u],s=[],a,!1),e.push(Q(l,"LineString",s,t.properties));return}W(i,s,a,!1)}else if("Polygon"===o)W(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<t.geometry.geometries.length;u++)z(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},r,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];W(i[u],c,a,!0),s.push(c)}}e.push(Q(l,o,s,t.properties))}}function q(e,t){t.push(K(e[0])),t.push(H(e[1])),t.push(0)}function V(e,t,r,n){for(var i,o,a=0,s=0;s<e.length;s++){var l=K(e[s][0]),u=H(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(a+=n?(i*u-l*o)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-o,2))),i=l,o=u}var c=t.length-3;t[2]=1,Z(t,0,c,r),t[c+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function W(e,t,r,n){for(var i=0;i<e.length;i++){var o=[];V(e[i],o,r,n),t.push(o)}}function K(e){return e/360+.5}function H(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Y(e,t,r,n,i,o,a,s){if(n/=t,o>=(r/=t)&&a<n)return e;if(a<r||o>=n)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],f=c.geometry,h=c.type,p=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(p>=r&&d<n)l.push(c);else if(!(d<r||p>=n)){var y=[];if("Point"===h||"MultiPoint"===h)X(f,y,r,n,i);else if("LineString"===h)J(f,y,r,n,i,!1,s.lineMetrics);else if("MultiLineString"===h)ee(f,y,r,n,i,!1);else if("Polygon"===h)ee(f,y,r,n,i,!0);else if("MultiPolygon"===h)for(var g=0;g<f.length;g++){var m=[];ee(f[g],m,r,n,i,!0),m.length&&y.push(m)}if(y.length){if(s.lineMetrics&&"LineString"===h){for(g=0;g<y.length;g++)l.push(Q(c.id,h,y[g],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===y.length?(h="LineString",y=y[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===y.length?"Point":"MultiPoint"),l.push(Q(c.id,h,y,c.tags))}}}return l.length?l:null}function X(e,t,r,n,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=r&&a<=n&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function J(e,t,r,n,i,o,a){for(var s,l,u=$(e),c=0===i?re:ne,f=e.start,h=0;h<e.length-3;h+=3){var p=e[h],d=e[h+1],y=e[h+2],g=e[h+3],m=e[h+4],_=0===i?p:d,v=0===i?g:m,A=!1;a&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(d-m,2))),_<r?v>r&&(l=c(u,p,d,g,m,r),a&&(u.start=f+s*l)):_>n?v<n&&(l=c(u,p,d,g,m,n),a&&(u.start=f+s*l)):te(u,p,d,y),v<r&&_>=r&&(l=c(u,p,d,g,m,r),A=!0),v>n&&_<=n&&(l=c(u,p,d,g,m,n),A=!0),!o&&A&&(a&&(u.end=f+s*l),t.push(u),u=$(e)),a&&(f+=s)}var b=e.length-3;p=e[b],d=e[b+1],y=e[b+2],(_=0===i?p:d)>=r&&_<=n&&te(u,p,d,y),b=u.length-3,o&&b>=3&&(u[b]!==u[0]||u[b+1]!==u[1])&&te(u,u[0],u[1],u[2]),u.length&&t.push(u)}function $(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ee(e,t,r,n,i,o){for(var a=0;a<e.length;a++)J(e[a],t,r,n,i,o,!1)}function te(e,t,r,n){e.push(t),e.push(r),e.push(n)}function re(e,t,r,n,i,o){var a=(o-t)/(n-t);return e.push(o),e.push(r+(i-r)*a),e.push(1),a}function ne(e,t,r,n,i,o){var a=(o-r)/(i-r);return e.push(t+(n-t)*a),e.push(o),e.push(1),a}function ie(e,t){for(var r=[],n=0;n<e.length;n++){var i,o=e[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=oe(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(oe(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var l=[],u=0;u<o.geometry[s].length;u++)l.push(oe(o.geometry[s][u],t));i.push(l)}r.push(Q(o.id,a,i,o.tags))}return r}function oe(e,t){var r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(var n=0;n<e.length;n+=3)r.push(e[n]+t,e[n+1],e[n+2]);return r}function ae(e,t){if(e.transformed)return e;var r,n,i,o=1<<e.z,a=e.x,s=e.y;for(r=0;r<e.features.length;r++){var l=e.features[r],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(n=0;n<u.length;n+=2)l.geometry.push(se(u[n],u[n+1],t,o,a,s));else for(n=0;n<u.length;n++){var f=[];for(i=0;i<u[n].length;i+=2)f.push(se(u[n][i],u[n][i+1],t,o,a,s));l.geometry.push(f)}}return e.transformed=!0,e}function se(e,t,r,n,i,o){return[Math.round(r*(e*n-i)),Math.round(r*(t*n-o))]}function le(e,t,r,n,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:r,y:n,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,ue(a,e[s],o,i);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,f=e[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),f>a.maxY&&(a.maxY=f)}return a}function ue(e,t,r,n){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)ce(a,i,e,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)ce(a,i[s],e,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)ce(a,u[s],e,r,!0,0===s)}if(a.length){var c=t.tags||null;if("LineString"===o&&n.lineMetrics){for(var f in c={},t.tags)c[f]=t.tags[f];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==t.id&&(h.id=t.id),e.features.push(h)}}function ce(e,t,r,n,i,o){var a=n*n;if(n>0&&t.size<(i?a:n))r.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===n||t[l+2]>a)&&(r.numSimplified++,s.push(t[l]),s.push(t[l+1])),r.numPoints++;i&&function(e,t){for(var r=0,n=0,i=e.length,o=i-2;n<i;o=n,n+=2)r+=(e[n]-e[o])*(e[n+1]+e[o+1]);if(r>0===t)for(n=0,i=e.length;n<i/2;n+=2){var a=e[n],s=e[n+1];e[n]=e[i-2-n],e[n+1]=e[i-1-n],e[i-2-n]=a,e[i-1-n]=s}}(s,o),e.push(s)}}function fe(e,t){var r=(t=this.options=function(e,t){for(var r in t)e[r]=t[r];return e}(Object.create(this.options),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(e,t){var r=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)z(r,e.features[n],t,n);else z(r,"Feature"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),n=function(e,t){var r=t.buffer/t.extent,n=e,i=Y(e,1,-1-r,r,0,-1,2,t),o=Y(e,1,1-r,2+r,0,-1,2,t);return(i||o)&&(n=Y(e,1,-r,1+r,0,-1,2,t)||[],i&&(n=ie(i,1).concat(n)),o&&(n=n.concat(ie(o,-1)))),n}(n,t),n.length&&this.splitTile(n,0,0,0),r&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function he(e,t,r){return 32*((1<<e)*r+t)+e}function pe(e,t){return t?e.properties[t]:e.id}function de(e,t){if(null==e)return!0;if("Feature"===e.type)return null!=pe(e,t);if("FeatureCollection"===e.type){const r=new Set;for(const n of e.features){const e=pe(n,t);if(null==e)return!1;if(r.has(e))return!1;r.add(e)}return!0}return!1}function ye(e,t){const r=new Map;if(null==e);else if("Feature"===e.type)r.set(pe(e,t),e);else for(const n of e.features)r.set(pe(n,t),n);return r}fe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},fe.prototype.splitTile=function(e,t,r,n,i,o,a){for(var s=[e,t,r,n],l=this.options,u=l.debug;s.length;){n=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,f=he(t,r,n),h=this.tiles[f];if(!h&&(u>1&&console.time("creation"),h=this.tiles[f]=le(e,t,r,n,l),this.tileCoords.push({z:t,x:r,y:n}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,n,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var p="z"+t;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(h.source=e,i){if(t===l.maxZoom||t===i)continue;var d=1<<i-t;if(r!==Math.floor(o/d)||n!==Math.floor(a/d))continue}else if(t===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==e.length){u>1&&console.time("clipping");var y,g,m,_,v,A,b=.5*l.buffer/l.extent,w=.5-b,E=.5+b,x=1+b;y=g=m=_=null,v=Y(e,c,r-b,r+E,0,h.minX,h.maxX,l),A=Y(e,c,r+w,r+x,0,h.minX,h.maxX,l),e=null,v&&(y=Y(v,c,n-b,n+E,1,h.minY,h.maxY,l),g=Y(v,c,n+w,n+x,1,h.minY,h.maxY,l),v=null),A&&(m=Y(A,c,n-b,n+E,1,h.minY,h.maxY,l),_=Y(A,c,n+w,n+x,1,h.minY,h.maxY,l),A=null),u>1&&console.timeEnd("clipping"),s.push(y||[],t+1,2*r,2*n),s.push(g||[],t+1,2*r,2*n+1),s.push(m||[],t+1,2*r+1,2*n),s.push(_||[],t+1,2*r+1,2*n+1)}}},fe.prototype.getTile=function(e,t,r){var n=this.options,i=n.extent,o=n.debug;if(e<0||e>24)return null;var a=1<<e,s=he(e,t=(t%a+a)%a,r);if(this.tiles[s])return ae(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,r);for(var l,u=e,c=t,f=r;!l&&u>0;)u--,c=Math.floor(c/2),f=Math.floor(f/2),l=this.tiles[he(u,c,f)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,f),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,f,e,t,r),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ae(this.tiles[s],i):null):null};class ge extends o{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(t,r){return e._(this,void 0,void 0,(function*(){const r=t.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const n=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!n)return null;const i=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.W,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.W,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const r of this._feature.geometry)t.push([new e.P(r[0],r[1])]);return t}{const t=[];for(const r of this._feature.geometry){const n=[];for(const t of r)n.push(new e.P(t[0],t[1]));t.push(n)}return t}}toGeoJSON(e,t,r){return c.call(this,e,t,r)}}(this._features[t])}}(n.features);let o=C(i);return 0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),{vectorTile:i,rawData:o.buffer}}))}loadData(t){return e._(this,void 0,void 0,(function*(){var r;null===(r=this._pendingRequest)||void 0===r||r.abort();const n=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.bt(t.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(t,this._pendingRequest),this._geoJSONIndex=t.cluster?new B(function({superclusterOptions:t,clusterProperties:r}){if(!r||!t)return t;const n={},i={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(r);for(const t of s){const[o,a]=r[t],s=e.bA(a),l=e.bA("string"==typeof o?[o,["accumulated"],["get",t]]:o);n[t]=s.value,i[t]=l.value}return t.map=e=>{a.properties=e;const t={};for(const e of s)t[e]=n[e].evaluate(o,a);return t},t.reduce=(e,t)=>{a.properties=t;for(const t of s)o.accumulated=e[t],e[t]=i[t].evaluate(o,a)},t}(t)).load((yield this._pendingData).features):new fe(yield this._pendingData,t.geojsonVtOptions),this.loaded={};const r={};if(n){const e=n.finish();e&&(r.resourceTiming={},r.resourceTiming[t.source]=JSON.parse(JSON.stringify(e)))}return r}catch(t){if(delete this._pendingRequest,e.bz(t))return{abandoned:!0};throw t}}))}getData(){return e._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(e){const t=this.loaded;return t&&t[e.uid]?super.reloadTile(e):this.loadTile(e)}loadAndProcessGeoJSON(t,r){return e._(this,void 0,void 0,(function*(){let n=yield this.loadGeoJSON(t,r);if(delete this._pendingRequest,"object"!=typeof n)throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`);if(u(n,!0),t.filter){const r=e.bA(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const i=n.features.filter((e=>r.value.evaluate({zoom:0},e)));n={type:"FeatureCollection",features:i}}return n}))}loadGeoJSON(t,r){return e._(this,void 0,void 0,(function*(){const{promoteId:n}=t;if(t.request){const i=yield e.h(t.request,r);return this._dataUpdateable=de(i.data,n)?ye(i.data,n):void 0,i.data}if("string"==typeof t.data)try{const e=JSON.parse(t.data);return this._dataUpdateable=de(e,n)?ye(e,n):void 0,e}catch(e){throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`)}if(!t.dataDiff)throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${t.source}`);return function(e,t,r){var n,i,o,a;if(t.removeAll&&e.clear(),t.remove)for(const r of t.remove)e.delete(r);if(t.add)for(const n of t.add){const t=pe(n,r);null!=t&&e.set(t,n)}if(t.update)for(const r of t.update){let t=e.get(r.id);if(null==t)continue;const s=!r.removeAllProperties&&((null===(n=r.removeProperties)||void 0===n?void 0:n.length)>0||(null===(i=r.addOrUpdateProperties)||void 0===i?void 0:i.length)>0);if((r.newGeometry||r.removeAllProperties||s)&&(t=Object.assign({},t),e.set(r.id,t),s&&(t.properties=Object.assign({},t.properties))),r.newGeometry&&(t.geometry=r.newGeometry),r.removeAllProperties)t.properties={};else if((null===(o=r.removeProperties)||void 0===o?void 0:o.length)>0)for(const e of r.removeProperties)Object.prototype.hasOwnProperty.call(t.properties,e)&&delete t.properties[e];if((null===(a=r.addOrUpdateProperties)||void 0===a?void 0:a.length)>0)for(const{key:e,value:n}of r.addOrUpdateProperties)t.properties[e]=n}}(this._dataUpdateable,t.dataDiff,n),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(t){return e._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(e){return this._geoJSONIndex.getClusterExpansionZoom(e.clusterId)}getClusterChildren(e){return this._geoJSONIndex.getChildren(e.clusterId)}getClusterLeaves(e){return this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset)}}class me{constructor(t){this.self=t,this.actor=new e.C(t),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(e,t)=>{if(this.externalWorkerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.externalWorkerSourceTypes[e]=t},this.self.addProtocol=e.bg,this.self.removeProtocol=e.bh,this.self.registerRTLTextPlugin=t=>{if(e.bB.isParsed())throw new Error("RTL text plugin already registered.");e.bB.setMethods(t)},this.actor.registerMessageHandler("LDT",((e,t)=>this._getDEMWorkerSource(e,t.source).loadTile(t))),this.actor.registerMessageHandler("RDT",((t,r)=>e._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(t,r.source).removeTile(r)})))),this.actor.registerMessageHandler("GCEZ",((t,r)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,r.type,r.source).getClusterExpansionZoom(r)})))),this.actor.registerMessageHandler("GCC",((t,r)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,r.type,r.source).getClusterChildren(r)})))),this.actor.registerMessageHandler("GCL",((t,r)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,r.type,r.source).getClusterLeaves(r)})))),this.actor.registerMessageHandler("LD",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadData(t))),this.actor.registerMessageHandler("GD",((e,t)=>this._getWorkerSource(e,t.type,t.source).getData())),this.actor.registerMessageHandler("LT",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadTile(t))),this.actor.registerMessageHandler("RT",((e,t)=>this._getWorkerSource(e,t.type,t.source).reloadTile(t))),this.actor.registerMessageHandler("AT",((e,t)=>this._getWorkerSource(e,t.type,t.source).abortTile(t))),this.actor.registerMessageHandler("RMT",((e,t)=>this._getWorkerSource(e,t.type,t.source).removeTile(t))),this.actor.registerMessageHandler("RS",((t,r)=>e._(this,void 0,void 0,(function*(){if(!this.workerSources[t]||!this.workerSources[t][r.type]||!this.workerSources[t][r.type][r.source])return;const e=this.workerSources[t][r.type][r.source];delete this.workerSources[t][r.type][r.source],void 0!==e.removeSource&&e.removeSource(r)})))),this.actor.registerMessageHandler("RM",(t=>e._(this,void 0,void 0,(function*(){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t]})))),this.actor.registerMessageHandler("SR",((t,r)=>e._(this,void 0,void 0,(function*(){this.referrer=r})))),this.actor.registerMessageHandler("SRPS",((e,t)=>this._syncRTLPluginState(e,t))),this.actor.registerMessageHandler("IS",((t,r)=>e._(this,void 0,void 0,(function*(){this.self.importScripts(r)})))),this.actor.registerMessageHandler("SI",((e,t)=>this._setImages(e,t))),this.actor.registerMessageHandler("UL",((t,r)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).update(r.layers,r.removedIds)})))),this.actor.registerMessageHandler("SL",((t,r)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).replace(r)}))))}_setImages(t,r){return e._(this,void 0,void 0,(function*(){this.availableImages[t]=r;for(const e in this.workerSources[t]){const n=this.workerSources[t][e];for(const e in n)n[e].availableImages=r}}))}_syncRTLPluginState(t,r){return e._(this,void 0,void 0,(function*(){if(e.bB.isParsed())return e.bB.getState();if("loading"!==r.pluginStatus)return e.bB.setState(r),r;const t=r.pluginURL;if(this.self.importScripts(t),e.bB.isParsed()){const r={pluginStatus:"loaded",pluginURL:t};return e.bB.setState(r),r}throw e.bB.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${t}`)}))}_getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}_getLayerIndex(e){let r=this.layerIndexes[e];return r||(r=this.layerIndexes[e]=new t),r}_getWorkerSource(e,t,r){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){const n={sendAsync:(t,r)=>(t.targetMapId=e,this.actor.sendAsync(t,r))};switch(t){case"vector":this.workerSources[e][t][r]=new o(n,this._getLayerIndex(e),this._getAvailableImages(e));break;case"geojson":this.workerSources[e][t][r]=new ge(n,this._getLayerIndex(e),this._getAvailableImages(e));break;default:this.workerSources[e][t][r]=new this.externalWorkerSourceTypes[t](n,this._getLayerIndex(e),this._getAvailableImages(e))}}return this.workerSources[e][t][r]}_getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new a),this.demWorkerSources[e][t]}}return e.i(self)&&(self.worker=new me(self)),me})),r("index",["exports","./shared"],(function(e,t){var r="4.3.2";let n,i;const o={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:e=>new Promise(((r,n)=>{const i=requestAnimationFrame(r);e.signal.addEventListener("abort",(()=>{cancelAnimationFrame(i),n(t.c())}))})),getImageData(e,t=0){return this.getImageCanvasContext(e).getImageData(-t,-t,e.width+2*t,e.height+2*t)},getImageCanvasContext(e){const t=window.document.createElement("canvas"),r=t.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height),r},resolveURL:e=>(n||(n=document.createElement("a")),n.href=e,n.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==i&&(i=matchMedia("(prefers-reduced-motion: reduce)")),i.matches)}};class a{static testProp(e){if(!a.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in a.docStyle)return e[t];return e[0]}static create(e,t,r){const n=window.document.createElement(e);return void 0!==t&&(n.className=t),r&&r.appendChild(n),n}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){a.docStyle&&a.selectProp&&(a.userSelect=a.docStyle[a.selectProp],a.docStyle[a.selectProp]="none")}static enableDrag(){a.docStyle&&a.selectProp&&(a.docStyle[a.selectProp]=a.userSelect)}static setTransform(e,t){e.style[a.transformProp]=t}static addEventListener(e,t,r,n={}){e.addEventListener(t,r,"passive"in n?n:n.capture)}static removeEventListener(e,t,r,n={}){e.removeEventListener(t,r,"passive"in n?n:n.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",a.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",a.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",a.suppressClickInternal,!0)}),0)}static getScale(e){const t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}static getPoint(e,r,n){const i=r.boundingClientRect;return new t.P((n.clientX-i.left)/r.x-e.clientLeft,(n.clientY-i.top)/r.y-e.clientTop)}static mousePos(e,t){const r=a.getScale(e);return a.getPoint(e,r,t)}static touchPos(e,t){const r=[],n=a.getScale(e);for(let i=0;i<t.length;i++)r.push(a.getPoint(e,n,t[i]));return r}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}a.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,a.selectProp=a.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),a.transformProp=a.testProp(["transform","WebkitTransform"]);const s={supported:!1,testSupport:function(e){!c&&u&&(f?h(e):l=e)}};let l,u,c=!1,f=!1;function h(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,u),e.isContextLost())return;s.supported=!0}catch(e){}e.deleteTexture(t),c=!0}var p;"undefined"!=typeof document&&(u=document.createElement("img"),u.onload=()=>{l&&h(l),l=null,f=!0},u.onerror=()=>{c=!0,l=null},u.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(e){let r,n,i,o;e.resetRequestQueue=()=>{r=[],n=0,i=0,o={}},e.addThrottleControl=e=>{const t=i++;return o[t]=e,t},e.removeThrottleControl=e=>{delete o[e],l()},e.getImage=(e,n,i=!0)=>new Promise(((o,a)=>{s.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),t.e(e,{type:"image"}),r.push({abortController:n,requestParameters:e,supportImageRefresh:i,state:"queued",onError:e=>{a(e)},onSuccess:e=>{o(e)}}),l()}));const a=e=>t._(this,void 0,void 0,(function*(){e.state="running";const{requestParameters:r,supportImageRefresh:i,onError:o,onSuccess:a,abortController:s}=e,c=!1===i&&!t.i(self)&&!t.g(r.url)&&(!r.headers||Object.keys(r.headers).reduce(((e,t)=>e&&"accept"===t),!0));n++;const f=c?u(r,s):t.m(r,s);try{const r=yield f;delete e.abortController,e.state="completed",r.data instanceof HTMLImageElement||t.b(r.data)?a(r):r.data&&a({data:yield(h=r.data,"function"==typeof createImageBitmap?t.d(h):t.f(h)),cacheControl:r.cacheControl,expires:r.expires})}catch(t){delete e.abortController,o(t)}finally{n--,l()}var h})),l=()=>{const e=(()=>{for(const e of Object.keys(o))if(o[e]())return!0;return!1})()?t.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:t.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let t=n;t<e&&r.length>0;t++){const e=r.shift();e.abortController.signal.aborted?t--:a(e)}},u=(e,r)=>new Promise(((n,i)=>{const o=new Image,a=e.url,s=e.credentials;s&&"include"===s?o.crossOrigin="use-credentials":(s&&"same-origin"===s||!t.s(a))&&(o.crossOrigin="anonymous"),r.signal.addEventListener("abort",(()=>{o.src="",i(t.c())})),o.fetchPriority="high",o.onload=()=>{o.onerror=o.onload=null,n({data:o})},o.onerror=()=>{o.onerror=o.onload=null,r.signal.aborted||i(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},o.src=a}))}(p||(p={})),p.resetRequestQueue();class d{constructor(e){this._transformRequestFn=e}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function y(e){var r=new t.A(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}var g,m=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e};g=new t.A(3),t.A!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0);var _=function(e){var t=e[0],r=e[1];return t*t+r*r};function v(e){const t=[];if("string"==typeof e)t.push({id:"default",url:e});else if(e&&e.length>0){const r=[];for(const{id:n,url:i}of e){const e=`${n}${i}`;-1===r.indexOf(e)&&(r.push(e),t.push({id:n,url:i}))}}return t}function A(e,t,r){const n=e.split("?");return n[0]+=`${t}${r}`,n.join("?")}!function(){var e=new t.A(2);t.A!=Float32Array&&(e[0]=0,e[1]=0)}();class b{constructor(e,t,r,n){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,n)}update(e,r,n){const{width:i,height:o}=e,a=!(this.size&&this.size[0]===i&&this.size[1]===o||n),{context:s}=this,{gl:l}=s;if(this.useMipmap=Boolean(r&&r.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!r||!1!==r.premultiply)),a)this.size=[i,o],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.b(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,i,o,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:r,y:a}=n||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.b(e)?l.texSubImage2D(l.TEXTURE_2D,0,r,a,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,r,a,i,o,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(e,t,r){const{context:n}=this,{gl:i}=n;i.bindTexture(i.TEXTURE_2D,this.texture),r!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=i.LINEAR),e!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,r||e),this.filter=e),t!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function w(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class E extends t.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,promiseResolve:t}of this.requestors)t(this._getImagesForIds(e));this.requestors=[]}}getImage(e){const r=this.images[e];if(r&&!r.data&&r.spriteData){const e=r.spriteData;r.data=new t.R({width:e.width,height:e.height},e.context.getImageData(e.x,e.y,e.width,e.height).data),r.spriteData=null}return r}addImage(e,t){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,t)&&(this.images[e]=t)}_validate(e,r){let n=!0;const i=r.data||r.spriteData;return this._validateStretch(r.stretchX,i&&i.width)||(this.fire(new t.j(new Error(`Image "${e}" has invalid "stretchX" value`))),n=!1),this._validateStretch(r.stretchY,i&&i.height)||(this.fire(new t.j(new Error(`Image "${e}" has invalid "stretchY" value`))),n=!1),this._validateContent(r.content,r)||(this.fire(new t.j(new Error(`Image "${e}" has invalid "content" value`))),n=!1),n}_validateStretch(e,t){if(!e)return!0;let r=0;for(const n of e){if(n[0]<r||n[1]<n[0]||t<n[1])return!1;r=n[1]}return!0}_validateContent(e,t){if(!e)return!0;if(4!==e.length)return!1;const r=t.spriteData,n=r&&r.width||t.data.width,i=r&&r.height||t.data.height;return!(e[0]<0||n<e[0]||e[1]<0||i<e[1]||e[2]<0||n<e[2]||e[3]<0||i<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,t,r=!0){const n=this.getImage(e);if(r&&(n.data.width!==t.data.width||n.data.height!==t.data.height))throw new Error(`size mismatch between old image (${n.data.width}x${n.data.height}) and new image (${t.data.width}x${t.data.height}).`);t.version=n.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise(((t,r)=>{let n=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(n=!1);this.isLoaded()||n?t(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:t})}))}_getImagesForIds(e){const r={};for(const n of e){let e=this.getImage(n);e||(this.fire(new t.k("styleimagemissing",{id:n})),e=this.getImage(n)),e?r[n]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,textFitWidth:e.textFitWidth,textFitHeight:e.textFitHeight,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.w(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return r}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(e){const r=this.patterns[e],n=this.getImage(e);if(!n)return null;if(r&&r.position.version===n.version)return r.position;if(r)r.position.version=n.version;else{const r={w:n.data.width+2,h:n.data.height+2,x:0,y:0},i=new t.I(r,n);this.patterns[e]={bin:r,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new b(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:r,h:n}=t.p(e),i=this.atlasImage;i.resize({width:r||1,height:n||1});for(const e in this.patterns){const{bin:r}=this.patterns[e],n=r.x+1,o=r.y+1,a=this.getImage(e).data,s=a.width,l=a.height;t.R.copy(a,i,{x:0,y:0},{x:n,y:o},{width:s,height:l}),t.R.copy(a,i,{x:0,y:l-1},{x:n,y:o-1},{width:s,height:1}),t.R.copy(a,i,{x:0,y:0},{x:n,y:o+l},{width:s,height:1}),t.R.copy(a,i,{x:s-1,y:0},{x:n-1,y:o},{width:1,height:l}),t.R.copy(a,i,{x:0,y:0},{x:n+s,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const r of e){if(this.callbackDispatchedThisFrame[r])continue;this.callbackDispatchedThisFrame[r]=!0;const e=this.getImage(r);e||t.w(`Image with ID: "${r}" was not found`),w(e)&&this.updateImage(r,e)}}}const x=1e20;function I(e,t,r,n,i,o,a,s,l){for(let u=t;u<t+n;u++)S(e,r*o+u,o,i,a,s,l);for(let u=r;u<r+i;u++)S(e,u*o+t,1,n,a,s,l)}function S(e,t,r,n,i,o,a){o[0]=0,a[0]=-x,a[1]=x,i[0]=e[t];for(let s=1,l=0,u=0;s<n;s++){i[s]=e[t+s*r];const n=s*s;do{const e=o[l];u=(i[s]-i[e]+n-e*e)/(s-e)/2}while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=x}for(let s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;const n=o[l],u=s-n;e[t+s*r]=i[n]+u*u}}class C{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return t._(this,void 0,void 0,(function*(){const t=[];for(const r in e)for(const n of e[r])t.push(this._getAndCacheGlyphsPromise(r,n));const r=yield Promise.all(t),n={};for(const{stack:e,id:t,glyph:i}of r)n[e]||(n[e]={}),n[e][t]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics};return n}))}_getAndCacheGlyphsPromise(e,r){return t._(this,void 0,void 0,(function*(){let t=this.entries[e];t||(t=this.entries[e]={glyphs:{},requests:{},ranges:{}});let n=t.glyphs[r];if(void 0!==n)return{stack:e,id:r,glyph:n};if(n=this._tinySDF(t,e,r),n)return t.glyphs[r]=n,{stack:e,id:r,glyph:n};const i=Math.floor(r/256);if(256*i>65535)throw new Error("glyphs > 65535 not supported");if(t.ranges[i])return{stack:e,id:r,glyph:n};if(!this.url)throw new Error("glyphsUrl is not set");if(!t.requests[i]){const r=C.loadGlyphRange(e,i,this.url,this.requestManager);t.requests[i]=r}const o=yield t.requests[i];for(const e in o)this._doesCharSupportLocalGlyph(+e)||(t.glyphs[+e]=o[+e]);return t.ranges[i]=!0,{stack:e,id:r,glyph:o[r]||null}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(t.u["CJK Unified Ideographs"](e)||t.u["Hangul Syllables"](e)||t.u.Hiragana(e)||t.u.Katakana(e))}_tinySDF(e,r,n){const i=this.localIdeographFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(n))return;let o=e.tinySDF;if(!o){let t="400";/bold/i.test(r)?t="900":/medium/i.test(r)?t="500":/light/i.test(r)&&(t="200"),o=e.tinySDF=new C.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:i,fontWeight:t})}const a=o.draw(String.fromCharCode(n));return{id:n,bitmap:new t.o({width:a.width||60,height:a.height||60},a.data),metrics:{width:a.glyphWidth/2||24,height:a.glyphHeight/2||24,left:a.glyphLeft/2+.5||0,top:a.glyphTop/2-27.5||-8,advance:a.glyphAdvance/2||24,isDoubleResolution:!0}}}}C.loadGlyphRange=function(e,r,n,i){return t._(this,void 0,void 0,(function*(){const o=256*r,a=o+255,s=i.transformRequest(n.replace("{fontstack}",e).replace("{range}",`${o}-${a}`),"Glyphs"),l=yield t.l(s,new AbortController);if(!l||!l.data)throw new Error(`Could not load glyph range. range: ${r}, ${o}-${a}`);const u={};for(const e of t.n(l.data))u[e.id]=e;return u}))},C.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:r=8,cutoff:n=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=t,this.cutoff=n,this.radius=r;const s=this.size=e+4*t,l=this._createCanvas(s),u=this.ctx=l.getContext("2d",{willReadFrequently:!0});u.font=`${a} ${o} ${e}px ${i}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:r,actualBoundingBoxDescent:n,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(r),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),l=Math.min(this.size-this.buffer,a+Math.ceil(n)),u=s+2*this.buffer,c=l+2*this.buffer,f=Math.max(u*c,0),h=new Uint8ClampedArray(f),p={data:h,width:u,height:c,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:d,buffer:y,gridInner:g,gridOuter:m}=this;d.clearRect(y,y,s,l),d.fillText(e,y,y+a);const _=d.getImageData(y,y,s,l);m.fill(x,0,f),g.fill(0,0,f);for(let e=0;e<l;e++)for(let t=0;t<s;t++){const r=_.data[4*(e*s+t)+3]/255;if(0===r)continue;const n=(e+y)*u+t+y;if(1===r)m[n]=0,g[n]=x;else{const e=.5-r;m[n]=e>0?e*e:0,g[n]=e<0?e*e:0}}I(m,0,0,u,c,u,this.f,this.v,this.z),I(g,y,y,s,l,u,this.f,this.v,this.z);for(let e=0;e<f;e++){const t=Math.sqrt(m[e])-Math.sqrt(g[e]);h[e]=Math.round(255-255*(t/this.radius+this.cutoff))}return p}};class P{constructor(){this.specification=t.v.light.position}possiblyEvaluate(e,r){return t.y(e.expression.evaluate(r))}interpolate(e,r,n){return{x:t.z.number(e.x,r.x,n),y:t.z.number(e.y,r.y,n),z:t.z.number(e.z,r.z,n)}}}let O;class T extends t.E{constructor(e){super(),O=O||new t.q({anchor:new t.D(t.v.light.anchor),position:new P,color:new t.D(t.v.light.color),intensity:new t.D(t.v.light.intensity)}),this._transitionable=new t.T(O),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,r={}){if(!this._validate(t.r,e,r))for(const t in e){const r=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),r):this._transitionable.setValue(t,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,r,n){return(!n||!1!==n.validate)&&t.t(this,e.call(t.x,{value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.v}))}}class M{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const r=e.join(",")+String(t);return this.dashEntry[r]||(this.dashEntry[r]=this.addDash(e,t)),this.dashEntry[r]}getDashRanges(e,t,r){const n=[];let i=e.length%2==1?-e[e.length-1]*r:0,o=e[0]*r,a=!0;n.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let t=1;t<e.length;t++){a=!a;const l=e[t];i=s*r,s+=l,o=s*r,n.push({left:i,right:o,isDash:a,zeroLength:0===l})}return n}addRoundDash(e,t,r){const n=t/2;for(let t=-r;t<=r;t++){const i=this.width*(this.nextRow+r+t);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),u=Math.abs(s-a.right),c=Math.min(l,u);let f;const h=t/r*(n+1);if(a.isDash){const e=n-Math.abs(h);f=Math.sqrt(c*c+e*e)}else f=n-Math.sqrt(c*c+h*h);this.data[i+s]=Math.max(0,Math.min(255,f+128))}}}addRegularDash(e){for(let t=e.length-1;t>=0;--t){const r=e[t],n=e[t+1];r.zeroLength?e.splice(t,1):n&&n.isDash===r.isDash&&(n.left=r.left,e.splice(t,1))}const t=e[0],r=e[e.length-1];t.isDash===r.isDash&&(t.left=r.left-this.width,r.right=t.right+this.width);const n=this.width*this.nextRow;let i=0,o=e[i];for(let t=0;t<this.width;t++){t/o.right>1&&(o=e[++i]);const r=Math.abs(t-o.left),a=Math.abs(t-o.right),s=Math.min(r,a);this.data[n+t]=Math.max(0,Math.min(255,(o.isDash?s:-s)+128))}}addDash(e,r){const n=r?7:0,i=2*n+1;if(this.nextRow+i>this.height)return t.w("LineAtlas out of space"),null;let o=0;for(let t=0;t<e.length;t++)o+=e[t];if(0!==o){const t=this.width/o,i=this.getDashRanges(e,this.width,t);r?this.addRoundDash(i,t,n):this.addRegularDash(i)}const a={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:o};return this.nextRow+=i,this.dirty=!0,a}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}const k="maplibre_preloaded_worker_pool";class R{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<R.workerCount;)this.workers.push(new Worker(t.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[k]}numActive(){return Object.keys(this.active).length}}const B=Math.floor(o.hardwareConcurrency/2);let L,D;function j(){return L||(L=new R),L}R.workerCount=t.B(globalThis)?Math.max(Math.min(B,3),1):1;class F{constructor(e,r){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r;const n=this.workerPool.acquire(r);for(let e=0;e<n.length;e++){const i=new t.C(n[e],r);i.name=`Worker ${e}`,this.actors.push(i)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,t){const r=[];for(const n of this.actors)r.push(n.sendAsync({type:e,data:t}));return Promise.all(r)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach((e=>{e.remove()})),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,t){for(const r of this.actors)r.registerMessageHandler(e,t)}}function N(){return D||(D=new F(j(),t.G),D.registerMessageHandler("GR",((e,r,n)=>t.m(r,n)))),D}function Z(e,r){const n=t.F();return t.H(n,n,[1,1,0]),t.J(n,n,[.5*e.width,.5*e.height,1]),t.K(n,n,e.calculatePosMatrix(r.toUnwrapped()))}function U(e,t,r,n,i,o){const a=function(e,t,r){if(e)for(const n of e){const e=t[n];if(e&&e.source===r&&"fill-extrusion"===e.type)return!0}else for(const e in t){const n=t[e];if(n.source===r&&"fill-extrusion"===n.type)return!0}return!1}(i&&i.layers,t,e.id),s=o.maxPitchScaleFactor(),l=e.tilesIn(n,s,a);l.sort(Q);const u=[];for(const n of l)u.push({wrappedTileID:n.tileID.wrapped().key,queryResults:n.tile.queryRenderedFeatures(t,r,e._state,n.queryGeometry,n.cameraQueryGeometry,n.scale,i,o,s,Z(e.transform,n.tileID))});const c=function(e){const t={},r={};for(const n of e){const e=n.queryResults,i=n.wrappedTileID,o=r[i]=r[i]||{};for(const r in e){const n=e[r],i=o[r]=o[r]||{},a=t[r]=t[r]||[];for(const e of n)i[e.featureIndex]||(i[e.featureIndex]=!0,a.push(e))}}return t}(u);for(const t in c)c[t].forEach((t=>{const r=t.feature,n=e.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=n}));return c}function Q(e,t){const r=e.tileID,n=t.tileID;return r.overscaledZ-n.overscaledZ||r.canonical.y-n.canonical.y||r.wrap-n.wrap||r.canonical.x-n.canonical.x}function G(e,r,n){return t._(this,void 0,void 0,(function*(){let i=e;if(e.url?i=(yield t.h(r.transformRequest(e.url,"Source"),n)).data:yield o.frameAsync(n),!i)return null;const a=t.L(t.e(i,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in i&&i.vector_layers&&(a.vectorLayerIds=i.vector_layers.map((e=>e.id))),a}))}class z{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):Array.isArray(e)&&(4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof t.M?new t.M(e.lng,e.lat):t.M.convert(e),this}setSouthWest(e){return this._sw=e instanceof t.M?new t.M(e.lng,e.lat):t.M.convert(e),this}extend(e){const r=this._sw,n=this._ne;let i,o;if(e instanceof t.M)i=e,o=e;else{if(!(e instanceof z))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(z.convert(e)):this.extend(t.M.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(t.M.convert(e)):this;if(i=e._sw,o=e._ne,!i||!o)return this}return r||n?(r.lng=Math.min(i.lng,r.lng),r.lat=Math.min(i.lat,r.lat),n.lng=Math.max(o.lng,n.lng),n.lat=Math.max(o.lat,n.lat)):(this._sw=new t.M(i.lng,i.lat),this._ne=new t.M(o.lng,o.lat)),this}getCenter(){return new t.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new t.M(this.getWest(),this.getNorth())}getSouthEast(){return new t.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:n}=t.M.convert(e);let i=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&i}static convert(e){return e instanceof z?e:e?new z(e):e}static fromLngLat(e,r=0){const n=360*r/40075017,i=n/Math.cos(Math.PI/180*e.lat);return new z(new t.M(e.lng-i,e.lat-n),new t.M(e.lng+i,e.lat+n))}}class q{constructor(e,t,r){this.bounds=z.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const r=Math.pow(2,e.z),n=Math.floor(t.N(this.bounds.getWest())*r),i=Math.floor(t.O(this.bounds.getNorth())*r),o=Math.ceil(t.N(this.bounds.getEast())*r),a=Math.ceil(t.O(this.bounds.getSouth())*r);return e.x>=n&&e.x<o&&e.y>=i&&e.y<a}}class V extends t.E{constructor(e,r,n,i){if(super(),this.id=e,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.e(this,t.L(r,["url","scheme","tileSize","promoteId"])),this._options=t.e({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield G(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(t.e(this,e),e.bounds&&(this.tileBounds=new q(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.j(e))}}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return t.e({},this._options)}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),r={request:this.map._requestManager.transformRequest(t,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request.collectResourceTiming=this._collectResourceTiming;let n="RT";if(e.actor&&"expired"!==e.state){if("loading"===e.state)return new Promise(((t,r)=>{e.reloadPromise={resolve:t,reject:r}}))}else e.actor=this.dispatcher.getActor(),n="LT";e.abortController=new AbortController;try{const t=yield e.actor.sendAsync({type:n,data:r},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,t)}catch(t){if(delete e.abortController,e.aborted)return;if(t&&404!==t.status)throw t;this._afterTileLoadWorkerResponse(e,null)}}))}_afterTileLoadWorkerResponse(e,t){if(t&&t.resourceTiming&&(e.resourceTiming=t.resourceTiming),t&&this.map._refreshExpiredTiles&&e.setExpiryData(t),e.loadVectorData(t,this.map.painter),e.reloadPromise){const t=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(t.resolve).catch(t.reject)}}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class W extends t.E{constructor(e,r,n,i){super(),this.id=e,this.dispatcher=n,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.e({type:"raster"},r),t.e(this,t.L(r,["url","scheme","tileSize"]))}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield G(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(t.e(this,e),e.bounds&&(this.tileBounds=new q(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.j(e))}}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}serialize(){return t.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const r=yield p.getImage(this.map._requestManager.transformRequest(t,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(r&&r.data){this.map._refreshExpiredTiles&&r.cacheControl&&r.expires&&e.setExpiryData({cacheControl:r.cacheControl,expires:r.expires});const t=this.map.painter.context,n=t.gl,i=r.data;e.texture=this.map.painter.getTileTexture(i.width),e.texture?e.texture.update(i,{useMipmap:!0}):(e.texture=new b(t,i,n.RGBA,{useMipmap:!0}),e.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE,n.LINEAR_MIPMAP_NEAREST),t.extTextureFilterAnisotropic&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax)),e.state="loaded"}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)}))}hasTransition(){return!1}}class K extends W{constructor(e,r,n,i){super(e,r,n,i),this.type="raster-dem",this.maxzoom=22,this._options=t.e({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox",this.redFactor=r.redFactor,this.greenFactor=r.greenFactor,this.blueFactor=r.blueFactor,this.baseShift=r.baseShift}loadTile(e){return t._(this,void 0,void 0,(function*(){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),n=this.map._requestManager.transformRequest(r,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const r=yield p.getImage(n,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(r&&r.data){const n=r.data;this.map._refreshExpiredTiles&&r.cacheControl&&r.expires&&e.setExpiryData({cacheControl:r.cacheControl,expires:r.expires});const i=t.b(n)&&t.S()?n:yield this.readImageNow(n),o={type:this.type,uid:e.uid,source:this.id,rawImageData:i,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||"expired"===e.state){e.actor=this.dispatcher.getActor();const t=yield e.actor.sendAsync({type:"LDT",data:o});e.dem=t,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}readImageNow(e){return t._(this,void 0,void 0,(function*(){if("undefined"!=typeof VideoFrame&&t.U()){const r=e.width+2,n=e.height+2;try{return new t.R({width:r,height:n},yield t.V(e,-1,-1,r,n))}catch(e){}}return o.getImageData(e,1)}))}_getNeighboringTiles(e){const r=e.canonical,n=Math.pow(2,r.z),i=(r.x-1+n)%n,o=0===r.x?e.wrap-1:e.wrap,a=(r.x+1+n)%n,s=r.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.Q(e.overscaledZ,o,r.z,i,r.y).key]={backfilled:!1},l[new t.Q(e.overscaledZ,s,r.z,a,r.y).key]={backfilled:!1},r.y>0&&(l[new t.Q(e.overscaledZ,o,r.z,i,r.y-1).key]={backfilled:!1},l[new t.Q(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new t.Q(e.overscaledZ,s,r.z,a,r.y-1).key]={backfilled:!1}),r.y+1<n&&(l[new t.Q(e.overscaledZ,o,r.z,i,r.y+1).key]={backfilled:!1},l[new t.Q(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new t.Q(e.overscaledZ,s,r.z,a,r.y+1).key]={backfilled:!1}),l}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))}))}}class H extends t.E{constructor(e,r,n,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=n.getActor(),this.setEventedParent(i),this._data=r.data,this._options=t.e({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;const o=t.W/this.tileSize;this.workerOptions=t.e({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*o,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*o,extent:t.W,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:t.W,radius:(r.clusterRadius||50)*o,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){return t._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return t._(this,void 0,void 0,(function*(){const e=t.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})}))}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(void 0!==e.clusterRadius&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),void 0!==e.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,t,r){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:t,offset:r}})}_updateWorkerData(e){return t._(this,void 0,void 0,(function*(){const r=t.e({type:this.type},this.workerOptions);e?r.dataDiff=e:"string"==typeof this._data?(r.request=this.map._requestManager.transformRequest(o.resolveURL(this._data),"Source"),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new t.k("dataloading",{dataType:"source"}));try{const e=yield this.actor.sendAsync({type:"LD",data:r});if(this._pendingLoads--,this._removed||e.abandoned)return void this.fire(new t.k("dataabort",{dataType:"source"}));let n=null;e.resourceTiming&&e.resourceTiming[this.id]&&(n=e.resourceTiming[this.id].slice(0));const i={dataType:"source"};this._collectResourceTiming&&n&&n.length>0&&t.e(i,{resourceTiming:n}),this.fire(new t.k("data",Object.assign(Object.assign({},i),{sourceDataType:"metadata"}))),this.fire(new t.k("data",Object.assign(Object.assign({},i),{sourceDataType:"content"})))}catch(e){if(this._pendingLoads--,this._removed)return void this.fire(new t.k("dataabort",{dataType:"source"}));this.fire(new t.j(e))}}))}loaded(){return 0===this._pendingLoads}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.actor?"RT":"LT";e.actor=this.actor;const r={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const n=yield this.actor.sendAsync({type:t,data:r},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(n,this.map.painter,"RT"===t)}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return t.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Y=t.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class X extends t.E{constructor(e,t,r,n){super(),this.id=e,this.dispatcher=r,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=t}load(e){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const t=yield p.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,t&&t.data&&(this.image=t.data,e&&(this.coordinates=e),this._finishLoading())}catch(e){this._request=null,this._loaded=!0,this.fire(new t.j(e))}}))}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const r=e.map(t.Y.fromLngLat);this.tileID=function(e){let r=1/0,n=1/0,i=-1/0,o=-1/0;for(const t of e)r=Math.min(r,t.x),n=Math.min(n,t.y),i=Math.max(i,t.x),o=Math.max(o,t.y);const a=Math.max(i-r,o-n),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new t.a0(s,Math.floor((r+i)/2*l),Math.floor((n+o)/2*l))}(r),this.minzoom=this.maxzoom=this.tileID.z;const n=r.map((e=>this.tileID.getTilePoint(e)._round()));return this._boundsArray=new t.Z,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,t.W,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,t.W),this._boundsArray.emplaceBack(n[2].x,n[2].y,t.W,t.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,r=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=t.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new b(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let n=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,n=!0)}n&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return t._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class J extends X{constructor(e,t,r,n){super(e,t,r,n),this.roundZoom=!0,this.type="video",this.options=t}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const t of e.urls)this.urls.push(this.map._requestManager.transformRequest(t,"Source").url);try{const e=yield t.a2(this.urls);if(this._loaded=!0,!e)return;this.video=e,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(e){this.fire(new t.j(e))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const r=this.video.seekable;e<r.start(0)||e>r.end(0)?this.fire(new t.j(new t.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,r=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=t.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new b(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let n=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,n=!0)}n&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class $ extends X{constructor(e,r,n,i){super(e,r,n,i),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new t.j(new t.a1(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.j(new t.a1(`sources.${e}`,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.j(new t.a1(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof HTMLCanvasElement||this.fire(new t.j(new t.a1(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.j(new t.a1(`sources.${e}`,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const r=this.map.painter.context,n=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=t.$.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new b(r,this.canvas,n.RGBA,{premultiply:!0});let i=!1;for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture,i=!0)}i&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const ee={},te=e=>{switch(e){case"geojson":return H;case"image":return X;case"raster":return W;case"raster-dem":return K;case"vector":return V;case"video":return J;case"canvas":return $}return ee[e]},re="RTLPluginLoaded";class ne extends t.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=N()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch((e=>{throw this.status="error",e}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return t._(this,arguments,void 0,(function*(e,t=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=o.resolveURL(e),!this.url)throw new Error(`requested url ${e} is invalid`);if("unavailable"===this.status){if(!t)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if("requested"===this.status)return this._requestImport()}))}_requestImport(){return t._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new t.k(re))}))}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let ie=null;function oe(){return ie||(ie=new ne),ie}class ae{constructor(e,r){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=t.a3(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,r,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const r={};if(!t)return r;for(const n of e){const e=n.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){n.layers=e,n.stateDependentLayerIds&&(n.stateDependentLayers=n.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)r[t.id]=n}}return r}(e.buckets,r.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const r=this.buckets[e];if(r instanceof t.a5){if(this.hasSymbolBuckets=!0,!n)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const r=this.buckets[e];if(r instanceof t.a5&&r.hasRTLText){this.hasRTLText=!0,oe().lazyLoad();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(e).queryRadius(t))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.a4}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const r=this.buckets[t];r.uploadPending()&&r.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new b(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new b(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,r,n,i,o,a,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:a,queryPadding:this.queryPadding*l},e,t,r):{}}querySourceFeatures(e,r){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const i=n.loadVTLayers(),o=r&&r.sourceLayer?r.sourceLayer:"",a=i._geojsonTileLayer||i[o];if(!a)return;const s=t.a6(r&&r.filter),{z:l,x:u,y:c}=this.tileID.canonical,f={z:l,x:u,y:c};for(let r=0;r<a.length;r++){const i=a.feature(r);if(s.needGeometry){const e=t.a7(i,!0);if(!s.filter(new t.a8(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!s.filter(new t.a8(this.tileID.overscaledZ),i))continue;const h=n.getId(i,o),p=new t.a9(i,l,u,c,h);p.tile=f,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const r=t.aa(e.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(r)if(this.expirationTime<r)t=!0;else{const n=this.expirationTime-r;n?this.expirationTime=e+Math.max(n,3e4):t=!0}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const r=this.latestFeatureIndex.loadVTLayers();for(const n in this.buckets){if(!t.style.hasLayer(n))continue;const i=this.buckets[n],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=r[o],s=e[o];if(!a||!s||0===Object.keys(s).length)continue;i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(n);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=o.now()+e}setDependencies(e,t){const r={};for(const e of t)r[e]=!0;this.dependencies[e]=r}hasDependency(e,t){for(const r of e){const e=this.dependencies[r];if(e)for(const r of t)if(e[r])return!0}return!1}}class se{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,r){const n=e.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);const i={value:t,timeout:void 0};if(void 0!==r&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),r)),this.data[n].push(i),this.order.push(n),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const r=e.wrapped().key,n=void 0===t?0:this.data[r].indexOf(t),i=this.data[r][n];return this.data[r].splice(n,1),i.timeout&&clearTimeout(i.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(i.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const r in this.data)for(const n of this.data[r])e(n.value)||t.push(n);for(const e of t)this.remove(e.value.tileID,e)}}class le{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,n){const i=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},t.e(this.stateChanges[e][i],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==i&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][i]){this.deletedStates[e][i]={};for(const t in this.state[e][i])n[t]||(this.deletedStates[e][i][t]=null)}else for(const t in n)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][t]&&delete this.deletedStates[e][i][t]}removeFeatureState(e,t,r){if(null===this.deletedStates[e])return;const n=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&void 0!==t)null!==this.deletedStates[e][n]&&(this.deletedStates[e][n]=this.deletedStates[e][n]||{},this.deletedStates[e][n][r]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][n])for(r in this.deletedStates[e][n]={},this.stateChanges[e][n])this.deletedStates[e][n][r]=null;else this.deletedStates[e][n]=null;else this.deletedStates[e]=null}getState(e,r){const n=String(r),i=t.e({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][r];if(null===t)return{};for(const e in t)delete i[e]}return i}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,r){const n={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const r={};for(const n in this.stateChanges[e])this.state[e][n]||(this.state[e][n]={}),t.e(this.state[e][n],this.stateChanges[e][n]),r[n]=this.state[e][n];n[e]=r}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const r={};if(null===this.deletedStates[e])for(const t in this.state[e])r[t]={},this.state[e][t]={};else for(const t in this.deletedStates[e]){if(null===this.deletedStates[e][t])this.state[e][t]={};else for(const r of Object.keys(this.deletedStates[e][t]))delete this.state[e][t][r];r[t]=this.state[e][t]}n[e]=n[e]||{},t.e(n[e],r)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const t in e)e[t].setFeatureState(n,r)}}class ue extends t.E{constructor(e,t,r){super(),this.id=e,this.dispatcher=r,this.on("data",(e=>this._dataHandler(e))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((e,t,r,n)=>{const i=new(te(t.type))(e,t,r,n);if(i.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${i.id}`);return i})(e,t,r,this),this._tiles={},this._cache=new se(0,(e=>this._unloadTile(e))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new le,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,r,n){return t._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,r,n)}catch(r){e.state="errored",404!==r.status?this._source.fire(new t.j(r,{tile:e})):this.update(this.transform,this.terrain)}}))}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new t.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const r=this._tiles[t];r.upload(e),r.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((e=>e.tileID)).sort(ce).map((e=>e.key))}getRenderableIds(e){const r=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&r.push(this._tiles[t]);return e?r.sort(((e,r)=>{const n=e.tileID,i=r.tileID,o=new t.P(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),a=new t.P(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-i.overscaledZ||a.y-o.y||a.x-o.x})).map((e=>e.tileID.key)):r.map((e=>e.tileID)).sort(ce).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")}}_reloadTile(e,r){return t._(this,void 0,void 0,(function*(){const t=this._tiles[e];t&&("loading"!==t.state&&(t.state=r),yield this._loadTile(t,e,r))}))}_tileLoaded(e,r,n){e.timeAdded=o.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const t=this.getRenderableIds();for(let n=0;n<t.length;n++){const i=t[n];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);r(e,t),r(t,e)}}function r(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let r=t.tileID.canonical.x-e.tileID.canonical.x;const n=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===r&&0===n||Math.abs(n)>1||(Math.abs(r)>1&&(1===Math.abs(r+i)?r+=i:1===Math.abs(r-i)&&(r-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,n),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,r,n){for(const i in this._tiles){let o=this._tiles[i];if(n[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>r)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){n[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const r=this._loadedParentTiles[e.key];return r&&r.tileID.overscaledZ>=t?r:null}for(let r=e.overscaledZ-1;r>=t;r--){const t=e.scaledTo(r),n=this._getLoadedTile(t);if(n)return n}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const r=Math.ceil(e.width/this._source.tileSize)+1,n=Math.ceil(e.height/this._source.tileSize)+1,i=Math.floor(r*n*(null===this._maxTileCacheZoomLevels?t.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(o)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const r in this._tiles){const n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),e[n.tileID.key]=n}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(e,this._tiles[e])}}_updateCoveredAndRetainedTiles(e,t,r,n,i,a){const s={},l={},u=Object.keys(e),c=o.now();for(const r of u){const n=e[r],i=this._tiles[r];if(!i||0!==i.fadeEndTime&&i.fadeEndTime<=c)continue;const o=this.findLoadedParent(n,t),a=this.findLoadedSibling(n),u=o||a||null;u&&(this._addTile(u.tileID),s[u.tileID.key]=u.tileID),l[r]=n}this._retainLoadedChildren(l,n,r,e);for(const t in s)e[t]||(this._coveredTiles[t]=!0,e[t]=s[t]);if(a){const t={},r={};for(const e of i)this._tiles[e.key].hasData()?t[e.key]=e:r[e.key]=e;for(const n in r){const i=r[n].children(this._source.maxzoom);this._tiles[i[0].key]&&this._tiles[i[1].key]&&this._tiles[i[2].key]&&this._tiles[i[3].key]&&(t[i[0].key]=e[i[0].key]=i[0],t[i[1].key]=e[i[1].key]=i[1],t[i[2].key]=e[i[2].key]=i[2],t[i[3].key]=e[i[3].key]=i[3],delete r[n])}for(const n in r){const i=r[n],o=this.findLoadedParent(i,this._source.minzoom),a=this.findLoadedSibling(i),s=o||a||null;if(s){t[s.tileID.key]=e[s.tileID.key]=s.tileID;for(const e in t)t[e].isChildOf(s.tileID)&&delete t[e]}}for(const e in this._tiles)t[e]||(this._coveredTiles[e]=!0)}}update(e,r){if(!this._sourceLoaded||this._paused)return;let n;this.transform=e,this.terrain=r,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?n=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.Q(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(n=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:r}),this._source.hasTile&&(n=n.filter((e=>this._source.hasTile(e))))):n=[];const i=e.coveringZoomLevel(this._source),o=Math.max(i-ue.maxOverzooming,this._source.minzoom),a=Math.max(i+ue.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const e={};for(const t of n)if(t.canonical.z>this._source.minzoom){const r=t.scaledTo(t.canonical.z-1);e[r.key]=r;const n=t.scaledTo(Math.max(this._source.minzoom,Math.min(t.canonical.z,5)));e[n.key]=n}n=n.concat(Object.values(e))}const s=0===n.length&&!this._updated&&this._didEmitContent;this._updated=!0,s&&this.fire(new t.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const l=this._updateRetainedTiles(n,i);fe(this._source.type)&&this._updateCoveredAndRetainedTiles(l,o,a,i,n,r);for(const e in l)this._tiles[e].clearFadeHold();const u=t.ab(this._tiles,l);for(const e of u){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(e)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,t){var r;const n={},i={},o=Math.max(t-ue.maxOverzooming,this._source.minzoom),a=Math.max(t+ue.maxUnderzooming,this._source.minzoom),s={};for(const r of e){const e=this._addTile(r);n[r.key]=r,e.hasData()||t<this._source.maxzoom&&(s[r.key]=r)}this._retainLoadedChildren(s,t,a,n);for(const a of e){let e=this._tiles[a.key];if(e.hasData())continue;if(t+1>this._source.maxzoom){const e=a.children(this._source.maxzoom)[0],t=this.getTile(e);if(t&&t.hasData()){n[e.key]=e;continue}}else{const e=a.children(this._source.maxzoom);if(n[e[0].key]&&n[e[1].key]&&n[e[2].key]&&n[e[3].key])continue}let s=e.wasRequested();for(let t=a.overscaledZ-1;t>=o;--t){const o=a.scaledTo(t);if(i[o.key])break;if(i[o.key]=!0,e=this.getTile(o),!e&&s&&(e=this._addTile(o)),e){const t=e.hasData();if((t||!(null===(r=this.map)||void 0===r?void 0:r.cancelPendingTileRequestsWhileZooming)||s)&&(n[o.key]=o),s=e.wasRequested(),t)break}}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let r,n=this._tiles[e].tileID;for(;n.overscaledZ>0;){if(n.key in this._loadedParentTiles){r=this._loadedParentTiles[n.key];break}t.push(n.key);const e=n.scaledTo(n.overscaledZ-1);if(r=this._getLoadedTile(e),r)break;n=e}for(const e of t)this._loadedParentTiles[e]=r}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const t=this._tiles[e].tileID,r=this._getLoadedTile(t);this._loadedSiblingTiles[t.key]=r}}_addTile(e){let r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const n=r;return r||(r=new ae(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(r,e.key,r.state)),r.uses++,this._tiles[e.key]=r,n||this._source.fire(new t.k("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),r))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}_dataHandler(e){const t=e.sourceDataType;"source"===e.dataType&&"metadata"===t&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===t&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,r,n){const i=[],o=this.transform;if(!o)return i;const a=n?o.getCameraQueryGeometry(e):e,s=e.map((e=>o.pointCoordinate(e,this.terrain))),l=a.map((e=>o.pointCoordinate(e,this.terrain))),u=this.getIds();let c=1/0,f=1/0,h=-1/0,p=-1/0;for(const e of l)c=Math.min(c,e.x),f=Math.min(f,e.y),h=Math.max(h,e.x),p=Math.max(p,e.y);for(let e=0;e<u.length;e++){const n=this._tiles[u[e]];if(n.holdingForFade())continue;const a=n.tileID,d=Math.pow(2,o.zoom-n.tileID.overscaledZ),y=r*n.queryPadding*t.W/n.tileSize/d,g=[a.getTilePoint(new t.Y(c,f)),a.getTilePoint(new t.Y(h,p))];if(g[0].x-y<t.W&&g[0].y-y<t.W&&g[1].x+y>=0&&g[1].y+y>=0){const e=s.map((e=>a.getTilePoint(e))),t=l.map((e=>a.getTilePoint(e)));i.push({tile:n,tileID:a,queryGeometry:e,cameraQueryGeometry:t,scale:d})}}return i}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const e of t)e.posMatrix=this.transform.calculatePosMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(fe(this._source.type)){const e=o.now();for(const t in this._tiles)if(this._tiles[t].fadeEndTime>=e)return!0}return!1}setFeatureState(e,t,r){this._state.updateState(e=e||"_geojsonTileLayer",t,r)}removeFeatureState(e,t,r){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,r)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,r){const n=this._tiles[e];n&&n.setDependencies(t,r)}reloadTilesForDependencies(e,t){for(const r in this._tiles)this._tiles[r].hasDependency(e,t)&&this._reloadTile(r,"reloading");this._cache.filter((r=>!r.hasDependency(e,t)))}}function ce(e,t){const r=Math.abs(2*e.wrap)-+(e.wrap<0),n=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||n-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function fe(e){return"raster"===e||"image"===e||"video"===e}ue.maxOverzooming=10,ue.maxUnderzooming=3;class he{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.ac(e,0,1);let r=1,n=this._distances[r];const i=e*this.paddedLength+this.padding;for(;n<i&&r<this._distances.length;)n=this._distances[++r];const o=r-1,a=this._distances[o],s=n-a,l=s>0?(i-a)/s:0;return this.points[o].mult(1-l).add(this.points[r].mult(l))}}function pe(e,t){let r=!0;return"always"===e||"never"!==e&&"never"!==t||(r=!1),r}class de{constructor(e,t,r){const n=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(t/r);for(let e=0;e<this.xCellCount*this.yCellCount;e++)n.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,r,n,i){this._forEachCell(t,r,n,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(n),this.bboxes.push(i)}insertCircle(e,t,r,n){this._forEachCell(t-n,r-n,t+n,r+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(n)}_insertBoxCell(e,t,r,n,i,o){this.boxCells[i].push(o)}_insertCircleCell(e,t,r,n,i,o){this.circleCells[i].push(o)}_query(e,t,r,n,i,o,a){if(r<0||e>this.width||n<0||t>this.height)return[];const s=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=n){if(i)return[{key:null,x1:e,y1:t,x2:r,y2:n}];for(let e=0;e<this.boxKeys.length;e++)s.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],r=this.circles[3*e+1],n=this.circles[3*e+2];s.push({key:this.circleKeys[e],x1:t-n,y1:r-n,x2:t+n,y2:r+n})}}else this._forEachCell(e,t,r,n,this._queryCell,s,{hitTest:i,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}query(e,t,r,n){return this._query(e,t,r,n,!1,null)}hitTest(e,t,r,n,i,o){return this._query(e,t,r,n,!0,i,o).length>0}hitTestCircle(e,t,r,n,i){const o=e-r,a=e+r,s=t-r,l=t+r;if(a<0||o>this.width||l<0||s>this.height)return!1;const u=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,u,{hitTest:!0,overlapMode:n,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}},i),u.length>0}_queryCell(e,t,r,n,i,o,a,s){const{seenUids:l,hitTest:u,overlapMode:c}=a,f=this.boxCells[i];if(null!==f){const i=this.bboxes;for(const a of f)if(!l.box[a]){l.box[a]=!0;const f=4*a,h=this.boxKeys[a];if(e<=i[f+2]&&t<=i[f+3]&&r>=i[f+0]&&n>=i[f+1]&&(!s||s(h))&&(!u||!pe(c,h.overlapMode))&&(o.push({key:h,x1:i[f],y1:i[f+1],x2:i[f+2],y2:i[f+3]}),u))return!0}}const h=this.circleCells[i];if(null!==h){const i=this.circles;for(const a of h)if(!l.circle[a]){l.circle[a]=!0;const f=3*a,h=this.circleKeys[a];if(this._circleAndRectCollide(i[f],i[f+1],i[f+2],e,t,r,n)&&(!s||s(h))&&(!u||!pe(c,h.overlapMode))){const e=i[f],t=i[f+1],r=i[f+2];if(o.push({key:h,x1:e-r,y1:t-r,x2:e+r,y2:t+r}),u)return!0}}}return!1}_queryCellCircle(e,t,r,n,i,o,a,s){const{circle:l,seenUids:u,overlapMode:c}=a,f=this.boxCells[i];if(null!==f){const e=this.bboxes;for(const t of f)if(!u.box[t]){u.box[t]=!0;const r=4*t,n=this.boxKeys[t];if(this._circleAndRectCollide(l.x,l.y,l.radius,e[r+0],e[r+1],e[r+2],e[r+3])&&(!s||s(n))&&!pe(c,n.overlapMode))return o.push(!0),!0}}const h=this.circleCells[i];if(null!==h){const e=this.circles;for(const t of h)if(!u.circle[t]){u.circle[t]=!0;const r=3*t,n=this.circleKeys[t];if(this._circlesCollide(e[r],e[r+1],e[r+2],l.x,l.y,l.radius)&&(!s||s(n))&&!pe(c,n.overlapMode))return o.push(!0),!0}}}_forEachCell(e,t,r,n,i,o,a,s){const l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(r),f=this._convertToYCellCoord(n);for(let h=l;h<=c;h++)for(let l=u;l<=f;l++)if(i.call(this,e,t,r,n,this.xCellCount*l+h,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,r,n,i,o){const a=n-e,s=i-t,l=r+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,r,n,i,o,a){const s=(o-n)/2,l=Math.abs(e-(n+s));if(l>s+r)return!1;const u=(a-i)/2,c=Math.abs(t-(i+u));if(c>u+r)return!1;if(l<=s||c<=u)return!0;const f=l-s,h=c-u;return f*f+h*h<=r*r}}function ye(e,r,n,i,o){const a=t.F();return r?(t.J(a,a,[1/o,1/o,1]),n||t.ad(a,a,i.angle)):t.K(a,i.labelPlaneMatrix,e),a}function ge(e,r,n,i,o){if(r){const r=t.ae(e);return t.J(r,r,[o,o,1]),n||t.ad(r,r,-i.angle),r}return i.glCoordMatrix}function me(e,r,n){let i;n?(i=[e.x,e.y,n(e.x,e.y),1],t.af(i,i,r)):(i=[e.x,e.y,0,1],function(e,t,r){const n=t[0],i=t[1];e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e[3]=r[3]*n+r[7]*i+r[15]}(i,i,r));const o=i[3];return{point:new t.P(i[0]/o,i[1]/o),signedDistanceFromCamera:o,isOccluded:!1}}function _e(e,t){return.5+e/t*.5}function ve(e,t){return e.x>=-t[0]&&e.x<=t[0]&&e.y>=-t[1]&&e.y<=t[1]}function Ae(e,r,n,i,o,a,s,l,u,c,f,h,p,d,y){const g=i?e.textSizeData:e.iconSizeData,m=t.ag(g,n.transform.zoom),_=[256/n.width*2+1,256/n.height*2+1],v=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;v.clear();const A=e.lineVertexArray,b=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,w=n.transform.width/n.transform.height;let E=!1;for(let i=0;i<b.length;i++){const x=b.get(i);if(x.hidden||x.writingMode===t.ah.vertical&&!E){Me(x.numGlyphs,v);continue}E=!1;const I=me(new t.P(x.anchorX,x.anchorY),r,y);if(!ve(I.point,_)){Me(x.numGlyphs,v);continue}const S=_e(n.transform.cameraToCenterDistance,I.signedDistanceFromCamera),C=t.ai(g,m,x),P=s?C/S:C*S,O={getElevation:y,labelPlaneMatrix:o,lineVertexArray:A,pitchWithMap:s,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:c,tileAnchorPoint:new t.P(x.anchorX,x.anchorY),unwrappedTileID:f,width:h,height:p,translation:d},T=Ee(O,x,P,!1,l,r,a,e.glyphOffsetArray,v,w,u);E=T.useVertical,(T.notEnoughRoom||E||T.needsFlipping&&Ee(O,x,P,!0,l,r,a,e.glyphOffsetArray,v,w,u).notEnoughRoom)&&Me(x.numGlyphs,v)}i?e.text.dynamicLayoutVertexBuffer.updateData(v):e.icon.dynamicLayoutVertexBuffer.updateData(v)}function be(e,t,r,n,i,o,a,s){const l=o.glyphStartIndex+o.numGlyphs,u=o.lineStartIndex,c=o.lineStartIndex+o.lineLength,f=t.getoffsetX(o.glyphStartIndex),h=t.getoffsetX(l-1),p=Oe(e*f,r,n,i,o.segment,u,c,s,a);if(!p)return null;const d=Oe(e*h,r,n,i,o.segment,u,c,s,a);return d?s.projectionCache.anyProjectionOccluded?null:{first:p,last:d}:null}function we(e,r,n,i){return e===t.ah.horizontal&&Math.abs(n.y-r.y)>Math.abs(n.x-r.x)*i?{useVertical:!0}:(e===t.ah.vertical?r.y<n.y:r.x>n.x)?{needsFlipping:!0}:null}function Ee(e,r,n,i,o,a,s,l,u,c,f){const h=n/24,p=r.lineOffsetX*h,d=r.lineOffsetY*h;let y;if(r.numGlyphs>1){const t=r.glyphStartIndex+r.numGlyphs,n=r.lineStartIndex,a=r.lineStartIndex+r.lineLength,u=be(h,l,p,d,i,r,f,e);if(!u)return{notEnoughRoom:!0};const g=me(u.first.point,s,e.getElevation).point,m=me(u.last.point,s,e.getElevation).point;if(o&&!i){const e=we(r.writingMode,g,m,c);if(e)return e}y=[u.first];for(let o=r.glyphStartIndex+1;o<t-1;o++)y.push(Oe(h*l.getoffsetX(o),p,d,i,r.segment,n,a,e,f));y.push(u.last)}else{if(o&&!i){const n=me(e.tileAnchorPoint,a,e.getElevation).point,i=r.lineStartIndex+r.segment+1,o=new t.P(e.lineVertexArray.getx(i),e.lineVertexArray.gety(i)),s=me(o,a,e.getElevation),l=s.signedDistanceFromCamera>0?s.point:function(e,t,r,n,i,o){return xe(e,t,r,1,i,o)}(e.tileAnchorPoint,o,n,0,a,e),u=we(r.writingMode,n,l,c);if(u)return u}const n=Oe(h*l.getoffsetX(r.glyphStartIndex),p,d,i,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,e,f);if(!n||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};y=[n]}for(const e of y)t.aj(u,e.point,e.angle);return{}}function xe(e,t,r,n,i,o){const a=e.add(e.sub(t)._unit()),s=void 0!==i?me(a,i,o.getElevation).point:Se(a.x,a.y,o).point,l=r.sub(s);return r.add(l._mult(n/l.mag()))}function Ie(e,r,n){const i=r.projectionCache;if(i.projections[e])return i.projections[e];const o=new t.P(r.lineVertexArray.getx(e),r.lineVertexArray.gety(e)),a=Se(o.x,o.y,r);if(a.signedDistanceFromCamera>0)return i.projections[e]=a.point,i.anyProjectionOccluded=i.anyProjectionOccluded||a.isOccluded,a.point;const s=e-n.direction;return function(e,t,r,n,i){return xe(e,t,r,n,void 0,i)}(0===n.distanceFromAnchor?r.tileAnchorPoint:new t.P(r.lineVertexArray.getx(s),r.lineVertexArray.gety(s)),o,n.previousVertex,n.absOffsetX-n.distanceFromAnchor+1,r)}function Se(e,r,n){const i=e+n.translation[0],o=r+n.translation[1];let a;return!n.pitchWithMap&&n.projection.useSpecialProjectionForSymbols?(a=n.projection.projectTileCoordinates(i,o,n.unwrappedTileID,n.getElevation),a.point.x=(.5*a.point.x+.5)*n.width,a.point.y=(.5*-a.point.y+.5)*n.height):(a=me(new t.P(i,o),n.labelPlaneMatrix,n.getElevation),a.isOccluded=!1),a}function Ce(e,t,r){return e._unit()._perp()._mult(t*r)}function Pe(e,r,n,i,o,a,s,l,u){if(l.projectionCache.offsets[e])return l.projectionCache.offsets[e];const c=n.add(r);if(e+u.direction<i||e+u.direction>=o)return l.projectionCache.offsets[e]=c,c;const f=Ie(e+u.direction,l,u),h=Ce(f.sub(n),s,u.direction),p=n.add(h),d=f.add(h);return l.projectionCache.offsets[e]=t.ak(a,c,p,d)||c,l.projectionCache.offsets[e]}function Oe(e,t,r,n,i,o,a,s,l){const u=n?e-t:e+t;let c=u>0?1:-1,f=0;n&&(c*=-1,f=Math.PI),c<0&&(f+=Math.PI);let h,p=c>0?o+i:o+i+1;s.projectionCache.cachedAnchorPoint?h=s.projectionCache.cachedAnchorPoint:(h=Se(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,s.projectionCache.cachedAnchorPoint=h);let d,y,g=h,m=h,_=0,v=0;const A=Math.abs(u),b=[];let w;for(;_+v<=A;){if(p+=c,p<o||p>=a)return null;_+=v,m=g,y=d;const e={absOffsetX:A,direction:c,distanceFromAnchor:_,previousVertex:m};if(g=Ie(p,s,e),0===r)b.push(m),w=g.sub(m);else{let t;const n=g.sub(m);t=0===n.mag()?Ce(Ie(p+c,s,e).sub(g),r,c):Ce(n,r,c),y||(y=m.add(t)),d=Pe(p,t,g,o,a,y,r,s,e),b.push(y),w=d.sub(y)}v=w.mag()}const E=w._mult((A-_)/v)._add(y||m),x=f+Math.atan2(g.y-m.y,g.x-m.x);return b.push(E),{point:E,angle:l?x:0,path:b}}const Te=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Me(e,t){for(let r=0;r<e;r++){const e=t.length;t.resize(e+4),t.float32.set(Te,3*e)}}const ke=100;class Re{constructor(e,t,r=new de(e.width+200,e.height+200,25),n=new de(e.width+200,e.height+200,25)){this.transform=e,this.mapProjection=t,this.grid=r,this.ignoredGrid=n,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+ke,this.screenBottomBoundary=e.height+ke,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,r,n,i,o,a,s,l,u,c){const f=e.anchorPointX+s[0],h=e.anchorPointY+s[1],p=this.projectAndGetPerspectiveRatio(n,f,h,i,u),d=this._projectCollisionBox(e,r,n,i,o,a,s,p,u,c),[y,g,m,_]=d.box;return this.mapProjection.useSpecialProjectionForSymbols&&(o?d.allPointsOccluded:this.mapProjection.isOccluded(f,h,i))||p.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(y,g,m,_)||"always"!==t&&this.grid.hitTest(y,g,m,_,t,l)?{box:[y,g,m,_],placeable:!1,offscreen:!1}:{box:[y,g,m,_],placeable:!0,offscreen:this.isOffscreen(y,g,m,_)}}placeCollisionCircles(e,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g){const m=[],_=new t.P(r.anchorX,r.anchorY),v=this.getPerspectiveRatio(a,_.x,_.y,s,g),A=(f?o/v:o*v)/t.ap,b={getElevation:g,labelPlaneMatrix:l,lineVertexArray:n,pitchWithMap:f,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:_,unwrappedTileID:s,width:this.transform.width,height:this.transform.height,translation:y},w=be(A,i,r.lineOffsetX*A,r.lineOffsetY*A,!1,r,!1,b);let E=!1,x=!1,I=!0;if(w){const r=.5*p*v+d,n=new t.P(-100,-100),i=new t.P(this.screenRightBoundary,this.screenBottomBoundary),o=new he,a=w.first,s=w.last;let l=[];for(let e=a.path.length-1;e>=1;e--)l.push(a.path[e]);for(let e=1;e<s.path.length;e++)l.push(s.path[e]);const f=2.5*r;if(u){const e=this.projectPathToScreenSpace(l,b,u);l=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let y=[];if(l.length>0){const e=l[0].clone(),r=l[0].clone();for(let t=1;t<l.length;t++)e.x=Math.min(e.x,l[t].x),e.y=Math.min(e.y,l[t].y),r.x=Math.max(r.x,l[t].x),r.y=Math.max(r.y,l[t].y);y=e.x>=n.x&&r.x<=i.x&&e.y>=n.y&&r.y<=i.y?[l]:r.x<n.x||e.x>i.x||r.y<n.y||e.y>i.y?[]:t.al([l],n.x,n.y,i.x,i.y)}for(const t of y){o.reset(t,.25*r);let n=0;n=o.length<=.5*r?1:Math.ceil(o.paddedLength/f)+1;for(let t=0;t<n;t++){const i=t/Math.max(n-1,1),a=o.lerp(i),s=a.x+ke,l=a.y+ke;m.push(s,l,r,0);const u=s-r,f=l-r,p=s+r,d=l+r;if(I=I&&this.isOffscreen(u,f,p,d),x=x||this.isInsideGrid(u,f,p,d),"always"!==e&&this.grid.hitTestCircle(s,l,r,e,h)&&(E=!0,!c))return{circles:[],offscreen:!1,collisionDetected:E}}}}return{circles:!c&&E||!x||v<this.perspectiveRatioCutoff?[]:m,offscreen:I,collisionDetected:E}}projectPathToScreenSpace(e,t,r){return e.map((e=>me(e,r,t.getElevation)))}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const r=[];let n=1/0,i=1/0,o=-1/0,a=-1/0;for(const s of e){const e=new t.P(s.x+ke,s.y+ke);n=Math.min(n,e.x),i=Math.min(i,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),r.push(e)}const s=this.grid.query(n,i,o,a).concat(this.ignoredGrid.query(n,i,o,a)),l={},u={};for(const e of s){const n=e.key;if(void 0===l[n.bucketInstanceId]&&(l[n.bucketInstanceId]={}),l[n.bucketInstanceId][n.featureIndex])continue;const i=[new t.P(e.x1,e.y1),new t.P(e.x2,e.y1),new t.P(e.x2,e.y2),new t.P(e.x1,e.y2)];t.am(r,i)&&(l[n.bucketInstanceId][n.featureIndex]=!0,void 0===u[n.bucketInstanceId]&&(u[n.bucketInstanceId]=[]),u[n.bucketInstanceId].push(n.featureIndex))}return u}insertCollisionBox(e,t,r,n,i,o){(r?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:o,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,r,n,i,o){const a=r?this.ignoredGrid:this.grid,s={bucketInstanceId:n,featureIndex:i,collisionGroupID:o,overlapMode:t};for(let t=0;t<e.length;t+=4)a.insertCircle(s,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(e,r,n,i,o){const a=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(r,n,i,o):me(new t.P(r,n),e,o);return{point:new t.P((a.point.x+1)/2*this.transform.width+ke,(1-a.point.y)/2*this.transform.height+ke),perspectiveRatio:.5+this.transform.cameraToCenterDistance/a.signedDistanceFromCamera*.5,isOccluded:a.isOccluded,signedDistanceFromCamera:a.signedDistanceFromCamera}}getPerspectiveRatio(e,r,n,i,o){const a=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(r,n,i,o):me(new t.P(r,n),e,o);return.5+this.transform.cameraToCenterDistance/a.signedDistanceFromCamera*.5}isOffscreen(e,t,r,n){return r<ke||e>=this.screenRightBoundary||n<ke||t>this.screenBottomBoundary}isInsideGrid(e,t,r,n){return r>=0&&e<this.gridRightBoundary&&n>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const e=t.an([]);return t.H(e,e,[-100,-100,0]),e}_projectCollisionBox(e,r,n,i,o,a,s,l,u,c){const f=r*l.perspectiveRatio;let h=new t.P(1,0),p=new t.P(0,1);const d=new t.P(e.anchorPointX+s[0],e.anchorPointY+s[1]);if(a&&!o){const e=this.projectAndGetPerspectiveRatio(n,d.x+1,d.y,i,u).point.sub(l.point).unit(),r=Math.atan(e.y/e.x)+(e.x<0?Math.PI:0),o=Math.sin(r),a=Math.cos(r);h=new t.P(a,o),p=new t.P(-o,a)}else if(!a&&o){const e=-this.transform.angle,r=Math.sin(e),n=Math.cos(e);h=new t.P(n,r),p=new t.P(-r,n)}let y=l.point,g=f;if(o){y=d;const e=this.transform.zoom-Math.floor(this.transform.zoom);g=Math.pow(2,-e),g*=this.mapProjection.getPitchedTextCorrection(this.transform,d,i),c||(g*=t.ac(.5+l.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}c&&(y=y.add(h.mult(c.x*g)).add(p.mult(c.y*g)));const m=e.x1*g,_=e.x2*g,v=(m+_)/2,A=e.y1*g,b=e.y2*g,w=(A+b)/2,E=[{offsetX:m,offsetY:A},{offsetX:v,offsetY:A},{offsetX:_,offsetY:A},{offsetX:_,offsetY:w},{offsetX:_,offsetY:b},{offsetX:v,offsetY:b},{offsetX:m,offsetY:b},{offsetX:m,offsetY:w}];let x=[];for(const{offsetX:e,offsetY:r}of E)x.push(new t.P(y.x+h.x*e+p.x*r,y.y+h.y*e+p.y*r));let I=!1;if(o){const e=x.map((e=>this.projectAndGetPerspectiveRatio(n,e.x,e.y,i,u)));I=e.some((e=>!e.isOccluded)),x=e.map((e=>e.point))}else I=!0;return{box:t.ao(x),allPointsOccluded:!I}}}function Be(e,r,n){return r*(t.W/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}class Le{constructor(e,t,r,n){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):n&&r?1:0,this.placed=r}isHidden(){return 0===this.opacity&&!this.placed}}class De{constructor(e,t,r,n,i){this.text=new Le(e?e.text:null,t,r,i),this.icon=new Le(e?e.icon:null,t,n,i)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class je{constructor(e,t,r){this.text=e,this.icon=t,this.skipFade=r}}class Fe{constructor(){this.invProjMatrix=t.F(),this.viewportMatrix=t.F(),this.circles=[]}}class Ne{constructor(e,t,r,n,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=r,this.bucketIndex=n,this.tileID=i}}class Ze{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Ue(e,r,n,i,o){const{horizontalAlign:a,verticalAlign:s}=t.au(e);return new t.P(-(a-.5)*r+i[0]*o,-(s-.5)*n+i[1]*o)}class Qe{constructor(e,t,r,n,i,o){this.transform=e.clone(),this.terrain=r,this.collisionIndex=new Re(this.transform,t),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Ze(i),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const t=this.terrain;return t?(r,n)=>t.getElevation(e,r,n):null}getBucketParts(e,r,n,i){const o=n.getBucket(r),a=n.latestFeatureIndex;if(!o||!a||r.id!==o.layerIds[0])return;const s=n.collisionBoxArray,l=o.layers[0].layout,u=o.layers[0].paint,c=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),f=n.tileSize/t.W,h=n.tileID.toUnwrapped(),p=this.transform.calculatePosMatrix(h),d="map"===l.get("text-pitch-alignment"),y="map"===l.get("text-rotation-alignment"),g=Be(n,1,this.transform.zoom),m=this.collisionIndex.mapProjection.translatePosition(this.transform,n,u.get("text-translate"),u.get("text-translate-anchor")),_=this.collisionIndex.mapProjection.translatePosition(this.transform,n,u.get("icon-translate"),u.get("icon-translate-anchor")),v=ye(p,d,y,this.transform,g);let A=null;if(d){const e=ge(p,d,y,this.transform,g);A=t.K([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new Ne(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,n.tileID);const b={bucket:o,layout:l,translationText:m,translationIcon:_,posMatrix:p,unwrappedTileID:h,textLabelPlaneMatrix:v,labelToScreenMatrix:A,scale:c,textPixelRatio:f,holdingForFade:n.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.ag(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const t of o.sortKeyRanges){const{sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:i}=t;e.push({sortKey:r,symbolInstanceStart:n,symbolInstanceEnd:i,parameters:b})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:b})}attemptAnchorPlacement(e,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v){const A=t.aq[e.textAnchor],b=[e.textOffset0,e.textOffset1],w=Ue(A,n,i,b,o),E=this.collisionIndex.placeCollisionBox(r,h,l,u,c,s,a,g,f.predicate,v,w);if((!_||this.collisionIndex.placeCollisionBox(_,h,l,u,c,s,a,m,f.predicate,v,w).placeable)&&E.placeable){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(e=this.prevPlacement.variableOffsets[p.crossTileID].anchor),0===p.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[p.crossTileID]={textOffset:b,width:n,height:i,anchor:A,textBoxScale:o,prevAnchor:e},this.markUsedJustification(d,A,p,y),d.allowVerticalPlacement&&(this.markUsedOrientation(d,y,p),this.placedOrientations[p.crossTileID]=y),{shift:w,placedGlyphBoxes:E}}}placeLayerBucketPart(e,r,n){const{bucket:i,layout:o,translationText:a,translationIcon:s,posMatrix:l,unwrappedTileID:u,textLabelPlaneMatrix:c,labelToScreenMatrix:f,textPixelRatio:h,holdingForFade:p,collisionBoxArray:d,partiallyEvaluatedTextSize:y,collisionGroup:g}=e.parameters,m=o.get("text-optional"),_=o.get("icon-optional"),v=t.ar(o,"text-overlap","text-allow-overlap"),A="always"===v,b=t.ar(o,"icon-overlap","icon-allow-overlap"),w="always"===b,E="map"===o.get("text-rotation-alignment"),x="map"===o.get("text-pitch-alignment"),I="none"!==o.get("icon-text-fit"),S="viewport-y"===o.get("symbol-z-order"),C=A&&(w||!i.hasIconData()||_),P=w&&(A||!i.hasTextData()||m);!i.collisionArrays&&d&&i.deserializeCollisionBoxes(d);const O=this._getTerrainElevationFunc(this.retainedQueryData[i.bucketInstanceId].tileID),T=(e,d,w)=>{var S,T;if(r[e.crossTileID])return;if(p)return void(this.placements[e.crossTileID]=new je(!1,!1,!1));let M=!1,k=!1,R=!0,B=null,L={box:null,placeable:!1,offscreen:null},D={box:null,placeable:!1,offscreen:null},j=null,F=null,N=null,Z=0,U=0,Q=0;d.textFeatureIndex?Z=d.textFeatureIndex:e.useRuntimeCollisionCircles&&(Z=e.featureIndex),d.verticalTextFeatureIndex&&(U=d.verticalTextFeatureIndex);const G=d.textBox;if(G){const r=r=>{let n=t.ah.horizontal;if(i.allowVerticalPlacement&&!r&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,n=t,this.markUsedOrientation(i,n,e))}return n},o=(r,n)=>{if(i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&d.verticalTextBox){for(const e of i.writingModes)if(e===t.ah.vertical?(L=n(),D=L):L=r(),L&&L.placeable)break}else L=r()},c=e.textAnchorOffsetStartIndex,f=e.textAnchorOffsetEndIndex;if(f===c){const n=(t,r)=>{const n=this.collisionIndex.placeCollisionBox(t,v,h,l,u,x,E,a,g.predicate,O);return n&&n.placeable&&(this.markUsedOrientation(i,r,e),this.placedOrientations[e.crossTileID]=r),n};o((()=>n(G,t.ah.horizontal)),(()=>{const r=d.verticalTextBox;return i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&r?n(r,t.ah.vertical):{box:null,offscreen:null}})),r(L&&L.placeable)}else{let p=t.aq[null===(T=null===(S=this.prevPlacement)||void 0===S?void 0:S.variableOffsets[e.crossTileID])||void 0===T?void 0:T.anchor];const y=(r,o,d)=>{const y=r.x2-r.x1,m=r.y2-r.y1,_=e.textBoxScale,A=I&&"never"===b?o:null;let w=null,S="never"===v?1:2,C="never";p&&S++;for(let t=0;t<S;t++){for(let t=c;t<f;t++){const n=i.textAnchorOffsets.get(t);if(p&&n.textAnchor!==p)continue;const o=this.attemptAnchorPlacement(n,r,y,m,_,E,x,h,l,u,g,C,e,i,d,a,s,A,O);if(o&&(w=o.placedGlyphBoxes,w&&w.placeable))return M=!0,B=o.shift,w}p?p=null:C=v}return n&&!w&&(w={box:this.collisionIndex.placeCollisionBox(G,"always",h,l,u,x,E,a,g.predicate,O,new t.P(0,0)).box,offscreen:!1,placeable:!1}),w};o((()=>y(G,d.iconBox,t.ah.horizontal)),(()=>{const r=d.verticalTextBox;return i.allowVerticalPlacement&&(!L||!L.placeable)&&e.numVerticalGlyphVertices>0&&r?y(r,d.verticalIconBox,t.ah.vertical):{box:null,occluded:!0,offscreen:null}})),L&&(M=L.placeable,R=L.offscreen);const m=r(L&&L.placeable);if(!M&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(i,t.anchor,e,m))}}}if(j=L,M=j&&j.placeable,R=j&&j.offscreen,e.useRuntimeCollisionCircles){const r=i.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),s=t.ai(i.textSizeData,y,r),h=o.get("text-padding");F=this.collisionIndex.placeCollisionCircles(v,r,i.lineVertexArray,i.glyphOffsetArray,s,l,u,c,f,n,x,g.predicate,e.collisionCircleDiameter,h,a,O),F.circles.length&&F.collisionDetected&&!n&&t.w("Collisions detected, but collision boxes are not shown"),M=A||F.circles.length>0&&!F.collisionDetected,R=R&&F.offscreen}if(d.iconFeatureIndex&&(Q=d.iconFeatureIndex),d.iconBox){const e=e=>this.collisionIndex.placeCollisionBox(e,b,h,l,u,x,E,s,g.predicate,O,I&&B?B:void 0);D&&D.placeable&&d.verticalIconBox?(N=e(d.verticalIconBox),k=N.placeable):(N=e(d.iconBox),k=N.placeable),R=R&&N.offscreen}const z=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,q=_||0===e.numIconVertices;z||q?q?z||(k=k&&M):M=k&&M:k=M=k&&M;const V=k&&N.placeable;if(M&&j.placeable&&this.collisionIndex.insertCollisionBox(j.box,v,o.get("text-ignore-placement"),i.bucketInstanceId,D&&D.placeable&&U?U:Z,g.ID),V&&this.collisionIndex.insertCollisionBox(N.box,b,o.get("icon-ignore-placement"),i.bucketInstanceId,Q,g.ID),F&&M&&this.collisionIndex.insertCollisionCircles(F.circles,v,o.get("text-ignore-placement"),i.bucketInstanceId,Z,g.ID),n&&this.storeCollisionData(i.bucketInstanceId,w,d,j,N,F),0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===i.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new je(M||C,k||P,R||i.justReloaded),r[e.crossTileID]=!0};if(S){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=i.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const r=t[e];T(i.symbolInstances.get(r),i.collisionArrays[r],r)}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)T(i.symbolInstances.get(t),i.collisionArrays[t],t);if(n&&i.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[i.bucketInstanceId];t.as(e.invProjMatrix,l),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}i.justReloaded=!1}storeCollisionData(e,t,r,n,i,o){if(r.textBox||r.iconBox){let o,a;this.collisionBoxArrays.has(e)?o=this.collisionBoxArrays.get(e):(o=new Map,this.collisionBoxArrays.set(e,o)),o.has(t)?a=o.get(t):(a={text:null,icon:null},o.set(t,a)),r.textBox&&(a.text=n.box),r.iconBox&&(a.icon=i.box)}if(o){let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Fe);for(let e=0;e<o.circles.length;e+=4)t.circles.push(o.circles[e+0]),t.circles.push(o.circles[e+1]),t.circles.push(o.circles[e+2]),t.circles.push(o.collisionDetected?1:0)}}markUsedJustification(e,r,n,i){let o;o=i===t.ah.vertical?n.verticalPlacedTextSymbolIndex:{left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex}[t.at(r)];const a=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex,n.verticalPlacedTextSymbolIndex];for(const t of a)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:n.crossTileID)}markUsedOrientation(e,r,n){const i=r===t.ah.horizontal||r===t.ah.horizontalOnly?r:0,o=r===t.ah.vertical?r:0,a=[n.leftJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.rightJustifiedTextSymbolIndex];for(const t of a)e.text.placedSymbolArray.get(t).placedOrientation=i;n.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let r=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const n=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],o=i[e];o?(this.opacities[e]=new De(o,n,t.text,t.icon),r=r||t.text!==o.text.placed||t.icon!==o.icon.placed):(this.opacities[e]=new De(null,n,t.text,t.icon,t.skipFade),r=r||t.text||t.icon)}for(const e in i){const t=i[e];if(!this.opacities[e]){const i=new De(t,n,!1,!1);i.isHidden()||(this.opacities[e]=i,r=r||t.text.placed||t.icon.placed)}}for(const e in o)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=o[e]);for(const e in a)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=a[e]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const r={};for(const n of t){const t=n.getBucket(e);t&&n.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n.tileID,r,n.collisionBoxArray)}}updateBucketOpacities(e,r,n,i){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const o=e.layers[0],a=o.layout,s=new De(null,0,!1,!1,!0),l=a.get("text-allow-overlap"),u=a.get("icon-allow-overlap"),c=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),f="map"===a.get("text-rotation-alignment"),h="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),d=new De(null,0,l&&(u||!e.hasIconData()||a.get("icon-optional")),u&&(l||!e.hasTextData()||a.get("text-optional")),!0);!e.collisionArrays&&i&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(i);const y=(e,t,r)=>{for(let n=0;n<t/4;n++)e.opacityVertexArray.emplaceBack(r);e.hasVisibleVertices=e.hasVisibleVertices||r!==Je},g=this.collisionBoxArrays.get(e.bucketInstanceId);for(let r=0;r<e.symbolInstances.length;r++){const i=e.symbolInstances.get(r),{numHorizontalGlyphVertices:o,numVerticalGlyphVertices:a,crossTileID:l}=i;let u=this.opacities[l];n[l]?u=s:u||(u=d,this.opacities[l]=u),n[l]=!0;const m=i.numIconVertices>0,_=this.placedOrientations[i.crossTileID],v=_===t.ah.vertical,A=_===t.ah.horizontal||_===t.ah.horizontalOnly;if(o>0||a>0){const t=Xe(u.text);y(e.text,o,v?Je:t),y(e.text,a,A?Je:t);const r=u.text.isHidden();[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=r||v?1:0)})),i.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).hidden=r||A?1:0);const n=this.variableOffsets[i.crossTileID];n&&this.markUsedJustification(e,n.anchor,i,_);const s=this.placedOrientations[i.crossTileID];s&&(this.markUsedJustification(e,"left",i,s),this.markUsedOrientation(e,s,i))}if(m){const t=Xe(u.icon),r=!(p&&i.verticalPlacedIconSymbolIndex&&v);i.placedIconSymbolIndex>=0&&(y(e.icon,i.numIconVertices,r?t:Je),e.icon.placedSymbolArray.get(i.placedIconSymbolIndex).hidden=u.icon.isHidden()),i.verticalPlacedIconSymbolIndex>=0&&(y(e.icon,i.numVerticalIconVertices,r?Je:t),e.icon.placedSymbolArray.get(i.verticalPlacedIconSymbolIndex).hidden=u.icon.isHidden())}const b=g&&g.has(r)?g.get(r):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[r];if(n){let r=new t.P(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(c){const e=this.variableOffsets[l];e?(r=Ue(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),f&&r._rotate(h?this.transform.angle:-this.transform.angle)):t=!1}if(n.textBox||n.verticalTextBox){let i;n.textBox&&(i=v),n.verticalTextBox&&(i=A),Ge(e.textCollisionBox.collisionVertexArray,u.text.placed,!t||i,b.text,r.x,r.y)}}if(n.iconBox||n.verticalIconBox){const t=Boolean(!A&&n.verticalIconBox);let i;n.iconBox&&(i=t),n.verticalIconBox&&(i=!t),Ge(e.iconCollisionBox.collisionVertexArray,u.icon.placed,i,b.icon,p?r.x:0,p?r.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const r=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*r>e}setStale(){this.stale=!0}}function Ge(e,t,r,n,i,o){n&&0!==n.length||(n=[0,0,0,0]);const a=n[0]-ke,s=n[1]-ke,l=n[2]-ke,u=n[3]-ke;e.emplaceBack(t?1:0,r?1:0,i||0,o||0,a,s),e.emplaceBack(t?1:0,r?1:0,i||0,o||0,l,s),e.emplaceBack(t?1:0,r?1:0,i||0,o||0,l,u),e.emplaceBack(t?1:0,r?1:0,i||0,o||0,a,u)}const ze=Math.pow(2,25),qe=Math.pow(2,24),Ve=Math.pow(2,17),We=Math.pow(2,16),Ke=Math.pow(2,9),He=Math.pow(2,8),Ye=Math.pow(2,1);function Xe(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*ze+t*qe+r*Ve+t*We+r*Ke+t*He+r*Ye+t}const Je=0;function $e(){return{isOccluded:(e,t,r)=>!1,getPitchedTextCorrection:(e,t,r)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(e,t,r,n){throw new Error("Not implemented.")},translatePosition:(e,t,r,n)=>function(e,t,r,n,i=!1){if(!r[0]&&!r[1])return[0,0];const o=i?"map"===n?e.angle:0:"viewport"===n?-e.angle:0;if(o){const e=Math.sin(o),t=Math.cos(o);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}return[i?r[0]:Be(t,r[0],e.zoom),i?r[1]:Be(t,r[1],e.zoom)]}(e,t,r,n),getCircleRadiusCorrection:e=>1}}class et{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,r,n,i){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,n,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,r),this._currentPartIndex++,i())return!0;return!1}}class tt{constructor(e,t,r,n,i,o,a,s){this.placement=new Qe(e,$e(),t,o,a,s),this._currentPlacementIndex=r.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(e,t,r){const n=o.now(),i=()=>!this._forceFullPlacement&&o.now()-n>2;for(;this._currentPlacementIndex>=0;){const n=t[e[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===n.type&&(!n.minzoom||n.minzoom<=o)&&(!n.maxzoom||n.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new et(n)),this._inProgressLayer.continuePlacement(r[n.source],this.placement,this._showCollisionBoxes,n,i))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const rt=512/t.W/2;class nt{constructor(e,r,n){this.tileID=e,this.bucketInstanceId=n,this._symbolsByKey={};const i=new Map;for(let e=0;e<r.length;e++){const t=r.get(e),n=t.key,o=i.get(n);o?o.push(t):i.set(n,[t])}for(const[e,r]of i){const n={positions:r.map((e=>({x:Math.floor(e.anchorX*rt),y:Math.floor(e.anchorY*rt)}))),crossTileIDs:r.map((e=>e.crossTileID))};if(n.positions.length>128){const e=new t.av(n.positions.length,16,Uint16Array);for(const{x:t,y:r}of n.positions)e.add(t,r);e.finish(),delete n.positions,n.index=e}this._symbolsByKey[e]=n}}getScaledCoordinates(e,r){const{x:n,y:i,z:o}=this.tileID.canonical,{x:a,y:s,z:l}=r.canonical,u=rt/Math.pow(2,l-o),c=(s*t.W+e.anchorY)*u,f=i*t.W*rt;return{x:Math.floor((a*t.W+e.anchorX)*u-n*t.W*rt),y:Math.floor(c-f)}}findMatches(e,t,r){const n=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let i=0;i<e.length;i++){const o=e.get(i);if(o.crossTileID)continue;const a=this._symbolsByKey[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);if(a.index){const e=a.index.range(s.x-n,s.y-n,s.x+n,s.y+n).sort();for(const t of e){const e=a.crossTileIDs[t];if(!r[e]){r[e]=!0,o.crossTileID=e;break}}}else if(a.positions)for(let e=0;e<a.positions.length;e++){const t=a.positions[e],i=a.crossTileIDs[e];if(Math.abs(t.x-s.x)<=n&&Math.abs(t.y-s.y)<=n&&!r[i]){r[i]=!0,o.crossTileID=i;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:e})=>e))}}class it{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ot{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const r=this.indexes[e],n={};for(const e in r){const i=r[e];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),n[i.tileID.key]=i}this.indexes[e]=n}this.lng=e}addBucket(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const n=this.usedCrossTileIDs[e.overscaledZ];for(const r in this.indexes){const i=this.indexes[r];if(Number(r)>e.overscaledZ)for(const r in i){const o=i[r];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,n)}else{const o=i[e.scaledTo(Number(r)).key];o&&o.findMatches(t.symbolInstances,e,n)}}for(let e=0;e<t.symbolInstances.length;e++){const i=t.symbolInstances.get(e);i.crossTileID||(i.crossTileID=r.generate(),n[i.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new nt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const r of t.getCrossTileIDsLists())for(const t of r)delete this.usedCrossTileIDs[e][t]}removeStaleBuckets(e){let t=!1;for(const r in this.indexes){const n=this.indexes[r];for(const i in n)e[n[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,n[i]),delete n[i],t=!0)}return t}}class at{constructor(){this.layerIndexes={},this.crossTileIDs=new it,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,r){let n=this.layerIndexes[e.id];void 0===n&&(n=this.layerIndexes[e.id]=new ot);let i=!1;const o={};n.handleWrapJump(r);for(const r of t){const t=r.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(r.tileID,t,this.crossTileIDs)&&(i=!0),o[t.bucketInstanceId]=!0)}return n.removeStaleBuckets(o)&&(i=!0),i}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const st=(e,r)=>t.t(e,r&&r.filter((e=>"source.canvas"!==e.identifier))),lt=t.aw();class ut extends t.E{constructor(e,r={}){super(),this._rtlPluginLoaded=()=>{for(const e in this.sourceCaches){const t=this.sourceCaches[e].getSource().type;"vector"!==t&&"geojson"!==t||this.sourceCaches[e].reload()}},this.map=e,this.dispatcher=new F(j(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",((e,t)=>this.getGlyphs(e,t))),this.dispatcher.registerMessageHandler("GI",((e,t)=>this.getImages(e,t))),this.imageManager=new E,this.imageManager.setEventedParent(this),this.glyphManager=new C(e._requestManager,r.localIdeographFontFamily),this.lineAtlas=new M(256,512),this.crossTileSymbolIndex=new at,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",t.ay()),oe().on(re,this._rtlPluginLoaded),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.sourceCaches[e.sourceId];if(!t)return;const r=t.getSource();if(r&&r.vectorLayerIds)for(const e in this._layers){const t=this._layers[e];t.source===r.id&&this._validateLayer(t)}}))}loadURL(e,r={},n){this.fire(new t.k("dataloading",{dataType:"style"})),r.validate="boolean"!=typeof r.validate||r.validate;const i=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController,t.h(i,this._loadStyleRequest).then((e=>{this._loadStyleRequest=null,this._load(e.data,r,n)})).catch((e=>{this._loadStyleRequest=null,e&&this.fire(new t.j(e))}))}loadJSON(e,r={},n){this.fire(new t.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,r.validate=!1!==r.validate,this._load(e,r,n)})).catch((()=>{}))}loadEmpty(){this.fire(new t.k("dataloading",{dataType:"style"})),this._load(lt,{validate:!1})}_load(e,r,n){var i;const o=r.transformStyle?r.transformStyle(n,e):e;if(!r.validate||!st(this,t.x(o))){this._loaded=!0,this.stylesheet=o;for(const e in o.sources)this.addSource(e,o.sources[e],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs),this._createLayers(),this.light=new T(this.stylesheet.light),this.map.setTerrain(null!==(i=this.stylesheet.terrain)&&void 0!==i?i:null),this.fire(new t.k("data",{dataType:"style"})),this.fire(new t.k("style.load"))}}_createLayers(){const e=t.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map((e=>e.id)),this._layers={},this._serializedLayers=null;for(const r of e){const e=t.aA(r);e.setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=e}}_loadSprite(e,r=!1,n=void 0){let i;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(e,r,n,i){return t._(this,void 0,void 0,(function*(){const a=v(e),s=n>1?"@2x":"",l={},u={};for(const{id:e,url:n}of a){const o=r.transformRequest(A(n,s,".json"),"SpriteJSON");l[e]=t.h(o,i);const a=r.transformRequest(A(n,s,".png"),"SpriteImage");u[e]=p.getImage(a,i)}return yield Promise.all([...Object.values(l),...Object.values(u)]),function(e,r){return t._(this,void 0,void 0,(function*(){const t={};for(const n in e){t[n]={};const i=o.getImageCanvasContext((yield r[n]).data),a=(yield e[n]).data;for(const e in a){const{width:r,height:o,x:s,y:l,sdf:u,pixelRatio:c,stretchX:f,stretchY:h,content:p,textFitWidth:d,textFitHeight:y}=a[e];t[n][e]={data:null,pixelRatio:c,sdf:u,stretchX:f,stretchY:h,content:p,textFitWidth:d,textFitHeight:y,spriteData:{width:r,height:o,x:s,y:l,context:i}}}}return t}))}(l,u)}))}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((e=>{if(this._spriteRequest=null,e)for(const t in e){this._spritesImagesIds[t]=[];const n=this._spritesImagesIds[t]?this._spritesImagesIds[t].filter((t=>!(t in e))):[];for(const e of n)this.imageManager.removeImage(e),this._changedImages[e]=!0;for(const n in e[t]){const i="default"===t?n:`${t}:${n}`;this._spritesImagesIds[t].push(i),i in this.imageManager.images?this.imageManager.updateImage(i,e[t][n],!1):this.imageManager.addImage(i,e[t][n]),r&&(this._changedImages[i]=!0)}}})).catch((e=>{this._spriteRequest=null,i=e,this.fire(new t.j(i))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),r&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"})),n&&n(i)}))}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}_validateLayer(e){const r=this.sourceCaches[e.source];if(!r)return;const n=e.sourceLayer;if(!n)return;const i=r.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(n))&&this.fire(new t.j(new Error(`Source layer "${n}" does not exist on source "${i.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e){const t=this._serializedAllLayers();if(!e||0===e.length)return Object.values(t);const r=[];for(const n of e)t[n]&&r.push(t[n]);return r}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const t=Object.keys(this._layers);for(const r of t){const t=this._layers[r];"custom"!==t.type&&(e[r]=t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const r=this._changed;if(r){const t=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(t.length||r.length)&&this._updateWorkerLayers(t,r);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error(`Invalid action ${t}`);this._clearSource(e)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const t in this._updatedPaintProps)this._layers[t].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}const n={};for(const e in this.sourceCaches){const t=this.sourceCaches[e];n[e]=t.used,t.used=!1}for(const t of this._order){const r=this._layers[t];r.recalculate(e,this._availableImages),!r.isHidden(e.zoom)&&r.source&&(this.sourceCaches[r.source].used=!0)}for(const e in n){const r=this.sourceCaches[e];!!n[e]!=!!r.used&&r.fire(new t.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:e}))}this.light.recalculate(e),this.z=e.zoom,r&&this.fire(new t.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,r={}){var n;this._checkLoaded();const i=this.serialize();if(e=r.transformStyle?r.transformStyle(i,e):e,(null===(n=r.validate)||void 0===n||n)&&st(this,t.x(e)))return!1;(e=t.aB(e)).layers=t.az(e.layers);const o=t.aC(i,e),a=this._getOperationsToPerform(o);if(a.unimplemented.length>0)throw new Error(`Unimplemented: ${a.unimplemented.join(", ")}.`);if(0===a.operations.length)return!1;for(const e of a.operations)e();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const t=[],r=[];for(const n of e)switch(n.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":t.push((()=>this.addLayer.apply(this,n.args)));break;case"removeLayer":t.push((()=>this.removeLayer.apply(this,n.args)));break;case"setPaintProperty":t.push((()=>this.setPaintProperty.apply(this,n.args)));break;case"setLayoutProperty":t.push((()=>this.setLayoutProperty.apply(this,n.args)));break;case"setFilter":t.push((()=>this.setFilter.apply(this,n.args)));break;case"addSource":t.push((()=>this.addSource.apply(this,n.args)));break;case"removeSource":t.push((()=>this.removeSource.apply(this,n.args)));break;case"setLayerZoomRange":t.push((()=>this.setLayerZoomRange.apply(this,n.args)));break;case"setLight":t.push((()=>this.setLight.apply(this,n.args)));break;case"setGeoJSONSourceData":t.push((()=>this.setGeoJSONSourceData.apply(this,n.args)));break;case"setGlyphs":t.push((()=>this.setGlyphs.apply(this,n.args)));break;case"setSprite":t.push((()=>this.setSprite.apply(this,n.args)));break;case"setTerrain":t.push((()=>this.map.setTerrain.apply(this,n.args)));break;case"setTransition":t.push((()=>{}));break;default:r.push(n.command)}return{operations:t,unimplemented:r}}addImage(e,r){if(this.getImage(e))return this.fire(new t.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,r),this._afterImageUpdated(e)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new t.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,r,n={}){if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(t.x.source,`sources.${e}`,r,null,n))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const i=this.sourceCaches[e]=new ue(e,r,this.dispatcher);i.style=this,i.setEventedParent(this,(()=>({isSourceLoaded:i.loaded(),source:i.serialize(),sourceId:e}))),i.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===e)return this.fire(new t.j(new Error(`Source "${e}" cannot be removed while layer "${r}" is using it.`)));const r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error(`There is no source with this ID=${e}`);const r=this.sourceCaches[e].getSource();if("geojson"!==r.type)throw new Error(`geojsonSource.type is ${r.type}, which is !== 'geojson`);r.setData(t),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,r,n={}){this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.j(new Error(`Layer "${i}" already exists on this map.`)));let o;if("custom"===e.type){if(st(this,t.aD(e)))return;o=t.aA(e)}else{if("source"in e&&"object"==typeof e.source&&(this.addSource(i,e.source),e=t.aB(e),e=t.e(e,{source:i})),this._validate(t.x.layer,`layers.${i}`,e,{arrayIndex:-1},n))return;o=t.aA(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}})}const a=r?this._order.indexOf(r):this._order.length;if(r&&-1===a)this.fire(new t.j(new Error(`Cannot add layer "${i}" before non-existing layer "${r}".`)));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(e,r){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===r)return;const n=this._order.indexOf(e);this._order.splice(n,1);const i=r?this._order.indexOf(r):this._order.length;r&&-1===i?this.fire(new t.j(new Error(`Cannot move layer "${e}" before non-existing layer "${r}".`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const r=this._layers[e];if(!r)return void this.fire(new t.j(new Error(`Cannot remove non-existing layer "${e}".`)));r.setEventedParent(null);const n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,r,n){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===r&&i.maxzoom===n||(null!=r&&(i.minzoom=r),null!=n&&(i.maxzoom=n),this._updateLayer(i)):this.fire(new t.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,r,n={}){this._checkLoaded();const i=this.getLayer(e);if(i){if(!t.aE(i.filter,r))return null==r?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.x.filter,`layers.${i.id}.filter`,r,null,n)||(i.filter=t.aB(r),this._updateLayer(i)))}else this.fire(new t.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return t.aB(this.getLayer(e).filter)}setLayoutProperty(e,r,n,i={}){this._checkLoaded();const o=this.getLayer(e);o?t.aE(o.getLayoutProperty(r),n)||(o.setLayoutProperty(r,n,i),this._updateLayer(o)):this.fire(new t.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,r){const n=this.getLayer(e);if(n)return n.getLayoutProperty(r);this.fire(new t.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,r,n,i={}){this._checkLoaded();const o=this.getLayer(e);o?t.aE(o.getPaintProperty(r),n)||(o.setPaintProperty(r,n,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new t.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(e,r){this._checkLoaded();const n=e.source,i=e.sourceLayer,o=this.sourceCaches[n];if(void 0===o)return void this.fire(new t.j(new Error(`The source '${n}' does not exist in the map's style.`)));const a=o.getSource().type;"geojson"===a&&i?this.fire(new t.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||i?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,e.id,r)):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,r){this._checkLoaded();const n=e.source,i=this.sourceCaches[n];if(void 0===i)return void this.fire(new t.j(new Error(`The source '${n}' does not exist in the map's style.`)));const o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?r&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.j(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(a,e.id,r):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const r=e.source,n=e.sourceLayer,i=this.sourceCaches[r];if(void 0!==i)return"vector"!==i.getSource().type||n?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),i.getFeatureState(n,e.id)):void this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.j(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return t.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=t.aF(this.sourceCaches,(e=>e.serialize())),r=this._serializeByIds(this._order),n=this.map.getTerrain()||void 0,i=this.stylesheet;return t.aG({version:i.version,name:i.name,metadata:i.metadata,light:i.light,center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch,sprite:i.sprite,glyphs:i.glyphs,transition:i.transition,sources:e,layers:r,terrain:n},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,r={},n=[];for(let i=this._order.length-1;i>=0;i--){const o=this._order[i];if(t(o)){r[o]=i;for(const t of e){const e=t[o];if(e)for(const t of e)n.push(t)}}}n.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=n.length-1;e>=0;e--){const t=n[e].feature;if(r[t.layer.id]<o)break;i.push(t),n.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(e,r,n){r&&r.filter&&this._validate(t.x.filter,"queryRenderedFeatures.filter",r.filter,null,r);const i={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new t.j(new Error("parameters.layers must be an Array."))),[];for(const e of r.layers){const r=this._layers[e];if(!r)return this.fire(new t.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[r.source]=!0}}const o=[];r.availableImages=this._availableImages;const a=this._serializedAllLayers();for(const t in this.sourceCaches)r.layers&&!i[t]||o.push(U(this.sourceCaches[t],this._layers,a,e,r,n));return this.placement&&o.push(function(e,t,r,n,i,o,a){const s={},l=o.queryRenderedSymbols(n),u=[];for(const e of Object.keys(l).map(Number))u.push(a[e]);u.sort(Q);for(const r of u){const n=r.featureIndex.lookupSymbolFeatures(l[r.bucketInstanceId],t,r.bucketIndex,r.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in n){const t=s[e]=s[e]||[],i=n[e];i.sort(((e,t)=>{const n=r.featureSortOrder;if(n){const r=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));for(const e of i)t.push(e)}}for(const t in s)s[t].forEach((n=>{const i=n.feature,o=r[e[t].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}));return s}(this._layers,a,this.sourceCaches,e,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,r){r&&r.filter&&this._validate(t.x.filter,"querySourceFeatures.filter",r.filter,null,r);const n=this.sourceCaches[e];return n?function(e,t){const r=e.getRenderableIds().map((t=>e.getTileByID(t))),n=[],i={};for(let e=0;e<r.length;e++){const o=r[e],a=o.tileID.canonical.key;i[a]||(i[a]=!0,o.querySourceFeatures(n,t))}return n}(n,r):[]}getLight(){return this.light.getLight()}setLight(e,r={}){this._checkLoaded();const n=this.light.getLight();let i=!1;for(const r in e)if(!t.aE(e[r],n[r])){i=!0;break}if(!i)return;const a={now:o.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,r),this.light.updateTransitions(a)}_validate(e,r,n,i,o={}){return(!o||!1!==o.validate)&&st(this,e.call(t.x,t.e({key:r,style:this.serialize(),value:n,styleSpec:t.v},i)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),oe().off(re,this._rtlPluginLoaded);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this.sourceCaches){const t=this.sourceCaches[e];t.setEventedParent(null),t.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const t in this.sourceCaches)this.sourceCaches[t].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,t,r,n,i=!1){let a=!1,s=!1;const l={};for(const t of this._order){const r=this._layers[t];if("symbol"!==r.type)continue;if(!l[r.source]){const e=this.sourceCaches[r.source];l[r.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const n=this.crossTileSymbolIndex.addLayer(r,l[r.source],e.center.lng);a=a||n}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((i=i||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.now(),e.zoom))&&(this.pauseablePlacement=new tt(e,this.map.terrain,this._order,i,t,r,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,r){return t._(this,void 0,void 0,(function*(){const e=yield this.imageManager.getImages(r.icons);this._updateTilesForChangedImages();const t=this.sourceCaches[r.source];return t&&t.setDependencies(r.tileID.key,r.type,r.icons),e}))}getGlyphs(e,r){return t._(this,void 0,void 0,(function*(){const e=yield this.glyphManager.getGlyphs(r.stacks),t=this.sourceCaches[r.source];return t&&t.setDependencies(r.tileID.key,r.type,[""]),e}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,r={}){this._checkLoaded(),e&&this._validate(t.x.glyphs,"glyphs",e,null,r)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,r,n={},i){this._checkLoaded();const o=[{id:e,url:r}],a=[...v(this.stylesheet.sprite),...o];this._validate(t.x.sprite,"sprite",a,null,n)||(this.stylesheet.sprite=a,this._loadSprite(o,!0,i))}removeSprite(e){this._checkLoaded();const r=v(this.stylesheet.sprite);if(r.find((t=>t.id===e))){if(this._spritesImagesIds[e])for(const t of this._spritesImagesIds[e])this.imageManager.removeImage(t),this._changedImages[t]=!0;r.splice(r.findIndex((t=>t.id===e)),1),this.stylesheet.sprite=r.length>0?r:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}else this.fire(new t.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return v(this.stylesheet.sprite)}setSprite(e,r={},n){this._checkLoaded(),e&&this._validate(t.x.sprite,"sprite",e,null,r)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,n):(this._unloadSprite(),n&&n(null)))}}var ct=t.X([{name:"a_pos",type:"Int16",components:2}]),ft="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const ht={prelude:pt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:pt("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:pt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:pt("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:pt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pt("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:pt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:pt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:pt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:pt("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:pt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:pt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:pt("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:pt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:pt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pt("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:pt("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:pt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:pt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:pt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:pt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:pt("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:pt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:pt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:pt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ft),terrainDepth:pt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ft),terrainCoords:pt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ft)};function pt(e,t){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n=t.match(/attribute ([\w]+) ([\w]+)/g),i=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(i):i,s={};return{fragmentSource:e=e.replace(r,((e,t,r,n,i)=>(s[i]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nvarying ${r} ${n} ${i};\n#else\nuniform ${r} ${n} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${r} ${n} ${i} = u_${i};\n#endif\n`))),vertexSource:t=t.replace(r,((e,t,r,n,i)=>{const o="float"===n?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${r} ${o} a_${i};\nvarying ${r} ${n} ${i};\n#else\nuniform ${r} ${n} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${r} ${n} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${r} ${n} ${i} = u_${i};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${r} ${o} a_${i};\n#else\nuniform ${r} ${n} u_${i};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${r} ${n} ${i} = a_${i};\n#else\n    ${r} ${n} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${r} ${n} ${i} = unpack_mix_${a}(a_${i}, u_${i}_t);\n#else\n    ${r} ${n} ${i} = u_${i};\n#endif\n`})),staticAttributes:n,staticUniforms:a}}class dt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,r,n,i,o,a,s,l){this.context=e;let u=this.boundPaintVertexBuffers.length!==n.length;for(let e=0;!u&&e<n.length;e++)this.boundPaintVertexBuffers[e]!==n[e]&&(u=!0);!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==r||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==l?this.freshBind(t,r,n,i,o,a,s,l):(e.bindVertexArray.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind(),l&&l.bind())}freshBind(e,t,r,n,i,o,a,s){const l=e.numAttributes,u=this.context,c=u.gl;this.vao&&this.destroy(),this.vao=u.createVertexArray(),u.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=n,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=s,t.enableAttributes(c,e);for(const t of r)t.enableAttributes(c,e);o&&o.enableAttributes(c,e),a&&a.enableAttributes(c,e),s&&s.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(const t of r)t.bind(),t.setVertexAttribPointers(c,e,i);o&&(o.bind(),o.setVertexAttribPointers(c,e,i)),n&&n.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,e,i)),s&&(s.bind(),s.setVertexAttribPointers(c,e,i)),u.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function yt(e){const t=[];for(let r=0;r<e.length;r++){if(null===e[r])continue;const n=e[r].split(" ");t.push(n.pop())}return t}class gt{constructor(e,r,n,i,o,a){const s=e.gl;this.program=s.createProgram();const l=yt(r.staticAttributes),u=n?n.getBinderAttributes():[],c=l.concat(u),f=ht.prelude.staticUniforms?yt(ht.prelude.staticUniforms):[],h=r.staticUniforms?yt(r.staticUniforms):[],p=n?n.getBinderUniforms():[],d=f.concat(h).concat(p),y=[];for(const e of d)y.indexOf(e)<0&&y.push(e);const g=n?n.defines():[];o&&g.push("#define OVERDRAW_INSPECTOR;"),a&&g.push("#define TERRAIN3D;");const m=g.concat(ht.prelude.fragmentSource,r.fragmentSource).join("\n"),_=g.concat(ht.prelude.vertexSource,r.vertexSource).join("\n"),v=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);if(s.shaderSource(v,m),s.compileShader(v),!s.getShaderParameter(v,s.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${s.getShaderInfoLog(v)}`);s.attachShader(this.program,v);const A=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);if(s.shaderSource(A,_),s.compileShader(A),!s.getShaderParameter(A,s.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${s.getShaderInfoLog(A)}`);s.attachShader(this.program,A),this.attributes={};const b={};this.numAttributes=c.length;for(let e=0;e<this.numAttributes;e++)c[e]&&(s.bindAttribLocation(this.program,e,c[e]),this.attributes[c[e]]=e);if(s.linkProgram(this.program),!s.getProgramParameter(this.program,s.LINK_STATUS))throw new Error(`Program failed to link: ${s.getProgramInfoLog(this.program)}`);s.deleteShader(A),s.deleteShader(v);for(let e=0;e<y.length;e++){const t=y[e];if(t&&!b[t]){const e=s.getUniformLocation(this.program,t);e&&(b[t]=e)}}this.fixedUniforms=i(e,b),this.terrainUniforms=((e,r)=>({u_depth:new t.aH(e,r.u_depth),u_terrain:new t.aH(e,r.u_terrain),u_terrain_dim:new t.aI(e,r.u_terrain_dim),u_terrain_matrix:new t.aJ(e,r.u_terrain_matrix),u_terrain_unpack:new t.aK(e,r.u_terrain_unpack),u_terrain_exaggeration:new t.aI(e,r.u_terrain_exaggeration)}))(e,b),this.binderUniforms=n?n.getUniforms(e,b):[]}draw(e,t,r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m){const _=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(n),e.setColorMode(i),e.setCullFace(o),s){e.activeTexture.set(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,s.depthTexture),e.activeTexture.set(_.TEXTURE3),_.bindTexture(_.TEXTURE_2D,s.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(s[e])}for(const e in this.fixedUniforms)this.fixedUniforms[e].set(a[e]);d&&d.setUniforms(e,this.binderUniforms,h,{zoom:p});let v=0;switch(t){case _.LINES:v=2;break;case _.TRIANGLES:v=3;break;case _.LINE_STRIP:v=1}for(const r of f.get()){const n=r.vaos||(r.vaos={});(n[l]||(n[l]=new dt)).bind(e,this,u,d?d.getPaintVertexBuffers():[],c,r.vertexOffset,y,g,m),_.drawElements(t,r.primitiveLength*v,_.UNSIGNED_SHORT,r.primitiveOffset*v*2)}}}function mt(e,t,r){const n=1/Be(r,1,t.transform.tileZoom),i=Math.pow(2,r.tileID.overscaledZ),o=r.tileSize*Math.pow(2,t.transform.tileZoom)/i,a=o*(r.tileID.canonical.x+r.tileID.wrap*i),s=o*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[n,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const _t=(e,r,n,i)=>{const o=r.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=function(){var e=new t.A(9);return t.A!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}();"viewport"===o.properties.get("anchor")&&function(e,t){var r=Math.sin(t),n=Math.cos(t);e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(l,-r.transform.angle),function(e,t,r){var n=t[0],i=t[1],o=t[2];e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8]}(s,s,l);const u=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+n,u_opacity:i}},vt=(e,r,n,i,o,a,s)=>t.e(_t(e,r,n,i),mt(a,r,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),At=e=>({u_matrix:e}),bt=(e,r,n,i)=>t.e(At(e),mt(n,r,i)),wt=(e,t)=>({u_matrix:e,u_world:t}),Et=(e,r,n,i,o)=>t.e(bt(e,r,n,i),{u_world:o}),xt=(e,t,r,n)=>{const i=e.transform;let o,a;if("map"===n.paint.get("circle-pitch-alignment")){const e=Be(r,1,i.zoom);o=!0,a=[e,e]}else o=!1,a=i.pixelsToGLUnits;return{u_camera_to_center_distance:i.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,r,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:a}},It=(e,t,r)=>({u_matrix:e,u_inv_matrix:t,u_camera_to_center_distance:r.cameraToCenterDistance,u_viewport_size:[r.width,r.height]}),St=(e,t,r=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:r}),Ct=e=>({u_matrix:e}),Pt=(e,t,r,n)=>({u_matrix:e,u_extrude_scale:Be(t,1,r),u_intensity:n});function Ot(e,r){const n=Math.pow(2,r.canonical.z),i=r.canonical.y;return[new t.Y(0,i/n).toLngLat().lat,new t.Y(0,(i+1)/n).toLngLat().lat]}const Tt=(e,t,r,n)=>{const i=e.transform;return{u_matrix:Lt(e,t,r,n),u_ratio:1/Be(t,1,i.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},Mt=(e,r,n,i,o)=>t.e(Tt(e,r,n,o),{u_image:0,u_image_height:i}),kt=(e,t,r,n,i)=>{const o=e.transform,a=Bt(t,o);return{u_matrix:Lt(e,t,r,i),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Be(t,1,o.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[a,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Rt=(e,r,n,i,o,a)=>{const s=e.lineAtlas,l=Bt(r,e.transform),u="round"===n.layout.get("line-cap"),c=s.getDash(i.from,u),f=s.getDash(i.to,u),h=c.width*o.fromScale,p=f.width*o.toScale;return t.e(Tt(e,r,n,a),{u_patternscale_a:[l/h,-c.height/2],u_patternscale_b:[l/p,-f.height/2],u_sdfgamma:s.width/(256*Math.min(h,p)*e.pixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:f.y,u_mix:o.t})};function Bt(e,t){return 1/Be(e,1,t.tileZoom)}function Lt(e,t,r,n){return e.translatePosMatrix(n?n.posMatrix:t.tileID.posMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}const Dt=(e,t,r,n,i)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:r,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:jt(i.paint.get("raster-hue-rotate"))};var o,a};function jt(e){e*=Math.PI/180;const t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}const Ft=(e,t,r,n,i,o,a,s,l,u,c,f,h,p)=>{const d=a.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:d.cameraToCenterDistance,u_pitch:d.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:d.width/d.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:l,u_coord_matrix:u,u_is_text:+f,u_pitch_with_map:+n,u_is_along_line:i,u_is_variable_anchor:o,u_texsize:h,u_texture:0,u_translation:c,u_pitched_scale:p}},Nt=(e,r,n,i,o,a,s,l,u,c,f,h,p,d,y)=>{const g=s.transform;return t.e(Ft(e,r,n,i,o,a,s,l,u,c,f,h,p,y),{u_gamma_scale:i?Math.cos(g._pitch)*g.cameraToCenterDistance:1,u_device_pixel_ratio:s.pixelRatio,u_is_halo:+d})},Zt=(e,r,n,i,o,a,s,l,u,c,f,h,p,d)=>t.e(Nt(e,r,n,i,o,a,s,l,u,c,f,!0,h,!0,d),{u_texsize_icon:p,u_texture_icon:1}),Ut=(e,t,r)=>({u_matrix:e,u_opacity:t,u_color:r}),Qt=(e,r,n,i,o,a)=>t.e(function(e,t,r,n){const i=r.imageManager.getPattern(e.from.toString()),o=r.imageManager.getPattern(e.to.toString()),{width:a,height:s}=r.imageManager.getPixelSize(),l=Math.pow(2,n.tileID.overscaledZ),u=n.tileSize*Math.pow(2,r.transform.tileZoom)/l,c=u*(n.tileID.canonical.x+n.tileID.wrap*l),f=u*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/Be(n,1,r.transform.tileZoom),u_pixel_coord_upper:[c>>16,f>>16],u_pixel_coord_lower:[65535&c,65535&f]}}(i,a,n,o),{u_matrix:e,u_opacity:r}),Gt={fillExtrusion:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_lightpos:new t.aL(e,r.u_lightpos),u_lightintensity:new t.aI(e,r.u_lightintensity),u_lightcolor:new t.aL(e,r.u_lightcolor),u_vertical_gradient:new t.aI(e,r.u_vertical_gradient),u_opacity:new t.aI(e,r.u_opacity)}),fillExtrusionPattern:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_lightpos:new t.aL(e,r.u_lightpos),u_lightintensity:new t.aI(e,r.u_lightintensity),u_lightcolor:new t.aL(e,r.u_lightcolor),u_vertical_gradient:new t.aI(e,r.u_vertical_gradient),u_height_factor:new t.aI(e,r.u_height_factor),u_image:new t.aH(e,r.u_image),u_texsize:new t.aM(e,r.u_texsize),u_pixel_coord_upper:new t.aM(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.aM(e,r.u_pixel_coord_lower),u_scale:new t.aL(e,r.u_scale),u_fade:new t.aI(e,r.u_fade),u_opacity:new t.aI(e,r.u_opacity)}),fill:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix)}),fillPattern:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_image:new t.aH(e,r.u_image),u_texsize:new t.aM(e,r.u_texsize),u_pixel_coord_upper:new t.aM(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.aM(e,r.u_pixel_coord_lower),u_scale:new t.aL(e,r.u_scale),u_fade:new t.aI(e,r.u_fade)}),fillOutline:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_world:new t.aM(e,r.u_world)}),fillOutlinePattern:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_world:new t.aM(e,r.u_world),u_image:new t.aH(e,r.u_image),u_texsize:new t.aM(e,r.u_texsize),u_pixel_coord_upper:new t.aM(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.aM(e,r.u_pixel_coord_lower),u_scale:new t.aL(e,r.u_scale),u_fade:new t.aI(e,r.u_fade)}),circle:(e,r)=>({u_camera_to_center_distance:new t.aI(e,r.u_camera_to_center_distance),u_scale_with_map:new t.aH(e,r.u_scale_with_map),u_pitch_with_map:new t.aH(e,r.u_pitch_with_map),u_extrude_scale:new t.aM(e,r.u_extrude_scale),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_matrix:new t.aJ(e,r.u_matrix)}),collisionBox:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_pixel_extrude_scale:new t.aM(e,r.u_pixel_extrude_scale)}),collisionCircle:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_inv_matrix:new t.aJ(e,r.u_inv_matrix),u_camera_to_center_distance:new t.aI(e,r.u_camera_to_center_distance),u_viewport_size:new t.aM(e,r.u_viewport_size)}),debug:(e,r)=>({u_color:new t.aN(e,r.u_color),u_matrix:new t.aJ(e,r.u_matrix),u_overlay:new t.aH(e,r.u_overlay),u_overlay_scale:new t.aI(e,r.u_overlay_scale)}),clippingMask:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix)}),heatmap:(e,r)=>({u_extrude_scale:new t.aI(e,r.u_extrude_scale),u_intensity:new t.aI(e,r.u_intensity),u_matrix:new t.aJ(e,r.u_matrix)}),heatmapTexture:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_world:new t.aM(e,r.u_world),u_image:new t.aH(e,r.u_image),u_color_ramp:new t.aH(e,r.u_color_ramp),u_opacity:new t.aI(e,r.u_opacity)}),hillshade:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_image:new t.aH(e,r.u_image),u_latrange:new t.aM(e,r.u_latrange),u_light:new t.aM(e,r.u_light),u_shadow:new t.aN(e,r.u_shadow),u_highlight:new t.aN(e,r.u_highlight),u_accent:new t.aN(e,r.u_accent)}),hillshadePrepare:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_image:new t.aH(e,r.u_image),u_dimension:new t.aM(e,r.u_dimension),u_zoom:new t.aI(e,r.u_zoom),u_unpack:new t.aK(e,r.u_unpack)}),line:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_ratio:new t.aI(e,r.u_ratio),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.aM(e,r.u_units_to_pixels)}),lineGradient:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_ratio:new t.aI(e,r.u_ratio),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.aM(e,r.u_units_to_pixels),u_image:new t.aH(e,r.u_image),u_image_height:new t.aI(e,r.u_image_height)}),linePattern:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_texsize:new t.aM(e,r.u_texsize),u_ratio:new t.aI(e,r.u_ratio),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_image:new t.aH(e,r.u_image),u_units_to_pixels:new t.aM(e,r.u_units_to_pixels),u_scale:new t.aL(e,r.u_scale),u_fade:new t.aI(e,r.u_fade)}),lineSDF:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_ratio:new t.aI(e,r.u_ratio),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.aM(e,r.u_units_to_pixels),u_patternscale_a:new t.aM(e,r.u_patternscale_a),u_patternscale_b:new t.aM(e,r.u_patternscale_b),u_sdfgamma:new t.aI(e,r.u_sdfgamma),u_image:new t.aH(e,r.u_image),u_tex_y_a:new t.aI(e,r.u_tex_y_a),u_tex_y_b:new t.aI(e,r.u_tex_y_b),u_mix:new t.aI(e,r.u_mix)}),raster:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_tl_parent:new t.aM(e,r.u_tl_parent),u_scale_parent:new t.aI(e,r.u_scale_parent),u_buffer_scale:new t.aI(e,r.u_buffer_scale),u_fade_t:new t.aI(e,r.u_fade_t),u_opacity:new t.aI(e,r.u_opacity),u_image0:new t.aH(e,r.u_image0),u_image1:new t.aH(e,r.u_image1),u_brightness_low:new t.aI(e,r.u_brightness_low),u_brightness_high:new t.aI(e,r.u_brightness_high),u_saturation_factor:new t.aI(e,r.u_saturation_factor),u_contrast_factor:new t.aI(e,r.u_contrast_factor),u_spin_weights:new t.aL(e,r.u_spin_weights)}),symbolIcon:(e,r)=>({u_is_size_zoom_constant:new t.aH(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,r.u_is_size_feature_constant),u_size_t:new t.aI(e,r.u_size_t),u_size:new t.aI(e,r.u_size),u_camera_to_center_distance:new t.aI(e,r.u_camera_to_center_distance),u_pitch:new t.aI(e,r.u_pitch),u_rotate_symbol:new t.aH(e,r.u_rotate_symbol),u_aspect_ratio:new t.aI(e,r.u_aspect_ratio),u_fade_change:new t.aI(e,r.u_fade_change),u_matrix:new t.aJ(e,r.u_matrix),u_label_plane_matrix:new t.aJ(e,r.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,r.u_coord_matrix),u_is_text:new t.aH(e,r.u_is_text),u_pitch_with_map:new t.aH(e,r.u_pitch_with_map),u_is_along_line:new t.aH(e,r.u_is_along_line),u_is_variable_anchor:new t.aH(e,r.u_is_variable_anchor),u_texsize:new t.aM(e,r.u_texsize),u_texture:new t.aH(e,r.u_texture),u_translation:new t.aM(e,r.u_translation),u_pitched_scale:new t.aI(e,r.u_pitched_scale)}),symbolSDF:(e,r)=>({u_is_size_zoom_constant:new t.aH(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,r.u_is_size_feature_constant),u_size_t:new t.aI(e,r.u_size_t),u_size:new t.aI(e,r.u_size),u_camera_to_center_distance:new t.aI(e,r.u_camera_to_center_distance),u_pitch:new t.aI(e,r.u_pitch),u_rotate_symbol:new t.aH(e,r.u_rotate_symbol),u_aspect_ratio:new t.aI(e,r.u_aspect_ratio),u_fade_change:new t.aI(e,r.u_fade_change),u_matrix:new t.aJ(e,r.u_matrix),u_label_plane_matrix:new t.aJ(e,r.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,r.u_coord_matrix),u_is_text:new t.aH(e,r.u_is_text),u_pitch_with_map:new t.aH(e,r.u_pitch_with_map),u_is_along_line:new t.aH(e,r.u_is_along_line),u_is_variable_anchor:new t.aH(e,r.u_is_variable_anchor),u_texsize:new t.aM(e,r.u_texsize),u_texture:new t.aH(e,r.u_texture),u_gamma_scale:new t.aI(e,r.u_gamma_scale),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_is_halo:new t.aH(e,r.u_is_halo),u_translation:new t.aM(e,r.u_translation),u_pitched_scale:new t.aI(e,r.u_pitched_scale)}),symbolTextAndIcon:(e,r)=>({u_is_size_zoom_constant:new t.aH(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,r.u_is_size_feature_constant),u_size_t:new t.aI(e,r.u_size_t),u_size:new t.aI(e,r.u_size),u_camera_to_center_distance:new t.aI(e,r.u_camera_to_center_distance),u_pitch:new t.aI(e,r.u_pitch),u_rotate_symbol:new t.aH(e,r.u_rotate_symbol),u_aspect_ratio:new t.aI(e,r.u_aspect_ratio),u_fade_change:new t.aI(e,r.u_fade_change),u_matrix:new t.aJ(e,r.u_matrix),u_label_plane_matrix:new t.aJ(e,r.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,r.u_coord_matrix),u_is_text:new t.aH(e,r.u_is_text),u_pitch_with_map:new t.aH(e,r.u_pitch_with_map),u_is_along_line:new t.aH(e,r.u_is_along_line),u_is_variable_anchor:new t.aH(e,r.u_is_variable_anchor),u_texsize:new t.aM(e,r.u_texsize),u_texsize_icon:new t.aM(e,r.u_texsize_icon),u_texture:new t.aH(e,r.u_texture),u_texture_icon:new t.aH(e,r.u_texture_icon),u_gamma_scale:new t.aI(e,r.u_gamma_scale),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_is_halo:new t.aH(e,r.u_is_halo),u_translation:new t.aM(e,r.u_translation),u_pitched_scale:new t.aI(e,r.u_pitched_scale)}),background:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_opacity:new t.aI(e,r.u_opacity),u_color:new t.aN(e,r.u_color)}),backgroundPattern:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_opacity:new t.aI(e,r.u_opacity),u_image:new t.aH(e,r.u_image),u_pattern_tl_a:new t.aM(e,r.u_pattern_tl_a),u_pattern_br_a:new t.aM(e,r.u_pattern_br_a),u_pattern_tl_b:new t.aM(e,r.u_pattern_tl_b),u_pattern_br_b:new t.aM(e,r.u_pattern_br_b),u_texsize:new t.aM(e,r.u_texsize),u_mix:new t.aI(e,r.u_mix),u_pattern_size_a:new t.aM(e,r.u_pattern_size_a),u_pattern_size_b:new t.aM(e,r.u_pattern_size_b),u_scale_a:new t.aI(e,r.u_scale_a),u_scale_b:new t.aI(e,r.u_scale_b),u_pixel_coord_upper:new t.aM(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.aM(e,r.u_pixel_coord_lower),u_tile_units_to_pixels:new t.aI(e,r.u_tile_units_to_pixels)}),terrain:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_texture:new t.aH(e,r.u_texture),u_ele_delta:new t.aI(e,r.u_ele_delta)}),terrainDepth:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_ele_delta:new t.aI(e,r.u_ele_delta)}),terrainCoords:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_texture:new t.aH(e,r.u_texture),u_terrain_coords_id:new t.aI(e,r.u_terrain_coords_id),u_ele_delta:new t.aI(e,r.u_ele_delta)})};class zt{constructor(e,t,r){this.context=e;const n=e.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Vt{constructor(e,t,r,n){this.length=t.length,this.attributes=r,this.itemSize=t.bytesPerElement,this.dynamicDraw=n,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let r=0;r<this.attributes.length;r++){const n=t.attributes[this.attributes[r].name];void 0!==n&&e.enableVertexAttribArray(n)}}setVertexAttribPointers(e,t,r){for(let n=0;n<this.attributes.length;n++){const i=this.attributes[n],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[qt[i.type]],!1,this.itemSize,i.offset+this.itemSize*(r||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Wt=new WeakMap;function Kt(e){var t;if(Wt.has(e))return Wt.get(e);{const r=null===(t=e.getParameter(e.VERSION))||void 0===t?void 0:t.startsWith("WebGL 2.0");return Wt.set(e,r),r}}class Ht{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Yt extends Ht{getDefault(){return t.aP.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Xt extends Ht{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Jt extends Ht{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class $t extends Ht{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class er extends Ht{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class tr extends Ht{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class rr extends Ht{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class nr extends Ht{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class ir extends Ht{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class or extends Ht{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class ar extends Ht{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class sr extends Ht{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class lr extends Ht{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class ur extends Ht{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class cr extends Ht{getDefault(){return t.aP.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class fr extends Ht{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class hr extends Ht{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class pr extends Ht{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class dr extends Ht{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class yr extends Ht{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class gr extends Ht{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class mr extends Ht{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class _r extends Ht{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class vr extends Ht{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ar extends Ht{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class br extends Ht{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class wr extends Ht{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Er extends Ht{getDefault(){return null}set(e){var t;if(e===this.current&&!this.dirty)return;const r=this.gl;Kt(r)?r.bindVertexArray(e):null===(t=r.getExtension("OES_vertex_array_object"))||void 0===t||t.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class xr extends Ht{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Ir extends Ht{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Sr extends Ht{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Cr extends Ht{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class Pr extends Cr{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Or extends Cr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Tr extends Cr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Mr{constructor(e,t,r,n,i){this.context=e,this.width=t,this.height=r;const o=e.gl,a=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new Pr(e,a),n)this.depthAttachment=i?new Tr(e,a):new Or(e,a);else if(i)throw new Error("Stencil cannot be set without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class kr{constructor(e,t,r){this.blendFunction=e,this.blendColor=t,this.mask=r}}kr.Replace=[1,0],kr.disabled=new kr(kr.Replace,t.aP.transparent,[!1,!1,!1,!1]),kr.unblended=new kr(kr.Replace,t.aP.transparent,[!0,!0,!0,!0]),kr.alphaBlended=new kr([1,771],t.aP.transparent,[!0,!0,!0,!0]);class Rr{constructor(e){var t,r;if(this.gl=e,this.clearColor=new Yt(this),this.clearDepth=new Xt(this),this.clearStencil=new Jt(this),this.colorMask=new $t(this),this.depthMask=new er(this),this.stencilMask=new tr(this),this.stencilFunc=new rr(this),this.stencilOp=new nr(this),this.stencilTest=new ir(this),this.depthRange=new or(this),this.depthTest=new ar(this),this.depthFunc=new sr(this),this.blend=new lr(this),this.blendFunc=new ur(this),this.blendColor=new cr(this),this.blendEquation=new fr(this),this.cullFace=new hr(this),this.cullFaceSide=new pr(this),this.frontFace=new dr(this),this.program=new yr(this),this.activeTexture=new gr(this),this.viewport=new mr(this),this.bindFramebuffer=new _r(this),this.bindRenderbuffer=new vr(this),this.bindTexture=new Ar(this),this.bindVertexBuffer=new br(this),this.bindElementBuffer=new wr(this),this.bindVertexArray=new Er(this),this.pixelStoreUnpack=new xr(this),this.pixelStoreUnpackPremultiplyAlpha=new Ir(this),this.pixelStoreUnpackFlipY=new Sr(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Kt(e)){this.HALF_FLOAT=e.HALF_FLOAT;const n=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(t=e.RGBA16F)&&void 0!==t?t:null==n?void 0:n.RGBA16F_EXT,this.RGB16F=null!==(r=e.RGB16F)&&void 0!==r?r:null==n?void 0:n.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const t=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==t?void 0:t.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new zt(this,e,t)}createVertexBuffer(e,t,r){return new Vt(this,e,t,r)}createRenderbuffer(e,t,r){const n=this.gl,i=n.createRenderbuffer();return this.bindRenderbuffer.set(i),n.renderbufferStorage(n.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,r,n){return new Mr(this,e,t,r,n)}clear({color:e,depth:t,stencil:r}){const n=this.gl;let i=0;e&&(i|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(i|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==r&&(i|=n.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),n.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){t.aE(e.blendFunction,kr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Kt(this.gl)?this.gl.createVertexArray():null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var t;return Kt(this.gl)?this.gl.deleteVertexArray(e):null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class Br{constructor(e,t,r){this.func=e,this.mask=t,this.range=r}}Br.ReadOnly=!1,Br.ReadWrite=!0,Br.disabled=new Br(519,Br.ReadOnly,[0,1]);const Lr=7680;class Dr{constructor(e,t,r,n,i,o){this.test=e,this.ref=t,this.mask=r,this.fail=n,this.depthFail=i,this.pass=o}}Dr.disabled=new Dr({func:519,mask:0},0,0,Lr,Lr,Lr);class jr{constructor(e,t,r){this.enable=e,this.mode=t,this.frontFace=r}}let Fr;function Nr(e,r,n,i,o){const a=e.context,s=a.gl,l=e.useProgram("collisionBox"),u=[];let c=0,f=0;for(let p=0;p<i.length;p++){const d=i[p],y=r.getTile(d).getBucket(n);if(!y)continue;const g=o?y.textCollisionBox:y.iconCollisionBox,m=y.collisionCircleArray;if(m.length>0){const r=t.F();t.aQ(r,y.placementInvProjMatrix,e.transform.glCoordMatrix),t.aQ(r,r,y.placementViewportMatrix),u.push({circleArray:m,circleOffset:f,transform:d.posMatrix,invTransform:r,coord:d}),c+=m.length/4,f=c}g&&l.draw(a,s.LINES,Br.disabled,Dr.disabled,e.colorModeForRenderPass(),jr.disabled,{u_matrix:d.posMatrix,u_pixel_extrude_scale:[1/(h=e.transform).width,1/h.height]},e.style.map.terrain&&e.style.map.terrain.getTerrainData(d),n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,null,e.transform.zoom,null,null,g.collisionVertexBuffer)}var h;if(!o||!u.length)return;const p=e.useProgram("collisionCircle"),d=new t.aR;d.resize(4*c),d._trim();let y=0;for(const e of u)for(let t=0;t<e.circleArray.length/4;t++){const r=4*t,n=e.circleArray[r+0],i=e.circleArray[r+1],o=e.circleArray[r+2],a=e.circleArray[r+3];d.emplace(y++,n,i,o,a,0),d.emplace(y++,n,i,o,a,1),d.emplace(y++,n,i,o,a,2),d.emplace(y++,n,i,o,a,3)}(!Fr||Fr.length<2*c)&&(Fr=function(e){const r=2*e,n=new t.aT;n.resize(r),n._trim();for(let e=0;e<r;e++){const t=6*e;n.uint16[t+0]=4*e+0,n.uint16[t+1]=4*e+1,n.uint16[t+2]=4*e+2,n.uint16[t+3]=4*e+2,n.uint16[t+4]=4*e+3,n.uint16[t+5]=4*e+0}return n}(c));const g=a.createIndexBuffer(Fr,!0),m=a.createVertexBuffer(d,t.aS.members,!0);for(const r of u){const i=It(r.transform,r.invTransform,e.transform);p.draw(a,s.TRIANGLES,Br.disabled,Dr.disabled,e.colorModeForRenderPass(),jr.disabled,i,e.style.map.terrain&&e.style.map.terrain.getTerrainData(r.coord),n.id,m,g,t.$.simpleSegment(0,2*r.circleOffset,r.circleArray.length,r.circleArray.length/2),null,e.transform.zoom,null,null,null)}m.destroy(),g.destroy()}jr.disabled=new jr(!1,1029,2305),jr.backCCW=new jr(!0,1029,2305);const Zr=t.an(new Float32Array(16));function Ur(e,r,n,i,o,a){const{horizontalAlign:s,verticalAlign:l}=t.au(e);return new t.P((-(s-.5)*r/o+i[0])*a,(-(l-.5)*n/o+i[1])*a)}function Qr(e,r,n,i,o,a){const s=r.tileAnchorPoint.add(new t.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let e=i.mult(a);return n||(e=e.rotate(-o)),me(s.add(e),r.labelPlaneMatrix,r.getElevation).point}if(n){const t=Se(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(e),n=Math.atan(t.y/t.x)+(t.x<0?Math.PI:0);return e.add(i.rotate(n))}return e.add(i)}function Gr(e,r,n,i,o,a,s,l,u,c,f,h,p,d){const y=e.text.placedSymbolArray,g=e.text.dynamicLayoutVertexArray,m=e.icon.dynamicLayoutVertexArray,_={};g.clear();for(let m=0;m<y.length;m++){const v=y.get(m),A=v.hidden||!v.crossTileID||e.allowVerticalPlacement&&!v.placedOrientation?null:i[v.crossTileID];if(A){const i=new t.P(v.anchorX,v.anchorY),y={getElevation:d,width:o.width,height:o.height,labelPlaneMatrix:a,lineVertexArray:null,pitchWithMap:n,projection:f,projectionCache:null,tileAnchorPoint:i,translation:h,unwrappedTileID:p},m=n?me(i,s,d):Se(i.x,i.y,y),b=_e(o.cameraToCenterDistance,m.signedDistanceFromCamera);let w=t.ai(e.textSizeData,u,v)*b/t.ap;n&&(w*=e.tilePixelRatio/l);const{width:E,height:x,anchor:I,textOffset:S,textBoxScale:C}=A,P=Ur(I,E,x,S,C,w),O=f.getPitchedTextCorrection(o,i.add(new t.P(h[0],h[1])),p),T=Qr(m.point,y,r,P,o.angle,O),M=e.allowVerticalPlacement&&v.placedOrientation===t.ah.vertical?Math.PI/2:0;for(let e=0;e<v.numGlyphs;e++)t.aj(g,T,M);c&&v.associatedIconIndex>=0&&(_[v.associatedIconIndex]={shiftedAnchor:T,angle:M})}else Me(v.numGlyphs,g)}if(c){m.clear();const r=e.icon.placedSymbolArray;for(let e=0;e<r.length;e++){const n=r.get(e);if(n.hidden)Me(n.numGlyphs,m);else{const r=_[e];if(r)for(let e=0;e<n.numGlyphs;e++)t.aj(m,r.shiftedAnchor,r.angle);else Me(n.numGlyphs,m)}}e.icon.dynamicLayoutVertexBuffer.updateData(m)}e.text.dynamicLayoutVertexBuffer.updateData(g)}function zr(e,t,r){return r.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function qr(e,r,n,i,o,a,s,l,u,c,f,h){const p=e.context,d=p.gl,y=e.transform,g=$e(),m="map"===l,_="map"===u,v="viewport"!==l&&"point"!==n.layout.get("symbol-placement"),A=m&&!_&&!v,b=!_&&v,w=!n.layout.get("symbol-sort-key").isConstant();let E=!1;const x=e.depthModeForSublayer(0,Br.ReadOnly),I=n._unevaluatedLayout.hasValue("text-variable-anchor")||n._unevaluatedLayout.hasValue("text-variable-anchor-offset"),S=[],C=g.getCircleRadiusCorrection(y);for(const l of i){const i=r.getTile(l),u=i.getBucket(n);if(!u)continue;const f=o?u.text:u.icon;if(!f||!f.segments.get().length||!f.hasVisibleVertices)continue;const h=f.programConfigurations.get(n.id),p=o||u.sdfIcons,x=o?u.textSizeData:u.iconSizeData,P=_||0!==y.pitch,O=e.useProgram(zr(p,o,u),h),T=t.ag(x,y.zoom),M=e.style.map.terrain&&e.style.map.terrain.getTerrainData(l);let k,R,B,L,D=[0,0],j=null;if(o)R=i.glyphAtlasTexture,B=d.LINEAR,k=i.glyphAtlasTexture.size,u.iconsInText&&(D=i.imageAtlasTexture.size,j=i.imageAtlasTexture,L=P||e.options.rotating||e.options.zooming||"composite"===x.kind||"camera"===x.kind?d.LINEAR:d.NEAREST);else{const t=1!==n.layout.get("icon-size").constantOr(0)||u.iconsNeedLinear;R=i.imageAtlasTexture,B=p||e.options.rotating||e.options.zooming||t||P?d.LINEAR:d.NEAREST,k=i.imageAtlasTexture.size}const F=Be(i,1,e.transform.zoom),N=b?l.posMatrix:Zr,Z=ye(N,_,m,e.transform,F),U=ge(N,_,m,e.transform,F),Q=ge(l.posMatrix,_,m,e.transform,F),G=g.translatePosition(e.transform,i,a,s),z=I&&u.hasTextData(),q="none"!==n.layout.get("icon-text-fit")&&z&&u.hasIconData();if(v){const t=e.style.map.terrain?(t,r)=>e.style.map.terrain.getElevation(l,t,r):null,r="map"===n.layout.get("text-rotation-alignment");Ae(u,l.posMatrix,e,o,Z,Q,_,c,r,g,l.toUnwrapped(),y.width,y.height,G,t)}const V=l.posMatrix,W=o&&I||q,K=v||W?Zr:Z,H=U,Y=p&&0!==n.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let X;X=p?u.iconsInText?Zt(x.kind,T,A,_,v,W,e,V,K,H,G,k,D,C):Nt(x.kind,T,A,_,v,W,e,V,K,H,G,o,k,!0,C):Ft(x.kind,T,A,_,v,W,e,V,K,H,G,o,k,C);const J={program:O,buffers:f,uniformValues:X,atlasTexture:R,atlasTextureIcon:j,atlasInterpolation:B,atlasInterpolationIcon:L,isSDF:p,hasHalo:Y};if(w&&u.canOverlap){E=!0;const e=f.segments.get();for(const r of e)S.push({segments:new t.$([r]),sortKey:r.sortKey,state:J,terrainData:M})}else S.push({segments:f.segments,sortKey:0,state:J,terrainData:M})}E&&S.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of S){const r=t.state;if(p.activeTexture.set(d.TEXTURE0),r.atlasTexture.bind(r.atlasInterpolation,d.CLAMP_TO_EDGE),r.atlasTextureIcon&&(p.activeTexture.set(d.TEXTURE1),r.atlasTextureIcon&&r.atlasTextureIcon.bind(r.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),r.isSDF){const i=r.uniformValues;r.hasHalo&&(i.u_is_halo=1,Vr(r.buffers,t.segments,n,e,r.program,x,f,h,i,t.terrainData)),i.u_is_halo=0}Vr(r.buffers,t.segments,n,e,r.program,x,f,h,r.uniformValues,t.terrainData)}}function Vr(e,t,r,n,i,o,a,s,l,u){const c=n.context;i.draw(c,c.gl.TRIANGLES,o,a,s,jr.disabled,l,u,r.id,e.layoutVertexBuffer,e.indexBuffer,t,r.paint,n.transform.zoom,e.programConfigurations.get(r.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Wr(e,t,r,n,i){if(!r||!n||!n.imageAtlas)return;const o=n.imageAtlas.patternPositions;let a=o[r.to.toString()],s=o[r.from.toString()];if(!a&&s&&(a=s),!s&&a&&(s=a),!a||!s){const e=i.getPaintProperty(t);a=o[e],s=o[e]}a&&s&&e.setConstantPatternPositions(a,s)}function Kr(e,t,r,n,i,o,a){const s=e.context.gl,l="fill-pattern",u=r.paint.get(l),c=u&&u.constantOr(1),f=r.getCrossfadeParameters();let h,p,d,y,g;a?(p=c&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=s.LINES):(p=c?"fillPattern":"fill",h=s.TRIANGLES);const m=u.constantOr(null);for(const u of n){const n=t.getTile(u);if(c&&!n.patternsLoaded())continue;const _=n.getBucket(r);if(!_)continue;const v=_.programConfigurations.get(r.id),A=e.useProgram(p,v),b=e.style.map.terrain&&e.style.map.terrain.getTerrainData(u);c&&(e.context.activeTexture.set(s.TEXTURE0),n.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),v.updatePaintBuffers(f)),Wr(v,l,m,n,r);const w=b?u:null,E=e.translatePosMatrix(w?w.posMatrix:u.posMatrix,n,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(a){y=_.indexBuffer2,g=_.segments2;const t=[s.drawingBufferWidth,s.drawingBufferHeight];d="fillOutlinePattern"===p&&c?Et(E,e,f,n,t):wt(E,t)}else y=_.indexBuffer,g=_.segments,d=c?bt(E,e,f,n):At(E);A.draw(e.context,h,i,e.stencilModeForClipping(u),o,jr.disabled,d,b,r.id,_.layoutVertexBuffer,y,g,r.paint,e.transform.zoom,v)}}function Hr(e,t,r,n,i,o,a){const s=e.context,l=s.gl,u="fill-extrusion-pattern",c=r.paint.get(u),f=c.constantOr(1),h=r.getCrossfadeParameters(),p=r.paint.get("fill-extrusion-opacity"),d=c.constantOr(null);for(const c of n){const n=t.getTile(c),y=n.getBucket(r);if(!y)continue;const g=e.style.map.terrain&&e.style.map.terrain.getTerrainData(c),m=y.programConfigurations.get(r.id),_=e.useProgram(f?"fillExtrusionPattern":"fillExtrusion",m);f&&(e.context.activeTexture.set(l.TEXTURE0),n.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),m.updatePaintBuffers(h)),Wr(m,u,d,n,r);const v=e.translatePosMatrix(c.posMatrix,n,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),A=r.paint.get("fill-extrusion-vertical-gradient"),b=f?vt(v,e,A,p,c,h,n):_t(v,e,A,p);_.draw(s,s.gl.TRIANGLES,i,o,a,jr.backCCW,b,g,r.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,r.paint,e.transform.zoom,m,e.style.map.terrain&&y.centroidVertexBuffer)}}function Yr(e,t,r,n,i,o,a){const s=e.context,l=s.gl,u=r.fbo;if(!u)return;const c=e.useProgram("hillshade"),f=e.style.map.terrain&&e.style.map.terrain.getTerrainData(t);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.colorAttachment.get()),c.draw(s,l.TRIANGLES,i,o,a,jr.disabled,((e,t,r,n)=>{const i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color");let s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:n?n.posMatrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:Ot(0,t.tileID),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(e,r,n,f?t:null),f,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function Xr(e,r,n,i,o,a){const s=e.context,l=s.gl,u=r.dem;if(u&&u.data){const c=u.dim,f=u.stride,h=u.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||e.getTileTexture(f),r.demTexture){const e=r.demTexture;e.update(h,{premultiply:!1}),e.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else r.demTexture=new b(s,h,l.RGBA,{premultiply:!1}),r.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);let p=r.fbo;if(!p){const e=new b(s,{width:c,height:c,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),p=r.fbo=s.createFramebuffer(c,c,!0,!1),p.colorAttachment.set(e.texture)}s.bindFramebuffer.set(p.framebuffer),s.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,o,a,jr.disabled,((e,r)=>{const n=r.stride,i=t.F();return t.aO(i,0,t.W,-t.W,0,0,1),t.H(i,i,[0,-t.W,0]),{u_matrix:i,u_image:1,u_dimension:[n,n],u_zoom:e.overscaledZ,u_unpack:r.getUnpackVector()}})(r.tileID,u),null,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Jr(e,r,n,i,a,s){const l=i.paint.get("raster-fade-duration");if(!s&&l>0){const i=o.now(),s=(i-e.timeAdded)/l,u=r?(i-r.timeAdded)/l:-1,c=n.getSource(),f=a.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!r||Math.abs(r.tileID.overscaledZ-f)>Math.abs(e.tileID.overscaledZ-f),p=h&&e.refreshedUponExpiration?1:t.ac(h?s:1-u,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),r?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}const $r=new t.aP(1,0,0,1),en=new t.aP(0,1,0,1),tn=new t.aP(0,0,1,1),rn=new t.aP(1,0,1,1),nn=new t.aP(0,1,1,1);function on(e,t,r,n){sn(e,0,t+r/2,e.transform.width,r,n)}function an(e,t,r,n){sn(e,t-r/2,0,r,e.transform.height,n)}function sn(e,t,r,n,i,o){const a=e.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(t*e.pixelRatio,r*e.pixelRatio,n*e.pixelRatio,i*e.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function ln(e,r,n){const i=e.context,o=i.gl,a=n.posMatrix,s=e.useProgram("debug"),l=Br.disabled,u=Dr.disabled,c=e.colorModeForRenderPass(),f="$debug",h=e.style.map.terrain&&e.style.map.terrain.getTerrainData(n);i.activeTexture.set(o.TEXTURE0);const p=r.getTileByID(n.key).latestRawTileData,d=Math.floor((p&&p.byteLength||0)/1024),y=r.getTile(n).tileSize,g=512/Math.min(y,512)*(n.overscaledZ/e.transform.zoom)*.5;let m=n.canonical.toString();n.overscaledZ!==n.canonical.z&&(m+=` => ${n.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const r=e.debugOverlayCanvas,n=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,r.width,r.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(r),e.debugOverlayTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}(e,`${m} ${d}kB`),s.draw(i,o.TRIANGLES,l,u,kr.alphaBlended,jr.disabled,St(a,t.aP.transparent,g),null,f,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),s.draw(i,o.LINE_STRIP,l,u,c,jr.disabled,St(a,t.aP.red),h,f,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function un(e,t,r){const n=e.context,i=n.gl,o=e.colorModeForRenderPass(),a=new Br(i.LEQUAL,Br.ReadWrite,e.depthRangeFor3D),s=e.useProgram("terrain"),l=t.getTerrainMesh();n.bindFramebuffer.set(null),n.viewport.set([0,0,e.width,e.height]);for(const u of r){const r=e.renderToTexture.getTexture(u),c=t.getTerrainData(u.tileID);n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,r.texture);const f={u_matrix:e.transform.calculatePosMatrix(u.tileID.toUnwrapped()),u_texture:0,u_ele_delta:t.getMeshFrameDelta(e.transform.zoom)};s.draw(n,i.TRIANGLES,a,Dr.disabled,o,jr.backCCW,f,c,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}}class cn{constructor(e,r){this.context=new Rr(e),this.transform=r,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ue.maxUnderzooming+ue.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new at}resize(e,t,r){if(this.width=Math.floor(e*r),this.height=Math.floor(t*r),this.pixelRatio=r,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style._order)this.style._layers[e].resize()}setup(){const e=this.context,r=new t.aW;r.emplaceBack(0,0),r.emplaceBack(t.W,0),r.emplaceBack(0,t.W),r.emplaceBack(t.W,t.W),this.tileExtentBuffer=e.createVertexBuffer(r,ct.members),this.tileExtentSegments=t.$.simpleSegment(0,0,4,2);const n=new t.aW;n.emplaceBack(0,0),n.emplaceBack(t.W,0),n.emplaceBack(0,t.W),n.emplaceBack(t.W,t.W),this.debugBuffer=e.createVertexBuffer(n,ct.members),this.debugSegments=t.$.simpleSegment(0,0,4,5);const i=new t.Z;i.emplaceBack(0,0,0,0),i.emplaceBack(t.W,0,t.W,0),i.emplaceBack(0,t.W,0,t.W),i.emplaceBack(t.W,t.W,t.W,t.W),this.rasterBoundsBuffer=e.createVertexBuffer(i,Y.members),this.rasterBoundsSegments=t.$.simpleSegment(0,0,4,2);const o=new t.aW;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,ct.members),this.viewportSegments=t.$.simpleSegment(0,0,4,2);const a=new t.aX;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);const s=new t.aY;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);const l=this.context.gl;this.stencilClearMode=new Dr({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}clearStencil(){const e=this.context,r=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const n=t.F();t.aO(n,0,this.width,this.height,0,0,1),t.J(n,n,[r.drawingBufferWidth,r.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,r.TRIANGLES,Br.disabled,this.stencilClearMode,kr.disabled,jr.disabled,Ct(n),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source;const r=this.context,n=r.gl;this.nextStencilID+t.length>256&&this.clearStencil(),r.setColorMode(kr.disabled),r.setDepthMode(Br.disabled);const i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const e of t){const t=this._tileClippingMaskIDs[e.key]=this.nextStencilID++,o=this.style.map.terrain&&this.style.map.terrain.getTerrainData(e);i.draw(r,n.TRIANGLES,Br.disabled,new Dr({func:n.ALWAYS,mask:0},t,255,n.KEEP,n.KEEP,n.REPLACE),kr.disabled,jr.disabled,Ct(e.posMatrix),o,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new Dr({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new Dr({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}stencilConfigForOverlap(e){const t=this.context.gl,r=e.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),n=r[r.length-1].overscaledZ,i=r[0].overscaledZ-n+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();const e={};for(let r=0;r<i;r++)e[r+n]=new Dr({func:t.GEQUAL,mask:255},r+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=i,[e,r]}return[{[n]:Dr.disabled},r]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const r=1/8;return new kr([e.CONSTANT_COLOR,e.ONE],new t.aP(r,r,r,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?kr.unblended:kr.alphaBlended}depthModeForSublayer(e,t,r){if(!this.opaquePassEnabledForLayer())return Br.disabled;const n=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Br(r||this.context.gl.LEQUAL,t,[n,n])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,r){this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(o.now()),this.imageManager.beginFrame();const n=this.style._order,i=this.style.sourceCaches,a={},s={},l={};for(const e in i){const t=i[e];t.used&&t.prepare(this.context),a[e]=t.getVisibleCoordinates(),s[e]=a[e].slice().reverse(),l[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<n.length;e++)if(this.style._layers[n[e]].is3D()){this.opaquePassCutoff=e;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const e of n){const t=this.style._layers[e];if(!t.hasOffscreenPass()||t.isHidden(this.transform.zoom))continue;const r=s[t.source];("custom"===t.type||r.length)&&this.renderLayer(this,i[t.source],t,r)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?t.aP.black:t.aP.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[n[this.currentLayer]],t=i[e.source],r=a[e.source];this._renderTileClippingMasks(e,r),this.renderLayer(this,t,e,r)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){const e=this.style._layers[n[this.currentLayer]],t=i[e.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(e))continue;const r=("symbol"===e.type?l:s)[e.source];this._renderTileClippingMasks(e,a[e.source]),this.renderLayer(this,t,e,r)}if(this.options.showTileBoundaries){const e=function(e,t){let r=null;const n=Object.values(e._layers).flatMap((r=>r.source&&!r.isHidden(t)?[e.sourceCaches[r.source]]:[])),i=n.filter((e=>"vector"===e.getSource().type)),o=n.filter((e=>"vector"!==e.getSource().type)),a=e=>{(!r||r.getSource().maxzoom<e.getSource().maxzoom)&&(r=e)};return i.forEach((e=>a(e))),r||o.forEach((e=>a(e))),r}(this.style,this.transform.zoom);e&&function(e,t,r){for(let n=0;n<r.length;n++)ln(e,t,r[n])}(this,e,e.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;on(e,e.transform.height-(t.top||0),3,$r),on(e,t.bottom||0,3,en),an(e,t.left||0,3,tn),an(e,e.transform.width-(t.right||0),3,rn);const r=e.transform.centerPoint;!function(e,t,r,n){sn(e,t-1,r-10,2,20,n),sn(e,t-10,r-1,20,2,n)}(e,r.x,e.transform.height-r.y,nn)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const r=this.terrainFacilitator.matrix,n=this.transform.projMatrix;let i=this.terrainFacilitator.dirty;i||(i=e?!t.aZ(r,n):!t.a_(r,n)),i||(i=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),i&&(t.a$(r,n),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,r){const n=e.context,i=n.gl,o=kr.unblended,a=new Br(i.LEQUAL,Br.ReadWrite,[0,1]),s=r.getTerrainMesh(),l=r.sourceCache.getRenderableTiles(),u=e.useProgram("terrainDepth");n.bindFramebuffer.set(r.getFramebuffer("depth").framebuffer),n.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),n.clear({color:t.aP.transparent,depth:1});for(const t of l){const l=r.getTerrainData(t.tileID),c={u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped()),u_ele_delta:r.getMeshFrameDelta(e.transform.zoom)};u.draw(n,i.TRIANGLES,a,Dr.disabled,o,jr.backCCW,c,l,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}n.bindFramebuffer.set(null),n.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain),function(e,r){const n=e.context,i=n.gl,o=kr.unblended,a=new Br(i.LEQUAL,Br.ReadWrite,[0,1]),s=r.getTerrainMesh(),l=r.getCoordsTexture(),u=r.sourceCache.getRenderableTiles(),c=e.useProgram("terrainCoords");n.bindFramebuffer.set(r.getFramebuffer("coords").framebuffer),n.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),n.clear({color:t.aP.transparent,depth:1}),r.coordsIndex=[];for(const t of u){const u=r.getTerrainData(t.tileID);n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,l.texture);const f={u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped()),u_terrain_coords_id:(255-r.coordsIndex.length)/255,u_texture:0,u_ele_delta:r.getMeshFrameDelta(e.transform.zoom)};c.draw(n,i.TRIANGLES,a,Dr.disabled,o,jr.backCCW,f,u,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),r.coordsIndex.push(t.tileID.key)}n.bindFramebuffer.set(null),n.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain))}renderLayer(e,r,n,i){if(!n.isHidden(this.transform.zoom)&&("background"===n.type||"custom"===n.type||(i||[]).length))switch(this.id=n.id,n.type){case"symbol":!function(e,r,n,i,o){if("translucent"!==e.renderPass)return;const a=Dr.disabled,s=e.colorModeForRenderPass();(n._unevaluatedLayout.hasValue("text-variable-anchor")||n._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(e,r,n,i,o,a,s,l,u){const c=r.transform,f=$e(),h="map"===o,p="map"===a;for(const o of e){const e=i.getTile(o),a=e.getBucket(n);if(!a||!a.text||!a.text.segments.get().length)continue;const d=t.ag(a.textSizeData,c.zoom),y=Be(e,1,r.transform.zoom),g=ye(o.posMatrix,p,h,r.transform,y),m="none"!==n.layout.get("icon-text-fit")&&a.hasIconData();if(d){const t=Math.pow(2,c.zoom-e.tileID.overscaledZ),n=r.style.map.terrain?(e,t)=>r.style.map.terrain.getElevation(o,e,t):null,i=f.translatePosition(c,e,s,l);Gr(a,h,p,u,c,g,o.posMatrix,t,d,m,f,i,o.toUnwrapped(),n)}}}(i,e,n,r,n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),o),0!==n.paint.get("icon-opacity").constantOr(1)&&qr(e,r,n,i,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),a,s),0!==n.paint.get("text-opacity").constantOr(1)&&qr(e,r,n,i,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),a,s),r.map.showCollisionBoxes&&(Nr(e,r,n,i,!0),Nr(e,r,n,i,!1))}(e,r,n,i,this.style.placement.variableOffsets);break;case"circle":!function(e,r,n,i){if("translucent"!==e.renderPass)return;const o=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),s=n.paint.get("circle-stroke-opacity"),l=!n.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const u=e.context,c=u.gl,f=e.depthModeForSublayer(0,Br.ReadOnly),h=Dr.disabled,p=e.colorModeForRenderPass(),d=[];for(let o=0;o<i.length;o++){const a=i[o],s=r.getTile(a),u=s.getBucket(n);if(!u)continue;const c=u.programConfigurations.get(n.id),f=e.useProgram("circle",c),h=u.layoutVertexBuffer,p=u.indexBuffer,y=e.style.map.terrain&&e.style.map.terrain.getTerrainData(a),g={programConfiguration:c,program:f,layoutVertexBuffer:h,indexBuffer:p,uniformValues:xt(e,a,s,n),terrainData:y};if(l){const e=u.segments.get();for(const r of e)d.push({segments:new t.$([r]),sortKey:r.sortKey,state:g})}else d.push({segments:u.segments,sortKey:0,state:g})}l&&d.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of d){const{programConfiguration:r,program:i,layoutVertexBuffer:o,indexBuffer:a,uniformValues:s,terrainData:l}=t.state;i.draw(u,c.TRIANGLES,f,h,p,jr.disabled,s,l,n.id,o,a,t.segments,n.paint,e.transform.zoom,r)}}(e,r,n,i);break;case"heatmap":!function(e,r,n,i){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const o=e.context,a=o.gl,s=Dr.disabled,l=new kr([a.ONE,a.ONE],t.aP.transparent,[!0,!0,!0,!0]);!function(e,t,r){const n=e.gl;e.activeTexture.set(n.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let i=r.heatmapFbo;if(i)n.bindTexture(n.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{const o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),i=r.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1,!1),function(e,t,r,n){var i,o;const a=e.gl,s=null!==(i=e.HALF_FLOAT)&&void 0!==i?i:a.UNSIGNED_BYTE,l=null!==(o=e.RGBA16F)&&void 0!==o?o:a.RGBA;a.texImage2D(a.TEXTURE_2D,0,l,t.width/4,t.height/4,0,a.RGBA,s,null),n.colorAttachment.set(r)}(e,t,o,i)}}(o,e,n),o.clear({color:t.aP.transparent});for(let t=0;t<i.length;t++){const u=i[t];if(r.hasRenderableParent(u))continue;const c=r.getTile(u),f=c.getBucket(n);if(!f)continue;const h=f.programConfigurations.get(n.id),p=e.useProgram("heatmap",h),{zoom:d}=e.transform;p.draw(o,a.TRIANGLES,Br.disabled,s,l,jr.disabled,Pt(u.posMatrix,c,d,n.paint.get("heatmap-intensity")),null,n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,n.paint,e.transform.zoom,h)}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,r){const n=e.context,i=n.gl,o=r.heatmapFbo;if(!o)return;n.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),n.activeTexture.set(i.TEXTURE1);let a=r.colorRampTexture;a||(a=r.colorRampTexture=new b(n,r.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,i.TRIANGLES,Br.disabled,Dr.disabled,e.colorModeForRenderPass(),jr.disabled,((e,r,n,i)=>{const o=t.F();t.aO(o,0,e.width,e.height,0,0,1);const a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:r.paint.get("heatmap-opacity")}})(e,r),null,r.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,r.paint,e.transform.zoom)}(e,n))}(e,r,n,i);break;case"line":!function(e,r,n,i){if("translucent"!==e.renderPass)return;const o=n.paint.get("line-opacity"),a=n.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,Br.ReadOnly),l=e.colorModeForRenderPass(),u=n.paint.get("line-dasharray"),c=n.paint.get("line-pattern"),f=c.constantOr(1),h=n.paint.get("line-gradient"),p=n.getCrossfadeParameters(),d=f?"linePattern":u?"lineSDF":h?"lineGradient":"line",y=e.context,g=y.gl;let m=!0;for(const o of i){const i=r.getTile(o);if(f&&!i.patternsLoaded())continue;const a=i.getBucket(n);if(!a)continue;const _=a.programConfigurations.get(n.id),v=e.context.program.get(),A=e.useProgram(d,_),w=m||A.program!==v,E=e.style.map.terrain&&e.style.map.terrain.getTerrainData(o),x=c.constantOr(null);if(x&&i.imageAtlas){const e=i.imageAtlas,t=e.patternPositions[x.to.toString()],r=e.patternPositions[x.from.toString()];t&&r&&_.setConstantPatternPositions(t,r)}const I=E?o:null,S=f?kt(e,i,n,p,I):u?Rt(e,i,n,u,p,I):h?Mt(e,i,n,a.lineClipsArray.length,I):Tt(e,i,n,I);if(f)y.activeTexture.set(g.TEXTURE0),i.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),_.updatePaintBuffers(p);else if(u&&(w||e.lineAtlas.dirty))y.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(y);else if(h){const i=a.gradients[n.id];let s=i.texture;if(n.gradientVersion!==i.version){let l=256;if(n.stepInterpolant){const n=r.getSource().maxzoom,i=o.canonical.z===n?Math.ceil(1<<e.transform.maxZoom-o.canonical.z):1;l=t.ac(t.aU(a.maxLineLength/t.W*1024*i),256,y.maxTextureSize)}i.gradient=t.aV({expression:n.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:i.gradient||void 0,clips:a.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new b(y,i.gradient,g.RGBA),i.version=n.gradientVersion,s=i.texture}y.activeTexture.set(g.TEXTURE0),s.bind(n.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}A.draw(y,g.TRIANGLES,s,e.stencilModeForClipping(o),l,jr.disabled,S,E,n.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,n.paint,e.transform.zoom,_,a.layoutVertexBuffer2),m=!1}}(e,r,n,i);break;case"fill":!function(e,r,n,i){const o=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.aP.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){const t=e.depthModeForSublayer(1,"opaque"===e.renderPass?Br.ReadWrite:Br.ReadOnly);Kr(e,r,n,i,t,s,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){const t=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Br.ReadOnly);Kr(e,r,n,i,t,s,!0)}}(e,r,n,i);break;case"fill-extrusion":!function(e,t,r,n){const i=r.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===e.renderPass){const o=new Br(e.context.gl.LEQUAL,Br.ReadWrite,e.depthRangeFor3D);if(1!==i||r.paint.get("fill-extrusion-pattern").constantOr(1))Hr(e,t,r,n,o,Dr.disabled,kr.disabled),Hr(e,t,r,n,o,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const i=e.colorModeForRenderPass();Hr(e,t,r,n,o,Dr.disabled,i)}}}(e,r,n,i);break;case"hillshade":!function(e,t,r,n){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const i=e.context,o=e.depthModeForSublayer(0,Br.ReadOnly),a=e.colorModeForRenderPass(),[s,l]="translucent"===e.renderPass?e.stencilConfigForOverlap(n):[{},n];for(const n of l){const i=t.getTile(n);void 0!==i.needsHillshadePrepare&&i.needsHillshadePrepare&&"offscreen"===e.renderPass?Xr(e,i,r,o,Dr.disabled,a):"translucent"===e.renderPass&&Yr(e,n,i,r,o,s[n.overscaledZ],a)}i.viewport.set([0,0,e.width,e.height])}(e,r,n,i);break;case"raster":!function(e,t,r,n){if("translucent"!==e.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!n.length)return;const i=e.context,o=i.gl,a=t.getSource(),s=e.useProgram("raster"),l=e.colorModeForRenderPass(),[u,c]=a instanceof X?[{},n]:e.stencilConfigForOverlap(n),f=c[c.length-1].overscaledZ,h=!e.options.moving;for(const n of c){const c=e.depthModeForSublayer(n.overscaledZ-f,1===r.paint.get("raster-opacity")?Br.ReadWrite:Br.ReadOnly,o.LESS),p=t.getTile(n);p.registerFadeDuration(r.paint.get("raster-fade-duration"));const d=t.findLoadedParent(n,0),y=t.findLoadedSibling(n),g=Jr(p,d||y||null,t,r,e.transform,e.style.map.terrain);let m,_;const v="nearest"===r.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),p.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),d?(d.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),m=Math.pow(2,d.tileID.overscaledZ-p.tileID.overscaledZ),_=[p.tileID.canonical.x*m%1,p.tileID.canonical.y*m%1]):p.texture.bind(v,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);const A=e.style.map.terrain&&e.style.map.terrain.getTerrainData(n),b=A?n:null,w=b?b.posMatrix:e.transform.calculatePosMatrix(n.toUnwrapped(),h),E=Dt(w,_||[0,0],m||1,g,r);a instanceof X?s.draw(i,o.TRIANGLES,c,Dr.disabled,l,jr.disabled,E,A,r.id,a.boundsBuffer,e.quadTriangleIndexBuffer,a.boundsSegments):s.draw(i,o.TRIANGLES,c,u[n.overscaledZ],l,jr.disabled,E,A,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}(e,r,n,i);break;case"background":!function(e,t,r,n){const i=r.paint.get("background-color"),o=r.paint.get("background-opacity");if(0===o)return;const a=e.context,s=a.gl,l=e.transform,u=l.tileSize,c=r.paint.get("background-pattern");if(e.isPatternMissing(c))return;const f=!c&&1===i.a&&1===o&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==f)return;const h=Dr.disabled,p=e.depthModeForSublayer(0,"opaque"===f?Br.ReadWrite:Br.ReadOnly),d=e.colorModeForRenderPass(),y=e.useProgram(c?"backgroundPattern":"background"),g=n||l.coveringTiles({tileSize:u,terrain:e.style.map.terrain});c&&(a.activeTexture.set(s.TEXTURE0),e.imageManager.bind(e.context));const m=r.getCrossfadeParameters();for(const t of g){const l=n?t.posMatrix:e.transform.calculatePosMatrix(t.toUnwrapped()),f=c?Qt(l,o,e,c,{tileID:t,tileSize:u},m):Ut(l,o,i),g=e.style.map.terrain&&e.style.map.terrain.getTerrainData(t);y.draw(a,s.TRIANGLES,p,h,d,jr.disabled,f,g,r.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}(e,0,n,i);break;case"custom":!function(e,t,r){const n=e.context,i=r.implementation;if("offscreen"===e.renderPass){const t=i.prerender;t&&(e.setCustomLayerDefaults(),n.setColorMode(e.colorModeForRenderPass()),t.call(i,n.gl,e.transform.customLayerMatrix()),n.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),n.setColorMode(e.colorModeForRenderPass()),n.setStencilMode(Dr.disabled);const t="3d"===i.renderingMode?new Br(e.context.gl.LEQUAL,Br.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,Br.ReadOnly);n.setDepthMode(t),i.render(n.gl,e.transform.customLayerMatrix()),n.setDirty(),e.setBaseState(),n.bindFramebuffer.set(null)}}(e,0,n)}}translatePosMatrix(e,r,n,i,o){if(!n[0]&&!n[1])return e;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);n=[n[0]*t-n[1]*e,n[0]*e+n[1]*t]}const s=[o?n[0]:Be(r,n[0],this.transform.zoom),o?n[1]:Be(r,n[1],this.transform.zoom),0],l=new Float32Array(16);return t.H(l,e,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),r=this.imageManager.getPattern(e.to.toString());return!t||!r}useProgram(e,t){this.cache=this.cache||{};const r=e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[r]||(this.cache[r]=new gt(this.context,ht[e],t,Gt[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[r]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new b(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:t}=this.context.gl;return this.width!==e||this.height!==t}}class fn{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,r,n){const i=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=1/(n=t.af([],n,e))[3]/r*i;return t.b0(n,n,[o,o,1/n[3],o])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=function(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}([],function(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e}([],m([],o[e[0]],o[e[1]]),m([],o[e[2]],o[e[1]]))),r=-((n=t)[0]*(i=o[e[1]])[0]+n[1]*i[1]+n[2]*i[2]);var n,i;return t.concat(r)}));return new fn(o,a)}}class hn{constructor(e,t){this.min=e,this.max=t,this.center=function(e,t,r){return e[0]=.5*t[0],e[1]=.5*t[1],e[2]=.5*t[2],e}([],function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}([],this.min,this.max))}quadrant(e){const t=[e%2==0,e<2],r=y(this.min),n=y(this.max);for(let e=0;e<t.length;e++)r[e]=t[e]?this.min[e]:this.center[e],n[e]=t[e]?this.center[e]:this.max[e];return n[2]=this.max[2],new hn(r,n)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const r=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let n=!0;for(let i=0;i<e.planes.length;i++){const o=e.planes[i];let a=0;for(let e=0;e<r.length;e++)t.b1(o,r[e])>=0&&a++;if(0===a)return 0;a!==r.length&&(n=!1)}if(n)return 2;for(let t=0;t<3;t++){let r=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][t]-this.min[t];r=Math.min(r,o),n=Math.max(n,o)}if(n<0||r>this.max[t]-this.min[t])return 0}return 1}}class pn{constructor(e=0,t=0,r=0,n=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(r)||r<0||isNaN(n)||n<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=r,this.right=n}interpolate(e,r,n){return null!=r.top&&null!=e.top&&(this.top=t.z.number(e.top,r.top,n)),null!=r.bottom&&null!=e.bottom&&(this.bottom=t.z.number(e.bottom,r.bottom,n)),null!=r.left&&null!=e.left&&(this.left=t.z.number(e.left,r.left,n)),null!=r.right&&null!=e.right&&(this.right=t.z.number(e.right,r.right,n)),this}getCenter(e,r){const n=t.ac((this.left+e-this.right)/2,0,e),i=t.ac((this.top+r-this.bottom)/2,0,r);return new t.P(n,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new pn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const dn=85.051129;class yn{constructor(e,r,n,i,o){this.tileSize=512,this._renderWorldCopies=void 0===o||!!o,this._minZoom=e||0,this._maxZoom=r||22,this._minPitch=null==n?0:n,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new pn,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new yn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const r=-t.b2(e,-180,180)*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=function(){var e=new t.A(4);return t.A!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}(),function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);e[0]=n*l+o*s,e[1]=i*l+a*s,e[2]=n*-s+o*l,e[3]=i*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const r=t.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.tileZoom=Math.max(0,Math.floor(t)),this.scale=this.zoomScale(t),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,r){this._unmodified=!1,this._edgeInsets.interpolate(e,t,r),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(e){const r=[new t.b3(0,e)];if(this._renderWorldCopies){const n=this.pointCoordinate(new t.P(0,0)),i=this.pointCoordinate(new t.P(this.width,0)),o=this.pointCoordinate(new t.P(this.width,this.height)),a=this.pointCoordinate(new t.P(0,this.height)),s=Math.floor(Math.min(n.x,i.x,o.x,a.x)),l=Math.floor(Math.max(n.x,i.x,o.x,a.x)),u=1;for(let n=s-u;n<=l+u;n++)0!==n&&r.push(new t.b3(n,e))}return r}coveringTiles(e){var r,n;let i=this.coveringZoomLevel(e);const o=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);const a=this.pointCoordinate(this.getCameraPoint()),s=t.Y.fromLngLat(this.center),l=Math.pow(2,i),u=[l*a.x,l*a.y,0],c=[l*s.x,l*s.y,0],f=fn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i);let h=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(h=i);const p=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,d=e=>({aabb:new hn([e*l,0,0],[(e+1)*l,l,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),y=[],g=[],m=i,v=e.reparseOverscaled?o:i;if(this._renderWorldCopies)for(let e=1;e<=3;e++)y.push(d(-e)),y.push(d(e));for(y.push(d(0));y.length>0;){const i=y.pop(),o=i.x,a=i.y;let s=i.fullyVisible;if(!s){const e=i.aabb.intersects(f);if(0===e)continue;s=2===e}const l=e.terrain?u:c,d=i.aabb.distanceX(l),A=i.aabb.distanceY(l),b=Math.max(Math.abs(d),Math.abs(A));if(i.zoom===m||b>p+(1<<m-i.zoom)-2&&i.zoom>=h){const e=m-i.zoom,r=u[0]-.5-(o<<e),n=u[1]-.5-(a<<e);g.push({tileID:new t.Q(i.zoom===m?v:i.zoom,i.wrap,i.zoom,o,a),distanceSq:_([c[0]-.5-o,c[1]-.5-a]),tileDistanceToCamera:Math.sqrt(r*r+n*n)})}else for(let l=0;l<4;l++){const u=(o<<1)+l%2,c=(a<<1)+(l>>1),f=i.zoom+1;let h=i.aabb.quadrant(l);if(e.terrain){const o=new t.Q(f,i.wrap,f,u,c),a=e.terrain.getMinMaxElevation(o),s=null!==(r=a.minElevation)&&void 0!==r?r:this.elevation,l=null!==(n=a.maxElevation)&&void 0!==n?n:this.elevation;h=new hn([h.min[0],h.min[1],s],[h.max[0],h.max[1],l])}y.push({aabb:h,zoom:f,x:u,y:c,wrap:i.wrap,fullyVisible:s})}}return g.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const r=t.ac(e.lat,-85.051129,dn);return new t.P(t.N(e.lng)*this.worldSize,t.O(r)*this.worldSize)}unproject(e){return new t.Y(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const r=this.elevation,n=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,i=this.pointLocation(this.centerPoint,e),o=e.getElevationForLngLatZoom(i,this.tileZoom);if(!(this.elevation-o))return;const a=n+r-o,s=Math.cos(this._pitch)*this.cameraToCenterDistance/a/t.b4(1,i.lat),l=this.scaleZoom(s/this.tileSize);this._elevation=o,this._center=i,this.zoom=l}setLocationAtPoint(e,r){const n=this.pointCoordinate(r),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.Y(o.x-(n.x-i.x),o.y-(n.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,t){return t?this.coordinatePoint(this.locationCoordinate(e),t.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,t){return this.coordinateLocation(this.pointCoordinate(e,t))}locationCoordinate(e){return t.Y.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,r){if(r){const t=r.pointCoordinate(e);if(null!=t)return t}const n=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.af(n,n,this.pixelMatrixInverse),t.af(i,i,this.pixelMatrixInverse);const o=n[3],a=i[3],s=n[1]/o,l=i[1]/a,u=n[2]/o,c=i[2]/a,f=u===c?0:(0-u)/(c-u);return new t.Y(t.z.number(n[0]/o,i[0]/a,f)/this.worldSize,t.z.number(s,l,f)/this.worldSize)}coordinatePoint(e,r=0,n=this.pixelMatrix){const i=[e.x*this.worldSize,e.y*this.worldSize,r,1];return t.af(i,i,n),new t.P(i[0]/i[3],i[1]/i[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return(new z).extend(this.pointLocation(new t.P(0,e))).extend(this.pointLocation(new t.P(this.width,e))).extend(this.pointLocation(new t.P(this.width,this.height))).extend(this.pointLocation(new t.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new z([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,dn])}calculatePosMatrix(e,r=!1){const n=e.key,i=r?this._alignedPosMatrixCache:this._posMatrixCache;if(i[n])return i[n];const o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,l=t.an(new Float64Array(16));return t.H(l,l,[s*a,o.y*a,0]),t.J(l,l,[a/t.W,a/t.W,1]),t.K(l,r?this.alignedProjMatrix:this.projMatrix,l),i[n]=new Float32Array(l),i[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,r){r=t.ac(+r,this.minZoom,this.maxZoom);const n={center:new t.M(e.lng,e.lat),zoom:r};let i=this.lngRange;if(!this._renderWorldCopies&&null===i){const e=180-1e-10;i=[-e,e]}const o=this.tileSize*this.zoomScale(n.zoom);let a=0,s=o,l=0,u=o,c=0,f=0;const{x:h,y:p}=this.size;if(this.latRange){const e=this.latRange;a=t.O(e[1])*o,s=t.O(e[0])*o,s-a<p&&(c=p/(s-a))}i&&(l=t.b2(t.N(i[0])*o,0,o),u=t.b2(t.N(i[1])*o,0,o),u<l&&(u+=o),u-l<h&&(f=h/(u-l)));const{x:d,y}=this.project.call({worldSize:o},e);let g,m;const _=Math.max(f||0,c||0);if(_){const e=new t.P(f?(u+l)/2:d,c?(s+a)/2:y);return n.center=this.unproject.call({worldSize:o},e).wrap(),n.zoom+=this.scaleZoom(_),n}if(this.latRange){const e=p/2;y-e<a&&(m=a+e),y+e>s&&(m=s-e)}if(i){const e=(l+u)/2;let r=d;this._renderWorldCopies&&(r=t.b2(d,e-o/2,e+o/2));const n=h/2;r-n<l&&(g=l+n),r+n>u&&(g=u-n)}if(void 0!==g||void 0!==m){const e=new t.P(null!=g?g:d,null!=m?m:y);n.center=this.unproject.call({worldSize:o},e).wrap()}return n}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:t,zoom:r}=this.getConstrained(this.center,this.zoom);this.center=t,this.zoom=r,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,r=this.point.x,n=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=t.b4(1,this.center.lat)*this.worldSize;let i=t.an(new Float64Array(16));t.J(i,i,[this.width/2,-this.height/2,1]),t.H(i,i,[1,-1,0]),this.labelPlaneMatrix=i,i=t.an(new Float64Array(16)),t.J(i,i,[1,-1,1]),t.H(i,i,[-1,-1,0]),t.J(i,i,[2/this.width,2/this.height,1]),this.glCoordMatrix=i;const o=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),a=Math.min(this.elevation,this.minElevationForCurrentTile),s=o-a*this._pixelPerMeter/Math.cos(this._pitch),l=a<0?s:o,u=Math.PI/2+this._pitch,c=this._fov*(.5+e.y/this.height),f=Math.sin(c)*l/Math.sin(t.ac(Math.PI-u-c,.01,Math.PI-.01)),h=this.getHorizon(),p=2*Math.atan(h/this.cameraToCenterDistance)*(.5+e.y/(2*h)),d=Math.sin(p)*l/Math.sin(t.ac(Math.PI-u-p,.01,Math.PI-.01)),y=Math.min(f,d),g=1.01*(Math.cos(Math.PI/2-this._pitch)*y+l),m=this.height/50;i=new Float64Array(16),t.b5(i,this._fov,this.width/this.height,m,g),i[8]=2*-e.x/this.width,i[9]=2*e.y/this.height,t.J(i,i,[1,-1,1]),t.H(i,i,[0,0,-this.cameraToCenterDistance]),t.b6(i,i,this._pitch),t.ad(i,i,this.angle),t.H(i,i,[-r,-n,0]),this.mercatorMatrix=t.J([],i,[this.worldSize,this.worldSize,this.worldSize]),t.J(i,i,[1,1,this._pixelPerMeter]),this.pixelMatrix=t.K(new Float64Array(16),this.labelPlaneMatrix,i),t.H(i,i,[0,0,-this.elevation]),this.projMatrix=i,this.invProjMatrix=t.as([],i),this.pixelMatrix3D=t.K(new Float64Array(16),this.labelPlaneMatrix,i);const _=this.width%2/2,v=this.height%2/2,A=Math.cos(this.angle),b=Math.sin(this.angle),w=r-Math.round(r)+A*_+b*v,E=n-Math.round(n)+A*v+b*_,x=new Float64Array(i);if(t.H(x,x,[w>.5?w-1:w,E>.5?E-1:E,0]),this.alignedProjMatrix=x,i=t.as(new Float64Array(16),this.pixelMatrix),!i)throw new Error("failed to invert matrix");this.pixelMatrixInverse=i,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new t.P(0,0)),r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.af(r,r,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.P(0,e))}getCameraQueryGeometry(e){const r=this.getCameraPoint();if(1===e.length)return[e[0],r];{let n=r.x,i=r.y,o=r.x,a=r.y;for(const t of e)n=Math.min(n,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y);return[new t.P(n,i),new t.P(o,i),new t.P(o,a),new t.P(n,a),new t.P(n,i)]}}lngLatToCameraDepth(e,r){const n=this.locationCoordinate(e),i=[n.x*this.worldSize,n.y*this.worldSize,r,1];return t.af(i,i,this.projMatrix),i[2]/i[3]}}function gn(e,t){let r,n=!1,i=null,o=null;const a=()=>{i=null,n&&(e.apply(o,r),i=setTimeout(a,t),n=!1)};return(...e)=>(n=!0,o=this,r=e,i||a(),i)}class mn{constructor(e){this._getCurrentHash=()=>{const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((e=>e.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")},this._onHashChange=()=>{const e=this._getCurrentHash();if(e.length>=3&&!e.some((e=>isNaN(e)))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const e=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,e)}catch(e){}},this._updateHash=gn(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(e){const t=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,n=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,n),o=Math.round(t.lng*i)/i,a=Math.round(t.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch();let u="";if(u+=e?`/${o}/${a}/${r}`:`${r}/${a}/${o}`,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+=`/${Math.round(l)}`),this._hashName){const e=this._hashName;let t=!1;const r=window.location.hash.slice(1).split("&").map((r=>{const n=r.split("=")[0];return n===e?(t=!0,`${n}=${u}`):r})).filter((e=>e));return t||r.push(`${e}=${u}`),`#${r.join("&")}`}return`#${u}`}}const _n={linearity:.3,easing:t.b7(0,0,.3,1)},vn=t.e({deceleration:2500,maxSpeed:1400},_n),An=t.e({deceleration:20,maxSpeed:1400},_n),bn=t.e({deceleration:1e3,maxSpeed:360},_n),wn=t.e({deceleration:1e3,maxSpeed:90},_n);class En{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,t=o.now();for(;e.length>0&&t-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,pan:new t.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)r.zoom+=e.zoomDelta||0,r.bearing+=e.bearingDelta||0,r.pitch+=e.pitchDelta||0,e.panDelta&&r.pan._add(e.panDelta),e.around&&(r.around=e.around),e.pinchAround&&(r.pinchAround=e.pinchAround);const n=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(r.pan.mag()){const o=In(r.pan.mag(),n,t.e({},vn,e||{}));i.offset=r.pan.mult(o.amount/r.pan.mag()),i.center=this._map.transform.center,xn(i,o)}if(r.zoom){const e=In(r.zoom,n,An);i.zoom=this._map.transform.zoom+e.amount,xn(i,e)}if(r.bearing){const e=In(r.bearing,n,bn);i.bearing=this._map.transform.bearing+t.ac(e.amount,-179,179),xn(i,e)}if(r.pitch){const e=In(r.pitch,n,wn);i.pitch=this._map.transform.pitch+e.amount,xn(i,e)}if(i.zoom||i.bearing){const e=void 0===r.pinchAround?r.around:r.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),t.e(i,{noMoveStart:!0})}}function xn(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function In(e,r,n){const{maxSpeed:i,linearity:o,deceleration:a}=n,s=t.ac(e*o/(r/1e3),-i,i),l=Math.abs(s)/(a*o);return{easing:n.easing,duration:1e3*l,amount:s*(l/2)}}class Sn extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,n,i={}){const o=a.mousePos(r.getCanvas(),n),s=r.unproject(o);super(e,t.e({point:o,lngLat:s,originalEvent:n},i)),this._defaultPrevented=!1,this.target=r}}class Cn extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,n){const i="touchend"===e?n.changedTouches:n.touches,o=a.touchPos(r.getCanvasContainer(),i),s=o.map((e=>r.unproject(e))),l=o.reduce(((e,t,r,n)=>e.add(t.div(n.length))),new t.P(0,0));super(e,{points:o,point:l,lngLats:s,lngLat:r.unproject(l),originalEvent:n}),this._defaultPrevented=!1}}class Pn extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,r){super(e,{originalEvent:r}),this._defaultPrevented=!1}}class On{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Pn(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new Sn(e.type,this._map,e))}mouseup(e){this._map.fire(new Sn(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Sn(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Sn(e.type,this._map,e))}mouseover(e){this._map.fire(new Sn(e.type,this._map,e))}mouseout(e){this._map.fire(new Sn(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Cn(e.type,this._map,e))}touchmove(e){this._map.fire(new Cn(e.type,this._map,e))}touchend(e){this._map.fire(new Cn(e.type,this._map,e))}touchcancel(e){this._map.fire(new Cn(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Tn{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Sn(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Sn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Sn(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mn{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(t.P.convert(e),this._map.terrain)}}class kn{constructor(e,t){this._map=e,this._tr=new Mn(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(a.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const r=t;if(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)return;const n=this._startPos;this._lastPos=r,this._box||(this._box=a.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const i=Math.min(n.x,r.x),o=Math.max(n.x,r.x),s=Math.min(n.y,r.y),l=Math.max(n.y,r.y);a.setTransform(this._box,`translate(${i}px,${s}px)`),this._box.style.width=o-i+"px",this._box.style.height=l-s+"px"}mouseupWindow(e,r){if(!this._active)return;if(0!==e.button)return;const n=this._startPos,i=r;if(this.reset(),a.suppressClick(),n.x!==i.x||n.y!==i.y)return this._map.fire(new t.k("boxzoomend",{originalEvent:e})),{cameraAnimation:e=>e.fitScreenCoordinates(n,i,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,r){return this._map.fire(new t.k(e,{originalEvent:r}))}}function Rn(e,t){if(e.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${e.length}, points ${t.length}`);const r={};for(let n=0;n<e.length;n++)r[e[n].identifier]=t[n];return r}class Bn{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,r,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),n.length===this.numTouches&&(this.centroid=function(e){const r=new t.P(0,0);for(const t of e)r._add(t);return r.div(e.length)}(r),this.touches=Rn(n,r)))}touchmove(e,t,r){if(this.aborted||!this.centroid)return;const n=Rn(r,t);for(const e in this.touches){const t=n[e];(!t||t.dist(this.touches[e])>30)&&(this.aborted=!0)}}touchend(e,t,r){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class Ln{constructor(e){this.singleTap=new Bn(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,r){this.singleTap.touchstart(e,t,r)}touchmove(e,t,r){this.singleTap.touchmove(e,t,r)}touchend(e,t,r){const n=this.singleTap.touchend(e,t,r);if(n){const t=e.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(n)<30;if(t&&r||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=n,this.count===this.numTaps)return this.reset(),n}}}class Dn{constructor(e){this._tr=new Mn(e),this._zoomIn=new Ln({numTouches:1,numTaps:2}),this._zoomOut=new Ln({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,r){this._zoomIn.touchstart(e,t,r),this._zoomOut.touchstart(e,t,r)}touchmove(e,t,r){this._zoomIn.touchmove(e,t,r),this._zoomOut.touchmove(e,t,r)}touchend(e,t,r){const n=this._zoomIn.touchend(e,t,r),i=this._zoomOut.touchend(e,t,r),o=this._tr;return n?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(n)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jn{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const t=this._moveFunction(...e);if(t.bearingDelta||t.pitchDelta||t.around||t.panDelta)return this._active=!0,t}dragStart(e,t){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=t.length?t[0]:t,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,t){if(!this.isEnabled())return;const r=this._lastPoint;if(!r)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const n=t.length?t[0]:t;return!this._moved&&n.dist(r)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=n,this._move(r,n))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&a.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Fn={0:1,2:2};class Nn{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const t=a.mouseButton(e);this._eventButton=t}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(e,t){const r=Fn[t];return void 0===e.buttons||(e.buttons&r)!==r}(e,this._eventButton)}isValidEndEvent(e){return a.mouseButton(e)===this._eventButton}}class Zn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return 1===e.targetTouches.length}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Un=e=>{e.mousedown=e.dragStart,e.mousemoveWindow=e.dragMove,e.mouseup=e.dragEnd,e.contextmenu=e=>{e.preventDefault()}},Qn=({enable:e,clickTolerance:t,bearingDegreesPerPixelMoved:r=.8})=>{const n=new Nn({checkCorrectEvent:e=>0===a.mouseButton(e)&&e.ctrlKey||2===a.mouseButton(e)});return new jn({clickTolerance:t,move:(e,t)=>({bearingDelta:(t.x-e.x)*r}),moveStateManager:n,enable:e,assignEvents:Un})},Gn=({enable:e,clickTolerance:t,pitchDegreesPerPixelMoved:r=-.5})=>{const n=new Nn({checkCorrectEvent:e=>0===a.mouseButton(e)&&e.ctrlKey||2===a.mouseButton(e)});return new jn({clickTolerance:t,move:(e,t)=>({pitchDelta:(t.y-e.y)*r}),moveStateManager:n,enable:e,assignEvents:Un})};class zn{constructor(e,t){this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(e,t,r){return this._calculateTransform(e,t,r)}touchmove(e,t,r){if(this._active&&!(r.length<this.minTouchs()))return e.preventDefault(),this._calculateTransform(e,t,r)}touchend(e,t,r){this._calculateTransform(e,t,r),this._active&&r.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,r,n){n.length>0&&(this._active=!0);const i=Rn(n,r),o=new t.P(0,0),a=new t.P(0,0);let s=0;for(const e in i){const t=i[e],r=this._touches[e];r&&(o._add(t),a._add(t.sub(r)),s++,i[e]=t)}if(this._touches=i,s<this.minTouchs()||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,t,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,r){if(!this._firstTwoTouches)return;e.preventDefault();const[n,i]=this._firstTwoTouches,o=Vn(r,t,n),a=Vn(r,t,i);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,e)}touchend(e,t,r){if(!this._firstTwoTouches)return;const[n,i]=this._firstTwoTouches,o=Vn(r,t,n),s=Vn(r,t,i);o&&s||(this._active&&a.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Vn(e,t,r){for(let n=0;n<e.length;n++)if(e[n].identifier===r)return t[n]}function Wn(e,t){return Math.log(e/t)/Math.LN2}class Kn extends qn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const r=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Wn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Wn(this._distance,r),pinchAround:t}}}function Hn(e,t){return 180*e.angleWith(t)/Math.PI}class Yn extends qn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t,r){const n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Hn(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,r=Hn(e,this._startVector);return Math.abs(r)<t}}function Xn(e){return Math.abs(e.y)>Math.abs(e.x)}class Jn extends qn{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,r){super.touchstart(e,t,r),this._currentTouchCount=r.length}_start(e){this._lastPoints=e,Xn(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,r){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const n=e[0].sub(this._lastPoints[0]),i=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(n,i,r.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(n.y+i.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,r){if(void 0!==this._valid)return this._valid;const n=e.mag()>=2,i=t.mag()>=2;if(!n&&!i)return;if(!n||!i)return void 0===this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Xn(e)&&Xn(t)&&o}}const $n={panStep:100,bearingStep:15,pitchStep:10};class ei{constructor(e){this._tr=new Mn(e);const t=$n;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,r=0,n=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?n=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?n=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(r=0,n=0),{cameraAnimation:a=>{const s=this._tr;a.easeTo({duration:300,easeId:"keyboardHandler",easing:ti,zoom:t?Math.round(s.zoom)+t*(e.shiftKey?2:1):s.zoom,bearing:s.bearing+r*this._bearingStep,pitch:s.pitch+n*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:s.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ti(e){return e*(2-e)}const ri=4.000244140625;class ni{constructor(e,t){this._onTimeout=e=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},this._map=e,this._tr=new Mn(e),this._triggerRenderFrame=t,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;if(this._map.cooperativeGestures.isEnabled()&&!e[this._map.cooperativeGestures._bypassKey])return;let t=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=o.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==t&&t%ri==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(n*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const r=a.mousePos(this._map.getCanvas(),e),n=this._tr;this._around=r.y>n.transform.height/2-n.transform.getHorizon()?t.M.convert(this._aroundCenter?n.center:n.unproject(r)):t.M.convert(n.center),this._aroundPoint=n.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._tr.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>ri?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==r&&(r=1/r);const n="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(n*r))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:e.zoom,n=this._startZoom,i=this._easing;let a,s=!1;if("wheel"===this._type&&n&&i){const e=Math.min((o.now()-this._lastWheelEventTime)/200,1),l=i(e);a=t.z.number(n,r,l),e<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let r=t.b8;if(this._prevEase){const e=this._prevEase,n=(o.now()-e.start)/e.duration,i=e.easing(n+.01)-e.easing(n),a=.27/Math.sqrt(i*i+1e-4)*.01,s=Math.sqrt(.0729-a*a);r=t.b7(a,s,.25,1)}return this._prevEase={start:o.now(),duration:e,easing:r},r}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ii{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class oi{constructor(e){this._tr=new Mn(e),this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ai{constructor(){this._tap=new Ln({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,t,r){if(!this._swipePoint)if(this._tapTime){const n=t[0],i=e.timeStamp-this._tapTime<500,o=this._tapPoint.dist(n)<30;i&&o?r.length>0&&(this._swipePoint=n,this._swipeTouch=r[0].identifier):this.reset()}else this._tap.touchstart(e,t,r)}touchmove(e,t,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;const n=t[0],i=n.y-this._swipePoint.y;return this._swipePoint=n,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,r)}touchend(e,t,r){if(this._tapTime)this._swipePoint&&0===r.length&&this.reset();else{const n=this._tap.touchend(e,t,r);n&&(this._tapTime=e.timeStamp,this._tapPoint=n)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class si{constructor(e,t,r){this._el=e,this._mousePan=t,this._touchPan=r}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class li{constructor(e,t,r){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ui{constructor(e,t,r,n){this._el=e,this._touchZoom=t,this._touchRotate=r,this._tapDragZoom=n,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ci{constructor(e,t){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=e,this._options=t,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=a.create("div","maplibregl-cooperative-gesture-screen",e);let t=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(t=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const r=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),n=document.createElement("div");n.className="maplibregl-desktop-message",n.textContent=t,this._container.appendChild(n);const i=document.createElement("div");i.className="maplibregl-mobile-message",i.textContent=r,this._container.appendChild(i),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(a.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(e){this._onCooperativeGesture(1===e.touches.length)}wheel(e){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!e[this._bypassKey])}_onCooperativeGesture(e){this._enabled&&e&&(this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const fi=e=>e.zoom||e.drag||e.pitch||e.rotate;class hi extends t.k{}function pi(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class di{constructor(e,t){this.handleWindowEvent=e=>{this.handleEvent(e,`${e.type}Window`)},this.handleEvent=(e,t)=>{if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const r="renderFrame"===e.type?void 0:e,n={needsRenderFrame:!1},i={},o={},s=e.touches,l=s?this._getMapTouches(s):void 0,u=l?a.touchPos(this._map.getCanvas(),l):a.mousePos(this._map.getCanvas(),e);for(const{handlerName:a,handler:s,allowed:c}of this._handlers){if(!s.isEnabled())continue;let f;this._blockedByActive(o,c,a)?s.reset():s[t||e.type]&&(f=s[t||e.type](e,u,l),this.mergeHandlerResult(n,i,f,a,r),f&&f.needsRenderFrame&&this._triggerRenderFrame()),(f||s.isActive())&&(o[a]=s)}const c={};for(const e in this._previousActiveHandlers)o[e]||(c[e]=r);this._previousActiveHandlers=o,(Object.keys(c).length||pi(n))&&(this._changes.push([n,i,c]),this._triggerRenderFrame()),(Object.keys(o).length||pi(n))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:f}=n;f&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],f(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new En(e),this._bearingSnap=t.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(t);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[e,t,r]of this._listeners)a.addEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,r)}destroy(){for(const[e,t,r]of this._listeners)a.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const t=this._map,r=t.getCanvasContainer();this._add("mapEvent",new On(t,e));const n=t.boxZoom=new kn(t,e);this._add("boxZoom",n),e.interactive&&e.boxZoom&&n.enable();const i=t.cooperativeGestures=new ci(t,e.cooperativeGestures);this._add("cooperativeGestures",i),e.cooperativeGestures&&i.enable();const o=new Dn(t),s=new oi(t);t.doubleClickZoom=new ii(s,o),this._add("tapZoom",o),this._add("clickZoom",s),e.interactive&&e.doubleClickZoom&&t.doubleClickZoom.enable();const l=new ai;this._add("tapDragZoom",l);const u=t.touchPitch=new Jn(t);this._add("touchPitch",u),e.interactive&&e.touchPitch&&t.touchPitch.enable(e.touchPitch);const c=Qn(e),f=Gn(e);t.dragRotate=new li(e,c,f),this._add("mouseRotate",c,["mousePitch"]),this._add("mousePitch",f,["mouseRotate"]),e.interactive&&e.dragRotate&&t.dragRotate.enable();const h=(({enable:e,clickTolerance:t})=>{const r=new Nn({checkCorrectEvent:e=>0===a.mouseButton(e)&&!e.ctrlKey});return new jn({clickTolerance:t,move:(e,t)=>({around:t,panDelta:t.sub(e)}),activateOnStart:!0,moveStateManager:r,enable:e,assignEvents:Un})})(e),p=new zn(e,t);t.dragPan=new si(r,h,p),this._add("mousePan",h),this._add("touchPan",p,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&t.dragPan.enable(e.dragPan);const d=new Yn,y=new Kn;t.touchZoomRotate=new ui(r,y,d,l),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",y,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&t.touchZoomRotate.enable(e.touchZoomRotate);const g=t.scrollZoom=new ni(t,(()=>this._triggerRenderFrame()));this._add("scrollZoom",g,["mousePan"]),e.interactive&&e.scrollZoom&&t.scrollZoom.enable(e.scrollZoom);const m=t.keyboard=new ei(t);this._add("keyboard",m),e.interactive&&e.keyboard&&t.keyboard.enable(),this._add("blockableMapEvent",new Tn(t))}_add(e,t,r){this._handlers.push({handlerName:e,handler:t,allowed:r}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(fi(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,r){for(const n in e)if(n!==r&&(!t||t.indexOf(n)<0))return!0;return!1}_getMapTouches(e){const t=[];for(const r of e)this._el.contains(r.target)&&t.push(r);return t}mergeHandlerResult(e,r,n,i,o){if(!n)return;t.e(e,n);const a={handlerName:i,originalEvent:n.originalEvent||o};void 0!==n.zoomDelta&&(r.zoom=a),void 0!==n.panDelta&&(r.drag=a),void 0!==n.pitchDelta&&(r.pitch=a),void 0!==n.bearingDelta&&(r.rotate=a)}_applyChanges(){const e={},r={},n={};for(const[i,o,a]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.P(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.e(r,o),t.e(n,a);this._updateMapTransform(e,r,n),this._changes=[]}_updateMapTransform(e,t,r){const n=this._map,i=n._getTransformForUpdate(),o=n.terrain;if(!(pi(e)||o&&this._terrainMovement))return this._fireEvents(t,r,!0);let{panDelta:a,zoomDelta:s,bearingDelta:l,pitchDelta:u,around:c,pinchAround:f}=e;void 0!==f&&(c=f),n._stop(!0),c=c||n.transform.centerPoint;const h=i.pointLocation(a?c.sub(a):c);l&&(i.bearing+=l),u&&(i.pitch+=u),s&&(i.zoom+=s),o?this._terrainMovement||!t.drag&&!t.zoom?t.drag&&this._terrainMovement?i.center=i.pointLocation(i.centerPoint.sub(a)):i.setLocationAtPoint(h,c):(this._terrainMovement=!0,this._map._elevationFreeze=!0,i.setLocationAtPoint(h,c)):i.setLocationAtPoint(h,c),n._applyUpdatedTransform(i),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,r,!0)}_fireEvents(e,r,n){const i=fi(this._eventsInProgress),a=fi(e),s={};for(const t in e){const{originalEvent:r}=e[t];this._eventsInProgress[t]||(s[`${t}start`]=r),this._eventsInProgress[t]=e[t]}!i&&a&&this._fireEvent("movestart",a.originalEvent);for(const e in s)this._fireEvent(e,s[e]);a&&this._fireEvent("move",a.originalEvent);for(const t in e){const{originalEvent:r}=e[t];this._fireEvent(t,r)}const l={};let u;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:n}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],u=r[t]||n,l[`${e}end`]=u)}for(const e in l)this._fireEvent(e,l[e]);const c=fi(this._eventsInProgress),f=(i||a)&&!c;if(f&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),n&&f){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),r=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;!e||!e.essential&&o.prefersReducedMotion?(this._map.fire(new t.k("moveend",{originalEvent:u})),r(this._map.getBearing())&&this._map.resetNorth()):(r(e.bearing||this._map.getBearing())&&(e.bearing=0),e.freezeElevation=!0,this._map.easeTo(e,{originalEvent:u})),this._updatingCamera=!1}}_fireEvent(e,r){this._map.fire(new t.k(e,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new hi("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class yi extends t.E{constructor(e,t){super(),this._renderFrameCallback=()=>{const e=Math.min((o.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=t.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new t.M(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(e,r,n){return e=t.P.convert(e).mult(-1),this.panTo(this.transform.center,t.e({offset:e},r),n)}panTo(e,r,n){return this.easeTo(t.e({center:e},r),n)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(e,r,n){return this.easeTo(t.e({zoom:e},r),n)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(e,r,n){return this.easeTo(t.e({bearing:e},r),n)}resetNorth(e,r){return this.rotateTo(0,t.e({duration:1e3},e),r),this}resetNorthPitch(e,r){return this.easeTo(t.e({bearing:0,pitch:0,duration:1e3},e),r),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(e,t){e=z.convert(e);const r=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,t)}_cameraForBoxAndBearing(e,r,n,i){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.e({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const e=i.padding;i.padding={top:e,bottom:e,right:e,left:e}}i.padding=t.e(o,i.padding);const a=this.transform,s=a.padding,l=new z(e,r),u=a.project(l.getNorthWest()),c=a.project(l.getNorthEast()),f=a.project(l.getSouthEast()),h=a.project(l.getSouthWest()),p=t.b9(-n),d=u.rotate(p),y=c.rotate(p),g=f.rotate(p),m=h.rotate(p),_=new t.P(Math.max(d.x,y.x,m.x,g.x),Math.max(d.y,y.y,m.y,g.y)),v=new t.P(Math.min(d.x,y.x,m.x,g.x),Math.min(d.y,y.y,m.y,g.y)),A=_.sub(v),b=(a.width-(s.left+s.right+i.padding.left+i.padding.right))/A.x,w=(a.height-(s.top+s.bottom+i.padding.top+i.padding.bottom))/A.y;if(w<0||b<0)return void t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const E=Math.min(a.scaleZoom(a.scale*Math.min(b,w)),i.maxZoom),x=t.P.convert(i.offset),I=new t.P((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(t.b9(n)),S=x.add(I).mult(a.scale/a.zoomScale(E));return{center:a.unproject(u.add(f).div(2).sub(S)),zoom:E,bearing:n}}fitBounds(e,t,r){return this._fitInternal(this.cameraForBounds(e,t),t,r)}fitScreenCoordinates(e,r,n,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.P.convert(e)),this.transform.pointLocation(t.P.convert(r)),n,i),i,o)}_fitInternal(e,r,n){return e?(delete(r=t.e(e,r)).padding,r.linear?this.easeTo(r,n):this.flyTo(r,n)):this}jumpTo(e,r){this.stop();const n=this._getTransformForUpdate();let i=!1,o=!1,a=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(i=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=t.M.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(o=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(a=!0,n.pitch=+e.pitch),null==e.padding||n.isPaddingEqual(e.padding)||(n.padding=e.padding),this._applyUpdatedTransform(n),this.fire(new t.k("movestart",r)).fire(new t.k("move",r)),i&&this.fire(new t.k("zoomstart",r)).fire(new t.k("zoom",r)).fire(new t.k("zoomend",r)),o&&this.fire(new t.k("rotatestart",r)).fire(new t.k("rotate",r)).fire(new t.k("rotateend",r)),a&&this.fire(new t.k("pitchstart",r)).fire(new t.k("pitch",r)).fire(new t.k("pitchend",r)),this.fire(new t.k("moveend",r))}calculateCameraOptionsFromTo(e,r,n,i=0){const o=t.Y.fromLngLat(e,r),a=t.Y.fromLngLat(n,i),s=a.x-o.x,l=a.y-o.y,u=a.z-o.z,c=Math.hypot(s,l,u);if(0===c)throw new Error("Can't calculate camera options with same From and To");const f=Math.hypot(s,l),h=this.transform.scaleZoom(this.transform.cameraToCenterDistance/c/this.transform.tileSize),p=180*Math.atan2(s,-l)/Math.PI;let d=180*Math.acos(f/c)/Math.PI;return d=u<0?90-d:90+d,{center:a.toLngLat(),zoom:h,pitch:d,bearing:p}}easeTo(e,r){var n;this._stop(!1,e.easeId),(!1===(e=t.e({offset:[0,0],duration:500,easing:t.b8},e)).animate||!e.essential&&o.prefersReducedMotion)&&(e.duration=0);const i=this._getTransformForUpdate(),a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="bearing"in e?this._normalizeBearing(e.bearing,s):s,f="pitch"in e?+e.pitch:l,h="padding"in e?e.padding:i.padding,p=t.P.convert(e.offset);let d=i.centerPoint.add(p);const y=i.pointLocation(d),{center:g,zoom:m}=i.getConstrained(t.M.convert(e.center||y),null!==(n=e.zoom)&&void 0!==n?n:a);this._normalizeCenter(g);const _=i.project(y),v=i.project(g).sub(_),A=i.zoomScale(m-a);let b,w;e.around&&(b=t.M.convert(e.around),w=i.locationPoint(b));const E={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||m!==a,this._rotating=this._rotating||s!==c,this._pitching=this._pitching||f!==l,this._padding=!i.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(r,e.noMoveStart,E),this.terrain&&this._prepareElevation(g),this._ease((n=>{if(this._zooming&&(i.zoom=t.z.number(a,m,n)),this._rotating&&(i.bearing=t.z.number(s,c,n)),this._pitching&&(i.pitch=t.z.number(l,f,n)),this._padding&&(i.interpolatePadding(u,h,n),d=i.centerPoint.add(p)),this.terrain&&!e.freezeElevation&&this._updateElevation(n),b)i.setLocationAtPoint(b,w);else{const e=i.zoomScale(i.zoom-a),t=m>a?Math.min(2,A):Math.max(.5,A),r=Math.pow(t,1-n),o=i.unproject(_.add(v.mult(n*r)).mult(e));i.setLocationAtPoint(i.renderWorldCopies?o.wrap():o,d)}this._applyUpdatedTransform(i),this._fireMoveEvents(r)}),(t=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r,t)}),e),this}_prepareEase(e,r,n={}){this._moving=!0,r||n.moving||this.fire(new t.k("movestart",e)),this._zooming&&!n.zooming&&this.fire(new t.k("zoomstart",e)),this._rotating&&!n.rotating&&this.fire(new t.k("rotatestart",e)),this._pitching&&!n.pitching&&this.fire(new t.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const r=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&r!==this._elevationTarget){const t=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(t-(r-(t*e+this._elevationStart))/(1-e)),this._elevationTarget=r}this.transform.elevation=t.z.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(e){if(!this.transformCameraUpdate)return;const t=e.clone(),{center:r,zoom:n,pitch:i,bearing:o,elevation:a}=this.transformCameraUpdate(t);r&&(t.center=r),void 0!==n&&(t.zoom=n),void 0!==i&&(t.pitch=i),void 0!==o&&(t.bearing=o),void 0!==a&&(t.elevation=a),this.transform.apply(t)}_fireMoveEvents(e){this.fire(new t.k("move",e)),this._zooming&&this.fire(new t.k("zoom",e)),this._rotating&&this.fire(new t.k("rotate",e)),this._pitching&&this.fire(new t.k("pitch",e))}_afterEase(e,r){if(this._easeId&&r&&this._easeId===r)return;delete this._easeId;const n=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new t.k("zoomend",e)),i&&this.fire(new t.k("rotateend",e)),o&&this.fire(new t.k("pitchend",e)),this.fire(new t.k("moveend",e))}flyTo(e,r){var n;if(!e.essential&&o.prefersReducedMotion){const n=t.L(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,r)}this.stop(),e=t.e({offset:[0,0],speed:1.2,curve:1.42,easing:t.b8},e);const i=this._getTransformForUpdate(),a=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="bearing"in e?this._normalizeBearing(e.bearing,s):s,f="pitch"in e?+e.pitch:l,h="padding"in e?e.padding:i.padding,p=t.P.convert(e.offset);let d=i.centerPoint.add(p);const y=i.pointLocation(d),{center:g,zoom:m}=i.getConstrained(t.M.convert(e.center||y),null!==(n=e.zoom)&&void 0!==n?n:a);this._normalizeCenter(g);const _=i.zoomScale(m-a),v=i.project(y),A=i.project(g).sub(v);let b=e.curve;const w=Math.max(i.width,i.height),E=w/_,x=A.mag();if("minZoom"in e){const r=t.ac(Math.min(e.minZoom,a,m),i.minZoom,i.maxZoom),n=w/i.zoomScale(r-a);b=Math.sqrt(n/x*2)}const I=b*b;function S(e){const t=(E*E-w*w+(e?-1:1)*I*I*x*x)/(2*(e?E:w)*I*x);return Math.log(Math.sqrt(t*t+1)-t)}function C(e){return(Math.exp(e)-Math.exp(-e))/2}function P(e){return(Math.exp(e)+Math.exp(-e))/2}const O=S(!1);let T=function(e){return P(O)/P(O+b*e)},M=function(e){return w*((P(O)*(C(t=O+b*e)/P(t))-C(O))/I)/x;var t},k=(S(!0)-O)/b;if(Math.abs(x)<1e-6||!isFinite(k)){if(Math.abs(w-E)<1e-6)return this.easeTo(e,r);const t=E<w?-1:1;k=Math.abs(Math.log(E/w))/b,M=()=>0,T=e=>Math.exp(t*b*e)}return e.duration="duration"in e?+e.duration:1e3*k/("screenSpeed"in e?+e.screenSpeed/b:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==c,this._pitching=f!==l,this._padding=!i.isPaddingEqual(h),this._prepareEase(r,!1),this.terrain&&this._prepareElevation(g),this._ease((n=>{const o=n*k,y=1/T(o);i.zoom=1===n?m:a+i.scaleZoom(y),this._rotating&&(i.bearing=t.z.number(s,c,n)),this._pitching&&(i.pitch=t.z.number(l,f,n)),this._padding&&(i.interpolatePadding(u,h,n),d=i.centerPoint.add(p)),this.terrain&&!e.freezeElevation&&this._updateElevation(n);const _=1===n?g:i.unproject(v.add(A.mult(M(o))).mult(y));i.setLocationAtPoint(i.renderWorldCopies?_.wrap():_,d),this._applyUpdatedTransform(i),this._fireMoveEvents(r)}),(()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r)}),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){var r;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}return e||null===(r=this.handlers)||void 0===r||r.stop(!1),this}_ease(e,t,r){!1===r.animate||0===r.duration?(e(1),t()):(this._easeStart=o.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,r){e=t.b2(e,-180,180);const n=Math.abs(e-r);return Math.abs(e-360-r)<n&&(e-=360),Math.abs(e+360-r)<n&&(e+=360),e}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.lngRange)return;const r=e.lng-t.center.lng;e.lng+=r>180?-360:r<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(t.M.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const gi={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class mi{constructor(e=gi){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=e=>{!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=a.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=a.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=a.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const r=this._map._getUIString(`AttributionControl.${t}`);e.title=r,e.setAttribute("aria-label",r)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((e=>"string"!=typeof e?"":e))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style.sourceCaches;for(const r in t){const n=t[r];if(n.used||n.usedForTerrain){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e=e.filter((e=>String(e).trim())),e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,r)=>{for(let n=r+1;n<e.length;n++)if(e[n].indexOf(t)>=0)return!1;return!0}));const r=e.join(" | ");r!==this._attribHTML&&(this._attribHTML=r,e.length?(this._innerContainer.innerHTML=r,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class _i{constructor(e={}){this._updateCompact=()=>{const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact"):t.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=a.create("div","maplibregl-ctrl");const t=a.create("a","maplibregl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){a.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class vi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,r=t?this._queue.concat(t):this._queue;for(const t of r)if(t.id===e)return void(t.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const r of t)if(!r.cancelled&&(r.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Ai=t.X([{name:"a_pos3d",type:"Int16",components:3}]);class bi extends t.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,r){this.sourceCache.update(e,r),this._renderableTilesKeys=[];const n={};for(const i of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:r}))n[i.key]=!0,this._renderableTilesKeys.push(i.key),this._tiles[i.key]||(i.posMatrix=new Float64Array(16),t.aO(i.posMatrix,0,t.W,0,t.W,0,1),this._tiles[i.key]=new ae(i,this.tileSize));for(const e in this._tiles)n[e]||delete this._tiles[e]}freeRtt(e){for(const t in this._tiles){const r=this._tiles[t];(!e||r.tileID.equals(e)||r.tileID.isChildOf(e)||e.isChildOf(r.tileID))&&(r.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const r={};for(const n of this._renderableTilesKeys){const i=this._tiles[n].tileID;if(i.canonical.equals(e.canonical)){const i=e.clone();i.posMatrix=new Float64Array(16),t.aO(i.posMatrix,0,t.W,0,t.W,0,1),r[n]=i}else if(i.canonical.isChildOf(e.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const a=i.canonical.z-e.canonical.z,s=i.canonical.x-(i.canonical.x>>a<<a),l=i.canonical.y-(i.canonical.y>>a<<a),u=t.W>>a;t.aO(o.posMatrix,0,u,0,u,0,1),t.H(o.posMatrix,o.posMatrix,[-s*u,-l*u,0]),r[n]=o}else if(e.canonical.isChildOf(i.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const a=e.canonical.z-i.canonical.z,s=e.canonical.x-(e.canonical.x>>a<<a),l=e.canonical.y-(e.canonical.y>>a<<a),u=t.W>>a;t.aO(o.posMatrix,0,t.W,0,t.W,0,1),t.H(o.posMatrix,o.posMatrix,[s*u,l*u,0]),t.J(o.posMatrix,o.posMatrix,[1/2**a,1/2**a,0]),r[n]=o}}return r}getSourceTile(e,t){const r=this.sourceCache._source;let n=e.overscaledZ-this.deltaZoom;if(n>r.maxzoom&&(n=r.maxzoom),n<r.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(n).key);let i=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!i||!i.dem)&&t)for(;n>=r.minzoom&&(!i||!i.dem);)i=this.sourceCache.getTileByID(e.scaledTo(n--).key);return i}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter((t=>t.timeAdded>=e))}}class wi{constructor(e,t,r){this.painter=e,this.sourceCache=new bi(t),this.options=r,this.exaggeration="number"==typeof r.exaggeration?r.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,r,n,i=t.W){var o;if(!(r>=0&&r<i&&n>=0&&n<i))return 0;const a=this.getTerrainData(e),s=null===(o=a.tile)||void 0===o?void 0:o.dem;if(!s)return 0;const l=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}([],[r/i*t.W,n/i*t.W],a.u_terrain_matrix),u=[l[0]*s.dim,l[1]*s.dim],c=Math.floor(u[0]),f=Math.floor(u[1]),h=u[0]-c,p=u[1]-f;return s.get(c,f)*(1-h)*(1-p)+s.get(c+1,f)*h*(1-p)+s.get(c,f+1)*(1-h)*p+s.get(c+1,f+1)*h*p}getElevationForLngLatZoom(e,r){const{tileID:n,mercatorX:i,mercatorY:o}=this._getOverscaledTileIDFromLngLatZoom(e,r);return this.getElevation(n,i%t.W,o%t.W,t.W)}getElevation(e,r,n,i=t.W){return this.getDEMElevation(e,r,n,i)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.painter.context,r=new t.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new b(e,r,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new b(e,new t.R({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.an([])}const r=this.sourceCache.getSourceTile(e,!0);if(r&&r.dem&&(!r.demTexture||r.needsTerrainPrepare)){const e=this.painter.context;r.demTexture=this.painter.getTileTexture(r.dem.stride),r.demTexture?r.demTexture.update(r.dem.getPixels(),{premultiply:!1}):r.demTexture=new b(e,r.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),r.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),r.needsTerrainPrepare=!1}const n=r&&r+r.tileID.key+e.key;if(n&&!this._demMatrixCache[n]){const n=this.sourceCache.sourceCache._source.maxzoom;let i=e.canonical.z-r.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=n?i=e.canonical.z-n:t.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=e.canonical.x-(e.canonical.x>>i<<i),a=e.canonical.y-(e.canonical.y>>i<<i),s=t.ba(new Float64Array(16),[1/(t.W<<i),1/(t.W<<i),0]);t.H(s,s,[o*t.W,a*t.W,0]),this._demMatrixCache[e.key]={matrix:s,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:r&&r.dem&&r.dem.dim||1,u_terrain_matrix:n?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:r&&r.dem&&r.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(r&&r.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:r}}getFramebuffer(e){const t=this.painter,r=t.width/devicePixelRatio,n=t.height/devicePixelRatio;return!this._fbo||this._fbo.width===r&&this._fbo.height===n||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new b(t.context,{width:r,height:n,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new b(t.context,{width:r,height:n,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=t.context.createFramebuffer(r,n,!0,!1),this._fbo.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,r,n))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const r=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let e=0,t=0;e<this._coordsTextureSize;e++)for(let n=0;n<this._coordsTextureSize;n++,t+=4)r[t+0]=255&n,r[t+1]=255&e,r[t+2]=n>>8<<4|e>>8,r[t+3]=0;const n=new t.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(r.buffer)),i=new b(e,n,e.gl.RGBA,{premultiply:!1});return i.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=i,i}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const r=new Uint8Array(4),n=this.painter.context,i=n.gl,o=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),a=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),s=Math.round(this.painter.height/devicePixelRatio);n.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),i.readPixels(o,s-a-1,1,1,i.RGBA,i.UNSIGNED_BYTE,r),n.bindFramebuffer.set(null);const l=r[0]+(r[2]>>4<<8),u=r[1]+((15&r[2])<<8),c=this.coordsIndex[255-r[3]],f=c&&this.sourceCache.getTileByID(c);if(!f)return null;const h=this._coordsTextureSize,p=(1<<f.tileID.canonical.z)*h;return new t.Y((f.tileID.canonical.x*h+l)/p+f.tileID.wrap,(f.tileID.canonical.y*h+u)/p,this.getElevation(f.tileID,l,u,h))}depthAtPoint(e){const t=new Uint8Array(4),r=this.painter.context,n=r.gl;return r.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),n.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,n.RGBA,n.UNSIGNED_BYTE,t),r.bindFramebuffer.set(null),(t[0]/16777216+t[1]/65536+t[2]/256+t[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,r=new t.bb,n=new t.aY,i=this.meshSize,o=t.W/i,a=i*i;for(let e=0;e<=i;e++)for(let t=0;t<=i;t++)r.emplaceBack(t*o,e*o,0);for(let e=0;e<a;e+=i+1)for(let t=0;t<i;t++)n.emplaceBack(t+e,i+t+e+1,i+t+e+2),n.emplaceBack(t+e,i+t+e+2,t+e+1);const s=r.length,l=s+2*(i+1);for(const e of[0,1])for(let n=0;n<=i;n++)for(const i of[0,1])r.emplaceBack(n*o,e*t.W,i);for(let e=0;e<2*i;e+=2)n.emplaceBack(l+e,l+e+1,l+e+3),n.emplaceBack(l+e,l+e+3,l+e+2),n.emplaceBack(s+e,s+e+3,s+e+1),n.emplaceBack(s+e,s+e+2,s+e+3);const u=r.length,c=u+2*(i+1);for(const e of[0,1])for(let n=0;n<=i;n++)for(const i of[0,1])r.emplaceBack(e*t.W,n*o,i);for(let e=0;e<2*i;e+=2)n.emplaceBack(u+e,u+e+1,u+e+3),n.emplaceBack(u+e,u+e+3,u+e+2),n.emplaceBack(c+e,c+e+3,c+e+1),n.emplaceBack(c+e,c+e+2,c+e+3);return this._mesh={indexBuffer:e.createIndexBuffer(n),vertexBuffer:e.createVertexBuffer(r,Ai.members),segments:t.$.simpleSegment(0,0,r.length,n.length)},this._mesh}getMeshFrameDelta(e){return 2*Math.PI*t.bc/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,t){var r;const{tileID:n}=this._getOverscaledTileIDFromLngLatZoom(e,t);return null!==(r=this.getMinMaxElevation(n).minElevation)&&void 0!==r?r:0}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,r={minElevation:null,maxElevation:null};return t&&t.dem&&(r.minElevation=t.dem.min*this.exaggeration,r.maxElevation=t.dem.max*this.exaggeration),r}_getOverscaledTileIDFromLngLatZoom(e,r){const n=t.Y.fromLngLat(e.wrap()),i=(1<<r)*t.W,o=n.x*i,a=n.y*i,s=Math.floor(o/t.W),l=Math.floor(a/t.W);return{tileID:new t.Q(r,0,r,s,l),mercatorX:o,mercatorY:a}}}class Ei{constructor(e,t,r){this._context=e,this._size=t,this._tileSize=r,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const t=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),r=new b(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return r.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),t.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),t.colorAttachment.set(r.texture),{id:e,fbo:t,texture:r,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((t=>e.id!==t)),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const e of this._recentlyUsed)if(!this._objects[e].inUse)return this._objects[e];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some((e=>!e.inUse))}}const xi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Ii{constructor(e,t){this.painter=e,this.terrain=t,this.pool=new Ei(e.context,30,t.sourceCache.tileSize*t.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,t){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter((r=>!e._layers[r].isHidden(t))),this._coordsDescendingInv={};for(const t in e.sourceCaches){this._coordsDescendingInv[t]={};const r=e.sourceCaches[t].getVisibleCoordinates();for(const e of r){const r=this.terrain.sourceCache.getTerrainCoords(e);for(const e in r)this._coordsDescendingInv[t][e]||(this._coordsDescendingInv[t][e]=[]),this._coordsDescendingInv[t][e].push(r[e])}}this._coordsDescendingInvStr={};for(const t of e._order){const r=e._layers[t],n=r.source;if(xi[r.type]&&!this._coordsDescendingInvStr[n]){this._coordsDescendingInvStr[n]={};for(const e in this._coordsDescendingInv[n])this._coordsDescendingInvStr[n][e]=this._coordsDescendingInv[n][e].map((e=>e.key)).sort().join()}}for(const e of this._renderableTiles)for(const t in this._coordsDescendingInvStr){const r=this._coordsDescendingInvStr[t][e.tileID.key];r&&r!==e.rttCoords[t]&&(e.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const r=e.type,n=this.painter,i=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(xi[r]&&(this._prevType&&xi[this._prevType]||this._stacks.push([]),this._prevType=r,this._stacks[this._stacks.length-1].push(e.id),!i))return!0;if(xi[this._prevType]||xi[r]&&i){this._prevType=r;const e=this._stacks.length-1,i=this._stacks[e]||[];for(const r of this._renderableTiles){if(this.pool.isFull()&&(un(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(r),r.rtt[e]){const t=this.pool.getObjectForId(r.rtt[e].id);if(t.stamp===r.rtt[e].stamp){this.pool.useObject(t);continue}}const o=this.pool.getOrCreateFreeObject();this.pool.useObject(o),this.pool.stampObject(o),r.rtt[e]={id:o.id,stamp:o.stamp},n.context.bindFramebuffer.set(o.fbo.framebuffer),n.context.clear({color:t.aP.transparent,stencil:0}),n.currentStencilSource=void 0;for(let e=0;e<i.length;e++){const t=n.style._layers[i[e]],a=t.source?this._coordsDescendingInv[t.source][r.tileID.key]:[r.tileID];n.context.viewport.set([0,0,o.fbo.width,o.fbo.height]),n._renderTileClippingMasks(t,a),n.renderLayer(n,n.style.sourceCaches[t.source],t,a),t.source&&(r.rttCoords[t.source]=this._coordsDescendingInvStr[t.source][r.tileID.key])}}return un(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),xi[r]}return!1}}const Si={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Ci=r,Pi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:gi,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:t.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Oi=e=>{e.touchstart=e.dragStart,e.touchmoveWindow=e.dragMove,e.touchend=e.dragEnd},Ti={showCompass:!0,showZoom:!0,visualizePitch:!1};class Mi{constructor(e,r,n=!1){this.mousedown=e=>{this.startMouse(t.e({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),a.mousePos(this.element,e)),a.addEventListener(window,"mousemove",this.mousemove),a.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=e=>{this.moveMouse(e,a.mousePos(this.element,e))},this.mouseup=e=>{this.mouseRotate.dragEnd(e),this.mousePitch&&this.mousePitch.dragEnd(e),this.offTemp()},this.touchstart=e=>{1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,e.targetTouches)[0],this.startTouch(e,this._startPos),a.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.addEventListener(window,"touchend",this.touchend))},this.touchmove=e=>{1!==e.targetTouches.length?this.reset():(this._lastPos=a.touchPos(this.element,e.targetTouches)[0],this.moveTouch(e,this._lastPos))},this.touchend=e=>{0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const i=e.dragRotate._mouseRotate.getClickTolerance(),o=e.dragRotate._mousePitch.getClickTolerance();this.element=r,this.mouseRotate=Qn({clickTolerance:i,enable:!0}),this.touchRotate=(({enable:e,clickTolerance:t,bearingDegreesPerPixelMoved:r=.8})=>{const n=new Zn;return new jn({clickTolerance:t,move:(e,t)=>({bearingDelta:(t.x-e.x)*r}),moveStateManager:n,enable:e,assignEvents:Oi})})({clickTolerance:i,enable:!0}),this.map=e,n&&(this.mousePitch=Gn({clickTolerance:o,enable:!0}),this.touchPitch=(({enable:e,clickTolerance:t,pitchDegreesPerPixelMoved:r=-.5})=>{const n=new Zn;return new jn({clickTolerance:t,move:(e,t)=>({pitchDelta:(t.y-e.y)*r}),moveStateManager:n,enable:e,assignEvents:Oi})})({clickTolerance:o,enable:!0})),a.addEventListener(r,"mousedown",this.mousedown),a.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(r,"touchcancel",this.reset)}startMouse(e,t){this.mouseRotate.dragStart(e,t),this.mousePitch&&this.mousePitch.dragStart(e,t),a.disableDrag()}startTouch(e,t){this.touchRotate.dragStart(e,t),this.touchPitch&&this.touchPitch.dragStart(e,t),a.disableDrag()}moveMouse(e,t){const r=this.map,{bearingDelta:n}=this.mouseRotate.dragMove(e,t)||{};if(n&&r.setBearing(r.getBearing()+n),this.mousePitch){const{pitchDelta:n}=this.mousePitch.dragMove(e,t)||{};n&&r.setPitch(r.getPitch()+n)}}moveTouch(e,t){const r=this.map,{bearingDelta:n}=this.touchRotate.dragMove(e,t)||{};if(n&&r.setBearing(r.getBearing()+n),this.touchPitch){const{pitchDelta:n}=this.touchPitch.dragMove(e,t)||{};n&&r.setPitch(r.getPitch()+n)}}off(){const e=this.element;a.removeEventListener(e,"mousedown",this.mousedown),a.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.removeEventListener(window,"touchend",this.touchend),a.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){a.enableDrag(),a.removeEventListener(window,"mousemove",this.mousemove),a.removeEventListener(window,"mouseup",this.mouseup),a.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.removeEventListener(window,"touchend",this.touchend)}}let ki;function Ri(e,r,n){const i=new t.M(e.lng,e.lat);if(e=new t.M(e.lng,e.lat),r){const i=new t.M(e.lng-360,e.lat),o=new t.M(e.lng+360,e.lat),a=n.locationPoint(e).distSqr(r);n.locationPoint(i).distSqr(r)<a?e=i:n.locationPoint(o).distSqr(r)<a&&(e=o)}for(;Math.abs(e.lng-n.center.lng)>180;){const t=n.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=n.width&&t.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e.lng!==i.lng&&n.locationPoint(e).y>n.height/2-n.getHorizon()?e:i}const Bi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Li(e,t,r){const n=e.classList;for(const e in Bi)n.remove(`maplibregl-${r}-anchor-${e}`);n.add(`maplibregl-${r}-anchor-${t}`)}class Di extends t.E{constructor(e){if(super(),this._onKeyPress=e=>{const t=e.code,r=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==r&&13!==r||this.togglePopup()},this._onMapClick=e=>{const t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()},this._update=e=>{var t;if(!this._map)return;const r=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==e?void 0:e.type)||"render"===(null==e?void 0:e.type)&&!r)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Ri(this._lngLat,this._flatPos,this._map.transform):null===(t=this._lngLat)||void 0===t?void 0:t.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let n="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?n=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(n=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let i="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?i="rotateX(0deg)":"map"===this._pitchAlignment&&(i=`rotateX(${this._map.getPitch()}deg)`),e&&"moveend"!==e.type||(this._pos=this._pos.round()),a.setTransform(this._element,`${Bi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${i} ${n}`),o.frameAsync(new AbortController).then((()=>{this._updateOpacity(e&&"moveend"===e.type)})).catch((()=>{}))},this._onMove=e=>{if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.k("dragstart"))),this.fire(new t.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.k("dragend")),this._state="inactive"},this._addDragHandler=e=>{this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(null==e?void 0:e.opacity,null==e?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=t.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");const r=a.createNS("http://www.w3.org/2000/svg","svg"),n=41,i=27;r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height",`${n}px`),r.setAttributeNS(null,"width",`${i}px`),r.setAttributeNS(null,"viewBox",`0 0 ${i} ${n}`);const o=a.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const s=a.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=a.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of u){const t=a.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const c=a.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);const f=a.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(f);const h=a.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"opacity","0.25"),h.setAttributeNS(null,"fill","#000000");const p=a.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),h.appendChild(p);const d=a.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");const y=a.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=a.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const m=a.createNS("http://www.w3.org/2000/svg","circle");m.setAttributeNS(null,"fill","#FFFFFF"),m.setAttributeNS(null,"cx","5.5"),m.setAttributeNS(null,"cy","5.5"),m.setAttributeNS(null,"r","5.4999962"),y.appendChild(g),y.appendChild(m),s.appendChild(l),s.appendChild(c),s.appendChild(h),s.appendChild(d),s.appendChild(y),r.appendChild(s),r.setAttributeNS(null,"height",n*this._scale+"px"),r.setAttributeNS(null,"width",i*this._scale+"px"),this._element.appendChild(r),this._offset=t.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()})),Li(this._element,this._anchor,"marker"),e&&e.className)for(const t of e.className.split(" "))this._element.classList.add(t);this._popup=null}addTo(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.M.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,r=13.5,n=Math.abs(r)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[n,-1*(t-r+n)],"bottom-right":[-n,-1*(t-r+n)],left:[r,-1*(t-r)],right:[-r,-1*(t-r)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var r,n;if(!(null===(r=this._map)||void 0===r?void 0:r.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const i=this._map,o=i.terrain.depthAtPoint(this._pos),a=i.terrain.getElevationForLngLatZoom(this._lngLat,i.transform.tileZoom);if(i.transform.lngLatToCameraDepth(this._lngLat,a)-o<.006)return void(this._element.style.opacity=this._opacity);const s=-this._offset.y/i.transform._pixelPerMeter,l=Math.sin(i.getPitch()*Math.PI/180)*s,u=i.terrain.depthAtPoint(new t.P(this._pos.x,this._pos.y-this._offset.y)),c=i.transform.lngLatToCameraDepth(this._lngLat,a+l)-u>.006;(null===(n=this._popup)||void 0===n?void 0:n.isOpen())&&c&&this._popup.remove(),this._element.style.opacity=c?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=t.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,t){return void 0===e&&void 0===t&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==e&&(this._opacity=e),void 0!==t&&(this._opacityWhenCovered=t),this._map&&this._updateOpacity(!0),this}}const ji={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Fi=0,Ni=!1;const Zi={maxWidth:100,unit:"metric"};function Ui(e,t,r){const n=r&&r.maxWidth||100,i=e._container.clientHeight/2,o=e.unproject([0,i]),a=e.unproject([n,i]),s=o.distanceTo(a);if(r&&"imperial"===r.unit){const r=3.2808*s;r>5280?Qi(t,n,r/5280,e._getUIString("ScaleControl.Miles")):Qi(t,n,r,e._getUIString("ScaleControl.Feet"))}else r&&"nautical"===r.unit?Qi(t,n,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Qi(t,n,s/1e3,e._getUIString("ScaleControl.Kilometers")):Qi(t,n,s,e._getUIString("ScaleControl.Meters"))}function Qi(e,t,r,n){const i=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let r=e/t;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r),t*r}(r);e.style.width=t*(i/r)+"px",e.innerHTML=`${i}&nbsp;${n}`}const Gi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},zi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function qi(e){if(e){if("number"==typeof e){const r=Math.round(Math.abs(e)/Math.SQRT2);return{center:new t.P(0,0),top:new t.P(0,e),"top-left":new t.P(r,r),"top-right":new t.P(-r,r),bottom:new t.P(0,-e),"bottom-left":new t.P(r,-r),"bottom-right":new t.P(-r,-r),left:new t.P(e,0),right:new t.P(-e,0)}}if(e instanceof t.P||Array.isArray(e)){const r=t.P.convert(e);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.P.convert(e.center||[0,0]),top:t.P.convert(e.top||[0,0]),"top-left":t.P.convert(e["top-left"]||[0,0]),"top-right":t.P.convert(e["top-right"]||[0,0]),bottom:t.P.convert(e.bottom||[0,0]),"bottom-left":t.P.convert(e["bottom-left"]||[0,0]),"bottom-right":t.P.convert(e["bottom-right"]||[0,0]),left:t.P.convert(e.left||[0,0]),right:t.P.convert(e.right||[0,0])}}return qi(new t.P(0,0))}const Vi=r;e.AJAXError=t.bf,e.Evented=t.E,e.LngLat=t.M,e.MercatorCoordinate=t.Y,e.Point=t.P,e.addProtocol=t.bg,e.config=t.a,e.removeProtocol=t.bh,e.AttributionControl=mi,e.BoxZoomHandler=kn,e.CanvasSource=$,e.CooperativeGesturesHandler=ci,e.DoubleClickZoomHandler=ii,e.DragPanHandler=si,e.DragRotateHandler=li,e.EdgeInsets=pn,e.FullscreenControl=class extends t.E{constructor(e={}){super(),this._onFullscreenChange=()=>{var e;let t=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(e=null==t?void 0:t.shadowRoot)||void 0===e?void 0:e.fullscreenElement;)t=t.shadowRoot.fullscreenElement;t===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){a.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const e=this._fullscreenButton=a.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);a.create("span","maplibregl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new t.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new t.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},e.GeoJSONSource=H,e.GeolocateControl=class extends t.E{constructor(e){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new t.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const r=new t.M(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,i=this._map.getBearing(),o=t.e({bearing:i},this.options.fitBoundsOptions),a=z.fromLngLat(r,n);this._map.fitBounds(a,o,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const r=new t.M(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Ni)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new t.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=e=>{if(this._map){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=a.create("button","maplibregl-ctrl-geolocate",this._container),a.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.w("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Di({element:this._dotElement}),this._circleElement=a.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Di({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new t.k("trackuserlocationend")))}))}},this.options=t.e({},ji,e)}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return t._(this,arguments,void 0,(function*(e=!1){if(void 0!==ki&&!e)return ki;if(void 0===window.navigator.permissions)return ki=!!window.navigator.geolocation,ki;try{const e=yield window.navigator.permissions.query({name:"geolocation"});ki="denied"!==e.state}catch(e){ki=!!window.navigator.geolocation}return ki}))}().then((e=>this._setupUI(e))),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fi=0,Ni=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),r=e.coords;return t&&(r.longitude<t.getWest()||r.longitude>t.getEast()||r.latitude<t.getSouth()||r.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const e=this._map.getBounds(),t=e.getSouthEast(),r=e.getNorthEast(),n=t.distanceTo(r),i=Math.ceil(this._accuracy/(n/this._map._container.clientHeight)*2);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}trigger(){if(!this._setup)return t.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fi--,Ni=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new t.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Fi++,Fi>1?(e={maximumAge:6e5,timeout:0},Ni=!0):(e=this.options.positionOptions,Ni=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},e.Hash=mn,e.ImageSource=X,e.KeyboardHandler=ei,e.LngLatBounds=z,e.LogoControl=_i,e.Map=class extends yi{constructor(e){if(t.bd.mark(t.be.create),null!=(e=t.e({},Pi,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new yn(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._contextLost=e=>{e.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new t.k("webglcontextlost",{originalEvent:e}))},this._contextRestored=e=>{this._setupPainter(),this.resize(),this._update(),this.fire(new t.k("webglcontextrestored",{originalEvent:e}))},this._onMapScroll=e=>{if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new vi,this._controls=[],this._mapId=t.a3(),this._locale=t.e({},Si,e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=e.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=p.addThrottleControl((()=>this.isMoving())),this._requestManager=new d(e.transformRequest),"string"==typeof e.container){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let e=!1;const t=gn((e=>{this._trackResize&&!this._removed&&this.resize(e)._update()}),50);this._resizeObserver=new ResizeObserver((r=>{e?t(r):e=!0})),this._resizeObserver.observe(this._container)}this.handlers=new di(this,e),this._hash=e.hash&&new mn("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new mi("boolean"==typeof e.attributionControl?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new _i,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.k(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.k(`${e.dataType}dataloading`,e))})),this.on("dataabort",(e=>{this.fire(new t.k("sourcedataabort",e))}))}_getMapId(){return this._mapId}addControl(e,r){if(void 0===r&&(r=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const n=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[r];return-1!==r.indexOf("bottom")?i.insertBefore(n,i.firstChild):i.appendChild(n),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(e);return r>-1&&this._controls.splice(r,1),e.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}calculateCameraOptionsFromTo(e,t,r,n){return null==n&&this.terrain&&(n=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(e,t,r,n)}resize(e){var r;const n=this._containerDimensions(),i=n[0],o=n[1],a=this._getClampedPixelRatio(i,o);if(this._resizeCanvas(i,o,a),this.painter.resize(i,o,a),this.painter.overLimit()){const e=this.painter.context.gl;this._maxCanvasSize=[e.drawingBufferWidth,e.drawingBufferHeight];const t=this._getClampedPixelRatio(i,o);this._resizeCanvas(i,o,t),this.painter.resize(i,o,t)}this.transform.resize(i,o),null===(r=this._requestedCameraState)||void 0===r||r.resize(i,o);const s=!this._moving;return s&&(this.stop(),this.fire(new t.k("movestart",e)).fire(new t.k("move",e))),this.fire(new t.k("resize",e)),s&&this.fire(new t.k("moveend",e)),this}_getClampedPixelRatio(e,t){const{0:r,1:n}=this._maxCanvasSize,i=this.getPixelRatio(),o=e*i,a=t*i;return Math.min(o>r?r/o:1,a>n?n/a:1)*i}getPixelRatio(){var e;return null!==(e=this._overridePixelRatio)&&void 0!==e?e:devicePixelRatio}setPixelRatio(e){this._overridePixelRatio=e,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(z.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(e){return this.transform.locationPoint(t.M.convert(e),this.style&&this.terrain)}unproject(e){return this.transform.pointLocation(t.P.convert(e),this.terrain)}isMoving(){var e;return this._moving||(null===(e=this.handlers)||void 0===e?void 0:e.isMoving())}isZooming(){var e;return this._zooming||(null===(e=this.handlers)||void 0===e?void 0:e.isZooming())}isRotating(){var e;return this._rotating||(null===(e=this.handlers)||void 0===e?void 0:e.isRotating())}_createDelegatedListener(e,t,r){if("mouseenter"===e||"mouseover"===e){let n=!1;const i=i=>{const o=this.getLayer(t)?this.queryRenderedFeatures(i.point,{layers:[t]}):[];o.length?n||(n=!0,r.call(this,new Sn(e,this,i.originalEvent,{features:o}))):n=!1};return{layer:t,listener:r,delegates:{mousemove:i,mouseout:()=>{n=!1}}}}if("mouseleave"===e||"mouseout"===e){let n=!1;const i=i=>{(this.getLayer(t)?this.queryRenderedFeatures(i.point,{layers:[t]}):[]).length?n=!0:n&&(n=!1,r.call(this,new Sn(e,this,i.originalEvent)))},o=t=>{n&&(n=!1,r.call(this,new Sn(e,this,t.originalEvent)))};return{layer:t,listener:r,delegates:{mousemove:i,mouseout:o}}}{const n=e=>{const n=this.getLayer(t)?this.queryRenderedFeatures(e.point,{layers:[t]}):[];n.length&&(e.features=n,r.call(this,e),delete e.features)};return{layer:t,listener:r,delegates:{[e]:n}}}}on(e,t,r){if(void 0===r)return super.on(e,t);const n=this._createDelegatedListener(e,t,r);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n);for(const e in n.delegates)this.on(e,n.delegates[e]);return this}once(e,t,r){if(void 0===r)return super.once(e,t);const n=this._createDelegatedListener(e,t,r);for(const e in n.delegates)this.once(e,n.delegates[e]);return this}off(e,t,r){return void 0===r?super.off(e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&(n=>{const i=this._delegatedListeners[e];for(let e=0;e<i.length;e++){const n=i[e];if(n.layer===t&&n.listener===r){for(const e in n.delegates)this.off(e,n.delegates[e]);return i.splice(e,1),this}}})(),this)}queryRenderedFeatures(e,r){if(!this.style)return[];let n;const i=e instanceof t.P||Array.isArray(e),o=i?e:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(i?{}:e)||{},o instanceof t.P||"number"==typeof o[0])n=[t.P.convert(o)];else{const e=t.P.convert(o[0]),r=t.P.convert(o[1]);n=[e,new t.P(r.x,e.y),r,new t.P(e.x,r.y),e]}return this.style.queryRenderedFeatures(n,r,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(e,r){return!1!==(r=t.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(e,r))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(e,t)));const r=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!e)),e?(this.style=new ut(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e,t,r):this.style.loadJSON(e,t,r),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ut(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,r){if("string"==typeof e){const n=this._requestManager.transformRequest(e,"Style");t.h(n,new AbortController).then((e=>{this._updateDiff(e.data,r)})).catch((e=>{e&&this.fire(new t.j(e))}))}else"object"==typeof e&&this._updateDiff(e,r)}_updateDiff(e,r){try{this.style.setState(e,r)&&this._update(!0)}catch(n){t.w(`Unable to perform style diff: ${n.message||n.error||n}.  Rebuilding the style from scratch.`),this._updateStyle(e,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.w("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){const r=this.style&&this.style.sourceCaches[e];if(void 0!==r)return r.loaded();this.fire(new t.j(new Error(`There is no source with ID '${e}'`)))}setTerrain(e){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),e){const r=this.style.sourceCaches[e.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${e.source}`);null===this.terrain&&r.reload();for(const r in this.style._layers){const n=this.style._layers[r];"hillshade"===n.type&&n.source===e.source&&t.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new wi(this.painter,r,e),this.painter.renderToTexture=new Ii(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=t=>{"style"===t.dataType?this.terrain.sourceCache.freeRtt():"source"===t.dataType&&t.tile&&(t.sourceId!==e.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(t.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new t.k("terrain",{terrain:e})),this}getTerrain(){var e,t;return null!==(t=null===(e=this.terrain)||void 0===e?void 0:e.options)&&void 0!==t?t:null}areTilesLoaded(){const e=this.style&&this.style.sourceCaches;for(const t in e){const r=e[t]._tiles;for(const e in r){const t=r[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(e,r,n={}){const{pixelRatio:i=1,sdf:a=!1,stretchX:s,stretchY:l,content:u,textFitWidth:c,textFitHeight:f}=n;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||t.b(r))){if(void 0===r.width||void 0===r.height)return this.fire(new t.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:n,height:o,data:h}=r,p=r;return this.style.addImage(e,{data:new t.R({width:n,height:o},new Uint8Array(h)),pixelRatio:i,stretchX:s,stretchY:l,content:u,textFitWidth:c,textFitHeight:f,sdf:a,version:0,userImage:p}),p.onAdd&&p.onAdd(this,e),this}}{const{width:n,height:h,data:p}=o.getImageData(r);this.style.addImage(e,{data:new t.R({width:n,height:h},p),pixelRatio:i,stretchX:s,stretchY:l,content:u,textFitWidth:c,textFitHeight:f,sdf:a,version:0})}}updateImage(e,r){const n=this.style.getImage(e);if(!n)return this.fire(new t.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=r instanceof HTMLImageElement||t.b(r)?o.getImageData(r):r,{width:a,height:s,data:l}=i;if(void 0===a||void 0===s)return this.fire(new t.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==n.data.width||s!==n.data.height)return this.fire(new t.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const u=!(r instanceof HTMLImageElement||t.b(r));return n.data.replace(l,u),this.style.updateImage(e,n),this}getImage(e){return this.style.getImage(e)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.j(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(e){return p.getImage(this._requestManager.transformRequest(e,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)}setFilter(e,t,r={}){return this.style.setFilter(e,t,r),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,r,n={}){return this.style.setPaintProperty(e,t,r,n),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,r,n={}){return this.style.setLayoutProperty(e,t,r,n),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setGlyphs(e,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(e,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(e,t,r={}){return this._lazyInitEmptyStyle(),this.style.addSprite(e,t,r,(e=>{e||this._update(!0)})),this}removeSprite(e){return this._lazyInitEmptyStyle(),this.style.removeSprite(e),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(e,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(e,t,(e=>{e||this._update(!0)})),this}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map");const t=this._canvasContainer=a.create("div","maplibregl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=a.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const r=this._containerDimensions(),n=this._getClampedPixelRatio(r[0],r[1]);this._resizeCanvas(r[0],r[1],n);const i=this._controlContainer=a.create("div","maplibregl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{o[e]=a.create("div",`maplibregl-ctrl-${e} `,i)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,t,r){this._canvas.width=Math.floor(r*e),this._canvas.height=Math.floor(r*t),this._canvas.style.width=`${e}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const e={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",(r=>{t={requestedAttributes:e},r&&(t.statusMessage=r.statusMessage,t.type=r.type)}),{once:!0});const r=this._canvas.getContext("webgl2",e)||this._canvas.getContext("webgl",e);if(!r){const e="Failed to initialize WebGL";throw t?(t.message=e,new Error(JSON.stringify(t))):new Error(e)}this.painter=new cn(r,this.transform),s.testSupport(r)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(e){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let n=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,i=o.now();this.style.zoomHistory.update(e,i);const a=new t.a8(e,{now:i,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),s=a.crossFadingFactor();1===s&&s===this._crossFadingFactor||(n=!0,this._crossFadingFactor=s),this.style.update(a)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new t.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.bd.mark(t.be.load),this.fire(new t.k("load"))),this.style&&(this.style.hasTransitions()||n)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const i=this._sourcesDirty||this._styleDirty||this._placementDirty;return i||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.k("idle")),!this._loaded||this._fullyLoaded||i||(this._fullyLoaded=!0,t.bd.mark(t.be.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var e;this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),p.removeThrottleControl(this._imageQueueHandle),null===(e=this._resizeObserver)||void 0===e||e.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),a.remove(this._canvasContainer),a.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),t.bd.clearMetrics(),this._removed=!0,this.fire(new t.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then((e=>{t.bd.frame(e),this._frameRequest=null,this._render(e)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get version(){return Ci}getCameraTargetElevation(){return this.transform.elevation}},e.MapMouseEvent=Sn,e.MapTouchEvent=Cn,e.MapWheelEvent=Pn,e.Marker=Di,e.NavigationControl=class{constructor(e){this._updateZoomButtons=()=>{const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),r=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,t)=>{const r=this._map._getUIString(`NavigationControl.${t}`);e.title=r,e.setAttribute("aria-label",r)},this.options=t.e({},Ti,e),this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),a.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),a.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=a.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Mi(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const r=a.create("button",e,this._container);return r.type="button",r.addEventListener("click",t),r}},e.Popup=class extends t.E{constructor(e){super(),this.remove=()=>(this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new t.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var t;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=a.create("div","maplibregl-popup",this._map.getContainer()),this._tip=a.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const e of this.options.className.split(" "))this._container.classList.add(e);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Ri(this._lngLat,this._flatPos,this._map.transform):null===(t=this._lngLat)||void 0===t?void 0:t.wrap(),this._trackPointer&&!e)return;const r=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let n=this.options.anchor;const i=qi(this.options.offset);if(!n){const e=this._container.offsetWidth,t=this._container.offsetHeight;let o;o=r.y+i.bottom.y<t?["top"]:r.y>this._map.transform.height-t?["bottom"]:[],r.x<e/2?o.push("left"):r.x>this._map.transform.width-e/2&&o.push("right"),n=0===o.length?"bottom":o.join("-")}let o=r.add(i[n]);this.options.subpixelPositioning||(o=o.round()),a.setTransform(this._container,`${Bi[n]} translate(${o.x}px,${o.y}px)`),Li(this._container,n,"popup")},this._onClose=()=>{this.remove()},this.options=t.e(Object.create(Gi),e)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new t.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.M.convert(e),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),r=document.createElement("body");let n;for(r.innerHTML=e;n=r.firstChild,n;)t.appendChild(n);return this.setDOMContent(t)}getMaxWidth(){var e;return null===(e=this._container)||void 0===e?void 0:e.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=a.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){return this._container&&this._container.classList.add(e),this}removeClassName(e){return this._container&&this._container.classList.remove(e),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}setSubpixelPositioning(e){this.options.subpixelPositioning=e}_createCloseButton(){this.options.closeButton&&(this._closeButton=a.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(zi);e&&e.focus()}},e.RasterDEMTileSource=K,e.RasterTileSource=W,e.ScaleControl=class{constructor(e){this._onMove=()=>{Ui(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Ui(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Zi),e)}getDefaultPosition(){return"bottom-left"}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},e.ScrollZoomHandler=ni,e.Style=ut,e.TerrainControl=class{constructor(e){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=e}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=a.create("button","maplibregl-ctrl-terrain",this._container),a.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){a.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},e.TwoFingersTouchPitchHandler=Jn,e.TwoFingersTouchRotateHandler=Yn,e.TwoFingersTouchZoomHandler=Kn,e.TwoFingersTouchZoomRotateHandler=ui,e.VectorTileSource=V,e.VideoSource=J,e.addSourceType=(e,r)=>t._(void 0,void 0,void 0,(function*(){if(te(e))throw new Error(`A source type called "${e}" already exists.`);((e,t)=>{ee[e]=t})(e,r)})),e.clearPrewarmedResources=function(){const e=L;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(k),L=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},e.getMaxParallelImageRequests=function(){return t.a.MAX_PARALLEL_IMAGE_REQUESTS},e.getRTLTextPluginStatus=function(){return oe().getRTLTextPluginStatus()},e.getVersion=function(){return Vi},e.getWorkerCount=function(){return R.workerCount},e.getWorkerUrl=function(){return t.a.WORKER_URL},e.importScriptInWorkers=function(e){return N().broadcast("IS",e)},e.prewarm=function(){j().acquire(k)},e.setMaxParallelImageRequests=function(e){t.a.MAX_PARALLEL_IMAGE_REQUESTS=e},e.setRTLTextPlugin=function(e,t){return oe().setRTLTextPlugin(e,t)},e.setWorkerCount=function(e){R.workerCount=e},e.setWorkerUrl=function(e){t.a.WORKER_URL=e}})),e}()},45004:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(40439),i=r(14516),o=r(28513);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d="length",y=function(e){c(r,e);var t=h(r);function r(e,n,i){var o;return u(this,r),(o=t.call(this,e)).element=n,o.index=i,o}return l(r)}(o.ZP);const g=function(e){c(r,e);var t=h(r);function r(e,n){var i;if(u(this,r),(i=t.call(this)).on,i.once,i.un,n=n||{},i.unique_=!!n.unique,i.array_=e||[],i.unique_)for(var o=0,a=i.array_.length;o<a;++o)i.assertUnique_(i.array_[o],o);return i.updateLength_(),i}return l(r,[{key:"clear",value:function(){for(;this.getLength()>0;)this.pop()}},{key:"extend",value:function(e){for(var t=0,r=e.length;t<r;++t)this.push(e[t]);return this}},{key:"forEach",value:function(e){for(var t=this.array_,r=0,n=t.length;r<n;++r)e(t[r],r,t)}},{key:"getArray",value:function(){return this.array_}},{key:"item",value:function(e){return this.array_[e]}},{key:"getLength",value:function(){return this.get(d)}},{key:"insertAt",value:function(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new y(i.Z.ADD,t,e))}},{key:"pop",value:function(){return this.removeAt(this.getLength()-1)}},{key:"push",value:function(e){this.unique_&&this.assertUnique_(e);var t=this.getLength();return this.insertAt(t,e),this.getLength()}},{key:"remove",value:function(e){for(var t=this.array_,r=0,n=t.length;r<n;++r)if(t[r]===e)return this.removeAt(r)}},{key:"removeAt",value:function(e){if(!(e<0||e>=this.getLength())){var t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new y(i.Z.REMOVE,t,e)),t}}},{key:"setAt",value:function(e,t){if(e>=this.getLength())this.insertAt(e,t);else{if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);var r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new y(i.Z.REMOVE,r,e)),this.dispatchEvent(new y(i.Z.ADD,t,e))}}},{key:"updateLength_",value:function(){this.set(d,this.array_.length)}},{key:"assertUnique_",value:function(e,t){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===e&&r!==t)throw new Error("Duplicate item added to a unique collection")}}]),r}(n.Z)},14516:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={ADD:"add",REMOVE:"remove"}},76358:(e,t,r)=>{"use strict";r.d(t,{G0:()=>f,ZP:()=>g,px:()=>h,qo:()=>d});var n=r(77118),i=r(57223),o=r(88199);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function f(e){return e instanceof Image||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageBitmap?e:null}function h(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e instanceof DataView?e:null}var p=null;function d(e){p||(p=(0,o.E4)(e.width,e.height,void 0,{willReadFrequently:!0}));var t=p.canvas,r=e.width;t.width!==r&&(t.width=r);var n=e.height;return t.height!==n&&(t.height=n),p.clearRect(0,0,r,n),p.drawImage(e,0,0),p.getImageData(0,0,r,n).data}var y=[256,256];const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,r,n,o=u(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=i.Z.IDLE;return(t=o.call(this,e.tileCoord,r,{transition:e.transition,interpolate:e.interpolate})).loader_=e.loader,t.data_=null,t.error_=null,t.size_=e.size||null,t}return t=a,(r=[{key:"getSize",value:function(){if(this.size_)return this.size_;var e=f(this.data_);return e?[e.width,e.height]:y}},{key:"getData",value:function(){return this.data_}},{key:"getError",value:function(){return this.error_}},{key:"load",value:function(){if(this.state===i.Z.IDLE||this.state===i.Z.ERROR){this.state=i.Z.LOADING,this.changed();var e=this;this.loader_().then((function(t){e.data_=t,e.state=i.Z.LOADED,e.changed()})).catch((function(t){e.error_=t,e.state=i.Z.ERROR,e.changed()}))}}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Z)},31706:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.d(t,{Z:()=>o});const o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.disposed=!1}var t,r,n;return t=e,(r=[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},44993:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(40439),i=r(2115),o=r(97972),a=r(34586);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,s=c(f);function f(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this)).on,t.once,t.un,t.id_=void 0,t.geometryName_="geometry",t.style_=null,t.styleFunction_=void 0,t.geometryChangeKey_=null,t.addChangeListener(t.geometryName_,t.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var r=e;t.setGeometry(r)}else{var n=e;t.setProperties(n)}return t}return t=f,(r=[{key:"clone",value:function(){var e=new f(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var r=this.getStyle();return r&&e.setStyle(r),e}},{key:"getGeometry",value:function(){return this.get(this.geometryName_)}},{key:"getId",value:function(){return this.id_}},{key:"getGeometryName",value:function(){return this.geometryName_}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"handleGeometryChange_",value:function(){this.changed()}},{key:"handleGeometryChanged_",value:function(){this.geometryChangeKey_&&((0,a.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=(0,a.oL)(e,i.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}},{key:"setGeometry",value:function(e){this.set(this.geometryName_,e)}},{key:"setStyle",value:function(e){var t,r;this.style_=e,this.styleFunction_=e?"function"==typeof(t=e)?t:(Array.isArray(t)?r=t:((0,o.h)("function"==typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),r=[t]),function(){return r}):void 0,this.changed()}},{key:"setId",value:function(e){this.id_=e,this.changed()}},{key:"setGeometryName",value:function(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},72742:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(28513),i=r(40439),o=r(92882),a=r(27811),s=r(7697);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},u.apply(this,arguments)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var m="accuracy",_="accuracyGeometry",v="altitude",A="altitudeAccuracy",b="heading",w="position",E="projection",x="speed",I="tracking",S="trackingOptions",C="error",P=function(e){p(r,e);var t=y(r);function r(e){var n;return h(this,r),(n=t.call(this,C)).code=e.code,n.message=e.message,n}return f(r)}(n.ZP);const O=function(e){p(r,e);var t=y(r);function r(e){var n;return h(this,r),(n=t.call(this)).on,n.once,n.un,e=e||{},n.position_=null,n.transform_=a.gD,n.watchId_=void 0,n.addChangeListener(E,n.handleProjectionChanged_),n.addChangeListener(I,n.handleTrackingChanged_),void 0!==e.projection&&n.setProjection(e.projection),void 0!==e.trackingOptions&&n.setTrackingOptions(e.trackingOptions),n.setTracking(void 0!==e.tracking&&e.tracking),n}return f(r,[{key:"disposeInternal",value:function(){this.setTracking(!1),u(g(r.prototype),"disposeInternal",this).call(this)}},{key:"handleProjectionChanged_",value:function(){var e=this.getProjection();e&&(this.transform_=(0,a.WO)((0,a.U2)("EPSG:4326"),e),this.position_&&this.set(w,this.transform_(this.position_)))}},{key:"handleTrackingChanged_",value:function(){if("geolocation"in navigator){var e=this.getTracking();e&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):e||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}},{key:"positionChange_",value:function(e){var t=e.coords;this.set(m,t.accuracy),this.set(v,null===t.altitude?void 0:t.altitude),this.set(A,null===t.altitudeAccuracy?void 0:t.altitudeAccuracy),this.set(b,null===t.heading?void 0:(0,s.Yr)(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];var r=this.transform_(this.position_);this.set(w,r.slice()),this.set(x,null===t.speed?void 0:t.speed);var n=(0,o.iu)(this.position_,t.accuracy);n.applyTransform(this.transform_),this.set(_,n),this.changed()}},{key:"positionError_",value:function(e){this.dispatchEvent(new P(e))}},{key:"getAccuracy",value:function(){return this.get(m)}},{key:"getAccuracyGeometry",value:function(){return this.get(_)||null}},{key:"getAltitude",value:function(){return this.get(v)}},{key:"getAltitudeAccuracy",value:function(){return this.get(A)}},{key:"getHeading",value:function(){return this.get(b)}},{key:"getPosition",value:function(){return this.get(w)}},{key:"getProjection",value:function(){return this.get(E)}},{key:"getSpeed",value:function(){return this.get(x)}},{key:"getTracking",value:function(){return this.get(I)}},{key:"getTrackingOptions",value:function(){return this.get(S)}},{key:"setProjection",value:function(e){this.set(E,(0,a.U2)(e))}},{key:"setTracking",value:function(e){this.set(I,e)}},{key:"setTrackingOptions",value:function(e){this.set(S,e)}}]),r}(i.Z)},80237:(e,t,r)=>{"use strict";r.d(t,{Jx:()=>m,Kp:()=>d,Q9:()=>g,ZP:()=>_,zD:()=>y});var n=r(27167),i=r(2115),o=r(94162),a=r(45907),s=r(34586),l=r(73826);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function d(e,t,r){var n=e,o=!0,l=!1,u=!1,c=[(0,s.Vx)(n,i.Z.LOAD,(function(){u=!0,l||t()}))];return n.src&&a.Tp?(l=!0,n.decode().then((function(){o&&t()})).catch((function(e){o&&(u?t():r())}))):c.push((0,s.Vx)(n,i.Z.ERROR,r)),function(){o=!1,c.forEach(s.bN)}}function y(e,t){return new Promise((function(r,n){function i(){a(),r(e)}function o(){a(),n(new Error("Image load error"))}function a(){e.removeEventListener("load",i),e.removeEventListener("error",o)}e.addEventListener("load",i),e.addEventListener("error",o),t&&(e.src=t)}))}function g(e,t){return t&&(e.src=t),a.Tp?new Promise((function(t,r){return e.decode().then((function(){return t(e)}),r)})):y(e)}function m(e,t){return t&&(e.src=t),a.Tp&&a.et?e.decode().then((function(){return createImageBitmap(e)})):g(e)}const _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(s,e);var t,r,n,a=h(s);function s(e,t,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(i=a.call(this)).extent=e,i.pixelRatio_=r,i.resolution=t,i.state="function"==typeof n?o.Z.IDLE:n,i.image_=null,i.loader="function"==typeof n?n:null,i}return t=s,(r=[{key:"changed",value:function(){this.dispatchEvent(i.Z.CHANGE)}},{key:"getExtent",value:function(){return this.extent}},{key:"getImage",value:function(){return this.image_}},{key:"getPixelRatio",value:function(){return this.pixelRatio_}},{key:"getResolution",value:function(){return this.resolution}},{key:"getState",value:function(){return this.state}},{key:"load",value:function(){var e=this;if(this.state==o.Z.IDLE&&this.loader){this.state=o.Z.LOADING,this.changed();var t=this.getResolution(),r=Array.isArray(t)?t[0]:t;(0,l.Vi)((function(){return e.loader(e.getExtent(),r,e.getPixelRatio())})).then((function(t){"image"in t&&(e.image_=t.image),"extent"in t&&(e.extent=t.extent),"resolution"in t&&(e.resolution=t.resolution),"pixelRatio"in t&&(e.pixelRatio_=t.pixelRatio),(t instanceof HTMLImageElement||t instanceof ImageBitmap||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)&&(e.image_=t),e.state=o.Z.LOADED})).catch((function(t){e.state=o.Z.ERROR,console.error(t)})).finally((function(){return e.changed()}))}}},{key:"setImage",value:function(e){this.image_=e}},{key:"setResolution",value:function(e){this.resolution=e}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(n.Z)},94162:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},44727:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(77118),i=r(57223),o=r(88199),a=r(80237);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,s=c(f);function f(e,t,r,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(a=s.call(this,e,t,o)).crossOrigin_=n,a.src_=r,a.key=r,a.image_=new Image,null!==n&&(a.image_.crossOrigin=n),a.unlisten_=null,a.tileLoadFunction_=i,a}return t=f,(r=[{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(e){this.image_=e,this.state=i.Z.LOADED,this.unlistenImage_(),this.changed()}},{key:"handleImageError_",value:function(){var e;this.state=i.Z.ERROR,this.unlistenImage_(),this.image_=((e=(0,o.E4)(1,1)).fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas),this.changed()}},{key:"handleImageLoad_",value:function(){var e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=i.Z.LOADED:this.state=i.Z.EMPTY,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){this.state==i.Z.ERROR&&(this.state=i.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==i.Z.IDLE&&(this.state=i.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,a.Kp)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},79603:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.d(t,{Z:()=>o});const o=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.decay_=t,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}var t,r,n;return t=e,(r=[{key:"begin",value:function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}},{key:"update",value:function(e,t){this.points_.push(e,t,Date.now())}},{key:"end",value:function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var r=t-3;r>0&&this.points_[r+2]>e;)r-=3;var n=this.points_[t+2]-this.points_[r+2];if(n<1e3/60)return!1;var i=this.points_[t]-this.points_[r],o=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/n,this.initialVelocity_>this.minVelocity_}},{key:"getDistance",value:function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}},{key:"getAngle",value:function(){return this.angle_}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},25769:(e,t,r)=>{"use strict";r.d(t,{Z:()=>$});var n=r(40439),i=r(45004),o=r(14516),a=r(53099),s=r(2115),l=r(54115),u=r(77291),c=r(56742),f=r(30378),h=r(69613),p=r(27167),d=r(45907),y=r(34586);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===g(o)?o:String(o)),n)}var i,o}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},_.apply(this,arguments)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,r)}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}const E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(o,e);var t,r,n,i=A(o);function o(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,e)).map_=e,r.clickTimeoutId_,r.emulateClicks_=!1,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=void 0===t?1:t,r.down_=null;var n=r.map_.getViewport();return r.activePointers_=[],r.trackedTouches_={},r.element_=n,r.pointerdownListenerKey_=(0,y.oL)(n,h.Z.POINTERDOWN,r.handlePointerDown_,b(r)),r.originalPointerMoveEvent_,r.relayedListenerKey_=(0,y.oL)(n,h.Z.POINTERMOVE,r.relayMoveEvent_,b(r)),r.boundHandleTouchMove_=r.handleTouchMove_.bind(b(r)),r.element_.addEventListener(s.Z.TOUCHMOVE,r.boundHandleTouchMove_,!!d.bM&&{passive:!1}),r}return t=o,(r=[{key:"emulateClick_",value:function(e){var t=this,r=new c.Z(f.Z.CLICK,this.map_,e);this.dispatchEvent(r),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,r=new c.Z(f.Z.DBLCLICK,this.map_,e),this.dispatchEvent(r)):this.clickTimeoutId_=setTimeout((function(){t.clickTimeoutId_=void 0;var r=new c.Z(f.Z.SINGLECLICK,t.map_,e);t.dispatchEvent(r)}),250)}},{key:"updateActivePointers_",value:function(e){var t=e,r=t.pointerId;if(t.type==f.Z.POINTERUP||t.type==f.Z.POINTERCANCEL){for(var n in delete this.trackedTouches_[r],this.trackedTouches_)if(this.trackedTouches_[n].target!==t.target){delete this.trackedTouches_[n];break}}else t.type!=f.Z.POINTERDOWN&&t.type!=f.Z.POINTERMOVE||(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}},{key:"handlePointerUp_",value:function(e){this.updateActivePointers_(e);var t=new c.Z(f.Z.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(y.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}},{key:"isMouseActionButton_",value:function(e){return 0===e.button}},{key:"handlePointerDown_",value:function(e){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(e);var t=new c.Z(f.Z.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),0===this.dragListenerKeys_.length){var r=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,y.oL)(r,f.Z.POINTERMOVE,this.handlePointerMove_,this),(0,y.oL)(r,f.Z.POINTERUP,this.handlePointerUp_,this),(0,y.oL)(this.element_,f.Z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push((0,y.oL)(this.element_.getRootNode(),f.Z.POINTERUP,this.handlePointerUp_,this))}}},{key:"handlePointerMove_",value:function(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;var t=new c.Z(f.Z.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}},{key:"relayMoveEvent_",value:function(e){this.originalPointerMoveEvent_=e;var t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new c.Z(f.Z.POINTERMOVE,this.map_,e,t))}},{key:"handleTouchMove_",value:function(e){var t=this.originalPointerMoveEvent_;t&&!t.defaultPrevented||"boolean"==typeof e.cancelable&&!0!==e.cancelable||e.preventDefault()}},{key:"isMoving_",value:function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}},{key:"disposeInternal",value:function(){this.relayedListenerKey_&&((0,y.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(s.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,y.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(y.bN),this.dragListenerKeys_.length=0,this.element_=null,_(w(o.prototype),"disposeInternal",this).call(this)}}])&&m(t.prototype,r),n&&m(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(p.Z);var x=r(97991),I=r(29909),S=r(47556),C=r(43059),P=r(27114),O=r(25324),T=r(92922),M=r(56571),k=r(73826),R=r(16453),B=r(97972),L=r(36181),D=r(60691),j=r(82481),F=r(11133),N=r(27811),Z=r(20594),U=r(59468),Q=r(88199),G=r(19230);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===z(o)?o:String(o)),n)}var i,o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Y(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},V.apply(this,arguments)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Y(e);if(t){var i=Y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H(e)}(this,r)}}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function X(e){e instanceof l.Z?e.setMapInternal(null):e instanceof u.Z&&e.getLayers().forEach(X)}function J(e,t){if(e instanceof l.Z)e.setMapInternal(t);else if(e instanceof u.Z)for(var r=e.getLayers().getArray(),n=0,i=r.length;n<i;++n)J(r[n],t)}const $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(p,e);var t,r,n,l=K(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),e=e||{},(t=l.call(this)).on,t.once,t.un;var r=function(e){var t=null;void 0!==e.keyboardEventTarget&&(t="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r,n,o,a={},s=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new u.Z({layers:e.layers});a[S.Z.LAYERGROUP]=s,a[S.Z.TARGET]=e.target,a[S.Z.VIEW]=e.view instanceof T.ZP?e.view:new T.ZP,void 0!==e.controls&&(Array.isArray(e.controls)?r=new i.Z(e.controls.slice()):((0,B.h)("function"==typeof e.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),r=e.controls));void 0!==e.interactions&&(Array.isArray(e.interactions)?n=new i.Z(e.interactions.slice()):((0,B.h)("function"==typeof e.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),n=e.interactions));void 0!==e.overlays?Array.isArray(e.overlays)?o=new i.Z(e.overlays.slice()):((0,B.h)("function"==typeof e.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),o=e.overlays):o=new i.Z;return{controls:r,interactions:n,keyboardEventTarget:t,overlays:o,values:a}}(e);t.renderComplete_,t.loaded_=!0,t.boundHandleBrowserEvent_=t.handleBrowserEvent.bind(H(t)),t.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,t.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:d.MP,t.postRenderTimeoutHandle_,t.animationDelayKey_,t.animationDelay_=t.animationDelay_.bind(H(t)),t.coordinateToPixelTransform_=(0,R.Ue)(),t.pixelToCoordinateTransform_=(0,R.Ue)(),t.frameIndex_=0,t.frameState_=null,t.previousExtent_=null,t.viewPropertyListenerKey_=null,t.viewChangeListenerKey_=null,t.layerGroupPropertyListenerKeys_=null,t.viewport_=document.createElement("div"),t.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),t.viewport_.style.position="relative",t.viewport_.style.overflow="hidden",t.viewport_.style.width="100%",t.viewport_.style.height="100%",t.overlayContainer_=document.createElement("div"),t.overlayContainer_.style.position="absolute",t.overlayContainer_.style.zIndex="0",t.overlayContainer_.style.width="100%",t.overlayContainer_.style.height="100%",t.overlayContainer_.style.pointerEvents="none",t.overlayContainer_.className="ol-overlaycontainer",t.viewport_.appendChild(t.overlayContainer_),t.overlayContainerStopEvent_=document.createElement("div"),t.overlayContainerStopEvent_.style.position="absolute",t.overlayContainerStopEvent_.style.zIndex="0",t.overlayContainerStopEvent_.style.width="100%",t.overlayContainerStopEvent_.style.height="100%",t.overlayContainerStopEvent_.style.pointerEvents="none",t.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",t.viewport_.appendChild(t.overlayContainerStopEvent_),t.mapBrowserEventHandler_=null,t.moveTolerance_=e.moveTolerance,t.keyboardEventTarget_=r.keyboardEventTarget,t.targetChangeHandlerKeys_=null,t.targetElement_=null,t.resizeObserver_=new ResizeObserver((function(){return t.updateSize()})),t.controls=r.controls||(0,D.c)(),t.interactions=r.interactions||(0,j.c)({onFocusOnly:!0}),t.overlays_=r.overlays,t.overlayIdIndex_={},t.renderer_=null,t.postRenderFunctions_=[],t.tileQueue_=new O.Z(t.getTilePriority.bind(H(t)),t.handleTileChange_.bind(H(t))),t.addChangeListener(S.Z.LAYERGROUP,t.handleLayerGroupChanged_),t.addChangeListener(S.Z.VIEW,t.handleViewChanged_),t.addChangeListener(S.Z.SIZE,t.handleSizeChanged_),t.addChangeListener(S.Z.TARGET,t.handleTargetChanged_),t.setProperties(r.values);var n=H(t);return!e.view||e.view instanceof T.ZP||e.view.then((function(e){n.setView(new T.ZP(e))})),t.controls.addEventListener(o.Z.ADD,(function(e){e.element.setMap(H(t))})),t.controls.addEventListener(o.Z.REMOVE,(function(e){e.element.setMap(null)})),t.interactions.addEventListener(o.Z.ADD,(function(e){e.element.setMap(H(t))})),t.interactions.addEventListener(o.Z.REMOVE,(function(e){e.element.setMap(null)})),t.overlays_.addEventListener(o.Z.ADD,(function(e){t.addOverlayInternal_(e.element)})),t.overlays_.addEventListener(o.Z.REMOVE,(function(e){var r=e.element.getId();void 0!==r&&delete t.overlayIdIndex_[r.toString()],e.element.setMap(null)})),t.controls.forEach((function(e){e.setMap(H(t))})),t.interactions.forEach((function(e){e.setMap(H(t))})),t.overlays_.forEach(t.addOverlayInternal_.bind(H(t))),t}return t=p,(r=[{key:"addControl",value:function(e){this.getControls().push(e)}},{key:"addInteraction",value:function(e){this.getInteractions().push(e)}},{key:"addLayer",value:function(e){this.getLayerGroup().getLayers().push(e)}},{key:"handleLayerAdd_",value:function(e){J(e.layer,this)}},{key:"addOverlay",value:function(e){this.getOverlays().push(e)}},{key:"addOverlayInternal_",value:function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}},{key:"disposeInternal",value:function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),V(Y(p.prototype),"disposeInternal",this).call(this)}},{key:"forEachFeatureAtPixel",value:function(e,t,r){if(this.frameState_&&this.renderer_){var n=this.getCoordinateFromPixelInternal(e),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance:0,o=void 0!==r.layerFilter?r.layerFilter:k.uX,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,a,t,null,o,null)}}},{key:"getFeaturesAtPixel",value:function(e,t){var r=[];return this.forEachFeatureAtPixel(e,(function(e){r.push(e)}),t),r}},{key:"getAllLayers",value:function(){var e=[];return function t(r){r.forEach((function(r){r instanceof u.Z?t(r.getLayers()):e.push(r)}))}(this.getLayers()),e}},{key:"hasFeatureAtPixel",value:function(e,t){if(!this.frameState_||!this.renderer_)return!1;var r=this.getCoordinateFromPixelInternal(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:k.uX,i=void 0!==t.hitTolerance?t.hitTolerance:0,o=!1!==t.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,o,n,null)}},{key:"getEventCoordinate",value:function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}},{key:"getEventCoordinateInternal",value:function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}},{key:"getEventPixel",value:function(e){var t=this.viewport_.getBoundingClientRect(),r=this.getSize(),n=t.width/r[0],i=t.height/r[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-t.left)/n,(o.clientY-t.top)/i]}},{key:"getTarget",value:function(){return this.get(S.Z.TARGET)}},{key:"getTargetElement",value:function(){return this.targetElement_}},{key:"getCoordinateFromPixel",value:function(e){return(0,N.lO)(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}},{key:"getCoordinateFromPixelInternal",value:function(e){var t=this.frameState_;return t?(0,R.nn)(t.pixelToCoordinateTransform,e.slice()):null}},{key:"getControls",value:function(){return this.controls}},{key:"getOverlays",value:function(){return this.overlays_}},{key:"getOverlayById",value:function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}},{key:"getInteractions",value:function(){return this.interactions}},{key:"getLayerGroup",value:function(){return this.get(S.Z.LAYERGROUP)}},{key:"setLayers",value:function(e){var t=this.getLayerGroup();if(e instanceof i.Z)t.setLayers(e);else{var r=t.getLayers();r.clear(),r.extend(e)}}},{key:"getLayers",value:function(){return this.getLayerGroup().getLayers()}},{key:"getLoadingOrNotReady",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t];if(n.visible){var i=n.layer.getRenderer();if(i&&!i.ready)return!0;var o=n.layer.getSource();if(o&&o.loading)return!0}}return!1}},{key:"getPixelFromCoordinate",value:function(e){var t=(0,N.Vs)(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}},{key:"getPixelFromCoordinateInternal",value:function(e){var t=this.frameState_;return t?(0,R.nn)(t.coordinateToPixelTransform,e.slice(0,2)):null}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"getSize",value:function(){return this.get(S.Z.SIZE)}},{key:"getView",value:function(){return this.get(S.Z.VIEW)}},{key:"getViewport",value:function(){return this.viewport_}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getOwnerDocument",value:function(){var e=this.getTargetElement();return e?e.ownerDocument:document}},{key:"getTilePriority",value:function(e,t,r,n){return(0,O.R)(this.frameState_,e,t,r,n)}},{key:"handleBrowserEvent",value:function(e,t){t=t||e.type;var r=new c.Z(t,this,e);this.handleMapBrowserEvent(r)}},{key:"handleMapBrowserEvent",value:function(e){if(this.frameState_){var t=e.originalEvent,r=t.type;if(r===h.Z.POINTERDOWN||r===s.Z.WHEEL||r===s.Z.KEYDOWN){var n=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(i===n?n.documentElement:i).contains(o))return}if(e.frameState=this.frameState_,!1!==this.dispatchEvent(e))for(var a=this.getInteractions().getArray().slice(),l=a.length-1;l>=0;l--){var u=a[l];if(u.getMap()===this&&u.getActive()&&this.getTargetElement()&&(!u.handleEvent(e)||e.propagationStopped))break}}}},{key:"handlePostRender",value:function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_,n=r;if(e){var i=e.viewHints;if(i[M.Z.ANIMATING]||i[M.Z.INTERACTING]){var o=Date.now()-e.time>8;r=o?0:8,n=o?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,n))}e&&this.renderer_&&!e.animate&&(!0===this.renderComplete_?(this.hasListener(P.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(P.Z.RENDERCOMPLETE,e),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new x.Z(I.Z.LOADEND,this,e)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new x.Z(I.Z.LOADSTART,this,e))));for(var a=this.postRenderFunctions_,s=0,l=a.length;s<l;++s)a[s](this,e);a.length=0}},{key:"handleSizeChanged_",value:function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}},{key:"handleTargetChanged_",value:function(){if(this.mapBrowserEventHandler_){for(var e=0,t=this.targetChangeHandlerKeys_.length;e<t;++e)(0,y.bN)(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(s.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(s.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,Q.ZF)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);var r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}var n=this.getTarget(),i="string"==typeof n?document.getElementById(n):n;if(this.targetElement_=i,i){for(var o in i.appendChild(this.viewport_),this.renderer_||(this.renderer_=new a.Z(this)),this.mapBrowserEventHandler_=new E(this,this.moveTolerance_),f.Z)this.mapBrowserEventHandler_.addEventListener(f.Z[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(s.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(s.Z.WHEEL,this.boundHandleBrowserEvent_,!!d.bM&&{passive:!1});var l=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[(0,y.oL)(l,s.Z.KEYDOWN,this.handleBrowserEvent,this),(0,y.oL)(l,s.Z.KEYPRESS,this.handleBrowserEvent,this)];var u=i.getRootNode();u instanceof ShadowRoot&&this.resizeObserver_.observe(u.host),this.resizeObserver_.observe(i)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}},{key:"handleTileChange_",value:function(){this.render()}},{key:"handleViewPropertyChanged_",value:function(){this.render()}},{key:"handleViewChanged_",value:function(){this.viewPropertyListenerKey_&&((0,y.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,y.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,y.oL)(e,C.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,y.oL)(e,s.Z.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}},{key:"handleLayerGroupChanged_",value:function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(y.bN),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.handleLayerAdd_(new u.V("addlayer",e)),this.layerGroupPropertyListenerKeys_=[(0,y.oL)(e,C.Z.PROPERTYCHANGE,this.render,this),(0,y.oL)(e,s.Z.CHANGE,this.render,this),(0,y.oL)(e,"addlayer",this.handleLayerAdd_,this),(0,y.oL)(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}},{key:"isRendered",value:function(){return!!this.frameState_}},{key:"animationDelay_",value:function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}},{key:"renderSync",value:function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}},{key:"redrawText",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}},{key:"render",value:function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}},{key:"flushDeclutterItems",value:function(){var e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}},{key:"removeControl",value:function(e){return this.getControls().remove(e)}},{key:"removeInteraction",value:function(e){return this.getInteractions().remove(e)}},{key:"removeLayer",value:function(e){return this.getLayerGroup().getLayers().remove(e)}},{key:"handleLayerRemove_",value:function(e){X(e.layer)}},{key:"removeOverlay",value:function(e){return this.getOverlays().remove(e)}},{key:"renderFrame_",value:function(e){var t=this,r=this.getSize(),n=this.getView(),i=this.frameState_,o=null;if(void 0!==r&&(0,U.py)(r)&&n&&n.isDef()){var a=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,L.p8)(s.center,s.resolution,s.rotation,r),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:s,viewHints:a,wantedTiles:{},mapId:(0,Z.sq)(this),renderTargets:{}},s.nextCenter&&s.nextResolution){var l=isNaN(s.nextRotation)?s.rotation:s.nextRotation;o.nextExtent=(0,L.p8)(s.nextCenter,s.nextResolution,l,r)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i&&(!this.previousExtent_||!(0,L.xb)(this.previousExtent_)&&!(0,L.fS)(o.extent,this.previousExtent_))&&(this.dispatchEvent(new x.Z(I.Z.MOVESTART,this,i)),this.previousExtent_=(0,L.YN)(this.previousExtent_)),this.previousExtent_&&!o.viewHints[M.Z.ANIMATING]&&!o.viewHints[M.Z.INTERACTING]&&!(0,L.fS)(o.extent,this.previousExtent_)&&(this.dispatchEvent(new x.Z(I.Z.MOVEEND,this,o)),(0,L.d9)(o.extent,this.previousExtent_))),this.dispatchEvent(new x.Z(I.Z.POSTRENDER,this,o)),this.renderComplete_=this.hasListener(I.Z.LOADSTART)||this.hasListener(I.Z.LOADEND)||this.hasListener(P.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){t.postRenderTimeoutHandle_=void 0,t.handlePostRender()}),0))}},{key:"setLayerGroup",value:function(e){var t=this.getLayerGroup();t&&this.handleLayerRemove_(new u.V("removelayer",t)),this.set(S.Z.LAYERGROUP,e)}},{key:"setSize",value:function(e){this.set(S.Z.SIZE,e)}},{key:"setTarget",value:function(e){this.set(S.Z.TARGET,e)}},{key:"setView",value:function(e){if(!e||e instanceof T.ZP)this.set(S.Z.VIEW,e);else{this.set(S.Z.VIEW,new T.ZP);var t=this;e.then((function(e){t.setView(new T.ZP(e))}))}}},{key:"updateSize",value:function(){var e=this.getTargetElement(),t=void 0;if(e){var r=getComputedStyle(e),n=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),i=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);isNaN(n)||isNaN(i)||(t=[n,i],!(0,U.py)(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&(0,G.ZK)("No map visible because the map container's width or height are 0."))}var o=this.getSize();!t||o&&(0,F.fS)(t,o)||(this.setSize(t),this.updateViewportSize_())}},{key:"updateViewportSize_",value:function(){var e=this.getView();if(e){var t=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(t=[parseInt(r.width,10),parseInt(r.height,10)]),e.setViewportSize(t)}}}])&&q(t.prototype,r),n&&q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.Z)},56742:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},o.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}r.d(t,{Z:()=>u});const u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(c,e);var t,r,n,u=s(c);function c(e,t,r,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(a=u.call(this,e,t,i)).originalEvent=r,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==n&&n,a.activePointers=o,a}return t=c,(r=[{key:"pixel",get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(e){this.pixel_=e}},{key:"coordinate",get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(e){this.coordinate_=e}},{key:"preventDefault",value:function(){o(l(c.prototype),"preventDefault",this).call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){o(l(c.prototype),"stopPropagation",this).call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(r(97991).Z)},30378:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(2115);const i={SINGLECLICK:"singleclick",CLICK:n.Z.CLICK,DBLCLICK:n.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},97991:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=s.call(this,e)).map=t,n.frameState=void 0!==r?r:null,n}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(28513).ZP)},29909:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},47556:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},40439:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(28513),i=r(43059),o=r(82428),a=r(20594),s=r(83482);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(this,r)}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var m=function(e){h(r,e);var t=d(r);function r(e,n,i){var o;return f(this,r),(o=t.call(this,e)).key=n,o.oldValue=i,o}return c(r)}(n.ZP);const _=function(e){h(r,e);var t=d(r);function r(e){var n;return f(this,r),(n=t.call(this)).on,n.once,n.un,(0,a.sq)(y(n)),n.values_=null,void 0!==e&&n.setProperties(e),n}return c(r,[{key:"get",value:function(e){var t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}},{key:"getKeys",value:function(){return this.values_&&Object.keys(this.values_)||[]}},{key:"getProperties",value:function(){return this.values_&&Object.assign({},this.values_)||{}}},{key:"getPropertiesInternal",value:function(){return this.values_}},{key:"hasProperties",value:function(){return!!this.values_}},{key:"notify",value:function(e,t){var r;r="change:".concat(e),this.hasListener(r)&&this.dispatchEvent(new m(r,e,t)),r=i.Z.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new m(r,e,t))}},{key:"addChangeListener",value:function(e,t){this.addEventListener("change:".concat(e),t)}},{key:"removeChangeListener",value:function(e,t){this.removeEventListener("change:".concat(e),t)}},{key:"set",value:function(e,t,r){var n=this.values_||(this.values_={});if(r)n[e]=t;else{var i=n[e];n[e]=t,i!==t&&this.notify(e,i)}}},{key:"setProperties",value:function(e,t){for(var r in e)this.set(r,e[r],t)}},{key:"applyProperties",value:function(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}},{key:"unset",value:function(e,t){if(this.values_&&e in this.values_){var r=this.values_[e];delete this.values_[e],(0,s.x)(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}]),r}(o.Z)},43059:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={PROPERTYCHANGE:"propertychange"}},82428:(e,t,r)=>{"use strict";r.d(t,{B:()=>h,Z:()=>p});var n=r(27167),i=r(2115),o=r(34586);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,r,n,a=u(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this)).on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return t=c,(r=[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(i.Z.CHANGE)}},{key:"getRevision",value:function(){return this.revision_}},{key:"onInternal",value:function(e,t){if(Array.isArray(e)){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=(0,o.oL)(this,e[i],t);return n}return(0,o.oL)(this,e,t)}},{key:"onceInternal",value:function(e,t){var r;if(Array.isArray(e)){var n=e.length;r=new Array(n);for(var i=0;i<n;++i)r[i]=(0,o.Vx)(this,e[i],t)}else r=(0,o.Vx)(this,e,t);return t.ol_key=r,r}},{key:"unInternal",value:function(e,t){var r=t.ol_key;if(r)h(r);else if(Array.isArray(e))for(var n=0,i=e.length;n<i;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Z);function h(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)(0,o.bN)(e[t]);else(0,o.bN)(e)}f.prototype.on,f.prototype.once,f.prototype.un;const p=f},6015:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(40439),i=r(29909),o=r(89368),a=r(36181),s=r(34586),l=r(88199);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d="element",y="map",g="offset",m="position",_="positioning";const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(p,e);var t,r,n,u=h(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=u.call(this)).on,t.once,t.un,t.options=e,t.id=e.id,t.insertFirst=void 0===e.insertFirst||e.insertFirst,t.stopEvent=void 0===e.stopEvent||e.stopEvent,t.element=document.createElement("div"),t.element.className=void 0!==e.className?e.className:"ol-overlay-container "+o.$A,t.element.style.position="absolute",t.element.style.pointerEvents="auto",t.autoPan=!0===e.autoPan?{}:e.autoPan||void 0,t.rendered={transform_:"",visible:!0},t.mapPostrenderListenerKey=null,t.addChangeListener(d,t.handleElementChanged),t.addChangeListener(y,t.handleMapChanged),t.addChangeListener(g,t.handleOffsetChanged),t.addChangeListener(m,t.handlePositionChanged),t.addChangeListener(_,t.handlePositioningChanged),void 0!==e.element&&t.setElement(e.element),t.setOffset(void 0!==e.offset?e.offset:[0,0]),t.setPositioning(e.positioning||"top-left"),void 0!==e.position&&t.setPosition(e.position),t}return t=p,(r=[{key:"getElement",value:function(){return this.get(d)}},{key:"getId",value:function(){return this.id}},{key:"getMap",value:function(){return this.get(y)||null}},{key:"getOffset",value:function(){return this.get(g)}},{key:"getPosition",value:function(){return this.get(m)}},{key:"getPositioning",value:function(){return this.get(_)}},{key:"handleElementChanged",value:function(){(0,l.ep)(this.element);var e=this.getElement();e&&this.element.appendChild(e)}},{key:"handleMapChanged",value:function(){this.mapPostrenderListenerKey&&((0,l.ZF)(this.element),(0,s.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey=(0,s.oL)(e,i.Z.POSTRENDER,this.render,this),this.updatePixelPosition();var t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}},{key:"render",value:function(){this.updatePixelPosition()}},{key:"handleOffsetChanged",value:function(){this.updatePixelPosition()}},{key:"handlePositionChanged",value:function(){this.updatePixelPosition(),this.performAutoPan()}},{key:"handlePositioningChanged",value:function(){this.updatePixelPosition()}},{key:"setElement",value:function(e){this.set(d,e)}},{key:"setMap",value:function(e){this.set(y,e)}},{key:"setOffset",value:function(e){this.set(g,e)}},{key:"setPosition",value:function(e){this.set(m,e)}},{key:"performAutoPan",value:function(){this.autoPan&&this.panIntoView(this.autoPan)}},{key:"panIntoView",value:function(e){var t=this.getMap();if(t&&t.getTargetElement()&&this.get(m)){var r=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),i=this.getRect(n,[(0,l.iO)(n),(0,l.Pb)(n)]),o=void 0===(e=e||{}).margin?20:e.margin;if(!(0,a.r4)(r,i)){var s=i[0]-r[0],u=r[2]-i[2],c=i[1]-r[1],f=r[3]-i[3],h=[0,0];if(s<0?h[0]=s-o:u<0&&(h[0]=Math.abs(u)+o),c<0?h[1]=c-o:f<0&&(h[1]=Math.abs(f)+o),0!==h[0]||0!==h[1]){var p=t.getView().getCenterInternal(),d=t.getPixelFromCoordinateInternal(p);if(!d)return;var y=[d[0]+h[0],d[1]+h[1]],g=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(y),duration:g.duration,easing:g.easing})}}}}},{key:"getRect",value:function(e,t){var r=e.getBoundingClientRect(),n=r.left+window.pageXOffset,i=r.top+window.pageYOffset;return[n,i,n+t[0],i+t[1]]}},{key:"setPositioning",value:function(e){this.set(_,e)}},{key:"setVisible",value:function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}},{key:"updatePixelPosition",value:function(){var e=this.getMap(),t=this.getPosition();if(e&&e.isRendered()&&t){var r=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)}},{key:"updateRenderedPosition",value:function(e,t){var r=this.element.style,n=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var o=Math.round(e[0]+n[0])+"px",a=Math.round(e[1]+n[1])+"px",s="0%",l="0%";"bottom-right"==i||"center-right"==i||"top-right"==i?s="-100%":"bottom-center"!=i&&"center-center"!=i&&"top-center"!=i||(s="-50%"),"bottom-left"==i||"bottom-center"==i||"bottom-right"==i?l="-100%":"center-left"!=i&&"center-center"!=i&&"center-right"!=i||(l="-50%");var u="translate(".concat(s,", ").concat(l,") translate(").concat(o,", ").concat(a,")");this.rendered.transform_!=u&&(this.rendered.transform_=u,r.transform=u)}},{key:"getOptions",value:function(){return this.options}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.Z)},77118:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(27167),i=r(2115),o=r(57223),a=r(20594),s=r(66646);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(h,e);var t,r,n,l=f(h);function h(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),r=r||{},(n=l.call(this)).tileCoord=e,n.state=t,n.interimTile=null,n.key="",n.transition_=void 0===r.transition?250:r.transition,n.transitionStarts_={},n.interpolate=!!r.interpolate,n}return t=h,(r=[{key:"changed",value:function(){this.dispatchEvent(i.Z.CHANGE)}},{key:"release",value:function(){this.state===o.Z.ERROR&&this.setState(o.Z.EMPTY)}},{key:"getKey",value:function(){return this.key+"/"+this.tileCoord}},{key:"getInterimTile",value:function(){if(!this.interimTile)return this;var e=this.interimTile;do{if(e.getState()==o.Z.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}},{key:"refreshInterimChain",value:function(){if(this.interimTile){var e=this.interimTile,t=this;do{if(e.getState()==o.Z.LOADED){e.interimTile=null;break}e.getState()==o.Z.LOADING?t=e:e.getState()==o.Z.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}}},{key:"getTileCoord",value:function(){return this.tileCoord}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(e){if(this.state!==o.Z.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}},{key:"load",value:function(){(0,a.O3)()}},{key:"getAlpha",value:function(e,t){if(!this.transition_)return 1;var r=this.transitionStarts_[e];if(r){if(-1===r)return 1}else r=t,this.transitionStarts_[e]=r;var n=t-r+1e3/60;return n>=this.transition_?1:(0,s.easeIn)(n/this.transition_)}},{key:"inTransition",value:function(e){return!!this.transition_&&-1!==this.transitionStarts_[e]}},{key:"endTransition",value:function(e){this.transition_&&(this.transitionStarts_[e]=-1)}}])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(n.Z)},14666:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(86732),i=r(62718);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},s.apply(this,arguments)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,r,n,o=u(f);function f(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),o.apply(this,arguments)}return t=f,(r=[{key:"clear",value:function(){for(;this.getCount()>0;)this.pop().release();s(c(f.prototype),"clear",this).call(this)}},{key:"expireCache",value:function(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}},{key:"pruneExceptNewestZ",value:function(){var e=this;if(0!==this.getCount()){var t=this.peekFirstKey(),r=(0,i.Ul)(t)[0];this.forEach((function(t){t.tileCoord[0]!==r&&(e.remove((0,i.km)(t.tileCoord)),t.release())}))}}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},25324:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_,R:()=>v});var n=r(2115),i=r(97972),o=r(83482);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}var l=1/0;const u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.priorityFunction_=t,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}var t,r,n;return t=e,(r=[{key:"clear",value:function(){this.elements_.length=0,this.priorities_.length=0,(0,o.Z)(this.queuedElements_)}},{key:"dequeue",value:function(){var e=this.elements_,t=this.priorities_,r=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var n=this.keyFunction_(r);return delete this.queuedElements_[n],r}},{key:"enqueue",value:function(e){(0,i.h)(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");var t=this.priorityFunction_(e);return t!=l&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}},{key:"getCount",value:function(){return this.elements_.length}},{key:"getLeftChildIndex_",value:function(e){return 2*e+1}},{key:"getRightChildIndex_",value:function(e){return 2*e+2}},{key:"getParentIndex_",value:function(e){return e-1>>1}},{key:"heapify_",value:function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}},{key:"isEmpty",value:function(){return 0===this.elements_.length}},{key:"isKeyQueued",value:function(e){return e in this.queuedElements_}},{key:"isQueued",value:function(e){return this.isKeyQueued(this.keyFunction_(e))}},{key:"siftUp_",value:function(e){for(var t=this.elements_,r=this.priorities_,n=t.length,i=t[e],o=r[e],a=e;e<n>>1;){var s=this.getLeftChildIndex_(e),l=this.getRightChildIndex_(e),u=l<n&&r[l]<r[s]?l:s;t[e]=t[u],r[e]=r[u],e=u}t[e]=i,r[e]=o,this.siftDown_(a,e)}},{key:"siftDown_",value:function(e,t){for(var r=this.elements_,n=this.priorities_,i=r[t],o=n[t];t>e;){var a=this.getParentIndex_(t);if(!(n[a]>o))break;r[t]=r[a],n[t]=n[a],t=a}r[t]=i,n[t]=o}},{key:"reprioritize",value:function(){var e,t,r,n=this.priorityFunction_,i=this.elements_,o=this.priorities_,a=0,s=i.length;for(t=0;t<s;++t)(r=n(e=i[t]))==l?delete this.queuedElements_[this.keyFunction_(e)]:(o[a]=r,i[a++]=e);i.length=a,o.length=a,this.heapify_()}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var c=r(57223);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},p.apply(this,arguments)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,r)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}const _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,r,i,o=y(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this,(function(t){return e.apply(null,t)}),(function(e){return e[0].getKey()}))).boundHandleTileChange_=r.handleTileChange.bind(g(r)),r.tileChangeCallback_=t,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return t=a,(r=[{key:"enqueue",value:function(e){var t=p(m(a.prototype),"enqueue",this).call(this,e);return t&&e[0].addEventListener(n.Z.CHANGE,this.boundHandleTileChange_),t}},{key:"getTilesLoading",value:function(){return this.tilesLoading_}},{key:"handleTileChange",value:function(e){var t=e.target,r=t.getState();if(r===c.Z.LOADED||r===c.Z.ERROR||r===c.Z.EMPTY){r!==c.Z.ERROR&&t.removeEventListener(n.Z.CHANGE,this.boundHandleTileChange_);var i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}},{key:"loadMoreTiles",value:function(e,t){for(var r,n,i=0;this.tilesLoading_<e&&i<t&&this.getCount()>0;)n=(r=this.dequeue()[0]).getKey(),r.getState()!==c.Z.IDLE||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++i,r.load())}}])&&h(t.prototype,r),i&&h(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(u);function v(e,t,r,n,i){if(!e||!(r in e.wantedTiles))return l;if(!e.wantedTiles[r][t.getKey()])return l;var o=e.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i}},70559:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.d(t,{T:()=>a,Z:()=>s});var o=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minX=t,this.maxX=r,this.minY=n,this.maxY=i}var t,r,n;return t=e,(r=[{key:"contains",value:function(e){return this.containsXY(e[1],e[2])}},{key:"containsTileRange",value:function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}},{key:"containsXY",value:function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}},{key:"equals",value:function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}},{key:"extend",value:function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}},{key:"getHeight",value:function(){return this.maxY-this.minY+1}},{key:"getSize",value:function(){return[this.getWidth(),this.getHeight()]}},{key:"getWidth",value:function(){return this.maxX-this.minX+1}},{key:"intersects",value:function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t,r,n,i){return void 0!==i?(i.minX=e,i.maxX=t,i.minY=r,i.maxY=n,i):new o(e,t,r,n)}const s=o},57223:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},92922:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>T});var n=r(40439),i=r(56571),o=r(62348),a=r(49518),s=r(27811),l=r(73826),u=r(36707),c=r(97972),f=r(7697);function h(e,t,r){return function(n,i,o,a,s){if(n){if(!i&&!t)return n;var l=t?0:o[0]*i,u=t?0:o[1]*i,c=s?s[0]:0,h=s?s[1]:0,p=e[0]+l/2+c,d=e[2]-l/2+c,y=e[1]+u/2+h,g=e[3]-u/2+h;p>d&&(d=p=(d+p)/2),y>g&&(g=y=(g+y)/2);var m=(0,f.uZ)(n[0],p,d),_=(0,f.uZ)(n[1],y,g);if(a&&r&&i){var v=30*i;m+=-v*Math.log(1+Math.max(0,p-n[0])/v)+v*Math.log(1+Math.max(0,n[0]-d)/v),_+=-v*Math.log(1+Math.max(0,y-n[1])/v)+v*Math.log(1+Math.max(0,n[1]-g)/v)}return[m,_]}}}function p(e){return e}var d=r(36181),y=r(11133);function g(e,t,r,n){var i=(0,d.dz)(t)/r[0],o=(0,d.Cr)(t)/r[1];return n?Math.min(e,Math.max(i,o)):Math.min(e,Math.min(i,o))}function m(e,t,r){var n=Math.min(e,t);return n*=Math.log(1+50*Math.max(0,e/t-1))/50+1,r&&(n=Math.max(n,r),n/=Math.log(1+50*Math.max(0,r/e-1))/50+1),(0,f.uZ)(n,r/2,2*t)}function _(e,t,r,n,i){return r=void 0===r||r,function(o,a,s,l){if(void 0!==o){var u=n?g(e,n,s,i):e;return r&&l?m(o,u,t):(0,f.uZ)(o,t,u)}}}var v=r(64495),A=r(66646),b=r(92882);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===w(o)?o:String(o)),n)}var i,o}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function C(e,t){setTimeout((function(){e(t)}),0)}function P(e){return!(e.sourceCenter&&e.targetCenter&&!(0,u.fS)(e.sourceCenter,e.targetCenter))&&(e.sourceResolution===e.targetResolution&&e.sourceRotation===e.targetRotation)}function O(e,t,r,n,i){var o=Math.cos(-i),a=Math.sin(-i),s=e[0]*o-e[1]*a,l=e[1]*o+e[0]*a;return[(s+=(t[0]/2-r[0])*n)*o-(l+=(r[1]-t[1]/2)*n)*(a=-a),l*o+s*a]}const T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(S,e);var t,r,n,w=I(S);function S(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S),(t=w.call(this)).on,t.once,t.un,e=Object.assign({},e),t.hints_=[0,0],t.animations_=[],t.updateAnimationKey_,t.projection_=(0,s.UQ)(e.projection,"EPSG:3857"),t.viewportSize_=[100,100],t.targetCenter_=null,t.targetResolution_,t.targetRotation_,t.nextCenter_=null,t.nextResolution_,t.nextRotation_,t.cancelAnchor_=void 0,e.projection&&(0,s.h_)(),e.center&&(e.center=(0,s.Vs)(e.center,t.projection_)),e.extent&&(e.extent=(0,s.dY)(e.extent,t.projection_)),t.applyOptions_(e),t}return t=S,r=[{key:"applyOptions_",value:function(e){var t=Object.assign({},e);for(var r in o.Z)delete t[r];this.setProperties(t,!0);var n=function(e){var t,r,n,i=28,o=2,l=void 0!==e.minZoom?e.minZoom:0,u=void 0!==e.maxZoom?e.maxZoom:i,c=void 0!==e.zoomFactor?e.zoomFactor:o,h=void 0!==e.multiWorld&&e.multiWorld,p=void 0===e.smoothResolutionConstraint||e.smoothResolutionConstraint,v=void 0!==e.showFullExtent&&e.showFullExtent,A=(0,s.UQ)(e.projection,"EPSG:3857"),b=A.getExtent(),w=e.constrainOnlyCenter,E=e.extent;if(h||E||!A.isGlobal()||(w=!1,E=b),void 0!==e.resolutions){var x=e.resolutions;r=x[l],n=void 0!==x[u]?x[u]:x[x.length-1],t=e.constrainResolution?function(e,t,r,n){return t=void 0===t||t,function(i,o,a,s){if(void 0!==i){var l=e[0],u=e[e.length-1],c=r?g(l,r,a,n):l;if(s)return t?m(i,c,u):(0,f.uZ)(i,u,c);var h=Math.min(c,i),p=Math.floor((0,y.h7)(e,h,o));return e[p]>c&&p<e.length-1?e[p+1]:e[p]}}}(x,p,!w&&E,v):_(r,n,p,!w&&E,v)}else{var I=(b?Math.max((0,d.dz)(b),(0,d.Cr)(b)):360*s.Wm.degrees/A.getMetersPerUnit())/a.S/Math.pow(o,0),S=I/Math.pow(o,i-0);void 0!==(r=e.maxResolution)?l=0:r=I/Math.pow(c,l),void 0===(n=e.minResolution)&&(n=void 0!==e.maxZoom?void 0!==e.maxResolution?r/Math.pow(c,u):I/Math.pow(c,u):S),u=l+Math.floor(Math.log(r/n)/Math.log(c)),n=r/Math.pow(c,u-l),t=e.constrainResolution?function(e,t,r,n,i,o){return n=void 0===n||n,r=void 0!==r?r:0,function(a,s,l,u){if(void 0!==a){var c=i?g(t,i,l,o):t;if(u)return n?m(a,c,r):(0,f.uZ)(a,r,c);var h=Math.ceil(Math.log(t/c)/Math.log(e)-1e-9),p=-s*(.5-1e-9)+.5,d=Math.min(c,a),y=Math.floor(Math.log(t/d)/Math.log(e)+p),_=Math.max(h,y),v=t/Math.pow(e,_);return(0,f.uZ)(v,r,c)}}}(c,r,n,p,!w&&E,v):_(r,n,p,!w&&E,v)}return{constraint:t,maxResolution:r,minResolution:n,minZoom:l,zoomFactor:c}}(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;var i=function(e){if(void 0!==e.extent){var t=void 0===e.smoothExtentConstraint||e.smoothExtentConstraint;return h(e.extent,e.constrainOnlyCenter,t)}var r=(0,s.UQ)(e.projection,"EPSG:3857");if(!0!==e.multiWorld&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,h(n,!1,!1)}return p}(e),l=n.constraint,u=function(e){var t=void 0===e.enableRotation||e.enableRotation;if(t){var r=e.constrainRotation;return void 0===r||!0===r?(0,v.Gw)():!1===r?v.YP:"number"==typeof r?(0,v.gE)(r):v.YP}return v.h$}(e);this.constraints_={center:i,resolution:l,rotation:u},this.setRotation(void 0!==e.rotation?e.rotation:0),this.setCenterInternal(void 0!==e.center?e.center:null),void 0!==e.resolution?this.setResolution(e.resolution):void 0!==e.zoom&&this.setZoom(e.zoom)}},{key:"padding",get:function(){return this.padding_},set:function(e){var t=this.padding_;this.padding_=e;var r=this.getCenterInternal();if(r){var n=e||[0,0,0,0];t=t||[0,0,0,0];var i=this.getResolution(),o=i/2*(n[3]-t[3]+t[1]-n[1]),a=i/2*(n[0]-t[0]+t[2]-n[2]);this.setCenterInternal([r[0]+o,r[1]-a])}}},{key:"getUpdatedOptions_",value:function(e){var t=this.getProperties();return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}},{key:"animate",value:function(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var t=new Array(arguments.length),r=0;r<t.length;++r){var n=arguments[r];n.center&&((n=Object.assign({},n)).center=(0,s.Vs)(n.center,this.getProjection())),n.anchor&&((n=Object.assign({},n)).anchor=(0,s.Vs)(n.anchor,this.getProjection())),t[r]=n}this.animateInternal.apply(this,t)}},{key:"animateInternal",value:function(e){var t,r=arguments.length;r>1&&"function"==typeof arguments[r-1]&&(t=arguments[r-1],--r);for(var n=0;n<r&&!this.isDef();++n){var o=arguments[n];o.center&&this.setCenterInternal(o.center),void 0!==o.zoom?this.setZoom(o.zoom):o.resolution&&this.setResolution(o.resolution),void 0!==o.rotation&&this.setRotation(o.rotation)}if(n!==r){for(var a=Date.now(),s=this.targetCenter_.slice(),l=this.targetResolution_,u=this.targetRotation_,c=[];n<r;++n){var h=arguments[n],p={start:a,complete:!1,anchor:h.anchor,duration:void 0!==h.duration?h.duration:1e3,easing:h.easing||A.inAndOut,callback:t};if(h.center&&(p.sourceCenter=s,p.targetCenter=h.center.slice(),s=p.targetCenter),void 0!==h.zoom?(p.sourceResolution=l,p.targetResolution=this.getResolutionForZoom(h.zoom),l=p.targetResolution):h.resolution&&(p.sourceResolution=l,p.targetResolution=h.resolution,l=p.targetResolution),void 0!==h.rotation){p.sourceRotation=u;var d=(0,f.$W)(h.rotation-u+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=u+d,u=p.targetRotation}P(p)?p.complete=!0:a+=p.duration,c.push(p)}this.animations_.push(c),this.setHint(i.Z.ANIMATING,1),this.updateAnimations_()}else t&&C(t,!0)}},{key:"getAnimating",value:function(){return this.hints_[i.Z.ANIMATING]>0}},{key:"getInteracting",value:function(){return this.hints_[i.Z.INTERACTING]>0}},{key:"cancelAnimations",value:function(){var e;this.setHint(i.Z.ANIMATING,-this.hints_[i.Z.ANIMATING]);for(var t=0,r=this.animations_.length;t<r;++t){var n=this.animations_[t];if(n[0].callback&&C(n[0].callback,!1),!e)for(var o=0,a=n.length;o<a;++o){var s=n[o];if(!s.complete){e=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}},{key:"updateAnimations_",value:function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var e=Date.now(),t=!1,r=this.animations_.length-1;r>=0;--r){for(var n=this.animations_[r],o=!0,a=0,s=n.length;a<s;++a){var l=n[a];if(!l.complete){var u=e-l.start,c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):o=!1;var h=l.easing(c);if(l.sourceCenter){var p=l.sourceCenter[0],d=l.sourceCenter[1],y=l.targetCenter[0],g=l.targetCenter[1];this.nextCenter_=l.targetCenter;var m=p+h*(y-p),_=d+h*(g-d);this.targetCenter_=[m,_]}if(l.sourceResolution&&l.targetResolution){var v=1===h?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){var A=this.getViewportSize_(this.getRotation()),b=this.constraints_.resolution(v,0,A,!0);this.targetCenter_=this.calculateCenterZoom(b,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=v,this.applyTargetState_(!0)}if(void 0!==l.sourceRotation&&void 0!==l.targetRotation){var w=1===h?(0,f.$W)(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){var E=this.constraints_.rotation(w,!0);this.targetCenter_=this.calculateCenterRotate(E,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=w}if(this.applyTargetState_(!0),t=!0,!l.complete)break}}if(o){this.animations_[r]=null,this.setHint(i.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var x=n[0].callback;x&&C(x,!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}}},{key:"calculateCenterRotate",value:function(e,t){var r,n=this.getCenterInternal();return void 0!==n&&(r=[n[0]-t[0],n[1]-t[1]],(0,u.U1)(r,e-this.getRotation()),(0,u.IH)(r,t)),r}},{key:"calculateCenterZoom",value:function(e,t){var r,n=this.getCenterInternal(),i=this.getResolution();return void 0!==n&&void 0!==i&&(r=[t[0]-e*(t[0]-n[0])/i,t[1]-e*(t[1]-n[1])/i]),r}},{key:"getViewportSize_",value:function(e){var t=this.viewportSize_;if(e){var r=t[0],n=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(n*Math.cos(e))]}return t}},{key:"setViewportSize",value:function(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}},{key:"getCenter",value:function(){var e=this.getCenterInternal();return e?(0,s.lO)(e,this.getProjection()):e}},{key:"getCenterInternal",value:function(){return this.get(o.Z.CENTER)}},{key:"getConstraints",value:function(){return this.constraints_}},{key:"getConstrainResolution",value:function(){return this.get("constrainResolution")}},{key:"getHints",value:function(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}},{key:"calculateExtent",value:function(e){var t=this.calculateExtentInternal(e);return(0,s.Fj)(t,this.getProjection())}},{key:"calculateExtentInternal",value:function(e){e=e||this.getViewportSizeMinusPadding_();var t=this.getCenterInternal();(0,c.h)(t,"The view center is not defined");var r=this.getResolution();(0,c.h)(void 0!==r,"The view resolution is not defined");var n=this.getRotation();return(0,c.h)(void 0!==n,"The view rotation is not defined"),(0,d.p8)(t,r,n,e)}},{key:"getMaxResolution",value:function(){return this.maxResolution_}},{key:"getMinResolution",value:function(){return this.minResolution_}},{key:"getMaxZoom",value:function(){return this.getZoomForResolution(this.minResolution_)}},{key:"setMaxZoom",value:function(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}},{key:"getMinZoom",value:function(){return this.getZoomForResolution(this.maxResolution_)}},{key:"setMinZoom",value:function(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}},{key:"setConstrainResolution",value:function(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolution",value:function(){return this.get(o.Z.RESOLUTION)}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getResolutionForExtent",value:function(e,t){return this.getResolutionForExtentInternal((0,s.dY)(e,this.getProjection()),t)}},{key:"getResolutionForExtentInternal",value:function(e,t){t=t||this.getViewportSizeMinusPadding_();var r=(0,d.dz)(e)/t[0],n=(0,d.Cr)(e)/t[1];return Math.max(r,n)}},{key:"getResolutionForValueFunction",value:function(e){e=e||2;var t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,n=Math.log(t/r)/Math.log(e);return function(r){return t/Math.pow(e,r*n)}}},{key:"getRotation",value:function(){return this.get(o.Z.ROTATION)}},{key:"getValueForResolutionFunction",value:function(e){var t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/t;return function(e){return Math.log(r/e)/t/i}}},{key:"getViewportSizeMinusPadding_",value:function(e){var t=this.getViewportSize_(e),r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}},{key:"getState",value:function(){var e=this.getProjection(),t=this.getResolution(),r=this.getRotation(),n=this.getCenterInternal(),i=this.padding_;if(i){var o=this.getViewportSizeMinusPadding_();n=O(n,this.getViewportSize_(),[o[0]/2+i[3],o[1]/2+i[0]],t,r)}return{center:n.slice(0),projection:void 0!==e?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}},{key:"getViewStateAndExtent",value:function(){return{viewState:this.getState(),extent:this.calculateExtent()}}},{key:"getZoom",value:function(){var e,t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e}},{key:"getZoomForResolution",value:function(e){var t,r,n=this.minZoom_||0;if(this.resolutions_){var i=(0,y.h7)(this.resolutions_,e,1);n=i,t=this.resolutions_[i],r=i==this.resolutions_.length-1?2:t/this.resolutions_[i+1]}else t=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(t/e)/Math.log(r)}},{key:"getResolutionForZoom",value:function(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var t=(0,f.uZ)(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,(0,f.uZ)(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}},{key:"fit",value:function(e,t){var r;if((0,c.h)(Array.isArray(e)||"function"==typeof e.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){(0,c.h)(!(0,d.xb)(e),"Cannot fit empty extent provided as `geometry`");var n=(0,s.dY)(e,this.getProjection());r=(0,b.oJ)(n)}else if("Circle"===e.getType()){var i=(0,s.dY)(e.getExtent(),this.getProjection());(r=(0,b.oJ)(i)).rotate(this.getRotation(),(0,d.qg)(i))}else{var o=(0,s.Cs)();r=o?e.clone().transform(o,this.getProjection()):e}this.fitInternal(r,t)}},{key:"rotatedExtentForGeometry",value:function(e){for(var t=this.getRotation(),r=Math.cos(t),n=Math.sin(-t),i=e.getFlatCoordinates(),o=e.getStride(),a=1/0,s=1/0,l=-1/0,u=-1/0,c=0,f=i.length;c<f;c+=o){var h=i[c]*r-i[c+1]*n,p=i[c]*n+i[c+1]*r;a=Math.min(a,h),s=Math.min(s,p),l=Math.max(l,h),u=Math.max(u,p)}return[a,s,l,u]}},{key:"fitInternal",value:function(e,t){var r=(t=t||{}).size;r||(r=this.getViewportSizeMinusPadding_());var n,i=void 0!==t.padding?t.padding:[0,0,0,0],o=void 0!==t.nearest&&t.nearest;n=void 0!==t.minResolution?t.minResolution:void 0!==t.maxZoom?this.getResolutionForZoom(t.maxZoom):0;var a=this.rotatedExtentForGeometry(e),s=this.getResolutionForExtentInternal(a,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);s=isNaN(s)?n:Math.max(s,n),s=this.getConstrainedResolution(s,o?0:1);var u=this.getRotation(),c=Math.sin(u),f=Math.cos(u),h=(0,d.qg)(a);h[0]+=(i[1]-i[3])/2*s,h[1]+=(i[0]-i[2])/2*s;var p=h[0]*f-h[1]*c,y=h[1]*f+h[0]*c,g=this.getConstrainedCenter([p,y],s),m=t.callback?t.callback:l.Zn;void 0!==t.duration?this.animateInternal({resolution:s,center:g,duration:t.duration,easing:t.easing},m):(this.targetResolution_=s,this.targetCenter_=g,this.applyTargetState_(!1,!0),C(m,!0))}},{key:"centerOn",value:function(e,t,r){this.centerOnInternal((0,s.Vs)(e,this.getProjection()),t,r)}},{key:"centerOnInternal",value:function(e,t,r){this.setCenterInternal(O(e,t,r,this.getResolution(),this.getRotation()))}},{key:"calculateCenterShift",value:function(e,t,r,n){var i,o=this.padding_;if(o&&e){var a=this.getViewportSizeMinusPadding_(-r),s=O(e,n,[a[0]/2+o[3],a[1]/2+o[0]],t,r);i=[e[0]-s[0],e[1]-s[1]]}return i}},{key:"isDef",value:function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}},{key:"adjustCenter",value:function(e){var t=(0,s.lO)(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}},{key:"adjustCenterInternal",value:function(e){var t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}},{key:"adjustResolution",value:function(e,t){t=t&&(0,s.Vs)(t,this.getProjection()),this.adjustResolutionInternal(e,t)}},{key:"adjustResolutionInternal",value:function(e,t){var r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*e,0,n,r);t&&(this.targetCenter_=this.calculateCenterZoom(i,t)),this.targetResolution_*=e,this.applyTargetState_()}},{key:"adjustZoom",value:function(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}},{key:"adjustRotation",value:function(e,t){t&&(t=(0,s.Vs)(t,this.getProjection())),this.adjustRotationInternal(e,t)}},{key:"adjustRotationInternal",value:function(e,t){var r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(n,t)),this.targetRotation_+=e,this.applyTargetState_()}},{key:"setCenter",value:function(e){this.setCenterInternal(e?(0,s.Vs)(e,this.getProjection()):e)}},{key:"setCenterInternal",value:function(e){this.targetCenter_=e,this.applyTargetState_()}},{key:"setHint",value:function(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}},{key:"setResolution",value:function(e){this.targetResolution_=e,this.applyTargetState_()}},{key:"setRotation",value:function(e){this.targetRotation_=e,this.applyTargetState_()}},{key:"setZoom",value:function(e){this.setResolution(this.getResolutionForZoom(e))}},{key:"applyTargetState_",value:function(e,t){var r=this.getAnimating()||this.getInteracting()||t,n=this.constraints_.rotation(this.targetRotation_,r),i=this.getViewportSize_(n),a=this.constraints_.resolution(this.targetResolution_,0,i,r),s=this.constraints_.center(this.targetCenter_,a,i,r,this.calculateCenterShift(this.targetCenter_,a,n,i));this.get(o.Z.ROTATION)!==n&&this.set(o.Z.ROTATION,n),this.get(o.Z.RESOLUTION)!==a&&(this.set(o.Z.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),s&&this.get(o.Z.CENTER)&&(0,u.fS)(this.get(o.Z.CENTER),s)||this.set(o.Z.CENTER,s),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}},{key:"resolveConstraints",value:function(e,t,r){e=void 0!==e?e:200;var n=t||0,i=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,n,o),s=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,i,o));if(0===e&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=i,this.targetCenter_=s,void this.applyTargetState_();r=r||(0===e?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===i&&this.getCenterInternal()&&(0,u.fS)(this.getCenterInternal(),s)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:i,center:s,resolution:a,duration:e,easing:A.easeOut,anchor:r}))}},{key:"beginInteraction",value:function(){this.resolveConstraints(0),this.setHint(i.Z.INTERACTING,1)}},{key:"endInteraction",value:function(e,t,r){r=r&&(0,s.Vs)(r,this.getProjection()),this.endInteractionInternal(e,t,r)}},{key:"endInteractionInternal",value:function(e,t,r){this.getInteracting()&&(this.setHint(i.Z.INTERACTING,-1),this.resolveConstraints(e,t,r))}},{key:"getConstrainedCenter",value:function(e,t){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}},{key:"getConstrainedZoom",value:function(e,t){var r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}},{key:"getConstrainedResolution",value:function(e,t){t=t||0;var r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}],r&&E(t.prototype,r),n&&E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),S}(n.Z)},56571:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={ANIMATING:0,INTERACTING:1}},62348:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},11133:(e,t,r)=>{"use strict";function n(e,t,r){var n,o;r=r||i;for(var a=0,s=e.length,l=!1;a<s;)(o=+r(e[n=a+(s-a>>1)],t))<0?a=n+1:(s=n,l=!o);return l?a:~a}function i(e,t){return e>t?1:e<t?-1:0}function o(e,t){return e<t?1:e>t?-1:0}function a(e,t,r){if(e[0]<=t)return 0;var n=e.length;if(t<=e[n-1])return n-1;if("function"==typeof r){for(var i=1;i<n;++i){var o=e[i];if(o===t)return i;if(o<t)return r(t,e[i-1],o)>0?i-1:i}return n-1}if(r>0){for(var a=1;a<n;++a)if(e[a]<t)return a-1;return n-1}if(r<0){for(var s=1;s<n;++s)if(e[s]<=t)return s;return n-1}for(var l=1;l<n;++l){if(e[l]==t)return l;if(e[l]<t)return e[l-1]-t<t-e[l]?l-1:l}return n-1}function s(e,t,r){for(;t<r;){var n=e[t];e[t]=e[r],e[r]=n,++t,--r}}function l(e,t){for(var r=Array.isArray(t)?t:[t],n=r.length,i=0;i<n;i++)e[e.length]=r[i]}function u(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function c(e,t){var r,n=e.length,i=Array(e.length);for(r=0;r<n;r++)i[r]={index:r,value:e[r]};for(i.sort((function(e,r){return t(e.value,r.value)||e.index-r.index})),r=0;r<e.length;r++)e[r]=i[r].value}function f(e,t,r){var n=t||i;return e.every((function(t,i){if(0===i)return!0;var o=n(e[i-1],t);return!(o>0||r&&0===o)}))}r.d(t,{$1:()=>o,FZ:()=>s,XV:()=>c,fS:()=>u,h7:()=>a,j2:()=>i,l7:()=>l,pT:()=>f,ry:()=>n})},97972:(e,t,r)=>{"use strict";function n(e,t){if(!e)throw new Error(t)}r.d(t,{h:()=>n})},22072:(e,t,r)=>{"use strict";r.d(t,{BB:()=>p,XC:()=>a,_2:()=>f,e1:()=>d,mL:()=>c});var n=r(7697),i=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,o=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(e){return"string"==typeof e?e:p(e)}function s(e){var t=document.createElement("div");if(t.style.color=e,""!==t.style.color){document.body.appendChild(t);var r=getComputedStyle(t).color;return document.body.removeChild(t),r}return""}var l,u,c=(l={},u=0,function(e){var t;if(l.hasOwnProperty(e))t=l[e];else{if(u>=1024){var r=0;for(var n in l)3&r++||(delete l[n],--u)}t=function(e){var t,r,n,a,l;if(o.exec(e)&&(e=s(e)),i.exec(e)){var u,c=e.length-1;u=c<=4?1:2;var f=4===c||8===c;t=parseInt(e.substr(1+0*u,u),16),r=parseInt(e.substr(1+1*u,u),16),n=parseInt(e.substr(1+2*u,u),16),a=f?parseInt(e.substr(1+3*u,u),16):255,1==u&&(t=(t<<4)+t,r=(r<<4)+r,n=(n<<4)+n,f&&(a=(a<<4)+a)),l=[t,r,n,a/255]}else if(e.startsWith("rgba("))h(l=e.slice(5,-1).split(",").map(Number));else{if(!e.startsWith("rgb("))throw new Error("Invalid color");(l=e.slice(4,-1).split(",").map(Number)).push(1),h(l)}return l}(e),l[e]=t,++u}return t});function f(e){return Array.isArray(e)?e:c(e)}function h(e){return e[0]=(0,n.uZ)(e[0]+.5|0,0,255),e[1]=(0,n.uZ)(e[1]+.5|0,0,255),e[2]=(0,n.uZ)(e[2]+.5|0,0,255),e[3]=(0,n.uZ)(e[3],0,1),e}function p(e){var t=e[0];t!=(0|t)&&(t=t+.5|0);var r=e[1];r!=(0|r)&&(r=r+.5|0);var n=e[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+t+","+r+","+n+","+(void 0===e[3]?1:Math.round(100*e[3])/100)+")"}function d(e){return o.test(e)&&(e=s(e)),i.test(e)||e.startsWith("rgba(")||e.startsWith("rgb(")}},57446:(e,t,r)=>{"use strict";r.d(t,{y:()=>i});var n=r(22072);function i(e){return Array.isArray(e)?(0,n.BB)(e):e}},19230:(e,t,r)=>{"use strict";r.d(t,{ZK:()=>o,vU:()=>a});var n={info:1,warn:2,error:3,none:4},i=n.info;function o(){var e;i>n.warn||(e=console).warn.apply(e,arguments)}function a(){var e;i>n.error||(e=console).error.apply(e,arguments)}},10725:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(17160),i=r(2115),o=r(89368),a=r(11133),s=r(88199);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,r)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(p,e);var t,r,n,l=f(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),e=e||{},(t=l.call(this,{element:document.createElement("div"),render:e.render,target:e.target})).ulElement_=document.createElement("ul"),t.collapsed_=void 0===e.collapsed||e.collapsed,t.userCollapsed_=t.collapsed_,t.overrideCollapsible_=void 0!==e.collapsible,t.collapsible_=void 0===e.collapsible||e.collapsible,t.collapsible_||(t.collapsed_=!1);var r=void 0!==e.className?e.className:"ol-attribution",n=void 0!==e.tipLabel?e.tipLabel:"Attributions",a=void 0!==e.expandClassName?e.expandClassName:r+"-expand",s=void 0!==e.collapseLabel?e.collapseLabel:"›",u=void 0!==e.collapseClassName?e.collapseClassName:r+"-collapse";"string"==typeof s?(t.collapseLabel_=document.createElement("span"),t.collapseLabel_.textContent=s,t.collapseLabel_.className=u):t.collapseLabel_=s;var c=void 0!==e.label?e.label:"i";"string"==typeof c?(t.label_=document.createElement("span"),t.label_.textContent=c,t.label_.className=a):t.label_=c;var f=t.collapsible_&&!t.collapsed_?t.collapseLabel_:t.label_;t.toggleButton_=document.createElement("button"),t.toggleButton_.setAttribute("type","button"),t.toggleButton_.setAttribute("aria-expanded",String(!t.collapsed_)),t.toggleButton_.title=n,t.toggleButton_.appendChild(f),t.toggleButton_.addEventListener(i.Z.CLICK,t.handleClick_.bind(h(t)),!1);var d=r+" "+o.XV+" "+o.hg+(t.collapsed_&&t.collapsible_?" "+o.hN:"")+(t.collapsible_?"":" ol-uncollapsible"),y=t.element;return y.className=d,y.appendChild(t.toggleButton_),y.appendChild(t.ulElement_),t.renderedAttributions_=[],t.renderedVisible_=!0,t}return t=p,(r=[{key:"collectSourceAttributions_",value:function(e){var t=Array.from(new Set(this.getMap().getAllLayers().flatMap((function(t){return t.getAttributions(e)})))),r=!this.getMap().getAllLayers().some((function(e){return e.getSource()&&!1===e.getSource().getAttributionsCollapsible()}));return this.overrideCollapsible_||this.setCollapsible(r),t}},{key:"updateElement_",value:function(e){if(e){var t=this.collectSourceAttributions_(e),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!(0,a.fS)(t,this.renderedAttributions_)){(0,s.ep)(this.ulElement_);for(var n=0,i=t.length;n<i;++n){var o=document.createElement("li");o.innerHTML=t[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}},{key:"handleClick_",value:function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}},{key:"handleToggle_",value:function(){this.element.classList.toggle(o.hN),this.collapsed_?(0,s.$H)(this.collapseLabel_,this.label_):(0,s.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}},{key:"setCollapsed",value:function(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"render",value:function(e){this.updateElement_(e.frameState)}}])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.Z)},17160:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(40439),i=r(29909),o=r(73826),a=r(34586),s=r(88199);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},c.apply(this,arguments)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(d,e);var t,r,n,l=h(d);function d(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),t=l.call(this);var r=e.element;return!r||e.target||r.style.pointerEvents||(r.style.pointerEvents="auto"),t.element=r||null,t.target_=null,t.map_=null,t.listenerKeys=[],e.render&&(t.render=e.render),e.target&&t.setTarget(e.target),t}return t=d,(r=[{key:"disposeInternal",value:function(){(0,s.ZF)(this.element),c(p(d.prototype),"disposeInternal",this).call(this)}},{key:"getMap",value:function(){return this.map_}},{key:"setMap",value:function(e){this.map_&&(0,s.ZF)(this.element);for(var t=0,r=this.listenerKeys.length;t<r;++t)(0,a.bN)(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==o.Zn&&this.listenerKeys.push((0,a.oL)(e,i.Z.POSTRENDER,this.render,this)),e.render())}},{key:"render",value:function(e){}},{key:"setTarget",value:function(e){this.target_="string"==typeof e?document.getElementById(e):e}}])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),d}(n.Z)},33172:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(17160),i=r(2115),o=r(89368),a=r(66646);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,r)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(h,e);var t,r,n,s=c(h);function h(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),e=e||{},t=s.call(this,{element:document.createElement("div"),render:e.render,target:e.target});var r=void 0!==e.className?e.className:"ol-rotate",n=void 0!==e.label?e.label:"⇧",a=void 0!==e.compassClassName?e.compassClassName:"ol-compass";t.label_=null,"string"==typeof n?(t.label_=document.createElement("span"),t.label_.className=a,t.label_.textContent=n):(t.label_=n,t.label_.classList.add(a));var l=e.tipLabel?e.tipLabel:"Reset rotation",u=document.createElement("button");u.className=r+"-reset",u.setAttribute("type","button"),u.title=l,u.appendChild(t.label_),u.addEventListener(i.Z.CLICK,t.handleClick_.bind(f(t)),!1);var c=r+" "+o.XV+" "+o.hg,p=t.element;return p.className=c,p.appendChild(u),t.callResetNorth_=e.resetNorth?e.resetNorth:void 0,t.duration_=void 0!==e.duration?e.duration:250,t.autoHide_=void 0===e.autoHide||e.autoHide,t.rotation_=void 0,t.autoHide_&&t.element.classList.add(o.oj),t}return t=h,(r=[{key:"handleClick_",value:function(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}},{key:"resetNorth_",value:function(){var e=this.getMap().getView();if(e){var t=e.getRotation();void 0!==t&&(this.duration_>0&&t%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:a.easeOut}):e.setRotation(0))}}},{key:"render",value:function(e){var t=e.frameState;if(t){var r=t.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var i=this.element.classList.contains(o.oj);i||0!==r?i&&0!==r&&this.element.classList.remove(o.oj):this.element.classList.add(o.oj)}this.label_.style.transform=n}this.rotation_=r}}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(n.Z)},87853:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(17160),i=r(89368),o=r(27811);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var f="units",h=[1,2,5],p=25.4/.28;const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,r,n,a=u(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),e=e||{};var r=document.createElement("div");r.style.pointerEvents="none",(t=a.call(this,{element:r,render:e.render,target:e.target})).on,t.once,t.un;var n=void 0!==e.className?e.className:e.bar?"ol-scale-bar":"ol-scale-line";return t.innerElement_=document.createElement("div"),t.innerElement_.className=n+"-inner",t.element.className=n+" "+i.XV,t.element.appendChild(t.innerElement_),t.viewState_=null,t.minWidth_=void 0!==e.minWidth?e.minWidth:64,t.maxWidth_=e.maxWidth,t.renderedVisible_=!1,t.renderedWidth_=void 0,t.renderedHTML_="",t.addChangeListener(f,t.handleUnitsChanged_),t.setUnits(e.units||"metric"),t.scaleBar_=e.bar||!1,t.scaleBarSteps_=e.steps||4,t.scaleBarText_=e.text||!1,t.dpi_=e.dpi||void 0,t}return t=c,(r=[{key:"getUnits",value:function(){return this.get(f)}},{key:"handleUnitsChanged_",value:function(){this.updateElement_()}},{key:"setUnits",value:function(e){this.set(f,e)}},{key:"setDpi",value:function(e){this.dpi_=e}},{key:"updateElement_",value:function(){var e=this.viewState_;if(e){var t=e.center,r=e.projection,n=this.getUnits(),i="degrees"==n?"degrees":"m",a=(0,o._Q)(r,e.resolution,t,i),s=this.minWidth_*(this.dpi_||p)/p,l=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||p)/p:void 0,u=s*a,c="";if("degrees"==n){var f=o.Wm.degrees;(u*=f)<f/60?(c="″",a*=3600):u<f?(c="′",a*=60):c="°"}else if("imperial"==n)u<.9144?(c="in",a/=.0254):u<1609.344?(c="ft",a/=.3048):(c="mi",a/=1609.344);else if("nautical"==n)a/=1852,c="NM";else if("metric"==n)u<.001?(c="μm",a*=1e6):u<1?(c="mm",a*=1e3):u<1e3?c="m":(c="km",a/=1e3);else{if("us"!=n)throw new Error("Invalid units");u<.9144?(c="in",a*=39.37):u<1609.344?(c="ft",a/=.30480061):(c="mi",a/=1609.3472)}for(var d,y,g,m,_,v,A=3*Math.floor(Math.log(s*a)/Math.log(10));;){g=Math.floor(A/3);var b=Math.pow(10,g);if(d=h[(A%3+3)%3]*b,y=Math.round(d/a),isNaN(y))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==l&&y>=l){d=m,y=_,g=v;break}if(y>=s)break;m=d,_=y,v=g,++A}var w=this.scaleBar_?this.createScaleBar(y,d,c):d.toFixed(g<0?-g:0)+" "+c;this.renderedHTML_!=w&&(this.innerElement_.innerHTML=w,this.renderedHTML_=w),this.renderedWidth_!=y&&(this.innerElement_.style.width=y+"px",this.renderedWidth_=y),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}},{key:"createScaleBar",value:function(e,t,r){for(var n=this.getScaleForResolution(),i=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),o=this.scaleBarSteps_,a=e/o,s=[this.createMarker("absolute")],l=0;l<o;++l){var u=l%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";s.push("<div><div "+'class="ol-scale-singlebar '.concat(u,'" ')+'style="width: '.concat(a,'px;"')+"></div>"+this.createMarker("relative")+(l%2==0||2===o?this.createStepText(l,e,!1,t,r):"")+"</div>")}return s.push(this.createStepText(o,e,!0,t,r)),(this.scaleBarText_?'<div class="ol-scale-text" style="width: '.concat(e,'px;">')+i+"</div>":"")+s.join("")}},{key:"createMarker",value:function(e){var t="absolute"===e?3:-10;return'<div class="ol-scale-step-marker" '+'style="position: '.concat(e,"; top: ").concat(t,'px;"')+"></div>"}},{key:"createStepText",value:function(e,t,r,n,i){var o=(0===e?0:Math.round(n/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+i),a=0===e?-3:t/this.scaleBarSteps_*-1,s=0===e?0:t/this.scaleBarSteps_*2;return'<div class="ol-scale-step-text" style="'+"margin-left: ".concat(a,"px;")+"text-align: ".concat(0===e?"left":"center",";")+"min-width: ".concat(s,"px;")+"left: ".concat(r?t+"px":"unset",";")+'">'+o+"</div>"}},{key:"getScaleForResolution",value:function(){return(0,o._Q)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||p)}},{key:"render",value:function(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Z)},94432:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(17160),i=r(2115),o=r(89368),a=r(66646);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,r)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(h,e);var t,r,n,s=c(h);function h(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),e=e||{},t=s.call(this,{element:document.createElement("div"),target:e.target});var r=void 0!==e.className?e.className:"ol-zoom",n=void 0!==e.delta?e.delta:1,a=void 0!==e.zoomInClassName?e.zoomInClassName:r+"-in",l=void 0!==e.zoomOutClassName?e.zoomOutClassName:r+"-out",u=void 0!==e.zoomInLabel?e.zoomInLabel:"+",c=void 0!==e.zoomOutLabel?e.zoomOutLabel:"–",p=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",d=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",y=document.createElement("button");y.className=a,y.setAttribute("type","button"),y.title=p,y.appendChild("string"==typeof u?document.createTextNode(u):u),y.addEventListener(i.Z.CLICK,t.handleClick_.bind(f(t),n),!1);var g=document.createElement("button");g.className=l,g.setAttribute("type","button"),g.title=d,g.appendChild("string"==typeof c?document.createTextNode(c):c),g.addEventListener(i.Z.CLICK,t.handleClick_.bind(f(t),-n),!1);var m=r+" "+o.XV+" "+o.hg,_=t.element;return _.className=m,_.appendChild(y),_.appendChild(g),t.duration_=void 0!==e.duration?e.duration:250,t}return t=h,(r=[{key:"handleClick_",value:function(e,t){t.preventDefault(),this.zoomByDelta_(e)}},{key:"zoomByDelta_",value:function(e){var t=this.getMap().getView();if(t){var r=t.getZoom();if(void 0!==r){var n=t.getConstrainedZoom(r+e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:n,duration:this.duration_,easing:a.easeOut})):t.setZoom(n)}}}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(n.Z)},86206:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(17160),i=r(2115),o=r(69613),a=r(89368),s=r(7697),l=r(66646),u=r(34586),c=r(28513);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},p.apply(this,arguments)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,r)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var _=0,v=1;const A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(A,e);var t,r,n,f=y(A);function A(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),e=e||{},(t=f.call(this,{target:e.target,element:document.createElement("div"),render:e.render})).dragListenerKeys_=[],t.currentResolution_=void 0,t.direction_=_,t.dragging_,t.heightLimit_=0,t.widthLimit_=0,t.startX_,t.startY_,t.thumbSize_=null,t.sliderInitialized_=!1,t.duration_=void 0!==e.duration?e.duration:200;var r=void 0!==e.className?e.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=r+"-thumb "+a.XV;var s=t.element;return s.className=r+" "+a.XV+" "+a.hg,s.appendChild(n),s.addEventListener(o.Z.POINTERDOWN,t.handleDraggerStart_.bind(g(t)),!1),s.addEventListener(o.Z.POINTERMOVE,t.handleDraggerDrag_.bind(g(t)),!1),s.addEventListener(o.Z.POINTERUP,t.handleDraggerEnd_.bind(g(t)),!1),s.addEventListener(i.Z.CLICK,t.handleContainerClick_.bind(g(t)),!1),n.addEventListener(i.Z.CLICK,c.UW,!1),t}return t=A,(r=[{key:"setMap",value:function(e){p(m(A.prototype),"setMap",this).call(this,e),e&&e.render()}},{key:"initSlider_",value:function(){var e=this.element,t=e.offsetWidth,r=e.offsetHeight;if(0===t&&0===r)return this.sliderInitialized_=!1;var n=getComputedStyle(e);t-=parseFloat(n.paddingRight)+parseFloat(n.paddingLeft),r-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom);var i=e.firstElementChild,o=getComputedStyle(i),a=i.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),s=i.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[a,s],t>r?(this.direction_=v,this.widthLimit_=t-a):(this.direction_=_,this.heightLimit_=r-s),this.sliderInitialized_=!0}},{key:"handleContainerClick_",value:function(e){var t=this.getMap().getView(),r=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(r),i=t.getConstrainedZoom(t.getZoomForResolution(n));t.animateInternal({zoom:i,duration:this.duration_,easing:l.easeOut})}},{key:"handleDraggerStart_",value:function(e){if(!this.dragging_&&e.target===this.element.firstElementChild){var t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var r=this.handleDraggerDrag_,n=this.handleDraggerEnd_,i=this.getMap().getOwnerDocument();this.dragListenerKeys_.push((0,u.oL)(i,o.Z.POINTERMOVE,r,this),(0,u.oL)(i,o.Z.POINTERUP,n,this))}}}},{key:"handleDraggerDrag_",value:function(e){if(this.dragging_){var t=e.clientX-this.startX_,r=e.clientY-this.startY_,n=this.getRelativePosition_(t,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}}},{key:"handleDraggerEnd_",value:function(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(u.bN),this.dragListenerKeys_.length=0)}},{key:"setThumbPosition_",value:function(e){var t=this.getPositionForResolution_(e),r=this.element.firstElementChild;this.direction_==v?r.style.left=this.widthLimit_*t+"px":r.style.top=this.heightLimit_*t+"px"}},{key:"getRelativePosition_",value:function(e,t){var r;return r=this.direction_===v?e/this.widthLimit_:t/this.heightLimit_,(0,s.uZ)(r,0,1)}},{key:"getResolutionForPosition_",value:function(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}},{key:"getPositionForResolution_",value:function(e){var t=this.getMap().getView().getValueForResolutionFunction();return(0,s.uZ)(1-t(e),0,1)}},{key:"render",value:function(e){if(e.frameState&&(this.sliderInitialized_||this.initSlider_())){var t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}}])&&h(t.prototype,r),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),A}(n.Z)},60691:(e,t,r)=>{"use strict";r.d(t,{c:()=>s});var n=r(10725),i=r(45004),o=r(33172),a=r(94432);function s(e){e=e||{};var t=new i.Z;return(void 0===e.zoom||e.zoom)&&t.push(new a.Z(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&t.push(new o.Z(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&t.push(new n.Z(e.attributionOptions)),t}},36707:(e,t,r)=>{"use strict";r.d(t,{Bs:()=>m,Cf:()=>A,Ed:()=>s,Fj:()=>u,I8:()=>c,IH:()=>a,TE:()=>g,U1:()=>p,V7:()=>_,WU:()=>f,bA:()=>d,bI:()=>y,fS:()=>h,jk:()=>b,oL:()=>l,yZ:()=>v});var n=r(36181),i=r(7697),o=r(68536);function a(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function s(e,t){var r=t.getRadius(),n=t.getCenter(),i=n[0],o=n[1],a=e[0]-i,s=e[1]-o;0===a&&0===s&&(a=1);var l=Math.sqrt(a*a+s*s);return[i+r*a/l,o+r*s/l]}function l(e,t){var r,n,i=e[0],o=e[1],a=t[0],s=t[1],l=a[0],u=a[1],c=s[0],f=s[1],h=c-l,p=f-u,d=0===h&&0===p?0:(h*(i-l)+p*(o-u))/(h*h+p*p||0);return d<=0?(r=l,n=u):d>=1?(r=c,n=f):(r=l+d*h,n=u+d*p),[r,n]}function u(e){return function(t){return v(t,e)}}function c(e,t,r){var n=(0,i.$W)(t+180,360)-180,a=Math.abs(3600*n),s=r||0,l=Math.floor(a/3600),u=Math.floor((a-3600*l)/60),c=(0,i.FH)(a-3600*l-60*u,s);c>=60&&(c=0,u+=1),u>=60&&(u=0,l+=1);var f=l+"°";return 0===u&&0===c||(f+=" "+(0,o.v)(u,2)+"′"),0!==c&&(f+=" "+(0,o.v)(c,2,s)+"″"),0!==n&&(f+=" "+e.charAt(n<0?1:0)),f}function f(e,t,r){return e?t.replace("{x}",e[0].toFixed(r)).replace("{y}",e[1].toFixed(r)):""}function h(e,t){for(var r=!0,n=e.length-1;n>=0;--n)if(e[n]!=t[n]){r=!1;break}return r}function p(e,t){var r=Math.cos(t),n=Math.sin(t),i=e[0]*r-e[1]*n,o=e[1]*r+e[0]*n;return e[0]=i,e[1]=o,e}function d(e,t){return e[0]*=t,e[1]*=t,e}function y(e,t){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function g(e,t){return Math.sqrt(y(e,t))}function m(e,t){return y(e,l(e,t))}function _(e,t){return e?c("NS",e[1],t)+" "+c("EW",e[0],t):""}function v(e,t){return f(e,"{x}, {y}",t)}function A(e,t){if(t.canWrapX()){var r=(0,n.dz)(t.getExtent()),i=b(e,t,r);i&&(e[0]-=i*r)}return e}function b(e,t,r){var i=t.getExtent(),o=0;return t.canWrapX()&&(e[0]<i[0]||e[0]>i[2])&&(r=r||(0,n.dz)(i),o=Math.floor((e[0]-i[0])/r)),o}},89368:(e,t,r)=>{"use strict";r.d(t,{$A:()=>i,Qi:()=>a,XV:()=>o,hN:()=>l,hg:()=>s,oj:()=>n,p:()=>f});var n="ol-hidden",i="ol-selectable",o="ol-unselectable",a="ol-unsupported",s="ol-control",l="ol-collapsed",u=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),c=["style","variant","weight","size","lineHeight","family"],f=function(e){var t=e.match(u);if(!t)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=c.length;n<i;++n){var o=t[n+1];void 0!==o&&(r[c[n]]=o)}return r.families=r.family.split(/,\s?/),r}},88199:(e,t,r)=>{"use strict";r.d(t,{$H:()=>l,E4:()=>i,Pb:()=>s,ZF:()=>u,ep:()=>c,hF:()=>f,iO:()=>a,jy:()=>o});var n=r(45907);function i(e,t,r,i){var o;return o=r&&r.length?r.shift():n.Id?new OffscreenCanvas(e||300,t||300):document.createElement("canvas"),e&&(o.width=e),t&&(o.height=t),o.getContext("2d",i)}function o(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function a(e){var t=e.offsetWidth,r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function s(e){var t=e.offsetHeight,r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function l(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function u(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function c(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function f(e,t){for(var r=e.childNodes,n=0;;++n){var i=r[n],o=t[n];if(!i&&!o)break;i!==o&&(i?o?e.insertBefore(o,i):(e.removeChild(i),--n):e.appendChild(o))}}},66646:(e,t,r)=>{"use strict";function n(e){return Math.pow(e,3)}function i(e){return 1-n(1-e)}function o(e){return 3*e*e-2*e*e*e}function a(e){return e}function s(e){return e<.5?o(2*e):1-o(2*(e-.5))}r.r(t),r.d(t,{easeIn:()=>n,easeOut:()=>i,inAndOut:()=>o,linear:()=>a,upAndDown:()=>s})},34586:(e,t,r)=>{"use strict";r.d(t,{Vx:()=>o,bN:()=>a,oL:()=>i});var n=r(83482);function i(e,t,r,n,i){if(n&&n!==e&&(r=r.bind(n)),i){var o=r;r=function(){e.removeEventListener(t,r),o.apply(this,arguments)}}var a={target:e,type:t,listener:r};return e.addEventListener(t,r),a}function o(e,t,r,n){return i(e,t,r,n,!0)}function a(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),(0,n.Z)(e))}},28513:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e){e.stopPropagation()}r.d(t,{UW:()=>o,ZP:()=>a});const a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}var t,r,n;return t=e,(r=[{key:"preventDefault",value:function(){this.defaultPrevented=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},2115:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},27167:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(31706),i=r(28513),o=r(73826),a=r(83482);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,s=c(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this)).eventTarget_=e,t.pendingRemovals_=null,t.dispatching_=null,t.listeners_=null,t}return t=f,(r=[{key:"addEventListener",value:function(e,t){if(e&&t){var r=this.listeners_||(this.listeners_={}),n=r[e]||(r[e]=[]);n.includes(t)||n.push(t)}}},{key:"dispatchEvent",value:function(e){var t="string"==typeof e,r=t?e:e.type,n=this.listeners_&&this.listeners_[r];if(n){var a=t?new i.ZP(e):e;a.target||(a.target=this.eventTarget_||this);var s,l=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});r in l||(l[r]=0,u[r]=0),++l[r];for(var c=0,f=n.length;c<f;++c)if(!1===(s="handleEvent"in n[c]?n[c].handleEvent(a):n[c].call(this,a))||a.propagationStopped){s=!1;break}if(0==--l[r]){var h=u[r];for(delete u[r];h--;)this.removeEventListener(r,o.Zn);delete l[r]}return s}}},{key:"disposeInternal",value:function(){this.listeners_&&(0,a.Z)(this.listeners_)}},{key:"getListeners",value:function(e){return this.listeners_&&this.listeners_[e]||void 0}},{key:"hasListener",value:function(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}},{key:"removeEventListener",value:function(e,t){var r=this.listeners_&&this.listeners_[e];if(r){var n=r.indexOf(t);-1!==n&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[n]=o.Zn,++this.pendingRemovals_[e]):(r.splice(n,1),0===r.length&&delete this.listeners_[e]))}}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},49995:(e,t,r)=>{"use strict";r.d(t,{$6:()=>s,Bx:()=>h,Fi:()=>y,HY:()=>I,Kf:()=>m,Ko:()=>l,MJ:()=>g,OK:()=>_,QC:()=>A,QL:()=>x,TN:()=>E,T_:()=>c,V4:()=>p,Xp:()=>C,a5:()=>b,aj:()=>u,ji:()=>S,rM:()=>v,v8:()=>d,vY:()=>w,yZ:()=>f});var n=r(30378),i=r(73826),o=r(45907),a=r(97972);function s(e){var t=arguments;return function(e){for(var r=!0,n=0,i=t.length;n<i&&(r=r&&t[n](e));++n);return r}}var l=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},u=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},c=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)},f=function(e){return!e.map.getTargetElement().hasAttribute("tabindex")||c(e)},h=i.uX,p=function(e){return e.type==n.Z.CLICK},d=function(e){var t=e.originalEvent;return 0==t.button&&!(o.G$&&o.tK&&t.ctrlKey)},y=i.Dv,g=function(e){return"pointermove"==e.type},m=function(e){return e.type==n.Z.SINGLECLICK},_=function(e){return e.type==n.Z.DBLCLICK},v=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},A=function(e){var t=e.originalEvent;return!t.altKey&&(o.tK?t.metaKey:t.ctrlKey)&&!t.shiftKey},b=function(e){var t=e.originalEvent;return o.tK?t.metaKey:t.ctrlKey},w=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},E=function(e){var t=e.originalEvent,r=t.target.tagName;return"INPUT"!==r&&"SELECT"!==r&&"TEXTAREA"!==r&&!t.target.isContentEditable},x=function(e){var t=e.originalEvent;return(0,a.h)(void 0!==t,"mapBrowserEvent must originate from a pointer event"),"mouse"==t.pointerType},I=function(e){var t=e.originalEvent;return(0,a.h)(void 0!==t,"mapBrowserEvent must originate from a pointer event"),"touch"===t.pointerType},S=function(e){var t=e.originalEvent;return(0,a.h)(void 0!==t,"mapBrowserEvent must originate from a pointer event"),"pen"===t.pointerType},C=function(e){var t=e.originalEvent;return(0,a.h)(void 0!==t,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&0===t.button}},36181:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>q,Cr:()=>R,EO:()=>U,Ed:()=>B,GN:()=>_,H6:()=>I,H9:()=>Q,HK:()=>m,I7:()=>G,MV:()=>V,Ne:()=>z,T9:()=>y,Wj:()=>w,Xv:()=>j,YN:()=>g,ap:()=>L,b8:()=>c,bg:()=>S,d9:()=>l,dY:()=>k,dz:()=>F,f3:()=>s,fS:()=>v,g0:()=>T,hC:()=>C,hI:()=>a,iW:()=>A,jE:()=>h,kK:()=>N,l7:()=>b,lJ:()=>d,p8:()=>M,pX:()=>p,qP:()=>E,qf:()=>u,qg:()=>O,r4:()=>f,rL:()=>D,w$:()=>P,xb:()=>Z});var n=r(83587);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){for(var t=d(),r=0,n=e.length;r<n;++r)w(t,e[r]);return t}function s(e,t,r){return r?(r[0]=e[0]-t,r[1]=e[1]-t,r[2]=e[2]+t,r[3]=e[3]+t,r):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]}function l(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function u(e,t,r){var n,i;return(n=t<e[0]?e[0]-t:e[2]<t?t-e[2]:0)*n+(i=r<e[1]?e[1]-r:e[3]<r?r-e[3]:0)*i}function c(e,t){return h(e,t[0],t[1])}function f(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function h(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function p(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],s=t[0],l=t[1],u=n.Z.UNKNOWN;return s<r?u|=n.Z.LEFT:s>o&&(u|=n.Z.RIGHT),l<i?u|=n.Z.BELOW:l>a&&(u|=n.Z.ABOVE),u===n.Z.UNKNOWN&&(u=n.Z.INTERSECTING),u}function d(){return[1/0,1/0,-1/0,-1/0]}function y(e,t,r,n,i){return i?(i[0]=e,i[1]=t,i[2]=r,i[3]=n,i):[e,t,r,n]}function g(e){return y(1/0,1/0,-1/0,-1/0,e)}function m(e,t){var r=e[0],n=e[1];return y(r,n,r,n,t)}function _(e,t,r,n,i){return E(g(i),e,t,r,n)}function v(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function A(e,t,r){return Math.abs(e[0]-t[0])<r&&Math.abs(e[2]-t[2])<r&&Math.abs(e[1]-t[1])<r&&Math.abs(e[3]-t[3])<r}function b(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function w(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function E(e,t,r,n,i){for(;r<n;r+=i)x(e,t[r],t[r+1]);return e}function x(e,t,r){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],r)}function I(e,t){var r;return(r=t(C(e)))||(r=t(P(e)))||(r=t(j(e)))?r:(r=t(D(e)))||!1}function S(e){var t=0;return Z(e)||(t=F(e)*R(e)),t}function C(e){return[e[0],e[1]]}function P(e){return[e[2],e[1]]}function O(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function T(e,t){var r;if("bottom-left"===t)r=C(e);else if("bottom-right"===t)r=P(e);else if("top-left"===t)r=D(e);else{if("top-right"!==t)throw new Error("Invalid corner");r=j(e)}return r}function M(e,t,r,n,o){var a=i(k(e,t,r,n),8),s=a[0],l=a[1],u=a[2],c=a[3],f=a[4],h=a[5],p=a[6],d=a[7];return y(Math.min(s,u,f,p),Math.min(l,c,h,d),Math.max(s,u,f,p),Math.max(l,c,h,d),o)}function k(e,t,r,n){var i=t*n[0]/2,o=t*n[1]/2,a=Math.cos(r),s=Math.sin(r),l=i*a,u=i*s,c=o*a,f=o*s,h=e[0],p=e[1];return[h-l+f,p-u-c,h-l-f,p-u+c,h+l-f,p+u+c,h+l+f,p+u-c,h-l+f,p-u-c]}function R(e){return e[3]-e[1]}function B(e,t,r){var n=r||[1/0,1/0,-1/0,-1/0];return N(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):g(n),n}function L(e){return[e[2]-e[0],e[3]-e[1]]}function D(e){return[e[0],e[3]]}function j(e){return[e[2],e[3]]}function F(e){return e[2]-e[0]}function N(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Z(e){return e[2]<e[0]||e[3]<e[1]}function U(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function Q(e,t){var r=(e[2]-e[0])/2*(t-1),n=(e[3]-e[1])/2*(t-1);e[0]-=r,e[2]+=r,e[1]-=n,e[3]+=n}function G(e,t,r){var i=!1,o=p(e,t),a=p(e,r);if(o===n.Z.INTERSECTING||a===n.Z.INTERSECTING)i=!0;else{var s,l,u=e[0],c=e[1],f=e[2],h=e[3],d=t[0],y=t[1],g=r[0],m=r[1],_=(m-y)/(g-d);a&n.Z.ABOVE&&!(o&n.Z.ABOVE)&&(i=(s=g-(m-h)/_)>=u&&s<=f),i||!(a&n.Z.RIGHT)||o&n.Z.RIGHT||(i=(l=m-(g-f)*_)>=c&&l<=h),i||!(a&n.Z.BELOW)||o&n.Z.BELOW||(i=(s=g-(m-c)/_)>=u&&s<=f),i||!(a&n.Z.LEFT)||o&n.Z.LEFT||(i=(l=m-(g-u)*_)>=c&&l<=h)}return i}function z(e,t,r,n){if(Z(e))return g(r);var i=[];if(n>1)for(var o=e[2]-e[0],a=e[3]-e[1],s=0;s<n;++s)i.push(e[0]+o*s/n,e[1],e[2],e[1]+a*s/n,e[2]-o*s/n,e[3],e[0],e[3]-a*s/n);else i=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(i,i,2);for(var l=[],u=[],c=0,f=i.length;c<f;c+=2)l.push(i[c]),u.push(i[c+1]);return function(e,t,r){return y(Math.min.apply(null,e),Math.min.apply(null,t),Math.max.apply(null,e),Math.max.apply(null,t),r)}(l,u,r)}function q(e,t){var r=t.getExtent(),n=O(e);if(t.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var i=F(r),o=Math.floor((n[0]-r[0])/i)*i;e[0]-=o,e[2]-=o}return e}function V(e,t){if(t.canWrapX()){var r=t.getExtent();if(!isFinite(e[0])||!isFinite(e[2]))return[[r[0],e[1],r[2],e[3]]];q(e,t);var n=F(r);if(F(e)>n)return[[r[0],e[1],r[2],e[3]]];if(e[0]<r[0])return[[e[0]+n,e[1],r[2],e[3]],[r[0],e[1],e[2],e[3]]];if(e[2]>r[2])return[[e[0],e[1],r[2],e[3]],[r[0],e[1],e[2]-n,e[3]]]}return[e]}},83587:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},49902:(e,t,r)=>{"use strict";r.d(t,{Be:()=>a,Nn:()=>s,ov:()=>o});var n=r(73826),i=!1;function o(e,t,r,n,o,a,s){var l=new XMLHttpRequest;l.open("GET","function"==typeof e?e(r,n,o):e,!0),"arraybuffer"==t.getType()&&(l.responseType="arraybuffer"),l.withCredentials=i,l.onload=function(e){if(!l.status||l.status>=200&&l.status<300){var n,i=t.getType();"json"==i||"text"==i?n=l.responseText:"xml"==i?(n=l.responseXML)||(n=(new DOMParser).parseFromString(l.responseText,"application/xml")):"arraybuffer"==i&&(n=l.response),n?a(t.readFeatures(n,{extent:r,featureProjection:o}),t.readProjection(n)):s()}else s()},l.onerror=s,l.send()}function a(e,t){return function(r,i,a,s,l){var u=this;o(e,t,r,i,a,(function(e,t){u.addFeatures(e),void 0!==s&&s(e)}),l||n.Zn)}}function s(e){i=e}},88658:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>s,fI:()=>l,lj:()=>u});var n=r(20594),i=r(27811);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}const s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}var t,r,o;return t=e,(r=[{key:"getReadOptions",value:function(e,t){if(t){var r=t.dataProjection?(0,i.U2)(t.dataProjection):this.readProjection(e);t.extent&&r&&"tile-pixels"===r.getUnits()&&(r=(0,i.U2)(r)).setWorldExtent(t.extent),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}},{key:"adaptOptions",value:function(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}},{key:"getType",value:function(){return(0,n.O3)()}},{key:"readFeature",value:function(e,t){return(0,n.O3)()}},{key:"readFeatures",value:function(e,t){return(0,n.O3)()}},{key:"readGeometry",value:function(e,t){return(0,n.O3)()}},{key:"readProjection",value:function(e){return(0,n.O3)()}},{key:"writeFeature",value:function(e,t){return(0,n.O3)()}},{key:"writeFeatures",value:function(e,t){return(0,n.O3)()}},{key:"writeGeometry",value:function(e,t){return(0,n.O3)()}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t,r){var n,o=r?(0,i.U2)(r.featureProjection):null,a=r?(0,i.U2)(r.dataProjection):null;if(n=o&&a&&!(0,i.OP)(o,a)?(t?e.clone():e).transform(t?o:a,t?a:o):e,t&&r&&void 0!==r.decimals){var s=Math.pow(10,r.decimals);n===e&&(n=e.clone()),n.applyTransform((function(e){for(var t=0,r=e.length;t<r;++t)e[t]=Math.round(e[t]*s)/s;return e}))}return n}function u(e,t){var r=t?(0,i.U2)(t.featureProjection):null,n=t?(0,i.U2)(t.dataProjection):null;return r&&n&&!(0,i.OP)(r,n)?(0,i.$A)(e,n,r):e}},17275:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(75934).Z;n.prototype.writeFeatures,n.prototype.writeFeaturesNode;const i=n},96903:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(47813),i=r(42188),o=r(36181),a=r(27811),s=r(88658),l=r(4546);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d=n.J+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",y={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(g,e);var t,r,u,p=h(g);function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),e=e||{},(t=p.call(this,e)).FEATURE_COLLECTION_PARSERS[n.J].featureMember=(0,i.Ei)(t.readFeaturesInternal),t.schemaLocation=e.schemaLocation?e.schemaLocation:d,t}return t=g,(r=[{key:"readFlatCoordinates",value:function(e,t){var r=(0,i.Ve)(e,!1).replace(/^\s*|\s*$/g,""),n=t[0].srsName,o="enu";if(n){var s=(0,a.U2)(n);s&&(o=s.getAxisOrientation())}for(var l=r.trim().split(/\s+/),u=[],c=0,f=l.length;c<f;c++){var h=l[c].split(/,+/),p=parseFloat(h[0]),d=parseFloat(h[1]),y=3===h.length?parseFloat(h[2]):0;"en"===o.substr(0,2)?u.push(p,d,y):u.push(d,p,y)}return u}},{key:"readBox",value:function(e,t){var r=(0,i.O)([null],this.BOX_PARSERS_,e,t,this);return(0,o.T9)(r[1][0],r[1][1],r[1][3],r[1][4])}},{key:"innerBoundaryIsParser",value:function(e,t){var r=(0,i.O)(void 0,this.RING_PARSERS,e,t,this);r&&t[t.length-1].push(r)}},{key:"outerBoundaryIsParser",value:function(e,t){var r=(0,i.O)(void 0,this.RING_PARSERS,e,t,this);r&&(t[t.length-1][0]=r)}},{key:"GEOMETRY_NODE_FACTORY_",value:function(e,t,r){var n=t[t.length-1],o=n.multiSurface,a=n.surface,s=n.multiCurve;return Array.isArray(e)?r="Envelope":"MultiPolygon"===(r=e.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===a?r="Surface":"MultiLineString"===r&&!0===s&&(r="MultiCurve"),(0,i.c)("http://www.opengis.net/gml",r)}},{key:"writeFeatureElement",value:function(e,t,r){var n=t.getId();n&&e.setAttribute("fid",n);var o=r[r.length-1],a=o.featureNS,s=t.getGeometryName();o.serializers||(o.serializers={},o.serializers[a]={});var u=[],c=[];if(t.hasProperties()){var f=t.getProperties();for(var h in f){var p=f[h];null!==p&&(u.push(h),c.push(p),h==s||"function"==typeof p.getSimplifiedGeometry?h in o.serializers[a]||(o.serializers[a][h]=(0,i.A4)(this.writeGeometryElement,this)):h in o.serializers[a]||(o.serializers[a][h]=(0,i.A4)(l.bZ)))}}var d=Object.assign({},o);d.node=e,(0,i.ZL)(d,o.serializers,(0,i.G3)(void 0,a),c,r,u)}},{key:"writeCurveOrLineString",value:function(e,t,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==e.nodeName&&n&&e.setAttribute("srsName",n),"LineString"===e.nodeName||"LineStringSegment"===e.nodeName){var o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,t,r)}else if("Curve"===e.nodeName){var a=(0,i.c)(e.namespaceURI,"segments");e.appendChild(a),this.writeCurveSegments_(a,t,r)}}},{key:"writeLineStringOrCurveMember",value:function(e,t,r){var n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,r))}},{key:"writeMultiCurveOrLineString",value:function(e,t,r){var n=r[r.length-1],o=n.hasZ,a=n.srsName,s=n.curve;a&&e.setAttribute("srsName",a);var l=t.getLineStrings();(0,i.ZL)({node:e,hasZ:o,srsName:a,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}},{key:"writeGeometryElement",value:function(e,t,r){var n,o=r[r.length-1],a=Object.assign({},o);a.node=e,n=Array.isArray(t)?(0,s.lj)(t,o):(0,s.fI)(t,!0,o),(0,i.ZL)(a,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)}},{key:"createCoordinatesNode_",value:function(e){var t=(0,i.c)(e,"coordinates");return t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," "),t}},{key:"writeCoordinates_",value:function(e,t,r){for(var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=t.getCoordinates(),s=a.length,u=new Array(s),c=0;c<s;++c){var f=a[c];u[c]=this.getCoords_(f,o,i)}(0,l.bZ)(e,u.join(" "))}},{key:"writeCurveSegments_",value:function(e,t,r){var n=(0,i.c)(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,r)}},{key:"writeSurfaceOrPolygon",value:function(e,t,r){var n=r[r.length-1],o=n.hasZ,a=n.srsName;if("PolygonPatch"!==e.nodeName&&a&&e.setAttribute("srsName",a),"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName){var s=t.getLinearRings();(0,i.ZL)({node:e,hasZ:o,srsName:a},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,s,r,void 0,this)}else if("Surface"===e.nodeName){var l=(0,i.c)(e.namespaceURI,"patches");e.appendChild(l),this.writeSurfacePatches_(l,t,r)}}},{key:"RING_NODE_FACTORY_",value:function(e,t,r){var n=t[t.length-1],o=n.node,a=n.exteriorWritten;return void 0===a&&(n.exteriorWritten=!0),(0,i.c)(o.namespaceURI,void 0!==a?"innerBoundaryIs":"outerBoundaryIs")}},{key:"writeSurfacePatches_",value:function(e,t,r){var n=(0,i.c)(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r)}},{key:"writeRing",value:function(e,t,r){var n=(0,i.c)(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,r)}},{key:"getCoords_",value:function(e,t,r){var n="enu";t&&(n=(0,a.U2)(t).getAxisOrientation());var i="en"===n.substr(0,2)?e[0]+","+e[1]:e[1]+","+e[0];return r&&(i+=","+(e[2]||0)),i}},{key:"writePoint",value:function(e,t,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&e.setAttribute("srsName",o);var a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a);var s=t.getCoordinates(),u=this.getCoords_(s,o,i);(0,l.bZ)(a,u)}},{key:"writeMultiPoint",value:function(e,t,r){var n=r[r.length-1],o=n.hasZ,a=n.srsName;a&&e.setAttribute("srsName",a);var s=t.getPoints();(0,i.ZL)({node:e,hasZ:o,srsName:a},this.POINTMEMBER_SERIALIZERS,(0,i.G3)("pointMember"),s,r,void 0,this)}},{key:"writePointMember",value:function(e,t,r){var n=(0,i.c)(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,r)}},{key:"writeLinearRing",value:function(e,t,r){var n=r[r.length-1].srsName;n&&e.setAttribute("srsName",n);var i=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(i),this.writeCoordinates_(i,t,r)}},{key:"writeMultiSurfaceOrPolygon",value:function(e,t,r){var n=r[r.length-1],o=n.hasZ,a=n.srsName,s=n.surface;a&&e.setAttribute("srsName",a);var l=t.getPolygons();(0,i.ZL)({node:e,hasZ:o,srsName:a,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}},{key:"writeSurfaceOrPolygonMember",value:function(e,t,r){var n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r))}},{key:"writeEnvelope",value:function(e,t,r){var n=r[r.length-1].srsName;n&&e.setAttribute("srsName",n);var o=[t[0]+" "+t[1],t[2]+" "+t[3]];(0,i.ZL)({node:e},this.ENVELOPE_SERIALIZERS,i.hg,o,r,["lowerCorner","upperCorner"],this)}},{key:"MULTIGEOMETRY_MEMBER_NODE_FACTORY_",value:function(e,t,r){var n=t[t.length-1].node;return(0,i.c)("http://www.opengis.net/gml",y[n.nodeName])}}])&&c(t.prototype,r),u&&c(t,u),Object.defineProperty(t,"prototype",{writable:!1}),g}(n.Z);g.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:(0,i.z)(g.prototype.readFlatCoordinates)}},g.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:g.prototype.innerBoundaryIsParser,outerBoundaryIs:g.prototype.outerBoundaryIsParser}},g.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:(0,i.Ei)(g.prototype.readFlatCoordinates)}},g.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:(0,i.z)(n.Z.prototype.readPoint),MultiPoint:(0,i.z)(n.Z.prototype.readMultiPoint),LineString:(0,i.z)(n.Z.prototype.readLineString),MultiLineString:(0,i.z)(n.Z.prototype.readMultiLineString),LinearRing:(0,i.z)(n.Z.prototype.readLinearRing),Polygon:(0,i.z)(n.Z.prototype.readPolygon),MultiPolygon:(0,i.z)(n.Z.prototype.readMultiPolygon),Box:(0,i.z)(g.prototype.readBox)}},g.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:(0,i.A4)(g.prototype.writeCurveOrLineString),MultiCurve:(0,i.A4)(g.prototype.writeMultiCurveOrLineString),Point:(0,i.A4)(g.prototype.writePoint),MultiPoint:(0,i.A4)(g.prototype.writeMultiPoint),LineString:(0,i.A4)(g.prototype.writeCurveOrLineString),MultiLineString:(0,i.A4)(g.prototype.writeMultiCurveOrLineString),LinearRing:(0,i.A4)(g.prototype.writeLinearRing),Polygon:(0,i.A4)(g.prototype.writeSurfaceOrPolygon),MultiPolygon:(0,i.A4)(g.prototype.writeMultiSurfaceOrPolygon),Surface:(0,i.A4)(g.prototype.writeSurfaceOrPolygon),MultiSurface:(0,i.A4)(g.prototype.writeMultiSurfaceOrPolygon),Envelope:(0,i.A4)(g.prototype.writeEnvelope)}},g.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:(0,i.A4)(g.prototype.writeLineStringOrCurveMember),curveMember:(0,i.A4)(g.prototype.writeLineStringOrCurveMember)}},g.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:(0,i.A4)(g.prototype.writeRing),innerBoundaryIs:(0,i.A4)(g.prototype.writeRing)}},g.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:(0,i.A4)(g.prototype.writePointMember)}},g.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:(0,i.A4)(g.prototype.writeSurfaceOrPolygonMember),polygonMember:(0,i.A4)(g.prototype.writeSurfaceOrPolygonMember)}},g.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:(0,i.A4)(l.bZ),upperCorner:(0,i.A4)(l.bZ)}};const m=g},75934:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(96903),i=r(47813),o=r(38815),a=r(70278),s=r(44133),l=r(92882),u=r(42188),c=r(36181),f=r(11133),h=r(27811),p=r(4546),d=r(88658);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===y(o)?o:String(o)),n)}var i,o}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var A=i.J+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",b={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(y,e);var t,r,n,i=_(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),e=e||{},(t=i.call(this,e)).surface_=void 0!==e.surface&&e.surface,t.curve_=void 0!==e.curve&&e.curve,t.multiCurve_=void 0===e.multiCurve||e.multiCurve,t.multiSurface_=void 0===e.multiSurface||e.multiSurface,t.schemaLocation=e.schemaLocation?e.schemaLocation:A,t.hasZ=void 0!==e.hasZ&&e.hasZ,t}return t=y,(r=[{key:"readMultiCurve",value:function(e,t){var r=(0,u.O)([],this.MULTICURVE_PARSERS,e,t,this);if(r)return new a.Z(r)}},{key:"readFlatCurveRing",value:function(e,t){for(var r=(0,u.O)([],this.MULTICURVE_PARSERS,e,t,this),n=[],i=0,o=r.length;i<o;++i)(0,f.l7)(n,r[i].getFlatCoordinates());return n}},{key:"readMultiSurface",value:function(e,t){var r=(0,u.O)([],this.MULTISURFACE_PARSERS,e,t,this);if(r)return new s.Z(r)}},{key:"curveMemberParser",value:function(e,t){(0,u.T3)(this.CURVEMEMBER_PARSERS,e,t,this)}},{key:"surfaceMemberParser",value:function(e,t){(0,u.T3)(this.SURFACEMEMBER_PARSERS,e,t,this)}},{key:"readPatch",value:function(e,t){return(0,u.O)([null],this.PATCHES_PARSERS,e,t,this)}},{key:"readSegment",value:function(e,t){return(0,u.O)([],this.SEGMENTS_PARSERS,e,t,this)}},{key:"readPolygonPatch",value:function(e,t){return(0,u.O)([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this)}},{key:"readLineStringSegment",value:function(e,t){return(0,u.O)([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}},{key:"interiorParser",value:function(e,t){var r=(0,u.O)(void 0,this.RING_PARSERS,e,t,this);r&&t[t.length-1].push(r)}},{key:"exteriorParser",value:function(e,t){var r=(0,u.O)(void 0,this.RING_PARSERS,e,t,this);r&&(t[t.length-1][0]=r)}},{key:"readSurface",value:function(e,t){var r=(0,u.O)([null],this.SURFACE_PARSERS,e,t,this);if(r&&r[0]){var n,i,o=r[0],a=[o.length];for(n=1,i=r.length;n<i;++n)(0,f.l7)(o,r[n]),a.push(o.length);return new l.ZP(o,"XYZ",a)}}},{key:"readCurve",value:function(e,t){var r=(0,u.O)([null],this.CURVE_PARSERS,e,t,this);if(r)return new o.Z(r,"XYZ")}},{key:"readEnvelope",value:function(e,t){var r=(0,u.O)([null],this.ENVELOPE_PARSERS,e,t,this);return(0,c.T9)(r[1][0],r[1][1],r[2][0],r[2][1])}},{key:"readFlatPos",value:function(e,t){for(var r,n=(0,u.Ve)(e,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];r=i.exec(n);)o.push(parseFloat(r[1])),n=n.substr(r[0].length);if(""===n){var a,s,l=t[0].srsName,c="enu";if(l&&(c=(0,h.U2)(l).getAxisOrientation()),"neu"===c)for(a=0,s=o.length;a<s;a+=3){var f=o[a],p=o[a+1];o[a]=p,o[a+1]=f}var d=o.length;if(2==d&&o.push(0),0!==d)return o}}},{key:"readFlatPosList",value:function(e,t){var r=(0,u.Ve)(e,!1).replace(/^\s*|\s*$/g,""),n=t[0],i=n.srsName,o=n.srsDimension,a="enu";i&&(a=(0,h.U2)(i).getAxisOrientation());var s,l,c,f=r.split(/\s+/),d=2;e.getAttribute("srsDimension")?d=(0,p._E)(e.getAttribute("srsDimension")):e.getAttribute("dimension")?d=(0,p._E)(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?d=(0,p._E)(e.parentNode.getAttribute("srsDimension")):o&&(d=(0,p._E)(o));for(var y=[],g=0,m=f.length;g<m;g+=d)s=parseFloat(f[g]),l=parseFloat(f[g+1]),c=3===d?parseFloat(f[g+2]):0,"en"===a.substr(0,2)?y.push(s,l,c):y.push(l,s,c);return y}},{key:"writePos_",value:function(e,t,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";e.setAttribute("srsDimension",o);var a=n.srsName,s="enu";a&&(s=(0,h.U2)(a).getAxisOrientation());var l,u=t.getCoordinates();l="en"===s.substr(0,2)?u[0]+" "+u[1]:u[1]+" "+u[0],i&&(l+=" "+(u[2]||0)),(0,p.bZ)(e,l)}},{key:"getCoords_",value:function(e,t,r){var n="enu";t&&(n=(0,h.U2)(t).getAxisOrientation());var i="en"===n.substr(0,2)?e[0]+" "+e[1]:e[1]+" "+e[0];return r&&(i+=" "+(e[2]||0)),i}},{key:"writePosList_",value:function(e,t,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";e.setAttribute("srsDimension",o);for(var a,s=n.srsName,l=t.getCoordinates(),u=l.length,c=new Array(u),f=0;f<u;++f)a=l[f],c[f]=this.getCoords_(a,s,i);(0,p.bZ)(e,c.join(" "))}},{key:"writePoint",value:function(e,t,r){var n=r[r.length-1].srsName;n&&e.setAttribute("srsName",n);var i=(0,u.c)(e.namespaceURI,"pos");e.appendChild(i),this.writePos_(i,t,r)}},{key:"writeEnvelope",value:function(e,t,r){var n=r[r.length-1].srsName;n&&e.setAttribute("srsName",n);var i=[t[0]+" "+t[1],t[2]+" "+t[3]];(0,u.ZL)({node:e},this.ENVELOPE_SERIALIZERS,u.hg,i,r,["lowerCorner","upperCorner"],this)}},{key:"writeLinearRing",value:function(e,t,r){var n=r[r.length-1].srsName;n&&e.setAttribute("srsName",n);var i=(0,u.c)(e.namespaceURI,"posList");e.appendChild(i),this.writePosList_(i,t,r)}},{key:"RING_NODE_FACTORY_",value:function(e,t,r){var n=t[t.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),(0,u.c)(i.namespaceURI,void 0!==o?"interior":"exterior")}},{key:"writeSurfaceOrPolygon",value:function(e,t,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==e.nodeName&&o&&e.setAttribute("srsName",o),"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName){var a=t.getLinearRings();(0,u.ZL)({node:e,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===e.nodeName){var s=(0,u.c)(e.namespaceURI,"patches");e.appendChild(s),this.writeSurfacePatches_(s,t,r)}}},{key:"writeCurveOrLineString",value:function(e,t,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==e.nodeName&&n&&e.setAttribute("srsName",n),"LineString"===e.nodeName||"LineStringSegment"===e.nodeName){var i=(0,u.c)(e.namespaceURI,"posList");e.appendChild(i),this.writePosList_(i,t,r)}else if("Curve"===e.nodeName){var o=(0,u.c)(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,t,r)}}},{key:"writeMultiSurfaceOrPolygon",value:function(e,t,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&e.setAttribute("srsName",o);var s=t.getPolygons();(0,u.ZL)({node:e,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)}},{key:"writeMultiPoint",value:function(e,t,r){var n=r[r.length-1],i=n.srsName,o=n.hasZ;i&&e.setAttribute("srsName",i);var a=t.getPoints();(0,u.ZL)({node:e,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS,(0,u.G3)("pointMember"),a,r,void 0,this)}},{key:"writeMultiCurveOrLineString",value:function(e,t,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&e.setAttribute("srsName",o);var s=t.getLineStrings();(0,u.ZL)({node:e,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)}},{key:"writeRing",value:function(e,t,r){var n=(0,u.c)(e.namespaceURI,"LinearRing");e.appendChild(n),this.writeLinearRing(n,t,r)}},{key:"writeSurfaceOrPolygonMember",value:function(e,t,r){var n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r))}},{key:"writePointMember",value:function(e,t,r){var n=(0,u.c)(e.namespaceURI,"Point");e.appendChild(n),this.writePoint(n,t,r)}},{key:"writeLineStringOrCurveMember",value:function(e,t,r){var n=this.GEOMETRY_NODE_FACTORY_(t,r);n&&(e.appendChild(n),this.writeCurveOrLineString(n,t,r))}},{key:"writeSurfacePatches_",value:function(e,t,r){var n=(0,u.c)(e.namespaceURI,"PolygonPatch");e.appendChild(n),this.writeSurfaceOrPolygon(n,t,r)}},{key:"writeCurveSegments_",value:function(e,t,r){var n=(0,u.c)(e.namespaceURI,"LineStringSegment");e.appendChild(n),this.writeCurveOrLineString(n,t,r)}},{key:"writeGeometryElement",value:function(e,t,r){var n,i=r[r.length-1],o=Object.assign({},i);o.node=e,n=Array.isArray(t)?(0,d.lj)(t,i):(0,d.fI)(t,!0,i),(0,u.ZL)(o,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)}},{key:"writeFeatureElement",value:function(e,t,r){var n=t.getId();n&&e.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=t.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=[],l=[];if(t.hasProperties()){var c=t.getProperties();for(var f in c){var h=c[f];null!==h&&(s.push(f),l.push(h),f==a||"function"==typeof h.getSimplifiedGeometry?f in i.serializers[o]||(i.serializers[o][f]=(0,u.A4)(this.writeGeometryElement,this)):f in i.serializers[o]||(i.serializers[o][f]=(0,u.A4)(p.bZ)))}}var d=Object.assign({},i);d.node=e,(0,u.ZL)(d,i.serializers,(0,u.G3)(void 0,o),l,r,s)}},{key:"writeFeatureMembers_",value:function(e,t,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a={};a[o]={},a[o][i]=(0,u.A4)(this.writeFeatureElement,this);var s=Object.assign({},n);s.node=e,(0,u.ZL)(s,a,(0,u.G3)(i,o),t,r)}},{key:"MULTIGEOMETRY_MEMBER_NODE_FACTORY_",value:function(e,t,r){var n=t[t.length-1].node;return(0,u.c)(this.namespace,b[n.nodeName])}},{key:"GEOMETRY_NODE_FACTORY_",value:function(e,t,r){var n=t[t.length-1],i=n.multiSurface,o=n.surface,a=n.curve,s=n.multiCurve;return Array.isArray(e)?r="Envelope":"MultiPolygon"===(r=e.getType())&&!0===i?r="MultiSurface":"Polygon"===r&&!0===o?r="Surface":"LineString"===r&&!0===a?r="Curve":"MultiLineString"===r&&!0===s&&(r="MultiCurve"),(0,u.c)(this.namespace,r)}},{key:"writeGeometryNode",value:function(e,t){t=this.adaptOptions(t);var r=(0,u.c)(this.namespace,"geom"),n={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return t&&Object.assign(n,t),this.writeGeometryElement(r,e,[n]),r}},{key:"writeFeaturesNode",value:function(e,t){t=this.adaptOptions(t);var r=(0,u.c)(this.namespace,"featureMembers");r.setAttributeNS(u.fJ,"xsi:schemaLocation",this.schemaLocation);var n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return t&&Object.assign(n,t),this.writeFeatureMembers_(r,e,[n]),r}}])&&g(t.prototype,r),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),y}(i.Z);w.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:(0,u.z)(w.prototype.readFlatPos),posList:(0,u.z)(w.prototype.readFlatPosList),coordinates:(0,u.z)(n.Z.prototype.readFlatCoordinates)}},w.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:w.prototype.interiorParser,exterior:w.prototype.exteriorParser}},w.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:(0,u.z)(i.Z.prototype.readPoint),MultiPoint:(0,u.z)(i.Z.prototype.readMultiPoint),LineString:(0,u.z)(i.Z.prototype.readLineString),MultiLineString:(0,u.z)(i.Z.prototype.readMultiLineString),LinearRing:(0,u.z)(i.Z.prototype.readLinearRing),Polygon:(0,u.z)(i.Z.prototype.readPolygon),MultiPolygon:(0,u.z)(i.Z.prototype.readMultiPolygon),Surface:(0,u.z)(w.prototype.readSurface),MultiSurface:(0,u.z)(w.prototype.readMultiSurface),Curve:(0,u.z)(w.prototype.readCurve),MultiCurve:(0,u.z)(w.prototype.readMultiCurve),Envelope:(0,u.z)(w.prototype.readEnvelope)}},w.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:(0,u.Ei)(w.prototype.curveMemberParser),curveMembers:(0,u.Ei)(w.prototype.curveMemberParser)}},w.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:(0,u.Ei)(w.prototype.surfaceMemberParser),surfaceMembers:(0,u.Ei)(w.prototype.surfaceMemberParser)}},w.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:(0,u.Ei)(i.Z.prototype.readLineString),Curve:(0,u.Ei)(w.prototype.readCurve)}},w.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:(0,u.Ei)(i.Z.prototype.readPolygon),Surface:(0,u.Ei)(w.prototype.readSurface)}},w.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:(0,u.z)(w.prototype.readPatch)}},w.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:(0,u.z)(w.prototype.readSegment)}},w.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:(0,u.Ei)(w.prototype.readFlatPosList),upperCorner:(0,u.Ei)(w.prototype.readFlatPosList)}},w.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:(0,u.z)(w.prototype.readPolygonPatch)}},w.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:(0,u.pc)(w.prototype.readLineStringSegment)}},i.Z.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:(0,u.z)(i.Z.prototype.readFlatLinearRing),Ring:(0,u.z)(w.prototype.readFlatCurveRing)}},w.prototype.writeFeatures,w.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:(0,u.A4)(w.prototype.writeRing),interior:(0,u.A4)(w.prototype.writeRing)}},w.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:(0,u.A4)(p.bZ),upperCorner:(0,u.A4)(p.bZ)}},w.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:(0,u.A4)(w.prototype.writeSurfaceOrPolygonMember),polygonMember:(0,u.A4)(w.prototype.writeSurfaceOrPolygonMember)}},w.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:(0,u.A4)(w.prototype.writePointMember)}},w.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:(0,u.A4)(w.prototype.writeLineStringOrCurveMember),curveMember:(0,u.A4)(w.prototype.writeLineStringOrCurveMember)}},w.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:(0,u.A4)(w.prototype.writeCurveOrLineString),MultiCurve:(0,u.A4)(w.prototype.writeMultiCurveOrLineString),Point:(0,u.A4)(w.prototype.writePoint),MultiPoint:(0,u.A4)(w.prototype.writeMultiPoint),LineString:(0,u.A4)(w.prototype.writeCurveOrLineString),MultiLineString:(0,u.A4)(w.prototype.writeMultiCurveOrLineString),LinearRing:(0,u.A4)(w.prototype.writeLinearRing),Polygon:(0,u.A4)(w.prototype.writeSurfaceOrPolygon),MultiPolygon:(0,u.A4)(w.prototype.writeMultiSurfaceOrPolygon),Surface:(0,u.A4)(w.prototype.writeSurfaceOrPolygon),MultiSurface:(0,u.A4)(w.prototype.writeMultiSurfaceOrPolygon),Envelope:(0,u.A4)(w.prototype.writeEnvelope)}};const E=w},22386:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(96903),i=r(75934),o=r(47813),a=r(42188),s=r(4546);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},c.apply(this,arguments)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(o,e);var t,r,n,i=h(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this,e)).schemaLocation=e.schemaLocation?e.schemaLocation:t.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",t}return t=o,(r=[{key:"writeGeometryElement",value:function(e,t,r){var n=r[r.length-1];r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},n),c(p(o.prototype),"writeGeometryElement",this).call(this,e,t,r)}}])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.Z);d.prototype.namespace="http://www.opengis.net/gml/3.2",d.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:(0,a.z)(i.Z.prototype.readFlatPos),posList:(0,a.z)(i.Z.prototype.readFlatPosList),coordinates:(0,a.z)(n.Z.prototype.readFlatCoordinates)}},d.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:i.Z.prototype.interiorParser,exterior:i.Z.prototype.exteriorParser}},d.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:(0,a.z)(o.Z.prototype.readPoint),MultiPoint:(0,a.z)(o.Z.prototype.readMultiPoint),LineString:(0,a.z)(o.Z.prototype.readLineString),MultiLineString:(0,a.z)(o.Z.prototype.readMultiLineString),LinearRing:(0,a.z)(o.Z.prototype.readLinearRing),Polygon:(0,a.z)(o.Z.prototype.readPolygon),MultiPolygon:(0,a.z)(o.Z.prototype.readMultiPolygon),Surface:(0,a.z)(d.prototype.readSurface),MultiSurface:(0,a.z)(i.Z.prototype.readMultiSurface),Curve:(0,a.z)(d.prototype.readCurve),MultiCurve:(0,a.z)(i.Z.prototype.readMultiCurve),Envelope:(0,a.z)(d.prototype.readEnvelope)}},d.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:(0,a.Ei)(i.Z.prototype.curveMemberParser),curveMembers:(0,a.Ei)(i.Z.prototype.curveMemberParser)}},d.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:(0,a.Ei)(i.Z.prototype.surfaceMemberParser),surfaceMembers:(0,a.Ei)(i.Z.prototype.surfaceMemberParser)}},d.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:(0,a.Ei)(o.Z.prototype.readLineString),Curve:(0,a.Ei)(i.Z.prototype.readCurve)}},d.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:(0,a.Ei)(o.Z.prototype.readPolygon),Surface:(0,a.Ei)(i.Z.prototype.readSurface)}},d.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:(0,a.z)(i.Z.prototype.readPatch)}},d.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:(0,a.z)(i.Z.prototype.readSegment)}},d.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:(0,a.Ei)(i.Z.prototype.readFlatPosList),upperCorner:(0,a.Ei)(i.Z.prototype.readFlatPosList)}},d.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:(0,a.z)(i.Z.prototype.readPolygonPatch)}},d.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:(0,a.pc)(i.Z.prototype.readLineStringSegment)}},d.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:(0,a.Ei)(o.Z.prototype.pointMemberParser),pointMembers:(0,a.Ei)(o.Z.prototype.pointMemberParser)}},d.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:(0,a.Ei)(o.Z.prototype.lineStringMemberParser),lineStringMembers:(0,a.Ei)(o.Z.prototype.lineStringMemberParser)}},d.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:(0,a.Ei)(o.Z.prototype.polygonMemberParser),polygonMembers:(0,a.Ei)(o.Z.prototype.polygonMemberParser)}},d.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:(0,a.Ei)(o.Z.prototype.readFlatCoordinatesFromNode)}},d.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:(0,a.Ei)(o.Z.prototype.readLineString)}},d.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:(0,a.Ei)(o.Z.prototype.readPolygon)}},d.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:(0,a.z)(o.Z.prototype.readFlatLinearRing),Ring:(0,a.z)(d.prototype.readFlatCurveRing)}},d.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:(0,a.A4)(i.Z.prototype.writeRing),interior:(0,a.A4)(i.Z.prototype.writeRing)}},d.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:(0,a.A4)(s.bZ),upperCorner:(0,a.A4)(s.bZ)}},d.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:(0,a.A4)(i.Z.prototype.writeSurfaceOrPolygonMember),polygonMember:(0,a.A4)(i.Z.prototype.writeSurfaceOrPolygonMember)}},d.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:(0,a.A4)(i.Z.prototype.writePointMember)}},d.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:(0,a.A4)(i.Z.prototype.writeLineStringOrCurveMember),curveMember:(0,a.A4)(i.Z.prototype.writeLineStringOrCurveMember)}},d.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:(0,a.A4)(i.Z.prototype.writeCurveOrLineString),MultiCurve:(0,a.A4)(i.Z.prototype.writeMultiCurveOrLineString),Point:(0,a.A4)(d.prototype.writePoint),MultiPoint:(0,a.A4)(i.Z.prototype.writeMultiPoint),LineString:(0,a.A4)(i.Z.prototype.writeCurveOrLineString),MultiLineString:(0,a.A4)(i.Z.prototype.writeMultiCurveOrLineString),LinearRing:(0,a.A4)(i.Z.prototype.writeLinearRing),Polygon:(0,a.A4)(i.Z.prototype.writeSurfaceOrPolygon),MultiPolygon:(0,a.A4)(i.Z.prototype.writeMultiSurfaceOrPolygon),Surface:(0,a.A4)(i.Z.prototype.writeSurfaceOrPolygon),MultiSurface:(0,a.A4)(i.Z.prototype.writeMultiSurfaceOrPolygon),Envelope:(0,a.A4)(i.Z.prototype.writeEnvelope)}};const y=d},47813:(e,t,r)=>{"use strict";r.d(t,{J:()=>w,Z:()=>I});var n=r(44993),i=r(21815),o=r(38815),a=r(85302),s=r(70278),l=r(48843),u=r(44133),c=r(61900),f=r(92882),h=r(26264),p=r(11133),d=r(42188),y=r(27811),g=r(88658);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===m(o)?o:String(o)),n)}var i,o}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var w="http://www.opengis.net/gml",E=/^\s*$/,x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(b,e);var t,r,h,m=A(b);function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),e=e||{},(t=m.call(this)).featureType=e.featureType,t.featureNS=e.featureNS,t.srsName=e.srsName,t.schemaLocation="",t.FEATURE_COLLECTION_PARSERS={},t.FEATURE_COLLECTION_PARSERS[t.namespace]={featureMember:(0,d.Ei)(t.readFeaturesInternal),featureMembers:(0,d.z)(t.readFeaturesInternal)},t.supportedMediaTypes=["application/gml+xml"],t}return t=b,(r=[{key:"readFeaturesInternal",value:function(e,t){var r=e.localName,n=null;if("FeatureCollection"==r)n=(0,d.O)([],this.FEATURE_COLLECTION_PARSERS,e,t,this);else if("featureMembers"==r||"featureMember"==r||"member"==r){var i=t[0],o=i.featureType,a=i.featureNS;if(!o&&e.childNodes){o=[],a={};for(var s=0,l=e.childNodes.length;s<l;++s){var u=e.childNodes[s];if(1===u.nodeType){var c=u.nodeName.split(":").pop();if(!o.includes(c)){var f="",h=0,p=u.namespaceURI;for(var y in a){if(a[y]===p){f=y;break}++h}f||(a[f="p"+h]=p),o.push(f+":"+c)}}}"featureMember"!=r&&(i.featureType=o,i.featureNS=a)}if("string"==typeof a){var g=a;(a={}).p0=g}var m={},_=Array.isArray(o)?o:[o];for(var v in a){for(var A={},b=0,w=_.length;b<w;++b)(_[b].includes(":")?_[b].split(":")[0]:"p0")===v&&(A[_[b].split(":").pop()]="featureMembers"==r?(0,d.Ei)(this.readFeatureElement,this):(0,d.z)(this.readFeatureElement,this));m[a[v]]=A}n="featureMember"==r||"member"==r?(0,d.O)(void 0,m,e,t):(0,d.O)([],m,e,t)}return null===n&&(n=[]),n}},{key:"readGeometryOrExtent",value:function(e,t){var r=t[0];return r.srsName=e.firstElementChild.getAttribute("srsName"),r.srsDimension=e.firstElementChild.getAttribute("srsDimension"),(0,d.O)(null,this.GEOMETRY_PARSERS,e,t,this)}},{key:"readExtentElement",value:function(e,t){var r=t[0],n=this.readGeometryOrExtent(e,t);return n?(0,g.lj)(n,r):void 0}},{key:"readGeometryElement",value:function(e,t){var r=t[0],n=this.readGeometryOrExtent(e,t);return n?(0,g.fI)(n,!1,r):void 0}},{key:"readFeatureElementInternal",value:function(e,t,r){for(var o,a={},s=e.firstElementChild;s;s=s.nextElementSibling){var l=void 0,u=s.localName;0===s.childNodes.length||1===s.childNodes.length&&(3===s.firstChild.nodeType||4===s.firstChild.nodeType)?(l=(0,d.Ve)(s,!1),E.test(l)&&(l=void 0)):(r&&(l="boundedBy"===u?this.readExtentElement(s,t):this.readGeometryElement(s,t)),l?"boundedBy"!==u&&(o=u):l=this.readFeatureElementInternal(s,t,!1));var c=s.attributes.length;if(c>0&&!(l instanceof i.Z)){l={_content_:l};for(var f=0;f<c;f++)l[s.attributes[f].name]=s.attributes[f].value}a[u]?(a[u]instanceof Array||(a[u]=[a[u]]),a[u].push(l)):a[u]=l}if(!r)return a;var h=new n.Z(a);o&&h.setGeometryName(o);var p=e.getAttribute("fid")||(0,d.As)(e,this.namespace,"id");return p&&h.setId(p),h}},{key:"readFeatureElement",value:function(e,t){return this.readFeatureElementInternal(e,t,!0)}},{key:"readPoint",value:function(e,t){var r=this.readFlatCoordinatesFromNode(e,t);if(r)return new c.Z(r,"XYZ")}},{key:"readMultiPoint",value:function(e,t){var r=(0,d.O)([],this.MULTIPOINT_PARSERS,e,t,this);if(r)return new l.Z(r)}},{key:"readMultiLineString",value:function(e,t){var r=(0,d.O)([],this.MULTILINESTRING_PARSERS,e,t,this);if(r)return new s.Z(r)}},{key:"readMultiPolygon",value:function(e,t){var r=(0,d.O)([],this.MULTIPOLYGON_PARSERS,e,t,this);if(r)return new u.Z(r)}},{key:"pointMemberParser",value:function(e,t){(0,d.T3)(this.POINTMEMBER_PARSERS,e,t,this)}},{key:"lineStringMemberParser",value:function(e,t){(0,d.T3)(this.LINESTRINGMEMBER_PARSERS,e,t,this)}},{key:"polygonMemberParser",value:function(e,t){(0,d.T3)(this.POLYGONMEMBER_PARSERS,e,t,this)}},{key:"readLineString",value:function(e,t){var r=this.readFlatCoordinatesFromNode(e,t);if(r)return new o.Z(r,"XYZ")}},{key:"readFlatLinearRing",value:function(e,t){var r=(0,d.O)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this);if(r)return r}},{key:"readLinearRing",value:function(e,t){var r=this.readFlatCoordinatesFromNode(e,t);if(r)return new a.Z(r,"XYZ")}},{key:"readPolygon",value:function(e,t){var r=(0,d.O)([null],this.FLAT_LINEAR_RINGS_PARSERS,e,t,this);if(r&&r[0]){var n,i,o=r[0],a=[o.length];for(n=1,i=r.length;n<i;++n)(0,p.l7)(o,r[n]),a.push(o.length);return new f.ZP(o,"XYZ",a)}}},{key:"readFlatCoordinatesFromNode",value:function(e,t){return(0,d.O)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,t,this)}},{key:"readGeometryFromNode",value:function(e,t){var r=this.readGeometryElement(e,[this.getReadOptions(e,t||{})]);return r||null}},{key:"readFeaturesFromNode",value:function(e,t){var r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(e,t)),this.readFeaturesInternal(e,[r])||[]}},{key:"readProjectionFromNode",value:function(e){return(0,y.U2)(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))}}])&&_(t.prototype,r),h&&_(t,h),Object.defineProperty(t,"prototype",{writable:!1}),b}(h.Z);x.prototype.namespace=w,x.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},x.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},x.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},x.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:(0,d.Ei)(x.prototype.pointMemberParser),pointMembers:(0,d.Ei)(x.prototype.pointMemberParser)}},x.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:(0,d.Ei)(x.prototype.lineStringMemberParser),lineStringMembers:(0,d.Ei)(x.prototype.lineStringMemberParser)}},x.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:(0,d.Ei)(x.prototype.polygonMemberParser),polygonMembers:(0,d.Ei)(x.prototype.polygonMemberParser)}},x.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:(0,d.Ei)(x.prototype.readFlatCoordinatesFromNode)}},x.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:(0,d.Ei)(x.prototype.readLineString)}},x.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:(0,d.Ei)(x.prototype.readPolygon)}},x.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:(0,d.z)(x.prototype.readFlatLinearRing)}};const I=x},97874:(e,t,r)=>{"use strict";r.d(t,{Z:()=>X});var n=r(44993),i=r(38815),o=r(70278),a=r(61900),s=r(26264),l=r(42188),u=r(27811),c=r(4546),f=r(88658);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===h(o)?o:String(o)),n)}var i,o}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var m=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],_={rte:V,trk:W,wpt:K},v=(0,l.C5)(m,{rte:(0,l.Ei)(V),trk:(0,l.Ei)(W),wpt:(0,l.Ei)(K)}),A=(0,l.C5)(m,{text:(0,l.Pr)(c.s2,"linkText"),type:(0,l.Pr)(c.s2,"linkType")}),b=(0,l.C5)(m,{rte:(0,l.A4)((function(e,t,r){var n=r[0],i=t.getProperties(),o={node:e};o.properties=i;var a=t.getGeometry();if("LineString"==a.getType()){var s=(0,f.fI)(a,!0,n);o.geometryLayout=s.getLayout(),i.rtept=s.getCoordinates()}var u=r[r.length-1].node,c=M[u.namespaceURI],h=(0,l.RA)(i,c);(0,l.ZL)(o,k,l.hg,h,r,c)})),trk:(0,l.A4)((function(e,t,r){var n=r[0],i=t.getProperties(),o={node:e};o.properties=i;var a=t.getGeometry();if("MultiLineString"==a.getType()){var s=(0,f.fI)(a,!0,n);i.trkseg=s.getLineStrings()}var u=r[r.length-1].node,c=B[u.namespaceURI],h=(0,l.RA)(i,c);(0,l.ZL)(o,L,l.hg,h,r,c)})),wpt:(0,l.A4)((function(e,t,r){var n=r[0],i=r[r.length-1];i.properties=t.getProperties();var o=t.getGeometry();if("Point"==o.getType()){var a=(0,f.fI)(o,!0,n);i.geometryLayout=a.getLayout(),Y(e,a.getCoordinates(),r)}}))}),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(o,e);var t,r,n,i=y(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this)).dataProjection=(0,u.U2)("EPSG:4326"),t.readExtensions_=e.readExtensions,t}return t=o,(r=[{key:"handleReadExtensions_",value:function(e){e||(e=[]);for(var t=0,r=e.length;t<r;++t){var n=e[t];if(this.readExtensions_){var i=n.get("extensionsNode_")||null;this.readExtensions_(n,i)}n.set("extensionsNode_",void 0)}}},{key:"readFeatureFromNode",value:function(e,t){if(!m.includes(e.namespaceURI))return null;var r=_[e.localName];if(!r)return null;var n=r(e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_([n]),n):null}},{key:"readFeaturesFromNode",value:function(e,t){if(!m.includes(e.namespaceURI))return[];if("gpx"==e.localName){var r=(0,l.O)([],v,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}},{key:"writeFeaturesNode",value:function(e,t){t=this.adaptOptions(t);var r=(0,l.c)("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",l.fJ),r.setAttributeNS(l.fJ,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),(0,l.ZL)({node:r},b,U,e,[t]),r}}])&&p(t.prototype,r),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(s.Z),E=(0,l.C5)(m,{name:(0,l.Pr)(c.s2),cmt:(0,l.Pr)(c.s2),desc:(0,l.Pr)(c.s2),src:(0,l.Pr)(c.s2),link:z,number:(0,l.Pr)(c.$L),extensions:q,type:(0,l.Pr)(c.s2),rtept:function(e,t){var r=(0,l.O)({},x,e,t);if(r){var n=t[t.length-1];Q(n.flatCoordinates,n.layoutOptions,e,r)}}}),x=(0,l.C5)(m,{ele:(0,l.Pr)(c.fy),time:(0,l.Pr)(c.x7)}),I=(0,l.C5)(m,{name:(0,l.Pr)(c.s2),cmt:(0,l.Pr)(c.s2),desc:(0,l.Pr)(c.s2),src:(0,l.Pr)(c.s2),link:z,number:(0,l.Pr)(c.$L),type:(0,l.Pr)(c.s2),extensions:q,trkseg:function(e,t){var r=t[t.length-1];(0,l.T3)(S,e,t);var n=r.flatCoordinates;r.ends.push(n.length)}}),S=(0,l.C5)(m,{trkpt:function(e,t){var r=(0,l.O)({},C,e,t);if(r){var n=t[t.length-1];Q(n.flatCoordinates,n.layoutOptions,e,r)}}}),C=(0,l.C5)(m,{ele:(0,l.Pr)(c.fy),time:(0,l.Pr)(c.x7)}),P=(0,l.C5)(m,{ele:(0,l.Pr)(c.fy),time:(0,l.Pr)(c.x7),magvar:(0,l.Pr)(c.fy),geoidheight:(0,l.Pr)(c.fy),name:(0,l.Pr)(c.s2),cmt:(0,l.Pr)(c.s2),desc:(0,l.Pr)(c.s2),src:(0,l.Pr)(c.s2),link:z,sym:(0,l.Pr)(c.s2),type:(0,l.Pr)(c.s2),fix:(0,l.Pr)(c.s2),sat:(0,l.Pr)(c.$L),hdop:(0,l.Pr)(c.fy),vdop:(0,l.Pr)(c.fy),pdop:(0,l.Pr)(c.fy),ageofdgpsdata:(0,l.Pr)(c.fy),dgpsid:(0,l.Pr)(c.$L),extensions:q}),O=["text","type"],T=(0,l.C5)(m,{text:(0,l.A4)(c.bZ),type:(0,l.A4)(c.bZ)}),M=(0,l.C5)(m,["name","cmt","desc","src","link","number","type","rtept"]),k=(0,l.C5)(m,{name:(0,l.A4)(c.bZ),cmt:(0,l.A4)(c.bZ),desc:(0,l.A4)(c.bZ),src:(0,l.A4)(c.bZ),link:(0,l.A4)(H),number:(0,l.A4)(c.JD),type:(0,l.A4)(c.bZ),rtept:(0,l.JO)((0,l.A4)(Y))}),R=(0,l.C5)(m,["ele","time"]),B=(0,l.C5)(m,["name","cmt","desc","src","link","number","type","trkseg"]),L=(0,l.C5)(m,{name:(0,l.A4)(c.bZ),cmt:(0,l.A4)(c.bZ),desc:(0,l.A4)(c.bZ),src:(0,l.A4)(c.bZ),link:(0,l.A4)(H),number:(0,l.A4)(c.JD),type:(0,l.A4)(c.bZ),trkseg:(0,l.JO)((0,l.A4)((function(e,t,r){var n={node:e};n.geometryLayout=t.getLayout(),n.properties={},(0,l.ZL)(n,j,D,t.getCoordinates(),r)})))}),D=(0,l.G3)("trkpt"),j=(0,l.C5)(m,{trkpt:(0,l.A4)(Y)}),F=(0,l.C5)(m,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),N=(0,l.C5)(m,{ele:(0,l.A4)(c.f3),time:(0,l.A4)(c.hv),magvar:(0,l.A4)(c.f3),geoidheight:(0,l.A4)(c.f3),name:(0,l.A4)(c.bZ),cmt:(0,l.A4)(c.bZ),desc:(0,l.A4)(c.bZ),src:(0,l.A4)(c.bZ),link:(0,l.A4)(H),sym:(0,l.A4)(c.bZ),type:(0,l.A4)(c.bZ),fix:(0,l.A4)(c.bZ),sat:(0,l.A4)(c.JD),hdop:(0,l.A4)(c.f3),vdop:(0,l.A4)(c.f3),pdop:(0,l.A4)(c.f3),ageofdgpsdata:(0,l.A4)(c.f3),dgpsid:(0,l.A4)(c.JD)}),Z={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function U(e,t,r){var n=e.getGeometry();if(n){var i=Z[n.getType()];if(i){var o=t[t.length-1].node;return(0,l.c)(o.namespaceURI,i)}}}function Q(e,t,r,n){return e.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in n?(e.push(n.ele),delete n.ele,t.hasZ=!0):e.push(0),"time"in n?(e.push(n.time),delete n.time,t.hasM=!0):e.push(0),e}function G(e,t,r){var n="XY",i=2;if(e.hasZ&&e.hasM?(n="XYZM",i=4):e.hasZ?(n="XYZ",i=3):e.hasM&&(n="XYM",i=3),4!==i){for(var o=0,a=t.length/4;o<a;o++)t[o*i]=t[4*o],t[o*i+1]=t[4*o+1],e.hasZ&&(t[o*i+2]=t[4*o+2]),e.hasM&&(t[o*i+2]=t[4*o+3]);if(t.length=t.length/4*i,r)for(var s=0,l=r.length;s<l;s++)r[s]=r[s]/4*i}return n}function z(e,t){var r=t[t.length-1],n=e.getAttribute("href");null!==n&&(r.link=n),(0,l.T3)(A,e,t)}function q(e,t){t[t.length-1].extensionsNode_=e}function V(e,t){var r=t[0],o=(0,l.O)({flatCoordinates:[],layoutOptions:{}},E,e,t);if(o){var a=o.flatCoordinates;delete o.flatCoordinates;var s=o.layoutOptions;delete o.layoutOptions;var u=G(s,a),c=new i.Z(a,u);(0,f.fI)(c,!1,r);var h=new n.Z(c);return h.setProperties(o,!0),h}}function W(e,t){var r=t[0],i=(0,l.O)({flatCoordinates:[],ends:[],layoutOptions:{}},I,e,t);if(i){var a=i.flatCoordinates;delete i.flatCoordinates;var s=i.ends;delete i.ends;var u=i.layoutOptions;delete i.layoutOptions;var c=G(u,a,s),h=new o.Z(a,c,s);(0,f.fI)(h,!1,r);var p=new n.Z(h);return p.setProperties(i,!0),p}}function K(e,t){var r=t[0],i=(0,l.O)({},P,e,t);if(i){var o={},s=Q([],o,e,i),u=G(o,s),c=new a.Z(s,u);(0,f.fI)(c,!1,r);var h=new n.Z(c);return h.setProperties(i,!0),h}}function H(e,t,r){e.setAttribute("href",t);var n=r[r.length-1].properties,i=[n.linkText,n.linkType];(0,l.ZL)({node:e},T,l.hg,i,r,O)}function Y(e,t,r){var n=r[r.length-1],i=n.node.namespaceURI,o=n.properties;switch(e.setAttributeNS(null,"lat",String(t[1])),e.setAttributeNS(null,"lon",String(t[0])),n.geometryLayout){case"XYZM":0!==t[3]&&(o.time=t[3]);case"XYZ":0!==t[2]&&(o.ele=t[2]);break;case"XYM":0!==t[2]&&(o.time=t[2])}var a="rtept"==e.nodeName?R[i]:F[i],s=(0,l.RA)(o,a);(0,l.ZL)({node:e,properties:o},N,l.hg,s,r,a)}const X=w},34795:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(44993),i=r(76527),o=r(25794),a=r(38815),s=r(70278),l=r(48843),u=r(44133),c=r(61900),f=r(92882),h=r(27811),p=r(83482),d=r(88658);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===y(o)?o:String(o)),n)}var i,o}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function A(e,t){if(!e)return null;var r;switch(e.type){case"Point":r=function(e){return new c.Z(e.coordinates)}(e);break;case"LineString":r=function(e){return new a.Z(e.coordinates)}(e);break;case"Polygon":r=function(e){return new f.ZP(e.coordinates)}(e);break;case"MultiPoint":r=function(e){return new l.Z(e.coordinates)}(e);break;case"MultiLineString":r=function(e){return new s.Z(e.coordinates)}(e);break;case"MultiPolygon":r=function(e){return new u.Z(e.coordinates)}(e);break;case"GeometryCollection":r=function(e,t){var r=e.geometries.map((function(e){return A(e,t)}));return new i.Z(r)}(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return(0,d.fI)(r,!1,t)}function b(e,t){var r,n=(e=(0,d.fI)(e,!0,t)).getType();switch(n){case"Point":r=function(e,t){return{type:"Point",coordinates:e.getCoordinates()}}(e);break;case"LineString":r=function(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}(e);break;case"Polygon":r=function(e,t){var r;t&&(r=t.rightHanded);return{type:"Polygon",coordinates:e.getCoordinates(r)}}(e,t);break;case"MultiPoint":r=function(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}(e);break;case"MultiLineString":r=function(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}(e);break;case"MultiPolygon":r=function(e,t){var r;t&&(r=t.rightHanded);return{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}(e,t);break;case"GeometryCollection":r=function(e,t){t=Object.assign({},t),delete t.featureProjection;var r=e.getGeometriesArray().map((function(e){return b(e,t)}));return{type:"GeometryCollection",geometries:r}}(e,t);break;case"Circle":r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return r}const w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(a,e);var t,r,i,o=_(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=e||{},(t=o.call(this)).dataProjection=(0,h.U2)(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(t.defaultFeatureProjection=(0,h.U2)(e.featureProjection)),t.geometryName_=e.geometryName,t.extractGeometryName_=e.extractGeometryName,t.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],t}return t=a,(r=[{key:"readFeatureFromObject",value:function(e,t){var r=null,i=A((r="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null}).geometry,t),o=new n.Z;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&o.setGeometryName(r.geometry_name),o.setGeometry(i),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties,!0),o}},{key:"readFeaturesFromObject",value:function(e,t){var r=null;if("FeatureCollection"===e.type){r=[];for(var n=e.features,i=0,o=n.length;i<o;++i)r.push(this.readFeatureFromObject(n[i],t))}else r=[this.readFeatureFromObject(e,t)];return r}},{key:"readGeometryFromObject",value:function(e,t){return A(e,t)}},{key:"readProjectionFromObject",value:function(e){var t,r=e.crs;if(r)if("name"==r.type)t=(0,h.U2)(r.properties.name);else{if("EPSG"!==r.type)throw new Error("Unknown SRS type");t=(0,h.U2)("EPSG:"+r.properties.code)}else t=this.dataProjection;return t}},{key:"writeFeatureObject",value:function(e,t){t=this.adaptOptions(t);var r={type:"Feature",geometry:null,properties:null},n=e.getId();if(void 0!==n&&(r.id=n),!e.hasProperties())return r;var i=e.getProperties(),o=e.getGeometry();return o&&(r.geometry=b(o,t),delete i[e.getGeometryName()]),(0,p.x)(i)||(r.properties=i),r}},{key:"writeFeaturesObject",value:function(e,t){t=this.adaptOptions(t);for(var r=[],n=0,i=e.length;n<i;++n)r.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:r}}},{key:"writeGeometryObject",value:function(e,t){return b(e,this.adaptOptions(t))}}])&&g(t.prototype,r),i&&g(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.Z)},25794:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(88658),i=r(20594);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e){if("string"==typeof e){var t=JSON.parse(e);return t||null}return null!==e?e:null}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,o=l(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o.call(this)}return t=u,(r=[{key:"getType",value:function(){return"json"}},{key:"readFeature",value:function(e,t){return this.readFeatureFromObject(c(e),this.getReadOptions(e,t))}},{key:"readFeatures",value:function(e,t){return this.readFeaturesFromObject(c(e),this.getReadOptions(e,t))}},{key:"readFeatureFromObject",value:function(e,t){return(0,i.O3)()}},{key:"readFeaturesFromObject",value:function(e,t){return(0,i.O3)()}},{key:"readGeometry",value:function(e,t){return this.readGeometryFromObject(c(e),this.getReadOptions(e,t))}},{key:"readGeometryFromObject",value:function(e,t){return(0,i.O3)()}},{key:"readProjection",value:function(e){return this.readProjectionFromObject(c(e))}},{key:"readProjectionFromObject",value:function(e){return(0,i.O3)()}},{key:"writeFeature",value:function(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}},{key:"writeFeatureObject",value:function(e,t){return(0,i.O3)()}},{key:"writeFeatures",value:function(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}},{key:"writeFeaturesObject",value:function(e,t){return(0,i.O3)()}},{key:"writeGeometry",value:function(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}},{key:"writeGeometryObject",value:function(e,t){return(0,i.O3)()}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.ZP)},43950:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>Rt});var n=r(44993),i=r(53969),o=r(76527),a=r(52076),s=r(94162),l=r(38815),u=r(70278),c=r(48843),f=r(44133),h=r(61900),p=r(92882),d=r(17774),y=r(78456),g=r(5460),m=r(26264),_=r(42188),v=r(22072),A=r(11133),b=r(27811),w=r(4546),E=r(7697),x=r(88658);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function S(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==I(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===I(o)?o:String(o)),n)}var i,o}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=M(e);if(t){var i=M(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}var k,R,B,L,D,j,F=["http://www.google.com/kml/ext/2.2"],N=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Z={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},U=(0,_.C5)(N,{ExtendedData:Ne,Region:Ze,MultiGeometry:(0,_.Pr)(Te,"geometry"),LineString:(0,_.Pr)(Ce,"geometry"),LinearRing:(0,_.Pr)(Pe,"geometry"),Point:(0,_.Pr)(Me,"geometry"),Polygon:(0,_.Pr)(Re,"geometry"),Style:(0,_.Pr)(Le),StyleMap:function(e,t){var r=pe.call(this,e,t);if(!r)return;var n=t[t.length-1];if(Array.isArray(r))n.Style=r;else{if("string"!=typeof r)throw new Error("`styleMapValue` has an unknown type");n.styleUrl=r}},address:(0,_.Pr)(w.s2),description:(0,_.Pr)(w.s2),name:(0,_.Pr)(w.s2),open:(0,_.Pr)(w.ud),phoneNumber:(0,_.Pr)(w.s2),styleUrl:(0,_.Pr)(ce),visibility:(0,_.Pr)(w.ud)},(0,_.C5)(F,{MultiTrack:(0,_.Pr)((function(e,t){var r=(0,_.O)([],Ae,e,t);if(!r)return;return new u.Z(r)}),"geometry"),Track:(0,_.Pr)(we,"geometry")})),Q=(0,_.C5)(N,{ExtendedData:Ne,Region:Ze,Link:function(e,t){(0,_.T3)(G,e,t)},address:(0,_.Pr)(w.s2),description:(0,_.Pr)(w.s2),name:(0,_.Pr)(w.s2),open:(0,_.Pr)(w.ud),phoneNumber:(0,_.Pr)(w.s2),visibility:(0,_.Pr)(w.ud)}),G=(0,_.C5)(N,{href:(0,_.Pr)(ue)}),z=(0,_.C5)(N,{Altitude:(0,_.Pr)(w.fy),Longitude:(0,_.Pr)(w.fy),Latitude:(0,_.Pr)(w.fy),Tilt:(0,_.Pr)(w.fy),AltitudeMode:(0,_.Pr)(w.s2),Heading:(0,_.Pr)(w.fy),Roll:(0,_.Pr)(w.fy)}),q=(0,_.C5)(N,{LatLonAltBox:function(e,t){var r=(0,_.O)({},Ge,e,t);if(!r)return;var n=t[t.length-1],i=[parseFloat(r.west),parseFloat(r.south),parseFloat(r.east),parseFloat(r.north)];n.extent=i,n.altitudeMode=r.altitudeMode,n.minAltitude=parseFloat(r.minAltitude),n.maxAltitude=parseFloat(r.maxAltitude)},Lod:function(e,t){var r=(0,_.O)({},ze,e,t);if(!r)return;var n=t[t.length-1];n.minLodPixels=parseFloat(r.minLodPixels),n.maxLodPixels=parseFloat(r.maxLodPixels),n.minFadeExtent=parseFloat(r.minFadeExtent),n.maxFadeExtent=parseFloat(r.maxFadeExtent)}}),V=(0,_.C5)(N,["Document","Placemark"]),W=(0,_.C5)(N,{Document:(0,_.A4)((function(e,t,r){var n={node:e};(0,_.ZL)(n,He,Ye,t,r,void 0,this)})),Placemark:(0,_.A4)(At)}),K=null;var H,Y=null;var X,J=null;var $=null;var ee=null;var te,re=null;function ne(e){return 32/Math.min(e[0],e[1])}function ie(e){return e}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(u,e);var t,r,s,l=T(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=l.call(this),e=e||{},re||(k=[255,255,255,1],K=new i.Z({color:k}),R=[20,2],B="pixels",L="pixels",D=[64,64],j="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Y=new a.Z({anchor:R,anchorOrigin:"bottom-left",anchorXUnits:B,anchorYUnits:L,crossOrigin:"anonymous",rotation:0,scale:ne(D),size:D,src:j}),H="NO_IMAGE",J=new d.Z({color:k,width:1}),X=new d.Z({color:[51,51,51,1],width:2}),$=new g.Z({font:"bold 16px Helvetica",fill:K,stroke:X,scale:.8}),ee=new y.ZP({fill:K,image:Y,text:$,stroke:J,zIndex:0}),re=[ee]),t.dataProjection=(0,b.U2)("EPSG:4326"),t.defaultStyle_=e.defaultStyle?e.defaultStyle:re,t.extractStyles_=void 0===e.extractStyles||e.extractStyles,t.writeStyles_=void 0===e.writeStyles||e.writeStyles,t.sharedStyles_={},t.showPointNames_=void 0===e.showPointNames||e.showPointNames,t.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:"anonymous",t.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:ie,t.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],t}return t=u,(r=[{key:"readDocumentOrFolder_",value:function(e,t){var r=(0,_.C5)(N,{Document:(0,_.pc)(this.readDocumentOrFolder_,this),Folder:(0,_.pc)(this.readDocumentOrFolder_,this),Placemark:(0,_.Ei)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=(0,_.O)([],r,e,t,this);if(n)return n}},{key:"readPlacemark_",value:function(e,t){var r=(0,_.O)({geometry:null},U,e,t,this);if(r){var i=new n.Z,a=e.getAttribute("id");null!==a&&i.setId(a);var s=t[0],l=r.geometry;if(l&&(0,x.fI)(l,!1,s),i.setGeometry(l),delete r.geometry,this.extractStyles_){var u=function(e,t,r,n,i){return function(a,s){var l=i,u="",c=[];if(l){var f=a.getGeometry();if(f)if(f instanceof o.Z)c=f.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return"Point"===t||"MultiPoint"===t})),l=c.length>0;else{var h=f.getType();l="Point"===h||"MultiPoint"===h}}l&&(u=a.get("name"),(l=l&&!!u)&&/&[^&]+;/.test(u)&&(te||(te=document.createElement("textarea")),te.innerHTML=u,u=te.value));var p=r;if(e?p=e:t&&(p=ae(t,r,n)),l){var d=function(e,t){var r=[0,0],n="start",i=e.getImage();if(i){var o=i.getSize();if(o&&2==o.length){var a=i.getScaleArray(),s=i.getAnchor();r[0]=a[0]*(o[0]-s[0]),r[1]=a[1]*(o[1]/2-s[1]),n="left"}}var l=e.getText();l?((l=l.clone()).setFont(l.getFont()||$.getFont()),l.setScale(l.getScale()||$.getScale()),l.setFill(l.getFill()||$.getFill()),l.setStroke(l.getStroke()||X)):l=$.clone(),l.setText(t),l.setOffsetX(r[0]),l.setOffsetY(r[1]),l.setTextAlign(n);var u=new y.ZP({image:i,text:l});return u}(p[0],u);return c.length>0?(d.setGeometry(new o.Z(c)),[d,new y.ZP({geometry:p[0].getGeometry(),image:null,fill:p[0].getFill(),stroke:p[0].getStroke(),text:null})].concat(p.slice(1))):d}return p}}(r.Style,r.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(u)}return delete r.Style,i.setProperties(r,!0),i}}},{key:"readSharedStyle_",value:function(e,t){var r=e.getAttribute("id");if(null!==r){var n=Le.call(this,e,t);if(n){var i,o=e.baseURI;o&&"about:blank"!=o||(o=window.location.href),i=o?new URL("#"+r,o).href:"#"+r,this.sharedStyles_[i]=n}}}},{key:"readSharedStyleMap_",value:function(e,t){var r=e.getAttribute("id");if(null!==r){var n=pe.call(this,e,t);if(n){var i,o=e.baseURI;o&&"about:blank"!=o||(o=window.location.href),i=o?new URL("#"+r,o).href:"#"+r,this.sharedStyles_[i]=n}}}},{key:"readFeatureFromNode",value:function(e,t){if(!N.includes(e.namespaceURI))return null;var r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null}},{key:"readFeaturesFromNode",value:function(e,t){if(!N.includes(e.namespaceURI))return[];var r,n=e.localName;if("Document"==n||"Folder"==n)return(r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]))||[];if("Placemark"==n){var i=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return i?[i]:[]}if("kml"==n){r=[];for(var o=e.firstElementChild;o;o=o.nextElementSibling){var a=this.readFeaturesFromNode(o,t);a&&(0,A.l7)(r,a)}return r}return[]}},{key:"readName",value:function(e){if(e){if("string"==typeof e){var t=(0,_.Qc)(e);return this.readNameFromDocument(t)}return(0,_.qk)(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}},{key:"readNameFromDocument",value:function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(t);if(r)return r}}},{key:"readNameFromNode",value:function(e){for(var t=e.firstElementChild;t;t=t.nextElementSibling)if(N.includes(t.namespaceURI)&&"name"==t.localName)return(0,w.s2)(t);for(var r=e.firstElementChild;r;r=r.nextElementSibling){var n=r.localName;if(N.includes(r.namespaceURI)&&("Document"==n||"Folder"==n||"Placemark"==n||"kml"==n)){var i=this.readNameFromNode(r);if(i)return i}}}},{key:"readNetworkLinks",value:function(e){var t=[];if("string"==typeof e){var r=(0,_.Qc)(e);(0,A.l7)(t,this.readNetworkLinksFromDocument(r))}else(0,_.qk)(e)?(0,A.l7)(t,this.readNetworkLinksFromDocument(e)):(0,A.l7)(t,this.readNetworkLinksFromNode(e));return t}},{key:"readNetworkLinksFromDocument",value:function(e){for(var t=[],r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&(0,A.l7)(t,this.readNetworkLinksFromNode(r));return t}},{key:"readNetworkLinksFromNode",value:function(e){for(var t=[],r=e.firstElementChild;r;r=r.nextElementSibling)if(N.includes(r.namespaceURI)&&"NetworkLink"==r.localName){var n=(0,_.O)({},Q,r,[]);t.push(n)}for(var i=e.firstElementChild;i;i=i.nextElementSibling){var o=i.localName;!N.includes(i.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||(0,A.l7)(t,this.readNetworkLinksFromNode(i))}return t}},{key:"readRegion",value:function(e){var t=[];if("string"==typeof e){var r=(0,_.Qc)(e);(0,A.l7)(t,this.readRegionFromDocument(r))}else(0,_.qk)(e)?(0,A.l7)(t,this.readRegionFromDocument(e)):(0,A.l7)(t,this.readRegionFromNode(e));return t}},{key:"readRegionFromDocument",value:function(e){for(var t=[],r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&(0,A.l7)(t,this.readRegionFromNode(r));return t}},{key:"readRegionFromNode",value:function(e){for(var t=[],r=e.firstElementChild;r;r=r.nextElementSibling)if(N.includes(r.namespaceURI)&&"Region"==r.localName){var n=(0,_.O)({},q,r,[]);t.push(n)}for(var i=e.firstElementChild;i;i=i.nextElementSibling){var o=i.localName;!N.includes(i.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||(0,A.l7)(t,this.readRegionFromNode(i))}return t}},{key:"readCamera",value:function(e){var t=[];if("string"==typeof e){var r=(0,_.Qc)(e);(0,A.l7)(t,this.readCameraFromDocument(r))}else(0,_.qk)(e)?(0,A.l7)(t,this.readCameraFromDocument(e)):(0,A.l7)(t,this.readCameraFromNode(e));return t}},{key:"readCameraFromDocument",value:function(e){for(var t=[],r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&(0,A.l7)(t,this.readCameraFromNode(r));return t}},{key:"readCameraFromNode",value:function(e){for(var t=[],r=e.firstElementChild;r;r=r.nextElementSibling)if(N.includes(r.namespaceURI)&&"Camera"===r.localName){var n=(0,_.O)({},z,r,[]);t.push(n)}for(var i=e.firstElementChild;i;i=i.nextElementSibling){var o=i.localName;!N.includes(i.namespaceURI)||"Document"!==o&&"Folder"!==o&&"Placemark"!==o&&"kml"!==o||(0,A.l7)(t,this.readCameraFromNode(i))}return t}},{key:"writeFeaturesNode",value:function(e,t){t=this.adaptOptions(t);var r=(0,_.c)(N[4],"kml"),n="http://www.w3.org/2000/xmlns/";r.setAttributeNS(n,"xmlns:gx",F[0]),r.setAttributeNS(n,"xmlns:xsi",_.fJ),r.setAttributeNS(_.fJ,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:r},o={};e.length>1?o.Document=e:1==e.length&&(o.Placemark=e[0]);var a=V[r.namespaceURI],s=(0,_.RA)(o,a);return(0,_.ZL)(i,W,_.hg,s,[t],a,this),r}}])&&P(t.prototype,r),s&&P(t,s),Object.defineProperty(t,"prototype",{writable:!1}),u}(m.Z);function ae(e,t,r){return Array.isArray(e)?e:"string"==typeof e?ae(r[e],t,r):t}function se(e){var t=(0,_.Ve)(e,!1),r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t);if(r){var n=r[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function le(e){var t=(0,_.Ve)(e,!1),r=[];t=t.replace(/\s*,\s*/g,",");for(var n,i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;n=i.exec(t);){var o=parseFloat(n[1]),a=parseFloat(n[2]),s=n[3]?parseFloat(n[3]):0;r.push(o,a,s),t=t.substr(n[0].length)}if(""===t)return r}function ue(e){var t=(0,_.Ve)(e,!1).trim(),r=e.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(t,r).href:t}function ce(e){var t=(0,_.Ve)(e,!1).trim().replace(/^(?!.*#)/,"#"),r=e.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(t,r).href:t}function fe(e){return(0,w.fy)(e)}var he=(0,_.C5)(N,{Pair:function(e,t){var r=(0,_.O)({},Ue,e,t,this);if(!r)return;var n=r.key;if(n&&"normal"==n){var i=r.styleUrl;i&&(t[t.length-1]=i);var o=r.Style;o&&(t[t.length-1]=o)}}});function pe(e,t){return(0,_.O)(void 0,he,e,t,this)}var de=(0,_.C5)(N,{Icon:(0,_.Pr)((function(e,t){var r=(0,_.O)({},Ee,e,t);if(r)return r;return null})),color:(0,_.Pr)(se),heading:(0,_.Pr)(w.fy),hotSpot:(0,_.Pr)((function(e){var t,r=e.getAttribute("xunits"),n=e.getAttribute("yunits");return t="insetPixels"!==r?"insetPixels"!==n?"bottom-left":"top-left":"insetPixels"!==n?"bottom-right":"top-right",{x:parseFloat(e.getAttribute("x")),xunits:Z[r],y:parseFloat(e.getAttribute("y")),yunits:Z[n],origin:t}})),scale:(0,_.Pr)(fe)});var ye=(0,_.C5)(N,{color:(0,_.Pr)(se),scale:(0,_.Pr)(fe)});var ge=(0,_.C5)(N,{color:(0,_.Pr)(se),width:(0,_.Pr)(w.fy)});var me=(0,_.C5)(N,{color:(0,_.Pr)(se),fill:(0,_.Pr)(w.ud),outline:(0,_.Pr)(w.ud)});var _e=(0,_.C5)(N,{coordinates:(0,_.z)(le)});function ve(e,t){return(0,_.O)(null,_e,e,t)}var Ae=(0,_.C5)(F,{Track:(0,_.Ei)(we)});var be=(0,_.C5)(N,{when:function(e,t){var r=t[t.length-1].whens,n=(0,_.Ve)(e,!1),i=Date.parse(n);r.push(isNaN(i)?0:i)}},(0,_.C5)(F,{coord:function(e,t){var r=t[t.length-1].coordinates,n=(0,_.Ve)(e,!1),i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(i){var o=parseFloat(i[1]),a=parseFloat(i[2]),s=parseFloat(i[3]);r.push([o,a,s])}else r.push([])}}));function we(e,t){var r=(0,_.O)({coordinates:[],whens:[]},be,e,t);if(r){for(var n=[],i=r.coordinates,o=r.whens,a=0,s=Math.min(i.length,o.length);a<s;++a)3==i[a].length&&n.push(i[a][0],i[a][1],i[a][2],o[a]);return new l.Z(n,"XYZM")}}var Ee=(0,_.C5)(N,{href:(0,_.Pr)(ue)},(0,_.C5)(F,{x:(0,_.Pr)(w.fy),y:(0,_.Pr)(w.fy),w:(0,_.Pr)(w.fy),h:(0,_.Pr)(w.fy)}));var xe=(0,_.C5)(N,{coordinates:(0,_.z)(le)});function Ie(e,t){return(0,_.O)(null,xe,e,t)}var Se=(0,_.C5)(N,{extrude:(0,_.Pr)(w.ud),tessellate:(0,_.Pr)(w.ud),altitudeMode:(0,_.Pr)(w.s2)});function Ce(e,t){var r=(0,_.O)({},Se,e,t),n=Ie(e,t);if(n){var i=new l.Z(n,"XYZ");return i.setProperties(r,!0),i}}function Pe(e,t){var r=(0,_.O)({},Se,e,t),n=Ie(e,t);if(n){var i=new p.ZP(n,"XYZ",[n.length]);return i.setProperties(r,!0),i}}var Oe=(0,_.C5)(N,{LineString:(0,_.Ei)(Ce),LinearRing:(0,_.Ei)(Pe),MultiGeometry:(0,_.Ei)(Te),Point:(0,_.Ei)(Me),Polygon:(0,_.Ei)(Re)});function Te(e,t){var r,n=(0,_.O)([],Oe,e,t);if(!n)return null;if(0===n.length)return new o.Z(n);for(var i,a,s,l=!0,h=n[0].getType(),p=1,d=n.length;p<d;++p)if((i=n[p]).getType()!=h){l=!1;break}if(l)if("Point"==h){var y=n[0];a=y.getLayout(),s=y.getFlatCoordinates();for(var g=1,m=n.length;g<m;++g)i=n[g],(0,A.l7)(s,i.getFlatCoordinates());De(r=new c.Z(s,a),n)}else if("LineString"==h)De(r=new u.Z(n),n);else if("Polygon"==h)De(r=new f.Z(n),n);else{if("GeometryCollection"!=h)throw new Error("Unknown geometry type found");r=new o.Z(n)}else r=new o.Z(n);return r}function Me(e,t){var r=(0,_.O)({},Se,e,t),n=Ie(e,t);if(n){var i=new h.Z(n,"XYZ");return i.setProperties(r,!0),i}}var ke=(0,_.C5)(N,{innerBoundaryIs:function(e,t){var r=(0,_.O)([],qe,e,t);if(r.length>0){var n=t[t.length-1];n.push.apply(n,S(r))}},outerBoundaryIs:function(e,t){var r=(0,_.O)(void 0,Ve,e,t);if(r){t[t.length-1][0]=r}}});function Re(e,t){var r=(0,_.O)({},Se,e,t),n=(0,_.O)([null],ke,e,t);if(n&&n[0]){for(var i=n[0],o=[i.length],a=1,s=n.length;a<s;++a)(0,A.l7)(i,n[a]),o.push(i.length);var l=new p.ZP(i,"XYZ",o);return l.setProperties(r,!0),l}}var Be=(0,_.C5)(N,{IconStyle:function(e,t){var r=(0,_.O)({},de,e,t);if(r){var n,i,o,l,u=t[t.length-1],c="Icon"in r?r.Icon:{},f=!("Icon"in r)||Object.keys(c).length>0,h=c.href;h?n=h:f&&(n=j);var p,d="bottom-left",y=r.hotSpot;y?(i=[y.x,y.y],o=y.xunits,l=y.yunits,d=y.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(n.includes("pushpin")?(i=R,o=B,l=L):n.includes("arrow-reverse")?(i=[54,42],o=B,l=L):n.includes("paddle")&&(i=[32,1],o=B,l=L));var g,m=c.x,v=c.y;void 0!==m&&void 0!==v&&(p=[m,v]);var A,b=c.w,w=c.h;void 0!==b&&void 0!==w&&(g=[b,w]);var x=r.heading;void 0!==x&&(A=(0,E.Yr)(x));var I=r.scale,S=r.color;if(f){n==j&&(g=D);var C=new a.Z({anchor:i,anchorOrigin:d,anchorXUnits:o,anchorYUnits:l,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:"bottom-left",rotation:A,scale:I,size:g,src:this.iconUrlFunction_(n),color:S}),P=C.getScaleArray()[0],O=C.getSize();if(null===O){var T=C.getImageState();if(T===s.Z.IDLE||T===s.Z.LOADING){C.listenImageChange((function e(){var t=C.getImageState();if(t!==s.Z.IDLE&&t!==s.Z.LOADING){var r=C.getSize();if(r&&2==r.length){var n=ne(r);C.setScale(P*n)}C.unlistenImageChange(e)}})),T===s.Z.IDLE&&C.load()}}else if(2==O.length){var M=ne(O);C.setScale(P*M)}u.imageStyle=C}else u.imageStyle=H}},LabelStyle:function(e,t){var r=(0,_.O)({},ye,e,t);if(r){var n=t[t.length-1],o=new g.Z({fill:new i.Z({color:"color"in r?r.color:k}),scale:r.scale});n.textStyle=o}},LineStyle:function(e,t){var r=(0,_.O)({},ge,e,t);if(r){var n=t[t.length-1],i=new d.Z({color:"color"in r?r.color:k,width:"width"in r?r.width:1});n.strokeStyle=i}},PolyStyle:function(e,t){var r=(0,_.O)({},me,e,t);if(r){var n=t[t.length-1],o=new i.Z({color:"color"in r?r.color:k});n.fillStyle=o;var a=r.fill;void 0!==a&&(n.fill=a);var s=r.outline;void 0!==s&&(n.outline=s)}}});function Le(e,t){var r=(0,_.O)({},Be,e,t,this);if(!r)return null;var n,i="fillStyle"in r?r.fillStyle:K,a=r.fill;void 0===a||a||(i=null),"imageStyle"in r?r.imageStyle!=H&&(n=r.imageStyle):n=Y;var s="textStyle"in r?r.textStyle:$,l="strokeStyle"in r?r.strokeStyle:J,u=r.outline;return void 0===u||u?[new y.ZP({fill:i,image:n,stroke:l,text:s,zIndex:void 0})]:[new y.ZP({geometry:function(e){var t=e.getGeometry(),r=t.getType();if("GeometryCollection"===r){var n=t;return new o.Z(n.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return"Polygon"!==t&&"MultiPolygon"!==t})))}if("Polygon"!==r&&"MultiPolygon"!==r)return t},fill:i,image:n,stroke:l,text:s,zIndex:void 0}),new y.ZP({geometry:function(e){var t=e.getGeometry(),r=t.getType();if("GeometryCollection"===r){var n=t;return new o.Z(n.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return"Polygon"===t||"MultiPolygon"===t})))}if("Polygon"===r||"MultiPolygon"===r)return t},fill:i,stroke:null,zIndex:void 0})]}function De(e,t){var r,n,i,o=t.length,a=new Array(t.length),s=new Array(t.length),l=new Array(t.length);r=!1,n=!1,i=!1;for(var u=0;u<o;++u){var c=t[u];a[u]=c.get("extrude"),s[u]=c.get("tessellate"),l[u]=c.get("altitudeMode"),r=r||void 0!==a[u],n=n||void 0!==s[u],i=i||l[u]}r&&e.set("extrude",a),n&&e.set("tessellate",s),i&&e.set("altitudeMode",l)}var je=(0,_.C5)(N,{displayName:(0,_.Pr)(w.s2),value:(0,_.Pr)(w.s2)});var Fe=(0,_.C5)(N,{Data:function(e,t){var r=e.getAttribute("name");(0,_.T3)(je,e,t);var n=t[t.length-1];r&&n.displayName?n[r]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==r?n[r]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(e,t){(0,_.T3)(Qe,e,t)}});function Ne(e,t){(0,_.T3)(Fe,e,t)}function Ze(e,t){(0,_.T3)(q,e,t)}var Ue=(0,_.C5)(N,{Style:(0,_.Pr)(Le),key:(0,_.Pr)(w.s2),styleUrl:(0,_.Pr)(ce)});var Qe=(0,_.C5)(N,{SimpleData:function(e,t){var r=e.getAttribute("name");if(null!==r){var n=(0,w.s2)(e);t[t.length-1][r]=n}}});var Ge=(0,_.C5)(N,{altitudeMode:(0,_.Pr)(w.s2),minAltitude:(0,_.Pr)(w.fy),maxAltitude:(0,_.Pr)(w.fy),north:(0,_.Pr)(w.fy),south:(0,_.Pr)(w.fy),east:(0,_.Pr)(w.fy),west:(0,_.Pr)(w.fy)});var ze=(0,_.C5)(N,{minLodPixels:(0,_.Pr)(w.fy),maxLodPixels:(0,_.Pr)(w.fy),minFadeExtent:(0,_.Pr)(w.fy),maxFadeExtent:(0,_.Pr)(w.fy)});var qe=(0,_.C5)(N,{LinearRing:(0,_.Ei)(ve)});var Ve=(0,_.C5)(N,{LinearRing:(0,_.z)(ve)});function We(e,t){for(var r=(0,v._2)(t),n=[255*(4==r.length?r[3]:1),r[2],r[1],r[0]],i=0;i<4;++i){var o=Math.floor(n[i]).toString(16);n[i]=1==o.length?"0"+o:o}(0,w.bZ)(e,n.join(""))}var Ke=(0,_.C5)(N,{Data:(0,_.A4)((function(e,t,r){e.setAttribute("name",t.name);var n={node:e},i=t.value;"object"==I(i)?(null!==i&&i.displayName&&(0,_.ZL)(n,Ke,_.hg,[i.displayName],r,["displayName"]),null!==i&&i.value&&(0,_.ZL)(n,Ke,_.hg,[i.value],r,["value"])):(0,_.ZL)(n,Ke,_.hg,[i],r,["value"])})),value:(0,_.A4)((function(e,t){(0,w.bZ)(e,t)})),displayName:(0,_.A4)((function(e,t){(0,w.xO)(e,t)}))});var He=(0,_.C5)(N,{Placemark:(0,_.A4)(At)}),Ye=function(e,t,r){var n=t[t.length-1].node;return(0,_.c)(n.namespaceURI,"Placemark")};var Xe=(0,_.G3)("Data");var Je=(0,_.C5)(N,["href"],(0,_.C5)(F,["x","y","w","h"])),$e=(0,_.C5)(N,{href:(0,_.A4)(w.bZ)},(0,_.C5)(F,{x:(0,_.A4)(w.f3),y:(0,_.A4)(w.f3),w:(0,_.A4)(w.f3),h:(0,_.A4)(w.f3)})),et=function(e,t,r){return(0,_.c)(F[0],"gx:"+r)};var tt=(0,_.C5)(N,["scale","heading","Icon","color","hotSpot"]),rt=(0,_.C5)(N,{Icon:(0,_.A4)((function(e,t,r){var n={node:e},i=r[r.length-1].node,o=Je[i.namespaceURI],a=(0,_.RA)(t,o);(0,_.ZL)(n,$e,_.hg,a,r,o),o=Je[F[0]],a=(0,_.RA)(t,o),(0,_.ZL)(n,$e,et,a,r,o)})),color:(0,_.A4)(We),heading:(0,_.A4)(w.f3),hotSpot:(0,_.A4)((function(e,t){e.setAttribute("x",String(t.x)),e.setAttribute("y",String(t.y)),e.setAttribute("xunits",t.xunits),e.setAttribute("yunits",t.yunits)})),scale:(0,_.A4)(Tt)});var nt=(0,_.C5)(N,["color","scale"]),it=(0,_.C5)(N,{color:(0,_.A4)(We),scale:(0,_.A4)(Tt)});var ot=(0,_.C5)(N,["color","width"]),at=(0,_.C5)(N,{color:(0,_.A4)(We),width:(0,_.A4)(w.f3)});var st={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},lt=function(e,t,r){if(e){var n=t[t.length-1].node;return(0,_.c)(n.namespaceURI,st[e.getType()])}},ut=(0,_.G3)("Point"),ct=(0,_.G3)("LineString"),ft=(0,_.G3)("LinearRing"),ht=(0,_.G3)("Polygon"),pt=(0,_.C5)(N,{LineString:(0,_.A4)(Et),Point:(0,_.A4)(Et),Polygon:(0,_.A4)(Pt),GeometryCollection:(0,_.A4)(dt)});function dt(e,t,r){var n,i={node:e},o=t.getType(),a=[];if("GeometryCollection"===o)t.getGeometriesArrayRecursive().forEach((function(e){var t=e.getType();if("MultiPoint"===t)a=a.concat(e.getPoints());else if("MultiLineString"===t)a=a.concat(e.getLineStrings());else if("MultiPolygon"===t)a=a.concat(e.getPolygons());else{if("Point"!==t&&"LineString"!==t&&"Polygon"!==t)throw new Error("Unknown geometry type");a.push(e)}})),n=lt;else if("MultiPoint"===o)a=t.getPoints(),n=ut;else if("MultiLineString"===o)a=t.getLineStrings(),n=ct;else{if("MultiPolygon"!==o)throw new Error("Unknown geometry type");a=t.getPolygons(),n=ht}(0,_.ZL)(i,pt,n,a,r)}var yt=(0,_.C5)(N,{LinearRing:(0,_.A4)(Et)});function gt(e,t,r){var n={node:e};(0,_.ZL)(n,yt,ft,[t],r)}var mt=(0,_.C5)(N,{ExtendedData:(0,_.A4)((function(e,t,r){for(var n={node:e},i=t.names,o=t.values,a=i.length,s=0;s<a;s++)(0,_.ZL)(n,Ke,Xe,[{name:i[s],value:o[s]}],r)})),MultiGeometry:(0,_.A4)(dt),LineString:(0,_.A4)(Et),LinearRing:(0,_.A4)(Et),Point:(0,_.A4)(Et),Polygon:(0,_.A4)(Pt),Style:(0,_.A4)((function(e,t,r){var n={node:e},i={};if(t.pointStyles.length){var o=t.pointStyles[0].getText();o&&(i.LabelStyle=o);var a=t.pointStyles[0].getImage();a&&"function"==typeof a.getSrc&&(i.IconStyle=a)}if(t.lineStyles.length){var s=t.lineStyles[0].getStroke();s&&(i.LineStyle=s)}if(t.polyStyles.length){var l=t.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=t.polyStyles[0]}var u=r[r.length-1].node,c=Mt[u.namespaceURI],f=(0,_.RA)(i,c);(0,_.ZL)(n,kt,_.hg,f,r,c)})),address:(0,_.A4)(w.bZ),description:(0,_.A4)(w.bZ),name:(0,_.A4)(w.bZ),open:(0,_.A4)(w.Vi),phoneNumber:(0,_.A4)(w.bZ),styleUrl:(0,_.A4)(w.bZ),visibility:(0,_.A4)(w.Vi)}),_t=(0,_.C5)(N,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),vt=(0,_.G3)("ExtendedData");function At(e,t,r){var n={node:e};t.getId()&&e.setAttribute("id",t.getId());var i=t.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[t.getGeometryName()]=1;var a=Object.keys(i||{}).sort().filter((function(e){return!o[e]})),s=t.getStyleFunction();if(s){var l=s(t,0);if(l){var u=Array.isArray(l)?l:[l],c=u;if(t.getGeometry()&&(c=u.filter((function(e){var r=e.getGeometryFunction()(t);if(r){var n=r.getType();return"GeometryCollection"===n?r.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return"Point"===t||"MultiPoint"===t})).length:"Point"===n||"MultiPoint"===n}}))),this.writeStyles_){var f=u,h=u;t.getGeometry()&&(f=u.filter((function(e){var r=e.getGeometryFunction()(t);if(r){var n=r.getType();return"GeometryCollection"===n?r.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return"LineString"===t||"MultiLineString"===t})).length:"LineString"===n||"MultiLineString"===n}})),h=u.filter((function(e){var r=e.getGeometryFunction()(t);if(r){var n=r.getType();return"GeometryCollection"===n?r.getGeometriesArrayRecursive().filter((function(e){var t=e.getType();return"Polygon"===t||"MultiPolygon"===t})).length:"Polygon"===n||"MultiPolygon"===n}}))),i.Style={pointStyles:c,lineStyles:f,polyStyles:h}}if(c.length&&void 0===i.name){var p=c[0].getText();p&&(i.name=p.getText())}}}var d=r[r.length-1].node,y=_t[d.namespaceURI],g=(0,_.RA)(i,y);if((0,_.ZL)(n,mt,_.hg,g,r,y),a.length>0){var m={names:a,values:(0,_.RA)(i,a)};(0,_.ZL)(n,mt,vt,[m],r)}var v=r[0],A=t.getGeometry();A&&(A=(0,x.fI)(A,!0,v)),(0,_.ZL)(n,mt,lt,[A],r)}var bt=(0,_.C5)(N,["extrude","tessellate","altitudeMode","coordinates"]),wt=(0,_.C5)(N,{extrude:(0,_.A4)(w.Vi),tessellate:(0,_.A4)(w.Vi),altitudeMode:(0,_.A4)(w.bZ),coordinates:(0,_.A4)((function(e,t,r){var n,i=r[r.length-1],o=i.layout,a=i.stride;if("XY"==o||"XYM"==o)n=2;else{if("XYZ"!=o&&"XYZM"!=o)throw new Error("Invalid geometry layout");n=3}var s=t.length,l="";if(s>0){l+=t[0];for(var u=1;u<n;++u)l+=","+t[u];for(var c=a;c<s;c+=a){l+=" "+t[c];for(var f=1;f<n;++f)l+=","+t[c+f]}}(0,w.bZ)(e,l)}))});function Et(e,t,r){var n=t.getFlatCoordinates(),i={node:e};i.layout=t.getLayout(),i.stride=t.getStride();var o=t.getProperties();o.coordinates=n;var a=r[r.length-1].node,s=bt[a.namespaceURI],l=(0,_.RA)(o,s);(0,_.ZL)(i,wt,_.hg,l,r,s)}var xt=(0,_.C5)(N,["color","fill","outline"]),It=(0,_.C5)(N,{outerBoundaryIs:(0,_.A4)(gt),innerBoundaryIs:(0,_.A4)(gt)}),St=(0,_.G3)("innerBoundaryIs"),Ct=(0,_.G3)("outerBoundaryIs");function Pt(e,t,r){var n=t.getLinearRings(),i=n.shift(),o={node:e};(0,_.ZL)(o,It,St,n,r),(0,_.ZL)(o,It,Ct,[i],r)}var Ot=(0,_.C5)(N,{color:(0,_.A4)(We),fill:(0,_.A4)(w.Vi),outline:(0,_.A4)(w.Vi)});function Tt(e,t){(0,w.f3)(e,Math.round(1e6*t)/1e6)}var Mt=(0,_.C5)(N,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),kt=(0,_.C5)(N,{IconStyle:(0,_.A4)((function(e,t,r){var n={node:e},i={},o=t.getSrc(),a=t.getSize(),s=t.getImageSize(),l={href:o};if(a){l.w=a[0],l.h=a[1];var u=t.getAnchor(),c=t.getOrigin();if(c&&s&&0!==c[0]&&c[1]!==a[1]&&(l.x=c[0],l.y=s[1]-(c[1]+a[1])),u&&(u[0]!==a[0]/2||u[1]!==a[1]/2)){var f={x:u[0],xunits:"pixels",y:a[1]-u[1],yunits:"pixels"};i.hotSpot=f}}i.Icon=l;var h=t.getScaleArray()[0],p=a;null===p&&(p=D),2==p.length&&(h/=ne(p)),1!==h&&(i.scale=h);var d=t.getRotation();0!==d&&(i.heading=d);var y=t.getColor();y&&(i.color=y);var g=r[r.length-1].node,m=tt[g.namespaceURI],v=(0,_.RA)(i,m);(0,_.ZL)(n,rt,_.hg,v,r,m)})),LabelStyle:(0,_.A4)((function(e,t,r){var n={node:e},i={},o=t.getFill();o&&(i.color=o.getColor());var a=t.getScale();a&&1!==a&&(i.scale=a);var s=r[r.length-1].node,l=nt[s.namespaceURI],u=(0,_.RA)(i,l);(0,_.ZL)(n,it,_.hg,u,r,l)})),LineStyle:(0,_.A4)((function(e,t,r){var n={node:e},i={color:t.getColor(),width:Number(t.getWidth())||1},o=r[r.length-1].node,a=ot[o.namespaceURI],s=(0,_.RA)(i,a);(0,_.ZL)(n,at,_.hg,s,r,a)})),PolyStyle:(0,_.A4)((function(e,t,r){var n={node:e},i=t.getFill(),o=t.getStroke(),a={color:i?i.getColor():void 0,fill:!!i&&void 0,outline:!!o&&void 0},s=r[r.length-1].node,l=xt[s.namespaceURI],u=(0,_.RA)(a,l);(0,_.ZL)(n,Ot,_.hg,u,r,l)}))});const Rt=oe},7707:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n=r(88658),i=r(38815),o=r(70278),a=r(48843),s=r(44133),l=r(3614),u=r(61900),c=r(92882),f=r(14752),h=r(26890),p=r(27811),d=r(98180);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===y(o)?o:String(o)),n)}var i,o}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function A(e,t,r){if(3===e){var n={keys:[],values:[],features:[]},i=r.readVarint()+r.pos;r.readFields(b,n,i),n.length=n.features.length,n.length&&(t[n.name]=n)}}function b(e,t,r){if(15===e)t.version=r.readVarint();else if(1===e)t.name=r.readString();else if(5===e)t.extent=r.readVarint();else if(2===e)t.features.push(r.pos);else if(3===e)t.keys.push(r.readString());else if(4===e){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;)n=1===(e=r.readVarint()>>3)?r.readString():2===e?r.readFloat():3===e?r.readDouble():4===e?r.readVarint64():5===e?r.readVarint():6===e?r.readSVarint():7===e?r.readBoolean():null;t.values.push(n)}}function w(e,t,r){if(1==e)t.id=r.readVarint();else if(2==e)for(var n=r.readVarint()+r.pos;r.pos<n;){var i=t.layer.keys[r.readVarint()],o=t.layer.values[r.readVarint()];t.properties[i]=o}else 3==e?t.type=r.readVarint():4==e&&(t.geometry=r.pos)}function E(e,t,r){e.pos=t.features[r];var n=e.readVarint()+e.pos,i={layer:t,type:0,properties:{}};return e.readFields(w,i,n),i}const x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(b,e);var t,r,y,v=_(b);function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),e=e||{},(t=v.call(this)).dataProjection=new f.Z({code:"",units:"tile-pixels"}),t.featureClass_=e.featureClass?e.featureClass:h.ZP,t.geometryName_=e.geometryName,t.layerName_=e.layerName?e.layerName:"layer",t.layers_=e.layers?e.layers:null,t.idProperty_=e.idProperty,t.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],t}return t=b,(r=[{key:"readRawGeometry_",value:function(e,t,r,n){e.pos=t.geometry;for(var i=e.readVarint()+e.pos,o=1,a=0,s=0,l=0,u=0,c=0;e.pos<i;){if(!a){var f=e.readVarint();o=7&f,a=f>>3}if(a--,1===o||2===o)s+=e.readSVarint(),l+=e.readSVarint(),1===o&&u>c&&(n.push(u),c=u),r.push(s,l),u+=2;else{if(7!==o)throw new Error("Invalid command found in the PBF");u>c&&(r.push(r[c],r[c+1]),u+=2)}}u>c&&(n.push(u),c=u)}},{key:"createFeature_",value:function(e,t,r){var l,f=t.type;if(0===f)return null;var p,y=t.properties;this.idProperty_?(p=y[this.idProperty_],delete y[this.idProperty_]):p=t.id,y[this.layerName_]=t.layer.name;var g=[],m=[];this.readRawGeometry_(e,t,g,m);var _=function(e,t){var r;return 1===e?r=1===t?"Point":"MultiPoint":2===e?r=1===t?"LineString":"MultiLineString":3===e&&(r="Polygon"),r}(f,m.length);if(this.featureClass_===h.ZP)(l=new this.featureClass_(_,g,m,y,p)).transform(r.dataProjection);else{var v;if("Polygon"==_){var A=(0,d.Q3)(g,m);v=A.length>1?new s.Z(g,"XY",A):new c.ZP(g,"XY",m)}else v="Point"===_?new u.Z(g,"XY"):"LineString"===_?new i.Z(g,"XY"):"MultiPoint"===_?new a.Z(g,"XY"):"MultiLineString"===_?new o.Z(g,"XY",m):null;l=new(0,this.featureClass_),this.geometryName_&&l.setGeometryName(this.geometryName_);var b=(0,n.fI)(v,!1,r);l.setGeometry(b),void 0!==p&&l.setId(p),l.setProperties(y,!0)}return l}},{key:"getType",value:function(){return"arraybuffer"}},{key:"readFeatures",value:function(e,t){var r=this.layers_;t=this.adaptOptions(t);var n=(0,p.U2)(t.dataProjection);n.setWorldExtent(t.extent),t.dataProjection=n;var i=new l(e),o=i.readFields(A,{}),a=[];for(var s in o)if(!r||r.includes(s)){var u=o[s],c=u?[0,0,u.extent,u.extent]:null;n.setExtent(c);for(var f=0,h=u.length;f<h;++f){var d=E(i,u,f),y=this.createFeature_(i,d,t);null!==y&&a.push(y)}}return a}},{key:"readProjection",value:function(e){return this.dataProjection}},{key:"setLayers",value:function(e){this.layers_=e}}])&&g(t.prototype,r),y&&g(t,y),Object.defineProperty(t,"prototype",{writable:!1}),b}(n.ZP)},11201:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(88658),i=r(20594);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e){return"string"==typeof e?e:""}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,o=l(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o.call(this)}return t=u,(r=[{key:"getType",value:function(){return"text"}},{key:"readFeature",value:function(e,t){return this.readFeatureFromText(c(e),this.adaptOptions(t))}},{key:"readFeatureFromText",value:function(e,t){return(0,i.O3)()}},{key:"readFeatures",value:function(e,t){return this.readFeaturesFromText(c(e),this.adaptOptions(t))}},{key:"readFeaturesFromText",value:function(e,t){return(0,i.O3)()}},{key:"readGeometry",value:function(e,t){return this.readGeometryFromText(c(e),this.adaptOptions(t))}},{key:"readGeometryFromText",value:function(e,t){return(0,i.O3)()}},{key:"readProjection",value:function(e){return this.readProjectionFromText(c(e))}},{key:"readProjectionFromText",value:function(e){return this.dataProjection}},{key:"writeFeature",value:function(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}},{key:"writeFeatureText",value:function(e,t){return(0,i.O3)()}},{key:"writeFeatures",value:function(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}},{key:"writeFeaturesText",value:function(e,t){return(0,i.O3)()}},{key:"writeGeometry",value:function(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}},{key:"writeGeometryText",value:function(e,t){return(0,i.O3)()}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.ZP)},67033:(e,t,r)=>{"use strict";r.d(t,{Y:()=>se,Z:()=>ce});var n=r(96903),i=r(75934),o=r(22386),a=r(47813),s=r(26264),l=r(42188),u=r(44983),c=r(97972),f=r(27811),h=r(4546);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var _={"http://www.opengis.net/gml":{boundedBy:(0,l.Pr)(a.Z.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:(0,l.Ei)(a.Z.prototype.readFeaturesInternal)}},v={"http://www.opengis.net/wfs":{totalInserted:(0,l.Pr)(h.$L),totalUpdated:(0,l.Pr)(h.$L),totalDeleted:(0,l.Pr)(h.$L)},"http://www.opengis.net/wfs/2.0":{totalInserted:(0,l.Pr)(h.$L),totalUpdated:(0,l.Pr)(h.$L),totalDeleted:(0,l.Pr)(h.$L)}},A={"http://www.opengis.net/wfs":{TransactionSummary:(0,l.Pr)(k,"transactionSummary"),InsertResults:(0,l.Pr)(D,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:(0,l.Pr)(k,"transactionSummary"),InsertResults:(0,l.Pr)(D,"insertIds")}},b={"http://www.opengis.net/wfs":{PropertyName:(0,l.A4)(h.bZ)},"http://www.opengis.net/wfs/2.0":{PropertyName:(0,l.A4)(h.bZ)}},w={"http://www.opengis.net/wfs":{Insert:(0,l.A4)(j),Update:(0,l.A4)(U),Delete:(0,l.A4)(Z),Property:(0,l.A4)(Q),Native:(0,l.A4)(G)},"http://www.opengis.net/wfs/2.0":{Insert:(0,l.A4)(j),Update:(0,l.A4)(U),Delete:(0,l.A4)(Z),Property:(0,l.A4)(Q),Native:(0,l.A4)(G)}},E="feature",x="http://www.w3.org/2000/xmlns/",I={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},S={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},C={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},P={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},O={"2.0.0":o.Z,"1.1.0":i.Z,"1.0.0":n.Z},T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(o,e);var t,r,n,i=g(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this)).version_=e.version?e.version:"1.1.0",t.featureType_=e.featureType,t.featureNS_=e.featureNS,t.gmlFormat_=e.gmlFormat?e.gmlFormat:new O[t.version_],t.schemaLocation_=e.schemaLocation?e.schemaLocation:P[t.version_],t}return t=o,(r=[{key:"getFeatureType",value:function(){return this.featureType_}},{key:"setFeatureType",value:function(e){this.featureType_=e}},{key:"readFeaturesFromNode",value:function(e,t){var r={node:e};Object.assign(r,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(r,this.getReadOptions(e,t||{}));var n,i=[r];n="2.0.0"===this.version_?_:this.gmlFormat_.FEATURE_COLLECTION_PARSERS;var o=(0,l.O)([],n,e,i,this.gmlFormat_);return o||(o=[]),o}},{key:"readTransactionResponse",value:function(e){if(e){if("string"==typeof e){var t=(0,l.Qc)(e);return this.readTransactionResponseFromDocument(t)}return(0,l.qk)(e)?this.readTransactionResponseFromDocument(e):this.readTransactionResponseFromNode(e)}}},{key:"readFeatureCollectionMetadata",value:function(e){if(e){if("string"==typeof e){var t=(0,l.Qc)(e);return this.readFeatureCollectionMetadataFromDocument(t)}return(0,l.qk)(e)?this.readFeatureCollectionMetadataFromDocument(e):this.readFeatureCollectionMetadataFromNode(e)}}},{key:"readFeatureCollectionMetadataFromDocument",value:function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(t)}},{key:"readFeatureCollectionMetadataFromNode",value:function(e){var t={},r=(0,h._E)(e.getAttribute("numberOfFeatures"));return t.numberOfFeatures=r,(0,l.O)(t,_,e,[],this.gmlFormat_)}},{key:"readTransactionResponseFromDocument",value:function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(t)}},{key:"readTransactionResponseFromNode",value:function(e){return(0,l.O)({},A,e,[])}},{key:"writeGetFeature",value:function(e){var t=this,r=(0,l.c)(S[this.version_],"GetFeature");r.setAttribute("service","WFS"),r.setAttribute("version",this.version_),e.handle&&r.setAttribute("handle",e.handle),e.outputFormat&&r.setAttribute("outputFormat",e.outputFormat),void 0!==e.maxFeatures&&r.setAttribute("maxFeatures",String(e.maxFeatures)),e.resultType&&r.setAttribute("resultType",e.resultType),void 0!==e.startIndex&&r.setAttribute("startIndex",String(e.startIndex)),void 0!==e.count&&r.setAttribute("count",String(e.count)),void 0!==e.viewParams&&r.setAttribute("viewParams",e.viewParams),r.setAttributeNS(l.fJ,"xsi:schemaLocation",this.schemaLocation_);var n={node:r};if(Object.assign(n,{version:this.version_,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,propertyNames:e.propertyNames?e.propertyNames:[]}),(0,c.h)(Array.isArray(e.featureTypes),"`options.featureTypes` must be an Array"),"string"==typeof e.featureTypes[0]){var i=e.filter;e.bbox&&((0,c.h)(e.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),i=this.combineBboxAndFilter(e.geometryName,e.bbox,e.srsName,i)),Object.assign(n,{geometryName:e.geometryName,filter:i}),le(r,e.featureTypes,[n])}else e.featureTypes.forEach((function(i){var o=t.combineBboxAndFilter(i.geometryName,i.bbox,e.srsName,e.filter);Object.assign(n,{geometryName:i.geometryName,filter:o}),le(r,[i.name],[n])}));return r}},{key:"combineBboxAndFilter",value:function(e,t,r,n){var i=(0,u.VW)(e,t,r);return n?(0,u.xD)(n,i):i}},{key:"writeTransaction",value:function(e,t,r,n){var i,o=[],a=n.version?n.version:this.version_,s=(0,l.c)(S[a],"Transaction");s.setAttribute("service","WFS"),s.setAttribute("version",a),n&&(i=n.gmlOptions?n.gmlOptions:{},n.handle&&s.setAttribute("handle",n.handle)),s.setAttributeNS(l.fJ,"xsi:schemaLocation",P[a]);var u=function(e,t,r,n){var i,o=n.featurePrefix?n.featurePrefix:E;"1.0.0"===r?i=2:"1.1.0"===r?i=3:"2.0.0"===r&&(i=3.2);var a=Object.assign({node:e},{version:r,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:o,gmlVersion:i,hasZ:n.hasZ,srsName:n.srsName},t);return a}(s,i,a,n);return e&&M("Insert",e,o,u),t&&M("Update",t,o,u),r&&M("Delete",r,o,u),n.nativeElements&&M("Native",n.nativeElements,o,u),s}},{key:"readProjectionFromDocument",value:function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(t);return null}},{key:"readProjectionFromNode",value:function(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild)for(var t=(e=e.firstElementChild.firstElementChild).firstElementChild;t;t=t.nextElementSibling)if(0!==t.childNodes.length&&(1!==t.childNodes.length||3!==t.firstChild.nodeType)){var r=[{}];return this.gmlFormat_.readGeometryElement(t,r),(0,f.U2)(r.pop().srsName)}return null}}])&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(s.Z);function M(e,t,r,n){(0,l.ZL)(n,w,(0,l.G3)(e),t,r)}function k(e,t){return(0,l.O)({},v,e,t)}var R={"http://www.opengis.net/ogc":{FeatureId:(0,l.Ei)((function(e,t){return e.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:(0,l.Ei)((function(e,t){return e.getAttribute("fid")}))}};function B(e,t){(0,l.T3)(R,e,t)}var L={"http://www.opengis.net/wfs":{Feature:B},"http://www.opengis.net/wfs/2.0":{Feature:B}};function D(e,t){return(0,l.O)([],L,e,t)}function j(e,t,r){var a=r[r.length-1],s=a.featureType,u=a.featureNS,c=a.gmlVersion,f=(0,l.c)(u,s);e.appendChild(f),2===c?n.Z.prototype.writeFeatureElement(f,t,r):3===c?i.Z.prototype.writeFeatureElement(f,t,r):o.Z.prototype.writeFeatureElement(f,t,r)}function F(e,t,r){var n=r[r.length-1].version,i=I[n],o=(0,l.c)(i,"Filter"),a=(0,l.c)(i,"FeatureId");o.appendChild(a),a.setAttribute("fid",t),e.appendChild(o)}function N(e,t){var r=(e=e||E)+":";return t.startsWith(r)?t:r+t}function Z(e,t,r){var n=r[r.length-1];(0,c.h)(void 0!==t.getId(),"Features must have an id set");var i=n.featureType,o=n.featurePrefix,a=n.featureNS,s=N(o,i);e.setAttribute("typeName",s),e.setAttributeNS(x,"xmlns:"+o,a);var l=t.getId();void 0!==l&&F(e,l,r)}function U(e,t,r){var n=r[r.length-1];(0,c.h)(void 0!==t.getId(),"Features must have an id set");var i=n.version,o=n.featureType,a=n.featurePrefix,s=n.featureNS,u=N(a,o),f=t.getGeometryName();e.setAttribute("typeName",u),e.setAttributeNS(x,"xmlns:"+a,s);var h=t.getId();if(void 0!==h){for(var p=t.getKeys(),d=[],y=0,g=p.length;y<g;y++){var m=t.get(p[y]);if(void 0!==m){var _=p[y];m&&"function"==typeof m.getSimplifiedGeometry&&(_=f),d.push({name:_,value:m})}}(0,l.ZL)({version:i,gmlVersion:n.gmlVersion,node:e,hasZ:n.hasZ,srsName:n.srsName},w,(0,l.G3)("Property"),d,r),F(e,h,r)}}function Q(e,t,r){var a=r[r.length-1],s=a.version,u=S[s],c=(0,l.c)(u,"Name"),f=a.gmlVersion;if(e.appendChild(c),(0,h.bZ)(c,t.name),void 0!==t.value&&null!==t.value){var p=(0,l.c)(u,"Value");e.appendChild(p),t.value&&"function"==typeof t.value.getSimplifiedGeometry?2===f?n.Z.prototype.writeGeometryElement(p,t.value,r):3===f?i.Z.prototype.writeGeometryElement(p,t.value,r):o.Z.prototype.writeGeometryElement(p,t.value,r):(0,h.bZ)(p,t.value)}}function G(e,t,r){t.vendorId&&e.setAttribute("vendorId",t.vendorId),void 0!==t.safeToIgnore&&e.setAttribute("safeToIgnore",String(t.safeToIgnore)),void 0!==t.value&&(0,h.bZ)(e,t.value)}var z={"http://www.opengis.net/wfs":{Query:(0,l.A4)(q)},"http://www.opengis.net/wfs/2.0":{Query:(0,l.A4)(q)},"http://www.opengis.net/ogc":{During:(0,l.A4)(Y),And:(0,l.A4)(X),Or:(0,l.A4)(X),Not:(0,l.A4)(J),BBOX:(0,l.A4)(W),Contains:(0,l.A4)(K),Intersects:(0,l.A4)(K),Within:(0,l.A4)(K),DWithin:(0,l.A4)(H),PropertyIsEqualTo:(0,l.A4)($),PropertyIsNotEqualTo:(0,l.A4)($),PropertyIsLessThan:(0,l.A4)($),PropertyIsLessThanOrEqualTo:(0,l.A4)($),PropertyIsGreaterThan:(0,l.A4)($),PropertyIsGreaterThanOrEqualTo:(0,l.A4)($),PropertyIsNull:(0,l.A4)(ee),PropertyIsBetween:(0,l.A4)(te),PropertyIsLike:(0,l.A4)(re)},"http://www.opengis.net/fes/2.0":{During:(0,l.A4)(Y),And:(0,l.A4)(X),Or:(0,l.A4)(X),Not:(0,l.A4)(J),BBOX:(0,l.A4)(W),Contains:(0,l.A4)(K),Disjoint:(0,l.A4)(K),Intersects:(0,l.A4)(K),ResourceId:(0,l.A4)((function(e,t,r){e.setAttribute("rid",t.rid)})),Within:(0,l.A4)(K),DWithin:(0,l.A4)(H),PropertyIsEqualTo:(0,l.A4)($),PropertyIsNotEqualTo:(0,l.A4)($),PropertyIsLessThan:(0,l.A4)($),PropertyIsLessThanOrEqualTo:(0,l.A4)($),PropertyIsGreaterThan:(0,l.A4)($),PropertyIsGreaterThanOrEqualTo:(0,l.A4)($),PropertyIsNull:(0,l.A4)(ee),PropertyIsBetween:(0,l.A4)(te),PropertyIsLike:(0,l.A4)(re)}};function q(e,t,r){var n,i,o=r[r.length-1],a=o.version,s=o.featurePrefix,u=o.featureNS,c=o.propertyNames,f=o.srsName;n=s?N(s,t):t,i="2.0.0"===a?"typeNames":"typeName",e.setAttribute(i,n),f&&e.setAttribute("srsName",f),u&&e.setAttributeNS(x,"xmlns:"+s,u);var h=Object.assign({},o);h.node=e,(0,l.ZL)(h,b,(0,l.G3)("PropertyName"),c,r);var p=o.filter;if(p){var d=(0,l.c)(ue(a),"Filter");e.appendChild(d),V(d,p,r)}}function V(e,t,r){var n=r[r.length-1],i={node:e};Object.assign(i,{context:n}),(0,l.ZL)(i,z,(0,l.G3)(t.getTagName()),[t],r)}function W(e,t,r){var n=r[r.length-1],i=n.context.version;n.srsName=t.srsName;var o=O[i];oe(i,e,t.geometryName),o.prototype.writeGeometryElement(e,t.extent,r)}function K(e,t,r){var n=r[r.length-1],i=n.context.version;n.srsName=t.srsName;var o=O[i];oe(i,e,t.geometryName),o.prototype.writeGeometryElement(e,t.geometry,r)}function H(e,t,r){var n=r[r.length-1].context.version;K(e,t,r);var i=(0,l.c)(ue(n),"Distance");(0,h.bZ)(i,t.distance.toString()),"2.0.0"===n?i.setAttribute("uom",t.unit):i.setAttribute("units",t.unit),e.appendChild(i)}function Y(e,t,r){var n=r[r.length-1].context.version;ne(C[n],"ValueReference",e,t.propertyName);var i=(0,l.c)(a.J,"TimePeriod");e.appendChild(i);var o=(0,l.c)(a.J,"begin");i.appendChild(o),ae(o,t.begin);var s=(0,l.c)(a.J,"end");i.appendChild(s),ae(s,t.end)}function X(e,t,r){var n=r[r.length-1].context,i={node:e};Object.assign(i,{context:n});for(var o=t.conditions,a=0,s=o.length;a<s;++a){var u=o[a];(0,l.ZL)(i,z,(0,l.G3)(u.getTagName()),[u],r)}}function J(e,t,r){var n=r[r.length-1].context,i={node:e};Object.assign(i,{context:n});var o=t.condition;(0,l.ZL)(i,z,(0,l.G3)(o.getTagName()),[o],r)}function $(e,t,r){var n=r[r.length-1].context.version;void 0!==t.matchCase&&e.setAttribute("matchCase",t.matchCase.toString()),oe(n,e,t.propertyName),ie(n,e,""+t.expression)}function ee(e,t,r){oe(r[r.length-1].context.version,e,t.propertyName)}function te(e,t,r){var n=r[r.length-1].context.version,i=ue(n);oe(n,e,t.propertyName);var o=(0,l.c)(i,"LowerBoundary");e.appendChild(o),ie(n,o,""+t.lowerBoundary);var a=(0,l.c)(i,"UpperBoundary");e.appendChild(a),ie(n,a,""+t.upperBoundary)}function re(e,t,r){var n=r[r.length-1].context.version;e.setAttribute("wildCard",t.wildCard),e.setAttribute("singleChar",t.singleChar),e.setAttribute("escapeChar",t.escapeChar),void 0!==t.matchCase&&e.setAttribute("matchCase",t.matchCase.toString()),oe(n,e,t.propertyName),ie(n,e,""+t.pattern)}function ne(e,t,r,n){var i=(0,l.c)(e,t);(0,h.bZ)(i,n),r.appendChild(i)}function ie(e,t,r){ne(ue(e),"Literal",t,r)}function oe(e,t,r){"2.0.0"===e?ne(C[e],"ValueReference",t,r):ne(I[e],"PropertyName",t,r)}function ae(e,t){var r=(0,l.c)(a.J,"TimeInstant");e.appendChild(r);var n=(0,l.c)(a.J,"timePosition");r.appendChild(n),(0,h.bZ)(n,t)}function se(e,t){t=t||"1.1.0";var r=(0,l.c)(ue(t),"Filter"),n={node:r};return Object.assign(n,{version:t,filter:e}),V(r,e,[n]),r}function le(e,t,r){var n=r[r.length-1],i=Object.assign({},n);i.node=e,(0,l.ZL)(i,z,(0,l.G3)("Query"),t,r)}function ue(e){return"2.0.0"===e?C[e]:I[e]}const ce=T},64317:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(44993),i=r(76527),o=r(38815),a=r(70278),s=r(48843),l=r(44133),u=r(61900),c=r(92882),f=r(11201),h=r(88658);function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===g(o)?o:String(o)),n)}var i,o}function v(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var A={POINT:u.Z,LINESTRING:o.Z,POLYGON:c.ZP,MULTIPOINT:s.Z,MULTILINESTRING:a.Z,MULTIPOLYGON:l.Z},b="EMPTY",w="Z",E="M",x=0,I=1,S=2,C=3,P=4,O=5,T=6,M={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"},k=function(){function e(t){m(this,e),this.wkt=t,this.index_=-1}return v(e,[{key:"isAlpha_",value:function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}},{key:"isNumeric_",value:function(e,t){return t=void 0!==t&&t,e>="0"&&e<="9"||"."==e&&!t}},{key:"isWhiteSpace_",value:function(e){return" "==e||"\t"==e||"\r"==e||"\n"==e}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var e,t=this.nextChar_(),r=this.index_,n=t;if("("==t)e=S;else if(","==t)e=O;else if(")"==t)e=C;else if(this.isNumeric_(t)||"-"==t)e=P,n=this.readNumber_();else if(this.isAlpha_(t))e=I,n=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);e=T}return{position:r,value:n,type:e}}},{key:"readNumber_",value:function(){var e,t=this.index_,r=!1,n=!1;do{"."==e?r=!0:"e"!=e&&"E"!=e||(n=!0),e=this.nextChar_()}while(this.isNumeric_(e,r)||!n&&("e"==e||"E"==e)||n&&("-"==e||"+"==e));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var e,t=this.index_;do{e=this.nextChar_()}while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}]),e}(),R=function(){function e(t){m(this,e),this.lexer_=t,this.token_={position:0,type:x},this.layout_="XY"}return v(e,[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(e){return this.token_.type==e}},{key:"match",value:function(e){var t=this.isTokenType(e);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var e="XY",t=this.token_;if(this.isTokenType(I)){var r=t.value;r===w?e="XYZ":r===E?e="XYM":"ZM"===r&&(e="XYZM"),"XY"!==e&&this.consume_()}return e}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(S)){var e=[];do{e.push(this.parseGeometry_())}while(this.match(O));if(this.match(C))return e}throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(S)){var e=this.parsePoint_();if(this.match(C))return e}throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(S)){var e=this.parsePointList_();if(this.match(C))return e}throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(S)){var e=this.parseLineStringTextList_();if(this.match(C))return e}throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var e;if(this.match(S)&&(e=this.token_.type==S?this.parsePointTextList_():this.parsePointList_(),this.match(C)))return e;throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(S)){var e=this.parseLineStringTextList_();if(this.match(C))return e}throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(S)){var e=this.parsePolygonTextList_();if(this.match(C))return e}throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var e=[],t=this.layout_.length,r=0;r<t;++r){var n=this.token_;if(!this.match(P))break;e.push(n.value)}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var e=[this.parsePoint_()];this.match(O);)e.push(this.parsePoint_());return e}},{key:"parsePointTextList_",value:function(){for(var e=[this.parsePointText_()];this.match(O);)e.push(this.parsePointText_());return e}},{key:"parseLineStringTextList_",value:function(){for(var e=[this.parseLineStringText_()];this.match(O);)e.push(this.parseLineStringText_());return e}},{key:"parsePolygonTextList_",value:function(){for(var e=[this.parsePolygonText_()];this.match(O);)e.push(this.parsePolygonText_());return e}},{key:"isEmptyGeometry_",value:function(){var e=this.isTokenType(I)&&this.token_.value==b;return e&&this.consume_(),e}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var e=this.token_;if(this.match(I)){var t=e.value;this.layout_=this.parseGeometryLayout_();var r=this.isEmptyGeometry_();if("GEOMETRYCOLLECTION"==t){if(r)return new i.Z([]);var n=this.parseGeometryCollectionText_();return new i.Z(n)}var o,a=A[t];if(!a)throw new Error("Invalid geometry type: "+t);if(r)o="POINT"==t?[NaN,NaN]:[];else switch(t){case"POINT":o=this.parsePointText_();break;case"LINESTRING":o=this.parseLineStringText_();break;case"POLYGON":o=this.parsePolygonText_();break;case"MULTIPOINT":o=this.parseMultiPointText_();break;case"MULTILINESTRING":o=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":o=this.parseMultiPolygonText_()}return new a(o,this.layout_)}throw new Error(this.formatErrorMessage_())}}]),e}(),B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(r,e);var t=d(r);function r(e){var n;return m(this,r),e=e||{},(n=t.call(this)).splitCollection_=void 0!==e.splitCollection&&e.splitCollection,n}return v(r,[{key:"parse_",value:function(e){var t=new k(e);return new R(t).parse()}},{key:"readFeatureFromText",value:function(e,t){var r=this.readGeometryFromText(e,t),i=new n.Z;return i.setGeometry(r),i}},{key:"readFeaturesFromText",value:function(e,t){for(var r=[],i=this.readGeometryFromText(e,t),o=[],a=0,s=(r=this.splitCollection_&&"GeometryCollection"==i.getType()?i.getGeometriesArray():[i]).length;a<s;++a){var l=new n.Z;l.setGeometry(r[a]),o.push(l)}return o}},{key:"readGeometryFromText",value:function(e,t){var r=this.parse_(e);return(0,h.fI)(r,!1,t)}},{key:"writeFeatureText",value:function(e,t){var r=e.getGeometry();return r?this.writeGeometryText(r,t):""}},{key:"writeFeaturesText",value:function(e,t){if(1==e.length)return this.writeFeatureText(e[0],t);for(var r=[],n=0,o=e.length;n<o;++n)r.push(e[n].getGeometry());var a=new i.Z(r);return this.writeGeometryText(a,t)}},{key:"writeGeometryText",value:function(e,t){return N((0,h.fI)(e,!0,t))}}]),r}(f.Z);function L(e){var t=e.getCoordinates();return 0===t.length?"":t.join(" ")}function D(e){for(var t=e.getCoordinates(),r=[],n=0,i=t.length;n<i;++n)r.push(t[n].join(" "));return r.join(",")}function j(e){for(var t=[],r=e.getLinearRings(),n=0,i=r.length;n<i;++n)t.push("("+D(r[n])+")");return t.join(",")}var F={Point:L,LineString:D,Polygon:j,MultiPoint:function(e){for(var t=[],r=e.getPoints(),n=0,i=r.length;n<i;++n)t.push("("+L(r[n])+")");return t.join(",")},MultiLineString:function(e){for(var t=[],r=e.getLineStrings(),n=0,i=r.length;n<i;++n)t.push("("+D(r[n])+")");return t.join(",")},MultiPolygon:function(e){for(var t=[],r=e.getPolygons(),n=0,i=r.length;n<i;++n)t.push("("+j(r[n])+")");return t.join(",")},GeometryCollection:function(e){for(var t=[],r=e.getGeometries(),n=0,i=r.length;n<i;++n)t.push(N(r[n]));return t.join(",")}};function N(e){var t=e.getType(),r=(0,F[t])(e),n=M[t];if("function"==typeof e.getFlatCoordinates){var i=function(e){var t=e.getLayout(),r="";return"XYZ"!==t&&"XYZM"!==t||(r+=w),"XYM"!==t&&"XYZM"!==t||(r+=E),r}(e);i.length>0&&(n+=" "+i)}return 0===r.length?n+" "+b:n+"("+r+")"}const Z=B},88440:(e,t,r)=>{"use strict";r.d(t,{Z:()=>D});var n=r(28628),i=r(42188),o=r(4546),a=r(80122);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h=[null,"http://www.opengis.net/wms"],p=(0,i.C5)(h,{Service:(0,i.Pr)((function(e,t){return(0,i.O)({},g,e,t)})),Capability:(0,i.Pr)((function(e,t){return(0,i.O)({},d,e,t)}))}),d=(0,i.C5)(h,{Request:(0,i.Pr)((function(e,t){return(0,i.O)({},x,e,t)})),Exception:(0,i.Pr)((function(e,t){return(0,i.O)([],A,e,t)})),Layer:(0,i.Pr)((function(e,t){var r=(0,i.O)({},b,e,t);if(void 0===r.Layer)return Object.assign(r,M(e,t));return r}))}),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(a,e);var t,r,n,o=c(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).version=void 0,e}return t=a,(r=[{key:"readFromNode",value:function(e){this.version=e.getAttribute("version").trim();var t=(0,i.O)({version:this.version},p,e,[]);return t||null}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Z),g=(0,i.C5)(h,{Name:(0,i.Pr)(o.s2),Title:(0,i.Pr)(o.s2),Abstract:(0,i.Pr)(o.s2),KeywordList:(0,i.Pr)(L),OnlineResource:(0,i.Pr)(a.Q),ContactInformation:(0,i.Pr)((function(e,t){return(0,i.O)({},m,e,t)})),Fees:(0,i.Pr)(o.s2),AccessConstraints:(0,i.Pr)(o.s2),LayerLimit:(0,i.Pr)(o.$L),MaxWidth:(0,i.Pr)(o.$L),MaxHeight:(0,i.Pr)(o.$L)}),m=(0,i.C5)(h,{ContactPersonPrimary:(0,i.Pr)((function(e,t){return(0,i.O)({},_,e,t)})),ContactPosition:(0,i.Pr)(o.s2),ContactAddress:(0,i.Pr)((function(e,t){return(0,i.O)({},v,e,t)})),ContactVoiceTelephone:(0,i.Pr)(o.s2),ContactFacsimileTelephone:(0,i.Pr)(o.s2),ContactElectronicMailAddress:(0,i.Pr)(o.s2)}),_=(0,i.C5)(h,{ContactPerson:(0,i.Pr)(o.s2),ContactOrganization:(0,i.Pr)(o.s2)}),v=(0,i.C5)(h,{AddressType:(0,i.Pr)(o.s2),Address:(0,i.Pr)(o.s2),City:(0,i.Pr)(o.s2),StateOrProvince:(0,i.Pr)(o.s2),PostCode:(0,i.Pr)(o.s2),Country:(0,i.Pr)(o.s2)}),A=(0,i.C5)(h,{Format:(0,i.Ei)(o.s2)}),b=(0,i.C5)(h,{Name:(0,i.Pr)(o.s2),Title:(0,i.Pr)(o.s2),Abstract:(0,i.Pr)(o.s2),KeywordList:(0,i.Pr)(L),CRS:(0,i.ke)(o.s2),EX_GeographicBoundingBox:(0,i.Pr)((function(e,t){var r=(0,i.O)({},E,e,t);if(!r)return;var n=r.westBoundLongitude,o=r.southBoundLatitude,a=r.eastBoundLongitude,s=r.northBoundLatitude;if(void 0===n||void 0===o||void 0===a||void 0===s)return;return[n,o,a,s]})),BoundingBox:(0,i.ke)((function(e,t){var r=[(0,o.ej)(e.getAttribute("minx")),(0,o.ej)(e.getAttribute("miny")),(0,o.ej)(e.getAttribute("maxx")),(0,o.ej)(e.getAttribute("maxy"))],n=[(0,o.ej)(e.getAttribute("resx")),(0,o.ej)(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS"),extent:r,res:n}})),Dimension:(0,i.ke)((function(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:(0,o.v$)(e.getAttribute("multipleValues")),nearestValue:(0,o.v$)(e.getAttribute("nearestValue")),current:(0,o.v$)(e.getAttribute("current")),values:(0,o.s2)(e)}})),Attribution:(0,i.Pr)((function(e,t){return(0,i.O)({},w,e,t)})),AuthorityURL:(0,i.ke)((function(e,t){var r=k(e,t);if(r)return r.name=e.getAttribute("name"),r;return})),Identifier:(0,i.ke)(o.s2),MetadataURL:(0,i.ke)((function(e,t){var r=k(e,t);if(r)return r.type=e.getAttribute("type"),r;return})),DataURL:(0,i.ke)(k),FeatureListURL:(0,i.ke)(k),Style:(0,i.ke)((function(e,t){return(0,i.O)({},P,e,t)})),MinScaleDenominator:(0,i.Pr)(o.fy),MaxScaleDenominator:(0,i.Pr)(o.fy),Layer:(0,i.ke)(M)}),w=(0,i.C5)(h,{Title:(0,i.Pr)(o.s2),OnlineResource:(0,i.Pr)(a.Q),LogoURL:(0,i.Pr)(B)}),E=(0,i.C5)(h,{westBoundLongitude:(0,i.Pr)(o.fy),eastBoundLongitude:(0,i.Pr)(o.fy),southBoundLatitude:(0,i.Pr)(o.fy),northBoundLatitude:(0,i.Pr)(o.fy)}),x=(0,i.C5)(h,{GetCapabilities:(0,i.Pr)(R),GetMap:(0,i.Pr)(R),GetFeatureInfo:(0,i.Pr)(R)}),I=(0,i.C5)(h,{Format:(0,i.ke)(o.s2),DCPType:(0,i.ke)((function(e,t){return(0,i.O)({},S,e,t)}))}),S=(0,i.C5)(h,{HTTP:(0,i.Pr)((function(e,t){return(0,i.O)({},C,e,t)}))}),C=(0,i.C5)(h,{Get:(0,i.Pr)(k),Post:(0,i.Pr)(k)}),P=(0,i.C5)(h,{Name:(0,i.Pr)(o.s2),Title:(0,i.Pr)(o.s2),Abstract:(0,i.Pr)(o.s2),LegendURL:(0,i.ke)(B),StyleSheetURL:(0,i.Pr)(k),StyleURL:(0,i.Pr)(k)}),O=(0,i.C5)(h,{Format:(0,i.Pr)(o.s2),OnlineResource:(0,i.Pr)(a.Q)}),T=(0,i.C5)(h,{Keyword:(0,i.Ei)(o.s2)});function M(e,t){var r=t[t.length-1],n=(0,i.O)({},b,e,t);if(n){var a=(0,o.v$)(e.getAttribute("queryable"));void 0===a&&(a=r.queryable),n.queryable=void 0!==a&&a;var s=(0,o._E)(e.getAttribute("cascaded"));void 0===s&&(s=r.cascaded),n.cascaded=s;var l=(0,o.v$)(e.getAttribute("opaque"));void 0===l&&(l=r.opaque),n.opaque=void 0!==l&&l;var u=(0,o.v$)(e.getAttribute("noSubsets"));void 0===u&&(u=r.noSubsets),n.noSubsets=void 0!==u&&u;var c=(0,o.ej)(e.getAttribute("fixedWidth"));c||(c=r.fixedWidth),n.fixedWidth=c;var f=(0,o.ej)(e.getAttribute("fixedHeight"));f||(f=r.fixedHeight),n.fixedHeight=f;["Style","CRS","AuthorityURL"].forEach((function(e){if(e in r){var t=n[e]||[];n[e]=t.concat(r[e])}}));return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(e){if(!(e in n)){var t=r[e];n[e]=t}})),n}}function k(e,t){return(0,i.O)({},O,e,t)}function R(e,t){return(0,i.O)({},I,e,t)}function B(e,t){var r=k(e,t);if(r){var n=[(0,o._E)(e.getAttribute("width")),(0,o._E)(e.getAttribute("height"))];return r.size=n,r}}function L(e,t){return(0,i.O)([],T,e,t)}const D=y},40546:(e,t,r)=>{"use strict";r.d(t,{Z:()=>X});var n=r(28628),i=r(42188),o=r(80122),a=r(4546);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h=[null,"http://www.opengis.net/ows/1.1"],p=(0,i.C5)(h,{ServiceIdentification:(0,i.Pr)((function(e,t){return(0,i.O)({},S,e,t)})),ServiceProvider:(0,i.Pr)((function(e,t){return(0,i.O)({},C,e,t)})),OperationsMetadata:(0,i.Pr)((function(e,t){return(0,i.O)({},w,e,t)}))}),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(a,e);var t,r,n,o=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this)}return t=a,(r=[{key:"readFromNode",value:function(e){var t=(0,i.O)({},p,e,[]);return t||null}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Z),y=(0,i.C5)(h,{DeliveryPoint:(0,i.Pr)(a.s2),City:(0,i.Pr)(a.s2),AdministrativeArea:(0,i.Pr)(a.s2),PostalCode:(0,i.Pr)(a.s2),Country:(0,i.Pr)(a.s2),ElectronicMailAddress:(0,i.Pr)(a.s2)}),g=(0,i.C5)(h,{Value:(0,i.ke)((function(e,t){return(0,a.s2)(e)}))}),m=(0,i.C5)(h,{AllowedValues:(0,i.Pr)((function(e,t){return(0,i.O)({},g,e,t)}))}),_=(0,i.C5)(h,{Phone:(0,i.Pr)((function(e,t){return(0,i.O)({},E,e,t)})),Address:(0,i.Pr)((function(e,t){return(0,i.O)({},y,e,t)}))}),v=(0,i.C5)(h,{HTTP:(0,i.Pr)((function(e,t){return(0,i.O)({},A,e,t)}))}),A=(0,i.C5)(h,{Get:(0,i.ke)((function(e,t){var r=(0,o.Q)(e);if(!r)return;return(0,i.O)({href:r},x,e,t)})),Post:void 0}),b=(0,i.C5)(h,{DCP:(0,i.Pr)((function(e,t){return(0,i.O)({},v,e,t)}))}),w=(0,i.C5)(h,{Operation:function(e,t){var r=e.getAttribute("name"),n=(0,i.O)({},b,e,t);if(!n)return;t[t.length-1][r]=n}}),E=(0,i.C5)(h,{Voice:(0,i.Pr)(a.s2),Facsimile:(0,i.Pr)(a.s2)}),x=(0,i.C5)(h,{Constraint:(0,i.ke)((function(e,t){var r=e.getAttribute("name");if(!r)return;return(0,i.O)({name:r},m,e,t)}))}),I=(0,i.C5)(h,{IndividualName:(0,i.Pr)(a.s2),PositionName:(0,i.Pr)(a.s2),ContactInfo:(0,i.Pr)((function(e,t){return(0,i.O)({},_,e,t)}))}),S=(0,i.C5)(h,{Abstract:(0,i.Pr)(a.s2),AccessConstraints:(0,i.Pr)(a.s2),Fees:(0,i.Pr)(a.s2),Title:(0,i.Pr)(a.s2),ServiceTypeVersion:(0,i.Pr)(a.s2),ServiceType:(0,i.Pr)(a.s2)}),C=(0,i.C5)(h,{ProviderName:(0,i.Pr)(a.s2),ProviderSite:(0,i.Pr)(o.Q),ServiceContact:(0,i.Pr)((function(e,t){return(0,i.O)({},I,e,t)}))});const P=d;var O=r(36181);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===T(o)?o:String(o)),n)}var i,o}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=B(e);if(t){var i=B(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var L=[null,"http://www.opengis.net/wmts/1.0"],D=[null,"http://www.opengis.net/ows/1.1"],j=(0,i.C5)(L,{Contents:(0,i.Pr)((function(e,t){return(0,i.O)({},N,e,t)}))}),F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,r,n,o=R(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).owsParser_=new P,e}return t=a,(r=[{key:"readFromNode",value:function(e){var t=e.getAttribute("version");t&&(t=t.trim());var r=this.owsParser_.readFromNode(e);return r?(r.version=t,(r=(0,i.O)(r,j,e,[]))||null):null}}])&&M(t.prototype,r),n&&M(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Z),N=(0,i.C5)(L,{Layer:(0,i.ke)((function(e,t){return(0,i.O)({},Z,e,t)})),TileMatrixSet:(0,i.ke)((function(e,t){return(0,i.O)({},W,e,t)}))}),Z=(0,i.C5)(L,{Style:(0,i.ke)((function(e,t){var r=(0,i.O)({},U,e,t);if(!r)return;var n="true"===e.getAttribute("isDefault");return r.isDefault=n,r})),Format:(0,i.ke)(a.s2),TileMatrixSetLink:(0,i.ke)((function(e,t){return(0,i.O)({},Q,e,t)})),Dimension:(0,i.ke)((function(e,t){return(0,i.O)({},q,e,t)})),ResourceURL:(0,i.ke)((function(e,t){var r=e.getAttribute("format"),n=e.getAttribute("template"),i=e.getAttribute("resourceType"),o={};r&&(o.format=r);n&&(o.template=n);i&&(o.resourceType=i);return o}))},(0,i.C5)(D,{Title:(0,i.Pr)(a.s2),Abstract:(0,i.Pr)(a.s2),WGS84BoundingBox:(0,i.Pr)(H),Identifier:(0,i.Pr)(a.s2)})),U=(0,i.C5)(L,{LegendURL:(0,i.ke)((function(e,t){var r={};return r.format=e.getAttribute("format"),r.href=(0,o.Q)(e),r}))},(0,i.C5)(D,{Title:(0,i.Pr)(a.s2),Identifier:(0,i.Pr)(a.s2)})),Q=(0,i.C5)(L,{TileMatrixSet:(0,i.Pr)(a.s2),TileMatrixSetLimits:(0,i.Pr)((function(e,t){return(0,i.O)([],G,e,t)}))}),G=(0,i.C5)(L,{TileMatrixLimits:(0,i.Ei)((function(e,t){return(0,i.O)({},z,e,t)}))}),z=(0,i.C5)(L,{TileMatrix:(0,i.Pr)(a.s2),MinTileRow:(0,i.Pr)(a.$L),MaxTileRow:(0,i.Pr)(a.$L),MinTileCol:(0,i.Pr)(a.$L),MaxTileCol:(0,i.Pr)(a.$L)}),q=(0,i.C5)(L,{Default:(0,i.Pr)(a.s2),Value:(0,i.ke)(a.s2)},(0,i.C5)(D,{Identifier:(0,i.Pr)(a.s2)})),V=(0,i.C5)(D,{LowerCorner:(0,i.Ei)(Y),UpperCorner:(0,i.Ei)(Y)}),W=(0,i.C5)(L,{WellKnownScaleSet:(0,i.Pr)(a.s2),TileMatrix:(0,i.ke)((function(e,t){return(0,i.O)({},K,e,t)}))},(0,i.C5)(D,{SupportedCRS:(0,i.Pr)(a.s2),Identifier:(0,i.Pr)(a.s2),BoundingBox:(0,i.Pr)(H)})),K=(0,i.C5)(L,{TopLeftCorner:(0,i.Pr)(Y),ScaleDenominator:(0,i.Pr)(a.fy),TileWidth:(0,i.Pr)(a.$L),TileHeight:(0,i.Pr)(a.$L),MatrixWidth:(0,i.Pr)(a.$L),MatrixHeight:(0,i.Pr)(a.$L)},(0,i.C5)(D,{Identifier:(0,i.Pr)(a.s2)}));function H(e,t){var r=(0,i.O)([],V,e,t);if(2==r.length)return(0,O.hI)(r)}function Y(e,t){var r=(0,a.s2)(e).split(/\s+/);if(r&&2==r.length){var n=+r[0],i=+r[1];if(!isNaN(n)&&!isNaN(i))return[n,i]}}const X=F},28628:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(42188);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}const a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,(r=[{key:"read",value:function(e){if(!e)return null;if("string"==typeof e){var t=(0,n.Qc)(e);return this.readFromDocument(t)}return(0,n.qk)(e)?this.readFromDocument(e):this.readFromNode(e)}},{key:"readFromDocument",value:function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}},{key:"readFromNode",value:function(e){}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},26264:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(88658),i=r(20594),o=r(11133),a=r(42188);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,s=c(f);function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=s.call(this)).xmlSerializer_=(0,a.xc)(),e}return t=f,(r=[{key:"getType",value:function(){return"xml"}},{key:"readFeature",value:function(e,t){if(!e)return null;if("string"==typeof e){var r=(0,a.Qc)(e);return this.readFeatureFromDocument(r,t)}return(0,a.qk)(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}},{key:"readFeatureFromDocument",value:function(e,t){var r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}},{key:"readFeatureFromNode",value:function(e,t){return null}},{key:"readFeatures",value:function(e,t){if(!e)return[];if("string"==typeof e){var r=(0,a.Qc)(e);return this.readFeaturesFromDocument(r,t)}return(0,a.qk)(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}},{key:"readFeaturesFromDocument",value:function(e,t){for(var r=[],n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&(0,o.l7)(r,this.readFeaturesFromNode(n,t));return r}},{key:"readFeaturesFromNode",value:function(e,t){return(0,i.O3)()}},{key:"readGeometry",value:function(e,t){if(!e)return null;if("string"==typeof e){var r=(0,a.Qc)(e);return this.readGeometryFromDocument(r,t)}return(0,a.qk)(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}},{key:"readGeometryFromDocument",value:function(e,t){return null}},{key:"readGeometryFromNode",value:function(e,t){return null}},{key:"readProjection",value:function(e){if(!e)return null;if("string"==typeof e){var t=(0,a.Qc)(e);return this.readProjectionFromDocument(t)}return(0,a.qk)(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}},{key:"readProjectionFromDocument",value:function(e){return this.dataProjection}},{key:"readProjectionFromNode",value:function(e){return this.dataProjection}},{key:"writeFeature",value:function(e,t){var r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}},{key:"writeFeatureNode",value:function(e,t){return null}},{key:"writeFeatures",value:function(e,t){var r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}},{key:"writeFeaturesNode",value:function(e,t){return null}},{key:"writeGeometry",value:function(e,t){var r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}},{key:"writeGeometryNode",value:function(e,t){return null}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.ZP)},44983:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{xD:()=>C,VW:()=>T,vX:()=>G,r3:()=>M,ED:()=>R,Q9:()=>q,qv:()=>L,EW:()=>D,tS:()=>Z,wZ:()=>U,kK:()=>k,Ft:()=>Q,Qj:()=>F,MK:()=>N,vL:()=>z,ff:()=>O,eI:()=>j,or:()=>P,uh:()=>B});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"And",Array.prototype.slice.call(arguments))}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(41423).Z);var u=r(56002),c=r(55991),f=r(53711),h=r(93319),p=r(35947),d=r(31042),y=r(4598),g=r(52341),m=r(50836),_=r(21511),v=r(82269),A=r(23256),b=r(31615),w=r(57984),E=r(78148),x=r(84189),I=r(30484),S=r(10435);function C(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(l,t))}function P(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(I.Z,t))}function O(e){return new E.Z(e)}function T(e,t,r){return new u.Z(e,t,r)}function M(e,t,r){return new c.Z(e,t,r)}function k(e,t,r){return new m.Z(e,t,r)}function R(e,t,r){return new h.Z(e,t,r)}function B(e,t,r){return new S.Z(e,t,r)}function L(e,t,r,n,i){return new f.Z(e,t,r,n,i)}function D(e,t,r){return new d.Z(e,t,r)}function j(e,t,r){return new x.Z(e,t,r)}function F(e,t){return new b.Z(e,t)}function N(e,t){return new w.Z(e,t)}function Z(e,t){return new y.Z(e,t)}function U(e,t){return new g.Z(e,t)}function Q(e){return new A.Z(e)}function G(e,t,r){return new _.Z(e,t,r)}function z(e,t,r,n,i,o){return new v.Z(e,t,r,n,i,o)}function q(e,t,r){return new p.Z(e,t,r)}},56002:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=s.call(this,"BBOX")).geometryName=e,n.extent=t,4!==t.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return n.srsName=r,n}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(41530).Z)},32691:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=s.call(this,e)).propertyName=t,r}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(41530).Z)},98220:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(i=s.call(this,e,t)).expression=r,i.matchCase=n,i}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(32691).Z)},55991:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"Contains",e,t,r)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(17827).Z)},53711:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(o=s.call(this,"DWithin",e,t,i)).distance=r,o.unit=n,o}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(17827).Z)},93319:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"Disjoint",e,t,r)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(17827).Z)},35947:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=s.call(this,"During",e)).begin=t,n.end=r,n}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(32691).Z)},31042:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"PropertyIsEqualTo",e,t,r)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(98220).Z)},41530:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.d(t,{Z:()=>o});const o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tagName_=t}var t,r,n;return t=e,(r=[{key:"getTagName",value:function(){return this.tagName_}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},4598:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"PropertyIsGreaterThan",e,t)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(98220).Z)},52341:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"PropertyIsGreaterThanOrEqualTo",e,t)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(98220).Z)},50836:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"Intersects",e,t,r)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(17827).Z)},21511:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=s.call(this,"PropertyIsBetween",e)).lowerBoundary=t,n.upperBoundary=r,n}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(32691).Z)},82269:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r,n,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(a=s.call(this,"PropertyIsLike",e)).pattern=t,a.wildCard=void 0!==r?r:"*",a.singleChar=void 0!==n?n:".",a.escapeChar=void 0!==i?i:"!",a.matchCase=o,a}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(32691).Z)},23256:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"PropertyIsNull",e)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(32691).Z)},31615:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"PropertyIsLessThan",e,t)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(98220).Z)},57984:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"PropertyIsLessThanOrEqualTo",e,t)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(98220).Z)},41423:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(41530),i=r(97972);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,o=l(u);function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=o.call(this,e)).conditions=t,(0,i.h)(r.conditions.length>=2,"At least 2 conditions are required"),r}return t=u,r&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(n.Z)},78148:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,"Not")).condition=e,t}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(41530).Z)},84189:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"PropertyIsNotEqualTo",e,t,r)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(98220).Z)},30484:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"Or",Array.prototype.slice.call(arguments))}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(41423).Z)},17827:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(i=s.call(this,e)).geometryName=t||"the_geom",i.geometry=r,i.srsName=n,i}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(41530).Z)},10435:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),s.call(this,"Within",e,t,r)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(17827).Z)},80122:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i});var n="http://www.w3.org/1999/xlink";function i(e){return e.getAttributeNS(n,"href")}},4546:(e,t,r)=>{"use strict";r.d(t,{$L:()=>c,JD:()=>m,Vi:()=>p,_E:()=>f,bZ:()=>_,ej:()=>u,f3:()=>g,fy:()=>l,hv:()=>y,s2:()=>h,ud:()=>o,v$:()=>a,x7:()=>s,xO:()=>d});var n=r(42188),i=r(68536);function o(e){return a((0,n.Ve)(e,!1))}function a(e){var t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return void 0!==t[1]||!1}function s(e){var t=(0,n.Ve)(e,!1),r=Date.parse(t);return isNaN(r)?void 0:r/1e3}function l(e){return u((0,n.Ve)(e,!1))}function u(e){var t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function c(e){return f((0,n.Ve)(e,!1))}function f(e){var t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function h(e){return(0,n.Ve)(e,!1).trim()}function p(e,t){_(e,t?"1":"0")}function d(e,t){e.appendChild((0,n.Me)().createCDATASection(t))}function y(e,t){var r=new Date(1e3*t),o=r.getUTCFullYear()+"-"+(0,i.v)(r.getUTCMonth()+1,2)+"-"+(0,i.v)(r.getUTCDate(),2)+"T"+(0,i.v)(r.getUTCHours(),2)+":"+(0,i.v)(r.getUTCMinutes(),2)+":"+(0,i.v)(r.getUTCSeconds(),2)+"Z";e.appendChild((0,n.Me)().createTextNode(o))}function g(e,t){var r=t.toPrecision();e.appendChild((0,n.Me)().createTextNode(r))}function m(e,t){var r=t.toString();e.appendChild((0,n.Me)().createTextNode(r))}function _(e,t){e.appendChild((0,n.Me)().createTextNode(t))}},73826:(e,t,r)=>{"use strict";r.d(t,{Dv:()=>o,Vi:()=>l,Zn:()=>a,qe:()=>s,uX:()=>i});var n=r(11133);function i(){return!0}function o(){return!1}function a(){}function s(e){var t,r,i,o=!1;return function(){var a=Array.prototype.slice.call(arguments);return o&&this===i&&(0,n.fS)(a,r)||(o=!0,i=this,r=a,t=e.apply(this,arguments)),t}}function l(e){return function(){var t;try{t=e()}catch(e){return Promise.reject(e)}return t instanceof Promise?t:Promise.resolve(t)}()}},36818:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(14206),i=r(36181),o=r(47895),a=r(32355);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,s=c(f);function f(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),n=s.call(this),void 0!==r&&void 0===t?n.setFlatCoordinates(r,e):(t=t||0,n.setCenterAndRadius(e,t,r)),n}return t=f,(r=[{key:"clone",value:function(){var e=new f(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){var i=this.flatCoordinates,o=e-i[0],a=t-i[1],s=o*o+a*a;if(s<n){if(0===s)for(var l=0;l<this.stride;++l)r[l]=i[l];else{var u=this.getRadius()/Math.sqrt(s);r[0]=i[0]+u*o,r[1]=i[1]+u*a;for(var c=2;c<this.stride;++c)r[c]=i[c]}return r.length=this.stride,s}return n}},{key:"containsXY",value:function(e,t){var r=this.flatCoordinates,n=e-r[0],i=t-r[1];return n*n+i*i<=this.getRadiusSquared_()}},{key:"getCenter",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"computeExtent",value:function(e){var t=this.flatCoordinates,r=t[this.stride]-t[0];return(0,i.T9)(t[0]-r,t[1]-r,t[0]+r,t[1]+r,e)}},{key:"getRadius",value:function(){return Math.sqrt(this.getRadiusSquared_())}},{key:"getRadiusSquared_",value:function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}},{key:"getType",value:function(){return"Circle"}},{key:"intersectsExtent",value:function(e){var t=this.getExtent();if((0,i.kK)(e,t)){var r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]||(0,i.H6)(e,this.intersectsCoordinate.bind(this))}return!1}},{key:"setCenter",value:function(e){var t=this.stride,r=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+r;for(var i=1;i<t;++i)n[t+i]=e[i];this.setFlatCoordinates(this.layout,n),this.changed()}},{key:"setCenterAndRadius",value:function(e,t,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,i=(0,o.IG)(n,0,e,this.stride);n[i++]=n[0]+t;for(var a=1,s=this.stride;a<s;++a)n[i++]=n[a];n.length=i,this.changed()}},{key:"getCoordinates",value:function(){return null}},{key:"setCoordinates",value:function(e,t){}},{key:"setRadius",value:function(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}},{key:"rotate",value:function(e,t){var r=this.getCenter(),n=this.getStride();this.setCenter((0,a.U1)(r,0,r.length,n,e,t,r)),this.changed()}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.ZP);h.prototype.transform;const p=h},21815:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(40439),i=r(20594),o=r(16453),a=r(36181),s=r(27811),l=r(73826),u=r(32355);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(o)?o:String(o)),n)}var i,o}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var y=(0,o.Ue)();const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(d,e);var t,r,n,c=p(d);function d(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(e=c.call(this)).extent_=(0,a.lJ)(),e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=(0,l.qe)((function(e,t,r){if(!r)return this.getSimplifiedGeometry(t);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(t)})),e}return t=d,(r=[{key:"simplifyTransformed",value:function(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}},{key:"clone",value:function(){return(0,i.O3)()}},{key:"closestPointXY",value:function(e,t,r,n){return(0,i.O3)()}},{key:"containsXY",value:function(e,t){var r=this.getClosestPoint([e,t]);return r[0]===e&&r[1]===t}},{key:"getClosestPoint",value:function(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}},{key:"intersectsCoordinate",value:function(e){return this.containsXY(e[0],e[1])}},{key:"computeExtent",value:function(e){return(0,i.O3)()}},{key:"getExtent",value:function(e){if(this.extentRevision_!=this.getRevision()){var t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&(0,a.YN)(t),this.extentRevision_=this.getRevision()}return(0,a.EO)(this.extent_,e)}},{key:"rotate",value:function(e,t){(0,i.O3)()}},{key:"scale",value:function(e,t,r){(0,i.O3)()}},{key:"simplify",value:function(e){return this.getSimplifiedGeometry(e*e)}},{key:"getSimplifiedGeometry",value:function(e){return(0,i.O3)()}},{key:"getType",value:function(){return(0,i.O3)()}},{key:"applyTransform",value:function(e){(0,i.O3)()}},{key:"intersectsExtent",value:function(e){return(0,i.O3)()}},{key:"translate",value:function(e,t){(0,i.O3)()}},{key:"transform",value:function(e,t){var r=(0,s.U2)(e),n="tile-pixels"==r.getUnits()?function(e,n,i){var l=r.getExtent(),c=r.getWorldExtent(),f=(0,a.Cr)(c)/(0,a.Cr)(l);return(0,o.qC)(y,c[0],c[3],f,-f,0,0,0),(0,u.vT)(e,0,e.length,i,y,n),(0,s.Ck)(r,t)(e,n,i)}:(0,s.Ck)(r,t);return this.applyTransform(n),this}}])&&f(t.prototype,r),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),d}(n.Z)},76527:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(2115),i=r(21815),o=r(36181),a=r(34586);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},u.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(e){for(var t=[],r=0,n=e.length;r<n;++r)t.push(e[r].clone());return t}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(d,e);var t,r,i,s=f(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=s.call(this)).geometries_=e||null,t.changeEventsKeys_=[],t.listenGeometriesChange_(),t}return t=d,(r=[{key:"unlistenGeometriesChange_",value:function(){this.changeEventsKeys_.forEach(a.bN),this.changeEventsKeys_.length=0}},{key:"listenGeometriesChange_",value:function(){if(this.geometries_)for(var e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push((0,a.oL)(this.geometries_[e],n.Z.CHANGE,this.changed,this))}},{key:"clone",value:function(){var e=new d(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){if(n<(0,o.qf)(this.getExtent(),e,t))return n;for(var i=this.geometries_,a=0,s=i.length;a<s;++a)n=i[a].closestPointXY(e,t,r,n);return n}},{key:"containsXY",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(e,t))return!0;return!1}},{key:"computeExtent",value:function(e){(0,o.YN)(e);for(var t=this.geometries_,r=0,n=t.length;r<n;++r)(0,o.l7)(e,t[r].getExtent());return e}},{key:"getGeometries",value:function(){return p(this.geometries_)}},{key:"getGeometriesArray",value:function(){return this.geometries_}},{key:"getGeometriesArrayRecursive",value:function(){for(var e=[],t=this.geometries_,r=0,n=t.length;r<n;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}},{key:"getSimplifiedGeometry",value:function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var t=[],r=this.geometries_,n=!1,i=0,o=r.length;i<o;++i){var a=r[i],s=a.getSimplifiedGeometry(e);t.push(s),s!==a&&(n=!0)}if(n){var l=new d(null);return l.setGeometriesArray(t),l}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}},{key:"getType",value:function(){return"GeometryCollection"}},{key:"intersectsExtent",value:function(e){for(var t=this.geometries_,r=0,n=t.length;r<n;++r)if(t[r].intersectsExtent(e))return!0;return!1}},{key:"isEmpty",value:function(){return 0===this.geometries_.length}},{key:"rotate",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(e,t);this.changed()}},{key:"scale",value:function(e,t,r){r||(r=(0,o.qg)(this.getExtent()));for(var n=this.geometries_,i=0,a=n.length;i<a;++i)n[i].scale(e,t,r);this.changed()}},{key:"setGeometries",value:function(e){this.setGeometriesArray(p(e))}},{key:"setGeometriesArray",value:function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}},{key:"applyTransform",value:function(e){for(var t=this.geometries_,r=0,n=t.length;r<n;++r)t[r].applyTransform(e);this.changed()}},{key:"translate",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(e,t);this.changed()}},{key:"disposeInternal",value:function(){this.unlistenGeometriesChange_(),u(h(d.prototype),"disposeInternal",this).call(this)}}])&&l(t.prototype,r),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.Z)},38815:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(14206),i=r(45996),o=r(36181),a=r(47895),s=r(30164),l=r(11133),u=r(36151),c=r(20105),f=r(45057),h=r(871),p=r(38768);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===d(o)?o:String(o)),n)}var i,o}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(_,e);var t,r,n,d=m(_);function _(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(r=d.call(this)).flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?r.setCoordinates(e,t):r.setFlatCoordinates(t,e),r}return t=_,(r=[{key:"appendCoordinate",value:function(e){this.flatCoordinates?(0,l.l7)(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}},{key:"clone",value:function(){var e=new _(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){return n<(0,o.qf)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,i.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,i.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,n))}},{key:"forEachSegment",value:function(e){return(0,u.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}},{key:"getCoordinateAtM",value:function(e,t){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(t=void 0!==t&&t,(0,f.iJ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}},{key:"getCoordinates",value:function(){return(0,c.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinateAt",value:function(e,t){return(0,f.WW)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}},{key:"getLength",value:function(){return(0,p.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getFlatMidpoint",value:function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}},{key:"getSimplifiedGeometryInternal",value:function(e){var t=[];return t.length=(0,s.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new _(t,"XY")}},{key:"getType",value:function(){return"LineString"}},{key:"intersectsExtent",value:function(e){return(0,h.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,a.Sg)(this.flatCoordinates,0,e,this.stride),this.changed()}}])&&y(t.prototype,r),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),_}(n.ZP)},85302:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(14206),i=r(45996),o=r(36181),a=r(47895),s=r(30164),l=r(20105),u=r(79273);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(o)?o:String(o)),n)}var i,o}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(d,e);var t,r,n,c=p(d);function d(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(r=c.call(this)).maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===t||Array.isArray(e[0])?r.setCoordinates(e,t):r.setFlatCoordinates(t,e),r}return t=d,(r=[{key:"clone",value:function(){return new d(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(e,t,r,n){return n<(0,o.qf)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,i.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,i.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,n))}},{key:"getArea",value:function(){return(0,u.QQ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinates",value:function(){return(0,l.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getSimplifiedGeometryInternal",value:function(e){var t=[];return t.length=(0,s.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new d(t,"XY")}},{key:"getType",value:function(){return"LinearRing"}},{key:"intersectsExtent",value:function(e){return!1}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,a.Sg)(this.flatCoordinates,0,e,this.stride),this.changed()}}])&&f(t.prototype,r),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),d}(n.ZP)},70278:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(38815),i=r(14206),o=r(45996),a=r(36181),s=r(47895),l=r(30164),u=r(11133),c=r(20105),f=r(45057),h=r(871);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}const _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(m,e);var t,r,i,p=g(m);function m(e,t,r){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(n=p.call(this)).ends_=[],n.maxDelta_=-1,n.maxDeltaRevision_=-1,Array.isArray(e[0]))n.setCoordinates(e,t);else if(void 0!==t&&r)n.setFlatCoordinates(t,e),n.ends_=r;else{for(var i=n.getLayout(),o=e,a=[],s=[],l=0,c=o.length;l<c;++l){var f=o[l];0===l&&(i=f.getLayout()),(0,u.l7)(a,f.getFlatCoordinates()),s.push(a.length)}n.setFlatCoordinates(i,a),n.ends_=s}return n}return t=m,(r=[{key:"appendLineString",value:function(e){this.flatCoordinates?(0,u.l7)(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var e=new m(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){return n<(0,a.qf)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,n))}},{key:"getCoordinateAtM",value:function(e,t,r){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(t=void 0!==t&&t,r=void 0!==r&&r,(0,f.dG)(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}},{key:"getCoordinates",value:function(){return(0,c.o1)(this.flatCoordinates,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getLineString",value:function(e){return e<0||this.ends_.length<=e?null:new n.Z(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}},{key:"getLineStrings",value:function(){for(var e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[],o=0,a=0,s=t.length;a<s;++a){var l=t[a],u=new n.Z(e.slice(o,l),r);i.push(u),o=l}return i}},{key:"getFlatMidpoints",value:function(){for(var e=[],t=this.flatCoordinates,r=0,n=this.ends_,i=this.stride,o=0,a=n.length;o<a;++o){var s=n[o],l=(0,f.WW)(t,r,s,i,.5);(0,u.l7)(e,l),r=s}return e}},{key:"getSimplifiedGeometryInternal",value:function(e){var t=[],r=[];return t.length=(0,l.UJ)(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new m(t,"XY",r)}},{key:"getType",value:function(){return"MultiLineString"}},{key:"intersectsExtent",value:function(e){return(0,h.AW)(this.flatCoordinates,0,this.ends_,this.stride,e)}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=(0,s._5)(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}])&&d(t.prototype,r),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),m}(i.ZP)},48843:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(61900),i=r(14206),o=r(36181),a=r(47895),s=r(11133),l=r(20105),u=r(7697);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(o)?o:String(o)),n)}var i,o}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(d,e);var t,r,i,c=p(d);function d(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),r=c.call(this),t&&!Array.isArray(e[0])?r.setFlatCoordinates(t,e):r.setCoordinates(e,t),r}return t=d,(r=[{key:"appendPoint",value:function(e){this.flatCoordinates?(0,s.l7)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}},{key:"clone",value:function(){var e=new d(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){if(n<(0,o.qf)(this.getExtent(),e,t))return n;for(var i=this.flatCoordinates,a=this.stride,s=0,l=i.length;s<l;s+=a){var c=(0,u.bI)(e,t,i[s],i[s+1]);if(c<n){n=c;for(var f=0;f<a;++f)r[f]=i[s+f];r.length=a}}return n}},{key:"getCoordinates",value:function(){return(0,l.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getPoint",value:function(e){var t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return e<0||t<=e?null:new n.Z(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}},{key:"getPoints",value:function(){for(var e=this.flatCoordinates,t=this.layout,r=this.stride,i=[],o=0,a=e.length;o<a;o+=r){var s=new n.Z(e.slice(o,o+r),t);i.push(s)}return i}},{key:"getType",value:function(){return"MultiPoint"}},{key:"intersectsExtent",value:function(e){for(var t=this.flatCoordinates,r=this.stride,n=0,i=t.length;n<i;n+=r){var a=t[n],s=t[n+1];if((0,o.jE)(e,a,s))return!0}return!1}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,a.Sg)(this.flatCoordinates,0,e,this.stride),this.changed()}}])&&f(t.prototype,r),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.ZP)},44133:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(48843),i=r(92882),o=r(14206),a=r(45996),s=r(36181),l=r(47895),u=r(11133),c=r(70935),f=r(20105),h=r(871),p=r(98180),d=r(79273),y=r(30545),g=r(62221),m=r(30164);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===_(o)?o:String(o)),n)}var i,o}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}const E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(w,e);var t,r,o,_=b(w);function w(e,t,r){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(n=_.call(this)).endss_=[],n.flatInteriorPointsRevision_=-1,n.flatInteriorPoints_=null,n.maxDelta_=-1,n.maxDeltaRevision_=-1,n.orientedRevision_=-1,n.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var i=n.getLayout(),o=e,a=[],s=[],l=0,c=o.length;l<c;++l){var f=o[l];0===l&&(i=f.getLayout());for(var h=a.length,p=f.getEnds(),d=0,y=p.length;d<y;++d)p[d]+=h;(0,u.l7)(a,f.getFlatCoordinates()),s.push(p)}t=i,e=a,r=s}return void 0!==t&&r?(n.setFlatCoordinates(t,e),n.endss_=r):n.setCoordinates(e,t),n}return t=w,(r=[{key:"appendPolygon",value:function(e){var t;if(this.flatCoordinates){var r=this.flatCoordinates.length;(0,u.l7)(this.flatCoordinates,e.getFlatCoordinates());for(var n=0,i=(t=e.getEnds().slice()).length;n<i;++n)t[n]+=r}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()}},{key:"clone",value:function(){for(var e=this.endss_.length,t=new Array(e),r=0;r<e;++r)t[r]=this.endss_[r].slice();var n=new w(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}},{key:"closestPointXY",value:function(e,t,r,n){return n<(0,s.qf)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,n))}},{key:"containsXY",value:function(e,t){return(0,g.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}},{key:"getArea",value:function(){return(0,d.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}},{key:"getCoordinates",value:function(e){var t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),(0,p.dL)(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,(0,f.ug)(t,0,this.endss_,this.stride)}},{key:"getEndss",value:function(){return this.endss_}},{key:"getFlatInteriorPoints",value:function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var e=(0,y.E)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,c.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}},{key:"getInteriorPoints",value:function(){return new n.Z(this.getFlatInteriorPoints().slice(),"XYM")}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;(0,p.Oj)(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=(0,p.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(e){var t=[],r=[];return t.length=(0,m.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new w(t,"XY",r)}},{key:"getPolygon",value:function(e){if(e<0||this.endss_.length<=e)return null;var t;if(0===e)t=0;else{var r=this.endss_[e-1];t=r[r.length-1]}var n=this.endss_[e].slice(),o=n[n.length-1];if(0!==t)for(var a=0,s=n.length;a<s;++a)n[a]-=t;return new i.ZP(this.flatCoordinates.slice(t,o),this.layout,n)}},{key:"getPolygons",value:function(){for(var e=this.layout,t=this.flatCoordinates,r=this.endss_,n=[],o=0,a=0,s=r.length;a<s;++a){var l=r[a].slice(),u=l[l.length-1];if(0!==o)for(var c=0,f=l.length;c<f;++c)l[c]-=o;var h=new i.ZP(t.slice(o,u),e,l);n.push(h),o=u}return n}},{key:"getType",value:function(){return"MultiPolygon"}},{key:"intersectsExtent",value:function(e){return(0,h.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=(0,l.QT)(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var n=r[r.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()}}])&&v(t.prototype,r),o&&v(t,o),Object.defineProperty(t,"prototype",{writable:!1}),w}(o.ZP)},61900:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(14206),i=r(36181),o=r(47895),a=r(7697);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,s=c(f);function f(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(r=s.call(this)).setCoordinates(e,t),r}return t=f,(r=[{key:"clone",value:function(){var e=new f(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){var i=this.flatCoordinates,o=(0,a.bI)(e,t,i[0],i[1]);if(o<n){for(var s=this.stride,l=0;l<s;++l)r[l]=i[l];return r.length=s,o}return n}},{key:"getCoordinates",value:function(){return this.flatCoordinates?this.flatCoordinates.slice():[]}},{key:"computeExtent",value:function(e){return(0,i.HK)(this.flatCoordinates,e)}},{key:"getType",value:function(){return"Point"}},{key:"intersectsExtent",value:function(e){return(0,i.jE)(e,this.flatCoordinates[0],this.flatCoordinates[1])}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.IG)(this.flatCoordinates,0,e,this.stride),this.changed()}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.ZP)},92882:(e,t,r)=>{"use strict";r.d(t,{Bb:()=>P,Ej:()=>O,ZP:()=>I,iu:()=>S,oJ:()=>C});var n=r(85302),i=r(61900),o=r(14206),a=r(45996),s=r(36181),l=r(47895),u=r(11133),c=r(70935),f=r(20105),h=r(871),p=r(98180),d=r(79273),y=r(62221),g=r(7697),m=r(30164),_=r(16092);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===v(o)?o:String(o)),n)}var i,o}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(_,e);var t,r,o,g=w(_);function _(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(n=g.call(this)).ends_=[],n.flatInteriorPointRevision_=-1,n.flatInteriorPoint_=null,n.maxDelta_=-1,n.maxDeltaRevision_=-1,n.orientedRevision_=-1,n.orientedFlatCoordinates_=null,void 0!==t&&r?(n.setFlatCoordinates(t,e),n.ends_=r):n.setCoordinates(e,t),n}return t=_,(r=[{key:"appendLinearRing",value:function(e){this.flatCoordinates?(0,u.l7)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){var e=new _(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}},{key:"closestPointXY",value:function(e,t,r,n){return n<(0,s.qf)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,n))}},{key:"containsXY",value:function(e,t){return(0,y.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}},{key:"getArea",value:function(){return(0,d.KP)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}},{key:"getCoordinates",value:function(e){var t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),(0,p.zX)(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,(0,f.o1)(t,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getFlatInteriorPoint",value:function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=(0,s.qg)(this.getExtent());this.flatInteriorPoint_=(0,c.X)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}},{key:"getInteriorPoint",value:function(){return new i.Z(this.getFlatInteriorPoint(),"XYM")}},{key:"getLinearRingCount",value:function(){return this.ends_.length}},{key:"getLinearRing",value:function(e){return e<0||this.ends_.length<=e?null:new n.Z(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}},{key:"getLinearRings",value:function(){for(var e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[],o=0,a=0,s=r.length;a<s;++a){var l=r[a],u=new n.Z(t.slice(o,l),e);i.push(u),o=l}return i}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;(0,p.$v)(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=(0,p.zX)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(e){var t=[],r=[];return t.length=(0,m.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new _(t,"XY",r)}},{key:"getType",value:function(){return"Polygon"}},{key:"intersectsExtent",value:function(e){return(0,h.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}},{key:"setCoordinates",value:function(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=(0,l._5)(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}])&&A(t.prototype,r),o&&A(t,o),Object.defineProperty(t,"prototype",{writable:!1}),_}(o.ZP);const I=x;function S(e,t,r,n){r=r||32;for(var i=[],o=0;o<r;++o)(0,u.l7)(i,(0,_.cv)(e,t,2*Math.PI*o/r,n));return i.push(i[0],i[1]),new x(i,"XY",[i.length])}function C(e){if((0,s.xb)(e))throw new Error("Cannot create polygon from empty extent");var t=e[0],r=e[1],n=e[2],i=e[3],o=[t,r,t,i,n,i,n,r,t,r];return new x(o,"XY",[o.length])}function P(e,t,r){t=t||32;for(var n=e.getStride(),i=e.getLayout(),o=e.getCenter(),a=n*(t+1),s=new Array(a),l=0;l<a;l+=n){s[l]=0,s[l+1]=0;for(var u=2;u<n;u++)s[l+u]=o[u]}var c=[s.length],f=new x(s,i,c);return O(f,o,e.getRadius(),r),f}function O(e,t,r,n){for(var i=e.getFlatCoordinates(),o=e.getStride(),a=i.length/o-1,s=n||0,l=0;l<=a;++l){var u=l*o,c=s+2*(0,g.$W)(l,a)*Math.PI/a;i[u]=t[0]+r*Math.cos(c),i[u+1]=t[1]+r*Math.sin(c)}e.changed()}},14206:(e,t,r)=>{"use strict";r.d(t,{Kr:()=>p,ZP:()=>d,tP:()=>h});var n=r(21815),i=r(20594),o=r(36181),a=r(32355);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(e){var t;return"XY"==e?t=2:"XYZ"==e||"XYM"==e?t=3:"XYZM"==e&&(t=4),t}function p(e,t,r){var n=e.getFlatCoordinates();if(!n)return null;var i=e.getStride();return(0,a.vT)(n,0,n.length,i,t,r)}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,s=c(f);function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=s.call(this)).layout="XY",e.stride=2,e.flatCoordinates=null,e}return t=f,(r=[{key:"computeExtent",value:function(e){return(0,o.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}},{key:"getCoordinates",value:function(){return(0,i.O3)()}},{key:"getFirstCoordinate",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"getFlatCoordinates",value:function(){return this.flatCoordinates}},{key:"getLastCoordinate",value:function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}},{key:"getLayout",value:function(){return this.layout}},{key:"getSimplifiedGeometry",value:function(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}},{key:"getSimplifiedGeometryInternal",value:function(e){return this}},{key:"getStride",value:function(){return this.stride}},{key:"setFlatCoordinates",value:function(e,t){this.stride=h(e),this.layout=e,this.flatCoordinates=t}},{key:"setCoordinates",value:function(e,t){(0,i.O3)()}},{key:"setLayout",value:function(e,t,r){var n;if(e)n=h(e);else{for(var i=0;i<r;++i){if(0===t.length)return this.layout="XY",void(this.stride=2);t=t[0]}e=function(e){var t;return 2==e?t="XY":3==e?t="XYZ":4==e&&(t="XYZM"),t}(n=t.length)}this.layout=e,this.stride=n}},{key:"applyTransform",value:function(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}},{key:"rotate",value:function(e,t){var r=this.getFlatCoordinates();if(r){var n=this.getStride();(0,a.U1)(r,0,r.length,n,e,t,r),this.changed()}}},{key:"scale",value:function(e,t,r){void 0===t&&(t=e),r||(r=(0,o.qg)(this.getExtent()));var n=this.getFlatCoordinates();if(n){var i=this.getStride();(0,a.bA)(n,0,n.length,i,e,t,r,n),this.changed()}}},{key:"translate",value:function(e,t){var r=this.getFlatCoordinates();if(r){var n=this.getStride();(0,a.Iu)(r,0,r.length,n,e,t,r),this.changed()}}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},79273:(e,t,r)=>{"use strict";function n(e,t,r,n){for(var i=0,o=e[r-n],a=e[r-n+1];t<r;t+=n){var s=e[t],l=e[t+1];i+=a*s-o*l,o=s,a=l}return i/2}function i(e,t,r,i){for(var o=0,a=0,s=r.length;a<s;++a){var l=r[a];o+=n(e,t,l,i),t=l}return o}function o(e,t,r,n){for(var o=0,a=0,s=r.length;a<s;++a){var l=r[a];o+=i(e,t,l,n),t=l[l.length-1]}return o}r.d(t,{Eu:()=>o,KP:()=>i,QQ:()=>n})},30545:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var n=r(36181);function i(e,t,r,i){for(var o=[],a=(0,n.lJ)(),s=0,l=r.length;s<l;++s){var u=r[s];a=(0,n.GN)(e,t,u[0],i),o.push((a[0]+a[2])/2,(a[1]+a[3])/2),t=u[u.length-1]}return o}},45996:(e,t,r)=>{"use strict";r.d(t,{Af:()=>a,Bv:()=>o,H$:()=>l,Xl:()=>u,gI:()=>c,sD:()=>s});var n=r(7697);function i(e,t,r,i,o,a,s){var l,u=e[t],c=e[t+1],f=e[r]-u,h=e[r+1]-c;if(0===f&&0===h)l=t;else{var p=((o-u)*f+(a-c)*h)/(f*f+h*h);if(p>1)l=r;else{if(p>0){for(var d=0;d<i;++d)s[d]=(0,n.t7)(e[t+d],e[r+d],p);return void(s.length=i)}l=t}}for(var y=0;y<i;++y)s[y]=e[l+y];s.length=i}function o(e,t,r,i,o){var a=e[t],s=e[t+1];for(t+=i;t<r;t+=i){var l=e[t],u=e[t+1],c=(0,n.bI)(a,s,l,u);c>o&&(o=c),a=l,s=u}return o}function a(e,t,r,n,i){for(var a=0,s=r.length;a<s;++a){var l=r[a];i=o(e,t,l,n,i),t=l}return i}function s(e,t,r,n,i){for(var o=0,s=r.length;o<s;++o){var l=r[o];i=a(e,t,l,n,i),t=l[l.length-1]}return i}function l(e,t,r,o,a,s,l,u,c,f,h){if(t==r)return f;var p,d;if(0===a){if((d=(0,n.bI)(l,u,e[t],e[t+1]))<f){for(p=0;p<o;++p)c[p]=e[t+p];return c.length=o,d}return f}h=h||[NaN,NaN];for(var y=t+o;y<r;)if(i(e,y-o,y,o,l,u,h),(d=(0,n.bI)(l,u,h[0],h[1]))<f){for(f=d,p=0;p<o;++p)c[p]=h[p];c.length=o,y+=o}else y+=o*Math.max((Math.sqrt(d)-Math.sqrt(f))/a|0,1);if(s&&(i(e,r-o,t,o,l,u,h),(d=(0,n.bI)(l,u,h[0],h[1]))<f)){for(f=d,p=0;p<o;++p)c[p]=h[p];c.length=o}return f}function u(e,t,r,n,i,o,a,s,u,c,f){f=f||[NaN,NaN];for(var h=0,p=r.length;h<p;++h){var d=r[h];c=l(e,t,d,n,i,o,a,s,u,c,f),t=d}return c}function c(e,t,r,n,i,o,a,s,l,c,f){f=f||[NaN,NaN];for(var h=0,p=r.length;h<p;++h){var d=r[h];c=u(e,t,d,n,i,o,a,s,l,c,f),t=d[d.length-1]}return c}},62221:(e,t,r)=>{"use strict";r.d(t,{TG:()=>o,Zl:()=>s,uG:()=>i,wY:()=>a});var n=r(36181);function i(e,t,r,i,a){return!(0,n.H6)(a,(function(n){return!o(e,t,r,i,n[0],n[1])}))}function o(e,t,r,n,i,o){for(var a=0,s=e[r-n],l=e[r-n+1];t<r;t+=n){var u=e[t],c=e[t+1];l<=o?c>o&&(u-s)*(o-l)-(i-s)*(c-l)>0&&a++:c<=o&&(u-s)*(o-l)-(i-s)*(c-l)<0&&a--,s=u,l=c}return 0!==a}function a(e,t,r,n,i,a){if(0===r.length)return!1;if(!o(e,t,r[0],n,i,a))return!1;for(var s=1,l=r.length;s<l;++s)if(o(e,r[s-1],r[s],n,i,a))return!1;return!0}function s(e,t,r,n,i,o){if(0===r.length)return!1;for(var s=0,l=r.length;s<l;++s){var u=r[s];if(a(e,t,u,n,i,o))return!0;t=u[u.length-1]}return!1}},47895:(e,t,r)=>{"use strict";function n(e,t,r,n){for(var i=0,o=r.length;i<o;++i)e[t++]=r[i];return t}function i(e,t,r,n){for(var i=0,o=r.length;i<o;++i)for(var a=r[i],s=0;s<n;++s)e[t++]=a[s];return t}function o(e,t,r,n,o){o=o||[];for(var a=0,s=0,l=r.length;s<l;++s){var u=i(e,t,r[s],n);o[a++]=u,t=u}return o.length=a,o}function a(e,t,r,n,i){i=i||[];for(var a=0,s=0,l=r.length;s<l;++s){var u=o(e,t,r[s],n,i[a]);0===u.length&&(u[0]=t),i[a++]=u,t=u[u.length-1]}return i.length=a,i}r.d(t,{IG:()=>n,QT:()=>a,Sg:()=>i,_5:()=>o})},20105:(e,t,r)=>{"use strict";function n(e,t,r,n,i){i=void 0!==i?i:[];for(var o=0,a=t;a<r;a+=n)i[o++]=e.slice(a,a+n);return i.length=o,i}function i(e,t,r,i,o){o=void 0!==o?o:[];for(var a=0,s=0,l=r.length;s<l;++s){var u=r[s];o[a++]=n(e,t,u,i,o[a]),t=u}return o.length=a,o}function o(e,t,r,n,o){o=void 0!==o?o:[];for(var a=0,s=0,l=r.length;s<l;++s){var u=r[s];o[a++]=1===u.length&&u[0]===t?[]:i(e,t,u,n,o[a]),t=u[u.length-1]}return o.length=a,o}r.d(t,{Ml:()=>n,o1:()=>i,ug:()=>o})},70935:(e,t,r)=>{"use strict";r.d(t,{U:()=>a,X:()=>o});var n=r(11133),i=r(62221);function o(e,t,r,o,a,s,l){for(var u,c,f,h,p,d,y,g=a[s+1],m=[],_=0,v=r.length;_<v;++_){var A=r[_];for(h=e[A-o],d=e[A-o+1],u=t;u<A;u+=o)p=e[u],y=e[u+1],(g<=d&&y<=g||d<=g&&g<=y)&&(f=(g-d)/(y-d)*(p-h)+h,m.push(f)),h=p,d=y}var b=NaN,w=-1/0;for(m.sort(n.j2),h=m[0],u=1,c=m.length;u<c;++u){p=m[u];var E=Math.abs(p-h);E>w&&(f=(h+p)/2,(0,i.wY)(e,t,r,o,f,g)&&(b=f,w=E)),h=p}return isNaN(b)&&(b=a[s]),l?(l.push(b,g,w),l):[b,g,w]}function a(e,t,r,n,i){for(var a=[],s=0,l=r.length;s<l;++s){var u=r[s];a=o(e,t,u,n,i,2*s,a),t=u[u.length-1]}return a}},45057:(e,t,r)=>{"use strict";r.d(t,{WW:()=>o,dG:()=>s,iJ:()=>a});var n=r(11133),i=r(7697);function o(e,t,r,o,a,s,l){var u,c,f=(r-t)/o;if(1===f)u=t;else if(2===f)u=t,c=a;else if(0!==f){for(var h=e[t],p=e[t+1],d=0,y=[0],g=t+o;g<r;g+=o){var m=e[g],_=e[g+1];d+=Math.sqrt((m-h)*(m-h)+(_-p)*(_-p)),y.push(d),h=m,p=_}var v=a*d,A=(0,n.ry)(y,v);A<0?(c=(v-y[-A-2])/(y[-A-1]-y[-A-2]),u=t+(-A-2)*o):u=t+A*o}l=l>1?l:2,s=s||new Array(l);for(var b=0;b<l;++b)s[b]=void 0===u?NaN:void 0===c?e[u+b]:(0,i.t7)(e[u+b],e[u+o+b],c);return s}function a(e,t,r,n,o,a){if(r==t)return null;var s;if(o<e[t+n-1])return a?((s=e.slice(t,t+n))[n-1]=o,s):null;if(e[r-1]<o)return a?((s=e.slice(r-n,r))[n-1]=o,s):null;if(o==e[t+n-1])return e.slice(t,t+n);for(var l=t/n,u=r/n;l<u;){var c=l+u>>1;o<e[(c+1)*n-1]?u=c:l=c+1}var f=e[l*n-1];if(o==f)return e.slice((l-1)*n,(l-1)*n+n);var h=(o-f)/(e[(l+1)*n-1]-f);s=[];for(var p=0;p<n-1;++p)s.push((0,i.t7)(e[(l-1)*n+p],e[l*n+p],h));return s.push(o),s}function s(e,t,r,n,i,o,s){if(s)return a(e,t,r[r.length-1],n,i,o);var l;if(i<e[n-1])return o?((l=e.slice(0,n))[n-1]=i,l):null;if(e[e.length-1]<i)return o?((l=e.slice(e.length-n))[n-1]=i,l):null;for(var u=0,c=r.length;u<c;++u){var f=r[u];if(t!=f){if(i<e[t+n-1])return null;if(i<=e[f-1])return a(e,t,f,n,i,!1);t=f}}return null}},871:(e,t,r)=>{"use strict";r.d(t,{AW:()=>s,Kz:()=>a,ac:()=>u,mV:()=>l,oW:()=>c});var n=r(36181),i=r(36151),o=r(62221);function a(e,t,r,o,a){var s=(0,n.qP)((0,n.lJ)(),e,t,r,o);return!!(0,n.kK)(a,s)&&(!!(0,n.r4)(a,s)||(s[0]>=a[0]&&s[2]<=a[2]||(s[1]>=a[1]&&s[3]<=a[3]||(0,i.E)(e,t,r,o,(function(e,t){return(0,n.I7)(a,e,t)})))))}function s(e,t,r,n,i){for(var o=0,s=r.length;o<s;++o){if(a(e,t,r[o],n,i))return!0;t=r[o]}return!1}function l(e,t,r,n,i){return!!a(e,t,r,n,i)||(!!(0,o.TG)(e,t,r,n,i[0],i[1])||(!!(0,o.TG)(e,t,r,n,i[0],i[3])||(!!(0,o.TG)(e,t,r,n,i[2],i[1])||!!(0,o.TG)(e,t,r,n,i[2],i[3]))))}function u(e,t,r,n,i){if(!l(e,t,r[0],n,i))return!1;if(1===r.length)return!0;for(var s=1,u=r.length;s<u;++s)if((0,o.uG)(e,r[s-1],r[s],n,i)&&!a(e,r[s-1],r[s],n,i))return!1;return!0}function c(e,t,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(u(e,t,s,n,i))return!0;t=s[s.length-1]}return!1}},38768:(e,t,r)=>{"use strict";function n(e,t,r,n){for(var i=e[t],o=e[t+1],a=0,s=t+n;s<r;s+=n){var l=e[s],u=e[s+1];a+=Math.sqrt((l-i)*(l-i)+(u-o)*(u-o)),i=l,o=u}return a}r.d(t,{W:()=>n})},98180:(e,t,r)=>{"use strict";function n(e,t,r,n){for(;t<r-n;){for(var i=0;i<n;++i){var o=e[t+i];e[t+i]=e[r-n+i],e[r-n+i]=o}t+=n,r-=n}}function i(e,t,r,n){for(var i=0,o=e[r-n],a=e[r-n+1];t<r;t+=n){var s=e[t],l=e[t+1];i+=(s-o)*(l+a),o=s,a=l}return 0===i?void 0:i>0}function o(e,t,r,n,o){o=void 0!==o&&o;for(var a=0,s=r.length;a<s;++a){var l=r[a],u=i(e,t,l,n);if(0===a){if(o&&u||!o&&!u)return!1}else if(o&&!u||!o&&u)return!1;t=l}return!0}function a(e,t,r,n,i){for(var a=0,s=r.length;a<s;++a){var l=r[a];if(!o(e,t,l,n,i))return!1;l.length&&(t=l[l.length-1])}return!0}function s(e,t,r,o,a){a=void 0!==a&&a;for(var s=0,l=r.length;s<l;++s){var u=r[s],c=i(e,t,u,o);(0===s?a&&c||!a&&!c:a&&!c||!a&&c)&&n(e,t,u,o),t=u}return t}function l(e,t,r,n,i){for(var o=0,a=r.length;o<a;++o)t=s(e,t,r[o],n,i);return t}function u(e,t){for(var r=[],n=0,o=0,a=0,s=t.length;a<s;++a){var l=t[a];if(i(e,n,l,2)){if(0===r.length)continue;r[r.length-1].push(t[o])}else r.push(t.slice(o,a+1));o=a+1,n=l}return r}r.d(t,{Q3:()=>u,bt:()=>i,$v:()=>o,Oj:()=>a,zX:()=>s,dL:()=>l})},36151:(e,t,r)=>{"use strict";function n(e,t,r,n,i){var o;for(t+=n;t<r;t+=n)if(o=i(e.slice(t-n,t),e.slice(t,t+n)))return o;return!1}r.d(t,{E:()=>n})},30164:(e,t,r)=>{"use strict";r.d(t,{Pp:()=>u,UJ:()=>o,Zh:()=>l,dt:()=>i,uZ:()=>a});var n=r(7697);function i(e,t,r,i,o,a,s){var l=(r-t)/i;if(l<3){for(;t<r;t+=i)a[s++]=e[t],a[s++]=e[t+1];return s}var u=new Array(l);u[0]=1,u[l-1]=1;for(var c=[t,r-i],f=0;c.length>0;){for(var h=c.pop(),p=c.pop(),d=0,y=e[p],g=e[p+1],m=e[h],_=e[h+1],v=p+i;v<h;v+=i){var A=e[v],b=e[v+1],w=(0,n.rU)(A,b,y,g,m,_);w>d&&(f=v,d=w)}d>o&&(u[(f-t)/i]=1,p+i<f&&c.push(p,f),f+i<h&&c.push(f,h))}for(var E=0;E<l;++E)u[E]&&(a[s++]=e[t+E*i],a[s++]=e[t+E*i+1]);return s}function o(e,t,r,n,o,a,s,l){for(var u=0,c=r.length;u<c;++u){var f=r[u];s=i(e,t,f,n,o,a,s),l.push(s),t=f}return s}function a(e,t){return t*Math.round(e/t)}function s(e,t,r,n,i,o,s){if(t==r)return s;var l,u,c=a(e[t],i),f=a(e[t+1],i);t+=n,o[s++]=c,o[s++]=f;do{if(l=a(e[t],i),u=a(e[t+1],i),(t+=n)==r)return o[s++]=l,o[s++]=u,s}while(l==c&&u==f);for(;t<r;){var h=a(e[t],i),p=a(e[t+1],i);if(t+=n,h!=l||p!=u){var d=l-c,y=u-f,g=h-c,m=p-f;d*m==y*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(y<0&&m<y||y==m||y>0&&m>y)?(l=h,u=p):(o[s++]=l,o[s++]=u,c=l,f=u,l=h,u=p)}}return o[s++]=l,o[s++]=u,s}function l(e,t,r,n,i,o,a,l){for(var u=0,c=r.length;u<c;++u){var f=r[u];a=s(e,t,f,n,i,o,a),l.push(a),t=f}return a}function u(e,t,r,n,i,o,a,s){for(var u=0,c=r.length;u<c;++u){var f=r[u],h=[];a=l(e,t,f,n,i,o,a,h),s.push(h),t=f[f.length-1]}return a}},32355:(e,t,r)=>{"use strict";function n(e,t,r,n,i,o){o=o||[];for(var a=0,s=t;s<r;s+=n){var l=e[s],u=e[s+1];o[a++]=i[0]*l+i[2]*u+i[4],o[a++]=i[1]*l+i[3]*u+i[5]}return o&&o.length!=a&&(o.length=a),o}function i(e,t,r,n,i,o,a){a=a||[];for(var s=Math.cos(i),l=Math.sin(i),u=o[0],c=o[1],f=0,h=t;h<r;h+=n){var p=e[h]-u,d=e[h+1]-c;a[f++]=u+p*s-d*l,a[f++]=c+p*l+d*s;for(var y=h+2;y<h+n;++y)a[f++]=e[y]}return a&&a.length!=f&&(a.length=f),a}function o(e,t,r,n,i,o,a,s){s=s||[];for(var l=a[0],u=a[1],c=0,f=t;f<r;f+=n){var h=e[f]-l,p=e[f+1]-u;s[c++]=l+i*h,s[c++]=u+o*p;for(var d=f+2;d<f+n;++d)s[c++]=e[d]}return s&&s.length!=c&&(s.length=c),s}function a(e,t,r,n,i,o,a){a=a||[];for(var s=0,l=t;l<r;l+=n){a[s++]=e[l]+i,a[s++]=e[l+1]+o;for(var u=l+2;u<l+n;++u)a[s++]=e[u]}return a&&a.length!=s&&(a.length=s),a}r.d(t,{Iu:()=>a,U1:()=>i,bA:()=>o,vT:()=>n})},45907:(e,t,r)=>{"use strict";r.d(t,{G$:()=>a,Id:()=>u,ME:()=>o,MP:()=>l,Tp:()=>c,V:()=>i,bM:()=>h,et:()=>f,tK:()=>s});var n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",i=n.includes("firefox"),o=n.includes("safari")&&!n.includes("chrom")&&(n.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(n)),a=n.includes("webkit")&&!n.includes("edge"),s=n.includes("macintosh"),l="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,u="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,c="undefined"!=typeof Image&&Image.prototype.decode,f="function"==typeof createImageBitmap,h=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(e){}return e}()},62953:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(54999),i=r(30378);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,r,o,u=l(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),e=e||{},(t=u.call(this)).delta_=e.delta?e.delta:1,t.duration_=void 0!==e.duration?e.duration:250,t}return t=c,(r=[{key:"handleEvent",value:function(e){var t=!1;if(e.type==i.Z.DBLCLICK){var r=e.originalEvent,o=e.map,a=e.coordinate,s=r.shiftKey?-this.delta_:this.delta_,l=o.getView();(0,n.FW)(l,s,a,this.duration_),r.preventDefault(),t=!0}return!t}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.ZP)},28632:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(28513),i=r(84422),o=r(31706),a=r(92882);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(o,e);var t,r,n,i=c(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).geometry_=null,t.element_=document.createElement("div"),t.element_.style.position="absolute",t.element_.style.pointerEvents="auto",t.element_.className="ol-box "+e,t.map_=null,t.startPixel_=null,t.endPixel_=null,t}return t=o,(r=[{key:"disposeInternal",value:function(){this.setMap(null)}},{key:"render_",value:function(){var e=this.startPixel_,t=this.endPixel_,r="px",n=this.element_.style;n.left=Math.min(e[0],t[0])+r,n.top=Math.min(e[1],t[1])+r,n.width=Math.abs(t[0]-e[0])+r,n.height=Math.abs(t[1]-e[1])+r}},{key:"setMap",value:function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}},{key:"setPixels",value:function(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}},{key:"createOrUpdateGeometry",value:function(){var e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new a.ZP([r])}},{key:"getGeometry",value:function(){return this.geometry_}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(o.Z);var p=r(49995);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===d(o)?o:String(o)),n)}var i,o}function g(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var w="boxstart",E="boxdrag",x="boxend",I="boxcancel",S=function(e){_(r,e);var t=A(r);function r(e,n,i){var o;return m(this,r),(o=t.call(this,e)).coordinate=n,o.mapBrowserEvent=i,o}return g(r)}(n.ZP);const C=function(e){_(r,e);var t=A(r);function r(e){var n;return m(this,r),(n=t.call(this)).on,n.once,n.un,e=e||{},n.box_=new h(e.className||"ol-dragbox"),n.minArea_=void 0!==e.minArea?e.minArea:64,e.onBoxEnd&&(n.onBoxEnd=e.onBoxEnd),n.startPixel_=null,n.condition_=e.condition?e.condition:p.v8,n.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:n.defaultBoxEndCondition,n}return g(r,[{key:"defaultBoxEndCondition",value:function(e,t,r){var n=r[0]-t[0],i=r[1]-t[1];return n*n+i*i>=this.minArea_}},{key:"getGeometry",value:function(){return this.box_.getGeometry()}},{key:"handleDragEvent",value:function(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new S(E,e.coordinate,e))}},{key:"handleUpEvent",value:function(e){this.box_.setMap(null);var t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new S(t?x:I,e.coordinate,e)),!1}},{key:"handleDownEvent",value:function(e){return!!this.condition_(e)&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new S(w,e.coordinate,e)),!0)}},{key:"onBoxEnd",value:function(e){}}]),r}(i.Z)},60320:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(84422),i=r(73826),o=r(49995),a=r(66646),s=r(36707);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(p,e);var t,r,l,h=f(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),e=e||{},(t=h.call(this,{stopDown:i.Dv})).kinetic_=e.kinetic,t.lastCentroid=null,t.lastPointersCount_,t.panning_=!1;var r=e.condition?e.condition:(0,o.$6)(o.rM,o.Xp);return t.condition_=e.onFocusOnly?(0,o.$6)(o.yZ,r):r,t.noKinetic_=!1,t}return t=p,(r=[{key:"handleDragEvent",value:function(e){var t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());var r=this.targetPointers,i=t.getEventPixel((0,n.S)(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();(0,s.bA)(o,a.getResolution()),(0,s.U1)(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}},{key:"handleUpEvent",value:function(e){var t=e.map,r=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=r.getCenterInternal(),s=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([s[0]-n*Math.cos(i),s[1]-n*Math.sin(i)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:a.easeOut})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}},{key:"handleDownEvent",value:function(e){if(this.targetPointers.length>0&&this.condition_(e)){var t=e.map.getView();return this.lastCentroid=null,t.getAnimating()&&t.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}])&&u(t.prototype,r),l&&u(t,l),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.Z)},48535:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(84422),i=r(73826),o=r(49995),a=r(64495);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(f,e);var t,r,n,s=c(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),e=e||{},(t=s.call(this,{stopDown:i.Dv})).condition_=e.condition?e.condition:o.aj,t.lastAngle_=void 0,t.duration_=void 0!==e.duration?e.duration:250,t}return t=f,(r=[{key:"handleDragEvent",value:function(e){if((0,o.QL)(e)){var t=e.map,r=t.getView();if(r.getConstraints().rotation!==a.h$){var n=t.getSize(),i=e.pixel,s=Math.atan2(n[1]/2-i[1],i[0]-n[0]/2);if(void 0!==this.lastAngle_){var l=s-this.lastAngle_;r.adjustRotationInternal(-l)}this.lastAngle_=s}}}},{key:"handleUpEvent",value:function(e){return!(0,o.QL)(e)||(e.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(e){return!(!(0,o.QL)(e)||!(0,o.v8)(e)||!this.condition_(e)||(e.map.getView().beginInteraction(),this.lastAngle_=void 0,0))}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},53956:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(28632),i=r(66646),o=r(49995);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,r,n,a=u(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var r=(e=e||{}).condition?e.condition:o.vY;return(t=a.call(this,{condition:r,className:e.className||"ol-dragzoom",minArea:e.minArea})).duration_=void 0!==e.duration?e.duration:200,t.out_=void 0!==e.out&&e.out,t}return t=c,(r=[{key:"onBoxEnd",value:function(e){var t=this.getMap().getView(),r=this.getGeometry();if(this.out_){var n=t.rotatedExtentForGeometry(r),o=t.getResolutionForExtentInternal(n),a=t.getResolution()/o;(r=r.clone()).scale(a*a)}t.fitInternal(r,{duration:this.duration_,easing:i.easeOut})}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Z)},54999:(e,t,r)=>{"use strict";r.d(t,{Cv:()=>f,FW:()=>h,ZP:()=>p});var n=r(40439),i=r(11766),o=r(66646);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function f(e,t,r){var n=e.getCenterInternal();if(n){var i=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:void 0!==r?r:250,easing:o.linear,center:e.getConstrainedCenter(i)})}}function h(e,t,r,n){var i=e.getZoom();if(void 0!==i){var a=e.getConstrainedZoom(i+t),s=e.getResolutionForZoom(a);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:s,anchor:r,duration:void 0!==n?n:250,easing:o.easeOut})}}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,r,n,o=u(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this)).on,t.once,t.un,e&&e.handleEvent&&(t.handleEvent=e.handleEvent),t.map_=null,t.setActive(!0),t}return t=a,(r=[{key:"getActive",value:function(){return this.get(i.Z.ACTIVE)}},{key:"getMap",value:function(){return this.map_}},{key:"handleEvent",value:function(e){return!0}},{key:"setActive",value:function(e){this.set(i.Z.ACTIVE,e)}},{key:"setMap",value:function(e){this.map_=e}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Z)},35696:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(2115),i=r(54999);const o="ArrowLeft",a="ArrowUp",s="ArrowRight",l="ArrowDown";var u=r(49995),c=r(36707);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(g,e);var t,r,f,y=d(g);function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),e=e||{},(t=y.call(this)).defaultCondition_=function(e){return(0,u.rM)(e)&&(0,u.TN)(e)},t.condition_=void 0!==e.condition?e.condition:t.defaultCondition_,t.duration_=void 0!==e.duration?e.duration:100,t.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128,t}return t=g,(r=[{key:"handleEvent",value:function(e){var t=!1;if(e.type==n.Z.KEYDOWN){var r=e.originalEvent,u=r.key;if(this.condition_(e)&&(u==l||u==o||u==s||u==a)){var f=e.map.getView(),h=f.getResolution()*this.pixelDelta_,p=0,d=0;u==l?d=-h:u==o?p=-h:u==s?p=h:d=h;var y=[p,d];(0,c.U1)(y,f.getRotation()),(0,i.Cv)(f,y,this.duration_),r.preventDefault(),t=!0}}return!t}}])&&h(t.prototype,r),f&&h(t,f),Object.defineProperty(t,"prototype",{writable:!1}),g}(i.ZP)},83460:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(2115),i=r(54999),o=r(49995);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,r,a,c=u(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),e=e||{},(t=c.call(this)).condition_=e.condition?e.condition:function(e){return!(0,o.a5)(e)&&(0,o.TN)(e)},t.delta_=e.delta?e.delta:1,t.duration_=void 0!==e.duration?e.duration:100,t}return t=f,(r=[{key:"handleEvent",value:function(e){var t=!1;if(e.type==n.Z.KEYDOWN||e.type==n.Z.KEYPRESS){var r=e.originalEvent,o=r.key;if(this.condition_(e)&&("+"===o||"-"===o)){var a=e.map,s="+"===o?this.delta_:-this.delta_,l=a.getView();(0,i.FW)(l,s,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}])&&s(t.prototype,r),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),f}(i.ZP)},38965:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(2115),i=r(54999),o=r(45907),a=r(49995),s=r(7697);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(p,e);var t,r,l,h=f(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),e=e||{},(t=h.call(this,e)).totalDelta_=0,t.lastDelta_=0,t.maxDelta_=void 0!==e.maxDelta?e.maxDelta:1,t.duration_=void 0!==e.duration?e.duration:250,t.timeout_=void 0!==e.timeout?e.timeout:80,t.useAnchor_=void 0===e.useAnchor||e.useAnchor,t.constrainResolution_=void 0!==e.constrainResolution&&e.constrainResolution;var r=e.condition?e.condition:a.Bx;return t.condition_=e.onFocusOnly?(0,a.$6)(a.yZ,r):r,t.lastAnchor_=null,t.startTime_=void 0,t.timeoutId_,t.mode_=void 0,t.trackpadEventGap_=400,t.trackpadTimeoutId_,t.deltaPerZoom_=300,t}return t=p,(r=[{key:"endInteraction_",value:function(){this.trackpadTimeoutId_=void 0;var e=this.getMap();e&&e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},{key:"handleEvent",value:function(e){if(!this.condition_(e))return!0;if(e.type!==n.Z.WHEEL)return!0;var t,r=e.map,i=e.originalEvent;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate),e.type==n.Z.WHEEL&&(t=i.deltaY,o.V&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(t/=o.MP),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(t*=40)),0===t)return!1;this.lastDelta_=t;var a=Date.now();void 0===this.startTime_&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(t)<4?"trackpad":"wheel");var s=r.getView();if("trackpad"===this.mode_&&!s.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-t/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=t;var l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}},{key:"handleWheelZoom_",value:function(e){var t=e.getView();t.getAnimating()&&t.cancelAnimations();var r=-(0,s.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),(0,i.FW)(t,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}},{key:"setMouseAnchor",value:function(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}])&&u(t.prototype,r),l&&u(t,l),Object.defineProperty(t,"prototype",{writable:!1}),p}(i.ZP)},38012:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(84422),i=r(73826),o=r(64495);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,r,a,c=u(f);function f(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var r=e=e||{};return r.stopDown||(r.stopDown=i.Dv),(t=c.call(this,r)).anchor_=null,t.lastAngle_=void 0,t.rotating_=!1,t.rotationDelta_=0,t.threshold_=void 0!==e.threshold?e.threshold:.3,t.duration_=void 0!==e.duration?e.duration:250,t}return t=f,(r=[{key:"handleDragEvent",value:function(e){var t=0,r=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(void 0!==this.lastAngle_){var s=a-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=s}this.lastAngle_=a;var l=e.map,u=l.getView();u.getConstraints().rotation!==o.h$&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel((0,n.S)(this.targetPointers))),this.rotating_&&(l.render(),u.adjustRotationInternal(t,this.anchor_)))}},{key:"handleUpEvent",value:function(e){return!(this.targetPointers.length<2&&(e.map.getView().endInteraction(this.duration_),1))}},{key:"handleDownEvent",value:function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}])&&s(t.prototype,r),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},32259:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(84422),i=r(73826);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,r,o,u=l(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var r=e=e||{};return r.stopDown||(r.stopDown=i.Dv),(t=u.call(this,r)).anchor_=null,t.duration_=void 0!==e.duration?e.duration:400,t.lastDistance_=void 0,t.lastScaleDelta_=1,t}return t=c,(r=[{key:"handleDragEvent",value:function(e){var t=1,r=this.targetPointers[0],i=this.targetPointers[1],o=r.clientX-i.clientX,a=r.clientY-i.clientY,s=Math.sqrt(o*o+a*a);void 0!==this.lastDistance_&&(t=this.lastDistance_/s),this.lastDistance_=s;var l=e.map,u=l.getView();1!=t&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel((0,n.S)(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}},{key:"handleUpEvent",value:function(e){if(this.targetPointers.length<2){var t=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,r),!1}return!0}},{key:"handleDownEvent",value:function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Z)},84422:(e,t,r)=>{"use strict";r.d(t,{S:()=>c,Z:()=>f});var n=r(54999),i=r(30378);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e){for(var t=e.length,r=0,n=0,i=0;i<t;i++)r+=e[i].clientX,n+=e[i].clientY;return{clientX:r/t,clientY:n/t}}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,o=l(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),e=e||{},t=o.call(this,e),e.handleDownEvent&&(t.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(t.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(t.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(t.handleUpEvent=e.handleUpEvent),e.stopDown&&(t.stopDown=e.stopDown),t.handlingDownUpSequence=!1,t.targetPointers=[],t}return t=u,(r=[{key:"getPointerCount",value:function(){return this.targetPointers.length}},{key:"handleDownEvent",value:function(e){return!1}},{key:"handleDragEvent",value:function(e){}},{key:"handleEvent",value:function(e){if(!e.originalEvent)return!0;var t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==i.Z.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==i.Z.POINTERUP){var r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==i.Z.POINTERDOWN){var n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==i.Z.POINTERMOVE&&this.handleMoveEvent(e);return!t}},{key:"handleMoveEvent",value:function(e){}},{key:"handleUpEvent",value:function(e){return!1}},{key:"stopDown",value:function(e){return e}},{key:"updateTrackedPointers_",value:function(e){e.activePointers&&(this.targetPointers=e.activePointers)}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.ZP)},11766:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={ACTIVE:"active"}},98831:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(45004),i=r(14516),o=r(28513),a=r(44993),s=r(54999),l=r(57649),u=r(73826),c=r(83482),f=r(78456),h=r(11133),p=r(20594),d=r(49995);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},g.apply(this,arguments)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===y(o)?o:String(o)),n)}var i,o}function _(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=x(e);if(t){var i=x(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(this,r)}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var I="select",S=function(e){A(r,e);var t=w(r);function r(e,n,i,o){var a;return v(this,r),(a=t.call(this,e)).selected=n,a.deselected=i,a.mapBrowserEvent=o,a}return _(r)}(o.ZP),C={};const P=function(e){A(r,e);var t=w(r);function r(e){var i,o,a;if(v(this,r),(i=t.call(this)).on,i.once,i.un,e=e||{},i.boundAddFeature_=i.addFeature_.bind(E(i)),i.boundRemoveFeature_=i.removeFeature_.bind(E(i)),i.condition_=e.condition?e.condition:d.Kf,i.addCondition_=e.addCondition?e.addCondition:d.Fi,i.removeCondition_=e.removeCondition?e.removeCondition:d.Fi,i.toggleCondition_=e.toggleCondition?e.toggleCondition:d.vY,i.multi_=!!e.multi&&e.multi,i.filter_=e.filter?e.filter:u.uX,i.hitTolerance_=e.hitTolerance?e.hitTolerance:0,i.style_=void 0!==e.style?e.style:(o=(0,f.Ly)(),(0,h.l7)(o.Polygon,o.LineString),(0,h.l7)(o.GeometryCollection,o.LineString),function(e){return e.getGeometry()?o[e.getGeometry().getType()]:null}),i.features_=e.features||new n.Z,e.layers)if("function"==typeof e.layers)a=e.layers;else{var s=e.layers;a=function(e){return s.includes(e)}}else a=u.uX;return i.layerFilter_=a,i.featureLayerAssociation_={},i}return _(r,[{key:"addFeatureLayerAssociation_",value:function(e,t){this.featureLayerAssociation_[(0,p.sq)(e)]=t}},{key:"getFeatures",value:function(){return this.features_}},{key:"getHitTolerance",value:function(){return this.hitTolerance_}},{key:"getLayer",value:function(e){return this.featureLayerAssociation_[(0,p.sq)(e)]}},{key:"setHitTolerance",value:function(e){this.hitTolerance_=e}},{key:"setMap",value:function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),g(x(r.prototype),"setMap",this).call(this,e),e?(this.features_.addEventListener(i.Z.ADD,this.boundAddFeature_),this.features_.addEventListener(i.Z.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(i.Z.ADD,this.boundAddFeature_),this.features_.removeEventListener(i.Z.REMOVE,this.boundRemoveFeature_))}},{key:"addFeature_",value:function(e){var t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){var r=this.getMap().getAllLayers().find((function(e){if(e instanceof l.Z&&e.getSource()&&e.getSource().hasFeature(t))return e}));r&&this.addFeatureLayerAssociation_(t,r)}}},{key:"removeFeature_",value:function(e){this.style_&&this.restorePreviousStyle_(e.element)}},{key:"getStyle",value:function(){return this.style_}},{key:"applySelectedStyle_",value:function(e){var t=(0,p.sq)(e);t in C||(C[t]=e.getStyle()),e.setStyle(this.style_)}},{key:"restorePreviousStyle_",value:function(e){for(var t=this.getMap().getInteractions().getArray(),n=t.length-1;n>=0;--n){var i=t[n];if(i!==this&&i instanceof r&&i.getStyle()&&-1!==i.getFeatures().getArray().lastIndexOf(e))return void e.setStyle(i.getStyle())}var o=(0,p.sq)(e);e.setStyle(C[o]),delete C[o]}},{key:"removeFeatureLayerAssociation_",value:function(e){delete this.featureLayerAssociation_[(0,p.sq)(e)]}},{key:"handleEvent",value:function(e){var t=this;if(!this.condition_(e))return!0;var r=this.addCondition_(e),n=this.removeCondition_(e),i=this.toggleCondition_(e),o=!r&&!n&&!i,s=e.map,l=this.getFeatures(),u=[],f=[];if(o){(0,c.Z)(this.featureLayerAssociation_),s.forEachFeatureAtPixel(e.pixel,(function(e,r){if(e instanceof a.Z&&t.filter_(e,r))return t.addFeatureLayerAssociation_(e,r),f.push(e),!t.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var h=l.getLength()-1;h>=0;--h){var p=l.item(h),d=f.indexOf(p);d>-1?f.splice(d,1):(l.remove(p),u.push(p))}0!==f.length&&l.extend(f)}else{s.forEachFeatureAtPixel(e.pixel,(function(e,o){if(e instanceof a.Z&&t.filter_(e,o))return!r&&!i||l.getArray().includes(e)?(n||i)&&l.getArray().includes(e)&&(u.push(e),t.removeFeatureLayerAssociation_(e)):(t.addFeatureLayerAssociation_(e,o),f.push(e)),!t.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var y=u.length-1;y>=0;--y)l.remove(u[y]);l.extend(f)}return(f.length>0||u.length>0)&&this.dispatchEvent(new S(I,f,u,e)),!0}}]),r}(s.ZP)},82481:(e,t,r)=>{"use strict";r.d(t,{c:()=>d});var n=r(45004),i=r(62953),o=r(60320),a=r(48535),s=r(53956),l=r(35696),u=r(83460),c=r(79603),f=r(38965),h=r(38012),p=r(32259);function d(e){e=e||{};var t=new n.Z,r=new c.Z(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&t.push(new a.Z),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&t.push(new i.Z({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&t.push(new o.Z({onFocusOnly:e.onFocusOnly,kinetic:r})),(void 0===e.pinchRotate||e.pinchRotate)&&t.push(new h.Z),(void 0===e.pinchZoom||e.pinchZoom)&&t.push(new p.Z({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(t.push(new l.Z),t.push(new u.Z({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&t.push(new f.Z({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&t.push(new s.Z({duration:e.zoomDuration})),t}},87982:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(40439),i=r(61383),o=r(20594),a=r(97972),s=r(7697);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l(o)?o:String(o)),n)}var i,o}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},c.apply(this,arguments)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(y,e);var t,r,n,d=h(y);function y(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=d.call(this)).on,t.once,t.un,t.background_=e.background;var r=Object.assign({},e);return"object"===l(e.properties)&&(delete r.properties,Object.assign(r,e.properties)),r[i.Z.OPACITY]=void 0!==e.opacity?e.opacity:1,(0,a.h)("number"==typeof r[i.Z.OPACITY],"Layer opacity must be a number"),r[i.Z.VISIBLE]=void 0===e.visible||e.visible,r[i.Z.Z_INDEX]=e.zIndex,r[i.Z.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,r[i.Z.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,r[i.Z.MIN_ZOOM]=void 0!==e.minZoom?e.minZoom:-1/0,r[i.Z.MAX_ZOOM]=void 0!==e.maxZoom?e.maxZoom:1/0,t.className_=void 0!==r.className?r.className:"ol-layer",delete r.className,t.setProperties(r),t.state_=null,t}return t=y,(r=[{key:"getBackground",value:function(){return this.background_}},{key:"getClassName",value:function(){return this.className_}},{key:"getLayerState",value:function(e){var t=this.state_||{layer:this,managed:void 0===e||e},r=this.getZIndex();return t.opacity=(0,s.uZ)(Math.round(100*this.getOpacity())/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=void 0!==r||t.managed?r:1/0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}},{key:"getLayersArray",value:function(e){return(0,o.O3)()}},{key:"getLayerStatesArray",value:function(e){return(0,o.O3)()}},{key:"getExtent",value:function(){return this.get(i.Z.EXTENT)}},{key:"getMaxResolution",value:function(){return this.get(i.Z.MAX_RESOLUTION)}},{key:"getMinResolution",value:function(){return this.get(i.Z.MIN_RESOLUTION)}},{key:"getMinZoom",value:function(){return this.get(i.Z.MIN_ZOOM)}},{key:"getMaxZoom",value:function(){return this.get(i.Z.MAX_ZOOM)}},{key:"getOpacity",value:function(){return this.get(i.Z.OPACITY)}},{key:"getSourceState",value:function(){return(0,o.O3)()}},{key:"getVisible",value:function(){return this.get(i.Z.VISIBLE)}},{key:"getZIndex",value:function(){return this.get(i.Z.Z_INDEX)}},{key:"setBackground",value:function(e){this.background_=e,this.changed()}},{key:"setExtent",value:function(e){this.set(i.Z.EXTENT,e)}},{key:"setMaxResolution",value:function(e){this.set(i.Z.MAX_RESOLUTION,e)}},{key:"setMinResolution",value:function(e){this.set(i.Z.MIN_RESOLUTION,e)}},{key:"setMaxZoom",value:function(e){this.set(i.Z.MAX_ZOOM,e)}},{key:"setMinZoom",value:function(e){this.set(i.Z.MIN_ZOOM,e)}},{key:"setOpacity",value:function(e){(0,a.h)("number"==typeof e,"Layer opacity must be a number"),this.set(i.Z.OPACITY,e)}},{key:"setVisible",value:function(e){this.set(i.Z.VISIBLE,e)}},{key:"setZIndex",value:function(e){this.set(i.Z.Z_INDEX,e)}},{key:"disposeInternal",value:function(){this.state_&&(this.state_.layer=null,this.state_=null),c(p(y.prototype),"disposeInternal",this).call(this)}}])&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),y}(n.Z)},93931:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),e=e||{},s.call(this,e)}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(54115).Z)},40564:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(54115),i=r(4633);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},s.apply(this,arguments)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,r,n,o=u(f);function f(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),e=e||{};var r=Object.assign({},e);return delete r.preload,delete r.useInterimTilesOnError,(t=o.call(this,r)).on,t.once,t.un,t.setPreload(void 0!==e.preload?e.preload:0),t.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),t}return t=f,(r=[{key:"getPreload",value:function(){return this.get(i.Z.PRELOAD)}},{key:"setPreload",value:function(e){this.set(i.Z.PRELOAD,e)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(i.Z.USE_INTERIM_TILES_ON_ERROR)}},{key:"setUseInterimTilesOnError",value:function(e){this.set(i.Z.USE_INTERIM_TILES_ON_ERROR,e)}},{key:"getData",value:function(e){return s(c(f.prototype),"getData",this).call(this,e)}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},77277:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ce});var n,i,o=r(54115),a=r(82582),s=r(78456),l=r(87908),u=r(53969),c=r(52076),f=r(62356),h=r(17774),p=r(5460),d=r(11133);function y(e,t,r){return y=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&g(i,r.prototype),i},y.apply(null,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function A(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=E(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function E(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_(t)?t:String(t)}var C=0,P=1<<C++,O=1<<C++,T=1<<C++,M=1<<C++,k=1<<C++,R=Math.pow(2,5)-1,B=(I(n={},P,"boolean"),I(n,O,"number"),I(n,T,"string"),I(n,M,"color"),I(n,k,"number[]"),n),L=Object.keys(B).map(Number).sort(d.j2);function D(e){var t,r,n=[],i=w(L);try{for(i.s();!(t=i.n()).done;){var o=t.value;(e&(r=o))===r&&n.push(B[o])}}catch(e){i.e(e)}finally{i.f()}return 0===n.length?"untyped":n.length<3?n.join(" or "):n.slice(0,-1).join(", ")+", or "+n[n.length-1]}function j(e,t){return!!(e&t)}var F=A((function e(t,r){b(this,e),this.type=t,this.value=r})),N=A((function e(t,r){b(this,e),this.type=t,this.operator=r;for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];this.args=i}));function Z(){return{variables:new Set,properties:new Set}}function U(e,t){switch(_(e)){case"boolean":return new F(P,e);case"number":return new F(O,e);case"string":return new F(T,e)}if(!Array.isArray(e))throw new Error("Expression must be an array or a primitive value");if(0===e.length)throw new Error("Empty expression");if("string"==typeof e[0])return function(e,t){var r=e[0],n=G[r];if(!n)throw new Error("Unknown operator: ".concat(r));return n(e,t)}(e,t);var r,n=w(e);try{for(n.s();!(r=n.n()).done;){if("number"!=typeof r.value)throw new Error("Expected an array of numbers")}}catch(e){n.e(e)}finally{n.f()}var i=k;return 3!==e.length&&4!==e.length||(i|=M),new F(i,e)}var Q={Number:"number",String:"string",Get:"get",Var:"var",Any:"any",All:"all",Not:"!",Resolution:"resolution",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match"},G=(I(i={},Q.Number,q(z(1,1/0,R),O)),I(i,Q.String,q(z(1,1/0,R),T)),I(i,Q.Get,q((function(e,t){if(2!==e.length)throw new Error("Expected 1 argument for get operation");var r=U(e[1],t);if(!(r instanceof F))throw new Error("Expected a literal argument for get operation");if("string"!=typeof r.value)throw new Error("Expected a string argument for get operation");return t.properties.add(r.value),[r]}),R)),I(i,Q.Var,q((function(e,t){if(2!==e.length)throw new Error("Expected 1 argument for var operation");var r=U(e[1],t);if(!(r instanceof F))throw new Error("Expected a literal argument for var operation");if("string"!=typeof r.value)throw new Error("Expected a string argument for get operation");return t.variables.add(r.value),[r]}),R)),I(i,Q.Resolution,q((function(e,t){var r=e[0];if(1!==e.length)throw new Error("Expected no arguments for ".concat(r," operation"));return[]}),O)),I(i,Q.Any,q(z(2,1/0,P),P)),I(i,Q.All,q(z(2,1/0,P),P)),I(i,Q.Not,q(z(1,1,P),P)),I(i,Q.Equal,q(z(2,2,R),P)),I(i,Q.NotEqual,q(z(2,2,R),P)),I(i,Q.GreaterThan,q(z(2,2,R),P)),I(i,Q.GreaterThanOrEqualTo,q(z(2,2,R),P)),I(i,Q.LessThan,q(z(2,2,R),P)),I(i,Q.LessThanOrEqualTo,q(z(2,2,R),P)),I(i,Q.Multiply,q(z(2,1/0,O),O)),I(i,Q.Divide,q(z(2,2,O),O)),I(i,Q.Add,q(z(2,1/0,O),O)),I(i,Q.Subtract,q(z(2,2,O),O)),I(i,Q.Clamp,q(z(3,3,O),O)),I(i,Q.Mod,q(z(2,2,O),O)),I(i,Q.Pow,q(z(2,2,O),O)),I(i,Q.Abs,q(z(1,1,O),O)),I(i,Q.Floor,q(z(1,1,O),O)),I(i,Q.Ceil,q(z(1,1,O),O)),I(i,Q.Round,q(z(1,1,O),O)),I(i,Q.Sin,q(z(1,1,O),O)),I(i,Q.Cos,q(z(1,1,O),O)),I(i,Q.Atan,q(z(1,2,O),O)),I(i,Q.Sqrt,q(z(1,1,O),O)),I(i,Q.Match,q(z(4,1/0,T|O),R)),i);function z(e,t,r){return function(n,i){var o=n[0],a=n.length-1;if(e===t){if(a!==e){var s=1===e?"":"s";throw new Error("Expected ".concat(e," argument").concat(s," for operation ").concat(o,", got ").concat(a))}}else if(a<e||a>t)throw new Error("Expected ".concat(e," to ").concat(t," arguments for operation ").concat(o,", got ").concat(a));for(var l=new Array(a),u=0;u<a;++u){var c=U(n[u+1],i);if(!j(r,c.type)){var f=D(r),h=D(c.type);throw new Error("Unexpected type for argument ".concat(u," of ").concat(o," operation")+" : got ".concat(f," but expected ").concat(h))}l[u]=c}return l}}function q(e,t){return function(r,n){var i=r[0],o=e(r,n);return y(N,[t,i].concat(m(o)))}}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function W(e,t,r){var n=U(e,r);if(!j(t,n.type)){var i=D(t),o=D(n.type);throw new Error("Expected expression to be of type ".concat(i,", got ").concat(o))}return K(n,r)}function K(e,t){if(e instanceof F)return function(){return e.value};var r=e.operator;switch(r){case Q.Number:case Q.String:return function(e,t){for(var r=e.operator,n=e.args.length,i=new Array(n),o=0;o<n;++o)i[o]=K(e.args[o],t);switch(r){case Q.Number:case Q.String:return function(e){for(var t=0;t<n;++t){var o=i[t](e);if(V(o)===r)return o}throw new Error("Expected one of the values to be a ".concat(r))};default:throw new Error("Unsupported assertion operator ".concat(r))}}(e,t);case Q.Get:case Q.Var:return function(e,t){var r=e.args[0];if(!(r instanceof F))throw new Error("Expected literal name");var n=r.value;if("string"!=typeof n)throw new Error("Expected string name");switch(e.operator){case Q.Get:return function(e){return e.properties[n]};case Q.Var:return function(e){return e.variables[n]};default:throw new Error("Unsupported accessor operator ".concat(e.operator))}}(e);case Q.Resolution:return function(e){return e.resolution};case Q.Any:case Q.All:case Q.Not:return function(e,t){for(var r=e.operator,n=e.args.length,i=new Array(n),o=0;o<n;++o)i[o]=K(e.args[o],t);switch(r){case Q.Any:return function(e){for(var t=0;t<n;++t)if(i[t](e))return!0;return!1};case Q.All:return function(e){for(var t=0;t<n;++t)if(!i[t](e))return!1;return!0};case Q.Not:return function(e){return!i[0](e)};default:throw new Error("Unsupported logical operator ".concat(r))}}(e,t);case Q.Equal:case Q.NotEqual:case Q.LessThan:case Q.LessThanOrEqualTo:case Q.GreaterThan:case Q.GreaterThanOrEqualTo:return function(e,t){var r=e.operator,n=K(e.args[0],t),i=K(e.args[1],t);switch(r){case Q.Equal:return function(e){return n(e)===i(e)};case Q.NotEqual:return function(e){return n(e)!==i(e)};case Q.LessThan:return function(e){return n(e)<i(e)};case Q.LessThanOrEqualTo:return function(e){return n(e)<=i(e)};case Q.GreaterThan:return function(e){return n(e)>i(e)};case Q.GreaterThanOrEqualTo:return function(e){return n(e)>=i(e)};default:throw new Error("Unsupported comparison operator ".concat(r))}}(e,t);case Q.Multiply:case Q.Divide:case Q.Add:case Q.Subtract:case Q.Clamp:case Q.Mod:case Q.Pow:case Q.Abs:case Q.Floor:case Q.Ceil:case Q.Round:case Q.Sin:case Q.Cos:case Q.Atan:case Q.Sqrt:return function(e,t){for(var r=e.operator,n=e.args.length,i=new Array(n),o=0;o<n;++o)i[o]=K(e.args[o],t);switch(r){case Q.Multiply:return function(e){for(var t=1,r=0;r<n;++r)t*=i[r](e);return t};case Q.Divide:return function(e){return i[0](e)/i[1](e)};case Q.Add:return function(e){for(var t=0,r=0;r<n;++r)t+=i[r](e);return t};case Q.Subtract:return function(e){return i[0](e)-i[1](e)};case Q.Clamp:return function(e){var t=i[0](e),r=i[1](e);if(t<r)return r;var n=i[2](e);return t>n?n:t};case Q.Mod:return function(e){return i[0](e)%i[1](e)};case Q.Pow:return function(e){return Math.pow(i[0](e),i[1](e))};case Q.Abs:return function(e){return Math.abs(i[0](e))};case Q.Floor:return function(e){return Math.floor(i[0](e))};case Q.Ceil:return function(e){return Math.ceil(i[0](e))};case Q.Round:return function(e){return Math.round(i[0](e))};case Q.Sin:return function(e){return Math.sin(i[0](e))};case Q.Cos:return function(e){return Math.cos(i[0](e))};case Q.Atan:return 2===n?function(e){return Math.atan2(i[0](e),i[1](e))}:function(e){return Math.atan(i[0](e))};case Q.Sqrt:return function(e){return Math.sqrt(i[0](e))};default:throw new Error("Unsupported numeric operator ".concat(r))}}(e,t);case Q.Match:return function(e,t){for(var r=e.args.length,n=new Array(r),i=0;i<r;++i)n[i]=K(e.args[i],t);return function(e){for(var t=n[0](e),i=1;i<r;i+=2)if(t===n[i](e))return n[i+1](e);return n[r-1](e)}}(e,t);default:throw new Error("Unsupported operator ".concat(r))}}var H=r(59468);function Y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(e){return!0}function $(e){var t=function(e,t){for(var r=e.length,n=new Array(r),i=0;i<r;++i){var o=e[i],a="filter"in o?W(o.filter,P,t):J,s=void 0;if(Array.isArray(o.style)){var l=o.style.length;s=new Array(l);for(var u=0;u<l;++u)s[u]=te(o.style[u],t)}else s=[te(o.style,t)];n[i]={filter:a,styles:s}}return function(t){for(var i=[],o=!1,a=0;a<r;++a){if((0,n[a].filter)(t)&&(!e[a].else||!o)){o=!0;var s,l=Y(n[a].styles);try{for(l.s();!(s=l.n()).done;){var u=(0,s.value)(t);u&&i.push(u)}}catch(e){l.e(e)}finally{l.f()}}}return i}}(e,Z()),r={variables:{},properties:{},resolution:NaN};return function(e,n){return r.properties=e.getPropertiesInternal(),r.resolution=n,t(r)}}function ee(e){for(var t=Z(),r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=te(e[i],t);var o={variables:{},properties:{},resolution:NaN},a=new Array(r);return function(e,t){o.properties=e.getPropertiesInternal(),o.resolution=t;for(var i=0;i<r;++i)a[i]=n[i](o);return a}}function te(e,t){var r=re(e,"",t),n=ne(e,"",t),i=function(e,t){var r="text-",n=oe(e,r+"value",t);if(!n)return null;var i=re(e,r,t),o=re(e,r+"background-",t),a=ne(e,r,t),s=ne(e,r+"background-",t),l=oe(e,r+"font",t),u=ie(e,r+"max-angle",t),c=ie(e,r+"offset-x",t),f=ie(e,r+"offset-y",t),h=ae(e,r+"overflow",t),d=oe(e,r+"placement",t),y=ie(e,r+"repeat",t),g=ce(e,r+"scale",t),m=ae(e,r+"rotate-with-view",t),_=ie(e,r+"rotation",t),v=oe(e,r+"align",t),A=oe(e,r+"justify",t),b=oe(e,r+"baseline",t),w=le(e,r+"padding",t),E=new p.Z({});return function(e){if(E.setText(n(e)),i&&E.setFill(i(e)),o&&E.setBackgroundFill(o(e)),a&&E.setStroke(a(e)),s&&E.setBackgroundStroke(s(e)),l&&E.setFont(l(e)),u&&E.setMaxAngle(u(e)),c&&E.setOffsetX(c(e)),f&&E.setOffsetY(f(e)),h&&E.setOverflow(h(e)),d){var t=d(e);if("point"!==t&&"line"!==t)throw new Error("Expected point or line for text-placement");E.setPlacement(t)}if(y&&E.setRepeat(y(e)),g&&E.setScale(g(e)),m&&E.setRotateWithView(m(e)),_&&E.setRotation(_(e)),v){var r=v(e);if("left"!==r&&"center"!==r&&"right"!==r&&"end"!==r&&"start"!==r)throw new Error("Expected left, right, center, start, or end for text-align");E.setTextAlign(r)}if(A){var p=A(e);if("left"!==p&&"right"!==p&&"center"!==p)throw new Error("Expected left, right, or center for text-justify");E.setJustify(p)}if(b){var x=b(e);if("bottom"!==x&&"top"!==x&&"middle"!==x&&"alphabetic"!==x&&"hanging"!==x)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");E.setTextBaseline(x)}return w&&E.setPadding(w(e)),E}}(e,t),o=function(e,t){if("icon-src"in e)return function(e,t){var r="icon-",n=r+"src",i=me(e[n],n),o=ue(e,r+"anchor",t),a=ce(e,r+"scale",t),s=ie(e,r+"opacity",t),l=ue(e,r+"displacement",t),u=ie(e,r+"rotation",t),f=ae(e,r+"rotate-with-view",t),h=pe(e,r+"anchor-origin"),p=de(e,r+"anchor-x-units"),d=de(e,r+"anchor-y-units"),y=function(e,t){var r=e[t];if(void 0===r)return;return ve(r,t)}(e,r+"color"),g=function(e,t){var r=e[t];if(void 0===r)return;if("string"!=typeof r)throw new Error("Expected a string for ".concat(t));return r}(e,r+"cross-origin"),m=function(e,t){var r=e[t];if(void 0===r)return;return ge(r,t)}(e,r+"offset"),_=pe(e,r+"offset-origin"),v=fe(e,r+"width"),A=fe(e,r+"height"),b=he(e,r+"size"),w=ye(e,r+"declutter"),E=new c.Z({src:i,anchorOrigin:h,anchorXUnits:p,anchorYUnits:d,color:y,crossOrigin:g,offset:m,offsetOrigin:_,height:A,width:v,size:b,declutterMode:w});return function(e){return s&&E.setOpacity(s(e)),l&&E.setDisplacement(l(e)),u&&E.setRotation(u(e)),f&&E.setRotateWithView(f(e)),a&&E.setScale(a(e)),o&&E.setAnchor(o(e)),E}}(e,t);if("shape-points"in e)return function(e,t){var r="shape-",n=r+"points",i=_e(e[n],n),o=re(e,r,t),a=ne(e,r,t),s=ce(e,r+"scale",t),l=ue(e,r+"displacement",t),u=ie(e,r+"rotation",t),c=ae(e,r+"rotate-with-view",t),h=fe(e,r+"radius"),p=fe(e,r+"radius1"),d=fe(e,r+"radius2"),y=fe(e,r+"angle"),g=ye(e,r+"declutter-mode"),m=new f.Z({points:i,radius:h,radius1:p,radius2:d,angle:y,declutterMode:g});return function(e){return o&&m.setFill(o(e)),a&&m.setStroke(a(e)),l&&m.setDisplacement(l(e)),u&&m.setRotation(u(e)),c&&m.setRotateWithView(c(e)),s&&m.setScale(s(e)),m}}(e,t);if("circle-radius"in e)return function(e,t){var r="circle-",n=re(e,r,t),i=ne(e,r,t),o=ie(e,r+"radius",t),a=ce(e,r+"scale",t),s=ue(e,r+"displacement",t),u=ie(e,r+"rotation",t),c=ae(e,r+"rotate-with-view",t),f=ye(e,r+"declutter-mode"),h=new l.Z({radius:5,declutterMode:f});return function(e){return o&&h.setRadius(o(e)),n&&h.setFill(n(e)),i&&h.setStroke(i(e)),s&&h.setDisplacement(s(e)),u&&h.setRotation(u(e)),c&&h.setRotateWithView(c(e)),a&&h.setScale(a(e)),h}}(e,t);return null}(e,t),a=ie(e,"z-index",t),u=new s.ZP;return function(e){var t=!0;if(r){var s=r(e);s&&(t=!1),u.setFill(s)}if(n){var l=n(e);l&&(t=!1),u.setStroke(l)}if(i){var c=i(e);c&&(t=!1),u.setText(c)}if(o){var f=o(e);f&&(t=!1),u.setImage(f)}return a&&u.setZIndex(a(e)),t?null:u}}function re(e,t,r){var n=se(e,t+"fill-color",r);if(!n)return null;var i=new u.Z;return function(e){var t=n(e);return"none"===t?null:(i.setColor(t),i)}}function ne(e,t,r){var n=ie(e,t+"stroke-width",r),i=se(e,t+"stroke-color",r);if(!n&&!i)return null;var o=oe(e,t+"stroke-line-cap",r),a=oe(e,t+"stroke-line-join",r),s=le(e,t+"stroke-line-dash",r),l=ie(e,t+"stroke-line-dash-offset",r),u=ie(e,t+"stroke-miter-limit",r),c=new h.Z;return function(e){if(i){var t=i(e);if("none"===t)return null;c.setColor(t)}if(n&&c.setWidth(n(e)),o){var r=o(e);if("butt"!==r&&"round"!==r&&"square"!==r)throw new Error("Expected butt, round, or square line cap");c.setLineCap(r)}if(a){var f=a(e);if("bevel"!==f&&"round"!==f&&"miter"!==f)throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(f)}return s&&c.setLineDash(s(e)),l&&c.setLineDashOffset(l(e)),u&&c.setMiterLimit(u(e)),c}}function ie(e,t,r){if(t in e){var n=W(e[t],O,r);return function(e){return _e(n(e),t)}}}function oe(e,t,r){if(!(t in e))return null;var n=W(e[t],T,r);return function(e){return me(n(e),t)}}function ae(e,t,r){if(!(t in e))return null;var n=W(e[t],P,r);return function(e){var r=n(e);if("boolean"!=typeof r)throw new Error("Expected a boolean for ".concat(t));return r}}function se(e,t,r){if(!(t in e))return null;var n=W(e[t],M|T,r);return function(e){return ve(n(e),t)}}function le(e,t,r){if(!(t in e))return null;var n=W(e[t],k,r);return function(e){return ge(n(e),t)}}function ue(e,t,r){if(!(t in e))return null;var n=W(e[t],k,r);return function(e){var r=ge(n(e),t);if(2!==r.length)throw new Error("Expected two numbers for ".concat(t));return r}}function ce(e,t,r){if(!(t in e))return null;var n=W(e[t],k|O,r);return function(e){return function(e,t){if("number"==typeof e)return e;var r=ge(e,t);if(2!==r.length)throw new Error("Expected an array of two numbers for ".concat(t));return r}(n(e),t)}}function fe(e,t){var r=e[t];if(void 0!==r){if("number"!=typeof r)throw new Error("Expected a number for ".concat(t));return r}}function he(e,t){var r=e[t];if(void 0!==r){if("number"==typeof r)return(0,H.Pq)(r);if(!Array.isArray(r))throw new Error("Expected a number or size array for ".concat(t));if(2!==r.length||"number"!=typeof r[0]||"number"!=typeof r[1])throw new Error("Expected a number or size array for ".concat(t));return r}}function pe(e,t){var r=e[t];if(void 0!==r){if("bottom-left"!==r&&"bottom-right"!==r&&"top-left"!==r&&"top-right"!==r)throw new Error("Expected bottom-left, bottom-right, top-left, or top-right for ".concat(t));return r}}function de(e,t){var r=e[t];if(void 0!==r){if("pixels"!==r&&"fraction"!==r)throw new Error("Expected pixels or fraction for ".concat(t));return r}}function ye(e,t){var r=e[t];if(void 0!==r){if("string"!=typeof r)throw new Error("Expected a string for ".concat(t));if("declutter"!==r&&"obstacle"!==r&&"none"!==r)throw new Error("Expected declutter, obstacle, or none for ".concat(t));return r}}function ge(e,t){if(!Array.isArray(e))throw new Error("Expected an array for ".concat(t));for(var r=e.length,n=0;n<r;++n)if("number"!=typeof e[n])throw new Error("Expected an array of numbers for ".concat(t));return e}function me(e,t){if("string"!=typeof e)throw new Error("Expected a string for ".concat(t));return e}function _e(e,t){if("number"!=typeof e)throw new Error("Expected a number for ".concat(t));return e}function ve(e,t){if("string"==typeof e)return e;var r=ge(e,t),n=r.length;if(n<3||n>4)throw new Error("Expected a color with 3 or 4 values for ".concat(t));return r}function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Ae(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Ae(o)?o:String(o)),n)}var i,o}function we(){return we="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ie(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},we.apply(this,arguments)}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ee(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ie(e);if(t){var i=Ie(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ie(e)}var Se="renderOrder";const Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(o,e);var t,r,n,i=xe(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{};var r=Object.assign({},e);return delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,(t=i.call(this,r)).declutter_=void 0!==e.declutter&&e.declutter,t.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,t.style_=null,t.styleFunction_=void 0,t.setStyle(e.style),t.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,t.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,t}return t=o,(r=[{key:"getDeclutter",value:function(){return this.declutter_}},{key:"getFeatures",value:function(e){return we(Ie(o.prototype),"getFeatures",this).call(this,e)}},{key:"getRenderBuffer",value:function(){return this.renderBuffer_}},{key:"getRenderOrder",value:function(){return this.get(Se)}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"getUpdateWhileAnimating",value:function(){return this.updateWhileAnimating_}},{key:"getUpdateWhileInteracting",value:function(){return this.updateWhileInteracting_}},{key:"renderDeclutter",value:function(e){e.declutterTree||(e.declutterTree=new a(9)),this.getRenderer().renderDeclutter(e)}},{key:"setRenderOrder",value:function(e){this.set(Se,e)}},{key:"setStyle",value:function(e){this.style_=function(e){if(void 0===e)return s.yF;if(!e)return null;if("function"==typeof e)return e;if(e instanceof s.ZP)return e;if(!Array.isArray(e))return ee([e]);if(0===e.length)return[];var t=e.length,r=e[0];if(r instanceof s.ZP){for(var n=new Array(t),i=0;i<t;++i){var o=e[i];if(!(o instanceof s.ZP))throw new Error("Expected a list of style instances");n[i]=o}return n}if("style"in r){for(var a=new Array(t),l=0;l<t;++l){var u=e[l];if(!("style"in u))throw new Error("Expected a list of rules with a style property");a[l]=u}return $(a)}var c=e;return ee(c)}(e),this.styleFunction_=null===e?void 0:(0,s.J$)(this.style_),this.changed()}}])&&be(t.prototype,r),n&&be(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(o.Z)},77291:(e,t,r)=>{"use strict";r.d(t,{V:()=>w,Z:()=>x});var n=r(87982),i=r(45004),o=r(14516),a=r(28513),s=r(2115),l=r(43059),u=r(97972),c=r(83482),f=r(36181),h=r(20594),p=r(34586);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===d(o)?o:String(o)),n)}var i,o}function g(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var w=function(e){_(r,e);var t=A(r);function r(e,n){var i;return m(this,r),(i=t.call(this,e)).layer=n,i}return g(r)}(a.ZP),E="layers";const x=function(e){_(r,e);var t=A(r);function r(e){var n;m(this,r),e=e||{};var o=Object.assign({},e);delete o.layers;var a=e.layers;return(n=t.call(this,o)).on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(E,n.handleLayersChanged_),a?Array.isArray(a)?a=new i.Z(a.slice(),{unique:!0}):(0,u.h)("function"==typeof a.getArray,"Expected `layers` to be an array or a `Collection`"):a=new i.Z(void 0,{unique:!0}),n.setLayers(a),n}return g(r,[{key:"handleLayerChange_",value:function(){this.changed()}},{key:"handleLayersChanged_",value:function(){this.layersListenerKeys_.forEach(p.bN),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var t in this.layersListenerKeys_.push((0,p.oL)(e,o.Z.ADD,this.handleLayersAdd_,this),(0,p.oL)(e,o.Z.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(p.bN);(0,c.Z)(this.listenerKeys_);for(var r=e.getArray(),n=0,i=r.length;n<i;n++){var a=r[n];this.registerLayerListeners_(a),this.dispatchEvent(new w("addlayer",a))}this.changed()}},{key:"registerLayerListeners_",value:function(e){var t=[(0,p.oL)(e,l.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,p.oL)(e,s.Z.CHANGE,this.handleLayerChange_,this)];e instanceof r&&t.push((0,p.oL)(e,"addlayer",this.handleLayerGroupAdd_,this),(0,p.oL)(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,h.sq)(e)]=t}},{key:"handleLayerGroupAdd_",value:function(e){this.dispatchEvent(new w("addlayer",e.layer))}},{key:"handleLayerGroupRemove_",value:function(e){this.dispatchEvent(new w("removelayer",e.layer))}},{key:"handleLayersAdd_",value:function(e){var t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new w("addlayer",t)),this.changed()}},{key:"handleLayersRemove_",value:function(e){var t=e.element,r=(0,h.sq)(t);this.listenerKeys_[r].forEach(p.bN),delete this.listenerKeys_[r],this.dispatchEvent(new w("removelayer",t)),this.changed()}},{key:"getLayers",value:function(){return this.get(E)}},{key:"setLayers",value:function(e){var t=this.getLayers();if(t)for(var r=t.getArray(),n=0,i=r.length;n<i;++n)this.dispatchEvent(new w("removelayer",r[n]));this.set(E,e)}},{key:"getLayersArray",value:function(e){return e=void 0!==e?e:[],this.getLayers().forEach((function(t){t.getLayersArray(e)})),e}},{key:"getLayerStatesArray",value:function(e){var t=void 0!==e?e:[],r=t.length;this.getLayers().forEach((function(e){e.getLayerStatesArray(t)}));var n=this.getLayerState(),i=n.zIndex;e||void 0!==n.zIndex||(i=0);for(var o=r,a=t.length;o<a;o++){var s=t[o];s.opacity*=n.opacity,s.visible=s.visible&&n.visible,s.maxResolution=Math.min(s.maxResolution,n.maxResolution),s.minResolution=Math.max(s.minResolution,n.minResolution),s.minZoom=Math.max(s.minZoom,n.minZoom),s.maxZoom=Math.min(s.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==s.extent?s.extent=(0,f.Ed)(s.extent,n.extent):s.extent=n.extent),void 0===s.zIndex&&(s.zIndex=i)}return t}},{key:"getSourceState",value:function(){return"ready"}}]),r}(n.Z)},94867:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(93931),i=r(28427);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},s.apply(this,arguments)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,r,n,o=u(f);function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),o.call(this,e)}return t=f,(r=[{key:"createRenderer",value:function(){return new i.Z(this)}},{key:"getData",value:function(e){return s(c(f.prototype),"getData",this).call(this,e)}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},54115:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_,j:()=>m});var n=r(87982),i=r(2115),o=r(61383),a=r(27114),s=r(92922),l=r(97972),u=r(36181),c=r(34586);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},p.apply(this,arguments)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function m(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}const _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(_,e);var t,r,n,f=y(_);function _(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_);var r=Object.assign({},e);delete r.source,(t=f.call(this,r)).on,t.once,t.un,t.mapPrecomposeKey_=null,t.mapRenderKey_=null,t.sourceChangeKey_=null,t.renderer_=null,t.sourceReady_=!1,t.rendered=!1,e.render&&(t.render=e.render),e.map&&t.setMap(e.map),t.addChangeListener(o.Z.SOURCE,t.handleSourcePropertyChange_);var n=e.source?e.source:null;return t.setSource(n),t}return t=_,(r=[{key:"getLayersArray",value:function(e){return(e=e||[]).push(this),e}},{key:"getLayerStatesArray",value:function(e){return(e=e||[]).push(this.getLayerState()),e}},{key:"getSource",value:function(){return this.get(o.Z.SOURCE)||null}},{key:"getRenderSource",value:function(){return this.getSource()}},{key:"getSourceState",value:function(){var e=this.getSource();return e?e.getState():"undefined"}},{key:"handleSourceChange_",value:function(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}},{key:"handleSourcePropertyChange_",value:function(){var e=this;this.sourceChangeKey_&&((0,c.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;var t=this.getSource();t&&(this.sourceChangeKey_=(0,c.oL)(t,i.Z.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((function(){e.dispatchEvent("sourceready")}),0))),this.changed()}},{key:"getFeatures",value:function(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}},{key:"getData",value:function(e){return this.renderer_&&this.rendered?this.renderer_.getData(e):null}},{key:"isVisible",value:function(e){var t,r,n=this,i=this.getMapInternal();!e&&i&&(e=i.getView()),!(t=e instanceof s.ZP?{viewState:e.getState(),extent:e.calculateExtent()}:e).layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),r=t.layerStatesArray?t.layerStatesArray.find((function(e){return e.layer===n})):this.getLayerState();var o=this.getExtent();return m(r,t.viewState)&&(!o||(0,u.kK)(o,t.extent))}},{key:"getAttributions",value:function(e){if(!this.isVisible(e))return[];var t,r=this.getSource();if(r&&(t=r.getAttributions()),!t)return[];var n=t(e instanceof s.ZP?e.getViewStateAndExtent():e);return Array.isArray(n)||(n=[n]),n}},{key:"render",value:function(e,t){var r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}},{key:"unrender",value:function(){this.rendered=!1}},{key:"setMapInternal",value:function(e){e||this.unrender(),this.set(o.Z.MAP,e)}},{key:"getMapInternal",value:function(){return this.get(o.Z.MAP)}},{key:"setMap",value:function(e){this.mapPrecomposeKey_&&((0,c.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&((0,c.bN)(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=(0,c.oL)(e,a.Z.PRECOMPOSE,(function(e){var t=e.frameState.layerStatesArray,r=this.getLayerState(!1);(0,l.h)(!t.some((function(e){return e.layer===r.layer})),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}),this),this.mapRenderKey_=(0,c.oL)(this,i.Z.CHANGE,e.render,e),this.changed())}},{key:"setSource",value:function(e){this.set(o.Z.SOURCE,e)}},{key:"getRenderer",value:function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}},{key:"hasRenderer",value:function(){return!!this.renderer_}},{key:"createRenderer",value:function(){return null}},{key:"disposeInternal",value:function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),p(g(_.prototype),"disposeInternal",this).call(this)}}])&&h(t.prototype,r),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),_}(n.Z)},61383:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},17246:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(40564),i=r(96587);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,o=l(u);function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o.call(this,e)}return t=u,(r=[{key:"createRenderer",value:function(){return new i.Z(this)}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Z)},4633:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},57649:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(77277),i=r(27525);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,o=l(u);function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),o.call(this,e)}return t=u,(r=[{key:"createRenderer",value:function(){return new i.Z(this)}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Z)},66327:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(77277),i=r(3785),o=r(4633),a=r(97972);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},u.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(p,e);var t,r,n,s=f(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),e=e||{};var r=Object.assign({},e);delete r.preload,delete r.useInterimTilesOnError,(t=s.call(this,r)).on,t.once,t.un;var n=e.renderMode||"hybrid";return(0,a.h)("hybrid"==n||"vector"==n,"`renderMode` must be `'hybrid'` or `'vector'`"),t.renderMode_=n,t.setPreload(e.preload?e.preload:0),t.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),t.getBackground,t.setBackground,t}return t=p,(r=[{key:"createRenderer",value:function(){return new i.Z(this)}},{key:"getFeatures",value:function(e){return u(h(p.prototype),"getFeatures",this).call(this,e)}},{key:"getRenderMode",value:function(){return this.renderMode_}},{key:"getPreload",value:function(){return this.get(o.Z.PRELOAD)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(o.Z.USE_INTERIM_TILES_ON_ERROR)}},{key:"setPreload",value:function(e){this.set(o.Z.PRELOAD,e)}},{key:"setUseInterimTilesOnError",value:function(e){this.set(o.Z.USE_INTERIM_TILES_ON_ERROR,e)}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.Z)},86357:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(40564),i=r(61383),o=r(34859),a=r(86879);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(e,t){var r="\n    attribute vec2 ".concat(o.zj.TEXTURE_COORD,";\n    uniform mat4 ").concat(o.XE.TILE_TRANSFORM,";\n    uniform float ").concat(o.XE.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(o.XE.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(o.XE.TEXTURE_RESOLUTION,";\n    uniform float ").concat(o.XE.TEXTURE_ORIGIN_X,";\n    uniform float ").concat(o.XE.TEXTURE_ORIGIN_Y,";\n    uniform float ").concat(o.XE.DEPTH,";\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ").concat(o.zj.TEXTURE_COORD,";\n      v_mapCoord = vec2(\n        ").concat(o.XE.TEXTURE_ORIGIN_X," + ").concat(o.XE.TEXTURE_RESOLUTION," * ").concat(o.XE.TEXTURE_PIXEL_WIDTH," * v_textureCoord[0],\n        ").concat(o.XE.TEXTURE_ORIGIN_Y," - ").concat(o.XE.TEXTURE_RESOLUTION," * ").concat(o.XE.TEXTURE_PIXEL_HEIGHT," * v_textureCoord[1]\n      );\n      gl_Position = ").concat(o.XE.TILE_TRANSFORM," * vec4(").concat(o.zj.TEXTURE_COORD,", ").concat(o.XE.DEPTH,", 1.0);\n    }\n  "),n={inFragmentShader:!0,variables:[],attributes:[],functions:{},bandCount:t,style:e},i=[];if(void 0!==e.color){var s=(0,a.CL)(n,e.color,a.$h.COLOR);i.push("color = ".concat(s,";"))}if(void 0!==e.contrast){var l=(0,a.CL)(n,e.contrast,a.$h.NUMBER);i.push("color.rgb = clamp((".concat(l," + 1.0) * color.rgb - (").concat(l," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==e.exposure){var u=(0,a.CL)(n,e.exposure,a.$h.NUMBER);i.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(void 0!==e.saturation){var c=(0,a.CL)(n,e.saturation,a.$h.NUMBER);i.push("\n      float saturation = ".concat(c," + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    "))}if(void 0!==e.gamma){var f=(0,a.CL)(n,e.gamma,a.$h.NUMBER);i.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(f,"));"))}if(void 0!==e.brightness){var h=(0,a.CL)(n,e.brightness,a.$h.NUMBER);i.push("color.rgb = clamp(color.rgb + ".concat(h,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var p={},d=n.variables.length;if(d>1&&!e.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var y=function(){var t=n.variables[g];if(!(t.name in e.variables))throw new Error("Missing '".concat(t.name,"' in style variables"));var r=(0,a.aT)(t.name);p[r]=function(){var r=e.variables[t.name];return"string"==typeof r&&(r=(0,a.Ce)(r)),void 0!==r?r:-9999999}},g=0;g<d;++g)y();var m=Object.keys(p).map((function(e){return"uniform float ".concat(e,";")})),_=Math.ceil(t/4);m.push("uniform sampler2D ".concat(o.XE.TILE_TEXTURE_ARRAY,"[").concat(_,"];")),n.paletteTextures&&m.push("uniform sampler2D ".concat(a.gM,"[").concat(n.paletteTextures.length,"];"));var v=Object.keys(n.functions).map((function(e){return n.functions[e]}));return{vertexShader:r,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ".concat(o.XE.RENDER_EXTENT,";\n    uniform float ").concat(o.XE.TRANSITION_ALPHA,";\n    uniform float ").concat(o.XE.TEXTURE_PIXEL_WIDTH,";\n    uniform float ").concat(o.XE.TEXTURE_PIXEL_HEIGHT,";\n    uniform float ").concat(o.XE.RESOLUTION,";\n    uniform float ").concat(o.XE.ZOOM,";\n\n    ").concat(m.join("\n"),"\n\n    ").concat(v.join("\n"),"\n\n    void main() {\n      if (\n        v_mapCoord[0] < ").concat(o.XE.RENDER_EXTENT,"[0] ||\n        v_mapCoord[1] < ").concat(o.XE.RENDER_EXTENT,"[1] ||\n        v_mapCoord[0] > ").concat(o.XE.RENDER_EXTENT,"[2] ||\n        v_mapCoord[1] > ").concat(o.XE.RENDER_EXTENT,"[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(").concat(o.XE.TILE_TEXTURE_ARRAY,"[0],  v_textureCoord);\n\n      ").concat(i.join("\n"),"\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ").concat(o.XE.TRANSITION_ALPHA,";\n    }"),uniforms:p,paletteTextures:n.paletteTextures}}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(s,e);var t,r,n,a=c(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=(e=e?Object.assign({},e):{}).style||{};delete e.style;var n=e.cacheSize;return delete e.cacheSize,(t=a.call(this,e)).sources_=e.sources,t.renderedSource_=null,t.renderedResolution_=NaN,t.style_=r,t.cacheSize_=n,t.styleVariables_=t.style_.variables||{},t.addChangeListener(i.Z.SOURCE,t.handleSourceUpdate_),t}return t=s,(r=[{key:"getSources",value:function(e,t){var r=this.getSource();return this.sources_?"function"==typeof this.sources_?this.sources_(e,t):this.sources_:r?[r]:[]}},{key:"getRenderSource",value:function(){return this.renderedSource_||this.getSource()}},{key:"getSourceState",value:function(){var e=this.getRenderSource();return e?e.getState():"undefined"}},{key:"handleSourceUpdate_",value:function(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}},{key:"getSourceBandCount_",value:function(){var e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}},{key:"createRenderer",value:function(){var e=h(this.style_,this.getSourceBandCount_());return new o.ZP(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.cacheSize_,paletteTextures:e.paletteTextures})}},{key:"renderSources",value:function(e,t){for(var r,n=this.getRenderer(),i=0,o=t.length;i<o;++i)this.renderedSource_=t[i],n.prepareFrame(e)&&(r=n.renderFrame(e));return r}},{key:"render",value:function(e,t){var r=this;this.rendered=!0;for(var n=e.viewState,i=this.getSources(e.extent,n.resolution),o=!0,a=function(){var e=i[s],t=e.getState();"loading"==t&&e.addEventListener("change",(function t(){"ready"==e.getState()&&(e.removeEventListener("change",t),r.changed())})),o=o&&"ready"==t},s=0,l=i.length;s<l;++s)a();var u=this.renderSources(e,i);if(this.getRenderer().renderComplete&&o)return this.renderedResolution_=n.resolution,u;if(this.renderedResolution_>.5*n.resolution){var c=this.getSources(e.extent,this.renderedResolution_).filter((function(e){return!i.includes(e)}));if(c.length>0)return this.renderSources(e,c)}return u}},{key:"setStyle",value:function(e){this.styleVariables_=e.variables||{},this.style_=e;var t=h(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms}),this.changed()}},{key:"updateStyleVariables",value:function(e){Object.assign(this.styleVariables_,e),this.changed()}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(n.Z);p.prototype.dispose;const d=p},14814:(e,t,r)=>{"use strict";r.d(t,{$6:()=>i,Gg:()=>a,VW:()=>o});var n=r(27811);function i(e,t){return[[-1/0,-1/0,1/0,1/0]]}function o(e,t){return[e]}function a(e){return function(t,r,i){var o=e.getZForResolution((0,n.oK)(r,i)),a=e.getTileRangeForExtentAndZ((0,n.dY)(t,i),o),s=[],l=[o,0,0];for(l[1]=a.minX;l[1]<=a.maxX;++l[1])for(l[2]=a.minY;l[2]<=a.maxY;++l[2])s.push((0,n.Fj)(e.getTileCoordExtent(l),i));return s}}},7697:(e,t,r)=>{"use strict";function n(e,t,r){return Math.min(Math.max(e,t),r)}function i(e,t,r,n,i,a){var s=i-r,l=a-n;if(0!==s||0!==l){var u=((e-r)*s+(t-n)*l)/(s*s+l*l);u>1?(r=i,n=a):u>0&&(r+=s*u,n+=l*u)}return o(e,t,r,n)}function o(e,t,r,n){var i=r-e,o=n-t;return i*i+o*o}function a(e){for(var t=e.length,r=0;r<t;r++){for(var n=r,i=Math.abs(e[r][r]),o=r+1;o<t;o++){var a=Math.abs(e[o][r]);a>i&&(i=a,n=o)}if(0===i)return null;var s=e[n];e[n]=e[r],e[r]=s;for(var l=r+1;l<t;l++)for(var u=-e[l][r]/e[r][r],c=r;c<t+1;c++)r==c?e[l][c]=0:e[l][c]+=u*e[r][c]}for(var f=new Array(t),h=t-1;h>=0;h--){f[h]=e[h][t]/e[h][h];for(var p=h-1;p>=0;p--)e[p][t]-=e[p][h]*f[h]}return f}function s(e){return 180*e/Math.PI}function l(e){return e*Math.PI/180}function u(e,t){var r=e%t;return r*t<0?r+t:r}function c(e,t,r){return e+r*(t-e)}function f(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function h(e,t){return Math.round(f(e,t))}function p(e,t){return Math.floor(f(e,t))}function d(e,t){return Math.ceil(f(e,t))}r.d(t,{$W:()=>u,FH:()=>f,GW:()=>p,NM:()=>h,SV:()=>a,Ux:()=>s,Yr:()=>l,bI:()=>o,mD:()=>d,rU:()=>i,t7:()=>c,uZ:()=>n})},83482:(e,t,r)=>{"use strict";function n(e){for(var t in e)delete e[t]}function i(e){var t;for(t in e)return!1;return!t}r.d(t,{Z:()=>n,x:()=>i})},69613:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},27811:(e,t,r)=>{"use strict";r.d(t,{Wm:()=>C.W,kv:()=>n.Z,zY:()=>q,rM:()=>Q,Sx:()=>N,sx:()=>ie,UQ:()=>G,uA:()=>pe,h_:()=>D,OP:()=>K,mi:()=>V,Vs:()=>le,dY:()=>ce,oK:()=>he,U2:()=>Z,_Q:()=>U,Ck:()=>Y,WO:()=>H,Cs:()=>oe,gD:()=>F,DN:()=>ne,bU:()=>W,lO:()=>se,Fj:()=>ue,on:()=>fe,vs:()=>X,$A:()=>J,eL:()=>ae});var n=r(14752);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var u=6378137,c=Math.PI*u,f=[-c,-c,c,c],h=[-180,-85,180,85],p=u*Math.log(Math.tan(Math.PI/2)),d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(l,e);var t,r,n,i=s(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this,{code:e,units:"m",extent:f,global:!0,worldExtent:h,getPointResolution:function(e,t){return e/Math.cosh(t[1]/u)}})}return t=l,r&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(n.Z),y=[new d("EPSG:3857"),new d("EPSG:102100"),new d("EPSG:102113"),new d("EPSG:900913"),new d("http://www.opengis.net/def/crs/EPSG/0/3857"),new d("http://www.opengis.net/gml/srs/epsg.xml#3857")];function g(e,t,r){var n=e.length;r=r>1?r:2,void 0===t&&(t=r>2?e.slice():new Array(n));for(var i=0;i<n;i+=r){t[i]=c*e[i]/180;var o=u*Math.log(Math.tan(Math.PI*(+e[i+1]+90)/360));o>p?o=p:o<-p&&(o=-p),t[i+1]=o}return t}function m(e,t,r){var n=e.length;r=r>1?r:2,void 0===t&&(t=r>2?e.slice():new Array(n));for(var i=0;i<n;i+=r)t[i]=180*e[i]/c,t[i+1]=360*Math.atan(Math.exp(e[i+1]/u))/Math.PI-90;return t}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===_(o)?o:String(o)),n)}var i,o}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var E=[-180,-90,180,90],x=6378137*Math.PI/180,I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(o,e);var t,r,n,i=b(o);function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,{code:e,units:"degrees",extent:E,axisOrientation:t,global:!0,metersPerUnit:x,worldExtent:E})}return t=o,r&&v(t.prototype,r),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(n.Z),S=[new I("CRS:84"),new I("EPSG:4326","neu"),new I("urn:ogc:def:crs:OGC:1.3:CRS84"),new I("urn:ogc:def:crs:OGC:2:84"),new I("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new I("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new I("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],C=r(21364),P={};var O=r(90435),T=r(36181),M=r(7697),k=r(36707),R=r(16092),B=r(19230),L=!0;function D(e){L=!(void 0===e||e)}function j(e,t){if(void 0!==t)for(var r=0,n=e.length;r<n;++r)t[r]=e[r];else t=e.slice();return t}function F(e,t){if(void 0!==t&&e!==t){for(var r=0,n=e.length;r<n;++r)t[r]=e[r];e=t}return e}function N(e){!function(e,t){P[e]=t}(e.getCode(),e),(0,O.IH)(e,e,j)}function Z(e){return"string"==typeof e?P[t=e]||P[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:e||null;var t}function U(e,t,r,n){var i,o=(e=Z(e)).getPointResolutionFunc();if(o){if(i=o(t,r),n&&n!==e.getUnits()){var a=e.getMetersPerUnit();a&&(i=i*a/C.W[n])}}else{var s=e.getUnits();if("degrees"==s&&!n||"degrees"==n)i=t;else{var l=H(e,Z("EPSG:4326"));if(l===F&&"degrees"!==s)i=t*e.getMetersPerUnit();else{var u=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];u=l(u,u,2),i=((0,R.Sp)(u.slice(0,2),u.slice(2,4))+(0,R.Sp)(u.slice(4,6),u.slice(6,8)))/2}var c=n?C.W[n]:e.getMetersPerUnit();void 0!==c&&(i/=c)}}return i}function Q(e){!function(e){e.forEach(N)}(e),e.forEach((function(t){e.forEach((function(e){t!==e&&(0,O.IH)(t,e,j)}))}))}function G(e,t){return e?"string"==typeof e?Z(e):e:Z(t)}function z(e){return function(t,r,n){var i=t.length;n=void 0!==n?n:2,r=void 0!==r?r:new Array(i);for(var o=0;o<i;o+=n)for(var a=e(t.slice(o,o+n)),s=a.length,l=0,u=n;l<u;++l)r[o+l]=l>=s?t[o+l]:a[l];return r}}function q(e,t,r,n){var i=Z(e),o=Z(t);(0,O.IH)(i,o,z(r)),(0,O.IH)(o,i,z(n))}function V(e,t){return D(),X(e,"EPSG:4326",void 0!==t?t:"EPSG:3857")}function W(e,t){var r=X(e,void 0!==t?t:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=(0,M.$W)(n+180,360)-180),r}function K(e,t){if(e===t)return!0;var r=e.getUnits()===t.getUnits();return(e.getCode()===t.getCode()||H(e,t)===j)&&r}function H(e,t){var r=e.getCode(),n=t.getCode(),i=(0,O.U2)(r,n);return i||(i=F),i}function Y(e,t){return H(Z(e),Z(t))}function X(e,t,r){return Y(t,r)(e,void 0,e.length)}function J(e,t,r,n){var i=Y(t,r);return(0,T.Ne)(e,i,void 0,n)}var $,ee,te,re=null;function ne(e){re=Z(e)}function ie(){re=null}function oe(){return re}function ae(){ne("EPSG:4326")}function se(e,t){return re?X(e,t,re):e}function le(e,t){return re?X(e,re,t):(L&&!(0,k.fS)(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(L=!1,(0,B.ZK)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function ue(e,t){return re?J(e,t,re):e}function ce(e,t){return re?J(e,re,t):e}function fe(e,t){if(!re)return e;var r=Z(t).getUnits(),n=re.getUnits();return r&&n?e*C.W[r]/C.W[n]:e}function he(e,t){if(!re)return e;var r=Z(t).getUnits(),n=re.getUnits();return r&&n?e*C.W[n]/C.W[r]:e}function pe(e,t,r){return function(n){var i,o;if(e.canWrapX()){var a=e.getExtent(),s=(0,T.dz)(a);n=n.slice(0),(o=(0,k.jk)(n,e,s))&&(n[0]=n[0]-o*s),n[0]=(0,M.uZ)(n[0],a[0],a[2]),n[1]=(0,M.uZ)(n[1],a[1],a[3]),i=r(n)}else i=r(n);return o&&t.canWrapX()&&(i[0]+=o*(0,T.dz)(t.getExtent())),i}}Q(y),Q(S),$=y,ee=g,te=m,S.forEach((function(e){$.forEach((function(t){(0,O.IH)(e,t,ee),(0,O.IH)(t,e,te)}))}))},14752:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(21364);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}const a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}var t,r,i;return t=e,(r=[{key:"canWrapX",value:function(){return this.canWrapX_}},{key:"getCode",value:function(){return this.code_}},{key:"getExtent",value:function(){return this.extent_}},{key:"getUnits",value:function(){return this.units_}},{key:"getMetersPerUnit",value:function(){return this.metersPerUnit_||n.W[this.units_]}},{key:"getWorldExtent",value:function(){return this.worldExtent_}},{key:"getAxisOrientation",value:function(){return this.axisOrientation_}},{key:"isGlobal",value:function(){return this.global_}},{key:"setGlobal",value:function(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)}},{key:"getDefaultTileGrid",value:function(){return this.defaultTileGrid_}},{key:"setDefaultTileGrid",value:function(e){this.defaultTileGrid_=e}},{key:"setExtent",value:function(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)}},{key:"setWorldExtent",value:function(e){this.worldExtent_=e}},{key:"setGetPointResolution",value:function(e){this.getPointResolutionFunc_=e}},{key:"getPointResolutionFunc",value:function(){return this.getPointResolutionFunc_}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},21364:(e,t,r)=>{"use strict";r.d(t,{N:()=>i,W:()=>o});var n={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function i(e){return n[e]}var o={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},85243:(e,t,r)=>{"use strict";r.d(t,{$m:()=>p,d:()=>g,sM:()=>d,z2:()=>f});var n=r(14752),i=r(27811),o=r(90435);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function f(e,t,r,i){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),s=new C(i||[]);return n(a,"_invoke",{value:E(e,r,s)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function d(){}function y(){}function g(){}var m={};c(m,o,(function(){return this}));var _=Object.getPrototypeOf,v=_&&_(_(P([])));v&&v!==t&&r.call(v,o)&&(m=v);var A=g.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(n,o,s,l){var u=h(e[n],e,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==a(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,s,l)}),(function(e){i("throw",e,s,l)})):t.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return i("throw",e,s,l)}))}l(u.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function E(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=x(a,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=h(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function x(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var i=h(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return y.prototype=g,n(A,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:y,configurable:!0}),y.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,l,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new w(f(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(A),c(A,u,"Generator"),c(A,o,(function(){return this})),c(A,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function l(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,s,"next",e)}function s(e){l(o,n,i,a,s,"throw",e)}a(void 0)}))}}var c=null;function f(e){c=e;var t,r,a=Object.keys(e.defs),s=a.length;for(t=0;t<s;++t){var l=a[t];if(!(0,i.U2)(l)){var u=e.defs(l),f=u.units;f||"longlat"!==u.projName||(f="degrees"),(0,i.Sx)(new n.Z({code:l,axisOrientation:u.axis,metersPerUnit:u.to_meter,units:f}))}}for(t=0;t<s;++t){var h=a[t],p=(0,i.U2)(h);for(r=0;r<s;++r){var d=a[r],y=(0,i.U2)(d);if(!(0,o.U2)(h,d))if(e.defs[h]===e.defs[d])(0,i.rM)([p,y]);else{var g=e(h,d);(0,i.zY)(p,y,(0,i.uA)(p,y,g.forward),(0,i.uA)(y,p,g.inverse))}}}}var h=function(){var e=u(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://epsg.io/".concat(t,".proj4"));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Unexpected response from epsg.io: ".concat(r.status));case 5:return e.abrupt("return",r.text());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function p(e){h=e}function d(e){return y.apply(this,arguments)}function y(){return(y=u(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t&&(t=parseInt(t.split(":").pop(),10)),r=c){e.next=4;break}throw new Error("Proj4 must be registered first with register(proj4)");case 4:if(n="EPSG:"+t,!r.defs(n)){e.next=7;break}return e.abrupt("return",(0,i.U2)(n));case 7:return e.t0=r,e.t1=n,e.next=11,h(t);case 11:return e.t2=e.sent,e.t0.defs.call(e.t0,e.t1,e.t2),f(r),e.abrupt("return",(0,i.U2)(n));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return function(){var t=u(s().mark((function t(r){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.maptiler.com/coordinates/search/code:".concat(r,".json?transformations=true&exports=true&key=").concat(e));case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("Unexpected response from maptiler.com: ".concat(n.status));case 5:return t.abrupt("return",n.json().then((function(e){var t=e.results;if((null==t?void 0:t.length)>0){var n=t.filter((function(e){var t,n;return"EPSG"===(null===(t=e.id)||void 0===t?void 0:t.authority)&&(null===(n=e.id)||void 0===n?void 0:n.code)===r}))[0];if(n){var i,o=n.transformations;if((null==o?void 0:o.length)>0){var a,s,l,u=n.default_transformation;if(o.filter((function(e){var t,r,n;return(null===(t=e.id)||void 0===t?void 0:t.authority)===(null==u?void 0:u.authority)&&(null===(r=e.id)||void 0===r?void 0:r.code)===(null==u?void 0:u.code)&&0===(null===(n=e.grids)||void 0===n?void 0:n.length)})).length>0)return null===(l=n.exports)||void 0===l?void 0:l.proj4;var c=null===(a=o.filter((function(e){var t,r,n;return 0===(null===(t=e.grids)||void 0===t?void 0:t.length)&&"EPSG"===(null===(r=e.target_crs)||void 0===r?void 0:r.authority)&&4326===(null===(n=e.target_crs)||void 0===n?void 0:n.code)&&!1===e.deprecated&&!0===e.usable})).sort((function(e,t){return e.accuracy-t.accuracy}))[0])||void 0===a||null===(s=a.exports)||void 0===s?void 0:s.proj4;if(c)return c}return null===(i=n.exports)||void 0===i?void 0:i.proj4}}})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},90435:(e,t,r)=>{"use strict";r.d(t,{IH:()=>i,U2:()=>o});var n={};function i(e,t,r){var i=e.getCode(),o=t.getCode();i in n||(n[i]={}),n[i][o]=r}function o(e,t){var r;return e in n&&t in n[e]&&(r=n[e][t]),r}},25558:(e,t,r)=>{"use strict";r.d(t,{CR:()=>c,Pt:()=>l,u3:()=>u});var n=r(63005),i=r(45907),o=r(16453),a=r(28643),s=r(27811);function l(e,t){var r=e.canvas,a=(t=t||{}).pixelRatio||i.MP,s=t.size;s&&(r.width=s[0]*a,r.height=s[1]*a,r.style.width=s[0]+"px",r.style.height=s[1]+"px");var l=[0,0,r.width,r.height],u=(0,o.bA)((0,o.Ue)(),a,a);return new n.Z(e,a,l,u,0)}function u(e){if(!(e.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var t,r=e.inversePixelTransform[0],i=e.inversePixelTransform[1],l=Math.sqrt(r*r+i*i),u=e.frameState,c=(0,o.Jp)(e.inversePixelTransform.slice(),u.coordinateToPixelTransform),f=(0,a.se)(u.viewState.resolution,l),h=(0,s.Cs)();return h&&(t=(0,s.WO)(h,u.viewState.projection)),new n.Z(e.context,l,u.extent,c,u.viewState.rotation,f,t)}function c(e,t){return(0,o.nn)(e.inversePixelTransform,t.slice(0))}},76299:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e,t,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(i=s.call(this,e)).inversePixelTransform=t,i.frameState=r,i.context=n,i}return t=l,r&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(r(28513).ZP)},27114:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},26890:(e,t,r)=>{"use strict";r.d(t,{Im:()=>E,ZP:()=>I,wc:()=>x});var n=r(44993),i=r(61900),o=r(48843),a=r(38815),s=r(70278),l=r(44133),u=r(92882),c=r(16453),f=r(36181),h=r(11133),p=r(70935),d=r(27811),y=r(98180),g=r(45057),m=r(30545),_=r(32355);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===v(o)?o:String(o)),n)}var i,o}var b=(0,c.Ue)(),w=function(){function e(t,r,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=r,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n,this.properties_=i}var t,r,n;return t=e,(r=[{key:"get",value:function(e){return this.properties_[e]}},{key:"getExtent",value:function(){return this.extent_||(this.extent_="Point"===this.type_?(0,f.HK)(this.flatCoordinates_):(0,f.GN)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}},{key:"getFlatInteriorPoint",value:function(){if(!this.flatInteriorPoints_){var e=(0,f.qg)(this.getExtent());this.flatInteriorPoints_=(0,p.X)(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}},{key:"getFlatInteriorPoints",value:function(){if(!this.flatInteriorPoints_){var e=(0,m.E)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,p.U)(this.flatCoordinates_,0,this.ends_,2,e)}return this.flatInteriorPoints_}},{key:"getFlatMidpoint",value:function(){return this.flatMidpoints_||(this.flatMidpoints_=(0,g.WW)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}},{key:"getFlatMidpoints",value:function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var e=this.flatCoordinates_,t=0,r=this.ends_,n=0,i=r.length;n<i;++n){var o=r[n],a=(0,g.WW)(e,t,o,2,.5);(0,h.l7)(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}},{key:"getId",value:function(){return this.id_}},{key:"getOrientedFlatCoordinates",value:function(){return this.flatCoordinates_}},{key:"getGeometry",value:function(){return this}},{key:"getSimplifiedGeometry",value:function(e){return this}},{key:"simplifyTransformed",value:function(e,t){return this}},{key:"getProperties",value:function(){return this.properties_}},{key:"getPropertiesInternal",value:function(){return this.properties_}},{key:"getStride",value:function(){return 2}},{key:"getStyleFunction",value:function(){return this.styleFunction}},{key:"getType",value:function(){return this.type_}},{key:"transform",value:function(e){var t=(e=(0,d.U2)(e)).getExtent(),r=e.getWorldExtent();if(t&&r){var n=(0,f.Cr)(r)/(0,f.Cr)(t);(0,c.qC)(b,r[0],r[3],n,-n,0,0,0),(0,_.vT)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,b,this.flatCoordinates_)}}},{key:"getEnds",value:function(){return this.ends_}}])&&A(t.prototype,r),n&&A(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e){var t=e.getType();switch(t){case"Point":return new i.Z(e.getFlatCoordinates());case"MultiPoint":return new o.Z(e.getFlatCoordinates(),"XY");case"LineString":return new a.Z(e.getFlatCoordinates(),"XY");case"MultiLineString":return new s.Z(e.getFlatCoordinates(),"XY",e.getEnds());case"Polygon":var r=e.getFlatCoordinates(),n=e.getEnds(),c=(0,y.Q3)(r,n);return c.length>1?new l.Z(r,"XY",c):new u.ZP(r,"XY",n);default:throw new Error("Invalid geometry type:"+t)}}function x(e,t){var r=e.getId(),i=E(e),o=e.getProperties(),a=new n.Z;return void 0!==t&&a.setGeometryName(t),a.setGeometry(i),void 0!==r&&a.setId(r),a.setProperties(o,!0),a}w.prototype.getEndss=w.prototype.getEnds,w.prototype.getFlatCoordinates=w.prototype.getOrientedFlatCoordinates;const I=w},22345:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.d(t,{Z:()=>o});const o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"drawCustom",value:function(e,t,r,n){}},{key:"drawGeometry",value:function(e){}},{key:"setStyle",value:function(e){}},{key:"drawCircle",value:function(e,t){}},{key:"drawFeature",value:function(e,t){}},{key:"drawGeometryCollection",value:function(e,t){}},{key:"drawLineString",value:function(e,t){}},{key:"drawMultiLineString",value:function(e,t){}},{key:"drawMultiPoint",value:function(e,t){}},{key:"drawMultiPolygon",value:function(e,t){}},{key:"drawPoint",value:function(e,t){}},{key:"drawPolygon",value:function(e,t){}},{key:"drawText",value:function(e,t){}},{key:"setFillStrokeStyle",value:function(e,t){}},{key:"setImageStyle",value:function(e,t){}},{key:"setTextStyle",value:function(e,t){}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},38283:(e,t,r)=>{"use strict";r.d(t,{Df:()=>c,He:()=>d,Kd:()=>O,PH:()=>_,Qx:()=>I,Tx:()=>m,V4:()=>g,X9:()=>p,Zw:()=>T,_f:()=>M,bL:()=>f,mb:()=>h,oB:()=>A,rc:()=>y,ru:()=>v,sG:()=>w,yC:()=>b});var n,i,o=r(40439),a=r(45907),s=r(83482),l=r(88199),u=r(89368),c="10px sans-serif",f="#000",h="round",p=[],d=0,y="round",g=10,m="#000",_="center",v="middle",A=[0,0,0,0],b=1,w=new o.Z,E=null,x={},I=function(){var e,t,r="32px ",i=["monospace","serif"],o=i.length,a="wmytzilWMYTZIL@#/&?$%10";function l(e,n,s){for(var l=!0,u=0;u<o;++u){var c=i[u];if(t=P(e+" "+n+" "+r+c,a),s!=c){var f=P(e+" "+n+" "+r+s+","+c,a);l=l&&f!=t}}return!!l}function c(){for(var t=!0,r=w.getKeys(),i=0,o=r.length;i<o;++i){var a=r[i];w.get(a)<100&&(l.apply(this,a.split("\n"))?((0,s.Z)(x),E=null,n=void 0,w.set(a,100)):(w.set(a,w.get(a)+1,!0),t=!1))}t&&(clearInterval(e),e=void 0)}return function(t){var r=(0,u.p)(t);if(r)for(var n=r.families,i=0,o=n.length;i<o;++i){var a=n[i],s=r.style+"\n"+r.weight+"\n"+a;void 0===w.get(s)&&(w.set(s,100,!0),l(r.style,r.weight,a)||(w.set(s,0,!0),void 0===e&&(e=setInterval(c,32))))}}}(),S=function(e){var t=x[e];if(null==t){if(a.Id){var r=(0,u.p)(e),n=C(e,"Žg");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else i||((i=document.createElement("div")).innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);x[e]=t}return t};function C(e,t){return E||(E=(0,l.E4)(1,1)),e!=n&&(E.font=e,n=E.font),E.measureText(t)}function P(e,t){return C(e,t).width}function O(e,t,r){if(t in r)return r[t];var n=t.split("\n").reduce((function(t,r){return Math.max(t,P(e,r))}),0);return r[t]=n,n}function T(e,t){for(var r=[],n=[],i=[],o=0,a=0,s=0,l=0,u=0,c=t.length;u<=c;u+=2){var f=t[u];if("\n"!==f&&u!==c){var h=t[u+1]||e.font,p=P(h,f);r.push(p),a+=p;var d=S(h);n.push(d),l=Math.max(l,d)}else o=Math.max(o,a),i.push(a),a=0,s+=l}return{width:o,height:s,widths:r,heights:n,lineWidths:i}}function M(e,t,r,n,i,o,a,s,l,u,c){e.save(),1!==r&&(e.globalAlpha*=r),t&&e.transform.apply(e,t),n.contextInstructions?(e.translate(l,u),e.scale(c[0],c[1]),function(e,t){for(var r=e.contextInstructions,n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?t[r[n]].apply(t,r[n+1]):t[r[n]]=r[n+1]}(n,e)):c[0]<0||c[1]<0?(e.translate(l,u),e.scale(c[0],c[1]),e.drawImage(n,i,o,a,s,0,0,a,s)):e.drawImage(n,i,o,a,s,l,u,a*c[0],s*c[1]),e.restore()}},85845:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(23609),i=r(83587),o=r(22345),a=r(57446),s=r(36181),l=r(38283),u=r(11133),c=r(20105);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(y,e);var t,r,o,f=d(y);function y(e,t,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(i=f.call(this)).tolerance=e,i.maxExtent=t,i.pixelRatio=n,i.maxLineWidth=0,i.resolution=r,i.beginGeometryInstruction1_=null,i.beginGeometryInstruction2_=null,i.bufferedMaxExtent_=null,i.instructions=[],i.coordinates=[],i.tmpCoordinate_=[],i.hitDetectionInstructions=[],i.state={},i}return t=y,(r=[{key:"applyPixelRatio",value:function(e){var t=this.pixelRatio;return 1==t?e:e.map((function(e){return e*t}))}},{key:"appendFlatPointCoordinates",value:function(e,t){for(var r=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,i=this.coordinates,o=i.length,a=0,l=e.length;a<l;a+=t)n[0]=e[a],n[1]=e[a+1],(0,s.b8)(r,n)&&(i[o++]=n[0],i[o++]=n[1]);return o}},{key:"appendFlatLineCoordinates",value:function(e,t,r,n,o,a){var l=this.coordinates,u=l.length,c=this.getBufferedMaxExtent();a&&(t+=n);var f,h,p,d=e[t],y=e[t+1],g=this.tmpCoordinate_,m=!0;for(f=t+n;f<r;f+=n)g[0]=e[f],g[1]=e[f+1],(p=(0,s.pX)(c,g))!==h?(m&&(l[u++]=d,l[u++]=y,m=!1),l[u++]=g[0],l[u++]=g[1]):p===i.Z.INTERSECTING?(l[u++]=g[0],l[u++]=g[1],m=!1):m=!0,d=g[0],y=g[1],h=p;return(o&&m||f===t+n)&&(l[u++]=d,l[u++]=y),u}},{key:"drawCustomCoordinates_",value:function(e,t,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o],l=this.appendFlatLineCoordinates(e,t,s,n,!1,!1);i.push(l),t=s}return t}},{key:"drawCustom",value:function(e,t,r,i){this.beginGeometry(e,t);var o,a,s,l,u,f=e.getType(),h=e.getStride(),p=this.coordinates.length;switch(f){case"MultiPolygon":o=e.getOrientedFlatCoordinates(),l=[];var d=e.getEndss();u=0;for(var y=0,g=d.length;y<g;++y){var m=[];u=this.drawCustomCoordinates_(o,u,d[y],h,m),l.push(m)}this.instructions.push([n.ZP.CUSTOM,p,l,e,r,c.ug]),this.hitDetectionInstructions.push([n.ZP.CUSTOM,p,l,e,i||r,c.ug]);break;case"Polygon":case"MultiLineString":s=[],o="Polygon"==f?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),u=this.drawCustomCoordinates_(o,0,e.getEnds(),h,s),this.instructions.push([n.ZP.CUSTOM,p,s,e,r,c.o1]),this.hitDetectionInstructions.push([n.ZP.CUSTOM,p,s,e,i||r,c.o1]);break;case"LineString":case"Circle":o=e.getFlatCoordinates(),a=this.appendFlatLineCoordinates(o,0,o.length,h,!1,!1),this.instructions.push([n.ZP.CUSTOM,p,a,e,r,c.Ml]),this.hitDetectionInstructions.push([n.ZP.CUSTOM,p,a,e,i||r,c.Ml]);break;case"MultiPoint":o=e.getFlatCoordinates(),(a=this.appendFlatPointCoordinates(o,h))>p&&(this.instructions.push([n.ZP.CUSTOM,p,a,e,r,c.Ml]),this.hitDetectionInstructions.push([n.ZP.CUSTOM,p,a,e,i||r,c.Ml]));break;case"Point":o=e.getFlatCoordinates(),this.coordinates.push(o[0],o[1]),a=this.coordinates.length,this.instructions.push([n.ZP.CUSTOM,p,a,e,r]),this.hitDetectionInstructions.push([n.ZP.CUSTOM,p,a,e,i||r])}this.endGeometry(t)}},{key:"beginGeometry",value:function(e,t){this.beginGeometryInstruction1_=[n.ZP.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[n.ZP.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}},{key:"finish",value:function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}},{key:"reverseHitDetectionInstructions",value:function(){var e,t=this.hitDetectionInstructions;t.reverse();var r,i,o=t.length,a=-1;for(e=0;e<o;++e)(i=(r=t[e])[0])==n.ZP.END_GEOMETRY?a=e:i==n.ZP.BEGIN_GEOMETRY&&(r[2]=e,(0,u.FZ)(this.hitDetectionInstructions,a,e),a=-1)}},{key:"setFillStrokeStyle",value:function(e,t){var r=this.state;if(e){var n=e.getColor();r.fillStyle=(0,a.y)(n||l.bL)}else r.fillStyle=void 0;if(t){var i=t.getColor();r.strokeStyle=(0,a.y)(i||l.Tx);var o=t.getLineCap();r.lineCap=void 0!==o?o:l.mb;var s=t.getLineDash();r.lineDash=s?s.slice():l.X9;var u=t.getLineDashOffset();r.lineDashOffset=u||l.He;var c=t.getLineJoin();r.lineJoin=void 0!==c?c:l.rc;var f=t.getWidth();r.lineWidth=void 0!==f?f:l.yC;var h=t.getMiterLimit();r.miterLimit=void 0!==h?h:l.V4,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0}},{key:"createFill",value:function(e){var t=e.fillStyle,r=[n.ZP.SET_FILL_STYLE,t];return"string"!=typeof t&&r.push(!0),r}},{key:"applyStroke",value:function(e){this.instructions.push(this.createStroke(e))}},{key:"createStroke",value:function(e){return[n.ZP.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}},{key:"updateFillStyle",value:function(e,t){var r=e.fillStyle;"string"==typeof r&&e.currentFillStyle==r||(void 0!==r&&this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}},{key:"updateStrokeStyle",value:function(e,t){var r=e.strokeStyle,n=e.lineCap,i=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,s=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=n||i!=e.currentLineDash&&!(0,u.fS)(e.currentLineDash,i)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=s||e.currentMiterLimit!=l)&&(void 0!==r&&t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=n,e.currentLineDash=i,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=s,e.currentMiterLimit=l)}},{key:"endGeometry",value:function(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var t=[n.ZP.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}},{key:"getBufferedMaxExtent",value:function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,s.d9)(this.maxExtent),this.maxLineWidth>0)){var e=this.resolution*(this.maxLineWidth+1)/2;(0,s.f3)(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}])&&h(t.prototype,r),o&&h(t,o),Object.defineProperty(t,"prototype",{writable:!1}),y}(o.Z)},49574:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(85845),i=r(23609);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},s.apply(this,arguments)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,r,n,o=u(f);function f(e,t,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(i=o.call(this,e,t,r,n)).hitDetectionImage_=null,i.image_=null,i.imagePixelRatio_=void 0,i.anchorX_=void 0,i.anchorY_=void 0,i.height_=void 0,i.opacity_=void 0,i.originX_=void 0,i.originY_=void 0,i.rotateWithView_=void 0,i.rotation_=void 0,i.scale_=void 0,i.width_=void 0,i.declutterMode_=void 0,i.declutterImageWithText_=void 0,i}return t=f,(r=[{key:"drawPoint",value:function(e,t){if(this.image_){this.beginGeometry(e,t);var r=e.getFlatCoordinates(),n=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,n);this.instructions.push([i.ZP.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.ZP.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}}},{key:"drawMultiPoint",value:function(e,t){if(this.image_){this.beginGeometry(e,t);var r=e.getFlatCoordinates(),n=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(r,n);this.instructions.push([i.ZP.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([i.ZP.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}}},{key:"finish",value:function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,s(c(f.prototype),"finish",this).call(this)}},{key:"setImageStyle",value:function(e,t){var r=e.getAnchor(),n=e.getSize(),i=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=i[0],this.originY_=i[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z);var h=r(38283);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},y.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,r,n,o=m(a);function a(e,t,r,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e,t,r,n)}return t=a,(r=[{key:"drawFlatCoordinates_",value:function(e,t,r,n){var o=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,n,!1,!1),s=[i.ZP.MOVE_TO_LINE_TO,o,a];return this.instructions.push(s),this.hitDetectionInstructions.push(s),r}},{key:"drawLineString",value:function(e,t){var r=this.state,n=r.strokeStyle,o=r.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([i.ZP.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,h.X9,h.He],i.$O);var a=e.getFlatCoordinates(),s=e.getStride();this.drawFlatCoordinates_(a,0,a.length,s),this.hitDetectionInstructions.push(i.Yc),this.endGeometry(t)}}},{key:"drawMultiLineString",value:function(e,t){var r=this.state,n=r.strokeStyle,o=r.lineWidth;if(void 0!==n&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([i.ZP.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,h.X9,h.He],i.$O);for(var a=e.getEnds(),s=e.getFlatCoordinates(),l=e.getStride(),u=0,c=0,f=a.length;c<f;++c)u=this.drawFlatCoordinates_(s,u,a[c],l);this.hitDetectionInstructions.push(i.Yc),this.endGeometry(t)}}},{key:"finish",value:function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(i.Yc),this.reverseHitDetectionInstructions(),this.state=null,y(_(a.prototype),"finish",this).call(this)}},{key:"applyStroke",value:function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(i.Yc),e.lastStroke=this.coordinates.length),e.lastStroke=0,y(_(a.prototype),"applyStroke",this).call(this,e),this.instructions.push(i.$O)}}])&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Z);var A=r(30164);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===b(o)?o:String(o)),n)}var i,o}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},E.apply(this,arguments)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}const C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(a,e);var t,r,n,o=I(a);function a(e,t,r,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e,t,r,n)}return t=a,(r=[{key:"drawFlatCoordinatess_",value:function(e,t,r,n){var o=this.state,a=void 0!==o.fillStyle,s=void 0!==o.strokeStyle,l=r.length;this.instructions.push(i.$O),this.hitDetectionInstructions.push(i.$O);for(var u=0;u<l;++u){var c=r[u],f=this.coordinates.length,h=this.appendFlatLineCoordinates(e,t,c,n,!0,!s),p=[i.ZP.MOVE_TO_LINE_TO,f,h];this.instructions.push(p),this.hitDetectionInstructions.push(p),s&&(this.instructions.push(i.s3),this.hitDetectionInstructions.push(i.s3)),t=c}return a&&(this.instructions.push(i.gO),this.hitDetectionInstructions.push(i.gO)),s&&(this.instructions.push(i.Yc),this.hitDetectionInstructions.push(i.Yc)),t}},{key:"drawCircle",value:function(e,t){var r=this.state,n=r.fillStyle,o=r.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([i.ZP.SET_FILL_STYLE,h.bL]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([i.ZP.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,h.X9,h.He]);var a=e.getFlatCoordinates(),s=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,s,!1,!1);var u=[i.ZP.CIRCLE,l];this.instructions.push(i.$O,u),this.hitDetectionInstructions.push(i.$O,u),void 0!==r.fillStyle&&(this.instructions.push(i.gO),this.hitDetectionInstructions.push(i.gO)),void 0!==r.strokeStyle&&(this.instructions.push(i.Yc),this.hitDetectionInstructions.push(i.Yc)),this.endGeometry(t)}}},{key:"drawPolygon",value:function(e,t){var r=this.state,n=r.fillStyle,o=r.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([i.ZP.SET_FILL_STYLE,h.bL]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([i.ZP.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,h.X9,h.He]);var a=e.getEnds(),s=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(s,0,a,l),this.endGeometry(t)}}},{key:"drawMultiPolygon",value:function(e,t){var r=this.state,n=r.fillStyle,o=r.strokeStyle;if(void 0!==n||void 0!==o){this.setFillStrokeStyles_(),this.beginGeometry(e,t),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([i.ZP.SET_FILL_STYLE,h.bL]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([i.ZP.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,h.X9,h.He]);for(var a=e.getEndss(),s=e.getOrientedFlatCoordinates(),l=e.getStride(),u=0,c=0,f=a.length;c<f;++c)u=this.drawFlatCoordinatess_(s,u,a[c],l);this.endGeometry(t)}}},{key:"finish",value:function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var t=this.coordinates,r=0,n=t.length;r<n;++r)t[r]=(0,A.uZ)(t[r],e);return E(S(a.prototype),"finish",this).call(this)}},{key:"setFillStrokeStyles_",value:function(){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)}}])&&w(t.prototype,r),n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Z);var P=r(53499);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===O(o)?o:String(o)),n)}var i,o}var M={Circle:C,Default:n.Z,Image:f,LineString:v,Polygon:C,Text:P.Z};const k=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tolerance_=t,this.maxExtent_=r,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}var t,r,n;return t=e,(r=[{key:"finish",value:function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var r=this.buildersByZIndex_[t];for(var n in r){var i=r[n].finish();e[t][n]=i}}return e}},{key:"getBuilder",value:function(e,t){var r=void 0!==e?e.toString():"0",n=this.buildersByZIndex_[r];void 0===n&&(n={},this.buildersByZIndex_[r]=n);var i=n[t];return void 0===i&&(i=new(0,M[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=i),i}}])&&T(t.prototype,r),n&&T(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},26788:(e,t,r)=>{"use strict";r.d(t,{Z:()=>B});var n=r(23609),i=r(53499),o=r(16453),a=r(36181),s=r(38283),l=r(7697),u=r(32355);function c(e,t,r,n,i,o,a,s,c,f,h,p){var d=e[t],y=e[t+1],g=0,m=0,_=0,v=0;function A(){g=d,m=y,d=e[t+=n],y=e[t+1],v+=_,_=Math.sqrt((d-g)*(d-g)+(y-m)*(y-m))}do{A()}while(t<r-n&&v+_<o);for(var b=0===_?0:(o-v)/_,w=(0,l.t7)(g,d,b),E=(0,l.t7)(m,y,b),x=t-n,I=v,S=o+s*c(f,i,h);t<r-n&&v+_<S;)A();b=0===_?0:(S-v)/_;var C,P=(0,l.t7)(g,d,b),O=(0,l.t7)(m,y,b);if(p){var T=[w,E,P,O];(0,u.U1)(T,0,4,2,p,T,T),C=T[0]>T[2]}else C=w>P;var M,k=Math.PI,R=[],B=x+n===t;if(_=0,v=I,d=e[t=x],y=e[t+1],B){A(),M=Math.atan2(y-m,d-g),C&&(M+=M>0?-k:k);var L=(P+w)/2,D=(O+E)/2;return R[0]=[L,D,(S-o)/2,M,i],R}for(var j=0,F=(i=i.replace(/\n/g," ")).length;j<F;){A();var N=Math.atan2(y-m,d-g);if(C&&(N+=N>0?-k:k),void 0!==M){var Z=N-M;if(Z+=Z>k?-2*k:Z<-k?2*k:0,Math.abs(Z)>a)return null}M=N;for(var U=j,Q=0;j<F;++j){var G=s*c(f,i[C?F-j-1:j],h);if(t+n<r&&v+_<o+Q+G/2)break;Q+=G}if(j!==U){var z=C?i.substring(F-U,F-j):i.substring(U,j);b=0===_?0:(o+Q/2-v)/_;var q=(0,l.t7)(g,d,b),V=(0,l.t7)(m,y,b);R.push([q,V,Q/2,N,z]),o+=Q}}return R}var f=r(11133),h=r(38768);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}var y=(0,a.lJ)(),g=[],m=[],_=[],v=[];function A(e){return e[3].declutterBox}var b=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function w(e,t){return"start"===t?t=b.test(e)?"right":"left":"end"===t&&(t=b.test(e)?"left":"right"),i.I[t]}function E(e,t,r){return r>0&&e.push("\n",""),e.push(t,""),e}const x=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.overlaps=n,this.pixelRatio=r,this.resolution=t,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,o.Ue)(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}var t,r,l;return t=e,(r=[{key:"createLabel",value:function(e,t,r,n){var o=e+t+r+n;if(this.labels_[o])return this.labels_[o];var a=n?this.strokeStates[n]:null,l=r?this.fillStates[r]:null,u=this.textStates[t],c=this.pixelRatio,f=[u.scale[0]*c,u.scale[1]*c],h=Array.isArray(e),p=u.justify?i.I[u.justify]:w(Array.isArray(e)?e[0]:e,u.textAlign||s.PH),d=n&&a.lineWidth?a.lineWidth:0,y=h?e:e.split("\n").reduce(E,[]),g=(0,s.Zw)(u,y),m=g.width,_=g.height,v=g.widths,A=g.heights,b=g.lineWidths,x=m+d,I=[],S=(x+2)*f[0],C=(_+d)*f[1],P={width:S<0?Math.floor(S):Math.ceil(S),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:I};1==f[0]&&1==f[1]||I.push("scale",f),n&&(I.push("strokeStyle",a.strokeStyle),I.push("lineWidth",d),I.push("lineCap",a.lineCap),I.push("lineJoin",a.lineJoin),I.push("miterLimit",a.miterLimit),I.push("setLineDash",[a.lineDash]),I.push("lineDashOffset",a.lineDashOffset)),r&&I.push("fillStyle",l.fillStyle),I.push("textBaseline","middle"),I.push("textAlign","center");for(var O,T=.5-p,M=p*x+T*d,k=[],R=[],B=0,L=0,D=0,j=0,F=0,N=y.length;F<N;F+=2){var Z=y[F];if("\n"!==Z){var U=y[F+1]||u.font;U!==O&&(n&&k.push("font",U),r&&R.push("font",U),O=U),B=Math.max(B,A[D]);var Q=[Z,M+T*v[D]+p*(v[D]-b[j]),.5*(d+B)+L];M+=v[D],n&&k.push("strokeText",Q),r&&R.push("fillText",Q),++D}else L+=B,B=0,M=p*x+T*d,++j}return Array.prototype.push.apply(I,k),Array.prototype.push.apply(I,R),this.labels_[o]=P,P}},{key:"replayTextBackground_",value:function(e,t,r,n,i,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}},{key:"calculateImageOrLabelDimensions_",value:function(e,t,r,n,i,s,l,u,c,f,h,p,d,A,b,w){var E,x=r-(l*=p[0]),I=n-(u*=p[1]),S=i+c>e?e-c:i,C=s+f>t?t-f:s,P=A[3]+S*p[0]+A[1],O=A[0]+C*p[1]+A[2],T=x-A[3],M=I-A[0];return(b||0!==h)&&(g[0]=T,v[0]=T,g[1]=M,m[1]=M,m[0]=T+P,_[0]=m[0],_[1]=M+O,v[1]=_[1]),0!==h?(E=(0,o.qC)((0,o.Ue)(),r,n,1,1,h,-r,-n),(0,o.nn)(E,g),(0,o.nn)(E,m),(0,o.nn)(E,_),(0,o.nn)(E,v),(0,a.T9)(Math.min(g[0],m[0],_[0],v[0]),Math.min(g[1],m[1],_[1],v[1]),Math.max(g[0],m[0],_[0],v[0]),Math.max(g[1],m[1],_[1],v[1]),y)):(0,a.T9)(Math.min(T,T+P),Math.min(M,M+O),Math.max(T,T+P),Math.max(M,M+O),y),d&&(x=Math.round(x),I=Math.round(I)),{drawImageX:x,drawImageY:I,drawImageW:S,drawImageH:C,originX:c,originY:f,declutterBox:{minX:y[0],minY:y[1],maxX:y[2],maxY:y[3],value:w},canvasTransform:E,scale:p}}},{key:"replayImageOrLabel_",value:function(e,t,r,n,i,o,a){var l=!(!o&&!a),u=n.declutterBox,c=e.canvas,f=a?a[2]*n.scale[0]/2:0;return u.minX-f<=c.width/t&&u.maxX+f>=0&&u.minY-f<=c.height/t&&u.maxY+f>=0&&(l&&this.replayTextBackground_(e,g,m,_,v,o,a),(0,s._f)(e,n.canvasTransform,i,r,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}},{key:"fill_",value:function(e){if(this.alignFill_){var t=(0,o.nn)(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(t[0]%r,t[1]%r),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}},{key:"setStrokeStyle_",value:function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}},{key:"drawLabelWithPointPlacement_",value:function(e,t,r,n){var o=this.textStates[t],a=this.createLabel(e,t,n,r),l=this.strokeStates[r],u=this.pixelRatio,c=w(Array.isArray(e)?e[0]:e,o.textAlign||s.PH),f=i.I[o.textBaseline||s.ru],h=l&&l.lineWidth?l.lineWidth:0;return{label:a,anchorX:c*(a.width/u-2*o.scale[0])+2*(.5-c)*h,anchorY:f*a.height/u+2*(.5-f)*h}}},{key:"execute_",value:function(e,t,r,i,l,p,d,y){var g;this.pixelCoordinates_&&(0,f.fS)(r,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=(0,u.vT)(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),(0,o.lk)(this.renderedTransform_,r));for(var m,_,v,b,E,x,I,S,C,P,O,T,M,k,R,B,L=0,D=i.length,j=0,F=0,N=0,Z=null,U=null,Q=this.coordinateCache_,G=this.viewRotation_,z=Math.round(1e12*Math.atan2(-r[1],r[0]))/1e12,q={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:G},V=this.instructions!=i||this.overlaps?0:200;L<D;){var W=i[L];switch(W[0]){case n.ZP.BEGIN_GEOMETRY:M=W[1],B=W[3],M.getGeometry()?void 0===d||(0,a.kK)(d,B.getExtent())?++L:L=W[2]+1:L=W[2];break;case n.ZP.BEGIN_PATH:F>V&&(this.fill_(e),F=0),N>V&&(e.stroke(),N=0),F||N||(e.beginPath(),b=NaN,E=NaN),++L;break;case n.ZP.CIRCLE:var K=g[j=W[1]],H=g[j+1],Y=g[j+2]-K,X=g[j+3]-H,J=Math.sqrt(Y*Y+X*X);e.moveTo(K+J,H),e.arc(K,H,J,0,2*Math.PI,!0),++L;break;case n.ZP.CLOSE_PATH:e.closePath(),++L;break;case n.ZP.CUSTOM:j=W[1],m=W[2];var $=W[3],ee=W[4],te=6==W.length?W[5]:void 0;q.geometry=$,q.feature=M,L in Q||(Q[L]=[]);var re=Q[L];te?te(g,j,m,2,re):(re[0]=g[j],re[1]=g[j+1],re.length=2),ee(re,q),++L;break;case n.ZP.DRAW_IMAGE:j=W[1],m=W[2],S=W[3],_=W[4],v=W[5];var ne=W[6],ie=W[7],oe=W[8],ae=W[9],se=W[10],le=W[11],ue=W[12],ce=W[13],fe=W[14],he=W[15];if(!S&&W.length>=20){C=W[19],P=W[20],O=W[21],T=W[22];var pe=this.drawLabelWithPointPlacement_(C,P,O,T);S=pe.label,W[3]=S;var de=W[23];_=(pe.anchorX-de)*this.pixelRatio,W[4]=_;var ye=W[24];v=(pe.anchorY-ye)*this.pixelRatio,W[5]=v,ne=S.height,W[6]=ne,ce=S.width,W[13]=ce}var ge=void 0;W.length>25&&(ge=W[25]);var me=void 0,_e=void 0,ve=void 0;W.length>17?(me=W[16],_e=W[17],ve=W[18]):(me=s.oB,_e=!1,ve=!1),se&&z?le+=G:se||z||(le-=G);for(var Ae=0;j<m;j+=2)if(!(ge&&ge[Ae++]<ce/this.pixelRatio)){var be=this.calculateImageOrLabelDimensions_(S.width,S.height,g[j],g[j+1],ce,ne,_,v,oe,ae,le,ue,l,me,_e||ve,M),we=[e,t,S,be,ie,_e?Z:null,ve?U:null];if(y){if("none"===fe)continue;if("obstacle"===fe){y.insert(be.declutterBox);continue}var Ee=void 0,xe=void 0;if(he){var Ie=m-j;if(!he[Ie]){he[Ie]=we;continue}if(Ee=he[Ie],delete he[Ie],xe=A(Ee),y.collides(xe))continue}if(y.collides(be.declutterBox))continue;Ee&&(y.insert(xe),this.replayImageOrLabel_.apply(this,Ee)),y.insert(be.declutterBox)}this.replayImageOrLabel_.apply(this,we)}++L;break;case n.ZP.DRAW_CHARS:var Se=W[1],Ce=W[2],Pe=W[3],Oe=W[4];T=W[5];var Te=W[6],Me=W[7],ke=W[8];O=W[9];var Re=W[10];C=W[11],P=W[12];var Be=[W[13],W[13]],Le=this.textStates[P],De=Le.font,je=[Le.scale[0]*Me,Le.scale[1]*Me],Fe=void 0;De in this.widths_?Fe=this.widths_[De]:(Fe={},this.widths_[De]=Fe);var Ne=(0,h.W)(g,Se,Ce,2),Ze=Math.abs(je[0])*(0,s.Kd)(De,C,Fe);if(Oe||Ze<=Ne){var Ue=c(g,Se,Ce,2,C,(Ne-Ze)*w(C,this.textStates[P].textAlign),Te,Math.abs(je[0]),s.Kd,De,Fe,z?0:this.viewRotation_);e:if(Ue){var Qe=[],Ge=void 0,ze=void 0,qe=void 0,Ve=void 0,We=void 0;if(O)for(Ge=0,ze=Ue.length;Ge<ze;++Ge){qe=(We=Ue[Ge])[4],Ve=this.createLabel(qe,P,"",O),_=We[2]+(je[0]<0?-Re:Re),v=Pe*Ve.height+2*(.5-Pe)*Re*je[1]/je[0]-ke;var Ke=this.calculateImageOrLabelDimensions_(Ve.width,Ve.height,We[0],We[1],Ve.width,Ve.height,_,v,0,0,We[3],Be,!1,s.oB,!1,M);if(y&&y.collides(Ke.declutterBox))break e;Qe.push([e,t,Ve,Ke,1,null,null])}if(T)for(Ge=0,ze=Ue.length;Ge<ze;++Ge){qe=(We=Ue[Ge])[4],Ve=this.createLabel(qe,P,T,""),_=We[2],v=Pe*Ve.height-ke;var He=this.calculateImageOrLabelDimensions_(Ve.width,Ve.height,We[0],We[1],Ve.width,Ve.height,_,v,0,0,We[3],Be,!1,s.oB,!1,M);if(y&&y.collides(He.declutterBox))break e;Qe.push([e,t,Ve,He,1,null,null])}y&&y.load(Qe.map(A));for(var Ye=0,Xe=Qe.length;Ye<Xe;++Ye)this.replayImageOrLabel_.apply(this,Qe[Ye])}}++L;break;case n.ZP.END_GEOMETRY:if(void 0!==p){var Je=p(M=W[1],B);if(Je)return Je}++L;break;case n.ZP.FILL:V?F++:this.fill_(e),++L;break;case n.ZP.MOVE_TO_LINE_TO:for(j=W[1],m=W[2],k=g[j],I=(R=g[j+1])+.5|0,(x=k+.5|0)===b&&I===E||(e.moveTo(k,R),b=x,E=I),j+=2;j<m;j+=2)x=(k=g[j])+.5|0,I=(R=g[j+1])+.5|0,j!=m-2&&x===b&&I===E||(e.lineTo(k,R),b=x,E=I);++L;break;case n.ZP.SET_FILL_STYLE:Z=W,this.alignFill_=W[2],F&&(this.fill_(e),F=0,N&&(e.stroke(),N=0)),e.fillStyle=W[1],++L;break;case n.ZP.SET_STROKE_STYLE:U=W,N&&(e.stroke(),N=0),this.setStrokeStyle_(e,W),++L;break;case n.ZP.STROKE:V?N++:e.stroke(),++L;break;default:++L}}F&&this.fill_(e),N&&e.stroke()}},{key:"execute",value:function(e,t,r,n,i,o){this.viewRotation_=n,this.execute_(e,t,r,this.instructions,i,void 0,void 0,o)}},{key:"executeHitDetection",value:function(e,t,r,n,i){return this.viewRotation_=r,this.execute_(e,1,t,this.hitDetectionInstructions,!0,n,i)}}])&&d(t.prototype,r),l&&d(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}();var I=r(88199),S=r(83482);function C(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===O(o)?o:String(o)),n)}var i,o}var M=["Polygon","Circle","LineString","Image","Text","Default"],k=function(){function e(t,r,n,i,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=r,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,o.Ue)(),this.createExecutors_(a)}var t,r,n;return t=e,(r=[{key:"clip",value:function(e,t){var r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}},{key:"createExecutors_",value:function(e){for(var t in e){var r=this.executorsByZIndex_[t];void 0===r&&(r={},this.executorsByZIndex_[t]=r);var n=e[t];for(var i in n){var o=n[i];r[i]=new x(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}},{key:"hasExecutors",value:function(e){for(var t in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[t],n=0,i=e.length;n<i;++n)if(e[n]in r)return!0;return!1}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i,s){var l=2*(n=Math.round(n))+1,u=(0,o.qC)(this.hitDetectionTransform_,n+.5,n+.5,1/t,-1/t,-r,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=(0,I.E4)(l,l,void 0,{willReadFrequently:!0}));var h,p=this.hitDetectionContext_;p.canvas.width!==l||p.canvas.height!==l?(p.canvas.width=l,p.canvas.height=l):c||p.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(h=(0,a.lJ)(),(0,a.Wj)(h,e),(0,a.f3)(h,t*(this.renderBuffer_+n),h));var d,y=function(e){if(void 0!==R[e])return R[e];for(var t=2*e+1,r=e*e,n=new Array(r+1),i=0;i<=e;++i)for(var o=0;o<=e;++o){var a=i*i+o*o;if(a>r)break;var s=n[a];s||(s=[],n[a]=s),s.push(4*((e+i)*t+(e+o))+3),i>0&&s.push(4*((e-i)*t+(e+o))+3),o>0&&(s.push(4*((e+i)*t+(e-o))+3),i>0&&s.push(4*((e-i)*t+(e-o))+3))}for(var l=[],u=0,c=n.length;u<c;++u)n[u]&&l.push.apply(l,C(n[u]));return R[e]=l,l}(n);function g(e,t){for(var r=p.getImageData(0,0,l,l).data,o=0,a=y.length;o<a;o++)if(r[y[o]]>0){if(!s||"Image"!==d&&"Text"!==d||s.includes(e)){var u=(y[o]-3)/4,c=n-u%l,f=n-(u/l|0),h=i(e,t,c*c+f*f);if(h)return h}p.clearRect(0,0,l,l);break}}var m,_,v,A,b,w=Object.keys(this.executorsByZIndex_).map(Number);for(w.sort(f.j2),m=w.length-1;m>=0;--m){var E=w[m].toString();for(v=this.executorsByZIndex_[E],_=M.length-1;_>=0;--_)if(void 0!==(A=v[d=M[_]])&&(b=A.executeHitDetection(p,u,r,g,h)))return b}}},{key:"getClipCoords",value:function(e){var t=this.maxExtent_;if(!t)return null;var r=t[0],n=t[1],i=t[2],o=t[3],a=[r,n,r,o,i,o,i,n];return(0,u.vT)(a,0,8,2,e,a),a}},{key:"isEmpty",value:function(){return(0,S.x)(this.executorsByZIndex_)}},{key:"execute",value:function(e,t,r,n,i,o,a){var s,l,u,c,h,p,d=Object.keys(this.executorsByZIndex_).map(Number);for(d.sort(f.j2),this.maxExtent_&&(e.save(),this.clip(e,r)),o=o||M,a&&d.reverse(),s=0,l=d.length;s<l;++s){var y=d[s].toString();for(h=this.executorsByZIndex_[y],u=0,c=o.length;u<c;++u)void 0!==(p=h[o[u]])&&p.execute(e,t,r,n,i,a)}this.maxExtent_&&e.restore()}}])&&T(t.prototype,r),n&&T(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),R={};const B=k},63005:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(22345),i=r(57446),o=r(16453),a=r(38283),s=r(11133),l=r(36181),u=r(7697),c=r(32355),f=r(14206);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===h(o)?o:String(o)),n)}var i,o}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}const m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(g,e);var t,r,n,h=y(g);function g(e,t,r,n,i,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(l=h.call(this)).context_=e,l.pixelRatio_=t,l.extent_=r,l.transform_=n,l.transformRotation_=n?(0,u.FH)(Math.atan2(n[1],n[0]),10):0,l.viewRotation_=i,l.squaredTolerance_=a,l.userTransform_=s,l.contextFillState_=null,l.contextStrokeState_=null,l.contextTextState_=null,l.fillState_=null,l.strokeState_=null,l.image_=null,l.imageAnchorX_=0,l.imageAnchorY_=0,l.imageHeight_=0,l.imageOpacity_=0,l.imageOriginX_=0,l.imageOriginY_=0,l.imageRotateWithView_=!1,l.imageRotation_=0,l.imageScale_=[0,0],l.imageWidth_=0,l.text_="",l.textOffsetX_=0,l.textOffsetY_=0,l.textRotateWithView_=!1,l.textRotation_=0,l.textScale_=[0,0],l.textFillState_=null,l.textStrokeState_=null,l.textState_=null,l.pixelCoordinates_=[],l.tmpLocalTransform_=(0,o.Ue)(),l}return t=g,(r=[{key:"drawImages_",value:function(e,t,r,n){if(this.image_){var i=(0,c.vT)(e,t,r,n,this.transform_,this.pixelCoordinates_),a=this.context_,s=this.tmpLocalTransform_,l=a.globalAlpha;1!=this.imageOpacity_&&(a.globalAlpha=l*this.imageOpacity_);var u=this.imageRotation_;0===this.transformRotation_&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(var f=0,h=i.length;f<h;f+=2){var p=i[f]-this.imageAnchorX_,d=i[f+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var y=p+this.imageAnchorX_,g=d+this.imageAnchorY_;(0,o.qC)(s,y,g,1,1,u,-y,-g),a.save(),a.transform.apply(a,s),a.translate(y,g),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,d,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(a.globalAlpha=l)}}},{key:"drawText_",value:function(e,t,r,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=(0,c.vT)(e,t,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(0===this.transformRotation_&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<r;t+=n){var s=i[t]+this.textOffsetX_,l=i[t+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.save(),o.translate(s-this.textOffsetX_,l-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,s,l),this.textFillState_&&o.fillText(this.text_,s,l))}}}},{key:"moveToLineTo_",value:function(e,t,r,n,i){var o=this.context_,a=(0,c.vT)(e,t,r,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var l=2;l<s;l+=2)o.lineTo(a[l],a[l+1]);return i&&o.closePath(),r}},{key:"drawRings_",value:function(e,t,r,n){for(var i=0,o=r.length;i<o;++i)t=this.moveToLineTo_(e,t,r[i],n,!0);return t}},{key:"drawCircle",value:function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=(0,f.Kr)(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],n=t[3]-t[1],i=Math.sqrt(r*r+n*n),o=this.context_;o.beginPath(),o.arc(t[0],t[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}}},{key:"setStyle",value:function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}},{key:"setTransform",value:function(e){this.transform_=e}},{key:"drawGeometry",value:function(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e)}}},{key:"drawFeature",value:function(e,t){var r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}},{key:"drawGeometryCollection",value:function(e){for(var t=e.getGeometriesArray(),r=0,n=t.length;r<n;++r)this.drawGeometry(t[r])}},{key:"drawPoint",value:function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),""!==this.text_&&this.drawText_(t,0,t.length,r)}},{key:"drawMultiPoint",value:function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),""!==this.text_&&this.drawText_(t,0,t.length,r)}},{key:"drawLineString",value:function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){var n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}},{key:"drawMultiLineString",value:function(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var t=e.getExtent();if((0,l.kK)(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,n=e.getFlatCoordinates(),i=0,o=e.getEnds(),a=e.getStride();r.beginPath();for(var s=0,u=o.length;s<u;++s)i=this.moveToLineTo_(n,i,o[s],a,!1);r.stroke()}if(""!==this.text_){var c=e.getFlatMidpoints();this.drawText_(c,0,c.length,2)}}}},{key:"drawPolygon",value:function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){var r=e.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}}},{key:"drawMultiPolygon",value:function(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=this.context_,r=e.getOrientedFlatCoordinates(),n=0,i=e.getEndss(),o=e.getStride();t.beginPath();for(var a=0,s=i.length;a<s;++a){var u=i[a];n=this.drawRings_(r,n,u,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){var c=e.getFlatInteriorPoints();this.drawText_(c,0,c.length,2)}}}},{key:"setContextFillState_",value:function(e){var t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}},{key:"setContextStrokeState_",value:function(e){var t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),(0,s.fS)(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}},{key:"setContextTextState_",value:function(e){var t=this.context_,r=this.contextTextState_,n=e.textAlign?e.textAlign:a.PH;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=n&&(r.textAlign=n,t.textAlign=n),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}},{key:"setFillStrokeStyle",value:function(e,t){var r=this;if(e){var n=e.getColor();this.fillState_={fillStyle:(0,i.y)(n||a.bL)}}else this.fillState_=null;if(t){var o=t.getColor(),s=t.getLineCap(),l=t.getLineDash(),u=t.getLineDashOffset(),c=t.getLineJoin(),f=t.getWidth(),h=t.getMiterLimit(),p=l||a.X9;this.strokeState_={lineCap:void 0!==s?s:a.mb,lineDash:1===this.pixelRatio_?p:p.map((function(e){return e*r.pixelRatio_})),lineDashOffset:(u||a.He)*this.pixelRatio_,lineJoin:void 0!==c?c:a.rc,lineWidth:(void 0!==f?f:a.yC)*this.pixelRatio_,miterLimit:void 0!==h?h:a.V4,strokeStyle:(0,i.y)(o||a.Tx)}}else this.strokeState_=null}},{key:"setImageStyle",value:function(e){var t;if(e&&(t=e.getSize())){var r=e.getPixelRatio(this.pixelRatio_),n=e.getAnchor(),i=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*r,this.imageAnchorY_=n[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();var o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}else this.image_=null}},{key:"setTextStyle",value:function(e){if(e){var t=e.getFill();if(t){var r=t.getColor();this.textFillState_={fillStyle:(0,i.y)(r||a.bL)}}else this.textFillState_=null;var n=e.getStroke();if(n){var o=n.getColor(),s=n.getLineCap(),l=n.getLineDash(),u=n.getLineDashOffset(),c=n.getLineJoin(),f=n.getWidth(),h=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==s?s:a.mb,lineDash:l||a.X9,lineDashOffset:u||a.He,lineJoin:void 0!==c?c:a.rc,lineWidth:void 0!==f?f:a.yC,miterLimit:void 0!==h?h:a.V4,strokeStyle:(0,i.y)(o||a.Tx)}}else this.textStrokeState_=null;var p=e.getFont(),d=e.getOffsetX(),y=e.getOffsetY(),g=e.getRotateWithView(),m=e.getRotation(),_=e.getScaleArray(),v=e.getText(),A=e.getTextAlign(),b=e.getTextBaseline();this.textState_={font:void 0!==p?p:a.Df,textAlign:void 0!==A?A:a.PH,textBaseline:void 0!==b?b:a.ru},this.text_=void 0!==v?Array.isArray(v)?v.reduce((function(e,t,r){return e+(r%2?" ":t)}),""):v:"",this.textOffsetX_=void 0!==d?this.pixelRatio_*d:0,this.textOffsetY_=void 0!==y?this.pixelRatio_*y:0,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0!==m?m:0,this.textScale_=[this.pixelRatio_*_[0],this.pixelRatio_*_[1]]}else this.text_=""}}])&&p(t.prototype,r),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),g}(n.Z)},23609:(e,t,r)=>{"use strict";r.d(t,{$O:()=>a,Yc:()=>o,ZP:()=>l,gO:()=>i,s3:()=>s});var n={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},i=[n.FILL],o=[n.STROKE],a=[n.BEGIN_PATH],s=[n.CLOSE_PATH];const l=n},53499:(e,t,r)=>{"use strict";r.d(t,{I:()=>A,Z:()=>b});var n=r(85845),i=r(23609),o=r(57446),a=r(38283),s=r(20594),l=r(36181),u=r(7697);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t,r,n,i){for(var o=[],a=r,s=0,l=t.slice(r,2);s<e&&a+i<n;){var f=c(l.slice(-2),2),h=f[0],p=f[1],d=t[a+i],y=t[a+i+1],g=Math.sqrt((d-h)*(d-h)+(y-p)*(y-p));if((s+=g)>=e){var m=(e-s+g)/g,_=(0,u.t7)(h,d,m),v=(0,u.t7)(p,y,m);l.push(_,v),o.push(l),l=[_,v],s==e&&(a+=i),s=0}else if(s<e)l.push(t[a+i],t[a+i+1]),a+=i;else{var A=g-s,b=(0,u.t7)(h,d,A/g),w=(0,u.t7)(p,y,A/g);l.push(b,w),o.push(l),l=[b,w],s=0,a+=i}}return s>0&&o.push(l),o}function p(e,t,r,n,i){var o,a,s,l,u,c,f,h,p,d=r,y=r,g=0,m=0,_=r;for(o=r;o<n;o+=i){var v=t[o],A=t[o+1];void 0!==l&&(h=v-l,p=A-u,s=Math.sqrt(h*h+p*p),void 0!==c&&(m+=a,Math.acos((c*h+f*p)/(a*s))>e&&(m>g&&(g=m,d=_,y=o),m=0,_=o-i)),a=s,c=h,f=p),l=v,u=A}return(m+=s)>g?[_,o]:[d,y]}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===d(o)?o:String(o)),n)}var i,o}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},g.apply(this,arguments)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var A={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};const b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(c,e);var t,r,n,u=_(c);function c(e,t,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(i=u.call(this,e,t,r,n)).labels_=null,i.text_="",i.textOffsetX_=0,i.textOffsetY_=0,i.textRotateWithView_=void 0,i.textRotation_=0,i.textFillState_=null,i.fillStates={},i.fillStates[a.bL]={fillStyle:a.bL},i.textStrokeState_=null,i.strokeStates={},i.textState_={},i.textStates={},i.textKey_="",i.fillKey_="",i.strokeKey_="",i.declutterImageWithText_=void 0,i}return t=c,(r=[{key:"finish",value:function(){var e=g(v(c.prototype),"finish",this).call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}},{key:"drawText",value:function(e,t){var r=this.textFillState_,n=this.textStrokeState_,o=this.textState_;if(""!==this.text_&&o&&(r||n)){var s=this.coordinates,u=s.length,c=e.getType(),f=null,d=e.getStride();if("line"!==o.placement||"LineString"!=c&&"MultiLineString"!=c&&"Polygon"!=c&&"MultiPolygon"!=c){var y=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":f=e.getFlatCoordinates();break;case"LineString":f=e.getFlatMidpoint();break;case"Circle":f=e.getCenter();break;case"MultiLineString":f=e.getFlatMidpoints(),d=2;break;case"Polygon":f=e.getFlatInteriorPoint(),o.overflow||y.push(f[2]/this.resolution),d=3;break;case"MultiPolygon":var g=e.getFlatInteriorPoints();f=[];for(var m=0,_=g.length;m<_;m+=3)o.overflow||y.push(g[m+2]/this.resolution),f.push(g[m],g[m+1]);if(0===f.length)return;d=2}var v=this.appendFlatPointCoordinates(f,d);if(v===u)return;if(y&&(v-u)/2!=f.length/d){var A=u/2;y=y.filter((function(e,t){var r=s[2*(A+t)]===f[t*d]&&s[2*(A+t)+1]===f[t*d+1];return r||--A,r}))}this.saveTextStates_(),(o.backgroundFill||o.backgroundStroke)&&(this.setFillStrokeStyle(o.backgroundFill,o.backgroundStroke),o.backgroundFill&&this.updateFillStyle(this.state,this.createFill),o.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);var b=o.padding;if(b!=a.oB&&(o.scale[0]<0||o.scale[1]<0)){var w=o.padding[0],E=o.padding[1],x=o.padding[2],I=o.padding[3];o.scale[0]<0&&(E=-E,I=-I),o.scale[1]<0&&(w=-w,x=-x),b=[w,E,x,I]}var S=this.pixelRatio;this.instructions.push([i.ZP.DRAW_IMAGE,u,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,b==a.oB?a.oB:b.map((function(e){return e*S})),!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);var C=1/S,P=this.state.fillStyle;o.backgroundFill&&(this.state.fillStyle=a.bL,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([i.ZP.DRAW_IMAGE,u,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[C,C],NaN,void 0,this.declutterImageWithText_,b,!!o.backgroundFill,!!o.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?a.bL:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),o.backgroundFill&&(this.state.fillStyle=P,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}else{if(!(0,l.kK)(this.getBufferedMaxExtent(),e.getExtent()))return;var O;if(f=e.getFlatCoordinates(),"LineString"==c)O=[f.length];else if("MultiLineString"==c)O=e.getEnds();else if("Polygon"==c)O=e.getEnds().slice(0,1);else if("MultiPolygon"==c){var T=e.getEndss();O=[];for(var M=0,k=T.length;M<k;++M)O.push(T[M][0])}this.beginGeometry(e,t);for(var R=o.repeat,B=R?void 0:o.textAlign,L=0,D=0,j=O.length;D<j;++D)for(var F=void 0,N=0,Z=(F=R?h(R*this.resolution,f,L,O[D],d):[f.slice(L,O[D])]).length;N<Z;++N){var U=F[N],Q=0,G=U.length;if(null==B){var z=p(o.maxAngle,U,0,U.length,2);Q=z[0],G=z[1]}for(var q=Q;q<G;q+=d)s.push(U[q],U[q+1]);var V=s.length;L=O[D],this.drawChars_(u,V),u=V}this.endGeometry(t)}}}},{key:"saveTextStates_",value:function(){var e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,n=this.strokeKey_;e&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:t.font,textAlign:t.textAlign||a.PH,justify:t.justify,textBaseline:t.textBaseline||a.ru,scale:t.scale});var o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}},{key:"drawChars_",value:function(e,t){var r=this.textStrokeState_,n=this.textState_,o=this.strokeKey_,s=this.textKey_,l=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,c=A[n.textBaseline],f=this.textOffsetY_*u,h=this.text_,p=r?r.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([i.ZP.DRAW_CHARS,e,t,c,n.overflow,l,n.maxAngle,u,f,o,p*u,h,s,1]),this.hitDetectionInstructions.push([i.ZP.DRAW_CHARS,e,t,c,n.overflow,l?a.bL:l,n.maxAngle,u,f,o,p*u,h,s,1/u])}},{key:"setTextStyle",value:function(e,t){var r,n,i;if(e){var l=e.getFill();l?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=(0,o.y)(l.getColor()||a.bL)):(n=null,this.textFillState_=n);var u=e.getStroke();if(u){(i=this.textStrokeState_)||(i={},this.textStrokeState_=i);var c=u.getLineDash(),f=u.getLineDashOffset(),h=u.getWidth(),p=u.getMiterLimit();i.lineCap=u.getLineCap()||a.mb,i.lineDash=c?c.slice():a.X9,i.lineDashOffset=void 0===f?a.He:f,i.lineJoin=u.getLineJoin()||a.rc,i.lineWidth=void 0===h?a.yC:h,i.miterLimit=void 0===p?a.V4:p,i.strokeStyle=(0,o.y)(u.getColor()||a.Tx)}else i=null,this.textStrokeState_=i;r=this.textState_;var d=e.getFont()||a.Df;(0,a.Qx)(d);var y=e.getScaleArray();r.overflow=e.getOverflow(),r.font=d,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||a.ru,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||a.oB,r.scale=void 0===y?[1,1]:y;var g=e.getOffsetX(),m=e.getOffsetY(),_=e.getRotateWithView(),v=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=void 0===g?0:g,this.textOffsetY_=void 0===m?0:m,this.textRotateWithView_=void 0!==_&&_,this.textRotation_=void 0===v?0:v,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:(0,s.sq)(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+(0,s.sq)(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=t}}])&&y(t.prototype,r),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Z)},49376:(e,t,r)=>{"use strict";r.d(t,{TU:()=>c,UN:()=>u,ix:()=>f});var n=r(63005),i=r(52076),o=r(11133),a=r(7697),s=r(88199),l=r(36181),u=.5;function c(e,t,r,a,c,f,h){var p=e[0]*u,d=e[1]*u,y=(0,s.E4)(p,d);y.imageSmoothingEnabled=!1;for(var g=y.canvas,m=new n.Z(y,u,c,null,h),_=r.length,v=Math.floor(16777215/_),A={},b=1;b<=_;++b){var w=r[b-1],E=w.getStyleFunction()||a;if(E){var x=E(w,f);if(x){Array.isArray(x)||(x=[x]);for(var I=(b*v).toString(16).padStart(7,"#00000"),S=0,C=x.length;S<C;++S){var P=x[S],O=P.getGeometryFunction()(w);if(O&&(0,l.kK)(c,O.getExtent())){var T=P.clone(),M=T.getFill();M&&M.setColor(I);var k=T.getStroke();k&&(k.setColor(I),k.setLineDash(null)),T.setText(void 0);var R=P.getImage();if(R){var B=R.getImageSize();if(!B)continue;var L=(0,s.E4)(B[0],B[1],void 0,{alpha:!1}),D=L.canvas;L.fillStyle=I,L.fillRect(0,0,D.width,D.height),T.setImage(new i.Z({img:D,anchor:R.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:R.getOrigin(),opacity:1,size:R.getSize(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}var j=T.getZIndex()||0,F=A[j];F||(F={},A[j]=F,F.Polygon=[],F.Circle=[],F.LineString=[],F.Point=[]);var N=O.getType();if("GeometryCollection"===N)for(var Z=O.getGeometriesArrayRecursive(),U=0,Q=Z.length;U<Q;++U){var G=Z[U];F[G.getType().replace("Multi","")].push(G,T)}else F[N.replace("Multi","")].push(O,T)}}}}}for(var z=Object.keys(A).map(Number).sort(o.j2),q=0,V=z.length;q<V;++q){var W=A[z[q]];for(var K in W)for(var H=W[K],Y=0,X=H.length;Y<X;Y+=2){m.setStyle(H[Y+1]);for(var J=0,$=t.length;J<$;++J)m.setTransform(t[J]),m.drawGeometry(H[Y])}}return y.getImageData(0,0,g.width,g.height)}function f(e,t,r){var n=[];if(r){var i=Math.floor(Math.round(e[0])*u),o=Math.floor(Math.round(e[1])*u),s=4*((0,a.uZ)(i,0,r.width-1)+(0,a.uZ)(o,0,r.height-1)*r.width),l=r.data[s],c=r.data[s+1],f=r.data[s+2]+256*(c+256*l),h=Math.floor(16777215/t.length);f&&f%h==0&&n.push(t[f/h-1])}return n}},53099:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(31706),i=r(73826),o=r(20594),a=r(16453),s=r(36181),l=r(80650),u=r(54115),c=r(36707);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function g(e,t){l.c.expire()}const m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(y,e);var t,r,n,f=d(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=f.call(this)).map_=e,t}return t=y,(r=[{key:"dispatchRenderEvent",value:function(e,t){(0,o.O3)()}},{key:"calculateMatrices2D",value:function(e){var t=e.viewState,r=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;(0,a.qC)(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),(0,a.nb)(n,r)}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i,o,a,l){var f,h=t.viewState;function p(e,t,r,n){return i.call(o,t,e?r:null,n)}var d=h.projection,y=(0,c.Cf)(e.slice(),d),g=[[0,0]];if(d.canWrapX()&&n){var m=d.getExtent(),_=(0,s.dz)(m);g.push([-_,0],[_,0])}for(var v=t.layerStatesArray,A=v.length,b=[],w=[],E=0;E<g.length;E++)for(var x=A-1;x>=0;--x){var I=v[x],S=I.layer;if(S.hasRenderer()&&(0,u.j)(I,h)&&a.call(l,S)){var C=S.getRenderer(),P=S.getSource();if(C&&P){var O=P.getWrapX()?y:e,T=p.bind(null,I.managed);w[0]=O[0]+g[E][0],w[1]=O[1]+g[E][1],f=C.forEachFeatureAtCoordinate(w,t,r,T,b)}if(f)return f}}if(0!==b.length){var M=1/b.length;return b.forEach((function(e,t){return e.distanceSq+=t*M})),b.sort((function(e,t){return e.distanceSq-t.distanceSq})),b.some((function(e){return f=e.callback(e.feature,e.layer,e.geometry)})),f}}},{key:"hasFeatureAtCoordinate",value:function(e,t,r,n,o,a){return void 0!==this.forEachFeatureAtCoordinate(e,t,r,n,i.uX,this,o,a)}},{key:"getMap",value:function(){return this.map_}},{key:"renderFrame",value:function(e){(0,o.O3)()}},{key:"flushDeclutterItems",value:function(e){}},{key:"scheduleExpireIconCache",value:function(e){l.c.canExpireCache()&&e.postRenderFunctions.push(g)}}])&&h(t.prototype,r),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),y}(n.Z);var _=r(43059),v=r(76299),A=r(27114),b=r(89368),w=r(38283),E=r(34586),x=r(88199);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==I(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===I(o)?o:String(o)),n)}var i,o}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},C.apply(this,arguments)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}const M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(o,e);var t,r,n,i=O(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).fontChangeListenerKey_=(0,E.oL)(w.sG,_.Z.PROPERTYCHANGE,e.redrawText.bind(e)),t.element_=document.createElement("div");var r=t.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",t.element_.className=b.XV+" ol-layers";var n=e.getViewport();return n.insertBefore(t.element_,n.firstChild||null),t.children_=[],t.renderedVisible_=!0,t.declutterLayers_=[],t}return t=o,(r=[{key:"dispatchRenderEvent",value:function(e,t){var r=this.getMap();if(r.hasListener(e)){var n=new v.Z(e,void 0,t);r.dispatchEvent(n)}}},{key:"disposeInternal",value:function(){(0,E.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),C(T(o.prototype),"disposeInternal",this).call(this)}},{key:"renderFrame",value:function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(A.Z.PRECOMPOSE,e);var t=e.layerStatesArray.sort((function(e,t){return e.zIndex-t.zIndex})),r=e.viewState;this.children_.length=0;var n=this.declutterLayers_;n.length=0;for(var i=null,o=0,a=t.length;o<a;++o){var s=t[o];e.layerIndex=o;var l=s.layer,c=l.getSourceState();if(!(0,u.j)(s,r)||"ready"!=c&&"undefined"!=c)l.unrender();else{var f=l.render(e,i);f&&(f!==i&&(this.children_.push(f),i=f),"getDeclutter"in l&&n.push(l))}}this.flushDeclutterItems(e),(0,x.hF)(this.element_,this.children_),this.dispatchRenderEvent(A.Z.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)}},{key:"flushDeclutterItems",value:function(e){for(var t=this.declutterLayers_,r=t.length-1;r>=0;--r)t[r].renderDeclutter(e);t.length=0}}])&&S(t.prototype,r),n&&S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(m)},49721:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(2115),i=r(94162),o=r(82428),a=r(20594);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},u.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}(this,r)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(d,e);var t,r,o,s=f(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=s.call(this)).ready=!0,t.boundHandleImageChange_=t.handleImageChange_.bind(h(t)),t.layer_=e,t.declutterExecutorGroup=null,t}return t=d,(r=[{key:"getFeatures",value:function(e){return(0,a.O3)()}},{key:"getData",value:function(e){return null}},{key:"prepareFrame",value:function(e){return(0,a.O3)()}},{key:"renderFrame",value:function(e,t){return(0,a.O3)()}},{key:"loadedTileCallback",value:function(e,t,r){e[t]||(e[t]={}),e[t][r.tileCoord.toString()]=r}},{key:"createLoadedTileFinder",value:function(e,t,r){var n=this;return function(i,o){var a=n.loadedTileCallback.bind(n,r,i);return e.forEachLoadedTile(t,i,o,a)}}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){}},{key:"getLayer",value:function(){return this.layer_}},{key:"handleFontsChanged",value:function(){}},{key:"handleImageChange_",value:function(e){var t=e.target;t.getState()!==i.Z.LOADED&&t.getState()!==i.Z.ERROR||this.renderIfReadyAndVisible()}},{key:"loadImage",value:function(e){var t=e.getState();return t!=i.Z.LOADED&&t!=i.Z.ERROR&&e.addEventListener(n.Z.CHANGE,this.boundHandleImageChange_),t==i.Z.IDLE&&(e.load(),t=e.getState()),t==i.Z.LOADED}},{key:"renderIfReadyAndVisible",value:function(){var e=this.getLayer();e&&e.getVisible()&&"ready"===e.getSourceState()&&e.changed()}},{key:"disposeInternal",value:function(){delete this.layer_,u(p(d.prototype),"disposeInternal",this).call(this)}}])&&l(t.prototype,r),o&&l(t,o),Object.defineProperty(t,"prototype",{writable:!1}),d}(o.Z)},28427:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(12439),i=r(94162),o=r(56571),a=r(16453),s=r(36181),l=r(27811);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(f,e);var t,r,n,u=d(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=u.call(this,e)).image_=null,t}return t=f,(r=[{key:"getImage",value:function(){return this.image_?this.image_.getImage():null}},{key:"prepareFrame",value:function(e){var t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,n=e.viewState,a=n.resolution,u=this.getLayer().getSource(),c=e.viewHints,f=e.extent;if(void 0!==t.extent&&(f=(0,s.Ed)(f,(0,l.dY)(t.extent,n.projection))),!c[o.Z.ANIMATING]&&!c[o.Z.INTERACTING]&&!(0,s.xb)(f))if(u){var h=n.projection,p=u.getImage(f,a,r,h);p&&(this.loadImage(p)?this.image_=p:p.getState()===i.Z.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}},{key:"getData",value:function(e){var t=this.frameState;if(!t)return null;var r=this.getLayer(),n=(0,a.nn)(t.pixelToCoordinateTransform,e.slice()),i=r.getExtent();if(i&&!(0,s.b8)(i,n))return null;var o=this.image_.getExtent(),l=this.image_.getImage(),u=(0,s.dz)(o),c=Math.floor(l.width*((n[0]-o[0])/u));if(c<0||c>=l.width)return null;var f=(0,s.Cr)(o),h=Math.floor(l.height*((o[3]-n[1])/f));return h<0||h>=l.height?null:this.getImageData(l,c,h)}},{key:"renderFrame",value:function(e,t){var r=this.image_,n=r.getExtent(),i=r.getResolution(),o=c(Array.isArray(i)?i:[i,i],2),u=o[0],f=o[1],h=r.getPixelRatio(),p=e.layerStatesArray[e.layerIndex],d=e.pixelRatio,y=e.viewState,g=y.center,m=y.resolution,_=d*u/(m*h),v=d*f/(m*h),A=e.extent,b=y.resolution,w=y.rotation,E=Math.round((0,s.dz)(A)/b*d),x=Math.round((0,s.Cr)(A)/b*d);(0,a.qC)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/d,1/d,w,-E/2,-x/2),(0,a.nb)(this.inversePixelTransform,this.pixelTransform);var I=(0,a.BB)(this.pixelTransform);this.useContainer(t,I,this.getBackground(e));var S=this.context,C=S.canvas;C.width!=E||C.height!=x?(C.width=E,C.height=x):this.containerReused||S.clearRect(0,0,E,x);var P=!1,O=!0;if(p.extent){var T=(0,l.dY)(p.extent,y.projection);(P=(O=(0,s.kK)(T,e.extent))&&!(0,s.r4)(T,e.extent))&&this.clipUnrotated(S,e,T)}var M=r.getImage(),k=(0,a.qC)(this.tempTransform,E/2,x/2,_,v,0,h*(n[0]-g[0])/u,h*(g[1]-n[3])/f);this.renderedResolution=f*d/h;var R=M.width*k[0],B=M.height*k[3];if(this.getLayer().getSource().getInterpolate()||(S.imageSmoothingEnabled=!1),this.preRender(S,e),O&&R>=.5&&B>=.5){var L,D=k[4],j=k[5],F=p.opacity;1!==F&&(L=S.globalAlpha,S.globalAlpha=F),S.drawImage(M,0,0,+M.width,+M.height,D,j,R,B),1!==F&&(S.globalAlpha=L)}return this.postRender(S,e),P&&S.restore(),S.imageSmoothingEnabled=!0,I!==C.style.transform&&(C.style.transform=I),this.container}}])&&h(t.prototype,r),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Z)},12439:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v,r:()=>m});var n=r(49721),i=r(76299),o=r(27114),a=r(16453),s=r(22072),l=r(88199),u=r(11133),c=r(36181);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},p.apply(this,arguments)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var m=[],_=null;const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(m,e);var t,r,n,f=y(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=f.call(this,e)).container=null,t.renderedResolution,t.tempTransform=(0,a.Ue)(),t.pixelTransform=(0,a.Ue)(),t.inversePixelTransform=(0,a.Ue)(),t.context=null,t.containerReused=!1,t.pixelContext_=null,t.frameState=null,t}return t=m,(r=[{key:"getImageData",value:function(e,t,r){var n;_||(_=(0,l.E4)(1,1,void 0,{willReadFrequently:!0})),_.clearRect(0,0,1,1);try{_.drawImage(e,t,r,1,1,0,0,1,1),n=_.getImageData(0,0,1,1).data}catch(e){return _=null,null}return n}},{key:"getBackground",value:function(e){var t=this.getLayer().getBackground();return"function"==typeof t&&(t=t(e.viewState.resolution)),t||void 0}},{key:"useContainer",value:function(e,t,r){var n,i,o=this.getLayer().getClassName();if(e&&e.className===o&&(!r||e&&e.style.backgroundColor&&(0,u.fS)((0,s._2)(e.style.backgroundColor),(0,s._2)(r)))){var a=e.firstElementChild;a instanceof HTMLCanvasElement&&(i=a.getContext("2d"))}if(i&&i.canvas.style.transform===t?(this.container=e,this.context=i,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){(n=document.createElement("div")).className=o;var c=n.style;c.position="absolute",c.width="100%",c.height="100%";var f=(i=(0,l.E4)()).canvas;n.appendChild(f),(c=f.style).position="absolute",c.left="0",c.transformOrigin="top left",this.container=n,this.context=i}this.containerReused||!r||this.container.style.backgroundColor||(this.container.style.backgroundColor=r)}},{key:"clipUnrotated",value:function(e,t,r){var n=(0,c.rL)(r),i=(0,c.Xv)(r),o=(0,c.w$)(r),s=(0,c.hC)(r);(0,a.nn)(t.coordinateToPixelTransform,n),(0,a.nn)(t.coordinateToPixelTransform,i),(0,a.nn)(t.coordinateToPixelTransform,o),(0,a.nn)(t.coordinateToPixelTransform,s);var l=this.inversePixelTransform;(0,a.nn)(l,n),(0,a.nn)(l,i),(0,a.nn)(l,o),(0,a.nn)(l,s),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.clip()}},{key:"dispatchRenderEvent_",value:function(e,t,r){var n=this.getLayer();if(n.hasListener(e)){var o=new i.Z(e,this.inversePixelTransform,r,t);n.dispatchEvent(o)}}},{key:"preRender",value:function(e,t){this.frameState=t,this.dispatchRenderEvent_(o.Z.PRERENDER,e,t)}},{key:"postRender",value:function(e,t){this.dispatchRenderEvent_(o.Z.POSTRENDER,e,t)}},{key:"getRenderTransform",value:function(e,t,r,n,i,o,s){var l=i/2,u=o/2,c=n/t,f=-c,h=-e[0]+s,p=-e[1];return(0,a.qC)(this.tempTransform,l,u,c,f,-r,h,p)}},{key:"disposeInternal",value:function(){delete this.frameState,p(g(m.prototype),"disposeInternal",this).call(this)}}])&&h(t.prototype,r),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),m}(n.Z)},96587:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(12439),i=r(44727),o=r(22965),a=r(70559),s=r(57223),l=r(16453),u=r(11133),c=r(36181),f=r(27811),h=r(20594),p=r(59468);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===d(o)?o:String(o)),n)}var i,o}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},g.apply(this,arguments)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}const A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(A,e);var t,r,n,d=_(A);function A(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),(t=d.call(this,e)).extentChanged=!0,t.renderedExtent_=null,t.renderedPixelRatio,t.renderedProjection=null,t.renderedRevision,t.renderedTiles=[],t.newTiles_=!1,t.tmpExtent=(0,c.lJ)(),t.tmpTileRange_=new a.Z(0,0,0,0),t}return t=A,(r=[{key:"isDrawableTile",value:function(e){var t=this.getLayer(),r=e.getState(),n=t.getUseInterimTilesOnError();return r==s.Z.LOADED||r==s.Z.EMPTY||r==s.Z.ERROR&&!n}},{key:"getTile",value:function(e,t,r,n){var i=n.pixelRatio,o=n.viewState.projection,a=this.getLayer(),l=a.getSource().getTile(e,t,r,i,o);return l.getState()==s.Z.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}},{key:"getData",value:function(e){var t=this.frameState;if(!t)return null;var r=this.getLayer(),n=(0,l.nn)(t.pixelToCoordinateTransform,e.slice()),a=r.getExtent();if(a&&!(0,c.b8)(a,n))return null;for(var u=t.pixelRatio,f=t.viewState.projection,h=t.viewState,d=r.getRenderSource(),y=d.getTileGridForProjection(h.projection),g=d.getTilePixelRatio(t.pixelRatio),m=y.getZForResolution(h.resolution);m>=y.getMinZoom();--m){var _=y.getTileCoordForCoordAndZ(n,m),v=d.getTile(m,_[1],_[2],u,f);if(!(v instanceof i.Z||v instanceof o.Z)||v instanceof o.Z&&v.getState()===s.Z.EMPTY)return null;if(v.getState()===s.Z.LOADED){var A=y.getOrigin(m),b=(0,p.Pq)(y.getTileSize(m)),w=y.getResolution(m),E=Math.floor(g*((n[0]-A[0])/w-_[1]*b[0])),x=Math.floor(g*((A[1]-n[1])/w-_[2]*b[1])),I=Math.round(g*d.getGutterForProjection(h.projection));return this.getImageData(v.getImage(),E+I,x+I)}}return null}},{key:"loadedTileCallback",value:function(e,t,r){return!!this.isDrawableTile(r)&&g(v(A.prototype),"loadedTileCallback",this).call(this,e,t,r)}},{key:"prepareFrame",value:function(e){return!!this.getLayer().getSource()}},{key:"renderFrame",value:function(e,t){var r=e.layerStatesArray[e.layerIndex],n=e.viewState,i=n.projection,o=n.resolution,a=n.center,p=n.rotation,d=e.pixelRatio,y=this.getLayer(),g=y.getSource(),m=g.getRevision(),_=g.getTileGridForProjection(i),v=_.getZForResolution(o,g.zDirection),A=_.getResolution(v),b=e.extent,w=e.viewState.resolution,E=g.getTilePixelRatio(d),x=Math.round((0,c.dz)(b)/w*d),I=Math.round((0,c.Cr)(b)/w*d),S=r.extent&&(0,f.dY)(r.extent,i);S&&(b=(0,c.Ed)(b,(0,f.dY)(r.extent,i)));var C=A*x/2/E,P=A*I/2/E,O=[a[0]-C,a[1]-P,a[0]+C,a[1]+P],T=_.getTileRangeForExtentAndZ(b,v),M={};M[v]={};var k=this.createLoadedTileFinder(g,i,M),R=this.tmpExtent,B=this.tmpTileRange_;this.newTiles_=!1;for(var L=p?(0,c.dY)(n.center,w,p,e.size):void 0,D=T.minX;D<=T.maxX;++D)for(var j=T.minY;j<=T.maxY;++j)if(!p||_.tileCoordIntersectsViewport([v,D,j],L)){var F=this.getTile(v,D,j,e);if(this.isDrawableTile(F)){var N=(0,h.sq)(this);if(F.getState()==s.Z.LOADED){M[v][F.tileCoord.toString()]=F;var Z=F.inTransition(N);Z&&1!==r.opacity&&(F.endTransition(N),Z=!1),this.newTiles_||!Z&&this.renderedTiles.includes(F)||(this.newTiles_=!0)}if(1===F.getAlpha(N,e.time))continue}var U=_.getTileCoordChildTileRange(F.tileCoord,B,R),Q=!1;U&&(Q=k(v+1,U)),Q||_.forEachTileCoordParentTileRange(F.tileCoord,k,B,R)}var G=A/o*d/E;(0,l.qC)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/d,1/d,p,-x/2,-I/2);var z=(0,l.BB)(this.pixelTransform);this.useContainer(t,z,this.getBackground(e));var q=this.context,V=q.canvas;(0,l.nb)(this.inversePixelTransform,this.pixelTransform),(0,l.qC)(this.tempTransform,x/2,I/2,G,G,0,-x/2,-I/2),V.width!=x||V.height!=I?(V.width=x,V.height=I):this.containerReused||q.clearRect(0,0,x,I),S&&this.clipUnrotated(q,e,S),g.getInterpolate()||(q.imageSmoothingEnabled=!1),this.preRender(q,e),this.renderedTiles.length=0;var W,K,H,Y=Object.keys(M).map(Number);Y.sort(u.j2),1!==r.opacity||this.containerReused&&!g.getOpaque(e.viewState.projection)?(W=[],K=[]):Y=Y.reverse();for(var X=Y.length-1;X>=0;--X){var J=Y[X],$=g.getTilePixelSize(J,d,i),ee=_.getResolution(J)/A,te=$[0]*ee*G,re=$[1]*ee*G,ne=_.getTileCoordForCoordAndZ((0,c.rL)(O),J),ie=_.getTileCoordExtent(ne),oe=(0,l.nn)(this.tempTransform,[E*(ie[0]-O[0])/A,E*(O[3]-ie[3])/A]),ae=E*g.getGutterForProjection(i),se=M[J];for(var le in se){var ue=se[le],ce=ue.tileCoord,fe=ne[1]-ce[1],he=Math.round(oe[0]-(fe-1)*te),pe=ne[2]-ce[2],de=Math.round(oe[1]-(pe-1)*re),ye=Math.round(oe[0]-fe*te),ge=Math.round(oe[1]-pe*re),me=he-ye,_e=de-ge,ve=v===J,Ae=ve&&1!==ue.getAlpha((0,h.sq)(this),e.time),be=!1;if(!Ae)if(W){H=[ye,ge,ye+me,ge,ye+me,ge+_e,ye,ge+_e];for(var we=0,Ee=W.length;we<Ee;++we)if(v!==J&&J<K[we]){var xe=W[we];(0,c.kK)([ye,ge,ye+me,ge+_e],[xe[0],xe[3],xe[4],xe[7]])&&(be||(q.save(),be=!0),q.beginPath(),q.moveTo(H[0],H[1]),q.lineTo(H[2],H[3]),q.lineTo(H[4],H[5]),q.lineTo(H[6],H[7]),q.moveTo(xe[6],xe[7]),q.lineTo(xe[4],xe[5]),q.lineTo(xe[2],xe[3]),q.lineTo(xe[0],xe[1]),q.clip())}W.push(H),K.push(J)}else q.clearRect(ye,ge,me,_e);this.drawTileImage(ue,e,ye,ge,me,_e,ae,ve),W&&!Ae?(be&&q.restore(),this.renderedTiles.unshift(ue)):this.renderedTiles.push(ue),this.updateUsedTiles(e.usedTiles,g,ue)}}return this.renderedRevision=m,this.renderedResolution=A,this.extentChanged=!this.renderedExtent_||!(0,c.fS)(this.renderedExtent_,O),this.renderedExtent_=O,this.renderedPixelRatio=d,this.renderedProjection=i,this.manageTilePyramid(e,g,_,d,i,b,v,y.getPreload()),this.scheduleExpireCache(e,g),this.postRender(q,e),r.extent&&q.restore(),q.imageSmoothingEnabled=!0,z!==V.style.transform&&(V.style.transform=z),this.container}},{key:"drawTileImage",value:function(e,t,r,n,i,o,a,s){var l=this.getTileImage(e);if(l){var u=(0,h.sq)(this),c=t.layerStatesArray[t.layerIndex],f=c.opacity*(s?e.getAlpha(u,t.time):1),p=f!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,r,n,i,o),p&&this.context.restore(),f!==c.opacity?t.animate=!0:s&&e.endTransition(u)}}},{key:"getImage",value:function(){var e=this.context;return e?e.canvas:null}},{key:"getTileImage",value:function(e){return e.getImage()}},{key:"scheduleExpireCache",value:function(e,t){if(t.canExpireCache()){var r=function(e,t,r){var n=(0,h.sq)(e);n in r.usedTiles&&e.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,t);e.postRenderFunctions.push(r)}}},{key:"updateUsedTiles",value:function(e,t,r){var n=(0,h.sq)(t);n in e||(e[n]={}),e[n][r.getKey()]=!0}},{key:"manageTilePyramid",value:function(e,t,r,n,i,o,a,l,u){var f=(0,h.sq)(t);f in e.wantedTiles||(e.wantedTiles[f]={});var p,d,y,g,m,_,v=e.wantedTiles[f],A=e.tileQueue,b=r.getMinZoom(),w=e.viewState.rotation,E=w?(0,c.dY)(e.viewState.center,e.viewState.resolution,w,e.size):void 0,x=0;for(_=b;_<=a;++_)for(d=r.getTileRangeForExtentAndZ(o,_,d),y=r.getResolution(_),g=d.minX;g<=d.maxX;++g)for(m=d.minY;m<=d.maxY;++m)w&&!r.tileCoordIntersectsViewport([_,g,m],E)||(a-_<=l?(++x,(p=t.getTile(_,g,m,n,i)).getState()==s.Z.IDLE&&(v[p.getKey()]=!0,A.isKeyQueued(p.getKey())||A.enqueue([p,f,r.getTileCoordCenter(p.tileCoord),y])),void 0!==u&&u(p)):t.useTile(_,g,m,i));t.updateCacheSize(x,i)}}])&&y(t.prototype,r),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),A}(n.Z)},27525:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(49574),i=r(12439),o=r(26788),a=r(27114),s=r(56571),l=r(49376),u=r(16453),c=r(36181),f=r(88199),h=r(28643),p=r(11133),d=r(27811),y=r(20594),g=r(36707);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===m(o)?o:String(o)),n)}var i,o}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,r)}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}const E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(E,e);var t,r,m,w=A(E);function E(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,E),(t=w.call(this,e)).boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(b(t)),t.animatingOrInteracting_,t.hitDetectionImageData_=null,t.renderedFeatures_=null,t.renderedRevision_=-1,t.renderedResolution_=NaN,t.renderedExtent_=(0,c.lJ)(),t.wrappedRenderedExtent_=(0,c.lJ)(),t.renderedRotation_,t.renderedCenter_=null,t.renderedProjection_=null,t.renderedRenderOrder_=null,t.replayGroup_=null,t.replayGroupChanged=!0,t.declutterExecutorGroup=null,t.clipping=!0,t.compositionContext_=null,t.opacity_=1,t}return t=E,(r=[{key:"renderWorlds",value:function(e,t,r){var n=t.extent,i=t.viewState,o=i.center,a=i.resolution,l=i.projection,u=i.rotation,f=l.getExtent(),h=this.getLayer().getSource(),p=t.pixelRatio,d=t.viewHints,y=!(d[s.Z.ANIMATING]||d[s.Z.INTERACTING]),g=this.compositionContext_,m=Math.round(t.size[0]*p),_=Math.round(t.size[1]*p),v=h.getWrapX()&&l.canWrapX(),A=v?(0,c.dz)(f):null,b=v?Math.ceil((n[2]-f[2])/A)+1:1,w=v?Math.floor((n[0]-f[0])/A):0;do{var E=this.getRenderTransform(o,a,u,p,m,_,w*A);e.execute(g,1,E,u,y,void 0,r)}while(++w<b)}},{key:"setupCompositionContext_",value:function(){if(1!==this.opacity_){var e=(0,f.E4)(this.context.canvas.width,this.context.canvas.height,i.r);this.compositionContext_=e}else this.compositionContext_=this.context}},{key:"releaseCompositionContext_",value:function(){if(1!==this.opacity_){var e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,(0,f.jy)(this.compositionContext_),i.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}},{key:"renderDeclutter",value:function(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}},{key:"renderFrame",value:function(e,t){var r=e.pixelRatio,n=e.layerStatesArray[e.layerIndex];(0,u.n3)(this.pixelTransform,1/r,1/r),(0,u.nb)(this.inversePixelTransform,this.pixelTransform);var i=(0,u.BB)(this.pixelTransform);this.useContainer(t,i,this.getBackground(e));var o=this.context,s=o.canvas,l=this.replayGroup_,f=this.declutterExecutorGroup,h=l&&!l.isEmpty()||f&&!f.isEmpty();if(!h&&!this.getLayer().hasListener(a.Z.PRERENDER)&&!this.getLayer().hasListener(a.Z.POSTRENDER))return null;var p=Math.round(e.size[0]*r),y=Math.round(e.size[1]*r);s.width!=p||s.height!=y?(s.width=p,s.height=y,s.style.transform!==i&&(s.style.transform=i)):this.containerReused||o.clearRect(0,0,p,y),this.preRender(o,e);var g=e.viewState,m=g.projection;this.opacity_=n.opacity,this.setupCompositionContext_();var _=!1;if(h&&n.extent&&this.clipping){var v=(0,d.dY)(n.extent,m);(_=(h=(0,c.kK)(v,e.extent))&&!(0,c.r4)(v,e.extent))&&this.clipUnrotated(this.compositionContext_,e,v)}return h&&this.renderWorlds(l,e),_&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==g.rotation&&(this.renderedRotation_=g.rotation,this.hitDetectionImageData_=null),this.container}},{key:"getFeatures",value:function(e){var t=this;return new Promise((function(r){if(!t.hitDetectionImageData_&&!t.animatingOrInteracting_){var n=[t.context.canvas.width,t.context.canvas.height];(0,u.nn)(t.pixelTransform,n);var i=t.renderedCenter_,o=t.renderedResolution_,a=t.renderedRotation_,s=t.renderedProjection_,f=t.wrappedRenderedExtent_,h=t.getLayer(),p=[],d=n[0]*l.UN,y=n[1]*l.UN;p.push(t.getRenderTransform(i,o,a,l.UN,d,y,0).slice());var g=h.getSource(),m=s.getExtent();if(g.getWrapX()&&s.canWrapX()&&!(0,c.r4)(m,f)){for(var _,v=f[0],A=(0,c.dz)(m),b=0;v<m[0];)_=A*--b,p.push(t.getRenderTransform(i,o,a,l.UN,d,y,_).slice()),v+=A;for(b=0,v=f[2];v>m[2];)_=A*++b,p.push(t.getRenderTransform(i,o,a,l.UN,d,y,_).slice()),v-=A}t.hitDetectionImageData_=(0,l.TU)(n,p,t.renderedFeatures_,h.getStyleFunction(),f,o,a)}r((0,l.ix)(e,t.renderedFeatures_,t.hitDetectionImageData_))}))}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){var o=this;if(this.replayGroup_){var a,s=t.viewState.resolution,l=t.viewState.rotation,u=this.getLayer(),c={},f=function(e,t,r){var o=(0,y.sq)(e),a=c[o];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return c[o]=!0,i.splice(i.lastIndexOf(a),1),n(e,u,t);a.geometry=t,a.distanceSq=r}}else{if(0===r)return c[o]=!0,n(e,u,t);i.push(c[o]={feature:e,layer:u,geometry:t,distanceSq:r,callback:n})}},h=[this.replayGroup_];return this.declutterExecutorGroup&&h.push(this.declutterExecutorGroup),h.some((function(n){return a=n.forEachFeatureAtCoordinate(e,s,l,r,f,n===o.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map((function(e){return e.value})):null)})),a}}},{key:"handleFontsChanged",value:function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}},{key:"handleStyleImageChange_",value:function(e){this.renderIfReadyAndVisible()}},{key:"prepareFrame",value:function(e){var t=this,r=this.getLayer(),i=r.getSource();if(!i)return!1;var a=e.viewHints[s.Z.ANIMATING],l=e.viewHints[s.Z.INTERACTING],u=r.getUpdateWhileAnimating(),f=r.getUpdateWhileInteracting();if(this.ready&&!u&&a||!f&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var y=e.extent,m=e.viewState,_=m.projection,v=m.resolution,A=e.pixelRatio,b=r.getRevision(),w=r.getRenderBuffer(),E=r.getRenderOrder();void 0===E&&(E=h.eR);var x=m.center.slice(),I=(0,c.f3)(y,w*v),S=I.slice(),C=[I.slice()],P=_.getExtent();if(i.getWrapX()&&_.canWrapX()&&!(0,c.r4)(P,e.extent)){var O=(0,c.dz)(P),T=Math.max((0,c.dz)(I)/2,O);I[0]=P[0]-T,I[2]=P[2]+T,(0,g.Cf)(x,_);var M=(0,c.Cf)(C[0],_);M[0]<P[0]&&M[2]<P[2]?C.push([M[0]+O,M[1],M[2]+O,M[3]]):M[0]>P[0]&&M[2]>P[2]&&C.push([M[0]-O,M[1],M[2]-O,M[3]])}if(this.ready&&this.renderedResolution_==v&&this.renderedRevision_==b&&this.renderedRenderOrder_==E&&(0,c.r4)(this.wrappedRenderedExtent_,I))return(0,p.fS)(this.renderedExtent_,S)||(this.hitDetectionImageData_=null,this.renderedExtent_=S),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;var k,R=new n.Z((0,h.Qz)(v,A),I,v,A);this.getLayer().getDeclutter()&&(k=new n.Z((0,h.Qz)(v,A),I,v,A));var B,L=(0,d.Cs)();if(L){for(var D=0,j=C.length;D<j;++D){var F=C[D],N=(0,d.Fj)(F,_);i.loadFeatures(N,(0,d.on)(v,_),L)}B=(0,d.WO)(L,_)}else for(var Z=0,U=C.length;Z<U;++Z)i.loadFeatures(C[Z],v,_);var Q=(0,h.se)(v,A),G=!0,z=function(e){var n,i=e.getStyleFunction()||r.getStyleFunction();if(i&&(n=i(e,v)),n){var o=t.renderFeature(e,Q,n,R,B,k);G=G&&!o}},q=(0,d.Fj)(I,_),V=i.getFeaturesInExtent(q);E&&V.sort(E);for(var W=0,K=V.length;W<K;++W)z(V[W]);this.renderedFeatures_=V,this.ready=G;var H=R.finish(),Y=new o.Z(I,v,A,i.getOverlaps(),H,r.getRenderBuffer());return k&&(this.declutterExecutorGroup=new o.Z(I,v,A,i.getOverlaps(),k.finish(),r.getRenderBuffer())),this.renderedResolution_=v,this.renderedRevision_=b,this.renderedRenderOrder_=E,this.renderedExtent_=S,this.wrappedRenderedExtent_=I,this.renderedCenter_=x,this.renderedProjection_=_,this.replayGroup_=Y,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}},{key:"renderFeature",value:function(e,t,r,n,i,o){if(!r)return!1;var a=!1;if(Array.isArray(r))for(var s=0,l=r.length;s<l;++s)a=(0,h.Pn)(n,e,r[s],t,this.boundHandleStyleImageChange_,i,o)||a;else a=(0,h.Pn)(n,e,r,t,this.boundHandleStyleImageChange_,i,o);return a}}])&&_(t.prototype,r),m&&_(t,m),Object.defineProperty(t,"prototype",{writable:!1}),E}(i.Z)},3785:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n=r(49574),i=r(26788),o=r(96587),a=r(57223),s=r(56571),l=r(49376),u=r(16453),c=r(36181),f=r(28643),h=r(20594),p=r(59468),d=r(36707);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===y(o)?o:String(o)),n)}var i,o}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},m.apply(this,arguments)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}(this,r)}}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var w={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},E={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};const x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(x,e);var t,r,o,y=v(x);function x(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x),(t=y.call(this,e)).boundHandleStyleImageChange_=t.handleStyleImageChange_.bind(A(t)),t.renderedLayerRevision_,t.renderedPixelToCoordinateTransform_=null,t.renderedRotation_,t.tmpTransform_=(0,u.Ue)(),t}return t=x,(r=[{key:"prepareTile",value:function(e,t,r){var n,i=e.getState();return i!==a.Z.LOADED&&i!==a.Z.ERROR||(this.updateExecutorGroup_(e,t,r),this.tileImageNeedsRender_(e)&&(n=!0)),n}},{key:"getTile",value:function(e,t,r,n){var i=n.pixelRatio,o=n.viewState,a=o.resolution,l=o.projection,u=this.getLayer(),c=u.getSource().getTile(e,t,r,i,l),f=n.viewHints,h=!(f[s.Z.ANIMATING]||f[s.Z.INTERACTING]);return!h&&c.wantedResolution||(c.wantedResolution=a),this.prepareTile(c,i,l)&&(h||Date.now()-n.time<8)&&"vector"!==u.getRenderMode()&&this.renderTileImage_(c,n),m(b(x.prototype),"getTile",this).call(this,e,t,r,n)}},{key:"isDrawableTile",value:function(e){var t=this.getLayer();return m(b(x.prototype),"isDrawableTile",this).call(this,e)&&("vector"===t.getRenderMode()?(0,h.sq)(t)in e.executorGroups:e.hasContext(t))}},{key:"getTileImage",value:function(e){return e.getImage(this.getLayer())}},{key:"prepareFrame",value:function(e){var t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),m(b(x.prototype),"prepareFrame",this).call(this,e)}},{key:"updateExecutorGroup_",value:function(e,t,r){var o=this,s=this.getLayer(),l=s.getRevision(),u=s.getRenderOrder()||null,p=e.wantedResolution,d=e.getReplayState(s);if(d.dirty||d.renderedResolution!==p||d.renderedRevision!=l||d.renderedRenderOrder!=u){var y=s.getSource(),g=s.getDeclutter(),m=y.getTileGrid(),_=y.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),v=y.getSourceTiles(t,r,e),A=(0,h.sq)(s);delete e.hitDetectionImageData[A],e.executorGroups[A]=[],g&&(e.declutterExecutorGroups[A]=[]),d.dirty=!1;for(var b=function(){var r=v[w];if(r.getState()!=a.Z.LOADED)return"continue";var l=r.tileCoord,h=m.getTileCoordExtent(l),b=(0,c.Ed)(_,h),E=(0,c.f3)(b,s.getRenderBuffer()*p,o.tmpExtent),x=(0,c.fS)(h,b)?null:E,I=new n.Z(0,E,p,t),S=g?new n.Z(0,b,p,t):void 0,C=(0,f.se)(p,t),P=function(e){var t,r=e.getStyleFunction()||s.getStyleFunction();if(r&&(t=r(e,p)),t){var n=this.renderFeature(e,C,t,I,S);d.dirty=d.dirty||n}},O=r.getFeatures();u&&u!==d.renderedRenderOrder&&O.sort(u);for(var T=0,M=O.length;T<M;++T){var k=O[T];x&&!(0,c.kK)(x,k.getGeometry().getExtent())||P.call(o,k)}var R=I.finish(),B="vector"!==s.getRenderMode()&&g&&1===v.length?null:b,L=new i.Z(B,p,t,y.getOverlaps(),R,s.getRenderBuffer());if(e.executorGroups[A].push(L),S){var D=new i.Z(null,p,t,y.getOverlaps(),S.finish(),s.getRenderBuffer());e.declutterExecutorGroups[A].push(D)}},w=0,E=v.length;w<E;++w)b();d.renderedRevision=l,d.renderedRenderOrder=u,d.renderedResolution=p}}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){var o=t.viewState.resolution,a=t.viewState.rotation;r=null==r?0:r;var s=this.getLayer(),l=s.getSource().getTileGridForProjection(t.viewState.projection),u=(0,c.hI)([e]);(0,c.f3)(u,o*r,u);for(var f,p={},d=function(e,t,r){var o=e.getId();void 0===o&&(o=(0,h.sq)(e));var a=p[o];if(a){if(!0!==a&&r<a.distanceSq){if(0===r)return p[o]=!0,i.splice(i.lastIndexOf(a),1),n(e,s,t);a.geometry=t,a.distanceSq=r}}else{if(0===r)return p[o]=!0,n(e,s,t);i.push(p[o]={feature:e,layer:s,geometry:t,distanceSq:r,callback:n})}},y=this.renderedTiles,g=function(){var n=y[m],i=l.getTileCoordExtent(n.wrappedTileCoord);if(!(0,c.kK)(i,u))return"continue";var p=(0,h.sq)(s),g=[n.executorGroups[p]],_=n.declutterExecutorGroups[p];_&&g.push(_),g.some((function(n){for(var i=n===_?t.declutterTree.all().map((function(e){return e.value})):null,s=0,l=n.length;s<l;++s){var u=n[s];if(f=u.forEachFeatureAtCoordinate(e,o,a,r,d,i))return!0}}))},m=0,_=y.length;!f&&m<_;++m)g();return f}},{key:"getFeatures",value:function(e){var t=this;return new Promise((function(r,n){for(var i,o=t.getLayer(),s=(0,h.sq)(o),f=o.getSource(),y=t.renderedProjection,g=y.getExtent(),m=t.renderedResolution,_=f.getTileGridForProjection(y),v=(0,u.nn)(t.renderedPixelToCoordinateTransform_,e.slice()),A=_.getTileCoordForCoordAndResolution(v,m),b=0,w=t.renderedTiles.length;b<w;++b)if(A.toString()===t.renderedTiles[b].tileCoord.toString()){if((i=t.renderedTiles[b]).getState()===a.Z.LOADED){var E=_.getTileCoordExtent(i.tileCoord);f.getWrapX()&&y.canWrapX()&&!(0,c.r4)(g,E)&&(0,d.Cf)(v,y);break}i=void 0}if(!i||i.loadingSourceTiles>0)r([]);else{var x=_.getTileCoordExtent(i.wrappedTileCoord),I=(0,c.rL)(x),S=[(v[0]-I[0])/m,(I[1]-v[1])/m],C=i.getSourceTiles().reduce((function(e,t){return e.concat(t.getFeatures())}),[]),P=i.hitDetectionImageData[s];if(!P){var O=(0,p.Pq)(_.getTileSize(_.getZForResolution(m,f.zDirection))),T=t.renderedRotation_,M=[t.getRenderTransform(_.getTileCoordCenter(i.wrappedTileCoord),m,0,l.UN,O[0]*l.UN,O[1]*l.UN,0)];P=(0,l.TU)(O,M,C,o.getStyleFunction(),_.getTileCoordExtent(i.wrappedTileCoord),i.getReplayState(o).renderedResolution,T),i.hitDetectionImageData[s]=P}r((0,l.ix)(S,C,P))}}))}},{key:"handleFontsChanged",value:function(){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()}},{key:"handleStyleImageChange_",value:function(e){this.renderIfReadyAndVisible()}},{key:"renderDeclutter",value:function(e){var t=this.context,r=t.globalAlpha;t.globalAlpha=this.getLayer().getOpacity();for(var n=e.viewHints,i=!(n[s.Z.ANIMATING]||n[s.Z.INTERACTING]),o=this.renderedTiles,a=0,l=o.length;a<l;++a){var u=o[a],c=u.declutterExecutorGroups[(0,h.sq)(this.getLayer())];if(c)for(var f=c.length-1;f>=0;--f)c[f].execute(this.context,1,this.getTileRenderTransform(u,e),e.viewState.rotation,i,void 0,e.declutterTree)}t.globalAlpha=r}},{key:"getTileRenderTransform",value:function(e,t){var r=t.pixelRatio,n=t.viewState,i=n.center,o=n.resolution,a=n.rotation,s=t.size,l=Math.round(s[0]*r),c=Math.round(s[1]*r),f=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),h=e.tileCoord,p=f.getTileCoordExtent(e.wrappedTileCoord),d=f.getTileCoordExtent(h,this.tmpExtent)[0]-p[0];return(0,u.Jp)((0,u.bA)(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(i,o,a,r,l,c,d))}},{key:"postRender",value:function(e,t){var r=t.viewHints,n=!(r[s.Z.ANIMATING]||r[s.Z.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;var i=this.getLayer(),o=i.getRenderMode(),a=e.globalAlpha;e.globalAlpha=i.getOpacity();for(var l=E[o],u=t.viewState,f=u.rotation,p=i.getSource(),d=p.getTileGridForProjection(u.projection).getZForResolution(u.resolution,p.zDirection),y=this.renderedTiles,g=[],_=[],v=!0,A=y.length-1;A>=0;--A){var w=y[A];v=v&&!w.getReplayState(i).dirty;var I=w.executorGroups[(0,h.sq)(i)].filter((function(e){return e.hasExecutors(l)}));if(0!==I.length){var S=this.getTileRenderTransform(w,t),C=w.tileCoord[0],P=!1,O=I[0].getClipCoords(S);if(O){for(var T=0,M=g.length;T<M;++T)if(d!==C&&C<_[T]){var k=g[T];(0,c.kK)([O[0],O[3],O[4],O[7]],[k[0],k[3],k[4],k[7]])&&(P||(e.save(),P=!0),e.beginPath(),e.moveTo(O[0],O[1]),e.lineTo(O[2],O[3]),e.lineTo(O[4],O[5]),e.lineTo(O[6],O[7]),e.moveTo(k[6],k[7]),e.lineTo(k[4],k[5]),e.lineTo(k[2],k[3]),e.lineTo(k[0],k[1]),e.clip())}g.push(O),_.push(C)}for(var R=0,B=I.length;R<B;++R)I[R].execute(e,1,S,f,n,l);P&&e.restore()}}e.globalAlpha=a,this.ready=v,m(b(x.prototype),"postRender",this).call(this,e,t)}},{key:"renderFeature",value:function(e,t,r,n,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=0,s=r.length;a<s;++a)o=(0,f.Pn)(n,e,r[a],t,this.boundHandleStyleImageChange_,void 0,i)||o;else o=(0,f.Pn)(n,e,r,t,this.boundHandleStyleImageChange_,void 0,i);return o}},{key:"tileImageNeedsRender_",value:function(e){var t=this.getLayer();if("vector"===t.getRenderMode())return!1;var r=e.getReplayState(t),n=t.getRevision(),i=e.wantedResolution;return r.renderedTileResolution!==i||r.renderedTileRevision!==n}},{key:"renderTileImage_",value:function(e,t){var r=this.getLayer(),n=e.getReplayState(r),i=r.getRevision(),o=e.executorGroups[(0,h.sq)(r)];n.renderedTileRevision=i;var a=e.wrappedTileCoord,s=a[0],l=r.getSource(),c=t.pixelRatio,f=t.viewState.projection,p=l.getTileGridForProjection(f),d=p.getResolution(e.tileCoord[0]),y=t.pixelRatio/e.wantedResolution*d,g=p.getResolution(s),m=e.getContext(r);c=Math.round(Math.max(c,y/c));var _=l.getTilePixelSize(s,c,f);m.canvas.width=_[0],m.canvas.height=_[1];var v=c/y;if(1!==v){var A=(0,u.mc)(this.tmpTransform_);(0,u.bA)(A,v,v),m.setTransform.apply(m,A)}var b=p.getTileCoordExtent(a,this.tmpExtent),E=y/g,x=(0,u.mc)(this.tmpTransform_);(0,u.bA)(x,E,-E),(0,u.Iu)(x,-b[0],-b[3]);for(var I=0,S=o.length;I<S;++I)o[I].execute(m,v,x,0,!0,w[r.getRenderMode()]);n.renderedTileResolution=e.wantedResolution}}])&&g(t.prototype,r),o&&g(t,o),Object.defineProperty(t,"prototype",{writable:!1}),x}(o.Z)},28643:(e,t,r)=>{"use strict";r.d(t,{Pn:()=>c,Qz:()=>u,eR:()=>s,se:()=>l});var n=r(94162),i=r(20594),o=.5,a={Point:function(e,t,r,i,o){var a,s=r.getImage(),l=r.getText();if(s){if(s.getImageState()!=n.Z.LOADED)return;var u=e;if(o){var c=s.getDeclutterMode();if("none"!==c)if(u=o,"obstacle"===c){var f=e.getBuilder(r.getZIndex(),"Image");f.setImageStyle(s,a),f.drawPoint(t,i)}else l&&l.getText()&&(a={})}var h=u.getBuilder(r.getZIndex(),"Image");h.setImageStyle(s,a),h.drawPoint(t,i)}if(l&&l.getText()){var p=e;o&&(p=o);var d=p.getBuilder(r.getZIndex(),"Text");d.setTextStyle(l,a),d.drawText(t,i)}},LineString:function(e,t,r,n,i){var o=r.getStroke();if(o){var a=e.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(t,n)}var s=r.getText();if(s&&s.getText()){var l=(i||e).getBuilder(r.getZIndex(),"Text");l.setTextStyle(s),l.drawText(t,n)}},Polygon:function(e,t,r,n,i){var o=r.getFill(),a=r.getStroke();if(o||a){var s=e.getBuilder(r.getZIndex(),"Polygon");s.setFillStrokeStyle(o,a),s.drawPolygon(t,n)}var l=r.getText();if(l&&l.getText()){var u=(i||e).getBuilder(r.getZIndex(),"Text");u.setTextStyle(l),u.drawText(t,n)}},MultiPoint:function(e,t,r,i,o){var a,s=r.getImage(),l=r.getText();if(s){if(s.getImageState()!=n.Z.LOADED)return;var u=e;if(o){var c=s.getDeclutterMode();if("none"!==c)if(u=o,"obstacle"===c){var f=e.getBuilder(r.getZIndex(),"Image");f.setImageStyle(s,a),f.drawMultiPoint(t,i)}else l&&l.getText()&&(a={})}var h=u.getBuilder(r.getZIndex(),"Image");h.setImageStyle(s,a),h.drawMultiPoint(t,i)}if(l&&l.getText()){var p=e;o&&(p=o);var d=p.getBuilder(r.getZIndex(),"Text");d.setTextStyle(l,a),d.drawText(t,i)}},MultiLineString:function(e,t,r,n,i){var o=r.getStroke();if(o){var a=e.getBuilder(r.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(t,n)}var s=r.getText();if(s&&s.getText()){var l=(i||e).getBuilder(r.getZIndex(),"Text");l.setTextStyle(s),l.drawText(t,n)}},MultiPolygon:function(e,t,r,n,i){var o=r.getFill(),a=r.getStroke();if(a||o){var s=e.getBuilder(r.getZIndex(),"Polygon");s.setFillStrokeStyle(o,a),s.drawMultiPolygon(t,n)}var l=r.getText();if(l&&l.getText()){var u=(i||e).getBuilder(r.getZIndex(),"Text");u.setTextStyle(l),u.drawText(t,n)}},GeometryCollection:function(e,t,r,n,i){var o,s,l=t.getGeometriesArray();for(o=0,s=l.length;o<s;++o){(0,a[l[o].getType()])(e,l[o],r,n,i)}},Circle:function(e,t,r,n,i){var o=r.getFill(),a=r.getStroke();if(o||a){var s=e.getBuilder(r.getZIndex(),"Circle");s.setFillStrokeStyle(o,a),s.drawCircle(t,n)}var l=r.getText();if(l&&l.getText()){var u=(i||e).getBuilder(r.getZIndex(),"Text");u.setTextStyle(l),u.drawText(t,n)}}};function s(e,t){return parseInt((0,i.sq)(e),10)-parseInt((0,i.sq)(t),10)}function l(e,t){var r=u(e,t);return r*r}function u(e,t){return o*e/t}function c(e,t,r,i,o,s,l){var u=!1,c=r.getImage();if(c){var h=c.getImageState();h==n.Z.LOADED||h==n.Z.ERROR?c.unlistenImageChange(o):(h==n.Z.IDLE&&c.load(),c.listenImageChange(o),u=!0)}return function(e,t,r,n,i,o){var s=r.getGeometryFunction()(t);if(!s)return;var l=s.simplifyTransformed(n,i),u=r.getRenderer();if(u)f(e,l,r,t);else{(0,a[l.getType()])(e,l,r,t,o)}}(e,t,r,i,s,l),u}function f(e,t,r,n){if("GeometryCollection"!=t.getType())e.getBuilder(r.getZIndex(),"Default").drawCustom(t,n,r.getRenderer(),r.getHitDetectionRenderer());else for(var i=t.getGeometries(),o=0,a=i.length;o<a;++o)f(e,i[o],r,n)}},84801:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(61383),i=r(49721),o=r(76299),a=r(27114),s=r(39),l=r(16453);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},f.apply(this,arguments)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,r)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(g,e);var t,r,i,u=p(g);function g(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),t=t||{},(r=u.call(this,e)).inversePixelTransform_=(0,l.Ue)(),r.pixelContext_=null,r.postProcesses_=t.postProcesses,r.uniforms_=t.uniforms,r.helper,e.addChangeListener(n.Z.MAP,r.removeHelper.bind(d(r))),r.dispatchPreComposeEvent=r.dispatchPreComposeEvent.bind(d(r)),r.dispatchPostComposeEvent=r.dispatchPostComposeEvent.bind(d(r)),r}return t=g,(r=[{key:"dispatchPreComposeEvent",value:function(e,t){var r=this.getLayer();if(r.hasListener(a.Z.PRECOMPOSE)){var n=new o.Z(a.Z.PRECOMPOSE,void 0,t,e);r.dispatchEvent(n)}}},{key:"dispatchPostComposeEvent",value:function(e,t){var r=this.getLayer();if(r.hasListener(a.Z.POSTCOMPOSE)){var n=new o.Z(a.Z.POSTCOMPOSE,void 0,t,e);r.dispatchEvent(n)}}},{key:"reset",value:function(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}},{key:"removeHelper",value:function(){this.helper&&(this.helper.dispose(),delete this.helper)}},{key:"prepareFrame",value:function(e){if(this.getLayer().getRenderSource()){for(var t,r=!0,n=-1,i=0,o=e.layerStatesArray.length;i<o;i++){var a=e.layerStatesArray[i].layer,l=a.getRenderer();if(l instanceof g){var u=a.getClassName();if((r||u!==t)&&(n+=1,r=!1),t=u,l===this)break}else r=!0}var c="map/"+e.mapId+"/group/"+n;this.helper&&this.helper.canvasCacheKeyMatches(c)&&!this.helper.needsToBeRecreated()||(this.removeHelper(),this.helper=new s.ZP({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:c}),t&&(this.helper.getCanvas().className=t),this.afterHelperCreated())}return this.prepareFrameInternal(e)}},{key:"afterHelperCreated",value:function(){}},{key:"prepareFrameInternal",value:function(e){return!0}},{key:"disposeInternal",value:function(){this.removeHelper(),f(y(g.prototype),"disposeInternal",this).call(this)}},{key:"dispatchRenderEvent_",value:function(e,t,r){var n=this.getLayer();if(n.hasListener(e)){(0,l.qC)(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);var i=new o.Z(e,this.inversePixelTransform_,r,t);n.dispatchEvent(i)}}},{key:"preRender",value:function(e,t){this.dispatchRenderEvent_(a.Z.PRERENDER,e,t)}},{key:"postRender",value:function(e,t){this.dispatchRenderEvent_(a.Z.POSTRENDER,e,t)}}])&&c(t.prototype,r),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),g}(i.Z)},34859:(e,t,r)=>{"use strict";r.d(t,{zj:()=>he,XE:()=>fe,ZP:()=>de});var n=r(70416),i=r(22965),o=r(57223),a=r(27167),s=r(2115),l=r(44727),u=r(20594);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===c(o)?o:String(o)),n)}var i,o}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var i=y(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,r)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,r,n,i=p(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this)).tile,t.handleTileChange_=t.handleTileChange_.bind(d(t)),t.gutter_=e.gutter||0,t.helper_=e.helper,t.loaded=!1,t.ready=!1,t}return t=a,(r=[{key:"setTile",value:function(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(s.Z.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===o.Z.LOADED,this.loaded)this.uploadTile();else{if(e instanceof l.Z){var t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener(s.Z.CHANGE,this.handleTileChange_)}}},{key:"uploadTile",value:function(){(0,u.O3)()}},{key:"setReady",value:function(){this.ready=!0,this.dispatchEvent(s.Z.CHANGE)}},{key:"handleTileChange_",value:function(){this.tile.getState()===o.Z.LOADED&&(this.loaded=!0,this.uploadTile())}},{key:"disposeInternal",value:function(){this.tile.removeEventListener(s.Z.CHANGE,this.handleTileChange_)}}])&&f(t.prototype,r),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.Z);var m=r(76358),_=r(77599),v=r(65033),A=r(88199),b=r(59468);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===w(o)?o:String(o)),n)}var i,o}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function C(e,t,r){var n=r?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)}function P(e,t,r,n,i,o){var a,s,l=e.getGL();r instanceof Float32Array?(a=l.FLOAT,e.getExtension("OES_texture_float"),s=null!==e.getExtension("OES_texture_float_linear")):(a=l.UNSIGNED_BYTE,s=!0);C(l,t,o&&s);var u,c=r.byteLength/n[1],f=1;switch(c%8==0?f=8:c%4==0?f=4:c%2==0&&(f=2),i){case 1:u=l.LUMINANCE;break;case 2:u=l.LUMINANCE_ALPHA;break;case 3:u=l.RGB;break;case 4:u=l.RGBA;break;default:throw new Error("Unsupported number of bands: ".concat(i))}var h=l.getParameter(l.UNPACK_ALIGNMENT);l.pixelStorei(l.UNPACK_ALIGNMENT,f),l.texImage2D(l.TEXTURE_2D,0,u,n[0],n[1],0,u,a,r),l.pixelStorei(l.UNPACK_ALIGNMENT,h)}var O=null;const T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(a,e);var t,r,n,o=I(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).textures=[],t.renderSize_=(0,b.Pq)(e.grid.getTileSize(e.tile.tileCoord[0])),t.bandCount=NaN;var r=new _.ZP(v.qO,v.MB);return r.fromArray([0,1,1,1,1,0,0,0]),t.helper_.flushBufferData(r),t.coords=r,t.setTile(e.tile),t}return t=a,(r=[{key:"uploadTile",value:function(){var e,t=this.helper_,r=t.getGL(),n=this.tile;this.textures.length=0,e=n instanceof l.Z||n instanceof i.Z?n.getImage():n.getData();var o=(0,m.G0)(e);if(o){var a=r.createTexture();return this.textures.push(a),this.bandCount=4,function(e,t,r,n){C(e,t,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}(r,a,o,n.interpolate),void this.setReady()}e=(0,m.px)(e);var s=n.getSize(),u=[s[0]+2*this.gutter_,s[1]+2*this.gutter_],c=e instanceof Float32Array,f=u[0]*u[1],h=c?Float32Array:Uint8Array,p=h.BYTES_PER_ELEMENT,d=e.byteLength/u[1];this.bandCount=Math.floor(d/p/u[0]);var y=Math.ceil(this.bandCount/4);if(1===y){var g=r.createTexture();return this.textures.push(g),P(t,g,e,u,this.bandCount,n.interpolate),void this.setReady()}for(var _=new Array(y),v=0;v<y;++v){var A=r.createTexture();this.textures.push(A);var b=v<y-1?4:(this.bandCount-1)%4+1;_[v]=new h(f*b)}for(var w=0,E=0,x=u[0]*this.bandCount,I=0;I<u[1];++I){for(var S=0;S<x;++S){var O=e[E+S],T=Math.floor(w/this.bandCount),M=S%this.bandCount,k=_[Math.floor(M/4)];k[T*(k.length/f)+M%4]=O,++w}E+=d/p}for(var R=0;R<y;++R){var B=this.textures[R],L=_[R];P(t,B,L,u,L.length/f,n.interpolate)}this.setReady()}},{key:"disposeInternal",value:function(){var e=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t]);this.tile.removeEventListener(s.Z.CHANGE,this.handleTileChange_)}},{key:"getImagePixelData_",value:function(e,t,r){var n=this.gutter_,i=this.renderSize_[0],o=this.renderSize_[1];O||(O=(0,A.E4)(1,1,void 0,{willReadFrequently:!0})),O.clearRect(0,0,1,1);var a,s=e.width-2*n,l=e.height-2*n,u=n+Math.floor(s*(t/i)),c=n+Math.floor(l*(r/o));try{O.drawImage(e,u,c,1,1,0,0,1,1),a=O.getImageData(0,0,1,1).data}catch(e){return O=null,null}return a}},{key:"getArrayPixelData_",value:function(e,t,r,n){var i=this.gutter_,o=this.renderSize_[0],a=this.renderSize_[1],s=t[0],l=t[1],u=s+2*i,c=l+2*i,f=i+Math.floor(s*(r/o)),h=i+Math.floor(l*(n/a));if(e instanceof DataView){var p=e.byteLength/(u*c),d=p*(h*u+f),y=e.buffer.slice(d,d+p);return new DataView(y)}var g=this.bandCount*(h*u+f);return e.slice(g,g+this.bandCount)}},{key:"getPixelData",value:function(e,t){if(!this.loaded)return null;if(this.tile instanceof m.ZP){var r=this.tile.getData(),n=(0,m.px)(r);if(n){var i=this.tile.getSize();return this.getArrayPixelData_(n,i,e,t)}return this.getImagePixelData_((0,m.G0)(r),e,t)}return this.getImagePixelData_(this.tile.getImage(),e,t)}}])&&E(t.prototype,r),n&&E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g);var M=r(86732),k=r(70559),R=r(84801),B=r(85603),L=r(62718),D=r(16453),j=r(11133),F=r(27811),N=r(36181);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function U(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Z(o)?o:String(o)),n)}var i,o}function z(){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},z.apply(this,arguments)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=W(e);if(t){var i=W(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}var K={};function H(e,t){return e.tileIds.has((0,u.sq)(t))}function Y(e,t,r){var n=e.representationsByZ;r in n||(n[r]=new Set),n[r].add(t),e.tileIds.add((0,u.sq)(t.tile))}function X(e,t){var r=e.layerStatesArray[e.layerIndex];r.extent&&(t=(0,N.Ed)(t,(0,F.dY)(r.extent,e.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var i=n.getTileGridForProjection(e.viewState.projection).getExtent();i&&(t=(0,N.Ed)(t,i))}return t}function J(e,t){return"".concat(e.getKey(),",").concat((0,L.km)(t))}const $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(l,e);var t,r,a,s=V(l);function l(e,t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=s.call(this,e,{uniforms:t.uniforms,postProcesses:t.postProcesses})).renderComplete=!1,r.tileTransform_=(0,D.Ue)(),r.tempMat4=(0,B.U)(),r.tempTileRange_=new k.Z(0,0,0,0),r.tempTileCoord_=(0,L.T9)(0,0,0),r.tempSize_=[0,0];var n=void 0!==t.cacheSize?t.cacheSize:512;return r.tileRepresentationCache=new M.Z(n),r.frameState=null,r.projection_=void 0,r}return t=l,(r=[{key:"reset",value:function(e){z(W(l.prototype),"reset",this).call(this,{uniforms:e.uniforms})}},{key:"isDrawableTile_",value:function(e){var t=this.getLayer(),r=e.getState(),n=t.getUseInterimTilesOnError();return r==o.Z.LOADED||r==o.Z.EMPTY||r==o.Z.ERROR&&!n}},{key:"prepareFrameInternal",value:function(e){this.projection_?e.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=e.viewState.projection):this.projection_=e.viewState.projection;var t=this.getLayer().getRenderSource();return!!t&&!(0,N.xb)(X(e,e.extent))&&"ready"===t.getState()}},{key:"createTileRepresentation",value:function(e){return(0,u.O3)()}},{key:"enqueueTiles",value:function(e,t,r,n,i){var a=e.viewState,s=this.getLayer(),l=s.getRenderSource(),c=l.getTileGridForProjection(a.projection),f=l.getGutterForProjection(a.projection),h=(0,u.sq)(l);h in e.wantedTiles||(e.wantedTiles[h]={});for(var p=e.wantedTiles[h],d=this.tileRepresentationCache,y=s.getMapInternal(),g=Math.max(r-i,c.getMinZoom(),c.getZForResolution(Math.min(s.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(s.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),m=r;m>=g;--m)for(var _=c.getTileRangeForExtentAndZ(t,m,this.tempTileRange_),v=c.getResolution(m),A=_.minX;A<=_.maxX;++A)for(var b=_.minY;b<=_.maxY;++b){var w=(0,L.T9)(m,A,b,this.tempTileCoord_),E=J(l,w),x=void 0,I=void 0;if(d.containsKey(E)&&(I=(x=d.get(E)).tile),x&&x.tile.key===l.getKey()||(I=l.getTile(m,A,b,e.pixelRatio,a.projection)),!H(n,I)){if(x)if(this.isDrawableTile_(I))x.setTile(I);else{var S=I.getInterimTile();x.setTile(S)}else x=this.createTileRepresentation({tile:I,grid:c,helper:this.helper,gutter:f}),d.set(E,x);Y(n,x,m);var C=I.getKey();p[C]=!0,I.getState()===o.Z.IDLE&&(e.tileQueue.isKeyQueued(C)||e.tileQueue.enqueue([I,h,c.getTileCoordCenter(w),v]))}}}},{key:"beforeTilesRender",value:function(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}},{key:"renderTile",value:function(e,t,r,n,i,o,a,s,l,u,c){}},{key:"drawTile_",value:function(e,t,r,n,i,o,a){if(t.loaded){var s=t.tile.tileCoord,l=(0,L.km)(s),u=l in o?o[l]:1,c=a.getResolution(r),f=(0,b.Pq)(a.getTileSize(r),this.tempSize_),h=a.getOrigin(r),p=a.getTileCoordExtent(s),d=u<1?-1:1/(r+2);u<1&&(e.animate=!0);var y=e.viewState,g=y.center[0],m=y.center[1],_=f[0]+2*n,v=f[1]+2*n,A=_/v,w=(g-h[0])/(f[0]*c),E=(h[1]-m)/(f[1]*c),x=y.resolution/c,I=s[1],S=s[2];(0,D.mc)(this.tileTransform_),(0,D.bA)(this.tileTransform_,2/(e.size[0]*x/_),-2/(e.size[1]*x/_)),(0,D.U1)(this.tileTransform_,y.rotation),(0,D.bA)(this.tileTransform_,1,1/A),(0,D.Iu)(this.tileTransform_,(f[0]*(I-w)-n)/_,(f[1]*(S-E)-n)/v),this.renderTile(t,this.tileTransform_,e,i,c,f,h,p,d,n,u)}}},{key:"renderFrame",value:function(e){var t=this;this.frameState=e,this.renderComplete=!0;var r=this.helper.getGL();this.preRender(r,e);var a=e.viewState,s=this.getLayer(),l=s.getRenderSource(),c=l.getTileGridForProjection(a.projection),f=l.getGutterForProjection(a.projection),h=X(e,e.extent),p=c.getZForResolution(a.resolution,l.zDirection),d={tileIds:new Set,representationsByZ:{}},y=s.getPreload();if(e.nextExtent){var g=c.getZForResolution(a.nextResolution,l.zDirection),m=X(e,e.nextExtent);this.enqueueTiles(e,m,g,d,y)}this.enqueueTiles(e,h,p,d,0),y>0&&setTimeout((function(){t.enqueueTiles(e,h,p-1,d,y-1)}),0);var _,v={},A=(0,u.sq)(this),b=e.time,w=!1,E=U(d.representationsByZ[p]);try{for(E.s();!(_=E.n()).done;){var x=_.value,I=x.tile;if(!(I instanceof i.Z||I instanceof n.Z)||I.getState()!==o.Z.EMPTY){var S=I.tileCoord;if(x.loaded){var C=I.getAlpha(A,b);if(1===C){I.endTransition(A);continue}w=!0,v[(0,L.km)(S)]=C}if(this.renderComplete=!1,!this.findAltTiles_(c,S,p+1,d))for(var P=c.getMinZoom(),O=p-1;O>=P&&!this.findAltTiles_(c,S,O,d);--O);}}}catch(e){E.e(e)}finally{E.f()}this.beforeTilesRender(e,w);for(var T=d.representationsByZ,M=Object.keys(T).map(Number).sort(j.$1),k=0,R=M.length;k<R;++k){var B,D=M[k],F=U(T[D]);try{for(F.s();!(B=F.n()).done;){var N=B.value,Z=N.tile.tileCoord;(0,L.km)(Z)in v||this.drawTile_(e,N,D,f,h,v,c)}}catch(e){F.e(e)}finally{F.f()}}var Q,G=U(T[p]);try{for(G.s();!(Q=G.n()).done;){var z=Q.value,q=z.tile.tileCoord;(0,L.km)(q)in v&&this.drawTile_(e,z,p,f,h,v,c)}}catch(e){G.e(e)}finally{G.f()}this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var V=this.helper.getCanvas(),W=this.tileRepresentationCache;W.canExpireCache();)W.pop().dispose();return e.postRenderFunctions.push((function(e,t){l.updateCacheSize(.1,t.viewState.projection),l.expireCache(t.viewState.projection,K)})),this.postRender(r,e),V}},{key:"findAltTiles_",value:function(e,t,r,n){var i=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!i)return!1;for(var o=!0,a=this.tileRepresentationCache,s=this.getLayer().getRenderSource(),l=i.minX;l<=i.maxX;++l)for(var u=i.minY;u<=i.maxY;++u){var c=J(s,[r,l,u]),f=!1;if(a.containsKey(c)){var h=a.get(c);h.loaded&&!H(n,h.tile)&&(Y(n,h,r),f=!0)}f||(o=!1)}return o}},{key:"clearCache",value:function(){var e=this.tileRepresentationCache;e.forEach((function(e){return e.dispose()})),e.clear()}},{key:"removeHelper",value:function(){this.helper&&this.clearCache(),z(W(l.prototype),"removeHelper",this).call(this)}},{key:"disposeInternal",value:function(){z(W(l.prototype),"disposeInternal",this).call(this),delete this.frameState}}])&&G(t.prototype,r),a&&G(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(R.Z);var ee=r(39);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ce(n.key),n)}}function ne(){return ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ae(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},ne.apply(this,arguments)}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ae(e);if(t){var i=ae(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return(t=ce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e){var t=function(e,t){if("object"!==te(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===te(t)?t:String(t)}var fe=le(le({},{TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"}),{},{TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"}),he={TEXTURE_COORD:"a_textureCoord"},pe=[{name:he.TEXTURE_COORD,size:2,type:ee.GC.FLOAT}];const de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(l,e);var t,r,a,s=oe(l);function l(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=s.call(this,e,t)).program_,r.vertexShader_=t.vertexShader,r.fragmentShader_=t.fragmentShader,r.indices_=new _.ZP(v.cX,v.MB),r.indices_.fromArray([0,1,3,1,2,3]),r.paletteTextures_=t.paletteTextures||[],r}return t=l,(r=[{key:"reset",value:function(e){ne(ae(l.prototype),"reset",this).call(this,e),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}},{key:"afterHelperCreated",value:function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}},{key:"createTileRepresentation",value:function(e){return new T(e)}},{key:"beforeTilesRender",value:function(e,t){ne(ae(l.prototype),"beforeTilesRender",this).call(this,e,t),this.helper.useProgram(this.program_,e)}},{key:"renderTile",value:function(e,t,r,n,i,o,a,s,l,u,c){var f=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(pe);for(var h=0;h<e.textures.length;){var p="".concat(fe.TILE_TEXTURE_ARRAY,"[").concat(h,"]");this.helper.bindTexture(e.textures[h],h,p),++h}for(var d=0;d<this.paletteTextures_.length;++d){var y=this.paletteTextures_[d],g=y.getTexture(f);this.helper.bindTexture(g,h,y.name),++h}var m=r.viewState,_=o[0]+2*u,v=o[1]+2*u,A=e.tile.tileCoord,b=A[1],w=A[2];this.helper.setUniformMatrixValue(fe.TILE_TRANSFORM,(0,B.u)(this.tempMat4,t)),this.helper.setUniformFloatValue(fe.TRANSITION_ALPHA,c),this.helper.setUniformFloatValue(fe.DEPTH,l);var E=n;u>0&&(E=s,(0,N.Ed)(E,n,E)),this.helper.setUniformFloatVec4(fe.RENDER_EXTENT,E),this.helper.setUniformFloatValue(fe.RESOLUTION,m.resolution),this.helper.setUniformFloatValue(fe.ZOOM,m.zoom),this.helper.setUniformFloatValue(fe.TEXTURE_PIXEL_WIDTH,_),this.helper.setUniformFloatValue(fe.TEXTURE_PIXEL_HEIGHT,v),this.helper.setUniformFloatValue(fe.TEXTURE_RESOLUTION,i),this.helper.setUniformFloatValue(fe.TEXTURE_ORIGIN_X,a[0]+b*o[0]*i-u*i),this.helper.setUniformFloatValue(fe.TEXTURE_ORIGIN_Y,a[1]-w*o[1]*i+u*i),this.helper.drawElements(0,this.indices_.getSize())}},{key:"getData",value:function(e){if(!this.helper.getGL())return null;var t=this.frameState;if(!t)return null;var r=this.getLayer(),a=(0,D.nn)(t.pixelToCoordinateTransform,e.slice()),s=t.viewState,l=r.getExtent();if(l&&!(0,N.b8)((0,F.dY)(l,s.projection),a))return null;var u,c,f,h=r.getSources((0,N.hI)([a]),s.resolution);for(u=h.length-1;u>=0;--u)if("ready"===(c=h[u]).getState()){if(f=c.getTileGridForProjection(s.projection),c.getWrapX())break;var p=f.getExtent();if(!p||(0,N.b8)(p,a))break}if(u<0)return null;for(var d=this.tileRepresentationCache,y=f.getZForResolution(s.resolution);y>=f.getMinZoom();--y){var g=f.getTileCoordForCoordAndZ(a,y),m=J(c,g);if(d.containsKey(m)){var _=d.get(m),v=_.tile;if((v instanceof i.Z||v instanceof n.Z)&&v.getState()===o.Z.EMPTY)return null;if(_.loaded){var A=f.getOrigin(y),w=(0,b.Pq)(f.getTileSize(y)),E=f.getResolution(y),x=(a[0]-A[0])/E-g[1]*w[0],I=(A[1]-a[1])/E-g[2]*w[1];return _.getPixelData(x,I)}}}return null}},{key:"disposeInternal",value:function(){var e=this.helper;e&&(e.getGL().deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)),ne(ae(l.prototype),"disposeInternal",this).call(this),delete this.indices_}}])&&re(t.prototype,r),a&&re(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}($)},50578:(e,t,r)=>{"use strict";r.d(t,{Co:()=>h,aA:()=>f,rX:()=>l,sY:()=>p});var n,i=r(36181),o=r(88199),a=r(27811),s=r(7697),l=[];function u(e,t,r,n,i){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(n,i),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(r,i)),e.restore()}function c(e,t){return Math.abs(e[4*t]-210)>2||Math.abs(e[4*t+3]-191.25)>2}function f(e,t,r,n){var o=(0,a.vs)(r,t,e),s=(0,a._Q)(t,n,r),l=t.getMetersPerUnit();void 0!==l&&(s*=l);var u=e.getMetersPerUnit();void 0!==u&&(s/=u);var c=e.getExtent();if(!c||(0,i.b8)(c,o)){var f=(0,a._Q)(e,s,o)/s;isFinite(f)&&f>0&&(s/=f)}return s}function h(e,t,r,n){var o=(0,i.qg)(r),a=f(e,t,o,n);return(!isFinite(a)||a<=0)&&(0,i.H6)(r,(function(r){return a=f(e,t,r,n),isFinite(a)&&a>0})),a}function p(e,t,r,a,f,h,p,d,y,g,m,_){var v=(0,o.E4)(Math.round(r*e),Math.round(r*t),l);if(_||(v.imageSmoothingEnabled=!1),0===y.length)return v.canvas;function A(e){return Math.round(e*r)/r}v.scale(r,r),v.globalCompositeOperation="lighter";var b=(0,i.lJ)();y.forEach((function(e,t,r){(0,i.l7)(b,e.extent)}));var w=(0,i.dz)(b),E=(0,i.Cr)(b),x=(0,o.E4)(Math.round(r*w/a),Math.round(r*E/a),l);_||(x.imageSmoothingEnabled=!1);var I=r/a;y.forEach((function(e,t,r){var n=e.extent[0]-b[0],o=-(e.extent[3]-b[3]),a=(0,i.dz)(e.extent),s=(0,i.Cr)(e.extent);e.image.width>0&&e.image.height>0&&x.drawImage(e.image,g,g,e.image.width-2*g,e.image.height-2*g,n*I,o*I,a*I,s*I)}));var S=(0,i.rL)(p);return d.getTriangles().forEach((function(e,t,i){var f=e.source,p=e.target,d=f[0][0],y=f[0][1],g=f[1][0],m=f[1][1],w=f[2][0],E=f[2][1],I=A((p[0][0]-S[0])/h),C=A(-(p[0][1]-S[1])/h),P=A((p[1][0]-S[0])/h),O=A(-(p[1][1]-S[1])/h),T=A((p[2][0]-S[0])/h),M=A(-(p[2][1]-S[1])/h),k=d,R=y;d=0,y=0;var B=[[g-=k,m-=R,0,0,P-I],[w-=k,E-=R,0,0,T-I],[0,0,g,m,O-C],[0,0,w,E,M-C]],L=(0,s.SV)(B);if(L){if(v.save(),v.beginPath(),function(){if(void 0===n){var e=(0,o.E4)(6,6,l);e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",u(e,4,5,4,0),u(e,4,5,0,5);var t=e.getImageData(0,0,3,3).data;n=c(t,0)||c(t,4)||c(t,8),(0,o.jy)(e),l.push(e.canvas)}return n}()||!_){v.moveTo(P,O);for(var D=I-P,j=C-O,F=0;F<4;F++)v.lineTo(P+A((F+1)*D/4),O+A(F*j/3)),3!=F&&v.lineTo(P+A((F+1)*D/4),O+A((F+1)*j/3));v.lineTo(T,M)}else v.moveTo(P,O),v.lineTo(I,C),v.lineTo(T,M);v.clip(),v.transform(L[0],L[2],L[1],L[3],I,C),v.translate(b[0]-k,b[3]-R),v.scale(a/r,-a/r),v.drawImage(x.canvas,0,0),v.restore()}})),(0,o.jy)(x),l.push(x.canvas),m&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,d.getTriangles().forEach((function(e,t,r){var n=e.target,i=(n[0][0]-S[0])/h,o=-(n[0][1]-S[1])/h,a=(n[1][0]-S[0])/h,s=-(n[1][1]-S[1])/h,l=(n[2][0]-S[0])/h,u=-(n[2][1]-S[1])/h;v.beginPath(),v.moveTo(a,s),v.lineTo(i,o),v.lineTo(l,u),v.closePath(),v.stroke()})),v.restore()),v.canvas}},70416:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(41089),i=r(76358),o=r(2115),a=r(57223),s=r(52188),l=r(50578),u=r(7697),c=r(88199),f=r(36181),h=r(34586);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(v,e);var t,r,p,_=g(v);function v(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=_.call(this,{tileCoord:e.tileCoord,loader:function(){return Promise.resolve(new Uint8Array(4))},interpolate:e.interpolate,transition:e.transition})).pixelRatio_=e.pixelRatio,t.gutter_=e.gutter,t.reprojData_=null,t.reprojError_=null,t.reprojSize_=void 0,t.sourceTileGrid_=e.sourceTileGrid,t.targetTileGrid_=e.targetTileGrid,t.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,t.sourceTiles_=[],t.sourcesListenerKeys_=null,t.sourceZ_=0;var r=t.targetTileGrid_.getTileCoordExtent(t.wrappedTileCoord_),i=t.targetTileGrid_.getExtent(),o=t.sourceTileGrid_.getExtent(),c=i?(0,f.Ed)(r,i):r;if(0===(0,f.bg)(c))return t.state=a.Z.EMPTY,m(t);var h=e.sourceProj,p=h.getExtent();p&&(o=o?(0,f.Ed)(o,p):p);var d=t.targetTileGrid_.getResolution(t.wrappedTileCoord_[0]),y=e.targetProj,g=(0,l.Co)(h,y,c,d);if(!isFinite(g)||g<=0)return t.state=a.Z.EMPTY,m(t);var A=void 0!==e.errorThreshold?e.errorThreshold:n.m;if(t.triangulation_=new s.Z(h,y,c,o,g*A,d),0===t.triangulation_.getTriangles().length)return t.state=a.Z.EMPTY,m(t);t.sourceZ_=t.sourceTileGrid_.getZForResolution(g);var b=t.triangulation_.calculateSourceExtent();if(o&&(h.canWrapX()?(b[1]=(0,u.uZ)(b[1],o[1],o[3]),b[3]=(0,u.uZ)(b[3],o[1],o[3])):b=(0,f.Ed)(b,o)),(0,f.bg)(b)){for(var w=t.sourceTileGrid_.getTileRangeForExtentAndZ(b,t.sourceZ_),E=e.getTileFunction,x=w.minX;x<=w.maxX;x++)for(var I=w.minY;I<=w.maxY;I++){var S=E(t.sourceZ_,x,I,t.pixelRatio_);S&&t.sourceTiles_.push(S)}0===t.sourceTiles_.length&&(t.state=a.Z.EMPTY)}else t.state=a.Z.EMPTY;return t}return t=v,(r=[{key:"getSize",value:function(){return this.reprojSize_}},{key:"getData",value:function(){return this.reprojData_}},{key:"getError",value:function(){return this.reprojError_}},{key:"reproject_",value:function(){var e=this,t=[];if(this.sourceTiles_.forEach((function(r){if(r&&r.getState()===a.Z.LOADED){var n,o=r.getSize(),s=e.gutter_,l=(0,i.px)(r.getData());n=l||(0,i.qo)((0,i.G0)(r.getData()));var u=[o[0]+2*s,o[1]+2*s],c=n instanceof Float32Array,f=u[0]*u[1],h=c?Float32Array:Uint8Array,p=new h(n.buffer),d=h.BYTES_PER_ELEMENT,y=d*p.length/f,g=p.byteLength/u[1],m=Math.floor(g/d/u[0]),_=f*m,v=p;if(p.length!==_){v=new h(_);for(var A=0,b=0,w=u[0]*m,E=0;E<u[1];++E){for(var x=0;x<w;++x)v[A++]=p[b+x];b+=g/d}}t.push({extent:e.sourceTileGrid_.getTileCoordExtent(r.tileCoord),data:new Uint8Array(v.buffer),dataType:h,bytesPerPixel:y,pixelSize:u})}})),this.sourceTiles_.length=0,0===t.length)this.state=a.Z.ERROR;else{for(var r,n,o=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(o),u="number"==typeof s?s:s[0],f="number"==typeof s?s:s[1],h=this.targetTileGrid_.getResolution(o),p=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),y=t[0].bytesPerPixel,g=Math.ceil(y/3)-1;g>=0;--g){for(var m=[],_=0,v=t.length;_<v;++_){for(var A=t[_],b=A.data,w=A.pixelSize,E=w[0],x=w[1],I=(0,c.E4)(E,x,l.rX),S=I.createImageData(E,x),C=S.data,P=3*g,O=0,T=C.length;O<T;O+=4)C[O]=b[P],C[O+1]=b[P+1],C[O+2]=b[P+2],C[O+3]=255,P+=y;I.putImageData(S,0,0),m.push({extent:A.extent,image:I.canvas})}for(var M=(0,l.sY)(u,f,this.pixelRatio_,p,this.sourceTileGrid_.getExtent(),h,d,this.triangulation_,m,this.gutter_,!1,!1),k=0,R=m.length;k<R;++k){var B=m[k].image.getContext("2d");(0,c.jy)(B),l.rX.push(B.canvas)}var L=M.getContext("2d"),D=L.getImageData(0,0,M.width,M.height);(0,c.jy)(L),l.rX.push(M),r||(n=new Uint8Array(y*D.width*D.height),r=new t[0].dataType(n.buffer));for(var j=D.data,F=3*g,N=0,Z=j.length;N<Z;N+=4)255===j[N+3]?(n[F]=j[N],n[F+1]=j[N+1],n[F+2]=j[N+2]):(n[F]=0,n[F+1]=0,n[F+2]=0),F+=y}this.reprojData_=r,this.reprojSize_=[Math.round(u*this.pixelRatio_),Math.round(f*this.pixelRatio_)],this.state=a.Z.LOADED}this.changed()}},{key:"load",value:function(){var e=this;if(this.state===a.Z.IDLE||this.state===a.Z.ERROR){this.state=a.Z.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((function(r){var n=r.getState();if(n===a.Z.IDLE||n===a.Z.LOADING){t++;var i=(0,h.oL)(r,o.Z.CHANGE,(function(){var e=r.getState();e!=a.Z.LOADED&&e!=a.Z.ERROR&&e!=a.Z.EMPTY||((0,h.bN)(i),0==--t&&(this.unlistenSources_(),this.reproject_()))}),e);e.sourcesListenerKeys_.push(i)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(e){e.getState()==a.Z.IDLE&&e.load()}))}}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(h.bN),this.sourcesListenerKeys_=null}}])&&d(t.prototype,r),p&&d(t,p),Object.defineProperty(t,"prototype",{writable:!1}),v}(i.ZP)},22965:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(41089),i=r(2115),o=r(77118),a=r(57223),s=r(52188),l=r(50578),u=r(7697),c=r(36181),f=r(34586),h=r(88199);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},y.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}const A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(A,e);var t,r,o,p=m(A);function A(e,t,r,i,o,f,h,d,y,g,m,v){var b;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),(b=p.call(this,o,a.Z.IDLE,{interpolate:!!v})).renderEdges_=void 0!==m&&m,b.pixelRatio_=h,b.gutter_=d,b.canvas_=null,b.sourceTileGrid_=t,b.targetTileGrid_=i,b.wrappedTileCoord_=f||o,b.sourceTiles_=[],b.sourcesListenerKeys_=null,b.sourceZ_=0;var w=i.getTileCoordExtent(b.wrappedTileCoord_),E=b.targetTileGrid_.getExtent(),x=b.sourceTileGrid_.getExtent(),I=E?(0,c.Ed)(w,E):w;if(0===(0,c.bg)(I))return b.state=a.Z.EMPTY,_(b);var S=e.getExtent();S&&(x=x?(0,c.Ed)(x,S):S);var C=i.getResolution(b.wrappedTileCoord_[0]),P=(0,l.Co)(e,r,I,C);if(!isFinite(P)||P<=0)return b.state=a.Z.EMPTY,_(b);var O=void 0!==g?g:n.m;if(b.triangulation_=new s.Z(e,r,I,x,P*O,C),0===b.triangulation_.getTriangles().length)return b.state=a.Z.EMPTY,_(b);b.sourceZ_=t.getZForResolution(P);var T=b.triangulation_.calculateSourceExtent();if(x&&(e.canWrapX()?(T[1]=(0,u.uZ)(T[1],x[1],x[3]),T[3]=(0,u.uZ)(T[3],x[1],x[3])):T=(0,c.Ed)(T,x)),(0,c.bg)(T)){for(var M=t.getTileRangeForExtentAndZ(T,b.sourceZ_),k=M.minX;k<=M.maxX;k++)for(var R=M.minY;R<=M.maxY;R++){var B=y(b.sourceZ_,k,R,h);B&&b.sourceTiles_.push(B)}0===b.sourceTiles_.length&&(b.state=a.Z.EMPTY)}else b.state=a.Z.EMPTY;return b}return t=A,(r=[{key:"getImage",value:function(){return this.canvas_}},{key:"reproject_",value:function(){var e=this,t=[];if(this.sourceTiles_.forEach((function(r){r&&r.getState()==a.Z.LOADED&&t.push({extent:e.sourceTileGrid_.getTileCoordExtent(r.tileCoord),image:r.getImage()})})),this.sourceTiles_.length=0,0===t.length)this.state=a.Z.ERROR;else{var r=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(r),i="number"==typeof n?n:n[0],o="number"==typeof n?n:n[1],s=this.targetTileGrid_.getResolution(r),u=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,l.sY)(i,o,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),s,c,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=a.Z.LOADED}this.changed()}},{key:"load",value:function(){var e=this;if(this.state==a.Z.IDLE){this.state=a.Z.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((function(r){var n=r.getState();if(n==a.Z.IDLE||n==a.Z.LOADING){t++;var o=(0,f.oL)(r,i.Z.CHANGE,(function(e){var n=r.getState();n!=a.Z.LOADED&&n!=a.Z.ERROR&&n!=a.Z.EMPTY||((0,f.bN)(o),0==--t&&(this.unlistenSources_(),this.reproject_()))}),e);e.sourcesListenerKeys_.push(o)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(e,t,r){e.getState()==a.Z.IDLE&&e.load()}))}}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(f.bN),this.sourcesListenerKeys_=null}},{key:"release",value:function(){this.canvas_&&((0,h.jy)(this.canvas_.getContext("2d")),l.rX.push(this.canvas_),this.canvas_=null),y(v(A.prototype),"release",this).call(this)}}])&&d(t.prototype,r),o&&d(t,o),Object.defineProperty(t,"prototype",{writable:!1}),A}(o.Z)},52188:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(36181),i=r(27811),o=r(7697);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}const l=function(){function e(t,r,o,a,s,l){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceProj_=t,this.targetProj_=r;var c={},f=(0,i.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(e){var t=e[0]+"/"+e[1];return c[t]||(c[t]=f(e)),c[t]},this.maxSourceExtent_=a,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!a&&!!this.sourceProj_.getExtent()&&(0,n.dz)(a)>=(0,n.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,n.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,n.dz)(this.targetProj_.getExtent()):null;var h=(0,n.rL)(o),p=(0,n.Xv)(o),d=(0,n.w$)(o),y=(0,n.hC)(o),g=this.transformInv_(h),m=this.transformInv_(p),_=this.transformInv_(d),v=this.transformInv_(y),A=10+(l?Math.max(0,Math.ceil(Math.log2((0,n.bg)(o)/(l*l*256*256)))):0);if(this.addQuad_(h,p,d,y,g,m,_,v,A),this.wrapsXInSource_){var b=1/0;this.triangles_.forEach((function(e,t,r){b=Math.min(b,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-b>u.sourceWorldWidth_/2){var t=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];t[0][0]-b>u.sourceWorldWidth_/2&&(t[0][0]-=u.sourceWorldWidth_),t[1][0]-b>u.sourceWorldWidth_/2&&(t[1][0]-=u.sourceWorldWidth_),t[2][0]-b>u.sourceWorldWidth_/2&&(t[2][0]-=u.sourceWorldWidth_);var r=Math.min(t[0][0],t[1][0],t[2][0]);Math.max(t[0][0],t[1][0],t[2][0])-r<u.sourceWorldWidth_/2&&(e.source=t)}}))}c={}}var t,r,a;return t=e,(r=[{key:"addTriangle_",value:function(e,t,r,n,i,o){this.triangles_.push({source:[n,i,o],target:[e,t,r]})}},{key:"addQuad_",value:function(e,t,r,i,a,s,l,u,c){var f=(0,n.hI)([a,s,l,u]),h=this.sourceWorldWidth_?(0,n.dz)(f)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&h>.5&&h<1,y=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var g=(0,n.hI)([e,t,r,i]);y=(0,n.dz)(g)/this.targetWorldWidth_>.25||y}!d&&this.sourceProj_.isGlobal()&&h&&(y=h>.25||y)}if(!(!y&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3]))||(0,n.kK)(f,this.maxSourceExtent_)){var m=0;if(!(y||isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1])))if(c>0)y=!0;else if(1!=(m=(isFinite(a[0])&&isFinite(a[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1))&&2!=m&&4!=m&&8!=m)return;if(c>0){if(!y){var _,v=[(e[0]+r[0])/2,(e[1]+r[1])/2],A=this.transformInv_(v);_=d?((0,o.$W)(a[0],p)+(0,o.$W)(l[0],p))/2-(0,o.$W)(A[0],p):(a[0]+l[0])/2-A[0];var b=(a[1]+l[1])/2-A[1];y=_*_+b*b>this.errorThresholdSquared_}if(y){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){var w=[(t[0]+r[0])/2,(t[1]+r[1])/2],E=this.transformInv_(w),x=[(i[0]+e[0])/2,(i[1]+e[1])/2],I=this.transformInv_(x);this.addQuad_(e,t,w,x,a,s,E,I,c-1),this.addQuad_(x,w,r,i,I,E,l,u,c-1)}else{var S=[(e[0]+t[0])/2,(e[1]+t[1])/2],C=this.transformInv_(S),P=[(r[0]+i[0])/2,(r[1]+i[1])/2],O=this.transformInv_(P);this.addQuad_(e,S,P,i,a,C,O,u,c-1),this.addQuad_(S,t,r,P,C,s,l,O,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&m||this.addTriangle_(e,r,i,a,l,u),14&m||this.addTriangle_(e,r,t,a,l,s),m&&(13&m||this.addTriangle_(t,i,e,s,u,a),7&m||this.addTriangle_(t,i,r,s,u,l))}}},{key:"calculateSourceExtent",value:function(){var e=(0,n.lJ)();return this.triangles_.forEach((function(t,r,i){var o=t.source;(0,n.Wj)(e,o[0]),(0,n.Wj)(e,o[1]),(0,n.Wj)(e,o[2])})),e}},{key:"getTriangles",value:function(){return this.triangles_}}])&&s(t.prototype,r),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},41089:(e,t,r)=>{"use strict";r.d(t,{m:()=>n});var n=.5},46009:(e,t,r)=>{"use strict";function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){return Array.isArray(e)?Math.min.apply(Math,n(e)):e}r.d(t,{D:()=>o})},64495:(e,t,r)=>{"use strict";r.d(t,{Gw:()=>s,YP:()=>o,gE:()=>a,h$:()=>i});var n=r(7697);function i(e){if(void 0!==e)return 0}function o(e){if(void 0!==e)return e}function a(e){var t=2*Math.PI/e;return function(e,r){return r?e:void 0!==e?e=Math.floor(e/t+.5)*t:void 0}}function s(e){return e=e||(0,n.Yr)(5),function(t,r){return r?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}}},59468:(e,t,r)=>{"use strict";function n(e){return e[0]>0&&e[1]>0}function i(e,t,r){return void 0===r&&(r=[0,0]),r[0]=e[0]*t+.5|0,r[1]=e[1]*t+.5|0,r}function o(e,t){return Array.isArray(e)?e:(void 0===t?t=[e,e]:(t[0]=e,t[1]=e),t)}r.d(t,{Pq:()=>o,bA:()=>i,py:()=>n})},82992:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var n=r(2115),i=r(44993),o=r(61900),a=r(24615),s=r(36707),l=r(97972),u=r(36181),c=r(20594);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===f(o)?o:String(o)),n)}var i,o}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},p.apply(this,arguments)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var i=m(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,r)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}const _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(_,e);var t,r,a,f=y(_);function _(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(t=f.call(this,{attributions:e.attributions,wrapX:e.wrapX})).resolution=void 0,t.distance=void 0!==e.distance?e.distance:20,t.minDistance=e.minDistance||0,t.interpolationRatio=0,t.features=[],t.geometryFunction=e.geometryFunction||function(e){var t=e.getGeometry();return(0,l.h)(!t||"Point"===t.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),t},t.createCustomCluster_=e.createCluster,t.source=null,t.boundRefresh_=t.refresh.bind(g(t)),t.updateDistance(t.distance,t.minDistance),t.setSource(e.source||null),t}return t=_,(r=[{key:"clear",value:function(e){this.features.length=0,p(m(_.prototype),"clear",this).call(this,e)}},{key:"getDistance",value:function(){return this.distance}},{key:"getSource",value:function(){return this.source}},{key:"loadFeatures",value:function(e,t,r){this.source.loadFeatures(e,t,r),t!==this.resolution&&(this.resolution=t,this.refresh())}},{key:"setDistance",value:function(e){this.updateDistance(e,this.minDistance)}},{key:"setMinDistance",value:function(e){this.updateDistance(this.distance,e)}},{key:"getMinDistance",value:function(){return this.minDistance}},{key:"setSource",value:function(e){this.source&&this.source.removeEventListener(n.Z.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(n.Z.CHANGE,this.boundRefresh_),this.refresh()}},{key:"refresh",value:function(){this.clear(),this.cluster(),this.addFeatures(this.features)}},{key:"updateDistance",value:function(e,t){var r=0===e?0:Math.min(t,e)/e,n=e!==this.distance||this.interpolationRatio!==r;this.distance=e,this.minDistance=t,this.interpolationRatio=r,n&&this.refresh()}},{key:"cluster",value:function(){if(void 0!==this.resolution&&this.source)for(var e=(0,u.lJ)(),t=this.distance*this.resolution,r=this.source.getFeatures(),n={},i=0,o=r.length;i<o;i++){var a=r[i];if(!((0,c.sq)(a)in n)){var s=this.geometryFunction(a);if(s){var l=s.getCoordinates();(0,u.HK)(l,e),(0,u.f3)(e,t,e);var f=this.source.getFeaturesInExtent(e).filter((function(e){var t=(0,c.sq)(e);return!(t in n)&&(n[t]=!0,!0)}));this.features.push(this.createCluster(f,e))}}}}},{key:"createCluster",value:function(e,t){for(var r=[0,0],n=e.length-1;n>=0;--n){var a=this.geometryFunction(e[n]);a?(0,s.IH)(r,a.getCoordinates()):e.splice(n,1)}(0,s.bA)(r,1/e.length);var l=(0,u.qg)(t),c=this.interpolationRatio,f=new o.Z([r[0]*(1-c)+l[0]*c,r[1]*(1-c)+l[1]*c]);return this.createCustomCluster_?this.createCustomCluster_(f,e):new i.Z({geometry:f,features:e})}}])&&h(t.prototype,r),a&&h(t,a),Object.defineProperty(t,"prototype",{writable:!1}),_}(a.Z)},43324:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(76358),i=r(2115),o=r(70416),a=r(14666),s=r(82493),l=r(51505),u=r(57223),c=r(25096),f=r(27811),h=r(62718),p=r(20594),d=r(73826),y=r(59468);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===g(o)?o:String(o)),n)}var i,o}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},_.apply(this,arguments)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(this,r)}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}const E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(x,e);var t,r,g,E=A(x);function x(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x);var r=void 0===e.projection?"EPSG:3857":e.projection,n=e.tileGrid;return void 0===n&&r&&(n=(0,c.dl)({extent:(0,c.Tl)(r),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),(t=E.call(this,{cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:r,tileGrid:n,opaque:e.opaque,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate})).gutter_=void 0!==e.gutter?e.gutter:0,t.tileSize_=e.tileSize?(0,y.Pq)(e.tileSize):null,t.tileSizes_=null,t.tileLoadingKeys_={},t.loader_=e.loader,t.handleTileChange_=t.handleTileChange_.bind(b(t)),t.bandCount=void 0===e.bandCount?4:e.bandCount,t.tileGridForProjection_={},t.tileCacheForProjection_={},t}return t=x,(r=[{key:"setTileSizes",value:function(e){this.tileSizes_=e}},{key:"getTileSize",value:function(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;var t=this.getTileGrid();return t?(0,y.Pq)(t.getTileSize(e)):[256,256]}},{key:"getGutterForProjection",value:function(e){var t=this.getProjection();return!t||(0,f.OP)(t,e)?this.gutter_:0}},{key:"setLoader",value:function(e){this.loader_=e}},{key:"getReprojTile_",value:function(e,t,r,n,i){var a=this,s=this.getTileCacheForProjection(n),l=(0,h.lg)(e,t,r);if(s.containsKey(l)){var u=s.get(l);if(u&&u.key==this.getKey())return u}var c=this.getTileGrid(),f=Math.max.apply(null,c.getResolutions().map((function(e,t){var r=(0,y.Pq)(c.getTileSize(t)),n=a.getTileSize(t);return Math.max(n[0]/r[0],n[1]/r[1])}))),p=this.getTileGridForProjection(i),d=this.getTileGridForProjection(n),g=[e,t,r],m=this.getTileCoordForTileUrlFunction(g,n),_=Object.assign({sourceProj:i,sourceTileGrid:p,targetProj:n,targetTileGrid:d,tileCoord:g,wrappedTileCoord:m,pixelRatio:f,gutter:this.getGutterForProjection(i),getTileFunction:function(e,t,r,n){return a.getTile(e,t,r,n,i)}},this.tileOptions),v=new o.Z(_);return v.key=this.getKey(),v}},{key:"getTile",value:function(e,t,r,o,a){var s=this.getProjection();if(s&&a&&!(0,f.OP)(s,a))return this.getReprojTile_(e,t,r,a,s);var l=this.getTileSize(e),u=(0,h.lg)(e,t,r);if(this.tileCache.containsKey(u))return this.tileCache.get(u);var c=this.loader_,p=Object.assign({tileCoord:[e,t,r],loader:function(){return(0,d.Vi)((function(){return c(e,t,r)}))},size:l},this.tileOptions),y=new n.ZP(p);return y.key=this.getKey(),y.addEventListener(i.Z.CHANGE,this.handleTileChange_),this.tileCache.set(u,y),y}},{key:"handleTileChange_",value:function(e){var t,r=e.target,n=(0,p.sq)(r),i=r.getState();i==u.Z.LOADING?(this.tileLoadingKeys_[n]=!0,t=s.Z.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],t=i==u.Z.ERROR?s.Z.TILELOADERROR:i==u.Z.LOADED?s.Z.TILELOADEND:void 0),t&&this.dispatchEvent(new l.s(t,r))}},{key:"getTileGridForProjection",value:function(e){var t=this.getProjection();if(this.tileGrid&&(!t||(0,f.OP)(t,e)))return this.tileGrid;var r=(0,p.sq)(e);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=(0,c.X$)(e)),this.tileGridForProjection_[r]}},{key:"setTileGridForProjection",value:function(e,t){var r=(0,f.U2)(e);if(r){var n=(0,p.sq)(r);n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=t)}}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();if(!t||(0,f.OP)(t,e))return this.tileCache;var r=(0,p.sq)(e);return r in this.tileCacheForProjection_||(this.tileCacheForProjection_[r]=new a.Z(.1)),this.tileCacheForProjection_[r]}},{key:"expireCache",value:function(e,t){var r=this.getTileCacheForProjection(e);for(var n in this.tileCache.expireCache(this.tileCache==r?t:{}),this.tileCacheForProjection_){var i=this.tileCacheForProjection_[n];i.expireCache(i==r?t:{})}}},{key:"clear",value:function(){for(var e in _(w(x.prototype),"clear",this).call(this),this.tileCacheForProjection_)this.tileCacheForProjection_[e].clear()}}])&&m(t.prototype,r),g&&m(t,g),Object.defineProperty(t,"prototype",{writable:!1}),x}(l.Z)},45091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Zt});var n=r(43324),i=r(36839),o=r(82499);const a=new Map;function s(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>a.set(e,t)))}async function l(e){const t=a.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);return new(await t())(e)}s([void 0,1],(()=>Promise.resolve().then(r.bind(r,83321)).then((e=>e.default)))),s(5,(()=>Promise.resolve().then(r.bind(r,8672)).then((e=>e.default)))),s(6,(()=>{throw new Error("old style JPEG compression is not supported.")})),s(7,(()=>Promise.resolve().then(r.bind(r,39347)).then((e=>e.default)))),s([8,32946],(()=>Promise.resolve().then(r.bind(r,65522)).then((e=>e.default)))),s(32773,(()=>Promise.resolve().then(r.bind(r,17411)).then((e=>e.default)))),s(34887,(()=>Promise.resolve().then(r.bind(r,41293)).then((async e=>(await e.zstd.init(),e))).then((e=>e.default)))),s(50001,(()=>Promise.resolve().then(r.bind(r,51588)).then((e=>e.default))));const u="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2;const c=class{constructor(e=u,t){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=t?Promise.resolve(t):new Promise((e=>{Promise.resolve().then(r.bind(r,25294)).then((t=>{e(t.create)}))})),this._awaitingDecoder.then((t=>{this._awaitingDecoder=null,this.workers=[];for(let r=0;r<e;r++)this.workers.push({worker:t(),idle:!0})})))}async decode(e,t){return this._awaitingDecoder&&await this._awaitingDecoder,0===this.size?l(e).then((r=>r.decode(e,t))):new Promise((r=>{const n=this.workers.find((e=>e.idle))||this.workers[Math.floor(Math.random()*this.size)];n.idle=!1;const i=this.messageId++,o=e=>{e.data.id===i&&(n.idle=!0,r(e.data.decoded),n.worker.removeEventListener("message",o))};n.worker.addEventListener("message",o),n.worker.postMessage({fileDirectory:e,buffer:t,id:i},[t])}))}destroy(){this.workers&&(this.workers.forEach((e=>{e.worker.terminate()})),this.workers=null)}};function f(e){return(t,...r)=>p(e,t,r)}function h(e,t){return f(m(e,t).get)}const{apply:p,construct:d,defineProperty:y,get:g,getOwnPropertyDescriptor:m,getPrototypeOf:_,has:v,ownKeys:A,set:b,setPrototypeOf:w}=Reflect,{EPSILON:E,MAX_SAFE_INTEGER:x,isFinite:I,isNaN:S}=Number,{iterator:C,species:P,toStringTag:O,for:T}=Symbol,M=Object,{create:k,defineProperty:R,freeze:B,is:L}=M,D=M.prototype,j=(D.__lookupGetter__&&f(D.__lookupGetter__),M.hasOwn||f(D.hasOwnProperty)),F=Array,N=(F.isArray,F.prototype),Z=(f(N.join),f(N.push),f(N.toLocaleString),N[C]),U=f(Z),{abs:Q,trunc:G}=Math,z=ArrayBuffer,q=(z.isView,z.prototype),V=(f(q.slice),h(q,"byteLength"),"undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null),W=(V&&h(V.prototype,"byteLength"),_(Uint8Array)),K=(W.from,W.prototype),H=(K[C],f(K.keys),f(K.values),f(K.entries),f(K.set),f(K.reverse),f(K.fill),f(K.copyWithin),f(K.sort),f(K.slice),f(K.subarray),h(K,"buffer"),h(K,"byteOffset"),h(K,"length"),h(K,O),Uint8Array),Y=Uint16Array,X=Uint32Array,J=Float32Array,$=_([][C]()),ee=f($.next),te=f(function*(){}().next),re=_($),ne=DataView.prototype,ie=f(ne.getUint16),oe=(f(ne.setUint16),TypeError),ae=WeakSet.prototype,se=(f(ae.add),f(ae.has),WeakMap),le=se.prototype,ue=f(le.get),ce=(f(le.has),f(le.set)),fe=new se,he=k(null,{next:{value:function(){const e=ue(fe,this);return ee(e)}},[C]:{value:function(){return this}}});const pe=new se,de=k(re,{next:{value:function(){const e=ue(pe,this);return te(e)},writable:!0,configurable:!0}});for(const e of A($))"next"!==e&&R(de,e,m($,e));const ye=new z(4),ge=new J(ye),me=new X(ye),_e=new Y(512),ve=new H(512);for(let e=0;e<256;++e){const t=e-127;t<-24?(_e[e]=0,_e[256|e]=32768,ve[e]=24,ve[256|e]=24):t<-14?(_e[e]=1024>>-t-14,_e[256|e]=1024>>-t-14|32768,ve[e]=-t-1,ve[256|e]=-t-1):t<=15?(_e[e]=t+15<<10,_e[256|e]=t+15<<10|32768,ve[e]=13,ve[256|e]=13):t<128?(_e[e]=31744,_e[256|e]=64512,ve[e]=24,ve[256|e]=24):(_e[e]=31744,_e[256|e]=64512,ve[e]=13,ve[256|e]=13)}const Ae=new X(2048);for(let e=1;e<1024;++e){let t=e<<13,r=0;for(;!(8388608&t);)t<<=1,r-=8388608;t&=-8388609,r+=947912704,Ae[e]=t|r}for(let e=1024;e<2048;++e)Ae[e]=939524096+(e-1024<<13);const be=new X(64);for(let e=1;e<31;++e)be[e]=e<<23;be[31]=1199570944,be[32]=2147483648;for(let e=33;e<63;++e)be[e]=2147483648+(e-32<<23);be[63]=3347054592;const we=new Y(64);for(let e=1;e<64;++e)32!==e&&(we[e]=1024);function Ee(e,t,...r){return function(e){const t=e>>10;return me[0]=Ae[we[t]+(1023&e)]+be[t],ge[0]}(ie(e,t,...function(e){if(e[C]===Z&&$.next===ee)return e;const t=k(he);return ce(fe,t,U(e)),t}(r)))}var xe=r(88330),Ie=r(18602);function Se(e,t,r,n=1){return new(Object.getPrototypeOf(e).constructor)(t*r*n)}function Ce(e,t,r){return(1-r)*e+r*t}function Pe(e,t,r,n,i,o="nearest"){switch(o.toLowerCase()){case"nearest":return function(e,t,r,n,i){const o=t/n,a=r/i;return e.map((e=>{const s=Se(e,n,i);for(let l=0;l<i;++l){const i=Math.min(Math.round(a*l),r-1);for(let r=0;r<n;++r){const a=Math.min(Math.round(o*r),t-1),u=e[i*t+a];s[l*n+r]=u}}return s}))}(e,t,r,n,i);case"bilinear":case"linear":return function(e,t,r,n,i){const o=t/n,a=r/i;return e.map((e=>{const s=Se(e,n,i);for(let l=0;l<i;++l){const i=a*l,u=Math.floor(i),c=Math.min(Math.ceil(i),r-1);for(let r=0;r<n;++r){const a=o*r,f=a%1,h=Math.floor(a),p=Math.min(Math.ceil(a),t-1),d=e[u*t+h],y=e[u*t+p],g=e[c*t+h],m=e[c*t+p],_=Ce(Ce(d,y,f),Ce(g,m,f),i%1);s[l*n+r]=_}}return s}))}(e,t,r,n,i);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function Oe(e,t,r,n,i,o,a="nearest"){switch(a.toLowerCase()){case"nearest":return function(e,t,r,n,i,o){const a=t/n,s=r/i,l=Se(e,n,i,o);for(let u=0;u<i;++u){const i=Math.min(Math.round(s*u),r-1);for(let r=0;r<n;++r){const s=Math.min(Math.round(a*r),t-1);for(let a=0;a<o;++a){const c=e[i*t*o+s*o+a];l[u*n*o+r*o+a]=c}}}return l}(e,t,r,n,i,o);case"bilinear":case"linear":return function(e,t,r,n,i,o){const a=t/n,s=r/i,l=Se(e,n,i,o);for(let u=0;u<i;++u){const i=s*u,c=Math.floor(i),f=Math.min(Math.ceil(i),r-1);for(let r=0;r<n;++r){const s=a*r,h=s%1,p=Math.floor(s),d=Math.min(Math.ceil(s),t-1);for(let a=0;a<o;++a){const s=e[c*t*o+p*o+a],y=e[c*t*o+d*o+a],g=e[f*t*o+p*o+a],m=e[f*t*o+d*o+a],_=Ce(Ce(s,y,h),Ce(g,m,h),i%1);l[u*n*o+r*o+a]=_}}}return l}(e,t,r,n,i,o);default:throw new Error(`Unsupported resampling method: '${a}'`)}}function Te(e,t,r){let n=0;for(let i=t;i<r;++i)n+=e[i];return n}function Me(e,t,r){switch(e){case 1:if(t<=8)return new Uint8Array(r);if(t<=16)return new Uint16Array(r);if(t<=32)return new Uint32Array(r);break;case 2:if(8===t)return new Int8Array(r);if(16===t)return new Int16Array(r);if(32===t)return new Int32Array(r);break;case 3:switch(t){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}const ke=class{constructor(e,t,r,n,i,o){this.fileDirectory=e,this.geoKeys=t,this.dataView=r,this.littleEndian=n,this.tiles=i?{}:null,this.isTiled=!e.StripOffsets;const a=e.PlanarConfiguration;if(this.planarConfiguration=void 0===a?1:a,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(e,t){return Ee(this,e,t)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){return Me(this.getSampleFormat(e),this.getBitsPerSample(e),t)}async getTileOrStrip(e,t,r,n,i){const o=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight());let s;const{tiles:l}=this;let u,c;1===this.planarConfiguration?s=t*o+e:2===this.planarConfiguration&&(s=r*o*a+t*o+e),this.isTiled?(u=this.fileDirectory.TileOffsets[s],c=this.fileDirectory.TileByteCounts[s]):(u=this.fileDirectory.StripOffsets[s],c=this.fileDirectory.StripByteCounts[s]);const f=(await this.source.fetch([{offset:u,length:c}],i))[0];let h;return null!==l&&l[s]?h=l[s]:(h=(async()=>{let e=await n.decode(this.fileDirectory,f);const r=this.getSampleFormat(),i=this.getBitsPerSample();return function(e,t){return(1!==e&&2!==e||!(t<=32)||t%8!=0)&&(3!==e||16!==t&&32!==t&&64!==t)}(r,i)&&(e=function(e,t,r,n,i,o,a){const s=new DataView(e),l=2===r?1:n,u=Me(t,i,2===r?a*o:a*o*n),c=parseInt("1".repeat(i),2);if(1===t){let e;e=1===r?n*i:i;let t=o*e;7&t&&(t=t+7&-8);for(let e=0;e<a;++e){const r=e*t;for(let t=0;t<o;++t){const n=r+t*l*i;for(let r=0;r<l;++r){const a=n+r*i,f=(e*o+t)*l+r,h=Math.floor(a/8),p=a%8;if(p+i<=8)u[f]=s.getUint8(h)>>8-i-p&c;else if(p+i<=16)u[f]=s.getUint16(h)>>16-i-p&c;else if(p+i<=24){const e=s.getUint16(h)<<8|s.getUint8(h+2);u[f]=e>>24-i-p&c}else u[f]=s.getUint32(h)>>32-i-p&c}}}}return u.buffer}(e,r,this.planarConfiguration,this.getSamplesPerPixel(),i,this.getTileWidth(),this.getBlockHeight(t))),e})(),null!==l&&(l[s]=h)),{x:e,y:t,sample:r,data:await h}}async _readRaster(e,t,r,n,i,o,a,s,l){const u=this.getTileWidth(),c=this.getTileHeight(),f=this.getWidth(),h=this.getHeight(),p=Math.max(Math.floor(e[0]/u),0),d=Math.min(Math.ceil(e[2]/u),Math.ceil(f/u)),y=Math.max(Math.floor(e[1]/c),0),g=Math.min(Math.ceil(e[3]/c),Math.ceil(h/c)),m=e[2]-e[0];let _=this.getBytesPerPixel();const v=[],A=[];for(let e=0;e<t.length;++e)1===this.planarConfiguration?v.push(Te(this.fileDirectory.BitsPerSample,0,t[e])/8):v.push(0),A.push(this.getReaderForSample(t[e]));const b=[],{littleEndian:w}=this;for(let o=y;o<g;++o)for(let a=p;a<d;++a){let s;1===this.planarConfiguration&&(s=this.getTileOrStrip(a,o,0,i,l));for(let p=0;p<t.length;++p){const d=p,y=t[p];2===this.planarConfiguration&&(_=this.getSampleByteSize(y),s=this.getTileOrStrip(a,o,y,i,l));const g=s.then((i=>{const o=i.data,a=new DataView(o),s=this.getBlockHeight(i.y),l=i.y*c,p=i.x*u,y=l+s,g=(i.x+1)*u,b=A[d],E=Math.min(s,s-(y-e[3]),h-l),x=Math.min(u,u-(g-e[2]),f-p);for(let i=Math.max(0,e[1]-l);i<E;++i)for(let o=Math.max(0,e[0]-p);o<x;++o){const s=(i*u+o)*_,c=b.call(a,s+v[d],w);let f;n?(f=(i+l-e[1])*m*t.length+(o+p-e[0])*t.length+d,r[f]=c):(f=(i+l-e[1])*m+o+p-e[0],r[d][f]=c)}}));b.push(g)}}if(await Promise.all(b),o&&e[2]-e[0]!==o||a&&e[3]-e[1]!==a){let i;return i=n?Oe(r,e[2]-e[0],e[3]-e[1],o,a,t.length,s):Pe(r,e[2]-e[0],e[3]-e[1],o,a,s),i.width=o,i.height=a,i}return r.width=o||e[2]-e[0],r.height=a||e[3]-e[1],r}async readRasters({window:e,samples:t=[],interleave:r,pool:n=null,width:i,height:o,resampleMethod:a,fillValue:s,signal:u}={}){const c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const f=(c[2]-c[0])*(c[3]-c[1]),h=this.getSamplesPerPixel();if(t&&t.length){for(let e=0;e<t.length;++e)if(t[e]>=h)return Promise.reject(new RangeError(`Invalid sample index '${t[e]}'.`))}else for(let e=0;e<h;++e)t.push(e);let p;if(r){p=Me(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),f*t.length),s&&p.fill(s)}else{p=[];for(let e=0;e<t.length;++e){const r=this.getArrayForSample(t[e],f);Array.isArray(s)&&e<s.length?r.fill(s[e]):s&&!Array.isArray(s)&&r.fill(s),p.push(r)}}const d=n||await l(this.fileDirectory);return await this._readRaster(c,t,p,r,d,i,o,a,u)}async readRGB({window:e,interleave:t=!0,pool:r=null,width:n,height:i,resampleMethod:a,enableAlpha:s=!1,signal:l}={}){const u=e||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const c=this.fileDirectory.PhotometricInterpretation;if(c===o.Ie.RGB){let u=[0,1,2];if(this.fileDirectory.ExtraSamples!==o.pd.Unspecified&&s){u=[];for(let e=0;e<this.fileDirectory.BitsPerSample.length;e+=1)u.push(e)}return this.readRasters({window:e,interleave:t,samples:u,pool:r,width:n,height:i,resampleMethod:a,signal:l})}let f;switch(c){case o.Ie.WhiteIsZero:case o.Ie.BlackIsZero:case o.Ie.Palette:f=[0];break;case o.Ie.CMYK:f=[0,1,2,3];break;case o.Ie.YCbCr:case o.Ie.CIELab:f=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const h={window:u,interleave:!0,samples:f,pool:r,width:n,height:i,resampleMethod:a,signal:l},{fileDirectory:p}=this,d=await this.readRasters(h),y=2**this.fileDirectory.BitsPerSample[0];let g;switch(c){case o.Ie.WhiteIsZero:g=function(e,t){const{width:r,height:n}=e,i=new Uint8Array(r*n*3);let o;for(let r=0,n=0;r<e.length;++r,n+=3)o=256-e[r]/t*256,i[n]=o,i[n+1]=o,i[n+2]=o;return i}(d,y);break;case o.Ie.BlackIsZero:g=function(e,t){const{width:r,height:n}=e,i=new Uint8Array(r*n*3);let o;for(let r=0,n=0;r<e.length;++r,n+=3)o=e[r]/t*256,i[n]=o,i[n+1]=o,i[n+2]=o;return i}(d,y);break;case o.Ie.Palette:g=function(e,t){const{width:r,height:n}=e,i=new Uint8Array(r*n*3),o=t.length/3,a=t.length/3*2;for(let r=0,n=0;r<e.length;++r,n+=3){const s=e[r];i[n]=t[s]/65536*256,i[n+1]=t[s+o]/65536*256,i[n+2]=t[s+a]/65536*256}return i}(d,p.ColorMap);break;case o.Ie.CMYK:g=function(e){const{width:t,height:r}=e,n=new Uint8Array(t*r*3);for(let t=0,r=0;t<e.length;t+=4,r+=3){const i=e[t],o=e[t+1],a=e[t+2],s=e[t+3];n[r]=(255-i)/256*255*((255-s)/256),n[r+1]=(255-o)/256*255*((255-s)/256),n[r+2]=(255-a)/256*255*((255-s)/256)}return n}(d);break;case o.Ie.YCbCr:g=function(e){const{width:t,height:r}=e,n=new Uint8ClampedArray(t*r*3);for(let t=0,r=0;t<e.length;t+=3,r+=3){const i=e[t],o=e[t+1],a=e[t+2];n[r]=i+1.402*(a-128),n[r+1]=i-.34414*(o-128)-.71414*(a-128),n[r+2]=i+1.772*(o-128)}return n}(d);break;case o.Ie.CIELab:g=function(e){const{width:t,height:r}=e,n=new Uint8Array(t*r*3);for(let t=0,r=0;t<e.length;t+=3,r+=3){let i,o,a,s=(e[t+0]+16)/116,l=(e[t+1]<<24>>24)/500+s,u=s-(e[t+2]<<24>>24)/200;l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),s=1*(s*s*s>.008856?s*s*s:(s-16/116)/7.787),u=1.08883*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),i=3.2406*l+-1.5372*s+-.4986*u,o=-.9689*l+1.8758*s+.0415*u,a=.0557*l+-.204*s+1.057*u,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,n[r]=255*Math.max(0,Math.min(1,i)),n[r+1]=255*Math.max(0,Math.min(1,o)),n[r+2]=255*Math.max(0,Math.min(1,a))}return n}(d);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const e=new Uint8Array(g.length/3),t=new Uint8Array(g.length/3),r=new Uint8Array(g.length/3);for(let n=0,i=0;n<g.length;n+=3,++i)e[i]=g[n],t[i]=g[n+1],r[i]=g[n+2];g=[e,t,r]}return g.width=d.width,g.height=d.height,g}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let n=Ie(r,"Item");n=null===e?n.filter((e=>void 0===xe(e,"sample"))):n.filter((t=>Number(xe(t,"sample"))===e));for(let e=0;e<n.length;++e){const r=n[e];t[xe(r,"name")]=r.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(r)return 0===r[1]&&0===r[4]?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(e){const[t,r,n]=e.getResolution();return[t*e.getWidth()/this.getWidth(),r*e.getHeight()/this.getHeight(),n*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(e=!1){const t=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[e,n,i,o,a,s,l,u]=this.fileDirectory.ModelTransformation,c=[[0,0],[0,t],[r,0],[r,t]].map((([t,r])=>[o+e*t+n*r,u+a*t+s*r])),f=c.map((e=>e[0])),h=c.map((e=>e[1]));return[Math.min(...f),Math.min(...h),Math.max(...f),Math.max(...h)]}{const e=this.getOrigin(),n=this.getResolution(),i=e[0],o=e[1],a=i+n[0]*r,s=o+n[1]*t;return[Math.min(i,a),Math.min(o,s),Math.max(i,a),Math.max(o,s)]}}};class Re{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const r=this.getUint32(e,t),n=this.getUint32(e+4,t);let i;if(t){if(i=r+2**32*n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*r+n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}getInt64(e,t){let r=0;const n=(128&this._dataView.getUint8(e+(t?7:0)))>0;let i=!0;for(let o=0;o<8;o++){let a=this._dataView.getUint8(e+(t?o:7-o));n&&(i?0!==a&&(a=255&~(a-1),i=!1):a=255&~a),r+=a*256**o}return n&&(r=-r),r}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return Ee(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class Be{constructor(e,t,r,n){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=r,this._bigTiff=n}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),r=this.readUint32(e+4);let n;if(this._littleEndian){if(n=t+2**32*r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}if(n=2**32*t+r,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}readInt64(e){let t=0;const r=(128&this._dataView.getUint8(e+(this._littleEndian?7:0)))>0;let n=!0;for(let i=0;i<8;i++){let o=this._dataView.getUint8(e+(this._littleEndian?i:7-i));r&&(n?0!==o&&(o=255&~(o-1),n=!1):o=255&~o),t+=o*256**i}return r&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const Le="\r\n\r\n";function De(e){if(void 0!==Object.fromEntries)return Object.fromEntries(e);const t={};for(const[r,n]of e)t[r.toLowerCase()]=n;return t}function je(e){return De(e.split("\r\n").map((e=>{const t=e.split(":").map((e=>e.trim()));return t[0]=t[0].toLowerCase(),t})))}function Fe(e){let t,r,n;return e&&([,t,r,n]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),r=parseInt(r,10),n=parseInt(n,10)),{start:t,end:r,total:n}}class Ne{async fetch(e,t=void 0){return Promise.all(e.map((e=>this.fetchSlice(e,t))))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class Ze extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"==typeof this.onEviction)for(const[t,r]of e)this.onEviction(t,r.value)}_deleteIfExpired(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const r=t.get(e);return this._getItemValue(e,r)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,r]=e;if(!this.cache.has(t)){!1===this._deleteIfExpired(t,r)&&(yield e)}}for(const e of this.cache){const[t,r]=e;!1===this._deleteIfExpired(t,r)&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:r=this.maxAge}={}){const n="number"==typeof r&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:n}):this._set(e,{value:t,expiry:n}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,r]=e;!1===this._deleteIfExpired(t,r)&&(yield[t,r.value])}for(const e of this.oldCache){const[t,r]=e;if(!this.cache.has(t)){!1===this._deleteIfExpired(t,r)&&(yield[t,r.value])}}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const r=e[t],[n,i]=r;!1===this._deleteIfExpired(n,i)&&(yield[n,i.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const r=e[t],[n,i]=r;if(!this.cache.has(n)){!1===this._deleteIfExpired(n,i)&&(yield[n,i.value])}}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[r,n]of this.entriesAscending())e.call(t,n,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class Ue extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,Ue),this.name="AbortError"}}class Qe extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const Ge=Qe;class ze{constructor(e,t,r=null){this.offset=e,this.length=t,this.data=r}get top(){return this.offset+this.length}}class qe{constructor(e,t,r){this.offset=e,this.length=t,this.blockIds=r}}class Ve extends Ne{constructor(e,{blockSize:t=65536,cacheSize:r=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new Ze({maxSize:r,onEviction:(e,t)=>{this.evictedBlocks.set(e,t)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const r=[],n=[],i=[];this.evictedBlocks.clear();for(const{offset:t,length:o}of e){let e=t+o;const{fileSize:a}=this;null!==a&&(e=Math.min(e,a));for(let o=Math.floor(t/this.blockSize)*this.blockSize;o<e;o+=this.blockSize){const e=Math.floor(o/this.blockSize);this.blockCache.has(e)||this.blockRequests.has(e)||(this.blockIdsToFetch.add(e),n.push(e)),this.blockRequests.has(e)&&r.push(this.blockRequests.get(e)),i.push(e)}}await async function(e){return new Promise((t=>setTimeout(t,e)))}(),this.fetchBlocks(t);const o=[];for(const e of n)this.blockRequests.has(e)&&o.push(this.blockRequests.get(e));await Promise.allSettled(r),await Promise.allSettled(o);const a=[],s=i.filter((e=>this.abortedBlockIds.has(e)||!this.blockCache.has(e)));if(s.forEach((e=>this.blockIdsToFetch.add(e))),s.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const e of s){const t=this.blockRequests.get(e);if(!t)throw new Error(`Block ${e} is not in the block requests`);a.push(t)}await Promise.allSettled(a)}if(t&&t.aborted)throw new Ue("Request was aborted");const l=i.map((e=>this.blockCache.get(e)||this.evictedBlocks.get(e))),u=l.filter((e=>!e));if(u.length)throw new Ge(u,"Request failed");const c=new Map(function(e,t){const r=Array.isArray(e)?e:Array.from(e),n=Array.isArray(t)?t:Array.from(t);return r.map(((e,t)=>[e,n[t]]))}(i,l));return this.readSliceData(e,c)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(t,e);for(let n=0;n<t.length;++n){const i=t[n];for(const t of i.blockIds)this.blockRequests.set(t,(async()=>{try{const e=(await r)[n],i=t*this.blockSize,o=i-e.offset,a=Math.min(o+this.blockSize,e.data.byteLength),s=e.data.slice(o,a),l=new ze(i,s.byteLength,s,t);this.blockCache.set(t,l),this.abortedBlockIds.delete(t)}catch(r){if("AbortError"!==r.name)throw r;r.signal=e,this.blockCache.delete(t),this.abortedBlockIds.add(t)}finally{this.blockRequests.delete(t)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort(((e,t)=>e-t));if(0===t.length)return[];let r=[],n=null;const i=[];for(const e of t)null===n||n+1===e?(r.push(e),n=e):(i.push(new qe(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[e],n=e);return i.push(new qe(r[0]*this.blockSize,r.length*this.blockSize,r)),i}readSliceData(e,t){return e.map((e=>{let r=e.offset+e.length;null!==this.fileSize&&(r=Math.min(this.fileSize,r));const n=Math.floor(e.offset/this.blockSize),i=Math.floor(r/this.blockSize),o=new ArrayBuffer(e.length),a=new Uint8Array(o);for(let o=n;o<=i;++o){const n=t.get(o),i=n.offset-e.offset;let s,l=0,u=0;i<0?l=-i:i>0&&(u=i),s=n.top-r<0?n.length-l:r-n.offset-l;const c=new Uint8Array(n.data,l,s);a.set(c,u)}return o}))}}class We{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Ke{constructor(e){this.url=e}async request({headers:e,signal:t}={}){throw new Error("request is not implemented")}}class He extends We{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Ye extends Ke{constructor(e,t){super(e),this.credentials=t}async request({headers:e,signal:t}={}){const r=await fetch(this.url,{headers:e,credentials:this.credentials,signal:t});return new He(r)}}class Xe extends We{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class Je extends Ke{constructRequest(e,t){return new Promise(((r,n)=>{const i=new XMLHttpRequest;i.open("GET",this.url),i.responseType="arraybuffer";for(const[t,r]of Object.entries(e))i.setRequestHeader(t,r);i.onload=()=>{const e=i.response;r(new Xe(i,e))},i.onerror=n,i.onabort=()=>n(new Ue("Request aborted")),i.send(),t&&(t.aborted&&i.abort(),t.addEventListener("abort",(()=>i.abort())))}))}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}var $e=r(73752),et=r(13640),tt=r(82630);class rt extends We{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}}class nt extends Ke{constructor(e){super(e),this.parsedUrl=tt.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?$e:et}constructRequest(e,t){return new Promise(((r,n)=>{const i=this.httpApi.get({...this.parsedUrl,headers:e},(e=>{const t=new Promise((t=>{const r=[];e.on("data",(e=>{r.push(e)})),e.on("end",(()=>{const e=Buffer.concat(r).buffer;t(e)})),e.on("error",n)}));r(new rt(e,t))}));i.on("error",n),t&&(t.aborted&&i.destroy(new Ue("Request aborted")),t.addEventListener("abort",(()=>i.destroy(new Ue("Request aborted")))))}))}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class it extends Ne{constructor(e,t,r,n){super(),this.client=e,this.headers=t,this.maxRanges=r,this.allowFullFile=n,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length,Promise.all(e.map((e=>this.fetchSlice(e,t)))))}async fetchSlices(e,t){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map((({offset:e,length:t})=>`${e}-${e+t}`)).join(",")}`},signal:t});if(r.ok){if(206===r.status){const{type:n,params:i}=function(e){const[t,...r]=e.split(";").map((e=>e.trim()));return{type:t,params:De(r.map((e=>e.split("="))))}}(r.getHeader("content-type"));if("multipart/byteranges"===n){const e=function(e,t){let r=null;const n=new TextDecoder("ascii"),i=[],o=`--${t}`,a=`${o}--`;for(let t=0;t<10;++t)n.decode(new Uint8Array(e,t,o.length))===o&&(r=t);if(null===r)throw new Error("Could not find initial boundary");for(;r<e.byteLength;){const t=n.decode(new Uint8Array(e,r,Math.min(o.length+1024,e.byteLength-r)));if(0===t.length||t.startsWith(a))break;if(!t.startsWith(o))throw new Error("Part does not start with boundary");const s=t.substr(o.length+2);if(0===s.length)break;const l=s.indexOf(Le),u=je(s.substr(0,l)),{start:c,end:f,total:h}=Fe(u["content-range"]),p=r+o.length+l+4,d=parseInt(f,10)+1-parseInt(c,10);i.push({headers:u,data:e.slice(p,p+d),offset:c,length:d,fileSize:h}),r=p+d+4}return i}(await r.getData(),i.boundary);return this._fileSize=e[0].fileSize||null,e}const o=await r.getData(),{start:a,end:s,total:l}=Fe(r.getHeader("content-range"));this._fileSize=l||null;const u=[{data:o,offset:a,length:s-a}];if(e.length>1){const r=await Promise.all(e.slice(1).map((e=>this.fetchSlice(e,t))));return u.concat(r)}return u}{if(!this.allowFullFile)throw new Error("Server responded with full file");const e=await r.getData();return this._fileSize=e.byteLength,[{data:e,offset:0,length:e.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:r,length:n}=e,i=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+n}`},signal:t});if(i.ok){if(206===i.status){const e=await i.getData(),{total:t}=Fe(i.getHeader("content-range"));return this._fileSize=t||null,{data:e,offset:r,length:n}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const e=await i.getData();return this._fileSize=e.byteLength,{data:e,offset:0,length:e.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function ot(e,{blockSize:t,cacheSize:r}){return null===t?e:new Ve(e,{blockSize:t,cacheSize:r})}function at(e,{forceXHR:t=!1,...r}={}){return"function"!=typeof fetch||t?"undefined"!=typeof XMLHttpRequest?function(e,{headers:t={},maxRanges:r=0,allowFullFile:n=!1,...i}={}){const o=new Je(e);return ot(new it(o,t,r,n),i)}(e,r):function(e,{headers:t={},maxRanges:r=0,allowFullFile:n=!1,...i}={}){const o=new nt(e);return ot(new it(o,t,r,n),i)}(e,r):function(e,{headers:t={},credentials:r,maxRanges:n=0,allowFullFile:i=!1,...o}={}){const a=new Ye(e,r);return ot(new it(a,t,n,i),o)}(e,r)}class st extends Ne{constructor(e){super(),this.file=e}async fetchSlice(e,t){return new Promise(((r,n)=>{const i=this.file.slice(e.offset,e.offset+e.length),o=new FileReader;o.onload=e=>r(e.target.result),o.onerror=n,o.onabort=n,o.readAsArrayBuffer(i),t&&t.addEventListener("abort",(()=>o.abort()))}))}}function lt(e){switch(e){case o.sf.BYTE:case o.sf.ASCII:case o.sf.SBYTE:case o.sf.UNDEFINED:return 1;case o.sf.SHORT:case o.sf.SSHORT:return 2;case o.sf.LONG:case o.sf.SLONG:case o.sf.FLOAT:case o.sf.IFD:return 4;case o.sf.RATIONAL:case o.sf.SRATIONAL:case o.sf.DOUBLE:case o.sf.LONG8:case o.sf.SLONG8:case o.sf.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function ut(e,t,r,n){let i=null,a=null;const s=lt(t);switch(t){case o.sf.BYTE:case o.sf.ASCII:case o.sf.UNDEFINED:i=new Uint8Array(r),a=e.readUint8;break;case o.sf.SBYTE:i=new Int8Array(r),a=e.readInt8;break;case o.sf.SHORT:i=new Uint16Array(r),a=e.readUint16;break;case o.sf.SSHORT:i=new Int16Array(r),a=e.readInt16;break;case o.sf.LONG:case o.sf.IFD:i=new Uint32Array(r),a=e.readUint32;break;case o.sf.SLONG:i=new Int32Array(r),a=e.readInt32;break;case o.sf.LONG8:case o.sf.IFD8:i=new Array(r),a=e.readUint64;break;case o.sf.SLONG8:i=new Array(r),a=e.readInt64;break;case o.sf.RATIONAL:i=new Uint32Array(2*r),a=e.readUint32;break;case o.sf.SRATIONAL:i=new Int32Array(2*r),a=e.readInt32;break;case o.sf.FLOAT:i=new Float32Array(r),a=e.readFloat32;break;case o.sf.DOUBLE:i=new Float64Array(r),a=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t!==o.sf.RATIONAL&&t!==o.sf.SRATIONAL)for(let t=0;t<r;++t)i[t]=a.call(e,n+t*s);else for(let t=0;t<r;t+=2)i[t]=a.call(e,n+t*s),i[t+1]=a.call(e,n+(t*s+4));return t===o.sf.ASCII?new TextDecoder("utf-8").decode(i):i}class ct{constructor(e,t,r){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=r}}class ft extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class ht{async readRasters(e={}){const{window:t,width:r,height:n}=e;let{resX:i,resY:o,bbox:a}=e;const s=await this.getImage();let l=s;const u=await this.getImageCount(),c=s.getBoundingBox();if(t&&a)throw new Error('Both "bbox" and "window" passed.');if(r||n){if(t){const[e,r]=s.getOrigin(),[n,i]=s.getResolution();a=[e+t[0]*n,r+t[1]*i,e+t[2]*n,r+t[3]*i]}const e=a||c;if(r){if(i)throw new Error("Both width and resX passed");i=(e[2]-e[0])/r}if(n){if(o)throw new Error("Both width and resY passed");o=(e[3]-e[1])/n}}if(i||o){const e=[];for(let t=0;t<u;++t){const r=await this.getImage(t),{SubfileType:n,NewSubfileType:i}=r.fileDirectory;(0===t||2===n||1&i)&&e.push(r)}e.sort(((e,t)=>e.getWidth()-t.getWidth()));for(let t=0;t<e.length;++t){const r=e[t],n=(c[2]-c[0])/r.getWidth(),a=(c[3]-c[1])/r.getHeight();if(l=r,i&&i>n||o&&o>a)break}}let f=t;if(a){const[e,t]=s.getOrigin(),[r,n]=l.getResolution(s);f=[Math.round((a[0]-e)/r),Math.round((a[1]-t)/n),Math.round((a[2]-e)/r),Math.round((a[3]-t)/n)],f=[Math.min(f[0],f[2]),Math.min(f[1],f[3]),Math.max(f[0],f[2]),Math.max(f[1],f[3])]}return l.readRasters({...e,window:f})}}class pt extends ht{constructor(e,t,r,n,i={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=r,this.firstIFDOffset=n,this.cache=i.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const r=this.bigTiff?4048:1024;return new Be((await this.source.fetch([{offset:e,length:void 0!==t?t:r}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,r=this.bigTiff?8:2;let n=await this.getSlice(e);const i=this.bigTiff?n.readUint64(e):n.readUint16(e),a=i*t+(this.bigTiff?16:6);n.covers(e,a)||(n=await this.getSlice(e,a));const s={};let l=e+(this.bigTiff?8:2);for(let e=0;e<i;l+=t,++e){const e=n.readUint16(l),t=n.readUint16(l+2),r=this.bigTiff?n.readUint64(l+4):n.readUint32(l+4);let i,a;const u=lt(t),c=l+(this.bigTiff?12:8);if(u*r<=(this.bigTiff?8:4))i=ut(n,t,r,c);else{const e=n.readOffset(c),o=lt(t)*r;if(n.covers(e,o))i=ut(n,t,r,e);else{i=ut(await this.getSlice(e,o),t,r,e)}}a=1===r&&-1===o.It.indexOf(e)&&t!==o.sf.RATIONAL&&t!==o.sf.SRATIONAL?i[0]:i,s[o.L[e]]=a}const u=function(e){const t=e.GeoKeyDirectory;if(!t)return null;const r={};for(let n=4;n<=4*t[3];n+=4){const i=o.P1[t[n]],a=t[n+1]?o.L[t[n+1]]:null,s=t[n+2],l=t[n+3];let u=null;if(a){if(u=e[a],null==u)throw new Error(`Could not get value of geoKey '${i}'.`);"string"==typeof u?u=u.substring(l,l+s-1):u.subarray&&(u=u.subarray(l,l+s),1===s&&(u=u[0]))}else u=l;r[i]=u}return r}(s),c=n.readOffset(e+r+t*i);return new ct(s,u,c)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(0===e)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){if(t instanceof ft)throw new ft(e);throw t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(0===t.nextIFDByteOffset)throw new ft(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new ke(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(e){if(!(e instanceof ft))throw e;t=!1}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=";let r=await this.getSlice(e,130);if(t===ut(r,o.sf.ASCII,30,e)){const t=ut(r,o.sf.ASCII,130,e).split("\n")[0],n=Number(t.split("=")[1].split(" ")[0])+t.length;n>130&&(r=await this.getSlice(e,n));const i=ut(r,o.sf.ASCII,n,e);this.ghostValues={},i.split("\n").filter((e=>e.length>0)).map((e=>e.split("="))).forEach((([e,t])=>{this.ghostValues[e]=t}))}return this.ghostValues}static async fromSource(e,t,r){const n=(await e.fetch([{offset:0,length:1024}],r))[0],i=new Re(n),o=i.getUint16(0,0);let a;if(18761===o)a=!0;else{if(19789!==o)throw new TypeError("Invalid byte order value.");a=!1}const s=i.getUint16(2,a);let l;if(42===s)l=!1;else{if(43!==s)throw new TypeError("Invalid magic number.");l=!0;if(8!==i.getUint16(4,a))throw new Error("Unsupported offset byte-size.")}const u=l?i.getUint64(8,a):i.getUint32(4,a);return new pt(e,a,l,u,t)}close(){return"function"==typeof this.source.close&&this.source.close()}}class dt extends ht{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((e=>e.parseFileDirectoryAt(e.firstIFDOffset))));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let t=0,r=0;for(let n=0;n<this.imageFiles.length;n++){const i=this.imageFiles[n];for(let o=0;o<this.imageCounts[n];o++){if(e===t){const e=await i.requestIFD(r);return new ke(e.fileDirectory,e.geoKeyDirectory,i.dataView,i.littleEndian,i.cache,i.source)}t++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(null!==this.imageCount)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((e=>e.getImageCount())));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce(((e,t)=>e+t),0),this.imageCount}}async function yt(e,t){return pt.fromSource(new st(e),t)}var gt=r(27811),mt=r(7697),_t=r(36181),vt=r(19230),At=r(21364);function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==bt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===bt(o)?o:String(o)),n)}var i,o}function Et(e,t){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Et(e,t)}function xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=St(e);if(t){var i=St(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return It(e)}(this,r)}}function It(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}var Ct,Pt="STATISTICS_MAXIMUM",Ot="STATISTICS_MINIMUM";function Tt(){return Ct||(Ct=new c),Ct}function Mt(e){try{return e.getBoundingBox()}catch(t){return[0,0,e.getWidth(),e.getHeight()]}}function kt(e){try{return e.getOrigin().slice(0,2)}catch(t){return[0,e.getHeight()]}}function Rt(e,t){try{return e.getResolution(t)}catch(r){return[t.getWidth()/e.getWidth(),t.getHeight()/e.getHeight()]}}function Bt(e){var t=e.geoKeys;if(!t)return null;if(t.ProjectedCSTypeGeoKey&&32767!==t.ProjectedCSTypeGeoKey){var r="EPSG:"+t.ProjectedCSTypeGeoKey,n=(0,gt.U2)(r);if(!n){var i=(0,At.N)(t.ProjLinearUnitsGeoKey);i&&(n=new gt.kv({code:r,units:i}))}return n}if(t.GeographicTypeGeoKey&&32767!==t.GeographicTypeGeoKey){var o="EPSG:"+t.GeographicTypeGeoKey,a=(0,gt.U2)(o);if(!a){var s=(0,At.N)(t.GeogAngularUnitsGeoKey);s&&(a=new gt.kv({code:o,units:s}))}return a}return null}function Lt(e){return e.getImageCount().then((function(t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e.getImage(n);return Promise.all(r)}))}function Dt(e,t){var r;return r=e.blob?yt(e.blob):e.overviews?async function(e,t=[],r={},n){const i=await pt.fromSource(at(e,r),n),o=await Promise.all(t.map((e=>pt.fromSource(at(e,r)))));return new dt(i,o)}(e.url,e.overviews,t):async function(e,t={},r){return pt.fromSource(at(e,t),r)}(e.url,t),r.then(Lt)}function jt(e,t,r,n,i){if(Array.isArray(e)){var o=e.length;if(!Array.isArray(t)||o!=t.length){var a=new Error(n);throw i(a),a}for(var s=0;s<o;++s)jt(e[s],t[s],r,n,i)}else if(Math.abs(e-t)>r*e)throw new Error(n)}function Ft(e){return e instanceof Int8Array?127:e instanceof Uint8Array||e instanceof Uint8ClampedArray?255:e instanceof Int16Array?32767:e instanceof Uint16Array?65535:e instanceof Int32Array?2147483647:e instanceof Uint32Array?4294967295:e instanceof Float32Array?34e37:255}var Nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Et(e,t)}(s,e);var t,r,n,a=xt(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,{state:"loading",tileGrid:null,projection:e.projection||null,opaque:e.opaque,transition:e.transition,interpolate:!1!==e.interpolate,wrapX:e.wrapX})).sourceInfo_=e.sources;var r=t.sourceInfo_.length;t.sourceOptions_=e.sourceOptions,t.sourceImagery_=new Array(r),t.sourceMasks_=new Array(r),t.resolutionFactors_=new Array(r),t.samplesPerPixel_,t.nodataValues_,t.metadata_,t.normalize_=!1!==e.normalize,t.addAlpha_=!1,t.error_=null,t.convertToRGB_=e.convertToRGB||!1,t.setKey(t.sourceInfo_.map((function(e){return e.url})).join(","));for(var n=It(t),i=new Array(r),o=0;o<r;++o)i[o]=Dt(t.sourceInfo_[o],t.sourceOptions_);return Promise.all(i).then((function(e){n.configure_(e)})).catch((function(e){(0,vt.vU)(e),n.error_=e,n.setState("error")})),t}return t=s,r=[{key:"getError",value:function(){return this.error_}},{key:"determineProjection",value:function(e){for(var t=e[0],r=t.length-1;r>=0;--r){var n=Bt(t[r]);if(n){this.projection=n;break}}}},{key:"configure_",value:function(e){for(var t,r,n,o,a,s=this,l=new Array(e.length),u=new Array(e.length),c=new Array(e.length),f=0,h=e.length,p=function(){var i=[],h=[];e[d].forEach((function(e){!function(e){return!(4&~(e.fileDirectory.NewSubfileType||0))}(e)?i.push(e):h.push(e)}));var p,y,g=i.length;if(h.length>0&&h.length!==g)throw new Error("Expected one mask per image found ".concat(h.length," masks and ").concat(g," images"));var m=new Array(g),_=new Array(g),v=new Array(g);u[d]=new Array(g),c[d]=new Array(g);for(var A=0;A<g;++A){var b=i[A],w=b.getGDALNoData();c[d][A]=b.getGDALMetadata(0),u[d][A]=w;var E=s.sourceInfo_[d].bands;l[d]=E?E.length:b.getSamplesPerPixel();var x=g-(A+1);p||(p=Mt(b)),y||(y=kt(b));var I=Rt(b,i[0]);v[x]=I[0];var S=[b.getTileWidth(),b.getTileHeight()];S[0]!==S[1]&&S[1]<256&&(S[0]=256,S[1]=256),m[x]=S;var C=I[0]/Math.abs(I[1]);_[x]=[S[0],S[1]/C]}if(t?(0,_t.Ed)(t,p,t):t=p,r){var P="Origin mismatch for source ".concat(d,", got [").concat(y,"] but expected [").concat(r,"]");jt(r,y,0,P,s.viewRejector)}else r=y;if(a){a.length-f>v.length&&(f=a.length-v.length);var O=a[a.length-1]/v[v.length-1];s.resolutionFactors_[d]=O;var T=v.map((function(e){return e*O})),M="Resolution mismatch for source ".concat(d,", got [").concat(T,"] but expected [").concat(a,"]");jt(a.slice(f,a.length),T,.02,M,s.viewRejector)}else a=v,s.resolutionFactors_[d]=1;n?jt(n.slice(f,n.length),_,.01,"Tile size mismatch for source ".concat(d),s.viewRejector):n=_,o?jt(o.slice(f,o.length),m,0,"Tile size mismatch for source ".concat(d),s.viewRejector):o=m,s.sourceImagery_[d]=i.reverse(),s.sourceMasks_[d]=h.reverse()},d=0;d<h;++d)p();for(var y=0,g=this.sourceImagery_.length;y<g;++y)for(var m=this.sourceImagery_[y];m.length<a.length;)m.unshift(void 0);this.getProjection()||this.determineProjection(e),this.samplesPerPixel_=l,this.nodataValues_=u,this.metadata_=c;e:for(var _=0;_<h;++_){if(void 0!==this.sourceInfo_[_].nodata){this.addAlpha_=!0;break}if(this.sourceMasks_[_].length){this.addAlpha_=!0;break}var v=u[_],A=this.sourceInfo_[_].bands;if(A){for(var b=0;b<A.length;++b)if(null!==v[A[b]-1]){this.addAlpha_=!0;break e}}else for(var w=0;w<v.length;++w)if(null!==v[w]){this.addAlpha_=!0;break e}}for(var E=this.addAlpha_?1:0,x=0;x<h;++x)E+=l[x];this.bandCount=E;var I=new i.Z({extent:t,minZoom:f,origin:r,resolutions:a,tileSizes:n});this.tileGrid=I,this.setTileSizes(o),this.setLoader(this.loadTile_.bind(this)),this.setState("ready"),2===a.length?a=[a[0],a[1],a[1]/2]:1===a.length&&(a=[2*a[0],a[0],a[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:a,center:(0,gt.lO)((0,_t.qg)(t),this.projection),extent:(0,gt.Fj)(t,this.projection),zoom:1})}},{key:"loadTile_",value:function(e,t,r){for(var n=this,i=this.getTileSize(e),a=this.sourceImagery_.length,s=new Array(2*a),l=this.nodataValues_,u=this.sourceInfo_,c=Tt(),f=function(f){var h,p,d=u[f],y=n.resolutionFactors_[f],g=[Math.round(t*(i[0]*y)),Math.round(r*(i[1]*y)),Math.round((t+1)*(i[0]*y)),Math.round((r+1)*(i[1]*y))],m=n.sourceImagery_[f][e];d.bands&&(h=d.bands.map((function(e){return e-1}))),p="nodata"in d&&null!==d.nodata?d.nodata:h?h.map((function(e){return l[f][e]})):l[f];var _={window:g,width:i[0],height:i[1],samples:h,fillValue:p,pool:c,interleave:!1};!function(e,t){if(!e)return!1;if(!0===e)return!0;if(3!==t.getSamplesPerPixel())return!1;var r=t.fileDirectory.PhotometricInterpretation,n=o.Ie;return r===n.CMYK||r===n.YCbCr||r===n.CIELab||r===n.ICCLab}(n.convertToRGB_,m)?s[f]=m.readRasters(_):s[f]=m.readRGB(_);var v=a+f,A=n.sourceMasks_[f][e];if(!A)return s[v]=Promise.resolve(null),"continue";s[v]=A.readRasters({window:g,width:i[0],height:i[1],samples:[0],pool:c,interleave:!1})},h=0;h<a;++h)f(h);return Promise.all(s).then(this.composeTile_.bind(this,i)).catch((function(e){throw(0,vt.vU)(e),e}))}},{key:"composeTile_",value:function(e,t){var r,n=this.metadata_,i=this.sourceInfo_,o=this.sourceImagery_.length,a=this.bandCount,s=this.samplesPerPixel_,l=this.nodataValues_,u=this.normalize_,c=this.addAlpha_,f=e[0]*e[1],h=f*a;r=u?new Uint8Array(h):new Float32Array(h);for(var p,d=0,y=0;y<f;++y){for(var g=c,m=0;m<o;++m){var _=i[m],v=_.min,A=_.max,b=void 0,w=void 0;if(u){var E=n[m][0];void 0===v&&(v=E&&Ot in E?parseFloat(E[Ot]):(p=t[m][0])instanceof Int8Array?-128:p instanceof Int16Array?-32768:p instanceof Int32Array?-2147483648:p instanceof Float32Array?12e-39:0),void 0===A&&(A=E&&Pt in E?parseFloat(E[Pt]):Ft(t[m][0])),w=-v*(b=255/(A-v))}for(var x=0;x<s[m];++x){var I=t[m][x][y],S=void 0;if(S=u?(0,mt.uZ)(b*I+w,0,255):I,c){var C=_.nodata;if(void 0===C){var P=void 0;P=_.bands?_.bands[x]-1:x,C=l[m][P]}var O=isNaN(C);(!O&&I!==C||O&&!isNaN(I))&&(g=!1,r[d]=S)}else r[d]=S;d++}if(!g){var T=t[o+m];T&&!T[0][y]&&(g=!0)}}c&&(g||(r[d]=255),d++)}return r}}],r&&wt(t.prototype,r),n&&wt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(n.Z);Nt.prototype.getView;const Zt=Nt},55710:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>N,r6:()=>j,Ps:()=>F});var n=r(28513),i=r(2115),o=r(94162),a=r(80237),s=r(41089),l=r(52188),u=r(50578),c=r(46009),f=r(36181),h=r(34586);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},y.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(p,e);var t,r,n,a=m(p);function p(e,t,r,n,i,c,h){var d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var y=e.getExtent();y&&e.canWrapX()&&((y=y.slice())[0]=-1/0,y[2]=1/0);var g=t.getExtent();g&&t.canWrapX()&&((g=g.slice())[0]=-1/0,g[2]=1/0);var m=g?(0,f.Ed)(r,g):r,_=(0,f.qg)(m),v=(0,u.aA)(e,t,_,n),A=s.m,b=new l.Z(e,t,m,y,v*A,n),w=b.calculateSourceExtent(),E=(0,f.xb)(w)?null:c(w,v,i),x=E?o.Z.IDLE:o.Z.EMPTY,I=E?E.getPixelRatio():1;return(d=a.call(this,r,n,I,x)).targetProj_=t,d.maxSourceExtent_=y,d.triangulation_=b,d.targetResolution_=n,d.targetExtent_=r,d.sourceImage_=E,d.sourcePixelRatio_=I,d.interpolate_=h,d.canvas_=null,d.sourceListenerKey_=null,d}return t=p,(r=[{key:"disposeInternal",value:function(){this.state==o.Z.LOADING&&this.unlistenSource_(),y(_(p.prototype),"disposeInternal",this).call(this)}},{key:"getImage",value:function(){return this.canvas_}},{key:"getProjection",value:function(){return this.targetProj_}},{key:"reproject_",value:function(){var e=this.sourceImage_.getState();if(e==o.Z.LOADED){var t=(0,f.dz)(this.targetExtent_)/this.targetResolution_,r=(0,f.Cr)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,u.sY)(t,r,this.sourcePixelRatio_,(0,c.D)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=e,this.changed()}},{key:"load",value:function(){if(this.state==o.Z.IDLE){this.state=o.Z.LOADING,this.changed();var e=this.sourceImage_.getState();e==o.Z.LOADED||e==o.Z.ERROR?this.reproject_():(this.sourceListenerKey_=(0,h.oL)(this.sourceImage_,i.Z.CHANGE,(function(e){var t=this.sourceImage_.getState();t!=o.Z.LOADED&&t!=o.Z.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}},{key:"unlistenSource_",value:function(){(0,h.bN)(this.sourceListenerKey_),this.sourceListenerKey_=null}}])&&d(t.prototype,r),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(a.ZP);var A=r(8553),b=r(48732),w=r(7697),E=r(27811),x=r(11133);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==I(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===I(o)?o:String(o)),n)}var i,o}function C(e,t,r){return t&&S(e.prototype,t),r&&S(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var i=k(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var R="imageloadstart",B="imageloadend",L="imageloaderror",D=function(e){O(r,e);var t=M(r);function r(e,n){var i;return P(this,r),(i=t.call(this,e)).image=n,i}return C(r)}(n.ZP);function j(e,t){e.getImage().src=t}function F(e,t,r,n){var i=t/r,o=(0,f.qg)(e),a=(0,w.mD)((0,f.dz)(e)/i,b.L),s=(0,w.mD)((0,f.Cr)(e)/i,b.L),l=a+2*(0,w.mD)((n-1)*a/2,b.L),u=s+2*(0,w.mD)((n-1)*s/2,b.L);return(0,f.p8)(o,i,0,[l,u])}const N=function(e){O(r,e);var t=M(r);function r(e){var n;return P(this,r),(n=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state,interpolate:void 0===e.interpolate||e.interpolate})).on,n.once,n.un,n.loader=e.loader||null,n.resolutions_=void 0!==e.resolutions?e.resolutions:null,n.reprojectedImage_=null,n.reprojectedRevision_=0,n.image=null,n.wantedExtent_,n.wantedResolution_,n.static_=!!e.loader&&0===e.loader.length,n}return C(r,[{key:"getResolutions",value:function(){return this.resolutions_}},{key:"setResolutions",value:function(e){this.resolutions_=e}},{key:"findNearestResolution",value:function(e){var t=this.getResolutions();t&&(e=t[(0,x.h7)(t,e,0)]);return e}},{key:"getImage",value:function(e,t,r,n){var i=this,o=this.getProjection();if(!o||!n||(0,E.OP)(o,n))return o&&(n=o),this.getImageInternal(e,t,r,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,E.OP)(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&(0,f.fS)(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new v(o,n,e,t,r,(function(e,t,r){return i.getImageInternal(e,t,r,o)}),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}},{key:"getImageInternal",value:function(e,t,r,n){if(this.loader){var o=F(e,t,r,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||(this.wantedExtent_&&(0,f.r4)(this.wantedExtent_,o)||(0,f.r4)(this.image.getExtent(),o))&&(this.wantedResolution_&&(0,c.D)(this.wantedResolution_)===s||(0,c.D)(this.image.getResolution())===s)))return this.image;this.wantedExtent_=o,this.wantedResolution_=s,this.image=new a.ZP(o,s,r,this.loader),this.image.addEventListener(i.Z.CHANGE,this.handleImageChange.bind(this))}return this.image}},{key:"handleImageChange",value:function(e){var t,r=e.target;switch(r.getState()){case o.Z.LOADING:this.loading=!0,t=R;break;case o.Z.LOADED:this.loading=!1,t=B;break;case o.Z.ERROR:this.loading=!1,t=L;break;default:return}this.hasListener(t)&&this.dispatchEvent(new D(t,r))}}]),r}(A.Z)},24871:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(55710),i=r(48732),o=r(68392),a=r(18939),s=r(50578),l=r(68536),u=r(80237),c=r(7697),f=r(36181),h=r(27811);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},y.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var v=[101,101];const A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(b,e);var t,r,p,A=m(b);function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),e=e||{},(t=A.call(this,{attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions})).crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,t.url_=e.url,t.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:n.r6,t.params_=e.params,t.serverType_=e.serverType,t.hidpi_=void 0===e.hidpi||e.hidpi,t.renderedRevision_=0,t.ratio_=void 0!==e.ratio?e.ratio:1.5,t}return t=b,(r=[{key:"getFeatureInfoUrl",value:function(e,t,r,n){if(void 0!==this.url_){var a=(0,h.U2)(r),u=this.getProjection();u&&u!==a&&(t=(0,s.aA)(u,a,e,t),e=(0,h.vs)(e,a,u));var p=(0,f.p8)(e,t,0,v),d={QUERY_LAYERS:this.params_.LAYERS};Object.assign(d,(0,o.jt)(this.params_,"GetFeatureInfo"),n);var y=(0,c.GW)((e[0]-p[0])/t,i.L),g=(0,c.GW)((p[3]-e[1])/t,i.L),m=(0,l.n)(d.VERSION,"1.3")>=0;return d[m?"I":"X"]=y,d[m?"J":"Y"]=g,(0,o.IF)(this.url_,p,v,u||a,d)}}},{key:"getLegendUrl",value:function(e,t){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:o.eQ,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===t||void 0===t.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;r.LAYER=n}if(void 0!==e){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=e*i/28e-5}return Object.assign(r,t),(0,a.B)(this.url_,r)}}},{key:"getParams",value:function(){return this.params_}},{key:"getImageInternal",value:function(e,t,r,n){var i=this;return void 0===this.url_?null:(this.loader||(this.loader=(0,o.Ke)({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:function(e,t){return i.image.setImage(e),i.imageLoadFunction_(i.image,t),(0,u.Jx)(e)}})),y(_(b.prototype),"getImageInternal",this).call(this,e,t,r,n))}},{key:"getImageLoadFunction",value:function(){return this.imageLoadFunction_}},{key:"getUrl",value:function(){return this.url_}},{key:"setImageLoadFunction",value:function(e){this.imageLoadFunction_=e,this.changed()}},{key:"setUrl",value:function(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.changed()}},{key:"changed",value:function(){this.image=null,y(_(b.prototype),"changed",this).call(this)}}])&&d(t.prototype,r),p&&d(t,p),Object.defineProperty(t,"prototype",{writable:!1}),b}(n.ZP)},19529:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c,h:()=>u});var n=r(26185);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var u='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(l,e);var t,r,n,i=s(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=void 0!==(e=e||{}).attributions?e.attributions:[u];var r=void 0!==e.crossOrigin?e.crossOrigin:"anonymous",n=void 0!==e.url?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";return i.call(this,{attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,opaque:void 0===e.opaque||e.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:n,wrapX:e.wrapX,zDirection:e.zDirection})}return t=l,r&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(n.Z)},8553:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(40439),i=r(27811);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,r)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function f(e){return e?Array.isArray(e)?function(t){return e}:"function"==typeof e?e:function(t){return[e]}:null}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(c,e);var t,r,n,o=l(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this)).projection=(0,i.U2)(e.projection),t.attributions_=f(e.attributions),t.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,t.loading=!1,t.state_=void 0!==e.state?e.state:"ready",t.wrapX_=void 0!==e.wrapX&&e.wrapX,t.interpolate_=!!e.interpolate,t.viewResolver=null,t.viewRejector=null;var r=u(t);return t.viewPromise_=new Promise((function(e,t){r.viewResolver=e,r.viewRejector=t})),t}return t=c,(r=[{key:"getAttributions",value:function(){return this.attributions_}},{key:"getAttributionsCollapsible",value:function(){return this.attributionsCollapsible_}},{key:"getProjection",value:function(){return this.projection}},{key:"getResolutions",value:function(e){return null}},{key:"getView",value:function(){return this.viewPromise_}},{key:"getState",value:function(){return this.state_}},{key:"getWrapX",value:function(){return this.wrapX_}},{key:"getInterpolate",value:function(){return this.interpolate_}},{key:"refresh",value:function(){this.changed()}},{key:"setAttributions",value:function(e){this.attributions_=f(e),this.changed()}},{key:"setState",value:function(e){this.state_=e,this.changed()}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(n.Z)},51505:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x,s:()=>E});var n=r(28513),i=r(8553),o=r(14666),a=r(57223),s=r(20594),l=r(97972),u=r(27811),c=r(62718),f=r(25096),h=r(59468);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function g(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},m.apply(this,arguments)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var w=function(e){_(r,e);var t=A(r);function r(e){var n;d(this,r),(n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})).on,n.once,n.un,n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;return n.tileGrid&&(0,h.Pq)(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),[256,256]),n.tileCache=new o.Z(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition,interpolate:e.interpolate},n.zDirection=e.zDirection?e.zDirection:0,n}return g(r,[{key:"canExpireCache",value:function(){return this.tileCache.canExpireCache()}},{key:"expireCache",value:function(e,t){var r=this.getTileCacheForProjection(e);r&&r.expireCache(t)}},{key:"forEachLoadedTile",value:function(e,t,r,n){var i=this.getTileCacheForProjection(e);if(!i)return!1;for(var o,s,l,u=!0,f=r.minX;f<=r.maxX;++f)for(var h=r.minY;h<=r.maxY;++h)s=(0,c.lg)(t,f,h),l=!1,i.containsKey(s)&&(l=(o=i.get(s)).getState()===a.Z.LOADED)&&(l=!1!==n(o)),l||(u=!1);return u}},{key:"getGutterForProjection",value:function(e){return 0}},{key:"getKey",value:function(){return this.key_}},{key:"setKey",value:function(e){this.key_!==e&&(this.key_=e,this.changed())}},{key:"getOpaque",value:function(e){return this.opaque_}},{key:"getResolutions",value:function(e){var t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}},{key:"getTile",value:function(e,t,r,n,i){return(0,s.O3)()}},{key:"getTileGrid",value:function(){return this.tileGrid}},{key:"getTileGridForProjection",value:function(e){return this.tileGrid?this.tileGrid:(0,f.X$)(e)}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();return(0,l.h)(null===t||(0,u.OP)(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}},{key:"getTilePixelRatio",value:function(e){return this.tilePixelRatio_}},{key:"getTilePixelSize",value:function(e,t,r){var n=this.getTileGridForProjection(r),i=this.getTilePixelRatio(t),o=(0,h.Pq)(n.getTileSize(e),this.tmpSize);return 1==i?o:(0,h.bA)(o,i,this.tmpSize)}},{key:"getTileCoordForTileUrlFunction",value:function(e,t){t=void 0!==t?t:this.getProjection();var r=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=(0,f.Cf)(r,e,t)),(0,c.tE)(e,r)?e:null}},{key:"clear",value:function(){this.tileCache.clear()}},{key:"refresh",value:function(){this.clear(),m(b(r.prototype),"refresh",this).call(this)}},{key:"updateCacheSize",value:function(e,t){var r=this.getTileCacheForProjection(t);e>r.highWaterMark&&(r.highWaterMark=e)}},{key:"useTile",value:function(e,t,r,n){}}]),r}(i.Z),E=function(e){_(r,e);var t=A(r);function r(e,n){var i;return d(this,r),(i=t.call(this,e)).tile=n,i}return g(r)}(n.ZP);const x=w},82493:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}},2993:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var n=r(2115),i=r(44727),o=r(22965),a=r(14666),s=r(57223),l=r(2544),u=r(27811),c=r(62718),f=r(25096),h=r(20594);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===p(o)?o:String(o)),n)}var i,o}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},y.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var i=_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function v(e,t){e.getImage().src=t}const A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(A,e);var t,r,l,p=m(A);function A(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),(t=p.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:v,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,t.tileClass=void 0!==e.tileClass?e.tileClass:i.Z,t.tileCacheForProjection={},t.tileGridForProjection={},t.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,t.renderReprojectionEdges_=!1,t}return t=A,(r=[{key:"canExpireCache",value:function(){if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}},{key:"expireCache",value:function(e,t){var r=this.getTileCacheForProjection(e);for(var n in this.tileCache.expireCache(this.tileCache==r?t:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[n];i.expireCache(i==r?t:{})}}},{key:"getGutterForProjection",value:function(e){return this.getProjection()&&e&&!(0,u.OP)(this.getProjection(),e)?0:this.getGutter()}},{key:"getGutter",value:function(){return 0}},{key:"getKey",value:function(){var e=y(_(A.prototype),"getKey",this).call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e}},{key:"getOpaque",value:function(e){return!(this.getProjection()&&e&&!(0,u.OP)(this.getProjection(),e))&&y(_(A.prototype),"getOpaque",this).call(this,e)}},{key:"getTileGridForProjection",value:function(e){var t=this.getProjection();if(this.tileGrid&&(!t||(0,u.OP)(t,e)))return this.tileGrid;var r=(0,h.sq)(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=(0,f.X$)(e)),this.tileGridForProjection[r]}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();if(!t||(0,u.OP)(t,e))return this.tileCache;var r=(0,h.sq)(e);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new a.Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]}},{key:"createTile_",value:function(e,t,r,i,o,a){var l=[e,t,r],u=this.getTileCoordForTileUrlFunction(l,o),c=u?this.tileUrlFunction(u,i,o):void 0,f=new this.tileClass(l,void 0!==c?s.Z.IDLE:s.Z.EMPTY,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=a,f.addEventListener(n.Z.CHANGE,this.handleTileChange.bind(this)),f}},{key:"getTile",value:function(e,t,r,n,i){var a=this,s=this.getProjection();if(!s||!i||(0,u.OP)(s,i))return this.getTileInternal(e,t,r,n,s||i);var l,f=this.getTileCacheForProjection(i),h=[e,t,r],p=(0,c.km)(h);f.containsKey(p)&&(l=f.get(p));var d=this.getKey();if(l&&l.key==d)return l;var y=this.getTileGridForProjection(s),g=this.getTileGridForProjection(i),m=this.getTileCoordForTileUrlFunction(h,i),_=new o.Z(s,y,i,g,h,m,this.getTilePixelRatio(n),this.getGutter(),(function(e,t,r,n){return a.getTileInternal(e,t,r,n,s)}),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return _.key=d,l?(_.interimTile=l,_.refreshInterimChain(),f.replace(p,_)):f.set(p,_),_}},{key:"getTileInternal",value:function(e,t,r,n,i){var o=null,a=(0,c.lg)(e,t,r),l=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=l){var u=o;o=this.createTile_(e,t,r,n,i,l),u.getState()==s.Z.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(e,t,r,n,i,l),this.tileCache.set(a,o);return o}},{key:"setRenderReprojectionEdges",value:function(e){if(this.renderReprojectionEdges_!=e){for(var t in this.renderReprojectionEdges_=e,this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}},{key:"setTileGridForProjection",value:function(e,t){var r=(0,u.U2)(e);if(r){var n=(0,h.sq)(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=t)}}},{key:"clear",value:function(){for(var e in y(_(A.prototype),"clear",this).call(this),this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}])&&d(t.prototype,r),l&&d(t,l),Object.defineProperty(t,"prototype",{writable:!1}),A}(l.Z)},60138:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(2993),i=r(68392),o=r(18939),a=r(36181),s=r(50578),l=r(68536),u=r(27811),c=r(7697),f=r(62718);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===h(o)?o:String(o)),n)}var i,o}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}const m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(g,e);var t,r,n,h=y(g);function g(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),e=e||{};var r=Object.assign({},e.params),n=!("TRANSPARENT"in r)||r.TRANSPARENT;return(t=h.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!n,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})).gutter_=void 0!==e.gutter?e.gutter:0,t.params_=r,t.v13_=!0,t.serverType_=e.serverType,t.hidpi_=void 0===e.hidpi||e.hidpi,t.tmpExtent_=(0,a.lJ)(),t.updateV13_(),t.setKey(t.getKeyForParams_()),t}return t=g,(r=[{key:"getFeatureInfoUrl",value:function(e,t,r,n){var o=(0,u.U2)(r),l=this.getProjection()||o,c=this.getTileGrid();c||(c=this.getTileGridForProjection(l));var f=(0,u.vs)(e,o,l),h=(0,s.aA)(l,o,e,t),p=c.getZForResolution(h,this.zDirection),d=c.getResolution(p),y=c.getTileCoordForCoordAndZ(f,p);if(!(c.getResolutions().length<=y[0])){var g=c.getTileCoordExtent(y,this.tmpExtent_),m=this.gutter_;0!==m&&(g=(0,a.f3)(g,d*m,g));var _={QUERY_LAYERS:this.params_.LAYERS};Object.assign(_,(0,i.jt)(this.params_,"GetFeatureInfo"),n);var v=Math.floor((f[0]-g[0])/d),A=Math.floor((g[3]-f[1])/d);return _[this.v13_?"I":"X"]=v,_[this.v13_?"J":"Y"]=A,this.getRequestUrl_(y,g,1,l||o,_)}}},{key:"getLegendUrl",value:function(e,t){if(void 0!==this.urls[0]){var r={SERVICE:"WMS",VERSION:i.eQ,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===t||void 0===t.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;r.LAYER=n}if(void 0!==e){var a=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=e*a/28e-5}return Object.assign(r,t),(0,o.B)(this.urls[0],r)}}},{key:"getGutter",value:function(){return this.gutter_}},{key:"getParams",value:function(){return this.params_}},{key:"getRequestUrl_",value:function(e,t,r,n,o){var a,s=this.urls;if(s)return a=1==s.length?s[0]:s[(0,c.$W)((0,f.vp)(e),s.length)],(0,i.Q4)(t,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(e[0]),r,n,a,o,this.serverType_)}},{key:"getTilePixelRatio",value:function(e){return this.hidpi_&&void 0!==this.serverType_?e:1}},{key:"getKeyForParams_",value:function(){var e=0,t=[];for(var r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}},{key:"updateV13_",value:function(){var e=this.params_.VERSION||i.eQ;this.v13_=(0,l.n)(e,"1.3")>=0}},{key:"tileUrlFunction",value:function(e,t,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=e[0])){1==t||this.hidpi_&&void 0!==this.serverType_||(t=1);var o=n.getResolution(e[0]),s=n.getTileCoordExtent(e,this.tmpExtent_),l=this.gutter_;0!==l&&(s=(0,a.f3)(s,o*l,s));var u=Object.assign({},(0,i.jt)(this.params_,"GetMap"));return this.getRequestUrl_(e,s,t,r,u)}}}])&&p(t.prototype,r),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),g}(n.Z)},2544:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(82493),i=r(51505),o=r(57223),a=r(90629),s=r(62718),l=r(20594);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(d,e);var t,r,u,p=h(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=p.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})).generateTileUrlFunction_=t.tileUrlFunction===d.prototype.tileUrlFunction,t.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(t.tileUrlFunction=e.tileUrlFunction),t.urls=null,e.urls?t.setUrls(e.urls):e.url&&t.setUrl(e.url),t.tileLoadingKeys_={},t}return t=d,(r=[{key:"getTileLoadFunction",value:function(){return this.tileLoadFunction}},{key:"getTileUrlFunction",value:function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}},{key:"getUrls",value:function(){return this.urls}},{key:"handleTileChange",value:function(e){var t,r=e.target,a=(0,l.sq)(r),s=r.getState();s==o.Z.LOADING?(this.tileLoadingKeys_[a]=!0,t=n.Z.TILELOADSTART):a in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[a],t=s==o.Z.ERROR?n.Z.TILELOADERROR:s==o.Z.LOADED?n.Z.TILELOADEND:void 0),null!=t&&this.dispatchEvent(new i.s(t,r))}},{key:"setTileLoadFunction",value:function(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}},{key:"setTileUrlFunction",value:function(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),void 0!==t?this.setKey(t):this.changed()}},{key:"setUrl",value:function(e){var t=(0,a.Gk)(e);this.urls=t,this.setUrls(t)}},{key:"setUrls",value:function(e){this.urls=e;var t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,a.uR)(e,this.tileGrid),t):this.setKey(t)}},{key:"tileUrlFunction",value:function(e,t,r){}},{key:"useTile",value:function(e,t,r){var n=(0,s.lg)(e,t,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}])&&c(t.prototype,r),u&&c(t,u),Object.defineProperty(t,"prototype",{writable:!1}),d}(i.Z)},24615:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(45004),i=r(14516),o=r(28513),a=r(2115),s=r(43059),l=r(97845),u=r(8553),c=r(48671),f=r(73826),h=r(14814),p=r(97972),d=r(36181),y=r(11133),g=r(20594),m=r(83482),_=r(34586),v=r(49902);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function b(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},E.apply(this,arguments)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===A(o)?o:String(o)),n)}var i,o}function I(e,t,r){return t&&x(e.prototype,t),r&&x(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var i=T(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var M=function(e){C(r,e);var t=O(r);function r(e,n,i){var o;return S(this,r),(o=t.call(this,e)).feature=n,o.features=i,o}return I(r)}(o.ZP);const k=function(e){C(r,e);var t=O(r);function r(e){var i;S(this,r),e=e||{},(i=t.call(this,{attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===e.wrapX||e.wrapX})).on,i.once,i.un,i.loader_=f.Zn,i.format_=e.format,i.overlaps_=void 0===e.overlaps||e.overlaps,i.url_=e.url,void 0!==e.loader?i.loader_=e.loader:void 0!==i.url_&&((0,p.h)(i.format_,"`format` must be set when `url` is set"),i.loader_=(0,v.Be)(i.url_,i.format_)),i.strategy_=void 0!==e.strategy?e.strategy:h.$6;var o,a,s=void 0===e.useSpatialIndex||e.useSpatialIndex;return i.featuresRtree_=s?new l.Z:null,i.loadedExtentsRtree_=new l.Z,i.loadingExtentsCount_=0,i.nullGeometryFeatures_={},i.idIndex_={},i.uidIndex_={},i.featureChangeKeys_={},i.featuresCollection_=null,Array.isArray(e.features)?a=e.features:e.features&&(a=(o=e.features).getArray()),s||void 0!==o||(o=new n.Z(a)),void 0!==a&&i.addFeaturesInternal(a),void 0!==o&&i.bindFeaturesCollection_(o),i}return I(r,[{key:"addFeature",value:function(e){this.addFeatureInternal(e),this.changed()}},{key:"addFeatureInternal",value:function(e){var t=(0,g.sq)(e);if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var r=e.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new M(c.Z.ADDFEATURE,e))}else this.featuresCollection_&&this.featuresCollection_.remove(e)}},{key:"setupChangeEvents_",value:function(e,t){this.featureChangeKeys_[e]=[(0,_.oL)(t,a.Z.CHANGE,this.handleFeatureChange_,this),(0,_.oL)(t,s.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}},{key:"addToIndex_",value:function(e,t){var r=!0,n=t.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t),r&&((0,p.h)(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}},{key:"addFeatures",value:function(e){this.addFeaturesInternal(e),this.changed()}},{key:"addFeaturesInternal",value:function(e){for(var t=[],r=[],n=[],i=0,o=e.length;i<o;i++){var a=e[i],s=(0,g.sq)(a);this.addToIndex_(s,a)&&r.push(a)}for(var l=0,u=r.length;l<u;l++){var f=r[l],h=(0,g.sq)(f);this.setupChangeEvents_(h,f);var p=f.getGeometry();if(p){var d=p.getExtent();t.push(d),n.push(f)}else this.nullGeometryFeatures_[h]=f}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(c.Z.ADDFEATURE))for(var y=0,m=r.length;y<m;y++)this.dispatchEvent(new M(c.Z.ADDFEATURE,r[y]))}},{key:"bindFeaturesCollection_",value:function(e){var t=this,r=!1;this.addEventListener(c.Z.ADDFEATURE,(function(t){r||(r=!0,e.push(t.feature),r=!1)})),this.addEventListener(c.Z.REMOVEFEATURE,(function(t){r||(r=!0,e.remove(t.feature),r=!1)})),e.addEventListener(i.Z.ADD,(function(e){r||(r=!0,t.addFeature(e.element),r=!1)})),e.addEventListener(i.Z.REMOVE,(function(e){r||(r=!0,t.removeFeature(e.element),r=!1)})),this.featuresCollection_=e}},{key:"clear",value:function(e){var t=this;if(e){for(var r in this.featureChangeKeys_){this.featureChangeKeys_[r].forEach(_.bN)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){for(var n in this.featuresRtree_.forEach((function(e){t.removeFeatureInternal(e)})),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var i=new M(c.Z.CLEAR);this.dispatchEvent(i),this.changed()}},{key:"forEachFeature",value:function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}},{key:"forEachFeatureAtCoordinateDirect",value:function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,(function(r){if(r.getGeometry().intersectsCoordinate(e))return t(r)}))}},{key:"forEachFeatureInExtent",value:function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}},{key:"forEachFeatureIntersectingExtent",value:function(e,t){return this.forEachFeatureInExtent(e,(function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}}))}},{key:"getFeaturesCollection",value:function(){return this.featuresCollection_}},{key:"getFeatures",value:function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,m.x)(this.nullGeometryFeatures_)||(0,y.l7)(e,Object.values(this.nullGeometryFeatures_))),e}},{key:"getFeaturesAtCoordinate",value:function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,(function(e){t.push(e)})),t}},{key:"getFeaturesInExtent",value:function(e,t){var r=this;if(this.featuresRtree_){var n;if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);var i=(0,d.MV)(e,t);return(n=[]).concat.apply(n,b(i.map((function(e){return r.featuresRtree_.getInExtent(e)}))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}},{key:"getClosestFeatureToCoordinate",value:function(e,t){var r=e[0],n=e[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0];return t=t||f.uX,this.featuresRtree_.forEachInExtent(s,(function(e){if(t(e)){var l=e.getGeometry(),u=a;if((a=l.closestPointXY(r,n,o,a))<u){i=e;var c=Math.sqrt(a);s[0]=r-c,s[1]=n-c,s[2]=r+c,s[3]=n+c}}})),i}},{key:"getExtent",value:function(e){return this.featuresRtree_.getExtent(e)}},{key:"getFeatureById",value:function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null}},{key:"getFeatureByUid",value:function(e){var t=this.uidIndex_[e];return void 0!==t?t:null}},{key:"getFormat",value:function(){return this.format_}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"getUrl",value:function(){return this.url_}},{key:"handleFeatureChange_",value:function(e){var t=e.target,r=(0,g.sq)(t),n=t.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,t)):this.featuresRtree_&&this.featuresRtree_.update(i,t)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);var o=t.getId();if(void 0!==o){var a=o.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new M(c.Z.CHANGEFEATURE,t))}},{key:"hasFeature",value:function(e){var t=e.getId();return void 0!==t?t in this.idIndex_:(0,g.sq)(e)in this.uidIndex_}},{key:"isEmpty",value:function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,m.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}},{key:"loadFeatures",value:function(e,t,r){for(var n=this,i=this.loadedExtentsRtree_,o=this.strategy_(e,t,r),a=function(){var e=o[s];i.forEachInExtent(e,(function(t){return(0,d.r4)(t.extent,e)}))||(++n.loadingExtentsCount_,n.dispatchEvent(new M(c.Z.FEATURESLOADSTART)),n.loader_.call(n,e,t,r,(function(e){--n.loadingExtentsCount_,n.dispatchEvent(new M(c.Z.FEATURESLOADEND,void 0,e))}),(function(){--n.loadingExtentsCount_,n.dispatchEvent(new M(c.Z.FEATURESLOADERROR))})),i.insert(e,{extent:e.slice()}))},s=0,l=o.length;s<l;++s)a();this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}},{key:"refresh",value:function(){this.clear(!0),this.loadedExtentsRtree_.clear(),E(T(r.prototype),"refresh",this).call(this)}},{key:"removeLoadedExtent",value:function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,(function(r){if((0,d.fS)(r.extent,e))return t=r,!0})),t&&r.remove(t)}},{key:"removeFeature",value:function(e){if(e){var t=(0,g.sq)(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}}},{key:"removeFeatureInternal",value:function(e){var t=(0,g.sq)(e),r=this.featureChangeKeys_[t];if(r){r.forEach(_.bN),delete this.featureChangeKeys_[t];var n=e.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[t],this.dispatchEvent(new M(c.Z.REMOVEFEATURE,e)),e}}},{key:"removeFromIdIndex_",value:function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t}},{key:"setLoader",value:function(e){this.loader_=e}},{key:"setUrl",value:function(e){(0,p.h)(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader((0,v.Be)(e,this.format_))}}]),r}(u.Z)},48671:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},67156:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var n=r(2115),i=r(77118),o=r(57223);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===a(o)?o:String(o)),n)}var i,o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,r,n,i=u(a);function a(e,t,r,n,o,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(l=i.call(this,e,t,s)).extent=null,l.format_=n,l.features_=null,l.loader_,l.projection=null,l.resolution,l.tileLoadFunction_=o,l.url_=r,l.key=r,l}return t=a,(r=[{key:"getFormat",value:function(){return this.format_}},{key:"getFeatures",value:function(){return this.features_}},{key:"load",value:function(){this.state==o.Z.IDLE&&(this.setState(o.Z.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}},{key:"onLoad",value:function(e,t){this.setFeatures(e)}},{key:"onError",value:function(){this.setState(o.Z.ERROR)}},{key:"setFeatures",value:function(e){this.features_=e,this.setState(o.Z.LOADED)}},{key:"setLoader",value:function(e){this.loader_=e}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.Z);var h=r(14666),p=r(36839),d=r(2544),y=r(88199),g=r(20594);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===m(o)?o:String(o)),n)}var i,o}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},v.apply(this,arguments)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var i=E(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,r)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var x=[];const I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(o,e);var t,r,n,i=b(o);function o(e,t,r,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(a=i.call(this,e,t,{transition:0})).context_={},a.executorGroups={},a.declutterExecutorGroups={},a.loadingSourceTiles=0,a.hitDetectionImageData={},a.replayState_={},a.sourceTiles=[],a.errorTileKeys={},a.wantedResolution,a.getSourceTiles=n.bind(void 0,w(a)),a.wrappedTileCoord=r,a}return t=o,(r=[{key:"getContext",value:function(e){var t=(0,g.sq)(e);return t in this.context_||(this.context_[t]=(0,y.E4)(1,1,x)),this.context_[t]}},{key:"hasContext",value:function(e){return(0,g.sq)(e)in this.context_}},{key:"getImage",value:function(e){return this.hasContext(e)?this.getContext(e).canvas:null}},{key:"getReplayState",value:function(e){var t=(0,g.sq)(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}},{key:"load",value:function(){this.getSourceTiles()}},{key:"release",value:function(){for(var e in this.context_){var t=this.context_[e];(0,y.jy)(t),x.push(t.canvas),delete this.context_[e]}v(E(o.prototype),"release",this).call(this)}}])&&_(t.prototype,r),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.Z);var S=r(49518),C=r(36181),P=r(25096),O=r(62718),T=r(83482),M=r(49902),k=r(59468);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===R(o)?o:String(o)),n)}var i,o}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},L.apply(this,arguments)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=F(e);if(t){var i=F(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(s,e);var t,r,i,a=j(s);function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var r=e.projection||"EPSG:3857",n=e.extent||(0,P.Tl)(r),i=e.tileGrid||(0,P.dl)({extent:n,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(t=a.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:r,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:U,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})).format_=e.format?e.format:null,t.sourceTileCache=new h.Z(t.tileCache.highWaterMark),t.overlaps_=null==e.overlaps||e.overlaps,t.tileClass=e.tileClass?e.tileClass:f,t.tileGrids_={},t}return t=s,(r=[{key:"getFeaturesInExtent",value:function(e){var t=[],r=this.tileCache;if(0===r.getCount())return t;var n=(0,O.Ul)(r.peekFirstKey())[0],i=this.tileGrid;return r.forEach((function(r){if(r.tileCoord[0]===n&&r.getState()===o.Z.LOADED)for(var a=r.getSourceTiles(),s=0,l=a.length;s<l;++s){var u=a[s],c=u.tileCoord;if((0,C.kK)(e,i.getTileCoordExtent(c))){var f=u.getFeatures();if(f)for(var h=0,p=f.length;h<p;++h){var d=f[h],y=d.getGeometry();(0,C.kK)(e,y.getExtent())&&t.push(d)}}}})),t}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"clear",value:function(){this.tileCache.clear(),this.sourceTileCache.clear()}},{key:"expireCache",value:function(e,t){var r=this.getTileCacheForProjection(e),n=Object.keys(t).reduce((function(e,t){var n=(0,O.MY)(t),i=r.peek(n);if(i)for(var o=i.sourceTiles,a=0,s=o.length;a<s;++a)e[o[a].getKey()]=!0;return e}),{});L(F(s.prototype),"expireCache",this).call(this,e,t),this.sourceTileCache.expireCache(n)}},{key:"getSourceTiles",value:function(e,t,r){var i=this;if(r.getState()===o.Z.IDLE){r.setState(o.Z.LOADING);var a=r.wrappedTileCoord,s=this.getTileGridForProjection(t),l=s.getTileCoordExtent(a),u=a[0],c=s.getResolution(u);(0,C.f3)(l,-c,l);var f=this.tileGrid,h=f.getExtent();h&&(0,C.Ed)(l,h,l);var p=f.getZForResolution(c,this.zDirection);f.forEachTileCoord(l,p,(function(a){var s=i.tileUrlFunction(a,e,t),l=i.sourceTileCache.containsKey(s)?i.sourceTileCache.get(s):new i.tileClass(a,s?o.Z.IDLE:o.Z.EMPTY,s,i.format_,i.tileLoadFunction);r.sourceTiles.push(l);var u=l.getState();u<o.Z.LOADED&&(l.addEventListener(n.Z.CHANGE,(function e(t){i.handleTileChange(t);var a=l.getState();if(a===o.Z.LOADED||a===o.Z.ERROR){var s=l.getKey();s in r.errorTileKeys?l.getState()===o.Z.LOADED&&delete r.errorTileKeys[s]:r.loadingSourceTiles--,a===o.Z.ERROR?r.errorTileKeys[s]=!0:l.removeEventListener(n.Z.CHANGE,e),0===r.loadingSourceTiles&&r.setState((0,T.x)(r.errorTileKeys)?o.Z.LOADED:o.Z.ERROR)}})),r.loadingSourceTiles++),u===o.Z.IDLE&&(l.extent=f.getTileCoordExtent(a),l.projection=t,l.resolution=f.getResolution(a[0]),i.sourceTileCache.set(s,l),l.load())})),r.loadingSourceTiles||r.setState(r.sourceTiles.some((function(e){return e.getState()===o.Z.ERROR}))?o.Z.ERROR:o.Z.LOADED)}return r.sourceTiles}},{key:"getTile",value:function(e,t,r,n,i){var a,s=this,l=(0,O.lg)(e,t,r),u=this.getKey();if(this.tileCache.containsKey(l)&&(a=this.tileCache.get(l)).key===u)return a;var c=[e,t,r],f=this.getTileCoordForTileUrlFunction(c,i),h=this.getTileGrid().getExtent(),p=this.getTileGridForProjection(i);if(f&&h){var d=p.getTileCoordExtent(f);(0,C.f3)(d,-p.getResolution(e),d),(0,C.kK)(h,d)||(f=null)}var y=!0;if(null!==f){var g=this.tileGrid,m=p.getResolution(e),_=g.getZForResolution(m,1),v=p.getTileCoordExtent(f);(0,C.f3)(v,-m,v),g.forEachTileCoord(v,_,(function(e){y=y&&!s.tileUrlFunction(e,n,i)}))}var A=new I(c,y?o.Z.EMPTY:o.Z.IDLE,f,this.getSourceTiles.bind(this,n,i));return A.key=u,a?(A.interimTile=a,A.refreshInterimChain(),this.tileCache.replace(l,A)):this.tileCache.set(l,A),A}},{key:"getTileGridForProjection",value:function(e){var t=e.getCode(),r=this.tileGrids_[t];if(!r){for(var n=this.tileGrid,i=n.getResolutions().slice(),o=i.map((function(e,t){return n.getOrigin(t)})),a=i.map((function(e,t){return n.getTileSize(t)})),s=S.e+1,l=i.length;l<s;++l)i.push(i[l-1]/2),o.push(o[l-1]),a.push(a[l-1]);r=new p.Z({extent:n.getExtent(),origins:o,resolutions:i,tileSizes:a}),this.tileGrids_[t]=r}return r}},{key:"getTilePixelRatio",value:function(e){return e}},{key:"getTilePixelSize",value:function(e,t,r){var n=this.getTileGridForProjection(r),i=(0,k.Pq)(n.getTileSize(e),this.tmpSize);return[Math.round(i[0]*t),Math.round(i[1]*t)]}},{key:"updateCacheSize",value:function(e,t){L(F(s.prototype),"updateCacheSize",this).call(this,2*e,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}])&&B(t.prototype,r),i&&B(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(d.Z);const Z=N;function U(e,t){e.setLoader((function(r,n,i){(0,M.ov)(t,e.getFormat(),r,n,i,e.onLoad.bind(e),e.onError.bind(e))}))}},20632:(e,t,r)=>{"use strict";r.d(t,{B:()=>g,Z:()=>y});var n=r(2993),i=r(18939),o=r(36181),a=r(67858),s=r(90629),l=r(27811);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(this,r)}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}const y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(a,e);var t,r,n,o=h(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=void 0!==e.requestEncoding?e.requestEncoding:"KVP",n=e.tileGrid,i=e.urls;return void 0===i&&void 0!==e.url&&(i=(0,s.Gk)(e.url)),(t=o.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:i,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition,zDirection:e.zDirection})).version_=void 0!==e.version?e.version:"1.0.0",t.format_=void 0!==e.format?e.format:"image/jpeg",t.dimensions_=void 0!==e.dimensions?e.dimensions:{},t.layer_=e.layer,t.matrixSet_=e.matrixSet,t.style_=e.style,t.requestEncoding_=r,t.setKey(t.getKeyForDimensions_()),i&&i.length>0&&(t.tileUrlFunction=(0,s.Un)(i.map(t.createFromWMTSTemplate.bind(p(t))))),t}return t=a,(r=[{key:"setUrls",value:function(e){this.urls=e;var t=e.join("\n");this.setTileUrlFunction((0,s.Un)(e.map(this.createFromWMTSTemplate.bind(this))),t)}},{key:"getDimensions",value:function(){return this.dimensions_}},{key:"getFormat",value:function(){return this.format_}},{key:"getLayer",value:function(){return this.layer_}},{key:"getMatrixSet",value:function(){return this.matrixSet_}},{key:"getRequestEncoding",value:function(){return this.requestEncoding_}},{key:"getStyle",value:function(){return this.style_}},{key:"getVersion",value:function(){return this.version_}},{key:"getKeyForDimensions_",value:function(){var e=this.urls?this.urls.slice(0):[];for(var t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}},{key:"updateDimensions",value:function(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}},{key:"createFromWMTSTemplate",value:function(e){var t=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==t&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e="KVP"==t?(0,i.B)(e,r):e.replace(/\{(\w+?)\}/g,(function(e,t){return t.toLowerCase()in r?r[t.toLowerCase()]:e}));var n=this.tileGrid,o=this.dimensions_;return function(r,a,s){if(r){var l={TileMatrix:n.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};Object.assign(l,o);var u=e;return u="KVP"==t?(0,i.B)(u,l):u.replace(/\{(\w+?)\}/g,(function(e,t){return l[t]}))}}}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n.Z);function g(e,t){var r=e.Contents.Layer.find((function(e){return e.Identifier==t.layer}));if(!r)return null;var n,i=e.Contents.TileMatrixSet;(n=r.TileMatrixSetLink.length>1?"projection"in t?r.TileMatrixSetLink.findIndex((function(e){var r=i.find((function(t){return t.Identifier==e.TileMatrixSet})).SupportedCRS,n=(0,l.U2)(r),o=(0,l.U2)(t.projection);return n&&o?(0,l.OP)(n,o):r==t.projection})):r.TileMatrixSetLink.findIndex((function(e){return e.TileMatrixSet==t.matrixSet})):0)<0&&(n=0);var s=r.TileMatrixSetLink[n].TileMatrixSet,u=r.TileMatrixSetLink[n].TileMatrixSetLimits,c=r.Format[0];"format"in t&&(c=t.format),(n=r.Style.findIndex((function(e){return"style"in t?e.Title==t.style:e.isDefault})))<0&&(n=0);var f=r.Style[n].Identifier,h={};"Dimension"in r&&r.Dimension.forEach((function(e,t,r){var n=e.Identifier,i=e.Default;void 0===i&&(i=e.Value[0]),h[n]=i}));var p,d=e.Contents.TileMatrixSet.find((function(e){return e.Identifier==s})),y=d.SupportedCRS;if(y&&(p=(0,l.U2)(y)),"projection"in t){var g=(0,l.U2)(t.projection);g&&(p&&!(0,l.OP)(g,p)||(p=g))}var m=!1,_="ne"==p.getAxisOrientation().substr(0,2),v=d.TileMatrix[0],A={MinTileCol:0,MinTileRow:0,MaxTileCol:v.MatrixWidth-1,MaxTileRow:v.MatrixHeight-1};if(u){A=u[u.length-1];var b=d.TileMatrix.find((function(e){return e.Identifier===A.TileMatrix||d.Identifier+":"+e.Identifier===A.TileMatrix}));b&&(v=b)}var w=28e-5*v.ScaleDenominator/p.getMetersPerUnit(),E=_?[v.TopLeftCorner[1],v.TopLeftCorner[0]]:v.TopLeftCorner,x=v.TileWidth*w,I=v.TileHeight*w,S=d.BoundingBox;S&&_&&(S=[S[1],S[0],S[3],S[2]]);var C=[E[0]+x*A.MinTileCol,E[1]-I*(1+A.MaxTileRow),E[0]+x*(1+A.MaxTileCol),E[1]-I*A.MinTileRow];if(void 0!==S&&!(0,o.r4)(S,C)){var P=r.WGS84BoundingBox,O=(0,l.U2)("EPSG:4326").getExtent();if(C=S,P)m=P[0]===O[0]&&P[2]===O[2];else{var T=(0,l.$A)(S,d.SupportedCRS,"EPSG:4326");m=T[0]-1e-10<=O[0]&&T[2]+1e-10>=O[2]}}var M=(0,a.b)(d,C,u),k=[],R=t.requestEncoding;if(R=void 0!==R?R:"","OperationsMetadata"in e&&"GetTile"in e.OperationsMetadata)for(var B=e.OperationsMetadata.GetTile.DCP.HTTP.Get,L=0,D=B.length;L<D;++L)if(B[L].Constraint){var j=B[L].Constraint.find((function(e){return"GetEncoding"==e.name})).AllowedValues.Value;if(""===R&&(R=j[0]),"KVP"!==R)break;j.includes("KVP")&&k.push(B[L].href)}else B[L].href&&(R="KVP",k.push(B[L].href));return 0===k.length&&(R="REST",r.ResourceURL.forEach((function(e){"tile"===e.resourceType&&(c=e.format,k.push(e.template))}))),{urls:k,layer:t.layer,matrixSet:s,format:c,projection:p,requestEncoding:R,tileGrid:M,style:f,dimensions:h,wrapX:m,crossOrigin:t.crossOrigin}}},26185:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(2993),i=r(25096);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}const c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,r,n,o=l(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var r=void 0!==(e=e||{}).projection?e.projection:"EPSG:3857",n=void 0!==e.tileGrid?e.tileGrid:(0,i.dl)({extent:(0,i.Tl)(r),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});return(t=o.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:r,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})).gutter_=void 0!==e.gutter?e.gutter:0,t}return t=u,(r=[{key:"getGutter",value:function(){return this.gutter_}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.Z)},48732:(e,t,r)=>{"use strict";r.d(t,{L:()=>n});var n=4},68392:(e,t,r)=>{"use strict";r.d(t,{IF:()=>h,Ke:()=>y,Q4:()=>p,eQ:()=>f,jt:()=>d});var n=r(48732),i=r(18939),o=r(68536),a=r(80237),s=r(36181),l=r(27811),u=r(55710),c=r(7697),f="1.3.0";function h(e,t,r,n,a){a.WIDTH=r[0],a.HEIGHT=r[1];var s,l=n.getAxisOrientation(),u=(0,o.n)(a.VERSION,"1.3")>=0;return a[u?"CRS":"SRS"]=n.getCode(),s=u&&"ne"==l.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,a.BBOX=s.join(","),(0,i.B)(e,a)}function p(e,t,r,i,o,a,l){a=Object.assign({REQUEST:"GetMap"},a);var u=t/r,f=[(0,c.NM)((0,s.dz)(e)/u,n.L),(0,c.NM)((0,s.Cr)(e)/u,n.L)];if(1!=r)switch(l){case"geoserver":var p=90*r+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+p:a.FORMAT_OPTIONS="dpi:"+p;break;case"mapserver":a.MAP_RESOLUTION=90*r;break;case"carmentaserver":case"qgis":a.DPI=90*r;break;default:throw new Error("Unknown `serverType` configured")}return h(o,e,f,i,a)}function d(e,t){return Object.assign({REQUEST:t,SERVICE:"WMS",VERSION:f,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},e)}function y(e){var t=void 0===e.hidpi||e.hidpi,r=(0,l.U2)(e.projection||"EPSG:3857"),n=e.ratio||1.5,i=e.load||a.Jx;return function(o,a,s){o=(0,u.Ps)(o,a,s,n),1==s||t&&void 0!==e.serverType||(s=1);var l=p(o,a,s,r,e.url,d(e.params,"GetMap"),e.serverType),c=new Image;return null!==e.crossOrigin&&(c.crossOrigin=e.crossOrigin),i(c,l).then((function(e){return{image:e,extent:o,pixelRatio:s}}))}}},16092:(e,t,r)=>{"use strict";r.d(t,{Sp:()=>o,bg:()=>u,cv:()=>c,xA:()=>s});var n=r(7697),i=6371008.8;function o(e,t,r){r=r||i;var o=(0,n.Yr)(e[1]),a=(0,n.Yr)(t[1]),s=(a-o)/2,l=(0,n.Yr)(t[0]-e[0])/2,u=Math.sin(s)*Math.sin(s)+Math.sin(l)*Math.sin(l)*Math.cos(o)*Math.cos(a);return 2*r*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function a(e,t){for(var r=0,n=0,i=e.length;n<i-1;++n)r+=o(e[n],e[n+1],t);return r}function s(e,t){var r=(t=t||{}).radius||i,n=t.projection||"EPSG:3857",o=e.getType();"GeometryCollection"!==o&&(e=e.clone().transform(n,"EPSG:4326"));var l,u,c,f,h,p,d=0;switch(o){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":d=a(l=e.getCoordinates(),r);break;case"MultiLineString":case"Polygon":for(c=0,f=(l=e.getCoordinates()).length;c<f;++c)d+=a(l[c],r);break;case"MultiPolygon":for(c=0,f=(l=e.getCoordinates()).length;c<f;++c)for(h=0,p=(u=l[c]).length;h<p;++h)d+=a(u[h],r);break;case"GeometryCollection":var y=e.getGeometries();for(c=0,f=y.length;c<f;++c)d+=s(y[c],t);break;default:throw new Error("Unsupported geometry type: "+o)}return d}function l(e,t){for(var r=0,i=e.length,o=e[i-1][0],a=e[i-1][1],s=0;s<i;s++){var l=e[s][0],u=e[s][1];r+=(0,n.Yr)(l-o)*(2+Math.sin((0,n.Yr)(a))+Math.sin((0,n.Yr)(u))),o=l,a=u}return r*t*t/2}function u(e,t){var r=(t=t||{}).radius||i,n=t.projection||"EPSG:3857",o=e.getType();"GeometryCollection"!==o&&(e=e.clone().transform(n,"EPSG:4326"));var a,s,c,f,h,p,d=0;switch(o){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(a=e.getCoordinates(),d=Math.abs(l(a[0],r)),c=1,f=a.length;c<f;++c)d-=Math.abs(l(a[c],r));break;case"MultiPolygon":for(c=0,f=(a=e.getCoordinates()).length;c<f;++c)for(s=a[c],d+=Math.abs(l(s[0],r)),h=1,p=s.length;h<p;++h)d-=Math.abs(l(s[h],r));break;case"GeometryCollection":var y=e.getGeometries();for(c=0,f=y.length;c<f;++c)d+=u(y[c],t);break;default:throw new Error("Unsupported geometry type: "+o)}return d}function c(e,t,r,o){o=o||i;var a=(0,n.Yr)(e[1]),s=(0,n.Yr)(e[0]),l=t/o,u=Math.asin(Math.sin(a)*Math.cos(l)+Math.cos(a)*Math.sin(l)*Math.cos(r)),c=s+Math.atan2(Math.sin(r)*Math.sin(l)*Math.cos(a),Math.cos(l)-Math.sin(a)*Math.sin(u));return[(0,n.Ux)(c),(0,n.Ux)(u)]}},68536:(e,t,r)=>{"use strict";function n(e,t,r){var n=void 0!==r?e.toFixed(r):""+e,i=n.indexOf(".");return(i=-1===i?n.length:i)>t?n:new Array(1+t-i).join("0")+n}function i(e,t){for(var r=(""+e).split("."),n=(""+t).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),a=parseInt(n[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}r.d(t,{n:()=>i,v:()=>n})},86732:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(97972);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}const a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}var t,r,i;return t=e,(r=[{key:"canExpireCache",value:function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}},{key:"expireCache",value:function(e){for(;this.canExpireCache();)this.pop()}},{key:"clear",value:function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}},{key:"containsKey",value:function(e){return this.entries_.hasOwnProperty(e)}},{key:"forEach",value:function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer}},{key:"get",value:function(e,t){var r=this.entries_[e];return(0,n.h)(void 0!==r,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}},{key:"remove",value:function(e){var t=this.entries_[e];return(0,n.h)(void 0!==t,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}},{key:"getCount",value:function(){return this.count_}},{key:"getKeys",value:function(){var e,t=new Array(this.count_),r=0;for(e=this.newest_;e;e=e.older)t[r++]=e.key_;return t}},{key:"getValues",value:function(){var e,t=new Array(this.count_),r=0;for(e=this.newest_;e;e=e.older)t[r++]=e.value_;return t}},{key:"peekLast",value:function(){return this.oldest_.value_}},{key:"peekLastKey",value:function(){return this.oldest_.key_}},{key:"peekFirstKey",value:function(){return this.newest_.key_}},{key:"peek",value:function(e){if(this.containsKey(e))return this.entries_[e].value_}},{key:"pop",value:function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}},{key:"replace",value:function(e,t){this.get(e),this.entries_[e].value_=t}},{key:"set",value:function(e,t){(0,n.h)(!(e in this.entries_),"Tried to set a value for a key that is used already");var r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}},{key:"setSize",value:function(e){this.highWaterMark=e}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},97845:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(82582),i=r(36181),o=r(20594),a=r(83482);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}const u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rbush_=new n(t),this.items_={}}var t,r,s;return t=e,(r=[{key:"insert",value:function(e,t){var r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[(0,o.sq)(t)]=r}},{key:"load",value:function(e,t){for(var r=new Array(t.length),n=0,i=t.length;n<i;n++){var a=e[n],s=t[n],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};r[n]=l,this.items_[(0,o.sq)(s)]=l}this.rbush_.load(r)}},{key:"remove",value:function(e){var t=(0,o.sq)(e),r=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(r)}},{key:"update",value:function(e,t){var r=this.items_[(0,o.sq)(t)],n=[r.minX,r.minY,r.maxX,r.maxY];(0,i.fS)(n,e)||(this.remove(t),this.insert(e,t))}},{key:"getAll",value:function(){return this.rbush_.all().map((function(e){return e.value}))}},{key:"getInExtent",value:function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map((function(e){return e.value}))}},{key:"forEach",value:function(e){return this.forEach_(this.getAll(),e)}},{key:"forEachInExtent",value:function(e,t){return this.forEach_(this.getInExtent(e),t)}},{key:"forEach_",value:function(e,t){for(var r,n=0,i=e.length;n<i;n++)if(r=t(e[n]))return r;return r}},{key:"isEmpty",value:function(){return(0,a.x)(this.items_)}},{key:"clear",value:function(){this.rbush_.clear(),this.items_={}}},{key:"getExtent",value:function(e){var t=this.rbush_.toJSON();return(0,i.T9)(t.minX,t.minY,t.maxX,t.maxY,e)}},{key:"concat",value:function(e){for(var t in this.rbush_.load(e.rbush_.all()),e.items_)this.items_[t]=e.items_[t]}}])&&l(t.prototype,r),s&&l(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},87908:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}r.d(t,{Z:()=>l});const l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,r,n,s=a(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),e=e||{radius:5},s.call(this,{points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:void 0!==e.scale?e.scale:1,rotation:void 0!==e.rotation?e.rotation:0,rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})}return t=l,(r=[{key:"clone",value:function(){var e=this.getScale(),t=new l({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}},{key:"setRadius",value:function(e){this.radius_=e,this.render()}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(r(62356).Z)},53969:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.d(t,{Z:()=>o});const o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.color_=void 0!==t.color?t.color:null}var t,r,n;return t=e,(r=[{key:"clone",value:function(){var t=this.getColor();return new e({color:Array.isArray(t)?t.slice():t||void 0})}},{key:"getColor",value:function(){return this.color_}},{key:"setColor",value:function(e){this.color_=e}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},52076:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(2115),i=r(94162),o=r(86534),a=r(22072),s=r(97972),l=r(27167),u=r(88199),c=r(80237),f=r(80650);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===h(o)?o:String(o)),n)}var i,o}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var m=null,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(l,e);var t,r,o,s=y(l);function l(e,t,r,n,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(a=s.call(this)).hitDetectionImage_=null,a.image_=e,a.crossOrigin_=r,a.canvas_={},a.color_=o,a.imageState_=void 0===n?i.Z.IDLE:n,a.size_=e&&e.width&&e.height?[e.width,e.height]:null,a.src_=t,a.tainted_,a}return t=l,(r=[{key:"initializeImage_",value:function(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}},{key:"isTainted_",value:function(){if(void 0===this.tainted_&&this.imageState_===i.Z.LOADED){m||(m=(0,u.E4)(1,1,void 0,{willReadFrequently:!0})),m.drawImage(this.image_,0,0);try{m.getImageData(0,0,1,1),this.tainted_=!1}catch(e){m=null,this.tainted_=!0}}return!0===this.tainted_}},{key:"dispatchChangeEvent_",value:function(){this.dispatchEvent(n.Z.CHANGE)}},{key:"handleImageError_",value:function(){this.imageState_=i.Z.ERROR,this.dispatchChangeEvent_()}},{key:"handleImageLoad_",value:function(){this.imageState_=i.Z.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}},{key:"getImage",value:function(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}},{key:"getPixelRatio",value:function(e){return this.replaceColor_(e),this.canvas_[e]?e:1}},{key:"getImageState",value:function(){return this.imageState_}},{key:"getHitDetectionImage",value:function(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],t=this.size_[1],r=(0,u.E4)(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}},{key:"getSize",value:function(){return this.size_}},{key:"getSrc",value:function(){return this.src_}},{key:"load",value:function(){var e=this;if(this.imageState_===i.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=i.Z.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(e){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,c.Q9)(this.image_,this.src_).then((function(t){e.image_=t,e.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}},{key:"replaceColor_",value:function(e){if(this.color_&&!this.canvas_[e]&&this.imageState_===i.Z.LOADED){var t=this.image_,r=document.createElement("canvas");r.width=Math.ceil(t.width*e),r.height=Math.ceil(t.height*e);var n=r.getContext("2d");n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=(0,a.XC)(this.color_),n.fillRect(0,0,r.width/e,r.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=r}}}])&&p(t.prototype,r),o&&p(t,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(l.Z);var v=r(20594);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===A(o)?o:String(o)),n)}var i,o}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},x.apply(this,arguments)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function O(e,t,r,n){return void 0!==r&&void 0!==n?[r/e,n/t]:void 0!==r?r/e:void 0!==n?n/t:1}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(u,e);var t,r,o,l=S(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var r=void 0!==(e=e||{}).opacity?e.opacity:1,n=void 0!==e.rotation?e.rotation:0,o=void 0!==e.scale?e.scale:1,c=void 0!==e.rotateWithView&&e.rotateWithView;(t=l.call(this,{opacity:r,rotation:n,scale:o,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:c,declutterMode:e.declutterMode})).anchor_=void 0!==e.anchor?e.anchor:[.5,.5],t.normalizedAnchor_=null,t.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",t.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",t.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",t.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;var h,p=void 0!==e.img?e.img:null,d=e.src;if((0,s.h)(!(void 0!==d&&p),"`image` and `src` cannot be provided at the same time"),void 0!==d&&0!==d.length||!p||(d=p.src||(0,v.sq)(p)),(0,s.h)(void 0!==d&&d.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,s.h)(!((void 0!==e.width||void 0!==e.height)&&void 0!==e.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==e.src?h=i.Z.IDLE:void 0!==p&&(h=p instanceof HTMLImageElement?p.complete?p.src?i.Z.LOADED:i.Z.IDLE:i.Z.LOADING:i.Z.LOADED),t.color_=void 0!==e.color?(0,a._2)(e.color):null,t.iconImage_=function(e,t,r,n,i){var o=void 0===t?void 0:f.c.get(t,r,i);return o||(o=new _(e,e instanceof HTMLImageElement?e.src||void 0:t,r,n,i),f.c.set(t,r,i,o)),o}(p,d,t.crossOrigin_,h,t.color_),t.offset_=void 0!==e.offset?e.offset:[0,0],t.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",t.origin_=null,t.size_=void 0!==e.size?e.size:null,void 0!==e.width||void 0!==e.height){var y,g;if(e.size){var m=b(e.size,2);y=m[0],g=m[1]}else{var A=t.getImage(1);if(A.width&&A.height)y=A.width,g=A.height;else if(A instanceof HTMLImageElement){t.initialOptions_=e;return t.listenImageChange((function r(){if(t.unlistenImageChange(r),t.initialOptions_){var n=t.iconImage_.getSize();t.setScale(O(n[0],n[1],e.width,e.height))}})),C(t)}}void 0!==y&&t.setScale(O(y,g,e.width,e.height))}return t}return t=u,(r=[{key:"clone",value:function(){var e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new u({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getAnchor",value:function(){var e=this.normalizedAnchor_;if(!e){e=this.anchor_;var t=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!t)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=t[0]),"fraction"==this.anchorYUnits_&&(e[1]*=t[1])}if("top-left"!=this.anchorOrigin_){if(!t)return null;e===this.anchor_&&(e=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(e[0]=-e[0]+t[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(e[1]=-e[1]+t[1])}this.normalizedAnchor_=e}var r=this.getDisplacement(),n=this.getScaleArray();return[e[0]-r[0]/n[0],e[1]+r[1]/n[1]]}},{key:"setAnchor",value:function(e){this.anchor_=e,this.normalizedAnchor_=null}},{key:"getColor",value:function(){return this.color_}},{key:"getImage",value:function(e){return this.iconImage_.getImage(e)}},{key:"getPixelRatio",value:function(e){return this.iconImage_.getPixelRatio(e)}},{key:"getImageSize",value:function(){return this.iconImage_.getSize()}},{key:"getImageState",value:function(){return this.iconImage_.getImageState()}},{key:"getHitDetectionImage",value:function(){return this.iconImage_.getHitDetectionImage()}},{key:"getOrigin",value:function(){if(this.origin_)return this.origin_;var e=this.offset_;if("top-left"!=this.offsetOrigin_){var t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(e[0]=r[0]-t[0]-e[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}},{key:"getSrc",value:function(){return this.iconImage_.getSrc()}},{key:"getSize",value:function(){return this.size_?this.size_:this.iconImage_.getSize()}},{key:"getWidth",value:function(){var e=this.getScaleArray();return this.size_?this.size_[0]*e[0]:this.iconImage_.getImageState()==i.Z.LOADED?this.iconImage_.getSize()[0]*e[0]:void 0}},{key:"getHeight",value:function(){var e=this.getScaleArray();return this.size_?this.size_[1]*e[1]:this.iconImage_.getImageState()==i.Z.LOADED?this.iconImage_.getSize()[1]*e[1]:void 0}},{key:"setScale",value:function(e){delete this.initialOptions_,x(P(u.prototype),"setScale",this).call(this,e)}},{key:"listenImageChange",value:function(e){this.iconImage_.addEventListener(n.Z.CHANGE,e)}},{key:"load",value:function(){this.iconImage_.load()}},{key:"unlistenImageChange",value:function(e){this.iconImage_.removeEventListener(n.Z.CHANGE,e)}}])&&E(t.prototype,r),o&&E(t,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(o.Z);const M=T},80650:(e,t,r)=>{"use strict";r.d(t,{c:()=>l});var n=r(22072);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}var t,r,n;return t=e,(r=[{key:"clear",value:function(){this.cache_={},this.cacheSize_=0}},{key:"canExpireCache",value:function(){return this.cacheSize_>this.maxCacheSize_}},{key:"expire",value:function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var r=this.cache_[t];3&e++||r.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}}},{key:"get",value:function(e,t,r){var n=s(e,t,r);return n in this.cache_?this.cache_[n]:null}},{key:"set",value:function(e,t,r,n){var i=s(e,t,r);this.cache_[i]=n,++this.cacheSize_}},{key:"setSize",value:function(e){this.maxCacheSize_=e,this.expire()}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t,r){return t+":"+e+":"+(r?(0,n.XC)(r):"null")}var l=new a},86534:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(20594),i=r(59468);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}const s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,i.Pq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}var t,r,o;return t=e,(r=[{key:"clone",value:function(){var t=this.getScale();return new e({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}},{key:"getOpacity",value:function(){return this.opacity_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getDisplacement",value:function(){return this.displacement_}},{key:"getDeclutterMode",value:function(){return this.declutterMode_}},{key:"getAnchor",value:function(){return(0,n.O3)()}},{key:"getImage",value:function(e){return(0,n.O3)()}},{key:"getHitDetectionImage",value:function(){return(0,n.O3)()}},{key:"getPixelRatio",value:function(e){return 1}},{key:"getImageState",value:function(){return(0,n.O3)()}},{key:"getImageSize",value:function(){return(0,n.O3)()}},{key:"getOrigin",value:function(){return(0,n.O3)()}},{key:"getSize",value:function(){return(0,n.O3)()}},{key:"setDisplacement",value:function(e){this.displacement_=e}},{key:"setOpacity",value:function(e){this.opacity_=e}},{key:"setRotateWithView",value:function(e){this.rotateWithView_=e}},{key:"setRotation",value:function(e){this.rotation_=e}},{key:"setScale",value:function(e){this.scale_=e,this.scaleArray_=(0,i.Pq)(e)}},{key:"listenImageChange",value:function(e){(0,n.O3)()}},{key:"load",value:function(){(0,n.O3)()}},{key:"unlistenImageChange",value:function(e){(0,n.O3)()}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},62356:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(94162),i=r(86534),o=r(22072),a=r(57446),s=r(88199),l=r(38283);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===u(o)?o:String(o)),n)}var i,o}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(p,e);var t,r,i,u=h(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var r=void 0!==e.rotateWithView&&e.rotateWithView;return(t=u.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],declutterMode:e.declutterMode})).canvas_=void 0,t.hitDetectionCanvas_=null,t.fill_=void 0!==e.fill?e.fill:null,t.origin_=[0,0],t.points_=e.points,t.radius_=void 0!==e.radius?e.radius:e.radius1,t.radius2_=e.radius2,t.angle_=void 0!==e.angle?e.angle:0,t.stroke_=void 0!==e.stroke?e.stroke:null,t.size_=null,t.renderOptions_=null,t.render(),t}return t=p,(r=[{key:"clone",value:function(){var e=this.getScale(),t=new p({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}},{key:"getAnchor",value:function(){var e=this.size_;if(!e)return null;var t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}},{key:"getAngle",value:function(){return this.angle_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(e){this.fill_=e,this.render()}},{key:"getHitDetectionImage",value:function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}},{key:"getImage",value:function(e){var t=this.canvas_[e];if(!t){var r=this.renderOptions_,n=(0,s.E4)(r.size*e,r.size*e);this.draw_(r,n,e),t=n.canvas,this.canvas_[e]=t}return t}},{key:"getPixelRatio",value:function(e){return e}},{key:"getImageSize",value:function(){return this.size_}},{key:"getImageState",value:function(){return n.Z.LOADED}},{key:"getOrigin",value:function(){return this.origin_}},{key:"getPoints",value:function(){return this.points_}},{key:"getRadius",value:function(){return this.radius_}},{key:"getRadius2",value:function(){return this.radius2_}},{key:"getSize",value:function(){return this.size_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(e){this.stroke_=e,this.render()}},{key:"listenImageChange",value:function(e){}},{key:"load",value:function(){}},{key:"unlistenImageChange",value:function(e){}},{key:"calculateLineJoinSize_",value:function(e,t,r){if(0===t||this.points_===1/0||"bevel"!==e&&"miter"!==e)return t;var n=this.radius_,i=void 0===this.radius2_?n:this.radius2_;if(n<i){var o=n;n=i,i=o}var a=void 0===this.radius2_?this.points_:2*this.points_,s=2*Math.PI/a,l=i*Math.sin(s),u=n-Math.sqrt(i*i-l*l),c=Math.sqrt(l*l+u*u),f=c/l;if("miter"===e&&f<=r)return f*t;var h=t/2/f,p=t/2*(u/c),d=Math.sqrt((n+h)*(n+h)+p*p)-n;if(void 0===this.radius2_||"bevel"===e)return 2*d;var y=n*Math.sin(s),g=i-Math.sqrt(n*n-y*y),m=Math.sqrt(y*y+g*g)/y;if(m<=r){var _=m*t/2-i-n;return 2*Math.max(d,_)}return 2*d}},{key:"createRenderOptions",value:function(){var e,t=l.mb,r=l.rc,n=0,i=null,o=0,s=0;this.stroke_&&(null===(e=this.stroke_.getColor())&&(e=l.Tx),e=(0,a.y)(e),void 0===(s=this.stroke_.getWidth())&&(s=l.yC),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(r=this.stroke_.getLineJoin())&&(r=l.rc),void 0===(t=this.stroke_.getLineCap())&&(t=l.mb),void 0===(n=this.stroke_.getMiterLimit())&&(n=l.V4));var u=this.calculateLineJoinSize_(r,s,n),c=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:e,strokeWidth:s,size:Math.ceil(2*c+u),lineCap:t,lineDash:i,lineDashOffset:o,lineJoin:r,miterLimit:n}}},{key:"render",value:function(){this.renderOptions_=this.createRenderOptions();var e=this.renderOptions_.size;this.canvas_={},this.size_=[e,e]}},{key:"draw_",value:function(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){var n=this.fill_.getColor();null===n&&(n=l.bL),t.fillStyle=(0,a.y)(n),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}},{key:"createHitDetectionCanvas_",value:function(e){if(this.fill_){var t=this.fill_.getColor(),r=0;if("string"==typeof t&&(t=(0,o._2)(t)),null===t?r=1:Array.isArray(t)&&(r=4===t.length?t[3]:1),0===r){var n=(0,s.E4)(e.size,e.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(e,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}},{key:"createPath_",value:function(e){var t=this.points_,r=this.radius_;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{var n=void 0===this.radius2_?r:this.radius2_;void 0!==this.radius2_&&(t*=2);for(var i=this.angle_-Math.PI/2,o=2*Math.PI/t,a=0;a<t;a++){var s=i+a*o,l=a%2==0?r:n;e.lineTo(l*Math.cos(s),l*Math.sin(s))}e.closePath()}}},{key:"drawHitDetectionCanvas_",value:function(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=l.bL,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}])&&c(t.prototype,r),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),p}(i.Z)},17774:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.d(t,{Z:()=>o});const o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}var t,r,n;return t=e,(r=[{key:"clone",value:function(){var t=this.getColor();return new e({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}},{key:"getColor",value:function(){return this.color_}},{key:"getLineCap",value:function(){return this.lineCap_}},{key:"getLineDash",value:function(){return this.lineDash_}},{key:"getLineDashOffset",value:function(){return this.lineDashOffset_}},{key:"getLineJoin",value:function(){return this.lineJoin_}},{key:"getMiterLimit",value:function(){return this.miterLimit_}},{key:"getWidth",value:function(){return this.width_}},{key:"setColor",value:function(e){this.color_=e}},{key:"setLineCap",value:function(e){this.lineCap_=e}},{key:"setLineDash",value:function(e){this.lineDash_=e}},{key:"setLineDashOffset",value:function(e){this.lineDashOffset_=e}},{key:"setLineJoin",value:function(e){this.lineJoin_=e}},{key:"setMiterLimit",value:function(e){this.miterLimit_=e}},{key:"setWidth",value:function(e){this.width_=e}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},78456:(e,t,r)=>{"use strict";r.d(t,{J$:()=>c,Ly:()=>p,ZP:()=>y,yF:()=>h});var n=r(87908),i=r(53969),o=r(17774),a=r(97972);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.geometry_=null,this.geometryFunction_=d,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}var t,r,n;return t=e,(r=[{key:"clone",value:function(){var t=this.getGeometry();return t&&"object"===s(t)&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"setRenderer",value:function(e){this.renderer_=e}},{key:"setHitDetectionRenderer",value:function(e){this.hitDetectionRenderer_=e}},{key:"getHitDetectionRenderer",value:function(){return this.hitDetectionRenderer_}},{key:"getGeometry",value:function(){return this.geometry_}},{key:"getGeometryFunction",value:function(){return this.geometryFunction_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(e){this.fill_=e}},{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(e){this.image_=e}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(e){this.stroke_=e}},{key:"getText",value:function(){return this.text_}},{key:"setText",value:function(e){this.text_=e}},{key:"getZIndex",value:function(){return this.zIndex_}},{key:"setGeometry",value:function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=d,this.geometry_=e}},{key:"setZIndex",value:function(e){this.zIndex_=e}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){var t;if("function"==typeof e)t=e;else{var r;if(Array.isArray(e))r=e;else(0,a.h)("function"==typeof e.getZIndex,"Expected an `Style` or an array of `Style`"),r=[e];t=function(){return r}}return t}var f=null;function h(e,t){if(!f){var r=new i.Z({color:"rgba(255,255,255,0.4)"}),a=new o.Z({color:"#3399CC",width:1.25});f=[new u({image:new n.Z({fill:r,stroke:a,radius:5}),fill:r,stroke:a})]}return f}function p(){var e={},t=[255,255,255,1],r=[0,153,255,1];return e.Polygon=[new u({fill:new i.Z({color:[255,255,255,.5]})})],e.MultiPolygon=e.Polygon,e.LineString=[new u({stroke:new o.Z({color:t,width:5})}),new u({stroke:new o.Z({color:r,width:3})})],e.MultiLineString=e.LineString,e.Circle=e.Polygon.concat(e.LineString),e.Point=[new u({image:new n.Z({radius:6,fill:new i.Z({color:r}),stroke:new o.Z({color:t,width:1.5})}),zIndex:1/0})],e.MultiPoint=e.Point,e.GeometryCollection=e.Polygon.concat(e.LineString,e.Point),e}function d(e){return e.getGeometry()}const y=u},5460:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(53969),i=r(59468);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}const s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,i.Pq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new n.Z({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}var t,r,o;return t=e,(r=[{key:"clone",value:function(){var t=this.getScale();return new e({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}},{key:"getOverflow",value:function(){return this.overflow_}},{key:"getFont",value:function(){return this.font_}},{key:"getMaxAngle",value:function(){return this.maxAngle_}},{key:"getPlacement",value:function(){return this.placement_}},{key:"getRepeat",value:function(){return this.repeat_}},{key:"getOffsetX",value:function(){return this.offsetX_}},{key:"getOffsetY",value:function(){return this.offsetY_}},{key:"getFill",value:function(){return this.fill_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getScaleArray",value:function(){return this.scaleArray_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"getText",value:function(){return this.text_}},{key:"getTextAlign",value:function(){return this.textAlign_}},{key:"getJustify",value:function(){return this.justify_}},{key:"getTextBaseline",value:function(){return this.textBaseline_}},{key:"getBackgroundFill",value:function(){return this.backgroundFill_}},{key:"getBackgroundStroke",value:function(){return this.backgroundStroke_}},{key:"getPadding",value:function(){return this.padding_}},{key:"setOverflow",value:function(e){this.overflow_=e}},{key:"setFont",value:function(e){this.font_=e}},{key:"setMaxAngle",value:function(e){this.maxAngle_=e}},{key:"setOffsetX",value:function(e){this.offsetX_=e}},{key:"setOffsetY",value:function(e){this.offsetY_=e}},{key:"setPlacement",value:function(e){this.placement_=e}},{key:"setRepeat",value:function(e){this.repeat_=e}},{key:"setRotateWithView",value:function(e){this.rotateWithView_=e}},{key:"setFill",value:function(e){this.fill_=e}},{key:"setRotation",value:function(e){this.rotation_=e}},{key:"setScale",value:function(e){this.scale_=e,this.scaleArray_=(0,i.Pq)(void 0!==e?e:1)}},{key:"setStroke",value:function(e){this.stroke_=e}},{key:"setText",value:function(e){this.text_=e}},{key:"setTextAlign",value:function(e){this.textAlign_=e}},{key:"setJustify",value:function(e){this.justify_=e}},{key:"setTextBaseline",value:function(e){this.textBaseline_=e}},{key:"setBackgroundFill",value:function(e){this.backgroundFill_=e}},{key:"setBackgroundStroke",value:function(e){this.backgroundStroke_=e}},{key:"setPadding",value:function(e){this.padding_=e}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},86879:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(a)?a:String(a)),i)}var o,a}r.d(t,{gM:()=>B,$h:()=>c,g$:()=>g,CL:()=>b,Ce:()=>v,I2:()=>d,JB:()=>A,aT:()=>R});const o=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.data=r,this.texture_=null}var t,r,n;return t=e,(r=[{key:"getTexture",value:function(e){if(!this.texture_){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var a=r(34859),s=r(22072);function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0};var f={};function h(e){if("number"==typeof e)return c.NUMBER;if("boolean"==typeof e)return c.BOOLEAN;if("string"==typeof e)return(0,s.e1)(e)?c.COLOR|c.STRING:c.STRING;if(!Array.isArray(e))throw new Error("Unhandled value type: ".concat(JSON.stringify(e)));var t=e;if(t.every((function(e){return"number"==typeof e})))return 3===t.length||4===t.length?c.COLOR|c.NUMBER_ARRAY:c.NUMBER_ARRAY;if("string"!=typeof t[0])throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(t)));var r=f[t[0]];if(void 0===r)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return r.getReturnType(t.slice(1))}function p(e){var t=[];return(e&c.NUMBER)>0&&t.push("number"),(e&c.COLOR)>0&&t.push("color"),(e&c.BOOLEAN)>0&&t.push("boolean"),(e&c.NUMBER_ARRAY)>0&&t.push("number[]"),(e&c.STRING)>0&&t.push("string"),t.length>0?t.join(", "):"(no type)"}function d(e){var t=e.toString();return t.includes(".")?t:t+".0"}function y(e){if(e.length<2||e.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(e.length,"(").concat(e.map(d).join(", "),")")}function g(e){var t=(0,s._2)(e),r=t.length>3?t[3]:1;return y([t[0]/255*r,t[1]/255*r,t[2]/255*r,r])}var m={},_=0;function v(e){return e in m||(m[e]=_++),m[e]}function A(e){return d(v(e))}function b(e,t,r){var n=void 0!==r?r:c.NUMBER;if(Array.isArray(t)&&"string"==typeof t[0]){var i=f[t[0]];if(void 0===i)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return i.toGlsl(e,t.slice(1),n)}var o=h(t)&n;if(T(t,o,""),(o&c.NUMBER)>0)return d(t);if((o&c.BOOLEAN)>0)return t.toString();if((o&c.STRING)>0)return A(t.toString());if((o&c.COLOR)>0)return g(t);if((o&c.NUMBER_ARRAY)>0)return y(t);throw new Error("Unexpected expression ".concat(t," (expected type ").concat(p(n),")"))}function w(e){if(!(h(e)&c.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(e)," instead"))}function E(e){for(var t=0;t<e.length;t++)w(e[t])}function x(e){if(!(h(e)&c.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(e)," instead"))}function I(e){if(!(h(e)&c.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(e)," instead"))}function S(e,t){if(e.length!==t)throw new Error("Exactly ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function C(e,t){if(e.length<t)throw new Error("At least ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function P(e,t){if(e.length>t)throw new Error("At most ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function O(e){if(e.length%2!=0)throw new Error("An even amount of arguments was expected, got ".concat(JSON.stringify(e)," instead"))}function T(e,t,r){if(t===c.NONE)throw new Error("No matching type was found for the following expression ".concat(r,": ").concat(JSON.stringify(e)))}function M(e,t,r){if(T(e,t,r),n=t,Math.log2(n)%1!=0)throw new Error("Expected to have a unique type for the following expression ".concat(r,": ").concat(JSON.stringify(e),"\nGot the following types instead: ").concat(p(t)));var n}function k(e,t,r,n){if((t&r)===c.NONE)throw new Error("Expected the ".concat(n," type of the following expression: ").concat(JSON.stringify(e)," to be of the following types: ").concat(p(r),"\nGot these types instead: ").concat(p(t)))}function R(e){return"u_var_"+e}f.get={getReturnType:function(e){return 2===e.length?function(e){switch(e){case"string":return c.STRING;case"color":return c.COLOR;case"number":return c.NUMBER;case"boolean":return c.BOOLEAN;case"number[]":return c.NUMBER_ARRAY;default:throw new Error("Unrecognized type hint: ".concat(e))}}(e[1]):c.ANY},toGlsl:function(e,t,r){C(t,1),P(t,2),x(t[0]);var n=r&f.get.getReturnType(t);M(["get"].concat(l(t)),n,"");var i=t[0].toString(),o=e.attributes.find((function(e){return e.name===i}));if(o){if(n!==o.type)throw new Error("The following attribute was used in different places with incompatible types: ".concat(i,"\nTypes were: ").concat(p(o.type)," and ").concat(p(n)))}else e.attributes.push({name:i,type:n});return(e.inFragmentShader?"v_":"a_")+i}},f.var={getReturnType:function(){return c.ANY},toGlsl:function(e,t,r){S(t,1),x(t[0]);var n=t[0].toString();if(!e.style.variables||void 0===e.style.variables[n])throw new Error("The following variable is missing from the style: ".concat(n));var i=r&h(e.style.variables[n]);M(["var"].concat(l(t)),i,"");var o=e.variables.find((function(e){return e.name===n}));if(o){if(i!==o.type)throw new Error("The following variable was used in different places with incompatible types: ".concat(n,"\nTypes were: ").concat(p(o.type)," and ").concat(p(i)))}else e.variables.push({name:n,type:i});return R(n)}};var B="u_paletteTextures";f.palette={getReturnType:function(){return c.COLOR},toGlsl:function(e,t){S(t,2),w(t[0]);var r=b(e,t[0]),n=t[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var i=n.length,a=new Uint8Array(4*i),l=0;l<i;l++){var u=n[l],c=void 0;if("string"==typeof u)c=(0,s.mL)(u);else{if(!Array.isArray(u))throw new Error("The second argument of palette must be an array of strings or colors");var f=u.length;if(4===f)c=u;else{if(3!==f)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(f));c=[u[0],u[1],u[2],1]}}var h=4*l;a[h]=c[0],a[h+1]=c[1],a[h+2]=c[2],a[h+3]=255*c[3]}e.paletteTextures||(e.paletteTextures=[]);var p="".concat(B,"[").concat(e.paletteTextures.length,"]"),d=new o(p,a);return e.paletteTextures.push(d),"texture2D(".concat(p,", vec2((").concat(r," + 0.5) / ").concat(i,".0, 0.5))")}};var L="getBandValue";function D(e){return{getReturnType:function(){return c.BOOLEAN},toGlsl:function(t,r){S(r,2);for(var n=c.ANY,i=0;i<r.length;i++)n&=h(r[i]);if(n===c.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return n&=~c.COLOR,"(".concat(b(t,r[0],n)," ").concat(e," ").concat(b(t,r[1],n),")")}}}function j(e){return{getReturnType:function(){return c.BOOLEAN},toGlsl:function(t,r){C(r,2);for(var n=0;n<r.length;n++)I(r[n]);var i=r.map((function(e){return b(t,e,c.BOOLEAN)})).join(" ".concat(e," "));return i="(".concat(i,")")}}}f.band={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){C(t,1),P(t,3);var r=t[0];if(!(L in e.functions)){for(var n="",i=e.bandCount||1,o=0;o<i;o++){var s=Math.floor(o/4),l=o%4;o===i-1&&1===l&&(l=3);var u="".concat(a.XE.TILE_TEXTURE_ARRAY,"[").concat(s,"]");n+="\n          if (band == ".concat(o+1,".0) {\n            return texture2D(").concat(u,", v_textureCoord + vec2(dx, dy))[").concat(l,"];\n          }\n        ")}e.functions[L]="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ".concat(a.XE.TEXTURE_PIXEL_WIDTH,";\n          float dy = yOffset / ").concat(a.XE.TEXTURE_PIXEL_HEIGHT,";\n          ").concat(n,"\n        }\n      ")}var c=b(e,r),f=b(e,t[1]||0),h=b(e,t[2]||0);return"".concat(L,"(").concat(c,", ").concat(f,", ").concat(h,")")}},f.time={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,0),"u_time"}},f.zoom={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,0),"u_zoom"}},f.resolution={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,0),"u_resolution"}},f["geometry-type"]={getReturnType:function(){return c.STRING},toGlsl:function(e,t){S(t,0);var r="geometryType",n=function e(t){var r=t.getType();switch(r){case"Point":case"LineString":case"Polygon":return r;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return r.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return e(t.getGeometries()[0])}};return e.attributes.find((function(e){return e.name===r}))||e.attributes.push({name:r,type:c.STRING,callback:function(e){return n(e.getGeometry())}}),(e.inFragmentShader?"v_":"a_")+r}},f["*"]={getReturnType:function(e){for(var t=c.NUMBER|c.COLOR,r=0;r<e.length;r++)t&=h(e[r]);return t},toGlsl:function(e,t,r){C(t,2);for(var n=r,i=0;i<t.length;i++)n&=h(t[i]);return k(t,n,c.NUMBER|c.COLOR,"output"),"(".concat(t.map((function(t){return b(e,t,n)})).join(" * "),")")}},f["/"]={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,2),E(t),"(".concat(b(e,t[0])," / ").concat(b(e,t[1]),")")}},f["+"]={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return C(t,2),E(t),"(".concat(t.map((function(t){return b(e,t)})).join(" + "),")")}},f["-"]={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,2),E(t),"(".concat(b(e,t[0])," - ").concat(b(e,t[1]),")")}},f.clamp={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){S(t,3),E(t);var r=b(e,t[1]),n=b(e,t[2]);return"clamp(".concat(b(e,t[0]),", ").concat(r,", ").concat(n,")")}},f["%"]={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,2),E(t),"mod(".concat(b(e,t[0]),", ").concat(b(e,t[1]),")")}},f["^"]={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,2),E(t),"pow(".concat(b(e,t[0]),", ").concat(b(e,t[1]),")")}},f.abs={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,1),E(t),"abs(".concat(b(e,t[0]),")")}},f.floor={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,1),E(t),"floor(".concat(b(e,t[0]),")")}},f.round={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,1),E(t),"floor(".concat(b(e,t[0])," + 0.5)")}},f.ceil={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,1),E(t),"ceil(".concat(b(e,t[0]),")")}},f.sin={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,1),E(t),"sin(".concat(b(e,t[0]),")")}},f.cos={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,1),E(t),"cos(".concat(b(e,t[0]),")")}},f.atan={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return C(t,1),P(t,2),E(t),2===t.length?"atan(".concat(b(e,t[0]),", ").concat(b(e,t[1]),")"):"atan(".concat(b(e,t[0]),")")}},f.sqrt={getReturnType:function(){return c.NUMBER},toGlsl:function(e,t){return S(t,1),E(t),"sqrt(".concat(b(e,t[0]),")")}},f[">"]={getReturnType:function(){return c.BOOLEAN},toGlsl:function(e,t){return S(t,2),E(t),"(".concat(b(e,t[0])," > ").concat(b(e,t[1]),")")}},f[">="]={getReturnType:function(){return c.BOOLEAN},toGlsl:function(e,t){return S(t,2),E(t),"(".concat(b(e,t[0])," >= ").concat(b(e,t[1]),")")}},f["<"]={getReturnType:function(){return c.BOOLEAN},toGlsl:function(e,t){return S(t,2),E(t),"(".concat(b(e,t[0])," < ").concat(b(e,t[1]),")")}},f["<="]={getReturnType:function(){return c.BOOLEAN},toGlsl:function(e,t){return S(t,2),E(t),"(".concat(b(e,t[0])," <= ").concat(b(e,t[1]),")")}},f["=="]=D("=="),f["!="]=D("!="),f["!"]={getReturnType:function(){return c.BOOLEAN},toGlsl:function(e,t){return S(t,1),I(t[0]),"(!".concat(b(e,t[0],c.BOOLEAN),")")}},f.all=j("&&"),f.any=j("||"),f.between={getReturnType:function(){return c.BOOLEAN},toGlsl:function(e,t){S(t,3),E(t);var r=b(e,t[1]),n=b(e,t[2]),i=b(e,t[0]);return"(".concat(i," >= ").concat(r," && ").concat(i," <= ").concat(n,")")}},f.array={getReturnType:function(){return c.NUMBER_ARRAY},toGlsl:function(e,t){C(t,2),P(t,4),E(t);var r=t.map((function(t){return b(e,t)}));return"vec".concat(t.length,"(").concat(r.join(", "),")")}},f.color={getReturnType:function(){return c.COLOR},toGlsl:function(e,t){C(t,3),P(t,4),E(t);var r=t.slice(0,3).map((function(t){return"".concat(b(e,t)," / 255.0")}));if(3===t.length)return"vec4(".concat(r.join(", "),", 1.0)");var n=b(e,t[3]);return"(".concat(n," * vec4(").concat(r.join(", "),", 1.0))")}},f.interpolate={getReturnType:function(e){for(var t=c.COLOR|c.NUMBER,r=3;r<e.length;r+=2)t&=h(e[r]);return t},toGlsl:function(e,t,r){O(t),C(t,6);var n,i=t[0];switch(i[0]){case"linear":n=1;break;case"exponential":n=i[1];break;default:n=null}if(!n)throw new Error('Invalid interpolation type for "interpolate" operator, received: '.concat(JSON.stringify(i)));var o=c.NUMBER,a=f.interpolate.getReturnType(t)&r;M(["interpolate"].concat(l(t)),a,"output");for(var s=b(e,t[1],o),u=d(n),h="",p=2;p<t.length-2;p+=2){var y=b(e,t[p],o),g=h||b(e,t[p+1],a),m=b(e,t[p+2],o),_=b(e,t[p+3],a),v=void 0;v=1===n?"(".concat(s," - ").concat(y,") / (").concat(m," - ").concat(y,")"):"(pow(".concat(u,", (").concat(s," - ").concat(y,")) - 1.0) / (pow(").concat(u,", (").concat(m," - ").concat(y,")) - 1.0)"),h="mix(".concat(g,", ").concat(_,", clamp(").concat(v,", 0.0, 1.0))")}return h}},f.match={getReturnType:function(e){for(var t=c.ANY,r=2;r<e.length;r+=2)t&=h(e[r]);return t&=h(e[e.length-1])},toGlsl:function(e,t,r){O(t),C(t,4);for(var n=h(t[0]),i=1;i<t.length-1;i+=2)n&=h(t[i]);k(["match"].concat(l(t)),n,c.STRING|c.NUMBER|c.BOOLEAN,"input"),n=(c.STRING|c.NUMBER|c.BOOLEAN)&n;var o=f.match.getReturnType(t)&r;M(["match"].concat(l(t)),o,"output");for(var a=b(e,t[0],n),s=b(e,t[t.length-1],o),u=null,p=t.length-3;p>=1;p-=2){var d=b(e,t[p],n),y=b(e,t[p+1],o);u="(".concat(a," == ").concat(d," ? ").concat(y," : ").concat(u||s,")")}return u}},f.case={getReturnType:function(e){for(var t=c.ANY,r=1;r<e.length;r+=2)t&=h(e[r]);return t&=h(e[e.length-1])},toGlsl:function(e,t,r){!function(e){if(e.length%2==0)throw new Error("An odd amount of arguments was expected, got ".concat(JSON.stringify(e)," instead"))}(t),C(t,3);var n=f.case.getReturnType(t)&r;M(["case"].concat(l(t)),n,"output");for(var i=0;i<t.length-1;i+=2)I(t[i]);for(var o=b(e,t[t.length-1],n),a=null,s=t.length-3;s>=0;s-=2){var u=b(e,t[s],c.BOOLEAN),h=b(e,t[s+1],n);a="(".concat(u," ? ").concat(h," : ").concat(a||o,")")}return a}},f.in={getReturnType:function(e){return c.BOOLEAN},toGlsl:function(e,t){S(t,2);var r=t[0],n=t[1];if(!Array.isArray(n))throw new Error('The "in" operator expects an array literal as its second argument.');if("string"==typeof n[0]){if("literal"!==n[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');n=n[1]}for(var i=h(r),o=0;o<n.length-1;o+=1)i&=h(n[o]);k(["match"].concat(l(t)),i,c.STRING|c.NUMBER|c.BOOLEAN,"input"),i=(c.STRING|c.NUMBER|c.BOOLEAN)&i;for(var a=function(e,t){return"operator_".concat(e,"_").concat(Object.keys(t.functions).length)}("in",e),s=[],u=0;u<n.length;u+=1)s.push("  if (inputValue == ".concat(b(e,n[u],i),") { return true; }"));return e.functions[a]="bool ".concat(a,"(float inputValue) {\n").concat(s.join("\n"),"\n  return false;\n}"),"".concat(a,"(").concat(b(e,r,i),")")}}},62718:(e,t,r)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r,n){return void 0!==n?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function a(e,t,r){return e+"/"+t+"/"+r}function s(e){return a(e[0],e[1],e[2])}function l(e){var t=n(e.substring(e.lastIndexOf("/")+1,e.length).split(",").map(Number),3);return a(t[0],t[1],t[2])}function u(e){return e.split("/").map(Number)}function c(e){return(e[1]<<e[0])+e[2]}function f(e,t){var r=e[0],n=e[1],i=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var o=t.getFullTileRange(r);return!o||o.containsXY(n,i)}r.d(t,{MY:()=>l,T9:()=>o,Ul:()=>u,km:()=>s,lg:()=>a,tE:()=>f,vp:()=>c})},25096:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>u,Tl:()=>h,X$:()=>l,dl:()=>c});var n=r(36839),i=r(49518),o=r(27811),a=r(36181),s=r(59468);function l(e){var t=e.getDefaultTileGrid();return t||(t=function(e,t,r,i){var o=h(e);return function(e,t,r,i){i=void 0!==i?i:"top-left";var o=f(e,t,r);return new n.Z({extent:e,origin:(0,a.g0)(e,i),resolutions:o,tileSize:r})}(o,t,r,i)}(e),e.setDefaultTileGrid(t)),t}function u(e,t,r){var n=t[0],i=e.getTileCoordCenter(t),o=h(r);if(!(0,a.b8)(o,i)){var s=(0,a.dz)(o),l=Math.ceil((o[0]-i[0])/s);return i[0]+=s*l,e.getTileCoordForCoordAndZ(i,n)}return t}function c(e){var t=e||{},r=t.extent||(0,o.U2)("EPSG:3857").getExtent(),i={extent:r,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:f(r,t.maxZoom,t.tileSize,t.maxResolution)};return new n.Z(i)}function f(e,t,r,n){t=void 0!==t?t:i.e,r=(0,s.Pq)(void 0!==r?r:i.S);var o=(0,a.Cr)(e),l=(0,a.dz)(e);n=n>0?n:Math.max(l/r[0],o/r[1]);for(var u=t+1,c=new Array(u),f=0;f<u;++f)c[f]=n/Math.pow(2,f);return c}function h(e){var t=(e=(0,o.U2)(e)).getExtent();if(!t){var r=180*o.Wm.degrees/e.getMetersPerUnit();t=(0,a.T9)(-r,-r,r,r)}return t}},36839:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var n=r(70559),i=r(49518),o=r(97972),a=r(7697),s=r(36181),l=r(62718),u=r(871),c=r(11133),f=r(59468);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===h(o)?o:String(o)),n)}var i,o}var d=[0,0,0];const y=function(){function e(t){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,o.h)((0,c.pT)(this.resolutions_,(function(e,t){return t-e}),!0),"`resolutions` must be sorted in descending order"),!t.origins)for(var a=0,l=this.resolutions_.length-1;a<l;++a)if(r){if(this.resolutions_[a]/this.resolutions_[a+1]!==r){r=void 0;break}}else r=this.resolutions_[a]/this.resolutions_[a+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,o.h)(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));var u=t.extent;void 0===u||this.origin_||this.origins_||(this.origin_=(0,s.rL)(u)),(0,o.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,o.h)(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:i.S,(0,o.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==u?u:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(e,t){var r=new n.Z(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));if(u){var i=this.getTileRangeForExtentAndZ(u,t);r.minX=Math.max(i.minX,r.minX),r.maxX=Math.min(i.maxX,r.maxX),r.minY=Math.max(i.minY,r.minY),r.maxY=Math.min(i.maxY,r.maxY)}return r}),this):u&&this.calculateTileRanges_(u)}var t,r,h;return t=e,(r=[{key:"forEachTileCoord",value:function(e,t,r){for(var n=this.getTileRangeForExtentAndZ(e,t),i=n.minX,o=n.maxX;i<=o;++i)for(var a=n.minY,s=n.maxY;a<=s;++a)r([t,i,a])}},{key:"forEachTileCoordParentTileRange",value:function(e,t,r,i){var o,a,s,l=null,u=e[0]-1;for(2===this.zoomFactor_?(a=e[1],s=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(2===this.zoomFactor_?(a=Math.floor(a/2),s=Math.floor(s/2),o=(0,n.T)(a,a,s,s,r)):o=this.getTileRangeForExtentAndZ(l,u,r),t(u,o))return!0;--u}return!1}},{key:"getExtent",value:function(){return this.extent_}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"getOrigin",value:function(e){return this.origin_?this.origin_:this.origins_[e]}},{key:"getResolution",value:function(e){return this.resolutions_[e]}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getTileCoordChildTileRange",value:function(e,t,r){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*e[1],o=2*e[2];return(0,n.T)(i,i+1,o,o+1,t)}var a=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e[0]+1,t)}return null}},{key:"getTileRangeForTileCoordAndZ",value:function(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;var i=e[0],o=e[1],a=e[2];if(t===i)return(0,n.T)(o,a,o,a,r);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,t-i),l=Math.floor(o*s),u=Math.floor(a*s);if(t<i)return(0,n.T)(l,l,u,u,r);var c=Math.floor(s*(o+1))-1,f=Math.floor(s*(a+1))-1;return(0,n.T)(l,c,u,f,r)}var h=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,t,r)}},{key:"getTileRangeForExtentAndZ",value:function(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,d);var i=d[1],o=d[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,d);var a=d[1],s=d[2];return(0,n.T)(i,a,o,s,r)}},{key:"getTileCoordCenter",value:function(e){var t=this.getOrigin(e[0]),r=this.getResolution(e[0]),n=(0,f.Pq)(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*r,t[1]-(e[2]+.5)*n[1]*r]}},{key:"getTileCoordExtent",value:function(e,t){var r=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=(0,f.Pq)(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*i[0]*n,a=r[1]-(e[2]+1)*i[1]*n,l=o+i[0]*n,u=a+i[1]*n;return(0,s.T9)(o,a,l,u,t)}},{key:"getTileCoordForCoordAndResolution",value:function(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}},{key:"getTileCoordForXYAndResolution_",value:function(e,t,r,n,i){var o=this.getZForResolution(r),s=r/this.getResolution(o),u=this.getOrigin(o),c=(0,f.Pq)(this.getTileSize(o),this.tmpSize_),h=s*(e-u[0])/r/c[0],p=s*(u[1]-t)/r/c[1];return n?(h=(0,a.mD)(h,5)-1,p=(0,a.mD)(p,5)-1):(h=(0,a.GW)(h,5),p=(0,a.GW)(p,5)),(0,l.T9)(o,h,p,i)}},{key:"getTileCoordForXYAndZ_",value:function(e,t,r,n,i){var o=this.getOrigin(r),s=this.getResolution(r),u=(0,f.Pq)(this.getTileSize(r),this.tmpSize_),c=(e-o[0])/s/u[0],h=(o[1]-t)/s/u[1];return n?(c=(0,a.mD)(c,5)-1,h=(0,a.mD)(h,5)-1):(c=(0,a.GW)(c,5),h=(0,a.GW)(h,5)),(0,l.T9)(r,c,h,i)}},{key:"getTileCoordForCoordAndZ",value:function(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}},{key:"getTileCoordResolution",value:function(e){return this.resolutions_[e[0]]}},{key:"getTileSize",value:function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}},{key:"getFullTileRange",value:function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}},{key:"getZForResolution",value:function(e,t){var r=(0,c.h7)(this.resolutions_,e,t||0);return(0,a.uZ)(r,this.minZoom,this.maxZoom)}},{key:"tileCoordIntersectsViewport",value:function(e,t){return(0,u.mV)(t,0,t.length,2,this.getTileCoordExtent(e))}},{key:"calculateTileRanges_",value:function(e){for(var t=this.resolutions_.length,r=new Array(t),n=this.minZoom;n<t;++n)r[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=r}}])&&p(t.prototype,r),h&&p(t,h),Object.defineProperty(t,"prototype",{writable:!1}),e}()},67858:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f,b:()=>h});var n=r(36839),i=r(27811);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var i=u(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(o,e);var t,r,n,i=l(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})).matrixIds_=e.matrixIds,t}return t=o,(r=[{key:"getMatrixId",value:function(e){return this.matrixIds_[e]}},{key:"getMatrixIds",value:function(){return this.matrixIds_}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(n.Z);const f=c;function h(e,t,r){var n=[],o=[],a=[],s=[],l=[];r=void 0!==r?r:[];var u="TileMatrix",f="Identifier",h="ScaleDenominator",p="TopLeftCorner",d=e.SupportedCRS,y=(0,i.U2)(d),g=y.getMetersPerUnit(),m="ne"==y.getAxisOrientation().substr(0,2);return e[u].sort((function(e,t){return t[h]-e[h]})),e[u].forEach((function(t){if(!(r.length>0)||r.find((function(r){return t[f]==r[u]||!t[f].includes(":")&&e[f]+":"+t[f]===r[u]}))){o.push(t[f]);var i=28e-5*t[h]/g,c=t.TileWidth,d=t.TileHeight;m?a.push([t[p][1],t[p][0]]):a.push(t[p]),n.push(i),s.push(c==d?c:[c,d]),l.push([t.MatrixWidth,t.MatrixHeight])}})),new c({extent:t,origins:a,resolutions:n,matrixIds:o,tileSizes:s,sizes:l})}},49518:(e,t,r)=>{"use strict";r.d(t,{S:()=>i,e:()=>n});var n=42,i=256},90629:(e,t,r)=>{"use strict";r.d(t,{Gk:()=>c,Un:()=>l,uR:()=>s,vU:()=>u});var n=r(97972),i=r(7697),o=r(62718);function a(e,t){var r=/\{z\}/g,i=/\{x\}/g,o=/\{y\}/g,a=/\{-y\}/g;return function(s,l,u){if(s)return e.replace(r,s[0].toString()).replace(i,s[1].toString()).replace(o,s[2].toString()).replace(a,(function(){var e=s[0],r=t.getFullTileRange(e);return(0,n.h)(r,"The {-y} placeholder requires a tile grid with extent"),(r.getHeight()-s[2]-1).toString()}))}}function s(e,t){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=a(e[i],t);return l(n)}function l(e){return 1===e.length?e[0]:function(t,r,n){if(t){var a=(0,o.vp)(t),s=(0,i.$W)(a,e.length);return e[s](t,r,n)}}}function u(e,t,r){}function c(e){var t=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var n,i=r[1].charCodeAt(0),o=r[2].charCodeAt(0);for(n=i;n<=o;++n)t.push(e.replace(r[0],String.fromCharCode(n)));return t}if(r=/\{(\d+)-(\d+)\}/.exec(e)){for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)t.push(e.replace(r[0],s.toString()));return t}return t.push(e),t}},16453:(e,t,r)=>{"use strict";r.d(t,{BB:()=>A,Iu:()=>g,Jp:()=>u,U1:()=>p,Ue:()=>s,bA:()=>d,fs:()=>_,lk:()=>f,mc:()=>l,n3:()=>y,nb:()=>v,nn:()=>h,qC:()=>m});var n,i=r(45907),o=r(97972),a=new Array(6);function s(){return[1,0,0,1,0,0]}function l(e){return c(e,1,0,0,1,0,0)}function u(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=t[0],u=t[1],c=t[2],f=t[3],h=t[4],p=t[5];return e[0]=r*l+i*u,e[1]=n*l+o*u,e[2]=r*c+i*f,e[3]=n*c+o*f,e[4]=r*h+i*p+a,e[5]=n*h+o*p+s,e}function c(e,t,r,n,i,o,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e}function f(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function h(e,t){var r=t[0],n=t[1];return t[0]=e[0]*r+e[2]*n+e[4],t[1]=e[1]*r+e[3]*n+e[5],t}function p(e,t){var r=Math.cos(t),n=Math.sin(t);return u(e,c(a,r,n,-n,r,0,0))}function d(e,t,r){return u(e,c(a,t,0,0,r,0,0))}function y(e,t,r){return c(e,t,0,0,r,0,0)}function g(e,t,r){return u(e,c(a,1,0,0,1,t,r))}function m(e,t,r,n,i,o,a,s){var l=Math.sin(o),u=Math.cos(o);return e[0]=n*u,e[1]=i*l,e[2]=-n*l,e[3]=i*u,e[4]=a*n*u-s*n*l+t,e[5]=a*i*l+s*i*u+r,e}function _(e,t,r,n,i,o,a){return A(m([1,0,0,1,0,0],e,t,r,n,i,o,a))}function v(e,t){var r,n=(r=t)[0]*r[3]-r[1]*r[2];(0,o.h)(0!==n,"Transformation matrix cannot be inverted");var i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5];return e[0]=l/n,e[1]=-a/n,e[2]=-s/n,e[3]=i/n,e[4]=(s*c-l*u)/n,e[5]=-(i*c-a*u)/n,e}function A(e){var t="matrix("+e.join(", ")+")";if(i.Id)return t;var r=n||(n=document.createElement("div"));return r.style.transform=t,r.style.transform}},18939:(e,t,r)=>{"use strict";function n(e,t){var r=[];Object.keys(t).forEach((function(e){null!==t[e]&&void 0!==t[e]&&r.push(e+"="+encodeURIComponent(t[e]))}));var n=r.join("&");return e=e.replace(/[?&]$/,""),(e+=e.includes("?")?"&":"?")+n}r.d(t,{B:()=>n})},20594:(e,t,r)=>{"use strict";function n(){throw new Error("Unimplemented abstract method.")}r.d(t,{O3:()=>n,sq:()=>o});var i=0;function o(e){return e.ol_uid||(e.ol_uid=String(++i))}},85603:(e,t,r)=>{"use strict";function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}r.d(t,{U:()=>n,u:()=>i})},65033:(e,t,r)=>{"use strict";r.d(t,{Ae:()=>c,F_:()=>a,MB:()=>s,RF:()=>h,cX:()=>o,fw:()=>d,kd:()=>l,qO:()=>i,r1:()=>f,wg:()=>u});var n=r(45907),i=34962,o=34963,a=35040,s=35044,l=35048,u=5121,c=5123,f=5125,h=5126,p=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function d(e,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!n.ME},t);for(var r=p.length,i=0;i<r;++i)try{var o=e.getContext(p[i],t);if(o)return o}catch(e){}return null}},77599:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>u});var n=r(65033),i=r(97972);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,a=void 0,a=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}var s={STATIC_DRAW:n.MB,STREAM_DRAW:n.F_,DYNAMIC_DRAW:n.kd};function l(e){switch(e){case n.qO:return Float32Array;case n.cX:return Uint32Array;default:return Float32Array}}const u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.array=null,this.type=t,(0,i.h)(t===n.qO||t===n.cX,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage=void 0!==r?r:s.STATIC_DRAW}var t,r,o;return t=e,(r=[{key:"ofSize",value:function(e){return this.array=new(l(this.type))(e),this}},{key:"fromArray",value:function(e){return this.array=l(this.type).from(e),this}},{key:"fromArrayBuffer",value:function(e){return this.array=new(l(this.type))(e),this}},{key:"getType",value:function(){return this.type}},{key:"getArray",value:function(){return this.array}},{key:"getUsage",value:function(){return this.usage}},{key:"getSize",value:function(){return this.array?this.array.length:0}}])&&a(t.prototype,r),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},39:(e,t,r)=>{"use strict";r.d(t,{GC:()=>b,ZC:()=>A,ZP:()=>S});const n="webglcontextlost",i="webglcontextrestored";var o=r(31706),a=r(20594);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===s(o)?o:String(o)),n)}var i,o}const u=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl_=t.webGlContext;var n=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();var i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),n.compileShader(i);var o=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(o,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),n.compileShader(o),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,i),n.attachShader(this.renderTargetProgram_,o),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach((function(e){r.uniforms_.push({value:t.uniforms[e],location:n.getUniformLocation(r.renderTargetProgram_,e)})}))}var t,r,n;return t=e,(r=[{key:"getGL",value:function(){return this.gl_}},{key:"init",value:function(e){var t=this.getGL(),r=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var n=t.RGBA,i=t.RGBA,o=t.UNSIGNED_BYTE;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,0,n,r[0],r[1],0,i,o,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,r[0],r[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}},{key:"apply",value:function(e,t,r,n){var i=this.getGL(),o=e.size;if(i.bindFramebuffer(i.FRAMEBUFFER,t?t.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),!t){var s=(0,a.sq)(i.canvas);if(!e.renderTargets[s]){var l=i.getContextAttributes();l&&l.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)),e.renderTargets[s]=!0}}i.disable(i.DEPTH_TEST),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),i.uniform1i(this.renderTargetTextureLocation_,0);var u=e.layerStatesArray[e.layerIndex].opacity;i.uniform1f(this.renderTargetOpacityLocation_,u),this.applyUniforms(e),r&&r(i,e),i.drawArrays(i.TRIANGLES,0,6),n&&n(i,e)}},{key:"getFrameBuffer",value:function(){return this.frameBuffer_}},{key:"getDepthBuffer",value:function(){return this.depthBuffer_}},{key:"applyUniforms",value:function(e){var t,r=this.getGL(),n=1;this.uniforms_.forEach((function(i){if((t="function"==typeof i.value?i.value(e):i.value)instanceof HTMLCanvasElement||t instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(n)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),t instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,t.width,t.height,0,r.UNSIGNED_BYTE,new Uint8Array(t.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),r.uniform1i(i.location,n++);else if(Array.isArray(t))switch(t.length){case 2:return void r.uniform2f(i.location,t[0],t[1]);case 3:return void r.uniform3f(i.location,t[0],t[1],t[2]);case 4:return void r.uniform4f(i.location,t[0],t[1],t[2],t[3]);default:return}else"number"==typeof t&&r.uniform1f(i.location,t)}))}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var c=r(65033),f=r(83482),h=r(16453),p=r(85603);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===d(o)?o:String(o)),n)}var i,o}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var i=v(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,r)}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var A={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},b={UNSIGNED_BYTE:c.wg,UNSIGNED_SHORT:c.Ae,UNSIGNED_INT:c.r1,FLOAT:c.RF},w={};function E(e){return"shared/"+e}var x=0;function I(e){switch(e){case b.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case b.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case b.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case b.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}const S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(l,e);var t,r,o,s=m(l);function l(e){var t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),e=e||{},(t=s.call(this)).boundHandleWebGLContextLost_=t.handleWebGLContextLost.bind(_(t)),t.boundHandleWebGLContextRestored_=t.handleWebGLContextRestored.bind(_(t)),t.canvasCacheKey_=e.canvasCacheKey?E(e.canvasCacheKey):(r="unique/"+x,x+=1,r),t.gl_=function(e){var t=w[e];if(!t){var r=document.createElement("canvas");r.width=1,r.height=1,r.style.position="absolute",r.style.left="0",t={users:0,context:(0,c.fw)(r)},w[e]=t}return t.users+=1,t.context}(t.canvasCacheKey_),t.bufferCache_={},t.extensionCache_={},t.currentProgram_=null,t.needsToBeRecreated_=!1;var o=t.gl_.canvas;return o.addEventListener(n,t.boundHandleWebGLContextLost_),o.addEventListener(i,t.boundHandleWebGLContextRestored_),t.offsetRotateMatrix_=(0,h.Ue)(),t.offsetScaleMatrix_=(0,h.Ue)(),t.tmpMat4_=(0,p.U)(),t.uniformLocationsByProgram_={},t.attribLocationsByProgram_={},t.uniforms_=[],e.uniforms&&t.setUniforms(e.uniforms),t.postProcessPasses_=e.postProcesses?e.postProcesses.map((function(e){return new u({webGlContext:t.gl_,scaleRatio:e.scaleRatio,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms})})):[new u({webGlContext:t.gl_})],t.shaderCompileErrors_=null,t.startTime_=Date.now(),t}return t=l,(r=[{key:"setUniforms",value:function(e){this.uniforms_=[],this.addUniforms(e)}},{key:"addUniforms",value:function(e){for(var t in e)this.uniforms_.push({name:t,value:e[t]})}},{key:"canvasCacheKeyMatches",value:function(e){return this.canvasCacheKey_===E(e)}},{key:"getExtension",value:function(e){if(e in this.extensionCache_)return this.extensionCache_[e];var t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}},{key:"bindBuffer",value:function(e){var t=this.gl_,r=(0,a.sq)(e),n=this.bufferCache_[r];n||(n={buffer:e,webGlBuffer:t.createBuffer()},this.bufferCache_[r]=n),t.bindBuffer(e.getType(),n.webGlBuffer)}},{key:"flushBufferData",value:function(e){var t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}},{key:"deleteBuffer",value:function(e){var t=this.gl_,r=(0,a.sq)(e),n=this.bufferCache_[r];n&&!t.isContextLost()&&t.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]}},{key:"disposeInternal",value:function(){var e=this.gl_.canvas;e.removeEventListener(n,this.boundHandleWebGLContextLost_),e.removeEventListener(i,this.boundHandleWebGLContextRestored_),function(e){var t=w[e];if(t&&(t.users-=1,!(t.users>0))){var r=t.context,n=r.getExtension("WEBGL_lose_context");n&&n.loseContext();var i=r.canvas;i.width=1,i.height=1,delete w[e]}}(this.canvasCacheKey_),delete this.gl_}},{key:"prepareDraw",value:function(e,t,r){var n=this.gl_,i=this.getCanvas(),o=e.size,a=e.pixelRatio;i.width===o[0]*a&&i.height===o[1]*a||(i.width=o[0]*a,i.height=o[1]*a,i.style.width=o[0]+"px",i.style.height=o[1]+"px");for(var s=this.postProcessPasses_.length-1;s>=0;s--)this.postProcessPasses_[s].init(e);n.bindTexture(n.TEXTURE_2D,null),n.clearColor(0,0,0,0),n.depthRange(0,1),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,t?n.ZERO:n.ONE_MINUS_SRC_ALPHA),r?(n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL)):n.disable(n.DEPTH_TEST)}},{key:"bindTexture",value:function(e,t,r){var n=this.gl_;n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.uniform1i(this.getUniformLocation(r),t)}},{key:"prepareDrawToRenderTarget",value:function(e,t,r,n){var i=this.gl_,o=t.getSize();i.bindFramebuffer(i.FRAMEBUFFER,t.getFramebuffer()),i.bindRenderbuffer(i.RENDERBUFFER,t.getDepthbuffer()),i.viewport(0,0,o[0],o[1]),i.bindTexture(i.TEXTURE_2D,t.getTexture()),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,r?i.ZERO:i.ONE_MINUS_SRC_ALPHA),n?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}},{key:"drawElements",value:function(e,t){var r=this.gl_;this.getExtension("OES_element_index_uint");var n=r.UNSIGNED_INT,i=t-e,o=4*e;r.drawElements(r.TRIANGLES,i,n,o)}},{key:"finalizeDraw",value:function(e,t,r){for(var n=0,i=this.postProcessPasses_.length;n<i;n++)n===i-1?this.postProcessPasses_[n].apply(e,null,t,r):this.postProcessPasses_[n].apply(e,this.postProcessPasses_[n+1])}},{key:"getCanvas",value:function(){return this.gl_.canvas}},{key:"getGL",value:function(){return this.gl_}},{key:"applyFrameState",value:function(e){var t=e.size,r=e.viewState.rotation,n=e.pixelRatio;this.setUniformFloatValue(A.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(A.ZOOM,e.viewState.zoom),this.setUniformFloatValue(A.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(A.PIXEL_RATIO,n),this.setUniformFloatVec2(A.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(A.ROTATION,r)}},{key:"applyHitDetectionUniform",value:function(e){var t=this.getUniformLocation(A.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(A.PIXEL_RATIO,.5)}},{key:"applyUniforms",value:function(e){var t,r=this,n=this.gl_,i=0;this.uniforms_.forEach((function(o){if((t="function"==typeof o.value?o.value(e):o.value)instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof ImageData)o.texture||(o.prevValue=void 0,o.texture=n.createTexture()),r.bindTexture(o.texture,i,o.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(!(t instanceof HTMLImageElement)||t.complete)&&o.prevValue!==t&&(o.prevValue=t,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)),i++;else if(Array.isArray(t)&&6===t.length)r.setUniformMatrixValue(o.name,(0,p.u)(r.tmpMat4_,t));else if(Array.isArray(t)&&t.length<=4)switch(t.length){case 2:return void n.uniform2f(r.getUniformLocation(o.name),t[0],t[1]);case 3:return void n.uniform3f(r.getUniformLocation(o.name),t[0],t[1],t[2]);case 4:return void n.uniform4f(r.getUniformLocation(o.name),t[0],t[1],t[2],t[3]);default:return}else"number"==typeof t&&n.uniform1f(r.getUniformLocation(o.name),t)}))}},{key:"useProgram",value:function(e,t){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(t),this.applyUniforms(t)}},{key:"compileShader",value:function(e,t){var r=this.gl_,n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}},{key:"getProgram",value:function(e,t){var r=this.gl_,n=this.compileShader(e,r.FRAGMENT_SHADER),i=this.compileShader(t,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),!r.getShaderParameter(n,r.COMPILE_STATUS)){var a="Fragment shader compilation failed: ".concat(r.getShaderInfoLog(n));throw new Error(a)}if(r.deleteShader(n),!r.getShaderParameter(i,r.COMPILE_STATUS)){var s="Vertex shader compilation failed: ".concat(r.getShaderInfoLog(i));throw new Error(s)}if(r.deleteShader(i),!r.getProgramParameter(o,r.LINK_STATUS)){var l="GL program linking failed: ".concat(r.getProgramInfoLog(o));throw new Error(l)}return o}},{key:"getUniformLocation",value:function(e){var t=(0,a.sq)(this.currentProgram_);return void 0===this.uniformLocationsByProgram_[t]&&(this.uniformLocationsByProgram_[t]={}),void 0===this.uniformLocationsByProgram_[t][e]&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}},{key:"getAttributeLocation",value:function(e){var t=(0,a.sq)(this.currentProgram_);return void 0===this.attribLocationsByProgram_[t]&&(this.attribLocationsByProgram_[t]={}),void 0===this.attribLocationsByProgram_[t][e]&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}},{key:"makeProjectionTransform",value:function(e,t){var r=e.size,n=e.viewState.rotation,i=e.viewState.resolution,o=e.viewState.center;return(0,h.qC)(t,0,0,2/(i*r[0]),2/(i*r[1]),-n,-o[0],-o[1]),t}},{key:"setUniformFloatValue",value:function(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}},{key:"setUniformFloatVec2",value:function(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}},{key:"setUniformFloatVec4",value:function(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}},{key:"setUniformMatrixValue",value:function(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}},{key:"enableAttributeArray_",value:function(e,t,r,n,i){var o=this.getAttributeLocation(e);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,t,r,!1,n,i))}},{key:"enableAttributes",value:function(e){for(var t=function(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];t+=n.size*I(n.type)}return t}(e),r=0,n=0;n<e.length;n++){var i=e[n];this.enableAttributeArray_(i.name,i.size,i.type||c.RF,t,r),r+=i.size*I(i.type)}}},{key:"handleWebGLContextLost",value:function(e){(0,f.Z)(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}},{key:"handleWebGLContextRestored",value:function(){this.needsToBeRecreated_=!0}},{key:"needsToBeRecreated",value:function(){return this.needsToBeRecreated_}},{key:"createTexture",value:function(e,t,r){var n=this.gl_;r=r||n.createTexture();var i=n.RGBA,o=n.RGBA,a=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,r),t?n.texImage2D(n.TEXTURE_2D,0,i,o,a,t):n.texImage2D(n.TEXTURE_2D,0,i,e[0],e[1],0,o,a,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r}}])&&y(t.prototype,r),o&&y(t,o),Object.defineProperty(t,"prototype",{writable:!1}),l}(o.Z)},42188:(e,t,r)=>{"use strict";r.d(t,{A4:()=>g,As:()=>u,C5:()=>b,Ei:()=>h,FL:()=>C,G3:()=>_,JO:()=>m,Me:()=>M,O:()=>E,Pr:()=>y,Qc:()=>c,RA:()=>A,T3:()=>w,Ve:()=>a,WM:()=>T,ZL:()=>I,c:()=>o,fJ:()=>i,hg:()=>v,ke:()=>d,pc:()=>f,qk:()=>l,xc:()=>P,z:()=>p});var n=r(11133),i="http://www.w3.org/2001/XMLSchema-instance";function o(e,t){return M().createElementNS(e,t)}function a(e,t){return s(e,t,[]).join("")}function s(e,t,r){var n;if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)t?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else for(n=e.firstChild;n;n=n.nextSibling)s(n,t,r);return r}function l(e){return"documentElement"in e}function u(e,t,r){return e.getAttributeNS(t,r)||""}function c(e){return(new DOMParser).parseFromString(e,"application/xml")}function f(e,t){return function(r,i){var o=e.call(void 0!==t?t:this,r,i);if(void 0!==o){var a=i[i.length-1];(0,n.l7)(a,o)}}}function h(e,t){return function(r,n){var i=e.call(void 0!==t?t:this,r,n);void 0!==i&&n[n.length-1].push(i)}}function p(e,t){return function(r,n){var i=e.call(void 0!==t?t:this,r,n);void 0!==i&&(n[n.length-1]=i)}}function d(e,t,r){return function(n,i){var o=e.call(void 0!==r?r:this,n,i);if(void 0!==o){var a,s=i[i.length-1],l=void 0!==t?t:n.localName;l in s?a=s[l]:(a=[],s[l]=a),a.push(o)}}}function y(e,t,r){return function(n,i){var o=e.call(void 0!==r?r:this,n,i);void 0!==o&&(i[i.length-1][void 0!==t?t:n.localName]=o)}}function g(e,t){return function(r,n,i){e.call(void 0!==t?t:this,r,n,i),i[i.length-1].node.appendChild(r)}}function m(e,t){var r,n;return function(t,i,o){if(void 0===r){r={};var a={};a[t.localName]=e,r[t.namespaceURI]=a,n=_(t.localName)}x(r,n,i,o)}}function _(e,t){return function(r,n,i){var a=n[n.length-1].node,s=e;return void 0===s&&(s=i),o(void 0!==t?t:a.namespaceURI,s)}}var v=_();function A(e,t){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=e[t[i]];return n}function b(e,t,r){var n,i;for(r=void 0!==r?r:{},n=0,i=e.length;n<i;++n)r[e[n]]=t;return r}function w(e,t,r,n){var i;for(i=t.firstElementChild;i;i=i.nextElementSibling){var o=e[i.namespaceURI];if(void 0!==o){var a=o[i.localName];void 0!==a&&a.call(n,i,r)}}}function E(e,t,r,n,i){return n.push(e),w(t,r,n,i),n.pop()}function x(e,t,r,n,i,o){for(var a,s,l=(void 0!==i?i:r).length,u=0;u<l;++u)void 0!==(a=r[u])&&void 0!==(s=t.call(void 0!==o?o:this,a,n,void 0!==i?i[u]:void 0))&&e[s.namespaceURI][s.localName].call(o,s,a,n)}function I(e,t,r,n,i,o,a){return i.push(e),x(t,r,n,i,o,a),i.pop()}var S=void 0;function C(e){S=e}function P(){return void 0===S&&"undefined"!=typeof XMLSerializer&&(S=new XMLSerializer),S}var O=void 0;function T(e){O=e}function M(){return void 0===O&&"undefined"!=typeof document&&(O=document.implementation.createDocument("","",null)),O}},67737:(e,t,r)=>{"use strict";function n(e,t){let r=e.length-t,n=0;do{for(let r=t;r>0;r--)e[n+t]+=e[n],n++;r-=t}while(r>0)}function i(e,t,r){let n=0,i=e.length;const o=i/r;for(;i>t;){for(let r=t;r>0;--r)e[n+t]+=e[n],++n;i-=t}const a=e.slice();for(let t=0;t<o;++t)for(let n=0;n<r;++n)e[r*t+n]=a[(r-n-1)*o+t]}r.d(t,{Z:()=>o});class o{async decode(e,t){const r=await this.decodeBlock(t),o=e.Predictor||1;if(1!==o){const t=!e.StripOffsets;return function(e,t,r,o,a,s){if(!t||1===t)return e;for(let e=0;e<a.length;++e){if(a[e]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(a[e]!==a[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const l=a[0]/8,u=2===s?1:a.length;for(let s=0;s<o&&!(s*u*r*l>=e.byteLength);++s){let o;if(2===t){switch(a[0]){case 8:o=new Uint8Array(e,s*u*r*l,u*r*l);break;case 16:o=new Uint16Array(e,s*u*r*l,u*r*l/2);break;case 32:o=new Uint32Array(e,s*u*r*l,u*r*l/4);break;default:throw new Error(`Predictor 2 not allowed with ${a[0]} bits per sample.`)}n(o,u)}else 3===t&&(o=new Uint8Array(e,s*u*r*l,u*r*l),i(o,u,l))}return e}(r,o,t?e.TileWidth:e.ImageWidth,t?e.TileLength:e.RowsPerStrip||e.ImageLength,e.BitsPerSample,e.PlanarConfiguration)}return r}}},65522:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(28843),i=r(67737);class o extends i.Z{decodeBlock(e){return(0,n.rr)(new Uint8Array(e)).buffer}}},39347:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var n=r(67737);const i=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),o=4017,a=799,s=3406,l=2276,u=1567,c=3784,f=5793,h=2896;function p(e,t){let r=0;const n=[];let i=16;for(;i>0&&!e[i-1];)--i;n.push({children:[],index:0});let o,a=n[0];for(let s=0;s<i;s++){for(let i=0;i<e[s];i++){for(a=n.pop(),a.children[a.index]=t[r];a.index>0;)a=n.pop();for(a.index++,n.push(a);n.length<=s;)n.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o;r++}s+1<i&&(n.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o)}return n[0].children}function d(e,t,r,n,o,a,s,l,u){const{mcusPerLine:c,progressive:f}=r,h=t;let p=t,d=0,y=0;function g(){if(y>0)return y--,d>>y&1;if(d=e[p++],255===d){const t=e[p++];if(t)throw new Error(`unexpected marker: ${(d<<8|t).toString(16)}`)}return y=7,d>>>7}function m(e){let t,r=e;for(;null!==(t=g());){if(r=r[t],"number"==typeof r)return r;if("object"!=typeof r)throw new Error("invalid huffman sequence")}return null}function _(e){let t=e,r=0;for(;t>0;){const e=g();if(null===e)return;r=r<<1|e,--t}return r}function v(e){const t=_(e);return t>=1<<e-1?t:t+(-1<<e)+1}let A=0;let b,w=0;function E(e,t,r,n,i){const o=r%c,a=(r/c|0)*e.v+n,s=o*e.h+i;t(e,e.blocks[a][s])}function x(e,t,r){const n=r/e.blocksPerLine|0,i=r%e.blocksPerLine;t(e,e.blocks[n][i])}const I=n.length;let S,C,P,O,T,M;M=f?0===a?0===l?function(e,t){const r=m(e.huffmanTableDC),n=0===r?0:v(r)<<u;e.pred+=n,t[0]=e.pred}:function(e,t){t[0]|=g()<<u}:0===l?function(e,t){if(A>0)return void A--;let r=a;const n=s;for(;r<=n;){const n=m(e.huffmanTableAC),o=15&n,a=n>>4;if(0===o){if(a<15){A=_(a)+(1<<a)-1;break}r+=16}else r+=a,t[i[r]]=v(o)*(1<<u),r++}}:function(e,t){let r=a;const n=s;let o=0;for(;r<=n;){const n=i[r],a=t[n]<0?-1:1;switch(w){case 0:{const t=m(e.huffmanTableAC),r=15&t;if(o=t>>4,0===r)o<15?(A=_(o)+(1<<o),w=4):(o=16,w=1);else{if(1!==r)throw new Error("invalid ACn encoding");b=v(r),w=o?2:3}continue}case 1:case 2:t[n]?t[n]+=(g()<<u)*a:(o--,0===o&&(w=2===w?3:0));break;case 3:t[n]?t[n]+=(g()<<u)*a:(t[n]=b<<u,w=0);break;case 4:t[n]&&(t[n]+=(g()<<u)*a)}r++}4===w&&(A--,0===A&&(w=0))}:function(e,t){const r=m(e.huffmanTableDC),n=0===r?0:v(r);e.pred+=n,t[0]=e.pred;let o=1;for(;o<64;){const r=m(e.huffmanTableAC),n=15&r,a=r>>4;if(0===n){if(a<15)break;o+=16}else o+=a,t[i[o]]=v(n),o++}};let k,R,B=0;R=1===I?n[0].blocksPerLine*n[0].blocksPerColumn:c*r.mcusPerColumn;const L=o||R;for(;B<R;){for(C=0;C<I;C++)n[C].pred=0;if(A=0,1===I)for(S=n[0],T=0;T<L;T++)x(S,M,B),B++;else for(T=0;T<L;T++){for(C=0;C<I;C++){S=n[C];const{h:e,v:t}=S;for(P=0;P<t;P++)for(O=0;O<e;O++)E(S,M,B,P,O)}if(B++,B===R)break}if(y=0,k=e[p]<<8|e[p+1],k<65280)throw new Error("marker was not found");if(!(k>=65488&&k<=65495))break;p+=2}return p-h}function y(e,t){const r=[],{blocksPerLine:n,blocksPerColumn:i}=t,p=n<<3,d=new Int32Array(64),y=new Uint8Array(64);function g(e,r,n){const i=t.quantizationTable;let p,d,y,g,m,_,v,A,b;const w=n;let E;for(E=0;E<64;E++)w[E]=e[E]*i[E];for(E=0;E<8;++E){const e=8*E;0!==w[1+e]||0!==w[2+e]||0!==w[3+e]||0!==w[4+e]||0!==w[5+e]||0!==w[6+e]||0!==w[7+e]?(p=f*w[0+e]+128>>8,d=f*w[4+e]+128>>8,y=w[2+e],g=w[6+e],m=h*(w[1+e]-w[7+e])+128>>8,A=h*(w[1+e]+w[7+e])+128>>8,_=w[3+e]<<4,v=w[5+e]<<4,b=p-d+1>>1,p=p+d+1>>1,d=b,b=y*c+g*u+128>>8,y=y*u-g*c+128>>8,g=b,b=m-v+1>>1,m=m+v+1>>1,v=b,b=A+_+1>>1,_=A-_+1>>1,A=b,b=p-g+1>>1,p=p+g+1>>1,g=b,b=d-y+1>>1,d=d+y+1>>1,y=b,b=m*l+A*s+2048>>12,m=m*s-A*l+2048>>12,A=b,b=_*a+v*o+2048>>12,_=_*o-v*a+2048>>12,v=b,w[0+e]=p+A,w[7+e]=p-A,w[1+e]=d+v,w[6+e]=d-v,w[2+e]=y+_,w[5+e]=y-_,w[3+e]=g+m,w[4+e]=g-m):(b=f*w[0+e]+512>>10,w[0+e]=b,w[1+e]=b,w[2+e]=b,w[3+e]=b,w[4+e]=b,w[5+e]=b,w[6+e]=b,w[7+e]=b)}for(E=0;E<8;++E){const e=E;0!==w[8+e]||0!==w[16+e]||0!==w[24+e]||0!==w[32+e]||0!==w[40+e]||0!==w[48+e]||0!==w[56+e]?(p=f*w[0+e]+2048>>12,d=f*w[32+e]+2048>>12,y=w[16+e],g=w[48+e],m=h*(w[8+e]-w[56+e])+2048>>12,A=h*(w[8+e]+w[56+e])+2048>>12,_=w[24+e],v=w[40+e],b=p-d+1>>1,p=p+d+1>>1,d=b,b=y*c+g*u+2048>>12,y=y*u-g*c+2048>>12,g=b,b=m-v+1>>1,m=m+v+1>>1,v=b,b=A+_+1>>1,_=A-_+1>>1,A=b,b=p-g+1>>1,p=p+g+1>>1,g=b,b=d-y+1>>1,d=d+y+1>>1,y=b,b=m*l+A*s+2048>>12,m=m*s-A*l+2048>>12,A=b,b=_*a+v*o+2048>>12,_=_*o-v*a+2048>>12,v=b,w[0+e]=p+A,w[56+e]=p-A,w[8+e]=d+v,w[48+e]=d-v,w[16+e]=y+_,w[40+e]=y-_,w[24+e]=g+m,w[32+e]=g-m):(b=f*n[E+0]+8192>>14,w[0+e]=b,w[8+e]=b,w[16+e]=b,w[24+e]=b,w[32+e]=b,w[40+e]=b,w[48+e]=b,w[56+e]=b)}for(E=0;E<64;++E){const e=128+(w[E]+8>>4);r[E]=e<0?0:e>255?255:e}}for(let e=0;e<i;e++){const i=e<<3;for(let e=0;e<8;e++)r.push(new Uint8Array(p));for(let o=0;o<n;o++){g(t.blocks[e][o],y,d);let n=0;const a=o<<3;for(let e=0;e<8;e++){const t=r[i+e];for(let e=0;e<8;e++)t[a+e]=y[n++]}}}return r}class g{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(e){let t=0;function r(){const r=e[t]<<8|e[t+1];return t+=2,r}function n(){const n=r(),i=e.subarray(t,t+n-2);return t+=i.length,i}function o(e){let t,r,n=0,i=0;for(r in e.components)e.components.hasOwnProperty(r)&&(t=e.components[r],n<t.h&&(n=t.h),i<t.v&&(i=t.v));const o=Math.ceil(e.samplesPerLine/8/n),a=Math.ceil(e.scanLines/8/i);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];const s=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),l=Math.ceil(Math.ceil(e.scanLines/8)*t.v/i),u=o*t.h,c=a*t.v,f=[];for(let e=0;e<c;e++){const e=[];for(let t=0;t<u;t++)e.push(new Int32Array(64));f.push(e)}t.blocksPerLine=s,t.blocksPerColumn=l,t.blocks=f}e.maxH=n,e.maxV=i,e.mcusPerLine=o,e.mcusPerColumn=a}let a=r();if(65496!==a)throw new Error("SOI not found");for(a=r();65497!==a;){switch(a){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const e=n();65504===a&&74===e[0]&&70===e[1]&&73===e[2]&&70===e[3]&&0===e[4]&&(this.jfif={version:{major:e[5],minor:e[6]},densityUnits:e[7],xDensity:e[8]<<8|e[9],yDensity:e[10]<<8|e[11],thumbWidth:e[12],thumbHeight:e[13],thumbData:e.subarray(14,14+3*e[12]*e[13])}),65518===a&&65===e[0]&&100===e[1]&&111===e[2]&&98===e[3]&&101===e[4]&&0===e[5]&&(this.adobe={version:e[6],flags0:e[7]<<8|e[8],flags1:e[9]<<8|e[10],transformCode:e[11]});break}case 65499:{const n=r()+t-2;for(;t<n;){const n=e[t++],o=new Int32Array(64);if(n>>4){if(n>>4!=1)throw new Error("DQT: invalid table spec");for(let e=0;e<64;e++){o[i[e]]=r()}}else for(let r=0;r<64;r++){o[i[r]]=e[t++]}this.quantizationTables[15&n]=o}break}case 65472:case 65473:case 65474:{r();const n={extended:65473===a,progressive:65474===a,precision:e[t++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},i=e[t++];let s;for(let r=0;r<i;r++){s=e[t];const r=e[t+1]>>4,i=15&e[t+1],o=e[t+2];n.componentsOrder.push(s),n.components[s]={h:r,v:i,quantizationIdx:o},t+=3}o(n),this.frames.push(n);break}case 65476:{const n=r();for(let r=2;r<n;){const n=e[t++],i=new Uint8Array(16);let o=0;for(let r=0;r<16;r++,t++)i[r]=e[t],o+=i[r];const a=new Uint8Array(o);for(let r=0;r<o;r++,t++)a[r]=e[t];r+=17+o,n>>4?this.huffmanTablesAC[15&n]=p(i,a):this.huffmanTablesDC[15&n]=p(i,a)}break}case 65501:r(),this.resetInterval=r();break;case 65498:{r();const n=e[t++],i=[],o=this.frames[0];for(let r=0;r<n;r++){const r=o.components[e[t++]],n=e[t++];r.huffmanTableDC=this.huffmanTablesDC[n>>4],r.huffmanTableAC=this.huffmanTablesAC[15&n],i.push(r)}const a=e[t++],s=e[t++],l=e[t++],u=d(e,t,o,i,this.resetInterval,a,s,l>>4,15&l);t+=u;break}case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw new Error(`unknown JPEG marker ${a.toString(16)}`)}a=r()}}getResult(){const{frames:e}=this;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(let e=0;e<this.frames.length;e++){const t=this.frames[e].components;for(const e of Object.keys(t))t[e].quantizationTable=this.quantizationTables[t[e].quantizationIdx],delete t[e].quantizationIdx}const t=e[0],{components:r,componentsOrder:n}=t,i=[],o=t.samplesPerLine,a=t.scanLines;for(let e=0;e<n.length;e++){const o=r[n[e]];i.push({lines:y(0,o),scaleX:o.h/t.maxH,scaleY:o.v/t.maxV})}const s=new Uint8Array(o*a*i.length);let l=0;for(let e=0;e<a;++e)for(let t=0;t<o;++t)for(let r=0;r<i.length;++r){const n=i[r];s[l]=n.lines[0|e*n.scaleY][0|t*n.scaleX],++l}return s}}class m extends n.Z{constructor(e){super(),this.reader=new g,e.JPEGTables&&this.reader.parse(e.JPEGTables)}decodeBlock(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}},41293:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p,zstd:()=>h});var n=r(28843),i=r(67197);let o,a,s;const l={env:{emscripten_notify_memory_growth:function(e){s=new Uint8Array(a.exports.memory.buffer)}}};const u="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";var c=r(67737),f=r(82499);const h=new class{init(){return o||(o="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+u).then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,l))).then(this._init):WebAssembly.instantiate(Buffer.from(u,"base64"),l).then(this._init),o)}_init(e){a=e.instance,l.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!a)throw new Error("ZSTDDecoder: Await .init() before decoding.");const r=e.byteLength,n=a.exports.malloc(r);s.set(e,n),t=t||Number(a.exports.ZSTD_findDecompressedSize(n,r));const i=a.exports.malloc(t),o=a.exports.ZSTD_decompress(i,t,n,r),l=s.slice(i,i+o);return a.exports.free(n),a.exports.free(i),l}};class p extends c.Z{constructor(e){super(),this.planarConfiguration=void 0!==e.PlanarConfiguration?e.PlanarConfiguration:1,this.samplesPerPixel=void 0!==e.SamplesPerPixel?e.SamplesPerPixel:1,this.addCompression=e.LercParameters[f.L5.AddCompression]}decodeBlock(e){switch(this.addCompression){case f.Qb.None:break;case f.Qb.Deflate:e=(0,n.rr)(new Uint8Array(e)).buffer;break;case f.Qb.Zstandard:e=h.decode(new Uint8Array(e)).buffer;break;default:throw new Error(`Unsupported LERC additional compression method identifier: ${this.addCompression}`)}return i.decode(e,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}},8672:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(67737);const i=257;function o(e,t){for(let r=t.length-1;r>=0;r--)e.push(t[r]);return e}function a(e){const t=new Uint16Array(4093),r=new Uint8Array(4093);for(let e=0;e<=257;e++)t[e]=4096,r[e]=e;let n=258,a=9,s=0;function l(){n=258,a=9}function u(e){const t=function(e,t,r){const n=t%8,o=Math.floor(t/8),a=8-n,s=t+r-8*(o+1);let l=8*(o+2)-(t+r);const u=8*(o+2)-t;if(l=Math.max(0,l),o>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),i;let c=e[o]&2**(8-n)-1;c<<=r-a;let f=c;if(o+1<e.length){let t=e[o+1]>>>l;t<<=Math.max(0,r-u),f+=t}if(s>8&&o+2<e.length){const n=8*(o+3)-(t+r);f+=e[o+2]>>>n}return f}(e,s,a);return s+=a,t}function c(e,i){return r[n]=i,t[n]=e,n++,n-1}function f(e){const n=[];for(let i=e;4096!==i;i=t[i])n.push(r[i]);return n}const h=[];l();const p=new Uint8Array(e);let d,y=u(p);for(;y!==i;){if(256===y){for(l(),y=u(p);256===y;)y=u(p);if(y===i)break;if(y>256)throw new Error(`corrupted code at scanline ${y}`);o(h,f(y)),d=y}else if(y<n){const e=f(y);o(h,e),c(d,e[e.length-1]),d=y}else{const e=f(d);if(!e)throw new Error(`Bogus entry. Not in dictionary, ${d} / ${n}, position: ${s}`);o(h,e),h.push(e[e.length-1]),c(d,e[e.length-1]),d=y}n+1>=2**a&&(12===a?d=void 0:a++),y=u(p)}return new Uint8Array(h)}class s extends n.Z{decodeBlock(e){return a(e).buffer}}},17411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(67737);class i extends n.Z{decodeBlock(e){const t=new DataView(e),r=[];for(let n=0;n<e.byteLength;++n){let e=t.getInt8(n);if(e<0){const i=t.getUint8(n+1);e=-e;for(let t=0;t<=e;++t)r.push(i);n+=1}else{for(let i=0;i<=e;++i)r.push(t.getUint8(n+i+1));n+=e+1}}return new Uint8Array(r).buffer}}},83321:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(67737);class i extends n.Z{decodeBlock(e){return e}}},51588:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(67737);class i extends n.Z{constructor(){if(super(),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available")}async decode(e,t){const r=new Blob([t]),n=await createImageBitmap(r);let i;"undefined"!=typeof document?(i=document.createElement("canvas"),i.width=n.width,i.height=n.height):i=new OffscreenCanvas(n.width,n.height);const o=i.getContext("2d");return o.drawImage(n,0,0),o.getImageData(0,0,n.width,n.height).data.buffer}}},82499:(e,t,r)=>{"use strict";r.d(t,{Ie:()=>l,It:()=>o,L:()=>n,L5:()=>c,P1:()=>h,Qb:()=>f,pd:()=>u,sf:()=>s});const n={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},i={};for(const e in n)n.hasOwnProperty(e)&&(i[n[e]]=parseInt(e,10));const o=[i.BitsPerSample,i.ExtraSamples,i.SampleFormat,i.StripByteCounts,i.StripOffsets,i.StripRowCounts,i.TileByteCounts,i.TileOffsets,i.SubIFDs],a={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},s={};for(const e in a)a.hasOwnProperty(e)&&(s[a[e]]=parseInt(e,10));const l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},u={Unspecified:0,Assocalpha:1,Unassalpha:2},c={Version:0,AddCompression:1},f={None:0,Deflate:1,Zstandard:2},h={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},p={};for(const e in h)h.hasOwnProperty(e)&&(p[h[e]]=parseInt(e,10))},25294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{create:()=>i});const n=Worker;function i(){const e='function A(A,e,t,i,r,I,g){try{var n=A[I](g),a=n.value}catch(A){return void t(A)}n.done?e(a):Promise.resolve(a).then(i,r)}function e(e){return function(){var t=this,i=arguments;return new Promise((function(r,I){var g=e.apply(t,i);function n(e){A(g,r,I,n,a,"next",e)}function a(e){A(g,r,I,n,a,"throw",e)}n(void 0)}))}}function t(A){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},t(A)}var i={exports:{}};!function(A){var e=function(A){var e,i=Object.prototype,r=i.hasOwnProperty,I="function"==typeof Symbol?Symbol:{},g=I.iterator||"@@iterator",n=I.asyncIterator||"@@asyncIterator",a=I.toStringTag||"@@toStringTag";function o(A,e,t){return Object.defineProperty(A,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),A[e]}try{o({},"")}catch(A){o=function(A,e,t){return A[e]=t}}function B(A,e,t,i){var r=e&&e.prototype instanceof h?e:h,I=Object.create(r.prototype),g=new S(i||[]);return I._invoke=function(A,e,t){var i=Q;return function(r,I){if(i===s)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw I;return R()}for(t.method=r,t.arg=I;;){var g=t.delegate;if(g){var n=m(g,t);if(n){if(n===c)continue;return n}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if(i===Q)throw i=f,t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);i=s;var a=C(A,e,t);if("normal"===a.type){if(i=t.done?f:E,a.arg===c)continue;return{value:a.arg,done:t.done}}"throw"===a.type&&(i=f,t.method="throw",t.arg=a.arg)}}}(A,t,g),I}function C(A,e,t){try{return{type:"normal",arg:A.call(e,t)}}catch(A){return{type:"throw",arg:A}}}A.wrap=B;var Q="suspendedStart",E="suspendedYield",s="executing",f="completed",c={};function h(){}function l(){}function u(){}var w={};o(w,g,(function(){return this}));var d=Object.getPrototypeOf,D=d&&d(d(v([])));D&&D!==i&&r.call(D,g)&&(w=D);var y=u.prototype=h.prototype=Object.create(w);function k(A){["next","throw","return"].forEach((function(e){o(A,e,(function(A){return this._invoke(e,A)}))}))}function p(A,e){function i(I,g,n,a){var o=C(A[I],A,g);if("throw"!==o.type){var B=o.arg,Q=B.value;return Q&&"object"===t(Q)&&r.call(Q,"__await")?e.resolve(Q.__await).then((function(A){i("next",A,n,a)}),(function(A){i("throw",A,n,a)})):e.resolve(Q).then((function(A){B.value=A,n(B)}),(function(A){return i("throw",A,n,a)}))}a(o.arg)}var I;this._invoke=function(A,t){function r(){return new e((function(e,r){i(A,t,e,r)}))}return I=I?I.then(r,r):r()}}function m(A,t){var i=A.iterator[t.method];if(i===e){if(t.delegate=null,"throw"===t.method){if(A.iterator.return&&(t.method="return",t.arg=e,m(A,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a \'throw\' method")}return c}var r=C(i,A.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var I=r.arg;return I?I.done?(t[A.resultName]=I.value,t.next=A.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,c):I:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function G(A){var e={tryLoc:A[0]};1 in A&&(e.catchLoc=A[1]),2 in A&&(e.finallyLoc=A[2],e.afterLoc=A[3]),this.tryEntries.push(e)}function F(A){var e=A.completion||{};e.type="normal",delete e.arg,A.completion=e}function S(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(G,this),this.reset(!0)}function v(A){if(A){var t=A[g];if(t)return t.call(A);if("function"==typeof A.next)return A;if(!isNaN(A.length)){var i=-1,I=function t(){for(;++i<A.length;)if(r.call(A,i))return t.value=A[i],t.done=!1,t;return t.value=e,t.done=!0,t};return I.next=I}}return{next:R}}function R(){return{value:e,done:!0}}return l.prototype=u,o(y,"constructor",u),o(u,"constructor",l),l.displayName=o(u,a,"GeneratorFunction"),A.isGeneratorFunction=function(A){var e="function"==typeof A&&A.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},A.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,u):(A.__proto__=u,o(A,a,"GeneratorFunction")),A.prototype=Object.create(y),A},A.awrap=function(A){return{__await:A}},k(p.prototype),o(p.prototype,n,(function(){return this})),A.AsyncIterator=p,A.async=function(e,t,i,r,I){void 0===I&&(I=Promise);var g=new p(B(e,t,i,r),I);return A.isGeneratorFunction(t)?g:g.next().then((function(A){return A.done?A.value:g.next()}))},k(y),o(y,a,"Generator"),o(y,g,(function(){return this})),o(y,"toString",(function(){return"[object Generator]"})),A.keys=function(A){var e=[];for(var t in A)e.push(t);return e.reverse(),function t(){for(;e.length;){var i=e.pop();if(i in A)return t.value=i,t.done=!1,t}return t.done=!0,t}},A.values=v,S.prototype={constructor:S,reset:function(A){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(F),!A)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var A=this.tryEntries[0].completion;if("throw"===A.type)throw A.arg;return this.rval},dispatchException:function(A){if(this.done)throw A;var t=this;function i(i,r){return n.type="throw",n.arg=A,t.next=i,r&&(t.method="next",t.arg=e),!!r}for(var I=this.tryEntries.length-1;I>=0;--I){var g=this.tryEntries[I],n=g.completion;if("root"===g.tryLoc)return i("end");if(g.tryLoc<=this.prev){var a=r.call(g,"catchLoc"),o=r.call(g,"finallyLoc");if(a&&o){if(this.prev<g.catchLoc)return i(g.catchLoc,!0);if(this.prev<g.finallyLoc)return i(g.finallyLoc)}else if(a){if(this.prev<g.catchLoc)return i(g.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<g.finallyLoc)return i(g.finallyLoc)}}}},abrupt:function(A,e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var I=i;break}}I&&("break"===A||"continue"===A)&&I.tryLoc<=e&&e<=I.finallyLoc&&(I=null);var g=I?I.completion:{};return g.type=A,g.arg=e,I?(this.method="next",this.next=I.finallyLoc,c):this.complete(g)},complete:function(A,e){if("throw"===A.type)throw A.arg;return"break"===A.type||"continue"===A.type?this.next=A.arg:"return"===A.type?(this.rval=this.arg=A.arg,this.method="return",this.next="end"):"normal"===A.type&&e&&(this.next=e),c},finish:function(A){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===A)return this.complete(t.completion,t.afterLoc),F(t),c}},catch:function(A){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===A){var i=t.completion;if("throw"===i.type){var r=i.arg;F(t)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(A,t,i){return this.delegate={iterator:v(A),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=e),c}},A}(A.exports);try{regeneratorRuntime=e}catch(A){"object"===("undefined"==typeof globalThis?"undefined":t(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(i);var r=i.exports,I=new Map;function g(A,e){Array.isArray(A)||(A=[A]),A.forEach((function(A){return I.set(A,e)}))}function n(A){return a.apply(this,arguments)}function a(){return(a=e(r.mark((function A(e){var t,i;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(t=I.get(e.Compression)){A.next=3;break}throw new Error("Unknown compression method identifier: ".concat(e.Compression));case 3:return A.next=5,t();case 5:return i=A.sent,A.abrupt("return",new i(e));case 7:case"end":return A.stop()}}),A)})))).apply(this,arguments)}g([void 0,1],(function(){return Promise.resolve().then((function(){return y})).then((function(A){return A.default}))})),g(5,(function(){return Promise.resolve().then((function(){return F})).then((function(A){return A.default}))})),g(6,(function(){throw new Error("old style JPEG compression is not supported.")})),g(7,(function(){return Promise.resolve().then((function(){return N})).then((function(A){return A.default}))})),g([8,32946],(function(){return Promise.resolve().then((function(){return OA})).then((function(A){return A.default}))})),g(32773,(function(){return Promise.resolve().then((function(){return _A})).then((function(A){return A.default}))})),g(34887,(function(){return Promise.resolve().then((function(){return le})).then(function(){var A=e(r.mark((function A(e){return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,e.zstd.init();case 2:return A.abrupt("return",e);case 3:case"end":return A.stop()}}),A)})));return function(e){return A.apply(this,arguments)}}()).then((function(A){return A.default}))})),g(50001,(function(){return Promise.resolve().then((function(){return de})).then((function(A){return A.default}))}));var o=globalThis;function B(A,e){if(!(A instanceof e))throw new TypeError("Cannot call a class as a function")}function C(A,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(A,i.key,i)}}function Q(A,e,t){return e&&C(A.prototype,e),t&&C(A,t),A}function E(A,e){return E=Object.setPrototypeOf||function(A,e){return A.__proto__=e,A},E(A,e)}function s(A,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(e&&e.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),e&&E(A,e)}function f(A,e){if(e&&("object"===t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(A){if(void 0===A)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return A}(A)}function c(A){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},c(A)}function h(A,e){var t=A.length-e,i=0;do{for(var r=e;r>0;r--)A[i+e]+=A[i],i++;t-=e}while(t>0)}function l(A,e,t){for(var i=0,r=A.length,I=r/t;r>e;){for(var g=e;g>0;--g)A[i+e]+=A[i],++i;r-=e}for(var n=A.slice(),a=0;a<I;++a)for(var o=0;o<t;++o)A[t*a+o]=n[(t-o-1)*I+a]}function u(A,e,t,i,r,I){if(!e||1===e)return A;for(var g=0;g<r.length;++g){if(r[g]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(r[g]!==r[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var n=r[0]/8,a=2===I?1:r.length,o=0;o<i&&!(o*a*t*n>=A.byteLength);++o){var B=void 0;if(2===e){switch(r[0]){case 8:B=new Uint8Array(A,o*a*t*n,a*t*n);break;case 16:B=new Uint16Array(A,o*a*t*n,a*t*n/2);break;case 32:B=new Uint32Array(A,o*a*t*n,a*t*n/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(r[0]," bits per sample."))}h(B,a)}else 3===e&&l(B=new Uint8Array(A,o*a*t*n,a*t*n),a,n)}return A}o.addEventListener("message",function(){var A=e(r.mark((function A(e){var t,i,I,g,a,B;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return t=e.data,i=t.id,I=t.fileDirectory,g=t.buffer,A.next=3,n(I);case 3:return a=A.sent,A.next=6,a.decode(I,g);case 6:B=A.sent,o.postMessage({decoded:B,id:i},[B]);case 8:case"end":return A.stop()}}),A)})));return function(e){return A.apply(this,arguments)}}());var w=function(){function A(){B(this,A)}var t;return Q(A,[{key:"decode",value:(t=e(r.mark((function A(e,t){var i,I,g,n,a;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,this.decodeBlock(t);case 2:if(i=A.sent,1===(I=e.Predictor||1)){A.next=9;break}return g=!e.StripOffsets,n=g?e.TileWidth:e.ImageWidth,a=g?e.TileLength:e.RowsPerStrip||e.ImageLength,A.abrupt("return",u(i,I,n,a,e.BitsPerSample,e.PlanarConfiguration));case 9:return A.abrupt("return",i);case 10:case"end":return A.stop()}}),A,this)}))),function(A,e){return t.apply(this,arguments)})}]),A}();function d(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var D=function(A){s(t,w);var e=d(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return A}}]),t}(),y=Object.freeze({__proto__:null,default:D});function k(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}function p(A,e){for(var t=e.length-1;t>=0;t--)A.push(e[t]);return A}function m(A){for(var e=new Uint16Array(4093),t=new Uint8Array(4093),i=0;i<=257;i++)e[i]=4096,t[i]=i;var r=258,I=9,g=0;function n(){r=258,I=9}function a(A){var e=function(A,e,t){var i=e%8,r=Math.floor(e/8),I=8-i,g=e+t-8*(r+1),n=8*(r+2)-(e+t),a=8*(r+2)-e;if(n=Math.max(0,n),r>=A.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),257;var o=A[r]&Math.pow(2,8-i)-1,B=o<<=t-I;if(r+1<A.length){var C=A[r+1]>>>n;B+=C<<=Math.max(0,t-a)}if(g>8&&r+2<A.length){var Q=8*(r+3)-(e+t);B+=A[r+2]>>>Q}return B}(A,g,I);return g+=I,e}function o(A,i){return t[r]=i,e[r]=A,++r-1}function B(A){for(var i=[],r=A;4096!==r;r=e[r])i.push(t[r]);return i}var C=[];n();for(var Q,E=new Uint8Array(A),s=a(E);257!==s;){if(256===s){for(n(),s=a(E);256===s;)s=a(E);if(257===s)break;if(s>256)throw new Error("corrupted code at scanline ".concat(s));p(C,B(s)),Q=s}else if(s<r){var f=B(s);p(C,f),o(Q,f[f.length-1]),Q=s}else{var c=B(Q);if(!c)throw new Error("Bogus entry. Not in dictionary, ".concat(Q," / ").concat(r,", position: ").concat(g));p(C,c),C.push(c[c.length-1]),o(Q,c[c.length-1]),Q=s}r+1>=Math.pow(2,I)&&(12===I?Q=void 0:I++),s=a(E)}return new Uint8Array(C)}var G=function(A){s(t,w);var e=k(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return m(A).buffer}}]),t}(),F=Object.freeze({__proto__:null,default:G});function S(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var v=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function R(A,e){for(var t=0,i=[],r=16;r>0&&!A[r-1];)--r;i.push({children:[],index:0});for(var I,g=i[0],n=0;n<r;n++){for(var a=0;a<A[n];a++){for((g=i.pop()).children[g.index]=e[t];g.index>0;)g=i.pop();for(g.index++,i.push(g);i.length<=n;)i.push(I={children:[],index:0}),g.children[g.index]=I.children,g=I;t++}n+1<r&&(i.push(I={children:[],index:0}),g.children[g.index]=I.children,g=I)}return i[0].children}function U(A,e,i,r,I,g,n,a,o){var B=i.mcusPerLine,C=i.progressive,Q=e,E=e,s=0,f=0;function c(){if(f>0)return f--,s>>f&1;if(255===(s=A[E++])){var e=A[E++];if(e)throw new Error("unexpected marker: ".concat((s<<8|e).toString(16)))}return f=7,s>>>7}function h(A){for(var e,i=A;null!==(e=c());){if("number"==typeof(i=i[e]))return i;if("object"!==t(i))throw new Error("invalid huffman sequence")}return null}function l(A){for(var e=A,t=0;e>0;){var i=c();if(null===i)return;t=t<<1|i,--e}return t}function u(A){var e=l(A);return e>=1<<A-1?e:e+(-1<<A)+1}var w=0;var d,D=0;function y(A,e,t,i,r){var I=t%B,g=(t/B|0)*A.v+i,n=I*A.h+r;e(A,A.blocks[g][n])}function k(A,e,t){var i=t/A.blocksPerLine|0,r=t%A.blocksPerLine;e(A,A.blocks[i][r])}var p,m,G,F,S,R,U=r.length;R=C?0===g?0===a?function(A,e){var t=h(A.huffmanTableDC),i=0===t?0:u(t)<<o;A.pred+=i,e[0]=A.pred}:function(A,e){e[0]|=c()<<o}:0===a?function(A,e){if(w>0)w--;else for(var t=g,i=n;t<=i;){var r=h(A.huffmanTableAC),I=15&r,a=r>>4;if(0===I){if(a<15){w=l(a)+(1<<a)-1;break}t+=16}else e[v[t+=a]]=u(I)*(1<<o),t++}}:function(A,e){for(var t=g,i=n,r=0;t<=i;){var I=v[t],a=e[I]<0?-1:1;switch(D){case 0:var B=h(A.huffmanTableAC),C=15&B;if(r=B>>4,0===C)r<15?(w=l(r)+(1<<r),D=4):(r=16,D=1);else{if(1!==C)throw new Error("invalid ACn encoding");d=u(C),D=r?2:3}continue;case 1:case 2:e[I]?e[I]+=(c()<<o)*a:0==--r&&(D=2===D?3:0);break;case 3:e[I]?e[I]+=(c()<<o)*a:(e[I]=d<<o,D=0);break;case 4:e[I]&&(e[I]+=(c()<<o)*a)}t++}4===D&&0==--w&&(D=0)}:function(A,e){var t=h(A.huffmanTableDC),i=0===t?0:u(t);A.pred+=i,e[0]=A.pred;for(var r=1;r<64;){var I=h(A.huffmanTableAC),g=15&I,n=I>>4;if(0===g){if(n<15)break;r+=16}else e[v[r+=n]]=u(g),r++}};var L,b,M=0;b=1===U?r[0].blocksPerLine*r[0].blocksPerColumn:B*i.mcusPerColumn;for(var N=I||b;M<b;){for(m=0;m<U;m++)r[m].pred=0;if(w=0,1===U)for(p=r[0],S=0;S<N;S++)k(p,R,M),M++;else for(S=0;S<N;S++){for(m=0;m<U;m++){var x=p=r[m],J=x.h,q=x.v;for(G=0;G<q;G++)for(F=0;F<J;F++)y(p,R,M,G,F)}if(++M===b)break}if(f=0,(L=A[E]<<8|A[E+1])<65280)throw new Error("marker was not found");if(!(L>=65488&&L<=65495))break;E+=2}return E-Q}function L(A,e){var t=[],i=e.blocksPerLine,r=e.blocksPerColumn,I=i<<3,g=new Int32Array(64),n=new Uint8Array(64);function a(A,t,i){var r,I,g,n,a,o,B,C,Q,E,s=e.quantizationTable,f=i;for(E=0;E<64;E++)f[E]=A[E]*s[E];for(E=0;E<8;++E){var c=8*E;0!==f[1+c]||0!==f[2+c]||0!==f[3+c]||0!==f[4+c]||0!==f[5+c]||0!==f[6+c]||0!==f[7+c]?(r=5793*f[0+c]+128>>8,I=5793*f[4+c]+128>>8,g=f[2+c],n=f[6+c],a=2896*(f[1+c]-f[7+c])+128>>8,C=2896*(f[1+c]+f[7+c])+128>>8,o=f[3+c]<<4,Q=r-I+1>>1,r=r+I+1>>1,I=Q,Q=3784*g+1567*n+128>>8,g=1567*g-3784*n+128>>8,n=Q,Q=a-(B=f[5+c]<<4)+1>>1,a=a+B+1>>1,B=Q,Q=C+o+1>>1,o=C-o+1>>1,C=Q,Q=r-n+1>>1,r=r+n+1>>1,n=Q,Q=I-g+1>>1,I=I+g+1>>1,g=Q,Q=2276*a+3406*C+2048>>12,a=3406*a-2276*C+2048>>12,C=Q,Q=799*o+4017*B+2048>>12,o=4017*o-799*B+2048>>12,B=Q,f[0+c]=r+C,f[7+c]=r-C,f[1+c]=I+B,f[6+c]=I-B,f[2+c]=g+o,f[5+c]=g-o,f[3+c]=n+a,f[4+c]=n-a):(Q=5793*f[0+c]+512>>10,f[0+c]=Q,f[1+c]=Q,f[2+c]=Q,f[3+c]=Q,f[4+c]=Q,f[5+c]=Q,f[6+c]=Q,f[7+c]=Q)}for(E=0;E<8;++E){var h=E;0!==f[8+h]||0!==f[16+h]||0!==f[24+h]||0!==f[32+h]||0!==f[40+h]||0!==f[48+h]||0!==f[56+h]?(r=5793*f[0+h]+2048>>12,I=5793*f[32+h]+2048>>12,g=f[16+h],n=f[48+h],a=2896*(f[8+h]-f[56+h])+2048>>12,C=2896*(f[8+h]+f[56+h])+2048>>12,o=f[24+h],Q=r-I+1>>1,r=r+I+1>>1,I=Q,Q=3784*g+1567*n+2048>>12,g=1567*g-3784*n+2048>>12,n=Q,Q=a-(B=f[40+h])+1>>1,a=a+B+1>>1,B=Q,Q=C+o+1>>1,o=C-o+1>>1,C=Q,Q=r-n+1>>1,r=r+n+1>>1,n=Q,Q=I-g+1>>1,I=I+g+1>>1,g=Q,Q=2276*a+3406*C+2048>>12,a=3406*a-2276*C+2048>>12,C=Q,Q=799*o+4017*B+2048>>12,o=4017*o-799*B+2048>>12,B=Q,f[0+h]=r+C,f[56+h]=r-C,f[8+h]=I+B,f[48+h]=I-B,f[16+h]=g+o,f[40+h]=g-o,f[24+h]=n+a,f[32+h]=n-a):(Q=5793*i[E+0]+8192>>14,f[0+h]=Q,f[8+h]=Q,f[16+h]=Q,f[24+h]=Q,f[32+h]=Q,f[40+h]=Q,f[48+h]=Q,f[56+h]=Q)}for(E=0;E<64;++E){var l=128+(f[E]+8>>4);t[E]=l<0?0:l>255?255:l}}for(var o=0;o<r;o++){for(var B=o<<3,C=0;C<8;C++)t.push(new Uint8Array(I));for(var Q=0;Q<i;Q++){a(e.blocks[o][Q],n,g);for(var E=0,s=Q<<3,f=0;f<8;f++)for(var c=t[B+f],h=0;h<8;h++)c[s+h]=n[E++]}}return t}var b=function(){function A(){B(this,A),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return Q(A,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(A){var e=0;function t(){var t=A[e]<<8|A[e+1];return e+=2,t}function i(A){var e,t,i=0,r=0;for(t in A.components)A.components.hasOwnProperty(t)&&(i<(e=A.components[t]).h&&(i=e.h),r<e.v&&(r=e.v));var I=Math.ceil(A.samplesPerLine/8/i),g=Math.ceil(A.scanLines/8/r);for(t in A.components)if(A.components.hasOwnProperty(t)){e=A.components[t];for(var n=Math.ceil(Math.ceil(A.samplesPerLine/8)*e.h/i),a=Math.ceil(Math.ceil(A.scanLines/8)*e.v/r),o=I*e.h,B=g*e.v,C=[],Q=0;Q<B;Q++){for(var E=[],s=0;s<o;s++)E.push(new Int32Array(64));C.push(E)}e.blocksPerLine=n,e.blocksPerColumn=a,e.blocks=C}A.maxH=i,A.maxV=r,A.mcusPerLine=I,A.mcusPerColumn=g}var r,I,g=t();if(65496!==g)throw new Error("SOI not found");for(g=t();65497!==g;){switch(g){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var n=(r=void 0,I=void 0,r=t(),I=A.subarray(e,e+r-2),e+=I.length,I);65504===g&&74===n[0]&&70===n[1]&&73===n[2]&&70===n[3]&&0===n[4]&&(this.jfif={version:{major:n[5],minor:n[6]},densityUnits:n[7],xDensity:n[8]<<8|n[9],yDensity:n[10]<<8|n[11],thumbWidth:n[12],thumbHeight:n[13],thumbData:n.subarray(14,14+3*n[12]*n[13])}),65518===g&&65===n[0]&&100===n[1]&&111===n[2]&&98===n[3]&&101===n[4]&&0===n[5]&&(this.adobe={version:n[6],flags0:n[7]<<8|n[8],flags1:n[9]<<8|n[10],transformCode:n[11]});break;case 65499:for(var a=t()+e-2;e<a;){var o=A[e++],B=new Int32Array(64);if(o>>4==0)for(var C=0;C<64;C++){B[v[C]]=A[e++]}else{if(o>>4!=1)throw new Error("DQT: invalid table spec");for(var Q=0;Q<64;Q++){B[v[Q]]=t()}}this.quantizationTables[15&o]=B}break;case 65472:case 65473:case 65474:t();for(var E={extended:65473===g,progressive:65474===g,precision:A[e++],scanLines:t(),samplesPerLine:t(),components:{},componentsOrder:[]},s=A[e++],f=void 0,c=0;c<s;c++){f=A[e];var h=A[e+1]>>4,l=15&A[e+1],u=A[e+2];E.componentsOrder.push(f),E.components[f]={h:h,v:l,quantizationIdx:u},e+=3}i(E),this.frames.push(E);break;case 65476:for(var w=t(),d=2;d<w;){for(var D=A[e++],y=new Uint8Array(16),k=0,p=0;p<16;p++,e++)y[p]=A[e],k+=y[p];for(var m=new Uint8Array(k),G=0;G<k;G++,e++)m[G]=A[e];d+=17+k,D>>4==0?this.huffmanTablesDC[15&D]=R(y,m):this.huffmanTablesAC[15&D]=R(y,m)}break;case 65501:t(),this.resetInterval=t();break;case 65498:t();for(var F=A[e++],S=[],L=this.frames[0],b=0;b<F;b++){var M=L.components[A[e++]],N=A[e++];M.huffmanTableDC=this.huffmanTablesDC[N>>4],M.huffmanTableAC=this.huffmanTablesAC[15&N],S.push(M)}var x=A[e++],J=A[e++],q=A[e++],Y=U(A,e,L,S,this.resetInterval,x,J,q>>4,15&q);e+=Y;break;case 65535:255!==A[e]&&e--;break;default:if(255===A[e-3]&&A[e-2]>=192&&A[e-2]<=254){e-=3;break}throw new Error("unknown JPEG marker ".concat(g.toString(16)))}g=t()}}},{key:"getResult",value:function(){var A=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var e=0;e<this.frames.length;e++)for(var t=this.frames[e].components,i=0,r=Object.keys(t);i<r.length;i++){var I=r[i];t[I].quantizationTable=this.quantizationTables[t[I].quantizationIdx],delete t[I].quantizationIdx}for(var g=A[0],n=g.components,a=g.componentsOrder,o=[],B=g.samplesPerLine,C=g.scanLines,Q=0;Q<a.length;Q++){var E=n[a[Q]];o.push({lines:L(0,E),scaleX:E.h/g.maxH,scaleY:E.v/g.maxV})}for(var s=new Uint8Array(B*C*o.length),f=0,c=0;c<C;++c)for(var h=0;h<B;++h)for(var l=0;l<o.length;++l){var u=o[l];s[f]=u.lines[0|c*u.scaleY][0|h*u.scaleX],++f}return s}}]),A}(),M=function(A){s(t,w);var e=S(t);function t(A){var i;return B(this,t),(i=e.call(this)).reader=new b,A.JPEGTables&&i.reader.parse(A.JPEGTables),i}return Q(t,[{key:"decodeBlock",value:function(A){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(A)),this.reader.getResult().buffer}}]),t}(),N=Object.freeze({__proto__:null,default:M});function x(A){for(var e=A.length;--e>=0;)A[e]=0}x(new Array(576)),x(new Array(60)),x(new Array(512)),x(new Array(256)),x(new Array(29)),x(new Array(30));var J=function(A,e,t,i){for(var r=65535&A|0,I=A>>>16&65535|0,g=0;0!==t;){t-=g=t>2e3?2e3:t;do{I=I+(r=r+e[i++]|0)|0}while(--g);r%=65521,I%=65521}return r|I<<16|0},q=new Uint32Array(function(){for(var A,e=[],t=0;t<256;t++){A=t;for(var i=0;i<8;i++)A=1&A?3988292384^A>>>1:A>>>1;e[t]=A}return e}()),Y=function(A,e,t,i){var r=q,I=i+t;A^=-1;for(var g=i;g<I;g++)A=A>>>8^r[255&(A^e[g])];return-1^A},K={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},H={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},O=function(A,e){return Object.prototype.hasOwnProperty.call(A,e)},P=function(A){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!==t(i))throw new TypeError(i+"must be non-object");for(var r in i)O(i,r)&&(A[r]=i[r])}}return A},T=function(A){for(var e=0,t=0,i=A.length;t<i;t++)e+=A[t].length;for(var r=new Uint8Array(e),I=0,g=0,n=A.length;I<n;I++){var a=A[I];r.set(a,g),g+=a.length}return r},V=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(A){V=!1}for(var _=new Uint8Array(256),X=0;X<256;X++)_[X]=X>=252?6:X>=248?5:X>=240?4:X>=224?3:X>=192?2:1;_[254]=_[254]=1;var Z=function(A){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(A);var e,t,i,r,I,g=A.length,n=0;for(r=0;r<g;r++)55296==(64512&(t=A.charCodeAt(r)))&&r+1<g&&56320==(64512&(i=A.charCodeAt(r+1)))&&(t=65536+(t-55296<<10)+(i-56320),r++),n+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(n),I=0,r=0;I<n;r++)55296==(64512&(t=A.charCodeAt(r)))&&r+1<g&&56320==(64512&(i=A.charCodeAt(r+1)))&&(t=65536+(t-55296<<10)+(i-56320),r++),t<128?e[I++]=t:t<2048?(e[I++]=192|t>>>6,e[I++]=128|63&t):t<65536?(e[I++]=224|t>>>12,e[I++]=128|t>>>6&63,e[I++]=128|63&t):(e[I++]=240|t>>>18,e[I++]=128|t>>>12&63,e[I++]=128|t>>>6&63,e[I++]=128|63&t);return e},j=function(A,e){var t,i,r=e||A.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(A.subarray(0,e));var I=new Array(2*r);for(i=0,t=0;t<r;){var g=A[t++];if(g<128)I[i++]=g;else{var n=_[g];if(n>4)I[i++]=65533,t+=n-1;else{for(g&=2===n?31:3===n?15:7;n>1&&t<r;)g=g<<6|63&A[t++],n--;n>1?I[i++]=65533:g<65536?I[i++]=g:(g-=65536,I[i++]=55296|g>>10&1023,I[i++]=56320|1023&g)}}}return function(A,e){if(e<65534&&A.subarray&&V)return String.fromCharCode.apply(null,A.length===e?A:A.subarray(0,e));for(var t="",i=0;i<e;i++)t+=String.fromCharCode(A[i]);return t}(I,i)},W=function(A,e){(e=e||A.length)>A.length&&(e=A.length);for(var t=e-1;t>=0&&128==(192&A[t]);)t--;return t<0||0===t?e:t+_[A[t]]>e?t:e};var z=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},$=function(A,e){var t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c,h,l,u,w,d,D,y,k,p,m=A.state;t=A.next_in,k=A.input,i=t+(A.avail_in-5),r=A.next_out,p=A.output,I=r-(e-A.avail_out),g=r+(A.avail_out-257),n=m.dmax,a=m.wsize,o=m.whave,B=m.wnext,C=m.window,Q=m.hold,E=m.bits,s=m.lencode,f=m.distcode,c=(1<<m.lenbits)-1,h=(1<<m.distbits)-1;A:do{E<15&&(Q+=k[t++]<<E,E+=8,Q+=k[t++]<<E,E+=8),l=s[Q&c];e:for(;;){if(Q>>>=u=l>>>24,E-=u,0===(u=l>>>16&255))p[r++]=65535&l;else{if(!(16&u)){if(0==(64&u)){l=s[(65535&l)+(Q&(1<<u)-1)];continue e}if(32&u){m.mode=12;break A}A.msg="invalid literal/length code",m.mode=30;break A}w=65535&l,(u&=15)&&(E<u&&(Q+=k[t++]<<E,E+=8),w+=Q&(1<<u)-1,Q>>>=u,E-=u),E<15&&(Q+=k[t++]<<E,E+=8,Q+=k[t++]<<E,E+=8),l=f[Q&h];t:for(;;){if(Q>>>=u=l>>>24,E-=u,!(16&(u=l>>>16&255))){if(0==(64&u)){l=f[(65535&l)+(Q&(1<<u)-1)];continue t}A.msg="invalid distance code",m.mode=30;break A}if(d=65535&l,E<(u&=15)&&(Q+=k[t++]<<E,(E+=8)<u&&(Q+=k[t++]<<E,E+=8)),(d+=Q&(1<<u)-1)>n){A.msg="invalid distance too far back",m.mode=30;break A}if(Q>>>=u,E-=u,d>(u=r-I)){if((u=d-u)>o&&m.sane){A.msg="invalid distance too far back",m.mode=30;break A}if(D=0,y=C,0===B){if(D+=a-u,u<w){w-=u;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}}else if(B<u){if(D+=a+B-u,(u-=B)<w){w-=u;do{p[r++]=C[D++]}while(--u);if(D=0,B<w){w-=u=B;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}}}else if(D+=B-u,u<w){w-=u;do{p[r++]=C[D++]}while(--u);D=r-d,y=p}for(;w>2;)p[r++]=y[D++],p[r++]=y[D++],p[r++]=y[D++],w-=3;w&&(p[r++]=y[D++],w>1&&(p[r++]=y[D++]))}else{D=r-d;do{p[r++]=p[D++],p[r++]=p[D++],p[r++]=p[D++],w-=3}while(w>2);w&&(p[r++]=p[D++],w>1&&(p[r++]=p[D++]))}break}}break}}while(t<i&&r<g);t-=w=E>>3,Q&=(1<<(E-=w<<3))-1,A.next_in=t,A.next_out=r,A.avail_in=t<i?i-t+5:5-(t-i),A.avail_out=r<g?g-r+257:257-(r-g),m.hold=Q,m.bits=E},AA=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),eA=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tA=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iA=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),rA=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q,E,s,f,c,h=n.bits,l=0,u=0,w=0,d=0,D=0,y=0,k=0,p=0,m=0,G=0,F=null,S=0,v=new Uint16Array(16),R=new Uint16Array(16),U=null,L=0;for(l=0;l<=15;l++)v[l]=0;for(u=0;u<i;u++)v[e[t+u]]++;for(D=h,d=15;d>=1&&0===v[d];d--);if(D>d&&(D=d),0===d)return r[I++]=20971520,r[I++]=20971520,n.bits=1,0;for(w=1;w<d&&0===v[w];w++);for(D<w&&(D=w),p=1,l=1;l<=15;l++)if(p<<=1,(p-=v[l])<0)return-1;if(p>0&&(0===A||1!==d))return-1;for(R[1]=0,l=1;l<15;l++)R[l+1]=R[l]+v[l];for(u=0;u<i;u++)0!==e[t+u]&&(g[R[e[t+u]]++]=u);if(0===A?(F=U=g,E=19):1===A?(F=AA,S-=257,U=eA,L-=257,E=256):(F=tA,U=iA,E=-1),G=0,u=0,l=w,Q=I,y=D,k=0,B=-1,C=(m=1<<D)-1,1===A&&m>852||2===A&&m>592)return 1;for(;;){s=l-k,g[u]<E?(f=0,c=g[u]):g[u]>E?(f=U[L+g[u]],c=F[S+g[u]]):(f=96,c=0),a=1<<l-k,w=o=1<<y;do{r[Q+(G>>k)+(o-=a)]=s<<24|f<<16|c|0}while(0!==o);for(a=1<<l-1;G&a;)a>>=1;if(0!==a?(G&=a-1,G+=a):G=0,u++,0==--v[l]){if(l===d)break;l=e[t+g[u]]}if(l>D&&(G&C)!==B){for(0===k&&(k=D),Q+=w,p=1<<(y=l-k);y+k<d&&!((p-=v[y+k])<=0);)y++,p<<=1;if(m+=1<<y,1===A&&m>852||2===A&&m>592)return 1;r[B=G&C]=D<<24|y<<16|Q-I|0}}return 0!==G&&(r[Q+G]=l-k<<24|64<<16|0),n.bits=D,0},IA=H.Z_FINISH,gA=H.Z_BLOCK,nA=H.Z_TREES,aA=H.Z_OK,oA=H.Z_STREAM_END,BA=H.Z_NEED_DICT,CA=H.Z_STREAM_ERROR,QA=H.Z_DATA_ERROR,EA=H.Z_MEM_ERROR,sA=H.Z_BUF_ERROR,fA=H.Z_DEFLATED,cA=function(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)};function hA(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var lA,uA,wA=function(A){if(!A||!A.state)return CA;var e=A.state;return A.total_in=A.total_out=e.total=0,A.msg="",e.wrap&&(A.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,aA},dA=function(A){if(!A||!A.state)return CA;var e=A.state;return e.wsize=0,e.whave=0,e.wnext=0,wA(A)},DA=function(A,e){var t;if(!A||!A.state)return CA;var i=A.state;return e<0?(t=0,e=-e):(t=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?CA:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=t,i.wbits=e,dA(A))},yA=function(A,e){if(!A)return CA;var t=new hA;A.state=t,t.window=null;var i=DA(A,e);return i!==aA&&(A.state=null),i},kA=!0,pA=function(A){if(kA){lA=new Int32Array(512),uA=new Int32Array(32);for(var e=0;e<144;)A.lens[e++]=8;for(;e<256;)A.lens[e++]=9;for(;e<280;)A.lens[e++]=7;for(;e<288;)A.lens[e++]=8;for(rA(1,A.lens,0,288,lA,0,A.work,{bits:9}),e=0;e<32;)A.lens[e++]=5;rA(2,A.lens,0,32,uA,0,A.work,{bits:5}),kA=!1}A.lencode=lA,A.lenbits=9,A.distcode=uA,A.distbits=5},mA=function(A,e,t,i){var r,I=A.state;return null===I.window&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new Uint8Array(I.wsize)),i>=I.wsize?(I.window.set(e.subarray(t-I.wsize,t),0),I.wnext=0,I.whave=I.wsize):((r=I.wsize-I.wnext)>i&&(r=i),I.window.set(e.subarray(t-i,t-i+r),I.wnext),(i-=r)?(I.window.set(e.subarray(t-i,t),0),I.wnext=i,I.whave=I.wsize):(I.wnext+=r,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=r))),0},GA={inflateReset:dA,inflateReset2:DA,inflateResetKeep:wA,inflateInit:function(A){return yA(A,15)},inflateInit2:yA,inflate:function(A,e){var t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c,h,l,u,w,d,D,y,k,p,m=0,G=new Uint8Array(4),F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!A||!A.state||!A.output||!A.input&&0!==A.avail_in)return CA;12===(t=A.state).mode&&(t.mode=13),g=A.next_out,r=A.output,a=A.avail_out,I=A.next_in,i=A.input,n=A.avail_in,o=t.hold,B=t.bits,C=n,Q=a,y=aA;A:for(;;)switch(t.mode){case 1:if(0===t.wrap){t.mode=13;break}for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(2&t.wrap&&35615===o){t.check=0,G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0),o=0,B=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&o)<<8)+(o>>8))%31){A.msg="incorrect header check",t.mode=30;break}if((15&o)!==fA){A.msg="unknown compression method",t.mode=30;break}if(B-=4,D=8+(15&(o>>>=4)),0===t.wbits)t.wbits=D;else if(D>t.wbits){A.msg="invalid window size",t.mode=30;break}t.dmax=1<<t.wbits,A.adler=t.check=1,t.mode=512&o?10:12,o=0,B=0;break;case 2:for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(t.flags=o,(255&t.flags)!==fA){A.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){A.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=o>>8&1),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0,t.mode=3;case 3:for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.head&&(t.head.time=o),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,G[2]=o>>>16&255,G[3]=o>>>24&255,t.check=Y(t.check,G,4,0)),o=0,B=0,t.mode=4;case 4:for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.head&&(t.head.xflags=255&o,t.head.os=o>>8),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0,t.mode=5;case 5:if(1024&t.flags){for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.length=o,t.head&&(t.head.extra_len=o),512&t.flags&&(G[0]=255&o,G[1]=o>>>8&255,t.check=Y(t.check,G,2,0)),o=0,B=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&((E=t.length)>n&&(E=n),E&&(t.head&&(D=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(i.subarray(I,I+E),D)),512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,t.length-=E),t.length))break A;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(0===n)break A;E=0;do{D=i[I+E++],t.head&&D&&t.length<65536&&(t.head.name+=String.fromCharCode(D))}while(D&&E<n);if(512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,D)break A}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(0===n)break A;E=0;do{D=i[I+E++],t.head&&D&&t.length<65536&&(t.head.comment+=String.fromCharCode(D))}while(D&&E<n);if(512&t.flags&&(t.check=Y(t.check,i,E,I)),n-=E,I+=E,D)break A}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;B<16;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o!==(65535&t.check)){A.msg="header crc mismatch",t.mode=30;break}o=0,B=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),A.adler=t.check=0,t.mode=12;break;case 10:for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}A.adler=t.check=cA(o),o=0,B=0,t.mode=11;case 11:if(0===t.havedict)return A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,BA;A.adler=t.check=1,t.mode=12;case 12:if(e===gA||e===nA)break A;case 13:if(t.last){o>>>=7&B,B-=7&B,t.mode=27;break}for(;B<3;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}switch(t.last=1&o,B-=1,3&(o>>>=1)){case 0:t.mode=14;break;case 1:if(pA(t),t.mode=20,e===nA){o>>>=2,B-=2;break A}break;case 2:t.mode=17;break;case 3:A.msg="invalid block type",t.mode=30}o>>>=2,B-=2;break;case 14:for(o>>>=7&B,B-=7&B;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if((65535&o)!=(o>>>16^65535)){A.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&o,o=0,B=0,t.mode=15,e===nA)break A;case 15:t.mode=16;case 16:if(E=t.length){if(E>n&&(E=n),E>a&&(E=a),0===E)break A;r.set(i.subarray(I,I+E),g),n-=E,I+=E,a-=E,g+=E,t.length-=E;break}t.mode=12;break;case 17:for(;B<14;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(t.nlen=257+(31&o),o>>>=5,B-=5,t.ndist=1+(31&o),o>>>=5,B-=5,t.ncode=4+(15&o),o>>>=4,B-=4,t.nlen>286||t.ndist>30){A.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;B<3;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.lens[F[t.have++]]=7&o,o>>>=3,B-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,k={bits:t.lenbits},y=rA(0,t.lens,0,19,t.lencode,0,t.work,k),t.lenbits=k.bits,y){A.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;h=(m=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(l<16)o>>>=c,B-=c,t.lens[t.have++]=l;else{if(16===l){for(p=c+2;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o>>>=c,B-=c,0===t.have){A.msg="invalid bit length repeat",t.mode=30;break}D=t.lens[t.have-1],E=3+(3&o),o>>>=2,B-=2}else if(17===l){for(p=c+3;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}B-=c,D=0,E=3+(7&(o>>>=c)),o>>>=3,B-=3}else{for(p=c+7;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}B-=c,D=0,E=11+(127&(o>>>=c)),o>>>=7,B-=7}if(t.have+E>t.nlen+t.ndist){A.msg="invalid bit length repeat",t.mode=30;break}for(;E--;)t.lens[t.have++]=D}}if(30===t.mode)break;if(0===t.lens[256]){A.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,k={bits:t.lenbits},y=rA(1,t.lens,0,t.nlen,t.lencode,0,t.work,k),t.lenbits=k.bits,y){A.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,k={bits:t.distbits},y=rA(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,k),t.distbits=k.bits,y){A.msg="invalid distances set",t.mode=30;break}if(t.mode=20,e===nA)break A;case 20:t.mode=21;case 21:if(n>=6&&a>=258){A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,$(A,Q),g=A.next_out,r=A.output,a=A.avail_out,I=A.next_in,i=A.input,n=A.avail_in,o=t.hold,B=t.bits,12===t.mode&&(t.back=-1);break}for(t.back=0;h=(m=t.lencode[o&(1<<t.lenbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(h&&0==(240&h)){for(u=c,w=h,d=l;h=(m=t.lencode[d+((o&(1<<u+w)-1)>>u)])>>>16&255,l=65535&m,!(u+(c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}o>>>=u,B-=u,t.back+=u}if(o>>>=c,B-=c,t.back+=c,t.length=l,0===h){t.mode=26;break}if(32&h){t.back=-1,t.mode=12;break}if(64&h){A.msg="invalid literal/length code",t.mode=30;break}t.extra=15&h,t.mode=22;case 22:if(t.extra){for(p=t.extra;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.length+=o&(1<<t.extra)-1,o>>>=t.extra,B-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;h=(m=t.distcode[o&(1<<t.distbits)-1])>>>16&255,l=65535&m,!((c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(0==(240&h)){for(u=c,w=h,d=l;h=(m=t.distcode[d+((o&(1<<u+w)-1)>>u)])>>>16&255,l=65535&m,!(u+(c=m>>>24)<=B);){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}o>>>=u,B-=u,t.back+=u}if(o>>>=c,B-=c,t.back+=c,64&h){A.msg="invalid distance code",t.mode=30;break}t.offset=l,t.extra=15&h,t.mode=24;case 24:if(t.extra){for(p=t.extra;B<p;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}t.offset+=o&(1<<t.extra)-1,o>>>=t.extra,B-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){A.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(0===a)break A;if(E=Q-a,t.offset>E){if((E=t.offset-E)>t.whave&&t.sane){A.msg="invalid distance too far back",t.mode=30;break}E>t.wnext?(E-=t.wnext,s=t.wsize-E):s=t.wnext-E,E>t.length&&(E=t.length),f=t.window}else f=r,s=g-t.offset,E=t.length;E>a&&(E=a),a-=E,t.length-=E;do{r[g++]=f[s++]}while(--E);0===t.length&&(t.mode=21);break;case 26:if(0===a)break A;r[g++]=t.length,a--,t.mode=21;break;case 27:if(t.wrap){for(;B<32;){if(0===n)break A;n--,o|=i[I++]<<B,B+=8}if(Q-=a,A.total_out+=Q,t.total+=Q,Q&&(A.adler=t.check=t.flags?Y(t.check,r,Q,g-Q):J(t.check,r,Q,g-Q)),Q=a,(t.flags?o:cA(o))!==t.check){A.msg="incorrect data check",t.mode=30;break}o=0,B=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;B<32;){if(0===n)break A;n--,o+=i[I++]<<B,B+=8}if(o!==(4294967295&t.total)){A.msg="incorrect length check",t.mode=30;break}o=0,B=0}t.mode=29;case 29:y=oA;break A;case 30:y=QA;break A;case 31:return EA;default:return CA}return A.next_out=g,A.avail_out=a,A.next_in=I,A.avail_in=n,t.hold=o,t.bits=B,(t.wsize||Q!==A.avail_out&&t.mode<30&&(t.mode<27||e!==IA))&&mA(A,A.output,A.next_out,Q-A.avail_out),C-=A.avail_in,Q-=A.avail_out,A.total_in+=C,A.total_out+=Q,t.total+=Q,t.wrap&&Q&&(A.adler=t.check=t.flags?Y(t.check,r,Q,A.next_out-Q):J(t.check,r,Q,A.next_out-Q)),A.data_type=t.bits+(t.last?64:0)+(12===t.mode?128:0)+(20===t.mode||15===t.mode?256:0),(0===C&&0===Q||e===IA)&&y===aA&&(y=sA),y},inflateEnd:function(A){if(!A||!A.state)return CA;var e=A.state;return e.window&&(e.window=null),A.state=null,aA},inflateGetHeader:function(A,e){if(!A||!A.state)return CA;var t=A.state;return 0==(2&t.wrap)?CA:(t.head=e,e.done=!1,aA)},inflateSetDictionary:function(A,e){var t,i=e.length;return A&&A.state?0!==(t=A.state).wrap&&11!==t.mode?CA:11===t.mode&&J(1,e,i,0)!==t.check?QA:mA(A,e,i,i)?(t.mode=31,EA):(t.havedict=1,aA):CA},inflateInfo:"pako inflate (from Nodeca project)"};var FA=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},SA=Object.prototype.toString,vA=H.Z_NO_FLUSH,RA=H.Z_FINISH,UA=H.Z_OK,LA=H.Z_STREAM_END,bA=H.Z_NEED_DICT,MA=H.Z_STREAM_ERROR,NA=H.Z_DATA_ERROR,xA=H.Z_MEM_ERROR;function JA(A){this.options=P({chunkSize:65536,windowBits:15,to:""},A||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||A&&A.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z,this.strm.avail_out=0;var t=GA.inflateInit2(this.strm,e.windowBits);if(t!==UA)throw new Error(K[t]);if(this.header=new FA,GA.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Z(e.dictionary):"[object ArrayBuffer]"===SA.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=GA.inflateSetDictionary(this.strm,e.dictionary))!==UA))throw new Error(K[t])}function qA(A,e){var t=new JA(e);if(t.push(A),t.err)throw t.msg||K[t.err];return t.result}JA.prototype.push=function(A,e){var t,i,r,I=this.strm,g=this.options.chunkSize,n=this.options.dictionary;if(this.ended)return!1;for(i=e===~~e?e:!0===e?RA:vA,"[object ArrayBuffer]"===SA.call(A)?I.input=new Uint8Array(A):I.input=A,I.next_in=0,I.avail_in=I.input.length;;){for(0===I.avail_out&&(I.output=new Uint8Array(g),I.next_out=0,I.avail_out=g),(t=GA.inflate(I,i))===bA&&n&&((t=GA.inflateSetDictionary(I,n))===UA?t=GA.inflate(I,i):t===NA&&(t=bA));I.avail_in>0&&t===LA&&I.state.wrap>0&&0!==A[I.next_in];)GA.inflateReset(I),t=GA.inflate(I,i);switch(t){case MA:case NA:case bA:case xA:return this.onEnd(t),this.ended=!0,!1}if(r=I.avail_out,I.next_out&&(0===I.avail_out||t===LA))if("string"===this.options.to){var a=W(I.output,I.next_out),o=I.next_out-a,B=j(I.output,a);I.next_out=o,I.avail_out=g-o,o&&I.output.set(I.output.subarray(a,a+o),0),this.onData(B)}else this.onData(I.output.length===I.next_out?I.output:I.output.subarray(0,I.next_out));if(t!==UA||0!==r){if(t===LA)return t=GA.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,!0;if(0===I.avail_in)break}}return!0},JA.prototype.onData=function(A){this.chunks.push(A)},JA.prototype.onEnd=function(A){A===UA&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=T(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg};var YA={Inflate:JA,inflate:qA,inflateRaw:function(A,e){return(e=e||{}).raw=!0,qA(A,e)},ungzip:qA,constants:H}.inflate;function KA(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var HA=function(A){s(t,w);var e=KA(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){return YA(new Uint8Array(A)).buffer}}]),t}(),OA=Object.freeze({__proto__:null,default:HA});function PA(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var TA,VA=function(A){s(t,w);var e=PA(t);function t(){return B(this,t),e.apply(this,arguments)}return Q(t,[{key:"decodeBlock",value:function(A){for(var e=new DataView(A),t=[],i=0;i<A.byteLength;++i){var r=e.getInt8(i);if(r<0){var I=e.getUint8(i+1);r=-r;for(var g=0;g<=r;++g)t.push(I);i+=1}else{for(var n=0;n<=r;++n)t.push(e.getUint8(i+n+1));i+=r+1}}return new Uint8Array(t).buffer}}]),t}(),_A=Object.freeze({__proto__:null,default:VA}),XA={exports:{}};TA=XA,\n/* Copyright 2015-2021 Esri. Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 @preserve */\nfunction(){var A,e,t,i,r,I,g,n,a,o,B,C,Q,E,s,f,c=(A={defaultNoDataValue:-34027999387901484e22,decode:function(I,g){var n=(g=g||{}).encodedMaskData||null===g.encodedMaskData,a=r(I,g.inputOffset||0,n),o=null!==g.noDataValue?g.noDataValue:A.defaultNoDataValue,B=e(a,g.pixelType||Float32Array,g.encodedMaskData,o,g.returnMask),C={width:a.width,height:a.height,pixelData:B.resultPixels,minValue:B.minValue,maxValue:a.pixels.maxValue,noDataValue:o};return B.resultMask&&(C.maskData=B.resultMask),g.returnEncodedMask&&a.mask&&(C.encodedMaskData=a.mask.bitset?a.mask.bitset:null),g.returnFileInfo&&(C.fileInfo=t(a),g.computeUsedBitDepths&&(C.fileInfo.bitDepths=i(a))),C}},e=function(A,e,t,i,r){var g,n,a,o=0,B=A.pixels.numBlocksX,C=A.pixels.numBlocksY,Q=Math.floor(A.width/B),E=Math.floor(A.height/C),s=2*A.maxZError,f=Number.MAX_VALUE;t=t||(A.mask?A.mask.bitset:null),n=new e(A.width*A.height),r&&t&&(a=new Uint8Array(A.width*A.height));for(var c,h,l=new Float32Array(Q*E),u=0;u<=C;u++){var w=u!==C?E:A.height%C;if(0!==w)for(var d=0;d<=B;d++){var D=d!==B?Q:A.width%B;if(0!==D){var y,k,p,m,G=u*A.width*E+d*Q,F=A.width-D,S=A.pixels.blocks[o];if(S.encoding<2?(0===S.encoding?y=S.rawData:(I(S.stuffedData,S.bitsPerPixel,S.numValidPixels,S.offset,s,l,A.pixels.maxValue),y=l),k=0):p=2===S.encoding?0:S.offset,t)for(h=0;h<w;h++){for(7&G&&(m=t[G>>3],m<<=7&G),c=0;c<D;c++)7&G||(m=t[G>>3]),128&m?(a&&(a[G]=1),f=f>(g=S.encoding<2?y[k++]:p)?g:f,n[G++]=g):(a&&(a[G]=0),n[G++]=i),m<<=1;G+=F}else if(S.encoding<2)for(h=0;h<w;h++){for(c=0;c<D;c++)f=f>(g=y[k++])?g:f,n[G++]=g;G+=F}else for(f=f>p?p:f,h=0;h<w;h++){for(c=0;c<D;c++)n[G++]=p;G+=F}if(1===S.encoding&&k!==S.numValidPixels)throw"Block and Mask do not match";o++}}}return{resultPixels:n,resultMask:a,minValue:f}},t=function(A){return{fileIdentifierString:A.fileIdentifierString,fileVersion:A.fileVersion,imageType:A.imageType,height:A.height,width:A.width,maxZError:A.maxZError,eofOffset:A.eofOffset,mask:A.mask?{numBlocksX:A.mask.numBlocksX,numBlocksY:A.mask.numBlocksY,numBytes:A.mask.numBytes,maxValue:A.mask.maxValue}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,numBytes:A.pixels.numBytes,maxValue:A.pixels.maxValue,noDataValue:A.noDataValue}}},i=function(A){for(var e=A.pixels.numBlocksX*A.pixels.numBlocksY,t={},i=0;i<e;i++){var r=A.pixels.blocks[i];0===r.encoding?t.float32=!0:1===r.encoding?t[r.bitsPerPixel]=!0:t[0]=!0}return Object.keys(t)},r=function(A,e,t){var i={},r=new Uint8Array(A,e,10);if(i.fileIdentifierString=String.fromCharCode.apply(null,r),"CntZImage"!==i.fileIdentifierString.trim())throw"Unexpected file identifier string: "+i.fileIdentifierString;e+=10;var I=new DataView(A,e,24);if(i.fileVersion=I.getInt32(0,!0),i.imageType=I.getInt32(4,!0),i.height=I.getUint32(8,!0),i.width=I.getUint32(12,!0),i.maxZError=I.getFloat64(16,!0),e+=24,!t)if(I=new DataView(A,e,16),i.mask={},i.mask.numBlocksY=I.getUint32(0,!0),i.mask.numBlocksX=I.getUint32(4,!0),i.mask.numBytes=I.getUint32(8,!0),i.mask.maxValue=I.getFloat32(12,!0),e+=16,i.mask.numBytes>0){var g=new Uint8Array(Math.ceil(i.width*i.height/8)),n=(I=new DataView(A,e,i.mask.numBytes)).getInt16(0,!0),a=2,o=0;do{if(n>0)for(;n--;)g[o++]=I.getUint8(a++);else{var B=I.getUint8(a++);for(n=-n;n--;)g[o++]=B}n=I.getInt16(a,!0),a+=2}while(a<i.mask.numBytes);if(-32768!==n||o<g.length)throw"Unexpected end of mask RLE encoding";i.mask.bitset=g,e+=i.mask.numBytes}else 0==(i.mask.numBytes|i.mask.numBlocksY|i.mask.maxValue)&&(i.mask.bitset=new Uint8Array(Math.ceil(i.width*i.height/8)));I=new DataView(A,e,16),i.pixels={},i.pixels.numBlocksY=I.getUint32(0,!0),i.pixels.numBlocksX=I.getUint32(4,!0),i.pixels.numBytes=I.getUint32(8,!0),i.pixels.maxValue=I.getFloat32(12,!0),e+=16;var C=i.pixels.numBlocksX,Q=i.pixels.numBlocksY,E=C+(i.width%C>0?1:0),s=Q+(i.height%Q>0?1:0);i.pixels.blocks=new Array(E*s);for(var f=0,c=0;c<s;c++)for(var h=0;h<E;h++){var l=0,u=A.byteLength-e;I=new DataView(A,e,Math.min(10,u));var w={};i.pixels.blocks[f++]=w;var d=I.getUint8(0);if(l++,w.encoding=63&d,w.encoding>3)throw"Invalid block encoding ("+w.encoding+")";if(2!==w.encoding){if(0!==d&&2!==d){if(d>>=6,w.offsetType=d,2===d)w.offset=I.getInt8(1),l++;else if(1===d)w.offset=I.getInt16(1,!0),l+=2;else{if(0!==d)throw"Invalid block offset type";w.offset=I.getFloat32(1,!0),l+=4}if(1===w.encoding)if(d=I.getUint8(l),l++,w.bitsPerPixel=63&d,d>>=6,w.numValidPixelsType=d,2===d)w.numValidPixels=I.getUint8(l),l++;else if(1===d)w.numValidPixels=I.getUint16(l,!0),l+=2;else{if(0!==d)throw"Invalid valid pixel count type";w.numValidPixels=I.getUint32(l,!0),l+=4}}var D;if(e+=l,3!==w.encoding)if(0===w.encoding){var y=(i.pixels.numBytes-1)/4;if(y!==Math.floor(y))throw"uncompressed block has invalid length";D=new ArrayBuffer(4*y),new Uint8Array(D).set(new Uint8Array(A,e,4*y));var k=new Float32Array(D);w.rawData=k,e+=4*y}else if(1===w.encoding){var p=Math.ceil(w.numValidPixels*w.bitsPerPixel/8),m=Math.ceil(p/4);D=new ArrayBuffer(4*m),new Uint8Array(D).set(new Uint8Array(A,e,p)),w.stuffedData=new Uint32Array(D),e+=p}}else e++}return i.eofOffset=e,i},I=function(A,e,t,i,r,I,g){var n,a,o,B=(1<<e)-1,C=0,Q=0,E=Math.ceil((g-i)/r),s=4*A.length-Math.ceil(e*t/8);for(A[A.length-1]<<=8*s,n=0;n<t;n++){if(0===Q&&(o=A[C++],Q=32),Q>=e)a=o>>>Q-e&B,Q-=e;else{var f=e-Q;a=(o&B)<<f&B,a+=(o=A[C++])>>>(Q=32-f)}I[n]=a<E?i+a*r:g}return I},A),h=(g=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q,E=(1<<t)-1,s=0,f=0,c=4*A.length-Math.ceil(t*i/8);if(A[A.length-1]<<=8*c,r)for(a=0;a<i;a++)0===f&&(B=A[s++],f=32),f>=t?(o=B>>>f-t&E,f-=t):(o=(B&E)<<(C=t-f)&E,o+=(B=A[s++])>>>(f=32-C)),e[a]=r[o];else for(Q=Math.ceil((n-I)/g),a=0;a<i;a++)0===f&&(B=A[s++],f=32),f>=t?(o=B>>>f-t&E,f-=t):(o=(B&E)<<(C=t-f)&E,o+=(B=A[s++])>>>(f=32-C)),e[a]=o<Q?I+o*g:n},n=function(A,e,t,i,r,I){var g,n=(1<<e)-1,a=0,o=0,B=0,C=0,Q=0,E=[],s=4*A.length-Math.ceil(e*t/8);A[A.length-1]<<=8*s;var f=Math.ceil((I-i)/r);for(o=0;o<t;o++)0===C&&(g=A[a++],C=32),C>=e?(Q=g>>>C-e&n,C-=e):(Q=(g&n)<<(B=e-C)&n,Q+=(g=A[a++])>>>(C=32-B)),E[o]=Q<f?i+Q*r:I;return E.unshift(i),E},a=function(A,e,t,i,r,I,g,n){var a,o,B,C,Q=(1<<t)-1,E=0,s=0,f=0;if(r)for(a=0;a<i;a++)0===s&&(B=A[E++],s=32,f=0),s>=t?(o=B>>>f&Q,s-=t,f+=t):(o=B>>>f&Q,s=32-(C=t-s),o|=((B=A[E++])&(1<<C)-1)<<t-C,f=C),e[a]=r[o];else{var c=Math.ceil((n-I)/g);for(a=0;a<i;a++)0===s&&(B=A[E++],s=32,f=0),s>=t?(o=B>>>f&Q,s-=t,f+=t):(o=B>>>f&Q,s=32-(C=t-s),o|=((B=A[E++])&(1<<C)-1)<<t-C,f=C),e[a]=o<c?I+o*g:n}return e},o=function(A,e,t,i,r,I){var g,n=(1<<e)-1,a=0,o=0,B=0,C=0,Q=0,E=0,s=[],f=Math.ceil((I-i)/r);for(o=0;o<t;o++)0===C&&(g=A[a++],C=32,E=0),C>=e?(Q=g>>>E&n,C-=e,E+=e):(Q=g>>>E&n,C=32-(B=e-C),Q|=((g=A[a++])&(1<<B)-1)<<e-B,E=B),s[o]=Q<f?i+Q*r:I;return s.unshift(i),s},B=function(A,e,t,i){var r,I,g,n,a=(1<<t)-1,o=0,B=0,C=4*A.length-Math.ceil(t*i/8);for(A[A.length-1]<<=8*C,r=0;r<i;r++)0===B&&(g=A[o++],B=32),B>=t?(I=g>>>B-t&a,B-=t):(I=(g&a)<<(n=t-B)&a,I+=(g=A[o++])>>>(B=32-n)),e[r]=I;return e},C=function(A,e,t,i){var r,I,g,n,a=(1<<t)-1,o=0,B=0,C=0;for(r=0;r<i;r++)0===B&&(g=A[o++],B=32,C=0),B>=t?(I=g>>>C&a,B-=t,C+=t):(I=g>>>C&a,B=32-(n=t-B),I|=((g=A[o++])&(1<<n)-1)<<t-n,C=n),e[r]=I;return e},Q={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(A){for(var e=65535,t=65535,i=A.length,r=Math.floor(i/2),I=0;r;){var g=r>=359?359:r;r-=g;do{e+=A[I++]<<8,t+=e+=A[I++]}while(--g);e=(65535&e)+(e>>>16),t=(65535&t)+(t>>>16)}return 1&i&&(t+=e+=A[I]<<8),((t=(65535&t)+(t>>>16))<<16|(e=(65535&e)+(e>>>16)))>>>0},readHeaderInfo:function(A,e){var t=e.ptr,i=new Uint8Array(A,t,6),r={};if(r.fileIdentifierString=String.fromCharCode.apply(null,i),0!==r.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+r.fileIdentifierString;t+=6;var I,g=new DataView(A,t,8),n=g.getInt32(0,!0);if(r.fileVersion=n,t+=4,n>=3&&(r.checksum=g.getUint32(4,!0),t+=4),g=new DataView(A,t,12),r.height=g.getUint32(0,!0),r.width=g.getUint32(4,!0),t+=8,n>=4?(r.numDims=g.getUint32(8,!0),t+=4):r.numDims=1,g=new DataView(A,t,40),r.numValidPixel=g.getUint32(0,!0),r.microBlockSize=g.getInt32(4,!0),r.blobSize=g.getInt32(8,!0),r.imageType=g.getInt32(12,!0),r.maxZError=g.getFloat64(16,!0),r.zMin=g.getFloat64(24,!0),r.zMax=g.getFloat64(32,!0),t+=40,e.headerInfo=r,e.ptr=t,n>=3&&(I=n>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(A,t-I,r.blobSize-14))!==r.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(A,e){var t=e.headerInfo,i=this.getDataTypeArray(t.imageType),r=t.numDims*this.getDataTypeSize(t.imageType),I=this.readSubArray(A,e.ptr,i,r),g=this.readSubArray(A,e.ptr+r,i,r);e.ptr+=2*r;var n,a=!0;for(n=0;n<t.numDims;n++)if(I[n]!==g[n]){a=!1;break}return t.minValues=I,t.maxValues=g,a},readSubArray:function(A,e,t,i){var r;if(t===Uint8Array)r=new Uint8Array(A,e,i);else{var I=new ArrayBuffer(i);new Uint8Array(I).set(new Uint8Array(A,e,i)),r=new t(I)}return r},readMask:function(A,e){var t,i,r=e.ptr,I=e.headerInfo,g=I.width*I.height,n=I.numValidPixel,a=new DataView(A,r,4),o={};if(o.numBytes=a.getUint32(0,!0),r+=4,(0===n||g===n)&&0!==o.numBytes)throw"invalid mask";if(0===n)t=new Uint8Array(Math.ceil(g/8)),o.bitset=t,i=new Uint8Array(g),e.pixels.resultMask=i,r+=o.numBytes;else if(o.numBytes>0){t=new Uint8Array(Math.ceil(g/8));var B=(a=new DataView(A,r,o.numBytes)).getInt16(0,!0),C=2,Q=0,E=0;do{if(B>0)for(;B--;)t[Q++]=a.getUint8(C++);else for(E=a.getUint8(C++),B=-B;B--;)t[Q++]=E;B=a.getInt16(C,!0),C+=2}while(C<o.numBytes);if(-32768!==B||Q<t.length)throw"Unexpected end of mask RLE encoding";i=new Uint8Array(g);var s=0,f=0;for(f=0;f<g;f++)7&f?(s=t[f>>3],s<<=7&f):s=t[f>>3],128&s&&(i[f]=1);e.pixels.resultMask=i,o.bitset=t,r+=o.numBytes}return e.ptr=r,e.mask=o,!0},readDataOneSweep:function(A,e,t,i){var r,I=e.ptr,g=e.headerInfo,n=g.numDims,a=g.width*g.height,o=g.imageType,B=g.numValidPixel*Q.getDataTypeSize(o)*n,C=e.pixels.resultMask;if(t===Uint8Array)r=new Uint8Array(A,I,B);else{var E=new ArrayBuffer(B);new Uint8Array(E).set(new Uint8Array(A,I,B)),r=new t(E)}if(r.length===a*n)e.pixels.resultPixels=i?Q.swapDimensionOrder(r,a,n,t,!0):r;else{e.pixels.resultPixels=new t(a*n);var s=0,f=0,c=0,h=0;if(n>1){if(i){for(f=0;f<a;f++)if(C[f])for(h=f,c=0;c<n;c++,h+=a)e.pixels.resultPixels[h]=r[s++]}else for(f=0;f<a;f++)if(C[f])for(h=f*n,c=0;c<n;c++)e.pixels.resultPixels[h+c]=r[s++]}else for(f=0;f<a;f++)C[f]&&(e.pixels.resultPixels[f]=r[s++])}return I+=B,e.ptr=I,!0},readHuffmanTree:function(A,e){var t=this.HUFFMAN_LUT_BITS_MAX,i=new DataView(A,e.ptr,16);if(e.ptr+=16,i.getInt32(0,!0)<2)throw"unsupported Huffman version";var r=i.getInt32(4,!0),I=i.getInt32(8,!0),g=i.getInt32(12,!0);if(I>=g)return!1;var n=new Uint32Array(g-I);Q.decodeBits(A,e,n);var a,o,B,C,s=[];for(a=I;a<g;a++)s[o=a-(a<r?0:r)]={first:n[a-I],second:null};var f=A.byteLength-e.ptr,c=Math.ceil(f/4),h=new ArrayBuffer(4*c);new Uint8Array(h).set(new Uint8Array(A,e.ptr,f));var l,u=new Uint32Array(h),w=0,d=0;for(l=u[0],a=I;a<g;a++)(C=s[o=a-(a<r?0:r)].first)>0&&(s[o].second=l<<w>>>32-C,32-w>=C?32===(w+=C)&&(w=0,l=u[++d]):(w+=C-32,l=u[++d],s[o].second|=l>>>32-w));var D=0,y=0,k=new E;for(a=0;a<s.length;a++)void 0!==s[a]&&(D=Math.max(D,s[a].first));y=D>=t?t:D;var p,m,G,F,S,v=[];for(a=I;a<g;a++)if((C=s[o=a-(a<r?0:r)].first)>0)if(p=[C,o],C<=y)for(m=s[o].second<<y-C,G=1<<y-C,B=0;B<G;B++)v[m|B]=p;else for(m=s[o].second,S=k,F=C-1;F>=0;F--)m>>>F&1?(S.right||(S.right=new E),S=S.right):(S.left||(S.left=new E),S=S.left),0!==F||S.val||(S.val=p[1]);return{decodeLut:v,numBitsLUTQick:y,numBitsLUT:D,tree:k,stuffedData:u,srcPtr:d,bitPos:w}},readHuffman:function(A,e,t,i){var r,I,g,n,a,o,B,C,E,s=e.headerInfo.numDims,f=e.headerInfo.height,c=e.headerInfo.width,h=c*f,l=this.readHuffmanTree(A,e),u=l.decodeLut,w=l.tree,d=l.stuffedData,D=l.srcPtr,y=l.bitPos,k=l.numBitsLUTQick,p=l.numBitsLUT,m=0===e.headerInfo.imageType?128:0,G=e.pixels.resultMask,F=0;y>0&&(D++,y=0);var S,v=d[D],R=1===e.encodeMode,U=new t(h*s),L=U;if(s<2||R){for(S=0;S<s;S++)if(s>1&&(L=new t(U.buffer,h*S,h),F=0),e.headerInfo.numValidPixel===c*f)for(C=0,o=0;o<f;o++)for(B=0;B<c;B++,C++){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,R?(g+=B>0?F:o>0?L[C-c]:F,g&=255,L[C]=g,F=g):L[C]=g}else for(C=0,o=0;o<f;o++)for(B=0;B<c;B++,C++)if(G[C]){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,R?(B>0&&G[C-1]?g+=F:o>0&&G[C-c]?g+=L[C-c]:g+=F,g&=255,L[C]=g,F=g):L[C]=g}}else for(C=0,o=0;o<f;o++)for(B=0;B<c;B++)if(C=o*c+B,!G||G[C])for(S=0;S<s;S++,C+=h){if(I=0,a=n=v<<y>>>32-k,32-y<k&&(a=n|=d[D+1]>>>64-y-k),u[a])I=u[a][1],y+=u[a][0];else for(a=n=v<<y>>>32-p,32-y<p&&(a=n|=d[D+1]>>>64-y-p),r=w,E=0;E<p;E++)if(!(r=n>>>p-E-1&1?r.right:r.left).left&&!r.right){I=r.val,y=y+E+1;break}y>=32&&(y-=32,v=d[++D]),g=I-m,L[C]=g}e.ptr=e.ptr+4*(D+1)+(y>0?4:0),e.pixels.resultPixels=U,s>1&&!i&&(e.pixels.resultPixels=Q.swapDimensionOrder(U,h,s,t))},decodeBits:function(A,e,t,i,r){var I=e.headerInfo,Q=I.fileVersion,E=0,s=A.byteLength-e.ptr>=5?5:A.byteLength-e.ptr,f=new DataView(A,e.ptr,s),c=f.getUint8(0);E++;var h=c>>6,l=0===h?4:3-h,u=(32&c)>0,w=31&c,d=0;if(1===l)d=f.getUint8(E),E++;else if(2===l)d=f.getUint16(E,!0),E+=2;else{if(4!==l)throw"Invalid valid pixel count type";d=f.getUint32(E,!0),E+=4}var D,y,k,p,m,G,F,S,v,R=2*I.maxZError,U=I.numDims>1?I.maxValues[r]:I.zMax;if(u){for(e.counter.lut++,S=f.getUint8(E),E++,p=Math.ceil((S-1)*w/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),k=new Uint8Array(y),e.ptr+=E,k.set(new Uint8Array(A,e.ptr,p)),F=new Uint32Array(y),e.ptr+=p,v=0;S-1>>>v;)v++;p=Math.ceil(d*v/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),(k=new Uint8Array(y)).set(new Uint8Array(A,e.ptr,p)),D=new Uint32Array(y),e.ptr+=p,G=Q>=3?o(F,w,S-1,i,R,U):n(F,w,S-1,i,R,U),Q>=3?a(D,t,v,d,G):g(D,t,v,d,G)}else e.counter.bitstuffer++,v=w,e.ptr+=E,v>0&&(p=Math.ceil(d*v/8),m=Math.ceil(p/4),y=new ArrayBuffer(4*m),(k=new Uint8Array(y)).set(new Uint8Array(A,e.ptr,p)),D=new Uint32Array(y),e.ptr+=p,Q>=3?null==i?C(D,t,v,d):a(D,t,v,d,!1,i,R,U):null==i?B(D,t,v,d):g(D,t,v,d,!1,i,R,U))},readTiles:function(A,e,t,i){var r=e.headerInfo,I=r.width,g=r.height,n=I*g,a=r.microBlockSize,o=r.imageType,B=Q.getDataTypeSize(o),C=Math.ceil(I/a),E=Math.ceil(g/a);e.pixels.numBlocksY=E,e.pixels.numBlocksX=C,e.pixels.ptr=0;var s,f,c,h,l,u,w,d,D,y,k=0,p=0,m=0,G=0,F=0,S=0,v=0,R=0,U=0,L=0,b=0,M=0,N=0,x=0,J=0,q=new t(a*a),Y=g%a||a,K=I%a||a,H=r.numDims,O=e.pixels.resultMask,P=e.pixels.resultPixels,T=r.fileVersion>=5?14:15,V=r.zMax;for(m=0;m<E;m++)for(F=m!==E-1?a:Y,G=0;G<C;G++)for(L=m*I*a+G*a,b=I-(S=G!==C-1?a:K),d=0;d<H;d++){if(H>1?(y=P,L=m*I*a+G*a,P=new t(e.pixels.resultPixels.buffer,n*d*B,n),V=r.maxValues[d]):y=null,v=A.byteLength-e.ptr,f={},J=0,R=(s=new DataView(A,e.ptr,Math.min(10,v))).getUint8(0),J++,D=r.fileVersion>=5?4&R:0,U=R>>6&255,(R>>2&T)!=(G*a>>3&T))throw"integrity issue";if(D&&0===d)throw"integrity issue";if((l=3&R)>3)throw e.ptr+=J,"Invalid block encoding ("+l+")";if(2!==l)if(0===l){if(D)throw"integrity issue";if(e.counter.uncompressed++,e.ptr+=J,M=(M=F*S*B)<(N=A.byteLength-e.ptr)?M:N,c=new ArrayBuffer(M%B==0?M:M+B-M%B),new Uint8Array(c).set(new Uint8Array(A,e.ptr,M)),h=new t(c),x=0,O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=h[x++]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L++]=h[x++];L+=b}e.ptr+=x*B}else if(u=Q.getDataTypeUsed(D&&o<6?4:o,U),w=Q.getOnePixel(f,J,u,s),J+=Q.getDataTypeSize(u),3===l)if(e.ptr+=J,e.counter.constantoffset++,O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=D?Math.min(V,y[L]+w):w),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L]=D?Math.min(V,y[L]+w):w,L++;L+=b}else if(e.ptr+=J,Q.decodeBits(A,e,q,w,d),J=0,D)if(O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=q[J++]+y[L]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L]=q[J++]+y[L],L++;L+=b}else if(O)for(k=0;k<F;k++){for(p=0;p<S;p++)O[L]&&(P[L]=q[J++]),L++;L+=b}else for(k=0;k<F;k++){for(p=0;p<S;p++)P[L++]=q[J++];L+=b}else{if(D)if(O)for(k=0;k<F;k++)for(p=0;p<S;p++)O[L]&&(P[L]=y[L]),L++;else for(k=0;k<F;k++)for(p=0;p<S;p++)P[L]=y[L],L++;e.counter.constant++,e.ptr+=J}}H>1&&!i&&(e.pixels.resultPixels=Q.swapDimensionOrder(e.pixels.resultPixels,n,H,t))},formatFileInfo:function(A){return{fileIdentifierString:A.headerInfo.fileIdentifierString,fileVersion:A.headerInfo.fileVersion,imageType:A.headerInfo.imageType,height:A.headerInfo.height,width:A.headerInfo.width,numValidPixel:A.headerInfo.numValidPixel,microBlockSize:A.headerInfo.microBlockSize,blobSize:A.headerInfo.blobSize,maxZError:A.headerInfo.maxZError,pixelType:Q.getPixelType(A.headerInfo.imageType),eofOffset:A.eofOffset,mask:A.mask?{numBytes:A.mask.numBytes}:null,pixels:{numBlocksX:A.pixels.numBlocksX,numBlocksY:A.pixels.numBlocksY,maxValue:A.headerInfo.zMax,minValue:A.headerInfo.zMin,noDataValue:A.noDataValue}}},constructConstantSurface:function(A,e){var t=A.headerInfo.zMax,i=A.headerInfo.zMin,r=A.headerInfo.maxValues,I=A.headerInfo.numDims,g=A.headerInfo.height*A.headerInfo.width,n=0,a=0,o=0,B=A.pixels.resultMask,C=A.pixels.resultPixels;if(B)if(I>1){if(e)for(n=0;n<I;n++)for(o=n*g,t=r[n],a=0;a<g;a++)B[a]&&(C[o+a]=t);else for(a=0;a<g;a++)if(B[a])for(o=a*I,n=0;n<I;n++)C[o+I]=r[n]}else for(a=0;a<g;a++)B[a]&&(C[a]=t);else if(I>1&&i!==t)if(e)for(n=0;n<I;n++)for(o=n*g,t=r[n],a=0;a<g;a++)C[o+a]=t;else for(a=0;a<g;a++)for(o=a*I,n=0;n<I;n++)C[o+n]=r[n];else for(a=0;a<g*I;a++)C[a]=t},getDataTypeArray:function(A){var e;switch(A){case 0:e=Int8Array;break;case 1:e=Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:default:e=Float32Array;break;case 7:e=Float64Array}return e},getPixelType:function(A){var e;switch(A){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:default:e="F32";break;case 7:e="F64"}return e},isValidPixelValue:function(A,e){if(null==e)return!1;var t;switch(A){case 0:t=e>=-128&&e<=127;break;case 1:t=e>=0&&e<=255;break;case 2:t=e>=-32768&&e<=32767;break;case 3:t=e>=0&&e<=65536;break;case 4:t=e>=-2147483648&&e<=2147483647;break;case 5:t=e>=0&&e<=4294967296;break;case 6:t=e>=-34027999387901484e22&&e<=34027999387901484e22;break;case 7:t=e>=-17976931348623157e292&&e<=17976931348623157e292;break;default:t=!1}return t},getDataTypeSize:function(A){var e=0;switch(A){case 0:case 1:e=1;break;case 2:case 3:e=2;break;case 4:case 5:case 6:e=4;break;case 7:e=8;break;default:e=A}return e},getDataTypeUsed:function(A,e){var t=A;switch(A){case 2:case 4:t=A-e;break;case 3:case 5:t=A-2*e;break;case 6:t=0===e?A:1===e?2:1;break;case 7:t=0===e?A:A-2*e+1;break;default:t=A}return t},getOnePixel:function(A,e,t,i){var r=0;switch(t){case 0:r=i.getInt8(e);break;case 1:r=i.getUint8(e);break;case 2:r=i.getInt16(e,!0);break;case 3:r=i.getUint16(e,!0);break;case 4:r=i.getInt32(e,!0);break;case 5:r=i.getUInt32(e,!0);break;case 6:r=i.getFloat32(e,!0);break;case 7:r=i.getFloat64(e,!0);break;default:throw"the decoder does not understand this pixel type"}return r},swapDimensionOrder:function(A,e,t,i,r){var I=0,g=0,n=0,a=0,o=A;if(t>1)if(o=new i(e*t),r)for(I=0;I<e;I++)for(a=I,n=0;n<t;n++,a+=e)o[a]=A[g++];else for(I=0;I<e;I++)for(a=I,n=0;n<t;n++,a+=e)o[g++]=A[a];return o}},E=function(A,e,t){this.val=A,this.left=e,this.right=t},{decode:function(A,e){var t=(e=e||{}).noDataValue,i=0,r={};r.ptr=e.inputOffset||0,r.pixels={},Q.readHeaderInfo(A,r);var I=r.headerInfo,g=I.fileVersion,n=Q.getDataTypeArray(I.imageType);if(g>5)throw"unsupported lerc version 2."+g;Q.readMask(A,r),I.numValidPixel===I.width*I.height||r.pixels.resultMask||(r.pixels.resultMask=e.maskData);var a=I.width*I.height;r.pixels.resultPixels=new n(a*I.numDims),r.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var o,B=!e.returnPixelInterleavedDims;if(0!==I.numValidPixel)if(I.zMax===I.zMin)Q.constructConstantSurface(r,B);else if(g>=4&&Q.checkMinMaxRanges(A,r))Q.constructConstantSurface(r,B);else{var C=new DataView(A,r.ptr,2),E=C.getUint8(0);if(r.ptr++,E)Q.readDataOneSweep(A,r,n,B);else if(g>1&&I.imageType<=1&&Math.abs(I.maxZError-.5)<1e-5){var s=C.getUint8(1);if(r.ptr++,r.encodeMode=s,s>2||g<4&&s>1)throw"Invalid Huffman flag "+s;s?Q.readHuffman(A,r,n,B):Q.readTiles(A,r,n,B)}else Q.readTiles(A,r,n,B)}r.eofOffset=r.ptr,e.inputOffset?(o=r.headerInfo.blobSize+e.inputOffset-r.ptr,Math.abs(o)>=1&&(r.eofOffset=e.inputOffset+r.headerInfo.blobSize)):(o=r.headerInfo.blobSize-r.ptr,Math.abs(o)>=1&&(r.eofOffset=r.headerInfo.blobSize));var f={width:I.width,height:I.height,pixelData:r.pixels.resultPixels,minValue:I.zMin,maxValue:I.zMax,validPixelCount:I.numValidPixel,dimCount:I.numDims,dimStats:{minValues:I.minValues,maxValues:I.maxValues},maskData:r.pixels.resultMask};if(r.pixels.resultMask&&Q.isValidPixelValue(I.imageType,t)){var c=r.pixels.resultMask;for(i=0;i<a;i++)c[i]||(f.pixelData[i]=t);f.noDataValue=t}return r.noDataValue=t,e.returnFileInfo&&(f.fileInfo=Q.formatFileInfo(r)),f},getBandCount:function(A){for(var e=0,t=0,i={ptr:0,pixels:{}};t<A.byteLength-58;)Q.readHeaderInfo(A,i),t+=i.headerInfo.blobSize,e++,i.ptr=t;return e}}),l=(s=new ArrayBuffer(4),f=new Uint8Array(s),new Uint32Array(s)[0]=1,1===f[0]),u={decode:function(A,e){if(!l)throw"Big endian system is not supported.";var t,i,r=(e=e||{}).inputOffset||0,I=new Uint8Array(A,r,10),g=String.fromCharCode.apply(null,I);if("CntZImage"===g.trim())t=c,i=1;else{if("Lerc2"!==g.substring(0,5))throw"Unexpected file identifier string: "+g;t=h,i=2}for(var n,a,o,B,C,Q,E=0,s=A.byteLength-10,f=[],u={width:0,height:0,pixels:[],pixelType:e.pixelType,mask:null,statistics:[]},w=0;r<s;){var d=t.decode(A,{inputOffset:r,encodedMaskData:n,maskData:o,returnMask:0===E,returnEncodedMask:0===E,returnFileInfo:!0,returnPixelInterleavedDims:e.returnPixelInterleavedDims,pixelType:e.pixelType||null,noDataValue:e.noDataValue||null});r=d.fileInfo.eofOffset,o=d.maskData,0===E&&(n=d.encodedMaskData,u.width=d.width,u.height=d.height,u.dimCount=d.dimCount||1,u.pixelType=d.pixelType||d.fileInfo.pixelType,u.mask=o),i>1&&(o&&f.push(o),d.fileInfo.mask&&d.fileInfo.mask.numBytes>0&&w++),E++,u.pixels.push(d.pixelData),u.statistics.push({minValue:d.minValue,maxValue:d.maxValue,noDataValue:d.noDataValue,dimStats:d.dimStats})}if(i>1&&w>1){for(Q=u.width*u.height,u.bandMasks=f,(o=new Uint8Array(Q)).set(f[0]),B=1;B<f.length;B++)for(a=f[B],C=0;C<Q;C++)o[C]=o[C]&a[C];u.maskData=o}return u}};TA.exports?TA.exports=u:this.Lerc=u}();var ZA,jA,WA,zA=XA.exports,$A={env:{emscripten_notify_memory_growth:function(A){WA=new Uint8Array(jA.exports.memory.buffer)}}},Ae=function(){function A(){B(this,A)}return Q(A,[{key:"init",value:function(){return ZA||(ZA="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+ee).then((function(A){return A.arrayBuffer()})).then((function(A){return WebAssembly.instantiate(A,$A)})).then(this._init):WebAssembly.instantiate(Buffer.from(ee,"base64"),$A).then(this._init))}},{key:"_init",value:function(A){jA=A.instance,$A.env.emscripten_notify_memory_growth(0)}},{key:"decode",value:function(A){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!jA)throw new Error("ZSTDDecoder: Await .init() before decoding.");var t=A.byteLength,i=jA.exports.malloc(t);WA.set(A,i),e=e||Number(jA.exports.ZSTD_findDecompressedSize(i,t));var r=jA.exports.malloc(e),I=jA.exports.ZSTD_decompress(r,e,i,t),g=WA.slice(r,r+I);return jA.exports.free(i),jA.exports.free(r),g}}]),A}(),ee="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",te={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},ie={};for(var re in te)te.hasOwnProperty(re)&&(ie[te[re]]=parseInt(re,10));ie.BitsPerSample,ie.ExtraSamples,ie.SampleFormat,ie.StripByteCounts,ie.StripOffsets,ie.StripRowCounts,ie.TileByteCounts,ie.TileOffsets,ie.SubIFDs;var Ie={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ge={};for(var ne in Ie)Ie.hasOwnProperty(ne)&&(ge[Ie[ne]]=parseInt(ne,10));var ae=1,oe=0,Be=1,Ce=2,Qe={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},Ee={};for(var se in Qe)Qe.hasOwnProperty(se)&&(Ee[Qe[se]]=parseInt(se,10));function fe(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var ce=new Ae,he=function(A){s(t,w);var e=fe(t);function t(A){var i;return B(this,t),(i=e.call(this)).planarConfiguration=void 0!==A.PlanarConfiguration?A.PlanarConfiguration:1,i.samplesPerPixel=void 0!==A.SamplesPerPixel?A.SamplesPerPixel:1,i.addCompression=A.LercParameters[ae],i}return Q(t,[{key:"decodeBlock",value:function(A){switch(this.addCompression){case oe:break;case Be:A=YA(new Uint8Array(A)).buffer;break;case Ce:A=ce.decode(new Uint8Array(A)).buffer;break;default:throw new Error("Unsupported LERC additional compression method identifier: ".concat(this.addCompression))}return zA.decode(A,{returnPixelInterleavedDims:1===this.planarConfiguration}).pixels[0].buffer}}]),t}(),le=Object.freeze({__proto__:null,zstd:ce,default:he});function ue(A){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A){return!1}}();return function(){var t,i=c(A);if(e){var r=c(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return f(this,t)}}var we=function(A){s(I,w);var t,i=ue(I);function I(){var A;if(B(this,I),A=i.call(this),"undefined"==typeof createImageBitmap)throw new Error("Cannot decode WebImage as `createImageBitmap` is not available");if("undefined"==typeof document&&"undefined"==typeof OffscreenCanvas)throw new Error("Cannot decode WebImage as neither `document` nor `OffscreenCanvas` is not available");return A}return Q(I,[{key:"decode",value:(t=e(r.mark((function A(e,t){var i,I,g,n;return r.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return i=new Blob([t]),A.next=3,createImageBitmap(i);case 3:return I=A.sent,"undefined"!=typeof document?((g=document.createElement("canvas")).width=I.width,g.height=I.height):g=new OffscreenCanvas(I.width,I.height),(n=g.getContext("2d")).drawImage(I,0,0),A.abrupt("return",n.getImageData(0,0,I.width,I.height).data.buffer);case 8:case"end":return A.stop()}}),A)}))),function(A,e){return t.apply(this,arguments)})}]),I}(),de=Object.freeze({__proto__:null,default:we});';return new n("undefined"!=typeof Buffer?"data:application/javascript;base64,"+Buffer.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}},28843:(e,t,r)=>{"use strict";r.d(t,{rr:()=>gr});function n(e){let t=e.length;for(;--t>=0;)e[t]=0}const i=256,o=286,a=30,s=15,l=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),c=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),f=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=new Array(576);n(h);const p=new Array(60);n(p);const d=new Array(512);n(d);const y=new Array(256);n(y);const g=new Array(29);n(g);const m=new Array(a);function _(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let v,A,b;function w(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}n(m);const E=e=>e<256?d[e]:d[256+(e>>>7)],x=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},I=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,x(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},S=(e,t,r)=>{I(e,r[2*t],r[2*t+1])},C=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},P=(e,t,r)=>{const n=new Array(16);let i,o,a=0;for(i=1;i<=s;i++)a=a+r[i-1]<<1,n[i]=a;for(o=0;o<=t;o++){let t=e[2*o+1];0!==t&&(e[2*o]=C(n[t]++,t))}},O=e=>{let t;for(t=0;t<o;t++)e.dyn_ltree[2*t]=0;for(t=0;t<a;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},T=e=>{e.bi_valid>8?x(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},M=(e,t,r,n)=>{const i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},k=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&M(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!M(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},R=(e,t,r)=>{let n,o,a,s,c=0;if(0!==e.sym_next)do{n=255&e.pending_buf[e.sym_buf+c++],n+=(255&e.pending_buf[e.sym_buf+c++])<<8,o=e.pending_buf[e.sym_buf+c++],0===n?S(e,o,t):(a=y[o],S(e,a+i+1,t),s=l[a],0!==s&&(o-=g[a],I(e,o,s)),n--,a=E(n),S(e,a,r),s=u[a],0!==s&&(n-=m[a],I(e,n,s)))}while(c<e.sym_next);S(e,256,t)},B=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let a,l,u,c=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<o;a++)0!==r[2*a]?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):r[2*a+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=c<2?++c:0,r[2*u]=1,e.depth[u]=0,e.opt_len--,i&&(e.static_len-=n[2*u+1]);for(t.max_code=c,a=e.heap_len>>1;a>=1;a--)k(e,r,a);u=o;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],k(e,r,1),l=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=l,r[2*u]=r[2*a]+r[2*l],e.depth[u]=(e.depth[a]>=e.depth[l]?e.depth[a]:e.depth[l])+1,r[2*a+1]=r[2*l+1]=u,e.heap[1]=u++,k(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,u=t.stat_desc.max_length;let c,f,h,p,d,y,g=0;for(p=0;p<=s;p++)e.bl_count[p]=0;for(r[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)f=e.heap[c],p=r[2*r[2*f+1]+1]+1,p>u&&(p=u,g++),r[2*f+1]=p,f>n||(e.bl_count[p]++,d=0,f>=l&&(d=a[f-l]),y=r[2*f],e.opt_len+=y*(p+d),o&&(e.static_len+=y*(i[2*f+1]+d)));if(0!==g){do{for(p=u-1;0===e.bl_count[p];)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[u]--,g-=2}while(g>0);for(p=u;0!==p;p--)for(f=e.bl_count[p];0!==f;)h=e.heap[--c],h>n||(r[2*h+1]!==p&&(e.opt_len+=(p-r[2*h+1])*r[2*h],r[2*h+1]=p),f--)}})(e,t),P(r,c,e.bl_count)},L=(e,t,r)=>{let n,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))},D=(e,t,r)=>{let n,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<l&&i===a)){if(s<u)do{S(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(S(e,i,e.bl_tree),s--),S(e,16,e.bl_tree),I(e,s-3,2)):s<=10?(S(e,17,e.bl_tree),I(e,s-3,3)):(S(e,18,e.bl_tree),I(e,s-11,7));s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4)}};let j=!1;const F=(e,t,r,n)=>{I(e,0+(n?1:0),3),T(e),x(e,r),x(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};var N=(e,t,r,n)=>{let o,a,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<i;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),B(e,e.l_desc),B(e,e.d_desc),s=(e=>{let t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),B(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=o&&(o=a)):o=a=r+5,r+4<=o&&-1!==t?F(e,t,r,n):4===e.strategy||a===o?(I(e,2+(n?1:0),3),R(e,h,p)):(I(e,4+(n?1:0),3),((e,t,r,n)=>{let i;for(I(e,t-257,5),I(e,r-1,5),I(e,n-4,4),i=0;i<n;i++)I(e,e.bl_tree[2*f[i]+1],3);D(e,e.dyn_ltree,t-1),D(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),R(e,e.dyn_ltree,e.dyn_dtree)),O(e),n&&T(e)},Z={_tr_init:e=>{j||((()=>{let e,t,r,n,i;const f=new Array(16);for(r=0,n=0;n<28;n++)for(g[n]=r,e=0;e<1<<l[n];e++)y[r++]=n;for(y[r-1]=n,i=0,n=0;n<16;n++)for(m[n]=i,e=0;e<1<<u[n];e++)d[i++]=n;for(i>>=7;n<a;n++)for(m[n]=i<<7,e=0;e<1<<u[n]-7;e++)d[256+i++]=n;for(t=0;t<=s;t++)f[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,f[8]++;for(;e<=255;)h[2*e+1]=9,e++,f[9]++;for(;e<=279;)h[2*e+1]=7,e++,f[7]++;for(;e<=287;)h[2*e+1]=8,e++,f[8]++;for(P(h,287,f),e=0;e<a;e++)p[2*e+1]=5,p[2*e]=C(e,5);v=new _(h,l,257,o,s),A=new _(p,u,0,a,s),b=new _(new Array(0),c,0,19,7)})(),j=!0),e.l_desc=new w(e.dyn_ltree,v),e.d_desc=new w(e.dyn_dtree,A),e.bl_desc=new w(e.bl_tree,b),e.bi_buf=0,e.bi_valid=0,O(e)},_tr_stored_block:F,_tr_flush_block:N,_tr_tally:(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(y[r]+i+1)]++,e.dyn_dtree[2*E(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{I(e,2,3),S(e,256,h),(e=>{16===e.bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var U=(e,t,r,n)=>{let i=65535&e,o=e>>>16&65535,a=0;for(;0!==r;){a=r>2e3?2e3:r,r-=a;do{i=i+t[n++]|0,o=o+i|0}while(--a);i%=65521,o%=65521}return i|o<<16};const Q=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var G=(e,t,r,n)=>{const i=Q,o=n+r;e^=-1;for(let r=n;r<o;r++)e=e>>>8^i[255&(e^t[r])];return~e},z={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},q={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:V,_tr_stored_block:W,_tr_flush_block:K,_tr_tally:H,_tr_align:Y}=Z,{Z_NO_FLUSH:X,Z_PARTIAL_FLUSH:J,Z_FULL_FLUSH:$,Z_FINISH:ee,Z_BLOCK:te,Z_OK:re,Z_STREAM_END:ne,Z_STREAM_ERROR:ie,Z_DATA_ERROR:oe,Z_BUF_ERROR:ae,Z_DEFAULT_COMPRESSION:se,Z_FILTERED:le,Z_HUFFMAN_ONLY:ue,Z_RLE:ce,Z_FIXED:fe,Z_DEFAULT_STRATEGY:he,Z_UNKNOWN:pe,Z_DEFLATED:de}=q,ye=258,ge=262,me=42,_e=113,ve=666,Ae=(e,t)=>(e.msg=z[t],t),be=e=>2*e-(e>4?9:0),we=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Ee=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do{r=e.head[--n],e.head[n]=r>=i?r-i:0}while(--t);t=i,n=t;do{r=e.prev[--n],e.prev[n]=r>=i?r-i:0}while(--t)};let xe=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const Ie=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},Se=(e,t)=>{K(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ie(e.strm)},Ce=(e,t)=>{e.pending_buf[e.pending++]=t},Pe=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Oe=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=U(e.adler,t,i,r):2===e.state.wrap&&(e.adler=G(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},Te=(e,t)=>{let r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-ge?e.strstart-(e.w_size-ge):0,u=e.window,c=e.w_mask,f=e.prev,h=e.strstart+ye;let p=u[o+a-1],d=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(r=t,u[r+a]===d&&u[r+a-1]===p&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&o<h);if(n=ye-(h-o),o=h-ye,n>a){if(e.match_start=t,a=n,n>=s)break;p=u[o+a-1],d=u[o+a]}}}while((t=f[t&c])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead},Me=e=>{const t=e.w_size;let r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ge)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Ee(e),n+=t),0===e.strm.avail_in)break;if(r=Oe(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=xe(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=xe(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ge&&0!==e.strm.avail_in)},ke=(e,t)=>{let r,n,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,n=e.strstart-e.block_start,r>n+e.strm.avail_in&&(r=n+e.strm.avail_in),r>i&&(r=i),r<o&&(0===r&&t!==ee||t===X||r!==n+e.strm.avail_in))break;a=t===ee&&r===n+e.strm.avail_in?1:0,W(e,0,0,a),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,Ie(e.strm),n&&(n>r&&(n=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+n),e.strm.next_out),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n,e.block_start+=n,r-=n),r&&(Oe(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===a);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==X&&t!==ee&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Oe(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,o=i>e.w_size?e.w_size:i,n=e.strstart-e.block_start,(n>=o||(n||t===ee)&&t!==X&&0===e.strm.avail_in&&n<=i)&&(r=n>i?i:n,a=t===ee&&0===e.strm.avail_in&&r===n?1:0,W(e,e.block_start,r,a),e.block_start+=r,Ie(e.strm)),a?3:1)},Re=(e,t)=>{let r,n;for(;;){if(e.lookahead<ge){if(Me(e),e.lookahead<ge&&t===X)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-ge&&(e.match_length=Te(e,r)),e.match_length>=3)if(n=H(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=xe(e,e.ins_h,e.window[e.strstart+1]);else n=H(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Se(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ee?(Se(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Se(e,!1),0===e.strm.avail_out)?1:2},Be=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<ge){if(Me(e),e.lookahead<ge&&t===X)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ge&&(e.match_length=Te(e,r),e.match_length<=5&&(e.strategy===le||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=H(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=xe(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(Se(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=H(e,0,e.window[e.strstart-1]),n&&Se(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=H(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ee?(Se(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Se(e,!1),0===e.strm.avail_out)?1:2};function Le(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const De=[new Le(0,0,0,0,ke),new Le(4,4,8,4,Re),new Le(4,5,16,8,Re),new Le(4,6,32,32,Re),new Le(4,4,16,16,Be),new Le(8,16,32,32,Be),new Le(8,16,128,128,Be),new Le(8,32,128,256,Be),new Le(32,128,258,1024,Be),new Le(32,258,258,4096,Be)];function je(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=de,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),we(this.dyn_ltree),we(this.dyn_dtree),we(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),we(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),we(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Fe=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==me&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==_e&&t.status!==ve?1:0},Ne=e=>{if(Fe(e))return Ae(e,ie);e.total_in=e.total_out=0,e.data_type=pe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?me:_e,e.adler=2===t.wrap?0:1,t.last_flush=-2,V(t),re},Ze=e=>{const t=Ne(e);var r;return t===re&&((r=e.state).window_size=2*r.w_size,we(r.head),r.max_lazy_match=De[r.level].max_lazy,r.good_match=De[r.level].good_length,r.nice_match=De[r.level].nice_length,r.max_chain_length=De[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},Ue=(e,t,r,n,i,o)=>{if(!e)return ie;let a=1;if(t===se&&(t=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>9||r!==de||n<8||n>15||t<0||t>9||o<0||o>fe||8===n&&1!==a)return Ae(e,ie);8===n&&(n=9);const s=new je;return e.state=s,s.strm=e,s.status=me,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=o,s.method=r,Ze(e)};var Qe={deflateInit:(e,t)=>Ue(e,t,de,15,8,he),deflateInit2:Ue,deflateReset:Ze,deflateResetKeep:Ne,deflateSetHeader:(e,t)=>Fe(e)||2!==e.state.wrap?ie:(e.state.gzhead=t,re),deflate:(e,t)=>{if(Fe(e)||t>te||t<0)return e?Ae(e,ie):ie;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===ve&&t!==ee)return Ae(e,0===e.avail_out?ae:ie);const n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(Ie(e),0===e.avail_out)return r.last_flush=-1,re}else if(0===e.avail_in&&be(t)<=be(n)&&t!==ee)return Ae(e,ae);if(r.status===ve&&0!==e.avail_in)return Ae(e,ae);if(r.status===me&&0===r.wrap&&(r.status=_e),r.status===me){let t=de+(r.w_bits-8<<4)<<8,n=-1;if(n=r.strategy>=ue||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,Pe(r,t),0!==r.strstart&&(Pe(r,e.adler>>>16),Pe(r,65535&e.adler)),e.adler=1,r.status=_e,Ie(e),0!==r.pending)return r.last_flush=-1,re}if(57===r.status)if(e.adler=0,Ce(r,31),Ce(r,139),Ce(r,8),r.gzhead)Ce(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Ce(r,255&r.gzhead.time),Ce(r,r.gzhead.time>>8&255),Ce(r,r.gzhead.time>>16&255),Ce(r,r.gzhead.time>>24&255),Ce(r,9===r.level?2:r.strategy>=ue||r.level<2?4:0),Ce(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Ce(r,255&r.gzhead.extra.length),Ce(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=G(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(Ce(r,0),Ce(r,0),Ce(r,0),Ce(r,0),Ce(r,0),Ce(r,9===r.level?2:r.strategy>=ue||r.level<2?4:0),Ce(r,3),r.status=_e,Ie(e),0!==r.pending)return r.last_flush=-1,re;if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=G(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=i,Ie(e),0!==r.pending)return r.last_flush=-1,re;t=0,n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=G(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=G(e.adler,r.pending_buf,r.pending-n,n)),Ie(e),0!==r.pending)return r.last_flush=-1,re;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Ce(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=G(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=G(e.adler,r.pending_buf,r.pending-n,n)),Ie(e),0!==r.pending)return r.last_flush=-1,re;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Ce(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>n&&(e.adler=G(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Ie(e),0!==r.pending))return r.last_flush=-1,re;Ce(r,255&e.adler),Ce(r,e.adler>>8&255),e.adler=0}if(r.status=_e,Ie(e),0!==r.pending)return r.last_flush=-1,re}if(0!==e.avail_in||0!==r.lookahead||t!==X&&r.status!==ve){let n=0===r.level?ke(r,t):r.strategy===ue?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(Me(e),0===e.lookahead)){if(t===X)return 1;break}if(e.match_length=0,r=H(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Se(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Se(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Se(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===ce?((e,t)=>{let r,n,i,o;const a=e.window;for(;;){if(e.lookahead<=ye){if(Me(e),e.lookahead<=ye&&t===X)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){o=e.strstart+ye;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);e.match_length=ye-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=H(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=H(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Se(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ee?(Se(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Se(e,!1),0===e.strm.avail_out)?1:2})(r,t):De[r.level].func(r,t);if(3!==n&&4!==n||(r.status=ve),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),re;if(2===n&&(t===J?Y(r):t!==te&&(W(r,0,0,!1),t===$&&(we(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),Ie(e),0===e.avail_out))return r.last_flush=-1,re}return t!==ee?re:r.wrap<=0?ne:(2===r.wrap?(Ce(r,255&e.adler),Ce(r,e.adler>>8&255),Ce(r,e.adler>>16&255),Ce(r,e.adler>>24&255),Ce(r,255&e.total_in),Ce(r,e.total_in>>8&255),Ce(r,e.total_in>>16&255),Ce(r,e.total_in>>24&255)):(Pe(r,e.adler>>>16),Pe(r,65535&e.adler)),Ie(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?re:ne)},deflateEnd:e=>{if(Fe(e))return ie;const t=e.state.status;return e.state=null,t===_e?Ae(e,oe):re},deflateSetDictionary:(e,t)=>{let r=t.length;if(Fe(e))return ie;const n=e.state,i=n.wrap;if(2===i||1===i&&n.status!==me||n.lookahead)return ie;if(1===i&&(e.adler=U(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(we(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const o=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Me(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=xe(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,Me(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=a,e.input=s,e.avail_in=o,n.wrap=i,re},deflateInfo:"pako deflate (from Nodeca project)"};const Ge=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ze={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)Ge(r,t)&&(e[t]=r[t])}}return e},flattenChunks:e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,n=0,i=e.length;t<i;t++){let i=e[t];r.set(i,n),n+=i.length}return r}};let qe=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){qe=!1}const Ve=new Uint8Array(256);for(let e=0;e<256;e++)Ve[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ve[254]=Ve[254]=1;var We={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,o,a=e.length,s=0;for(i=0;i<a;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<a&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)r=e.charCodeAt(i),55296==(64512&r)&&i+1<a&&(n=e.charCodeAt(i+1),56320==(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|63&r):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|63&r):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|63&r);return t},buf2string:(e,t)=>{const r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,i;const o=new Array(2*r);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){o[i++]=t;continue}let a=Ve[t];if(a>4)o[i++]=65533,n+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&n<r;)t=t<<6|63&e[n++],a--;a>1?o[i++]=65533:t<65536?o[i++]=t:(t-=65536,o[i++]=55296|t>>10&1023,o[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&qe)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(o,i)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+Ve[e[r]]>t?r:t}};var Ke=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const He=Object.prototype.toString,{Z_NO_FLUSH:Ye,Z_SYNC_FLUSH:Xe,Z_FULL_FLUSH:Je,Z_FINISH:$e,Z_OK:et,Z_STREAM_END:tt,Z_DEFAULT_COMPRESSION:rt,Z_DEFAULT_STRATEGY:nt,Z_DEFLATED:it}=q;function ot(e){this.options=ze.assign({level:rt,method:it,chunkSize:16384,windowBits:15,memLevel:8,strategy:nt},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ke,this.strm.avail_out=0;let r=Qe.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==et)throw new Error(z[r]);if(t.header&&Qe.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?We.string2buf(t.dictionary):"[object ArrayBuffer]"===He.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=Qe.deflateSetDictionary(this.strm,e),r!==et)throw new Error(z[r]);this._dict_set=!0}}function at(e,t){const r=new ot(t);if(r.push(e,!0),r.err)throw r.msg||z[r.err];return r.result}ot.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?$e:Ye,"string"==typeof e?r.input=We.string2buf(e):"[object ArrayBuffer]"===He.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===Xe||o===Je)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=Qe.deflate(r,o),i===tt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Qe.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===et;if(0!==r.avail_out){if(o>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},ot.prototype.onData=function(e){this.chunks.push(e)},ot.prototype.onEnd=function(e){e===et&&(this.result=ze.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var st={Deflate:ot,deflate:at,deflateRaw:function(e,t){return(t=t||{}).raw=!0,at(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,at(e,t)},constants:q};const lt=16209;var ut=function(e,t){let r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v,A,b,w,E,x,I;const S=e.state;r=e.next_in,x=e.input,n=r+(e.avail_in-5),i=e.next_out,I=e.output,o=i-(t-e.avail_out),a=i+(e.avail_out-257),s=S.dmax,l=S.wsize,u=S.whave,c=S.wnext,f=S.window,h=S.hold,p=S.bits,d=S.lencode,y=S.distcode,g=(1<<S.lenbits)-1,m=(1<<S.distbits)-1;e:do{p<15&&(h+=x[r++]<<p,p+=8,h+=x[r++]<<p,p+=8),_=d[h&g];t:for(;;){if(v=_>>>24,h>>>=v,p-=v,v=_>>>16&255,0===v)I[i++]=65535&_;else{if(!(16&v)){if(64&v){if(32&v){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=lt;break e}_=d[(65535&_)+(h&(1<<v)-1)];continue t}for(A=65535&_,v&=15,v&&(p<v&&(h+=x[r++]<<p,p+=8),A+=h&(1<<v)-1,h>>>=v,p-=v),p<15&&(h+=x[r++]<<p,p+=8,h+=x[r++]<<p,p+=8),_=y[h&m];;){if(v=_>>>24,h>>>=v,p-=v,v=_>>>16&255,16&v){if(b=65535&_,v&=15,p<v&&(h+=x[r++]<<p,p+=8,p<v&&(h+=x[r++]<<p,p+=8)),b+=h&(1<<v)-1,b>s){e.msg="invalid distance too far back",S.mode=lt;break e}if(h>>>=v,p-=v,v=i-o,b>v){if(v=b-v,v>u&&S.sane){e.msg="invalid distance too far back",S.mode=lt;break e}if(w=0,E=f,0===c){if(w+=l-v,v<A){A-=v;do{I[i++]=f[w++]}while(--v);w=i-b,E=I}}else if(c<v){if(w+=l+c-v,v-=c,v<A){A-=v;do{I[i++]=f[w++]}while(--v);if(w=0,c<A){v=c,A-=v;do{I[i++]=f[w++]}while(--v);w=i-b,E=I}}}else if(w+=c-v,v<A){A-=v;do{I[i++]=f[w++]}while(--v);w=i-b,E=I}for(;A>2;)I[i++]=E[w++],I[i++]=E[w++],I[i++]=E[w++],A-=3;A&&(I[i++]=E[w++],A>1&&(I[i++]=E[w++]))}else{w=i-b;do{I[i++]=I[w++],I[i++]=I[w++],I[i++]=I[w++],A-=3}while(A>2);A&&(I[i++]=I[w++],A>1&&(I[i++]=I[w++]))}break}if(64&v){e.msg="invalid distance code",S.mode=lt;break e}_=y[(65535&_)+(h&(1<<v)-1)]}}break}}while(r<n&&i<a);A=p>>3,r-=A,p-=A<<3,h&=(1<<p)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<a?a-i+257:257-(i-a),S.hold=h,S.bits=p};const ct=15,ft=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ht=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),pt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var yt=(e,t,r,n,i,o,a,s)=>{const l=s.bits;let u,c,f,h,p,d,y=0,g=0,m=0,_=0,v=0,A=0,b=0,w=0,E=0,x=0,I=null;const S=new Uint16Array(16),C=new Uint16Array(16);let P,O,T,M=null;for(y=0;y<=ct;y++)S[y]=0;for(g=0;g<n;g++)S[t[r+g]]++;for(v=l,_=ct;_>=1&&0===S[_];_--);if(v>_&&(v=_),0===_)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(m=1;m<_&&0===S[m];m++);for(v<m&&(v=m),w=1,y=1;y<=ct;y++)if(w<<=1,w-=S[y],w<0)return-1;if(w>0&&(0===e||1!==_))return-1;for(C[1]=0,y=1;y<ct;y++)C[y+1]=C[y]+S[y];for(g=0;g<n;g++)0!==t[r+g]&&(a[C[t[r+g]]++]=g);if(0===e?(I=M=a,d=20):1===e?(I=ft,M=ht,d=257):(I=pt,M=dt,d=0),x=0,g=0,y=m,p=o,A=v,b=0,f=-1,E=1<<v,h=E-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){P=y-b,a[g]+1<d?(O=0,T=a[g]):a[g]>=d?(O=M[a[g]-d],T=I[a[g]-d]):(O=96,T=0),u=1<<y-b,c=1<<A,m=c;do{c-=u,i[p+(x>>b)+c]=P<<24|O<<16|T}while(0!==c);for(u=1<<y-1;x&u;)u>>=1;if(0!==u?(x&=u-1,x+=u):x=0,g++,0==--S[y]){if(y===_)break;y=t[r+a[g]]}if(y>v&&(x&h)!==f){for(0===b&&(b=v),p+=m,A=y-b,w=1<<A;A+b<_&&(w-=S[A+b],!(w<=0));)A++,w<<=1;if(E+=1<<A,1===e&&E>852||2===e&&E>592)return 1;f=x&h,i[f]=v<<24|A<<16|p-o}}return 0!==x&&(i[p+x]=y-b<<24|64<<16),s.bits=v,0};const{Z_FINISH:gt,Z_BLOCK:mt,Z_TREES:_t,Z_OK:vt,Z_STREAM_END:At,Z_NEED_DICT:bt,Z_STREAM_ERROR:wt,Z_DATA_ERROR:Et,Z_MEM_ERROR:xt,Z_BUF_ERROR:It,Z_DEFLATED:St}=q,Ct=16180,Pt=16190,Ot=16191,Tt=16192,Mt=16194,kt=16199,Rt=16200,Bt=16206,Lt=16209,Dt=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function jt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ft=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Ct||t.mode>16211?1:0},Nt=e=>{if(Ft(e))return wt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Ct,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,vt},Zt=e=>{if(Ft(e))return wt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Nt(e)},Ut=(e,t)=>{let r;if(Ft(e))return wt;const n=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?wt:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Zt(e))},Qt=(e,t)=>{if(!e)return wt;const r=new jt;e.state=r,r.strm=e,r.window=null,r.mode=Ct;const n=Ut(e,t);return n!==vt&&(e.state=null),n};let Gt,zt,qt=!0;const Vt=e=>{if(qt){Gt=new Int32Array(512),zt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(yt(1,e.lens,0,288,Gt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;yt(2,e.lens,0,32,zt,0,e.work,{bits:5}),qt=!1}e.lencode=Gt,e.lenbits=9,e.distcode=zt,e.distbits=5},Wt=(e,t,r,n)=>{let i;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),(n-=i)?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0};var Kt={inflateReset:Zt,inflateReset2:Ut,inflateResetKeep:Nt,inflateInit:e=>Qt(e,15),inflateInit2:Qt,inflate:(e,t)=>{let r,n,i,o,a,s,l,u,c,f,h,p,d,y,g,m,_,v,A,b,w,E,x=0;const I=new Uint8Array(4);let S,C;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ft(e)||!e.output||!e.input&&0!==e.avail_in)return wt;r=e.state,r.mode===Ot&&(r.mode=Tt),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,u=r.hold,c=r.bits,f=s,h=l,E=vt;e:for(;;)switch(r.mode){case Ct:if(0===r.wrap){r.mode=Tt;break}for(;c<16;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}if(2&r.wrap&&35615===u){0===r.wbits&&(r.wbits=15),r.check=0,I[0]=255&u,I[1]=u>>>8&255,r.check=G(r.check,I,2,0),u=0,c=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=Lt;break}if((15&u)!==St){e.msg="unknown compression method",r.mode=Lt;break}if(u>>>=4,c-=4,w=8+(15&u),0===r.wbits&&(r.wbits=w),w>15||w>r.wbits){e.msg="invalid window size",r.mode=Lt;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&u?16189:Ot,u=0,c=0;break;case 16181:for(;c<16;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}if(r.flags=u,(255&r.flags)!==St){e.msg="unknown compression method",r.mode=Lt;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Lt;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&4&r.wrap&&(I[0]=255&u,I[1]=u>>>8&255,r.check=G(r.check,I,2,0)),u=0,c=0,r.mode=16182;case 16182:for(;c<32;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}r.head&&(r.head.time=u),512&r.flags&&4&r.wrap&&(I[0]=255&u,I[1]=u>>>8&255,I[2]=u>>>16&255,I[3]=u>>>24&255,r.check=G(r.check,I,4,0)),u=0,c=0,r.mode=16183;case 16183:for(;c<16;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&4&r.wrap&&(I[0]=255&u,I[1]=u>>>8&255,r.check=G(r.check,I,2,0)),u=0,c=0,r.mode=16184;case 16184:if(1024&r.flags){for(;c<16;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&4&r.wrap&&(I[0]=255&u,I[1]=u>>>8&255,r.check=G(r.check,I,2,0)),u=0,c=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(p=r.length,p>s&&(p=s),p&&(r.head&&(w=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+p),w)),512&r.flags&&4&r.wrap&&(r.check=G(r.check,n,p,o)),s-=p,o+=p,r.length-=p),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===s)break e;p=0;do{w=n[o+p++],r.head&&w&&r.length<65536&&(r.head.name+=String.fromCharCode(w))}while(w&&p<s);if(512&r.flags&&4&r.wrap&&(r.check=G(r.check,n,p,o)),s-=p,o+=p,w)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===s)break e;p=0;do{w=n[o+p++],r.head&&w&&r.length<65536&&(r.head.comment+=String.fromCharCode(w))}while(w&&p<s);if(512&r.flags&&4&r.wrap&&(r.check=G(r.check,n,p,o)),s-=p,o+=p,w)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;c<16;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}if(4&r.wrap&&u!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Lt;break}u=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Ot;break;case 16189:for(;c<32;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}e.adler=r.check=Dt(u),u=0,c=0,r.mode=Pt;case Pt:if(0===r.havedict)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,r.hold=u,r.bits=c,bt;e.adler=r.check=1,r.mode=Ot;case Ot:if(t===mt||t===_t)break e;case Tt:if(r.last){u>>>=7&c,c-=7&c,r.mode=Bt;break}for(;c<3;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}switch(r.last=1&u,u>>>=1,c-=1,3&u){case 0:r.mode=16193;break;case 1:if(Vt(r),r.mode=kt,t===_t){u>>>=2,c-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=Lt}u>>>=2,c-=2;break;case 16193:for(u>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Lt;break}if(r.length=65535&u,u=0,c=0,r.mode=Mt,t===_t)break e;case Mt:r.mode=16195;case 16195:if(p=r.length,p){if(p>s&&(p=s),p>l&&(p=l),0===p)break e;i.set(n.subarray(o,o+p),a),s-=p,o+=p,l-=p,a+=p,r.length-=p;break}r.mode=Ot;break;case 16196:for(;c<14;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}if(r.nlen=257+(31&u),u>>>=5,c-=5,r.ndist=1+(31&u),u>>>=5,c-=5,r.ncode=4+(15&u),u>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Lt;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;c<3;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}r.lens[P[r.have++]]=7&u,u>>>=3,c-=3}for(;r.have<19;)r.lens[P[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,S={bits:r.lenbits},E=yt(0,r.lens,0,19,r.lencode,0,r.work,S),r.lenbits=S.bits,E){e.msg="invalid code lengths set",r.mode=Lt;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[u&(1<<r.lenbits)-1],g=x>>>24,m=x>>>16&255,_=65535&x,!(g<=c);){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}if(_<16)u>>>=g,c-=g,r.lens[r.have++]=_;else{if(16===_){for(C=g+2;c<C;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}if(u>>>=g,c-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=Lt;break}w=r.lens[r.have-1],p=3+(3&u),u>>>=2,c-=2}else if(17===_){for(C=g+3;c<C;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}u>>>=g,c-=g,w=0,p=3+(7&u),u>>>=3,c-=3}else{for(C=g+7;c<C;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}u>>>=g,c-=g,w=0,p=11+(127&u),u>>>=7,c-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Lt;break}for(;p--;)r.lens[r.have++]=w}}if(r.mode===Lt)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Lt;break}if(r.lenbits=9,S={bits:r.lenbits},E=yt(1,r.lens,0,r.nlen,r.lencode,0,r.work,S),r.lenbits=S.bits,E){e.msg="invalid literal/lengths set",r.mode=Lt;break}if(r.distbits=6,r.distcode=r.distdyn,S={bits:r.distbits},E=yt(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,S),r.distbits=S.bits,E){e.msg="invalid distances set",r.mode=Lt;break}if(r.mode=kt,t===_t)break e;case kt:r.mode=Rt;case Rt:if(s>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,r.hold=u,r.bits=c,ut(e,h),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,u=r.hold,c=r.bits,r.mode===Ot&&(r.back=-1);break}for(r.back=0;x=r.lencode[u&(1<<r.lenbits)-1],g=x>>>24,m=x>>>16&255,_=65535&x,!(g<=c);){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}if(m&&!(240&m)){for(v=g,A=m,b=_;x=r.lencode[b+((u&(1<<v+A)-1)>>v)],g=x>>>24,m=x>>>16&255,_=65535&x,!(v+g<=c);){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}u>>>=v,c-=v,r.back+=v}if(u>>>=g,c-=g,r.back+=g,r.length=_,0===m){r.mode=16205;break}if(32&m){r.back=-1,r.mode=Ot;break}if(64&m){e.msg="invalid literal/length code",r.mode=Lt;break}r.extra=15&m,r.mode=16201;case 16201:if(r.extra){for(C=r.extra;c<C;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;x=r.distcode[u&(1<<r.distbits)-1],g=x>>>24,m=x>>>16&255,_=65535&x,!(g<=c);){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}if(!(240&m)){for(v=g,A=m,b=_;x=r.distcode[b+((u&(1<<v+A)-1)>>v)],g=x>>>24,m=x>>>16&255,_=65535&x,!(v+g<=c);){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}u>>>=v,c-=v,r.back+=v}if(u>>>=g,c-=g,r.back+=g,64&m){e.msg="invalid distance code",r.mode=Lt;break}r.offset=_,r.extra=15&m,r.mode=16203;case 16203:if(r.extra){for(C=r.extra;c<C;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Lt;break}r.mode=16204;case 16204:if(0===l)break e;if(p=h-l,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Lt;break}p>r.wnext?(p-=r.wnext,d=r.wsize-p):d=r.wnext-p,p>r.length&&(p=r.length),y=r.window}else y=i,d=a-r.offset,p=r.length;p>l&&(p=l),l-=p,r.length-=p;do{i[a++]=y[d++]}while(--p);0===r.length&&(r.mode=Rt);break;case 16205:if(0===l)break e;i[a++]=r.length,l--,r.mode=Rt;break;case Bt:if(r.wrap){for(;c<32;){if(0===s)break e;s--,u|=n[o++]<<c,c+=8}if(h-=l,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?G(r.check,i,h,a-h):U(r.check,i,h,a-h)),h=l,4&r.wrap&&(r.flags?u:Dt(u))!==r.check){e.msg="incorrect data check",r.mode=Lt;break}u=0,c=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;c<32;){if(0===s)break e;s--,u+=n[o++]<<c,c+=8}if(4&r.wrap&&u!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Lt;break}u=0,c=0}r.mode=16208;case 16208:E=At;break e;case Lt:E=Et;break e;case 16210:return xt;default:return wt}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,r.hold=u,r.bits=c,(r.wsize||h!==e.avail_out&&r.mode<Lt&&(r.mode<Bt||t!==gt))&&Wt(e,e.output,e.next_out,h-e.avail_out),f-=e.avail_in,h-=e.avail_out,e.total_in+=f,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?G(r.check,i,h,e.next_out-h):U(r.check,i,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Ot?128:0)+(r.mode===kt||r.mode===Mt?256:0),(0===f&&0===h||t===gt)&&E===vt&&(E=It),E},inflateEnd:e=>{if(Ft(e))return wt;let t=e.state;return t.window&&(t.window=null),e.state=null,vt},inflateGetHeader:(e,t)=>{if(Ft(e))return wt;const r=e.state;return 2&r.wrap?(r.head=t,t.done=!1,vt):wt},inflateSetDictionary:(e,t)=>{const r=t.length;let n,i,o;return Ft(e)?wt:(n=e.state,0!==n.wrap&&n.mode!==Pt?wt:n.mode===Pt&&(i=1,i=U(i,t,r,0),i!==n.check)?Et:(o=Wt(e,t,r,r),o?(n.mode=16210,xt):(n.havedict=1,vt)))},inflateInfo:"pako inflate (from Nodeca project)"};var Ht=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Yt=Object.prototype.toString,{Z_NO_FLUSH:Xt,Z_FINISH:Jt,Z_OK:$t,Z_STREAM_END:er,Z_NEED_DICT:tr,Z_STREAM_ERROR:rr,Z_DATA_ERROR:nr,Z_MEM_ERROR:ir}=q;function or(e){this.options=ze.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ke,this.strm.avail_out=0;let r=Kt.inflateInit2(this.strm,t.windowBits);if(r!==$t)throw new Error(z[r]);if(this.header=new Ht,Kt.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=We.string2buf(t.dictionary):"[object ArrayBuffer]"===Yt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Kt.inflateSetDictionary(this.strm,t.dictionary),r!==$t)))throw new Error(z[r])}function ar(e,t){const r=new or(t);if(r.push(e),r.err)throw r.msg||z[r.err];return r.result}or.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,a,s;if(this.ended)return!1;for(a=t===~~t?t:!0===t?Jt:Xt,"[object ArrayBuffer]"===Yt.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=Kt.inflate(r,a),o===tr&&i&&(o=Kt.inflateSetDictionary(r,i),o===$t?o=Kt.inflate(r,a):o===nr&&(o=tr));r.avail_in>0&&o===er&&r.state.wrap>0&&0!==e[r.next_in];)Kt.inflateReset(r),o=Kt.inflate(r,a);switch(o){case rr:case nr:case tr:case ir:return this.onEnd(o),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(0===r.avail_out||o===er))if("string"===this.options.to){let e=We.utf8border(r.output,r.next_out),t=r.next_out-e,i=We.buf2string(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(o!==$t||0!==s){if(o===er)return o=Kt.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},or.prototype.onData=function(e){this.chunks.push(e)},or.prototype.onEnd=function(e){e===$t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ze.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var sr={Inflate:or,inflate:ar,inflateRaw:function(e,t){return(t=t||{}).raw=!0,ar(e,t)},ungzip:ar,constants:q};const{Deflate:lr,deflate:ur,deflateRaw:cr,gzip:fr}=st,{Inflate:hr,inflate:pr,inflateRaw:dr,ungzip:yr}=sr;var gr=pr}},__webpack_module_cache__={},leafPrototypes,getProto;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var r=Object.create(null);__webpack_require__.r(r);var n={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&t&&e;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,__webpack_require__.d(r,n),r},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e);var t={};__webpack_require__.r(t),__webpack_require__.d(t,{Kp:()=>Xy,yX:()=>Jy});var r=__webpack_require__(42188),n=__webpack_require__(65033),i=__webpack_require__(20594),o=__webpack_require__(16453),a=__webpack_require__(67858),s=__webpack_require__(25096),l=__webpack_require__(80650),u=__webpack_require__(16092),c=__webpack_require__(68392),f=__webpack_require__(80237),h=__webpack_require__(36181);function p(e){var t=e.load||f.Jx,r=e.imageExtent,n=new Image;return null!==e.crossOrigin&&(n.crossOrigin=e.crossOrigin),function(){return t(n,e.url).then((function(e){var t=(0,h.dz)(r)/e.width,n=(0,h.Cr)(r)/e.height;return{image:e,extent:r,resolution:t!==n?[t,n]:n,pixelRatio:1}}))}}var d=__webpack_require__(18939),y=__webpack_require__(55710);function g(e,t,r,n,i,o,a){var s=function(e,t,r,n){var i=(0,h.dz)(e),o=(0,h.Cr)(e),a=t[0],s=t[1],l=.0254/n;return s*i>a*o?i*r/(a*l):o*r/(s*l)}(r,n,o,a),l=(0,h.qg)(r),u={OPERATION:i?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:a,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:s,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(u,t),(0,d.B)(e,u)}function m(e){var t=e.load||f.Jx;return function(r,n,i){var o=new Image;null!==e.crossOrigin&&(o.crossOrigin=e.crossOrigin),r=(0,y.Ps)(r,n,i,e.ratio);var a=(0,h.dz)(r)/n,s=(0,h.Cr)(r)/n,l=[a*i,s*i],u=g(e.url,e.params,r,l,e.useOverlay,e.metersPerUnit||1,e.displayDpi||96);return t(o,u).then((function(e){return{image:e,extent:r,pixelRatio:i}}))}}var _=__webpack_require__(48732),v=__webpack_require__(27811),A=__webpack_require__(7697);function b(e,t,r,n,i,o){var a=i.getCode().split(/:(?=\d+$)/).pop(),s=r/n,l=[(0,A.NM)((0,h.dz)(t)/s,_.L),(0,A.NM)((0,h.Cr)(t)/s,_.L)];o.SIZE=l[0]+","+l[1],o.BBOX=t.join(","),o.BBOXSR=a,o.IMAGESR=a,o.DPI=Math.round(o.DPI?o.DPI*n:90*n);var u=e.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");if(u==e)throw new Error("`options.featureTypes` should be an Array");return(0,d.B)(u,o)}function w(e){var t=e.load?e.load:f.Jx,r=(0,v.U2)(e.projection||"EPSG:3857");return function(n,i,o){o=e.hidpi?o:1;var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(a,e.params),n=(0,y.Ps)(n,i,o,e.ratio);var s=b(e.url,n,i,o,r,a),l=new Image;return null!==e.crossOrigin&&(l.crossOrigin=e.crossOrigin),t(l,s).then((function(e){var t=(0,h.dz)(n)/e.width*o;return{image:e,extent:n,resolution:t,pixelRatio:o}}))}}var E=__webpack_require__(20632),x=__webpack_require__(19529),I=__webpack_require__(86732);var S=__webpack_require__(59468),C=__webpack_require__(25558),P=__webpack_require__(26890),O=__webpack_require__(85243),T=__webpack_require__(21364),M=__webpack_require__(14814),k=__webpack_require__(82481),R=__webpack_require__(36818),B=__webpack_require__(28513),L=__webpack_require__(2115),D=__webpack_require__(44993),j=__webpack_require__(76527),F=__webpack_require__(11766),N=__webpack_require__(38815),Z=__webpack_require__(56742),U=__webpack_require__(30378),Q=__webpack_require__(70278),G=__webpack_require__(48843),z=__webpack_require__(44133),q=__webpack_require__(61900),V=__webpack_require__(84422),W=__webpack_require__(92882),K=__webpack_require__(57649),H=__webpack_require__(24615),Y=__webpack_require__(73826),X=__webpack_require__(49995),J=__webpack_require__(78456),$=__webpack_require__(36707),ee=__webpack_require__(14206);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(){return re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ue(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},re.apply(this,arguments)}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==te(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===te(o)?o:String(o)),n)}var i,o}function ie(e,t,r){return t&&ne(e.prototype,t),r&&ne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},se(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ue(e);if(t){var i=ue(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}var ce="drawstart",fe="drawend",he="drawabort",pe=function(e){ae(r,e);var t=le(r);function r(e,n){var i;return oe(this,r),(i=t.call(this,e)).feature=n,i}return ie(r)}(B.ZP);function de(e,t){return(0,A.bI)(e[0],e[1],t[0],t[1])}function ye(e,t){var r=e.length;return t<0?e[t+r]:t>=r?e[t-r]:e[t]}function ge(e,t,r){var n,i;t<r?(n=t,i=r):(n=r,i=t);var o=Math.ceil(n),a=Math.floor(i);if(o>a)return de(we(e,n),we(e,i));var s=0;n<o&&(s+=de(we(e,n),ye(e,o)));a<i&&(s+=de(ye(e,a),we(e,i)));for(var l=o;l<a-1;++l){s+=de(ye(e,l),ye(e,l+1))}return s}function me(e,t,r){if(t instanceof N.Z)ve(e,t.getCoordinates(),!1,r);else if(t instanceof Q.Z)for(var n=t.getCoordinates(),i=0,o=n.length;i<o;++i)ve(e,n[i],!1,r);else if(t instanceof W.ZP)for(var a=t.getCoordinates(),s=0,l=a.length;s<l;++s)ve(e,a[s],!0,r);else if(t instanceof z.Z)for(var u=t.getCoordinates(),c=0,f=u.length;c<f;++c)for(var h=u[c],p=0,d=h.length;p<d;++p)ve(e,h[p],!0,r);else if(t instanceof j.Z)for(var y=t.getGeometries(),g=0;g<y.length;++g)me(e,y[g],r);else;}var _e={index:-1,endIndex:NaN};function ve(e,t,r,n){for(var i=e[0],o=e[1],a=0,s=t.length-1;a<s;++a){var l=be(i,o,t[a],t[a+1]);if(0===l.squaredDistance){var u=a+l.along;return void n.push({coordinates:t,ring:r,startIndex:u,endIndex:u})}}}var Ae={along:0,squaredDistance:0};function be(e,t,r,n){var i=r[0],o=r[1],a=n[0]-i,s=n[1]-o,l=0,u=i,c=o;return 0===a&&0===s||(u+=a*(l=(0,A.uZ)(((e-i)*a+(t-o)*s)/(a*a+s*s),0,1)),c+=s*l),Ae.along=l,Ae.squaredDistance=(0,A.FH)((0,A.bI)(e,t,u,c),10),Ae}function we(e,t){var r=e.length,n=Math.floor(t),i=t-n;n>=r?n-=r:n<0&&(n+=r);var o=n+1;o>=r&&(o-=r);var a=e[n],s=a[0],l=a[1],u=e[o];return[s+(u[0]-s)*i,l+(u[1]-l)*i]}var Ee=function(e){ae(r,e);var t=le(r);function r(e){var n;oe(this,r);var i=e;i.stopDown||(i.stopDown=Y.Dv),(n=t.call(this,i)).on,n.once,n.un,n.shouldHandle_=!1,n.downPx_=null,n.downTimeout_,n.lastDragTime_,n.pointerType_,n.freehand_=!1,n.source_=e.source?e.source:null,n.features_=e.features?e.features:null,n.snapTolerance_=e.snapTolerance?e.snapTolerance:12,n.type_=e.type,n.mode_=function(e){switch(e){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+e)}}(n.type_),n.stopClick_=!!e.stopClick,n.minPoints_=e.minPoints?e.minPoints:"Polygon"===n.mode_?3:2,n.maxPoints_="Circle"===n.mode_?2:e.maxPoints?e.maxPoints:1/0,n.finishCondition_=e.finishCondition?e.finishCondition:Y.uX,n.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";var o,a=e.geometryFunction;if(!a){var s,l=n.mode_;if("Circle"===l)a=function(e,t,r){var n=t||new R.Z([NaN,NaN]),i=(0,v.Vs)(e[0],r),o=(0,$.bI)(i,(0,v.Vs)(e[e.length-1],r));n.setCenterAndRadius(i,Math.sqrt(o),this.geometryLayout_);var a=(0,v.Cs)();return a&&n.transform(r,a),n};else"Point"===l?s=q.Z:"LineString"===l?s=N.Z:"Polygon"===l&&(s=W.ZP),a=function(e,t,r){return t?"Polygon"===l?e[0].length?t.setCoordinates([e[0].concat([e[0][0]])],this.geometryLayout_):t.setCoordinates([],this.geometryLayout_):t.setCoordinates(e,this.geometryLayout_):t=new s(e,this.geometryLayout_),t}}return n.geometryFunction_=a,n.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,n.overlay_=new K.Z({source:new H.Z({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(o=(0,J.Ly)(),function(e,t){return o[e.getGeometry().getType()]}),updateWhileInteracting:!0}),n.geometryName_=e.geometryName,n.condition_=e.condition?e.condition:X.rM,n.freehandCondition_,e.freehand?n.freehandCondition_=X.Bx:n.freehandCondition_=e.freehandCondition?e.freehandCondition:X.vY,n.traceCondition_,n.setTrace(e.trace||!1),n.traceState_={active:!1},n.traceSource_=e.traceSource||e.source||null,n.addChangeListener(F.Z.ACTIVE,n.updateState_),n}return ie(r,[{key:"setTrace",value:function(e){var t;t=e?!0===e?X.Bx:e:X.Fi,this.traceCondition_=t}},{key:"setMap",value:function(e){re(ue(r.prototype),"setMap",this).call(this,e),this.updateState_()}},{key:"getOverlay",value:function(){return this.overlay_}},{key:"handleEvent",value:function(e){e.originalEvent.type===L.Z.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(e);var t=e.type===U.Z.POINTERMOVE,n=!0;!this.freehand_&&this.lastDragTime_&&e.type===U.Z.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&e.type===U.Z.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===U.Z.POINTERDOWN?n=!1:t&&this.getPointerCount()<2?(n=e.type===U.Z.POINTERMOVE)&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===U.Z.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===U.Z.DBLCLICK&&(n=!1),re(ue(r.prototype),"handleEvent",this).call(this,e)&&n}},{key:"handleDownEvent",value:function(e){var t=this;return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((function(){t.handlePointerMove_(new Z.Z(U.Z.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))}),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}},{key:"deactivateTrace_",value:function(){this.traceState_={active:!1}}},{key:"toggleTraceState_",value:function(e){if(this.traceSource_&&this.traceCondition_(e))if(this.traceState_.active)this.deactivateTrace_();else{var t=this.getMap(),r=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),n=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),i=(0,h.hI)([r,n]),o=this.traceSource_.getFeaturesInExtent(i);if(0!==o.length){var a=function(e,t){for(var r=[],n=0;n<t.length;++n)me(e,t[n].getGeometry(),r);return r}(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}}}},{key:"addOrRemoveTracedCoordinates_",value:function(e,t){var r=e.startIndex<=e.endIndex;r===e.startIndex<=t?r&&t>e.endIndex||!r&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(r&&t<e.endIndex||!r&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}},{key:"removeTracedCoordinates_",value:function(e,t){if(e!==t){var r=0;if(e<t){var n=Math.ceil(e),i=Math.floor(t);i===t&&(i-=1),r=i-n+1}else{var o=Math.floor(e),a=Math.ceil(t);a===t&&(a+=1),r=o-a+1}r>0&&this.removeLastPoints_(r)}}},{key:"addTracedCoordinates_",value:function(e,t,r){if(t!==r){var n=[];if(t<r){var i=Math.ceil(t),o=Math.floor(r);o===r&&(o-=1);for(var a=i;a<=o;++a)n.push(ye(e.coordinates,a))}else{var s=Math.floor(t),l=Math.ceil(r);l===r&&(l+=1);for(var u=s;u>=l;--u)n.push(ye(e.coordinates,u))}n.length&&this.appendCoordinates(n)}}},{key:"updateTrace_",value:function(e){var t=this.traceState_;if(t.active&&!(-1===t.targetIndex&&(0,$.TE)(t.startPx,e.pixel)<this.snapTolerance_)){var r=function(e,t,r,n){for(var i=e[0],o=e[1],a=1/0,s=-1,l=NaN,u=0;u<t.targets.length;++u){for(var c=t.targets[u],f=c.coordinates,h=1/0,p=void 0,d=0;d<f.length-1;++d){var y=be(i,o,f[d],f[d+1]);y.squaredDistance<h&&(h=y.squaredDistance,p=d+y.along)}h<a&&(a=h,c.ring&&t.targetIndex===u&&(c.endIndex>c.startIndex?p<c.startIndex&&(p+=f.length):c.endIndex<c.startIndex&&p>c.startIndex&&(p-=f.length)),l=p,s=u)}var g=t.targets[s],m=g.ring;if(t.targetIndex===s&&m){var _=we(g.coordinates,l),v=r.getPixelFromCoordinate(_);(0,$.TE)(v,t.startPx)>n&&(m=!1)}if(m){var A=g.coordinates,b=A.length,w=g.startIndex,E=l;if(w<E){var x=ge(A,w,E);ge(A,w,E-b)<x&&(l-=b)}else{var I=ge(A,w,E);ge(A,w,E+b)<I&&(l+=b)}}return _e.index=s,_e.endIndex=l,_e}(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==r.index){if(-1!==t.targetIndex){var n=t.targets[t.targetIndex];this.removeTracedCoordinates_(n.startIndex,n.endIndex)}var i=t.targets[r.index];this.addTracedCoordinates_(i,i.startIndex,r.endIndex)}else{var o=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(o,r.endIndex)}t.targetIndex=r.index;var a=t.targets[t.targetIndex];a.endIndex=r.endIndex;var s=we(a.coordinates,a.endIndex),l=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(l[0]),Math.round(l[1])]}}},{key:"handleUpEvent",value:function(e){var t=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);var r=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){var n=!this.finishCoordinate_;n&&this.startDrawing_(e.coordinate),!n&&this.freehand_?this.finishDrawing():this.freehand_||n&&"Point"!==this.mode_||(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}},{key:"handlePointerMove_",value:function(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,r=e.pixel,n=t[0]-r[0],i=t[1]-r[1],o=n*n+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(e),this.modifyDrawing_(e.coordinate)):this.createOrUpdateSketchPoint_(e.coordinate.slice())}},{key:"atFinish_",value:function(e,t){var r=!1;if(this.sketchFeature_){var n=!1,i=[this.finishCoordinate_],o=this.mode_;if("Point"===o)r=!0;else if("Circle"===o)r=2===this.sketchCoords_.length;else if("LineString"===o)n=!t&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===o){var a=this.sketchCoords_;n=a[0].length>this.minPoints_,i=[a[0][0],a[0][a[0].length-2]],i=t?[a[0][0]]:[a[0][0],a[0][a[0].length-2]]}if(n)for(var s=this.getMap(),l=0,u=i.length;l<u;l++){var c=i[l],f=s.getPixelFromCoordinate(c),h=e[0]-f[0],p=e[1]-f[1],d=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(h*h+p*p)<=d){this.finishCoordinate_=c;break}}}return r}},{key:"createOrUpdateSketchPoint_",value:function(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new D.Z(new q.Z(e)),this.updateSketchFeatures_())}},{key:"createOrUpdateCustomSketchLine_",value:function(e){this.sketchLine_||(this.sketchLine_=new D.Z);var t=e.getLinearRing(0),r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),r.changed()):(r=new N.Z(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(r))}},{key:"startDrawing_",value:function(e){for(var t=this.getMap().getView().getProjection(),r=(0,ee.tP)(this.geometryLayout_);e.length<r;)e.push(0);this.finishCoordinate_=e,"Point"===this.mode_?this.sketchCoords_=e.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new D.Z(new N.Z(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new D.Z,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new pe(ce,this.sketchFeature_))}},{key:"modifyDrawing_",value:function(e){for(var t,r,n=this.getMap(),i=this.sketchFeature_.getGeometry(),o=n.getView().getProjection(),a=(0,ee.tP)(this.geometryLayout_);e.length<a;)e.push(0);("Point"===this.mode_?r=this.sketchCoords_:"Polygon"===this.mode_?(r=(t=this.sketchCoords_[0])[t.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):r=(t=this.sketchCoords_)[t.length-1],r[0]=e[0],r[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(e);if("Polygon"===i.getType()&&"Polygon"!==this.mode_)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()}},{key:"addToDrawing_",value:function(e){var t,r,n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o=this.mode_;"LineString"===o||"Circle"===o?(this.finishCoordinate_=e.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():t=!0),r.push(e.slice()),this.geometryFunction_(r,n,i)):"Polygon"===o&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():t=!0),r.push(e.slice()),t&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),t&&this.finishDrawing()}},{key:"removeLastPoints_",value:function(e){if(this.sketchFeature_){for(var t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),n=this.mode_,i=0;i<e;++i){var o=void 0;if("LineString"===n||"Circle"===n){if((o=this.sketchCoords_).splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();var a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,r),"Polygon"===t.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if("Polygon"===n){(o=this.sketchCoords_[0]).splice(-2,1);var s=this.sketchLine_.getGeometry();if(o.length>=2){var l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}s.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,r)}if(1===o.length){this.abortDrawing();break}}this.updateSketchFeatures_()}}},{key:"removeLastPoint",value:function(){this.removeLastPoints_(1)}},{key:"finishDrawing",value:function(){var e=this.abortDrawing_();if(e){var t=this.sketchCoords_,r=e.getGeometry(),n=this.getMap().getView().getProjection();"LineString"===this.mode_?(t.pop(),this.geometryFunction_(t,r,n)):"Polygon"===this.mode_&&(t[0].pop(),this.geometryFunction_(t,r,n),t=r.getCoordinates()),"MultiPoint"===this.type_?e.setGeometry(new G.Z([t])):"MultiLineString"===this.type_?e.setGeometry(new Q.Z([t])):"MultiPolygon"===this.type_&&e.setGeometry(new z.Z([t])),this.dispatchEvent(new pe(fe,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}}},{key:"abortDrawing_",value:function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}},{key:"abortDrawing",value:function(){var e=this.abortDrawing_();e&&this.dispatchEvent(new pe(he,e))}},{key:"appendCoordinates",value:function(e){var t,r=this.mode_,n=!this.sketchFeature_;if(n&&this.startDrawing_(e[0]),"LineString"===r||"Circle"===r)t=this.sketchCoords_;else{if("Polygon"!==r)return;t=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&t.shift(),t.pop();for(var i=0;i<e.length;i++)this.addToDrawing_(e[i]);var o=e[e.length-1];this.addToDrawing_(o),this.modifyDrawing_(o)}},{key:"extend",value:function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new D.Z(new q.Z(r)),this.updateSketchFeatures_(),this.dispatchEvent(new pe(ce,this.sketchFeature_))}},{key:"updateSketchFeatures_",value:function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}},{key:"updateState_",value:function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing(),this.overlay_.setMap(t?e:null)}}]),r}(V.Z);const xe=Ee;var Ie=__webpack_require__(45907),Se=__webpack_require__(44983),Ce=__webpack_require__(67033),Pe=__webpack_require__(11201);function Oe(e,t,r,n,i,o){void 0!==i?o=void 0!==o?o:0:(i=[],o=0);for(var a=t;a<r;){var s=e[a++];i[o++]=e[a++],i[o++]=s;for(var l=2;l<n;++l)i[o++]=e[a++]}return i.length=o,i}var Te=__webpack_require__(20105),Me=__webpack_require__(88658);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==ke(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ke(o)?o:String(o)),n)}var i,o}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Be(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=De(e);if(t){var i=De(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(o,e);var t,r,n,i=Le(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this)).dataProjection=(0,v.U2)("EPSG:4326"),t.factor_=e.factor?e.factor:1e5,t.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY",t}return t=o,(r=[{key:"readFeatureFromText",value:function(e,t){var r=this.readGeometryFromText(e,t);return new D.Z(r)}},{key:"readFeaturesFromText",value:function(e,t){return[this.readFeatureFromText(e,t)]}},{key:"readGeometryFromText",value:function(e,t){var r=(0,ee.tP)(this.geometryLayout_),n=Ne(e,r,this.factor_);Oe(n,0,n.length,r,n);var i=(0,Te.Ml)(n,0,n.length,r),o=new N.Z(i,this.geometryLayout_);return(0,Me.fI)(o,!1,this.adaptOptions(t))}},{key:"writeFeatureText",value:function(e,t){var r=e.getGeometry();if(r)return this.writeGeometryText(r,t);throw new Error("Expected `feature` to have a geometry")}},{key:"writeFeaturesText",value:function(e,t){return this.writeFeatureText(e[0],t)}},{key:"writeGeometryText",value:function(e,t){var r=(e=(0,Me.fI)(e,!0,this.adaptOptions(t))).getFlatCoordinates(),n=e.getStride();return Oe(r,0,r.length,n,r),Fe(r,n,this.factor_)}}])&&Re(t.prototype,r),n&&Re(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Pe.Z);function Fe(e,t,r){var n;r=r||1e5;var i=new Array(t);for(n=0;n<t;++n)i[n]=0;for(var o=0,a=e.length;o<a;)for(n=0;n<t;++n,++o){var s=e[o],l=s-i[n];i[n]=s,e[o]=l}return Ze(e,r)}function Ne(e,t,r){var n;r=r||1e5;var i=new Array(t);for(n=0;n<t;++n)i[n]=0;for(var o=Ue(e,r),a=0,s=o.length;a<s;)for(n=0;n<t;++n,++a)i[n]+=o[a],o[a]=i[n];return o}function Ze(e,t){t=t||1e5;for(var r=0,n=e.length;r<n;++r)e[r]=Math.round(e[r]*t);return function(e){for(var t=0,r=e.length;t<r;++t){var n=e[t];e[t]=n<0?~(n<<1):n<<1}return function(e){for(var t="",r=0,n=e.length;r<n;++r)t+=Qe(e[r]);return t}(e)}(e)}function Ue(e,t){t=t||1e5;for(var r=function(e){for(var t=function(e){for(var t=[],r=0,n=0,i=0,o=e.length;i<o;++i){var a=e.charCodeAt(i)-63;r|=(31&a)<<n,a<32?(t.push(r),r=0,n=0):n+=5}return t}(e),r=0,n=t.length;r<n;++r){var i=t[r];t[r]=1&i?~(i>>1):i>>1}return t}(e),n=0,i=r.length;n<i;++n)r[n]/=t;return r}function Qe(e){for(var t,r="";e>=32;)t=63+(32|31&e),r+=String.fromCharCode(t),e>>=5;return t=e+63,r+=String.fromCharCode(t)}const Ge=je;var ze=__webpack_require__(49902),qe=__webpack_require__(66646),Ve=__webpack_require__(60691),We=__webpack_require__(57446),Ke=__webpack_require__(22072),He=__webpack_require__(11133),Ye=__webpack_require__(82428),Xe=__webpack_require__(36839),Je=__webpack_require__(5460),$e=__webpack_require__(17774),et=__webpack_require__(62356),tt=__webpack_require__(86534),rt=__webpack_require__(52076),nt=__webpack_require__(53969),it=__webpack_require__(87908),ot=__webpack_require__(49518),at=__webpack_require__(44727),st=__webpack_require__(2993),lt=__webpack_require__(57223),ut=__webpack_require__(88199),ct=__webpack_require__(90629);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==ft(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ft(o)?o:String(o)),n)}var i,o}function dt(e,t,r){return t&&pt(e.prototype,t),r&&pt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yt(){return yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vt(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},yt.apply(this,arguments)}function gt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mt(e,t)}function mt(e,t){return mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mt(e,t)}function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=vt(e);if(t){var i=vt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function vt(e){return vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vt(e)}var At=function(e){gt(r,e);var t=_t(r);function r(e,n,i,o,a,s,l){var u;return ht(this,r),(u=t.call(this,n,i,o,a,s,l)).zoomifyImage_=null,u.tileSize_=e,u}return dt(r,[{key:"getImage",value:function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=yt(vt(r.prototype),"getImage",this).call(this);if(this.state==lt.Z.LOADED){var t=this.tileSize_;if(e.width==t[0]&&e.height==t[1])return this.zoomifyImage_=e,e;var n=(0,ut.E4)(t[0],t[1]);return n.drawImage(e,0,0),this.zoomifyImage_=n.canvas,n.canvas}return e}}]),r}(at.Z);const bt=function(e){gt(r,e);var t=_t(r);function r(e){var n;ht(this,r);var i=e.size,o=void 0!==e.tierSizeCalculation?e.tierSizeCalculation:"default",a=e.tilePixelRatio||1,s=i[0],l=i[1],u=[],c=e.tileSize||ot.S,f=c*a;switch(o){case"default":for(;s>f||l>f;)u.push([Math.ceil(s/f),Math.ceil(l/f)]),f+=f;break;case"truncated":for(var p=s,d=l;p>f||d>f;)u.push([Math.ceil(p/f),Math.ceil(d/f)]),p>>=1,d>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}u.push([1,1]),u.reverse();for(var y=[a],g=[0],m=1,_=u.length;m<_;m++)y.push(a<<m),g.push(u[m-1][0]*u[m-1][1]+g[m-1]);y.reverse();var v=new Xe.Z({tileSize:c,extent:e.extent||[0,-l,s,0],resolutions:y}),A=e.url;!A||A.includes("{TileGroup}")||A.includes("{tileIndex}")||(A+="{TileGroup}/{z}-{x}-{y}.jpg");var b=(0,ct.Gk)(A),w=c*a;var E=(0,ct.Un)(b.map((function(e){return function(t,r,n){if(t){var i=t[0],o=t[1],a=t[2],s=o+a*u[i][0],l={z:i,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+g[i])/w|0)};return e.replace(/\{(\w+?)\}/g,(function(e,t){return l[t]}))}}}))),x=At.bind(null,(0,S.Pq)(c*a));(n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,tilePixelRatio:a,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:x,tileGrid:v,tileUrlFunction:E,transition:e.transition})).zDirection=e.zDirection;var I=E(v.getTileCoordForCoordAndResolution((0,h.qg)(v.getExtent()),y[y.length-1]),1,null),C=new Image;return C.addEventListener("error",(function(){w=c,n.changed()})),C.src=I,n}return dt(r)}(st.Z);var wt=__webpack_require__(26185),Et=__webpack_require__(67156),xt=__webpack_require__(77118),It=__webpack_require__(51505),St=__webpack_require__(62718),Ct=__webpack_require__(34586);function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function Ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Pt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Pt(o)?o:String(o)),n)}var i,o}function Tt(e,t,r){return t&&Ot(e.prototype,t),r&&Ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}function Rt(e){var t=Dt();return function(){var r,n=Ft(e);if(t){var i=Ft(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Bt(e){var t="function"==typeof Map?new Map:void 0;return Bt=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Lt(e,arguments,Ft(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),jt(n,e)},Bt(e)}function Lt(e,t,r){return Lt=Dt()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&jt(i,r.prototype),i},Lt.apply(null,arguments)}function Dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function jt(e,t){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jt(e,t)}function Ft(e){return Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ft(e)}function Nt(e,t,r,n){var o=document.createElement("script"),a="olc_"+(0,i.sq)(t);function s(){delete window[a],o.parentNode.removeChild(o)}o.async=!0,o.src=e+(e.includes("?")?"&":"?")+(n||"callback")+"="+a;var l=setTimeout((function(){s(),r&&r()}),1e4);window[a]=function(e){clearTimeout(l),s(),t(e)},document.head.appendChild(o)}var Zt=function(e){kt(r,e);var t=Rt(r);function r(e){var n;Mt(this,r);var i="Unexpected response status: "+e.status;return(n=t.call(this,i)).name="ResponseError",n.response=e,n}return Tt(r)}(Bt(Error)),Ut=function(e){kt(r,e);var t=Rt(r);function r(e){var n;return Mt(this,r),(n=t.call(this,"Failed to issue request")).name="ClientError",n.client=e,n}return Tt(r)}(Bt(Error));function Qt(e){return new Promise((function(t,r){var n=new XMLHttpRequest;n.addEventListener("load",(function(e){var n=e.target;if(!n.status||n.status>=200&&n.status<300){var i;try{i=JSON.parse(n.responseText)}catch(e){var o="Error parsing response text as JSON: "+e.message;return void r(new Error(o))}t(i)}else r(new Zt(n))})),n.addEventListener("error",(function(e){r(new Ut(e.target))})),n.open("GET",e),n.setRequestHeader("Accept","application/json"),n.send()}))}function Gt(e,t){return t.includes("://")?t:new URL(t,e).href}function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==zt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===zt(o)?o:String(o)),n)}var i,o}function Wt(e,t,r){return t&&Vt(e.prototype,t),r&&Vt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ht(e,t)}function Ht(e,t){return Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ht(e,t)}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Jt(e);if(t){var i=Jt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xt(e)}(this,r)}}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jt(e){return Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jt(e)}var $t=function(e){Kt(r,e);var t=Yt(r);function r(e,n,i,o,a,s){var l;return qt(this,r),(l=t.call(this,e,n)).src_=i,l.extent_=o,l.preemptive_=a,l.grid_=null,l.keys_=null,l.data_=null,l.jsonp_=s,l}return Wt(r,[{key:"getImage",value:function(){return null}},{key:"getData",value:function(e){if(!this.grid_||!this.keys_)return null;var t=(e[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(e[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-r)*this.grid_.length)];if("string"!=typeof n)return null;var i=n.charCodeAt(Math.floor(t*n.length));i>=93&&i--,i>=35&&i--;var o=null;if((i-=32)in this.keys_){var a=this.keys_[i];o=this.data_&&a in this.data_?this.data_[a]:a}return o}},{key:"forDataAtCoordinate",value:function(e,t,r){var n=this;this.state==lt.Z.EMPTY&&!0===r?(this.state=lt.Z.IDLE,(0,Ct.Vx)(this,L.Z.CHANGE,(function(r){t(this.getData(e))}),this),this.loadInternal_()):!0===r?setTimeout((function(){t(n.getData(e))}),0):t(this.getData(e))}},{key:"getKey",value:function(){return this.src_}},{key:"handleError_",value:function(){this.state=lt.Z.ERROR,this.changed()}},{key:"handleLoad_",value:function(e){this.grid_=e.grid,this.keys_=e.keys,this.data_=e.data,this.state=lt.Z.LOADED,this.changed()}},{key:"loadInternal_",value:function(){if(this.state==lt.Z.IDLE)if(this.state=lt.Z.LOADING,this.jsonp_)Nt(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",this.src_),e.send()}}},{key:"onXHRLoad_",value:function(e){var t=e.target;if(!t.status||t.status>=200&&t.status<300){var r;try{r=JSON.parse(t.responseText)}catch(e){return void this.handleError_()}this.handleLoad_(r)}else this.handleError_()}},{key:"onXHRError_",value:function(e){this.handleError_()}},{key:"load",value:function(){this.preemptive_?this.loadInternal_():this.setState(lt.Z.EMPTY)}}]),r}(xt.Z),er=function(e){Kt(r,e);var t=Yt(r);function r(e){var n;if(qt(this,r),(n=t.call(this,{projection:(0,v.U2)("EPSG:3857"),state:"loading",zDirection:e.zDirection})).preemptive_=void 0===e.preemptive||e.preemptive,n.tileUrlFunction_=ct.vU,n.template_=void 0,n.jsonp_=e.jsonp||!1,e.url)if(n.jsonp_)Nt(e.url,n.handleTileJSONResponse.bind(Xt(n)),n.handleTileJSONError.bind(Xt(n)));else{var i=new XMLHttpRequest;i.addEventListener("load",n.onXHRLoad_.bind(Xt(n))),i.addEventListener("error",n.onXHRError_.bind(Xt(n))),i.open("GET",e.url),i.send()}else{if(!e.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");n.handleTileJSONResponse(e.tileJSON)}return n}return Wt(r,[{key:"onXHRLoad_",value:function(e){var t=e.target;if(!t.status||t.status>=200&&t.status<300){var r;try{r=JSON.parse(t.responseText)}catch(e){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}},{key:"onXHRError_",value:function(e){this.handleTileJSONError()}},{key:"getTemplate",value:function(){return this.template_}},{key:"forDataAtCoordinateAndResolution",value:function(e,t,r,n){if(this.tileGrid){var i=this.tileGrid.getZForResolution(t,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(e,i);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(e,r,n)}else!0===n?setTimeout((function(){r(null)}),0):r(null)}},{key:"handleTileJSONError",value:function(){this.setState("error")}},{key:"handleTileJSONResponse",value:function(e){var t,r=(0,v.U2)("EPSG:4326"),n=this.getProjection();if(void 0!==e.bounds){var i=(0,v.WO)(r,n);t=(0,h.Ne)(e.bounds,i)}var o=(0,s.Tl)(n),a=e.minzoom||0,l=e.maxzoom||22,u=(0,s.dl)({extent:o,maxZoom:l,minZoom:a});this.tileGrid=u,this.template_=e.template;var c=e.grids;if(c){if(this.tileUrlFunction_=(0,ct.uR)(c,u),void 0!==e.attribution){var f=void 0!==t?t:o;this.setAttributions((function(t){return(0,h.kK)(f,t.extent)?[e.attribution]:null}))}this.setState("ready")}else this.setState("error")}},{key:"getTile",value:function(e,t,r,n,i){var o=(0,St.lg)(e,t,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=[e,t,r],s=this.getTileCoordForTileUrlFunction(a,i),l=this.tileUrlFunction_(s,n,i),u=new $t(a,void 0!==l?lt.Z.IDLE:lt.Z.EMPTY,void 0!==l?l:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(o,u),u}},{key:"useTile",value:function(e,t,r){var n=(0,St.lg)(e,t,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}]),r}(It.Z);const tr=er;var rr=__webpack_require__(60138);function nr(e){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(e)}function ir(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==nr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===nr(o)?o:String(o)),n)}var i,o}function or(e,t){return or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},or(e,t)}function ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=lr(e);if(t){var i=lr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sr(e)}(this,r)}}function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lr(e){return lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lr(e)}var ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&or(e,t)}(o,e);var t,r,n,i=ar(o);function o(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:(0,v.U2)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})).tileJSON_=null,t.tileSize_=e.tileSize,e.url)if(e.jsonp)Nt(e.url,t.handleTileJSONResponse.bind(sr(t)),t.handleTileJSONError.bind(sr(t)));else{var r=new XMLHttpRequest;r.addEventListener("load",t.onXHRLoad_.bind(sr(t))),r.addEventListener("error",t.onXHRError_.bind(sr(t))),r.open("GET",e.url),r.send()}else{if(!e.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");t.handleTileJSONResponse(e.tileJSON)}return t}return t=o,r=[{key:"onXHRLoad_",value:function(e){var t=e.target;if(!t.status||t.status>=200&&t.status<300){var r;try{r=JSON.parse(t.responseText)}catch(e){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}},{key:"onXHRError_",value:function(e){this.handleTileJSONError()}},{key:"getTileJSON",value:function(){return this.tileJSON_}},{key:"handleTileJSONResponse",value:function(e){var t,r=(0,v.U2)("EPSG:4326"),n=this.getProjection();if(void 0!==e.bounds){var i=(0,v.WO)(r,n);t=(0,h.Ne)(e.bounds,i)}var o=(0,s.Tl)(n),a=e.minzoom||0,l=e.maxzoom||22,u=(0,s.dl)({extent:o,maxZoom:l,minZoom:a,tileSize:this.tileSize_});if(this.tileGrid=u,this.tileUrlFunction=(0,ct.uR)(e.tiles,u),e.attribution&&!this.getAttributions()){var c=void 0!==t?t:o;this.setAttributions((function(t){return(0,h.kK)(c,t.extent)?[e.attribution]:null}))}this.tileJSON_=e,this.setState("ready")}},{key:"handleTileJSONError",value:function(){this.setState("error")}}],r&&ir(t.prototype,r),n&&ir(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(st.Z);const cr=ur;function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==fr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==fr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===fr(o)?o:String(o)),n)}var i,o}function pr(e,t){return pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pr(e,t)}function dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=yr(e);if(t){var i=yr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function yr(e){return yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yr(e)}var gr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pr(e,t)}(o,e);var t,r,n,i=dr(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},t=i.call(this,{opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:void 0===e.wrapX||e.wrapX,zDirection:e.zDirection,url:e.template||"z:{z} x:{x} y:{y}",tileLoadFunction:function(e,r){var n=e.getTileCoord()[0],i=(0,S.Pq)(t.tileGrid.getTileSize(n)),o=(0,ut.E4)(i[0],i[1]);o.strokeStyle="grey",o.strokeRect(.5,.5,i[0]+.5,i[1]+.5),o.fillStyle="grey",o.strokeStyle="white",o.textAlign="center",o.textBaseline="middle",o.font="24px sans-serif",o.lineWidth=4,o.strokeText(r,i[0]/2,i[1]/2,i[0]),o.fillText(r,i[0]/2,i[1]/2,i[0]),e.setImage(o.canvas)}})}return t=o,r&&hr(t.prototype,r),n&&hr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(wt.Z);const mr=gr;function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==_r(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===_r(o)?o:String(o)),n)}var i,o}function Ar(e,t){return Ar=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ar(e,t)}function br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=wr(e);if(t){var i=wr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function wr(e){return wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wr(e)}var Er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ar(e,t)}(o,e);var t,r,n,i=br(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})).params_=e.params||{},t.hidpi_=void 0===e.hidpi||e.hidpi,t.tmpExtent_=(0,h.lJ)(),t.setKey(t.getKeyForParams_()),t}return t=o,(r=[{key:"getKeyForParams_",value:function(){var e=0,t=[];for(var r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}},{key:"getParams",value:function(){return this.params_}},{key:"getRequestUrl_",value:function(e,t,r,n,i,o){var a=this.urls;if(a)return b(1==a.length?a[0]:a[(0,A.$W)((0,St.vp)(e),a.length)],r,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),n,i,o)}},{key:"getTilePixelRatio",value:function(e){return this.hidpi_?e:1}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.setKey(this.getKeyForParams_())}},{key:"tileUrlFunction",value:function(e,t,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=e[0])){1==t||this.hidpi_||(t=1);var i=n.getTileCoordExtent(e,this.tmpExtent_),o=(0,S.Pq)(n.getTileSize(e[0]),this.tmpSize);1!=t&&(o=(0,S.bA)(o,t,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(a,this.params_),this.getRequestUrl_(e,o,i,t,r,a)}}}])&&vr(t.prototype,r),n&&vr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(st.Z);const xr=Er;function Ir(e){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(e)}function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Ir(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Ir(o)?o:String(o)),n)}var i,o}function Cr(e,t){return Cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cr(e,t)}function Pr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Or(e);if(t){var i=Or(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ir(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Or(e){return Or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Or(e)}var Tr={stamen_terrain:{extension:"png",opaque:!0},stamen_terrain_background:{extension:"png",opaque:!0},stamen_terrain_labels:{extension:"png",opaque:!1},stamen_terrain_lines:{extension:"png",opaque:!1},stamen_toner_background:{extension:"png",opaque:!0},stamen_toner:{extension:"png",opaque:!0},stamen_toner_labels:{extension:"png",opaque:!1},stamen_toner_lines:{extension:"png",opaque:!1},stamen_toner_lite:{extension:"png",opaque:!0},stamen_watercolor:{extension:"jpg",opaque:!0},alidade_smooth:{extension:"png",opaque:!0},alidade_smooth_dark:{extension:"png",opaque:!0},outdoors:{extension:"png",opaque:!0},osm_bright:{extension:"png",opaque:!0}},Mr={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};const kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cr(e,t)}(o,e);var t,r,n,i=Pr(o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=e.layer.indexOf("-"),r=-1==t?e.layer:e.layer.slice(0,t),n=Mr[r]||{minZoom:0,maxZoom:20,retina:!0},a=Tr[e.layer],s=e.apiKey?"?api_key="+e.apiKey:"",l=n.retina&&e.retina?"@2x":"",u=void 0!==e.url?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+l+"."+a.extension+s,c=['&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>','&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',x.h];return e.layer.startsWith("stamen_")&&c.splice(1,0,'&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>'),i.call(this,{attributions:c,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:void 0!==e.maxZoom?e.maxZoom:n.maxZoom,minZoom:void 0!==e.minZoom?e.minZoom:n.minZoom,opaque:a.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:u,tilePixelRatio:l?2:1,wrapX:e.wrapX,zDirection:e.zDirection})}return t=o,r&&Sr(t.prototype,r),n&&Sr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(wt.Z);var Rr=__webpack_require__(8553),Br=__webpack_require__(31706),Lr=__webpack_require__(94162);function Dr(e){return Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dr(e)}function jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Dr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Dr(o)?o:String(o)),n)}var i,o}function Fr(e,t){return Fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fr(e,t)}function Nr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Zr(e);if(t){var i=Zr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Dr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Zr(e){return Zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zr(e)}var Ur=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fr(e,t)}(o,e);var t,r,n,i=Nr(o);function o(e,t,r,n,a){var s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var l=void 0!==a?Lr.Z.IDLE:Lr.Z.LOADED;return(s=i.call(this,e,t,r,l)).loader_=void 0!==a?a:null,s.canvas_=n,s.error_=null,s}return t=o,(r=[{key:"getError",value:function(){return this.error_}},{key:"handleLoad_",value:function(e){e?(this.error_=e,this.state=Lr.Z.ERROR):this.state=Lr.Z.LOADED,this.changed()}},{key:"load",value:function(){this.state==Lr.Z.IDLE&&(this.state=Lr.Z.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}},{key:"getImage",value:function(){return this.canvas_}}])&&jr(t.prototype,r),n&&jr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(f.ZP);const Qr=Ur;var Gr=__webpack_require__(94867),zr=__webpack_require__(17246),qr=__webpack_require__(25324);function Vr(e){return Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vr(e)}function Wr(){return Wr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tn(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},Wr.apply(this,arguments)}function Kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Vr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Vr(o)?o:String(o)),n)}var i,o}function Yr(e,t,r){return t&&Hr(e.prototype,t),r&&Hr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jr(e,t)}function Jr(e,t){return Jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jr(e,t)}function $r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=tn(e);if(t){var i=tn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Vr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return en(e)}(this,r)}}function en(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tn(e){return tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tn(e)}var rn,nn=!0;try{new ImageData(10,10)}catch(e){nn=!1}function on(e){var t=!0;try{new ImageData(10,10)}catch(e){t=!1}function r(e,r,n){return t?new ImageData(e,r,n):{data:e,width:r,height:n}}return function(t){var n=t.buffers,i=t.meta,o=t.imageOps,a=t.width,s=t.height,l=n.length,u=n[0].byteLength;if(o){for(var c=new Array(l),f=0;f<l;++f)c[f]=r(new Uint8ClampedArray(n[f]),a,s);return e(c,i).data.buffer}for(var h=new Uint8ClampedArray(u),p=new Array(l),d=new Array(l),y=0;y<l;++y)p[y]=new Uint8ClampedArray(n[y]),d[y]=[0,0,0,0];for(var g=0;g<u;g+=4){for(var m=0;m<l;++m){var _=p[m];d[m][0]=_[g],d[m][1]=_[g+1],d[m][2]=_[g+2],d[m][3]=_[g+3]}var v=e(d,i);h[g]=v[0],h[g+1]=v[1],h[g+2]=v[2],h[g+3]=v[3]}return h.buffer}}function an(e,t){var r=Object.keys(e.lib||{}).map((function(t){return"const "+t+" = "+e.lib[t].toString()+";"})).concat(["const __minion__ = ("+on.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(r.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(r,{type:"text/javascript"})));return n.addEventListener("message",t),n}var sn=function(e){Xr(r,e);var t=$r(r);function r(e){var n,i;Kr(this,r),(n=t.call(this))._imageOps=!!e.imageOps,i=0===e.threads?0:n._imageOps?1:e.threads||1;var o=new Array(i);if(i)for(var a=0;a<i;++a)o[a]=an(e,n._onWorkerMessage.bind(en(n),a));else o[0]=function(e,t){var r=on(e.operation),n=!1;return{postMessage:function(e){setTimeout((function(){n||t({data:{buffer:r(e),meta:e.meta}})}),0)},terminate:function(){n=!0}}}(e,n._onWorkerMessage.bind(en(n),0));return n._workers=o,n._queue=[],n._maxQueueLength=e.queue||1/0,n._running=0,n._dataLookup={},n._job=null,n}return Yr(r,[{key:"process",value:function(e,t,r){this._enqueue({inputs:e,meta:t,callback:r}),this._dispatch()}},{key:"_enqueue",value:function(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}},{key:"_dispatch",value:function(){if(!this._running&&0!==this._queue.length){var e=this._queue.shift();this._job=e;var t=e.inputs[0].width,r=e.inputs[0].height,n=e.inputs.map((function(e){return e.data.buffer})),i=this._workers.length;if(this._running=i,1!==i)for(var o=e.inputs[0].data.length,a=4*Math.ceil(o/4/i),s=0;s<i;++s){for(var l=s*a,u=[],c=0,f=n.length;c<f;++c)u.push(n[c].slice(l,l+a));this._workers[s].postMessage({buffers:u,meta:e.meta,imageOps:this._imageOps,width:t,height:r},u)}else this._workers[0].postMessage({buffers:n,meta:e.meta,imageOps:this._imageOps,width:t,height:r},n)}}},{key:"_onWorkerMessage",value:function(e,t){this.disposed||(this._dataLookup[e]=t.data,--this._running,0===this._running&&this._resolveJob())}},{key:"_resolveJob",value:function(){var e,t,r=this._job,n=this._workers.length;if(1===n)e=new Uint8ClampedArray(this._dataLookup[0].buffer),t=this._dataLookup[0].meta;else{var i=r.inputs[0].data.length;e=new Uint8ClampedArray(i),t=new Array(n);for(var o=4*Math.ceil(i/4/n),a=0;a<n;++a){var s=this._dataLookup[a].buffer,l=a*o;e.set(new Uint8ClampedArray(s),l),t[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},r.callback(null,function(e,t,r){if(nn)return new ImageData(e,t,r);rn||(rn=document.createElement("canvas").getContext("2d"));var n=rn.createImageData(t,r);return n.data.set(e),n}(e,r.inputs[0].width,r.inputs[0].height),t),this._dispatch()}},{key:"disposeInternal",value:function(){for(var e=0;e<this._workers.length;++e)this._workers[e].terminate();this._workers.length=0}}]),r}(Br.Z),ln="beforeoperations",un="afteroperations",cn=function(e){Xr(r,e);var t=$r(r);function r(e,n,i){var o;return Kr(this,r),(o=t.call(this,e)).extent=n.extent,o.resolution=n.viewState.resolution/n.pixelRatio,o.data=i,o}return Yr(r)}(B.ZP),fn=function(e){Xr(r,e);var t=$r(r);function r(e){var n;Kr(this,r),(n=t.call(this,{projection:null})).on,n.once,n.un,n.processor_=null,n.operationType_=void 0!==e.operationType?e.operationType:"pixel",n.threads_=void 0!==e.threads?e.threads:1,n.layers_=function(e){for(var t=e.length,r=new Array(t),n=0;n<t;++n)r[n]=dn(e[n]);return r}(e.sources);for(var a,s=n.changed.bind(en(n)),l=0,u=n.layers_.length;l<u;++l)n.layers_[l].addEventListener(L.Z.CHANGE,s);return n.useResolutions_=null!==e.resolutions,n.tileQueue_=new qr.Z((function(){return 1}),n.processSources_.bind(en(n))),n.requestedFrameState_,n.renderedImageCanvas_=null,n.renderedRevision_,n.frameState_={animate:!1,coordinateToPixelTransform:(0,o.Ue)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(a=n.layers_,a.map((function(e){return e.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:(0,o.Ue)(),postRenderFunctions:[],size:[0,0],tileQueue:n.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,i.sq)(en(n)),renderTargets:{}},n.setAttributions((function(t){for(var r=[],n=0,i=e.sources.length;n<i;++n){var o=e.sources[n],a=o instanceof Rr.Z?o:o.getSource();if(a){var s=a.getAttributions();if("function"==typeof s){var l=s(t);r.push.apply(r,l)}}}return 0!==r.length?r:null})),void 0!==e.operation&&n.setOperation(e.operation,e.lib),n}return Yr(r,[{key:"setOperation",value:function(e,t){this.processor_&&this.processor_.dispose(),this.processor_=new sn({operation:e,imageOps:"image"===this.operationType_,queue:1,lib:t,threads:this.threads_}),this.changed()}},{key:"updateFrameState_",value:function(e,t,r){var n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);var i=(0,h.qg)(e);n.size[0]=Math.ceil((0,h.dz)(e)/t),n.size[1]=Math.ceil((0,h.Cr)(e)/t),n.extent=[i[0]-n.size[0]*t/2,i[1]-n.size[1]*t/2,i[0]+n.size[0]*t/2,i[1]+n.size[1]*t/2],n.time=Date.now();var o=n.viewState;return o.center=i,o.projection=r,o.resolution=t,n}},{key:"allSourcesReady_",value:function(){for(var e,t=!0,r=0,n=this.layers_.length;r<n;++r)if(!(e=this.layers_[r].getSource())||"ready"!==e.getState()){t=!1;break}return t}},{key:"getImage",value:function(e,t,r,n){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),t=this.findNearestResolution(t);var i=this.updateFrameState_(e,t,n);if(this.requestedFrameState_=i,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();t===o&&(0,h.fS)(i.extent,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}},{key:"processSources_",value:function(){for(var e=this.requestedFrameState_,t=this.layers_.length,r=new Array(t),n=0;n<t;++n){e.layerIndex=n,e.renderTargets={};var i=pn(this.layers_[n],e);if(!i)return;r[n]=i}var o={};this.dispatchEvent(new cn(ln,e,o)),this.processor_.process(r,o,this.onWorkerComplete_.bind(this,e))}},{key:"onWorkerComplete_",value:function(e,t,r,n){if(!t&&r){var i=e.extent,o=e.viewState.resolution;if(o===this.requestedFrameState_.viewState.resolution&&(0,h.fS)(i,this.requestedFrameState_.extent)){var a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{var s=Math.round((0,h.dz)(i)/o),l=Math.round((0,h.Cr)(i)/o);a=(0,ut.E4)(s,l),this.renderedImageCanvas_=new Qr(i,o,1,a.canvas)}a.putImageData(r,0,0),e.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new cn(un,e,n))}}}},{key:"getResolutions",value:function(e){if(!this.useResolutions_)return null;var t=Wr(tn(r.prototype),"getResolutions",this).call(this);if(!t)for(var n=0,i=this.layers_.length;n<i;++n){if(t=this.layers_[n].getSource().getResolutions(e))break}return t}},{key:"disposeInternal",value:function(){this.processor_&&this.processor_.dispose(),Wr(tn(r.prototype),"disposeInternal",this).call(this)}}]),r}(y.ZP);fn.prototype.dispose;var hn=null;function pn(e,t){var r=e.getRenderer();if(!r)throw new Error("Unsupported layer type: "+e);if(!r.prepareFrame(t))return null;var n=t.size[0],i=t.size[1];if(0===n||0===i)return null;var o,a=r.renderFrame(t,null);if(a instanceof HTMLCanvasElement)o=a;else{if(a&&(o=a.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===n&&o.height===i)return o.getContext("2d").getImageData(0,0,n,i)}if(hn){var s=hn.canvas;s.width!==n||s.height!==i?hn=(0,ut.E4)(n,i,void 0,{willReadFrequently:!0}):hn.clearRect(0,0,n,i)}else hn=(0,ut.E4)(n,i,void 0,{willReadFrequently:!0});return hn.drawImage(o,0,0,n,i),hn.getImageData(0,0,n,i)}function dn(e){var t;return e instanceof Rr.Z?e instanceof It.Z?t=new zr.Z({source:e}):e instanceof y.ZP&&(t=new Gr.Z({source:e})):t=e,t}const yn=fn;var gn={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},mn={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function _n(e,t,r,n){var i=e.projection;if(!i&&!(i=(0,v.U2)(t.crs)))throw new Error("Unsupported CRS: ".concat(t.crs));for(var o="en"!==i.getAxisOrientation().substr(0,2),a=t.tileMatrices,s={},l=0;l<a.length;++l){var u=a[l];s[u.id]=u}var c={},f=[];if(n)for(var p=0;p<n.length;++p){var d=n[p],y=d.tileMatrix;f.push(y),c[y]=d}else for(var g=0;g<a.length;++g){var m=a[g].id;f.push(m)}for(var _=f.length,A=new Array(_),b=new Array(_),w=new Array(_),E=new Array(_),x=[-1/0,-1/0,1/0,1/0],I=0;I<_;++I){var S=f[I],C=s[S],P=C.pointOfOrigin;A[I]=o?[P[1],P[0]]:P,b[I]=C.cellSize,w[I]=[C.matrixWidth,C.matrixHeight],E[I]=[C.tileWidth,C.tileHeight];var O=c[S];if(O){var T=C.cellSize*C.tileWidth,M=A[I][0]+O.minTileCol*T,k=A[I][0]+(O.maxTileCol+1)*T,R=C.cellSize*C.tileHeight,B=void 0,L=void 0;"bottomLeft"===C.cornerOfOrigin?(B=A[I][1]+O.minTileRow*R,L=A[I][1]+(O.maxTileRow+1)*R):(B=A[I][1]-(O.maxTileRow+1)*R,L=A[I][1]-O.minTileRow*R),(0,h.Ed)(x,[M,B,k,L],x)}}var D=new Xe.Z({origins:A,resolutions:b,sizes:w,tileSizes:E,extent:n?x:void 0}),j=e.context,F=e.url;return{grid:D,urlTemplate:r,urlFunction:function(e,t,i){if(e){var o=f[e[0]],a=s[o],l="bottomLeft"===a.cornerOfOrigin,u={tileMatrix:o,tileCol:e[1],tileRow:l?-e[2]-1:e[2]};if(n){var h=c[a.id];if(u.tileCol<h.minTileCol||u.tileCol>h.maxTileCol||u.tileRow<h.minTileRow||u.tileRow>h.maxTileRow)return}Object.assign(u,j);var p=r.replace(/\{(\w+?)\}/g,(function(e,t){return u[t]}));return Gt(F,p)}}}}function vn(e,t){var r,n=t.tileMatrixSetLimits;if("map"===t.dataType)r=function(e,t){for(var r,n,i=0;i<e.length;++i){var o=e[i];if("item"===o.rel){if(o.type===t){r=o.href;break}(gn[o.type]||!n&&o.type.startsWith("image/"))&&(n=o.href)}}if(!r){if(!n)throw new Error('Could not find "item" link');r=n}return r}(t.links,e.mediaType);else{if("vector"!==t.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');r=function(e,t,r){for(var n,i,o={},a=0;a<e.length;++a){var s=e[a];if(o[s.type]=s.href,"item"===s.rel){if(s.type===t){n=s.href;break}mn[s.type]&&(i=s.href)}}if(!n&&r)for(var l=0;l<r.length;++l){var u=r[l];if(o[u]){n=o[u];break}}if(!n){if(!i)throw new Error('Could not find "item" link');n=i}return n}(t.links,e.mediaType,e.supportedMediaTypes)}if(t.tileMatrixSet)return _n(e,t.tileMatrixSet,r,n);var i=t.links.find((function(e){return"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===e.rel}));if(!i)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");var o=i.href;return Qt(Gt(e.url,o)).then((function(t){return _n(e,t,r,n)}))}function An(e){return Qt(e.url).then((function(t){return vn(e,t)}))}var bn=__webpack_require__(19230);function wn(e){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(e)}function En(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==wn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===wn(o)?o:String(o)),n)}var i,o}function xn(e,t){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xn(e,t)}function In(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Cn(e);if(t){var i=Cn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===wn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sn(e)}(this,r)}}function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cn(e){return Cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cn(e)}var Pn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xn(e,t)}(o,e);var t,r,n,i=In(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=i.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,format:e.format,overlaps:e.overlaps,projection:e.projection,tileClass:e.tileClass,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection,state:"loading"}),An({url:e.url,projection:t.getProjection(),mediaType:e.mediaType,supportedMediaTypes:e.format.supportedMediaTypes,context:e.context||null}).then(t.handleTileSetInfo_.bind(Sn(t))).catch(t.handleError_.bind(Sn(t))),t}return t=o,r=[{key:"handleTileSetInfo_",value:function(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}},{key:"handleError_",value:function(e){(0,bn.vU)(e),this.setState("error")}}],r&&En(t.prototype,r),n&&En(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Et.Z);const On=Pn;function Tn(e){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(e)}function Mn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Tn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Tn(o)?o:String(o)),n)}var i,o}function kn(e,t){return kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kn(e,t)}function Rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ln(e);if(t){var i=Ln(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bn(e)}(this,r)}}function Bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ln(e){return Ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ln(e)}var Dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kn(e,t)}(o,e);var t,r,n,i=Rn(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),An({url:e.url,projection:t.getProjection(),mediaType:e.mediaType,context:e.context||null}).then(t.handleTileSetInfo_.bind(Bn(t))).catch(t.handleError_.bind(Bn(t))),t}return t=o,r=[{key:"handleTileSetInfo_",value:function(e){this.tileGrid=e.grid,this.setTileUrlFunction(e.urlFunction,e.urlTemplate),this.setState("ready")}},{key:"handleError_",value:function(e){(0,bn.vU)(e),this.setState("error")}}],r&&Mn(t.prototype,r),n&&Mn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(st.Z);const jn=Dn;var Fn=__webpack_require__(24871);function Nn(e){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(e)}function Zn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Nn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Nn(o)?o:String(o)),n)}var i,o}function Un(e,t){return Un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Un(e,t)}function Qn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=zn(e);if(t){var i=zn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Nn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Gn(e)}(this,r)}}function Gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zn(e){return zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zn(e)}var qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Un(e,t)}(o,e);var t,r,n,i=Qn(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=void 0!==e.crossOrigin?e.crossOrigin:null,n=void 0!==e.imageLoadFunction?e.imageLoadFunction:y.r6;return(t=i.call(this,{attributions:e.attributions,interpolate:e.interpolate,projection:(0,v.U2)(e.projection)})).url_=e.url,t.imageExtent_=e.imageExtent,t.image=null,t.image=new f.ZP(t.imageExtent_,void 0,1,p({url:e.url,imageExtent:e.imageExtent,crossOrigin:r,load:function(e,r){return t.image.setImage(e),n(t.image,r),(0,f.Jx)(e)}})),t.image.addEventListener(L.Z.CHANGE,t.handleImageChange.bind(Gn(t))),t}return t=o,(r=[{key:"getImageExtent",value:function(){return this.imageExtent_}},{key:"getImageInternal",value:function(e,t,r,n){return(0,h.kK)(e,this.image.getExtent())?this.image:null}},{key:"getUrl",value:function(){return this.url_}}])&&Zn(t.prototype,r),n&&Zn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(y.ZP);const Vn=qn;function Wn(e){return Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(e)}function Kn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Wn(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Wn(o)?o:String(o)),n)}var i,o}function Hn(){return Hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jn(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},Hn.apply(this,arguments)}function Yn(e,t){return Yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yn(e,t)}function Xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Jn(e);if(t){var i=Jn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Wn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Jn(e){return Jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jn(e)}var $n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yn(e,t)}(o,e);var t,r,n,i=Xn(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,{interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions})).crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,t.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,t.params_=e.params||{},t.url_=e.url,t.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:y.r6,t.hidpi_=void 0===e.hidpi||e.hidpi,t.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,t.ratio_=void 0!==e.ratio?e.ratio:1,t.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,t.image_=null,t.renderedRevision_=0,t}return t=o,r=[{key:"getParams",value:function(){return this.params_}},{key:"getImageInternal",value:function(e,t,r,n){var i=this;return void 0===this.url_?null:(this.loader||(this.loader=m({crossOrigin:this.crossOrigin_,params:this.params_,hidpi:this.hidpi_,metersPerUnit:this.metersPerUnit_,url:this.url_,useOverlay:this.useOverlay_,ratio:this.ratio_,load:function(e,t){return i.image.setImage(e),i.imageLoadFunction_(i.image,t),(0,f.Jx)(e)}})),Hn(Jn(o.prototype),"getImageInternal",this).call(this,e,t,r,n))}},{key:"getImageLoadFunction",value:function(){return this.imageLoadFunction_}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.changed()}},{key:"setImageLoadFunction",value:function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()}}],r&&Kn(t.prototype,r),n&&Kn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(y.ZP);const ei=$n;function ti(e){return ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ti(e)}function ri(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==ti(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ti(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ti(o)?o:String(o)),n)}var i,o}function ni(e,t){return ni=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ni(e,t)}function ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=oi(e);if(t){var i=oi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ti(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function oi(e){return oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oi(e)}var ai=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ni(e,t)}(o,e);var t,r,n,i=ii(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this,{attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions,state:e.state})).canvasFunction_=e.canvasFunction,t.canvas_=null,t.renderedRevision_=0,t.ratio_=void 0!==e.ratio?e.ratio:1.5,t}return t=o,r=[{key:"getImageInternal",value:function(e,t,r,n){t=this.findNearestResolution(t);var i=this.canvas_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==t&&i.getPixelRatio()==r&&(0,h.r4)(i.getExtent(),e))return i;e=e.slice(),(0,h.H9)(e,this.ratio_);var o=[(0,h.dz)(e)/t*r,(0,h.Cr)(e)/t*r],a=this.canvasFunction_.call(this,e,t,r,o,n);return a&&(i=new Qr(e,t,r,a)),this.canvas_=i,this.renderedRevision_=this.getRevision(),i}}],r&&ri(t.prototype,r),n&&ri(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(y.ZP);const si=ai;function li(e){return li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},li(e)}function ui(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==li(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==li(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===li(o)?o:String(o)),n)}var i,o}function ci(){return ci="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pi(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},ci.apply(this,arguments)}function fi(e,t){return fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fi(e,t)}function hi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=pi(e);if(t){var i=pi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function pi(e){return pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pi(e)}var di=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fi(e,t)}(o,e);var t,r,n,i=hi(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this,{attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions})).crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,t.hidpi_=void 0===e.hidpi||e.hidpi,t.url_=e.url,t.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:y.r6,t.params_=e.params||{},t.image_=null,t.imageSize_=[0,0],t.renderedRevision_=0,t.ratio_=void 0!==e.ratio?e.ratio:1.5,t}return t=o,r=[{key:"getParams",value:function(){return this.params_}},{key:"getImageInternal",value:function(e,t,r,n){var i=this;return void 0===this.url_?null:(this.loader||(this.loader=w({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:function(e,t){return i.image.setImage(e),i.imageLoadFunction_(i.image,t),(0,f.Jx)(e)}})),ci(pi(o.prototype),"getImageInternal",this).call(this,e,t,r,n))}},{key:"getImageLoadFunction",value:function(){return this.imageLoadFunction_}},{key:"getUrl",value:function(){return this.url_}},{key:"setImageLoadFunction",value:function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()}},{key:"setUrl",value:function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())}},{key:"updateParams",value:function(e){Object.assign(this.params_,e),this.image_=null,this.changed()}}],r&&ui(t.prototype,r),n&&ui(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(y.ZP);const yi=di;var gi=__webpack_require__(97972);function mi(e){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mi(e)}function _i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==mi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==mi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===mi(o)?o:String(o)),n)}var i,o}function vi(e){return function(e){if(Array.isArray(e))return Ai(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ai(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ai(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bi="version1",wi="version2",Ei="version3",xi={};xi[bi]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},xi[wi]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},xi[Ei]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},xi.none={none:{supports:[],formats:[],qualities:[]}};var Ii=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Si=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,Ci=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;var Pi={};Pi[bi]=function(e){var t=e.getComplianceLevelSupportedFeatures();return void 0===t&&(t=xi[bi].level0),{url:void 0===e.imageInfo["@id"]?void 0:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:t.supports,formats:[].concat(vi(t.formats),[void 0===e.imageInfo.formats?[]:e.imageInfo.formats]),qualities:[].concat(vi(t.qualities),[void 0===e.imageInfo.qualities?[]:e.imageInfo.qualities]),resolutions:e.imageInfo.scale_factors,tileSize:void 0!==e.imageInfo.tile_width?void 0!==e.imageInfo.tile_height?[e.imageInfo.tile_width,e.imageInfo.tile_height]:[e.imageInfo.tile_width,e.imageInfo.tile_width]:null!=e.imageInfo.tile_height?[e.imageInfo.tile_height,e.imageInfo.tile_height]:void 0}},Pi[wi]=function(e){var t=e.getComplianceLevelSupportedFeatures(),r=Array.isArray(e.imageInfo.profile)&&e.imageInfo.profile.length>1,n=r&&e.imageInfo.profile[1].supports?e.imageInfo.profile[1].supports:[],i=r&&e.imageInfo.profile[1].formats?e.imageInfo.profile[1].formats:[],o=r&&e.imageInfo.profile[1].qualities?e.imageInfo.profile[1].qualities:[];return{url:e.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map((function(e){return[e.width,e.height]})),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map((function(e){return e.width}))[0],e.imageInfo.tiles.map((function(e){return void 0===e.height?e.width:e.height}))[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map((function(e){return e.scaleFactors}))[0],supports:[].concat(vi(t.supports),vi(n)),formats:[].concat(vi(t.formats),vi(i)),qualities:[].concat(vi(t.qualities),vi(o))}},Pi[Ei]=function(e){var t=e.getComplianceLevelSupportedFeatures(),r=void 0===e.imageInfo.extraFormats?t.formats:[].concat(vi(t.formats),vi(e.imageInfo.extraFormats)),n=void 0!==e.imageInfo.preferredFormats&&Array.isArray(e.imageInfo.preferredFormats)&&e.imageInfo.preferredFormats.length>0?e.imageInfo.preferredFormats.filter((function(e){return["jpg","png","gif"].includes(e)})).reduce((function(e,t){return void 0===e&&r.includes(t)?t:e}),void 0):void 0;return{url:e.imageInfo.id,sizes:void 0===e.imageInfo.sizes?void 0:e.imageInfo.sizes.map((function(e){return[e.width,e.height]})),tileSize:void 0===e.imageInfo.tiles?void 0:[e.imageInfo.tiles.map((function(e){return e.width}))[0],e.imageInfo.tiles.map((function(e){return e.height}))[0]],resolutions:void 0===e.imageInfo.tiles?void 0:e.imageInfo.tiles.map((function(e){return e.scaleFactors}))[0],supports:void 0===e.imageInfo.extraFeatures?t.supports:[].concat(vi(t.supports),vi(e.imageInfo.extraFeatures)),formats:r,qualities:void 0===e.imageInfo.extraQualities?t.qualities:[].concat(vi(t.qualities),vi(e.imageInfo.extraQualities)),preferredFormat:n}};var Oi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setImageInfo(t)}var t,r,n;return t=e,r=[{key:"setImageInfo",value:function(e){this.imageInfo="string"==typeof e?JSON.parse(e):e}},{key:"getImageApiVersion",value:function(){if(void 0!==this.imageInfo){var e=this.imageInfo["@context"]||"ol-no-context";"string"==typeof e&&(e=[e]);for(var t=0;t<e.length;t++)switch(e[t]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return bi;case"http://iiif.io/api/image/2/context.json":return wi;case"http://iiif.io/api/image/3/context.json":return Ei;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(bi)&&this.imageInfo.identifier)return bi}(0,gi.h)(!1,"Cannot determine IIIF Image API version from provided image information JSON")}}},{key:"getComplianceLevelEntryFromProfile",value:function(e){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===e&&(e=this.getImageApiVersion()),e){case bi:if(Ii.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Ei:if(Ci.test(this.imageInfo.profile))return this.imageInfo.profile;break;case wi:if("string"==typeof this.imageInfo.profile&&Si.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&Si.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}}},{key:"getComplianceLevelFromProfile",value:function(e){var t=this.getComplianceLevelEntryFromProfile(e);if(void 0!==t){var r=t.match(/level[0-2](?:\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}}},{key:"getComplianceLevelSupportedFeatures",value:function(){if(void 0!==this.imageInfo){var e=this.getImageApiVersion(),t=this.getComplianceLevelFromProfile(e);return void 0===t?xi.none.none:xi[e][t]}}},{key:"getTileSourceOptions",value:function(e){var t=e||{},r=this.getImageApiVersion();if(void 0!==r){var n=void 0===r?void 0:Pi[r](this);if(void 0!==n)return{url:n.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:void 0!==t.format&&n.formats.includes(t.format)?t.format:void 0!==n.preferredFormat?n.preferredFormat:"jpg",supports:n.supports,quality:t.quality&&n.qualities.includes(t.quality)?t.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort((function(e,t){return t-e})):void 0,tileSize:n.tileSize}}}}],r&&_i(t.prototype,r),n&&_i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const Ti=Oi;function Mi(e){return Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mi(e)}function ki(e){return function(e){if(Array.isArray(e))return Ri(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ri(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ri(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Mi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Mi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Mi(o)?o:String(o)),n)}var i,o}function Li(e,t){return Li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Li(e,t)}function Di(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ji(e);if(t){var i=ji(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Mi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ji(e){return ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ji(e)}function Fi(e){return e.toLocaleString("en",{maximumFractionDigits:10})}var Ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Li(e,t)}(o,e);var t,r,n,i=Di(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=e||{},n=r.url||"";n+=n.lastIndexOf("/")===n.length-1||""===n?"":"/";var a=r.version||wi,s=r.sizes||[],l=r.size;(0,gi.h)(null!=l&&Array.isArray(l)&&2==l.length&&!isNaN(l[0])&&l[0]>0&&!isNaN(l[1])&&l[1]>0,"Missing or invalid `size`");var u,c,f,p=l[0],d=l[1],y=r.tileSize,g=r.tilePixelRatio||1,m=r.format||"jpg",_=r.quality||(r.version==bi?"native":"default"),v=r.resolutions||[],A=r.supports||[],b=r.extent||[0,-d,p,0],w=null!=s&&Array.isArray(s)&&s.length>0,E=void 0!==y&&("number"==typeof y&&Number.isInteger(y)&&y>0||Array.isArray(y)&&y.length>0),x=null!=A&&Array.isArray(A)&&(A.includes("regionByPx")||A.includes("regionByPct"))&&(A.includes("sizeByWh")||A.includes("sizeByH")||A.includes("sizeByW")||A.includes("sizeByPct"));if(v.sort((function(e,t){return t-e})),E||x)if(null!=y&&("number"==typeof y&&Number.isInteger(y)&&y>0?(u=y,c=y):Array.isArray(y)&&y.length>0&&((1==y.length||null==y[1]&&Number.isInteger(y[0]))&&(u=y[0],c=y[0]),2==y.length&&(Number.isInteger(y[0])&&Number.isInteger(y[1])?(u=y[0],c=y[1]):null==y[0]&&Number.isInteger(y[1])&&(u=y[1],c=y[1])))),void 0!==u&&void 0!==c||(u=ot.S,c=ot.S),0==v.length)for(var I=f=Math.max(Math.ceil(Math.log(p/u)/Math.LN2),Math.ceil(Math.log(d/c)/Math.LN2));I>=0;I--)v.push(Math.pow(2,I));else{var C=Math.max.apply(Math,ki(v));f=Math.round(Math.log(C)/Math.LN2)}else if(u=p,c=d,v=[],w){s.sort((function(e,t){return e[0]-t[0]})),f=-1;for(var P=[],O=0;O<s.length;O++){var T=p/s[O][0];v.length>0&&v[v.length-1]==T?P.push(O):(v.push(T),f++)}if(P.length>0)for(var M=0;M<P.length;M++)s.splice(P[M]-M,1)}else v.push(1),s.push([p,d]),f=0;var k=new Xe.Z({tileSize:[u,c],extent:b,origin:(0,h.rL)(b),resolutions:v}),R=At.bind(null,(0,S.Pq)(y||256).map((function(e){return e*g})));return(t=i.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:r.interpolate,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,state:r.state,tileClass:R,tileGrid:k,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:function(e,t,r){var i,o,l=e[0];if(!(l>f)){var h=e[1],y=e[2],g=v[l];if(!(void 0===h||void 0===y||void 0===g||h<0||Math.ceil(p/g/u)<=h||y<0||Math.ceil(d/g/c)<=y)){if(x||E){var b=h*u*g,I=y*c*g,S=u*g,C=c*g,P=u,O=c;if(b+S>p&&(S=p-b),I+C>d&&(C=d-I),b+u*g>p&&(P=Math.floor((p-b+g-1)/g)),I+c*g>d&&(O=Math.floor((d-I+g-1)/g)),0==b&&S==p&&0==I&&C==d)i="full";else if(!x||A.includes("regionByPx"))i=b+","+I+","+S+","+C;else if(A.includes("regionByPct")){i="pct:"+Fi(b/p*100)+","+Fi(I/d*100)+","+Fi(S/p*100)+","+Fi(C/d*100)}a!=Ei||x&&!A.includes("sizeByWh")?!x||A.includes("sizeByW")?o=P+",":A.includes("sizeByH")?o=","+O:A.includes("sizeByWh")?o=P+","+O:A.includes("sizeByPct")&&(o="pct:"+Fi(100/g)):o=P+","+O}else if(i="full",w){var T=s[l][0],M=s[l][1];o=a==Ei?T==p&&M==d?"max":T+","+M:T==p?"full":T+","}else o=a==Ei?"max":"full";return n+i+"/"+o+"/0/"+_+"."+m}}},transition:r.transition})).zDirection=r.zDirection,t}return t=o,r&&Bi(t.prototype,r),n&&Bi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(st.Z);const Zi=Ni;var Ui=__webpack_require__(45091),Qi=__webpack_require__(43324),Gi=__webpack_require__(82992);function zi(e){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(e)}function qi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==zi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==zi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===zi(o)?o:String(o)),n)}var i,o}function Vi(e,t){return Vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vi(e,t)}function Wi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ki(e);if(t){var i=Ki(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ki(e){return Ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ki(e)}var Hi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vi(e,t)}(o,e);var t,r,n,i=Wi(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,transition:e.transition,wrapX:e.wrapX,zDirection:e.zDirection})).account_=e.account,t.mapId_=e.map||"",t.config_=e.config||{},t.templateCache_={},t.initializeMap_(),t}return t=o,(r=[{key:"getConfig",value:function(){return this.config_}},{key:"updateConfig",value:function(e){Object.assign(this.config_,e),this.initializeMap_()}},{key:"setConfig",value:function(e){this.config_=e||{},this.initializeMap_()}},{key:"initializeMap_",value:function(){var e=JSON.stringify(this.config_);if(this.templateCache_[e])this.applyTemplate_(this.templateCache_[e]);else{var t="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(t+="/named/"+this.mapId_);var r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,e)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",t),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}}},{key:"handleInitResponse_",value:function(e,t){var r=t.target;if(!r.status||r.status>=200&&r.status<300){var n;try{n=JSON.parse(r.responseText)}catch(e){return void this.setState("error")}this.applyTemplate_(n),this.templateCache_[e]=n,this.setState("ready")}else this.setState("error")}},{key:"handleInitError_",value:function(e){this.setState("error")}},{key:"applyTemplate_",value:function(e){var t="https://"+e.cdn_url.https+"/"+this.account_+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(t)}}])&&qi(t.prototype,r),n&&qi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(wt.Z);const Yi=Hi;function Xi(e){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(e)}function Ji(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Xi(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Xi(o)?o:String(o)),n)}var i,o}function $i(e,t){return $i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$i(e,t)}function eo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=to(e);if(t){var i=to(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Xi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function to(e){return to=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},to(e)}var ro=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$i(e,t)}(o,e);var t,r,n,i=eo(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=void 0!==e.hidpi&&e.hidpi;(t=i.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,opaque:!0,projection:(0,v.U2)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:r?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection})).hidpi_=r,t.culture_=void 0!==e.culture?e.culture:"en-us",t.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,t.apiKey_=e.key,t.imagerySet_=e.imagerySet,t.placeholderTiles_=e.placeholderTiles;var n="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+t.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+t.apiKey_+"&c="+t.culture_;return fetch(n).then((function(e){return e.json()})).then((function(e){return t.handleImageryMetadataResponse(e)})),t}return t=o,r=[{key:"getApiKey",value:function(){return this.apiKey_}},{key:"getImagerySet",value:function(){return this.imagerySet_}},{key:"handleImageryMetadataResponse",value:function(e){var t=this;if(200==e.statusCode&&"OK"==e.statusDescription&&"ValidCredentials"==e.authenticationResultCode&&1==e.resourceSets.length&&1==e.resourceSets[0].resources.length){var r=e.resourceSets[0].resources[0],n=-1==this.maxZoom_?r.zoomMax:this.maxZoom_,i=this.getProjection(),o=(0,s.Tl)(i),a=this.hidpi_?2:1,l=r.imageWidth==r.imageHeight?r.imageWidth/a:[r.imageWidth/a,r.imageHeight/a],u=(0,s.dl)({extent:o,minZoom:r.zoomMin,maxZoom:n,tileSize:l});this.tileGrid=u;var c=this.culture_,f=this.hidpi_,p=this.placeholderTiles_;if(this.tileUrlFunction=(0,ct.Un)(r.imageUrlSubdomains.map((function(e){var t=[0,0,0],n=r.imageUrl.replace("{subdomain}",e).replace("{culture}",c);return function(e,r,i){if(e){(0,St.T9)(e[0],e[1],e[2],t);var o=new URL(n.replace("{quadkey}",function(e){var t,r,n=e[0],i=new Array(n),o=1<<n-1;for(t=0;t<n;++t)r=48,e[1]&o&&(r+=1),e[2]&o&&(r+=2),i[t]=String.fromCharCode(r),o>>=1;return i.join("")}(t))),a=o.searchParams;return f&&(a.set("dpi","d1"),a.set("device","mobile")),!0===p?a.delete("n"):!1===p&&a.set("n","z"),o.toString()}}}))),r.imageryProviders){var d=(0,v.WO)((0,v.U2)("EPSG:4326"),this.getProjection());this.setAttributions((function(e){var n=[],i=e.viewState,o=t.getTileGrid(),a=o.getZForResolution(i.resolution,t.zDirection),s=o.getTileCoordForCoordAndZ(i.center,a)[0];return r.imageryProviders.map((function(t){for(var r=!1,i=t.coverageAreas,o=0,a=i.length;o<a;++o){var l=i[o];if(s>=l.zoomMin&&s<=l.zoomMax){var u=l.bbox,c=[u[1],u[0],u[3],u[2]],f=(0,h.Ne)(c,d);if((0,h.kK)(f,e.extent)){r=!0;break}}}r&&n.push(t.attribution)})),n.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),n}))}this.setState("ready")}else this.setState("error")}}],r&&Ji(t.prototype,r),n&&Ji(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(st.Z);const no=ro;var io=__webpack_require__(34859),oo=__webpack_require__(77277),ao=__webpack_require__(48671),so=__webpack_require__(56571),lo=__webpack_require__(77599),uo=__webpack_require__(84801);function co(e){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},co(e)}function fo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==co(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==co(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===co(o)?o:String(o)),n)}var i,o}var ho=new Uint8Array(4);const po=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.helper_=t;var n=t.getGL();this.texture_=n.createTexture(),this.framebuffer_=n.createFramebuffer(),this.depthbuffer_=n.createRenderbuffer(),this.size_=r||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}var t,r,n;return t=e,(r=[{key:"setSize",value:function(e){(0,He.fS)(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}},{key:"getSize",value:function(){return this.size_}},{key:"clearCachedData",value:function(){this.dataCacheDirty_=!0}},{key:"readAll",value:function(){if(this.dataCacheDirty_){var e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}},{key:"readPixel",value:function(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return ho[0]=0,ho[1]=0,ho[2]=0,ho[3]=0,ho;this.readAll();var r=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return ho[0]=this.data_[4*r],ho[1]=this.data_[4*r+1],ho[2]=this.data_[4*r+2],ho[3]=this.data_[4*r+3],ho}},{key:"getTexture",value:function(){return this.texture_}},{key:"getFramebuffer",value:function(){return this.framebuffer_}},{key:"getDepthbuffer",value:function(){return this.depthbuffer_}},{key:"updateSize_",value:function(){var e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),t.bindRenderbuffer(t.RENDERBUFFER,this.depthbuffer_),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e[0],e[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}])&&fo(t.prototype,r),n&&fo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var yo=__webpack_require__(39),go="GENERATE_POINT_BUFFERS";__webpack_require__(9187);function mo(e,t){var r=256,n=255;return(t=t||[])[0]=Math.floor(e/r/r/r)/n,t[1]=Math.floor(e/r/r)%r/n,t[2]=Math.floor(e/r)%r/n,t[3]=e%r/n,t}function _o(e){return _o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_o(e)}function vo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||bo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ao(e){return function(e){if(Array.isArray(e))return wo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bo(e,t){if(e){if("string"==typeof e)return wo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wo(e,t):void 0}}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Eo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==_o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===_o(o)?o:String(o)),n)}var i,o}function xo(){return xo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Po(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},xo.apply(this,arguments)}function Io(e,t){return Io=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Io(e,t)}function So(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Po(e);if(t){var i=Po(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===_o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Co(e)}(this,r)}}function Co(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Po(e){return Po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Po(e)}var Oo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Io(e,t)}(l,e);var t,r,a,s=So(l);function l(e,t){var r,a,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var c=t.uniforms||{},f=(0,o.Ue)();c[yo.ZC.PROJECTION_MATRIX]=f,(u=s.call(this,e,{uniforms:c,postProcesses:t.postProcesses})).sourceRevision_=-1,u.verticesBuffer_=new lo.ZP(n.qO,n.kd),u.indicesBuffer_=new lo.ZP(n.cX,n.kd),u.vertexShader_=t.vertexShader,u.fragmentShader_=t.fragmentShader,u.program_,u.hitDetectionEnabled_=null===(r=t.hitDetectionEnabled)||void 0===r||r;var p=t.attributes?t.attributes.map((function(e){return{name:"a_"+e.name,size:1,type:yo.GC.FLOAT}})):[];u.attributes=[{name:"a_position",size:2,type:yo.GC.FLOAT},{name:"a_index",size:1,type:yo.GC.FLOAT}],u.hitDetectionEnabled_&&(u.attributes.push({name:"a_hitColor",size:4,type:yo.GC.FLOAT}),u.attributes.push({name:"a_featureUid",size:1,type:yo.GC.FLOAT})),(a=u.attributes).push.apply(a,Ao(p)),u.customAttributes=t.attributes?t.attributes:[],u.previousExtent_=(0,h.lJ)(),u.currentTransform_=f,u.renderTransform_=(0,o.Ue)(),u.invertRenderTransform_=(0,o.Ue)(),u.renderInstructions_=new Float32Array(0),u.hitRenderTarget_,u.lastSentId=0,u.worker_=function(){var e='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,c=v?t[0]*n:e.length,h=f(e,0,c,n,!0),g=[];if(!h||h.next===h.prev)return g;if(v&&(h=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,h,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<c;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(h,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==M(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=c(s(e),t,n),t,n,r,x,i,2):2===u&&h(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(M(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,c=o>f?o>s?o:s:f>s?f:s,h=r.next;h!==t;){if(h.x>=a&&h.x<=v&&h.y>=l&&h.y<=c&&Z(x,o,i,f,u,s,h.x,h.y)&&M(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(M(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,c=o<f?o<s?o:s:f<s?f:s,h=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(c,h,t,n,r),d=b(p,y,t,n,r),w=e.prevZ,m=e.nextZ;w&&w.z>=g&&m&&m.z<=d;){if(w.x>=c&&w.x<=p&&w.y>=h&&w.y<=y&&w!==x&&w!==u&&Z(o,a,f,l,s,v,w.x,w.y)&&M(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,m.x>=c&&m.x<=p&&m.y>=h&&m.y<=y&&m!==x&&m!==u&&Z(o,a,f,l,s,v,m.x,m.y)&&M(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;w&&w.z>=g;){if(w.x>=c&&w.x<=p&&w.y>=h&&w.y<=y&&w!==x&&w!==u&&Z(o,a,f,l,s,v,w.x,w.y)&&M(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;m&&m.z<=d;){if(m.x>=c&&m.x<=p&&m.y>=h&&m.y<=y&&m!==x&&m!==u&&Z(o,a,f,l,s,v,m.x,m.y)&&M(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function c(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&F(x,i)&&F(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function h(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&w(u,o)){var f=I(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&Z(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),F(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=I(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return M(e.prev,e,t.prev)<0&&M(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Z(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function w(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(F(e,t)&&F(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(M(e.prev,e,t.prev)||M(e,t.prev,t))||m(e,t)&&M(e.prev,e,e.next)>0&&M(t.prev,t,t.next)>0)}function M(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=z(M(e,t,n)),i=z(M(e,t,r)),u=z(M(n,r,e)),o=z(M(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function z(e){return e>0?1:e<0?-1:0}function F(e,t){return M(e.prev,e,e.next)<0?M(e,t,e.next)>=0&&M(e,e.prev,t)>=0:M(e,t,e.prev)<0||M(e,e.next,t)<0}function I(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,c=r[o+1]*n,h=r[o+2]*n;l+=Math.abs((e[v]-e[h])*(e[c+1]-e[v+1])-(e[v]-e[c])*(e[h+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a){const l=8+f.length,v=u.length/l,c=[e[t+0],e[t+1]],h=[e[n],e[n+1]],p=r(s,[...c]),y=r(s,[...h]);function g(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let b=-1,d=-1;const Z=null!==i;if(null!==x){b=g(p,y,r(s,[...[e[x],e[x+1]]]))}if(Z){d=g(y,p,r(s,[...[e[i],e[i+1]]]))}return u.push(c[0],c[1],h[0],h[1],b,d,a,0),u.push(...f),u.push(c[0],c[1],h[0],h[1],b,d,a,1),u.push(...f),u.push(c[0],c[1],h[0],h[1],b,d,a,2),u.push(...f),u.push(c[0],c[1],h[0],h[1],b,d,a,3),u.push(...f),o.push(v,v+1,v+2,v+1,v+3,v+2),a+Math.sqrt((y[0]-p[0])*(y[0]-p[0])+(y[1]-p[1])*(y[1]-p[1]))}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let h=null;n<s-2?h=o+(n+2)*r:l&&(h=x+r),v=k(u,o+n*r,o+(n+1)*r,c,h,e,t,a,f,v)}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),c=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(c,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(e,"binary").toString("base64"):URL.createObjectURL(new Blob([e],{type:"application/javascript"})))}(),u.worker_.addEventListener("message",(function(e){var t=e.data;if(t.type===go){var r=t.projectionTransform;u.verticesBuffer_.fromArrayBuffer(t.vertexBuffer),u.helper.flushBufferData(u.verticesBuffer_),u.indicesBuffer_.fromArrayBuffer(t.indexBuffer),u.helper.flushBufferData(u.indicesBuffer_),u.renderTransform_=r,(0,o.nb)(u.invertRenderTransform_,u.renderTransform_),u.renderInstructions_=new Float32Array(e.data.renderInstructions),t.id===u.lastSentId&&(u.ready=!0),u.getLayer().changed()}})),u.featureCache_={},u.featureCount_=0;var d=u.getLayer().getSource();return u.sourceListenKeys_=[(0,Ct.oL)(d,ao.Z.ADDFEATURE,u.handleSourceFeatureAdded_,Co(u)),(0,Ct.oL)(d,ao.Z.CHANGEFEATURE,u.handleSourceFeatureChanged_,Co(u)),(0,Ct.oL)(d,ao.Z.REMOVEFEATURE,u.handleSourceFeatureDelete_,Co(u)),(0,Ct.oL)(d,ao.Z.CLEAR,u.handleSourceFeatureClear_,Co(u))],d.forEachFeature((function(e){u.featureCache_[(0,i.sq)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},u.featureCount_++})),u}return t=l,r=[{key:"afterHelperCreated",value:function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new po(this.helper))}},{key:"handleSourceFeatureAdded_",value:function(e){var t=e.feature;this.featureCache_[(0,i.sq)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}},{key:"handleSourceFeatureChanged_",value:function(e){var t=e.feature;this.featureCache_[(0,i.sq)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}}},{key:"handleSourceFeatureDelete_",value:function(e){var t=e.feature;delete this.featureCache_[(0,i.sq)(t)],this.featureCount_--}},{key:"handleSourceFeatureClear_",value:function(){this.featureCache_={},this.featureCount_=0}},{key:"renderFrame",value:function(e){var t=this.helper.getGL();this.preRender(t,e);var r=vo(this.getWorldParameters_(e),3),n=r[0],i=r[1],o=r[2];this.renderWorlds(e,!1,n,i,o),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var a=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,n,i,o),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),a}},{key:"getWorldParameters_",value:function(e){var t=e.viewState.projection,r=this.getLayer().getSource().getWrapX()&&t.canWrapX(),n=t.getExtent(),i=e.extent,o=r?(0,h.dz)(n):null,a=r?Math.ceil((i[2]-n[2])/o)+1:1;return[r?Math.floor((i[0]-n[0])/o):0,a,o]}},{key:"prepareFrameInternal",value:function(e){var t=this.getLayer(),r=t.getSource(),n=e.viewState,i=!e.viewHints[so.Z.ANIMATING]&&!e.viewHints[so.Z.INTERACTING],o=!(0,h.fS)(this.previousExtent_,e.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),i&&(o||a)){var s=n.projection,l=n.resolution,u=t instanceof oo.Z?t.getRenderBuffer():0,c=(0,h.f3)(e.extent,u*l);r.loadFeatures(c,l,s),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}},{key:"rebuildBuffers_",value:function(e){var t=(0,o.Ue)();this.helper.makeProjectionTransform(e,t);var r,n,i=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,a=i*this.featureCount_;this.renderInstructions_&&this.renderInstructions_.length===a||(this.renderInstructions_=new Float32Array(a));var s=[],l=[],u=-1;for(var c in this.featureCache_)if((n=(r=this.featureCache_[c]).geometry)&&"Point"===n.getType()){if(s[0]=n.getFlatCoordinates()[0],s[1]=n.getFlatCoordinates()[1],(0,o.nn)(t,s),this.renderInstructions_[++u]=s[0],this.renderInstructions_[++u]=s[1],this.hitDetectionEnabled_){var f=mo(u+5,l);this.renderInstructions_[++u]=f[0],this.renderInstructions_[++u]=f[1],this.renderInstructions_[++u]=f[2],this.renderInstructions_[++u]=f[3],this.renderInstructions_[++u]=Number(c)}for(var h=0;h<this.customAttributes.length;h++){var p=this.customAttributes[h].callback(r.feature,r.properties);this.renderInstructions_[++u]=p}}var d={id:++this.lastSentId,type:go,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:i-2};d.projectionTransform=t,this.ready=!1,this.worker_.postMessage(d,[this.renderInstructions_.buffer]),this.renderInstructions_=null}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){if((0,gi.h)(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`"),this.renderInstructions_&&this.hitDetectionEnabled_){var a=(0,o.nn)(t.coordinateToPixelTransform,e.slice()),s=this.hitRenderTarget_.readPixel(a[0]/2,a[1]/2),l=function(e){var t=0,r=256,n=255;return t+=Math.round(e[0]*r*r*r*n),t+=Math.round(e[1]*r*r*n),(t+=Math.round(e[2]*r*n))+Math.round(e[3]*n)}([s[0]/255,s[1]/255,s[2]/255,s[3]/255]),u=this.renderInstructions_[l],c=Math.floor(u).toString(),f=this.getLayer().getSource().getFeatureByUid(c);return f?n(f,this.getLayer(),null):void 0}}},{key:"renderWorlds",value:function(e,t,r,n,i){var a=r;this.helper.useProgram(this.program_,e),t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),(0,o.Iu)(this.currentTransform_,a*i,0),(0,o.Jp)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(t);var s=this.indicesBuffer_.getSize();this.helper.drawElements(0,s)}while(++a<n)}},{key:"disposeInternal",value:function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(e){(0,Ct.bN)(e)})),this.sourceListenKeys_=null,xo(Po(l.prototype),"disposeInternal",this).call(this)}}],r&&Eo(t.prototype,r),a&&Eo(t,a),Object.defineProperty(t,"prototype",{writable:!1}),l}(uo.Z);const To=Oo;var Mo=__webpack_require__(3785),ko=__webpack_require__(27525),Ro=__webpack_require__(28427),Bo=__webpack_require__(82582),Lo=__webpack_require__(46009);function Do(e){return Do="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Do(e)}function jo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Do(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Do(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Do(o)?o:String(o)),n)}var i,o}function Fo(){return Fo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uo(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},Fo.apply(this,arguments)}function No(e,t){return No=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},No(e,t)}function Zo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Uo(e);if(t){var i=Uo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Do(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Uo(e){return Uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Uo(e)}var Qo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&No(e,t)}(a,e);var t,r,n,i=Zo(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).vectorRenderer_=new ko.Z(e),t.layerImageRatio_=e.getImageRatio(),t.coordinateToVectorPixelTransform_=(0,o.Ue)(),t.renderedPixelToCoordinateTransform_=null,t}return t=a,r=[{key:"disposeInternal",value:function(){this.vectorRenderer_.dispose(),Fo(Uo(a.prototype),"disposeInternal",this).call(this)}},{key:"getFeatures",value:function(e){if(!this.vectorRenderer_)return Promise.resolve([]);var t=(0,o.nn)(this.coordinateToVectorPixelTransform_,(0,o.nn)(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)}},{key:"handleFontsChanged",value:function(){this.vectorRenderer_.handleFontsChanged()}},{key:"prepareFrame",value:function(e){var t=this,r=e.pixelRatio,n=e.viewState,i=n.resolution,a=e.viewHints,s=this.vectorRenderer_,l=e.extent;1!==this.layerImageRatio_&&(l=l.slice(0),(0,h.H9)(l,this.layerImageRatio_));var u=(0,h.dz)(l)/i,c=(0,h.Cr)(l)/i;if(!a[so.Z.ANIMATING]&&!a[so.Z.INTERACTING]&&!(0,h.xb)(l)){s.useContainer(null,null);var f=s.context,p=e.layerStatesArray[e.layerIndex],d=Object.assign({},p,{opacity:1}),y=Object.assign({},e,{declutterTree:new Bo(9),extent:l,size:[u,c],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[d],layerIndex:0}),g=!0,m=new Qr(l,i,r,f.canvas,(function(e){s.prepareFrame(y)&&s.replayGroupChanged&&(s.clipping=!1,s.renderFrame(y,null)&&(s.renderDeclutter(y),g=!1),e())}));m.addEventListener(L.Z.CHANGE,(function(){if(m.getState()===Lr.Z.LOADED){t.image_=g?null:m;var e=m.getPixelRatio(),i=(0,Lo.D)(m.getResolution())*r/e;t.renderedResolution=i,t.coordinateToVectorPixelTransform_=(0,o.qC)(t.coordinateToVectorPixelTransform_,u/2,c/2,1/i,-1/i,0,-n.center[0],-n.center[1])}})),m.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}},{key:"preRender",value:function(){}},{key:"postRender",value:function(){}},{key:"renderDeclutter",value:function(){}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,i){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,r,n,i):Fo(Uo(a.prototype),"forEachFeatureAtCoordinate",this).call(this,e,t,r,n,i)}}],r&&jo(t.prototype,r),n&&jo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Ro.Z);const Go=Qo;var zo=__webpack_require__(96587),qo=__webpack_require__(53099),Vo=__webpack_require__(22345),Wo=__webpack_require__(14752),Ko=__webpack_require__(86357),Ho=__webpack_require__(66327);function Yo(e){return Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yo(e)}function Xo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Yo(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Yo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Yo(o)?o:String(o)),n)}var i,o}function Jo(e,t){return Jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Jo(e,t)}function $o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ea(e);if(t){var i=ea(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Yo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ea(e){return ea=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ea(e)}var ta=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jo(e,t)}(o,e);var t,r,n,i=$o(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{};var r=Object.assign({},e);return delete r.imageRatio,(t=i.call(this,r)).imageRatio_=void 0!==e.imageRatio?e.imageRatio:1,t}return t=o,(r=[{key:"getImageRatio",value:function(){return this.imageRatio_}},{key:"createRenderer",value:function(){return new Go(this)}}])&&Xo(t.prototype,r),n&&Xo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(oo.Z);const ra=ta;var na=__webpack_require__(54115),ia=__webpack_require__(86879);function oa(e){return oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oa(e)}function aa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==oa(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==oa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===oa(o)?o:String(o)),n)}var i,o}var sa="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_screenToWorldMatrix;\nuniform vec2 u_viewportSizePx;\nuniform float u_pixelRatio;\nuniform float u_globalAlpha;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\nuniform float u_rotation;\nuniform vec4 u_renderExtent;\nuniform mediump int u_hitDetection;\n\nconst float PI = 3.141592653589793238;\nconst float TWO_PI = 2.0 * PI;\n",la={"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"},ua=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_="vec2(".concat((0,ia.I2)(la["circle-radius"])," + ").concat((0,ia.I2)(.5*la["circle-stroke-width"]),")"),this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=(0,ia.g$)(la["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=(0,ia.I2)(la["stroke-width"]),this.strokeColorExpression_=(0,ia.g$)(la["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=(0,ia.JB)("round"),this.strokeJoinExpression_=(0,ia.JB)("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=(0,ia.g$)(la["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}var t,r,n;return t=e,(r=[{key:"addUniform",value:function(e){return this.uniforms_.push(e),this}},{key:"addAttribute",value:function(e){return this.attributes_.push(e),this}},{key:"addVarying",value:function(e,t,r){return this.varyings_.push({name:e,type:t,expression:r}),this}},{key:"setSymbolSizeExpression",value:function(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}},{key:"getSymbolSizeExpression",value:function(){return this.symbolSizeExpression_}},{key:"setSymbolRotationExpression",value:function(e){return this.symbolRotationExpression_=e,this}},{key:"setSymbolOffsetExpression",value:function(e){return this.symbolOffsetExpression_=e,this}},{key:"getSymbolOffsetExpression",value:function(){return this.symbolOffsetExpression_}},{key:"setSymbolColorExpression",value:function(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}},{key:"getSymbolColorExpression",value:function(){return this.symbolColorExpression_}},{key:"setTextureCoordinateExpression",value:function(e){return this.texCoordExpression_=e,this}},{key:"setFragmentDiscardExpression",value:function(e){return this.discardExpression_=e,this}},{key:"setSymbolRotateWithView",value:function(e){return this.symbolRotateWithView_=e,this}},{key:"setStrokeWidthExpression",value:function(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}},{key:"setStrokeColorExpression",value:function(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}},{key:"setStrokeOffsetExpression",value:function(e){return this.strokeOffsetExpression_=e,this}},{key:"setStrokeCapExpression",value:function(e){return this.strokeCapExpression_=e,this}},{key:"setStrokeJoinExpression",value:function(e){return this.strokeJoinExpression_=e,this}},{key:"setStrokeMiterLimitExpression",value:function(e){return this.strokeMiterLimitExpression_=e,this}},{key:"setStrokeDistanceFieldExpression",value:function(e){return this.strokeDistanceFieldExpression_=e,this}},{key:"setFillColorExpression",value:function(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}},{key:"addVertexShaderFunction",value:function(e){this.vertexShaderFunctions_.includes(e)||this.vertexShaderFunctions_.push(e)}},{key:"addFragmentShaderFunction",value:function(e){this.fragmentShaderFunctions_.includes(e)||this.fragmentShaderFunctions_.push(e)}},{key:"getSymbolVertexShader",value:function(){return this.hasSymbol_?"".concat(sa,"\n").concat(this.uniforms_.map((function(e){return"uniform "+e+";"})).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec4 a_hitColor;\n").concat(this.attributes_.map((function(e){return"attribute "+e+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\nvarying vec4 v_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n").concat(this.varyings_.map((function(e){return"varying "+e.type+" "+e.name+";"})).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),"\nvec2 pxToScreen(vec2 coordPx) {\n  vec2 scaled = coordPx / u_viewportSizePx / 0.5;\n  ").concat(this.symbolRotateWithView_?"scaled = vec2(scaled.x * cos(-u_rotation) - scaled.y * sin(-u_rotation), scaled.x * sin(-u_rotation) + scaled.y * cos(-u_rotation));":"","\n  return scaled;\n}\n\nvec2 screenToPx(vec2 coordScreen) {\n  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;\n}\n\nvoid main(void) {\n  v_quadSizePx = ").concat(this.symbolSizeExpression_,";\n  vec2 halfSizePx = v_quadSizePx * 0.5;\n  vec2 centerOffsetPx = ").concat(this.symbolOffsetExpression_,";\n  vec2 offsetPx = centerOffsetPx;\n  if (a_index == 0.0) {\n    offsetPx -= halfSizePx;\n  } else if (a_index == 1.0) {\n    offsetPx += halfSizePx * vec2(1., -1.);\n  } else if (a_index == 2.0) {\n    offsetPx += halfSizePx;\n  } else {\n    offsetPx += halfSizePx * vec2(-1., 1.);\n  }\n  float angle = ").concat(this.symbolRotationExpression_,";\n  float c = cos(-angle);\n  float s = sin(-angle);\n  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);\n  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  gl_Position = center + vec4(pxToScreen(offsetPx), 0., 0.);\n  vec4 texCoord = ").concat(this.texCoordExpression_,";\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  v_hitColor = a_hitColor;\n  v_angle = angle;\n  ").concat(this.symbolRotateWithView_?"v_angle += u_rotation;":"","\n  c = cos(-v_angle);\n  s = sin(-v_angle);\n  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); \n  v_centerPx = screenToPx(center.xy) + centerOffsetPx;\n").concat(this.varyings_.map((function(e){return"  "+e.name+" = "+e.expression+";"})).join("\n"),"\n}"):null}},{key:"getSymbolFragmentShader",value:function(){return this.hasSymbol_?"".concat(sa,"\n").concat(this.uniforms_.map((function(e){return"uniform "+e+";"})).join("\n"),"\nvarying vec2 v_texCoord;\nvarying vec4 v_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n").concat(this.varyings_.map((function(e){return"varying "+e.type+" "+e.name+";"})).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\n\nvoid main(void) {\n  if (").concat(this.discardExpression_,") { discard; }\n  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center\n  float c = cos(v_angle);\n  float s = sin(v_angle);\n  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);\n  gl_FragColor = ").concat(this.symbolColorExpression_,";\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.05) { discard; };\n    gl_FragColor = v_hitColor;\n  }\n}"):null}},{key:"getStrokeVertexShader",value:function(){return this.hasStroke_?"".concat(sa,"\n").concat(this.uniforms_.map((function(e){return"uniform "+e+";"})).join("\n"),"\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec2 a_segmentStart;\nattribute vec2 a_segmentEnd;\nattribute float a_parameters;\nattribute float a_distance;\nattribute vec2 a_joinAngles;\nattribute vec4 a_hitColor;\n").concat(this.attributes_.map((function(e){return"attribute "+e+";"})).join("\n"),"\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_hitColor;\nvarying float v_distanceOffsetPx;\n").concat(this.varyings_.map((function(e){return"varying "+e.type+" "+e.name+";"})).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),'\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvec4 pxToScreen(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return vec4(screenPos, 0.0, 1.0);\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nvec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {\n  float halfAngle = joinAngle / 2.0;\n  float c = cos(halfAngle);\n  float s = sin(halfAngle);\n  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);\n  float length = 1.0 / s;\n  return angleBisectorNormal * length;\n}\n\nvec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {\n  // if on a cap or the join angle is too high, offset the line along the segment normal\n  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {\n    return point - normal * offsetPx;\n  }\n  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)\n  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;\n}\n\nvoid main(void) {\n  v_angleStart = a_joinAngles.x;\n  v_angleEnd = a_joinAngles.y;\n  float vertexNumber = a_parameters;\n\n  float lineWidth = ').concat(this.strokeWidthExpression_,";\n  float lineOffsetPx = ").concat(this.strokeOffsetExpression_,";\n\n  // compute segment start/end in px with offset\n  vec2 segmentStartPx = worldToPx(a_segmentStart);\n  vec2 segmentEndPx = worldToPx(a_segmentEnd);\n  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);\n  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);\n  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),\n  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);\n  \n  // compute current vertex position\n  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;\n  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;\n  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;\n  vec2 joinDirection;\n  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;\n  // if angle is too high, do not make a proper join\n  if (cos(angle) > 0.985 || isCap(angle)) {\n    joinDirection = normalPx * normalDir - tangentPx * tangentDir;\n  } else {\n    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);\n  }\n  positionPx = positionPx + joinDirection * lineWidth * 0.5;\n  gl_Position = pxToScreen(positionPx);\n\n  v_segmentStart = segmentStartPx;\n  v_segmentEnd = segmentEndPx;\n  v_width = lineWidth;\n  v_hitColor = a_hitColor;\n  v_distanceOffsetPx = a_distance / u_resolution;\n").concat(this.varyings_.map((function(e){return"  "+e.name+" = "+e.expression+";"})).join("\n"),"\n}"):null}},{key:"getStrokeFragmentShader",value:function(){return this.hasStroke_?"".concat(sa,"\n").concat(this.uniforms_.map((function(e){return"uniform "+e+";"})).join("\n"),"\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_hitColor;\nvarying float v_distanceOffsetPx;\n").concat(this.varyings_.map((function(e){return"varying "+e.type+" "+e.name+";"})).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\n\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nfloat segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  vec2 tangent = normalize(end - start);\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 startToPoint = point - start;\n  return abs(dot(startToPoint, normal)) - width * 0.5;\n}\n\nfloat buttCapDistanceField(vec2 point, vec2 start, vec2 end) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  return dot(startToPoint, -tangent);\n}\n\nfloat squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return buttCapDistanceField(point, start, end) - width * 0.5;\n}\n\nfloat roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment\n  return length(point - start) - width * 0.5 - onSegment;\n}\n\nfloat roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  float c = cos(joinAngle * 0.5);\n  float s = sin(joinAngle * 0.5);\n  float direction = -sign(sin(joinAngle));\n  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);\n  float radius = width * 0.5 * s;\n  return dot(startToPoint, bisector * direction) - radius;\n}\n\nfloat miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  if (cos(joinAngle) > 0.985) { // avoid risking a division by zero\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  float miterLength = 1. / sin(joinAngle * 0.5);\n  float miterLimit = ").concat(this.strokeMiterLimitExpression_,";\n  if (miterLength > miterLimit) {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  return -1000.;\n}\n\nfloat capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {\n   if (capType == ").concat((0,ia.JB)("butt"),") {\n    return buttCapDistanceField(point, start, end);\n  } else if (capType == ").concat((0,ia.JB)("square"),") {\n    return squareCapDistanceField(point, start, end, width);\n  }\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {\n  if (joinType == ").concat((0,ia.JB)("bevel"),") {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  } else if (joinType == ").concat((0,ia.JB)("miter"),") {\n    return miterJoinDistanceField(point, start, end, width, joinAngle);\n  }\n  return roundJoinDistanceField(point, start, end, width);\n}\n\nfloat computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {\n  if (isCap(joinAngle)) {\n    return capDistanceField(point, start, end, width, capType);\n  }\n  return joinDistanceField(point, start, end, width, joinAngle, joinType);\n}\n\nvoid main(void) {\n  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 v_worldPos = pxToWorld(currentPoint);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      v_worldPos[0] < u_renderExtent[0] ||\n      v_worldPos[1] < u_renderExtent[1] ||\n      v_worldPos[0] > u_renderExtent[2] ||\n      v_worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (").concat(this.discardExpression_,") { discard; }\n\n  float segmentLength = length(v_segmentEnd - v_segmentStart);\n  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;\n  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);\n  vec2 startToPoint = currentPoint - v_segmentStart;\n  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; \n  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));\n  vec4 color = ").concat(this.strokeColorExpression_," * u_globalAlpha;\n  float capType = ").concat(this.strokeCapExpression_,";\n  float joinType = ").concat(this.strokeJoinExpression_,";\n  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);\n  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);\n  float distance = max(\n    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),\n    max(segmentStartDistance, segmentEndDistance)\n  );\n  distance = max(distance, ").concat(this.strokeDistanceFieldExpression_,");\n  gl_FragColor = color * smoothstep(0., -1., distance);\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_hitColor;\n  }\n}"):null}},{key:"getFillVertexShader",value:function(){return this.hasFill_?"".concat(sa,"\n").concat(this.uniforms_.map((function(e){return"uniform "+e+";"})).join("\n"),"\nattribute vec2 a_position;\nattribute vec4 a_hitColor;\n").concat(this.attributes_.map((function(e){return"attribute "+e+";"})).join("\n"),"\nvarying vec4 v_hitColor;\n").concat(this.varyings_.map((function(e){return"varying "+e.type+" "+e.name+";"})).join("\n"),"\n").concat(this.vertexShaderFunctions_.join("\n"),"\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n").concat(this.varyings_.map((function(e){return"  "+e.name+" = "+e.expression+";"})).join("\n"),"\n}"):null}},{key:"getFillFragmentShader",value:function(){return this.hasFill_?"".concat(sa,"\n").concat(this.uniforms_.map((function(e){return"uniform "+e+";"})).join("\n"),"\nvarying vec4 v_hitColor;\n").concat(this.varyings_.map((function(e){return"varying "+e.type+" "+e.name+";"})).join("\n"),"\n").concat(this.fragmentShaderFunctions_.join("\n"),"\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nvoid main(void) {\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 v_worldPos = pxToWorld(gl_FragCoord.xy / u_pixelRatio);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      v_worldPos[0] < u_renderExtent[0] ||\n      v_worldPos[1] < u_renderExtent[1] ||\n      v_worldPos[0] > u_renderExtent[2] ||\n      v_worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (").concat(this.discardExpression_,") { discard; }\n  gl_FragColor = ").concat(this.fillColorExpression_," * u_globalAlpha;\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_hitColor;\n  }\n}"):null}}])&&aa(t.prototype,r),n&&aa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ca(e){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ca(e)}function fa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==ca(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ca(o)?o:String(o)),n)}var i,o}function ha(e,t){return ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ha(e,t)}function pa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=da(e);if(t){var i=da(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ca(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function da(e){return da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},da(e)}var ya="blur",ga="gradient",ma="radius",_a=["#00f","#0ff","#0f0","#ff0","#f00"],va=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ha(e,t)}(o,e);var t,r,n,i=pa(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{};var r=Object.assign({},e);delete r.gradient,delete r.radius,delete r.blur,delete r.weight,(t=i.call(this,r)).gradient_=null,t.addChangeListener(ga,t.handleGradientChanged_),t.setGradient(e.gradient?e.gradient:_a),t.setBlur(void 0!==e.blur?e.blur:15),t.setRadius(void 0!==e.radius?e.radius:8);var n=e.weight?e.weight:"weight";return t.weightFunction_="string"==typeof n?function(e){return e.get(n)}:n,t.setRenderOrder(null),t}return t=o,r=[{key:"getBlur",value:function(){return this.get(ya)}},{key:"getGradient",value:function(){return this.get(ga)}},{key:"getRadius",value:function(){return this.get(ma)}},{key:"handleGradientChanged_",value:function(){this.gradient_=function(e){for(var t=1,r=256,n=(0,ut.E4)(t,r),i=n.createLinearGradient(0,0,t,r),o=1/(e.length-1),a=0,s=e.length;a<s;++a)i.addColorStop(a*o,e[a]);return n.fillStyle=i,n.fillRect(0,0,t,r),n.canvas}(this.getGradient())}},{key:"setBlur",value:function(e){this.set(ya,e)}},{key:"setGradient",value:function(e){this.set(ga,e)}},{key:"setRadius",value:function(e){this.set(ma,e)}},{key:"createRenderer",value:function(){var e=this,t=(new ua).addAttribute("float a_weight").addVarying("v_weight","float","a_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_weight)");return new To(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(t){var r=e.weightFunction_(t);return void 0!==r?(0,A.uZ)(r,0,1):1}}],uniforms:{u_size:function(){return 2*(e.get(ma)+e.get(ya))},u_blurSlope:function(){return e.get(ma)/Math.max(1,e.get(ya))}},hitDetectionEnabled:!0,vertexShader:t.getSymbolVertexShader(),fragmentShader:t.getSymbolFragmentShader(),postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return e.gradient_},u_opacity:function(){return e.getOpacity()}}}]})}},{key:"renderDeclutter",value:function(){}}],r&&fa(t.prototype,r),n&&fa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(oo.Z);const Aa=va;var ba=__webpack_require__(77291),wa=__webpack_require__(45004),Ea=__webpack_require__(27114);function xa(e,t,r){for(var n,i,o,a,s,l,u=[],c=e(0),f=e(1),h=t(c),p=t(f),d=[f,c],y=[p,h],g=[1,0],m={},_=1e5;--_>0&&g.length>0;)o=g.pop(),c=d.pop(),h=y.pop(),(l=o.toString())in m||(u.push(h[0],h[1]),m[l]=!0),a=g.pop(),f=d.pop(),p=y.pop(),i=t(n=e(s=(o+a)/2)),(0,A.rU)(i[0],i[1],h[0],h[1],p[0],p[1])<r?(u.push(p[0],p[1]),m[l=a.toString()]=!0):(g.push(a,s,s,o),y.push(p,i,i,h),d.push(f,n,n,c));return u}function Ia(e){return Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia(e)}function Sa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Ia(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ia(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Ia(o)?o:String(o)),n)}var i,o}function Ca(e,t){return Ca=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ca(e,t)}function Pa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ta(e);if(t){var i=Ta(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ia(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oa(e)}(this,r)}}function Oa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ta(e){return Ta=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ta(e)}var Ma=new $e.Z({color:"rgba(0,0,0,0.2)"}),ka=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600],Ra=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ca(e,t)}(o,e);var t,r,n,i=Pa(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{};var r=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},e);return delete r.maxLines,delete r.strokeStyle,delete r.targetSize,delete r.showLabels,delete r.lonLabelFormatter,delete r.latLabelFormatter,delete r.lonLabelPosition,delete r.latLabelPosition,delete r.lonLabelStyle,delete r.latLabelStyle,delete r.intervals,(t=i.call(this,r)).projection_=null,t.maxLat_=1/0,t.maxLon_=1/0,t.minLat_=-1/0,t.minLon_=-1/0,t.maxX_=1/0,t.maxY_=1/0,t.minX_=-1/0,t.minY_=-1/0,t.targetSize_=void 0!==e.targetSize?e.targetSize:100,t.maxLines_=void 0!==e.maxLines?e.maxLines:100,t.meridians_=[],t.parallels_=[],t.strokeStyle_=void 0!==e.strokeStyle?e.strokeStyle:Ma,t.fromLonLatTransform_=void 0,t.toLonLatTransform_=void 0,t.projectionCenterLonLat_=null,t.bottomLeft_=null,t.bottomRight_=null,t.topLeft_=null,t.topRight_=null,t.meridiansLabels_=null,t.parallelsLabels_=null,e.showLabels&&(t.lonLabelFormatter_=null==e.lonLabelFormatter?$.I8.bind(Oa(t),"EW"):e.lonLabelFormatter,t.latLabelFormatter_=null==e.latLabelFormatter?$.I8.bind(Oa(t),"NS"):e.latLabelFormatter,t.lonLabelPosition_=null==e.lonLabelPosition?0:e.lonLabelPosition,t.latLabelPosition_=null==e.latLabelPosition?1:e.latLabelPosition,t.lonLabelStyleBase_=new J.ZP({text:void 0!==e.lonLabelStyle?e.lonLabelStyle.clone():new Je.Z({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new nt.Z({color:"rgba(0,0,0,1)"}),stroke:new $e.Z({color:"rgba(255,255,255,1)",width:3})})}),t.lonLabelStyle_=function(e){var r=e.get("graticule_label");return t.lonLabelStyleBase_.getText().setText(r),t.lonLabelStyleBase_},t.latLabelStyleBase_=new J.ZP({text:void 0!==e.latLabelStyle?e.latLabelStyle.clone():new Je.Z({font:"12px Calibri,sans-serif",textAlign:"right",fill:new nt.Z({color:"rgba(0,0,0,1)"}),stroke:new $e.Z({color:"rgba(255,255,255,1)",width:3})})}),t.latLabelStyle_=function(e){var r=e.get("graticule_label");return t.latLabelStyleBase_.getText().setText(r),t.latLabelStyleBase_},t.meridiansLabels_=[],t.parallelsLabels_=[],t.addEventListener(Ea.Z.POSTRENDER,t.drawLabels_.bind(Oa(t)))),t.intervals_=void 0!==e.intervals?e.intervals:ka,t.setSource(new H.Z({loader:t.loaderFunction.bind(Oa(t)),strategy:t.strategyFunction.bind(Oa(t)),features:new wa.Z,overlaps:!1,useSpatialIndex:!1,wrapX:e.wrapX})),t.featurePool_=[],t.lineStyle_=new J.ZP({stroke:t.strokeStyle_}),t.loadedExtent_=null,t.renderedExtent_=null,t.renderedResolution_=null,t.setRenderOrder(null),t}return t=o,r=[{key:"strategyFunction",value:function(e,t){var r=e.slice();return this.projection_&&this.getSource().getWrapX()&&(0,h.Cf)(r,this.projection_),this.loadedExtent_&&((0,h.iW)(this.loadedExtent_,r,t)?r=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[r]}},{key:"loaderFunction",value:function(e,t,r){this.loadedExtent_=e;var n=this.getSource(),i=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=(0,h.Ed)(i,e);if(!(this.renderedExtent_&&(0,h.fS)(this.renderedExtent_,o)&&this.renderedResolution_===t||(this.renderedExtent_=o,this.renderedResolution_=t,(0,h.xb)(o)))){var a=(0,h.qg)(o),s=t*t/4;(!this.projection_||!(0,v.OP)(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(o,a,t,s);var l,u=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(u+=this.meridians_.length),this.parallelsLabels_&&(u+=this.parallels_.length);u>this.featurePool_.length;)l=new D.Z,this.featurePool_.push(l);var c=n.getFeaturesCollection();c.clear();var f,p,d=0;for(f=0,p=this.meridians_.length;f<p;++f)(l=this.featurePool_[d++]).setGeometry(this.meridians_[f]),l.setStyle(this.lineStyle_),c.push(l);for(f=0,p=this.parallels_.length;f<p;++f)(l=this.featurePool_[d++]).setGeometry(this.parallels_[f]),l.setStyle(this.lineStyle_),c.push(l)}}},{key:"addMeridian_",value:function(e,t,r,n,i,o){var a=this.getMeridian_(e,t,r,n,o);if((0,h.kK)(a.getExtent(),i)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(e);o in this.meridiansLabels_?this.meridiansLabels_[o].text=s:this.meridiansLabels_[o]={geom:new q.Z([]),text:s}}this.meridians_[o++]=a}return o}},{key:"addParallel_",value:function(e,t,r,n,i,o){var a=this.getParallel_(e,t,r,n,o);if((0,h.kK)(a.getExtent(),i)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(e);o in this.parallelsLabels_?this.parallelsLabels_[o].text=s:this.parallelsLabels_[o]={geom:new q.Z([]),text:s}}this.parallels_[o++]=a}return o}},{key:"drawLabels_",value:function(e){var t=e.frameState.viewState.rotation,r=e.frameState.viewState.resolution,n=e.frameState.size,i=e.frameState.extent,o=(0,h.qg)(i),a=i;if(t){var s=n[0]*r,l=n[1]*r;a=[o[0]-s/2,o[1]-l/2,o[0]+s/2,o[1]+l/2]}var u=0,c=0,f=this.latLabelPosition_<.5,p=this.projection_.getExtent(),d=(0,h.dz)(p);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,h.r4)(p,i)&&(u=Math.floor((i[0]-p[0])/d),c=Math.ceil((i[2]-p[2])/d),f=f!==Math.abs(t)>Math.PI/2);for(var y=(0,C.u3)(e),g=u;g<=c;++g){var m=this.meridians_.length+this.parallels_.length,_=void 0,v=void 0,A=void 0,b=void 0;if(this.meridiansLabels_)for(v=0,A=this.meridiansLabels_.length;v<A;++v){var w=this.meridians_[v];if(t||0!==g){var E=w.clone();E.translate(g*d,0),E.rotate(-t,o),(b=this.getMeridianPoint_(E,a,v)).rotate(t,o)}else b=this.getMeridianPoint_(w,i,v);(_=this.featurePool_[m++]).setGeometry(b),_.set("graticule_label",this.meridiansLabels_[v].text),y.drawFeature(_,this.lonLabelStyle_(_))}if(this.parallelsLabels_&&(g===u&&f||g===c&&!f))for(v=0,A=this.parallels_.length;v<A;++v){var x=this.parallels_[v];if(t||0!==g){var I=x.clone();I.translate(g*d,0),I.rotate(-t,o),(b=this.getParallelPoint_(I,a,v)).rotate(t,o)}else b=this.getParallelPoint_(x,i,v);(_=this.featurePool_[m++]).setGeometry(b),_.set("graticule_label",this.parallelsLabels_[v].text),y.drawFeature(_,this.latLabelStyle_(_))}}}},{key:"createGraticule_",value:function(e,t,r,n){var i=this.getInterval_(r);if(-1==i)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o=!1,a=this.projection_.getExtent(),s=(0,h.dz)(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,h.r4)(a,e)&&((0,h.dz)(e)>=s?(e[0]=a[0],e[2]=a[2]):o=!0);var l=[(0,A.uZ)(t[0],this.minX_,this.maxX_),(0,A.uZ)(t[1],this.minY_,this.maxY_)],u=this.toLonLatTransform_(l);isNaN(u[1])&&(u[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var c,f,p,d,y=(0,A.uZ)(u[0],this.minLon_,this.maxLon_),g=(0,A.uZ)(u[1],this.minLat_,this.maxLat_),m=this.maxLines_,_=e;o||(_=[(0,A.uZ)(e[0],this.minX_,this.maxX_),(0,A.uZ)(e[1],this.minY_,this.maxY_),(0,A.uZ)(e[2],this.minX_,this.maxX_),(0,A.uZ)(e[3],this.minY_,this.maxY_)]);var v=(0,h.Ne)(_,this.toLonLatTransform_,void 0,8),b=v[3],w=v[2],E=v[1],x=v[0];if(o||((0,h.b8)(_,this.bottomLeft_)&&(x=this.minLon_,E=this.minLat_),(0,h.b8)(_,this.bottomRight_)&&(w=this.maxLon_,E=this.minLat_),(0,h.b8)(_,this.topLeft_)&&(x=this.minLon_,b=this.maxLat_),(0,h.b8)(_,this.topRight_)&&(w=this.maxLon_,b=this.maxLat_),b=(0,A.uZ)(b,g,this.maxLat_),w=(0,A.uZ)(w,y,this.maxLon_),E=(0,A.uZ)(E,this.minLat_,g),x=(0,A.uZ)(x,this.minLon_,y)),y=Math.floor(y/i)*i,d=(0,A.uZ)(y,this.minLon_,this.maxLon_),f=this.addMeridian_(d,E,b,n,e,0),c=0,o)for(;(d-=i)>=x&&c++<m;)f=this.addMeridian_(d,E,b,n,e,f);else for(;d!=this.minLon_&&c++<m;)d=Math.max(d-i,this.minLon_),f=this.addMeridian_(d,E,b,n,e,f);if(d=(0,A.uZ)(y,this.minLon_,this.maxLon_),c=0,o)for(;(d+=i)<=w&&c++<m;)f=this.addMeridian_(d,E,b,n,e,f);else for(;d!=this.maxLon_&&c++<m;)d=Math.min(d+i,this.maxLon_),f=this.addMeridian_(d,E,b,n,e,f);for(this.meridians_.length=f,this.meridiansLabels_&&(this.meridiansLabels_.length=f),g=Math.floor(g/i)*i,p=(0,A.uZ)(g,this.minLat_,this.maxLat_),f=this.addParallel_(p,x,w,n,e,0),c=0;p!=this.minLat_&&c++<m;)p=Math.max(p-i,this.minLat_),f=this.addParallel_(p,x,w,n,e,f);for(p=(0,A.uZ)(g,this.minLat_,this.maxLat_),c=0;p!=this.maxLat_&&c++<m;)p=Math.min(p+i,this.maxLat_),f=this.addParallel_(p,x,w,n,e,f);this.parallels_.length=f,this.parallelsLabels_&&(this.parallelsLabels_.length=f)}},{key:"getInterval_",value:function(e){for(var t=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1],n=-1,i=Math.pow(this.targetSize_*e,2),o=[],a=[],s=0,l=this.intervals_.length;s<l;++s){var u=(0,A.uZ)(this.intervals_[s]/2,0,90),c=(0,A.uZ)(r,-90+u,90-u);if(o[0]=t-u,o[1]=c-u,a[0]=t+u,a[1]=c+u,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=i)break;n=this.intervals_[s]}return n}},{key:"getMeridian_",value:function(e,t,r,n,i){var o=function(e,t,r,n,i){var o=(0,v.U2)("EPSG:4326");return xa((function(n){return[e,t+(r-t)*n]}),(0,v.Ck)(o,n),i)}(e,t,r,this.projection_,n),a=this.meridians_[i];return a?(a.setFlatCoordinates("XY",o),a.changed()):(a=new N.Z(o,"XY"),this.meridians_[i]=a),a}},{key:"getMeridianPoint_",value:function(e,t,r){var n=e.getFlatCoordinates(),i=1,o=n.length-1;n[i]>n[o]&&(i=o,o=1);var a=Math.max(t[1],n[i]),s=Math.min(t[3],n[o]),l=(0,A.uZ)(t[1]+Math.abs(t[1]-t[3])*this.lonLabelPosition_,a,s),u=[n[i-1]+(n[o-1]-n[i-1])*(l-n[i])/(n[o]-n[i]),l],c=this.meridiansLabels_[r].geom;return c.setCoordinates(u),c}},{key:"getMeridians",value:function(){return this.meridians_}},{key:"getParallel_",value:function(e,t,r,n,i){var o=function(e,t,r,n,i){var o=(0,v.U2)("EPSG:4326");return xa((function(n){return[t+(r-t)*n,e]}),(0,v.Ck)(o,n),i)}(e,t,r,this.projection_,n),a=this.parallels_[i];return a?(a.setFlatCoordinates("XY",o),a.changed()):a=new N.Z(o,"XY"),a}},{key:"getParallelPoint_",value:function(e,t,r){var n=e.getFlatCoordinates(),i=0,o=n.length-2;n[i]>n[o]&&(i=o,o=0);var a=Math.max(t[0],n[i]),s=Math.min(t[2],n[o]),l=(0,A.uZ)(t[0]+Math.abs(t[0]-t[2])*this.latLabelPosition_,a,s),u=[l,n[i+1]+(n[o+1]-n[i+1])*(l-n[i])/(n[o]-n[i])],c=this.parallelsLabels_[r].geom;return c.setCoordinates(u),c}},{key:"getParallels",value:function(){return this.parallels_}},{key:"updateProjectionInfo_",value:function(e){var t=(0,v.U2)("EPSG:4326"),r=e.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];var n=(0,v.Ck)(e,t);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{var i=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(e,t,r){for(var o=n(e,t,r=r||2),a=0,s=o.length;a<s;a+=r)o[a]<i&&(o[a]+=360);return o}}this.fromLonLatTransform_=(0,v.Ck)(t,e);var o=(0,h.Ne)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=o[0],this.maxX_=o[2],this.minY_=o[1],this.maxY_=o[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,h.qg)(e.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=e}}],r&&Sa(t.prototype,r),n&&Sa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(K.Z);const Ba=Ra;var La=__webpack_require__(40564),Da=__webpack_require__(93931),ja=__webpack_require__(87982);function Fa(e){return Fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fa(e)}function Na(){return Na="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Va(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},Na.apply(this,arguments)}function Za(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Fa(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Fa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Fa(o)?o:String(o)),n)}var i,o}function Ua(e,t,r){return t&&Za(e.prototype,t),r&&Za(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ga(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&za(e,t)}function za(e,t){return za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},za(e,t)}function qa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Va(e);if(t){var i=Va(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Fa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Va(e){return Va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Va(e)}var Wa="translatestart",Ka="translating",Ha="translateend",Ya=function(e){Ga(r,e);var t=qa(r);function r(e,n,i,o,a){var s;return Qa(this,r),(s=t.call(this,e)).features=n,s.coordinate=i,s.startCoordinate=o,s.mapBrowserEvent=a,s}return Ua(r)}(B.ZP);const Xa=function(e){Ga(r,e);var t=qa(r);function r(e){var n,i;if(Qa(this,r),e=e||{},(n=t.call(this,e)).on,n.once,n.un,n.lastCoordinate_=null,n.startCoordinate_=null,n.features_=void 0!==e.features?e.features:null,e.layers&&!n.features_)if("function"==typeof e.layers)i=e.layers;else{var o=e.layers;i=function(e){return o.includes(e)}}else i=Y.uX;return n.layerFilter_=i,n.filter_=e.filter&&!n.features_?e.filter:Y.uX,n.hitTolerance_=e.hitTolerance?e.hitTolerance:0,n.condition_=e.condition?e.condition:X.Bx,n.lastFeature_=null,n.addChangeListener(F.Z.ACTIVE,n.handleActiveChanged_),n}return Ua(r,[{key:"handleDownEvent",value:function(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);var t=this.features_||new wa.Z([this.lastFeature_]);return this.dispatchEvent(new Ya(Wa,t,e.coordinate,this.startCoordinate_,e)),!0}return!1}},{key:"handleUpEvent",value:function(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);var t=this.features_||new wa.Z([this.lastFeature_]);return this.dispatchEvent(new Ya(Ha,t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}},{key:"handleDragEvent",value:function(e){if(this.lastCoordinate_){var t=e.coordinate,r=e.map.getView().getProjection(),n=(0,v.Vs)(t,r),i=(0,v.Vs)(this.lastCoordinate_,r),o=n[0]-i[0],a=n[1]-i[1],s=this.features_||new wa.Z([this.lastFeature_]),l=(0,v.Cs)();s.forEach((function(e){var t=e.getGeometry();l?(t.transform(l,r),t.translate(o,a),t.transform(r,l)):t.translate(o,a),e.setGeometry(t)})),this.lastCoordinate_=t,this.dispatchEvent(new Ya(Ka,s,t,this.startCoordinate_,e))}}},{key:"handleMoveEvent",value:function(e){var t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}},{key:"featuresAtPixel_",value:function(e,t){var r=this;return t.forEachFeatureAtPixel(e,(function(e,t){if(e instanceof D.Z&&r.filter_(e,t)&&(!r.features_||r.features_.getArray().includes(e)))return e}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}},{key:"getHitTolerance",value:function(){return this.hitTolerance_}},{key:"setHitTolerance",value:function(e){this.hitTolerance_=e}},{key:"setMap",value:function(e){var t=this.getMap();Na(Va(r.prototype),"setMap",this).call(this,e),this.updateState_(t)}},{key:"handleActiveChanged_",value:function(){this.updateState_(null)}},{key:"updateState_",value:function(e){var t=this.getMap(),r=this.getActive();t&&r||(t=t||e)&&t.getViewport().classList.remove("ol-grab","ol-grabbing")}}]),r}(V.Z);var Ja=__webpack_require__(14516),$a=__webpack_require__(97845);function es(e){return es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},es(e)}function ts(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==es(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==es(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===es(o)?o:String(o)),n)}var i,o}function rs(e,t){return rs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rs(e,t)}function ns(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=is(e);if(t){var i=is(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===es(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function is(e){return is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},is(e)}var os="snap",as=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rs(e,t)}(o,e);var t,r,n,i=ns(o);function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,e)).vertex=t.vertex,r.vertexPixel=t.vertexPixel,r.feature=t.feature,r}return t=o,r&&ts(t.prototype,r),n&&ts(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(B.ZP);function ss(e){return ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ss(e)}function ls(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return us(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return us(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function us(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==ss(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ss(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ss(o)?o:String(o)),n)}var i,o}function fs(){return fs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ys(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},fs.apply(this,arguments)}function hs(e,t){return hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hs(e,t)}function ps(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ys(e);if(t){var i=ys(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ss(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ds(e)}(this,r)}}function ds(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ys(e){return ys=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ys(e)}function gs(e){return e.feature?e.feature:e.element?e.element:null}var ms=[],_s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hs(e,t)}(a,e);var t,r,n,o=ps(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=e=e||{};return r.handleDownEvent||(r.handleDownEvent=Y.uX),r.stopDown||(r.stopDown=Y.Dv),(t=o.call(this,r)).on,t.once,t.un,t.source_=e.source?e.source:null,t.vertex_=void 0===e.vertex||e.vertex,t.edge_=void 0===e.edge||e.edge,t.features_=e.features?e.features:null,t.featuresListenerKeys_=[],t.featureChangeListenerKeys_={},t.indexedFeaturesExtents_={},t.pendingFeatures_={},t.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,t.rBush_=new $a.Z,t.GEOMETRY_SEGMENTERS_={Point:t.segmentPointGeometry_.bind(ds(t)),LineString:t.segmentLineStringGeometry_.bind(ds(t)),LinearRing:t.segmentLineStringGeometry_.bind(ds(t)),Polygon:t.segmentPolygonGeometry_.bind(ds(t)),MultiPoint:t.segmentMultiPointGeometry_.bind(ds(t)),MultiLineString:t.segmentMultiLineStringGeometry_.bind(ds(t)),MultiPolygon:t.segmentMultiPolygonGeometry_.bind(ds(t)),GeometryCollection:t.segmentGeometryCollectionGeometry_.bind(ds(t)),Circle:t.segmentCircleGeometry_.bind(ds(t))},t}return t=a,(r=[{key:"addFeature",value:function(e,t){t=void 0===t||t;var r=(0,i.sq)(e),n=e.getGeometry();if(n){var o=this.GEOMETRY_SEGMENTERS_[n.getType()];if(o){this.indexedFeaturesExtents_[r]=n.getExtent((0,h.lJ)());var a=[];if(o(a,n),1===a.length)this.rBush_.insert((0,h.hI)(a[0]),{feature:e,segment:a[0]});else if(a.length>1){var s=a.map((function(e){return(0,h.hI)(e)})),l=a.map((function(t){return{feature:e,segment:t}}));this.rBush_.load(s,l)}}}t&&(this.featureChangeListenerKeys_[r]=(0,Ct.oL)(e,L.Z.CHANGE,this.handleFeatureChange_,this))}},{key:"getFeatures_",value:function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e}},{key:"handleEvent",value:function(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);return t&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel,this.dispatchEvent(new as(os,{vertex:e.coordinate,vertexPixel:e.pixel,feature:t.feature}))),fs(ys(a.prototype),"handleEvent",this).call(this,e)}},{key:"handleFeatureAdd_",value:function(e){var t=gs(e);t&&this.addFeature(t)}},{key:"handleFeatureRemove_",value:function(e){var t=gs(e);t&&this.removeFeature(t)}},{key:"handleFeatureChange_",value:function(e){var t=e.target;if(this.handlingDownUpSequence){var r=(0,i.sq)(t);r in this.pendingFeatures_||(this.pendingFeatures_[r]=t)}else this.updateFeature_(t)}},{key:"handleUpEvent",value:function(e){var t=Object.values(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}},{key:"removeFeature",value:function(e,t){var r=void 0===t||t,n=(0,i.sq)(e),o=this.indexedFeaturesExtents_[n];if(o){var a=this.rBush_,s=[];a.forEachInExtent(o,(function(t){e===t.feature&&s.push(t)}));for(var l=s.length-1;l>=0;--l)a.remove(s[l])}r&&((0,Ct.bN)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])}},{key:"setMap",value:function(e){var t=this,r=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();r&&(n.forEach(Ct.bN),n.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(Ct.bN),this.featureChangeListenerKeys_={}),fs(ys(a.prototype),"setMap",this).call(this,e),e&&(this.features_?n.push((0,Ct.oL)(this.features_,Ja.Z.ADD,this.handleFeatureAdd_,this),(0,Ct.oL)(this.features_,Ja.Z.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push((0,Ct.oL)(this.source_,ao.Z.ADDFEATURE,this.handleFeatureAdd_,this),(0,Ct.oL)(this.source_,ao.Z.REMOVEFEATURE,this.handleFeatureRemove_,this)),i.forEach((function(e){return t.addFeature(e)})))}},{key:"snapTo",value:function(e,t,r){var n,i=r.getView().getProjection(),o=(0,v.Vs)(t,i),a=(0,v.Fj)((0,h.f3)((0,h.hI)([o]),r.getView().getResolution()*this.pixelTolerance_),i),s=this.rBush_.getInExtent(a),l=s.length;if(0===l)return null;var u,c=1/0,f=this.pixelTolerance_*this.pixelTolerance_,p=function(){if(n){var t=r.getPixelFromCoordinate(n);if((0,$.bI)(e,t)<=f)return{vertex:n,vertexPixel:[Math.round(t[0]),Math.round(t[1])],feature:u}}return null};if(this.vertex_){for(var d=function(){var e=s[y];"Circle"!==e.feature.getGeometry().getType()&&e.segment.forEach((function(t){var r=(0,v.Vs)(t,i),a=(0,$.bI)(o,r);a<c&&(n=t,c=a,u=e.feature)}))},y=0;y<l;++y)d();var g=p();if(g)return g}if(this.edge_){for(var m=0;m<l;++m){var _=null,A=s[m];if("Circle"===A.feature.getGeometry().getType()){var b=A.feature.getGeometry(),w=(0,v.Cs)();w&&(b=b.clone().transform(w,i)),_=(0,$.Ed)(o,b)}else{var E=ls(A.segment,2),x=E[0],I=E[1];I&&(ms[0]=(0,v.Vs)(x,i),ms[1]=(0,v.Vs)(I,i),_=(0,$.oL)(o,ms))}if(_){var S=(0,$.bI)(o,_);S<c&&(n=(0,v.lO)(_,i),c=S)}}var C=p();if(C)return C}return null}},{key:"updateFeature_",value:function(e){this.removeFeature(e,!1),this.addFeature(e,!1)}},{key:"segmentCircleGeometry_",value:function(e,t){var r=this.getMap().getView().getProjection(),n=t,i=(0,v.Cs)();i&&(n=n.clone().transform(i,r));var o=(0,W.Bb)(n);i&&o.transform(r,i);for(var a=o.getCoordinates()[0],s=0,l=a.length-1;s<l;++s)e.push(a.slice(s,s+2))}},{key:"segmentGeometryCollectionGeometry_",value:function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var i=this.GEOMETRY_SEGMENTERS_[r[n].getType()];i&&i(e,r[n])}}},{key:"segmentLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n)e.push(r.slice(n,n+2))}},{key:"segmentMultiLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a)e.push(o.slice(a,a+2))}},{key:"segmentMultiPointGeometry_",value:function(e,t){t.getCoordinates().forEach((function(t){e.push([t])}))}},{key:"segmentMultiPolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var l=o[a],u=0,c=l.length-1;u<c;++u)e.push(l.slice(u,u+2))}},{key:"segmentPointGeometry_",value:function(e,t){e.push([t.getCoordinates()])}},{key:"segmentPolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a)e.push(o.slice(a,a+2))}}])&&cs(t.prototype,r),n&&cs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(V.Z);const vs=_s;var As=__webpack_require__(98831),bs=__webpack_require__(32259),ws=__webpack_require__(38012),Es=__webpack_require__(38965);function xs(e){return xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xs(e)}function Is(){return Is="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rs(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},Is.apply(this,arguments)}function Ss(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==xs(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==xs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===xs(o)?o:String(o)),n)}var i,o}function Cs(e,t,r){return t&&Ss(e.prototype,t),r&&Ss(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ps(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Os(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ts(e,t)}function Ts(e,t){return Ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ts(e,t)}function Ms(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Rs(e);if(t){var i=Rs(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===xs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ks(e)}(this,r)}}function ks(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rs(e){return Rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rs(e)}var Bs=[0,0,0,0],Ls=[],Ds="modifystart",js="modifyend",Fs=function(e){Os(r,e);var t=Ms(r);function r(e,n,i){var o;return Ps(this,r),(o=t.call(this,e)).features=n,o.mapBrowserEvent=i,o}return Cs(r)}(B.ZP);function Ns(e,t){return e.index-t.index}function Zs(e,t,r){var n=t.geometry;if("Circle"===n.getType()){var i=n;if(1===t.index){var o=(0,v.Cs)();o&&(i=i.clone().transform(o,r));var a=(0,$.bI)(i.getCenter(),(0,v.Vs)(e,r)),s=Math.sqrt(a)-i.getRadius();return s*s}}var l=(0,v.Vs)(e,r);return Ls[0]=(0,v.Vs)(t.segment[0],r),Ls[1]=(0,v.Vs)(t.segment[1],r),(0,$.Bs)(l,Ls)}function Us(e,t,r){var n=t.geometry;if("Circle"===n.getType()&&1===t.index){var i=n,o=(0,v.Cs)();return o&&(i=i.clone().transform(o,r)),(0,v.lO)(i.getClosestPoint((0,v.Vs)(e,r)),r)}var a=(0,v.Vs)(e,r);return Ls[0]=(0,v.Vs)(t.segment[0],r),Ls[1]=(0,v.Vs)(t.segment[1],r),(0,v.lO)((0,$.oL)(a,Ls),r)}const Qs=function(e){Os(r,e);var t=Ms(r);function r(e){var n,i,o;if(Ps(this,r),(n=t.call(this,e)).on,n.once,n.un,n.boundHandleFeatureChange_=n.handleFeatureChange_.bind(ks(n)),n.condition_=e.condition?e.condition:X.Xp,n.defaultDeleteCondition_=function(e){return(0,X.Ko)(e)&&(0,X.Kf)(e)},n.deleteCondition_=e.deleteCondition?e.deleteCondition:n.defaultDeleteCondition_,n.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:X.Bx,n.vertexFeature_=null,n.vertexSegments_=null,n.lastPixel_=[0,0],n.ignoreNextSingleClick_=!1,n.featuresBeingModified_=null,n.rBush_=new $a.Z,n.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,n.snappedToVertex_=!1,n.changingFeature_=!1,n.dragSegments_=[],n.overlay_=new K.Z({source:new H.Z({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=(0,J.Ly)(),function(e,t){return i.Point}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.SEGMENT_WRITERS_={Point:n.writePointGeometry_.bind(ks(n)),LineString:n.writeLineStringGeometry_.bind(ks(n)),LinearRing:n.writeLineStringGeometry_.bind(ks(n)),Polygon:n.writePolygonGeometry_.bind(ks(n)),MultiPoint:n.writeMultiPointGeometry_.bind(ks(n)),MultiLineString:n.writeMultiLineStringGeometry_.bind(ks(n)),MultiPolygon:n.writeMultiPolygonGeometry_.bind(ks(n)),Circle:n.writeCircleGeometry_.bind(ks(n)),GeometryCollection:n.writeGeometryCollectionGeometry_.bind(ks(n))},n.source_=null,n.hitDetection_=null,e.features?o=e.features:e.source&&(n.source_=e.source,o=new wa.Z(n.source_.getFeatures()),n.source_.addEventListener(ao.Z.ADDFEATURE,n.handleSourceAdd_.bind(ks(n))),n.source_.addEventListener(ao.Z.REMOVEFEATURE,n.handleSourceRemove_.bind(ks(n)))),!o)throw new Error("The modify interaction requires features, a source or a layer");return e.hitDetection&&(n.hitDetection_=e.hitDetection),n.features_=o,n.features_.forEach(n.addFeature_.bind(ks(n))),n.features_.addEventListener(Ja.Z.ADD,n.handleFeatureAdd_.bind(ks(n))),n.features_.addEventListener(Ja.Z.REMOVE,n.handleFeatureRemove_.bind(ks(n))),n.lastPointerEvent_=null,n.delta_=[0,0],n.snapToPointer_=void 0===e.snapToPointer?!n.hitDetection_:e.snapToPointer,n}return Cs(r,[{key:"addFeature_",value:function(e){var t=e.getGeometry();if(t){var r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener(L.Z.CHANGE,this.boundHandleFeatureChange_)}},{key:"willModifyFeatures_",value:function(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new wa.Z;for(var r=this.featuresBeingModified_.getArray(),n=0,i=t.length;n<i;++n)for(var o=t[n],a=0,s=o.length;a<s;++a){var l=o[a].feature;l&&!r.includes(l)&&this.featuresBeingModified_.push(l)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new Fs(Ds,this.featuresBeingModified_,e))}}},{key:"removeFeature_",value:function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(L.Z.CHANGE,this.boundHandleFeatureChange_)}},{key:"removeFeatureSegmentData_",value:function(e){var t=this.rBush_,r=[];t.forEach((function(t){e===t.feature&&r.push(t)}));for(var n=r.length-1;n>=0;--n){for(var i=r[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);t.remove(i)}}},{key:"setActive",value:function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Is(Rs(r.prototype),"setActive",this).call(this,e)}},{key:"setMap",value:function(e){this.overlay_.setMap(e),Is(Rs(r.prototype),"setMap",this).call(this,e)}},{key:"getOverlay",value:function(){return this.overlay_}},{key:"handleSourceAdd_",value:function(e){e.feature&&this.features_.push(e.feature)}},{key:"handleSourceRemove_",value:function(e){e.feature&&this.features_.remove(e.feature)}},{key:"handleFeatureAdd_",value:function(e){this.addFeature_(e.element)}},{key:"handleFeatureChange_",value:function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}}},{key:"handleFeatureRemove_",value:function(e){this.removeFeature_(e.element)}},{key:"writePointGeometry_",value:function(e,t){var r=t.getCoordinates(),n={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)}},{key:"writeMultiPointGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:e,geometry:t,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}},{key:"writeLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:e,geometry:t,index:n,segment:o};this.rBush_.insert((0,h.hI)(o),a)}}},{key:"writeMultiLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:e,geometry:t,depth:[n],index:a,segment:l};this.rBush_.insert((0,h.hI)(l),u)}}},{key:"writePolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:e,geometry:t,depth:[n],index:a,segment:l};this.rBush_.insert((0,h.hI)(l),u)}}},{key:"writeMultiPolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var l=o[a],u=0,c=l.length-1;u<c;++u){var f=l.slice(u,u+2),p={feature:e,geometry:t,depth:[a,n],index:u,segment:f};this.rBush_.insert((0,h.hI)(f),p)}}},{key:"writeCircleGeometry_",value:function(e,t){var r=t.getCenter(),n={feature:e,geometry:t,index:0,segment:[r,r]},i={feature:e,geometry:t,index:1,segment:[r,r]},o=[n,i];n.featureSegments=o,i.featureSegments=o,this.rBush_.insert((0,h.HK)(r),n);var a=t,s=(0,v.Cs)();if(s&&this.getMap()){var l=this.getMap().getView().getProjection();a=a.clone().transform(s,l),a=(0,W.Bb)(a).transform(l,s)}this.rBush_.insert(a.getExtent(),i)}},{key:"writeGeometryCollectionGeometry_",value:function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var i=r[n];(0,this.SEGMENT_WRITERS_[i.getType()])(e,i)}}},{key:"createOrUpdateVertexFeature_",value:function(e,t,r){var n=this.vertexFeature_;n?n.getGeometry().setCoordinates(e):(n=new D.Z(new q.Z(e)),this.vertexFeature_=n,this.overlay_.getSource().addFeature(n));return n.set("features",t),n.set("geometries",r),n}},{key:"handleEvent",value:function(e){return!e.originalEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=U.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=U.Z.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==U.Z.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),Is(Rs(r.prototype),"handleEvent",this).call(this,e)&&!t);var t}},{key:"handleDragEvent",value:function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);for(var t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],n=[],i=0,o=this.dragSegments_.length;i<o;++i){var a=this.dragSegments_[i],s=a[0],l=s.feature;r.includes(l)||r.push(l);var u=s.geometry;n.includes(u)||n.push(u);for(var c=s.depth,f=void 0,h=s.segment,p=a[1];t.length<u.getStride();)t.push(h[p][t.length]);switch(u.getType()){case"Point":f=t,h[0]=t,h[1]=t;break;case"MultiPoint":(f=u.getCoordinates())[s.index]=t,h[0]=t,h[1]=t;break;case"LineString":(f=u.getCoordinates())[s.index+p]=t,h[p]=t;break;case"MultiLineString":case"Polygon":(f=u.getCoordinates())[c[0]][s.index+p]=t,h[p]=t;break;case"MultiPolygon":(f=u.getCoordinates())[c[1]][c[0]][s.index+p]=t,h[p]=t;break;case"Circle":if(h[0]=t,h[1]=t,0===s.index)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0;var d=e.map.getView().getProjection(),y=(0,$.TE)((0,v.Vs)(u.getCenter(),d),(0,v.Vs)(t,d)),g=(0,v.Cs)();if(g){var m=u.clone().transform(g,d);m.setRadius(y),y=m.transform(d,g).getRadius()}u.setRadius(y),this.changingFeature_=!1}}f&&this.setGeometryCoordinates_(u,f)}this.createOrUpdateVertexFeature_(t,r,n)}},{key:"handleDownEvent",value:function(e){if(!this.condition_(e))return!1;var t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;var r=this.vertexFeature_;if(r){var n=e.map.getView().getProjection(),o=[],a=r.getGeometry().getCoordinates(),s=(0,h.hI)([a]),l=this.rBush_.getInExtent(s),u={};l.sort(Ns);for(var c=0,f=l.length;c<f;++c){var p=l[c],d=p.segment,y=(0,i.sq)(p.geometry),g=p.depth;if(g&&(y+="-"+g.join("-")),u[y]||(u[y]=new Array(2)),"Circle"!==p.geometry.getType()||1!==p.index)if(!(0,$.fS)(d[0],a)||u[y][0])if(!(0,$.fS)(d[1],a)||u[y][1])(0,i.sq)(d)in this.vertexSegments_&&!u[y][0]&&!u[y][1]&&this.insertVertexCondition_(e)&&o.push(p);else{if(u[y][0]&&0===u[y][0].index){var m=p.geometry.getCoordinates();switch(p.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":m=m[g[1]];case"Polygon":if(p.index!==m[g[0]].length-2)continue}}this.dragSegments_.push([p,1]),u[y][1]=p}else this.dragSegments_.push([p,0]),u[y][0]=p;else{var _=Us(t,p,n);(0,$.fS)(_,a)&&!u[y][0]&&(this.dragSegments_.push([p,0]),u[y][0]=p)}}o.length&&this.willModifyFeatures_(e,[o]);for(var v=o.length-1;v>=0;--v)this.insertVertex_(o[v],a)}return!!this.vertexFeature_}},{key:"handleUpEvent",value:function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],n=r.geometry;if("Circle"===n.getType()){var i=n.getCenter(),o=r.featureSegments[0],a=r.featureSegments[1];o.segment[0]=i,o.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update((0,h.HK)(i),o);var s=n,l=(0,v.Cs)();if(l){var u=e.map.getView().getProjection();s=s.clone().transform(l,u),s=(0,W.Bb)(s).transform(u,l)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update((0,h.hI)(r.segment),r)}return this.featuresBeingModified_&&(this.dispatchEvent(new Fs(js,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}},{key:"handlePointerMove_",value:function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}},{key:"handlePointerAtPixel_",value:function(e,t,r){var n,o,a=this,s=r||t.getCoordinateFromPixel(e),l=t.getView().getProjection();if(this.hitDetection_){var u="object"===xs(this.hitDetection_)?function(e){return e===a.hitDetection_}:void 0;t.forEachFeatureAtPixel(e,(function(e,t,r){r&&(r=new q.Z((0,v.lO)(r.getCoordinates(),l)));var i=r||e.getGeometry();if("Point"===i.getType()&&e instanceof D.Z&&a.features_.getArray().includes(e)){o=i;var s=e.getGeometry().getFlatCoordinates().slice(0,2);n=[{feature:e,geometry:o,segment:[s,s]}]}return!0}),{layerFilter:u})}if(!n){var c=(0,v.dY)((0,h.HK)(s,Bs),l),f=t.getView().getResolution()*this.pixelTolerance_,p=(0,v.Fj)((0,h.f3)(c,f,Bs),l);n=this.rBush_.getInExtent(p)}if(n&&n.length>0){var d=n.sort((function(e,t){return Zs(s,e,l)-Zs(s,t,l)}))[0],y=d.segment,g=Us(s,d,l),m=t.getPixelFromCoordinate(g),_=(0,$.TE)(e,m);if(o||_<=this.pixelTolerance_){var A={};if(A[(0,i.sq)(y)]=!0,this.snapToPointer_||(this.delta_[0]=g[0]-s[0],this.delta_[1]=g[1]-s[1]),"Circle"===d.geometry.getType()&&1===d.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(g,[d.feature],[d.geometry]);else{var b=t.getPixelFromCoordinate(y[0]),w=t.getPixelFromCoordinate(y[1]),E=(0,$.bI)(m,b),x=(0,$.bI)(m,w);_=Math.sqrt(Math.min(E,x)),this.snappedToVertex_=_<=this.pixelTolerance_,this.snappedToVertex_&&(g=E>x?y[1]:y[0]),this.createOrUpdateVertexFeature_(g,[d.feature],[d.geometry]);var I={};I[(0,i.sq)(d.geometry)]=!0;for(var S=1,C=n.length;S<C;++S){var P=n[S].segment;if(!((0,$.fS)(y[0],P[0])&&(0,$.fS)(y[1],P[1])||(0,$.fS)(y[0],P[1])&&(0,$.fS)(y[1],P[0])))break;var O=(0,i.sq)(n[S].geometry);O in I||(I[O]=!0,A[(0,i.sq)(P)]=!0)}}return void(this.vertexSegments_=A)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}},{key:"insertVertex_",value:function(e,t){for(var r,n=e.segment,i=e.feature,o=e.geometry,a=e.depth,s=e.index;t.length<o.getStride();)t.push(0);switch(o.getType()){case"MultiLineString":case"Polygon":(r=o.getCoordinates())[a[0]].splice(s+1,0,t);break;case"MultiPolygon":(r=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,t);break;case"LineString":(r=o.getCoordinates()).splice(s+1,0,t);break;default:return}this.setGeometryCoordinates_(o,r);var l=this.rBush_;l.remove(e),this.updateSegmentIndices_(o,s,a,1);var u={segment:[n[0],t],feature:i,geometry:o,depth:a,index:s};l.insert((0,h.hI)(u.segment),u),this.dragSegments_.push([u,1]);var c={segment:[t,n[1]],feature:i,geometry:o,depth:a,index:s+1};l.insert((0,h.hI)(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0}},{key:"removePoint",value:function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=U.Z.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);var t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new Fs(js,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}},{key:"removeVertex_",value:function(){var e,t,r,n,o,a,s,l,u,c,f,p=this.dragSegments_,d={},y=!1;for(o=p.length-1;o>=0;--o)c=(r=p[o])[0],f=(0,i.sq)(c.feature),c.depth&&(f+="-"+c.depth.join("-")),f in d||(d[f]={}),0===r[1]?(d[f].right=c,d[f].index=c.index):1==r[1]&&(d[f].left=c,d[f].index=c.index+1);for(f in d){switch(u=d[f].right,s=d[f].left,(l=(a=d[f].index)-1)<0&&(l=0),e=t=(n=(c=void 0!==s?s:u).geometry).getCoordinates(),y=!1,n.getType()){case"MultiLineString":t[c.depth[0]].length>2&&(t[c.depth[0]].splice(a,1),y=!0);break;case"LineString":t.length>2&&(t.splice(a,1),y=!0);break;case"MultiPolygon":e=e[c.depth[1]];case"Polygon":(e=e[c.depth[0]]).length>4&&(a==e.length-1&&(a=0),e.splice(a,1),y=!0,0===a&&(e.pop(),e.push(e[0]),l=e.length-1))}if(y){this.setGeometryCoordinates_(n,t);var g=[];if(void 0!==s&&(this.rBush_.remove(s),g.push(s.segment[0])),void 0!==u&&(this.rBush_.remove(u),g.push(u.segment[1])),void 0!==s&&void 0!==u){var m={depth:c.depth,feature:c.feature,geometry:c.geometry,index:l,segment:g};this.rBush_.insert((0,h.hI)(m.segment),m)}this.updateSegmentIndices_(n,a,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),p.length=0}}return y}},{key:"setGeometryCoordinates_",value:function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}},{key:"updateSegmentIndices_",value:function(e,t,r,n){this.rBush_.forEachInExtent(e.getExtent(),(function(i){i.geometry===e&&(void 0===r||void 0===i.depth||(0,He.fS)(i.depth,r))&&i.index>t&&(i.index+=n)}))}}]),r}(V.Z);var Gs=__webpack_require__(54999),zs=__webpack_require__(29909);function qs(e){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qs(e)}function Vs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==qs(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==qs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===qs(o)?o:String(o)),n)}var i,o}function Ws(){return Ws="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xs(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},Ws.apply(this,arguments)}function Ks(e,t){return Ks=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ks(e,t)}function Hs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Xs(e);if(t){var i=Xs(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===qs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ys(e)}(this,r)}}function Ys(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xs(e){return Xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xs(e)}function Js(e){return parseFloat(e)}function $s(e){return function(e){return(0,A.FH)(e,5)}(e).toString()}function el(e,t){return!isNaN(e)&&e!==Js($s(t))}var tl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ks(e,t)}(o,e);var t,r,n,i=Hs(o);function o(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=i.call(this),r=!0===(e=Object.assign({animate:!0,params:["x","y","z","r","l"],replace:!1,prefix:""},e||{})).animate?{duration:250}:e.animate?e.animate:null,t.animationOptions_=r,t.params_=e.params.reduce((function(e,t){return e[t]=!0,e}),{}),t.replace_=e.replace,t.prefix_=e.prefix,t.listenerKeys_=[],t.initial_=!0,t.updateState_=t.updateState_.bind(Ys(t)),t}return t=o,(r=[{key:"getParamName_",value:function(e){return this.prefix_?this.prefix_+e:e}},{key:"get_",value:function(e,t){return e.get(this.getParamName_(t))}},{key:"set_",value:function(e,t,r){t in this.params_&&e.set(this.getParamName_(t),r)}},{key:"delete_",value:function(e,t){t in this.params_&&e.delete(this.getParamName_(t))}},{key:"setMap",value:function(e){var t=this.getMap();Ws(Xs(o.prototype),"setMap",this).call(this,e),e!==t&&(t&&this.unregisterListeners_(t),e&&(this.initial_=!0,this.updateState_(),this.registerListeners_(e)))}},{key:"registerListeners_",value:function(e){this.listenerKeys_.push((0,Ct.oL)(e,zs.Z.MOVEEND,this.updateUrl_,this),(0,Ct.oL)(e.getLayerGroup(),L.Z.CHANGE,this.updateUrl_,this),(0,Ct.oL)(e,"change:layergroup",this.handleChangeLayerGroup_,this)),this.replace_||addEventListener("popstate",this.updateState_)}},{key:"unregisterListeners_",value:function(e){for(var t=0,r=this.listenerKeys_.length;t<r;++t)(0,Ct.bN)(this.listenerKeys_[t]);this.listenerKeys_.length=0,this.replace_||removeEventListener("popstate",this.updateState_);var n=new URL(window.location.href),i=n.searchParams;this.delete_(i,"x"),this.delete_(i,"y"),this.delete_(i,"z"),this.delete_(i,"r"),this.delete_(i,"l"),window.history.replaceState(null,"",n)}},{key:"handleChangeLayerGroup_",value:function(){var e=this.getMap();e&&(this.unregisterListeners_(e),this.registerListeners_(e),this.initial_=!0,this.updateUrl_())}},{key:"updateState_",value:function(){var e=this.getMap();if(e){var t=e.getView();if(t){var r=new URL(window.location.href).searchParams,n=!1,i={},o=Js(this.get_(r,"z"));"z"in this.params_&&el(o,t.getZoom())&&(n=!0,i.zoom=o);var a=Js(this.get_(r,"r"));"r"in this.params_&&el(a,t.getRotation())&&(n=!0,i.rotation=a);var s,l,u=[Js(this.get_(r,"x")),Js(this.get_(r,"y"))];("x"in this.params_||"y"in this.params_)&&(s=u,l=t.getCenter(),el(s[0],l[0])||el(s[1],l[1]))&&(n=!0,i.center=u),n&&(!this.initial_&&this.animationOptions_?t.animate(Object.assign(i,this.animationOptions_)):(i.center&&t.setCenter(i.center),"zoom"in i&&t.setZoom(i.zoom),"rotation"in i&&t.setRotation(i.rotation)));var c=e.getAllLayers(),f=this.get_(r,"l");if("l"in this.params_&&f&&f.length===c.length)for(var h=0,p=c.length;h<p;++h){var d=parseInt(f[h]);if(!isNaN(d)){var y=Boolean(d),g=c[h];g.getVisible()!==y&&g.setVisible(y)}}}}}},{key:"updateUrl_",value:function(){var e=this.getMap();if(e){var t=e.getView();if(t){var r=this.initial_;this.initial_=!1;for(var n=t.getCenter(),i=t.getZoom(),o=t.getRotation(),a=e.getAllLayers(),s=new Array(a.length),l=0,u=a.length;l<u;++l)s[l]=a[l].getVisible()?"1":"0";var c=new URL(window.location.href),f=c.searchParams;this.set_(f,"x",$s(n[0])),this.set_(f,"y",$s(n[1])),this.set_(f,"z",$s(i)),this.set_(f,"r",$s(o)),this.set_(f,"l",s.join("")),c.href!==window.location.href&&(r||this.replace_?window.history.replaceState(history.state,"",c):window.history.pushState(null,"",c))}}}}])&&Vs(t.prototype,r),n&&Vs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Gs.ZP);const rl=tl;var nl=__webpack_require__(83460),il=__webpack_require__(35696);function ol(e){return ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ol(e)}function al(){return al="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pl(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},al.apply(this,arguments)}function sl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==ol(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ol(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ol(o)?o:String(o)),n)}var i,o}function ll(e,t,r){return t&&sl(e.prototype,t),r&&sl(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ul(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fl(e,t)}function fl(e,t){return fl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fl(e,t)}function hl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=pl(e);if(t){var i=pl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ol(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function pl(e){return pl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pl(e)}var dl="extentchanged",yl=function(e){cl(r,e);var t=hl(r);function r(e){var n;return ul(this,r),(n=t.call(this,dl)).extent=e,n}return ll(r)}(B.ZP);function gl(){var e=(0,J.Ly)();return function(t,r){return e.Point}}function ml(e){return function(t){return(0,h.hI)([e,t])}}function _l(e,t){return e[0]==t[0]?function(r){return(0,h.hI)([e,[r[0],t[1]]])}:e[1]==t[1]?function(r){return(0,h.hI)([e,[t[0],r[1]]])}:null}const vl=function(e){cl(r,e);var t=hl(r);function r(e){var n,i;return ul(this,r),e=e||{},(n=t.call(this,e)).on,n.once,n.un,n.condition_=e.condition?e.condition:X.Bx,n.extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,e||(e={}),n.extentOverlay_=new K.Z({source:new H.Z({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(i=(0,J.Ly)(),function(e,t){return i.Polygon}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new K.Z({source:new H.Z({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:gl(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&n.setExtent(e.extent),n}return ll(r,[{key:"snapToVertex_",value:function(e,t){var r=t.getCoordinateFromPixelInternal(e),n=this.getExtentInternal();if(n){var i=function(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}(n);i.sort((function(e,t){return(0,$.Bs)(r,e)-(0,$.Bs)(r,t)}));var o=i[0],a=(0,$.oL)(r,o),s=t.getPixelFromCoordinateInternal(a);if((0,$.TE)(e,s)<=this.pixelTolerance_){var l=t.getPixelFromCoordinateInternal(o[0]),u=t.getPixelFromCoordinateInternal(o[1]),c=(0,$.bI)(s,l),f=(0,$.bI)(s,u),h=Math.sqrt(Math.min(c,f));return this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(a=c>f?o[1]:o[0]),a}}return null}},{key:"handlePointerMove_",value:function(e){var t=e.pixel,r=e.map,n=this.snapToVertex_(t,r);n||(n=r.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(n)}},{key:"createOrUpdateExtentFeature_",value:function(e){var t=this.extentFeature_;return t?e?t.setGeometry((0,W.oJ)(e)):t.setGeometry(void 0):(t=e?new D.Z((0,W.oJ)(e)):new D.Z({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t}},{key:"createOrUpdatePointerFeature_",value:function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new D.Z(new q.Z(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t));return t}},{key:"handleEvent",value:function(e){return!e.originalEvent||!this.condition_(e)||(e.type!=U.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),al(pl(r.prototype),"handleEvent",this).call(this,e),!1)}},{key:"handleDownEvent",value:function(e){var t=e.pixel,r=e.map,n=this.getExtentInternal(),i=this.snapToVertex_(t,r),o=function(e){var t=null,r=null;return e[0]==n[0]?t=n[2]:e[0]==n[2]&&(t=n[0]),e[1]==n[1]?r=n[3]:e[1]==n[3]&&(r=n[1]),null!==t&&null!==r?[t,r]:null};if(i&&n){var a=i[0]==n[0]||i[0]==n[2]?i[0]:null,s=i[1]==n[1]||i[1]==n[3]?i[1]:null;null!==a&&null!==s?this.pointerHandler_=ml(o(i)):null!==a?this.pointerHandler_=_l(o([a,n[1]]),o([a,n[3]])):null!==s&&(this.pointerHandler_=_l(o([n[0],s]),o([n[2],s])))}else i=r.getCoordinateFromPixelInternal(t),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=ml(i);return!0}},{key:"handleDragEvent",value:function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}}},{key:"handleUpEvent",value:function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==(0,h.bg)(t)||this.setExtent(null),!1}},{key:"setMap",value:function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),al(pl(r.prototype),"setMap",this).call(this,e)}},{key:"getExtent",value:function(){return(0,v.Fj)(this.getExtentInternal(),this.getMap().getView().getProjection())}},{key:"getExtentInternal",value:function(){return this.extent_}},{key:"setExtent",value:function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new yl(this.extent_))}}]),r}(V.Z);var Al=__webpack_require__(53956);function bl(e){return bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bl(e)}function wl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==bl(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==bl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===bl(o)?o:String(o)),n)}var i,o}function El(e,t){return El=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},El(e,t)}function xl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Il(e);if(t){var i=Il(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Il(e){return Il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Il(e)}var Sl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&El(e,t)}(o,e);var t,r,n,i=xl(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this,e)).condition_=e.condition?e.condition:X.vY,t.lastAngle_=void 0,t.lastMagnitude_=void 0,t.lastScaleDelta_=0,t.duration_=void 0!==e.duration?e.duration:400,t}return t=o,(r=[{key:"handleDragEvent",value:function(e){if((0,X.QL)(e)){var t=e.map,r=t.getSize(),n=e.pixel,i=n[0]-r[0]/2,o=r[1]/2-n[1],a=Math.atan2(o,i),s=Math.sqrt(i*i+o*o),l=t.getView();if(void 0!==this.lastAngle_){var u=this.lastAngle_-a;l.adjustRotationInternal(u)}this.lastAngle_=a,void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}}},{key:"handleUpEvent",value:function(e){if(!(0,X.QL)(e))return!0;var t=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,r),this.lastScaleDelta_=0,!1}},{key:"handleDownEvent",value:function(e){return!!(0,X.QL)(e)&&!!this.condition_(e)&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)}}])&&wl(t.prototype,r),n&&wl(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(V.Z);const Cl=Sl;var Pl=__webpack_require__(48535),Ol=__webpack_require__(60320),Tl=__webpack_require__(28632);function Ml(e){return Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(e)}function kl(){return kl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nl(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},kl.apply(this,arguments)}function Rl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Ml(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ml(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Ml(o)?o:String(o)),n)}var i,o}function Bl(e,t,r){return t&&Rl(e.prototype,t),r&&Rl(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ll(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jl(e,t)}function jl(e,t){return jl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jl(e,t)}function Fl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Nl(e);if(t){var i=Nl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ml(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Nl(e){return Nl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nl(e)}var Zl="addfeatures",Ul=function(e){Dl(r,e);var t=Fl(r);function r(e,n,i,o){var a;return Ll(this,r),(a=t.call(this,e)).features=i,a.file=n,a.projection=o,a}return Bl(r)}(B.ZP);const Ql=function(e){Dl(r,e);var t=Fl(r);function r(e){var n;Ll(this,r),e=e||{},(n=t.call(this,{handleEvent:Y.uX})).on,n.once,n.un,n.readAsBuffer_=!1,n.formats_=[];for(var i=e.formatConstructors?e.formatConstructors:[],o=0,a=i.length;o<a;++o){var s=i[o];"function"==typeof s&&(s=new s),n.formats_.push(s),n.readAsBuffer_=n.readAsBuffer_||"arraybuffer"===s.getType()}return n.projection_=e.projection?(0,v.U2)(e.projection):null,n.dropListenKeys_=null,n.source_=e.source||null,n.target=e.target?e.target:null,n}return Bl(r,[{key:"handleResult_",value:function(e,t){var r,n=t.target.result,i=this.getMap(),o=this.projection_;o||((o=(0,v.Cs)())||(o=i.getView().getProjection()));for(var a=this.formats_,s=0,l=a.length;s<l;++s){var u=a[s],c=n;this.readAsBuffer_&&"arraybuffer"!==u.getType()&&(void 0===r&&(r=(new TextDecoder).decode(n)),c=r);var f=this.tryReadFeatures_(u,c,{featureProjection:o});if(f&&f.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(f)),this.dispatchEvent(new Ul(Zl,e,f,o));break}}}},{key:"registerListeners_",value:function(){var e=this.getMap();if(e){var t=this.target?this.target:e.getViewport();this.dropListenKeys_=[(0,Ct.oL)(t,L.Z.DROP,this.handleDrop,this),(0,Ct.oL)(t,L.Z.DRAGENTER,this.handleStop,this),(0,Ct.oL)(t,L.Z.DRAGOVER,this.handleStop,this),(0,Ct.oL)(t,L.Z.DROP,this.handleStop,this)]}}},{key:"setActive",value:function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),kl(Nl(r.prototype),"setActive",this).call(this,e)}},{key:"setMap",value:function(e){this.unregisterListeners_(),kl(Nl(r.prototype),"setMap",this).call(this,e),this.getActive()&&this.registerListeners_()}},{key:"tryReadFeatures_",value:function(e,t,r){try{return e.readFeatures(t,r)}catch(e){return null}}},{key:"unregisterListeners_",value:function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(Ct.bN),this.dropListenKeys_=null)}},{key:"handleDrop",value:function(e){for(var t=e.dataTransfer.files,r=0,n=t.length;r<n;++r){var i=t.item(r),o=new FileReader;o.addEventListener(L.Z.LOAD,this.handleResult_.bind(this,i)),this.readAsBuffer_?o.readAsArrayBuffer(i):o.readAsText(i)}}},{key:"handleStop",value:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}}]),r}(Gs.ZP);var Gl=__webpack_require__(62953);function zl(e){return zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zl(e)}function ql(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==zl(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==zl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===zl(o)?o:String(o)),n)}var i,o}function Vl(e,t){return Vl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vl(e,t)}function Wl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Kl(e);if(t){var i=Kl(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Kl(e){return Kl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kl(e)}var Hl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vl(e,t)}(o,e);var t,r,n,i=Wl(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=e||{};return t=i.call(this,r),r.stopDown&&(t.stopDown=r.stopDown),t.scaleDeltaByPixel_=r.delta?r.delta:.01,t.duration_=void 0!==r.duration?r.duration:250,t.handlingDownUpSequence_=!1,t.handlingDoubleDownSequence_=!1,t.doubleTapTimeoutId_=void 0,t.trackedPointers_={},t.targetPointers=[],t}return t=o,(r=[{key:"handleEvent",value:function(e){if(!e.originalEvent)return!0;var t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence_){if(e.type==U.Z.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==U.Z.POINTERUP){var r=this.handleUpEvent(e);this.handlingDownUpSequence_=r}}else if(e.type==U.Z.POINTERDOWN)if(this.handlingDoubleDownSequence_){this.handlingDoubleDownSequence_=!1;var n=this.handleDownEvent(e);this.handlingDownUpSequence_=n,t=this.stopDown(n)}else t=this.stopDown(!1),this.waitForDblTap_();return!t}},{key:"handleDragEvent",value:function(e){var t=1,r=this.targetPointers[0],n=this.down_.originalEvent,i=r.clientY-n.clientY;void 0!==this.lastDistance_&&(t=1-(this.lastDistance_-i)*this.scaleDeltaByPixel_),this.lastDistance_=i,1!=t&&(this.lastScaleDelta_=t);var o=e.map,a=o.getView();o.render(),a.adjustResolutionInternal(t)}},{key:"handleDownEvent",value:function(e){if(1==this.targetPointers.length){var t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.down_=e,this.handlingDownUpSequence_||t.getView().beginInteraction(),!0}return!1}},{key:"handleUpEvent",value:function(e){if(0==this.targetPointers.length){var t=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return t.endInteraction(this.duration_,r),this.handlingDownUpSequence_=!1,this.handlingDoubleDownSequence_=!1,!1}return!0}},{key:"stopDown",value:function(e){return e}},{key:"updateTrackedPointers_",value:function(e){if(function(e){var t=e.type;return t===U.Z.POINTERDOWN||t===U.Z.POINTERDRAG||t===U.Z.POINTERUP}(e)){var t=e.originalEvent,r=t.pointerId.toString();e.type==U.Z.POINTERUP?delete this.trackedPointers_[r]:(e.type==U.Z.POINTERDOWN||r in this.trackedPointers_)&&(this.trackedPointers_[r]=t),this.targetPointers=Object.values(this.trackedPointers_)}}},{key:"waitForDblTap_",value:function(){void 0!==this.doubleTapTimeoutId_?(clearTimeout(this.doubleTapTimeoutId_),this.doubleTapTimeoutId_=void 0):(this.handlingDoubleDownSequence_=!0,this.doubleTapTimeoutId_=setTimeout(this.endInteraction_.bind(this),250))}},{key:"endInteraction_",value:function(){this.handlingDoubleDownSequence_=!1,this.doubleTapTimeoutId_=void 0}}])&&ql(t.prototype,r),n&&ql(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Gs.ZP);const Yl=Hl;var Xl=__webpack_require__(85302),Jl=__webpack_require__(21815),$l=__webpack_require__(10435),eu=__webpack_require__(30484),tu=__webpack_require__(84189),ru=__webpack_require__(78148),nu=__webpack_require__(57984),iu=__webpack_require__(31615),ou=__webpack_require__(23256),au=__webpack_require__(82269),su=__webpack_require__(21511),lu=__webpack_require__(50836),uu=__webpack_require__(52341),cu=__webpack_require__(4598),fu=__webpack_require__(31042),hu=__webpack_require__(35947),pu=__webpack_require__(93319),du=__webpack_require__(53711),yu=__webpack_require__(55991),gu=__webpack_require__(56002),mu=__webpack_require__(40546),_u=__webpack_require__(96903),vu=__webpack_require__(26264);function Au(e){return Au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Au(e)}function bu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Au(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Au(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Au(o)?o:String(o)),n)}var i,o}function wu(e,t){return wu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wu(e,t)}function Eu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xu(e);if(t){var i=xu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Au(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function xu(e){return xu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xu(e)}var Iu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wu(e,t)}(a,e);var t,n,i,o=Eu(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=e||{},(t=o.call(this)).featureNS_="http://mapserver.gis.umn.edu/mapserver",t.gmlFormat_=new _u.Z,t.layers_=e.layers?e.layers:null,t}return t=a,n=[{key:"getLayers",value:function(){return this.layers_}},{key:"setLayers",value:function(e){this.layers_=e}},{key:"readFeatures_",value:function(e,t){e.setAttribute("namespaceURI",this.featureNS_);var n=e.localName,i=[];if(0===e.childNodes.length)return i;if("msGMLOutput"==n)for(var o=0,a=e.childNodes.length;o<a;o++){var s=e.childNodes[o];if(s.nodeType===Node.ELEMENT_NODE){var l=s,u=t[0],c=l.localName.replace("_layer","");if(!this.layers_||this.layers_.includes(c)){var f=c+"_feature";u.featureType=f,u.featureNS=this.featureNS_;var h={};h[f]=(0,r.Ei)(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var p=(0,r.C5)([u.featureNS,null],h);l.setAttribute("namespaceURI",this.featureNS_);var d=(0,r.O)([],p,l,t,this.gmlFormat_);d&&(0,He.l7)(i,d)}}}if("FeatureCollection"==n){var y=(0,r.O)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);y&&(i=y)}return i}},{key:"readFeaturesFromNode",value:function(e,t){var r={};return t&&Object.assign(r,this.getReadOptions(e,t)),this.readFeatures_(e,[r])}}],n&&bu(t.prototype,n),i&&bu(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(vu.Z);const Su=Iu;var Cu=__webpack_require__(88440),Pu=__webpack_require__(64317);function Ou(e,t){return Ou=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ou(e,t)}function Tu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Mu(e);if(t){var i=Mu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Bu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Mu(e){return Mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mu(e)}function ku(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Ru(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ru(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Ru(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bu(e){return Bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(e)}function Lu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Du(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fu(n.key),n)}}function ju(e,t,r){return t&&Du(e.prototype,t),r&&Du(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fu(e){var t=function(e,t){if("object"!==Bu(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Bu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Bu(t)?t:String(t)}var Nu=1,Zu=2,Uu=3,Qu=4,Gu=5,zu=6,qu=7,Vu=15,Wu=16,Ku=17,Hu=function(){function e(t){Lu(this,e),this.view_=t,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}return ju(e,[{key:"readUint8",value:function(){return this.view_.getUint8(this.pos_++)}},{key:"readUint32",value:function(e){return this.view_.getUint32((this.pos_+=4)-4,void 0!==e?e:this.isLittleEndian_)}},{key:"readDouble",value:function(e){return this.view_.getFloat64((this.pos_+=8)-8,void 0!==e?e:this.isLittleEndian_)}},{key:"readPoint",value:function(){var e=[];return e.push(this.readDouble()),e.push(this.readDouble()),this.hasZ_&&e.push(this.readDouble()),this.hasM_&&e.push(this.readDouble()),e}},{key:"readLineString",value:function(){for(var e=this.readUint32(),t=[],r=0;r<e;r++)t.push(this.readPoint());return t}},{key:"readPolygon",value:function(){for(var e=this.readUint32(),t=[],r=0;r<e;r++)t.push(this.readLineString());return t}},{key:"readWkbHeader",value:function(e){var t=this.readUint8()>0,r=this.readUint32(t),n=Math.floor((268435455&r)/1e3),i=Boolean(2147483648&r)||1===n||3===n,o=Boolean(1073741824&r)||2===n||3===n,a=Boolean(536870912&r),s=(268435455&r)%1e3,l=["XY",i?"Z":"",o?"M":""].join(""),u=a?this.readUint32(t):null;if(void 0!==e&&e!==s)throw new Error("Unexpected WKB geometry type "+s);if(this.initialized_){if(this.isLittleEndian_!==t)throw new Error("Inconsistent endian");if(this.layout_!==l)throw new Error("Inconsistent geometry layout");if(u&&this.srid_!==u)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=t,this.hasZ_=i,this.hasM_=o,this.layout_=l,this.srid_=u,this.initialized_=!0;return s}},{key:"readWkbPayload",value:function(e){switch(e){case Nu:return this.readPoint();case Zu:return this.readLineString();case Uu:case Ku:return this.readPolygon();case Qu:return this.readMultiPoint();case Gu:return this.readMultiLineString();case zu:case Vu:case Wu:return this.readMultiPolygon();case qu:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+e+" is found")}}},{key:"readWkbBlock",value:function(e){return this.readWkbPayload(this.readWkbHeader(e))}},{key:"readWkbCollection",value:function(e,t){for(var r=this.readUint32(),n=[],i=0;i<r;i++){var o=e.call(this,t);o&&n.push(o)}return n}},{key:"readMultiPoint",value:function(){return this.readWkbCollection(this.readWkbBlock,Nu)}},{key:"readMultiLineString",value:function(){return this.readWkbCollection(this.readWkbBlock,Zu)}},{key:"readMultiPolygon",value:function(){return this.readWkbCollection(this.readWkbBlock,Uu)}},{key:"readGeometryCollection",value:function(){return this.readWkbCollection(this.readGeometry)}},{key:"readGeometry",value:function(){var e=this.readWkbHeader(),t=this.readWkbPayload(e);switch(e){case Nu:return new q.Z(t,this.layout_);case Zu:return new N.Z(t,this.layout_);case Uu:case Ku:return new W.ZP(t,this.layout_);case Qu:return new G.Z(t,this.layout_);case Gu:return new Q.Z(t,this.layout_);case zu:case Vu:case Wu:return new z.Z(t,this.layout_);case qu:return new j.Z(t);default:return null}}},{key:"getSrid",value:function(){return this.srid_}}]),e}(),Yu=function(){function e(t){Lu(this,e),t=t||{},this.layout_=t.layout,this.isLittleEndian_=!1!==t.littleEndian,this.isEWKB_=!1!==t.ewkb,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},t.nodata)}return ju(e,[{key:"writeUint8",value:function(e){this.writeQueue_.push([1,e])}},{key:"writeUint32",value:function(e){this.writeQueue_.push([4,e])}},{key:"writeDouble",value:function(e){this.writeQueue_.push([8,e])}},{key:"writePoint",value:function(e,t){var r,n=Object.assign.apply(null,t.split("").map((function(t,r){return function(e,t,r){return(t=Fu(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,e[r])}))),i=ku(this.layout_);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.writeDouble(o in n?n[o]:this.nodata_[o])}}catch(e){i.e(e)}finally{i.f()}}},{key:"writeLineString",value:function(e,t){this.writeUint32(e.length);for(var r=0;r<e.length;r++)this.writePoint(e[r],t)}},{key:"writePolygon",value:function(e,t){this.writeUint32(e.length);for(var r=0;r<e.length;r++)this.writeLineString(e[r],t)}},{key:"writeWkbHeader",value:function(e,t){e%=1e3,this.layout_.includes("Z")&&(e+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(e+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(t)&&(e|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(e),this.isEWKB_&&Number.isInteger(t)&&this.writeUint32(t)}},{key:"writeMultiPoint",value:function(e,t){this.writeUint32(e.length);for(var r=0;r<e.length;r++)this.writeWkbHeader(1),this.writePoint(e[r],t)}},{key:"writeMultiLineString",value:function(e,t){this.writeUint32(e.length);for(var r=0;r<e.length;r++)this.writeWkbHeader(2),this.writeLineString(e[r],t)}},{key:"writeMultiPolygon",value:function(e,t){this.writeUint32(e.length);for(var r=0;r<e.length;r++)this.writeWkbHeader(3),this.writePolygon(e[r],t)}},{key:"writeGeometryCollection",value:function(e){this.writeUint32(e.length);for(var t=0;t<e.length;t++)this.writeGeometry(e[t])}},{key:"findMinimumLayout",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"XYZM";if(e instanceof ee.ZP)return(t=e.getLayout())===(r=n)?t:"XYZM"===t?r:"XYZM"===r?t:"XY";if(e instanceof j.Z)for(var i=e.getGeometriesArray(),o=0;o<i.length&&"XY"!==n;o++)n=this.findMinimumLayout(i[o],n);return n}},{key:"writeGeometry",value:function(e,t){var r={Point:Nu,LineString:Zu,Polygon:Uu,MultiPoint:Qu,MultiLineString:Gu,MultiPolygon:zu,GeometryCollection:qu},n=e.getType(),i=r[n];if(!i)throw new Error("GeometryType "+n+" is not supported");(this.layout_||(this.layout_=this.findMinimumLayout(e)),this.writeWkbHeader(i,t),e instanceof ee.ZP)?{Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon}[n].call(this,e.getCoordinates(),e.getLayout()):e instanceof j.Z&&this.writeGeometryCollection(e.getGeometriesArray())}},{key:"getBuffer",value:function(){var e=this,t=this.writeQueue_.reduce((function(e,t){return e+t[0]}),0),r=new ArrayBuffer(t),n=new DataView(r),i=0;return this.writeQueue_.forEach((function(t){switch(t[0]){case 1:n.setUint8(i,t[1]);break;case 4:n.setUint32(i,t[1],e.isLittleEndian_);break;case 8:n.setFloat64(i,t[1],e.isLittleEndian_)}i+=t[0]})),r}}]),e}();function Xu(e){return"string"==typeof e?function(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length/2;r++)t[r]=parseInt(e.substr(2*r,2),16);return new DataView(t.buffer)}(e):ArrayBuffer.isView(e)?e instanceof DataView?e:new DataView(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new DataView(e):null}const Ju=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ou(e,t)}(r,e);var t=Tu(r);function r(e){var n;return Lu(this,r),e=e||{},(n=t.call(this)).splitCollection=Boolean(e.splitCollection),n.viewCache_=null,n.hex_=!1!==e.hex,n.littleEndian_=!1!==e.littleEndian,n.ewkb_=!1!==e.ewkb,n.layout_=e.geometryLayout,n.nodataZ_=e.nodataZ||0,n.nodataM_=e.nodataM||0,n.srid_=e.srid,n}return ju(r,[{key:"getType",value:function(){return this.hex_?"text":"arraybuffer"}},{key:"readFeature",value:function(e,t){return new D.Z({geometry:this.readGeometry(e,t)})}},{key:"readFeatures",value:function(e,t){var r=this.readGeometry(e,t);return(this.splitCollection&&r instanceof j.Z?r.getGeometriesArray():[r]).map((function(e){return new D.Z({geometry:e})}))}},{key:"readGeometry",value:function(e,t){var r=Xu(e);if(!r)return null;var n=new Hu(r).readGeometry();return this.viewCache_=r,t=this.getReadOptions(e,t),this.viewCache_=null,(0,Me.fI)(n,!1,t)}},{key:"readProjection",value:function(e){var t=this.viewCache_||Xu(e);if(t){var r=new Hu(t);return r.readWkbHeader(),r.getSrid()&&(0,v.U2)("EPSG:"+r.getSrid())||void 0}}},{key:"writeFeature",value:function(e,t){return this.writeGeometry(e.getGeometry(),t)}},{key:"writeFeatures",value:function(e,t){return this.writeGeometry(new j.Z(e.map((function(e){return e.getGeometry()}))),t)}},{key:"writeGeometry",value:function(e,t){t=this.adaptOptions(t);var r=new Yu({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}}),n=Number.isInteger(this.srid_)?Number(this.srid_):null;if(!1!==this.srid_&&!Number.isInteger(this.srid_)){var i=t.dataProjection&&(0,v.U2)(t.dataProjection);if(i){var o=i.getCode();o.startsWith("EPSG:")&&(n=Number(o.substring(5)))}}r.writeGeometry((0,Me.fI)(e,!0,t),n);var a=r.getBuffer();return this.hex_?function(e){var t=new Uint8Array(e);return Array.from(t.values()).map((function(e){return(e<16?"0":"")+Number(e).toString(16).toUpperCase()})).join("")}(a):a}}]),r}(Me.ZP);var $u=__webpack_require__(25794);function ec(e){return ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ec(e)}function tc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==ec(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ec(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ec(o)?o:String(o)),n)}var i,o}function rc(e,t){return rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rc(e,t)}function nc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ic(e);if(t){var i=ic(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ec(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ic(e){return ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ic(e)}var oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rc(e,t)}(o,e);var t,r,n,i=nc(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this)).layerName_=e.layerName,t.layers_=e.layers?e.layers:null,t.dataProjection=(0,v.U2)(e.dataProjection?e.dataProjection:"EPSG:4326"),t}return t=o,r=[{key:"readFeaturesFromObject",value:function(e,t){if("Topology"==e.type){var r,n=e,i=null,o=null;n.transform&&(i=(r=n.transform).scale,o=r.translate);var a=n.arcs;r&&function(e,t,r){for(var n=0,i=e.length;n<i;++n)cc(e[n],t,r)}(a,i,o);var s,l=[],u=n.objects,c=this.layerName_;for(var f in u)this.layers_&&!this.layers_.includes(f)||("GeometryCollection"===u[f].type?(s=u[f],l.push.apply(l,lc(s,a,i,o,c,f,t))):(s=u[f],l.push(uc(s,a,i,o,c,f,t))));return l}return[]}},{key:"readProjectionFromObject",value:function(e){return this.dataProjection}}],r&&tc(t.prototype,r),n&&tc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}($u.Z),ac={Point:function(e,t,r){var n=e.coordinates;t&&r&&fc(n,t,r);return new q.Z(n)},LineString:function(e,t){var r=sc(e.arcs,t);return new N.Z(r)},Polygon:function(e,t){for(var r=[],n=0,i=e.arcs.length;n<i;++n)r[n]=sc(e.arcs[n],t);return new W.ZP(r)},MultiPoint:function(e,t,r){var n=e.coordinates;if(t&&r)for(var i=0,o=n.length;i<o;++i)fc(n[i],t,r);return new G.Z(n)},MultiLineString:function(e,t){for(var r=[],n=0,i=e.arcs.length;n<i;++n)r[n]=sc(e.arcs[n],t);return new Q.Z(r)},MultiPolygon:function(e,t){for(var r=[],n=0,i=e.arcs.length;n<i;++n){for(var o=e.arcs[n],a=[],s=0,l=o.length;s<l;++s)a[s]=sc(o[s],t);r[n]=a}return new z.Z(r)}};function sc(e,t){for(var r,n=[],i=0,o=e.length;i<o;++i)if(r=e[i],i>0&&n.pop(),r>=0)for(var a=t[r],s=0,l=a.length;s<l;++s)n.push(a[s].slice(0));else for(var u=t[~r],c=u.length-1;c>=0;--c)n.push(u[c].slice(0));return n}function lc(e,t,r,n,i,o,a){for(var s=e.geometries,l=[],u=0,c=s.length;u<c;++u)l[u]=uc(s[u],t,r,n,i,o,a);return l}function uc(e,t,r,n,i,o,a){var s=null,l=e.type;if(l){var u=ac[l];s="Point"===l||"MultiPoint"===l?u(e,r,n):u(e,t),s=(0,Me.fI)(s,!1,a)}var c=new D.Z({geometry:s});void 0!==e.id&&c.setId(e.id);var f=e.properties;return i&&(f||(f={}),f[i]=o),f&&c.setProperties(f,!0),c}function cc(e,t,r){for(var n=0,i=0,o=0,a=e.length;o<a;++o){var s=e[o];n+=s[0],i+=s[1],s[0]=n,s[1]=i,fc(s,t,r)}}function fc(e,t,r){e[0]=e[0]*t[0]+r[0],e[1]=e[1]*t[1]+r[1]}const hc=oc;var pc=__webpack_require__(83482);function dc(e){return dc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dc(e)}function yc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==dc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==dc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===dc(o)?o:String(o)),n)}var i,o}function gc(e,t){return gc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gc(e,t)}function mc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_c(e);if(t){var i=_c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function _c(e){return _c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_c(e)}var vc=[null],Ac=(0,r.C5)(vc,{nd:function(e,t){var r=t[t.length-1];r.ndrefs.push(e.getAttribute("ref")),e.hasAttribute("lon")&&e.hasAttribute("lat")&&(r.flatCoordinates.push(parseFloat(e.getAttribute("lon"))),r.flatCoordinates.push(parseFloat(e.getAttribute("lat"))))},tag:xc}),bc=(0,r.C5)(vc,{node:function(e,t){var n=t[0],i=t[t.length-1],o=e.getAttribute("id"),a=[parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))];i.nodes[o]=a;var s=(0,r.O)({tags:{}},Ec,e,t);if(!(0,pc.x)(s.tags)){var l=new q.Z(a);(0,Me.fI)(l,!1,n);var u=new D.Z(l);void 0!==o&&u.setId(o),u.setProperties(s.tags,!0),i.features.push(u)}},way:function(e,t){var n=e.getAttribute("id"),i=(0,r.O)({id:n,ndrefs:[],flatCoordinates:[],tags:{}},Ac,e,t);t[t.length-1].ways.push(i)}}),wc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gc(e,t)}(a,e);var t,n,i,o=mc(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).dataProjection=(0,v.U2)("EPSG:4326"),e}return t=a,(n=[{key:"readFeaturesFromNode",value:function(e,t){if(t=this.getReadOptions(e,t),"osm"==e.localName){for(var n=(0,r.O)({nodes:{},ways:[],features:[]},bc,e,[t]),i=0;i<n.ways.length;i++){var o=n.ways[i],a=o.flatCoordinates;if(!a.length)for(var s=0,l=o.ndrefs.length;s<l;s++){var u=n.nodes[o.ndrefs[s]];(0,He.l7)(a,u)}var c=void 0;c=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new W.ZP(a,"XY",[a.length]):new N.Z(a,"XY"),(0,Me.fI)(c,!1,t);var f=new D.Z(c);void 0!==o.id&&f.setId(o.id),f.setProperties(o.tags,!0),n.features.push(f)}if(n.features)return n.features}return[]}}])&&yc(t.prototype,n),i&&yc(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}(vu.Z),Ec=(0,r.C5)(vc,{tag:xc});function xc(e,t){t[t.length-1].tags[e.getAttribute("k")]=e.getAttribute("v")}const Ic=wc;var Sc=__webpack_require__(7707),Cc=__webpack_require__(43950);function Pc(e){return Pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(e)}function Oc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Pc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Pc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Pc(o)?o:String(o)),n)}var i,o}function Tc(e,t){return Tc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tc(e,t)}function Mc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=kc(e);if(t){var i=kc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Pc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kc(e){return kc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kc(e)}var Rc=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Bc=/^H.([A-Z]{3}).*?:(.*)/,Lc=/^HFDTE(\d{2})(\d{2})(\d{2})/,Dc=/\r\n|\r|\n/,jc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tc(e,t)}(o,e);var t,r,n,i=Mc(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this)).dataProjection=(0,v.U2)("EPSG:4326"),t.altitudeMode_=e.altitudeMode?e.altitudeMode:"none",t}return t=o,r=[{key:"readFeatureFromText",value:function(e,t){var r,n,i=this.altitudeMode_,o=e.split(Dc),a={},s=[],l=2e3,u=0,c=1,f=-1;for(r=0,n=o.length;r<n;++r){var h=o[r],p=void 0;if("B"==h.charAt(0)){if(p=Rc.exec(h)){var d=parseInt(p[1],10),y=parseInt(p[2],10),g=parseInt(p[3],10),m=parseInt(p[4],10)+parseInt(p[5],10)/6e4;"S"==p[6]&&(m=-m);var _=parseInt(p[7],10)+parseInt(p[8],10)/6e4;if("W"==p[9]&&(_=-_),s.push(_,m),"none"!=i){var v=void 0;v="gps"==i?parseInt(p[11],10):"barometric"==i?parseInt(p[12],10):0,s.push(v)}var A=Date.UTC(l,u,c,d,y,g);A<f&&(A=Date.UTC(l,u,c+1,d,y,g)),s.push(A/1e3),f=A}}else"H"==h.charAt(0)&&((p=Lc.exec(h))?(c=parseInt(p[1],10),u=parseInt(p[2],10)-1,l=2e3+parseInt(p[3],10)):(p=Bc.exec(h))&&(a[p[1]]=p[2].trim()))}if(0===s.length)return null;var b="none"==i?"XYM":"XYZM",w=new N.Z(s,b),E=new D.Z((0,Me.fI)(w,!1,t));return E.setProperties(a,!0),E}},{key:"readFeaturesFromText",value:function(e,t){var r=this.readFeatureFromText(e,t);return r?[r]:[]}}],r&&Oc(t.prototype,r),n&&Oc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Pe.Z);const Fc=jc;var Nc=__webpack_require__(34795),Zc=__webpack_require__(97874),Uc=__webpack_require__(47813),Qc=__webpack_require__(22386),Gc=__webpack_require__(75934),zc=__webpack_require__(17275),qc=__webpack_require__(47895),Vc=__webpack_require__(98180);function Wc(e){return Wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(e)}function Kc(e,t,r){return(t=Yc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yc(n.key),n)}}function Yc(e){var t=function(e,t){if("object"!==Wc(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Wc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Wc(t)?t:String(t)}function Xc(e,t){return Xc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xc(e,t)}function Jc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=$c(e);if(t){var i=$c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Wc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function $c(e){return $c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$c(e)}var ef={Point:function(e){var t;t=void 0!==e.m&&void 0!==e.z?new q.Z([e.x,e.y,e.z,e.m],"XYZM"):void 0!==e.z?new q.Z([e.x,e.y,e.z],"XYZ"):void 0!==e.m?new q.Z([e.x,e.y,e.m],"XYM"):new q.Z([e.x,e.y]);return t},LineString:function(e){var t=of(e);return new N.Z(e.paths[0],t)},Polygon:function(e){var t=of(e);return new W.ZP(e.rings,t)},MultiPoint:function(e){var t=of(e);return new G.Z(e.points,t)},MultiLineString:function(e){var t=of(e);return new Q.Z(e.paths,t)},MultiPolygon:function(e){var t=of(e);return new z.Z(e.rings,t)}},tf={Point:function(e,t){var r,n=e.getCoordinates(),i=e.getLayout();if("XYZ"===i)r={x:n[0],y:n[1],z:n[2]};else if("XYM"===i)r={x:n[0],y:n[1],m:n[2]};else if("XYZM"===i)r={x:n[0],y:n[1],z:n[2],m:n[3]};else{if("XY"!==i)throw new Error("Invalid geometry layout");r={x:n[0],y:n[1]}}return r},LineString:function(e,t){var r=af(e);return{hasZ:r.hasZ,hasM:r.hasM,paths:[e.getCoordinates()]}},Polygon:function(e,t){var r=af(e);return{hasZ:r.hasZ,hasM:r.hasM,rings:e.getCoordinates(!1)}},MultiPoint:function(e,t){var r=af(e);return{hasZ:r.hasZ,hasM:r.hasM,points:e.getCoordinates()}},MultiLineString:function(e,t){var r=af(e);return{hasZ:r.hasZ,hasM:r.hasM,paths:e.getCoordinates()}},MultiPolygon:function(e,t){for(var r=af(e),n=e.getCoordinates(!1),i=[],o=0;o<n.length;o++)for(var a=n[o].length-1;a>=0;a--)i.push(n[o][a]);return{hasZ:r.hasZ,hasM:r.hasM,rings:i}}},rf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xc(e,t)}(o,e);var t,r,n,i=Jc(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this)).geometryName_=e.geometryName,t}return t=o,(r=[{key:"readFeatureFromObject",value:function(e,t,r){var n=e,i=nf(n.geometry,t),o=new D.Z;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(i),n.attributes){o.setProperties(n.attributes,!0);var a=n.attributes[r];void 0!==a&&o.setId(a)}return o}},{key:"readFeaturesFromObject",value:function(e,t){if(t=t||{},e.features){for(var r=[],n=e.features,i=0,o=n.length;i<o;++i)r.push(this.readFeatureFromObject(n[i],t,e.objectIdFieldName));return r}return[this.readFeatureFromObject(e,t)]}},{key:"readGeometryFromObject",value:function(e,t){return nf(e,t)}},{key:"readProjectionFromObject",value:function(e){if(e.spatialReference&&void 0!==e.spatialReference.wkid){var t=e.spatialReference.wkid;return(0,v.U2)("EPSG:"+t)}return null}},{key:"writeGeometryObject",value:function(e,t){return sf(e,this.adaptOptions(t))}},{key:"writeFeatureObject",value:function(e,t){t=this.adaptOptions(t);var r={};if(!e.hasProperties())return r.attributes={},r;var n=e.getProperties(),i=e.getGeometry();if(i){r.geometry=sf(i,t);var o=t&&(t.dataProjection||t.featureProjection);o&&(r.geometry.spatialReference={wkid:Number((0,v.U2)(o).getCode().split(":").pop())}),delete n[e.getGeometryName()]}return(0,pc.x)(n)?r.attributes={}:r.attributes=n,r}},{key:"writeFeaturesObject",value:function(e,t){t=this.adaptOptions(t);for(var r=[],n=0,i=e.length;n<i;++n)r.push(this.writeFeatureObject(e[n],t));return{features:r}}}])&&Hc(t.prototype,r),n&&Hc(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}($u.Z);function nf(e,t){if(!e)return null;var r;if("number"==typeof e.x&&"number"==typeof e.y)r="Point";else if(e.points)r="MultiPoint";else if(e.paths){r=1===e.paths.length?"LineString":"MultiLineString"}else if(e.rings){var n=e,i=of(n),o=function(e,t){var r,n,i=[],o=[],a=[];for(r=0,n=e.length;r<n;++r){i.length=0,(0,qc.Sg)(i,0,e[r],t.length),(0,Vc.bt)(i,0,i.length,t.length)?o.push([e[r]]):a.push(e[r])}for(;a.length;){var s=a.shift(),l=!1;for(r=o.length-1;r>=0;r--){var u=o[r][0];if((0,h.r4)(new Xl.Z(u).getExtent(),new Xl.Z(s).getExtent())){o[r].push(s),l=!0;break}}l||o.push([s.reverse()])}return o}(n.rings,i);1===o.length?(r="Polygon",e=Object.assign({},e,Kc({},"rings",o[0]))):(r="MultiPolygon",e=Object.assign({},e,Kc({},"rings",o)))}var a=ef[r];return(0,Me.fI)(a(e),!1,t)}function of(e){var t="XY";return!0===e.hasZ&&!0===e.hasM?t="XYZM":!0===e.hasZ?t="XYZ":!0===e.hasM&&(t="XYM"),t}function af(e){var t=e.getLayout();return{hasZ:"XYZ"===t||"XYZM"===t,hasM:"XYM"===t||"XYZM"===t}}function sf(e,t){return(0,tf[e.getType()])((0,Me.fI)(e,!0,t),t)}const lf=rf;var uf=__webpack_require__(17160),cf=__webpack_require__(89368);function ff(e){return ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(e)}function hf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==ff(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ff(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ff(o)?o:String(o)),n)}var i,o}function pf(e,t){return pf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pf(e,t)}function df(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=gf(e);if(t){var i=gf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ff(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yf(e)}(this,r)}}function yf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gf(e){return gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gf(e)}var mf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pf(e,t)}(o,e);var t,r,n,i=df(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this,{element:document.createElement("div"),target:e.target})).extent=e.extent?e.extent:null;var r=void 0!==e.className?e.className:"ol-zoom-extent",n=void 0!==e.label?e.label:"E",a=void 0!==e.tipLabel?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild("string"==typeof n?document.createTextNode(n):n),s.addEventListener(L.Z.CLICK,t.handleClick_.bind(yf(t)),!1);var l=r+" "+cf.XV+" "+cf.hg,u=t.element;return u.className=l,u.appendChild(s),t}return t=o,(r=[{key:"handleClick_",value:function(e){e.preventDefault(),this.handleZoomToExtent()}},{key:"handleZoomToExtent",value:function(){var e=this.getMap().getView(),t=this.extent?this.extent:e.getProjection().getExtent();e.fitInternal((0,W.oJ)(t))}}])&&hf(t.prototype,r),n&&hf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(uf.Z);const _f=mf;var vf=__webpack_require__(86206),Af=__webpack_require__(94432),bf=__webpack_require__(87853),wf=__webpack_require__(33172),Ef=__webpack_require__(25769),xf=__webpack_require__(47556),If=__webpack_require__(43059),Sf=__webpack_require__(6015),Cf=__webpack_require__(92922),Pf=__webpack_require__(62348);function Of(e){return Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(e)}function Tf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Of(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Of(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Of(o)?o:String(o)),n)}var i,o}function Mf(){return Mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lf(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},Mf.apply(this,arguments)}function kf(e,t){return kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kf(e,t)}function Rf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Lf(e);if(t){var i=Lf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Of(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bf(e)}(this,r)}}function Bf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lf(e){return Lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Lf(e)}var Df=.75,jf=.1,Ff=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kf(e,t)}(o,e);var t,r,n,i=Rf(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this,{element:document.createElement("div"),render:e.render,target:e.target})).boundHandleRotationChanged_=t.handleRotationChanged_.bind(Bf(t)),t.collapsed_=void 0===e.collapsed||e.collapsed,t.collapsible_=void 0===e.collapsible||e.collapsible,t.collapsible_||(t.collapsed_=!1),t.rotateWithView_=void 0!==e.rotateWithView&&e.rotateWithView,t.viewExtent_=void 0;var r=void 0!==e.className?e.className:"ol-overviewmap",n=void 0!==e.tipLabel?e.tipLabel:"Overview map",a=void 0!==e.collapseLabel?e.collapseLabel:"‹";"string"==typeof a?(t.collapseLabel_=document.createElement("span"),t.collapseLabel_.textContent=a):t.collapseLabel_=a;var s=void 0!==e.label?e.label:"›";"string"==typeof s?(t.label_=document.createElement("span"),t.label_.textContent=s):t.label_=s;var l=t.collapsible_&&!t.collapsed_?t.collapseLabel_:t.label_,u=document.createElement("button");u.setAttribute("type","button"),u.title=n,u.appendChild(l),u.addEventListener(L.Z.CLICK,t.handleClick_.bind(Bf(t)),!1),t.ovmapDiv_=document.createElement("div"),t.ovmapDiv_.className="ol-overviewmap-map",t.view_=e.view;var c=new Ef.Z({view:e.view,controls:new wa.Z,interactions:new wa.Z});t.ovmap_=c,e.layers&&e.layers.forEach((function(e){c.addLayer(e)}));var f=document.createElement("div");f.className="ol-overviewmap-box",f.style.boxSizing="border-box",t.boxOverlay_=new Sf.Z({position:[0,0],positioning:"center-center",element:f}),t.ovmap_.addOverlay(t.boxOverlay_);var h=r+" "+cf.XV+" "+cf.hg+(t.collapsed_&&t.collapsible_?" "+cf.hN:"")+(t.collapsible_?"":" ol-uncollapsible"),p=t.element;p.className=h,p.appendChild(t.ovmapDiv_),p.appendChild(u);var d=Bf(t),y=t.boxOverlay_,g=t.boxOverlay_.getElement(),m=function(e){var t,r={clientX:(t=e).clientX,clientY:t.clientY},n=c.getEventCoordinateInternal(r);y.setPosition(n)},_=function e(t){var r=c.getEventCoordinateInternal(t);d.getMap().getView().setCenterInternal(r),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",e)};return g.addEventListener("mousedown",(function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",_)})),t}return t=o,r=[{key:"setMap",value:function(e){var t=this.getMap();if(e!==t){if(t){var r=t.getView();r&&this.unbindView_(r),this.ovmap_.setTarget(null)}if(Mf(Lf(o.prototype),"setMap",this).call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,Ct.oL)(e,If.Z.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var n=e.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}},{key:"handleMapPropertyChange_",value:function(e){if(e.key===xf.Z.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var r=this.getMap().getView();this.bindView_(r)}else this.ovmap_.isRendered()||e.key!==xf.Z.TARGET&&e.key!==xf.Z.SIZE||this.ovmap_.updateSize()}},{key:"bindView_",value:function(e){if(!this.view_){var t=new Cf.ZP({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(Pf.Z.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}},{key:"unbindView_",value:function(e){e.removeChangeListener(Pf.Z.ROTATION,this.boundHandleRotationChanged_)}},{key:"handleRotationChanged_",value:function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}},{key:"validateExtent_",value:function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var r=e.getSize(),n=e.getView().calculateExtentInternal(r);if(!this.viewExtent_||!(0,h.fS)(n,this.viewExtent_)){this.viewExtent_=n;var i=t.getSize(),o=t.getView().calculateExtentInternal(i),a=t.getPixelFromCoordinateInternal((0,h.rL)(n)),s=t.getPixelFromCoordinateInternal((0,h.w$)(n)),l=Math.abs(a[0]-s[0]),u=Math.abs(a[1]-s[1]),c=i[0],f=i[1];l<c*jf||u<f*jf||l>c*Df||u>f*Df?this.resetExtent_():(0,h.r4)(o,n)||this.recenter_()}}}},{key:"resetExtent_",value:function(){var e=this.getMap(),t=this.ovmap_,r=e.getSize(),n=e.getView().calculateExtentInternal(r),i=t.getView(),o=Math.log(7.5)/Math.LN2,a=1/(Math.pow(2,o/2)*jf);(0,h.H9)(n,a),i.fitInternal((0,W.oJ)(n))}},{key:"recenter_",value:function(){var e=this.getMap(),t=this.ovmap_,r=e.getView();t.getView().setCenterInternal(r.getCenterInternal())}},{key:"updateBox_",value:function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var r=e.getSize(),n=e.getView(),i=t.getView(),o=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),l=n.getCenterInternal(),u=n.getResolution(),c=i.getResolution(),f=r[0]*u/c,h=r[1]*u/c;if(a.setPosition(l),s){s.style.width=f+"px",s.style.height=h+"px";var p="rotate("+o+"rad)";s.style.transform=p}}}},{key:"updateBoxAfterOvmapIsRendered_",value:function(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,Ct.Vx)(this.ovmap_,zs.Z.POSTRENDER,(function(e){delete this.ovmapPostrenderKey_,this.updateBox_()}),this))}},{key:"handleClick_",value:function(e){e.preventDefault(),this.handleToggle_()}},{key:"handleToggle_",value:function(){this.element.classList.toggle(cf.hN),this.collapsed_?(0,ut.$H)(this.collapseLabel_,this.label_):(0,ut.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;if(!this.collapsed_){if(e.isRendered())return this.viewExtent_=void 0,void e.render();e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}},{key:"setCollapsed",value:function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"setRotateWithView",value:function(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}},{key:"getOverviewMap",value:function(){return this.ovmap_}},{key:"render",value:function(e){this.validateExtent_(),this.updateBox_()}}],r&&Tf(t.prototype,r),n&&Tf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(uf.Z);const Nf=Ff;var Zf=__webpack_require__(69613);function Uf(e){return Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(e)}function Qf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Uf(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Uf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Uf(o)?o:String(o)),n)}var i,o}function Gf(){return Gf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vf(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},Gf.apply(this,arguments)}function zf(e,t){return zf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zf(e,t)}function qf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Vf(e);if(t){var i=Vf(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Uf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Vf(e){return Vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vf(e)}var Wf="projection",Kf="coordinateFormat",Hf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zf(e,t)}(o,e);var t,r,n,i=qf(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{};var r=document.createElement("div");return r.className=void 0!==e.className?e.className:"ol-mouse-position",(t=i.call(this,{element:r,render:e.render,target:e.target})).on,t.once,t.un,t.addChangeListener(Wf,t.handleProjectionChanged_),e.coordinateFormat&&t.setCoordinateFormat(e.coordinateFormat),e.projection&&t.setProjection(e.projection),t.renderOnMouseOut_=void 0!==e.placeholder,t.placeholder_=t.renderOnMouseOut_?e.placeholder:"&#160;",t.renderedHTML_=r.innerHTML,t.mapProjection_=null,t.transform_=null,t.wrapX_=!1!==e.wrapX,t}return t=o,(r=[{key:"handleProjectionChanged_",value:function(){this.transform_=null}},{key:"getCoordinateFormat",value:function(){return this.get(Kf)}},{key:"getProjection",value:function(){return this.get(Wf)}},{key:"handleMouseMove",value:function(e){var t=this.getMap();this.updateHTML_(t.getEventPixel(e))}},{key:"handleMouseOut",value:function(e){this.updateHTML_(null)}},{key:"setMap",value:function(e){if(Gf(Vf(o.prototype),"setMap",this).call(this,e),e){var t=e.getViewport();this.listenerKeys.push((0,Ct.oL)(t,Zf.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,Ct.oL)(t,Zf.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}},{key:"setCoordinateFormat",value:function(e){this.set(Kf,e)}},{key:"setProjection",value:function(e){this.set(Wf,(0,v.U2)(e))}},{key:"updateHTML_",value:function(e){var t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?(0,v.WO)(this.mapProjection_,r):v.gD}var n=this.getMap().getCoordinateFromPixelInternal(e);if(n){var i=(0,v.Cs)();if(i&&(this.transform_=(0,v.WO)(this.mapProjection_,i)),this.transform_(n,n),this.wrapX_){var o=i||this.getProjection()||this.mapProjection_;(0,$.Cf)(n,o)}var a=this.getCoordinateFormat();t=a?a(n):n.toString()}}this.renderedHTML_&&t===this.renderedHTML_||(this.element.innerHTML=t,this.renderedHTML_=t)}},{key:"render",value:function(e){var t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}])&&Qf(t.prototype,r),n&&Qf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(uf.Z);const Yf=Hf;function Xf(e){return Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xf(e)}function Jf(e){return function(e){if(Array.isArray(e))return $f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Xf(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Xf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Xf(o)?o:String(o)),n)}var i,o}function th(){return th="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oh(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},th.apply(this,arguments)}function rh(e,t){return rh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rh(e,t)}function nh(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=oh(e);if(t){var i=oh(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Xf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ih(e)}(this,r)}}function ih(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oh(e){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oh(e)}var ah=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],sh="enterfullscreen",lh="leavefullscreen",uh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rh(e,t)}(o,e);var t,r,n,i=nh(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=e||{},(t=i.call(this,{element:document.createElement("div"),target:e.target})).on,t.once,t.un,t.keys_=void 0!==e.keys&&e.keys,t.source_=e.source,t.isInFullscreen_=!1,t.boundHandleMapTargetChange_=t.handleMapTargetChange_.bind(ih(t)),t.cssClassName_=void 0!==e.className?e.className:"ol-full-screen",t.documentListeners_=[],t.activeClassName_=void 0!==e.activeClassName?e.activeClassName.split(" "):[t.cssClassName_+"-true"],t.inactiveClassName_=void 0!==e.inactiveClassName?e.inactiveClassName.split(" "):[t.cssClassName_+"-false"];var r=void 0!==e.label?e.label:"⤢";t.labelNode_="string"==typeof r?document.createTextNode(r):r;var n=void 0!==e.labelActive?e.labelActive:"×";t.labelActiveNode_="string"==typeof n?document.createTextNode(n):n;var a=e.tipLabel?e.tipLabel:"Toggle full-screen";return t.button_=document.createElement("button"),t.button_.title=a,t.button_.setAttribute("type","button"),t.button_.appendChild(t.labelNode_),t.button_.addEventListener(L.Z.CLICK,t.handleClick_.bind(ih(t)),!1),t.setClassName_(t.button_,t.isInFullscreen_),t.element.className="".concat(t.cssClassName_," ").concat(cf.XV," ").concat(cf.hg),t.element.appendChild(t.button_),t}return t=o,(r=[{key:"handleClick_",value:function(e){e.preventDefault(),this.handleFullScreen_()}},{key:"handleFullScreen_",value:function(){var e=this.getMap();if(e){var t,r=e.getOwnerDocument();ch(r)&&(fh(r)?function(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}(r):(t=this.source_?"string"==typeof this.source_?r.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?function(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():hh(e)}(t):hh(t)))}}},{key:"handleFullScreenChange_",value:function(){var e=this.getMap();if(e){var t=this.isInFullscreen_;this.isInFullscreen_=fh(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,ut.$H)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(sh)):((0,ut.$H)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(lh)),e.updateSize())}}},{key:"setClassName_",value:function(e,t){var r,n,i,o;t?((r=e.classList).remove.apply(r,Jf(this.inactiveClassName_)),(n=e.classList).add.apply(n,Jf(this.activeClassName_))):((i=e.classList).remove.apply(i,Jf(this.activeClassName_)),(o=e.classList).add.apply(o,Jf(this.inactiveClassName_)))}},{key:"setMap",value:function(e){var t=this.getMap();t&&t.removeChangeListener(xf.Z.TARGET,this.boundHandleMapTargetChange_),th(oh(o.prototype),"setMap",this).call(this,e),this.handleMapTargetChange_(),e&&e.addChangeListener(xf.Z.TARGET,this.boundHandleMapTargetChange_)}},{key:"handleMapTargetChange_",value:function(){for(var e=this.documentListeners_,t=0,r=e.length;t<r;++t)(0,Ct.bN)(e[t]);e.length=0;var n=this.getMap();if(n){var i=n.getOwnerDocument();ch(i)?this.element.classList.remove(cf.Qi):this.element.classList.add(cf.Qi);for(var o=0,a=ah.length;o<a;++o)e.push((0,Ct.oL)(i,ah[o],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}])&&eh(t.prototype,r),n&&eh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(uf.Z);function ch(e){var t=e.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&e.fullscreenEnabled)}function fh(e){return!(!e.webkitIsFullScreen&&!e.fullscreenElement)}function hh(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}const ph=uh;var dh=__webpack_require__(10725),yh=__webpack_require__(40439),gh=__webpack_require__(79603),mh=__webpack_require__(72742),_h=__webpack_require__(40398),vh=__webpack_require__(62582),Ah=__webpack_require__(67070),bh=__webpack_require__(48184),wh=__webpack_require__.n(bh),Eh=__webpack_require__(391),xh=__webpack_require__(2532),Ih=function(e){var t=e.parentElement;t.removeChild(e),t.children&&0!==t.children.length||t.remove()},Sh=function(e,t,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4e3,i={message:e,severity:t,icon:r,order:arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,translations:{close:(0,xh.NA)("toast").close}},o=(0,Eh.Mp)(wh(),{vars:i}),a=document.querySelector("div.m-mapea-container"),s=document.querySelector("div.m-toasts-container");s||((s=document.createElement("div")).classList.add("m-toasts-container"),a.appendChild(s));var l=setTimeout((function(){Ih(o)}),n);o.querySelector("button.m-toast-button").addEventListener("click",(function(){Ih(o),clearTimeout(l)})),s.appendChild(o)},Ch=function(e){var t=[];return e.forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t},Ph=function(e){for(var t=0;t<e.length;t+=1)if(e[t]<0)return!0;return!1},Oh=function(e){for(var t=0,r=0;r<e.length;r+=1)t+=parseFloat(e[r]);return parseFloat(t/e.length)},Th=function(e){var t=e;t=t||5;var r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=Ch(e),i=n.length<=r?n.length-1:r;e.sort((function(e,t){return e-t}));var o=function(e,t){for(var r=[],n=[],i=0,o=0;o<e.length+1;o+=1){for(var a=[],s=[],l=0;l<t+1;l+=1)a.push(0),s.push(0);r.push(a),n.push(s)}for(var u=1;u<t+1;u+=1){r[1][u]=1,n[1][u]=0;for(var c=2;c<e.length+1;c+=1)n[c][u]=1/0}for(var f=2;f<e.length+1;f+=1){for(var h=0,p=0,d=0,y=0,g=1;g<f+1;g+=1){var m=f-g+1,_=e[m-1];if(d+=1,h+=_,i=(p+=_*_)-Math.pow(h,2)/d,0!=(y=m-1))for(var v=2;v<t+1;v+=1)n[f][v]>=i+n[y][v-1]&&(r[f][v]=m,n[f][v]=i+n[y][v-1])}r[f][1]=1,n[f][1]=i}return{lowerClassLimits:r,varianceCombinations:n}}(e,i),a=function(e,t,r){var n=e.length-1,i=[],o=r;for(i[r]=e[e.length-1],i[0]=e[0];o>1;)i[o-1]=e[t[n][o]-2],n=t[n][o]-1,o-=1;return i}(e,o.lowerClassLimits,i);return a.slice(1,a.length)};return Object.defineProperty(r,"name",{value:"jenks"}),r},Mh=function(e){var t=e||5,r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=Ch(e),i=n.length<=r?n.length-1:r,o=e.length;e.sort((function(e,t){return e-t}));for(var a=o/i,s=[],l=0;l<i;l+=1){var u=e.slice(l*a,(l+1)*a);l===i-1&&(u=e.slice(l*a));var c=a%1==0?u.slice(-1)[0]:u.slice(0)[0];0===l&&a%1!=0||s.push(c)}return a%1!=0&&s.push(e[e.length-1]),s};return Object.defineProperty(r,"name",{value:"quantile"}),r},kh=function(e){var t=e||5,r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=Ch(e),i=n.length<=r?n.length-1:r;e.sort((function(e,t){return e-t}));for(var o=e[0],a=e[e.length-1],s=(a-o)/i,l=[],u=o,c=0;c<i;c+=1)u+=s,c===i-1&&(u=a),l.push(u);return l};return Object.defineProperty(r,"name",{value:"equal_interval"}),r},Rh=function(e){var t=e||5,r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=Ch(e),i=n.length<=r?n.length-1:r;e.sort((function(e,t){return e-t}));var o=e[e.length-1],a=e[0],s=function(e){for(var t=0,r=Oh(e),n=0;n<e.length;n+=1)t+=Math.pow(e[n]-r,2);return Math.sqrt(t/e.length)}(e),l=Oh(e),u=[];if(i%2==1){var c=Math.floor(i/2),f=c+1;u[c]=l-s,u[f]=l+s;for(var h=c-1;h>0;h-=1)u[h]=u[h+1]-s;for(var p=f+1;p<i;p+=1)u[p]=u[p-1]+s}else{var d=i/2;u[d]=l;for(var y=d-1;y>0;y-=1)u[y]=u[y+1]-s;for(var g=d+1;g<i;g+=1)u[g]=u[g-1]+s}return u[0]=a,u[i]=o,u.slice(1,u.length+1)};return Object.defineProperty(r,"name",{value:"media_sigma"}),r},Bh=function(e){var t=e||5,r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=Ch(e),i=n.length<=r?n.length-1:r;e.sort((function(e,t){return e-t}));for(var o=0,a=1;a<=i;a+=1)o+=a;for(var s=e[0],l=e[e.length-1],u=(l-s)/o,c=[],f=s,h=1;h<=i;h+=1)f+=h*u,h===i&&(f=l),c.push(f);return c};return Object.defineProperty(r,"name",{value:"arithmetic_progression"}),r},Lh=function(e){var t=e||5,r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=Ch(e);if(Ph(n)||function(e){for(var t=0;t<e.length;t+=1)if(0===parseFloat(e[t]))return!0;return!1}(n))return[];var i=n.length<=r?n.length-1:r;e.sort((function(e,t){return e-t}));for(var o=e[0],a=e[e.length-1],s=Math.log(o)/Math.LN10,l=(Math.log(a)/Math.LN10-s)/i,u=[],c=s,f=1;f<i;f+=1)c+=l,u.push(Math.pow(10,c));return u.push(a),u};return Object.defineProperty(r,"name",{value:"geometric_progression"}),r},Dh={DONUT:"donut",PIE_3D:"pie3D",PIE:"pie",BAR:"bar"},jh={Custom:"m.style.chart.types.custom_scheme",Classic:["#ffa500","blue","red","green","cyan","magenta","yellow","#0f0"],Dark:["#960","#003","#900","#060","#099","#909","#990","#090"],Pale:["#fd0","#369","#f64","#3b7","#880","#b5d","#666"],Pastel:["#fb4","#79c","#f66","#7d7","#acc","#fdd","#ff9","#b9b"],Neon:["#ff0","#0ff","#0f0","#f0f","#f00","#00f"]},Fh=__webpack_require__(42755),Nh=__webpack_require__(80417),Zh=__webpack_require__(71085),Uh=__webpack_require__(73475),Qh=__webpack_require__(30386),Gh=__webpack_require__(56880),zh=__webpack_require__(73579),qh=__webpack_require__(81971),Vh=__webpack_require__(36184),Wh=function(e,t){return new Vh.Z((function(r){return null!=r.getAttribute(e)&&r.getAttribute(e)<=t}),{cqlFilter:"".concat(e," <= '").concat(t,"'")})},Kh=__webpack_require__(46329);function Hh(e){return Hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(e)}function Yh(e){return function(e){if(Array.isArray(e))return $h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||Jh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jh(e,t){if(e){if("string"==typeof e)return $h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$h(e,t):void 0}}function $h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ep(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Hh(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Hh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Hh(o)?o:String(o)),n)}var i,o}function tp(){return tp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ip(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},tp.apply(this,arguments)}function rp(e,t){return rp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rp(e,t)}function np(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ip(e);if(t){var i=ip(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Hh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ip(e){return ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ip(e)}var op=function(e){var t=Math.pow(10,2);return Math.round(e*t)/t},ap=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rp(e,t)}(o,e);var t,r,n,i=np(o);function o(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Th(),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r=i.call(this,a,{}),(0,_h.Ew)(e)&&(0,qh.Z)((0,xh.NA)("exception").no_attr_name),r.attributeName_=e,r.choroplethStyles_=t,r.quantification_=n,r.breakPoints_=[],r.borderColor=a.borderColor,r}return t=o,r=[{key:"applyInternal",value:function(e){this.layer_=e,this.update_()}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(e){return this.attributeName_=e,this.update_(),this.refresh(),this}},{key:"getQuantification",value:function(){return this.quantification_}},{key:"setQuantification",value:function(e){if(this.quantification_=e,!this.choroplethStyles_.some((function(e){return(0,_h.HD)(e)}))){var t=this.getValues();if(this.choroplethStyles_.length<this.quantification_(t).length){var r=Xh(this.choroplethStyles_,2),n=r[0],i=r[1],o=this.layer_.getGeometryType().toLowerCase(),a=n.get("fill.color")?n.get("fill.color"):n.get("".concat(o,".fill.color")),s=i.get("fill.color")?i.get("fill.color"):i.get("".concat(o,".fill.color"));(0,_h.Ew)(a)&&(a=n.get("stroke.color")),(0,_h.Ew)(s)&&(s=i.get("stroke.color")),this.choroplethStyles_=[a,s]}else this.choroplethStyles_=this.choroplethStyles_.slice(0,this.quantification_(t).length);this.update_(),this.refresh()}return this}},{key:"getChoroplethStyles",value:function(){return this.choroplethStyles_}},{key:"setStyles",value:function(e){var t=e;return(0,_h.kJ)(t)||(t=[t]),this.choroplethStyles_=t,this.update_(),this.refresh(),this}},{key:"updateCanvas",value:function(){var e=this;if(!(0,_h.Ew)(this.choroplethStyles_)&&this.breakPoints_.length>0){var t=[];this.updateCanvasPromise_=new Promise((function(r,n){e.loadCanvasImages_(0,t,r)}))}}},{key:"loadCanvasImages_",value:function(e,t,r){var n=this;if(e===this.choroplethStyles_.length)this.drawGeometryToCanvas(t,r);else{var i=-1;e>0&&(i=Number(this.breakPoints_[e-1].toFixed(1)));var o=Number(this.breakPoints_[e].toFixed(1)),a=new Image;a.crossOrigin="Anonymous",a.onload=function(){t.push({image:a,startLimit:op(i),endLimit:op(o)}),n.loadCanvasImages_(e+1,t,r)},a.onerror=function(){t.push({startLimit:op(i),endLimit:op(o)}),n.loadCanvasImages_(e+1,t,r)},this.choroplethStyles_[e].updateCanvas();var s=this.choroplethStyles_[e].toImage();(0,_h.HD)(s)?a.src=s:s.then((function(e){a.src=e}))}}},{key:"drawGeometryToCanvas",value:function(e,t){var r=this,n=e.map((function(e){return e.image.height})),i=e.map((function(e){return e.image.width})),o=this.canvas_.getContext("2d");o.canvas.height=n.reduce((function(e,t){return e+t+5})),o.textBaseline="middle";var a=Math.max.apply(i,i);e.forEach((function(e,t){var i=e.image,s=e.startLimit,l=e.endLimit,u=0,c=n.slice(0,t);(0,_h.Ew)(c)||(u=c.reduce((function(e,t){return e+t+5})),u+=5);var f=0;(0,_h.Ew)(i)||(f=i.height,o.drawImage(i,0,u)),s<0?o.fillText(" x  <=  ".concat(l),a+5,u+f/2):"media_sigma"===r.quantification_.name&&l===Number(Math.max.apply(Math,Yh(r.getValues())).toFixed(1))?o.fillText("".concat(s," <= x"),a+5,u+f/2):o.fillText("".concat(s," <  x  <=  ").concat(l),a+5,u+f/2)}),this),t()}},{key:"getValues",value:function(){var e=this,t=[];return(0,_h.Ew)(this.layer_)||this.layer_.getFeatures().forEach((function(r){try{var n=parseFloat(r.getAttribute(e.attributeName_));Number.isNaN(n)||t.push(n)}catch(e){}}),this),t}},{key:"update_",value:function(){var e,t,r=this;if(!(0,_h.Ew)(this.layer_)){var n=this.layer_.getFeatures();if(!(0,_h.Ew)(n)){var i=this.getValues();if((0,_h.Ew)(this.choroplethStyles_)||!(0,_h.Ew)(this.choroplethStyles_)&&((0,_h.HD)(this.choroplethStyles_[0])||(0,_h.HD)(this.choroplethStyles_[1]))){this.breakPoints_=this.quantification_(i);var a=this.choroplethStyles_||[];(0,_h.o8)(a[0])&&a.push(o.START_COLOR_DEFAULT),(0,_h.o8)(a[1])&&a.push(o.END_COLOR_DEFAULT);var s=this.breakPoints_.length,l=(0,_h.G)(a,s);(0,_h.kJ)(l)||(l=[l]),this.choroplethStyles_=(e=l,t=o.DEFAULT_STYLE,e.map((function(e){return t(e,r.borderColor)})))}else this.breakPoints_=this.quantification_(i,this.choroplethStyles_.length)}for(var u=function(e){new Wh(r.attributeName_,r.breakPoints_[e]).execute(n).forEach((function(t){return t.setStyle(r.choroplethStyles_[e])}))},c=this.breakPoints_.length-1;c>-1;c-=1)u(c);this.updateCanvas()}}},{key:"add",value:function(e){var t=e;return(0,_h.kJ)(t)||(t=[t]),t=t.filter((function(e){return e instanceof Kh.Z||e instanceof vp})),tp(ip(o.prototype),"add",this).call(this,t)}},{key:"ORDER",get:function(){return 2}},{key:"toJSON",value:function(){var e=this.getAttributeName(),t=this.getChoroplethStyles().map((function(e){return e.serialize()})),r=this.getQuantification();r=(0,_h.Ew)(r.name)?(0,_h.sV)(r):r.name;var n=(0,_h.cU)({},this.getOptions());return{parameters:[e,t,r,n=(0,_h.sV)(n),this.getStyles().map((function(e){return e.serialize()}))],deserializedMethod:"M.style.Choropleth.deserialize"}}}],n=[{key:"DEFAULT_STYLE",value:function(e,t){return new zh.Z({point:{fill:{color:e,opacity:1},stroke:{color:t||"black",width:1},radius:5},line:{fill:{color:e,opacity:1},stroke:{color:t||"black",width:1}},polygon:{fill:{color:e,opacity:1},stroke:{color:t||"black",width:1}}})}},{key:"deserialize",value:function(e){var t,r=Xh(e,5),n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],l=n,u=i.map((function(e){return Zh.Z.deserialize(e)}));t="jenks"===o?Th():"quantile"===o?Mh():"equal_interval"===o?kh():"geometric_progression"===o?Lh():"arithmetic_progression"===o?Bh():"media_sigma"===o?Rh():(0,_h.Q8)(o);var c=(0,_h.Q8)(a),f=new Function(["attributeName","styles","quantification","options"],"return new M.style.Choropleth(attributeName, styles, quantification, options)")(l,u,t,c),h=s.map((function(e){return Zh.Z.deserialize(e)}));return f.add(h),f}}],r&&ep(t.prototype,r),n&&ep(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Uh.Z);ap.START_COLOR_DEFAULT="red",ap.END_COLOR_DEFAULT="brown";const sp=ap;function lp(e){return lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(e)}function up(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==lp(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==lp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===lp(o)?o:String(o)),n)}var i,o}function hp(e,t){return hp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hp(e,t)}function pp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=dp(e);if(t){var i=dp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===lp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function dp(e){return dp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dp(e)}var yp=function(e,t){var r=void 0,n=void 0,i=e.filter((function(e){return![NaN,void 0,null].includes(e.getAttribute(t))})).map((function(e){return parseInt(e.getAttribute(t),10)})),o=1;if(!(0,_h.Ew)(i))for(r=i[0],n=i[0];o<i.length-1;){var a=i[o+1];r=r<a?r:a,n=n<a?a:n,o+=1}return[r,n]},gp=function(e,t,r,n,i){var o=.57*Math.log(e);return Math.exp(o)/(Math.exp(.57*Math.log(r))/i)},mp=function(e,t,r,n,i){return(e-t)*(i-n)/(r-t)+n},_p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hp(e,t)}(o,e);var t,r,n,i=pp(o);function o(e,t,r,n,a){var s,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),s=i.call(this,l,{}),(0,_h.Ew)(e)&&(0,qh.Z)((0,xh.NA)("exception").no_attr_name),s.attributeName_=e,s.minRadius_=parseInt(t,10)||5,s.maxRadius_=parseInt(r,10)||15,s.style_=n,s.proportionalFunction_=a||(!0===s.options_.flannery?gp:mp),s.maxRadius_<s.minRadius_&&(s.minRadius_=r,s.maxRadius_=t),(0,_h.Ew)(s.style_)||s.styles_.push(s.style_),s}return t=o,r=[{key:"applyInternal",value:function(e){this.layer_=e,this.update_()}},{key:"applyToFeature",value:function(e,t){var r=this.style_;if((0,_h.Ew)(r)&&(r=e.getStyle()?e.getStyle():this.layer_.getStyle()),!(0,_h.Ew)(r)){r instanceof zh.Z?r=new Qh.Z(r.getOptions().point):!(r instanceof Qh.Z)&&r instanceof Gh.Z||r instanceof sp?r=new Qh.Z(r.getOptions()):r instanceof Uh.Z&&(r=new Qh.Z(r.getOldStyle().getOptions()));var n=this.calculateStyle_(e,{minRadius:this.minRadius_,maxRadius:this.maxRadius_,minValue:this.minValue_,maxValue:this.maxValue_},r);e.setStyle(n)}}},{key:"update_",value:function(){var e=this;if(!(0,_h.Ew)(this.layer_)){(0,_h.Ew)(this.style_)||this.layer_.setStyle(this.style_,!0),this.layer_.getStyle()instanceof sp?this.oldStyle_=this.layer_.getStyle():this.layer_.getStyle()instanceof Uh.Z?this.oldStyle_=this.layer_.getStyle().getOldStyle():this.oldStyle_=this.layer_.getStyle();var t=up(yp(this.layer_.getFeatures(),this.attributeName_),2);this.minValue_=t[0],this.maxValue_=t[1],this.layer_.getFeatures().forEach((function(t){return e.applyToFeature(t,1)}));var r=this.oldStyle_.clone();r instanceof Gh.Z&&(r.set("zindex",(function(t){return e.maxValue_-parseFloat(t.getAttribute(e.attributeName_))})),r.set(o.getSizeAttribute(r),(function(t){var r=o.SCALE_PROPORTION,n=t.getAttribute(e.attributeName_),i=[n,e.minValue_,e.maxValue_,e.minRadius_,e.maxRadius_],a=e.proportionalFunction_.apply(e,i);if("icon.scale"===o.getSizeAttribute(e.oldStyle_)){var s=e.minRadius_/r,l=e.maxRadius_/r,u=[n,e.minValue_,e.maxValue_,s,l];a=e.proportionalFunction_.apply(e,u)}return a})),this.updateCanvas())}}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(e){return this.attributeName_=e,this.update_(),this}},{key:"getStyle",value:function(){return console.warn("Deprecated function: Use getStyles instead."),this.style_}},{key:"setStyle",value:function(e){return this.style_=e,this.update_(),this}},{key:"getMinRadius",value:function(){return this.minRadius_}},{key:"setProportionalFunction",value:function(e){this.proportionalFunction_=e,this.update_()}},{key:"getProportionalFunction",value:function(){return this.proportionalFunction_}},{key:"setMinRadius",value:function(e){return this.minRadius_=parseInt(e,10),e>=this.maxRadius_&&(0,qh.Z)((0,xh.NA)("exception").min_gt_max),this.update_(),this}},{key:"getMaxRadius",value:function(){return this.maxRadius_}},{key:"setMaxRadius",value:function(e){return this.maxRadius_=parseInt(e,10),e<=this.minRadius_&&(0,qh.Z)((0,xh.NA)("exception").max_lt_min),this.update_(),this}},{key:"updateCanvas",value:function(){var e=this;this.updateCanvasPromise_=new Promise((function(t,r){if(!(0,_h.Ew)(e.layer_)){var n=e.styles_.filter((function(e){return e instanceof Gh.Z}))[0],i=(0,_h.Ew)(n)?e.layer_.getStyle():n;if((i=(0,_h.Ew)(i)?e.style_:i)instanceof Gh.Z){var a=i.clone();a instanceof zh.Z?a=new Qh.Z(a.getOptions().point):a instanceof Qh.Z||(a=new Qh.Z(a.getOptions()));var s=o.getSizeAttribute(a),l=a.clone(),u=a.clone(),c=e.getMaxRadius(),f=e.getMinRadius();l.set(s,c),u.set(s,f),e.loadCanvasImage(c,l.toImage(),(function(r){e.loadCanvasImage(f,u.toImage(),(function(n){e.drawGeometryToCanvas(r,n,t)}))}))}else(0,_h.Ew)(i)||(e.canvas_=i.canvas,t())}}))}},{key:"loadCanvasImage",value:function(e,t,r){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){r({image:n,value:e})},n.onerror=function(){r({value:e})},n.src=t}},{key:"drawGeometryToCanvas",value:function(e,t,r){var n=e.image,i=t.image;this.canvas_.height=n.height+5+i.height+5;var o=this.canvas_.getContext("2d");o.textBaseline="middle";var a=0,s=0;if((0,_h.Ew)(n)||(a=n.width+5,s=n.height/2,/^https?:\/\//i.test(n.src)?(this.canvas_.height=130,o.fillText("  max: ".concat(this.maxValue_),85,40),o.drawImage(n,0,0,80,80)):(o.fillText("  max: ".concat(this.maxValue_),a,s),o.drawImage(n,0,0))),!(0,_h.Ew)(i)){var l=0;(0,_h.Ew)(n)||(l=n.width/2-i.width/2);var u=n.height+5;s=u+i.height/2,/^https?:\/\//i.test(i.src)?(o.fillText("  min: ".concat(this.minValue_),85,105),o.drawImage(i,20,85,40,40)):(o.fillText("  min: ".concat(this.minValue_),a,s),o.drawImage(i,l,u))}r()}},{key:"calculateStyle_",value:function(e,t,r){var n=this.proportionalFunction_,i=r;if(!(0,_h.Ew)(i)){i=i.clone();var a=[t.minRadius,t.maxRadius],s=a[0],l=a[1];(0,_h.Ew)(i.get("icon.src"))||(s=t.minRadius/o.SCALE_PROPORTION,l=t.maxRadius/o.SCALE_PROPORTION);var u=e.getAttribute(this.attributeName_);null==u&&console.warn("Warning: ".concat(this.attributeName_," value is null or empty."));var c=n(u,t.minValue,t.maxValue,s,l),f=t.maxValue-parseFloat(e.getAttribute(this.attributeName_));i.set("".concat(o.getSizeAttribute(i)),c),i.set("zindex",f)}return i}},{key:"ORDER",get:function(){return 3}},{key:"toJSON",value:function(){var e=this.getAttributeName(),t=this.getMinRadius(),r=this.getMaxRadius(),n=this.getStyles().map((function(e){return e.serialize()})),i=(0,_h.sV)(this.getProportionalFunction()),o=(0,_h.cU)({},this.getOptions());return{parameters:[e,t,r,n,i,o=(0,_h.sV)(o)],deserializedMethod:"M.style.Proportional.deserialize"}}}],n=[{key:"getSizeAttribute",value:function(e){var t="radius";return(0,_h.Ew)(e.get("icon"))||(t=(0,_h.Ew)(e.get("icon.src"))?"icon.radius":"icon.scale"),t}},{key:"deserialize",value:function(e){var t=up(e,6),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=r,u=n,c=i,f=(0,_h.Q8)(a),h=(0,_h.Q8)(s),p=new Function(["attributeName","minRadius","maxRadius","style","proportionalFunction","options"],"return new M.style.Proportional(attributeName,\n    minRadius, maxRadius, style, proportionalFunction, options)")(l,u,c,void 0,f,h),d=o.map((function(e){return Zh.Z.deserialize(e)}));return p.add(d),p}}],r&&fp(t.prototype,r),n&&fp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Uh.Z);_p.SCALE_PROPORTION=20;const vp=_p;var Ap=__webpack_require__(54414),bp=__webpack_require__(70992),wp=__webpack_require__(55395),Ep=__webpack_require__(68524),xp=__webpack_require__(50729),Ip=__webpack_require__(14279),Sp=__webpack_require__(17195),Cp=__webpack_require__(9220),Pp=__webpack_require__(13754),Op=__webpack_require__(76732);function Tp(e){return Tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(e)}function Mp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Tp(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Tp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Tp(o)?o:String(o)),n)}var i,o}const kp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeName_=t.attribute||null,this.label_=t.label||null,this.fillColor_=t.fill||null,this.legend_=t.legend||null}var t,r,n;return t=e,(r=[{key:"attribute",get:function(){return this.attributeName_},set:function(e){this.attributeName_=e}},{key:"label",get:function(){return this.label_},set:function(e){this.label_=e}},{key:"fillColor",get:function(){return this.fillColor_},set:function(e){this.fillColor_=e}},{key:"legend",get:function(){return this.legend_},set:function(e){this.legend_=e}}])&&Mp(t.prototype,r),n&&Mp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Rp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||Lp(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bp(e){return function(e){if(Array.isArray(e))return Dp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Lp(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lp(e,t){if(e){if("string"==typeof e)return Dp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dp(e,t):void 0}}function Dp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jp(e){return jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(e)}function Fp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==jp(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==jp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===jp(o)?o:String(o)),n)}var i,o}function Np(e,t){return Np=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Np(e,t)}function Zp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Up(e);if(t){var i=Up(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===jp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Up(e){return Up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Up(e)}var Qp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Np(e,t)}(o,e);var t,r,n,i=Zp(o);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=e,r=t.variables||null;if(Object.values(Dh).includes(t.type)||(t.type=o.DEFAULT.type),(0,_h.Ew)(r)||(r instanceof Array?t.variables=r.filter((function(e){return null!=e})).map((function(e){return o.formatVariable(e)})):"string"==typeof r||"object"===jp(r)?t.variables=[o.formatVariable(r)]:t.variables=[]),(0,_h.Ew)(t.scheme))t.scheme=o.DEFAULT.scheme;else if("string"==typeof t.scheme){var n=t.variables.some((function(e){return null!=e.fillColor}));t.scheme===jh.Custom&&n?t.scheme=t.variables.map((function(e){return e.fillColor?e.fillColor:""})):t.scheme=jh[t.scheme]||o.DEFAULT.scheme}else t.scheme instanceof Array&&t.scheme.every((function(e){return"string"==typeof e}))||(t.scheme=o.DEFAULT.scheme);var a=new vd(t);return i.call(this,t,a)}return t=o,r=[{key:"updateCanvas",value:function(){(0,_h.Ew)(this.getImpl())&&(0,_h.Ew)(this.canvas_)||this.getImpl().updateCanvas(this.canvas_)}},{key:"apply",value:function(e){var t=this;this.layer_=e,e.getFeatures().forEach((function(e){return e.setStyle(t.clone())})),this.updateCanvas()}},{key:"ORDER",get:function(){return 1}},{key:"toJSON",value:function(){var e=this.getOptions();return{parameters:[{type:e.type,radius:e.radius,donutRadio:e.donutRadio,offsetX:e.offsetX,offsetY:e.offsetY,stroke:(0,_h.Ew)(e.stroke)?void 0:(0,_h.cU)({},e.stroke),fill3DColor:e.fill3DColor,scheme:(0,_h.kJ)(e.scheme)?Bp(e.scheme):e.scheme,label:(0,_h.Ew)(e.label)?void 0:(0,_h.cU)({},e.label),rotateWithView:e.rotateWithView,variables:e.variables.map((function(e){var t;return(0,_h.Ew)(e.label)||(t=(0,_h.cU)({},e.label),t=(0,_h.sV)(t)),{attribute:e.attribute,legend:e.legend,fill:e.fillColor,label:t}}))}],deserializedMethod:"M.style.Chart.deserialize"}}}],n=[{key:"formatVariable",value:function(e){return null==e?null:e instanceof kp?e:new kp("string"==typeof e?{attribute:e}:e)}},{key:"deserialize",value:function(e){var t=Rp(e,1)[0],r=t;return r.variables=t.variables.map((function(e){return new kp((0,_h.Q8)(e))})),new Function(["options"],"return new M.style.Chart(options)")(r)}}],r&&Fp(t.prototype,r),n&&Fp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Op.Z);Qp.DEFAULT={shadow3dColor:"#369",type:Dh.PIE,scheme:jh.Classic,radius:20,donutRatio:.5,offsetX:0,offsetY:0,animationStep:1};const Gp=Qp;function zp(e){return zp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(e)}function qp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==zp(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==zp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===zp(o)?o:String(o)),n)}var i,o}function Vp(e,t){return Vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vp(e,t)}function Wp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Kp(e);if(t){var i=Kp(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Kp(e){return Kp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kp(e)}var Hp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vp(e,t)}(o,e);var t,r,n,i=Wp(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=(0,_h.Ew)(t.stroke)?0:t.stroke.getWidth();return e=i.call(this,{radius:("number"==typeof t.radius?t.radius:0)+r,fill:new nt.Z({color:[0,0,0]}),rotation:"number"==typeof t.rotation?t.rotation:0,snapToPixel:"boolean"==typeof t.snapToPixel&&t.snapToPixel}),t.scale&&e.setScale(t.scale),e.variables_=t.variables||[],e.stroke_=t.stroke||null,e.radius_=t.radius||0,e.donutRatio_=t.donutRatio||0,e.type_=t.type||null,e.offset_=[t.offsetX?t.offsetX:0,t.offsetY?t.offsetY:0],e.animation_={animate:"number"==typeof t.animation,step:"number"==typeof t.animation?t.animation:Gp.DEFAULT.animationStep},e.data_=t.data||null,e.colors_=t.scheme instanceof Array?t.scheme:[],e.fill3DColor_=t.fill3DColor||"#000",e.rotateWithView_=t.rotateWithView||!1,e.renderChart_(),e}return t=o,r=[{key:"clone",value:function(){var e=new o({type:this.type_,radius:this.radius_,colors:this.colors_,rotation:this.getRotation(),scale:this.getScale(),donutRatio:this.donutRatio_,data:this.data_,stroke:this.stroke_,scheme:this.colors_,offsetX:this.offset_[0],offsetY:this.offset_[1],animation:this.animation_,fill3DColor:this.fill3DColor_,rotateWithView:this.rotateWithView_});return e.setScale(this.getScale()),e.setOpacity(this.getOpacity()),e}},{key:"data",get:function(){return this.data_},set:function(e){this.data_=e,this.renderChart_()}},{key:"radius",get:function(){return this.radius_},set:function(e){this.radius_=e,this.renderChart_()}},{key:"setRadius",value:function(e,t){this.donutRatio_=t||this.donutRatio_,this.radius=e}},{key:"setAnimation",value:function(e){if(!1===e){if(!1===this.animation_.animate)return;this.animation_.animate=!1}else{if(this.animation_.step===e)return;this.animation_.animate=!0,this.animation_.step=e}this.renderChart_()}},{key:"getChecksum",value:function(){var e,t=null!==this.stroke_?this.stroke_.getChecksum():"-";if(null===this.checksums_||t!==this.checksums_[1]||e!==this.checksums_[2]||this.radius_!==this.checksums_[3]||this.data_.join("|")!==this.checksums_[4]){var r=this.radius_?this.radius_.toString():"-",n="c".concat(t).concat(e).concat(r).concat(this.data_.join("|"));this.checksums_=[n,t,e,this.radius_,this.data_.join("|")]}return this.checksums_[0]}},{key:"renderChart_",value:function(e){switch(this.type_){case Dh.DONUT:case Dh.PIE_3D:case Dh.PIE:this.renderCircleChart();break;default:this.renderBarChart()}}},{key:"renderBarChart",value:function(){var e,t=this,r=this.getImage(1),n=r.getContext("2d"),i=0,o=this.animation_.animate?this.animation_.step:1;this.stroke_&&(e=(0,Ke.XC)(this.stroke_.getColor()),i=this.stroke_.getWidth());var a,s=Math.max.apply(null,this.data_)||0,l=Math.min(5,2*this.radius_/this.data_.length),u=r.width-(i||0),c=r.width/2,f=c-this.data_.length*l/2;e&&(n.strokeStyle=e,n.lineWidth=i),this.data_.sort((function(e,t){return e-t})).forEach((function(r,i){n.beginPath(),n.fillStyle=t.colors_[i%t.colors_.length],a=f+l;var c=r/s*2*t.radius_*o;n.rect(f,u-c,l,c),n.closePath(),n.fill(),e&&n.stroke(),f=a}));var h=this.getAnchor();h[0]=c-this.offset_[0],h[1]=c-this.offset_[1]}},{key:"renderCircleChart",value:function(){var e,t=0;this.stroke_&&(e=(0,Ke.XC)(this.stroke_.getColor()),t=this.stroke_.getWidth());var r=this.getImage(1),n=r.getContext("2d");n.clearRect(0,0,r.width,r.height),n.lineJoin="round";var i=0;!(0,_h.Ew)(this.data_)&&this.data_.length>0&&(i=this.data_.reduce((function(e,t){return e+t}))),n.setTransform(1,0,0,1,0,0),n.translate(0,0);var o=this.animation_.animate?this.animation_.step:1,a=Math.PI*(o-1.5),s=r.width/2;e&&(n.strokeStyle=e,n.lineWidth=t),n.save(),this.type_===Dh.PIE_3D?this.drawPie3D(n,a,s,o,e,i):this.type_===Dh.DONUT?this.drawDonut(n,a,s,o,e,t,i):this.drawPie(n,a,s,o,e,i),n.restore();var l=this.getAnchor();l[0]=s-this.offset_[0],l[1]=s-this.offset_[1]}},{key:"drawDonut",value:function(e,t,r,n,i,o,a){var s=e;s.save(),s.beginPath(),s.rect(0,0,2*r,2*r),s.arc(r,r,this.radius_*n*this.donutRatio_,0,2*Math.PI),s.clip("evenodd");var l=this.drawPie(s,t,r,n,i,a);s.restore(),s.beginPath(),s.strokeStyle=i,s.lineWidth=o;var u=this.radius_;s.arc(r,r,u*n*this.donutRatio_,Math.PI*(n-1.5),l),i&&s.stroke()}},{key:"drawPie3D",value:function(e,t,r,n,i,o){var a=e;a.translate(0,.3*r),a.scale(1,.7),a.beginPath(),a.fillStyle=this.fill3DColor_,a.arc(r,1.4*r,this.radius_*n,0,2*Math.PI),a.fill(),i&&a.stroke(),this.drawPie(e,t,r,n,i,o)}},{key:"drawPie",value:function(e,t,r,n,i,o){var a,s=this,l=t,u=e;return this.data_.forEach((function(e,t){u.beginPath(),u.moveTo(r,r),u.fillStyle=s.colors_[t%s.colors_.length],a=l+2*Math.PI*e/(o*n),u.arc(r,r,s.radius_*n,l,a),u.closePath(),u.fill(),i&&u.stroke(),l=a})),l}}],r&&qp(t.prototype,r),n&&qp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(et.Z);const Yp=Hp;var Xp=__webpack_require__(45103),Jp=__webpack_require__(71160);function $p(e){return $p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(e)}function ed(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==$p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==$p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===$p(o)?o:String(o)),n)}var i,o}function td(e,t){return td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},td(e,t)}function rd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=nd(e);if(t){var i=nd(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function nd(e){return nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nd(e)}var id=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&td(e,t)}(o,e);var t,r,n,i=rd(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return t=o,r&&ed(t.prototype,r),n&&ed(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(Jp.Z);const od=id;var ad=__webpack_require__(56422);function sd(e){return sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sd(e)}function ld(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ud(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ud(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ud(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==sd(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==sd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===sd(o)?o:String(o)),n)}var i,o}function fd(e,t){return fd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fd(e,t)}function hd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=pd(e);if(t){var i=pd(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===sd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function pd(e){return pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pd(e)}var dd=function(e){var t=e;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i.filter((function(e){return null!=e})).forEach((function(e){return Object.keys(e).forEach((function(r){Object.prototype.hasOwnProperty.call(e,r)&&!Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=e[r])}))})),r},yd=function(e,t,r,n){var i;return i="0"===(i="function"==typeof e.text?e.text(n,r.data,t):"".concat(ad.Z.getValue(e.text,t))||"")?"":i},gd=function(e,t,r){var n=0,i=null,o=t.variables,a=t.data,s=e.concat(t.data.map((function(s,l){var u=o.length===a.length?o[l]:o[0],c=u.label||{};if(!u.label)return null;var f=yd(c,r,t,s),h=ad.Z.getValue(c.font,r);(0,_h.Ew)(i)?i=e[0].getImage().getImage().height/2-6:i-=15,n=n+9+6;var p=-e[0].getImage().getImage().width/2-(1+t.offsetX)||0;return new Xp.Z({text:new Je.Z({text:"string"==typeof f?"".concat(f):"",offsetY:i+t.offsetY||0,offsetX:p,textBaseline:"middle",rotateWithView:!1,textAlign:"center",stroke:c.stroke?new $e.Z({}):void 0,font:"9px ".concat(h),scale:"number"==typeof c.scale?ad.Z.getValue(c.scale,r):void 0,fill:new nt.Z({color:t.scheme[l%t.scheme.length]})})})}))),l=s.filter((function(e){return null!=e}));n=Math.max(n,1);var u=-e[0].getImage().getImage().width/2+10+t.offsetX,c=e[0].getImage().getImage().height/2+t.offsetY,f=new rt.Z({anchor:[u,c],anchorOrigin:"bottom-right",offsetOrigin:"bottom-left",anchorXUnits:"pixels",anchorYUnits:"pixels",rotateWithView:!1,src:"data:image/svg+xml;base64,".concat(window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(e[0].getImage().getImage().width/2,'" height="').concat(n,'"><rect width="').concat(s[0].getImage().getImage().width/2,'" height="').concat(n,'" fill="rgba(255, 255, 255, 0.75)" stroke-width="0" stroke="rgba(0, 0, 0, 0.34)"/></svg>'))),size:[s[0].getImage().getImage().width/2,n]});return l.push(new J.ZP({image:f})),l},md=function(e,t,r){var n=0,i=t.data.reduce((function(e,t){return e+t})),o=t.variables,a=t.data;return e.concat(t.data.map((function(e,s){var l=o.length===a.length?o[s]:o[0],u=l.label||{},c=u.radius?u.radius:t.radius,f=(2*n+e)/i*Math.PI-Math.PI/2;if(n+=e,!l.label)return null;var h="number"==typeof u.radiusIncrement?u.radiusIncrement:3,p="function"==typeof u.textAlign?u.textAlign(f):null;(0,_h.Ew)(p)&&(p=u.textAlign||(f<Math.PI/2?"left":"right"));var d=yd(u,r,t,e),y=ad.Z.getValue(u.font,r),g=new nt.Z({color:ad.Z.getValue(u.fill,r)||"#000"}),m=new $e.Z({color:ad.Z.getValue(u.stroke.color,r)||"#000",width:ad.Z.getValue(u.stroke.width,r)||1}),_=Math.cos(f)*(c+h+t.offsetX)||0,v=Math.sin(f)*(c+h+t.offsetY)||0,A=new Je.Z({text:"string"==typeof d?"".concat(d):"",offsetX:"number"==typeof u.offsetX?ad.Z.getValue(u.offsetX,r):_,offsetY:"number"==typeof u.offsetY?ad.Z.getValue(u.offsetY,r):v,textAlign:ad.Z.getValue(p,r),textBaseline:ad.Z.getValue(u.textBaseline,r)||"middle",stroke:u.stroke?m:void 0,font:/^([1-9])[0-9]*px ./.test(y)?y:"12px ".concat(y),scale:"number"==typeof u.scale?ad.Z.getValue(u.scale,r):void 0,fill:g});return new Xp.Z({text:A})}))).filter((function(e){return null!=e}))},_d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fd(e,t)}(o,e);var t,r,n,i=hd(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),dd(t,Gp.DEFAULT),(e=i.call(this,t)).variables_=t.variables||[],e.colorsScheme_=t.scheme||[],e}return t=o,r=[{key:"updateCanvas",value:function(e){if(!(0,_h.Ew)(e)){var t=e.getContext("2d");this.drawGeometryToCanvas(t)}}},{key:"drawGeometryToCanvas",value:function(e){var t=this,r=e;if(!(0,_h.Ew)(r)&&!(0,_h.Ew)(r.canvas)){var n=o.CANVAS_PROPS.fixedProps,i=o.CANVAS_PROPS.width;r.canvas.setAttribute("width",i),r.width=i;var a=[],s={};Object.keys(o.CANVAS_PROPS.percentages).forEach((function(e){s[e]=i*(o.CANVAS_PROPS.percentages[e]/100)}));var l=[s.left_right_content,n.top_content],u=l[0],c=l[1],f=function(e,i,o){var l=ld(e,2),u=l[0],c=l[1];c+=n.item_top_margin,a.push(function(e){var t=e.context;t.beginPath(),t.strokeStyle=e.strokeColor,t.lineWidth=e.width,t.fillStyle=e.color,t.rect(e.x,e.y,e.rectSize,e.rectSize),t.closePath(),t.stroke(),t.fill()}.bind(t,{context:r,strokeColor:"#000",width:n.rect_border_width,color:o,x:u,y:c,rectSize:n.rect_size})),u+=s.item_side_margin+n.rect_size;var f=(c+=n.rect_size/1.5)+n.item_top_margin,h=function(e,i,o,s,l){var u=o.split(" "),c="",f=i[0],h=i[1];return a.push(function(e){var t=e.context;t.font="".concat(e.fontSize,"px ").concat(e.fontFamily),t.strokeStyle=e.strokeColor,t.strokeWidth=e.strokeWidth,t.fillStyle=e.textColor}.bind(t,{context:r,fontSize:n.font_size,fontFamily:n.font_family,strokeColor:n.text_stroke_color,strokeWidth:n.text_stroke_width,textColor:n.text_color})),u.forEach((function(e,n){r.measureText("".concat(c+e)).width>s&&n>0?(a.push(function(e,t,r,n){e.strokeText(t,r,n),e.fillText(t,r,n)}.bind(t,r,c,f,h)),c="".concat(e," "),h+=l):c="".concat(c+e," ")})),a.push(function(e,t,r,n){e.strokeText(t,r,n),e.fillText(t,r,n)}.bind(t,r,c,f,h)),[f,h]}(0,[u,c],i,s.max_text_width,s.max_text_line_height);return[h[0],h[1]>f?h[1]:f]};this.variables_.forEach((function(e,r){var n=(0,_h.Ew)(e.legend)?e.attribute:e.legend,i=(0,_h.Ew)(e.fillColor)?t.colorsScheme_[r%t.colorsScheme_.length]||t.colorsScheme_[0]:e.fillColor,o=ld(f([u,c],n,i),2);u=o[0],c=o[1],u=s.left_right_content})),c+=n.top_content,r.canvas.setAttribute("height",c),r.save(),a.forEach((function(e){return e()})),r.restore()}}},{key:"updateFacadeOptions",value:function(e){var t=this,r=e;r.rotateWithView=!1,this.olStyleFn_=function(e,n){var i=e;i instanceof D.Z||(i=t);var o=t.formatDataRecursively_(r,i),a=[];if(t.variables_.forEach((function(e){var t=i.get(e.attribute);t=parseFloat(t),a=a.concat(t instanceof Array?t:[t]).filter((function(e){return null!=e}))})),0===a.length)throw new Error("cannot draw an empty data chart");o.data=a,(0,_h.Ew)(r.stroke)||(o.stroke=new $e.Z(r.stroke));var s=[new Xp.Z({geometry:function(e){var t=Cp.Z.getCentroid(e.getGeometry());return new q.Z(t)},image:new Yp(o)})];return"bar"!==o.type?1!==r.variables.length&&r.variables.length!==a.length||(s=s.concat(md(s,o,i))):"bar"===o.type&&(s=s.concat(gd(s,o,i))),function(e,t,r){if(!(0,_h.Ew)(e.label)){var n=new J.ZP,i=ad.Z.getValue(e.label.text,r),o=ad.Z.getValue(e.label.align,r),a=ad.Z.getValue(e.label.baseline,r),s=e.label.offset?e.label.offset[0]:void 0,l=e.label.offset?e.label.offset[1]:void 0,u=new nt.Z({color:ad.Z.getValue(e.label.color||"#000000",r)}),c=new Je.Z({font:ad.Z.getValue(e.label.font,r),rotateWithView:ad.Z.getValue(e.label.rotate,r),scale:ad.Z.getValue(e.label.scale,r),offsetX:ad.Z.getValue(s,r),offsetY:ad.Z.getValue(l,r),fill:u,textAlign:Object.values(Nh).includes(o)?o:"center",textBaseline:Object.values(Fh).includes(a)?a:"top",text:void 0===i?void 0:String(i),rotation:ad.Z.getValue(e.label.rotation,r)});(0,_h.Ew)(e.label.stroke)||c.setStroke(new $e.Z({color:ad.Z.getValue(e.label.stroke.color,r),width:ad.Z.getValue(e.label.stroke.width,r),lineCap:ad.Z.getValue(e.label.stroke.linecap,r),lineJoin:ad.Z.getValue(e.label.stroke.linejoin,r),lineDash:ad.Z.getValue(e.label.stroke.linedash,r),lineDashOffset:ad.Z.getValue(e.label.stroke.linedashoffset,r),miterLimit:ad.Z.getValue(e.label.stroke.miterlimit,r)})),n.setText(c),t.push(n)}}(o,s,i),s}}},{key:"applyToLayer",value:function(e){e.getFeatures().forEach(this.applyToFeature,this)}},{key:"applyToFeature",value:function(e){e.getImpl().getOLFeature().setStyle(this.olStyleFn_)}},{key:"formatDataRecursively_",value:function(e,t){var r=this;return Object.keys(e).reduce((function(n,i,o){var a=n;return"object"!==sd(n)&&(a={},"object"!==sd(e[n])&&r.setVal(a,e,n,t)),r.setVal(a,e,i),a}))}},{key:"setVal",value:function(e,t,r,n){var i=e;i[r]=ad.Z.getValue(t[r],n),!(0,_h.Kn)(t[r])||t[r]instanceof Array||(i[r]=this.formatDataRecursively_(t[r],n))}}],r&&cd(t.prototype,r),n&&cd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(od);_d.CANVAS_PROPS={width:200,percentages:{left_right_content:5,item_side_margin:5,max_text_width:70},fixedProps:{rect_border_width:2,font_size:10,font_family:"sans-serif",text_stroke_color:"#fff",text_stroke_width:1,text_color:"#000",top_content:10,item_top_margin:10,text_line_height:15,rect_size:15}};const vd=_d;var Ad=__webpack_require__(45056),bd=__webpack_require__(31700),wd=__webpack_require__(23546),Ed=__webpack_require__(92482),xd=__webpack_require__(81347),Id=__webpack_require__(85992),Sd=__webpack_require__(68772),Cd=__webpack_require__(77055),Pd=__webpack_require__(83473),Od=__webpack_require__(38073),Td=__webpack_require__(70514),Md=__webpack_require__(2808),kd=__webpack_require__(20683),Rd=__webpack_require__(65792),Bd=__webpack_require__.n(Rd),Ld=__webpack_require__(11297),Dd=__webpack_require__(63039);function jd(e){return jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jd(e)}function Fd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==jd(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==jd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===jd(o)?o:String(o)),n)}var i,o}function Nd(e,t){return Nd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nd(e,t)}function Zd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ud(e);if(t){var i=Ud(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===jd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ud(e){return Ud=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ud(e)}var Qd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nd(e,t)}(o,e);var t,r,n,i=Zd(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).olStyleFn_=t.updateFacadeOptions(e),t}return t=o,r=[{key:"updateFacadeOptions",value:function(e){var t=this;return function(r){var n=r;n instanceof D.Z||r instanceof P.ZP||(n=t);var i=new Xp.Z;if((0,_h.Ew)(e.stroke)||(0,_h.Ew)(e.stroke.pattern)){if(!(0,_h.Ew)(e.stroke)){var o=ad.Z.getValue(e.stroke.color||"#000000",n,t.layer_),a=ad.Z.getValue(e.stroke.opacity,n,t.layer_);a||0===a||(a=1),i.setStroke(new $e.Z({color:Bd()(o).alpha(a).css(),width:ad.Z.getValue(e.stroke.width,n,t.layer_),lineDash:ad.Z.getValue(e.stroke.linedash,n,t.layer_),lineDashOffset:ad.Z.getValue(e.stroke.linedashoffset,n,t.layer_),lineCap:ad.Z.getValue(e.stroke.linecap,n,t.layer_),lineJoin:ad.Z.getValue(e.stroke.linejoin,n,t.layer_),miterLimit:ad.Z.getValue(e.stroke.miterlimit,n,t.layer_)}))}}else{var s;if(!(0,_h.Ew)(e.stroke.color)){var l=ad.Z.getValue(e.stroke.color,n,t.layer_),u=ad.Z.getValue(e.stroke.opacity,n,t.layer_);u||0===u||(u=1),(0,_h.Ew)(l)||(s=new nt.Z({color:Bd()(l).alpha(u).css()}))}i.setStroke(new Dd.Z({width:ad.Z.getValue(e.stroke.width,n,t.layer_),pattern:(ad.Z.getValue(e.stroke.pattern.name,n,t.layer_)||"").toLowerCase(),image:"Image"===ad.Z.getValue(e.stroke.pattern.name,n,t.layer_)?new rt.Z({src:ad.Z.getValue(e.stroke.pattern.src,n,t.layer_),crossOrigin:"anonymous"}):void 0,color:(0,_h.Ew)(e.stroke.pattern.color)?"rgba(0,0,0,1)":ad.Z.getValue(e.stroke.pattern.color,n,t.layer_),size:ad.Z.getValue(e.stroke.pattern.size,n,t.layer_),spacing:ad.Z.getValue(e.stroke.pattern.spacing,n,t.layer_),angle:ad.Z.getValue(e.stroke.pattern.rotation,n,t.layer_),scale:ad.Z.getValue(e.stroke.pattern.scale,n,t.layer_),offset:ad.Z.getValue(e.stroke.pattern.offset,n,t.layer_),fill:s,layer:t.layer_}))}if(!(0,_h.Ew)(e.label)){var c=ad.Z.getValue(e.label.text,n,t.layer_),f=ad.Z.getValue(e.label.align,n,t.layer_),p=ad.Z.getValue(e.label.baseline,n,t.layer_),d=!!(0,_h.Ew)(e.label.overflow,t.layer_)||e.label.overflow;i.setText(new Je.Z({font:ad.Z.getValue(e.label.font,n,t.layer_),rotateWithView:ad.Z.getValue(e.label.rotate,n,t.layer_),scale:ad.Z.getValue(e.label.scale,n,t.layer_),offsetX:ad.Z.getValue(e.label.offset?e.label.offset[0]:void 0,n,t.layer_),offsetY:ad.Z.getValue(e.label.ofsset?e.label.offset[1]:void 0,n,t.layer_),fill:new nt.Z({color:ad.Z.getValue(e.label.color||"#000000",n,t.layer_)}),textAlign:Object.values(Nh).includes(f)?f:"center",textBaseline:Object.values(Fh).includes(p)?p:"top",text:void 0===c?void 0:String(c),rotation:ad.Z.getValue(e.label.rotation,n,t.layer_),overflow:ad.Z.getValue(d,n,t.layer_)})),(0,_h.Ew)(e.label.stroke)||i.getText().setStroke(new $e.Z({color:ad.Z.getValue(e.label.stroke.color,n,t.layer_),width:ad.Z.getValue(e.label.stroke.width,n,t.layer_),lineCap:ad.Z.getValue(e.label.stroke.linecap,n,t.layer_),lineJoin:ad.Z.getValue(e.label.stroke.linejoin,n,t.layer_),lineDash:ad.Z.getValue(e.label.stroke.linedash,n,t.layer_),lineDashOffset:ad.Z.getValue(e.label.stroke.linedashoffset,n,t.layer_),miterLimit:ad.Z.getValue(e.label.stroke.miterlimit,n,t.layer_)}))}if(!(0,_h.Ew)(e.fill)){var y,g=ad.Z.getValue(e.fill.color,n,t.layer_),m=ad.Z.getValue(e.fill.opacity,n,t.layer_);if(m||0===m||(m=1),(0,_h.Ew)(g)||(y=new nt.Z({color:Bd()(g).alpha(m).css()})),(0,_h.Ew)(e.fill.pattern))i.setFill(y);else{var _="rgba(0,0,0,1)";if(!(0,_h.Ew)(e.fill.pattern.color)){var v=ad.Z.getValue(e.fill.pattern.opacity,n,t.layer_)||1;v||0===v||(v=1),_=Bd()(e.fill.pattern.color).alpha(v).css()}i.setFill(new Ld.Z({pattern:(ad.Z.getValue(e.fill.pattern.name,n,t.layer_)||"").toLowerCase(),color:_,size:ad.Z.getValue(e.fill.pattern.size,n,t.layer_),spacing:ad.Z.getValue(e.fill.pattern.spacing,n,t.layer_),image:"Image"===ad.Z.getValue(e.fill.pattern.name,n,t.layer_)?new rt.Z({src:ad.Z.getValue(e.fill.pattern.src,n,t.layer_)}):void 0,angle:ad.Z.getValue(e.fill.pattern.rotation,n,t.layer_),scale:ad.Z.getValue(e.fill.pattern.scale,n,t.layer_),offset:ad.Z.getValue(e.fill.pattern.offset,n,t.layer_),fill:y,layer:t.layer_}))}}if(e.renderer){var A=new nt.Z,b=new $e.Z({color:ad.Z.getValue(e.renderer.stroke.color,n,t.layer_),width:ad.Z.getValue(e.renderer.stroke.width,n,t.layer_)});i.setRenderer((function(r,i,o){var a=new Image,s=ad.Z.getValue(e.renderer.property,n,t.layer_),l=n.get(s).src?n.get(s).src:n.get(s);a.onload=function(){n.set(s,a)},a.src=l;var u=i.context,c=i.geometry.clone();c.setCoordinates(r);var f=c.getExtent(),p=(0,h.dz)(f),d=(0,h.Cr)(f),y=i.feature.get(s).src?i.feature.get(s):void 0;if(!(!y||d<1||p<1)){u.save();var g=(0,C.Pt)(u,{pixelRatio:1});g.setFillStrokeStyle(A,b),g.drawGeometry(c),u.clip();var m=(0,h.hC)(f),_=m[0],v=m[1];u.drawImage(y,_,v,p,d),u.restore()}}))}return[i]}}},{key:"updateCanvas",value:function(e){this.updateFacadeOptions(this.options_);var t=o.getCanvasSize(),r=(0,C.Pt)(e.getContext("2d"),{size:t}),n=this.olStyleFn_()[0];(0,_h.Ew)(n.getText())||n.setText(null);var i=n.getStroke();(0,_h.Ew)(i)||(0,_h.Ew)(i.getWidth())||i.getWidth()>o.DEFAULT_WIDTH_POLYGON&&n.getStroke().setWidth(o.DEFAULT_WIDTH_POLYGON),r.setStyle(n),this.drawGeometryToCanvas(r)}},{key:"drawGeometryToCanvas",value:function(e){var t=o.getCanvasSize(),r=Math.floor(t[0]),n=Math.floor(t[1]),i=t[0]-r,a=t[1]-n;e.drawGeometry(new W.ZP([[[i+3,a+3],[r-3,a+3],[r-3,n-3],[i+3,n-3],[i+3,a+3]]]))}}],n=[{key:"getCanvasSize",value:function(){return[25,15]}}],r&&Fd(t.prototype,r),n&&Fd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(ad.Z);Qd.DEFAULT_WIDTH_POLYGON=3;const Gd=Qd;function zd(e){return zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(e)}function qd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==zd(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==zd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===zd(o)?o:String(o)),n)}var i,o}function Vd(e,t){return Vd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vd(e,t)}function Wd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Kd(e);if(t){var i=Kd(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zd(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Kd(e){return Kd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kd(e)}var Hd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vd(e,t)}(o,e);var t,r,n,i=Wd(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=t,n=new Gd(r);return e=i.call(this,r,n),(0,_h.Ew)(r)&&(r=o.DEFAULT_NULL),r=(0,_h.cU)({},r),e}return t=o,(r=[{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Polygon'))"}}])&&qd(t.prototype,r),n&&qd(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Gh.Z);Hd.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}};const Yd=Hd;var Xd=__webpack_require__(39398);function Jd(e){return Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(e)}function $d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Jd(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Jd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Jd(o)?o:String(o)),n)}var i,o}var ey=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"render",value:function(e,t){for(var r=e,n=this,i=0,o=0,a=2,s=function(e,t,r,n){var i=r-e,o=n-t;return Math.sqrt(i*i+o*o)},l=function(e,t){if(!i||o+i<t)for(;a<e.length&&(i=s(e[a-2],e[a-1],e[a],e[a+1]),!(o+i>t))&&!((a+=2)>=e.length);)o+=i;var r=t-o;return a>=e.length&&(a=e.length-2),[r?e[a-2]+(e[a]-e[a-2])*r/i:e[a-2],r?e[a-1]+(e[a+1]-e[a-1])*r/i:e[a-1],Math.atan2(e[a+1]-e[a-1],e[a]-e[a-2])]},u=.25*n.measureText(" ").width,c=0,f=0,h=2;h<t.length;h+=2)f+=s(t[h-2],t[h-1],t[h],t[h+1]);if(!(f<n.minWidth)){var p=r.split(" ").length-1;if("visible"!==n.textOverflow&&f<n.measureText(r).width+(r.length-(1+p))*u){var d="ellipsis"===n.textOverflow?"…":n.textOverflow;do{p=r.split(" ").length-1,r=r.slice(0,r.length-1)}while(r&&f<n.measureText(r+d).width+(r.length+(d.length-1)+p)*u);r+=d}switch(n.textJustify||n.textAlign){case!0:case"center":case"end":case"right":n.textJustify?(c=0,u=(f-n.measureText(r).width)/(e.length-(1+p))):(c=f-n.measureText(r).width-(r.length+p)*u,"center"===n.textAlign&&(c/=2))}for(var y=0;y<r.length;y+=1){var g=r[y],m=n.measureText(g).width,_=l(t,c+m/2);n.save(),n.textAlign="center",n.translate(_[0],_[1]),n.rotate(_[2]),n.lineWidth&&n.strokeText(g,0,0),n.fillText(g,0,0),n.restore(),c+=m+u*(" "===g?2:1)}}}},{key:"getPath_",value:function(e,t,r){var n=[];if(t.forEach((function(t){n.push(e[0]*t[0]+e[1]*t[1]+e[4]),n.push(e[2]*t[0]+e[3]*t[1]+e[5])})),r&&n[0]>n[n.length-2]){for(var i=[],o=n.length-2;o>=0;o-=2)i.push(n[o]),i.push(n[o+1]);return i}return n}},{key:"formatStyle",value:function(e){var t=e;return null==t?null:(void 0===t&&(t=[new J.ZP({text:new Je.Z})]),"function"==typeof t?t:function(){return[t]})}},{key:"draw",value:function(t,r,n,i){var o=this.getPath_(r,i,n.getRotateWithView());t.font=n.getFont(),t.textBaseline=n.getTextBaseline(),t.textAlign=n.getTextAlign(),t.lineWidth=n.getStroke()&&n.getStroke().getWidth()||e.DEFAULT.lineWidth,t.strokeStyle=n.getStroke()&&n.getStroke().getColor()||e.DEFAULT.lineColor,t.fillStyle=n.getFill()&&n.getFill().getColor()||e.DEFAULT.fillColor,t.textJustify="justify"===n.getTextAlign(),t.textOverflow=n.getTextOverflow?n.getTextOverflow():e.DEFAULT.textOverflow,t.minWidth=n.getMinWidth?n.getMinWidth():e.DEFAULT.minWidth,"function"==typeof t.textPath&&t.textPath(n.getText(),o),t.restore()}}],(r=null)&&$d(t.prototype,r),n&&$d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();ey.DEFAULT={lineWidth:0,lineColor:"#fff",fillColor:"#000",textOverflow:"",minWidth:0};const ty=ey;const ry=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,_h.o8)(window.CanvasRenderingContext2D.prototype.textPath)&&(window.CanvasRenderingContext2D.prototype.textPath=ty.render),!(t.frameState.viewState.resolution>this.textPathMaxResolution_)){var r=t.frameState.extent,n=t.context;n.save(),n.scale(t.frameState.pixelRatio,t.frameState.pixelRatio),null!=this.getSource()&&0===this.getSource().getFeatures().length||(this.getSource().getFeaturesInExtent(r).forEach((function(r){var i=null!=r.getStyle()?r.getStyle():e.getStyle(),o="function"==typeof i?i(r,t.frameState.viewState.resolution):i;o instanceof Array||(o=[o]),o.forEach((function(e){var i,o=(e instanceof _y?e.getOptions().geometry:e.getGeometry())||r.getGeometry();if("function"==typeof o&&(o=o(r)),"MultiLineString"===o.getType())i=o.getLineString(0).getCoordinates();else i=o.getCoordinates();var a=e instanceof _y?e.getOptions().text:e.textPath;null!=a&&a instanceof Xd.Z&&ty.draw(n,t.frameState.coordinateToPixelTransform,a,i)}))})),n.restore())}};Jl.Z.prototype.cspline=function(e){var t;return this.calcCSpline?this.csplineGeometryRevision===this.getRevision()&&this.csplineOption===JSON.stringify(e)||(this.csplineGeometry_=this.calcCSpline(e),this.csplineGeometryRevision=this.getRevision(),this.csplineOption=JSON.stringify(e),t=this.csplineGeometry_):t=this,t},j.Z.prototype.calcCSpline=function(e){var t=[];return this.getGeometries().forEach((function(e){return t.push(e.cspline())})),new j.Z(t)},Q.Z.prototype.calcCSpline=function(e){var t=[];return this.getLineStrings().forEach((function(e){return t.push(e.cspline().getCoordinates())})),new Q.Z(t)},W.ZP.prototype.calcCSpline=function(e){var t=[];return this.getLineStrings().forEach((function(e){return t.push(e.cspline().getCoordinates())})),new W.ZP(t)},z.Z.prototype.calcCSpline=function(e){var t=[];return this.getLineStrings().forEach((function(e){return t.push(e.cspline().getCoordinates())})),new z.Z(t)};var ny=function(e,t,r,n){var i=r-e,o=n-t;return Math.sqrt(i*i+o*o)};function iy(e){return iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(e)}function oy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==iy(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==iy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===iy(o)?o:String(o)),n)}var i,o}function ay(){return ay="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uy(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},ay.apply(this,arguments)}function sy(e,t){return sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sy(e,t)}function ly(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=uy(e);if(t){var i=uy(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===iy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function uy(e){return uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uy(e)}N.Z.prototype.calcCSpline=function(){var e,t,r,n,i,o,a,s,l,u,c,f,h,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=this.getCoordinates(),y="number"==typeof p.tension?p.tension:.5,g=p.resolution||this.getLength()/d.length/(p.pointsPerSeg||10),m=[],_=d.slice(0);for(d.length>2&&d[0][0]===d[d.length-1][0]&&d[0][1]===d[d.length-1][1]?(_.unshift(d[d.length-2]),_.push(d[1])):(_.unshift(d[0]),_.push(d[d.length-1])),h=1;h<_.length-2;h+=1){var v=ny(_[h][0],_[h][1],_[h+1][0],_[h+1][1]),A=Math.round(v/g),b=1;if(p.normalize){var w=ny(_[h+1][0],_[h+1][1],_[h-1][0],_[h-1][1]),E=ny(_[h+2][0],_[h+2][1],_[h][0],_[h][1]);b=w<E?w/E:E/w}for(r=(_[h+1][0]-_[h-1][0])*y*b,n=(_[h+2][0]-_[h][0])*y*b,i=(_[h+1][1]-_[h-1][1])*y*b,o=(_[h+2][1]-_[h][1])*y*b,f=0;f<=A;f+=1)c=f/A,a=2*Math.pow(c,3)-3*Math.pow(c,2)+1,s=-2*Math.pow(c,3)+3*Math.pow(c,2),l=Math.pow(c,3)-2*Math.pow(c,2)+c,u=Math.pow(c,3)-Math.pow(c,2),e=a*_[h][0]+s*_[h+1][0]+l*r+u*n,t=a*_[h][1]+s*_[h+1][1]+l*i+u*o,m.push([e,t])}return new N.Z(m)};var cy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sy(e,t)}(o,e);var t,r,n,i=ly(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).olStyleFn_=t.updateFacadeOptions(e),t}return t=o,n=[{key:"getCanvasSize",value:function(){return[25,15]}}],(r=[{key:"updateFacadeOptions",value:function(e){var t=this;return function(r){var n=r;n instanceof D.Z||r instanceof P.ZP||(n=t);var i,o=e.stroke,a=e.label,s=new Xp.Z,l=new Xp.Z,u=ad.Z.getValue;if(!(0,_h.Ew)(o)){var c=u(o.color,n)||"#000000",f=u(o.opacity,n);f||0===f||(f=1),s.setStroke(new $e.Z({color:Bd()(c).alpha(f).css(),width:u(o.width,n),lineDash:u(o.linedash,n),lineDashOffset:u(o.linedashoffset,n),lineCap:u(o.linecap,n),lineJoin:u(o.linejoin,n),miterLimit:u(o.miterlimit,n)}))}if(!(0,_h.Ew)(a)){var h={text:void 0===u(a.text,n)?void 0:String(u(a.text,n)),font:u(a.font,n),fill:new nt.Z({color:u(a.color||"#000000",n)}),textBaseline:(u(a.baseline,n)||"").toLowerCase(),textAlign:u(a.align,n),scale:u(a.scale,n),rotateWithView:u(a.rotate,n)||!1,overflow:u(a.textoverflow,n)||!1,minWidth:u(a.minwidth,n)||0,geometry:u(a.geometry,n),offsetX:u(e.label.offset?e.label.offset[0]:void 0,n),offsetY:u(e.label.offset?e.label.offset[1]:void 0,n)},p=new Xd.Z(h);(0,_h.Ew)(a.stroke)||p.setStroke(new $e.Z({color:u(a.stroke.color,n),width:u(a.stroke.width,n),lineCap:u(a.stroke.linecap,n),lineJoin:u(a.stroke.linejoin,n),lineDash:u(a.stroke.linedash,n),lineDashOffset:u(a.stroke.linedashoffset,n),miterLimit:u(a.stroke.miterlimit,n)}));var d=u(a.path,n);"boolean"==typeof d&&d&&(s.textPath=p,!(0,_h.Ew)(a.smooth)&&!0===a.smooth&&(0,_h.mf)(n.getGeometry)&&s.setGeometry(n.getGeometry().cspline()),p.setPlacement("line")),s.setText(p)}if(!(0,_h.Ew)(e.fill)){var y=ad.Z.getValue(e.fill.color,n,t.layer_),g=ad.Z.getValue(e.fill.opacity,n,t.layer_);g||0===g||(g=1);var m=ad.Z.getValue(e.fill.width,n,t.layer_);if((0,_h.Ew)(y)||(i=new $e.Z({color:Bd()(y).alpha(g).css(),width:m})),!(0,_h.Ew)(e.fill.pattern)){var _="rgba(0,0,0,1)";(0,_h.Ew)(e.fill.pattern.color)||(_=ad.Z.getValue(e.fill.pattern.color,n,t.layer_)),i=new Dd.Z({pattern:(ad.Z.getValue(e.fill.pattern.name,n,t.layer_)||"").toLowerCase(),image:"Image"===ad.Z.getValue(e.fill.pattern.name,n,t.layer_)?new rt.Z({src:ad.Z.getValue(e.fill.pattern.src,n,t.layer_),crossOrigin:"anonymous"}):void 0,color:_,width:m,size:ad.Z.getValue(e.fill.pattern.size,n,t.layer_),spacing:ad.Z.getValue(e.fill.pattern.spacing,n,t.layer_),angle:ad.Z.getValue(e.fill.pattern.rotation,n,t.layer_),scale:ad.Z.getValue(e.fill.pattern.scale,n,t.layer_),offset:ad.Z.getValue(e.fill.pattern.offset,n,t.layer_),fill:i,layer:t.layer_})}}return l.setStroke(i),[s,l]}}},{key:"applyToLayer",value:function(e){ay(uy(o.prototype),"applyToLayer",this).call(this,e);var t=e.getImpl().getOL3Layer();(0,_h.Ew)(t)||(this.postComposeEvtKey_=t.on("postcompose",ry,t))}},{key:"unapply",value:function(){(0,Ye.B)(this.postComposeEvtKey_)}},{key:"drawGeometryToCanvas",value:function(e,t,r,n){var i=o.getCanvasSize()[0],a=o.getCanvasSize()[1];if(e.drawGeometry(new N.Z([[0+n/2,0+n/2],[i/3,a/2-n/2],[2*i/3,0+n/2],[i-n/2,a/2-n/2]])),!(0,_h.Ew)(r)){var s=r.width,l=t.getContext("2d");l.lineWidth=r.width,i=t.width,a=t.height,l.strokeStyle=r.color,l.beginPath(),l.lineTo(0+s,0+s),l.lineTo(i/3,a/2-s),l.lineTo(2*i/3,0+s),l.lineTo(i-s,a/2-s),l.stroke()}}},{key:"updateCanvas",value:function(e){this.updateFacadeOptions(this.options_);var t,r=o.getCanvasSize(),n=(0,C.Pt)(e.getContext("2d"),{size:r}),i=this.olStyleFn_()[1];(0,_h.Ew)(i)||(0,_h.Ew)(i.getStroke())||(t={color:i.getStroke().getColor(),width:1});var a=this.olStyleFn_()[0];(0,_h.Ew)(a.getText())||a.setText(null);var s,l=a.getStroke();(0,_h.Ew)(l)||((0,_h.Ew)(l.getWidth())?s=1:(s=l.getWidth(),l.getWidth()>o.DEFAULT_WIDTH_LINE&&(s=o.DEFAULT_WIDTH_LINE)),t={color:a.getStroke().getColor(),width:s},a.getStroke().setWidth(s),n.setStyle(a)),this.drawGeometryToCanvas(n,e,t,s)}}])&&oy(t.prototype,r),n&&oy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(ad.Z);cy.DEFAULT_WIDTH_LINE=3;const fy=cy;function hy(e){return hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hy(e)}function py(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==hy(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==hy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===hy(o)?o:String(o)),n)}var i,o}function dy(e,t){return dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dy(e,t)}function yy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=gy(e);if(t){var i=gy(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===hy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function gy(e){return gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gy(e)}var my=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dy(e,t)}(o,e);var t,r,n,i=yy(o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=e;(0,_h.Ew)(t)&&(t=o.DEFAULT_NULL),t=(0,_h.cU)({},t);var r=new fy(t);return i.call(this,t,r)}return t=o,(r=[{key:"unapply",value:function(e){this.getImpl().unapply(e)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.Line'))"}}])&&py(t.prototype,r),n&&py(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Gh.Z);my.DEFAULT_NULL={fill:{color:"rgba(255, 255, 255, 0.4)",opacity:.4},stroke:{color:"#3399CC",width:1.5}};const _y=my;var vy=__webpack_require__(81517);function Ay(e){return Ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ay(e)}function by(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Ay(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ay(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Ay(o)?o:String(o)),n)}var i,o}function wy(e,t){return wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wy(e,t)}function Ey(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xy(e);if(t){var i=xy(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ay(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function xy(e){return xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xy(e)}var Iy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wy(e,t)}(o,e);var t,r,n,i=Ey(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=i.call(this,t);var r,n=t.weight?t.weight:"weight";if("string"==typeof n){var a=1,s=e.getWeights(t);s.length>0?(a=s.reduce((function(e,t){return Math.max(e,t)})),e.maxWeight_=a,e.minWeight_=s.reduce((function(e,t){return Math.min(e,t)})),r=function(e){var t;return e instanceof D.Z?t=e.get(n):e instanceof vy.Z&&(t=e.getAttribute(n)),parseFloat(t/a)}):t.weight&&Pd.info((0,xh.NA)("heatmap").features,(0,xh.NA)("heatmap").name)}else r=n;return e.setStyle((function(t,n){var i=ad.Z.getValue(r,t),o=void 0!==i?(0,A.uZ)(i,0,1):1,a=255*o||0,s=e.styleCache_[a];return s||(s=[new J.ZP({image:new rt.Z({opacity:o,src:e.circleImage_})})],e.styleCache_[a]=s),s})),e}return t=o,(r=[{key:"getMinWeight",value:function(){return this.minWeight_}},{key:"getMaxWeight",value:function(){return this.maxWeight_}},{key:"getWeights",value:function(e){var t=[],r=this.getSource();if(null!==r){var n=r.getFeatures();n.length>0&&(t=n.map((function(t){return t.get(e.weight)})).filter((function(e){return null!=e})))}return t}}])&&by(t.prototype,r),n&&by(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Aa);const Sy=Iy;function Cy(e){return Cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(e)}function Py(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Cy(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Cy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Cy(o)?o:String(o)),n)}var i,o}function Oy(e,t){return Oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oy(e,t)}function Ty(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=My(e);if(t){var i=My(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Cy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function My(e){return My=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},My(e)}var ky=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oy(e,t)}(o,e);var t,r,n,i=Ty(o);function o(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,{})).heatmapLayer_=null,n.attribute_=e,n.opt_options_=(0,_h.cU)(t,r),n.opt_options_.zIndex=999999,n.oldOLLayer_=null,n}return t=o,(r=[{key:"applyToLayer",value:function(e){if(this.layer_=e,!(0,_h.Ew)(e)){var t=this.layer_.getImpl().getOL3Layer();t instanceof Aa||(this.oldOLLayer_=t);var r=this.layer_.getFeatures().map((function(e){return e.getImpl().getOLFeature()}));r.forEach((function(e){return e.setStyle(null)})),this.createHeatmapLayer_(r),this.layer_.getImpl().setOL3Layer(this.heatmapLayer_)}}},{key:"unapply",value:function(e){(0,_h.Ew)(this.oldOLLayer_)||(this.layer_.getImpl().setOL3Layer(this.oldOLLayer_),this.layer_.redraw(),this.layer_=null,this.oldOLLayer_=null,this.heatmapLayer_=null)}},{key:"createHeatmapLayer_",value:function(e){this.opt_options_.source=new H.Z({features:e}),this.opt_options_.name=this.layer_.name,this.heatmapLayer_=new Sy(this.opt_options_)}},{key:"setOptions",value:function(e,t){this.opt_options_=(0,_h.cU)(e,t)}},{key:"getMinWeight",value:function(){return this.heatmapLayer_.getMinWeight()}},{key:"getMaxWeight",value:function(){return this.heatmapLayer_.getMaxWeight()}}])&&Py(t.prototype,r),n&&Py(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Jp.Z);const Ry=ky;function By(e){return By="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(e)}function Ly(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||jy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dy(e){return function(e){if(Array.isArray(e))return Fy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jy(e,t){if(e){if("string"==typeof e)return Fy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fy(e,t):void 0}}function Fy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ny(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==By(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==By(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===By(o)?o:String(o)),n)}var i,o}function Zy(e,t){return Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zy(e,t)}function Uy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Qy(e);if(t){var i=Qy(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===By(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Qy(e){return Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qy(e)}var Gy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zy(e,t)}(o,e);var t,r,n,i=Uy(o);function o(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var a=r,s=n;if(!e||(0,_h.HD)(e)||(0,_h.mf)(e)||(0,qh.Z)((0,xh.NA)("exception").no_empty),(0,_h.Ew)(a.gradient)||(0,_h.kJ)(a.gradient)||(a.gradient=[a.gradient]),a.gradient=a.gradient||o.DEFAULT_OPTIONS.gradient,a.gradient.length<2){var l=(0,_h.V5)(a.gradient[0]);a.gradient.push(l)}a.blur=(0,_h.Ew)(a.blur)?o.DEFAULT_OPTIONS.blur:parseFloat(a.blur),a.radius=(0,_h.Ew)(a.radius)?o.DEFAULT_OPTIONS.radius:parseFloat(a.radius),a.weight=e,s.opacity=Number.isNaN(parseFloat(s.opacity))?1:parseFloat(s.opacity);var u=new Ry(e,a,s);return(t=i.call(this,a,u)).attribute_=e,t.options_=a,t.vendorOptions_=s,t}return t=o,n=[{key:"deserialize",value:function(e){var t=Ly(e,3),r=t[0],n=t[1],i=t[2],o=r,a=(0,_h.Q8)(n),s=(0,_h.Q8)(i);return new Function(["attribute","options","vendorOptions"],"return new M.style.Heatmap(attribute, options, vendorOptions)")(o,a,s)}}],(r=[{key:"unapply",value:function(e){this.layer_=null,this.getImpl().unapply(e)}},{key:"getAttributeName",value:function(){return this.attribute_}},{key:"setAttributeName",value:function(e){this.attribute_=e,this.options_.weight=this.attribute_,this.update_()}},{key:"getGradient",value:function(){return this.options_.gradient}},{key:"setGradient",value:function(e){var t=e;if((0,_h.kJ)(t)||(t=[t]),t.length<2){var r=(0,_h.V5)(t[0]);t.push(r)}this.options_.gradient=t,this.update_()}},{key:"getRadius",value:function(){return this.options_.radius}},{key:"setRadius",value:function(e){this.options_.radius=e,this.update_()}},{key:"getBlurSize",value:function(){return this.options_.blur}},{key:"setBlurSize",value:function(e){this.options_.blur=e,this.update_()}},{key:"update_",value:function(){var e=this.getImpl();e.unapply(this.layer_),e.setOptions(this.options_,this.vendorOptions_),e.applyToLayer(this.layer_)}},{key:"drawGeometryToCanvas",value:function(){var e=[this.getImpl().getMinWeight(),this.getImpl().getMaxWeight()],t=e[0],r=e[1],n=this.canvas_.getContext("2d"),i=n.createLinearGradient(0,150,200,150),o=(0,_h.cw)([0,1],this.options_.gradient.length);this.options_.gradient.forEach((function(e,t){return i.addColorStop(o[t],e)})),n.fillStyle=i,n.fillRect(0,20,200,30),n.fillStyle="#000",n.font="10px sans-serif",n.fillText(t,0,60),n.fillText(r,199,60)}},{key:"updateCanvas",value:function(){this.drawGeometryToCanvas()}},{key:"toJSON",value:function(){var e=this.getAttributeName(),t=this.getOptions();return{parameters:[e,{gradient:Dy(t.gradient),blur:t.blur,radius:t.radius,weight:t.weight},this.vendorOptions_],deserializedMethod:"M.style.Heatmap.deserialize"}}}])&&Ny(t.prototype,r),n&&Ny(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Zh.Z);Gy.DEFAULT_OPTIONS={gradient:["#00f","#0ff","#0f0","#ff0","#f00"],blur:15,radius:10};const zy=Gy;var qy=__webpack_require__(15637);function Vy(e){return Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vy(e)}function Wy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Vy(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Vy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Vy(o)?o:String(o)),n)}var i,o}const Ky=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"addSymbol",value:function(e,t){return qy.Z.addDefs(e,t)}}],(r=null)&&Wy(t.prototype,r),n&&Wy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var Hy,Yy=void 0,Xy=function(e,t){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},Jy=function(e,t){return e[0]===t[0]&&e[1]===t[1]};!function(){function e(e,t){for(var r,n=e.length-1;n>0;n-=1)(e[n][0]>t&&e[n-1][0]<t||e[n][0]<t&&e[n-1][0]>t)&&(r=[t,(t-e[n][0])/(e[n-1][0]-e[n][0])*(e[n-1][1]-e[n][1])+e[n][1]],e.splice(n,0,r))}function t(e,t){for(var r,n=e.length-1;n>0;n-=1)(e[n][1]>t&&e[n-1][1]<t||e[n][1]<t&&e[n-1][1]>t)&&(r=[(t-e[n][1])/(e[n-1][1]-e[n][1])*(e[n-1][0]-e[n][0])+e[n][0],t],e.splice(n,0,r))}Hy=function(r,n){var i="Polygon"===n.getType();if(!i&&"MultiPolygon"!==n.getType())return null;var o=n.getCoordinates();return i&&(o=[o]),o.forEach((function(n){n.forEach((function(n){e(n,r[0]),e(n,r[2]),t(n,r[1]),t(n,r[3])}))})),o.forEach((function(e){e.forEach((function(e){e.forEach((function(e){var t=e;t[0]<r[0]?t[0]=r[0]:t[0]>r[2]&&(t[0]=r[2]),t[1]<r[1]?t[1]=r[1]:t[1]>r[3]&&(t[1]=r[3])}))}))})),i?new W.ZP(o[0]):new z.Z(o)}}();var $y=function(e,t,r,n){var i=[];!1!==n&&i.push(e);var o=Xy(e,t);if(o){var a=Math.round(o/r);if(a>1)for(var s=(t[0]-e[0])/a,l=(t[1]-e[1])/a,u=1;u<a;u+=1)i.push([e[0]+s*u,e[1]+l*u])}return i.push(t),i};N.Z.prototype.sampleAt=function(e){for(var t=Yy.getCoordinates(),r=[],n=1;n<t.length;n+=1)r=r.concat($y(t[n-1],t[n],e,1===n));return new N.Z(r)},Q.Z.prototype.sampleAt=function(e){var t=Yy.getCoordinates(),r=[];return t.forEach((function(t){for(var n=[],i=1;i<t.length;i+=1)n=n.concat($y(t[i-1],t[i],e,1===i));r.push(n)})),new Q.Z(r)},W.ZP.prototype.sampleAt=function(e){var t=Yy.getCoordinates(),r=[];return t.forEach((function(t){for(var n=[],i=1;i<t.length;i+=1)n=n.concat($y(t[i-1],t[i],e,1===i));r.push(n)})),new W.ZP(r)},z.Z.prototype.sampleAt=function(e){var t=Yy.getCoordinates(),r=[];return t.forEach((function(t){var n=[];r.push(n),t.forEach((function(t){for(var r=[],i=1;i<t.length;i+=1)r=r.concat($y(t[i-1],t[i],e,1===i));n.push(r)}))})),new z.Z(r)},R.Z.prototype.intersection=function(e,t){if(e.sampleAt){var r=(0,h.f3)(Yy.getCenter().concat(Yy.getCenter()),Yy.getRadius());e=Hy(r,e).simplify(t);var n=Yy.getCenter(),i=Yy.getRadius(),o=e.sampleAt(t).getCoordinates();switch(e.getType()){case"Polygon":o=[o];case"MultiPolygon":var a=!1,s=[];return o.forEach((function(e){var t=[];s.push(t),e.forEach((function(e){var r=[];t.push(r),e.forEach((function(e){var t=Xy(n,e);t>i?(a=!0,r.push([n[0]+i/t*(e[0]-n[0]),n[1]+i/t*(e[1]-n[1])])):r.push(e)}))}))})),a?"Polygon"===e.getType()?new W.ZP(s[0]):new z.Z(s):e}}else console.warn("[ol/geom/Circle~intersection] Unsupported geometry type: ".concat(e.getType()));return e};var eg=void 0;function tg(e){return tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(e)}function rg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==tg(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==tg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===tg(o)?o:String(o)),n)}var i,o}function ng(e,t){return ng=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ng(e,t)}function ig(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ag(e);if(t){var i=ag(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===tg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return og(e)}(this,r)}}function og(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ag(e){return ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ag(e)}N.Z.prototype.splitAt=function(e,t){var r,n=t;if(!e)return[eg];if(t||(n=1e-10),e.length&&e[0].length){var i=[eg];for(r=0;r<e.length;r+=1){for(var o=[],a=0;a<i.length;a+=1){var s=i[a].splitAt(e[r],n);o=o.concat(s)}i=o}return i}if(Jy(e,eg.getFirstCoordinate())||Jy(e,eg.getLastCoordinate()))return[eg];var l=eg.getCoordinates(),u=[l[0]],c=[];for(r=0;r<l.length-1;r+=1){if(Jy(e,l[r+1]))u.push(l[r+1]),c.push(new N.Z(u)),u=[];else if(!Jy(e,l[r])){var f=void 0,h=void 0,p=!1;l[r][0]===l[r+1][0]?(f=(l[r][1]-e[1])/(l[r][1]-l[r+1][1]),p=l[r][0]===e[0]&&f>0&&f<=1):l[r][1]===l[r+1][1]?(f=(l[r][0]-e[0])/(l[r][0]-l[r+1][0]),p=l[r][1]===e[1]&&f>0&&f<=1):(f=(l[r][0]-e[0])/(l[r][0]-l[r+1][0]),h=(l[r][1]-e[1])/(l[r][1]-l[r+1][1]),p=Math.abs(f-h)<=n&&f>0&&f<=1),p&&(u.push(e),c.push(new N.Z(u)),u=[e])}Jy(l[r],l[r+1])||u.push(l[r+1])}return u.length>1&&c.push(new N.Z(u)),c.length?c:[eg]};var sg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ng(e,t)}(o,e);var t,r,n,i=ig(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this,{stroke:t.stroke,text:t.text,zIndex:t.zIndex,geometry:t.geometry})).setRenderer(e._render.bind(og(e))),e._visible=!1!==t.visible,"function"==typeof t.width?e._widthFn=t.width:e.setWidth(t.width),e.setWidth2(t.width2),"function"==typeof t.color?e._colorFn=t.color:e.setColor(t.color),e.setColor2(t.color2),e.setLineCap(t.lineCap),e.setArrow(t.arrow),e.setArrowSize(t.arrowSize),e.setArrowColor(t.arrowColor),e._offset=[0,0],e.setOffset(t.offset0,0),e.setOffset(t.offset1,1),e._noOverlap=t.noOverlap,e}return t=o,(r=[{key:"setWidth",value:function(e){this._width=e||0}},{key:"setWidth2",value:function(e){this._width2=e}},{key:"getOffset",value:function(e){return this._offset[e]}},{key:"setOffset",value:function(e,t){var r=Math.max(0,parseFloat(e));switch(t){case 0:this._offset[0]=r;break;case 1:this._offset[1]=r}}},{key:"setLineCap",value:function(e){this._lineCap="round"===e?"round":"butt"}},{key:"getWidth",value:function(e,t){if(this._widthFn)return this._widthFn(e,t);var r="number"==typeof this._width2?this._width2:this._width;return this._width+(r-this._width)*t}},{key:"setColor",value:function(e){try{this._color=(0,Ke._2)(e)}catch(e){this._color=[0,0,0,1]}}},{key:"setColor2",value:function(e){try{this._color2=(0,Ke._2)(e)}catch(e){this._color2=null}}},{key:"setArrowColor",value:function(e){try{this._acolor=(0,Ke.XC)(e)}catch(e){this._acolor=null}}},{key:"getColor",value:function(e,t){if(this._colorFn)return(0,Ke.XC)(this._colorFn(e,t));var r=this._color,n=this._color2||this._color;return"rgba(".concat(+Math.round(r[0]+(n[0]-r[0])*t),",\n      ").concat(Math.round(r[1]+(n[1]-r[1])*t),",\n      ").concat(Math.round(r[2]+(n[2]-r[2])*t),",\n      ").concat(r[3]+(n[3]-r[3])*t,"\n      )")}},{key:"getArrow",value:function(){return this._arrow}},{key:"setArrow",value:function(e){this._arrow=parseInt(e,10),(this._arrow<-1||this._arrow>2)&&(this._arrow=0)}},{key:"getArrowSize",value:function(){return this._arrowSize||[16,16]}},{key:"setArrowSize",value:function(e){Array.isArray(e)?this._arrowSize=e:"number"==typeof e&&(this._arrowSize=[e,e])}},{key:"drawArrow",value:function(e,t,r,n,i){var o=this.getArrowSize()[0]*i,a=Xy(t,r),s=(t[0]-r[0])/a,l=(t[1]-r[1])/a,u=Math.max(this.getArrowSize()[1]/2,n/2)*i;e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[0]-o*s+u*l,t[1]-o*l-u*s),e.lineTo(t[0]-o*s-u*l,t[1]-o*l+u*s),e.lineTo(t[0],t[1]),e.fill()}},{key:"_render",value:function(e,t){if("LineString"===t.geometry.getType()){var r,n,i,o=t.context;if(!this._visible){var a=t.pixelRatio/t.resolution,s=Math.cos(t.rotation),l=Math.sin(t.rotation);n=t.geometry.getCoordinates();var u=e[0][0]-n[0][0]*a*s-n[0][1]*a*l,c=e[0][1]-n[0][0]*a*l+n[0][1]*a*s;for(e=[],r=0;i=n[r];r+=1)e[r]=[u+i[0]*a*s+i[1]*a*l,c+i[0]*a*l-i[1]*a*s,i[2]]}var f=this.getArrowSize()[0]*t.pixelRatio;o.save(),this.getOffset(0)&&this._splitAsize(e,this.getOffset(0)*t.pixelRatio),this.getOffset(1)&&this._splitAsize(e,this.getOffset(1)*t.pixelRatio,!0),e.length>1&&(-1===this.getArrow()||2===this.getArrow())&&(i=this._splitAsize(e,f),this._acolor?o.fillStyle=this._acolor:o.fillStyle=this.getColor(t.feature,0),this.drawArrow(o,i[0],i[1],this.getWidth(t.feature,0),t.pixelRatio)),e.length>1&&this.getArrow()>0&&(i=this._splitAsize(e,f,!0),this._acolor?o.fillStyle=this._acolor:o.fillStyle=this.getColor(t.feature,1),this.drawArrow(o,i[0],i[1],this.getWidth(t.feature,1),t.pixelRatio));var h=this._splitInto(e,255,2),p=0,d=h.length;if(o.lineJoin="round",o.lineCap=this._lineCap||"butt",h.length>1)for(p=0;p<h.length;p+=1){var y=p/d;for(n=h[p],o.lineWidth=this.getWidth(t.feature,y)*t.pixelRatio,o.strokeStyle=this.getColor(t.feature,y),o.beginPath(),o.moveTo(n[0][0],n[0][1]),r=1;i=n[r];r+=1)o.lineTo(i[0],i[1]);o.stroke()}o.restore()}}},{key:"_splitAsize",value:function(e,t,r){var n,i,o,a,s=0;for(n=o=r?e.pop():e.shift();e.length;){if(i=r?e.pop():e.shift(),s+(a=Xy(n,i))>t){n=[n[0]+(i[0]-n[0])*(t-s)/a,n[1]+(i[1]-n[1])*(t-s)/a],a=Xy(n,o),r?(e.push(i),e.push(n),e.push([n[0]+(o[0]-n[0])/a,n[1]+(o[1]-n[1])/a])):(e.unshift(i),e.unshift(n),e.unshift([n[0]+(o[0]-n[0])/a,n[1]+(o[1]-n[1])/a]));break}s+=a,n=i}return[o,n]}},{key:"_splitInto",value:function(e,t,r){var n,i,o,a=this._noOverlap?1:.9,s=[],l=0;for(n=1;i=e[n];n+=1)l+=Xy(e[n-1],i);var u=Math.max(r||2,l/(t||255)),c=e[0];l=0;var f=[c];for(n=1,i=e[1];n<e.length;){var h=i[0]-c[0],p=i[1]-c[1];if(l+(o=Math.sqrt(h*h+p*p))>u){var d=(u-l)/o;f.push([c[0]+h*d,c[1]+p*d]),s.push(f),f=[c=[c[0]+h*d*a,c[1]+p*d*a]],l=0}else l+=o,c=i,f.push(c),i=e[n+=1]}return s.push(f),s}}])&&rg(t.prototype,r),n&&rg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(J.ZP);const lg=sg;function ug(e){return ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(e)}function cg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==ug(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ug(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ug(o)?o:String(o)),n)}var i,o}function fg(){return fg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dg(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},fg.apply(this,arguments)}function hg(e,t){return hg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hg(e,t)}function pg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=dg(e);if(t){var i=dg(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ug(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function dg(e){return dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dg(e)}var yg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hg(e,t)}(o,e);var t,r,n,i=pg(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).olStyleFn_=t.updateFacadeOptions(e),t}return t=o,n=[{key:"getCanvasSize",value:function(){return[25,15]}}],(r=[{key:"updateFacadeOptions",value:function(e){var t=this;return function(r){var n=r;n instanceof D.Z||r instanceof P.ZP||(n=t);var i=e,o=new lg,a=ad.Z.getValue;return(0,_h.Ew)(i)||(o.setColor(a(i.color,n)),o.setColor2(a(i.color2,n)),o.setArrowColor(a(i.arrowColor,n)),o.setWidth(a(i.width,n)),o.setWidth2(a(i.width2,n)),o.setArrow(a(i.arrow,n)),o.setLineCap(a(i.lineCap,n)),o.setOffset(a(i.offset0,n),0),o.setOffset(a(i.offset1,n),1)),[o]}}},{key:"applyToLayer",value:function(e){fg(dg(o.prototype),"applyToLayer",this).call(this,e);var t=e.getImpl().getOL3Layer();(0,_h.Ew)(t)||(this.postComposeEvtKey_=t.on("postcompose",ry,t))}},{key:"unapply",value:function(){(0,Ye.B)(this.postComposeEvtKey_)}},{key:"updateCanvas",value:function(e){this.updateFacadeOptions(this.options_);var t=o.getCanvasSize(),r=(0,C.Pt)(e.getContext("2d"),{size:t}),n=this.olStyleFn_()[0];r.setStyle(n)}}])&&cg(t.prototype,r),n&&cg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(ad.Z);const gg=yg;function mg(e){return mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(e)}function _g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==mg(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==mg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===mg(o)?o:String(o)),n)}var i,o}function vg(e,t){return vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vg(e,t)}function Ag(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=bg(e);if(t){var i=bg(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===mg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function bg(e){return bg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bg(e)}var wg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vg(e,t)}(o,e);var t,r,n,i=Ag(o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=e;(0,_h.Ew)(t)&&(t=o.DEFAULT_NULL),t=(0,_h.cU)({},t);var r=new gg(t);return i.call(this,t,r)}return t=o,(r=[{key:"unapply",value:function(e){this.getImpl().unapply(e)}},{key:"getDeserializedMethod_",value:function(){return"((serializedParameters) => M.style.Simple.deserialize(serializedParameters, 'M.style.FlowLine'))"}}])&&_g(t.prototype,r),n&&_g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Gh.Z);wg.DEFAULT_NULL={color:"red",color2:"yellow",arrowColor:"",width:2,width2:25,arrow:0,lineCap:"butt"};const Eg=wg;const xg={generateStyleLayer:function(e,t){var r;switch(t.getGeometryType()){case"Point":case"MultiPoint":r=new Qh.Z(e);break;case"LineString":case"MultiLineString":r=new _y(e);break;case"Polygon":case"MultiPolygon":r=new Yd(e);break;default:return null}return r},generateRandomGenericStyle:function(e){var t=e.radius,r=Bd().random().hex(),n=e.strokeColor,i=e.strokeWidth,o={point:{radius:t,fill:{color:r},stroke:{color:n,width:i}},line:{fill:{color:r},stroke:{color:n,width:i}},polygon:{fill:{color:r},stroke:{color:n,width:i}}};return new zh.Z(o)}};function Ig(e){return Ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(e)}function Sg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==Ig(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ig(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===Ig(o)?o:String(o)),n)}var i,o}function Og(){return Og="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kg(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},Og.apply(this,arguments)}function Tg(e,t){return Tg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Tg(e,t)}function Mg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=kg(e);if(t){var i=kg(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ig(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kg(e){return kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kg(e)}var Rg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tg(e,t)}(o,e);var t,r,n,i=Mg(o);function o(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),r=i.call(this,n,{}),(0,_h.Ew)(e)&&(0,qh.Z)((0,xh.NA)("exception").no_attr_name),r.attributeName_=e,r.categoryStyles_=t,r}return t=o,r=[{key:"ORDER",get:function(){return 2}},{key:"applyInternal",value:function(e){this.layer_=e,this.update_()}},{key:"getAttributeName",value:function(){return this.attributeName_}},{key:"setAttributeName",value:function(e){return this.attributeName_=e,this.update_(),this.refresh(),this}},{key:"getCategories",value:function(){return this.categoryStyles_}},{key:"setCategories",value:function(e){return this.categoryStyles_=e,this.update_(),this.refresh(),this}},{key:"getStyleForCategory",value:function(e){return this.categoryStyles_[e]}},{key:"setStyleForCategory",value:function(e,t){return this.categoryStyles_[e]=t,this.update_(),this.refresh(),this}},{key:"updateCanvas",value:function(){var e=this,t=[];this.updateCanvasPromise_=new Promise((function(r,n){e.loadCanvasImages_(0,t,r)}))}},{key:"loadCanvasImages_",value:function(e,t,r){var n=this,i=this.getCategories(),o=Object.keys(i);if(e===o.length)this.drawGeometryToCanvas(t,r);else{var a=o[e],s=this.getStyleForCategory(a),l=new Image;if(l.crossOrigin="Anonymous",l.onload=function(){t.push({image:l,categoryName:a}),n.loadCanvasImages_(e+1,t,r)},l.onerror=function(){t.push({categoryName:a}),n.loadCanvasImages_(e+1,t,r)},s.updateCanvas(),s.get("icon.src"))(0,_h.Ad)(s.get("icon.src")).then((function(e){l.width=s.get("icon.scale")?e.width*s.get("icon.scale"):e.width,l.height=s.get("icon.scale")?e.height*s.get("icon.scale"):e.height,s.toImage().then((function(e){l.src=e}))}));else{var u=s.toImage();u instanceof Promise?u.then((function(e){l.src=e})):l.src=u}}}},{key:"drawGeometryToCanvas",value:function(e,t){var r=e.map((function(e){return e.image.height})),n=e.map((function(e){return e.image.width})),i=this.canvas_.getContext("2d");i.canvas.height=r.reduce((function(e,t){return e+t+5})),i.textBaseline="middle";var o=Math.max.apply(n,n);e.forEach((function(e,t){var n=e.image,a=e.categoryName,s=0,l=r.slice(0,t);(0,_h.Ew)(l)||(s=l.reduce((function(e,t){return e+t+5})),s+=5);var u=0;if(!(0,_h.Ew)(n)){u=n.height;var c=(o-n.width)/2;i.drawImage(n,c,s,n.width,n.height)}i.fillText(a,o+5,s+u/2)})),t()}},{key:"update_",value:function(){var e=this;if(!(0,_h.Ew)(this.layer_)){((0,_h.Ew)(this.categoryStyles_)||0===Object.keys(this.categoryStyles_).length)&&(this.categoryStyles_=this.generateRandomCategories_());var t=this.categoryStyles_.other;this.layer_.getFeatures().forEach((function(r){var n=r.getAttribute(e.attributeName_),i=e.categoryStyles_[n];(0,_h.Ew)(i)?(0,_h.Ew)(t)||r.setStyle(t):r.setStyle(i)})),this.updateCanvas()}}},{key:"add",value:function(e){var t=e;return(0,_h.kJ)(t)||(t=[t]),t=t.filter((function(e){return e instanceof Kh.Z||e instanceof vp})),Og(kg(o.prototype),"add",this).call(this,t)}},{key:"generateRandomCategories_",value:function(){var e=this,t={};return(0,_h.Ew)(this.layer_)||this.layer_.getFeatures().forEach((function(r){var n=r.getAttribute(e.attributeName_);Object.prototype.hasOwnProperty.call(t,n)||(t[n]=xg.generateRandomGenericStyle({radius:o.RANDOM_RADIUS_OPTION,strokeColor:o.RANDOM_STROKE_COLOR_OPTION,strokeWidth:o.RANDOM_STROKE_WIDTH_OPTION}))})),t}},{key:"toJSON",value:function(){var e=this.getAttributeName(),t=this.getCategories(),r={};Object.keys(t).forEach((function(e){r[e]=t[e].serialize()}));var n=(0,_h.cU)({},this.getOptions());n=(0,_h.sV)(n);var i=this.getStyles().map((function(e){return e.serialize()}));return{parameters:[e,r,n,i],deserializedMethod:"M.style.Category.deserialize"}}}],n=[{key:"deserialize",value:function(e){var t=Sg(e,4),r=t[0],n=t[1],i=t[2],o=t[3],a=r,s=n;Object.keys(n).forEach((function(e){s[e]=Zh.Z.deserialize(n[e])}));var l=(0,_h.Q8)(i),u=new Function(["attributeName","categoryStyles","options"],"return new M.style.Category(attributeName, categoryStyles, options)")(a,s,l),c=o.map((function(e){return Zh.Z.deserialize(e)}));return u.add(c),u}}],r&&Pg(t.prototype,r),n&&Pg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Uh.Z);Rg.RANDOM_RADIUS_OPTION=10,Rg.RANDOM_STROKE_WIDTH_OPTION=1,Rg.RANDOM_STROKE_COLOR_OPTION="black";const Bg=Rg;var Lg=__webpack_require__(47973),Dg=__webpack_require__(25559);function jg(e){return jg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(e)}var Fg=/XYZ\*.*/,Ng=function(e){var t=e.parameter,r=e.attr,n=e.type,i=e.separator,o=e.normalized,a=void 0!==o&&o;return function(e,o){var s,l={boolean:function(e){return/^1|(true)$/i.test(e)},string:function(e){return e},int:function(e){return Number.parseInt(e,10)},float:function(e){return Number.parseFloat(e,10)},array_number:function(e){return e.split(i||"").map((function(e){return e.trim()})).map((function(e){return Number.parseFloat(e)}))}};if((0,_h.HD)(t)&&e.test(t)){var u=t.split("*")[o];(0,_h.Ew)(u)||(s=l[n](u))}else(0,_h.Kn)(t)?s=t[r]:(0,qh.Z)("El parámetro no es de un tipo soportado: ".concat(jg(t)));return(0,_h.HD)(s)&&(s=s.trim()),!0===a&&(s=(0,_h.Fv)(s)),s}};const Zg=function(e){var t=[];(0,_h.Ew)(e)&&(0,qh.Z)((0,xh.NA)("exception").no_param);var r=e;return(0,_h.kJ)(r)||(r=[r]),t=r.map((function(e){var t,r=Ep.XYZ,n=Ng({parameter:e,type:"string",attr:"name"}),i=Ng({parameter:e,type:"string",attr:"url"}),o=Ng({parameter:e,type:"string",attr:"legend"}),a=Ng({parameter:e,type:"boolean",attr:"displayInLayerSwitcher"});return(Fg.test(e)||(0,_h.Kn)(e))&&(t={type:r,name:n(Fg,3),url:i(Fg,2),legend:o(Fg,1),displayInLayerSwitcher:a(Fg,4)}),t})),(0,_h.kJ)(e)||(t=t[0]),t};function Ug(e){return Ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(e)}var Qg=/TMS\*.*/,Gg=function(e){var t=e.parameter,r=e.attr,n=e.type,i=e.separator,o=e.normalized,a=void 0!==o&&o;return function(e,o){var s,l={boolean:function(e){return/^1|(true)$/i.test(e)},string:function(e){return e},int:function(e){return Number.parseInt(e,10)},float:function(e){return Number.parseFloat(e,10)},array_number:function(e){return e.split(i||"").map((function(e){return e.trim()})).map((function(e){return Number.parseFloat(e)}))}};if((0,_h.HD)(t)&&e.test(t)){var u=t.split("*")[o];(0,_h.Ew)(u)||(s=l[n](u))}else(0,_h.Kn)(t)?s=t[r]:(0,qh.Z)("El parámetro no es de un tipo soportado: ".concat(Ug(t)));return(0,_h.HD)(s)&&(s=s.trim()),!0===a&&(s=(0,_h.Fv)(s)),s}};const zg=function(e){var t=[];(0,_h.Ew)(e)&&(0,qh.Z)((0,xh.NA)("exception").no_param);var r=e;return(0,_h.kJ)(r)||(r=[r]),t=r.map((function(e){var t,r=Ep.TMS,n=Gg({parameter:e,type:"string",attr:"name"}),i=Gg({parameter:e,type:"string",attr:"url"}),o=Gg({parameter:e,type:"string",attr:"legend"}),a=Gg({parameter:e,type:"boolean",attr:"displayInLayerSwitcher"});return(Qg.test(e)||(0,_h.Kn)(e))&&(t={type:r,name:n(Qg,3),url:i(Qg,2),legend:o(Qg,1),displayInLayerSwitcher:a(Qg,4)}),t})),(0,_h.kJ)(e)||(t=t[0]),t};function qg(e){return qg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(e)}var Vg=/MBTiles\*. */,Wg=function(e){var t=e.parameter,r=e.attr,n=e.type,i=e.separator,o=e.normalized,a=void 0!==o&&o;return function(e,o){var s,l={boolean:function(e){return/^1|(true)$/i.test(e)},string:function(e){return e},int:function(e){return Number.parseInt(e,10)},float:function(e){return Number.parseFloat(e,10)},array_number:function(e){return e.split(i||"").map((function(e){return e.trim()})).map((function(e){return Number.parseFloat(e)}))}};if((0,_h.HD)(t)&&e.test(t)){var u=t.split("*")[o];(0,_h.Ew)(u)||(s=l[n](u))}else(0,_h.Kn)(t)?s=t[r]:(0,qh.Z)("El parámetro no es de un tipo soportado: ".concat(qg(t)));return(0,_h.HD)(s)&&(s=s.trim()),!0===a&&(s=(0,_h.Fv)(s)),s}};const Kg=function(e){var t=[];(0,_h.Ew)(e)&&(0,qh.Z)((0,xh.NA)("exception").no_param);var r=e;return(0,_h.kJ)(r)||(r=[r]),t=r.map((function(e){var t,r=Wg({parameter:e,type:"string",attr:"name"}),n=Wg({parameter:e,type:"string",attr:"url"}),i=Wg({parameter:e,type:"string",attr:"legend"});return(Vg.test(e)||(0,_h.Kn)(e))&&(t={type:"MBTilesVector",name:r(Vg,3),url:n(Vg,2),legend:i(Vg,1)}),t})),(0,_h.kJ)(e)||(t=t[0]),t};function Hg(e){return Hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(e)}var Yg=/MBTiles\*.*/,Xg=function(e){var t=e.parameter,r=e.attr,n=e.type,i=e.separator,o=e.normalized,a=void 0!==o&&o;return function(e,o){var s,l={boolean:function(e){return/^1|(true)$/i.test(e)},string:function(e){return e},int:function(e){return Number.parseInt(e,10)},float:function(e){return Number.parseFloat(e,10)},array_number:function(e){return e.split(i||"").map((function(e){return e.trim()})).map((function(e){return Number.parseFloat(e)}))}};if((0,_h.HD)(t)&&e.test(t)){var u=t.split("*")[o];(0,_h.Ew)(u)||(s=l[n](u))}else(0,_h.Kn)(t)?s=t[r]:(0,qh.Z)("El parámetro no es de un tipo soportado: ".concat(Hg(t)));return(0,_h.HD)(s)&&(s=s.trim()),!0===a&&(s=(0,_h.Fv)(s)),s}};const Jg=function(e){var t=[];(0,_h.Ew)(e)&&(0,qh.Z)((0,xh.NA)("exception").no_param);var r=e;return(0,_h.kJ)(r)||(r=[r]),t=r.map((function(e){var t,r=Xg({parameter:e,type:"string",attr:"name"}),n=Xg({parameter:e,type:"string",attr:"url"}),i=Xg({parameter:e,type:"string",attr:"legend"});return(Yg.test(e)||(0,_h.Kn)(e))&&(t={type:"MBTiles",name:r(Yg,3),url:n(Yg,2),legend:i(Yg,1)}),t})),(0,_h.kJ)(e)||(t=t[0]),t};var $g=__webpack_require__(38189),em=__webpack_require__(86659),tm=__webpack_require__(9396),rm=__webpack_require__(32974),nm=__webpack_require__(12479),im=__webpack_require__(4884),om=__webpack_require__(12417),am=__webpack_require__(61901),sm=__webpack_require__(73477),lm=__webpack_require__(86018),um=__webpack_require__(71145),cm=__webpack_require__(98210),fm=__webpack_require__(4143),hm=__webpack_require__(50561),pm=__webpack_require__(84842),dm=__webpack_require__(53444);function ym(e){return ym="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(e)}function gm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==ym(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ym(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===ym(o)?o:String(o)),n)}var i,o}function mm(e,t){return mm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},mm(e,t)}function _m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=vm(e);if(t){var i=vm(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ym(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function vm(e){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vm(e)}var Am=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mm(e,t)}(o,e);var t,r,n,i=_m(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return t=o,(r=[{key:"getImageSize",value:function(){return this.iconImage_.getSize()}}])&&gm(t.prototype,r),n&&gm(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(rt.Z);const bm=Am;var wm=__webpack_require__(21030),Em=__webpack_require__(24225),xm=__webpack_require__(52568),Im=__webpack_require__(95934),Sm=__webpack_require__(29128),Cm=__webpack_require__(94857),Pm=__webpack_require__(32825),Om=__webpack_require__(8671),Tm=__webpack_require__(32828),Mm=__webpack_require__(64313),km=__webpack_require__(23061),Rm=__webpack_require__(68586),Bm=__webpack_require__(52344),Lm=__webpack_require__(71321),Dm=__webpack_require__(99368),jm=__webpack_require__(54180),Fm=__webpack_require__(9538),Nm=__webpack_require__(48609),Zm=__webpack_require__(39802),Um=__webpack_require__(65634),Qm=__webpack_require__(68189),Gm=__webpack_require__(36472),zm=__webpack_require__(94476),qm=__webpack_require__(95280),Vm=__webpack_require__(58227),Wm=__webpack_require__(71635),Km=__webpack_require__(68311),Hm=__webpack_require__(8312),Ym=__webpack_require__(15967),Xm=__webpack_require__(87162),Jm=__webpack_require__(99075);function $m(e){return $m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$m(e)}function e_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==$m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==$m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===$m(o)?o:String(o)),n)}var i,o}function t_(e,t){return t_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t_(e,t)}function r_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=n_(e);if(t){var i=n_(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===$m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function n_(e){return n_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},n_(e)}var i_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t_(e,t)}(o,e);var t,r,n,i=r_(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this)).geojsonFormatter_=new Xm.Z,e.name="drawLayer",e.selectedFeatures_=[],e}return t=o,r=[{key:"addTo",value:function(e){this.map=e,this.fire(Cd.GY),this.ol3Layer=new K.Z({source:new H.Z({}),style:new J.ZP({fill:new nt.Z({color:"rgba(0, 158, 0, 0.1)"}),stroke:new $e.Z({color:"#fcfcfc",width:2}),image:new it.Z({radius:7,fill:new nt.Z({color:"#009E00"}),stroke:new $e.Z({color:"#fcfcfc",width:2})})}),zIndex:Jm.Z.Z_INDEX.WFS+999}),!1!==this.options.visibility&&this.setVisible(this.inRange()),this.map.getMapImpl().addLayer(this.ol3Layer)}},{key:"selectFeatures",value:function(e){this.selectedFeatures_=e,(0,_h.mf)(this.selectedFeatures_[0].click)&&this.selectedFeatures_[0].click()}},{key:"unselectFeatures",value:function(){this.selectedFeatures_.length>0&&(this.selectedFeatures_.length=0,this.map.removePopup())}},{key:"drawPoints",value:function(e){var t=e;(0,_h.Ew)(t)&&(0,qh.Z)((0,xh.NA)("exception").no_point),(0,_h.kJ)(t)||(t=[t]);var r=this.pointsToGeoJSON_(t);this.drawGeoJSON(r)}},{key:"drawGeoJSON",value:function(e){var t=this,r=e;(0,_h.Ew)(r)&&(0,qh.Z)((0,xh.NA)("exception").no_geojson),(0,_h.kJ)(r)||(r=[r]);var n=(0,v.U2)(this.map.getProjection().code),i=[];r.forEach((function(e){var r=t.geojsonFormatter_.readFeatures(e,{dataProjection:n});i=i.concat(r)})),this.ol3Layer.getSource().addFeatures(i)}},{key:"drawFeatures",value:function(e){var t=e;(0,_h.Ew)(t)||((0,_h.kJ)(t)||(t=[t]),this.ol3Layer.getSource().addFeatures(t))}},{key:"removeFeatures",value:function(e){var t=e;if(!(0,_h.Ew)(t)){(0,_h.kJ)(t)||(t=[t]);var r=this.ol3Layer.getSource();t.forEach((function(e){r.removeFeature(e)}))}}},{key:"getPoints",value:function(e){var t=[],r=this.ol3Layer.getSource();return t=(0,_h.Ew)(e)?r.getFeatures():r.getFeaturesAtCoordinate(e),this.featuresToPoints_(t)}},{key:"destroy",value:function(){var e=this.map.getMapImpl();(0,_h.Ew)(this.ol3Layer)||(e.removeLayer(this.ol3Layer),this.ol3Layer=null),this.options=null,this.map=null}},{key:"equals",value:function(e){var t=!1;return e instanceof o&&(t=t&&this.name===e.name),t}},{key:"pointsToGeoJSON_",value:function(e){var t=this,r=(0,v.U2)(this.map.getProjection().code);return e.map((function(e){var n=e.data,i=new q.Z([e.x,e.y]);return{type:"Feature",geometry:t.geojsonFormatter_.writeGeometryObject(i,{dataProjection:r}),properties:n,click:e.click,showPopup:e.showPopup}}))}},{key:"featuresToPoints_",value:function(e){return[]}}],r&&e_(t.prototype,r),n&&e_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(Ym.Z);const o_=i_;var a_=__webpack_require__(4597),s_=__webpack_require__(17768);function l_(e){return l_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l_(e)}function u_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==l_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===l_(o)?o:String(o)),n)}var i,o}var c_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootPrefix=null,this.namespaces={ol:"http://openlayers.org/context",wmc:"http://www.opengis.net/context",sld:"http://www.opengis.net/sld",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema",ogc:"http://www.opengis.net/ogc"},this.options=t}var t,n,i;return t=e,n=[{key:"read",value:function(e){var t=e;(0,_h.HD)(e)&&(t=(0,r.Qc)(e)),9!==t.nodeType&&(0,qh.Z)((0,xh.NA)("exception").must_be_document);var n={};return this.readRoot(n,t),n}},{key:"readRoot",value:function(e,t){var r=e,n=t.documentElement;this.rootPrefix=n.prefix,r.version=n.getAttribute("version"),this.runChildNodes(r,n)}},{key:"runChildNodes",value:function(e,t){for(var r,n,i,o,a=t.childNodes,s=0,l=a.length;s<l;s+=1)1===(r=a[s]).nodeType&&(i=this.getNamespacePrefix(r.namespaceURI),o=r.nodeName.split(":").pop(),(n=this["read".concat(i).concat(o)])&&n.apply(this,[e,r]))}},{key:"getNamespacePrefix",value:function(e){var t=null;if(null===e)t=this.namespaces[this.defaultPrefix];else for(var r=Object.keys(this.namespaces),n=0;n<r.length&&(t=r[n],this.namespaces[t]!==e);n+=1);return t}},{key:"getAttributeNS",value:function(e,t,r){var n="";if(e.getAttributeNS)n=e.getAttributeNS(t,r)||"";else{var i=this.getAttributeNodeNS(e,t,r);i&&(n=i.nodeValue)}return n}}],i=[{key:"getChildValue",value:function(e,t){var r=t||"";if(e)for(var n=e.firstChild;n;n=n.nextSibling)switch(n.nodeType){case 3:case 4:r+=n.nodeValue}return r}}],n&&u_(t.prototype,n),i&&u_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();const f_=c_;function h_(e){return h_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h_(e)}function p_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==h_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==h_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===h_(o)?o:String(o)),n)}var i,o}const d_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parser=new mu.Z,this.capabilities=null}var t,r,n;return t=e,(r=[{key:"read",value:function(e){return this.capabilities=this.parser.read(e),this}},{key:"getMatrixSet",value:function(e,t){for(var r,n=0;n<this.capabilities.Contents.Layer.length&&void 0===r;n+=1){var i=this.capabilities.Contents.Layer[n];i.Identifier===e&&((0,_h.Ew)(t)||(r=i.TileMatrixSetLink.filter((function(e){return e.contains(t)}))[0]),void 0===r&&(r=i.TileMatrixSetLink[0].TileMatrixSet))}return r}},{key:"getMatrixIds",value:function(e,t){var r=[],n=this.getMatrixSet(e,t),i=this.capabilities.Contents.TileMatrixSet.filter((function(e){return e.Identifier===n}))[0];return null!=i&&i.length>0&&(r=i.TileMatrix.map((function(e){return e.Identifier}))),r}},{key:"getFormat",value:function(e){var t,r=this.capabilities.Contents.Layer.filter((function(t){return t.Identifier===e}))[0];return null!=r&&(t=r.Format[0]),t}},{key:"getOptionsFromCapabilities",value:function(e,t){return(0,E.B)(this.capabilities,{layer:e,matrixSet:t})}}])&&p_(t.prototype,r),n&&p_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var y_=__webpack_require__(43938),g_=__webpack_require__(6155),m_=__webpack_require__(73008),__=__webpack_require__(4833),v_=__webpack_require__(74524),A_=__webpack_require__(32391),b_=__webpack_require__(50006),w_=__webpack_require__(67719),E_=__webpack_require__(63997),x_=__webpack_require__(94531),I_=__webpack_require__(1597),S_=__webpack_require__(66149),C_=__webpack_require__(62513),P_=__webpack_require__(77707),O_=__webpack_require__(28640),T_=__webpack_require__(16451),M_=__webpack_require__(19441),k_=__webpack_require__(94551),R_=__webpack_require__(39645),B_=__webpack_require__(38234),L_=__webpack_require__(70939),D_=__webpack_require__(10593),j_=__webpack_require__(63330),F_=__webpack_require__(7508),N_=__webpack_require__(19170),Z_=__webpack_require__(54832),U_=__webpack_require__(81638),Q_=__webpack_require__(30994),G_=__webpack_require__(30306),z_=__webpack_require__(1507),q_=__webpack_require__(40711),V_=__webpack_require__(13381),W_=__webpack_require__(63920),K_=__webpack_require__(30269),H_=__webpack_require__(14738),Y_=__webpack_require__(42792),X_=__webpack_require__(81213),J_=__webpack_require__(17486),$_=__webpack_require__(18798),ev=__webpack_require__(45686),tv=__webpack_require__(60894);function rv(e){return rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rv(e)}function nv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(i=n.key,o=void 0,o=function(e,t){if("object"!==rv(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==rv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===rv(o)?o:String(o)),n)}var i,o}function iv(e,t){return iv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iv(e,t)}function ov(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=av(e);if(t){var i=av(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===rv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function av(e){return av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},av(e)}var sv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iv(e,t)}(o,e);var t,r,n,i=ov(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),i.apply(this,arguments)}return t=o,r=[{key:"addTo",value:function(e){var t=this;(0,_h.Ew)(e)&&(0,qh.Z)((0,xh.NA)("exception").no_map);var r=this.getImpl();(0,_h.o8)(r.addTo)&&(0,qh.Z)((0,xh.NA)("exception").addto_method);var n=this.createView(e);n instanceof Promise?n.then((function(n){r.addTo(e,n),t.fire(Cd.GY)})):(r.addTo(e,n),this.fire(Cd.GY))}},{key:"createView",value:function(e){}},{key:"getControls",value:function(){}}],r&&nv(t.prototype,r),n&&nv(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(U_.Z);const lv=sv;var uv=__webpack_require__(68079),cv=__webpack_require__(14116),fv=__webpack_require__(89437),hv=__webpack_require__(64225),pv=__webpack_require__(5922),dv=__webpack_require__(62557),yv=window.M={},gv=window.ol={};yv.ClusteredFeature=dv.Z,yv.Control=pv.Z,yv.Feature=vy.Z,yv.Label=hv.Z,yv.Layer=fv.Z,yv.Map=cv.Z,yv.Object=uv.Z,yv.Parameters=Od.ZP,yv.Parameters.parseBbox=Od.w_,yv.Parameters.parseCenter=Od.k_,yv.Parameters.parseContainer=Od.LK,yv.Parameters.parseControls=Od.sh,yv.Parameters.parseGetFeatureInfo=Od.Nq,yv.Parameters.parseKML=Od.Cw,yv.Parameters.parseLabel=Od.Ps,yv.Parameters.parseLayers=Od.Nh,yv.Parameters.parseMaxExtent=Od.Ih,yv.Parameters.parseMaxZoom=Od.Cc,yv.Parameters.parseMinZoom=Od.vV,yv.Parameters.parseProjection=Od.d5,yv.Parameters.parseResolutions=Od.ED,yv.Parameters.parseTicket=Od.Fs,yv.Parameters.parseViewExtent=Od.GF,yv.Parameters.parseWMC=Od.JO,yv.Parameters.parseWMS=Od.BU,yv.Parameters.parseWMTS=Od.HB,yv.Parameters.parseZoom=Od.$L,yv.Parameters.parseZoomConstrains=Od.c4,yv.Plugin=lv,yv.Popup=tv.Z,yv.RenderFeature=ev.Z,yv.Style=Zh.Z,yv.Tile=$_.Z,yv.addQuickLayers=Td.FD,yv.config=Td.vc,yv.control={},yv.control.Attributions=J_.Z,yv.control.BackgroundLayers=X_.Z,yv.control.GetFeatureInfo=Y_.Z,yv.control.Location=H_.Z,yv.control.Panzoom=K_.Z,yv.control.Panzoombar=W_.Z,yv.control.Rotate=V_.Z,yv.control.Scale=q_.Z,yv.control.ScaleLine=z_.Z,yv.dialog={},yv.dialog.error=Pd.error,yv.dialog.info=Pd.info,yv.dialog.remove=Pd.remove,yv.dialog.removeElement=Pd.removeElement,yv.dialog.show=Pd.show,yv.dialog.success=Pd.success,yv.evt={},yv.evt.ACTIVATED=Cd.J_,yv.evt.ADDED_GEOTIFF=Cd.oR,yv.evt.ADDED_KML=Cd.w$,yv.evt.ADDED_LAYER=Cd.N5,yv.evt.ADDED_MAPLIBRE=Cd.IF,yv.evt.ADDED_MBTILES=Cd.WI,yv.evt.ADDED_MBTILES_VECTOR=Cd.nU,yv.evt.ADDED_OGCAPIFEATURES=Cd.h$,yv.evt.ADDED_QUICK_LAYERS=Cd.RE,yv.evt.ADDED_TMS=Cd.D8,yv.evt.ADDED_TO_MAP=Cd.GY,yv.evt.ADDED_TO_PANEL=Cd.zm,yv.evt.ADDED_VECTOR_TILE=Cd.jB,yv.evt.ADDED_WFS=Cd.W_,yv.evt.ADDED_WMS=Cd.dQ,yv.evt.ADDED_WMTS=Cd.TI,yv.evt.ADDED_XYZ=Cd.L8,yv.evt.CHANGE=Cd.Ve,yv.evt.CHANGE_PROJ=Cd.h9,yv.evt.CHANGE_STYLE=Cd.CK,yv.evt.CHANGE_ZOOM=Cd.l8,yv.evt.CLICK=Cd.ot,yv.evt.COMPLETED=Cd.Qc,yv.evt.DEACTIVATED=Cd.Lt,yv.evt.DESTROY=Cd.Kn,yv.evt.EventsManager=G_.Z,yv.evt.HIDE=Cd.B8,yv.evt.HOVER_FEATURES=Cd.Nm,yv.evt.LEAVE_FEATURES=Cd.V7,yv.evt.LOAD=Cd.VX,yv.evt.Listener=Q_.Z,yv.evt.MOVE=Cd.tP,yv.evt.MOVE_MOUSE=Cd.Yn,yv.evt.REMOVED_FROM_MAP=Cd.ED,yv.evt.REMOVED_LAYER=Cd.K6,yv.evt.SELECT_FEATURES=Cd.Oj,yv.evt.SHOW=Cd.nr,yv.evt.UNSELECT_FEATURES=Cd.cF,yv.exception=qh.Z,yv.facade={},yv.facade.Base=U_.Z,yv.filter={},yv.filter.AND=function(e){var t="",r=e.length;return e.forEach((function(e,n){t+="(".concat(e.toCQL(),")"),n<r-1&&(t+=" AND ")})),new Vh.Z((function(t){return e.every((function(e){return e.getFunctionFilter()(t)}))}),{cqlFilter:t})},yv.filter.Base=Z_.Z,yv.filter.EQUAL=function(e,t){return new Vh.Z((function(r){return Object.is(r.getAttribute(e),t)}),{cqlFilter:"".concat(e,"='").concat(t,"'")})},yv.filter.Function=Vh.Z,yv.filter.GT=function(e,t){return new Vh.Z((function(r){return null!=r.getAttribute(e)&&r.getAttribute(e)>t}),{cqlFilter:"".concat(e," > '").concat(t,"'")})},yv.filter.GTE=function(e,t){return new Vh.Z((function(r){return null!=r.getAttribute(e)&&r.getAttribute(e)>=t}),{cqlFilter:"".concat(e," >= '").concat(t,"'")})},yv.filter.LIKE=function(e,t){return new Vh.Z((function(r){return r.getAttribute(e).toString().match(new RegExp(t))}),{cqlFilter:"".concat(e," LIKE '%").concat(t,"%'")})},yv.filter.LT=function(e,t){return new Vh.Z((function(r){return null!=r.getAttribute(e)&&r.getAttribute(e)<t}),{cqlFilter:"".concat(e," < '").concat(t,"'")})},yv.filter.LTE=Wh,yv.filter.NOT=function(e){return new Vh.Z((function(t){return!e.getFunctionFilter()(t)}),{cqlFilter:"NOT ".concat(e.toCQL())})},yv.filter.OR=function(e){var t=e.length,r="";return e.forEach((function(e,n){r+="(".concat(e.toCQL(),")"),n<t-1&&(r+=" OR ")})),new Vh.Z((function(t){return e.some((function(e){return e.getFunctionFilter()(t)}))}),{cqlFilter:r})},yv.filter.Spatial=N_.Z,yv.filter.spatial={},yv.filter.spatial.CONTAIN=Sd._E,yv.filter.spatial.DISJOINT=Sd.Y5,yv.filter.spatial.INTERSECT=Sd.S3,yv.filter.spatial.WITHIN=Sd.ok,yv.filter.spatial.parseParamToGeometries=Sd.oi,yv.format={},yv.format.GeoJSON=F_.Z,yv.format.WKT=j_.Z,yv.geom={},yv.geom.geojson={},yv.geom.geojson.type={},yv.geom.geojson.type.GEOMETRY_COLLECTION="GeometryCollection",yv.geom.geojson.type.LINE_STRING="LineString",yv.geom.geojson.type.MULTI_LINE_STRING="MultiLineString",yv.geom.geojson.type.MULTI_POINT="MultiPoint",yv.geom.geojson.type.MULTI_POLYGON="MultiPolygon",yv.geom.geojson.type.POINT="Point",yv.geom.geojson.type.POLYGON="Polygon",yv.geom.parse=Id.Qc,yv.geom.parseWFS=Id.N6,yv.geom.wfs={},yv.geom.wfs.type={},yv.geom.wfs.type.LINE=xd.LINE,yv.geom.wfs.type.MLINE=xd.MLINE,yv.geom.wfs.type.MPOINT=xd.MPOINT,yv.geom.wfs.type.MPOLYGON=xd.MPOLYGON,yv.geom.wfs.type.POINT=xd.POINT,yv.geom.wfs.type.POLYGON=xd.POLYGON,yv.geom.wkt={},yv.geom.wkt.type={},yv.geom.wkt.type.CIRCLE=Ed.Md,yv.geom.wkt.type.GEOMETRY=Ed.x2,yv.geom.wkt.type.GEOMETRY_COLLECTION=Ed.hF,yv.geom.wkt.type.LINEAR_RING=Ed.NB,yv.geom.wkt.type.LINE_STRING=Ed.Sd,yv.geom.wkt.type.MULTI_LINE_STRING=Ed.jW,yv.geom.wkt.type.MULTI_POINT=Ed.V0,yv.geom.wkt.type.MULTI_POLYGON=Ed.rl,yv.geom.wkt.type.POINT=Ed.e_,yv.geom.wkt.type.POLYGON=Ed.KX,yv.getQuickLayers=Td.l6,yv.handlebarshelpers=D_.Z,yv.handler={},yv.handler.Feature=L_.Z,yv.i18n={},yv.i18n.plugins=B_.Z,yv.impl={},yv.impl.Control=R_.Z,yv.impl.Feature=k_.Z,yv.impl.GetCapabilities=M_.Z,yv.impl.Label=T_.Z,yv.impl.Layer=Ym.Z,yv.impl.Map=Jm.Z,yv.impl.OLChart=Yp,yv.impl.OLStyleStrokePattern=Dd.Z,yv.impl.Popup=O_.Z,yv.impl.RenderFeature=P_.Z,yv.impl.Style=Jp.Z,yv.impl.View=C_.Z,yv.impl.control={},yv.impl.control.Attributions=S_.Z,yv.impl.control.GetFeatureInfo=I_.Z,yv.impl.control.Location=x_.Z,yv.impl.control.Panzoom=E_.Z,yv.impl.control.Panzoombar=w_.Z,yv.impl.control.Rotate=b_.Z,yv.impl.control.Scale=wd.Z,yv.impl.control.Scale.formatLongNumber=wd.m,yv.impl.control.ScaleLine=A_.Z,yv.impl.format={},yv.impl.format.DescribeFeatureType=v_.Z,yv.impl.format.GML=__.Z,yv.impl.format.GeoJSON=Xm.Z,yv.impl.format.KML=m_.Z,yv.impl.format.WKT=g_.Z,yv.impl.format.WMSCapabilities=y_.Z,yv.impl.format.WMTSCapabilities=d_,yv.impl.format.XML=f_,yv.impl.handler={},yv.impl.handler.Feature=bd.Z,yv.impl.handler.Feature.getFacadeFeature=bd.t,yv.impl.interaction={},yv.impl.interaction.SelectCluster=s_.Z,yv.impl.layer={},yv.impl.layer.AnimatedCluster=a_.Z,yv.impl.layer.Draw=o_,yv.impl.layer.GenericRaster=Hm.Z,yv.impl.layer.GenericVector=Km.Z,yv.impl.layer.GeoJSON=Wm.Z,yv.impl.layer.GeoTIFF=Vm.Z,yv.impl.layer.Heatmap=Sy,yv.impl.layer.KML=qm.Z,yv.impl.layer.MBTiles=zm.Z,yv.impl.layer.MBTilesVector=Gm.Z,yv.impl.layer.MVT=Qm.Z,yv.impl.layer.MapLibre=Um.Z,yv.impl.layer.OGCAPIFeatures=Zm.Z,yv.impl.layer.OSM=Nm.Z,yv.impl.layer.TMS=Fm.Z,yv.impl.layer.Vector=jm.Z,yv.impl.layer.WFS=Dm.Z,yv.impl.layer.WMS=Lm.Z,yv.impl.layer.WMTS=Bm.Z,yv.impl.layer.XYZ=Rm.Z,yv.impl.loadFiles=km.Z,yv.impl.loader={},yv.impl.loader.JSONP=Mm.Z,yv.impl.loader.KML=Tm.Z,yv.impl.loader.WFS=Om.Z,yv.impl.ol={},yv.impl.ol.js={},yv.impl.ol.js.ext={},yv.impl.ol.js.ext.GeomUtils=t.default,yv.impl.ol.js.ext.OLStyleFillPattern=Ld.Z,yv.impl.ol.js.ext.OLStyleFlowLine=lg,yv.impl.ol.js.ext.OLStyleFontSymbol=qy.Z,yv.impl.ol.js.ext.cspline=e.default,yv.impl.ol.js.patches={},yv.impl.ol.js.patches.optionsFromCapabilities=Ad.B,yv.impl.ol.js.projections=Pm.Z,yv.impl.service={},yv.impl.service.OGCAPIFeatures=Cm.Z,yv.impl.service.WFS=Sm.Z,yv.impl.source={},yv.impl.source.ImageWMS=Im.Z,yv.impl.source.TileWMS=xm.Z,yv.impl.style={},yv.impl.style.Centroid=Xp.Z,yv.impl.style.Chart=vd,yv.impl.style.Chart.extend=dd,yv.impl.style.Chart.generateTextBarChart=gd,yv.impl.style.Chart.generateTextCircleChart=md,yv.impl.style.Chart.getTextData=yd,yv.impl.style.Cluster=Em.Z,yv.impl.style.Feature=od,yv.impl.style.FlowLine=gg,yv.impl.style.Generic=wm.Z,yv.impl.style.Heatmap=Ry,yv.impl.style.Icon=bm,yv.impl.style.Line=fy,yv.impl.style.Path=Xd.Z,yv.impl.style.Point=dm.Z,yv.impl.style.Polygon=Gd,yv.impl.style.Simple=ad.Z,yv.impl.style.builder={},yv.impl.style.builder.getFill=Pp._M,yv.impl.style.builder.getFillPatern=Pp.ow,yv.impl.style.builder.getIconForm=Pp.gW,yv.impl.style.builder.getIconSrc=Pp.zW,yv.impl.style.builder.getLabel=Pp.id,yv.impl.style.builder.getLineStroke=Pp.Gn,yv.impl.style.builder.getLineStyle=Pp.v9,yv.impl.style.builder.getLineText=Pp.Li,yv.impl.style.builder.getPointStyle=Pp.sG,yv.impl.style.builder.getPolygonStyle=Pp.H5,yv.impl.style.builder.getStroke=Pp.mx,yv.impl.style.builder.getStrokePatern=Pp.yP,yv.impl.style.builder.iconCache=Pp.uB,yv.impl.util={},yv.impl.util.TextPath=ty,yv.impl.util.wmtscapabilities=Sp.Z,yv.impl.util.wmtscapabilities=Sp.Z,yv.impl.util.wmtscapabilities.getLayers=Sp.x,yv.impl.utils=Cp.Z,yv.impl.utils=Cp.Z,yv.impl.utils.geojsonTo4326=Cp.w,yv.language={},yv.language.addTranslation=xh.Zt,yv.language.configuration=xh.DN,yv.language.getLang=xh.VQ,yv.language.getTranslation=xh.i0,yv.language.getValue=xh.NA,yv.language.setLang=xh.Wg,yv.layer={},yv.layer.GenericRaster=pm.Z,yv.layer.GenericVector=hm.Z,yv.layer.GeoJSON=fm.Z,yv.layer.GeoTIFF=cm.Z,yv.layer.KML=um.Z,yv.layer.MBTiles=lm.Z,yv.layer.MBTilesVector=Ip.Z,yv.layer.MBTilesVector.mode=Ip.x,yv.layer.MVT=xp.Z,yv.layer.MVT.mode=xp.x,yv.layer.MapLibre=sm.Z,yv.layer.OGCAPIFeatures=am.Z,yv.layer.OSM=om.Z,yv.layer.TMS=im.Z,yv.layer.Vector=nm.Z,yv.layer.WFS=rm.Z,yv.layer.WMS=tm.Z,yv.layer.WMTS=em.Z,yv.layer.XYZ=$g.Z,yv.layer.type={},yv.layer.type.GenericRaster=Ep.GenericRaster,yv.layer.type.GenericVector=Ep.GenericVector,yv.layer.type.GeoJSON=Ep.GeoJSON,yv.layer.type.GeoTIFF=Ep.GeoTIFF,yv.layer.type.KML=Ep.KML,yv.layer.type.MBTiles=Ep.MBTiles,yv.layer.type.MBTilesVector=Ep.MBTilesVector,yv.layer.type.MVT=Ep.MVT,yv.layer.type.MapLibre=Ep.MapLibre,yv.layer.type.OGCAPIFeatures=Ep.OGCAPIFeatures,yv.layer.type.OSM=Ep.OSM,yv.layer.type.TMS=Ep.TMS,yv.layer.type.Vector=Ep.Vector,yv.layer.type.WFS=Ep.WFS,yv.layer.type.WMS=Ep.WMS,yv.layer.type.WMTS=Ep.WMTS,yv.layer.type.XYZ=Ep.XYZ,yv.loadFiles={},yv.loadFiles.addFileToMap=wp.LJ,yv.loadFiles.loadFeaturesFromSource=wp.ft,yv.map=Td.UI,yv.parameter=bp.ZP,yv.parameter=bp.ZP,yv.parameter.geojson=bp.Ms,yv.parameter.geotiff=bp.VJ,yv.parameter.getCQLWFS=bp.U5,yv.parameter.getConditionalOGC=bp.Au,yv.parameter.getDisplayInLayerSwitcherGeoTIFF=bp.tY,yv.parameter.getDisplayInLayerSwitcherWMS=bp.ux,yv.parameter.getDisplayInLayerSwitcherWMTS=bp.p1,yv.parameter.getExtraParameter=bp.nJ,yv.parameter.getExtractGeoJSON=bp.oK,yv.parameter.getExtractKML=bp.Ki,yv.parameter.getExtractMBTilesVector=bp.vT,yv.parameter.getExtractOGC=bp.AM,yv.parameter.getExtractWFS=bp.eL,yv.parameter.getFormatWMTS=bp.w8,yv.parameter.getGeometryWFS=bp.hO,yv.parameter.getIdsWFS=bp.RX,yv.parameter.getLabelKML=bp.pi,yv.parameter.getLegendGeoJSON=bp.U7,yv.parameter.getLegendGeoTIFF=bp.yc,yv.parameter.getLegendKML=bp.ee,yv.parameter.getLegendMBTiles=bp.mC,yv.parameter.getLegendMBTilesVector=bp.hw,yv.parameter.getLegendMVT=bp.xH,yv.parameter.getLegendWFS=bp.wz,yv.parameter.getLegendWMS=bp.dG,yv.parameter.getLegendWMTS=bp.w1,yv.parameter.getMatrixSetWMTS=bp.t2,yv.parameter.getMaxExtentMBTiles=bp.z9,yv.parameter.getMaxExtentMBTilesVector=bp.Vr,yv.parameter.getMaxExtentWMS=bp.r7,yv.parameter.getMaxZoomLevelMBTiles=bp.WB,yv.parameter.getNameGeoTIFF=bp.y3,yv.parameter.getNameKML=bp.Vj,yv.parameter.getNameMBTiles=bp.K7,yv.parameter.getNameMBTilesVector=bp.uR,yv.parameter.getNameMVT=bp.Zo,yv.parameter.getNameTMS=bp.E2,yv.parameter.getNameWFS=bp.dc,yv.parameter.getNameWMS=bp.sd,yv.parameter.getNameWMTS=bp.DC,yv.parameter.getNameXYZ=bp.QK,yv.parameter.getNamespaceWFS=bp.D8,yv.parameter.getNormalizeGeoTIFF=bp.w0,yv.parameter.getOpacityMBTiles=bp.AT,yv.parameter.getOptionsWFS=bp.aC,yv.parameter.getOptionsWMS=bp.ag,yv.parameter.getOptionsWMTS=bp.B5,yv.parameter.getProjectionGeoTIFF=bp.u0,yv.parameter.getQueryableWMS=bp.Ek,yv.parameter.getQueryableWMTS=bp.IZ,yv.parameter.getSourceGeoJSON=bp.c5,yv.parameter.getSourceMBTiles=bp.my,yv.parameter.getSourceMBTilesVector=bp.ii,yv.parameter.getStyleGeoJSON=bp.kp,yv.parameter.getStyleMBTilesVector=bp.EG,yv.parameter.getStyleOGC=bp.YK,yv.parameter.getStyleWFS=bp.I,yv.parameter.getTileLoadFunctionMBTiles=bp.vU,yv.parameter.getTileLoadFunctionMBTilesVector=bp.HE,yv.parameter.getTileSizeMBTiles=bp.zv,yv.parameter.getTileSizeMBTilesVector=bp.Vx,yv.parameter.getTiledWMS=bp.YR,yv.parameter.getTransparentGeoTIFF=bp.cy,yv.parameter.getTransparentMBTiles=bp.hv,yv.parameter.getTransparentWMS=bp.yj,yv.parameter.getTransparentWMTS=bp.IE,yv.parameter.getType=bp.oL,yv.parameter.getURLGeoJSON=bp.zK,yv.parameter.getURLGeoTIFF=bp.fW,yv.parameter.getURLKML=bp.Yv,yv.parameter.getURLMBTiles=bp.i8,yv.parameter.getURLMBTilesVector=bp.lN,yv.parameter.getURLMVT=bp.jI,yv.parameter.getURLWFS=bp.gI,yv.parameter.getURLWMS=bp.mx,yv.parameter.getURLWMTS=bp.s$,yv.parameter.getURLXYZSource=bp.sX,yv.parameter.getUseCapabilitiesWMS=bp.wM,yv.parameter.getVersionWFS=bp.TD,yv.parameter.getVersionWMS=bp.ON,yv.parameter.getVisibilityGeoTIFF=bp.fK,yv.parameter.getVisibilityKML=bp.gc,yv.parameter.getVisibilityMBTiles=bp.QP,yv.parameter.getVisibilityMBTilesVector=bp.nt,yv.parameter.getVisibilityWMS=bp.Lm,yv.parameter.getVisibilityWMTS=bp.W1,yv.parameter.kml=bp.DS,yv.parameter.layer=bp.EY,yv.parameter.maxExtent=bp.ov,yv.parameter.maxZoom=bp.Hw,yv.parameter.mbtiles=Jg,yv.parameter.mbtiles=bp.Vv,yv.parameter.mbtilesvector=Kg,yv.parameter.mbtilesvector=bp.jh,yv.parameter.minZoom=bp.lJ,yv.parameter.mvt=bp.eK,yv.parameter.ogcapifeatures=bp.bC,yv.parameter.projection=bp.CJ,yv.parameter.resolutions=bp._5,yv.parameter.tms=zg,yv.parameter.tms=bp.zb,yv.parameter.wfs=bp.uS,yv.parameter.wms=bp.Up,yv.parameter.wmts=bp.HC,yv.parameter.xyz=Zg,yv.parameter.xyz=bp.tw,yv.parameter.zoom=bp.sP,yv.polyfill=Dg.Z,yv.proxy=Td.sj,yv.remote=Ap.ZP,yv.remote.Response=Lg.Z,yv.remote.get=Ap.U2,yv.remote.method=Ap.UD,yv.remote.post=Ap.v_,yv.style={},yv.style.Category=Bg,yv.style.Chart=Gp,yv.style.Choropleth=sp,yv.style.Cluster=Kh.Z,yv.style.Composite=Uh.Z,yv.style.Feature=Op.Z,yv.style.FlowLine=Eg,yv.style.Font=Ky,yv.style.Generic=zh.Z,yv.style.Heatmap=zy,yv.style.Line=_y,yv.style.Point=Qh.Z,yv.style.Polygon=Yd,yv.style.Proportional=vp,yv.style.Proportional.getMinMaxValues=yp,yv.style.Simple=Gh.Z,yv.style.align={},yv.style.align.CENTER=Nh.CENTER,yv.style.align.JUSTIFY=Nh.JUSTIFY,yv.style.align.LEFT=Nh.LEFT,yv.style.align.RIGHT=Nh.RIGHT,yv.style.baseline={},yv.style.baseline.ALPHABETIC=Fh.ALPHABETIC,yv.style.baseline.BOTTOM=Fh.BOTTOM,yv.style.baseline.HANGING=Fh.HANGING,yv.style.baseline.IDEOGRAPHIC=Fh.IDEOGRAPHIC,yv.style.baseline.MIDDLE=Fh.MIDDLE,yv.style.baseline.TOP=Fh.TOP,yv.style.chart={},yv.style.chart.Variable=kp,yv.style.chart.schemes=jh,yv.style.chart.types=Dh,yv.style.form={},yv.style.form.BAN="BAN",yv.style.form.BLAZON="BLAZON",yv.style.form.BUBBLE="BUBBLE",yv.style.form.CIRCLE="CIRCLE",yv.style.form.LOZENGE="LOZENGE",yv.style.form.MARKER="MARKER",yv.style.form.NONE="none",yv.style.form.SHIELD="SHIELD",yv.style.form.SIGN="SIGN",yv.style.form.SQUARE="SQUARE",yv.style.form.TRIANGLE="TRIANGLE",yv.style.pattern={},yv.style.pattern.BRECCIA="BRECCIA",yv.style.pattern.BRICK="BRICK",yv.style.pattern.CAPS="CAPS",yv.style.pattern.CEMETRY="CEMETRY",yv.style.pattern.CHAOS="CHAOS",yv.style.pattern.CHARACTER="CHARACTER",yv.style.pattern.CIRCLE="CIRCLE",yv.style.pattern.CLAY="CLAY",yv.style.pattern.COAL="COAL",yv.style.pattern.CONGLOMERATE="CONGLOMERATE",yv.style.pattern.CROSS="CROSS",yv.style.pattern.CROSSES="CROSSES",yv.style.pattern.DOLOMITE="DOLOMITE",yv.style.pattern.DOT="DOT",yv.style.pattern.FLOODED="FLOODED",yv.style.pattern.FOREST="FOREST",yv.style.pattern.GRASS="GRASS",yv.style.pattern.GRAVEL="GRAVEL",yv.style.pattern.HATCH="HATCH",yv.style.pattern.HEXAGON="HEXAGON",yv.style.pattern.ICON="ICON",yv.style.pattern.IMAGE="IMAGE",yv.style.pattern.NYLON="NYLON",yv.style.pattern.PINE="PINE",yv.style.pattern.PINES="PINES",yv.style.pattern.ROCK="ROCK",yv.style.pattern.ROCKS="ROCKS",yv.style.pattern.SAND="SAND",yv.style.pattern.SCRUB="SCRUB",yv.style.pattern.SQUARE="SQUARE",yv.style.pattern.SWAMP="SWAMP",yv.style.pattern.TILE="TILE",yv.style.pattern.TREE="TREE",yv.style.pattern.VINE="VINE",yv.style.pattern.WAVE="WAVE",yv.style.pattern.WOVEN="WOVEN",yv.style.quantification={},yv.style.quantification.ARITHMETIC_PROGRESSION=Bh,yv.style.quantification.EQUAL_INTERVAL=kh,yv.style.quantification.GEOMETRIC_PROGRESSION=Lh,yv.style.quantification.JENKS=Th,yv.style.quantification.MEDIA_SIGMA=Rh,yv.style.quantification.QUANTILE=Mh,yv.style.quantification.hasNegativeValue=Ph,yv.style.quantification.uniqueArray=Ch,yv.style.state={},yv.style.state.DEFAULT="default",yv.style.state.NEW="new",yv.style.state.SELECTED="selected",yv.style.textoverflow={},yv.style.textoverflow.ELLIPSIS="ellipsis",yv.style.textoverflow.HIDDEN="",yv.style.textoverflow.VISIBLE="visible",yv.template=Eh.ZP,yv.template.add=Eh.IH,yv.template.compile=Eh.MY,yv.template.compileSync=Eh.Mp,yv.template.get=Eh.U2,yv.toast={},yv.toast.error=function(e,t,r){return Sh(e,"error","g-cartografia-notification",t,r)},yv.toast.info=function(e,t,r){return Sh(e,"info","g-cartografia-info",t,r)},yv.toast.remove=function(){var e=document.querySelector("div.m-toasts-container");e&&e.remove()},yv.toast.removeElement=Ih,yv.toast.show=Sh,yv.toast.success=function(e,t,r){return Sh(e,"success","g-cartografia-check",t,r)},yv.toast.warning=function(e,t,r){return Sh(e,"warning","g-cartografia-warning",t,r)},yv.ui={},yv.ui.Panel=kd.Z,yv.ui.position={},yv.ui.position.BL=Ah.BL,yv.ui.position.BR=Ah.BR,yv.ui.position.TL=Ah.TL,yv.ui.position.TR=Ah.TR,yv.units={},yv.units.DOTS_PER_INCH=vh.ZV,yv.units.INCHES_PER_UNIT=vh.h8,yv.useproxy=Td.O7,yv.utils=_h.ZP,yv.utils.ObjectToArrayExtent=_h.bu,yv.utils.addParameters=_h.h1,yv.utils.beautifyAttribute=_h.Hx,yv.utils.beautifyAttributeName=_h.EF,yv.utils.beautifyString=_h.tQ,yv.utils.bytesToBase64=_h.J2,yv.utils.concatUrlPaths=_h.wQ,yv.utils.copyImageClipBoard=_h.bE,yv.utils.decodeBase64=_h.NV,yv.utils.decodeHtml=_h.m9,yv.utils.defineFunctionFromString=_h.Q8,yv.utils.dragElement=_h.GC,yv.utils.draggabillyElement=_h.Em,yv.utils.draggabillyPlugin=_h.al,yv.utils.drawDynamicStyle=_h.Is,yv.utils.enableTouchScroll=_h.Sg,yv.utils.encodeBase64=_h.oF,yv.utils.escapeJSCode=_h.Aj,yv.utils.escapeXSS=_h.iT,yv.utils.extend=_h.l7,yv.utils.extendsObj=_h.cU,yv.utils.fillResolutions=_h._5,yv.utils.findUrls=_h.WL,yv.utils.generateColorScale=_h.G,yv.utils.generateIntervals=_h.cw,yv.utils.generateRandom=_h.cL,yv.utils.generateResolutionsFromExtent=_h.Cp,yv.utils.generateResolutionsFromScales=_h.iQ,yv.utils.getEnvolvedExtent=_h.ZM,yv.utils.getImageMap=_h.v2,yv.utils.getImageSize=_h.Ad,yv.utils.getOpacityFromRgba=_h.uN,yv.utils.getParameterValue=_h.X_,yv.utils.getResolutionFromScale=_h.AC,yv.utils.getRgba=_h.HY,yv.utils.getScaleFromResolution=_h.qu,yv.utils.getTextFromHtml=_h.Mw,yv.utils.getWMSGetCapabilitiesUrl=_h.sE,yv.utils.getWMTSGetCapabilitiesUrl=_h.BP,yv.utils.htmlToString=_h.WX,yv.utils.includes=_h.q9,yv.utils.inverseColor=_h.V5,yv.utils.isArray=_h.kJ,yv.utils.isBoolean=_h.jn,yv.utils.isDynamic=_h.vV,yv.utils.isFunction=_h.mf,yv.utils.isGeometryType=_h.Ec,yv.utils.isNull=_h.Ft,yv.utils.isNullOrEmpty=_h.Ew,yv.utils.isObject=_h.Kn,yv.utils.isString=_h.HD,yv.utils.isUndefined=_h.o8,yv.utils.isUrl=_h.CB,yv.utils.modifySVG=_h.XO,yv.utils.normalize=_h.Fv,yv.utils.returnPositionHtmlElement=_h.vp,yv.utils.rgbToHex=_h.vq,yv.utils.rgbaToHex=_h.s,yv.utils.sameUrl=_h.yB,yv.utils.setDynamicLegend=_h.bU,yv.utils.stringToHtml=_h.KJ,yv.utils.stringifyFunctions=_h.sV,yv.utils.styleComparator=_h.o,yv.utils.transfomContent=_h.VC,yv.window=Md.Z,gv.Collection=wa.Z,gv.Feature=D.Z,gv.Geolocation=mh.Z,gv.Image={},gv.Image.decode=f.Jx,gv.Image.load=f.zD,gv.Kinetic=gh.Z,gv.Map=Ef.Z,gv.Object=yh.Z,gv.Observable=Ye.Z,gv.Observable.unByKey=Ye.B,gv.Overlay=Sf.Z,gv.View=Cf.ZP,gv.array={},gv.array.stableSort=He.XV,gv.color={},gv.color.asArray=Ke._2,gv.color.asString=Ke.XC,gv.colorlike={},gv.colorlike.asColorLike=We.y,gv.control={},gv.control.Attribution=dh.Z,gv.control.Control=uf.Z,gv.control.FullScreen=ph,gv.control.MousePosition=Yf,gv.control.OverviewMap=Nf,gv.control.Rotate=wf.Z,gv.control.ScaleLine=bf.Z,gv.control.Zoom=Af.Z,gv.control.ZoomSlider=vf.Z,gv.control.ZoomToExtent=_f,gv.control.defaults={},gv.control.defaults.defaults=Ve.c,gv.coordinate={},gv.coordinate.add=$.IH,gv.coordinate.createStringXY=$.Fj,gv.coordinate.format=$.WU,gv.coordinate.rotate=$.U1,gv.coordinate.toStringHDMS=$.V7,gv.coordinate.toStringXY=$.yZ,gv.easing={},gv.easing.easeIn=qe.easeIn,gv.easing.easeOut=qe.easeOut,gv.easing.inAndOut=qe.inAndOut,gv.easing.linear=qe.linear,gv.easing.upAndDown=qe.upAndDown,gv.events={},gv.events.condition={},gv.events.condition.altKeyOnly=X.Ko,gv.events.condition.altShiftKeysOnly=X.aj,gv.events.condition.always=X.Bx,gv.events.condition.click=X.V4,gv.events.condition.doubleClick=X.OK,gv.events.condition.focus=X.T_,gv.events.condition.mouseOnly=X.QL,gv.events.condition.never=X.Fi,gv.events.condition.noModifierKeys=X.rM,gv.events.condition.penOnly=X.ji,gv.events.condition.platformModifierKey=X.a5,gv.events.condition.platformModifierKeyOnly=X.QC,gv.events.condition.pointerMove=X.MJ,gv.events.condition.primaryAction=X.Xp,gv.events.condition.shiftKeyOnly=X.vY,gv.events.condition.singleClick=X.Kf,gv.events.condition.targetNotEditable=X.TN,gv.events.condition.touchOnly=X.HY,gv.extent={},gv.extent.applyTransform=h.Ne,gv.extent.boundingExtent=h.hI,gv.extent.buffer=h.f3,gv.extent.containsCoordinate=h.b8,gv.extent.containsExtent=h.r4,gv.extent.containsXY=h.jE,gv.extent.createEmpty=h.lJ,gv.extent.equals=h.fS,gv.extent.extend=h.l7,gv.extent.getArea=h.bg,gv.extent.getBottomLeft=h.hC,gv.extent.getBottomRight=h.w$,gv.extent.getCenter=h.qg,gv.extent.getHeight=h.Cr,gv.extent.getIntersection=h.Ed,gv.extent.getSize=h.ap,gv.extent.getTopLeft=h.rL,gv.extent.getTopRight=h.Xv,gv.extent.getWidth=h.dz,gv.extent.intersects=h.kK,gv.extent.isEmpty=h.xb,gv.featureloader={},gv.featureloader.setWithCredentials=ze.Nn,gv.featureloader.xhr=ze.Be,gv.format={},gv.format.EsriJSON=lf,gv.format.Feature=Me.ZP,gv.format.GML=zc.Z,gv.format.GML2=_u.Z,gv.format.GML3=Gc.Z,gv.format.GML32=Qc.Z,gv.format.GMLBase=Uc.Z,gv.format.GPX=Zc.Z,gv.format.GeoJSON=Nc.Z,gv.format.IGC=Fc,gv.format.IIIFInfo=Ti,gv.format.KML=Cc.ZP,gv.format.MVT=Sc.Z,gv.format.OSMXML=Ic,gv.format.Polyline=Ge,gv.format.Polyline.decodeDeltas=Ne,gv.format.Polyline.decodeFloats=Ue,gv.format.Polyline.encodeDeltas=Fe,gv.format.Polyline.encodeFloats=Ze,gv.format.TopoJSON=hc,gv.format.WFS=Ce.Z,gv.format.WFS.writeFilter=Ce.Y,gv.format.WKB=Ju,gv.format.WKT=Pu.Z,gv.format.WMSCapabilities=Cu.Z,gv.format.WMSGetFeatureInfo=Su,gv.format.WMTSCapabilities=mu.Z,gv.format.filter={},gv.format.filter.Bbox=gu.Z,gv.format.filter.Contains=yu.Z,gv.format.filter.DWithin=du.Z,gv.format.filter.Disjoint=pu.Z,gv.format.filter.During=hu.Z,gv.format.filter.EqualTo=fu.Z,gv.format.filter.GreaterThan=cu.Z,gv.format.filter.GreaterThanOrEqualTo=uu.Z,gv.format.filter.Intersects=lu.Z,gv.format.filter.IsBetween=su.Z,gv.format.filter.IsLike=au.Z,gv.format.filter.IsNull=ou.Z,gv.format.filter.LessThan=iu.Z,gv.format.filter.LessThanOrEqualTo=nu.Z,gv.format.filter.Not=ru.Z,gv.format.filter.NotEqualTo=tu.Z,gv.format.filter.Or=eu.Z,gv.format.filter.Within=$l.Z,gv.format.filter.and=Se.xD,gv.format.filter.bbox=Se.VW,gv.format.filter.between=Se.vX,gv.format.filter.contains=Se.r3,gv.format.filter.disjoint=Se.ED,gv.format.filter.during=Se.Q9,gv.format.filter.dwithin=Se.qv,gv.format.filter.equalTo=Se.EW,gv.format.filter.greaterThan=Se.tS,gv.format.filter.greaterThanOrEqualTo=Se.wZ,gv.format.filter.intersects=Se.kK,gv.format.filter.isNull=Se.Ft,gv.format.filter.lessThan=Se.Qj,gv.format.filter.lessThanOrEqualTo=Se.MK,gv.format.filter.like=Se.vL,gv.format.filter.not=Se.ff,gv.format.filter.notEqualTo=Se.eI,gv.format.filter.or=Se.or,gv.format.filter.within=Se.uh,gv.geom={},gv.geom.Circle=R.Z,gv.geom.Geometry=Jl.Z,gv.geom.GeometryCollection=j.Z,gv.geom.LineString=N.Z,gv.geom.LinearRing=Xl.Z,gv.geom.MultiLineString=Q.Z,gv.geom.MultiPoint=G.Z,gv.geom.MultiPolygon=z.Z,gv.geom.Point=q.Z,gv.geom.Polygon=W.ZP,gv.geom.Polygon.circular=W.iu,gv.geom.Polygon.fromCircle=W.Bb,gv.geom.Polygon.fromExtent=W.oJ,gv.geom.SimpleGeometry=ee.ZP;gv.has={},gv.has.DEVICE_PIXEL_RATIO=Ie.MP,gv.interaction={},gv.interaction.DblClickDragZoom=Yl,gv.interaction.DoubleClickZoom=Gl.Z,gv.interaction.DragAndDrop=Ql,gv.interaction.DragBox=Tl.Z,gv.interaction.DragPan=Ol.Z,gv.interaction.DragRotate=Pl.Z,gv.interaction.DragRotateAndZoom=Cl,gv.interaction.DragZoom=Al.Z,gv.interaction.Draw=xe,gv.interaction.Draw.createBox=function(){return function(e,t,r){var n=(0,h.hI)([e[0],e[e.length-1]].map((function(e){return(0,v.Vs)(e,r)}))),i=[[(0,h.hC)(n),(0,h.w$)(n),(0,h.Xv)(n),(0,h.rL)(n),(0,h.hC)(n)]];t?t.setCoordinates(i):t=new W.ZP(i);var o=(0,v.Cs)();return o&&t.transform(r,o),t}},gv.interaction.Draw.createRegularPolygon=function(e,t){return function(r,n,i){var o=(0,v.Vs)(r[0],i),a=(0,v.Vs)(r[r.length-1],i),s=Math.sqrt((0,$.bI)(o,a));n=n||(0,W.Bb)(new R.Z(o),e);var l=t;if(!t&&0!==t){var u=a[0]-o[0],c=a[1]-o[1];l=Math.atan2(c,u)}(0,W.Ej)(n,o,s,l);var f=(0,v.Cs)();return f&&n.transform(i,f),n}},gv.interaction.Extent=vl,gv.interaction.Interaction=Gs.ZP,gv.interaction.KeyboardPan=il.Z,gv.interaction.KeyboardZoom=nl.Z,gv.interaction.Link=rl,gv.interaction.Modify=Qs,gv.interaction.MouseWheelZoom=Es.Z,gv.interaction.PinchRotate=ws.Z,gv.interaction.PinchZoom=bs.Z,gv.interaction.Pointer=V.Z,gv.interaction.Select=As.Z,gv.interaction.Snap=vs,gv.interaction.Translate=Xa,gv.interaction.defaults={},gv.interaction.defaults.defaults=k.c,gv.layer={},gv.layer.Base=ja.Z,gv.layer.BaseImage=Da.Z,gv.layer.BaseTile=La.Z,gv.layer.BaseVector=oo.Z,gv.layer.Graticule=Ba,gv.layer.Group=ba.Z,gv.layer.Heatmap=Aa,gv.layer.Image=Gr.Z,gv.layer.Layer=na.Z,gv.layer.Tile=zr.Z,gv.layer.Vector=K.Z,gv.layer.VectorImage=ra,gv.layer.VectorTile=Ho.Z,gv.layer.WebGLTile=Ko.Z,gv.loadingstrategy={},gv.loadingstrategy.all=M.$6,gv.loadingstrategy.bbox=M.VW,gv.loadingstrategy.tile=M.Gg,gv.proj={},gv.proj.Projection=Wo.Z,gv.proj.Units={},gv.proj.Units.METERS_PER_UNIT=T.W,gv.proj.addCoordinateTransforms=v.zY,gv.proj.addEquivalentProjections=v.rM,gv.proj.addProjection=v.Sx,gv.proj.clearUserProjection=v.sx,gv.proj.equivalent=v.OP,gv.proj.fromLonLat=v.mi,gv.proj.get=v.U2,gv.proj.getPointResolution=v._Q,gv.proj.getTransform=v.Ck,gv.proj.getUserProjection=v.Cs,gv.proj.proj4={},gv.proj.proj4.epsgLookupMapTiler=O.d,gv.proj.proj4.fromEPSGCode=O.sM,gv.proj.proj4.register=O.z2,gv.proj.proj4.setEPSGLookup=O.$m,gv.proj.setUserProjection=v.DN,gv.proj.toLonLat=v.bU,gv.proj.transform=v.vs,gv.proj.transformExtent=v.$A,gv.proj.useGeographic=v.eL,gv.render={},gv.render.Feature={},gv.render.Feature.toFeature=P.wc,gv.render.Feature.toGeometry=P.Im,gv.render.VectorContext=Vo.Z,gv.render.getRenderPixel=C.CR,gv.render.getVectorContext=C.u3,gv.render.toContext=C.Pt,gv.renderer={},gv.renderer.Composite=qo.Z,gv.renderer.canvas={},gv.renderer.canvas.ImageLayer=Ro.Z,gv.renderer.canvas.TileLayer=zo.Z,gv.renderer.canvas.VectorImageLayer=Go,gv.renderer.canvas.VectorLayer=ko.Z,gv.renderer.canvas.VectorTileLayer=Mo.Z,gv.renderer.webgl={},gv.renderer.webgl.PointsLayer=To,gv.renderer.webgl.TileLayer=io.ZP,gv.size={},gv.size.toSize=S.Pq,gv.source={},gv.source.BingMaps=no,gv.source.CartoDB=Yi,gv.source.Cluster=Gi.Z,gv.source.DataTile=Qi.Z,gv.source.GeoTIFF=Ui.Z,gv.source.IIIF=Zi,gv.source.Image=y.ZP,gv.source.ImageArcGISRest=yi,gv.source.ImageCanvas=si,gv.source.ImageMapGuide=ei,gv.source.ImageStatic=Vn,gv.source.ImageWMS=Fn.Z,gv.source.OGCMapTile=jn,gv.source.OGCVectorTile=On,gv.source.OSM=x.Z,gv.source.OSM.ATTRIBUTION=x.h,gv.source.Raster=yn,gv.source.Source=Rr.Z,gv.source.StadiaMaps=kr,gv.source.Tile=It.Z,gv.source.TileArcGISRest=xr,gv.source.TileDebug=mr,gv.source.TileImage=st.Z,gv.source.TileJSON=cr,gv.source.TileWMS=rr.Z,gv.source.UTFGrid=tr,gv.source.Vector=H.Z,gv.source.VectorTile=Et.Z,gv.source.WMTS=E.Z,gv.source.WMTS.optionsFromCapabilities=E.B,gv.source.XYZ=wt.Z,gv.source.Zoomify=bt,gv.source.arcgisRest={},gv.source.arcgisRest.createLoader=w,gv.source.mapguide={},gv.source.mapguide.createLoader=m,gv.source.sourcesFromTileGrid=function(e,t){var r=new I.Z(32),n=e.getExtent();return function(i,o){r.expireCache(),n&&(i=(0,h.Ed)(n,i));var a=e.getZForResolution(o),s=[];return e.forEachTileCoord(i,a,(function(e){var n=e.toString();if(!r.containsKey(n)){var i=t(e);r.set(n,i)}s.push(r.get(n))})),s}},gv.source.static={},gv.source.static.createLoader=p,gv.source.wms={},gv.source.wms.createLoader=c.Ke,gv.sphere={},gv.sphere.getArea=u.bg,gv.sphere.getDistance=u.Sp,gv.sphere.getLength=u.xA,gv.style={},gv.style.Circle=it.Z,gv.style.Fill=nt.Z,gv.style.Icon=rt.Z,gv.style.IconImageCache={},gv.style.IconImageCache.shared=l.c,gv.style.Image=tt.Z,gv.style.RegularShape=et.Z,gv.style.Stroke=$e.Z,gv.style.Style=J.ZP,gv.style.Text=Je.Z,gv.tilegrid={},gv.tilegrid.TileGrid=Xe.Z,gv.tilegrid.WMTS=a.Z,gv.tilegrid.WMTS.createFromCapabilitiesMatrixSet=a.b,gv.tilegrid.createXYZ=s.dl,gv.transform={},gv.transform.composeCssTransform=o.fs,gv.util={},gv.util.getUid=i.sq,gv.webgl={},gv.webgl.ARRAY_BUFFER=n.qO,gv.webgl.DYNAMIC_DRAW=n.kd,gv.webgl.ELEMENT_ARRAY_BUFFER=n.cX,gv.webgl.STATIC_DRAW=n.MB,gv.webgl.STREAM_DRAW=n.F_,gv.xml={},gv.xml.getAllTextContent=r.Ve,gv.xml.parse=r.Qc,gv.xml.registerDocument=r.WM,gv.xml.registerXMLSerializer=r.FL,window.Handlebars=__webpack_require__(177),window.proj4=__webpack_require__(73213),yv.plugin={}})()})();
//# sourceMappingURL=apiign.ol.min.js.map