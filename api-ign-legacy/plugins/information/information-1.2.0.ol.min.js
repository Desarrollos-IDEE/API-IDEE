!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create InformationControl."},"textHelp":{"help1":"Provides additional information about layer elements, in the case where the service allows the query operation.","help2":"It is done by requesting information from the map service through the getFeatureInfo operation. It is also possible to request information from vector files such as .geojson or .kml","help3":"Select the tool and click on the element you want to know more information about. The layers that have information on the point will appear in the panel.","help4":"Use the arrow to display all the available information for each layer.","help5":"If there are no searchable layers, clicking on the map displays the following information message.","help6":"The information relevant to the extension and its possible parameterization is documented in","help7":"The example of use of its parameters can be checked in"},"tooltip":"Consult layers","title":"Information","not_queryable":"There are no queryable layers","querying":"Getting information...","unsupported_format":"Unsupported format","no_info":"No associated info","info_of":"Information about"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles InformationControl."},"textHelp":{"help1":"Proporciona información adicional sobre los elementos de las capas, en el caso en el que el servicio permita la operación de consulta.","help2":"Se realiza por una petición de información al servicio de mapas a través de la operación getFeatureInfo. También es posible pedir información a ficheros vectoriales como .geojson o .kml","help3":"Seleccione la herramienta y haga clic sobre el elemento del que desee conocer más información. En el panel, aparecerán las capas que dispongan de información en el punto.","help4":"Utilice la flecha para desplegar toda la información disponible de cada capa.","help5":"Si no existen capas consultables, al hacer clic sobre el mapa aparece el siguiente mensaje informativo.","help6":"La información relevante a la extensión y su posible parametrización está documentada en","help7":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Consultar capas","title":"Información","not_queryable":"No existen capas consultables","querying":"Obteniendo información...","unsupported_format":"Formato no soportado","no_info":"No existe información asociada","info_of":"Información de"}')},function(t){t.exports=JSON.parse('{"url":{"name":"information","separator":"*"},"constructor":"M.plugin.Information","parameters":[{"type":"object","properties":[{"type":"simple","name":"position","position":0,"possibleValues":["TL","TR","BR","BL"]},{"type":"simple","name":"tooltip","position":1},{"type":"simple","name":"format","position":2},{"type":"Number","name":"featureCount","position":3},{"type":"Number","name":"buffer","position":4},{"type":"simple","name":"opened","position":5}]}],"files":{"ol":{"scripts":["information.ol.min.js"],"styles":["information.ol.min.css"]}},"metadata":{"name":"Information","description":"Shows getfeatureinfo onclick when active","text":"On click in a queryable layer shows getfeatureinfo","version":"1.1.0","date":"09/12/2019","author":"Guadaltel","org":"CNIG","tags":"mapea,plugin","icon":"./facade/assets/icons/icon.svg"}}')},function(t,e,n){t.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">INFORMATION <img style="vertical-align: bottom; filter: invert(100%);" src="'+n(9)+'" width="30" height="30"></h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <p>{{translations.help3}}</p>\n      <img src="{{urlImages}}information1.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help4}}</p>\n      <img src="{{urlImages}}information2.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help5}}</p>\n      <img src="{{urlImages}}information3.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help6}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/information" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/information</a></p>\n      <p>{{translations.help7}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/information.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/information.jsp?language=es</a></p>\n   </div>\n</div>\n\n'},function(t,e){t.exports='<div class="m-information-content">\n   {{{info}}}\n</div>\n'},function(t,e){t.exports="  {{#each layers}}\n      <div class='m-information-content-info'>\n          <div class='m-information-content-info-header'>\n              <div class=\"m-arrow-right\"></div>\n              <div>\n                  <p> {{../info_of}} <strong>{{layerName}}</strong></p>\n              </div>\n          </div>\n          <div class='m-information-content-info-body m-content-collapsed'>\n              {{{formatedInfo}}}\n          </div>\n      </div>\n  {{/each}}\n"},function(t,e){t.exports='<div class="m-control m-container m-information-container">\n  <button tabindex="{{order}}" id=\'m-information-btn\' class="m-information-btn g-cartografia-info" title="{{translations.tooltip}}"></button>\n</div>\n'},function(t,e,n){},function(t,e,n){},function(t,e){t.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMjUiIGhlaWdodD0iMTAyNCIgdmlld0JveD0iMCAwIDEwMjUgMTAyNCI+Cjx0aXRsZT48L3RpdGxlPgo8ZyBpZD0iaWNvbW9vbi1pZ25vcmUiPgo8L2c+CjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik03MjcuNDA4IDU0Mi45NThjMC0xOC42MTggMTUuMTU0LTMzLjk4OSAzMy45ODktMzMuOTg5IDguMjI3IDAgMTYuMjM3IDMuMDMxIDIyLjUxNSA4LjY2bDE3NC45MjQgMTU1LjQ0YzIxLjIxNi01NC45ODkgMzIuNjktMTE0Ljk1NiAzMi42OS0xNzcuNTIyIDAtMjczLjY0NC0yMjEuOTAzLTQ5NS41NDctNDk1Ljc2My00OTUuNTQ3cy00OTUuNzYzIDIyMS45MDMtNDk1Ljc2MyA0OTUuNzYzIDIyMS45MDMgNDk1Ljc2MyA0OTUuNzYzIDQ5NS43NjNjODMuNzgyIDAgMTYyLjU4NC0yMC43ODMgMjMxLjY0NS01Ny4zN3YtMzkxLjE5OHpNNTA0LjQyMyAxOTQuNDA4YzQwLjkxNyAwIDc0LjA0MCAzMy4xMjMgNzQuMDQwIDc0LjA0MHMtMzMuMTIzIDc0LjA0MC03NC4wNDAgNzQuMDQwLTc0LjA0MC0zMy4xMjMtNzQuMDQwLTc0LjA0MCAzMy4xMjMtNzQuMDQwIDc0LjA0MC03NC4wNDB6TTU5Ni44NjQgNzg2LjI5M2gtMTg1LjA5OWMtMzAuNzQyIDAtNTUuNDIyLTI0LjY4LTU1LjQyMi01NS40MjJzMjQuNjgtNTUuNDIyIDU1LjQyMi01NS40MjJoNTUuNDIydi0xNDguMDc5aC01NS40MjJjLTMwLjc0MiAwLTU1LjQyMi0yNC42OC01NS40MjItNTUuNDIyczI0LjY4LTU1LjQyMiA1NS40MjItNTUuNDIyaDExMS4wNjBjMzAuNzQyIDAgNTUuNDIyIDI0LjY4IDU1LjQyMiA1NS40MjJ2MjAzLjUwMWgxOC40MDJjMzAuNzQyIDAgNTUuNDIyIDI0LjY4IDU1LjQyMiA1NS40MjJzLTI0LjQ2MyA1NS40MjItNTUuMjA1IDU1LjQyMnpNNzcyLjg3MSA2MTUuOTE1djI5MS44MjljMCA5LjUyNiA3Ljc5NCAxNy4zMTkgMTcuMzE5IDE3LjMxOSA0Ljk3OSAwIDkuNzQyLTIuMTY1IDEyLjk4OS01Ljg0NWw2NC45NDctNzQuNDczIDQ1LjY3OSA5MS41NzVjNi4yNzggMTIuMzQgMjEuNDMzIDE3LjUzNiAzMy43NzMgMTEuMjU4czE3LjUzNi0yMS40MzMgMTEuMjU4LTMzLjc3M2wtNDQuNTk3LTg5LjQxMWg5Mi44NzRjOS41MjYgMCAxNy4zMTktNy43OTQgMTcuMzE5LTE3LjMxOSAwLTQuOTc5LTIuMTY1LTkuNzQyLTUuODQ1LTEyLjk4OWwtMjE1LjQwOC0xOTEuNTk0Yy0zLjQ2NC0zLjAzMS03LjU3Ny00LjU0Ni0xMi4xMjMtNC41NDYtOS45NTktMC4yMTYtMTguMTg1IDguMDEwLTE4LjE4NSAxNy45Njl2MHoiPjwvcGF0aD4KPC9zdmc+Cg=="},function(t,e,n){"use strict";n.r(e);n(7),n(8);var o=n(2),r=n(3),i=n.n(r),a=n(4),l=n.n(a),c=n(5),u=n.n(c),s=n(0),f=n(1),p={en:s,es:f},m=function(){var t="es";return"function"==typeof M.language.getLang&&(t=M.language.getLang()),t},y=function(t){return"es"===t||"en"===t?p[t]:M.language.getTranslation(t).information},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m(),n=y(e),o="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(e,"' has not been defined.")):o=t.split(".").reduce((function(t,e){return t[e]}),n),o};function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=i.call(n)).done)&&(l.push(o.value),l.length!==e);c=!0);}catch(t){u=!0,r=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return l}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function w(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(r=o.key,i=void 0,i=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==h(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===h(i)?i:String(i)),o)}var r,i}function _(){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=N(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function N(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}function T(t,e){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=S(t);if(e){var r=S(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return L(this,n)}}function L(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O={gsResponse:/^results[\w\s\S]*'http:/i,msNewFeature:/feature(\s*)(\w+)(\s*):/i,gsNewFeature:/#newfeature#/,gsGeometry:/geom$/i,msGeometry:/boundedby$/i,msUnsupportedFormat:/error(.*)unsupported(.*)info_format/i},k=d("title"),A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(i,M.impl.Control);var e,n,o,r=I(i);function i(t,e,n,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=r.call(this,{})).format_=t,"plain"===M.utils.normalize(a.format_)||"text/plain"===M.utils.normalize(a.format_)?a.format_="text/plain":"gml"===M.utils.normalize(a.format_)||"application/vnd.ogc.gml"===M.utils.normalize(a.format_)?a.format_="application/vnd.ogc.gml":a.format_="text/html",a.featureCount_=e,a.buffer_=n,a.opened_=o,a.facadeMap_=null,a.popupMove_=!1,a}return e=i,o=[{key:"insert",value:function(t,e){var n=!1;switch(e){case"text/html":var o=document.createElement("div");o.innerHTML=t;var r="";Array.prototype.forEach.call(o.querySelectorAll("body"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("div"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("table"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("b"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("span"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("input"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("a"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("img"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("p"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("ul"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("li"),(function(t){r+=t.innerHTML.trim()})),r.length>0&&!/WMS\s+server\s+error/i.test(t)&&(n=!0);break;case"application/vnd.ogc.gml":n=(new ol.format.WFS).readFeatures(t).length>0;break;case"text/plain":/returned\s+no\s+results/i.test(t)||/features\s+were\s+found/i.test(t)||/:$/i.test(t)||(n=!0)}return n}},{key:"unsupportedFormat",value:function(t,e){var n=!1;return"text/html"===e&&(n=O.msUnsupportedFormat.test(t)),n}}],(n=[{key:"addTo",value:function(t,e){_(S(i.prototype),"addTo",this).call(this,t,e),this.facadeMap_=t,t.getMapImpl().addControl(this)}},{key:"activate",value:function(){this.addOnClickEvent_()}},{key:"deactivate",value:function(){this.deleteOnClickEvent_()}},{key:"destroy",value:function(){this.deactivate(),this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"deleteOnClickEvent_",value:function(){ol.Observable.unByKey(this.clickEventKey_),document.querySelector(".m-control.m-container.m-information-container").classList.remove("activated")}},{key:"addOnClickEvent_",value:function(){var t=this,e=this.facadeMap_.getMapImpl();this.clickEventKey_=e.on("singleclick",(function(e){return t.buildUrl_(M.dialog,e)})),document.querySelector(".m-control.m-container.m-information-container").classList.add("activated")}},{key:"buildUrl_",value:function(t,e){this.evt=e;var n=this.facadeMap_.getMapImpl(),o=b(this.buildGenericInfoURL(),2),r=o[0],i=o[1],a=this.buildWMSInfoURL([].concat(v(this.facadeMap_.getWMS()),v(i))),l=this.buildWMTSInfoURL([].concat(v(this.facadeMap_.getWMTS()),v(r))),c=[].concat(v(l),v(a)).filter((function(t){return!M.utils.isNullOrEmpty(t)}));c.length>0?this.showInfoFromURL_(c,e.coordinate,n):t.info(d("not_queryable"))}},{key:"buildWMSInfoURL",value:function(t){var e=this,n=this.facadeMap_.getMapImpl().getView().getResolution(),o=this.facadeMap_.getProjection().code;return t.map((function(t){var r,i=t.getImpl().getOL3Layer();if(t.isVisible()&&t.isQueryable()&&!M.utils.isNullOrEmpty(i)){r={};var a={INFO_FORMAT:e.format_,FEATURE_COUNT:e.featureCount_},l=i.getSource(),c=e.evt.coordinate;/buffer/i.test(t.url)||(a.BUFFER=e.buffer_);var u=l.getFeatureInfoUrl(c,n,o,a);r={layer:t.legend||t.name,url:u}}return r}))}},{key:"buildWMTSInfoURL",value:function(t){var e=this;return t.map((function(t){var n;if(t.isVisible()&&t.isQueryable()&&!M.utils.isNullOrEmpty(t)){n={};var o=e.format_,r=e.evt.coordinate,i=t.getFeatureInfoUrl(r,e.facadeMap_.getZoom(),o).replace("row=-","row=");n={layer:t.legend||t.name,url:i}}return n}))}},{key:"buildGenericInfoURL",value:function(){var t=this.facadeMap_.getLayers().filter((function(t){return"GenericRaster"===t.type})),e=[],n=[];return t.forEach((function(t){t.getImpl().getOL3Layer().getSource()instanceof ol.source.WMTS?e.push(t):(t.getImpl().getOL3Layer().getSource()instanceof ol.source.TileWMS||t.getImpl().getOL3Layer().getSource()instanceof ol.source.ImageWMS)&&n.push(t)})),[e,n]}},{key:"formatInfo",value:function(t,e,n){var o=null;switch(e){case"text/html":o=t;break;case"application/vnd.ogc.gml":var r=(new ol.format.WFS).readFeatures(t);o="",r.forEach((function(t){var e=t.getKeys();o+="<div class='divinfo'>",o+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>' ".concat(M.utils.beautifyAttribute(n)," '</td></tr>'");for(var r=0,i=e.length;r<i;r+=1){var a=e[r],l=t.get(a);o+='<tr><td class="key"><b>',o+=M.utils.beautifyAttribute(a),o+='</b></td><td class="value">',o+=l,o+="</td></tr>"}o+="</tbody></table></div>"}));break;case"text/plain":o=O.gsResponse.test(t)?this.txtToHtmlGeoserver(t,n):this.txtToHtmlMapserver(t,n)}return o}},{key:"txtToHtmlGeoserver",value:function(t,e){var n=t,o=(n=(n=n.replace(/[\w\s\S]*':/i,"")).replace(/---(-*)(n+)---(-*)/g,"#newfeature#")).split("\n"),r="<div class='divinfo'>";r+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(M.utils.beautifyAttribute(e),"</td></tr>");for(var i=0,a=o.length;i<a;i+=1){var l=o[i].trim();if(-1!==l.indexOf("=")){var c=l.split("="),u=c[0].trim(),s="-";c.length>1&&(0!==(s=c[1].trim()).length&&"null"!==s||(s="-")),!1===O.gsGeometry.test(u)&&(r+='<tr><td class="key"><b>',r+=M.utils.beautifyAttribute(u),r+='</b></td><td class="value">',r+=s,r+="</td></tr>")}else O.gsNewFeature.test(l)&&(r+='<tr><td class="header" colspan="3">'.concat(M.utils.beautifyAttribute(e),"</td></tr>"))}return r+="</tbody></table></div>"}},{key:"txtToHtmlMapserver",value:function(t){for(var e=t,n=(e=e.replace(/[\w\s\S]*(layer)/i,"$1")).replace(/layer(\s*)'(\w+)'[\w\s\S]*/i,"$2"),o=(e=(e=(e=(e=e.replace(/layer(\s*)'(\w+)'([\w\s\S]*)/i,"$3")).replace(/feature(\s*)(\w*)(\s*)(:)([\w\s\S]*)/i,"$5")).replace(/'/g,"")).replace(/=/g,";")).split("\n"),r="",i="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(M.utils.beautifyAttribute(n),"</td></tr>"),a=0,l=o.length;a<l;a+=1){var c=o[a].trim(),u=o[a]?o[a].trim():"",s=c.split(";"),f=s[0].trim(),p="-";s.length>1&&0===(p=s[1].trim()).length&&(p="-"),f.length>0&&(O.msNewFeature.test(f)?u.length>0&&!O.msNewFeature.test(u)&&(r+="<tr><td class='header' colspan='3'>".concat(M.utils.beautifyAttribute(n),"</td><td></td></tr>")):(r+='<tr><td class="key"><b>',r+=M.utils.beautifyAttribute(f),r+='</b></td><td class="value">',r+=p,r+="</td></tr>"))}return r.length>0&&(r="".concat(i+r,"</tbody></table>")),r}},{key:"showInfoFromURL_",value:function(t,e,n){var o=this,r=M.template.compileSync(l.a,{vars:{info:d("querying")},parseToHtml:!1}),a=[],c=String(this.format_),s=0,f={icon:"g-cartografia-info",title:k,content:r},p=this.facadeMap_.getPopup();M.config.MOVE_MAP_EXTRACT&&(M.config("MOVE_MAP_EXTRACT",!1),this.popupMove_=!0),M.utils.isNullOrEmpty(p)?((p=new M.Popup).addTab(f),this.facadeMap_.addPopup(p,e)):p.getTabs().some((function(t){return t.title!==k}))?p.addTab(f):(this.facadeMap_.removePopup(),(p=new M.Popup).addTab(f),this.facadeMap_.addPopup(p,e)),t.forEach((function(e){var n=e.url.replace("row=-","row=").replace("col=-","col="),r=e.layer;M.remote.get(n).then((function(e){if(p=o.facadeMap_.getPopup(),200===e.code){var n=o.parseCSSInfo(e.text);if(!0===i.insert(n,c)){var l=o.formatInfo(n,c,r);a.push({formatedInfo:l,layerName:r})}else i.unsupportedFormat(n,c)&&a.push({formatedInfo:d("unsupported_format"),layerName:r})}if(s+=1,t.length===s&&!M.utils.isNullOrEmpty(p))if(p.removeTab(f),0===a.length)p.addTab({icon:"g-cartografia-info",title:k,content:d("no_info")});else{var m=M.template.compileSync(u.a,{vars:{layers:a,info_of:d("info_of")},parseToHtml:!1});p.addTab({icon:"g-cartografia-info",title:k,content:m,listeners:[{selector:".m-information-content-info div.m-arrow-right",all:!0,type:"click",callback:function(t){return o.toogleSection(t)}},{selector:".m-information-content-info div:nth-child(2) p",all:!0,type:"click",callback:function(t){return o.toogleSection(t)}}]}),"all"===o.opened_?setTimeout((function(){document.querySelectorAll(".m-information-content-info-body").forEach((function(t){t.classList.remove("m-content-collapsed")}))}),100):"one"===o.opened_&&1===t.length&&setTimeout((function(){document.querySelector(".m-information-content-info-body").classList.remove("m-content-collapsed")}),100),o.movePopup_(o.facadeMap_)}})).catch((function(t){}))})),this.popup_=p}},{key:"toogleSection",value:function(t){var e=t.target,n=e.parentElement.parentElement;n.classList.contains("m-information-content-info")||(e=(n=n.classList.contains("m-information-content-info-header")?n.parentElement:n.parentElement.parentElement).querySelector(".m-information-content-info-header div:nth-child(1)"));var o=n.querySelector(".m-information-content-info-body");if(o.classList.contains("m-content-collapsed")){o.classList.remove("m-content-collapsed"),e.classList.remove("m-arrow-right"),e.classList.add("m-arrow-down");var r=this.popup_.getCoordinate();this.popup_.getImpl().panIntoView(r)}else o.classList.add("m-content-collapsed"),e.classList.add("m-arrow-right"),e.classList.remove("m-arrow-down")}},{key:"movePopup_",value:function(t){var e=this;if(this.popupMove_&&window.innerWidth>768){var n=M.utils.returnPositionHtmlElement("m-popup",t);setTimeout((function(){t.getMapImpl().getView().animate({zoom:t.getZoom(),center:n,duration:1e3}),e.popupMove_&&M.config("MOVE_MAP_EXTRACT",!0),e.popupMove_=!1}),100)}}},{key:"getElement",value:function(){return this.element}},{key:"parseCSSInfo",value:function(t){var e=t;try{if(t.indexOf('<style type="text/css">')>-1){var n=t.split('<style type="text/css">')[0],o=t.split('<style type="text/css">')[1].split("</style>")[0].trim(),r=t.split('<style type="text/css">')[1].split("</style>")[1],i="";o.split("{").forEach((function(t){if(t.indexOf("}")>-1){var e=t.split("}")[0],n=t.split("}")[1].trim();0===n.length?i+="".concat(e," }"):(n=n.split(",").join(", .m-information-content-info .m-information-content-info-body"),i+="".concat(e," } .m-information-content-info .m-information-content-info-body ").concat(n," {"))}else{var o=t.split(",").join(", .m-information-content-info .m-information-content-info-body");i+=".m-information-content-info .m-information-content-info-body ".concat(o," {")}})),e="".concat(n,' <style type="text/css"> ').concat(i," </style> ").concat(r)}if(e.indexOf('<link rel="stylesheet"')>-1){var a=e.split('<link rel="stylesheet"')[0],l=e.split('<link rel="stylesheet"')[1].split('.css">')[1];e=a+l}}catch(n){e=t}return e}}])&&w(e.prototype,n),o&&w(e,o),Object.defineProperty(e,"prototype",{writable:!1}),i}(),E=n(6),x=n.n(E);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(r=o.key,i=void 0,i=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==D(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===D(i)?i:String(i)),o)}var r,i}function C(t,e){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=R(t);if(e){var r=R(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return U(this,n)}}function U(t,e){if(e&&("object"===D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(i,M.Control);var e,n,o,r=P(i);function i(t,e,n,o,a,l){var c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(A)&&M.exception("");var u=new A(t,e,n,a);return(c=r.call(this,u,"Information")).tooltip=o,c.order=l,c}return e=i,(n=[{key:"createView",value:function(t){var e=this;return new Promise((function(t,n){t(M.template.compileSync(x.a,{vars:{translations:{tooltip:e.tooltip||d("tooltip")},order:e.order}}))}))}},{key:"activate",value:function(){this.invokeEscKey(),this.getImpl().activate(),document.body.style.cursor="url('https://i.ibb.co/HBtH3Qs/click-info.png') 1 7, auto",document.addEventListener("keyup",this.checkEscKey.bind(this))}},{key:"deactivate",value:function(){this.getImpl().deactivate(),document.body.style.cursor="default",document.removeEventListener("keyup",this.checkEscKey.bind(this))}},{key:"checkEscKey",value:function(t){var e=document.querySelector(".m-control.m-container.m-information-container").classList.contains("activated");"Escape"===t.key&&e&&(document.removeEventListener("keyup",this.checkEscKey.bind(this)),document.querySelector("#m-information-btn").click())}},{key:"invokeEscKey",value:function(){try{document.dispatchEvent(new window.KeyboardEvent("keyup",{key:"Escape",keyCode:27,code:"",which:69,shiftKey:!1,ctrlKey:!1,metaKey:!1}))}catch(t){console.error(t)}}},{key:"getActivationButton",value:function(t){return t.querySelector("#m-information-btn")}},{key:"equals",value:function(t){return t instanceof i}}])&&z(e.prototype,n),o&&z(e,o),Object.defineProperty(e,"prototype",{writable:!1}),i}();function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(r=o.key,i=void 0,i=function(t,e){if("object"!==H(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==H(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===H(i)?i:String(i)),o)}var r,i}function F(t,e){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Y(t);if(e){var r=Y(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return G(this,n)}}function G(t,e){if(e&&("object"===H(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Y(t){return(Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(l,M.Plugin);var e,n,r,a=W(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=a.call(this)).map_=null,e.controls_=[],e.position_=t.position||"TR",e.tooltip_=t.tooltip||d("tooltip"),e.format_=t.format||"text/html",e.featureCount_=t.featureCount||99,e.buffer_=t.buffer||10,e.opened_=t.opened||"closed",e.name_="information",e.metadata_=o.metadata,e.order=t.order>=-1?t.order:null,e.options=t,e}return e=l,r=[{key:"getJSONTranslations",value:function(t){return"en"===t||"es"===t?"en"===t?s:f:M.language.getTranslation(t).information}}],(n=[{key:"addTo",value:function(t){var e=this.featureCount_;this.ctrl=new Q(this.format_,e,this.buffer_,this.tooltip_,this.opened_,this.order),this.controls_.push(this.ctrl),this.map_=t,this.panel_=new M.ui.Panel("Information",{className:"m-plugin-information",position:M.ui.position[this.position_],tooltip:this.tooltip_,collapsedButtonClass:"g-cartografia-info",order:this.order}),this.panel_.addControls(this.controls_),t.addPanels(this.panel_)}},{key:"name",get:function(){return"information"}},{key:"position",get:function(){return this.position_}},{key:"getAPIRest",value:function(){var t="".concat(this.name_,"=").concat(this.position_,"*").concat(this.tooltip_,"*").concat(this.format_,"*").concat(this.featureCount_);return void 0===this.buffer_||null===this.buffer_||""===this.buffer_?t+="*":t+="*".concat(this.buffer_),void 0===this.opened_||null===this.opened_||""===this.opened_?t+="*":t+="*".concat(this.opened_),t}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(t){t(M.template.compileSync(i.a,{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/information/images/"),translations:{help1:d("textHelp.help1"),help2:d("textHelp.help2"),help3:d("textHelp.help3"),help4:d("textHelp.help4"),help5:d("textHelp.help5"),help6:d("textHelp.help6"),help7:d("textHelp.help7")}}}))}))}}},{key:"equals",value:function(t){return t instanceof l}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"destroy",value:function(){this.ctrl.deactivate(),this.map_.removeControls(this.controls_);var t=[null,null,null];this.map_=t[0],this.controls_=t[1],this.panel_=t[2]}}])&&q(e.prototype,n),r&&q(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.Information=B,window.M.control.InformationControl=Q,window.M.impl.control.InformationControl=A}]);
//# sourceMappingURL=information-1.2.0.ol.min.js.map