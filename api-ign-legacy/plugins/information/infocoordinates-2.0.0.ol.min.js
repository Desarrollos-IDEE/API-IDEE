(()=>{var t={364:t=>{t.exports='<div class="m-control m-container m-information-container">\n  <button tabindex="{{order}}" id=\'m-information-btn\' class="m-information-btn g-cartografia-info" title="{{translations.tooltip}}"></button>\n</div>\n'},222:t=>{t.exports="  {{#each layers}}\n      <div class='m-information-content-info'>\n          <div class='m-information-content-info-header'>\n              <div class=\"m-arrow-right\"></div>\n              <div>\n                  <p> {{../info_of}} <strong>{{layerName}}</strong></p>\n              </div>\n          </div>\n          <div class='m-information-content-info-body m-content-collapsed'>\n              {{{formatedInfo}}}\n          </div>\n      </div>\n  {{/each}}\n"},262:t=>{t.exports='<div class="m-information-content">\n   {{{info}}}\n</div>\n'},431:(t,e,n)=>{t.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">INFORMATION <img style="vertical-align: bottom; filter: invert(100%);" src="'+n(914)+'" width="30" height="30"></h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <p>{{translations.help3}}</p>\n      <img src="{{urlImages}}information1.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help4}}</p>\n      <img src="{{urlImages}}information2.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help5}}</p>\n      <img src="{{urlImages}}information3.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help6}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/information" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/information</a></p>\n      <p>{{translations.help7}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/information.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/information.jsp?language=es</a></p>\n   </div>\n</div>\n'},914:t=>{"use strict";t.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMjUiIGhlaWdodD0iMTAyNCIgdmlld0JveD0iMCAwIDEwMjUgMTAyNCI+Cjx0aXRsZT48L3RpdGxlPgo8ZyBpZD0iaWNvbW9vbi1pZ25vcmUiPgo8L2c+CjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik03MjcuNDA4IDU0Mi45NThjMC0xOC42MTggMTUuMTU0LTMzLjk4OSAzMy45ODktMzMuOTg5IDguMjI3IDAgMTYuMjM3IDMuMDMxIDIyLjUxNSA4LjY2bDE3NC45MjQgMTU1LjQ0YzIxLjIxNi01NC45ODkgMzIuNjktMTE0Ljk1NiAzMi42OS0xNzcuNTIyIDAtMjczLjY0NC0yMjEuOTAzLTQ5NS41NDctNDk1Ljc2My00OTUuNTQ3cy00OTUuNzYzIDIyMS45MDMtNDk1Ljc2MyA0OTUuNzYzIDIyMS45MDMgNDk1Ljc2MyA0OTUuNzYzIDQ5NS43NjNjODMuNzgyIDAgMTYyLjU4NC0yMC43ODMgMjMxLjY0NS01Ny4zN3YtMzkxLjE5OHpNNTA0LjQyMyAxOTQuNDA4YzQwLjkxNyAwIDc0LjA0MCAzMy4xMjMgNzQuMDQwIDc0LjA0MHMtMzMuMTIzIDc0LjA0MC03NC4wNDAgNzQuMDQwLTc0LjA0MC0zMy4xMjMtNzQuMDQwLTc0LjA0MCAzMy4xMjMtNzQuMDQwIDc0LjA0MC03NC4wNDB6TTU5Ni44NjQgNzg2LjI5M2gtMTg1LjA5OWMtMzAuNzQyIDAtNTUuNDIyLTI0LjY4LTU1LjQyMi01NS40MjJzMjQuNjgtNTUuNDIyIDU1LjQyMi01NS40MjJoNTUuNDIydi0xNDguMDc5aC01NS40MjJjLTMwLjc0MiAwLTU1LjQyMi0yNC42OC01NS40MjItNTUuNDIyczI0LjY4LTU1LjQyMiA1NS40MjItNTUuNDIyaDExMS4wNjBjMzAuNzQyIDAgNTUuNDIyIDI0LjY4IDU1LjQyMiA1NS40MjJ2MjAzLjUwMWgxOC40MDJjMzAuNzQyIDAgNTUuNDIyIDI0LjY4IDU1LjQyMiA1NS40MjJzLTI0LjQ2MyA1NS40MjItNTUuMjA1IDU1LjQyMnpNNzcyLjg3MSA2MTUuOTE1djI5MS44MjljMCA5LjUyNiA3Ljc5NCAxNy4zMTkgMTcuMzE5IDE3LjMxOSA0Ljk3OSAwIDkuNzQyLTIuMTY1IDEyLjk4OS01Ljg0NWw2NC45NDctNzQuNDczIDQ1LjY3OSA5MS41NzVjNi4yNzggMTIuMzQgMjEuNDMzIDE3LjUzNiAzMy43NzMgMTEuMjU4czE3LjUzNi0yMS40MzMgMTEuMjU4LTMzLjc3M2wtNDQuNTk3LTg5LjQxMWg5Mi44NzRjOS41MjYgMCAxNy4zMTktNy43OTQgMTcuMzE5LTE3LjMxOSAwLTQuOTc5LTIuMTY1LTkuNzQyLTUuODQ1LTEyLjk4OWwtMjE1LjQwOC0xOTEuNTk0Yy0zLjQ2NC0zLjAzMS03LjU3Ny00LjU0Ni0xMi4xMjMtNC41NDYtOS45NTktMC4yMTYtMTguMTg1IDguMDEwLTE4LjE4NSAxNy45Njl2MHoiPjwvcGF0aD4KPC9zdmc+Cg=="}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=JSON.parse('{"Pu":{"name":"Information","description":"Shows getfeatureinfo onclick when active","text":"On click in a queryable layer shows getfeatureinfo","version":"2.0.0","date":"09/12/2019","author":"Guadaltel","org":"CNIG","tags":"mapea,plugin","icon":"./facade/assets/icons/icon.svg"}}');var e=n(431),o=n.n(e),r=n(262),i=n.n(r),a=n(222),l=n.n(a);const c=JSON.parse('{"exception":{"impl":"The implementation used cannot create InformationControl."},"textHelp":{"help1":"Provides additional information about layer elements, in the case where the service allows the query operation.","help2":"It is done by requesting information from the map service through the getFeatureInfo operation. It is also possible to request information from vector files such as .geojson or .kml","help3":"Select the tool and click on the element you want to know more information about. The layers that have information on the point will appear in the panel.","help4":"Use the arrow to display all the available information for each layer.","help5":"If there are no searchable layers, clicking on the map displays the following information message.","help6":"The information relevant to the extension and its possible parameterization is documented in","help7":"The example of use of its parameters can be checked in"},"tooltip":"Consult layers","title":"Information","not_queryable":"There are no queryable layers","querying":"Getting information...","unsupported_format":"Unsupported format","no_info":"No associated info","info_of":"Information about"}'),s=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles InformationControl."},"textHelp":{"help1":"Proporciona información adicional sobre los elementos de las capas, en el caso en el que el servicio permita la operación de consulta.","help2":"Se realiza por una petición de información al servicio de mapas a través de la operación getFeatureInfo. También es posible pedir información a ficheros vectoriales como .geojson o .kml","help3":"Seleccione la herramienta y haga clic sobre el elemento del que desee conocer más información. En el panel, aparecerán las capas que dispongan de información en el punto.","help4":"Utilice la flecha para desplegar toda la información disponible de cada capa.","help5":"Si no existen capas consultables, al hacer clic sobre el mapa aparece el siguiente mensaje informativo.","help6":"La información relevante a la extensión y su posible parametrización está documentada en","help7":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Consultar capas","title":"Información","not_queryable":"No existen capas consultables","querying":"Obteniendo información...","unsupported_format":"Formato no soportado","no_info":"No existe información asociada","info_of":"Información de"}');var u={en:c,es:s},p=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e="es","function"==typeof M.language.getLang&&(e=M.language.getLang()),e),o=function(t){return"es"===t||"en"===t?u[t]:M.language.getTranslation(t).information}(n),r="";return M.utils.isNullOrEmpty(o)?console.warn("The translation '".concat(n,"' has not been defined.")):r=t.split(".").reduce((function(t,e){return t[e]}),o),r};function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function m(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,i,a,l=[],c=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=i.call(n)).done)&&(l.push(o.value),l.length!==e);c=!0);}catch(t){s=!0,r=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw r}}return l}}(t,e)||d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){if(t){if("string"==typeof t)return h(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function v(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,b(o.key),o)}}function b(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=f(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f(e)?e:e+""}function g(t,e,n){return e=_(e),function(t,e){if(e&&("object"==f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,w()?Reflect.construct(e,n||[],_(t).constructor):e.apply(t,n))}function w(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(w=function(){return!!t})()}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},j.apply(null,arguments)}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}var T={gsResponse:/^results[\w\s\S]*'http:/i,msNewFeature:/feature(\s*)(\w+)(\s*):/i,gsNewFeature:/#newfeature#/,gsGeometry:/geom$/i,msGeometry:/boundedby$/i,msUnsupportedFormat:/error(.*)unsupported(.*)info_format/i},I=p("title"),L=function(){function t(e,n,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(i=g(this,t,[{}])).format_=e,"plain"===M.utils.normalize(i.format_)||"text/plain"===M.utils.normalize(i.format_)?i.format_="text/plain":"gml"===M.utils.normalize(i.format_)||"application/vnd.ogc.gml"===M.utils.normalize(i.format_)?i.format_="application/vnd.ogc.gml":i.format_="text/html",i.featureCount_=n,i.buffer_=o,i.opened_=r,i.facadeMap_=null,i.popupMove_=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}(t,M.impl.Control),e=t,n=[{key:"addTo",value:function(e,n){j(_(t.prototype),"addTo",this).call(this,e,n),this.facadeMap_=e,e.getMapImpl().addControl(this)}},{key:"activate",value:function(){this.addOnClickEvent_()}},{key:"deactivate",value:function(){this.deleteOnClickEvent_()}},{key:"destroy",value:function(){this.deactivate(),this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"deleteOnClickEvent_",value:function(){ol.Observable.unByKey(this.clickEventKey_),document.querySelector(".m-control.m-container.m-information-container").classList.remove("activated")}},{key:"addOnClickEvent_",value:function(){var t=this,e=this.facadeMap_.getMapImpl();this.clickEventKey_=e.on("singleclick",(function(e){return t.buildUrl_(M.dialog,e)})),document.querySelector(".m-control.m-container.m-information-container").classList.add("activated")}},{key:"buildUrl_",value:function(t,e){this.evt=e;var n=this.facadeMap_.getMapImpl(),o=y(this.buildGenericInfoURL(),2),r=o[0],i=o[1],a=this.buildWMSInfoURL([].concat(m(this.facadeMap_.getWMS()),m(i))),l=this.buildWMTSInfoURL([].concat(m(this.facadeMap_.getWMTS()),m(r))),c=[].concat(m(l),m(a)).filter((function(t){return!M.utils.isNullOrEmpty(t)}));c.length>0?this.showInfoFromURL_(c,e.coordinate,n):t.info(p("not_queryable"))}},{key:"buildWMSInfoURL",value:function(t){var e=this,n=this.facadeMap_.getMapImpl().getView().getResolution(),o=this.facadeMap_.getProjection().code;return t.map((function(t){var r,i=t.getImpl().getOL3Layer();if(t.isVisible()&&t.isQueryable()&&!M.utils.isNullOrEmpty(i)){r={};var a={INFO_FORMAT:e.format_,FEATURE_COUNT:e.featureCount_},l=i.getSource(),c=e.evt.coordinate;/buffer/i.test(t.url)||(a.BUFFER=e.buffer_);var s=l.getFeatureInfoUrl(c,n,o,a);r={layer:t.legend||t.name,url:s}}return r}))}},{key:"buildWMTSInfoURL",value:function(t){var e=this;return t.map((function(t){var n;if(t.isVisible()&&t.isQueryable()&&!M.utils.isNullOrEmpty(t)){n={};var o=e.format_,r=e.evt.coordinate,i=t.getFeatureInfoUrl(r,e.facadeMap_.getZoom(),o).replace("row=-","row=");n={layer:t.legend||t.name,url:i}}return n}))}},{key:"buildGenericInfoURL",value:function(){var t=this.facadeMap_.getLayers().filter((function(t){return"GenericRaster"===t.type})),e=[],n=[];return t.forEach((function(t){t.getImpl().getOL3Layer().getSource()instanceof ol.source.WMTS?e.push(t):(t.getImpl().getOL3Layer().getSource()instanceof ol.source.TileWMS||t.getImpl().getOL3Layer().getSource()instanceof ol.source.ImageWMS)&&n.push(t)})),[e,n]}},{key:"formatInfo",value:function(t,e,n){var o=null;switch(e){case"text/html":o=t;break;case"application/vnd.ogc.gml":var r=(new ol.format.WFS).readFeatures(t);o="",r.forEach((function(t){var e=t.getKeys();o+="<div class='divinfo'>",o+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>' ".concat(M.utils.beautifyAttribute(n)," '</td></tr>'");for(var r=0,i=e.length;r<i;r+=1){var a=e[r],l=t.get(a);o+='<tr><td class="key"><b>',o+=M.utils.beautifyAttribute(a),o+='</b></td><td class="value">',o+=l,o+="</td></tr>"}o+="</tbody></table></div>"}));break;case"text/plain":o=T.gsResponse.test(t)?this.txtToHtmlGeoserver(t,n):this.txtToHtmlMapserver(t,n)}return o}},{key:"txtToHtmlGeoserver",value:function(t,e){var n=t,o=(n=(n=n.replace(/[\w\s\S]*':/i,"")).replace(/---(-*)(n+)---(-*)/g,"#newfeature#")).split("\n"),r="<div class='divinfo'>";r+="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(M.utils.beautifyAttribute(e),"</td></tr>");for(var i=0,a=o.length;i<a;i+=1){var l=o[i].trim();if(-1!==l.indexOf("=")){var c=l.split("="),s=c[0].trim(),u="-";c.length>1&&(0!==(u=c[1].trim()).length&&"null"!==u||(u="-")),!1===T.gsGeometry.test(s)&&(r+='<tr><td class="key"><b>',r+=M.utils.beautifyAttribute(s),r+='</b></td><td class="value">',r+=u,r+="</td></tr>")}else T.gsNewFeature.test(l)&&(r+='<tr><td class="header" colspan="3">'.concat(M.utils.beautifyAttribute(e),"</td></tr>"))}return r+="</tbody></table></div>"}},{key:"txtToHtmlMapserver",value:function(t){for(var e=t,n=(e=e.replace(/[\w\s\S]*(layer)/i,"$1")).replace(/layer(\s*)'(\w+)'[\w\s\S]*/i,"$2"),o=(e=(e=(e=(e=e.replace(/layer(\s*)'(\w+)'([\w\s\S]*)/i,"$3")).replace(/feature(\s*)(\w*)(\s*)(:)([\w\s\S]*)/i,"$5")).replace(/'/g,"")).replace(/=/g,";")).split("\n"),r="",i="<table class='mapea-table'><tbody><tr><td class='header' colspan='3'>".concat(M.utils.beautifyAttribute(n),"</td></tr>"),a=0,l=o.length;a<l;a+=1){var c=o[a].trim(),s=o[a]?o[a].trim():"",u=c.split(";"),p=u[0].trim(),f="-";u.length>1&&0===(f=u[1].trim()).length&&(f="-"),p.length>0&&(T.msNewFeature.test(p)?s.length>0&&!T.msNewFeature.test(s)&&(r+="<tr><td class='header' colspan='3'>".concat(M.utils.beautifyAttribute(n),"</td><td></td></tr>")):(r+='<tr><td class="key"><b>',r+=M.utils.beautifyAttribute(p),r+='</b></td><td class="value">',r+=f,r+="</td></tr>"))}return r.length>0&&(r="".concat(i+r,"</tbody></table>")),r}},{key:"showInfoFromURL_",value:function(e,n,o){var r=this,a=M.template.compileSync(i(),{vars:{info:p("querying")},parseToHtml:!1}),c=[],s=String(this.format_),u=0,f={icon:"g-cartografia-info",title:I,content:a},m=this.facadeMap_.getPopup();M.config.MOVE_MAP_EXTRACT&&(M.config("MOVE_MAP_EXTRACT",!1),this.popupMove_=!0),M.utils.isNullOrEmpty(m)?((m=new M.Popup).addTab(f),this.facadeMap_.addPopup(m,n)):m.getTabs().some((function(t){return t.title!==I}))?m.addTab(f):(this.facadeMap_.removePopup(),(m=new M.Popup).addTab(f),this.facadeMap_.addPopup(m,n)),e.forEach((function(n){var o=n.url.replace("row=-","row=").replace("col=-","col="),i=n.layer;M.remote.get(o).then((function(n){if(m=r.facadeMap_.getPopup(),200===n.code){var o=r.parseCSSInfo(n.text);if(!0===t.insert(o,s)){var a=r.formatInfo(o,s,i);c.push({formatedInfo:a,layerName:i})}else t.unsupportedFormat(o,s)&&c.push({formatedInfo:p("unsupported_format"),layerName:i})}if(u+=1,e.length===u&&!M.utils.isNullOrEmpty(m))if(m.removeTab(f),0===c.length)m.addTab({icon:"g-cartografia-info",title:I,content:p("no_info")});else{var y=M.template.compileSync(l(),{vars:{layers:c,info_of:p("info_of")},parseToHtml:!1});m.addTab({icon:"g-cartografia-info",title:I,content:y,listeners:[{selector:".m-information-content-info div.m-arrow-right",all:!0,type:"click",callback:function(t){return r.toogleSection(t)}},{selector:".m-information-content-info div:nth-child(2) p",all:!0,type:"click",callback:function(t){return r.toogleSection(t)}}]}),"all"===r.opened_?setTimeout((function(){document.querySelectorAll(".m-information-content-info-body").forEach((function(t){t.classList.remove("m-content-collapsed")}))}),100):"one"===r.opened_&&1===e.length&&setTimeout((function(){document.querySelector(".m-information-content-info-body").classList.remove("m-content-collapsed")}),100),r.movePopup_(r.facadeMap_)}})).catch((function(t){}))})),this.popup_=m}},{key:"toogleSection",value:function(t){var e=t.target,n=e.parentElement.parentElement;n.classList.contains("m-information-content-info")||(e=(n=n.classList.contains("m-information-content-info-header")?n.parentElement:n.parentElement.parentElement).querySelector(".m-information-content-info-header div:nth-child(1)"));var o=n.querySelector(".m-information-content-info-body");if(o.classList.contains("m-content-collapsed")){o.classList.remove("m-content-collapsed"),e.classList.remove("m-arrow-right"),e.classList.add("m-arrow-down");var r=this.popup_.getCoordinate();this.popup_.getImpl().panIntoView(r)}else o.classList.add("m-content-collapsed"),e.classList.add("m-arrow-right"),e.classList.remove("m-arrow-down")}},{key:"movePopup_",value:function(t){var e=this;if(this.popupMove_&&window.innerWidth>768){var n=M.utils.returnPositionHtmlElement("m-popup",t);setTimeout((function(){t.getMapImpl().getView().animate({zoom:t.getZoom(),center:n,duration:1e3}),e.popupMove_&&M.config("MOVE_MAP_EXTRACT",!0),e.popupMove_=!1}),100)}}},{key:"getElement",value:function(){return this.element}},{key:"parseCSSInfo",value:function(t){var e=t;try{if(t.indexOf('<style type="text/css">')>-1){var n=t.split('<style type="text/css">')[0],o=t.split('<style type="text/css">')[1].split("</style>")[0].trim(),r=t.split('<style type="text/css">')[1].split("</style>")[1],i="";o.split("{").forEach((function(t){if(t.indexOf("}")>-1){var e=t.split("}")[0],n=t.split("}")[1].trim();0===n.length?i+="".concat(e," }"):(n=n.split(",").join(", .m-information-content-info .m-information-content-info-body"),i+="".concat(e," } .m-information-content-info .m-information-content-info-body ").concat(n," {"))}else{var o=t.split(",").join(", .m-information-content-info .m-information-content-info-body");i+=".m-information-content-info .m-information-content-info-body ".concat(o," {")}})),e="".concat(n,' <style type="text/css"> ').concat(i," </style> ").concat(r)}if(e.indexOf('<link rel="stylesheet"')>-1){var a=e.split('<link rel="stylesheet"')[0],l=e.split('<link rel="stylesheet"')[1].split('.css">')[1];e=a+l}}catch(n){e=t}return e}}],o=[{key:"insert",value:function(t,e){var n=!1;switch(e){case"text/html":var o=document.createElement("div");o.innerHTML=t;var r="";Array.prototype.forEach.call(o.querySelectorAll("body"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("div"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("table"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("b"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("span"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("input"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("a"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("img"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("p"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("ul"),(function(t){r+=t.innerHTML.trim()})),Array.prototype.forEach.call(o.querySelectorAll("li"),(function(t){r+=t.innerHTML.trim()})),r.length>0&&!/WMS\s+server\s+error/i.test(t)&&(n=!0);break;case"application/vnd.ogc.gml":n=(new ol.format.WFS).readFeatures(t).length>0;break;case"text/plain":/returned\s+no\s+results/i.test(t)||/features\s+were\s+found/i.test(t)||/:$/i.test(t)||(n=!0)}return n}},{key:"unsupportedFormat",value:function(t,e){var n=!1;return"text/html"===e&&(n=T.msUnsupportedFormat.test(t)),n}}],n&&v(e.prototype,n),o&&v(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,o}(),S=n(364),O=n.n(S);function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function A(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,E(o.key),o)}}function E(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=k(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k(e)?e:e+""}function x(t,e,n){return e=z(e),function(t,e){if(e&&("object"==k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,D()?Reflect.construct(e,n||[],z(t).constructor):e.apply(t,n))}function D(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(D=function(){return!!t})()}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}var P=function(){function t(e,n,o,r,i,a){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),M.utils.isUndefined(L)&&M.exception(""),(l=x(this,t,[new L(e,n,o,i),"Information"])).tooltip=r,l.order=a,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(t,M.Control),e=t,(n=[{key:"createView",value:function(t){var e=this;return new Promise((function(t,n){t(M.template.compileSync(O(),{vars:{translations:{tooltip:e.tooltip||p("tooltip")},order:e.order}}))}))}},{key:"activate",value:function(){this.invokeEscKey(),this.getImpl().activate(),document.body.style.cursor="url('https://i.ibb.co/HBtH3Qs/click-info.png') 1 7, auto",document.addEventListener("keyup",this.checkEscKey.bind(this))}},{key:"deactivate",value:function(){this.getImpl().deactivate(),document.body.style.cursor="default",document.removeEventListener("keyup",this.checkEscKey.bind(this))}},{key:"checkEscKey",value:function(t){var e=document.querySelector(".m-control.m-container.m-information-container").classList.contains("activated");"Escape"===t.key&&e&&(document.removeEventListener("keyup",this.checkEscKey.bind(this)),document.querySelector("#m-information-btn").click())}},{key:"invokeEscKey",value:function(){try{document.dispatchEvent(new window.KeyboardEvent("keyup",{key:"Escape",keyCode:27,code:"",which:69,shiftKey:!1,ctrlKey:!1,metaKey:!1}))}catch(t){console.error(t)}}},{key:"getActivationButton",value:function(t){return t.querySelector("#m-information-btn")}},{key:"equals",value:function(e){return e instanceof t}}])&&A(e.prototype,n),o&&A(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,o}();function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function Q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,R(o.key),o)}}function R(t){var e=function(t,e){if("object"!=U(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=U(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==U(e)?e:e+""}function H(t,e,n){return e=F(e),function(t,e){if(e&&("object"==U(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,q()?Reflect.construct(e,n||[],F(t).constructor):e.apply(t,n))}function q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(q=function(){return!!t})()}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}function W(t,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W(t,e)}var G=function(){function e(n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=H(this,e)).map_=null,o.controls_=[],o.position_=n.position||"TR",o.tooltip_=n.tooltip||p("tooltip"),o.format_=n.format||"text/html",o.featureCount_=n.featureCount||99,o.buffer_=n.buffer||10,o.opened_=n.opened||"closed",o.name_="information",o.metadata_=t.Pu,o.order=n.order>=-1?n.order:null,o.options=n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}(e,M.Plugin),n=e,i=[{key:"getJSONTranslations",value:function(t){return"en"===t||"es"===t?"en"===t?c:s:M.language.getTranslation(t).information}}],(r=[{key:"addTo",value:function(t){var e=this.featureCount_;this.ctrl=new P(this.format_,e,this.buffer_,this.tooltip_,this.opened_,this.order),this.controls_.push(this.ctrl),this.map_=t,this.panel_=new M.ui.Panel("Information",{className:"m-plugin-information",position:M.ui.position[this.position_],tooltip:this.tooltip_,collapsedButtonClass:"g-cartografia-info",order:this.order}),this.panel_.addControls(this.controls_),t.addPanels(this.panel_)}},{key:"name",get:function(){return"information"}},{key:"position",get:function(){return this.position_}},{key:"getAPIRest",value:function(){var t="".concat(this.name_,"=").concat(this.position_,"*").concat(this.tooltip_,"*").concat(this.format_,"*").concat(this.featureCount_);return void 0===this.buffer_||null===this.buffer_||""===this.buffer_?t+="*":t+="*".concat(this.buffer_),void 0===this.opened_||null===this.opened_||""===this.opened_?t+="*":t+="*".concat(this.opened_),t}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(t){t(M.template.compileSync(o(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/information/images/"),translations:{help1:p("textHelp.help1"),help2:p("textHelp.help2"),help3:p("textHelp.help3"),help4:p("textHelp.help4"),help5:p("textHelp.help5"),help6:p("textHelp.help6"),help7:p("textHelp.help7")}}}))}))}}},{key:"equals",value:function(t){return t instanceof e}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"destroy",value:function(){this.ctrl.deactivate(),this.map_.removeControls(this.controls_);var t=[null,null,null];this.map_=t[0],this.controls_=t[1],this.panel_=t[2]}}])&&Q(n.prototype,r),i&&Q(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.Information=G,window.M.control.InformationControl=P,window.M.impl.control.InformationControl=L})()})();
//# sourceMappingURL=information.ol.min.js.map