(()=>{var e={361:e=>{e.exports='<div aria-label="Plugin Comparators" role="menuitem" id="div-contenedor-comparators" class="m-control m-container m-comparators">\n    <header role="heading" tabindex="0" id="m-comparators-title" class="m-comparators-header">\n        {{translations.headertitle}}\n    </header>\n    <section id="m-comparators-previews" class="m-comparators-previews">\n        {{#if mirrorpanelParams}}\n            <button tabindex="0" aria-label="{{translations.mirrorpanelParams_tooltip}}" id=\'mirrorpanel-btn\' class="button-comparators mirror-panel-button" title="{{translations.mirrorpanelParams_tooltip}}"></button>\n        {{/if}}\n\n        {{#if windowsyncParams}}\n        <button id="windowsync-btn"  aria-label="{{translations.windowsyncParams_tooltip}}" title="{{translations.windowsyncParams_tooltip}}" class="button-comparators windowsync-button"></button>\n        {{/if}}\n\n        {{#if lyrcompareParams}}\n            <button tabindex="0" aria-label="{{translations.lyrcompareParams_tooltip}}" id=\'lyrcompare-btn\' class="button-comparators lyrcompare-button" title="{{translations.lyrcompareParams_tooltip}}"></button>\n        {{/if}}\n\n        {{#if transparencyParams}}\n            <button tabindex="0" aria-label="{{translations.transparencyParams_tooltip}}" id=\'transparency-btn\' class="button-comparators transparency-button" title="{{translations.transparencyParams_tooltip}}"></button>\n        {{/if}}\n    </section>\n    <div id="m-comparators-contents"></div>\n</div>'},132:e=>{e.exports='<div id="div-contenedor" class="m-lyrcompare-container">\n    <div class="div-m-lyrcompare-panel">\n        <div class="m-lyrcompare-effect-buttoms">\n            <button tabindex="0" value="void" id="m-lyrcompare-void" class="big-buttom button-comparators cp-void" aria-label="{{translations.tooltip_void}}" title="{{translations.tooltip_void}}"></button>\n            <button tabindex="0" value="vcurtain" id="m-lyrcompare-vcurtain" class="big-buttom button-comparators cp-columns" aria-label="{{translations.tooltip_vcurtain}}" title="{{translations.tooltip_vcurtain}}"></button>\n            <button tabindex="0" value="hcurtain" id="m-lyrcompare-hcurtain" class="big-buttom button-comparators cp-columns-rotate" aria-label="{{translations.tooltip_hcurtain}}" title="{{translations.tooltip_hcurtain}}"></button>\n            <button tabindex="0" value="multicurtain" id="m-lyrcompare-multicurtain" class="big-buttom button-comparators cp-th-large" aria-label="{{translations.tooltip_multicurtain}}" title="{{translations.tooltip_multicurtain}}"></button>\n        </div>\n        <div class="div-m-lyrcompare-transparent-opacity">\n            <label for="input-transparent-opacity" title="{{translations.opacity_tooltip}}">{{translations.opacity}}: </label>\n            <input tabindex="0" type="range" min="0" max="100" value="100" id="input-transparent-opacity" aria-label="{{translations.opacity}}" title="{{translations.opacity_tooltip}}"></input>\n        </div>\n        <div class="div-m-lyrcompare-transparent-static">\n            <input tabindex="0" type="radio" id="div-m-lyrcompare-transparent-dynamic" name="staticDivision" value="0" aria-label="{{translations.dynamic_tooltip}}"><label for="div-m-lyrcompare-transparent-dynamic" title="{{translations.dynamic_tooltip}}">{{translations.dynamic}}</label>\n            <input tabindex="0" type="radio" id="div-m-lyrcompare-transparent-static" name="staticDivision" value="1" aria-label="{{translations.static_tooltip}}"><label for="div-m-lyrcompare-transparent-static" title="{{translations.static_tooltip}}">{{translations.static}}</label>\n            <input tabindex="0" type="radio" id="div-m-lyrcompare-transparent-mixed" name="staticDivision" value="2" aria-label="{{translations.mixed_tooltip}}"><label for="div-m-lyrcompare-transparent-mixed" title="{{translations.mixed_tooltip}}">{{translations.mixed}}</label>\n        </div>\n\n        {{#if options}}\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrA-cont">\n                <label id="m-lyrcompare-lyrA-lbl" for="m-lyrcompare-lyrA" class="mapLASelect_label" title="{{translations.lyrLeftSelect_tooltip}}">{{translations.lyrLeftSelect_tooltip}}</label>\n                <select tabindex="0" disabled id="m-lyrcompare-lyrA" aria-label="{{translations.lyrLeftSelect_tooltip}}">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n            </div>\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrB-cont">\n                <label id="m-lyrcompare-lyrB-lbl" for="m-lyrcompare-lyrB" class="mapLBSelect_label" title="{{translations.lyrRightSelect_tooltip}}">{{translations.lyrRightSelect_tooltip}}</label>\n                <select tabindex="0" disabled id="m-lyrcompare-lyrB" aria-label="{{translations.lyrRightSelect_tooltip}}">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n            </div>\n            \x3c!--Multi Curtain--\x3e\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrC-cont">\n                <label id="m-lyrcompare-lyrC-lbl" for="m-lyrcompare-lyrC" class="mapLCSelect_label" title="{{translations.lyrLeftSelect_tooltip}}">Abajo a la izquierda</label>\n                <select tabindex="0" disabled id="m-lyrcompare-lyrC" aria-label="{{translations.lyrLeftSelect_tooltip}}">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n            </div>\n            <div class="m-lyrcompare-select" id="m-lyrcompare-lyrD-cont">\n                <label id="m-lyrcompare-lyrD-lbl" for="m-lyrcompare-lyrD" class="mapLDSelect_label" title="{{translations.lyrRightSelect_tooltip}}">Abajo a la derecha</label>\n                <select tabindex="0" disabled id="m-lyrcompare-lyrD" aria-label="{{translations.lyrRightSelect_tooltip}}">\n                    {{#each options}}\n                        <option value=\'{{this.name}}\'>{{this.legend}}</option>\n                    {{/each}}\n                </select>\n            </div>\n        {{/if}}\n    </div>\n</div>\n'},539:e=>{e.exports='<section tabindex="0" id="m-compatators-mirrorpanelContent" class="m-compatators-mirrorpanelContent">\n      <div class="mirrorButtons">\n        <button tabindex="0" style="display: none;" id="set-mirror-0"  aria-label="{{translations.modViz0}}" title="{{translations.modViz0}}" class="modeviz0"></button>\n        <button tabindex="0" style="display: none;" id="set-mirror-1"  aria-label="{{translations.modViz1}}" title="{{translations.modViz1}}" class="modeviz1"></button>\n        <button tabindex="0" style="display: none;" id="set-mirror-2"  aria-label="{{translations.modViz2}}" title="{{translations.modViz2}}" class="modeviz2"></button>\n        <button tabindex="0" style="display: none;" id="set-mirror-3"  aria-label="{{translations.modViz3}}" title="{{translations.modViz3}}" class="modeviz3"></button>\n        <button tabindex="0" style="display: none;" id="set-mirror-4"  aria-label="{{translations.modViz4}}" title="{{translations.modViz4}}" class="modeviz4"></button>\n        <button tabindex="0" style="display: none;" id="set-mirror-5"  aria-label="{{translations.modViz5}}" title="{{translations.modViz5}}" class="modeviz5"></button>\n        <button tabindex="0" style="display: none;" id="set-mirror-6"  aria-label="{{translations.modViz6}}" title="{{translations.modViz6}}" class="modeviz6"></button>\n        <button tabindex="0" style="display: none;" id="set-mirror-7"  aria-label="{{translations.modViz7}}" title="{{translations.modViz7}}" class="modeviz7"></button>\n        <button tabindex="0" style="display: none;" id="set-mirror-8"  aria-label="{{translations.modViz8}}" title="{{translations.modViz8}}" class="modeviz8"></button>\n        <button tabindex="0" style="display: none;" id="set-mirror-9"  aria-label="{{translations.modViz9}}" title="{{translations.modViz9}}" class="modeviz9"></button>\n      </div>\n\n      <section class="mirrorpanel_selections">\n            <div>\n                  <label tabindex="0" id="mapLASelect_label" class="mapLASelect_label" for="">Capas del mapa: </label>\n                  <select name="mapLA" id="mapLASelect" aria-label="{{translations.selectLayers}}">\n                        <option tabindex="0" value="void">{{translations.selector}}</option>\n                  </select>\n            </div>\n\n            <div style="display: none;">\n                  <label tabindex="0" id="mapLBSelect_label" for="">Izquierda</label>\n                  <select name="mapLB" id="mapLBSelect" aria-label="{{translations.selectLayers}}">\n                        <option tabindex="0" value="void">{{translations.selector}}</option>\n                  </select>\n            </div>\n\n\n            <div style="display: none;">\n                  <label tabindex="0" id="mapLCSelect_label" for="">Arriba</label>\n                  <select name="mapLC" id="mapLCSelect" aria-label="{{translations.selectLayers}}">\n                        <option tabindex="0" value="void">{{translations.selector}}</option>\n                  </select>\n            </div>\n\n            <div style="display: none;">\n                  <label tabindex="0" id="mapLDSelect_label" for="">Abajo</label>\n                  <select name="mapLD" id="mapLDSelect" aria-label="{{translations.selectLayers}}">\n                        <option tabindex="0" value="void">{{translations.selector}}</option>\n                  </select>\n            </div>\n\n      </section>\n\n  </section>\n  '},814:(e,t,r)=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">COMPARATORS <img style="vertical-align: bottom; filter: invert(100%);" src="'+r(914)+'" width="30" height="30"></h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <img src="{{urlImages}}/comparators_0.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help3}}</p>\n      <img src="{{urlImages}}/comparators_1.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help4}}</p>\n      <p>{{translations.help5}}</p>\n      <img src="{{urlImages}}/comparators_2.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help6}}</p>\n      <p>{{translations.help7}}</p>\n      <img src="{{urlImages}}/comparators_3.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help8}}</p>\n      <p>{{translations.help9}}</p>\n      <img src="{{urlImages}}/comparators_4.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help10}}</p>\n      <p>{{translations.help11}}</p>\n      <p>{{translations.help12}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/comparators" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/comparators</a></p>\n      <p>{{translations.help13}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/comparators.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/comparators.jsp?language=es</a></p>\n   </div>\n</div>\n'},141:e=>{e.exports='<div id="div-contenedor" class="m-transparency-container">\n    <div class="div-m-transparency-panel">\n        <div class="div-m-transparency-transparent-radius">\n            <p>{{translations.radius}}:</p>\n            <input tabindex="0" type="range" value="100" id="input-transparent-radius" aria-label="{{translations.inputTransparentRadius}}"></input>\n            <button tabindex="0" id="m-transparency-lock" class="button-comparators cp-lock-icon" aria-label="{{translations.freeze}}" title="{{translations.freeze}}"></button>\n            <button tabindex="0" id="m-transparency-unlock" class="button-comparators cp-unlock-icon" aria-label="{{translations.unfreeze}}" title="{{translations.unfreeze}}" style="margin-left:-20px;"></button>\n        </div>\n        {{#if options}}\n            <div class="m-transparency-select">\n                <p>{{translations.layers}}: </p>\n                <select tabindex="0" id="m-transparency-lyr" aria-label="{{translations.selectTransparentRadius}}">\n                    {{#each options}}\n                        <option value="{{name}}">{{legend}}</option>\n                    {{/each}}\n                </select>\n            </div>\n        {{/if}}\n    </div>\n</div>\n'},325:e=>{e.exports='<section tabindex="0" class="m-windowsync-container">\n    <button tabindex="0" id="new_windowsync" class="new_windowsync" title="{{translations.openWindow}}">\n        <span class="comparators-icon-window-restore"></span>\n    </button>\n    <button tabindex="0" id="deleteAll_windowsync" class="deleteAll_windowsync" title="{{translations.closeAll}}">\n        <span class="comparators-icon-window-close-o"></span>\n    </button>\n</section>\n'},914:e=>{"use strict";e.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMjQiIGhlaWdodD0iMTAyNCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+Cjx0aXRsZT48L3RpdGxlPgo8ZyBpZD0iaWNvbW9vbi1pZ25vcmUiPgo8L2c+CjxwYXRoIGQ9Ik04OTYgNzM0LjIwOGwtNjA2LjIwOC02MDYuMjA4aDUyMS4yMTZjNDcuMTA0IDAgODQuOTkyIDM3Ljg4OCA4NC45OTIgODQuOTkydjUyMS4yMTZNODgzLjcxMiA5MzkuMDA4bC00My4wMDgtNDMuMDA4aC02MjcuNzEyYy00Ni4wODAgMC04NC45OTItMzguOTEyLTg0Ljk5Mi04NC45OTJ2LTYyNy43MTJsLTQzLjAwOC00My4wMDggNTYuMzItNTUuMjk2IDc5Ny42OTYgNzk4LjcyLTU1LjI5NiA1NS4yOTZNNzE2LjggNzY4bC0xNjUuODg4LTE2Ni45MTItODEuOTIgMTAyLjQtMTA2LjQ5Ni0xMjgtMTQ5LjUwNCAxOTIuNTEyaDUwMy44MDh6Ij48L3BhdGg+Cjwvc3ZnPgo="}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(361),t=r.n(e);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(o=a.key,i=void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===n(i)?i:String(i)),a)}var o,i}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},o.apply(this,arguments)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=s(e);if(t){var o=s(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(p,M.impl.Control);var t,r,n,c=l(p);function p(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),c.apply(this,arguments)}return t=p,(r=[{key:"addTo",value:function(e,t){o(s(p.prototype),"addTo",this).call(this,e,t),this.facadeMap_=e}},{key:"transformCenter",value:function(e,t){var r=this.facadeMap_.getProjection().code;return ol.proj.transform(e,t,r)}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),p}();const p=JSON.parse('{"exception":{"impl":"The implementation used cannot create comparatorsControl controls","no_controls":"The Comparators plugin needs to activate at least one control.","mirrorDefaultCompareViz":"modeVizTypes parameter does not contain the value of defaultCompareViz","mirrorModeVizTypes":"modeVizTypes does not have a valid value","fourLayers":"The number of layers is insufficient to apply the effect","notLayers":"The number of layers is insufficient to apply the effect","errorPlugin":"Error loading the plugin","errorObjectLayer":"Layers cannot be loaded as objects","errorLinkUrl":"Missing plugin link","errorScriptUrl":"Missing plugin script","errorScriptOrLinkUrl":"Missing plugin script or link","errorURL":"Cannot be shared because it does not have a URL","errorUrlMBTiles":"The MBTiles or MBTilesVector layer does not have a URL and cannot be shared","errorGeneric":"The GenericRaster and GenericVector layer cannot be shared"},"textHelp":{"help1":"The compare extension allows different options for comparing maps and layers in a viewer.","help2":"Comparison options are customizable, so not all viewers may have the same options.","help3":"The first option is mirror comparison.","help4":"With this option, synchronized maps are opened in the same window. From the extension panel, you can select how and how many comparison quadrants you want and the comparison layers to show in each of them.","help5":"The second option is the comparison in synchronized windows.","help6":"This option is ideal for environments with more than one screen, allowing you to have one on each monitor with maps synchronized with each other. It allows you to open as many synchronized windows as you want and close them all from the extension panel.","help7":"The third option is the curtain comparison.","help8":"This option, like the first, allows you to choose which layers you want to compare in each map division and the type of map division to compare.","help9":"And the fourth option, the magnifying glass comparison.","help10":"Allows you to compare the selected layer in the extension panel using a magnifying glass.","help11":"With the command Ctrl+Shift+Enter you can leave the comparison fixed and move the map.","help12":"The information relevant to the extension and its possible parameterization is documented in","help13":"The example of using its parameters can be checked in"},"mirrorpanelParams_tooltip":"mirrorpanelParams_tooltip","lyrcompareParams_tooltip":"lyrcompareParams_tooltip","transparencyParams_tooltip":"transparencyParams_tooltip","nolayertext":"No Layout","title":"Comparators","play":"Play","pause":"Pause","intervals_error":"The intervals were not defined correctly","tooltipLyr":"Layer Comparison","tooltip_vcurtain":"Vertical curtain","tooltip_hcurtain":"Horizontal curtain","tooltip_multicurtain":"Multi curtain","tooltip_deactivatecurtain":"Deactivate curtain","layers":"Layers","radius":"Radius","opacity":"Opacity","static":"Static","dynamic":"Dynamic","mixed":"Mixed","layer":"Layer","opacity_tooltip":"Opacity of the layers (0-100%)","dynamic_tooltip":"Division between layers is fixed by mouse position","mixed_tooltip":"Division between layers is dragged by mouse","static_tooltip":"Division between layers is fixed 50%","lyrLeftSelect_tooltip":"Select layer on the left","lyrRightSelect_tooltip":"Select layer on the right","advice_sameLayer":"One layer in different places is not allowed","no_layers_plugin":"The number of layers is insufficient to apply the effect","repeated_layers":"Selected layers cannot be repeated","tooltipMirrorpanel":"Mirror Comparison","titleMirrorpanel":"Mirror Maps","modViz0":"Standard map","modViz1":"Vertical two maps","modViz2":"Horizontal two maps","modViz3":"Vertical three maps","modViz4":"Vertical four maps","modViz5":"Mosaic maps","modViz6":"Horizontal four maps","modViz7":"Vertical 2-1-1 proportional maps","modViz8":"One map above and two below","modViz9":"Two maps above and one below","tooltipTransparency":"Transparency","transparency":"Transparency","errorLayer":"Transparency: No valid layer specified on which to apply the effect","freeze":"freeze cursor","unfreeze":"defrost cursor","activate_spyeye":"SpyEye ON","deactivate_spyeye":"SpyEye OFF","tooltip":"Compare panel","inputTransparentRadius":"Modify the opacity of the radius","selectTransparentRadius":"Layer selector, the radius opacity will be applied","tooltip_void":"Single map view","selectLayers":"Layers selected","openWindow":"Open new sale","closeAll":"Close all windows","tooltipWindSync":"Synchronous layer comparator","selector":"None"}'),u=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles comparatorsControl","no_controls":"El plugin Comparators necesita activar al menos un control.","mirrorDefaultCompareViz":"El parámetro modeVizTypes no contiene el valor de defaultCompareViz","mirrorModeVizTypes":"modeVizTypes no tiene un valor válido","fourLayers":"El número de capas es insuficiente para aplicar el efecto.","notLayers":"El número de capas es insuficiente para aplicar el efecto.","errorPlugin":"Error al cargar el plugin","errorObjectLayer":"no se puede cargar las capas como objeto","errorLinkUrl":"Falta por incluir el link del plugin","errorScriptUrl":"Falta por incluir el script del plugin","errorScriptOrLinkUrl":"Falta por incluir el script o link de un plugin","errorURL":"no se puede compartir porque no tiene URL","errorUrlMBTiles":"La capa de tipo MBTiles o MBTilesVector no tiene tiene URL y no se puede compartir","errorGeneric":"La capa de tipo GenericRaster y GenericVector no se puede compartir"},"textHelp":{"help1":"La extensión de comparación permite distintas opciones para comparar mapas y capas de un visualizador.","help2":"Las opciones de comparación son personalizables, por lo que puede que no todos lso visualizadores tengan las mismas opciones.","help3":"La primera opción es la comparación en espejo.","help4":"Con esta opción se abren mapas sincronizados en una misma ventana. Desde el panel de la extensión, se pueden seleccionar cómo y cuantos cuadrantes de comparación se quieren y las capas de comparación a mostrar en cada uno de ellos.","help5":"La segunda opción es la comparación en ventanas  sincronizadas.","help6":"Esta opción es ideal para entornos con más de una pantallas, permitiendo tener una en cada monitor con mapas sincronizados entre sí. Permite abrir tantas ventanas sincronizadas se deseen y cerrar todas desde el panel de la extensión.","help7":"La tercera opción es la comparación en cortina.","help8":"Esta opción, al igual que la primera, permite elegir entre qué capas se quieren comparar en cada división del mapa y el tipo de división del mapa a comparar.","help9":"Y la cuarta opción, la comparación en lupa.","help10":"Permite comparar mediante una lupa la capa seleccionada en el panel de la extensión.","help11":"Con el comando Ctrl+Shift+Enter  se puede dejar fija la comparación y mover el mapa.","help12":"La información relevante a la extensión y su posible parametrización está documentada en","help13":"El ejemplo de uso de sus parámetros puede comprobarse en"},"nolayertext":"No hay capas de comparación","title":"Panel de Comparadores","play":"Iniciar","pause":"Parar","intervals_error":"Los intervalos no fueron definidos correctamente","tooltipLyr":"Comparador de capas","tooltip_vcurtain":"Cortina vertical","tooltip_hcurtain":"Cortina horizontal","tooltip_multicurtain":"Multivista","tooltip_deactivatecurtain":"Desactivar cortina","layers":"Capas","radius":"Radio","opacity":"Opacidad","static":"Estático","dynamic":"Dinámico","mixed":"Mixto","layer":"Capa","opacity_tooltip":"Opacidad de las capas que se comparan (0-100%)","dynamic_tooltip":"La división la marca la posición del cursor","mixed_tooltip":"La división se arrastra con el ratón","static_tooltip":"La división es fija en el centro del mapa","lyrLeftSelect_tooltip":"Selecciona la capa de la izquierda","lyrRightSelect_tooltip":"Selecciona la capa de la derecha","advice_sameLayer":"No puede cargarse la misma capa en varios sitios","no_layers_plugin":"El número de capas es insuficiente para aplicar el efecto","repeated_layers":"Las capas seleccionadas no se pueden repetir","tooltipMirrorpanel":"Comparador de mapas espejo","titleMirrorpanel":"Mapas espejo","modViz0":"Mapa standard","modViz1":"Dos mapas en vertical","modViz2":"Dos mapas en horizontal","modViz3":"Tres mapas en vertical","modViz4":"Cuatro mapas en vertical","modViz5":"Mosaico de mapas","modViz6":"Cuatro mapas en horizontal","modViz7":"Tres mapas en proporción 2-1-1","modViz8":"Un mapa arriba y dos abajo","modViz9":"Dos mapas arriba y uno abajo","tooltipTransparency":"Transparencia","transparency":"Transparencia","errorLayer":"Transparency: No se ha especificado una capa válida sobre la que aplicar el efecto","freeze":"Inmovilizar cursor","unfreeze":"liberar cursor","activate_spyeye":"Activar Spy Eye","deactivate_spyeye":"Desactivar Spy Eye","tooltip":"Comparador de mapas","inputTransparentRadius":"Modifica la opacidad del radio","selectTransparentRadius":"Selector de capas, se le aplicará la opacidad del radio","tooltip_void":"Vista de un solo mapa","selectLayers":"Selector de capas","openWindow":"Abrir nueva venta","closeAll":"Cerrar todas las ventanas","tooltipWindSync":"Comparador de capas síncrono","selector":"Ninguna capa"}');var d={en:p,es:u},y=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t="es","function"==typeof M.language.getLang&&(t=M.language.getLang()),t),n=function(e){return"es"===e||"en"===e?d[e]:M.language.getTranslation(e).comparators}(r),a="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(r,"' has not been defined.")):a=e.split(".").reduce((function(e,t){return e[t]}),n),a};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===m(o)?o:String(o)),n)}var a,o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},h.apply(this,arguments)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var a=g(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(o,M.impl.Control);var t,r,n,a=b(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.apply(this,arguments)}return t=o,r=[{key:"addTo",value:function(e,t){var r=this;e.getMapImpl().getInteractions().forEach((function(e){e instanceof ol.interaction.DoubleClickZoom&&(r.dblClickInteraction_=e)})),h(g(o.prototype),"addTo",this).call(this,e,t)}}],r&&f(t.prototype,r),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(),_=r(539),w=r.n(_);const L={"set-mirror-0":[{id:"mapLASelect_label",text:{principalMap:"Capas del mapa:",secondaryMap:"Capas del mapa:"}}],"set-mirror-1":[{id:"mapLASelect_label",text:{principalMap:"Capas del mapa derecho:",secondaryMap:"Capas del mapa izquierdo:"}},{id:"mapLBSelect_label",text:{principalMap:"Capas del mapa izquierdo:",secondaryMap:"Capas del mapa derecho:"}}],"set-mirror-2":[{id:"mapLASelect_label",text:{principalMap:"Capas del mapa superior:",secondaryMap:"Capas del mapa superior:"}},{id:"mapLBSelect_label",text:{principalMap:"Capas del mapa inferior:",secondaryMap:"Capas del mapa inferior:"}}],"set-mirror-3":[{id:"mapLASelect_label",text:{principalMap:"Capas del mapa derecho:",secondaryMap:"Capas del mapa izquierdo:"}},{id:"mapLBSelect_label",text:{principalMap:"Capas del mapa central:",secondaryMap:"Capas del mapa central:"}},{id:"mapLCSelect_label",text:{principalMap:"Capas del mapa izquierdo:",secondaryMap:"Capas del mapa derecho:"}}],"set-mirror-4":[{id:"mapLASelect_label",text:{principalMap:"Capas del mapa derecho:",secondaryMap:"Capas del mapa izquierdo:"}},{id:"mapLBSelect_label",text:{principalMap:"Capas del mapa central derecho:",secondaryMap:"Capas del mapa central izquierdo:"}},{id:"mapLCSelect_label",text:{principalMap:"Capas del mapa central izquierdo:",secondaryMap:"Capas del mapa central derecho:"}},{id:"mapLDSelect_label",text:{principalMap:"Capas del mapa izquierdo:",secondaryMap:"Capas del mapa derecho:"}}],"set-mirror-5":[{id:"mapLASelect_label",text:{principalMap:"Capas del mapa superior derecho:",secondaryMap:"Capas del mapa superior izquierdo:"}},{id:"mapLBSelect_label",text:{principalMap:"Capas del mapa superior izquierdo:",secondaryMap:"Capas del mapa superior derecho:"}},{id:"mapLCSelect_label",text:{principalMap:"Capas del mapa inferior izquierdo:",secondaryMap:"Capas del mapa inferior izquierdo:"}},{id:"mapLDSelect_label",text:{principalMap:"Capas del mapa inferior derecho:",secondaryMap:"Capas del mapa inferior derecho:"}}],"set-mirror-6":[{id:"mapLASelect_label",text:{principalMap:"Capas del primer mapa:",secondaryMap:"Capas del primer mapa:"}},{id:"mapLBSelect_label",text:{principalMap:"Capas del segundo mapa:",secondaryMap:"Capas del segundo mapa:"}},{id:"mapLCSelect_label",text:{principalMap:"Capas del tercer mapa:",secondaryMap:"Capas del tercer mapa:"}},{id:"mapLDSelect_label",text:{principalMap:"Capas del cuarto mapa:",secondaryMap:"Capas del cuarto mapa:"}}],"set-mirror-7":[{id:"mapLASelect_label",text:{principalMap:"Capas del mapa derecho:",secondaryMap:"Capas del mapa izquierdo:"}},{id:"mapLBSelect_label",text:{principalMap:"Capas del mapa central:",secondaryMap:"Capas del mapa central:"}},{id:"mapLCSelect_label",text:{principalMap:"Capas del mapa izquierdo:",secondaryMap:"Capas del mapa derecho:"}}],"set-mirror-8":[{id:"mapLASelect_label",text:{principalMap:"Capas del mapa superior:",secondaryMap:"Capas del mapa superior:"}},{id:"mapLBSelect_label",text:{principalMap:"Capas del mapa izquierdo:",secondaryMap:"Capas del mapa izquierdo:"}},{id:"mapLCSelect_label",text:{principalMap:"Capas del mapa derecho:",secondaryMap:"Capas del mapa derecho:"}}],"set-mirror-9":[{id:"mapLASelect_label",text:{principalMap:"Capas del mapa derecho:",secondaryMap:"Capas del mapa izquierdo:"}},{id:"mapLBSelect_label",text:{principalMap:"Capas del mapa izquierdo:",secondaryMap:"Capas del mapa derecho:"}},{id:"mapLCSelect_label",text:{principalMap:"Capas del mapa inferior:",secondaryMap:"Capas del mapa inferior:"}}]};const C={"set-mirror-0":[{id:"mapLASelect_label",text:{principalMap:"Map layers:",secondaryMap:"Map layers:"}}],"set-mirror-1":[{id:"mapLASelect_label",text:{principalMap:"Right map layers:",secondaryMap:"Left map layers:"}},{id:"mapLBSelect_label",text:{principalMap:"Left map layers:",secondaryMap:"Right map layers:"}}],"set-mirror-2":[{id:"mapLASelect_label",text:{principalMap:"Upper map layers:",secondaryMap:"Upper map layers:"}},{id:"mapLBSelect_label",text:{principalMap:"Lower map layers:",secondaryMap:"Lower map layers:"}}],"set-mirror-3":[{id:"mapLASelect_label",text:{principalMap:"Right map layers:",secondaryMap:"Left map layers:"}},{id:"mapLBSelect_label",text:{principalMap:"Center map layers:",secondaryMap:"Center map layers:"}},{id:"mapLCSelect_label",text:{principalMap:"Left map layers:",secondaryMap:"Right map layers:"}}],"set-mirror-4":[{id:"mapLASelect_label",text:{principalMap:"Right map layers:",secondaryMap:"Left map layers:"}},{id:"mapLBSelect_label",text:{principalMap:"Right center map layers:",secondaryMap:"Left center map layers:"}},{id:"mapLCSelect_label",text:{principalMap:"Left center map layers:",secondaryMap:"Right center map layers:"}},{id:"mapLDSelect_label",text:{principalMap:"Left map layers:",secondaryMap:"Right map layers:"}}],"set-mirror-5":[{id:"mapLASelect_label",text:{principalMap:"Upper right map layers:",secondaryMap:"Upper left map layers:"}},{id:"mapLBSelect_label",text:{principalMap:"Upper left map layers:",secondaryMap:"Upper right map layers:"}},{id:"mapLCSelect_label",text:{principalMap:"Lower left map layers:",secondaryMap:"Lower left map layers:"}},{id:"mapLDSelect_label",text:{principalMap:"Lower right map layers:",secondaryMap:"Lower right map layers:"}}],"set-mirror-6":[{id:"mapLASelect_label",text:{principalMap:"First map layers:",secondaryMap:"First map layers:"}},{id:"mapLBSelect_label",text:{principalMap:"Second map layers:",secondaryMap:"Second map layers:"}},{id:"mapLCSelect_label",text:{principalMap:"Third map layers:",secondaryMap:"Third map layers:"}},{id:"mapLDSelect_label",text:{principalMap:"Fourth map layers:",secondaryMap:"Fourth map layers:"}}],"set-mirror-7":[{id:"mapLASelect_label",text:{principalMap:"Right map layers:",secondaryMap:"Left map layers:"}},{id:"mapLBSelect_label",text:{principalMap:"Center map layers:",secondaryMap:"Center map layers:"}},{id:"mapLCSelect_label",text:{principalMap:"Left map layers:",secondaryMap:"Right map layers:"}}],"set-mirror-8":[{id:"mapLASelect_label",text:{principalMap:"Upper map layers:",secondaryMap:"Upper map layers:"}},{id:"mapLBSelect_label",text:{principalMap:"Left map layers:",secondaryMap:"Left map layers:"}},{id:"mapLCSelect_label",text:{principalMap:"Right map layers:",secondaryMap:"Right map layers:"}}],"set-mirror-9":[{id:"mapLASelect_label",text:{principalMap:"Right map layers:",secondaryMap:"Left map layers:"}},{id:"mapLBSelect_label",text:{principalMap:"Left map layers:",secondaryMap:"Right map layers:"}},{id:"mapLCSelect_label",text:{principalMap:"Lower map layers:",secondaryMap:"Lower map layers:"}}]};var P=function(e){var t=e.name;t?M.toast.error("".concat(t," ").concat(y("exception.errorURL")),null,6e3):M.toast.error(y("exception.errorUrlMBTiles"),null,6e3)},x=function(){M.toast.error(y("exception.errorGeneric"),null,6e3)};function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],s=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=O(e.split("*"),4),r=t[0],n=t[2],a=t[3];return"WMS"===r?a:n},j=function(e,t){var r=null,n=[];return e.forEach((function(e){t.some((function(t){return e.name===E(t)}))?r=e:n.push(e)})),[r,n]},T=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("WMS"===e.type){var n=e.url,a=e.name,o=e.legend,i=e.useCapabilities,l=e.options,s=e.version;return r&&t.removeWMS(a),"WMS*".concat(o,"*").concat(n,"*").concat(a,"*true*").concat(l.format||"image/png","*").concat(i,"*").concat(s)}if("WMTS"===e.type){var c=e.url,p=e.name,u=e.legend,d=e.matrixSet,y=e.options,m=e.useCapabilities;r&&t.removeWMTS(p);var f=t.getProjection().code;return"WMTS*".concat(c,"*").concat(p,"*").concat(d||f,"*").concat(u,"*").concat(y.format||"image/png","*").concat(m)}return!1},k=function(e,t){return e.map((function(e){var r=e.split("*");if("WMS"===r[0].toUpperCase()){var n=new M.layer.WMS({url:r[2],name:r[3],legend:r[1],format:r[4],useCapabilities:"true"===r[5]||!1,version:r[7]});return n.setZIndex(t),n}var a=new M.layer.WMTS({url:r[1],name:r[2],legend:r[4],matrixSet:r[3],transparent:!0,queryable:!1,visibility:!1,format:r[5],useCapabilities:"true"===r[6]||!1},{displayInLayerSwitcher:!1});return a.setZIndex(t),a}))},D=function(e){return e.replace(/[^\w$]/g,"")};function I(e){var t=e.replace(/,/g,"");return t=t.replace(/\*/g,"")}function R(e,t){var r;if("osm"===e.name||"OSM"===e.type)r=!0===e.transparent?function(e){return"OSM*".concat(I(e.legend||e.name),"*").concat(I(e.legend||""),"*").concat(e.url,"*").concat(e.isVisible(),"*").concat(e.transparent)}(e):"OSM";else if(/mapbox/.test(e.name))r="MAPBOX.".concat(e.name);else if("WMS"===e.type)r=function(e){return"WMS*".concat(I(e.legend||e.name),"*").concat(e.url,"*").concat(e.name,"*").concat(e.transparent,"*").concat(e.tiled,"*").concat(e.userMaxExtent||"","*").concat(e.version,"*").concat(e.displayInLayerSwitcher,"*").concat(e.isQueryable(),"*").concat(e.isVisible())}(e);else if("WMTS"===e.type)r=function(e,t){var r=t.getProjection().code,n=null;try{n=e.getLegend()}catch(t){n=e.legend}return"WMTS*".concat(e.url,"*").concat(e.name,"*").concat(e.matrixSet||r,"*").concat(I(n),"*").concat(e.transparent,"*").concat(e.options.format||"image/png","*").concat(e.displayInLayerSwitcher,"*").concat(e.isQueryable(),"*").concat(e.isVisible())}(e,t);else if("XYZ"===e.type)r=function(e){return"XYZ*".concat(I(e.legend||e.name),"*").concat(e.url,"*").concat(e.isVisible(),"*").concat(e.transparent,"*").concat(e.displayInLayerSwitcher,"*").concat(I(e.legend||""))}(e);else if("MBTilesVector"===e.type)r=function(e){if(void 0===e.url)return P(e),"";var t=e.getStyle().serialize();return"MBTilesVector*".concat(I(e.legend||e.name),"*").concat(e.url,"*").concat(e.name,"*").concat(e.isVisible(),"**").concat(t,"*").concat(e.extract)}(e);else if("MBTiles"===e.type)r=function(e){return void 0===e.url?(P(e),""):"MBTiles*".concat(I(e.legend||e.name),"*").concat(e.url,"*").concat(e.name,"*").concat(e.transparent,"*").concat(e.isVisible(),"*").concat(e.getOpacity(),"*").concat(e.maxZoom,"*").concat(e.userMaxExtent||"")}(e);else if("TMS"===e.type)r=function(e){return"TMS*".concat(I(e.legend||e.name),"*").concat(e.url,"*").concat(e.isVisible(),"*").concat(e.transparent,"*").concat(e.tileGridMaxZoom,"*").concat(e.displayInLayerSwitcher,"*").concat(I(e.legend||""))}(e);else if("KML"===e.type)r=function(e){return"KML*".concat(e.name,"*").concat(e.url,"*").concat(e.extract,"*").concat(e.label,"*").concat(e.isVisible())}(e);else if("WFS"===e.type)r=function(e){var t=e.getStyle().serialize();return"WFS*".concat(I(e.legend||e.name),"*").concat(e.url,"*").concat(e.namespace,":").concat(e.name,":*").concat(e.geometry||"","*").concat(e.ids||"","*").concat(e.cql||"","*").concat(t||"")}(e);else if("GeoJSON"===e.type)r=function(e){var t=M.utils.isUndefined(e.source)?e.url:e.serialize(),r=e.getStyle()?e.getStyle().serialize():"";return"GeoJSON*".concat(e.name,"*").concat(t,"*").concat(e.extract,"*").concat(r)}(e);else if("Vector"===e.type)r=function(e){var t=Object.assign(e.toGeoJSON());t.crs={properties:{name:"EPSG:4326"},type:"name"},t=window.btoa(unescape(encodeURIComponent(JSON.stringify(t))));var r=e.getStyle()?e.getStyle().serialize():"";return"GeoJSON*".concat(e.name,"*").concat(t,"**").concat(r)}(e);else if("MVT"===e.type)r=function(e){return"MVT*".concat(e.url,"*").concat(e.name,"*").concat(e.getProjection())}(e);else if("OGCAPIFeatures"===e.type)r=function(e){var t=e.getStyle()?e.getStyle().serialize():"";return"OGCAPIFeatures*".concat(e.legend||e.name,"*").concat(e.url,"*").concat(e.name,"*").concat(e.limit||"","*").concat(e.bbox||"","*").concat(e.id||"","*").concat(e.offset||"","*").concat(e.format||"","*").concat(t,"*").concat(e.extract||"")}(e);else if("GenericRaster"===e.type||"GenericVector"===e.type)return x(),"";return r}function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function B(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],s=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===z(o)?o:String(o)),n)}var a,o}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},U.apply(this,arguments)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var a=K(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(o,M.Control);var t,r,n,a=G(o);function o(e,t,r,n,i){var l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),M.utils.isUndefined(S)&&M.exception(y("exception"));var s=new S;return(l=a.call(this,s,"Mirrorpanel")).map_=r,l.template=null,l.modeVizTypes=e.modeVizTypes,void 0===l.modeVizTypes&&(l.modeVizTypes=[0,1,2,3,4,5,6,7,8,9]),l.defaultCompareViz=e.defaultCompareViz,void 0===l.defaultCompareViz&&(l.defaultCompareViz=0),l.showCursors=e.showCursors,l.mapL={A:l.map_,B:null,C:null,D:null},l.lyrCursor={A:null,B:null,C:null,D:null},l.featureLyrCursor={A:null,B:null,C:null,D:null},l.layerSelected={A:null,B:null,C:null,D:null},l.oldClass="",l.principalMap=e.principalMap,void 0===l.principalMap&&(l.principalMap=!1),l.enabledControlsPlugins=e.enabledControlsPlugins,void 0===l.enabledControlsPlugins&&(l.enabledControlsPlugins=!1),l.backImgLayersConfig=e.backImgLayersConfig,l.target=r.getMapImpl().values_.target,l.styleCursor=new M.style.Point({icon:{form:M.style.form.CIRCLE,fontsize:.5,radius:5,rotation:0,rotate:!1,offset:[0,0],color:"black",fill:"red",gradientcolor:"#088A85",opacity:.8}}),l.controlsLayers=t,l.layers=l.map_.getLayers().filter((function(e){return e.displayInLayerSwitcher&&("WMS"===e.type||"WMTS"===e.type)})),l.lyrSelectorIds=["mapLASelect","mapLBSelect","mapLCSelect","mapLDSelect"],l.maps=["A","B","C","D"],l.dicAccesibilityButton="es"===M.language.getLang()?L:C,l.enabledKeyFunctions=e.enabledKeyFunctions,void 0===l.enabledKeyFunctions&&(l.enabledKeyFunctions=!0),l.comparatorsControls=i,l}return t=o,(r=[{key:"active",value:function(e){var t=this;this.modeVizTypes.includes(this.defaultCompareViz)||(M.toast.error("Error: ".concat(y("exception.mirrorDefaultCompareViz"))),this.defaultCompareViz=this.modeVizTypes[0]),this.modeVizTypes.forEach((function(e){[0,1,2,3,4,5,6,7,8,9].includes(e)||M.toast.error("Error: ".concat(y("exception.mirrorModeVizTypes")," - ").concat(e))})),this.createMapContainers();var r={jsonp:!0,vars:{translations:{modViz0:y("modViz0"),modViz1:y("modViz1"),modViz2:y("modViz2"),modViz3:y("modViz3"),modViz4:y("modViz4"),modViz5:y("modViz5"),modViz6:y("modViz6"),modViz7:y("modViz7"),modViz8:y("modViz8"),modViz9:y("modViz9"),selectLayers:y("selectLayers"),selector:y("selector")}}};this.template=M.template.compileSync(w(),r),e.querySelector("#m-comparators-contents").appendChild(this.template),this.createLyrDropDown(),this.modeVizTypes.forEach((function(e){var r=t.template.querySelector("#set-mirror-".concat(e));r.style.display="initial",r.addEventListener("click",(function(r){var n=r.target;t.createSelectorLayer(t.addValueButton(e)),t.manageVisionPanelByCSSGrid(e),t.changeSpanText(n.id)}))})),this.manageVisionPanelByCSSGrid(this.defaultCompareViz),this.createSelectorLayer(this.addValueButton(this.defaultCompareViz)),this.changeSpanText("set-mirror-".concat(this.defaultCompareViz)),this.showCursors&&this.addLayerCursor("A"),this.enabledKeyFunctions&&this.addEventKey_()}},{key:"addValueButton",value:function(e){return[1,2].includes(e)?["B"]:[3,7,8,9].includes(e)?["B","C"]:[4,5,6].includes(e)?["B","C","D"]:["A"]}},{key:"createLyrDropDown",value:function(){var e=this;this.lyrSelectorIds.forEach((function(t,r){var n=e.template.querySelector("#".concat(t));e.controlsLayers.forEach((function(e){var t=V(e.split("*"),5),r=t[0],a=t[1],o=t[4];n.innerHTML+="WMS"===r?'<option class="lyrDropOptions" value="'.concat(e,'">').concat(a,"</option>"):'<option class="lyrDropOptions" value="'.concat(e,'">').concat(o,"</option>")})),n.addEventListener("change",(function(t){var r=t.target;e.changeLayer(r)}))}))}},{key:"destroy",value:function(){document.removeEventListener("keydown",(function(e){})),this.removeMaps(),this.destroyMapsContainer();var e=[null,null,null,null,null,null,null,null,null,null,null,null,null];this.control_=e[0],this.panel_=e[1],this.map_=e[2],this.collapsible=e[3],this.collapsed=e[4],this.modeViz=e[5],this.enabledPlugins=e[6],this.enabledKeyFunctions=e[7],this.showCursors=e[8],this.mirrorLayers=e[9],this.defaultBaseLyrs=e[10],this.backImgLayersParams=e[11],this.interface=e[12]}},{key:"removeAllLayers",value:function(){var e=this;this.maps.forEach((function(t){if(null!==e.layerSelected[t]){var r=V(e.layerSelected[t].split("*"),5),n=r[0],a=r[1],o=r[4];"WMS"===n&&e.mapL[t].removeWMS({name:a}),"WMTS"===n&&e.mapL[t].removeWMTS({name:o})}}))}},{key:"activate",value:function(){U(K(o.prototype),"activate",this).call(this)}},{key:"deactivate",value:function(){this.manageVisionPanelByCSSGrid(0),this.removeAllLayers(),document.removeEventListener("keydown",(function(e){})),this.removeMaps(),(document.getElementById("mapjsB")||document.getElementById("mapjsC")||document.getElementById("mapjsD"))&&(this.destroyMapsContainer(),this.template.remove())}},{key:"createMapContainers",value:function(){var e=document.createElement("div");e.id="lienzo",e.classList.add("mirrorpanel-grid");var t=document.getElementById(this.target);this.oldClass=t.classList.toString(),t.parentElement.insertBefore(e,t),t.classList.add("mirror1"),e.appendChild(t);var r=document.createElement("div");r.id="mapjsB",r.classList.add("mirror2"),e.appendChild(r);var n=document.createElement("div");n.id="mapjsC",n.classList.add("mirror3"),e.appendChild(n);var a=document.createElement("div");a.id="mapjsD",a.classList.add("mirror4"),e.appendChild(a)}},{key:"changeViewPluginsGrid",value:function(e){M.config.MOBILE_WIDTH=e?"2000":"768";var t=[];Object.entries(this.mapL).forEach((function(e){var r=V(e,2),n=(r[0],r[1]);t=n?[].concat(B(t),B(n.getControls()),B(n.getPlugins())):t})),t.forEach((function(t){return t.changeStyleResponsive?t.changeStyleResponsive(e):null}))}},{key:"manageVisionPanelByCSSGrid",value:function(e){var t=this,r=this.defaultCompareViz;document.getElementById(this.target).style.display="none",document.getElementById("mapjsB").style.display="none",document.getElementById("mapjsC").style.display="none",document.getElementById("mapjsD").style.display="none",document.getElementById("lienzo").classList.remove("reverseMirror"),this.template.querySelector("#set-mirror-".concat(r)).classList.remove("activatedComparators");for(var n=0;n<10;n++)document.getElementById("lienzo").classList.remove("modeViz".concat(n));document.getElementById("lienzo").classList.add("modeViz".concat(e)),this.principalMap&&document.getElementById("lienzo").classList.add("reverseMirror"),[1,2].includes(e)&&null===this.mapL.B&&this.createMapObjects("B"),[3,7,8,9].includes(e)&&(null===this.mapL.B&&this.createMapObjects("B"),null===this.mapL.C&&this.createMapObjects("C")),[4,5,6].includes(e)&&(null===this.mapL.B&&this.createMapObjects("B"),null===this.mapL.C&&this.createMapObjects("C"),null===this.mapL.D&&this.createMapObjects("D")),this.defaultCompareViz=e,this.template.querySelector("#set-mirror-".concat(e)).classList.add("activatedComparators"),this.map_.refresh(),null!==this.mapL.B&&this.mapL.B.refresh(),null!==this.mapL.C&&this.mapL.C.refresh(),null!==this.mapL.D&&this.mapL.D.refresh(),setTimeout((function(){t.changeViewPluginsGrid([3,4,7].includes(e))}),500)}},{key:"createSelectorLayer",value:function(e){this.lyrSelectorIds.forEach((function(e,t){0!==t&&(document.getElementById(e).parentElement.style.display="none")})),e.forEach((function(e){document.querySelector("#mapL".concat(e,"Select")).parentElement.style.display="initial"}))}},{key:"changeSpanText",value:function(e){var t=this.principalMap?"principalMap":"secondaryMap";this.dicAccesibilityButton[e].forEach((function(e){var r=e.id,n=e.text;document.getElementById(r).innerHTML=n[t]}))}},{key:"createMapObjects",value:function(e){this.mapL[e]=M.map({container:"mapjs".concat(e),center:this.map_.getCenter(),projection:"".concat(this.map_.getProjection().code,"*").concat(this.map_.getProjection().units),zoom:this.map_.getZoom()}),this.mapL[e].getMapImpl().setView(this.map_.getMapImpl().getView()),this.enabledControlsPlugins&&this.addPluginsControls(e),this.showCursors&&this.addLayerCursor(e),this.mapL[e].refresh()}},{key:"createControls",value:function(e){return!!["scale","scaleline","panzoombar","panzoom","location","getfeatureinfo","rotate","backgroundlayers"].includes(e)&&e}},{key:"addPluginsControls",value:function(e){var t=this;Object.keys(this.enabledControlsPlugins).forEach((function(r){Object.keys(t.enabledControlsPlugins[r]).forEach((function(n){("map2"===r&&"B"===e||"map3"===r&&"C"===e||"map4"===r&&"D"===e)&&t.addControlsPlugins(e,n,r)}))}))}},{key:"addControlsPlugins",value:function(e,t,r){if("controls"===t)this.mapL[e].addControls(this.enabledControlsPlugins[r][t]);else try{this.mapL[e].addPlugin(new M.plugin[t](this.enabledControlsPlugins[r][t]))}catch(e){M.toast.error("Error: enabledControlsPlugins")}}},{key:"addLayerCursor",value:function(e){var t=this;this.lyrCursor[e]=new M.layer.Vector({name:"Coordenadas centro ".concat(e)},{displayInLayerSwitcher:!1}),this.featureLyrCursor[e]=new M.Feature("Center".concat(e),{type:"Feature",properties:{},geometry:{type:"Point",coordinates:this.mapL[e].getCenter()}}),this.lyrCursor[e].addFeatures([this.featureLyrCursor[e]]),this.lyrCursor[e].setStyle(this.styleCursor),this.lyrCursor[e].setZIndex(5e3),this.mapL[e].addLayers(this.lyrCursor[e]),this.mapL[e].getMapImpl().on("pointermove",(function(r){t.lyrCursor[e].setVisible(!1),Object.keys(t.featureLyrCursor).forEach((function(n){n!==e&&null!==t.featureLyrCursor[n]&&(t.lyrCursor[n].setVisible(!0),t.featureLyrCursor[n].setGeometry({type:"Point",coordinates:r.coordinate}))}))}))}},{key:"manageLyrAvailable",value:function(e){null!==this.lyDropControlA.control_&&this.lyDropControlA.setDisabledLyrs(e),null!==this.lyDropControlB.control_&&this.lyDropControlB.setDisabledLyrs(e),null!==this.lyDropControlC.control_&&this.lyDropControlC.setDisabledLyrs(e),null!==this.lyDropControlD.control_&&this.lyDropControlD.setDisabledLyrs(e)}},{key:"removeMaps",value:function(){this.mapL.A=null,this.mapL.B=null,this.mapL.C=null,this.mapL.D=null}},{key:"destroyMapsContainer",value:function(){this.manageVisionPanelByCSSGrid(0),document.getElementById("mapjsB").remove(),document.getElementById("mapjsC").remove(),document.getElementById("mapjsD").remove();var e=document.getElementById("lienzo"),t=document.querySelector(".mirror1");e.parentElement.insertBefore(t,e),t.style.display="block",t.classList.remove("mirror1"),t.classList=this.oldClass,document.getElementById("lienzo").remove()}},{key:"changeLayer",value:function(e){var t=e.id,r=e.value,n=e.selectedIndex,a=e.options[n];if(this.disableSelects(t),a.setAttribute("selected",""),a.id.includes("external")&&"mapLASelect"===t)this.externalLayersEvt(a);else{a.disabled=!0;var o=t.split("Select")[0].split("mapL")[1];if(this.mapL[o]){var i=this.layerSelected[o];if(i){var l=V(i.split("*"),5),s=l[0],c=l[3],p=l[4];"WMS"===s&&this.comparatorsControls.saveLayers.includes(c)&&this.mapL[o].getWMS(c)[0].setVisible(!1),"WMTS"!==s||this.comparatorsControls.saveLayers.includes(p)||this.mapL[o].removeWMTS(p)}if("void"!==r){var u=this.comparatorsControls.saveLayers.find((function(e){return r.includes(e)})),d=this.mapL[o].getLayers().find((function(e){return e.name===u}));d?d.setVisible(!0):(this.mapL[o].addLayers(r),this.layerSelected[o]=r)}}}}},{key:"externalLayersEvt",value:function(e){var t=E(e.value),r=this.mapL.A.getLayers().find((function(e){return e.name===t}));r.setVisible(!r.isVisible())}},{key:"disableSelects",value:function(e){document.querySelectorAll("#".concat(e," option")).forEach((function(e){e.id.includes("external_mapLASelect")||(e.disabled=!1)}))}},{key:"equals",value:function(e){return e instanceof CompareMirrorpanel}},{key:"addEventKey_",value:function(){var e=this;document.addEventListener("keydown",(function(t){for(var r=0;r<10;r++)t.ctrlKey&&t.shiftKey&&t.key==="F".concat(r+1)&&e.modeVizTypes.includes(r)&&e.manageVisionPanelByCSSGrid(r);var n=["Control","Shift","Alt","Meta"].includes(t.key)?"":t.key;"Escape"==(t.ctrlKey?"Control ":"")+(t.shiftKey?"Shift ":"")+(t.altKey?"Alt ":"")+(t.metaKey?"Meta ":"")+n&&e.manageVisionPanelByCSSGrid(0)}))}}])&&N(t.prototype,r),n&&N(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}();function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Z(o)?o:String(o)),n)}var a,o}function Y(){return Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},Y.apply(this,arguments)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=$(e);if(t){var a=$(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}var ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(o,ol.interaction.Pointer);var t,r,n,a=X(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).layers_=[],t.swipeClicked=!1,t.handleDownEvent=t.setPosition,t.handleUpEvent=function(){t.swipeClicked=!1},t.handleMoveEvent=t.setPosition;var r=e||{};t.pos=!1,t.opacityVal=r.opacityVal||100,t.OLVersion="OL6";var n=[r.lyrA].map((function(e){return e.getImpl().getOL3Layer()})).filter((function(e){return null!=e}));t.addLayerA(n);var i=[r.lyrB].map((function(e){return e.getImpl().getOL3Layer()})).filter((function(e){return null!=e}));if(t.addLayerB(i),r.lyrC){var l=[r.lyrC].map((function(e){return e.getImpl().getOL3Layer()})).filter((function(e){return null!=e}));t.addLayerC(l)}if(r.lyrD){var s=[r.lyrD].map((function(e){return e.getImpl().getOL3Layer()})).filter((function(e){return null!=e}));t.addLayerD(s)}return t}return t=o,(r=[{key:"setMap",value:function(e){if(this.getMap()){for(var t=0;t<this.layers_.length;t+=1)"OL6"===this.OLVersion?this.layers_[t]&&(this.layers_[t].prerender&&ol.Observable.unByKey(this.layers_[t].prerender),this.layers_[t].postrender&&ol.Observable.unByKey(this.layers_[t].postrender),this.layers_[t].prerender=this.layers_[t].postrender=null):(this.layers_[t].precompose&&ol.Observable.unByKey(this.layers_[t].precompose),this.layers_[t].postcompose&&ol.Observable.unByKey(this.layers_[t].postcompose),this.layers_[t].precompose=this.layers_[t].postcompose=null);this.getMap().renderSync()}ol.interaction.Pointer.prototype.setMap.call(this,e),e&&(this.createSwipeControl(),"OL6"===this.OLVersion?(void 0!==this.layers_[0]&&(this.layers_[0].prerender=this.layers_[0].on("prerender",this.precomposeA_.bind(this)),this.layers_[0].postrender=this.layers_[0].on("postrender",this.postcomposeA_.bind(this))),void 0!==this.layers_[1]&&(this.layers_[1].prerender=this.layers_[1].on("prerender",this.precomposeB_.bind(this)),this.layers_[1].postrender=this.layers_[1].on("postrender",this.postcomposeB_.bind(this))),void 0!==this.layers_[2]&&(this.layers_[2].prerender=this.layers_[2].on("prerender",this.precomposeC_.bind(this)),this.layers_[2].postrender=this.layers_[2].on("postrender",this.postcomposeC_.bind(this))),void 0!==this.layers_[3]&&(this.layers_[3].prerender=this.layers_[3].on("prerender",this.precomposeD_.bind(this)),this.layers_[3].postrender=this.layers_[3].on("postrender",this.postcomposeD_.bind(this)))):(this.layers_[0].precompose=this.layers_[0].on("precompose",this.precomposeA_.bind(this)),this.layers_[0].postcompose=this.layers_[0].on("postcompose",this.postcomposeA_.bind(this)),this.layers_[1].precompose=this.layers_[1].on("precompose",this.precomposeB_.bind(this)),this.layers_[1].postcompose=this.layers_[1].on("postcompose",this.postcomposeB_.bind(this)),void 0!==this.layers_[2]&&void 0!==this.layers_[3]&&(this.layers_[2].precompose=this.layers_[2].on("precompose",this.precomposeC_.bind(this)),this.layers_[2].postcompose=this.layers_[2].on("postcompose",this.postcomposeC_.bind(this)),this.layers_[3].precompose=this.layers_[3].on("precompose",this.precomposeD_.bind(this)),this.layers_[3].postcompose=this.layers_[3].on("postcompose",this.postcomposeD_.bind(this)))),e.renderSync())}},{key:"setOpacity",value:function(e){if(this.opacityVal=e,this.getMap())for(var t=0;t<this.layers_.length;t+=1)void 0!==this.layers_[t]&&this.layers_[t].setOpacity(this.opacityVal/100)}},{key:"setStaticDivision",value:function(e){this.staticDivision=e,this.updatePosition()}},{key:"setComparisonMode",value:function(e){this.comparisonMode=e,this.updatePosition()}},{key:"setVisibilityLayersCD",value:function(){void 0===this.layers_[2]||void 0===this.layers_[3]||1!==this.comparisonMode&&2!==this.comparisonMode?void 0!==this.layers_[2]&&void 0!==this.layers_[3]&&(this.layers_[2].setVisible(!0),this.layers_[3].setVisible(!0)):(this.layers_[2].setVisible(!1),this.layers_[3].setVisible(!1))}},{key:"addLayerA",value:function(e){e instanceof Array||(e=[e]);var t={layer:e[0]};this.getMap()&&(t.prerender=e[0].on("prerender",this.precomposeA_.bind(this)),t.postrender=e[0].on("postrender",this.postcomposeA_.bind(this)),this.getMap().renderSync()),this.layers_.push(e[0])}},{key:"addLayerB",value:function(e){e instanceof Array||(e=[e]);var t={layer:e[0]};this.getMap()&&(t.prerender=e[0].on("prerender",this.precomposeB_.bind(this)),t.postrender=e[0].on("postrender",this.postcomposeB_.bind(this)),this.getMap().renderSync()),this.layers_.push(e[0])}},{key:"addLayerC",value:function(e){e instanceof Array||(e=[e]);var t={layer:e[0]};this.getMap()&&(t.prerender=e[0].on("prerender",this.precomposeC_.bind(this)),t.postrender=e[0].on("postrender",this.postcomposeC_.bind(this)),this.getMap().renderSync()),this.layers_.push(e[0])}},{key:"addLayerD",value:function(e){e instanceof Array||(e=[e]);var t={layer:e[0]};this.getMap()&&(t.prerender=e[0].on("prerender",this.precomposeD_.bind(this)),t.postrender=e[0].on("postrender",this.postcomposeD_.bind(this)),this.getMap().renderSync()),this.layers_.push(e[0])}},{key:"removeLayer",value:function(e){e instanceof Array||(e=[e]);for(var t=0;t<e.length;t+=1){var r=void 0;for(r=0;r<this.layers_.length&&this.layers_[r]!==e[t];r+=1);r!==this.layers_.length&&this.getMap()&&(this.layers_[r].prerender&&ol.Observable.unByKey(this.layers_[r].prerender),this.layers_[r].postrender&&ol.Observable.unByKey(this.layers_[r].postrender),this.layers_.splice(r,1),this.getMap().renderSync())}}},{key:"setPosition",value:function(e){if(2===this.staticDivision&&this.swipeClicked||2!==this.staticDivision){if(e.pixel?this.pos=e.pixel:e&&e instanceof Array?this.pos=e:e=[-1e7,-1e7],2===this.staticDivision&&1!==e.originalEvent.buttons){var t=this.map_.getSize();this.pos=[t[0]/2,t[1]/2],this.swipeClicked=!1}this.getMap()&&this.getMap().renderSync(),this.moveSwipeControl()}}},{key:"updatePosition",value:function(){var e=document.querySelector(".lyrcompare-swipe-control");if(e&&(1===this.comparisonMode?e.classList="lyrcompare-swipe-control vertical".concat(1===this.staticDivision?" static":" dynamic"):2===this.comparisonMode?e.classList="lyrcompare-swipe-control horizontal".concat(1===this.staticDivision?" static":" dynamic"):3===this.comparisonMode&&(e.classList="lyrcompare-swipe-control vertical horizontal".concat(1===this.staticDivision?" static":" dynamic"))),this.getMap()){var t=this.map_.getSize();e.style.left="".concat(t[0]/2-e.offsetWidth/2,"px"),e.style.top="".concat(t[1]/2-e.offsetHeight/2,"px"),this.pos=[t[0]/2,t[1]/2],this.swipeClicked=!1,this.getMap().renderSync()}}},{key:"precomposeA_",value:function(e){var t,r,n,a,o=e.context,i=(e.frameState.pixelRatio,this.map_.getSize()),l=this.pos[0],s=this.pos[1];o.save(),o.beginPath(),1===this.staticDivision?1===this.comparisonMode?(t=ol.render.getRenderPixel(e,[0,0]),r=ol.render.getRenderPixel(e,[i[0]/2,0]),n=ol.render.getRenderPixel(e,[i[0]/2,i[1]]),a=ol.render.getRenderPixel(e,[0,i[1]])):2===this.comparisonMode?(t=ol.render.getRenderPixel(e,[0,0]),r=ol.render.getRenderPixel(e,[i[0],0]),n=ol.render.getRenderPixel(e,[i[0],i[1]/2]),a=ol.render.getRenderPixel(e,[0,i[1]/2])):3===this.comparisonMode&&(t=ol.render.getRenderPixel(e,[0,0]),r=ol.render.getRenderPixel(e,[i[0]/2,0]),n=ol.render.getRenderPixel(e,[i[0]/2,i[1]/2]),a=ol.render.getRenderPixel(e,[0,i[1]/2])):1===this.comparisonMode?(t=ol.render.getRenderPixel(e,[0,0]),r=ol.render.getRenderPixel(e,[l,0]),n=ol.render.getRenderPixel(e,[l,i[1]]),a=ol.render.getRenderPixel(e,[0,i[1]])):2===this.comparisonMode?(t=ol.render.getRenderPixel(e,[0,0]),r=ol.render.getRenderPixel(e,[i[0],0]),n=ol.render.getRenderPixel(e,[i[0],s]),a=ol.render.getRenderPixel(e,[0,s])):3===this.comparisonMode&&(t=ol.render.getRenderPixel(e,[0,0]),r=ol.render.getRenderPixel(e,[l,0]),n=ol.render.getRenderPixel(e,[l,s]),a=ol.render.getRenderPixel(e,[0,s])),void 0!==t&&(o.moveTo(t[0],t[1]),o.lineTo(a[0],a[1]),o.lineTo(n[0],n[1]),o.lineTo(r[0],r[1]),o.closePath()),o.clip()}},{key:"postcomposeA_",value:function(e){e.context.restore()}},{key:"precomposeB_",value:function(e){var t,r,n,a,o=e.context,i=(e.frameState.pixelRatio,this.map_.getSize()),l=this.pos[0],s=this.pos[1];o.save(),o.beginPath(),1===this.staticDivision?1===this.comparisonMode?(t=ol.render.getRenderPixel(e,[i[0]/2,0]),r=ol.render.getRenderPixel(e,[i[0],0]),n=ol.render.getRenderPixel(e,[i[0],i[1]]),a=ol.render.getRenderPixel(e,[i[0]/2,i[1]])):2===this.comparisonMode?(t=ol.render.getRenderPixel(e,[0,i[1]/2]),r=ol.render.getRenderPixel(e,[i[0],i[1]/2]),n=ol.render.getRenderPixel(e,[i[0],i[1]]),a=ol.render.getRenderPixel(e,[0,i[1]])):3===this.comparisonMode&&(t=ol.render.getRenderPixel(e,[i[0]/2,0]),r=ol.render.getRenderPixel(e,[i[0],0]),n=ol.render.getRenderPixel(e,[i[0],i[1]/2]),a=ol.render.getRenderPixel(e,[i[0]/2,i[1]/2])):1===this.comparisonMode?(t=ol.render.getRenderPixel(e,[l,0]),r=ol.render.getRenderPixel(e,[i[0],0]),n=ol.render.getRenderPixel(e,[i[0],i[1]]),a=ol.render.getRenderPixel(e,[l,i[1]])):2===this.comparisonMode?(t=ol.render.getRenderPixel(e,[0,s]),r=ol.render.getRenderPixel(e,[i[0],s]),n=ol.render.getRenderPixel(e,[i[0],i[1]]),a=ol.render.getRenderPixel(e,[0,i[1]])):3===this.comparisonMode&&(t=ol.render.getRenderPixel(e,[l,0]),r=ol.render.getRenderPixel(e,[i[0],0]),n=ol.render.getRenderPixel(e,[i[0],s]),a=ol.render.getRenderPixel(e,[l,s])),void 0!==t&&(o.moveTo(t[0],t[1]),o.lineTo(a[0],a[1]),o.lineTo(n[0],n[1]),o.lineTo(r[0],r[1]),o.closePath()),o.clip()}},{key:"postcomposeB_",value:function(e){e.context.restore()}},{key:"precomposeC_",value:function(e){var t,r,n,a,o=e.context,i=(e.frameState.pixelRatio,this.map_.getSize()),l=this.pos[0],s=this.pos[1];o.save(),o.beginPath(),1===this.staticDivision?3===this.comparisonMode&&(t=ol.render.getRenderPixel(e,[0,i[1]/2]),r=ol.render.getRenderPixel(e,[i[0]/2,i[1]/2]),n=ol.render.getRenderPixel(e,[i[0]/2,i[1]]),a=ol.render.getRenderPixel(e,[0,i[1]])):3===this.comparisonMode&&(t=ol.render.getRenderPixel(e,[0,s]),r=ol.render.getRenderPixel(e,[l,s]),n=ol.render.getRenderPixel(e,[l,i[1]]),a=ol.render.getRenderPixel(e,[0,i[1]])),void 0!==t&&(o.moveTo(t[0],t[1]),o.lineTo(a[0],a[1]),o.lineTo(n[0],n[1]),o.lineTo(r[0],r[1]),o.closePath()),o.clip()}},{key:"postcomposeC_",value:function(e){e.context.restore()}},{key:"precomposeD_",value:function(e){var t,r,n,a,o=e.context,i=(e.frameState.pixelRatio,this.map_.getSize()),l=this.pos[0],s=this.pos[1];o.save(),o.beginPath(),1===this.staticDivision?3===this.comparisonMode&&(t=ol.render.getRenderPixel(e,[i[0]/2,i[1]/2]),r=ol.render.getRenderPixel(e,[i[0],i[1]/2]),n=ol.render.getRenderPixel(e,[i[0],i[1]]),a=ol.render.getRenderPixel(e,[i[0]/2,i[1]])):3===this.comparisonMode&&(t=ol.render.getRenderPixel(e,[l,s]),r=ol.render.getRenderPixel(e,[i[0],s]),n=ol.render.getRenderPixel(e,[i[0],i[1]]),a=ol.render.getRenderPixel(e,[l,i[1]])),void 0!==t&&(o.moveTo(t[0],t[1]),o.lineTo(a[0],a[1]),o.lineTo(n[0],n[1]),o.lineTo(r[0],r[1]),o.closePath()),o.clip()}},{key:"postcomposeD_",value:function(e){e.context.restore()}},{key:"createSwipeControl",value:function(){var e,t,r=this;null===document.querySelector(".lyrcompare-swipe-control")?((e=document.createElement("div")).classList.add("lyrcompare-swipe-control"),(t=document.createElement("div")).classList.add("control-icon"),e.append(t),document.querySelector(".ol-overlaycontainer-stopevent").append(e)):(e=document.querySelector(".lyrcompare-swipe-control"),t=document.querySelector(".lyrcompare-swipe-control .control-icon")),e.addEventListener("mousedown",(function(){return r.swipeClicked=!0})),e.addEventListener("mouseup",(function(){return r.swipeClicked=!1})),e.addEventListener("touchstart",(function(){return r.swipeClicked=!0})),e.addEventListener("touchend",(function(){return r.swipeClicked=!1})),this.updatePosition()}},{key:"moveSwipeControl",value:function(){var e=this.map_.getSize(),t=document.querySelector(".lyrcompare-swipe-control");t&&this.getMap()&&(0===this.staticDivision||2===this.staticDivision?1===this.comparisonMode?(t.style.top="".concat(e[1]/2-t.offsetHeight/2,"px"),t.style.left="".concat(this.pos[0]-t.offsetWidth/2,"px")):2===this.comparisonMode?(t.style.left="".concat(e[0]/2-t.offsetWidth/2,"px"),t.style.top="".concat(this.pos[1]-t.offsetHeight/2,"px")):3===this.comparisonMode&&(t.style.left="".concat(this.pos[0]-t.offsetWidth/2,"px"),t.style.top="".concat(this.pos[1]-t.offsetHeight/2,"px")):(t.style.left="".concat(e[0]/2-t.offsetWidth/2,"px"),t.style.top="".concat(e[1]/2-t.offsetHeight/2,"px")))}},{key:"setActive",value:function(e){Y($(o.prototype),"setActive",this).call(this,e)}}])&&J(t.prototype,r),n&&J(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}();function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==te(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===te(o)?o:String(o)),n)}var a,o}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=oe(e);if(t){var a=oe(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(o,M.impl.Control);var t,r,n,a=ae(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.apply(this,arguments)}return t=o,(r=[{key:"addTo",value:function(e,t){this.map=e,this.olMap=e.getMapImpl()}},{key:"effectSelectedCurtain",value:function(e,t,r,n,a,o,i){null===e&&null===t||(e.setVisible(!0),t.setVisible(!0),this.transparentInteraction_=new ee({opacityVal:a,lyrA:e,lyrB:t,lyrC:r,lyrD:n}),this.olMap.addInteraction(this.transparentInteraction_),this.setOpacity(a),this.setComparisonMode(i),this.setStaticDivision(o))}},{key:"setVisibilityLayersCD",value:function(){void 0!==this.transparentInteraction_&&this.transparentInteraction_.setVisibilityLayersCD()}},{key:"setOpacity",value:function(e){void 0!==this.transparentInteraction_&&this.transparentInteraction_.setOpacity(e)}},{key:"setComparisonMode",value:function(e){void 0!==this.transparentInteraction_&&this.transparentInteraction_.setComparisonMode(e),this.setVisibilityLayersCD()}},{key:"setStaticDivision",value:function(e){void 0!==this.transparentInteraction_&&this.transparentInteraction_.setStaticDivision(e)}},{key:"addLayer",value:function(e){this.transparentInteraction_.addLayer(e.getImpl().getOL3Layer())}},{key:"removeEffectsCurtain",value:function(){this.olMap.removeInteraction(this.transparentInteraction_)}},{key:"removeInteraction",value:function(){this.olMap.getInteractions().forEach((function(e){(e instanceof ol.interaction.PinchRotate||e instanceof ol.interaction.DoubleClickZoom||e instanceof ol.interaction.KeyboardPan)&&e.setActive(!1)}))}},{key:"removeLayer",value:function(e){this.transparentInteraction_.removeLayer(e.getImpl().getOL3Layer())}}])&&re(t.prototype,r),n&&re(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(),le=r(132),se=r.n(le);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}var pe=void 0;function ue(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return de(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==ce(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===ce(o)?o:String(o)),n)}var a,o}function me(e,t){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},me(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=he(e);if(t){var a=he(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function he(e){return he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},he(e)}Array.prototype.unique=function(e){return function(){return pe.filter(e)}};var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&me(e,t)}(o,M.Control);var t,r,n,a=fe(o);function o(e,t,r,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),M.utils.isUndefined(ie)&&M.exception(y("exception"));var l=new ie(r);return i=a.call(this,l,"LyrCompare"),l.addTo(r),i.map_=r,i.name_="lyrcompare",i.layers=k(t),i.opacityVal=e.opacityVal,i.layerSelectedA=null,i.layerSelectedB=null,i.layerSelectedC=null,i.layerSelectedD=null,i.template=null,i.staticDivision=void 0===e.staticDivision?1:parseInt(e.staticDivision),i.opacityVal=100,void 0===e.opacityVal?i.opacityVal=100:(i.opacityVal=parseInt(e.opacityVal),i.opacityVal<=0?i.opacityVal=0:i.opacityVal>=100&&(i.opacityVal=100)),i.comparisonMode=0,void 0===e.defaultCompareViz?i.comparisonMode=0:(i.comparisonMode=parseInt(e.defaultCompareViz),(i.comparisonMode<=0||i.comparisonMode>3)&&(i.comparisonMode=0)),i.defaultLyrA=0,void 0===e.defaultLyrA?i.defaultLyrA=0:i.defaultLyrA=parseInt(e.defaultLyrA),i.defaultLyrB=0,void 0===e.defaultLyrB?i.defaultLyrB=0!==i.defaultLyrA?0:1:i.defaultLyrB=parseInt(e.defaultLyrB),i.defaultLyrA===i.defaultLyrB&&(M.dialog.error(y("repeated_layers"),"lyrcompare"),i.error_=!0),i.defaultLyrC=2,void 0===e.defaultLyrC?i.defaultLyrC=2:i.defaultLyrC=parseInt(e.defaultLyrC),i.defaultLyrA!==i.defaultLyrC&&i.defaultLyrB!==i.defaultLyrC||(M.dialog.error(y("repeated_layers"),"lyrcompare"),i.error_=!0),i.defaultLyrD=3,void 0===e.defaultLyrD?i.defaultLyrD=3:i.defaultLyrD=parseInt(e.defaultLyrD),i.defaultLyrA!==i.defaultLyrD&&i.defaultLyrB!==i.defaultLyrD&&i.defaultLyrC!==i.defaultLyrD||(M.dialog.error(y("repeated_layers"),"lyrcompare"),i.error_=!0),i.interface=void 0===e.interface||e.interface,i.dicAccesibilityButton="es"===M.language.getLang()?L:C,i.fatherControl_=n,i}return t=o,(r=[{key:"active",value:function(e){var t=this;new Promise((function(e,r){t.comparisonMode=0;var n=new M.layer.WMS({url:"https://www.ign.es/wms-inspire/ign-base?",name:"empty_layer",legend:y("selector"),tiled:!1,version:"1.3.0",displayInLayerSwitcher:!1},{visibility:!0,displayInLayerSwitcher:!1,queryable:!1});t.layers.push(n),t.addDefaultLayers_(),t.setFunctionsAndCompile(e)})).then((function(t){e.querySelector("#m-comparators-contents").appendChild(t),setTimeout((function(){document.querySelector("#m-lyrcompare-void").click()}),1e3)}))}},{key:"deactiveByError_",value:function(){var e=this;this.fatherControl_.controls[1].active=!1,document.querySelector("#lyrcompare-btn").classList.remove("activatedComparators"),setTimeout((function(){e.template.remove()}),10),this.deactivate()}},{key:"addDefaultLayers_",value:function(){var e=this;if(this.isDefaultLyr_()){var t=this.layers.length-1;this.defaultLyrA=t,this.defaultLyrB=t,this.defaultLyrC=t,this.defaultLyrD=t}else this.layers.forEach((function(t,r){if(null===t.getImpl().getOL3Layer()&&(r===e.defaultLyrA||r===e.defaultLyrB||r===e.defaultLyrC||r===e.defaultLyrD)){var n=e.map_.getLayers().filter((function(e){return e.name===t.name}));n.length>0&&e.map_.removeLayers(n[0]),e.map_.addLayers(t),t.setVisible(!1)}}))}},{key:"isDefaultLyr_",value:function(){return 0===this.defaultLyrA&&1===this.defaultLyrB&&2===this.defaultLyrC&&3===this.defaultLyrD}},{key:"destroy",value:function(){this.deactivate();var e=document.querySelector(".lyrcompare-swipe-control");e&&e.remove(),this.control_.removeCurtainLayers(this.control_.getLayersNames());var t=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];this.name_=t[0],this.error_=t[1],this.map_=t[2],this.layers_=t[3],this.position=t[4],this.collapsed=t[5],this.collapsible=t[6],this.staticDivision=t[7],this.opacityVal=t[8],this.comparisonMode=t[9],this.metadata_=t[10],this.tooltip_=t[11],this.interface=t[12],this.defaultLyrA=t[13],this.defaultLyrB=t[14],this.defaultLyrC=t[15],this.defaultLyrD=t[16]}},{key:"deactivate",value:function(){if(this.template){this.comparisonMode=0,this.layers=[],this.layerSelectedA=null,this.layerSelectedB=null,this.layerSelectedC=null,this.layerSelectedD=null,this.staticDivision=1,this.opacityVal=100,this.defaultLyrA=0,this.defaultLyrB=1,this.defaultLyrC=2,this.defaultLyrD=3,this.interface=!0,this.deactivateCurtain(),this.template.remove();var e=document.querySelector(".lyrcompare-swipe-control");e&&e.remove()}}},{key:"updateNewLayers",value:function(){if(this.template){this.opacityVal=100,this.interface=!0;var e=document.querySelector(".lyrcompare-swipe-control");e&&(e.classList.display="none !important"),e&&e.remove(),null!==this.layerSelectedA&&null!==this.layerSelectedB&&(this.layerSelectedA.setVisible(!1),this.layerSelectedB.setVisible(!1)),null!==this.layerSelectedC&&null!==this.layerSelectedD&&void 0!==this.layerSelectedC&&void 0!==this.layerSelectedD&&(this.layerSelectedC.setVisible(!1),this.layerSelectedD.setVisible(!1)),this.removeEffectsComparison(),this.updateControls(),this.template.remove()}}},{key:"changeSpanText",value:function(e){var t={"m-lyrcompare-vcurtain":"set-mirror-1","m-lyrcompare-hcurtain":"set-mirror-2","m-lyrcompare-void":"set-mirror-0","m-lyrcompare-multicurtain":"set-mirror-5"}[e];this.dicAccesibilityButton[t].forEach((function(e){var t=e.id,r=e.text;document.querySelector(".".concat(t)).innerHTML=r.secondaryMap}))}},{key:"setFunctionsAndCompile",value:function(e){var t=this,r={jsonp:!0,vars:{options:this.layers.map((function(e){return e instanceof Object?{name:e.name,legend:e.legend}:{name:e,legend:e}})),translations:{tooltip_vcurtain:y("tooltip_vcurtain"),tooltip_hcurtain:y("tooltip_hcurtain"),tooltip_void:y("tooltip_void"),tooltip_multicurtain:y("tooltip_multicurtain"),tooltip_deactivatecurtain:y("tooltip_deactivatecurtain"),opacity:y("opacity"),static:y("static"),dynamic:y("dynamic"),mixed:y("mixed"),layer:y("layer"),opacity_tooltip:y("opacity_tooltip"),static_tooltip:y("static_tooltip"),dynamic_tooltip:y("dynamic_tooltip"),mixed_tooltip:y("mixed_tooltip"),lyrLeftSelect_tooltip:y("lyrLeftSelect_tooltip"),lyrRightSelect_tooltip:y("lyrRightSelect_tooltip")}}};return this.template=M.template.compileSync(se(),r),this.setEventsAndValues(),this.updateControls(),this.layers.length-1==0?M.dialog.error(y("no_layers_plugin")):(this.activateCurtain(),this.template.querySelectorAll('button[id^="m-lyrcompare-"]').forEach((function(e,r){e.addEventListener("click",(function(r){var n=t.map_.getWMS().length+t.map_.getWMTS().length-1;t.changeSpanText(r.target.id),n<3&&"multicurtain"===e.value?M.toast.error(y("exception.fourLayers"),null,6e3):("void"===e.value&&(t.comparisonMode=0),"vcurtain"===e.value&&(t.comparisonMode=1),"hcurtain"===e.value&&(t.comparisonMode=2),"multicurtain"===e.value&&(t.activeDefault(),t.activateEffectCurtain(),t.comparisonMode=3),t.updateControls(),t.getImpl().setComparisonMode(t.comparisonMode),t.setVisibleLayers_())}))}))),e(this.template)}},{key:"setEventsAndValues",value:function(){var e=this;this.template.querySelector("#input-transparent-opacity").value=this.opacityVal,this.template.querySelector("#input-transparent-opacity").addEventListener("input",(function(t){e.opacityVal=Number(t.target.value),e.getImpl().setOpacity(e.opacityVal)})),1===this.staticDivision?this.template.querySelector("#div-m-lyrcompare-transparent-static").checked=!0:0===this.staticDivision?this.template.querySelector("#div-m-lyrcompare-transparent-dynamic").checked=!0:this.template.querySelector("#div-m-lyrcompare-transparent-mixed").checked=!0,this.template.querySelector("#div-m-lyrcompare-transparent-dynamic").addEventListener("change",(function(t){e.staticDivision=Number(t.target.value),e.getImpl().removeInteraction(),e.getImpl().setStaticDivision(e.staticDivision)})),this.template.querySelector("#div-m-lyrcompare-transparent-static").addEventListener("change",(function(t){e.staticDivision=Number(t.target.value),e.getImpl().setStaticDivision(e.staticDivision)})),this.template.querySelector("#div-m-lyrcompare-transparent-mixed").addEventListener("change",(function(t){e.staticDivision=Number(t.target.value),e.getImpl().setStaticDivision(e.staticDivision)})),this.template.querySelectorAll('select[id^="m-lyrcompare-"]').forEach((function(t){t.addEventListener("change",(function(r){var n=r.target.options;Array.from(n).forEach((function(e){return e.removeAttribute("selected")})),r.target.selectedOptions[0].setAttribute("selected","");var a=e.layers.filter((function(t){if(t.name===r.target.value){var n=e.map_.getLayers().filter((function(e){return e.name===t.name}));return n.length>0&&e.map_.removeLayers(n[0]),e.map_.addLayers(t),t}})),o=[];if("m-lyrcompare-lyrA"===t.id?o=[a[0].name,e.layerSelectedB.name,e.layerSelectedC?e.layerSelectedC.name:void 0,e.layerSelectedD?e.layerSelectedD.name:void 0]:"m-lyrcompare-lyrB"===t.id?o=[e.layerSelectedA.name,a[0].name,e.layerSelectedC?e.layerSelectedC.name:void 0,e.layerSelectedD?e.layerSelectedD.name:void 0]:"m-lyrcompare-lyrC"===t.id?o=[e.layerSelectedA.name,e.layerSelectedB.name,a[0].name,e.layerSelectedD?e.layerSelectedD.name:void 0]:"m-lyrcompare-lyrD"===t.id&&(o=[e.layerSelectedA.name,e.layerSelectedB.name,e.layerSelectedC?e.layerSelectedC.name:void 0,a[0].name]),!1===e.checkLayersAreDifferent.apply(e,ue(o)))return M.toast.error(y("advice_sameLayer"),null,6e3),"m-lyrcompare-lyrA"===t.id?e.template.querySelector("#".concat(t.id)).value=e.layerSelectedA.name:"m-lyrcompare-lyrB"===t.id?e.template.querySelector("#".concat(t.id)).value=e.layerSelectedB.name:"m-lyrcompare-lyrC"===t.id?e.template.querySelector("#".concat(t.id)).value=e.layerSelectedC.name:"m-lyrcompare-lyrD"===t.id&&(e.template.querySelector("#".concat(t.id)).value=e.layerSelectedD.name),!1;"m-lyrcompare-lyrA"===t.id?(e.layerSelectedC&&a[0].name===e.layerSelectedC.name&&(e.layerSelectedC.setVisible(!1),e.layerSelectedC=e.layerSelectedA,e.template.querySelector("#m-lyrcompare-lyrC").value=e.layerSelectedA.name),e.layerSelectedD&&a[0].name===e.layerSelectedD.name&&(e.layerSelectedD.setVisible(!1),e.layerSelectedD=e.layerSelectedA,e.template.querySelector("#m-lyrcompare-lyrD").value=e.layerSelectedA.name)):"m-lyrcompare-lyrB"===t.id&&(e.layerSelectedC&&a[0].name===e.layerSelectedC.name&&(e.layerSelectedC.setVisible(!1),e.layerSelectedC=e.layerSelectedB,e.template.querySelector("#m-lyrcompare-lyrC").value=e.layerSelectedB.name),e.layerSelectedD&&a[0].name===e.layerSelectedD.name&&(e.layerSelectedD.setVisible(!1),e.layerSelectedD=e.layerSelectedB,e.template.querySelector("#m-lyrcompare-lyrD").value=e.layerSelectedB.name)),"m-lyrcompare-lyrA"===t.id?(e.layerSelectedA.setVisible(!1),e.layerSelectedA=a[0]):"m-lyrcompare-lyrB"===t.id?(e.layerSelectedB.setVisible(!1),e.layerSelectedB=a[0]):"m-lyrcompare-lyrC"===t.id?(e.layerSelectedC&&e.layerSelectedC.setVisible(!1),e.layerSelectedC=a[0]):"m-lyrcompare-lyrD"===t.id&&(e.layerSelectedD&&e.layerSelectedD.setVisible(!1),e.layerSelectedD=a[0]),e.activateEffectCurtain()}))}))}},{key:"activateEffectCurtain",value:function(){var e=this;setTimeout((function(){e.removeEffectsComparison(),e.getImpl().effectSelectedCurtain(e.layerSelectedA,e.layerSelectedB,e.layerSelectedC,e.layerSelectedD,e.opacityVal,e.staticDivision,e.comparisonMode),e.updateControls()}),1e3)}},{key:"setVisibleLayers_",value:function(){0===this.comparisonMode&&(this.layerSelectedA.setVisible(!1),this.layerSelectedB.setVisible(!1),null!==this.layerSelectedC&&null!==this.layerSelectedD&&(this.layerSelectedC.setVisible(!1),this.layerSelectedD.setVisible(!1))),1!==this.comparisonMode&&2!==this.comparisonMode||(this.layerSelectedA.setVisible(!0),this.layerSelectedB.setVisible(!0),null!==this.layerSelectedC&&null!==this.layerSelectedD&&(this.layerSelectedC.setVisible(!1),this.layerSelectedD.setVisible(!1)))}},{key:"checkLayersAreDifferent",value:function(e,t,r,n){var a=!0;if(1===this.comparisonMode||2===this.comparisonMode)a=e!==t;else{var o=[e,t,r,n];a=ue(new Set(o)).length===o.length}return a}},{key:"activateCurtain",value:function(){this.activeDefault(),this.activateEffectCurtain()}},{key:"activeDefault",value:function(){var e=this;if(null===this.layerSelectedA&&this.layers.length>=1){this.layerSelectedA=this.layers[this.defaultLyrA];var t=this.template.querySelector("#m-lyrcompare-lyrA");if(t.selectedIndex=this.defaultLyrA,!t.options[this.defaultLyrA])return M.dialog.error("Error layerSelectedA","lyrcompare"),void this.deactiveByError_();t.options[this.defaultLyrA].setAttribute("selected",""),this.map_.getLayers().some((function(t){return t.name===e.layerSelectedA.name}))&&this.map_.addLayers(this.layerSelectedA)}if(null===this.layerSelectedB&&this.layers.length>=2){this.layerSelectedB=this.layers[this.defaultLyrB];var r=this.template.querySelector("#m-lyrcompare-lyrB");if(r.selectedIndex=this.defaultLyrB,r.options[this.defaultLyrB].setAttribute("selected",""),!r.options[this.defaultLyrB])return M.dialog.error("Error layerSelectedB","lyrcompare"),void this.deactiveByError_();r.options[this.defaultLyrB].setAttribute("selected",""),this.map_.getLayers().some((function(t){return t.name===e.layerSelectedB.name}))&&this.map_.addLayers(this.layerSelectedB)}if(null===this.layerSelectedC&&this.layers.length>=3){this.layerSelectedC=this.layers[this.defaultLyrC];var n=this.template.querySelector("#m-lyrcompare-lyrC");if(n.selectedIndex=this.defaultLyrC,n.options[this.defaultLyrC].setAttribute("selected",""),!n.options[this.defaultLyrC])return M.dialog.error("Error layerSelectedC","lyrcompare"),void this.deactiveByError_();n.selectedIndex=this.defaultLyrC,n.options[this.defaultLyrC].setAttribute("selected",""),this.map_.getLayers().some((function(t){return t.name===e.layerSelectedC.name}))&&this.map_.addLayers(this.layerSelectedC)}if(null===this.layerSelectedD&&this.layers.length>=4){this.layerSelectedD=this.layers[this.defaultLyrD];var a=this.template.querySelector("#m-lyrcompare-lyrD");if(a.selectedIndex=this.defaultLyrD,a.options[this.defaultLyrD].setAttribute("selected",""),!a.options[this.defaultLyrD])return M.dialog.error("Error layerSelectedD","lyrcompare"),void this.deactiveByError_();a.options[this.defaultLyrD].setAttribute("selected",""),this.map_.getLayers().some((function(t){return t.name===e.layerSelectedD.name}))&&this.map_.addLayers(this.layerSelectedD)}}},{key:"deactivateCurtain",value:function(){var e=document.querySelector(".lyrcompare-swipe-control");e&&(e.classList.display="none !important"),this.comparisonMode=0,null!==this.layerSelectedA&&null!==this.layerSelectedB&&(this.layerSelectedA.setVisible(!1),this.layerSelectedB.setVisible(!1)),null!==this.layerSelectedC&&null!==this.layerSelectedD&&void 0!==this.layerSelectedC&&void 0!==this.layerSelectedD&&(this.layerSelectedC.setVisible(!1),this.layerSelectedD.setVisible(!1)),this.removeEffectsComparison(),this.updateControls()}},{key:"removeEffectsComparison",value:function(){this.getImpl().removeEffectsCurtain()}},{key:"manageLyrAvailable",value:function(e){null!==this.template&&(this.updateLyrsAvailables(e,"A"),this.updateLyrsAvailables(e,"B"),this.updateLyrsAvailables(e,"C"),this.updateLyrsAvailables(e,"D"))}},{key:"updateLyrsAvailables",value:function(e,t){try{var r=null;r=this.template.querySelector("#m-lyrcompare-lyr".concat(t));for(var n=1;n<r.options.length;n++)r.options[n].disabled=!e.includes(r.options[n].value)}catch(e){console.log(e)}}},{key:"updateControls",value:function(){this.removeActivate(),this.activateByMode();var e=document.querySelector(".lyrcompare-swipe-control");if(0===this.comparisonMode)return this.template.querySelectorAll('select[id^="m-lyrcompare-"]').forEach((function(e){e.disabled=!0})),this.template.querySelector("input").disabled=!0,this.template.querySelector("#div-m-lyrcompare-transparent-dynamic").disabled=!0,this.template.querySelector("#div-m-lyrcompare-transparent-static").disabled=!0,void(this.template.querySelector("#div-m-lyrcompare-transparent-mixed").disabled=!0);1===this.comparisonMode?(e&&(e.style.opacity="1"),this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList.add("cp-columns-2"),this.template.querySelector("#m-lyrcompare-lyrB-lbl").classList.add("cp-columns-1"),this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrA").disabled=!1,this.template.querySelector("#m-lyrcompare-lyrB").disabled=!1):2===this.comparisonMode?(e&&(e.style.opacity="1"),this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList.add("cp-columns-4"),this.template.querySelector("#m-lyrcompare-lyrB-lbl").classList.add("cp-columns-3"),this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrA").disabled=!1,this.template.querySelector("#m-lyrcompare-lyrB").disabled=!1):3===this.comparisonMode&&(e&&(e.style.opacity="1"),this.template.querySelectorAll('select[id^="m-lyrcompare-"]').forEach((function(e){e.disabled=!1})),this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList.add("cp-th-large-1"),this.template.querySelector("#m-lyrcompare-lyrB-lbl").classList.add("cp-th-large-2"),this.template.querySelector("#m-lyrcompare-lyrC-lbl").classList.add("cp-th-large-3"),this.template.querySelector("#m-lyrcompare-lyrD-lbl").classList.add("cp-th-large-4"),this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrC-cont").style.display="block",this.template.querySelector("#m-lyrcompare-lyrD-cont").style.display="block"),this.template.querySelector("input").disabled=!1,this.template.querySelector("#div-m-lyrcompare-transparent-dynamic").disabled=!1,this.template.querySelector("#div-m-lyrcompare-transparent-static").disabled=!1,this.template.querySelector("#div-m-lyrcompare-transparent-mixed").disabled=!1}},{key:"activateByMode",value:function(){0===this.comparisonMode?this.template.querySelector("#m-lyrcompare-void").classList.add("buttom-pressed"):1===this.comparisonMode?this.template.querySelector("#m-lyrcompare-vcurtain").classList.add("buttom-pressed"):2===this.comparisonMode?this.template.querySelector("#m-lyrcompare-hcurtain").classList.add("buttom-pressed"):3===this.comparisonMode&&this.template.querySelector("#m-lyrcompare-multicurtain").classList.add("buttom-pressed")}},{key:"removeActivate",value:function(){this.template.querySelector(".buttom-pressed")&&this.template.querySelector(".buttom-pressed").classList.remove("buttom-pressed"),this.template.querySelectorAll('select[id^="m-lyrcompare-"]').disabled=!0,this.template.querySelector("#m-lyrcompare-lyrA-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrB-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrC-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrD-cont").style.display="none",this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList.remove("cp-th-large-1","cp-columns-2"),this.template.querySelector("#m-lyrcompare-lyrA-lbl").classList.remove("cp-th-large-2","cp-columns-3");var e=document.querySelector(".lyrcompare-swipe-control");e&&(e.style.opacity="0")}},{key:"removeCurtainLayers",value:function(e){var t=this;e.forEach((function(e){if(e instanceof Object){if(e instanceof Object){var r=t.map_.getLayers().filter((function(t){return e.name.includes(t.name)}))[t.map_.getLayers().filter((function(t){return e.name.includes(t.name)})).length-1];t.map_.removeLayers(r)}}else if(e.indexOf("*")>=0){var n=e.split("*")[3],a=t.map_.getLayers().filter((function(e){return n.includes(e.name)}))[t.map_.getLayers().filter((function(e){return n.includes(e.name)})).length-1];t.map_.removeLayers(a)}else{var o=t.map_.getLayers().filter((function(t){return e.includes(t.name)}))[t.map_.getLayers().filter((function(t){return e.includes(t.name)})).length-1];t.map_.removeLayers(o)}}))}},{key:"isValidLayer",value:function(e){return"WMTS"===e.type||"WMS"===e.type}},{key:"equals",value:function(e){return e instanceof o}},{key:"getLayersNames",value:function(){return this.layers.map((function(e){return e.name}))}},{key:"addlayersControl",value:function(e){this.layers.push(e)}}])&&ye(t.prototype,r),n&&ye(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}();function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==be(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===be(o)?o:String(o)),n)}var a,o}function Se(){return Se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Le(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},Se.apply(this,arguments)}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Le(e);if(t){var a=Le(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}var Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(o,ol.interaction.Pointer);var t,r,n,a=we(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).layers_=[],t.handleDownEvent=t.setPosition,t.handleMoveEvent=t.setPosition;var r=e||{};t.freeze=r.freeze,t.pos=r.freezeInPosition,t.radius=r.radius||100,t.OLVersion="OL6";var n=[r.layers].map((function(e){return e.getImpl().getOL3Layer()})).filter((function(e){return null!=e}));return t.addLayer(n),t}return t=o,(r=[{key:"setMap",value:function(e){var t;if(this.getMap()){for(t=0;t<this.layers_.length;t+=1)"OL6"===this.OLVersion?(this.layers_[t].prerender&&ol.Observable.unByKey(this.layers_[t].prerender),this.layers_[t].postrender&&ol.Observable.unByKey(this.layers_[t].postrender),this.layers_[t].prerender=this.layers_[t].postcompose=null):(this.layers_[t].precompose&&ol.Observable.unByKey(this.layers_[t].precompose),this.layers_[t].postcompose&&ol.Observable.unByKey(this.layers_[t].postcompose),this.layers_[t].precompose=this.layers_[t].postcompose=null);this.getMap().renderSync()}if(ol.interaction.Pointer.prototype.setMap.call(this,e),e){for(t=0;t<this.layers_.length;t+=1)"OL6"===this.OLVersion?(this.layers_[t].prerender=this.layers_[t].on("prerender",this.precompose_.bind(this)),this.layers_[t].postrender=this.layers_[t].on("postrender",this.postcompose_.bind(this))):(this.layers_[t].precompose=this.layers_[t].on("precompose",this.precompose_.bind(this)),this.layers_[t].postcompose=this.layers_[t].on("postcompose",this.postcompose_.bind(this)));e.renderSync()}}},{key:"setRadius",value:function(e){this.radius=e,this.getMap()&&this.getMap().renderSync()}},{key:"setFreeze",value:function(e){this.freeze=e,this.getMap()&&this.getMap().renderSync()}},{key:"toogleFreeze",value:function(){this.freeze=!this.freeze,this.getMap()&&this.getMap().renderSync()}},{key:"addLayer",value:function(e){e instanceof Array||(e=[e]);for(var t=0;t<e.length;t+=1){var r={layer:e[t]};this.getMap()&&(r.prerender=e[t].on("prerender",this.precompose_.bind(this)),r.postrender=e[t].on("postrender",this.postcompose_.bind(this)),this.getMap().renderSync()),this.layers_.push(e[t])}}},{key:"removeLayer",value:function(e){e instanceof Array||(e=[e]);for(var t=0;t<e.length;t+=1){var r=void 0;for(r=0;r<this.layers_.length&&this.layers_[r]!==e[t];r+=1);r!==this.layers_.length&&this.getMap()&&(this.layers_[r].precompose&&ol.Observable.unByKey(this.layers_[r].precompose),this.layers_[r].postcompose&&ol.Observable.unByKey(this.layers_[r].postcompose),this.layers_.splice(r,1),this.getMap().renderSync())}}},{key:"setPosition",value:function(e){e.pixel?!1===this.freeze&&(this.pos=e.pixel):e&&e instanceof Array?this.pos=e:e=[-1e7,-1e7],this.getMap()&&this.getMap().renderSync()}},{key:"precompose_",value:function(e){var t=e.context;t.save(),t.beginPath(),t.arc(this.pos[0],this.pos[1],this.radius,0,2*Math.PI),t.lineWidth=3,this.freeze?t.strokeStyle="rgba(255,0,0,0.7)":t.strokeStyle="rgba(0,0,0,0.5)",t.stroke(),t.clip()}},{key:"postcompose_",value:function(e){e.context.restore()}},{key:"setActive",value:function(e){Se(Le(o.prototype),"setActive",this).call(this,e)}}])&&ge(t.prototype,r),n&&ge(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}();function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==Ce(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===Ce(o)?o:String(o)),n)}var a,o}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ae(e);if(t){var a=Ae(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}var Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(o,M.impl.Control);var t,r,n,a=Oe(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.apply(this,arguments)}return t=o,(r=[{key:"addTo",value:function(e,t){this.map=e,this.olMap=e.getMapImpl(),this.freezePosition=!1}},{key:"effectSelected",value:function(e,t,r){e.setVisible(!0),this.transparentInteraction_=new Me({radius:t,freeze:r,freezeInPosition:this.freezePosition,layers:e}),this.olMap.addInteraction(this.transparentInteraction_)}},{key:"setRadius",value:function(e){void 0!==this.transparentInteraction_&&this.transparentInteraction_.setRadius(e)}},{key:"setFreeze",value:function(e){this.freezePosition=this.transparentInteraction_.pos,void 0!==this.transparentInteraction_&&this.transparentInteraction_.setFreeze(e)}},{key:"toogleFreeze",value:function(){this.freezePosition=this.transparentInteraction_.pos,void 0!==this.transparentInteraction_&&this.transparentInteraction_.toogleFreeze()}},{key:"addLayer",value:function(e){this.transparentInteraction_.addLayer(e)}},{key:"removeEffects",value:function(){this.olMap.removeInteraction(this.transparentInteraction_)}},{key:"removeLayer",value:function(e){this.transparentInteraction_.removeLayer(e.getImpl().getOL3Layer())}}])&&Pe(t.prototype,r),n&&Pe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(),je=r(141),Te=r.n(je);function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==ke(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===ke(o)?o:String(o)),n)}var a,o}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ze(e);if(t){var a=ze(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function ze(e){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ze(e)}var Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(o,M.Control);var t,r,n,a=Re(o);function o(e,t,r,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),M.utils.isUndefined(Ee)&&M.exception(y("exception"));var l=new Ee;return i=a.call(this,l,"Transparency"),l.addTo(r),i.name_="transparency",i.map_=r,i.enabledKeyFunctions=e.enabledKeyFunctions,void 0===i.enabledKeyFunctions&&(i.enabledKeyFunctions=!0),i.layers=k(t),i.maxRadius=e.maxRadius,void 0===i.maxRadius&&(i.maxRadius=200),i.maxRadius>200?i.maxRadius=200:i.maxRadius<30&&(i.maxRadius=30),i.minRadius=e.minRadius,void 0===i.minRadius&&(i.minRadius=30),i.minRadius<30?i.minRadius=30:i.minRadius>i.maxRadius&&(i.minRadius=i.maxRadius),isNaN(parseInt(e.radius))?i.radius=100:e.radius>=30&&e.radius<=200?i.radius=parseInt(e.radius):e.radius>200?i.radius=200:e.radius<30&&(i.radius=30),i.layerSelected=null,i.freeze=!1,i.template=null,i.freezeSpyEye=!1,i.fatherControl=n,i}return t=o,(r=[{key:"active",value:function(e){var t=this;new Promise((function(e,r){var n=t.layers.map((function(e){return e instanceof Object?{name:e.name,legend:e.legend}:{name:e,legend:e}})),a={jsonp:!0,vars:{translations:{transparency:y("transparency"),radius:y("radius"),layers:y("layers"),freeze:y("freeze"),unfreeze:y("unfreeze"),activate_spyeye:y("activate_spyeye"),deactivate_spyeye:y("deactivate_spyeye"),inputTransparentRadius:y("inputTransparentRadius"),selectTransparentRadius:y("selectTransparentRadius")}}};n.length>=1&&(a.vars.options=n),t.template=M.template.compileSync(Te(),a);var o=t.template.querySelector("#input-transparent-radius");o.value=t.radius,o.min=t.minRadius,o.max=t.maxRadius,t.template.querySelector("#input-transparent-radius").addEventListener("change",(function(e){t.radius=Number(e.target.value),t.getImpl().setRadius(t.radius)})),t.template.querySelector("#m-transparency-lock").addEventListener("click",(function(e){M.dialog.info("Mueva el cursor a la zona deseada y pulse Ctrl+Shift+Enter para congelar")})),t.template.querySelector("#m-transparency-unlock").addEventListener("click",(function(e){t.freeze=!t.freeze,t.getImpl().setFreeze(t.freeze),t.template.querySelector("#m-transparency-lock").style.visibility="visible",t.template.querySelector("#m-transparency-unlock").style.visibility="hidden"})),0===t.layers.length||""===t.layers?M.toast.error(y("exception.notLayers"),null,6e3):""!==a&&(t.template.querySelector("#m-transparency-lock").style.visibility="hidden",t.template.querySelector("#m-transparency-unlock").style.visibility="hidden",t.template.querySelector("select").addEventListener("change",(function(e){var r=e.target.options;Array.from(r).forEach((function(e){return e.removeAttribute("selected")})),e.target.selectedOptions[0].setAttribute("selected",""),t.layerSelected.setVisible(!1),t.removeEffects();var n=t.layers.filter((function(r){if(r.name===e.target.value){var n=t.map_.getLayers().filter((function(e){return e.name===r.name}));return n.length>0&&t.map_.removeLayers(n[0]),t.map_.addLayers(r),r}}));t.layerSelected=n[0],setTimeout((function(){t.getImpl().effectSelected(t.layerSelected,t.radius,t.freeze)}),1e3)}))),e(t.template)})).then((function(t){e.querySelector("#m-comparators-contents").appendChild(t)})),document.addEventListener("keydown",(function(e){if(t.enabledKeyFunctions){if(e.ctrlKey&&e.shiftKey&&"ArrowUp"===e.key){if(t.radius>=200)return;t.radius+=20,t.getImpl().setRadius(t.radius),t.template.querySelector("#input-transparent-radius").value=t.radius}if(e.ctrlKey&&e.shiftKey&&"ArrowDown"===e.key){if(t.radius<=32)return;t.radius-=20,t.getImpl().setRadius(t.radius),t.template.querySelector("#input-transparent-radius").value=t.radius}e.ctrlKey&&e.shiftKey&&"Enter"===e.key&&(t.freeze=!t.freeze,t.getImpl().setFreeze(t.freeze),t.freeze?(t.template.querySelector("#m-transparency-lock").style.visibility="hidden",t.template.querySelector("#m-transparency-unlock").style.visibility="visible"):(t.template.querySelector("#m-transparency-lock").style.visibility="visible",t.template.querySelector("#m-transparency-unlock").style.visibility="hidden"))}})),this.evtActive_()}},{key:"evtActive_",value:function(){document.querySelector("#m-lyrdropdown-selector")&&(document.querySelector("#m-lyrdropdown-selector").value="none",document.querySelector("#m-lyrdropdown-selector").style.display="none"),this.template.querySelector("#m-transparency-lock").style.visibility="visible",this.template.querySelector("#m-transparency-unlock").style.visibility="hidden",this.activate()}},{key:"setDefaultLayer",value:function(){console.log("Activación remota")}},{key:"removeLayers_",value:function(){var e=this,t=[];this.map_.getLayers().forEach((function(r){e.layers.some((function(e){return e.name===r.name}))&&t.push(r)})),t.forEach((function(t){e.fatherControl.saveLayers.includes(t.name)||e.map_.removeLayers(t)}))}},{key:"activate",value:function(){var e=this;if(null===this.layerSelected){this.layerSelected=this.layers[0];var t=this.map_.getLayers().filter((function(t){return t.name===e.layerSelected.name}));t.length>0?this.layerSelected=t[0]:this.map_.addLayers(this.layerSelected)}this.effectSelectedImpl_()}},{key:"deactivate",value:function(){null===this.layerSelected&&(this.layerSelected=this.layers[0]),this.removeEffects(),this.template&&this.template.remove(),this.layerSelected=null}},{key:"updateNewLayers",value:function(){this.removeEffects(),this.template&&this.template.remove(),this.layerSelected=null}},{key:"addlayersControl",value:function(e){this.layers.push(e)}},{key:"destroy",value:function(){this.removeEffects(),this.name_=null,this.map_=null,this.enabledKeyFunctions=null,this.layers=null,this.maxRadius=null,this.minRadius=null,this.radius=null,this.layerSelected=null,this.freeze=null,this.freezeSpyEye=null,this.template=null}},{key:"removeEffects",value:function(){this.getImpl().removeEffects()}},{key:"removeTransparencyLayers",value:function(e){var t=this;e.forEach((function(e){if(e instanceof Object){if(e instanceof Object){var r=t.map_.getLayers().filter((function(t){return e.name.includes(t.name)}))[0];t.map_.removeLayers(r)}}else if(e.indexOf("*")>=0){var n=e.split("*")[3],a=t.map_.getLayers().filter((function(e){return n.includes(e.name)}))[0];t.map_.removeLayers(a)}else{var o=t.map_.getLayers().filter((function(t){return e.includes(t.name)}))[0];t.map_.removeLayers(o)}}))}},{key:"isValidLayer",value:function(e){return"WMTS"===e.type||"WMS"===e.type}},{key:"equals",value:function(e){return e instanceof o}},{key:"getLayersNames",value:function(){return this.layers.map((function(e){return e.name}))}}])&&De(t.prototype,r),n&&De(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(),Ve=r(325),qe=r.n(Ve);function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==We(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==We(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===We(o)?o:String(o)),n)}var a,o}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ue(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ge(e);if(t){var a=Ge(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Ge(e){return Ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ge(e)}var Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(o,M.impl.Control);var t,r,n,a=Fe(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.apply(this,arguments)}return t=o,r=[{key:"addTo",value:function(e){}},{key:"handleMoveMap",value:function(e){var t=this;this.maps=e,this.fnEventMaps=this.addEventListeners.bind(this),e.forEach((function(e){e.map.getMapImpl().on(["moveend","rotateend"],t.fnEventMaps)}))}},{key:"removeEventListeners",value:function(e){var t=this;this.fnEventMaps&&(e.forEach((function(e){e.map.getMapImpl().un(["moveend","rotateend"],t.fnEventMaps)})),this.fnEventMaps=null)}},{key:"evtChangeMaps",value:function(e,t){var r=t.getMapImpl(),n=e.getView(),a=n.getCenter(),o=n.getZoom(),i=n.getRotation();r.getView().animate({center:a,zoom:o,rotation:i,duration:100})}},{key:"addEventListeners",value:function(e){var t=this;this.maps.forEach((function(r){var n=r.map;t.evtChangeMaps(e.map,n)}))}}],r&&Ne(t.prototype,r),n&&Ne(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}();function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Ze(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Je(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==He(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===He(o)?o:String(o)),n)}var a,o}function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qe(e,t)}function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=et(e);if(t){var a=et(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===He(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $e(e)}(this,r)}}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}var tt={order:10,position:"TR",layerId:0,layerVisibility:!0,collapsed:!0,collapsible:!0,columnsNumber:4,empty:!0,layerOpts:[{id:"raster",preview:"https://www.ign.es/iberpix/static/media/raster.c7a904f3.png",title:"Mapa",layers:["WMTS*https://www.ign.es/wmts/mapa-raster*MTN*GoogleMapsCompatible*CartografíadelIGN*false*image/jpeg*false*false*true"]},{id:"imagen",preview:"https://www.ign.es/iberpix/static/media/image.44c5b451.png",title:"Imagen",layers:["TMS*Nombre*https://tms-pnoa-ma.idee.es/1.0.0/pnoa-ma/{z}/{x}/{-y}.jpeg*true*false*19*false"]},{id:"mapa",preview:"https://www.ign.es/iberpix/static/media/mapa.98d45f00.png",title:"Callejero",layers:["WMTS*https://www.ign.es/wmts/ign-base*IGNBaseTodo*GoogleMapsCompatible*Callejero*false*image/jpeg*false*false*true"]},{id:"hibrido",title:"Híbrido",preview:"https://www.ign.es/iberpix/static/media/hibrido.485e957e.png",layers:["TMS*Nombre*https://tms-pnoa-ma.idee.es/1.0.0/pnoa-ma/{z}/{x}/{-y}.jpeg*true*false*19*false","WMTS*https://www.ign.es/wmts/ign-base*IGNBaseOrto*GoogleMapsCompatible*Callejero*false*image/jpeg*false*false*true"]},{id:"lidar",preview:"https://www.ign.es/iberpix/static/media/lidar.5aa94e82.png",title:"LiDAR (Relieve)",layers:["WMTS*https://wmts-mapa-lidar.idee.es/lidar*EL.GridCoverageDSM*GoogleMapsCompatible*LiDAR*false*image/png*false*false*true"]},{id:"ocupacion-suelo",preview:"https://www.ign.es/iberpix/static/media/ocupacion_suelo.ae7c9787.png",title:"Ocupación del suelo (CORINE)",layers:["WMTS*https://servicios.idee.es/wmts/ocupacion-suelo?*LC.LandCoverSurfaces*GoogleMapsCompatible*SIOSE*false*image/jpeg*false*false*true"]},{id:"historicos",preview:"https://www.ign.es/iberpix/static/media/historicos.78c9c369.png",title:"Mapas Históricos",layers:["WMTS*https://www.ign.es/wmts/primera-edicion-mtn?*mtn50-edicion1*GoogleMapsCompatible*mtn50-edicion1*false*image/jpeg*false*false*true"]}]},rt={collapsed:!0,position:"TR",https:!0,http:!0,isDraggable:!1,modeSelectLayers:"eyes",tools:["transparency","legend","zoom","information","style","delete"],isMoveLayers:!0,showCatalog:!0,precharged:{groups:[{name:"Cartografía",services:[{name:"Mapas",type:"WMTS",url:"https://www.ign.es/wmts/mapa-raster?"},{name:"Callejero ",type:"WMTS",url:"https://www.ign.es/wmts/ign-base?"},{name:"Primera edición MTN y Minutas de 1910-1970",type:"WMTS",url:"https://www.ign.es/wmts/primera-edicion-mtn?"},{name:"Planimetrías (1870 y 1950)",type:"WMS",url:"https://www.ign.es/wms/minutas-cartograficas?"},{name:"Planos de Madrid (1622 - 1960)",type:"WMTS",url:"https://www.ign.es/wmts/planos?"},{name:"Hojas kilométricas (Madrid - 1860)",type:"WMS",url:"https://www.ign.es/wms/hojas-kilometricas?"},{name:"Cuadrículas Mapa Topográfico Nacional",type:"WMS",url:"https://www.ign.es/wms-inspire/cuadriculas?"}]},{name:"Imágenes",services:[{name:"Ortofotos máxima actualidad PNOA",type:"WMTS",url:"https://www.ign.es/wmts/pnoa-ma?"},{name:"Ortofotos históricas y PNOA anual",type:"WMS",url:"https://www.ign.es/wms/pnoa-historico?"},{name:"Ortofotos provisionales PNOA",type:"WMS",url:"https://wms-pnoa.idee.es/pnoa-provisionales?"},{name:"Mosaicos de satélite",type:"WMS",url:"https://wms-satelites-historicos.idee.es/satelites-historicos?"},{name:"Fototeca (Consulta de fotogramas históricos y PNOA)",type:"WMS",url:"https://wms-fototeca.idee.es/fototeca?"}]},{name:"Información geográfica de referencia y temática",services:[{name:"Catastro ",type:"WMS",url:"https://ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx?"},{name:"Unidades administrativas",type:"WMS",url:" https://www.ign.es/wms-inspire/unidades-administrativas?"},{name:"Nombres geográficos (Nomenclátor Geográfico Básico NGBE)",type:"WMS",url:"https://www.ign.es/wms-inspire/ngbe?"},{name:"Redes de transporte",type:"WMS",url:"https://servicios.idee.es/wms-inspire/transportes?"},{name:"Hidrografía ",type:"WMS",url:"https://servicios.idee.es/wms-inspire/hidrografia?"},{name:"Direcciones y códigos postales",type:"WMS",url:"https://www.cartociudad.es/wms-inspire/direcciones-ccpp?"},{name:"Ocupación del suelo (Corine y SIOSE)",type:"WMTS",url:"https://servicios.idee.es/wmts/ocupacion-suelo?"},{name:"Ocupación del suelo Histórico (Corine y SIOSE)",type:"WMS",url:"https://servicios.idee.es/wms-inspire/ocupacion-suelo-historico?"},{name:"Copernicus Land Monitoring Service",type:"WMS",url:"https://servicios.idee.es/wms/copernicus-landservice-spain?"},{name:"Información sísmica (terremotos)",type:"WMS",url:"https://www.ign.es/wms-inspire/geofisica?"},{name:"Red de vigilancia volcánica",type:"WMS",url:"https://wms-volcanologia.ign.es/volcanologia?"},{name:"Redes geodésicas",type:"WMS",url:"https://www.ign.es/wms-inspire/redes-geodesicas?"}]},{name:"Modelos digitales de elevaciones",services:[{name:"Modelo Digital de Superficies (Sombreado superficies y consulta de elevaciones edificios y vegetación)",type:"WMTS",url:"https://wmts-mapa-lidar.idee.es/lidar?"},{name:"Modelo Digital del Terreno (Sombreado terreno y consulta de altitudes)",type:"WMTS",url:"https://servicios.idee.es/wmts/mdt?"},{name:"Curvas de nivel y puntos acotados",type:"WMS",url:"https://servicios.idee.es/wms-inspire/mdt?",white_list:["EL.ContourLine","EL.SpotElevation"]}]}]},order:12},nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}(o,M.Control);var t,r,n,a=Xe(o);function o(e,t,r){var n,i=e.controls,l=e.plugins,s=void 0===l?[]:l;e.layersPlugin;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),M.utils.isUndefined(Ke)&&M.exception(y("exception"));var c=new Ke;return(n=a.call(this,c,"WindowSync")).implControl_=c,n.name_="WindowSyncControl",n.map_=r,n.plugins=[{name:"Layerswitcher",params:rt},{name:"BackImgLayer",params:tt}],s.forEach((function(e){"Layerswitcher"!==e.name&&"BackImgLayer"!==e.name&&n.plugins.push(e)})),n.controls=i,n.mapsWindows_=[{id:"base",map:r}],n.implControl_.maps=n.mapsWindows_,n.layers=t,n.pluginScript=n.getScriptAndLink("script"),n.linksStyle=n.getScriptAndLink("link"),n.activate=n.activate.bind($e(n)),n.closeWindows=n.closeWindows.bind($e(n)),n}return t=o,(r=[{key:"active",value:function(e){var t=this;new Promise((function(e,r){var n={jsonp:!0,vars:{translations:{closeAll:y("closeAll"),openWindow:y("openWindow")}}};t.template=M.template.compileSync(qe(),n),e(t.template)})).then((function(r){e.querySelector("#m-comparators-contents").appendChild(r);var n=r.querySelector("#new_windowsync"),a=r.querySelector("#deleteAll_windowsync");n&&n.addEventListener("click",t.activate),a&&a.addEventListener("click",t.closeWindows)})),this.map_.addLayers(this.layers),this.map_.getLayers().forEach((function(e){return!e.isBase&&e.setVisible(!1)}))}},{key:"activate",value:function(){var e=this,t=window.open("".concat(window.location.href),"_blank","width=800,height=800");this.generateNewMap(t);var r=setInterval((function(){void 0!==t.NEW_API_MAP&&(e.addEventMap(t),clearInterval(r))}),500)}},{key:"addEventMap",value:function(e){var t=this,r=e,n=Math.floor(9e3*Math.random())+1e3,a="map_".concat(n);r.ID_MAP=a,this.mapsWindows_.push({id:a,map:r.NEW_API_MAP,window:r}),this.handerCloseWindow(r,a),r.NEW_API_MAP.on(M.evt.COMPLETED,(function(){t.implControl_.removeEventListeners(t.mapsWindows_),t.implControl_.handleMoveMap(t.mapsWindows_)}))}},{key:"handerCloseWindow",value:function(e,t){var r=this,n=setInterval((function(){if(e.closed){clearInterval(n);var a=r.mapsWindows_.findIndex((function(e){return e.id===t}));r.mapsWindows_.splice(a,1)}}),1e3)}},{key:"generateNewMap",value:function(e){var t,r=this.map_.getCenter(),n=JSON.stringify([r.x,r.y]),a="".concat(this.map_.getProjection().code,"*").concat(this.map_.getProjection().units),o=this.map_.getZoom(),i=JSON.stringify(this.controls),l=this.generatePlugins()||"",s=JSON.stringify([].concat(Ze(this.layers),Ze((t=this.map_).getLayers().filter((function(e){if(!1===e.displayInLayerSwitcher)return!1;var t="__draw__"!==e.name&&"selectionLayer"!==e.name;return"attributions"===e.name&&"KML"===e.type&&(t=t&&!1),!1===e.transparent&&(t=t&&!1),t})).map((function(e){return R(e,t)})).filter((function(e){return null!=e}))))),c=JSON.stringify(function(e){return e.getBaseLayers().map((function(t){return R(t,e)})).filter((function(e){return null!=e})).reverse()}(this.map_)),p='\n       <!DOCTYPE html>\n       <html>\n       <head>\n          <meta charset="UTF-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">\n          <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n          <meta name="mapea" content="yes">\n\n           <title>Nueva Ventana</title>\n           '.concat(this.linksStyle.join(" "),'\n           <style rel="stylesheet">\n           html,\n           body {\n               margin: 0;\n               padding: 0;\n               height: 100%;\n               overflow: hidden;\n           }\n       </style>\n       </head>\n       <body>\n           <div id="map"></div>\n           ').concat(this.pluginScript.join(" "),"\n           <script>\n           const newMap = M.map({\n             container: 'map',\n             center: ").concat(n,",\n             zoom: ").concat(o,",\n             layers: ").concat(c,",\n             projection: '").concat(a,"',\n             ").concat(i?"controls:".concat(i):"","\n           });\n           ").concat(l,"\n           newMap.addLayers(").concat(s,")\n           window.NEW_API_MAP = newMap;\n           <\/script>\n       </body>\n       </html>\n       ");e.document.write(p)}},{key:"getScriptAndLink",value:function(e){var t="link"===e?"href":"src",r=Ze(document.querySelectorAll("".concat(e,"[").concat(t,'*="').concat(M.config.MAPEA_URL,'"]')));return 0===r.length&&(r=this.getAPIRestScriptAndLink(e,t)),r.map((function(e){return e.outerHTML}))}},{key:"getAPIRestScriptAndLink",value:function(e,t){return"script"===e?[].concat(Ze(document.querySelectorAll("".concat(e,"[").concat(t,'*=".ol.min"]'))),[document.querySelector('script[src="js/configuration.js"]')]):Ze(document.querySelectorAll("".concat(e,"[").concat(t,'*=".ol.min"]')))}},{key:"pluginScriptAndLinkAPI",value:function(e,t,r){e||this.linksStyle.push('<link type="text/css" rel="stylesheet" href="plugins/'.concat(r,"/").concat(r,'.ol.min.css">')),t||this.pluginScript.push('<script type="text/javascript" src="plugins/'.concat(r,"/").concat(r,'.ol.min.js"><\/script>'))}},{key:"generatePlugins",value:function(){var e=this;return void 0===this.plugins?"":this.plugins.map((function(t){var r=t.name,n=t.params,a=void 0===n?{}:n;e.handlePluginScrips(r);try{return"newMap.addPlugin(new M.plugin.".concat(r,"(").concat(JSON.stringify(a),"));")}catch(e){return function(e,t){e.message.includes("Converting circular structure to JSON")&&("Timeline"===t||"BackImgLayer"===t?M.toast.error("".concat(y("exception.errorPlugin")," ").concat(t," - ").concat(y("exception.errorObjectLayer")),null,6e3):t?M.toast.error("".concat(y("exception.errorPlugin")," ").concat(t),null,6e3):M.toast.error(y("exception.errorPlugin"),null,6e3),console.error("Converting circular structure to JSON"))}(e,r),""}}),this).join(" ")}},{key:"closeWindows",value:function(){this.mapsWindows_.forEach((function(e,t){var r=e.window;0!==t&&r.close()})),this.implControl_.removeEventListeners(this.mapsWindows_)}},{key:"handlePluginScrips",value:function(e){var t=this.getScriptAndLink("link").some((function(t){return t.includes("".concat(e.toLowerCase(),".ol.min.css"))})),r=this.getScriptAndLink("script").some((function(t){return t.includes("".concat(e.toLowerCase(),".ol.min.js"))})),n=window.location.href;n.includes("comparators")&&n.includes(M.config.MAPEA_URL)?this.pluginScriptAndLinkAPI(t,r,e.toLowerCase()):function(e,t,r){!e&&r&&(M.toast.error("".concat(y("exception.errorLinkUrl")," ").concat(r),null,6e3),console.error("".concat(y("exception.errorLinkUrl")," ").concat(r))),!t&&r&&(M.toast.error("".concat(y("exception.errorScriptUrl")," ").concat(r),null,6e3),console.error("".concat(y("exception.errorScriptUrl")," ").concat(r))),r||t||e||(M.toast.error(y("exception.errorScriptOrLinkUrl"),null,6e3),console.error(y("exception.errorScriptOrLinkUrl")))}(t,r,e)}},{key:"deactivate",value:function(){null===this.layerSelected&&(this.layerSelected=this.layers[0]),this.template&&this.template.remove(),this.layerSelected=null,this.closeWindows()}},{key:"destroy",value:function(){this.name_=null,this.map_=null,this.layers=null,this.closeWindows()}},{key:"equals",value:function(e){return e instanceof o}}])&&Ye(t.prototype,r),n&&Ye(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}();function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],s=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return l}}(e,t)||lt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t,r){return ot=yt()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&ut(a,r.prototype),a},ot.apply(null,arguments)}function it(e){return function(e){if(Array.isArray(e))return st(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){if(e){if("string"==typeof e)return st(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?st(e,t):void 0}}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==ct(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===ct(o)?o:String(o)),n)}var a,o}function ut(e,t){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ut(e,t)}function dt(e){var t=yt();return function(){var r,n=mt(e);if(t){var a=mt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function yt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function mt(e){return mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mt(e)}var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}(i,M.Control);var r,n,a,o=dt(i);function i(e,t,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(c)&&M.exception(y("exception.impl"));var a=new c;return(n=o.call(this,a,"Comparators")).isDraggable_=e||!1,n.order=t,n.options=r,n.options.listLayers||(n.options.listLayers=["WMS*Huellas Sentinel2*https://wms-satelites-historicos.idee.es/satelites-historicos*teselas_sentinel2_espanna*true","WMS*Invierno 2022 falso color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2022invierno_432-1184*true","WMS*Invierno 2022 falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2022invierno_843*true","WMS*Filomena*https://wms-satelites-historicos.idee.es/satelites-historicos*Filomena*true","WMS*Invierno 2021 falso color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2021invierno_432-1184*true","WMS*Invierno 2021 falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2021invierno_843*true","WMS*Verano 2021 falso color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2021verano_432-1184*true","WMS*Verano 2021 falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2021verano_843*true","WMS*Invierno 2020 falso color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2020invierno_432-1184*true","WMS*Invierno 2020 falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2020invierno_843*true","WMS*Verano 2020 falso color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2020verano_432-1184*true","WMS*Verano 2020 falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2020verano_843*true","WMS*Invierno 2019 falso color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2019invierno_432-1184*true","WMS*Invierno 2019 falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2019invierno_843*true","WMS*Verano 2019 falso color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2019verano_432-1184*true","WMS*Verano 2019 falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2019verano_843*true","WMS*Verano 2018 falso color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2018verano_432-1184*true","WMS*Verano 2018 falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*SENTINEL.2018verano_843*true","WMS*Huellas Spot5*https://wms-satelites-historicos.idee.es/satelites-historicos*HuellasSpot5_espanna*true","WMS*2014. Pseudocolor natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SPOT.2014*true","WMS*2013. Pseudocolor natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SPOT.2013*true","WMS*2012. Pseudocolor natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SPOT.2012*true","WMS*2011. Pseudocolor natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SPOT.2011*true","WMS*2009. Pseudocolor natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SPOT.2009*true","WMS*2008. Pseudocolor natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SPOT.2008*true","WMS*2005. Pseudocolor natural*https://wms-satelites-historicos.idee.es/satelites-historicos*SPOT.2005*true","WMS*Huellas Landsat8*https://wms-satelites-historicos.idee.es/satelites-historicos*Landsat_huellas_espanna*true","WMS*Landsat 8 2014. Color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT8.2014_432*true","WMS*Landsat 8 2014. Falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT8.2014_654*true","WMS*Landsat 5 TM 2006. Color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT5.2006_321-543","WMS*Landsat 5 TM 2006. Falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT5.2006_432*true","WMS*Landsat 5 TM 1996. Color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT5.1996_321-543*true","WMS*Landsat 5 TM 1996. Falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT5.1996_432*true","WMS*Landsat 5 TM 1991. Color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT5.1991_321-543*true","WMS*Landsat 5 TM 1991. Falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT5.1991_432*true","WMS*Landsat 5 TM 1986. Color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT5.1986_321-543*true","WMS*Landsat 5 TM 1986. Falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT5.1986_432*true","WMS*Landsat 1 1971-1975. Color natural*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT1_544-574*true","WMS*Landsat 1 1971-1975. Falso color infrarrojo*https://wms-satelites-historicos.idee.es/satelites-historicos*LANDSAT1_654*true","WMS*Fondo*https://wms-satelites-historicos.idee.es/satelites-historicos*fondo*true"]),n.defaultCompareMode=n.options.defaultCompareMode||!1,n.mirrorpanelParams=!!M.utils.isUndefined(n.options.mirrorpanelParams)||n.options.mirrorpanelParams,"object"===ct(n.mirrorpanelParams)&&(n.mirrorpanelParams.enabledKeyFunctions=n.options.enabledKeyFunctions||!1),n.lyrcompareParams=!!M.utils.isUndefined(n.options.lyrcompareParams)||n.options.lyrcompareParams,n.transparencyParams=!!M.utils.isUndefined(n.options.transparencyParams)||n.options.transparencyParams,"object"===ct(n.transparencyParams)&&(n.transparencyParams.enabledKeyFunctions=n.options.enabledKeyFunctions||!1),n.windowsyncParams=!!M.utils.isUndefined(n.options.windowsyncParams)||n.options.windowsyncParams,n.control=null,n.enabledDisplayInLayerSwitcher=n.options.enabledDisplayInLayerSwitcher||!1,n}return r=i,n=[{key:"createView",value:function(e){var r=this;return this.map_=e,this.layerDefault=this.map_.getLayers().filter((function(e){return 0!==e.getZIndex()&&"__draw__"!==e.name})),this.layersPlugin=[],this.listLayersString=[],this.saveLayers=[],this.addLayersEventsMap_(),this.options.listLayers&&(this.listLayersString=this.options.listLayers.map((function(e){return e instanceof Object?T(e,r.map_):e})),this.layersPlugin=this.listLayersString),!0===this.enabledDisplayInLayerSwitcher&&(this.layersPlugin=this.layersPlugin.concat(this.map_.getLayers().filter((function(e){return e.displayInLayerSwitcher&&("WMS"===e.type||"WMTS"===e.type)})).map((function(e){return T(e,r.map_)}))),this.addLayersEventsMap_(),this.removeLayersEventMap_(),this.defaultLayers_(this.layerDefault)),this.controls=[{id:"mirrorpanel",buttonsID:"mirrorpanel-btn",controlParam:[this.mirrorpanelParams,this.layersPlugin,this.map_,this.defaultCompareMode,this],controlCreate:function(e){return ot(H,it(e))},control:null,active:!1},{id:"lyrcompare",buttonsID:"lyrcompare-btn",controlParam:[this.lyrcompareParams,this.layersPlugin,this.map_,this],controlCreate:function(e){return ot(ve,it(e))},control:null,active:!1},{id:"transparency",buttonsID:"transparency-btn",controlParam:[this.transparencyParams,this.layersPlugin,this.map_,this],controlCreate:function(e){return ot(Be,it(e))},control:null,active:!1},{id:"windowsync",buttonsID:"windowsync-btn",controlParam:[this.windowsyncParams,this.layersPlugin,this.map_],controlCreate:function(e){return ot(nt,it(e))},control:null,active:!1}],new Promise((function(e,n){var a={headertitle:y("tooltip"),mirrorpanelParams_tooltip:r.mirrorpanelParams.tooltip||y("tooltipMirrorpanel"),lyrcompareParams_tooltip:r.lyrcompareParams.tooltip||y("tooltipLyr"),transparencyParams_tooltip:r.transparencyParams.tooltip||y("tooltipTransparency"),windowsyncParams_tooltip:r.windowsyncParams.tooltip||y("tooltipWindSync")};r.html=M.template.compileSync(t(),{vars:{mirrorpanelParams:r.mirrorpanelParams,lyrcompareParams:r.lyrcompareParams,transparencyParams:r.transparencyParams,windowsyncParams:r.windowsyncParams,translations:a}}),r.controls.forEach((function(e){var t=e.buttonsID;e.controlParam[0]&&(r.html.querySelector("#".concat(t)).addEventListener("click",(function(e){var t=e.target;return r.event_(t)})),r.html.querySelector("#".concat(t)).addEventListener("keydown",(function(e){"Enter"===e.key&&(e.preventDefault(),r.event_(e.target))})))})),r.isDraggable_&&M.utils.draggabillyPlugin(r.getPanel(),"#m-comparators-title"),r.accessibilityTab_(r.html),setTimeout((function(){r.defaultCompareMode_()}),500),e(r.html)}))}},{key:"event_",value:function(e){this.controls.forEach((function(t){var r=t;r.active=e.id===r.buttonsID&&!r.active})),this.eventActive_()}},{key:"eventActive_",value:function(){var e=this;this.controls.forEach((function(t){if(t.controlParam[0])if(t.active){if(e.html.querySelector("#".concat(t.buttonsID)).classList.add("activatedComparators"),"lyrcompare"===t.id&&t.controlParam[1].length<1)return M.toast.error(y("exception.notLayers"),null,6e3),void setTimeout((function(){e.map_.addLayers(e.layerDefault)}),500);"transparency"===t.id&&setTimeout((function(){e.map_.getLayers().forEach((function(e){return!e.isBase&&e.setVisible(!1)}))}),1e3),"mirrorpanel"===t.id&&e.map_.getLayers().forEach((function(e){return!e.isBase&&e.setVisible(!1)}));var r=t.controlCreate(t.controlParam);t.control=r,e.control=r,r.active(e.html)}else e.html.querySelector("#".concat(t.buttonsID)).classList.remove("activatedComparators"),t.control&&t.control.deactivate(),t.control=null}))}},{key:"defaultLayers_",value:function(){var e=this;if(!this.controls||!this.controls[0].active&&!this.controls[1].active&&!this.controls[2].active){var t=this.layerDefault;setTimeout((function(){e.map_.addLayers(t)}),500)}}},{key:"addLayersEventsMap_",value:function(){var e=this,t=this.enabledDisplayInLayerSwitcher;[M.evt.ADDED_WMTS,M.evt.ADDED_WMS].forEach((function(r){e.map_.on(r,(function(r){if(!0===t&&(e.controls[0].active&&e.addLayersEventMapMirror_(r),e.controls[1].active&&e.addNewLayerUpdate_(r,e.controls[1].control,["m-lyrcompare-lyrA","m-lyrcompare-lyrB","m-lyrcompare-lyrC","m-lyrcompare-lyrD"]),e.controls[2].active&&e.addNewLayerUpdate_(r,e.controls[2].control,["m-transparency-lyr"]),!(e.controls[0].active||e.controls[1].active||e.controls[2].active||e.controls[3].active))){var n=at(j(r,e.layersPlugin),2)[1],a=[];n.forEach((function(t){t.displayInLayerSwitcher&&t.transparent&&a.push(T(t,e.map_,!1))})),e.layersPlugin=[].concat(it(e.layersPlugin),a),e.layerDefault=[].concat(it(e.layerDefault),a),e.controls.forEach((function(e){return e.controlParam[1]=[].concat(it(e.controlParam[1]),a)}))}r.forEach((function(t){e.saveLayers.includes(t.name)||e.saveLayers.push(t.name)}))}))}))}},{key:"addZindex_",value:function(e){e&&0!==this.searchIndex_(e)&&e.setZIndex(this.searchIndex_(e))}},{key:"addLayersEventMapMirror_",value:function(){var e=this,t=at(j(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],this.layersPlugin),2),r=t[0],n=t[1];this.addZindex_(r),0!==n.length&&n.forEach((function(t,r){if(t.displayInLayerSwitcher&&t.transparent){var n=T(t,e.map_,!1);e.layersPlugin.push(n),["mapLASelect","mapLBSelect","mapLCSelect","mapLDSelect"].forEach((function(e){var r=document.querySelector("#".concat(e)),a=D(t.name).replaceAll(".","");r.innerHTML+="<option \n          ".concat("mapLASelect"===e?"disabled":"",' \n          id="').concat("l_".concat(a,"mapLASelect"===e?"_external_mapLASelect":"_external"),'" \n          class="externalLayers"\n          value="').concat(n,'">').concat(t.legend,"</option>")})),e.changeLayersEventMap_(t)}}))}},{key:"addNewLayerUpdate_",value:function(){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=at(j(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],this.layersPlugin),2),a=n[0],o=n[1];this.addZindex_(a),0!==o.length&&o.forEach((function(n,a){if(n.displayInLayerSwitcher&&n.transparent){var o=T(n,e.map_,!1);e.layersPlugin.push(o),void 0!==r&&void 0!==t&&(t.addlayersControl(n),setTimeout((function(){e.addOptions(r,n)}),1e3))}}))}},{key:"addOptions",value:function(e,t){e.forEach((function(e){document.querySelector("#".concat(e)).innerHTML+='<option \n        class="externalLayers"\n        value="'.concat(t.name,'">').concat(t.legend,"</option>")}))}},{key:"searchIndex_",value:function(e){var t=e.name,r=this.layerDefault.filter((function(e){return e.name===t}));return r=0===r.length?0:r[0].getZIndex(),this.options.listLayers.forEach((function(e){e.name===t&&"object"===ct(e)&&(r=e.getZIndex())})),r}},{key:"changeLayersEventMap_",value:function(e){var t=e.name;new Promise((function(t,r){var n=null;n=setInterval((function(){e.getImpl().getOL3Layer()&&(clearInterval(n),t(e.getImpl().getOL3Layer()))}),1e3)})).then((function(e){e.on("change:visible",(function(e){var r=e.oldValue;document.querySelector("#l_".concat(t,"_external_mapLASelect")).disabled=!0!==r}))}))}},{key:"removeLayersEventMap_",value:function(){this.map_.on(M.evt.REMOVED_LAYER,(function(e){e instanceof Array&&e.forEach((function(e){var t=D(e.name).replaceAll(".","");document.getElementById("l_".concat(t,"_external"))&&document.querySelectorAll(".externalLayers").forEach((function(e){e.id.includes(t)&&e.remove()}))}))}))}},{key:"equals",value:function(e){return e instanceof i}},{key:"deactive",value:function(e,t){var r=e.querySelectorAll("#m-comparators-previews .activated")[0];if(r&&!r.id.includes(t)){"m-comparators-zoomextent"===r.id&&this.zoomextentControl.deactive(),r.classList.remove("activated");var n=document.querySelector("#div-contenedor-comparators");n&&n.children.length>2&&n.removeChild(n.children[2])}}},{key:"accessibilityTab_",value:function(e){var t=this;e.querySelectorAll('[tabindex="0"]').forEach((function(e){return e.setAttribute("tabindex",t.order)}))}},{key:"deactivate",value:function(){this.controls.forEach((function(e){e.control&&e.control.destroy()})),this.order=null,this.isDraggable_=null,this.options=null,this.defaultCompareMode=null,this.mirrorpanelParams=null,this.lyrcompareParams=null,this.transparencyParams=null,this.windowsyncParams=null,this.html=null,this.map_=null,this.controls=null}},{key:"removeLayers_",value:function(){var e=this;this.layersPlugin.forEach((function(t){var r=E(t),n=e.map_.getLayers().filter((function(e){return e.name===r})).filter((function(t){return e.saveLayers.includes(t.name)}));e.map_.removeLayers(n)}))}},{key:"defaultCompareMode_",value:function(){var e=this;if(this.options.defaultCompareMode&&"none"!==this.options.defaultCompareMode){var t={mirrorpanelParams:"mirrorpanel",lyrcompareParams:"lyrcompare",transparecyParams:"transparency",windowsyncParams:"windowsync"};this.controls.forEach((function(r){var n=r;n.active=t[e.options.defaultCompareMode]===n.id&&!n.active})),this.eventActive_()}}}],n&&pt(r.prototype,n),a&&pt(r,a),Object.defineProperty(r,"prototype",{writable:!1}),i}(),ht=r(814),vt=r.n(ht);function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(a=n.key,o=void 0,o=function(e,t){if("object"!==bt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===bt(o)?o:String(o)),n)}var a,o}function St(e,t){return St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},St(e,t)}function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=wt(e);if(t){var a=wt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function wt(e){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wt(e)}var Lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&St(e,t)}(o,M.Plugin);var t,r,n,a=_t(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this)).map_=null,e.controls_=[],e.name="comparators",e.options=t,e.position_=t.position||"TL",e.collapsed=!!M.utils.isUndefined(t.collapsed)||t.collapsed,e.collapsible=!!M.utils.isUndefined(t.collapsible)||t.collapsible,e.tooltip_=t.tooltip||y("tooltip"),e.isDraggable=!M.utils.isUndefined(t.isDraggable)&&t.isDraggable,e.order=t.order>=-1?t.order:null,e}return t=o,n=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?p:u:M.language.getTranslation(e).comparators}}],(r=[{key:"addTo",value:function(e){this.options.listLayers=this.options.listLayers||[],this.options.listLayers=this.options.listLayers.filter((function(e){return"string"==typeof e?!e.includes("GenericRaster")||!e.includes("GenericVector"):"GenericRaster"!==e.type||"GenericVector"!==e.type})),this.controls_.push(new ft(this.isDraggable,this.order,this.options,e)),this.map_=e,this.panel_=new M.ui.Panel("panelComparators",{collapsible:this.collapsible,collapsed:this.collapsed,position:M.ui.position[this.position_],className:"m-plugin-comparators",tooltip:this.tooltip_,collapsedButtonClass:"comparators-icon-zoom-mapa",order:this.order}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_)}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position_,"*").concat(this.collapsed,"*").concat(this.collapsible,"*").concat(this.tooltip_,"*").concat(this.isDraggable,"*").concat(this.options.listLayers,"*").concat(this.options.defaultCompareMode,"*").concat(this.options.enabledKeyFunctions,"*").concat(!!this.options.transparencyParams,"*").concat(!!this.options.lyrcompareParams,"*").concat(!!this.options.mirrorpanelParams,"*").concat(!!this.options.windowsyncParams)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"destroy",value:function(){this.controls_[0].deactivate(),this.controls_[0].controls=[],this.map_.removeControls(this.controls_),this.map_=null,this.panel_=null,this.name=null,this.options=null,this.position_=null,this.collapsed=null,this.collapsible=null,this.tooltip_=null,this.isDraggable=null,this.order=null}},{key:"equals",value:function(e){return e instanceof o}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(e){e(M.template.compileSync(vt(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/comparators/images/"),translations:{help1:y("textHelp.help1"),help2:y("textHelp.help2"),help3:y("textHelp.help3"),help4:y("textHelp.help4"),help5:y("textHelp.help5"),help6:y("textHelp.help6"),help7:y("textHelp.help7"),help8:y("textHelp.help8"),help9:y("textHelp.help9"),help10:y("textHelp.help10"),help11:y("textHelp.help11"),help12:y("textHelp.help12"),help13:y("textHelp.help13")}}}))}))}}}])&&gt(t.prototype,r),n&&gt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.Comparators=Lt,window.M.control.ComparatorsControl=ft,window.M.control.LyrCompareControl=ve,window.M.control.MirrorpanelControl=H,window.M.control.TransparencyControl=Be,window.M.control.WindowSyncControl=nt,window.M.impl.control.ComparatorsControl=c,window.M.impl.control.Lyrcomparecontrol=ie,window.M.impl.control.LyrcompareInteraction=ee,window.M.impl.control.CompareMirrorpanel=S,window.M.impl.control.TransparencyControl=Ee,window.M.impl.control.TransparentInteraction=Me,window.M.impl.control.WindowSyncControl=Ke})()})();
//# sourceMappingURL=comparators.ol.min.js.map