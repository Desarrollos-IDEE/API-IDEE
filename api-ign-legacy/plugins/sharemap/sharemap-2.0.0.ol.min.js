(()=>{var t={16:t=>{t.exports='<div id="m-plugin-sharemap-dialog" class="m-plugin-sharemap-dialog">\n    <div aria-modal="true" id="m-plugin-sharemap-modal" class="m-plugin-sharemap-modal">\n        <div id="m-plugin-sharemap-content" class="m-plugin-sharemap-content">\n            <div id="m-plugin-sharemap-title" role="heading" class="m-plugin-sharemap-title" aria-label="Modal Plugin Sharemap">\n                <span role="text" tabindex="0">{{{title}}}</span>\n                <div id="m-plugin-sharemap-tooltip" class="m-plugin-sharemap-tooltip">\n                    <span class="m-plugin-sharemap-tooltiptext">\n                        {{tooltip}}\n                    </span>\n                </div>\n            </div>\n            <div role="menu" tabindex="0" aria-label="Menu {{{title}}}" id="m-plugin-sharemap-message" class="m-plugin-sharemap-message">\n                <input tabindex="0" aria-label="{{title}}" type="text" />\n                <button tabindex="0" type="button" aria-label="{{copyBtn}} {{title}}" id="m-plugin-sharemap-copybutton">{{copyBtn}}</button>\n            </div>\n            <div id="m-plugin-sharemap-social" class="m-plugin-sharemap-social">\n                <a role="link" aria-label="link facebook" tabindex="0" id="facebook" target="_blank">\n                    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-square" class="svg-inline--fa fa-facebook-square fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"></path></svg>\n                </a>\n                <a role="link" aria-label="link twitter" tabindex="0" id="twitter" target="_blank">\n                    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter-square" class="svg-inline--fa fa-twitter-square fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></path></svg>\n                </a>\n                <a role="link" aria-label="link pinterest" tabindex="0" id="pinterest" target="_blank">\n                    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="pinterest-square" class="svg-inline--fa fa-pinterest-square fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M448 80v352c0 26.5-21.5 48-48 48H154.4c9.8-16.4 22.4-40 27.4-59.3 3-11.5 15.3-58.4 15.3-58.4 8 15.3 31.4 28.2 56.3 28.2 74.1 0 127.4-68.1 127.4-152.7 0-81.1-66.2-141.8-151.4-141.8-106 0-162.2 71.1-162.2 148.6 0 36 19.2 80.8 49.8 95.1 4.7 2.2 7.1 1.2 8.2-3.3.8-3.4 5-20.1 6.8-27.8.6-2.5.3-4.6-1.7-7-10.1-12.3-18.3-34.9-18.3-56 0-54.2 41-106.6 110.9-106.6 60.3 0 102.6 41.1 102.6 99.9 0 66.4-33.5 112.4-77.2 112.4-24.1 0-42.1-19.9-36.4-44.4 6.9-29.2 20.3-60.7 20.3-81.8 0-53-75.5-45.7-75.5 25 0 21.7 7.3 36.5 7.3 36.5-31.4 132.8-36.1 134.5-29.6 192.6l2.2.8H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48z"></path></svg>\n                </a>\n            </div>\n            <div role="heading" id="m-plugin-sharemap-text" class="m-plugin-sharemap-text">\n                <span role="text" tabindex="0">{{{text}}}</span>\n            </div>\n            <div role="menu" tabindex="0" aria-label="Menu {{{text}}}" id="m-plugin-sharemap-html" class="m-plugin-sharemap-html">\n                <input tabindex="0" aria-label="{{{text}}}" type="text" />\n                <button tabindex="0" type="button" aria-label="{{copyBtnHtml}} {{{text}}}" id="m-plugin-sharemap-copybuttonhtml">{{copyBtnHtml}}</button>\n            </div>\n            <div id="m-plugin-sharemap-button" class="m-plugin-sharemap-button">\n                <button type="button" tabindex="0">{{btn}}</button>\n            </div>\n        </div>\n\n    </div>\n</div>\n</div>'},431:(t,e,n)=>{t.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">SHAREMAP <img style="vertical-align: bottom; filter: invert(100%);" src="'+n(914)+'" width="30" height="30"></h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <img src="{{urlImages}}sharemap1.png" style="max-width:70%; margin: 0 auto; display: block">\n      <ul>\n         <li>{{translations.help2}}</li>\n         <li>{{translations.help3}}</li>\n         <li>{{translations.help4}}</li>\n      </ul>\n      <p>{{translations.help5}}</p>\n      <p>{{translations.help6}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/sharemap" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/sharemap</a></p>\n      <p>{{translations.help7}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/sharemap.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/sharemap.jsp?language=es</a></p>\n   </div>\n</div>\n'},255:t=>{t.exports='<div id="div-contenedor" class="m-control m-container m-sharemap-container">\n    <button id="m-sharemap-geturl">\n        <i class="icon-share-2"></i>\n    </button>\n</div>'},914:t=>{"use strict";t.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjgxOSIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgODE5IDEwMjQiPgo8dGl0bGU+PC90aXRsZT4KPGcgaWQ9Imljb21vb24taWdub3JlIj4KPC9nPgo8cGF0aCBmaWxsPSIjMDAwIiBkPSJNNjY1LjYgNjY1LjZxNjMuNDg4IDAgMTA4LjU0NCA0NC4wMzJ0NDUuMDU2IDEwOS41NjhxMCA2My40ODgtNDUuMDU2IDEwOC41NDR0LTEwOC41NDQgNDUuMDU2LTEwOC41NDQtNDUuMDU2LTQ1LjA1Ni0xMDguNTQ0cTAtNi4xNDQgMS4wMjQtMTQuMzM2dDEuMDI0LTEyLjI4OGwtMjY2LjI0LTE1OS43NDRxLTQzLjAwOCAzMi43NjgtOTQuMjA4IDMyLjc2OC02My40ODggMC0xMDguNTQ0LTQ1LjA1NnQtNDUuMDU2LTEwOC41NDQgNDUuMDU2LTEwOC41NDQgMTA4LjU0NC00NS4wNTZxNTUuMjk2IDAgOTQuMjA4IDMwLjcybDI2Ni4yNC0xNTkuNzQ0cTAtNC4wOTYtMS4wMjQtMTIuMjg4dC0xLjAyNC0xMi4yODhxMC02My40ODggNDUuMDU2LTEwOC41NDR0MTA4LjU0NC00NS4wNTYgMTA4LjU0NCA0NC4wMzIgNDUuMDU2IDEwOS41NjhxMCA2My40ODgtNDUuMDU2IDEwOC41NDR0LTEwOC41NDQgNDUuMDU2cS01My4yNDggMC05Mi4xNi0zMi43NjhsLTI2OC4yODggMTU5Ljc0NHEyLjA0OCA4LjE5MiAyLjA0OCAyNi42MjQgMCAxNi4zODQtMi4wNDggMjQuNTc2bDI2OC4yODggMTU5Ljc0NHEzNi44NjQtMzAuNzIgOTIuMTYtMzAuNzJ6Ij48L3BhdGg+Cjwvc3ZnPgo="}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=n(255),e=n.n(t),r=n(16),o=n.n(r);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){s=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}function u(t,e,n){return e=m(e),function(t,e){if(e&&("object"==a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,p()?Reflect.construct(e,n||[],m(t).constructor):e.apply(t,n))}function p(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(p=function(){return!!t})()}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}var h=function(t){t.classList.contains("m-plugin-sharemap-shade")?t.classList.remove("m-plugin-sharemap-shade"):(t.classList.add("m-plugin-sharemap-shade"),setTimeout((function(){t.classList.remove("m-plugin-sharemap-shade")}),2e3))},f=function(t){var e=t;e.disabled=!1,e.select(),document.execCommand("copy"),e.disabled=!0,document.getSelection().removeAllRanges()},d=function(t){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=u(this,n,[new M.impl.Control,"sharemap"])).baseUrl_=t.baseUrl,e.title_=t.title,e.text_=t.text,e.btn_=t.btn,e.copyBtn_=t.copyBtn,e.copyBtnHtml_=t.copyBtnHtml,e.primaryColor_=t.primaryColor||"#71a7d3",e.secondaryColor_=t.secondaryColor||"#fff",e.styles_=[{id:".m-plugin-sharemap-content button",styles:{backgroundColor:"".concat(e.primaryColor_," "),color:"".concat(e.secondaryColor_," ")}},{id:"#m-plugin-sharemap-content",styles:{backgroundColor:"".concat(e.secondaryColor_," "),border:"1px solid ".concat(e.primaryColor_," "),boxShadow:"0 2px 4px ".concat(e.primaryColor_,", 0 -1px 0px ").concat(e.primaryColor_," ")}},{id:".m-plugin-sharemap-content span",styles:{color:"".concat(e.primaryColor_," ")}},{id:".m-plugin-sharemap-dialog div.m-plugin-sharemap-social",styles:{borderBottom:"".concat(e.primaryColor_," 1px solid ")}},{id:"#m-plugin-sharemap-social a svg",styles:{color:"".concat(e.primaryColor_," ")}},{id:"m-sharemap-geturl",styles:{backgroundColor:e.primaryColor_,color:e.secondaryColor_}}],e.overwriteStyles_=t.overwriteStyles||!1,e.minimize_=t.minimize||!1,e.tooltip_=t.tooltip||"¡Copiado!",e.urlAPI_=t.urlAPI||!1,e.order=t.order,e.filterLayers=t.filterLayers,e.shareLayer=t.shareLayer,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(n,M.Control),r=n,(a=[{key:"createView",value:function(t){var n=this;return this.map_=t,new Promise((function(t,r){var o=M.template.compileSync(e()),a=o.querySelector("button");if(a.setAttribute("tabindex",n.order),a.setAttribute("aria-label","Plugin Sharemap"),!0===n.overwriteStyles_){var c=i(n.styles_.filter((function(t){return t.id===a.id})),1)[0];a.style.backgroundColor=c.styles.backgroundColor,a.style.color=c.styles.color,a.style.border=c.styles.border}n.accessibilityTab(o),n.addEvents(o),t(o)}))}},{key:"addEvents",value:function(t){var e=this;t.querySelector("#m-sharemap-geturl").addEventListener("click",(function(){document.querySelector("#m-plugin-sharemap-title")||e.activateModal()}))}},{key:"activateModal",value:function(){var t=M.template.compileSync(o(),{vars:{title:this.title_,text:this.text_,btn:this.btn_,copyBtn:this.copyBtn_,copyBtnHtml:this.copyBtnHtml_,tooltip:this.tooltip_}});this.accessibilityTab(t),!0===this.overwriteStyles_&&this.styles_.forEach((function(e){t.querySelectorAll(e.id).forEach((function(t){var n=t;Object.keys(e.styles).forEach((function(t){n.style[t]=e.styles[t]}))}))}));var e=t.querySelector("#m-plugin-sharemap-message input"),n=t.querySelector("#m-plugin-sharemap-html input"),r=document.querySelector("div.m-mapea-container");t.querySelector("#m-plugin-sharemap-button > button").addEventListener("click",(function(){var e;(e=t).parentElement.removeChild(e),document.querySelector(".m-sharemap-container").click(),document.querySelector("#m-sharemap-geturl").focus()}));var a=t.querySelector("#m-plugin-sharemap-copybutton"),i=t.querySelector("#m-plugin-sharemap-copybuttonhtml"),c=t.querySelector("#m-plugin-sharemap-title");a.addEventListener("click",(function(){f(e),h(c.querySelector("#m-plugin-sharemap-tooltip"))})),i.addEventListener("click",(function(){f(n),h(c.querySelector("#m-plugin-sharemap-tooltip"))})),this.buildURL(t).then((function(){return r.appendChild(t)})),this.buildHtml(t).then((function(){return r.appendChild(t)})).then((function(){c.focus(),c.click()}))}},{key:"buildURL",value:function(t){var e=this,n=t.querySelector("input"),r=t.querySelector("#twitter"),o=t.querySelector("#facebook"),a=t.querySelector("#pinterest");return this.getControls().then((function(t){var i;if(e.urlAPI_){var c=e.map_.getCenter(),l=c.x,s=c.y,u=e.map_.getProjection(),p=u.code,m=u.units;if(i="".concat(e.baseUrl_,"?center=").concat(l,",").concat(s,"&zoom=").concat(e.map_.getZoom()),e.minimize_){var y=t.filter((function(t){return void 0!==t&&-1===t.indexOf("backgroundlayers")})).join(",");y.endsWith(",")&&(y=y.slice(0,-1)),-1!==y.indexOf("scale")&&y.indexOf("scale")!==y.indexOf("scaleline")||(y=y.concat(",scale*true")),i=i.concat("&controls=".concat(y)).concat("&plugins=toc,zoompanel,measurebar,mousesrs")}else i=i.concat("&controls=".concat(t)).concat("&".concat(e.getPlugins()));i=(i=e.getLayers().length>0?i.concat("&layers=".concat(e.getLayers())):i.concat("")).concat("&projection=".concat(p,"*").concat(m)),n.value=i}else{var h=e.map_.getCenter(),f=h.x,d=h.y,g=window.location.search?window.location.href.replace(window.location.search,""):window.location.href;i="".concat(g,"?center=").concat(f,",").concat(d,"&zoom=").concat(e.map_.getZoom(),"&srs=").concat(e.map_.getProjection().code);var b=[];if(!0===e.shareLayer?b=e.getLayersInLayerswitcher():!1===e.shareLayer&&(b=e.getLayersInfilterLayers()),i=b.length>0?i.concat("&layers=".concat(b)):i.concat(""),!M.utils.isNullOrEmpty(M.config.MAP_VIEWER_LAYERS))if(b.length>0){var v="";M.config.MAP_VIEWER_LAYERS.forEach((function(t){-1===b.indexOf(t)&&(v=v.concat(",".concat(t)))})),M.utils.isNullOrEmpty(v)&&(i="".concat(i,",").concat(M.config.MAP_VIEWER_LAYERS))}else i="".concat(i,"&layers=").concat(M.config.MAP_VIEWER_LAYERS);n.value=i}i=encodeURI(i),M.remote.get("http://tinyurl.com/api-create.php?url=".concat(i)).then((function(t){o.href="http://www.facebook.com/sharer.php?u=".concat(t.text),r.href="https://twitter.com/intent/tweet?url=".concat(t.text),a.href="https://www.pinterest.es/pin/create/button/?url=".concat(t.text)}))}))}},{key:"buildHtml",value:function(t){var e=this,n=t.querySelector("#m-plugin-sharemap-html").querySelector("input");return this.getControls().then((function(t){var r;if(e.urlAPI_){var o=e.map_.getCenter(),a=o.x,i=o.y,c=e.map_.getProjection(),l=c.code,s=c.units;if(r="".concat(e.baseUrl_,"?center=").concat(a,",").concat(i,"&zoom=").concat(e.map_.getZoom()),e.minimize_){var u=t.filter((function(t){return void 0!==t&&-1===t.indexOf("backgroundlayers")})).join(",");u.endsWith(",")&&(u=u.slice(0,-1)),-1!==u.indexOf("scale")&&u.indexOf("scale")!==u.indexOf("scaleline")||(u=u.concat(",scale*true")),r=r.concat("&controls=".concat(u)).concat("&plugins=toc,zoompanel,measurebar,mousesrs")}else r=r.concat("&controls=".concat(t)).concat("&".concat(e.getPlugins()));r=(r=e.getLayers().length>0?r.concat("&layers=".concat(e.getLayers())):r.concat("")).concat("&projection=".concat(l,"*").concat(s))}else{var p=e.map_.getCenter(),m=p.x,y=p.y,h=window.location.search?window.location.href.replace(window.location.search,""):window.location.href;r="".concat(h,"?center=").concat(m,",").concat(y,"&zoom=").concat(e.map_.getZoom());var f=[];if(!0===e.shareLayer?f=e.getLayersInLayerswitcher():!1===e.shareLayer&&(f=e.getLayersInfilterLayers()),r=f.length>0?r.concat("&layers=".concat(f)):r.concat(""),!M.utils.isNullOrEmpty(M.config.MAP_VIEWER_LAYERS))if(f.length>0){var d="";M.config.MAP_VIEWER_LAYERS.forEach((function(t){-1===f.indexOf(t)&&(d=d.concat(",".concat(t)))})),M.utils.isNullOrEmpty(d)&&(r="".concat(r,",").concat(M.config.MAP_VIEWER_LAYERS))}else r="".concat(r,"&layers=").concat(M.config.MAP_VIEWER_LAYERS);n.value=r}var g='<iframe width="800" height="600" frameborder="0" style="border:0" src="'.concat(r,'"></iframe>');n.value=g}))}},{key:"getControls",value:function(){var t=this,e=this.baseUrl_.match(/(.*[A-Za-z-0-9])/)[0],n=this.map_.getControls().map((function(t){return t.name}));return new Promise((function(r){M.remote.get("".concat(e,"/api/actions/controls")).then((function(e){var o=JSON.parse(e.text),a=n.filter((function(t){return o.includes(t)})).filter((function(t){return"backgroundlayers"!==t}));if(a.includes("mouse")){var i=t.map_.getControls().find((function(t){return"mouse"===t.name})).getImpl().showProj,c=a.indexOf("mouse");a[c]=!0===i?"mouse*true":"mouse"}if(a.includes("scale")){var l=t.map_.getControls().find((function(t){return"scale"===t.name})).getImpl().exactScale,s=a.indexOf("scale");a[s]=!0===l?"scale*true":"scale"}var u,p=t.map_.getControls().filter((function(t){return"backgroundlayers"===t.name}))[0];if(!M.utils.isNullOrEmpty(p)){var m=p.visible,y=p.activeLayer;u="boolean"==typeof m&&"number"==typeof y?"backgroundlayers*".concat(y,"*").concat(m):"backgroundlayers"}a.push(u),r(a)}))}))}},{key:"getLayers",value:function(){var t=this;return this.map_.getLayers().filter((function(t){var e="__draw__"!==t.name&&"selectionLayer"!==t.name;return"attributions"===t.name&&"KML"===t.type&&(e=e&&!1),!1===t.displayInLayerSwitcher&&!0===t.transparent&&(e=e&&!1),e})).map((function(e){return t.layerToParam(e)})).filter((function(t){return null!=t}))}},{key:"getLayersInLayerswitcher",value:function(){var t=this;return this.map_.getLayers().filter((function(t){return!0===t.displayInLayerSwitcher&&!0===t.transparent})).map((function(e){return t.layerToParam(e)})).filter((function(t){return null!=t}))}},{key:"getLayersInfilterLayers",value:function(){var t=this;return this.map_.getLayers().filter((function(e){return t.filterLayers.includes(e.name)})).map((function(e){return t.layerToParam(e)})).filter((function(t){return null!=t}))}},{key:"layerToParam",value:function(t){var e;return"osm"===t.name?e=t.name:/mapbox/.test(t.name)?e="MAPBOX.".concat(t.name):"WMS"===t.type?e=this.getWMS(t):"WMTS"===t.type?e=this.getWMTS(t):"KML"===t.type?e=this.getKML(t):"WFS"===t.type?e=this.getWFS(t):"GeoJSON"===t.type?e=this.getGeoJSON(t):"Vector"===t.type?e=this.getVector(t):"MVT"===t.type?e=this.getMVT(t):"OGCAPIFeatures"===t.type?e=this.getOGCAPIFeatures(t):"GeoTIFF"===t.type?e=this.getGeoTIFF(t):"MapLibre"===t.type&&(e=this.getMapLibre(t)),e}},{key:"getKML",value:function(t){return"KML*".concat(t.name,"*").concat(t.url,"*").concat(t.extract,"*").concat(t.label,"*").concat(t.isVisible())}},{key:"getGeoJSON",value:function(t){var e=M.utils.isUndefined(t.source)?encodeURIComponent(t.url):t.serialize(),n=t.getStyle()?t.getStyle().serialize():"";return"GeoJSON*".concat(t.name,"*").concat(e,"*").concat(t.extract,"*").concat(n)}},{key:"getOGCAPIFeatures",value:function(t){var e=t.getStyle()?t.getStyle().serialize():"";return"OGCAPIFeatures*".concat(t.legend||t.name,"*").concat(t.url,"*").concat(t.name,"*").concat(t.limit||"","*").concat(t.bbox||"","*").concat(t.id||"","*").concat(t.offset||"","*").concat(t.format||"","*").concat(e,"*").concat(t.extract||"")}},{key:"getMapLibre",value:function(t){return"MapLibre*".concat(t.legend,"*").concat(t.url,"*").concat(t.name,"*").concat(t.transparent||"","*").concat(t.extract||"","*").concat(t.visibility||"","*").concat(t.displayInLayerSwitcher||"","*").concat(t.disableBackgroundColor||"")}},{key:"getVector",value:function(t){var e=Object.assign(t.toGeoJSON());e.crs={properties:{name:"EPSG:4326"},type:"name"},e=window.btoa(unescape(encodeURIComponent(JSON.stringify(e))));var n=t.getStyle()?t.getStyle().serialize():"";return"GeoJSON*".concat(t.name,"*").concat(e,"**").concat(n)}},{key:"getMVT",value:function(t){return"MVT*".concat(t.url,"*").concat(t.name,"*").concat(t.getProjection())}},{key:"getWMS",value:function(t){return"WMS*".concat(this.normalizeString(t.legend||t.name),"*").concat(t.url,"*").concat(t.name,"*").concat(t.transparent,"*").concat(t.tiled,"*").concat(t.userMaxExtent||"","*").concat(t.version,"*").concat(t.displayInLayerSwitcher,"*").concat(t.isQueryable(),"*").concat(t.isVisible())}},{key:"getGeoTIFF",value:function(t){return"GeoTIFF*".concat(t.legend,"*").concat(t.url,"*").concat(t.name,"*").concat(t.transparent,"*").concat(t.projection||"","*").concat(t.displayInLayerSwitcher,"*").concat(t.isVisible())}},{key:"getWFS",value:function(t){var e=t.getStyle().serialize();return"WFS*".concat(this.normalizeString(t.legend||t.name),"*").concat(t.url,"*").concat(t.namespace,":").concat(t.name,":*").concat(t.geometry||"","*").concat(t.ids||"","*").concat(t.cql||"","*").concat(e||"")}},{key:"getWMTS",value:function(t){var e=this.map_.getProjection().code,n=null;try{n=t.getLegend()}catch(e){n=t.legend}return"WMTS*".concat(t.url,"*").concat(t.name,"*").concat(t.matrixSet||e,"*").concat(this.normalizeString(n),"*").concat(t.transparent,"*").concat(t.options.format||"image/png","*").concat(t.displayInLayerSwitcher,"*").concat(t.isQueryable(),"*").concat(t.isVisible())}},{key:"getPlugins",value:function(){return this.map_.getPlugins().map((function(t){var e="";return M.utils.isFunction(t.getAPIRest)&&(e=t.getAPIRest()),e})).join("&")}},{key:"equals",value:function(t){return t instanceof n}},{key:"normalizeString",value:function(t){var e=t.replace(/,/g,"");return e=e.replace(/\*/g,"")}},{key:"accessibilityTab",value:function(t){var e=this;t.querySelectorAll('[tabindex="0"]').forEach((function(t){return t.setAttribute("tabindex",e.order)}))}}])&&l(r.prototype,a),c&&l(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,a,c}();const g=JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls."},"textHelp":{"help1":"Allows you to share the map view with the loaded information layers through a Web link. It also provides the HTML code in case you want to embed the viewer in another Web portal.","help2":"1. Click “Copy” to copy the link to the clipboard. You can paste it into a browser, email, or message.","help3":"2. Open the different social networks that you already have installed on your device and generate the publication to share the view.","help4":"3. Generate the HTML code necessary to embed the current view in a web page.","help5":"Press \'OK\' to close the panel.","help6":"The information relevant to the extension and its possible parameterization is documented in","help7":"The example of use of its parameters can be checked in"},"title":"Share URL","text":"Embedded HTML","copy":"Copy","tooltip":"Copied!","tooltipPanel":"Share"}'),b=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution."},"textHelp":{"help1":"Permite compartir la vista de mapa con las capas de información cargadas a través de un enlace Web. También proporciona el código HTML por si se quiere embeber el visualizador en otro portal Web.","help2":"1. Haga clic en “Copiar” para copiar el enlace al portapapeles. Puede pegarlo en un navegador, correo electrónico o mensaje.","help3":"2. Abre las diferentes redes sociales, que tenga ya instaladas en su dispositivo y genera la publicación para compartir la vista.","help4":"3. Genera el código HTML necesario para incrustar en una página web la vista actual.","help5":"Pulse \'Aceptar\' para cerrar el panel.","help6":"La información relevante a la extensión y su posible parametrización está documentada en","help7":"El ejemplo de uso de sus parámetros puede comprobarse en"},"title":"Compartir URL","text":"HTML embebido","copy":"Copiar","tooltip":"¡Copiado!","tooltipPanel":"Compartir"}');var v={en:g,es:b},_=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e="es","function"==typeof M.language.getLang&&(e=M.language.getLang()),e),r=function(t){return"es"===t||"en"===t?v[t]:M.language.getTranslation(t).sharemap}(n),o="";return M.utils.isNullOrEmpty(r)?console.warn("The translation '".concat(n,"' has not been defined.")):o=t.split(".").reduce((function(t,e){return t[e]}),r),o},w=n(431),x=n.n(w);function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}var L=["filterLayers"];function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C(r.key),r)}}function C(t){var e=function(t,e){if("object"!=S(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==S(e)?e:e+""}function P(t,e,n){return e=I(e),function(t,e){if(e&&("object"==S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,j()?Reflect.construct(e,n||[],I(t).constructor):e.apply(t,n))}function j(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(j=function(){return!!t})()}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}var k=function(t){function e(t){var n,r=t.filterLayers,o=void 0===r?[]:r,a=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,L);if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=P(this,e),M.utils.isNullOrEmpty(a.baseUrl)&&console.warn("options.baseUrl is null or undefined."),n.map_=null,n.controls_=[],n.baseUrl_=a.baseUrl||"https://componentes.cnig.es/api-core/",!M.utils.isString(n.baseUrl_))throw new Error("options.baseUrl is not string type.");return n.position_=a.position||"BR",n.title_=a.title||_("title"),n.text_=a.text||_("text"),n.btn_=a.btn||"OK",n.copyBtn_=a.copyBtn||_("copy"),n.copyBtnHtml_=a.copyBtnHtml||_("copy"),n.styles_=a.styles||{},n.overwriteStyles_=a.overwriteStyles||!1,n.minimize_=a.minimize||!1,n.tooltip_=a.tooltip||_("tooltip"),n.urlAPI_=a.urlAPI||!1,n.order=a.order>=-1?a.order:null,n.filterLayers=void 0===a.shareLayer||!1===a.shareLayer?o:[],n.shareLayer=a.shareLayer||!1,n.options=a,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}(e,M.Plugin),n=e,o=[{key:"getJSONTranslations",value:function(t){return"en"===t||"es"===t?"en"===t?g:b:M.language.getTranslation(t).sharemap}}],(r=[{key:"addTo",value:function(t){this.control=new d({baseUrl:this.baseUrl_,title:this.title_,text:this.text_,btn:this.btn_,copyBtn:this.copyBtn_,copyBtnHtml:this.copyBtnHtml_,primaryColor:this.styles_.primaryColor,secondaryColor:this.styles_.secondaryColor,tooltip:this.tooltip_,overwriteStyles:this.overwriteStyles_,minimize:this.minimize_,urlAPI:this.urlAPI_,order:this.order,filterLayers:this.filterLayers,shareLayer:this.shareLayer}),this.controls_.push(this.control),this.map_=t,this.panel_=new M.ui.Panel("ShareMap",{collapsible:!1,position:M.ui.position[this.position_],className:"m-plugin-sharemap",tooltip:_("tooltipPanel"),order:this.order}),this.panel_.addControls(this.controls_),t.addPanels(this.panel_)}},{key:"destroy",value:function(){this.map_.removeControls([this.control]);var t=[null,null,null,null,null,null,null,null,null,null,null,null,null,null];this.map_=t[0],this.control=t[1],this.controls_=t[2],this.panel_=t[3],this.baseUrl_=t[4],this.position_=t[5],this.title_=t[6],this.text_=t[7],this.btn_=t[8],this.copyBtn_=t[9],this.copyBtnHtml_=t[10],this.styles_=t[11],this.overwriteStyles_=t[12],this.tooltip_=t[13]}},{key:"getControls",value:function(){return this.controls_}},{key:"name",get:function(){return"sharemap"}},{key:"baseUrl",get:function(){return this.baseUrl_}},{key:"map",get:function(){return this.map_}},{key:"position",get:function(){return this.position_}},{key:"tooltip",get:function(){return this.tooltip_}},{key:"title",get:function(){return this.title_}},{key:"text",get:function(){return this.text_}},{key:"btn",get:function(){return this.btn_}},{key:"copyBtn",get:function(){return this.copyBtn_}},{key:"copyBtnHtml",get:function(){return this.copyBtnHtml_}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.tooltip_,"*").concat(this.baseUrl,"*").concat(this.minimize_,"*").concat(this.title_,"*").concat(this.btn_,"*").concat(this.copyBtn_,"*").concat(this.text_,"*").concat(this.copyBtnHtml_,"*").concat(this.urlAPI_,"*").concat(this.shareLayer)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(t){t(M.template.compileSync(x(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/sharemap/images/"),translations:{help1:_("textHelp.help1"),help2:_("textHelp.help2"),help3:_("textHelp.help3"),help4:_("textHelp.help4"),help5:_("textHelp.help5"),help6:_("textHelp.help6"),help7:_("textHelp.help7")}}}))}))}}}])&&O(n.prototype,r),o&&O(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.plugin.ShareMap=k,window.M.control.ShareMapControl=d})()})();
//# sourceMappingURL=sharemap.ol.min.js.map