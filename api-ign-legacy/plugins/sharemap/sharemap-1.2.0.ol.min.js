!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.u)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.u?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t){t.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create Attributions controls."},"textHelp":{"help1":"Allows you to share the map view with the loaded information layers through a Web link. It also provides the HTML code in case you want to embed the viewer in another Web portal.","help2":"1. Click “Copy” to copy the link to the clipboard. You can paste it into a browser, email, or message.","help3":"2. Open the different social networks that you already have installed on your device and generate the publication to share the view.","help4":"3. Generate the HTML code necessary to embed the current view in a web page.","help5":"Press \'OK\' to close the panel.","help6":"The information relevant to the extension and its possible parameterization is documented in","help7":"The example of use of its parameters can be checked in"},"title":"Share URL","text":"Embedded HTML","copy":"Copy","tooltip":"Copied!","tooltipPanel":"Share"}')},function(t){t.exports=JSON.parse('{"exception":{"impl":"La implementación no puede crear controles de Attribution."},"textHelp":{"help1":"Permite compartir la vista de mapa con las capas de información cargadas a través de un enlace Web. También proporciona el código HTML por si se quiere embeber el visualizador en otro portal Web.","help2":"1. Haga clic en “Copiar” para copiar el enlace al portapapeles. Puede pegarlo en un navegador, correo electrónico o mensaje.","help3":"2. Abre las diferentes redes sociales, que tenga ya instaladas en su dispositivo y genera la publicación para compartir la vista.","help4":"3. Genera el código HTML necesario para incrustar en una página web la vista actual.","help5":"Pulse \'Aceptar\' para cerrar el panel.","help6":"La información relevante a la extensión y su posible parametrización está documentada en","help7":"El ejemplo de uso de sus parámetros puede comprobarse en"},"title":"Compartir URL","text":"HTML embebido","copy":"Copiar","tooltip":"¡Copiado!","tooltipPanel":"Compartir"}')},function(t,e){t.exports='<div id="div-contenedor" class="m-control m-container m-sharemap-container">\n    <button id="m-sharemap-geturl">\n        <i class="icon-share-2"></i>\n    </button>\n</div>'},function(t,e){t.exports='<div id="m-plugin-sharemap-dialog" class="m-plugin-sharemap-dialog">\n    <div aria-modal="true" id="m-plugin-sharemap-modal" class="m-plugin-sharemap-modal">\n        <div id="m-plugin-sharemap-content" class="m-plugin-sharemap-content">\n            <div id="m-plugin-sharemap-title" role="heading" class="m-plugin-sharemap-title" aria-label="Modal Plugin Sharemap">\n                <span role="text" tabindex="0">{{{title}}}</span>\n                <div id="m-plugin-sharemap-tooltip" class="m-plugin-sharemap-tooltip">\n                    <span class="m-plugin-sharemap-tooltiptext">\n                        {{tooltip}}\n                    </span>\n                </div>\n            </div>\n            <div role="menu" tabindex="0" aria-label="Menu {{{title}}}" id="m-plugin-sharemap-message" class="m-plugin-sharemap-message">\n                <input tabindex="0" aria-label="{{title}}" type="text" />\n                <button tabindex="0" type="button" aria-label="{{copyBtn}} {{title}}" id="m-plugin-sharemap-copybutton">{{copyBtn}}</button>\n            </div>\n            <div id="m-plugin-sharemap-social" class="m-plugin-sharemap-social">\n                <a role="link" aria-label="link facebook" tabindex="0" id="facebook" target="_blank">\n                    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-square" class="svg-inline--fa fa-facebook-square fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"></path></svg>\n                </a>\n                <a role="link" aria-label="link twitter" tabindex="0" id="twitter" target="_blank">\n                    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter-square" class="svg-inline--fa fa-twitter-square fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></path></svg>\n                </a>\n                <a role="link" aria-label="link pinterest" tabindex="0" id="pinterest" target="_blank">\n                    <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="pinterest-square" class="svg-inline--fa fa-pinterest-square fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M448 80v352c0 26.5-21.5 48-48 48H154.4c9.8-16.4 22.4-40 27.4-59.3 3-11.5 15.3-58.4 15.3-58.4 8 15.3 31.4 28.2 56.3 28.2 74.1 0 127.4-68.1 127.4-152.7 0-81.1-66.2-141.8-151.4-141.8-106 0-162.2 71.1-162.2 148.6 0 36 19.2 80.8 49.8 95.1 4.7 2.2 7.1 1.2 8.2-3.3.8-3.4 5-20.1 6.8-27.8.6-2.5.3-4.6-1.7-7-10.1-12.3-18.3-34.9-18.3-56 0-54.2 41-106.6 110.9-106.6 60.3 0 102.6 41.1 102.6 99.9 0 66.4-33.5 112.4-77.2 112.4-24.1 0-42.1-19.9-36.4-44.4 6.9-29.2 20.3-60.7 20.3-81.8 0-53-75.5-45.7-75.5 25 0 21.7 7.3 36.5 7.3 36.5-31.4 132.8-36.1 134.5-29.6 192.6l2.2.8H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48z"></path></svg>\n                </a>\n            </div>\n            <div role="heading" id="m-plugin-sharemap-text" class="m-plugin-sharemap-text">\n                <span role="text" tabindex="0">{{{text}}}</span>\n            </div>\n            <div role="menu" tabindex="0" aria-label="Menu {{{text}}}" id="m-plugin-sharemap-html" class="m-plugin-sharemap-html">\n                <input tabindex="0" aria-label="{{{text}}}" type="text" />\n                <button tabindex="0" type="button" aria-label="{{copyBtnHtml}} {{{text}}}" id="m-plugin-sharemap-copybuttonhtml">{{copyBtnHtml}}</button>\n            </div>\n            <div id="m-plugin-sharemap-button" class="m-plugin-sharemap-button">\n                <button type="button" tabindex="0">{{btn}}</button>\n            </div>\n        </div>\n\n    </div>\n</div>\n</div>'},function(t,e,n){t.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">SHAREMAP <img style="vertical-align: bottom; filter: invert(100%);" src="'+n(6)+'" width="30" height="30"></h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <img src="{{urlImages}}sharemap1.png" style="max-width:70%; margin: 0 auto; display: block">\n      <ul>\n         <li>{{translations.help2}}</li>\n         <li>{{translations.help3}}</li>\n         <li>{{translations.help4}}</li>\n      </ul>\n      <p>{{translations.help5}}</p>\n      <p>{{translations.help6}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/sharemap" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/sharemap</a></p>\n      <p>{{translations.help7}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/sharemap.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/sharemap.jsp?language=es</a></p>\n   </div>\n</div>\n\n'},function(t,e,n){},function(t,e){t.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjgxOSIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgODE5IDEwMjQiPgo8dGl0bGU+PC90aXRsZT4KPGcgaWQ9Imljb21vb24taWdub3JlIj4KPC9nPgo8cGF0aCBmaWxsPSIjMDAwIiBkPSJNNjY1LjYgNjY1LjZxNjMuNDg4IDAgMTA4LjU0NCA0NC4wMzJ0NDUuMDU2IDEwOS41NjhxMCA2My40ODgtNDUuMDU2IDEwOC41NDR0LTEwOC41NDQgNDUuMDU2LTEwOC41NDQtNDUuMDU2LTQ1LjA1Ni0xMDguNTQ0cTAtNi4xNDQgMS4wMjQtMTQuMzM2dDEuMDI0LTEyLjI4OGwtMjY2LjI0LTE1OS43NDRxLTQzLjAwOCAzMi43NjgtOTQuMjA4IDMyLjc2OC02My40ODggMC0xMDguNTQ0LTQ1LjA1NnQtNDUuMDU2LTEwOC41NDQgNDUuMDU2LTEwOC41NDQgMTA4LjU0NC00NS4wNTZxNTUuMjk2IDAgOTQuMjA4IDMwLjcybDI2Ni4yNC0xNTkuNzQ0cTAtNC4wOTYtMS4wMjQtMTIuMjg4dC0xLjAyNC0xMi4yODhxMC02My40ODggNDUuMDU2LTEwOC41NDR0MTA4LjU0NC00NS4wNTYgMTA4LjU0NCA0NC4wMzIgNDUuMDU2IDEwOS41NjhxMCA2My40ODgtNDUuMDU2IDEwOC41NDR0LTEwOC41NDQgNDUuMDU2cS01My4yNDggMC05Mi4xNi0zMi43NjhsLTI2OC4yODggMTU5Ljc0NHEyLjA0OCA4LjE5MiAyLjA0OCAyNi42MjQgMCAxNi4zODQtMi4wNDggMjQuNTc2bDI2OC4yODggMTU5Ljc0NHEzNi44NjQtMzAuNzIgOTIuMTYtMzAuNzJ6Ij48L3BhdGg+Cjwvc3ZnPgo="},function(t,e,n){"use strict";n.r(e);n(5);var r=n(2),i=n.n(r),a=n(3),o=n.n(a);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,l=[],u=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(t){s=!0,i=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw i}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,a=void 0,a=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===l(a)?a:String(a)),r)}var i,a}function p(t,e){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m(t);if(e){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){t.classList.contains("m-plugin-sharemap-shade")?t.classList.remove("m-plugin-sharemap-shade"):(t.classList.add("m-plugin-sharemap-shade"),setTimeout((function(){t.classList.remove("m-plugin-sharemap-shade")}),2e3))},b=function(t){var e=t;e.disabled=!1,e.select(),document.execCommand("copy"),e.disabled=!0,document.getSelection().removeAllRanges()},g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(l,M.Control);var e,n,r,a=h(l);function l(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var n=new M.impl.Control;return(e=a.call(this,n,"sharemap")).h=t.baseUrl,e.g=t.title,e.v=t.text,e.M=t.btn,e.j=t.copyBtn,e.N=t.copyBtnHtml,e.O=t.primaryColor||"#71a7d3",e.k=t.secondaryColor||"#fff",e.S=[{id:".m-plugin-sharemap-content button",styles:{backgroundColor:"".concat(e.O," "),color:"".concat(e.k," ")}},{id:"#m-plugin-sharemap-content",styles:{backgroundColor:"".concat(e.k," "),border:"1px solid ".concat(e.O," "),boxShadow:"0 2px 4px ".concat(e.O,", 0 -1px 0px ").concat(e.O," ")}},{id:".m-plugin-sharemap-content span",styles:{color:"".concat(e.O," ")}},{id:".m-plugin-sharemap-dialog div.m-plugin-sharemap-social",styles:{borderBottom:"".concat(e.O," 1px solid ")}},{id:"#m-plugin-sharemap-social a svg",styles:{color:"".concat(e.O," ")}},{id:"m-sharemap-geturl",styles:{backgroundColor:e.O,color:e.k}}],e.C=t.overwriteStyles||!1,e.T=t.minimize||!1,e.D=t.tooltip||"¡Copiado!",e.L=t.urlAPI||!1,e.order=t.order,e.filterLayers=t.filterLayers,e.shareLayer=t.shareLayer,e}return e=l,(n=[{key:"createView",value:function(t){var e=this;return this.I=t,new Promise((function(t,n){var r=M.template.compileSync(i.a),a=r.querySelector("button");if(a.setAttribute("tabindex",e.order),a.setAttribute("aria-label","Plugin Sharemap"),!0===e.C){var o=u(e.S.filter((function(t){return t.id===a.id})),1)[0];a.style.backgroundColor=o.styles.backgroundColor,a.style.color=o.styles.color,a.style.border=o.styles.border}e.accessibilityTab(r),e.addEvents(r),t(r)}))}},{key:"addEvents",value:function(t){var e=this;t.querySelector("#m-sharemap-geturl").addEventListener("click",(function(){document.querySelector("#m-plugin-sharemap-title")||e.activateModal()}))}},{key:"activateModal",value:function(){var t=M.template.compileSync(o.a,{vars:{title:this.g,text:this.v,btn:this.M,copyBtn:this.j,copyBtnHtml:this.N,tooltip:this.D}});this.accessibilityTab(t),!0===this.C&&this.S.forEach((function(e){t.querySelectorAll(e.id).forEach((function(t){var n=t;Object.keys(e.styles).forEach((function(t){n.style[t]=e.styles[t]}))}))}));var e=t.querySelector("#m-plugin-sharemap-message input"),n=t.querySelector("#m-plugin-sharemap-html input"),r=document.querySelector("div.m-mapea-container");t.querySelector("#m-plugin-sharemap-button > button").addEventListener("click",(function(){var e;(e=t).parentElement.removeChild(e),document.querySelector(".m-sharemap-container").click(),document.querySelector("#m-sharemap-geturl").focus()}));var i=t.querySelector("#m-plugin-sharemap-copybutton"),a=t.querySelector("#m-plugin-sharemap-copybuttonhtml"),l=t.querySelector("#m-plugin-sharemap-title");i.addEventListener("click",(function(){b(e),d(l.querySelector("#m-plugin-sharemap-tooltip"))})),a.addEventListener("click",(function(){b(n),d(l.querySelector("#m-plugin-sharemap-tooltip"))})),this.buildURL(t).then((function(){return r.appendChild(t)})),this.buildHtml(t).then((function(){return r.appendChild(t)})).then((function(){l.focus(),l.click()}))}},{key:"buildURL",value:function(t){var e=this,n=t.querySelector("input"),r=t.querySelector("#twitter"),i=t.querySelector("#facebook"),a=t.querySelector("#pinterest");return this.getControls().then((function(t){var o;if(e.L){var l=e.I.getCenter(),u=l.x,s=l.y,c=e.I.getProjection(),p=c.code,h=c.units;if(o="".concat(e.h,"?center=").concat(u,",").concat(s,"&zoom=").concat(e.I.getZoom()),e.T){var f=t.filter((function(t){return void 0!==t&&-1===t.indexOf("backgroundlayers")})).join(",");f.endsWith(",")&&(f=f.slice(0,-1)),-1!==f.indexOf("scale")&&f.indexOf("scale")!==f.indexOf("scaleline")||(f=f.concat(",scale*true")),o=o.concat("&controls=".concat(f)).concat("&plugins=toc,zoompanel,measurebar,mousesrs")}else o=o.concat("&controls=".concat(t)).concat("&".concat(e.getPlugins()));o=(o=e.getLayers().length>0?o.concat("&layers=".concat(e.getLayers())):o.concat("")).concat("&projection=".concat(p,"*").concat(h)),n.value=o}else{var m=e.I.getCenter(),d=m.x,b=m.y,g=window.location.search?window.location.href.replace(window.location.search,""):window.location.href;o="".concat(g,"?center=").concat(d,",").concat(b,"&zoom=").concat(e.I.getZoom(),"&srs=").concat(e.I.getProjection().code);var v=[];if(!0===e.shareLayer?v=e.getLayersInLayerswitcher():!1===e.shareLayer&&(v=e.getLayersInfilterLayers()),o=v.length>0?o.concat("&layers=".concat(v)):o.concat(""),!M.utils.isNullOrEmpty(M.config.MAP_VIEWER_LAYERS))if(v.length>0){var y="";M.config.MAP_VIEWER_LAYERS.forEach((function(t){-1===v.indexOf(t)&&(y=y.concat(",".concat(t)))})),M.utils.isNullOrEmpty(y)&&(o="".concat(o,",").concat(M.config.MAP_VIEWER_LAYERS))}else o="".concat(o,"&layers=").concat(M.config.MAP_VIEWER_LAYERS);n.value=o}o=encodeURI(o),M.remote.get("http://tinyurl.com/api-create.php?url=".concat(o)).then((function(t){i.href="http://www.facebook.com/sharer.php?u=".concat(t.text),r.href="https://twitter.com/intent/tweet?url=".concat(t.text),a.href="https://www.pinterest.es/pin/create/button/?url=".concat(t.text)}))}))}},{key:"buildHtml",value:function(t){var e=this,n=t.querySelector("#m-plugin-sharemap-html").querySelector("input");return this.getControls().then((function(t){var r;if(e.L){var i=e.I.getCenter(),a=i.x,o=i.y,l=e.I.getProjection(),u=l.code,s=l.units;if(r="".concat(e.h,"?center=").concat(a,",").concat(o,"&zoom=").concat(e.I.getZoom()),e.T){var c=t.filter((function(t){return void 0!==t&&-1===t.indexOf("backgroundlayers")})).join(",");c.endsWith(",")&&(c=c.slice(0,-1)),-1!==c.indexOf("scale")&&c.indexOf("scale")!==c.indexOf("scaleline")||(c=c.concat(",scale*true")),r=r.concat("&controls=".concat(c)).concat("&plugins=toc,zoompanel,measurebar,mousesrs")}else r=r.concat("&controls=".concat(t)).concat("&".concat(e.getPlugins()));r=(r=e.getLayers().length>0?r.concat("&layers=".concat(e.getLayers())):r.concat("")).concat("&projection=".concat(u,"*").concat(s))}else{var p=e.I.getCenter(),h=p.x,f=p.y,m=window.location.search?window.location.href.replace(window.location.search,""):window.location.href;r="".concat(m,"?center=").concat(h,",").concat(f,"&zoom=").concat(e.I.getZoom());var d=[];if(!0===e.shareLayer?d=e.getLayersInLayerswitcher():!1===e.shareLayer&&(d=e.getLayersInfilterLayers()),r=d.length>0?r.concat("&layers=".concat(d)):r.concat(""),!M.utils.isNullOrEmpty(M.config.MAP_VIEWER_LAYERS))if(d.length>0){var b="";M.config.MAP_VIEWER_LAYERS.forEach((function(t){-1===d.indexOf(t)&&(b=b.concat(",".concat(t)))})),M.utils.isNullOrEmpty(b)&&(r="".concat(r,",").concat(M.config.MAP_VIEWER_LAYERS))}else r="".concat(r,"&layers=").concat(M.config.MAP_VIEWER_LAYERS);n.value=r}var g='<iframe width="800" height="600" frameborder="0" style="border:0" src="'.concat(r,'"></iframe>');n.value=g}))}},{key:"getControls",value:function(){var t=this,e=this.h.match(/(.*[A-Za-z-0-9])/)[0],n=this.I.getControls().map((function(t){return t.name}));return new Promise((function(r){M.remote.get("".concat(e,"/api/actions/controls")).then((function(e){var i=JSON.parse(e.text),a=n.filter((function(t){return i.includes(t)})).filter((function(t){return"backgroundlayers"!==t}));if(a.includes("mouse")){var o=t.I.getControls().find((function(t){return"mouse"===t.name})).getImpl().showProj,l=a.indexOf("mouse");a[l]=!0===o?"mouse*true":"mouse"}if(a.includes("scale")){var u=t.I.getControls().find((function(t){return"scale"===t.name})).getImpl().exactScale,s=a.indexOf("scale");a[s]=!0===u?"scale*true":"scale"}var c,p=t.I.getControls().filter((function(t){return"backgroundlayers"===t.name}))[0];if(!M.utils.isNullOrEmpty(p)){var h=p.visible,f=p.activeLayer;c="boolean"==typeof h&&"number"==typeof f?"backgroundlayers*".concat(f,"*").concat(h):"backgroundlayers"}a.push(c),r(a)}))}))}},{key:"getLayers",value:function(){var t=this;return this.I.getLayers().filter((function(t){var e="__draw__"!==t.name&&"selectionLayer"!==t.name;return"attributions"===t.name&&"KML"===t.type&&(e=e&&!1),!1===t.displayInLayerSwitcher&&!0===t.transparent&&(e=e&&!1),e})).map((function(e){return t.layerToParam(e)})).filter((function(t){return null!=t}))}},{key:"getLayersInLayerswitcher",value:function(){var t=this;return this.I.getLayers().filter((function(t){return!0===t.displayInLayerSwitcher&&!0===t.transparent})).map((function(e){return t.layerToParam(e)})).filter((function(t){return null!=t}))}},{key:"getLayersInfilterLayers",value:function(){var t=this;return this.I.getLayers().filter((function(e){return t.filterLayers.includes(e.name)})).map((function(e){return t.layerToParam(e)})).filter((function(t){return null!=t}))}},{key:"layerToParam",value:function(t){var e;return"osm"===t.name?e=t.name:/mapbox/.test(t.name)?e="MAPBOX.".concat(t.name):"WMS"===t.type?e=this.getWMS(t):"WMTS"===t.type?e=this.getWMTS(t):"KML"===t.type?e=this.getKML(t):"WFS"===t.type?e=this.getWFS(t):"GeoJSON"===t.type?e=this.getGeoJSON(t):"Vector"===t.type?e=this.getVector(t):"MVT"===t.type?e=this.getMVT(t):"OGCAPIFeatures"===t.type&&(e=this.getOGCAPIFeatures(t)),e}},{key:"getKML",value:function(t){return"KML*".concat(t.name,"*").concat(t.url,"*").concat(t.extract,"*").concat(t.label,"*").concat(t.isVisible())}},{key:"getGeoJSON",value:function(t){var e=M.utils.isUndefined(t.source)?encodeURIComponent(t.url):t.serialize(),n=t.getStyle()?t.getStyle().serialize():"";return"GeoJSON*".concat(t.name,"*").concat(e,"*").concat(t.extract,"*").concat(n)}},{key:"getOGCAPIFeatures",value:function(t){var e=t.getStyle()?t.getStyle().serialize():"";return"OGCAPIFeatures*".concat(t.legend||t.name,"*").concat(t.url,"*").concat(t.name,"*").concat(t.limit||"","*").concat(t.bbox||"","*").concat(t.id||"","*").concat(t.offset||"","*").concat(t.format||"","*").concat(e,"*").concat(t.extract||"")}},{key:"getVector",value:function(t){var e=Object.assign(t.toGeoJSON());e.crs={properties:{name:"EPSG:4326"},type:"name"},e=window.btoa(unescape(encodeURIComponent(JSON.stringify(e))));var n=t.getStyle()?t.getStyle().serialize():"";return"GeoJSON*".concat(t.name,"*").concat(e,"**").concat(n)}},{key:"getMVT",value:function(t){return"MVT*".concat(t.url,"*").concat(t.name,"*").concat(t.getProjection())}},{key:"getWMS",value:function(t){return"WMS*".concat(this.normalizeString(t.legend||t.name),"*").concat(t.url,"*").concat(t.name,"*").concat(t.transparent,"*").concat(t.tiled,"*").concat(t.userMaxExtent||"","*").concat(t.version,"*").concat(t.displayInLayerSwitcher,"*").concat(t.isQueryable(),"*").concat(t.isVisible())}},{key:"getWFS",value:function(t){var e=t.getStyle().serialize();return"WFS*".concat(this.normalizeString(t.legend||t.name),"*").concat(t.url,"*").concat(t.namespace,":").concat(t.name,":*").concat(t.geometry||"","*").concat(t.ids||"","*").concat(t.cql||"","*").concat(e||"")}},{key:"getWMTS",value:function(t){var e=this.I.getProjection().code,n=null;try{n=t.getLegend()}catch(e){n=t.legend}return"WMTS*".concat(t.url,"*").concat(t.name,"*").concat(t.matrixSet||e,"*").concat(this.normalizeString(n),"*").concat(t.transparent,"*").concat(t.options.format||"image/png","*").concat(t.displayInLayerSwitcher,"*").concat(t.isQueryable(),"*").concat(t.isVisible())}},{key:"getPlugins",value:function(){return this.I.getPlugins().map((function(t){var e="";return M.utils.isFunction(t.getAPIRest)&&(e=t.getAPIRest()),e})).join("&")}},{key:"equals",value:function(t){return t instanceof l}},{key:"normalizeString",value:function(t){var e=t.replace(/,/g,"");return e=e.replace(/\*/g,"")}},{key:"accessibilityTab",value:function(t){var e=this;t.querySelectorAll('[tabindex="0"]').forEach((function(t){return t.setAttribute("tabindex",e.order)}))}}])&&c(e.prototype,n),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),l}(),v=n(0),y=n(1),w={en:v,es:y},j=function(){var t="es";return"function"==typeof M.language.getLang&&(t=M.language.getLang()),t},x=function(t){return"es"===t||"en"===t?w[t]:M.language.getTranslation(t).sharemap},N=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j(),n=x(e),r="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(e,"' has not been defined.")):r=t.split(".").reduce((function(t,e){return t[e]}),n),r},O=n(4),k=n.n(O);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var C=["filterLayers"];function T(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,a=void 0,a=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===S(a)?a:String(a)),r)}var i,a}function L(t,e){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=P(t);if(e){var i=P(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return A(this,n)}}function A(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(a,M.Plugin);var e,n,r,i=I(a);function a(t){var e,n=t.filterLayers,r=void 0===n?[]:n,o=T(t,C);if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=i.call(this),M.utils.isNullOrEmpty(o.baseUrl)&&console.warn("options.baseUrl is null or undefined."),e.I=null,e.A=[],e.h=o.baseUrl||"https://componentes.cnig.es/api-core/",!M.utils.isString(e.h))throw new Error("options.baseUrl is not string type.");return e.P=o.position||"BR",e.g=o.title||N("title"),e.v=o.text||N("text"),e.M=o.btn||"OK",e.j=o.copyBtn||N("copy"),e.N=o.copyBtnHtml||N("copy"),e.S=o.styles||{},e.C=o.overwriteStyles||!1,e.T=o.minimize||!1,e.D=o.tooltip||N("tooltip"),e.L=o.urlAPI||!1,e.order=o.order>=-1?o.order:null,e.filterLayers=void 0===o.shareLayer||!1===o.shareLayer?r:[],e.shareLayer=o.shareLayer||!1,e.options=o,e}return e=a,r=[{key:"getJSONTranslations",value:function(t){return"en"===t||"es"===t?"en"===t?v:y:M.language.getTranslation(t).sharemap}}],(n=[{key:"addTo",value:function(t){this.control=new g({baseUrl:this.h,title:this.g,text:this.v,btn:this.M,copyBtn:this.j,copyBtnHtml:this.N,primaryColor:this.S.primaryColor,secondaryColor:this.S.secondaryColor,tooltip:this.D,overwriteStyles:this.C,minimize:this.T,urlAPI:this.L,order:this.order,filterLayers:this.filterLayers,shareLayer:this.shareLayer}),this.A.push(this.control),this.I=t,this.U=new M.ui.Panel("ShareMap",{collapsible:!1,position:M.ui.position[this.P],className:"m-plugin-sharemap",tooltip:N("tooltipPanel"),order:this.order}),this.U.addControls(this.A),t.addPanels(this.U)}},{key:"destroy",value:function(){this.I.removeControls([this.control]);var t=[null,null,null,null,null,null,null,null,null,null,null,null,null,null];this.I=t[0],this.control=t[1],this.A=t[2],this.U=t[3],this.h=t[4],this.P=t[5],this.g=t[6],this.v=t[7],this.M=t[8],this.j=t[9],this.N=t[10],this.S=t[11],this.C=t[12],this.D=t[13]}},{key:"getControls",value:function(){return this.A}},{key:"name",get:function(){return"sharemap"}},{key:"baseUrl",get:function(){return this.h}},{key:"map",get:function(){return this.I}},{key:"position",get:function(){return this.P}},{key:"tooltip",get:function(){return this.D}},{key:"title",get:function(){return this.g}},{key:"text",get:function(){return this.v}},{key:"btn",get:function(){return this.M}},{key:"copyBtn",get:function(){return this.j}},{key:"copyBtnHtml",get:function(){return this.N}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.D,"*").concat(this.baseUrl,"*").concat(this.T,"*").concat(this.g,"*").concat(this.M,"*").concat(this.j,"*").concat(this.v,"*").concat(this.N,"*").concat(this.L,"*").concat(this.shareLayer)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(t){t(M.template.compileSync(k.a,{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/sharemap/images/"),translations:{help1:N("textHelp.help1"),help2:N("textHelp.help2"),help3:N("textHelp.help3"),help4:N("textHelp.help4"),help5:N("textHelp.help5"),help6:N("textHelp.help6"),help7:N("textHelp.help7")}}}))}))}}}])&&D(e.prototype,n),r&&D(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.plugin.ShareMap=U,window.M.control.ShareMapControl=g}]);
//# sourceMappingURL=sharemap-1.2.0.ol.min.js.map