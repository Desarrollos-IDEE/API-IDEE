(()=>{var e={167:e=>{e.exports='<div id="div-contenedor" class="m-control m-container m-selectiondraw">\r\n    <button id="point" class="g-plugin-selectordraw-pin-seleccionado" title="Buscar punto"></button>\r\n    <button id="polygon" class="g-plugin-selectordraw-poligono" title="Buscar polígono"></button>\r\n    <button id="clear" class="g-plugin-selectordraw-papelera" title="Eliminar búsqueda"></button>\r\n</div>'}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,o),i.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function n(t){var o=function(t,o){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,o||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}(t,"string");return"symbol"==e(o)?o:o+""}function r(t,o,n){return o=a(o),function(t,o){if(o&&("object"==e(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,i()?Reflect.construct(o,n||[],a(t).constructor):o.apply(t,n))}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i=function(){return!!e})()}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:o):r.value}},c.apply(null,arguments)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}var u=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),stroke:new ol.style.Stroke({color:"#3399CC",width:2}),image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),stroke:new ol.style.Stroke({color:"#3399CC",width:2}),radius:6})}),s=new M.impl.format.GeoJSON,p=function(e){function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r(this,o)).facadeControl=null,t.destProj=e,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(o,M.impl.Control),n=o,(i=[{key:"addTo",value:function(e,t){c(a(o.prototype),"addTo",this).call(this,e,t),this.map=e,this.olMap=e.getMapImpl()}},{key:"activate",value:function(e,t){var o=this;t.classList.add("activated");var n=this.map.getProjection().code,r=this.map.getLayers().find((function(e){return"__draw__"===e.name}));if(null!=r){var i=r.getImpl().getOL3Layer();if(i.setStyle(u),null!=i){var c=i.getSource();this.interaction_=new ol.interaction.Draw({source:c,type:e}),this.interaction_.on("drawend",(function(e){var t=e.feature.clone(),r=ol.sphere.getArea(t.getGeometry());t.getGeometry().transform(n,o.destProj);var i=s.writeFeatureObject(t);i.properties={area:{km:r/Math.pow(10,6),m:r}},o.facadeControl.fire("finished:draw",[i])})),this.olMap.addInteraction(this.interaction_)}}}},{key:"deactivate",value:function(e){e.forEach((function(e){return e.classList.remove("activated")})),this.olMap.removeInteraction(this.interaction_)}}])&&t(n.prototype,i),p&&t(n,p),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,p}(),f=o(167),y=o.n(f);const d=JSON.parse('{"exception":{"obsolete":"Developer message: M.plugin.SelectionDraw has been deprecated, use the M.plugin.VectorsManagement instead"},"tooltip":"Search by geometry","exception_selectiondrawcontrol":"The implementation used cannot create SelectionDrawImplControl controls"}'),b=JSON.parse('{"exception":{"obsolete":"Mensaje para el desarrollador: M.plugin.SelectionDraw ha quedado obsoleto, utilice en su lugar M.plugin.VectorsManagement"},"tooltip":"Búsqueda por geometría","exception_selectiondrawcontrol":"La implementación usada no puede crear controles SelectionDrawImplControl"}');var v={en:d,es:b},w=function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t="es","function"==typeof M.language.getLang&&(t=M.language.getLang()),t),n=function(e){return"es"===e||"en"===e?v[e]:M.language.getTranslation(e).selectiondraw}(o),r="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(o,"' has not been defined.")):r=e.split(".").reduce((function(e,t){return e[t]}),n),r};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}function O(e,t,o){return t=_(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,j()?Reflect.construct(t,o||[],_(e).constructor):t.apply(e,o))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}var S=function(e){function t(e){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M.utils.isUndefined(p)&&M.exception(w("exception_selectiondrawcontrol"));var n=new p(e.projection);return o=O(this,t,[n,"SelectionDraw"]),n.facadeControl=o,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,M.Control),o=t,n=[{key:"createView",value:function(e){var t=this;return console.warn(w("exception.obsolete")),new Promise((function(o){var n=M.template.compileSync(y()),r=n.querySelector("button#polygon"),i=n.querySelector("button#point"),c=n.querySelector("button#clear"),a=e.getLayers().find((function(e){return"__draw__"===e.name}));c.addEventListener("click",(function(){a.clear()})),i.addEventListener("click",(function(){var e="Point";t.activeGeometry===e?t.deactivate([i,r]):(t.deactivate([i,r]),t.activate(e,i))})),r.addEventListener("click",(function(){var e="Polygon";t.activeGeometry===e?t.deactivate([i,r]):(t.deactivate([i,r]),t.activate(e,r))})),document.onkeydown=function(e){var t=window.event?event:e;if(90===t.keyCode&&t.ctrlKey){var o=a.getImpl().getOL3Layer().getSource().getFeatures().length;a.getImpl().getOL3Layer().getSource().removeFeature(a.getImpl().getOL3Layer().getSource().getFeatures()[o-1])}},o(n)}))}},{key:"activate",value:function(e,t){this.activeGeometry=e,this.getImpl().activate(e,t)}},{key:"deactivate",value:function(e){this.activeGeometry="",this.getImpl().deactivate(e)}},{key:"equals",value:function(e){return e instanceof t}}],n&&g(o.prototype,n),r&&g(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,r}();function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function k(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function T(e,t,o){return(t=L(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function C(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function L(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}function D(e,t,o){return t=R(t),function(e,t){if(t&&("object"==E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,x()?Reflect.construct(t,o||[],R(e).constructor):t.apply(e,o))}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var N=function(e){function t(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=D(this,t);var n=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?k(Object(o),!0).forEach((function(t){T(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):k(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({collapsed:!1,collapsible:!0,position:"TL",projection:"EPSG:3857"},o);return e.map_=null,e.controls_=[],e.collapsed=n.collapsed||!1,e.collapsible=n.collapsible||!0,e.position=n.position||"TL",e.control_=new S(n),e.name=t.NAME,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,M.Plugin),o=t,r=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?d:b:M.language.getTranslation(e).selectiondraw}}],(n=[{key:"addTo",value:function(e){var t=this;this.map_=e,this.panel_=new M.ui.Panel("panel_selection_raw",{collapsible:this.collapsible,collapsed:this.collapsed,position:M.ui.position[this.position],collapsedButtonClass:"g-plugin-selectordraw-editar",className:"m-selectiondraw",tooltip:w("tooltip")}),this.panel_.addControls(this.control_),e.addPanels(this.panel_),this.control_.on("finished:draw",(function(e){t.fire("finished:draw",[e])}))}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]),this.map_=null,this.control_=null,this.panel_=null}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.collapsed,"*").concat(this.collapsible)}}])&&C(o.prototype,n),r&&C(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,r}();N.NAME="selectiondraw",window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.SelectionDraw=N,window.M.control.SelectionDrawControl=S,window.M.impl.control.SelectionDrawControl=p})()})();
//# sourceMappingURL=selectiondraw.ol.min.js.map