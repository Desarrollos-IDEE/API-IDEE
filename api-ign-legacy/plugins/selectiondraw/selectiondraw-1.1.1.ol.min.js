!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e){e.exports=JSON.parse('{"exception":{"obsolete":"Developer message: M.plugin.SelectionDraw has been deprecated, use the M.plugin.VectorsManagement instead"},"tooltip":"Search by geometry","exception_selectiondrawcontrol":"The implementation used cannot create SelectionDrawImplControl controls"}')},function(e){e.exports=JSON.parse('{"exception":{"obsolete":"Mensaje para el desarrollador: M.plugin.SelectionDraw ha quedado obsoleto, utilice en su lugar M.plugin.VectorsManagement"},"tooltip":"Búsqueda por geometría","exception_selectiondrawcontrol":"La implementación usada no puede crear controles SelectionDrawImplControl"}')},function(e,t){e.exports='<div id="div-contenedor" class="m-control m-container m-selectiondraw">\r\n    <button id="point" class="g-plugin-selectordraw-pin-seleccionado" title="Buscar punto"></button>\r\n    <button id="polygon" class="g-plugin-selectordraw-poligono" title="Buscar polígono"></button>\r\n    <button id="clear" class="g-plugin-selectordraw-papelera" title="Eliminar búsqueda"></button>\r\n</div>'},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(3);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,c=void 0,c=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===o(c)?c:String(c)),r)}var i,c}function i(){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=c(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}}).apply(this,arguments)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),stroke:new ol.style.Stroke({color:"#3399CC",width:2}),image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),stroke:new ol.style.Stroke({color:"#3399CC",width:2}),radius:6})}),p=new M.impl.format.GeoJSON,y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(u,M.impl.Control);var t,n,o,c=a(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this)).facadeControl=null,t.destProj=e,t}return t=u,(n=[{key:"addTo",value:function(e,t){i(f(u.prototype),"addTo",this).call(this,e,t),this.map=e,this.olMap=e.getMapImpl()}},{key:"activate",value:function(e,t){var n=this;t.classList.add("activated");var o=this.map.getProjection().code,r=this.map.getLayers().find((function(e){return"__draw__"===e.name}));if(null!=r){var i=r.getImpl().getOL3Layer();if(i.setStyle(s),null!=i){var c=i.getSource();this.interaction_=new ol.interaction.Draw({source:c,type:e}),this.interaction_.on("drawend",(function(e){var t=e.feature.clone(),r=ol.sphere.getArea(t.getGeometry());t.getGeometry().transform(o,n.destProj);var i=p.writeFeatureObject(t);i.properties={area:{km:r/Math.pow(10,6),m:r}},n.facadeControl.fire("finished:draw",[i])})),this.olMap.addInteraction(this.interaction_)}}}},{key:"deactivate",value:function(e){e.forEach((function(e){return e.classList.remove("activated")})),this.olMap.removeInteraction(this.interaction_)}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(),d=n(2),b=n.n(d),v=n(0),m=n(1),w={en:v,es:m},g=function(){var e="es";return"function"==typeof M.language.getLang&&(e=M.language.getLang()),e},h=function(e){return"es"===e||"en"===e?w[e]:M.language.getTranslation(e).selectiondraw},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g(),n=h(t),o="";return M.utils.isNullOrEmpty(n)?console.warn("The translation '".concat(t,"' has not been defined.")):o=e.split(".").reduce((function(e,t){return e[t]}),n),o};function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==j(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==j(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===j(i)?i:String(i)),o)}var r,i}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=T(e);if(t){var r=T(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(i,M.Control);var t,n,o,r=S(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M.utils.isUndefined(y)&&M.exception(O("exception_selectiondrawcontrol"));var n=new y(e.projection);return t=r.call(this,n,"SelectionDraw"),n.facadeControl=k(t),t}return t=i,(n=[{key:"createView",value:function(e){var t=this;return console.warn(O("exception.obsolete")),new Promise((function(n){var o=M.template.compileSync(b.a),r=o.querySelector("button#polygon"),i=o.querySelector("button#point"),c=o.querySelector("button#clear"),l=e.getLayers().find((function(e){return"__draw__"===e.name}));c.addEventListener("click",(function(){l.clear()})),i.addEventListener("click",(function(){"Point"===t.activeGeometry?t.deactivate([i,r]):(t.deactivate([i,r]),t.activate("Point",i))})),r.addEventListener("click",(function(){"Polygon"===t.activeGeometry?t.deactivate([i,r]):(t.deactivate([i,r]),t.activate("Polygon",r))})),document.onkeydown=function(e){var t=window.event?event:e;if(90===t.keyCode&&t.ctrlKey){var n=l.getImpl().getOL3Layer().getSource().getFeatures().length;l.getImpl().getOL3Layer().getSource().removeFeature(l.getImpl().getOL3Layer().getSource().getFeatures()[n-1])}},n(o)}))}},{key:"activate",value:function(e,t){this.activeGeometry=e,this.getImpl().activate(e,t)}},{key:"deactivate",value:function(e){this.activeGeometry="",this.getImpl().deactivate(e)}},{key:"equals",value:function(e){return e instanceof i}}])&&P(t.prototype,n),o&&P(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}();function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return(t=B(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,B(o.key),o)}}function B(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==x(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}function G(e,t){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=A(e);if(t){var r=A(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return F(this,n)}}function F(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(i,M.Plugin);var t,n,o,r=q(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I(this,i),e=r.call(this);var n=L({collapsed:!1,collapsible:!0,position:"TL",projection:"EPSG:3857"},t);return e.map_=null,e.controls_=[],e.collapsed=n.collapsed||!1,e.collapsible=n.collapsible||!0,e.position=n.position||"TL",e.control_=new R(n),e.name=i.NAME,e}return t=i,o=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?v:m:M.language.getTranslation(e).selectiondraw}}],(n=[{key:"addTo",value:function(e){var t=this;this.map_=e,this.panel_=new M.ui.Panel("panel_selection_raw",{collapsible:this.collapsible,collapsed:this.collapsed,position:M.ui.position[this.position],collapsedButtonClass:"g-plugin-selectordraw-editar",className:"m-selectiondraw",tooltip:O("tooltip")}),this.panel_.addControls(this.control_),e.addPanels(this.panel_),this.control_.on("finished:draw",(function(e){t.fire("finished:draw",[e])}))}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]),this.map_=null,this.control_=null,this.panel_=null}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position,"*").concat(this.collapsed,"*").concat(this.collapsible)}}])&&N(t.prototype,n),o&&N(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}();J.NAME="selectiondraw",window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.SelectionDraw=J,window.M.control.SelectionDrawControl=R,window.M.impl.control.SelectionDrawControl=y}]);
//# sourceMappingURL=selectiondraw-1.1.1.ol.min.js.map