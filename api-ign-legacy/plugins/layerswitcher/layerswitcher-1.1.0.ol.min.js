!function(e){var t={};function i(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=18)}([function(e){e.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create LayerswitcherControl.","extent":"Cannot get the extent of the layer","capabilities":"An error has occurred in obtaining the GetCapabilities document","ogcfeatures":"The provided url does not correspond to a valid layer type","only_http":"Only http services are allowed","only_https":"Only https services are allowed","no_http_https":"No http or https services allowed","valid_url":"You must provide a valid URL","empty":"The fields are empty","select_layer":"You must select at least one layer","no_results":"No layers found in this service","codsi":"An error occurred while consulting the CODSI catalog","codsi_no_results":"There are no results for your search"},"textHelp":{"help1":"The layer selector extension allows you to manage the layers displayed in a cartographic viewer.","help2":"This extension is customizable via parameters, so the extension can change from one viewer to another.","help3":"The different tools available in the layer selector are:","help4":"Add layer:","help5":"The first option is to enter the URL of a service in the text box. To do this, start from the IDEE services directory (https://www.idee.es/segun-tipo-de-servicio ) for example, using the Historical Satellite Mosaics service of Spain (https://wms-satelites-historicos.idee.es/satelites-historicos). When you click the search magnifying glass, a list of available layers appears in the service. In this example, we choose the \'filomena\' layer and add:","help6":"If you wanted more layers, you could select as many as you wanted. Once added, we would have the following appearance in the viewer:","help7":"Another way to load layers is from the IDEE service catalog (https://www.idee.es/csw-inspire-idee/srv/spa/catalog.search#/home). Click On the binoculars button, another text search engine and a list of possibilities will appear. For example, if we search for \'IGN administrative units\'","help8":"and we click on \'WMS of Administrative Units of Spain\', we can load the layers of the searched service:","help9":"Finally, layers can be loaded from a list of some available layers, which is configured by theme. In the example shown, the first edition of MTN 50 that is in cartography will be loaded:","help10":"The service layer selector will appear again, and the first edition of MTN 50 is marked and added to the map:","help11":"Once the layers are loaded into the map, you can work with them from the layer selector.","help12":"The first functionality would be to turn on the layers, this can be done from the yellow eye button that allows you to turn all of them on and off, or from the different green-red eye buttons to turn on or off just one layer:","help13":"Another functionality would be to delete the layer, from the trash can button.","help14":"Within the options of a visible layer, you have the tools to add transparency to the layer:","help15":"show layer legend:","help16":"center the viewer to the extent of the layer:","help17":"get more layer information:","help18":"and if the layer allows it, be able to apply another cartographic style:","help19":"The information relevant to the extension and its possible parameterization is documented in","help20":"The example of use of its parameters can be checked in"},"tooltip":"Layer Manager","info":"Information","layer_info":"Layer information","configure_layer":"Configure layer","close":"Close","load_ext_services":"Load geographic information layers","layers":"Layers","add_service":"Add service","show_hide":"Show/Hide legend","zoom":"Zoom to the layer","info_metadata":"View information","change_style":"Change style","remove_layer":"Remove layer from map","select_style":"Select a style","change":"Change","url_service":"Include URL of the service to load","query":"Consult","loaded_services":"Preloaded geographic information layers","codsi_services":"Services Catalog","clean":"Clean search","availables":"List of some available layers","title":"Title","name":"Name","abstract":"Abstract","provider":"Provider","service_info":"Service information (Capabilities)","download_center":"Download center","add":"Add","drag_drop":"Drag and drop to change display order","see_more":"Show dataset metadata","see_less":"Hide dataset metadata","service":"Service","metadata_abstract":"Abstract (metadata)","responsible":"Responsible","access_constraints":"Access constraints","use_constraints":"Use constraints","online_resources":"Online resources","show_service_info":"Show service information","hide_service_info":"Hide service information","hide_service":"Hide service","show_service":"Show service","show_all_services":"Show all services","hide_all_services":"Hide all services","type_service":"Tipo de servicio","filter_results":"Filter results","clean_filter":"Clean filter","filter_text":"Text to search","metadata":"Metadata","see_more_layer":"View more information about the layer (Metadata)","see_more_service":"View more service information (Metadata)","select_service":"Select layer","amount_results":"Get ","amount_results_2":" elements","bbox-select":"Find features within rendered map","no-limit":"Get all results","custom_query":"Custom query","no_results":"No results found","search":"Search","yes":"Sí","no":"No","filters":"Filters","other_filters":"Other filters","id_filter":"Filter by ID","warning":"WARNING: High limits are not recommended","add_btn":"Add","custom_query_btn":"More filters","apply_btn":"Apply","style":"Style","default_style":"Default style","selected":"selected","custom_query_warning":"WARNING: Filtering by \\"More filters\\" it is based on a draft standard. The result of the query may not be as desired.","check_results":"Check results","results_1_plural":"","results_2_plural":" features have been found.","results_1_singular":"","results_2_singular":" feature has been found.","legend":"Legend","legend_error":"Error in legend","data_layer":"Data for GeoJSON layer","n_obj_geo":"Number of geographical objects","extension":"Extension","loading":"Loading","attributes":"Attributes","values":"Values","attribution":"Attribute","description":"Description","minzoom":"Minimum zoom","maxzoom":"Maximum zoom","center":"Center","addAllLayers":"Add all services","previous":"Previous","next":"Next","separatedby":"Identifier separated by commas \',\'","placeHolderLegend":"Text displayed in TOC","upload_file":"Upload file"}')},function(e){e.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles LayerswitcherControl.","extent":"No se puede obtener la extensión de la capa","capabilities":"Ha ocurrido un error al obtener el documento GetCapabilities","ogcfeatures":"La url proporcionada no se corresponde con un tipo de capa válida","only_http":"Sólo se permiten servicios http","only_https":"Sólo se permiten servicios https","no_http_https":"No se permiten servicios http ni https","valid_url":"Debes indicar una URL válida","empty":"Los campos están vacíos","select_layer":"Debes seleccionar al menos una capa","no_results":"No se han encontrado capas en este servicio","codsi":"Ha ocurrido un error al consultar el catálogo CODSI","codsi_no_results":"No hay resultados para su búsqueda"},"textHelp":{"help1":"La extensión selector de capas permite gestionar las capas que se muestran en un visualizador cartográfico.","help2":"Esta extensión es personalizable mediante parámetros, por lo que la extensión puede cambiar de un visualizador a otro.","help3":"Las distintas herramientas disponibles en el selector de capas son:","help4":"Añadir capa:","help5":"La primer opción es la de introducir la URL de un servicio en la caja de texto. Para ello, partiendo del directorio de servicios IDEE (https://www.idee.es/segun-tipo-de-servicio) por ejemplo, utilizando el servicio de Mosaicos de Satélite históricos de España (https://wms-satelites-historicos.idee.es/satelites-historicos). Al darle a la lupa de buscar, aparece un listado de capas disponibles en el servicio. En este ejemplo, se elije la capa \'filomena\' y se le da a añadir:","help6":"En el caso que se quisieran más capas, se podrían seleccionar todas las que se quisieran. Una vez añadida, tendríamos el siguiente aspecto en el visualizador:","help7":"Otra forma de cargar capas es desde el catálogo de servicios d ela IDEE (https://www.idee.es/csw-inspire-idee/srv/spa/catalog.search#/home). Haciendo click sobre el botón de los prismáticos, aparecerá otro buscador por texto y un listado de posibilidades. Por ejemplo si buscamos \'unidades administrativas IGN\'","help8":"y hacemos click sobre \'WMS de Unidades Administrativas de España\', podremos cargar las capas del servicio buscado:","help9":"Por último, se pueden cargar capas desde un listado de algunas capas disponibles, que se configura por temáticas. En el ejemplo mostrado, se va a cargar la primera edición del MTN 50 que se encuentra en cartografía:","help10":"Aparecerá de nuevo el selector de capas del servicio, y se marca la primera edición del MTN 50 y se añade al mapa:","help11":"Una vez se tienen cargadas en el mapa las capas, se puede trabajar con ellas desde el selector de capas.","help12":"La primera funcionalidad sería la de encender las capas, esto se puede hacer desde el botón ojo amarillo que permite encender y apagar todas, o desde los distintos botones ojo verde-rojo para encender o apagar solo una capa:","help13":"Otra funcionalidad sería eliminar la capa, desde el botón del cubo de basura.","help14":"Dentro de las opciones de una capa visible, se tienen las herramientas de añadir transparencia a la capa:","help15":"mostrar la leyenda de la capa:","help16":"centrar el visualizador a la extensión de la capa:","help17":"obtener más información de la capa:","help18":"y en el caso que la capa lo permita, poder aplicarle otro estilo cartográfico:","help19":"La información relevante a la extensión y su posible parametrización está documentada en","help20":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Gestor de capas","info":"Información","layer_info":"Información de la capa","configure_layer":"Configurar capa","close":"Cerrar","load_ext_services":"Cargar capas de información geográfica","layers":"Capas","add_service":"Añadir servicio","show_hide":"Mostrar/Ocultar leyenda","zoom":"Zoom a la capa","info_metadata":"Ver información","change_style":"Cambiar estilo","remove_layer":"Eliminar capa del mapa","select_style":"Selecciona un estilo","change":"Cambiar","url_service":"Incluir URL del servicio a cargar","query":"Consultar","loaded_services":"Capas de información geográfica","codsi_services":"Catálogo de Servicios","clean":"Limpiar búsqueda","availables":"Listado de algunas capas disponibles","title":"Título","name":"Nombre","abstract":"Resumen","provider":"Proveedor","service_info":"Información del servicio (Capabilities)","download_center":"Centro de descargas","add":"Añadir","drag_drop":"Arrastre y suelte para cambiar el orden de visualización","see_more":"Mostrar metadato del conjunto de datos","see_less":"Ocultar metadato del conjunto de datos","service":"Servicio","metadata_abstract":"Resumen (metadato)","responsible":"Responsable","access_constraints":"Restricciones de acceso","use_constraints":"Restricciones de uso","online_resources":"Recursos online","show_service_info":"Mostrar información del servicio","hide_service_info":"Ocultar información del servicio","hide_service":"Ocultar servicio","show_service":"Mostrar servicio","show_all_services":"Mostrar todos los servicios","hide_all_services":"Ocultar todos los servicios","type_service":"Tipo de servicio","filter_results":"Filtrar resultados","clean_filter":"Limpiar filtro","filter_text":"Texto a buscar","metadata":"Metadatos","see_more_layer":"Ver más información de la capa","see_more_service":"Ver más información del servicio","select_service":"Selecciona una capa","amount_results":"Obtener ","amount_results_2":" elementos","bbox-select":"Solo de la extensión actual","no-limit":"Obtener todos los elementos","custom_query":"Consulta personalizada","no_results":"No se han encontrado resultados","search":"Buscar","yes":"Sí","no":"No","filters":"Filtros","other_filters":"Otros filtros","id_filter":"Filtrar por ID","warning":"ADVERTENCIA: No se recomiendan límites altos","add_btn":"Añadir","custom_query_btn":"Más filtros","apply_btn":"Aplicar","style":"Estilo","default_style":"Estilo predeterminado","selected":"seleccionado","custom_query_warning":"ATENCIÓN: La opción buscar por «Más filtros» se basa en un estándar en estado borrador. El resultado de la consulta puede no ser el deseado.","check_results":"Comprobar resultados","results_1_plural":"Se han encontrado ","results_2_plural":" features","results_1_singular":"Se ha encontrado ","results_2_singular":" feature","legend":"Leyenda","legend_error":"Error en la leyenda","data_layer":"Datos para la capa","n_obj_geo":"Número de objetos geográficos","extension":"Extensión","loading":"Cargando","attributes":"Atributos","values":"Valores","attribution":"Atributo","description":"Descripción","minzoom":"Zoom mínimo","maxzoom":"Zoom máximo","center":"Centro","addAllLayers":"Añadir todos los servicios","previous":"Anterior","next":"Siguiente","separatedby":"Identificador separados por comas \',\'","placeHolderLegend":"Texto que se muestra en el TOC","upload_file":"Subir fichero"}')},function(e,t){e.exports='<div id="m-layerswitcher-ogcCContainer">\n    <div>\n        <select tabindex="0" id="m-layerswitcher-ogc-vectors-select">\n            <option disabled="disabled" value="">{{translations.select_service}}</option>\n            {{#each layers}}\n                {{#if ../selectedLayer}}\n                    {{#lt @index ../selectedLayer }}\n                        <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option>\n                    {{/lt}}\n                    {{#gt @index ../selectedLayer }}\n                        <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option>\n                    {{/gt}}\n                    {{#eq @index ../selectedLayer }}\n                        <option data-name="{{this.title}}" value="{{this.id}}" selected>{{this.title}}</option>\n                    {{/eq}}\n                {{else}}\n                    <option data-name="{{this.title}}" value="{{this.id}}">{{this.title}}</option>\n                {{/if}}\n            {{/each}}\n        </select>\n    </div>\n    <div class="btn-container"><br>\n        <fieldset tabindex="0" class="m-layerswitcher-ogc-fieldset-customquery">\n            <legend>{{translations.filters}}</legend>\n            <label class="m-layerswitcher-ogc-label-customquery">\n                <input tabindex="0" type="radio" name="m-layerswitcher-ogc-filter" value="id" class="m-layerswitcher-ogc-input-customquery" id="m-layerswitcher-ogc-filter-id-input" {{#unless filterByOtherFilters}}checked{{/unless}}>\n                &nbsp;{{translations.id_filter}}\n            </label>\n            <br><br>\n            <label class="m-layerswitcher-ogc-label-customquery">\n                <input tabindex="0" type="radio" name="m-layerswitcher-ogc-filter" value="others" class="m-layerswitcher-ogc-input-customquery" {{#if filterByOtherFilters}}checked{{/if}}>\n                &nbsp;{{translations.other_filters}}\n            </label>\n            <br><br>\n            {{#unless filterByOtherFilters}}\n                <fieldset tabindex="0" id="m-layerswitcher-ogc-filter-id" style="display:block;" class="m-layerswitcher-ogc-filter-custom-query">\n            {{else}}\n                <fieldset tabindex="0" id="m-layerswitcher-ogc-filter-id" style="display:none;" class="m-layerswitcher-ogc-filter-custom-query">\n            {{/unless}}\n            <div id="m-layerswitcher-ogc-search-form-id">\n                <div id="m-layerswitcher-ogc-form-input"><label tabindex="0" for="m-layerswitcher-ogc-search-form-ID" class="m-layerswitcher-ogc-search-form-id">ID</label><input type="text" class="m-layerswitcher-ogc-search-form-ID" id="m-layerswitcher-ogc-search-form-ID" value="{{this.prevID}}"><br /></div>\n            </div>\n        </fieldset>\n\n\n        {{#if filterByOtherFilters}}\n            <fieldset tabindex="0" id="m-layerswitcher-ogc-other-filters" style="display:block;" class="m-layerswitcher-ogc-filter-custom-query">\n        {{else}}\n            <fieldset tabindex="0" id="m-layerswitcher-ogc-other-filters" style="display:none;" class="m-layerswitcher-ogc-filter-custom-query">\n        {{/if}}\n        <div id="m-layerswitcher-ogc-search-formothers">\n            <div tabindex="0"><label>{{translations.amount_results}} </label><input tabindex="0" type="text" id="m-layerswitcher-ogc-limit-items" value="{{#if limit}}{{limit}}{{else}}10{{/if}}" step="1" class="fieldset-limit"><label>{{translations.amount_results_2}} </label></div><br>\n            <div><label class="fieldset-bbox" tabindex="0">{{translations.bbox_select}}<input tabindex="0" type="checkbox" id="m-layerswitcher-ogc-search-bbox" {{#if bbox}}checked{{/if}}></label>\n            </div><br>\n            {{#if summary}}\n                <div id="m-layerswitcher-ogc-summary">\n                    {{#if filterByOtherFilters}}\n                        <div>{{translations.other_filters}}\n                    {{/if}}\n                    <ul>\n                        {{#each summary}}\n                            <li>{{@key}} = {{this}}</li>\n                        {{/each}}\n                    </ul>\n                </div>\n                <br>\n        </div>\n\n        {{/if}}\n\n        <div tabindex="0" class="m-layerswitcher-ogc-warning-msg">{{translations.warning}}</div></br>\n        <button class="m-layerswitcher-common-btn" id="m-layerswitcher-ogc-custom-query-button"> {{translations.custom_query_btn}}</button>\n    </div>\n    </fieldset>\n    </fieldset>\n    <p tabindex="0" id="m-layerswitcher-ogc-check-results" style="display: none;"></p>\n    <div class="m-layerswithcer-ogc-buttons">\n        <button tabindex="0" class="m-layerswitcher-common-btn" id="m-layerswitcher-ogc-select-button"> {{translations.add_btn}}</button>\n        <button tabindex="0" class="m-layerswitcher-common-btn" id="m-layerswitcher-ogc-check-button" style="margin-right: 0;"> {{translations.check_results}}</button>\n    </div>\n</div>\n</div>'},function(e,t){e.exports='<main class="m-control m-layerswitcher-container">\n        <header id="m-layerswitcher-title" class="m-layerswitcher-title">\n            <h1 aria-label="Plugin layerswitcher" tabindex="0" role="text">{{translations.layers}}</h1>\n            <button {{#if isAddLayers}}style="display: none"{{/if}} tabindex="0" id="m-layerswitcher-addlayers" title="{{translations.add_service}}"\n                class="m-layerswitcher-addservice">{{translations.add}}</button>\n        </header>\n    <section tabindex="0" aria-label="Plugin layerswitcher" id="m-layerswitcher-content" class="m-layerswitcher-content"></section>\n</main>'},function(e,t){e.exports='{{#*inline "layerswitcherLayer"}}\n    {{#each layers}}\n        <li tabindex="0" class="m-layerswitcher-layer" aria-label="{{translations.layers}}">\n            <div class="m-layerswitcher-title-layer">\n                {{#if ../isEyes}}\n                    <div class="m-layerswitcher-visible-control">\n                        <button title="{{#if visible}}{{../translations.hide_service}}{{^}}{{../translations.show_service}}{{/if}}" aria-label="{{#if visible}}{{../translations.hide_service}}{{^}}{{../translations.show_service}}{{/if}}" tabindex="0" data-select-type="eye" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-check {{#if visible}}m-layerswitcher-icons-ver{{^}}m-layerswitcher-icons-ocultar{{/if}} {{#if outOfRange}}m-layerswitcher-outOfRange{{/if}}">\n                        </button>\n                    </div>\n                {{/if}}\n                {{#if ../isRadio}}\n                    <div class="m-layerswitcher-visible-control">\n                        <input aria-label="{{#if visible}}{{../translations.hide_service}}{{^}}{{../translations.show_service}}{{/if}}" tabindex="0" {{#eq checkedLayer "true"}}checked{{/eq}} type="radio" data-select-type="radio" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-check {{#if outOfRange}}m-layerswitcher-outOfRange-input{{/if}}" name="m-layerswitcher-radioLayers" value="{{type}}-{{id}}">\n                    </div>\n                {{/if}}\n                <div class="m-layerswitcher-visible-typeContent">\n                    <table>\n                        <tbody>\n                            <tr>\n                                <td><span {{#if ../displayLabel}}style="display: none"{{/if}} aria-label="Tipo de servicio {{type}}" tabindex="0" class="m-layerswitcher-type">{{type}}</span></td>\n                                <td><span tabindex="0" class="m-layerswitcher-title-box">{{title}}</span></td>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n                {{#if ../isDelete}}\n                    <button title="{{../translations.remove_layer}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" tabindex="0" aria-label="{{translations.remove_layer}}" class="m-layerswitcher-icons-delete">\n                    </button>\n                {{/if}}\n            </div>\n            {{#if visible}}\n                <div class="m-layerswitcher-tools">\n                    {{#if ../isTransparency}}\n                        <div class="m-layerswitcher-opacity">\n                            <input tabindex="0" type="range" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-transparency" min="0" max="1" step="0.1" value="{{opacity}}" {{#unless visible}} disabled {{/unless}} {{#if outOfRange}} disabled {{/if}} />\n                        </div>\n                    {{/if}}\n                    <div class="m-layerswitcher-action-tools">\n                        {{#if ../isLegend}}\n                            <button tabindex="0" title="{{../translations.show_hide}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-icons-image"></button>\n                        {{/if}}\n                        {{#if ../isZoom}}\n                            <button tabindex="0" title="{{../translations.zoom}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-icons-target"></button>\n                        {{/if}}\n                        {{#if ../isInformation}}\n                            <button tabindex="0" title="{{../translations.info_metadata}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-icons-info"></button>\n                        {{/if}}\n                        {{#if ../isStyle}}\n                            {{#if hasStyles}}\n                                <button tabindex="0" title="{{../translations.change_style}}" data-layer-type="{{type}}" data-layer-name="{{id}}" data-layer-url="{{url}}" class="m-layerswitcher-icons-style"></button>\n                            {{/if}}\n                        {{/if}}\n                    </div>\n                </div>\n                <div class="m-layerswitcher-legend">\n                    <img></img>\n                </div>\n            {{/if}}\n        </li>\n    {{/each}}\n    {{/inline}}\n    <div>\n        {{#gt overlayLayers.length 0}}\n            {{#if isEyes}}\n                <button {{#if isStatusLayers}}style="display: none"{{/if}} title="{{#if allVisible}}{{translations.show_all_services}}{{^}}{{translations.hide_all_services}}{{/if}}" aria-label="{{#if allVisible}}{{translations.show_all_services}}{{^}}{{translations.hide_all_services}}{{/if}}" tabindex="0" id="m-layerswitcher-hsalllayers" class="m-layerswitcher-allstatus {{#if allVisible}}m-layerswitcher-icons-ver{{^}}m-layerswitcher-icons-ocultar{{/if}}"></button>\n            {{/if}}\n            <ul class="m-layerswitcher-ullayers">\n                {{> layerswitcherLayer layers=overlayLayers}}\n            </ul>\n        {{/gt}}\n    </div>'},function(e,t){e.exports='<div>\n    <div class="m-layerswitcher-info-cap">\n        <p tabindex="0"><span>{{translations.title}}:</span>&nbsp; {{title}}</p>\n        <p tabindex="0"><span>{{translations.name}}:</span>&nbsp; {{name}}</p>\n\n        <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.abstract}}:</span></p>\n        <div tabindex="0">\n            {{abstract}}\n        </div>\n        {{#if provider}}\n            <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.provider}}:</span></p>\n        {{/if}}\n        {{#if provider}}\n            <div tabindex="0">\n                {{{provider}}}\n            </div>\n        {{/if}}\n        {{#if hasMetadata }}\n            <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.metadata}}:</span></p>\n        {{/if}}\n        {{#if metadata}}\n            <p><a tabindex="0" class="m-layerswitcher-provider-link" target="_blank" href="{{metadata}}">{{translations.see_more_layer}}</a></p>\n        {{/if}}\n        {{#if metadata_service}}\n            <p><a tabindex="0" class="m-layerswitcher-provider-link" target="_blank" href="{{metadata_service}}">{{translations.see_more_service}}</a></p>\n        {{/if}}\n    </div>\n    <div class="m-layerswitcher-btn-container">\n        {{#if capabilities}}\n            <a tabindex="0" class="m-layerswitcher-common-btn" href="{{capabilities}}" target="_blank">{{translations.service_info}}</a>\n        {{/if}}\n        {{#if downloadCenter}}\n            <a tabindex="0" class="m-layerswitcher-common-btn" href="{{downloadCenter}}" target="_blank">{{translations.download_center}}</a>\n        {{/if}}\n    </div>\n</div>'},function(e,t){e.exports='<div>\n    <div class="m-layerswitcher-info-cap">\n        <p tabindex="0"><span>{{translations.title}}:</span>&nbsp; {{title}}</p>\n\n        <p class="m-layerswitcher-otherTitles" tabindex="0"><span>{{translations.abstract}}:</span></p>\n        <div tabindex="0">\n            {{abstract}}\n        </div>\n        {{#if metadata}}\n            <p><a tabindex="0" class="m-layerswitcher-provider-link" target="_blank" href="{{metadata}}">{{translations.see_more_layer}}</a></p>\n        {{/if}}\n        {{#gt attributes.length 0 }}\n            <div id="m-layerswitcher-tfoot">\n                <p tabindex="0"><span>{{translations.attributes}}:</span>&nbsp;</p>\n                <div class="m-layerswitcher-pagecontrolscontainer">\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-izquierda m-layerswitcher-hidden" id="m-layerswitcher-previous" aria-label="{{translations.previous}}"></span>\n                    </div>\n                    <span tabindex="0" id="m-layerswitcher-pageinfo">Página {{pages.actual}} de {{pages.total}}</span>\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-derecha m-layerswitcher-hidden" id="m-layerswitcher-next" aria-label="{{translations.next}}"></span>\n                    </div>\n                </div>\n            </div>\n            <table id="m-layerswitcher-table" class="m-layerswitcher-tablepagination">\n                <thead>\n                    <tr>\n                        {{#each headerAtt}}\n                            <td tabindex="0">{{this}}</td>\n                        {{/each}}\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#each attributes}}\n                        <tr>\n                            {{#each this.properties}}\n                                <td tabindex="0"> {{{this}}}</td>\n                            {{/each}}\n                        </tr>\n                    {{/each}}\n                </tbody>\n            </table>\n        {{/gt}}\n    </div>\n</div>'},function(e,t){e.exports='<div>\n    <div class="m-layerswitcher-info-cap">\n        <p tabindex="0"><span>{{translations.title}}:</span>&nbsp; {{title}}</p>\n        <p tabindex="0"><span>{{translations.name}}:</span>&nbsp; {{name}}</p>\n        {{#if numberFeatures}}\n            <p tabindex="0"><span>{{translations.n_obj_geo}}:</span>&nbsp; {{numberFeatures}}</p>\n        {{/if}}\n        {{#if extension}}\n            <p tabindex="0"><span>{{translations.extension}}:</span>&nbsp; [{{extension}}]</p>\n        {{/if}}\n        {{#if others.id}}\n            <p tabindex="0"><span>ID:</span>&nbsp; {{others.id}}</p>\n        {{/if}}\n        {{#if others.attribution}}\n            <p tabindex="0"><span>{{translations.attribution}}:</span>&nbsp; {{others.attribution}}</p>\n        {{/if}}\n        {{#if others.description}}\n            <p tabindex="0"><span>{{translations.description}}:</span>&nbsp; {{others.description}}</p>\n        {{/if}}\n        {{#if others.minzoom}}\n            <p tabindex="0"><span>{{translations.minzoom}}:</span>&nbsp; {{others.minzoom}}</p>\n        {{/if}}\n        {{#if others.maxzoom}}\n            <p tabindex="0"><span>{{translations.maxzoom}}:</span>&nbsp; {{others.maxzoom}}</p>\n        {{/if}}\n        {{#if others.center}}\n            <p tabindex="0"><span>{{translations.center}}:</span>&nbsp; [{{others.center}}]</p>\n        {{/if}}\n        {{#gt attributes.length 0 }}\n            <div id="m-layerswitcher-tfoot">\n                <p tabindex="0"><span>{{translations.attributes}}:</span>&nbsp;</p>\n                <div class="m-layerswitcher-pagecontrolscontainer">\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-izquierda m-layerswitcher-hidden" id="m-layerswitcher-previous" aria-label="{{translations.previous}}"></span>\n                    </div>\n                    <span id="m-layerswitcher-pageinfo">Página {{pages.actual}} de {{pages.total}}</span>\n                    <div class="m-layerswitcher-fixedwidthbutton">\n                        <span tabindex="0" class="g-cartografia-flecha-derecha m-layerswitcher-hidden" id="m-layerswitcher-next" aria-label="{{translations.next}}"></span>\n                    </div>\n                </div>\n            </div>\n            <table id="m-layerswitcher-table" class="m-layerswitcher-tablepagination">\n                <thead>\n                    <tr>\n                        {{#each headerAtt}}\n                            <td tabindex="0">{{this}}</td>\n                        {{/each}}\n                    </tr>\n                </thead>\n                <tbody>\n                    {{#each attributes}}\n                        <tr>\n                            {{#each this.properties}}\n                                <td tabindex="0"> {{{this}}}</td>\n                            {{/each}}\n                        </tr>\n                    {{/each}}\n                </tbody>\n            </table>\n        {{/gt}}\n    </div>\n</div>'},function(e,t){e.exports='<div id="m-layerswitcher-style">\n    <div tabindex="0" class="m-layerswitcher-style-container">\n        <select tabindex="0" id="m-layerswitcher-style-select">\n            <option disabled="disabled" value="">{{translations.select_style}}</option>\n            {{#if isVectorLayer}}\n                {{#each styles}}\n                    {{#if this.options_.name}}\n                        <option value="{{@index}}">{{this.options_.name}}</option>\n                    {{else}}\n                        {{#eq @index 0}}\n                            <option value="{{@index}}">{{../translations.default_style}} </option>\n                        {{/eq}}\n                        {{#gt @index 0}}\n                            <option value="{{@index}}">{{../translations.style}} {{@index}}\n                        {{/gt}}\n                    {{/if}}\n\n                {{/each}}\n            {{else}}\n                {{#each styles}}\n                    <option value="{{Name}}">{{Title}}</option>\n                {{/each}}\n            {{/if}}\n        </select>\n    </div>\n    <div class="m-layerswitcher-style-btn-container">\n        <button tabindex="0" class="m-layerswitcher-style-common-btn">{{translations.change}}</button>\n    </div>\n</div>'},function(e,t){e.exports='<div class="m-layerswitcher-addservices">\n    <div class="m-layerswitcher-search-panel">\n        <div class="input-container">\n            <input tabindex="0" type="text" id="m-layerswitcher-addservices-search-input" placeholder="{{translations.url_service}}" class="m-layerswitcher-input-search" />\n            <span>\n                <button tabindex="0" id="m-layerswitcher-addservices-search-btn" class="m-layerswitcher-icons-zoom m-search-btn" title="{{translations.query}}"></button>\n                \x3c!--<button tabindex="0" id="m-layerswitcher-addservices-fileurl-btn" class="m-layerswitcher-icons-doc-text m-search-btn" title="{{translations.query}}"></button>--\x3e\n                {{#if codsiActive}}\n                    <button tabindex="0" role="button" id="m-layerswitcher-addservices-codsi-btn" class="m-layerswitcher-icons-codsi m-search-btn" title="{{translations.codsi_services}}"></button>\n                {{/if}}\n\n                {{#if hasPrecharged}}\n                    <button tabindex="0" role="button" id="m-layerswitcher-addservices-list-btn" class="m-layerswitcher-icons-lista m-search-btn" title="{{translations.loaded_services}}"></button>\n                {{/if}}\n                <label tabindex="0" id="labelFileInput" for="m-layerswitcher-addservices-file-input" class="m-layerswitcher-icons-upload" title="{{translations.upload_file}}"></label>\n                <input tabindex="0" type="file" id="m-layerswitcher-addservices-file-input" accept="{{accept}}" style="display: none;">\n            </span>\n        </div>\n        <div id="m-layerswitcher-ogcCContainer"></div>\n        <div id="m-layerswitcher-layerContainer"></div>\n    </div>\n    <div id="m-layerswitcher-addservices-suggestions" class="m-layerswitcher-addservices-suggestions">\n        <table>\n            {{#if precharged}}\n            <thead>\n                <tr>\n                    <th tabindex="0">{{translations.availables}}</th>\n                </tr>\n            </thead>\n            {{/if}}\n            <tbody>\n                {{#each precharged.groups}}\n                    <tr>\n                        <td>\n                            <button tabindex="0" role="button" class="m-layerswitcher-suggestion-caret">{{name}}</button>\n                            <ul class="m-layerswitcher-suggestion-group">\n                                {{#each services}}\n                                    <li><button tabindex="0" class="m-layerswitcher-suggestion" data-service-type="{{type}}" data-link="{{url}}">{{name}}</button></li>\n                                {{/each}}\n                            </ul>\n                        </td>\n                    </tr>\n                {{/each}}\n                {{#each precharged.services}}\n                    <tr>\n                        <td><button tabindex="0" class="m-layerswitcher-suggestion" data-service-type="{{type}}" data-link="{{url}}">{{name}}</button></td>\n                    </tr>\n                {{/each}}\n            </tbody>\n        </table>\n    </div>\n   \n    <div id="m-layerswitcher-addservices-codsi" style="display: none;">\n        <p><a tabindex="0" href="https://www.idee.es/csw-inspire-idee/srv/spa/catalog.search#/home" target="_blank">{{translations.codsi_services}}</a></p>\n        <div class="m-layerswitcher-addservices-codsi-search-panel">\n            <input tabindex="0" type="text" id="m-layerswitcher-addservices-codsi-search-input" placeholder="{{translations.filter_text}}" class="m-input-search" />\n            <span tabindex="0" role="button" id="m-layerswitcher-addservices-codsi-filter-btn" class="m-layerswitcher-icons-zoom m-filter-btn" title="{{translations.filter_results}}"></span>\n            <span tabindex="0" role="button" id="m-layerswitcher-addservices-codsi-clean-btn" class="m-layerswitcher-icons-papelera m-clean-btn" title="{{translations.clean_filter}}"></span>\n        </div>\n        <div>\n            <table>\n                <tbody id="m-layerswitcher-addservices-codsi-results"></tbody>\n            </table>\n        </div>\n        <div id="m-layerswitcher-addservices-codsi-pagination">\n        </div>\n    </div>\n    <div id="m-layerswitcher-addservices-results"></div>\n</div>'},function(e,t){e.exports='<div>\n    <div class="m-layerswitcher-service-capabilities">\n        {{#if showgeneral}}\n            <p tabindex="0" class="m-layerswitcher-show-capabilities"><button tabindex="0" class="m-layerswitcher-icons-desplegar"></button>&nbsp;{{translations.show_service_info}} {{type}}</p>\n            <div class="m-layerswitcher-capabilities-container">\n                {{#if serviceCapabilities.title}}\n                    <p><span tabindex="0">{{translations.title}}:</span></p>\n                {{/if}}\n                {{#if serviceCapabilities.title}}\n                    <div tabindex="0">\n                        {{serviceCapabilities.title}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilities.abstract}}\n                    <p>\n                        <span tabindex="0">{{translations.abstract}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilities.abstract}}\n                    <div tabindex="0">\n                        {{serviceCapabilities.abstract}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilities.contact}}\n                    <p>\n                        <span tabindex="0">{{translations.responsible}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilities.contact}}\n                    <div tabindex="0">\n                        {{{serviceCapabilities.contact}}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilities.accessConstraints}}\n                    <p>\n                        <span tabindex="0">{{translations.access_constraints}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilities.accessConstraints}}\n                    <div tabindex="0">\n                        {{serviceCapabilities.accessConstraints}}\n                    </div>\n                {{/if}}\n            </div>\n        {{/if}}\n        {{#if isWFS}}\n            <p tabindex="0" class="m-layerswitcher-show-capabilities-wfs"><button tabindex="0" class="m-layerswitcher-icons-desplegar"></button>&nbsp;{{translations.show_service_info}} WFS</p>\n            <div class="m-layerswitcher-capabilities-container-wfs">\n                {{#if serviceCapabilitieswfs.title}}\n                    <p><span tabindex="0">{{translations.title}}:</span></p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.title}}\n                    <div tabindex="0">\n                        {{serviceCapabilitieswfs.title}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilitieswfs.abstract}}\n                    <p>\n                        <span tabindex="0">{{translations.abstract}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.abstract}}\n                    <div tabindex="0">\n                        {{serviceCapabilitieswfs.abstract}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilitieswfs.contact}}\n                    <p>\n                        <span tabindex="0">{{translations.responsible}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.contact}}\n                    <div tabindex="0">\n                        {{{serviceCapabilitieswfs.contact}}}\n                    </div>\n                {{/if}}\n\n                {{#if serviceCapabilitieswfs.accessConstraints}}\n                    <p>\n                        <span tabindex="0">{{translations.access_constraints}}:</span>\n                    </p>\n                {{/if}}\n                {{#if serviceCapabilitieswfs.accessConstraints}}\n                    <div tabindex="0">\n                        {{serviceCapabilitieswfs.accessConstraints}}\n                    </div>\n                {{/if}}\n            </div>\n        {{/if}}\n    </div>\n    <div class="m-layerswitcher-table-results">\n        <div class="m-layerswitcher-table-container">\n            {{#if showgeneral}}\n                <table id="m-layerswitcher-all">\n                    <thead>\n                        <tr tabindex="0">\n                            <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall" class="m-layerswitcher-icons-check"></button></th>\n                            <th>{{translations.layers}} {{type}}</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {{#each result}}\n                            <tr tabindex="0">\n                                <td><span role="button" aria-label="{{translations.add_service}}" tabindex="0" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices m-layerswitcher-icons-check"></span></td>\n                                <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{abstract}}">{{legend}}</td>\n                            </tr>\n                        {{/each}}\n                    </tbody>\n                </table>\n            {{/if}}\n            {{#if isWFS}}\n                <table id="m-layerswitcher-wfs">\n                    <thead>\n                        <tr tabindex="0">\n                            <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall-wfs" class="m-layerswitcher-icons-check"></button></th>\n                            <th>{{translations.layers}} WFS</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {{#each layersWFS}}\n                            <tr tabindex="0">\n                                <td><span role="button" aria-label="{{translations.add_service}}" tabindex="0" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices-wfs m-layerswitcher-icons-check"></span></td>\n                                <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{title}}">{{title}}</td>\n                            </tr>\n                        {{/each}}\n                    </tbody>\n                </table>\n            {{/if}}\n        </div>\n        <div class="button">\n            <button tabindex="0" type="button" class="m-layerswitcher-addservices-add m-layerswitcher-common-btn">{{translations.add}}</button>\n        </div>\n    </div>\n</div>'},function(e,t){e.exports='<div id="m-layerswitcher-layerContainer">\n    {{#eq type \'geojson\'}}\n        <p>{{translations.data_layer}} GeoJSON</p>\n    {{/eq}}\n    {{#eq type \'osm\'}}\n        <p>{{translations.data_layer}} OSM</p>\n    {{/eq}}\n    {{#eq type \'tms\'}}\n        <p>{{translations.data_layer}} TMS</p>\n    {{/eq}}\n    {{#eq type \'xyz\'}}\n        <p>{{translations.data_layer}} XYZ</p>\n    {{/eq}}\n    {{#eq type \'mvt\'}}\n        <p>{{translations.data_layer}} MVT</p>\n        {{#gt layers.length 0}}\n            <div id="m-layerswitcher-addservices-results">\n                <div class="m-layerswitcher-table-results">\n                    <div class="m-layerswitcher-table-container">\n                        <table id="m-layerswitcher-all">\n                            <thead>\n                                <tr>\n                                    <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall" class="m-layerswitcher-icons-check"></button></th>\n                                    <th>{{translations.layers}}</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {{#each layers}}\n                                    <tr tabindex="0">\n                                        <td><span tabindex="0" aria-label="{{translations.add_service}}" role="button" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices m-layerswitcher-icons-check"></span></td>\n                                        <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{abstract}}">{{name}}</td>\n                                    </tr>\n                                {{/each}}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        {{/gt}}\n    {{/eq}}\n    {{#eq type \'kml\'}}\n        <p>{{translations.data_layer}} KML</p>\n        {{#gt layers.length 0}}\n            <div id="m-layerswitcher-addservices-results">\n                <div class="m-layerswitcher-table-results">\n                    <div class="m-layerswitcher-table-container">\n                        <table id="m-layerswitcher-all">\n                            <thead>\n                                <tr tabindex="0">\n                                    <th><button tabindex="0" aria-label="{{translations.addAllLayers}}" id="m-layerswitcher-addservices-selectall" class="m-layerswitcher-icons-check"></button></th>\n                                    <th>{{translations.layers}}</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {{#each layers}}\n                                    <tr tabindex="0">\n                                        <td><span aria-label="{{translations.add_service}}" role="button" abindex="0" id="{{name}}" name="{{name}}" class="m-check-layerswitcher-addservices m-layerswitcher-icons-check"></span></td>\n                                        <td class="m-layerswitcher-table-layer-name" name="{{name}}" title="{{abstract}}">{{name}}</td>\n                                    </tr>\n                                {{/each}}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        {{/gt}}\n    {{/eq}}\n    <div class="m-layerswitcher-layer-fields">\n        {{#if isMVT}}\n            {{#eq layers.length 0}}\n                <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-name">{{translations.name}}</label>\n                <input tabindex="0" type="text" id="m-layerswitcher-layer-name" placeholder="{{translations.separatedby}}" />\n            {{/eq}}\n        {{else}}\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-name">{{translations.name}}</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-name" />\n        {{/if}}\n    </div>\n    <div class="m-layerswitcher-layer-fields">\n        <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-legend">{{translations.legend}}</label>\n        <input tabindex="0" type="text" id="m-layerswitcher-layer-legend" placeholder="{{translations.placeHolderLegend}}"/>\n    </div>\n    {{#eq type \'osm\'}}\n        <div class="m-layerswitcher-layer-fields">\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-matrixset">MatrixSet</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-matrixset" />\n        </div>\n    {{/eq}}\n    {{#eq type \'tms\'}}\n        <div class="m-layerswitcher-layer-fields">\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-matrixset">MatrixSet</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-matrixset" />\n        </div>\n    {{/eq}}\n    {{#eq type \'xyz\'}}\n        <div class="m-layerswitcher-layer-fields">\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-matrixset">MatrixSet</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-matrixset" />\n        </div>\n    {{/eq}}\n    {{#eq type \'mvt\'}}\n        \x3c!--<div class="m-layerswitcher-layer-fields">\n            <label tabindex="0" class="m-layerswitcher-layer-label" for="m-layerswitcher-layer-matrixset">MatrixSet</label>\n            <input tabindex="0" type="text" id="m-layerswitcher-layer-matrixset" />\n        </div>--\x3e\n    {{/eq}}\n    <div class="button">\n        <button tabindex="0" class="m-layerswitcher-common-btn" id="m-layerswitcher-layer-button"> {{translations.add_btn}}</button>\n    </div>\n</div>'},function(e,t){e.exports='<form>\n    <div id="m-layerswitcher-ogc-search-formothers">\n        <div role="text" tabindex="0" class="m-layerswitcher-ogc-warning-msg m-layerswitcher-ogc-warning-msg-custom-query ">{{translations.custom_query_warning}}</div>\n        {{#each filtersList}}\n            {{#if this.title}}\n                {{#if this.bool}}\n                    <div class="m-layerswitcher-ogc-form-input">\n                        <div class="m-layerswitcher-ogc-more-width">\n                            <label tabindex="0" for="search-form-{{this.title}}">{{this.title}}</label>\n                        </div>\n                        <div class="m-layerswitcher-ogc-less-width">\n                            {{#if this.value}}\n                                {{#eq this.value "true"}}\n                                    <div><input tabindex="0" aria-label="true" type="checkbox" id="search-form-{{this.title}}" value="true" {{#eq this.value "true"}}checked{{/eq}}>true</div>\n                                    <div><input tabindex="0" aria-label="false" type="checkbox" id="search-form-{{this.title}}" value="false" {{#eq this.value "false"}}checked{{/eq}}>false</div>\n                                {{/eq}}\n                            {{else}}\n                                <div><input tabindex="0" aria-label="true"  type="checkbox" id="search-form-{{this.title}}" value="true">true</div>\n                                <div><input tabindex="0" aria-label="false" type="checkbox" id="search-form-{{this.title}}" value="false">false</div>\n                            {{/if}}\n                        </div>\n                        <br />\n                    </div>\n                {{else if this.date}}\n                    {{#if this.value}}\n                        <div class="m-layerswitcher-ogc-form-input">\n                            <label tabindex="0" for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label>\n                            <input tabindex="0" class="search-form-date" type="date" id="search-form-{{this.title}}" value="{{this.value}}">\n                            <br />\n                        </div>\n                    {{else}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input class="search-form-date" type="date" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{else if this.number}}\n                    {{#if this.value}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input class="search-form-number" type="number" id="search-form-{{this.title}}" value="{{this.value}}"><br /></div>\n                    {{else}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input class="search-form-number" type="number" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{else}}\n                    {{#if this.value}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input type="text" id="search-form-{{this.title}}" value="{{this.value}}"><br /></div>\n                    {{else}}\n                        <div class="m-layerswitcher-ogc-form-input"><label for="search-form-{{this.title}}" class="m-layerswitcher-ogc-custom-query-form-label">{{this.title}}</label><input type="text" id="search-form-{{this.title}}"><br /></div>\n                    {{/if}}\n                {{/if}}\n            {{/if}}\n        {{/each}}\n\n    </div>\n</form>'},function(e){e.exports=JSON.parse('{"url":{"name":"layerswitcher","separator":"*"},"constructor":"M.plugin.Layerswitcher","parameters":[{"type":"object","properties":[{"type":"simple","name":"position","position":0,"possibleValues":["TL","TR","BL","BR"]},{"type":"boolean","name":"collapsed","position":1},{"type":"boolean","name":"collapsible","position":2},{"type":"simple","name":"tooltip","position":3},{"type":"boolean","name":"isDraggable","position":4},{"type":"boolean","name":"isMoveLayers","position":5},{"type":"simple","name":"modeSelectLayers","position":6},{"type":"simple","name":"tools","position":7},{"type":"boolean","name":"http","position":8},{"type":"boolean","name":"https","position":9},{"type":"boolean","name":"showCatalog","position":10},{"type":"boolean","name":"useProxy","position":11},{"type":"boolean","name":"addLayers","position":12},{"type":"boolean","name":"statusLayers","position":13}]}],"files":{"ol":{"scripts":["layerswitcher.ol.min.js"],"styles":["layerswitcher.ol.min.css"]}},"metadata":{"name":"layerswitcher","description":"Extensión que permite listar y gestionar los servicios añadidos en el mapa. Además permite añadir servicios de forma fácil y rápida.","version":"1.0.0","date":"2023-09-14","author":"Guadaltel","org":"CNIG","tags":"plugin"}}')},function(e,t,i){e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">layerswitcher <img style="vertical-align: bottom; filter: invert(100%);" src="'+i(17)+'" width="30" height="30"></h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <img src="{{urlImages}}/layerswitcher_0.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help3}}</p>\n      <p>{{translations.help4}}</p>\n      <img src="{{urlImages}}/layerswitcher_1.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help5}}</p>\n      <img src="{{urlImages}}/layerswitcher_2.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help6}}</p>\n      <img src="{{urlImages}}/layerswitcher_3.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help7}}</p>\n      <img src="{{urlImages}}/layerswitcher_4.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help8}}</p>\n      <img src="{{urlImages}}/layerswitcher_5.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help9}}</p>\n      <img src="{{urlImages}}/layerswitcher_6.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help10}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/layerswitcher" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/layerswitcher</a></p>\n      <img src="{{urlImages}}/layerswitcher_7.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help11}}</p>\n      <p>{{translations.help12}}</p>\n      <img src="{{urlImages}}/layerswitcher_8.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help13}}</p>\n      <img src="{{urlImages}}/layerswitcher_9.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help14}}</p>\n      <img src="{{urlImages}}/layerswitcher_10.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help15}}</p>\n      <img src="{{urlImages}}/layerswitcher_11.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help16}}</p>\n      <img src="{{urlImages}}/layerswitcher_12.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help17}}</p>\n      <img src="{{urlImages}}/layerswitcher_13.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help18}}</p>\n      <img src="{{urlImages}}/layerswitcher_14.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help19}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/layerswitcher" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/layerswitcher</a></p>\n      <p>{{translations.help20}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/layerswitcher.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/layerswitcher.jsp?language=es</a></p>\n   </div>\n</div>\n\n'},function(e,t,i){},function(e,t,i){},function(e,t){e.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMjQiIGhlaWdodD0iMTAyNCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+Cjx0aXRsZT48L3RpdGxlPgo8ZyBpZD0iaWNvbW9vbi1pZ25vcmUiPgo8L2c+CjxwYXRoIGQ9Ik03Ny44MjQgMzE4LjQ2NGw0MjEuODg4IDIyNS4yOGM0LjA5NiAyLjA0OCA5LjIxNiAzLjA3MiAxMy4zMTIgMy4wNzJzOS4yMTYtMS4wMjQgMTMuMzEyLTMuMDcybDQyMC44NjQtMjI1LjI4YzkuMjE2LTUuMTIgMTQuMzM2LTE1LjM2IDE0LjMzNi0yNS42cy01LjEyLTE5LjQ1Ni0xNC4zMzYtMjQuNTc2bC00MjAuODY0LTIyNS4yOGMtOC4xOTItNC4wOTYtMTguNDMyLTQuMDk2LTI2LjYyNCAwbC00MjEuODg4IDIyNS4yOGMtOC4xOTIgNS4xMi0xNC4zMzYgMTQuMzM2LTE0LjMzNiAyNC41NzZzNi4xNDQgMjAuNDggMTQuMzM2IDI1LjZ6TTUxMy4wMjQgMTE2LjczNmwzNDAuOTkyIDE3Ni4xMjgtMzQwLjk5MiAxNzIuMDMyLTM0Mi4wMTYtMTcyLjAzMiAzNDIuMDE2LTE3Ni4xMjh6TTk0Ny4yIDQ5NC41OTJsLTEyMi44OC02Ni41NmMtMTMuMzEyLTcuMTY4LTQxLjk4NC0zLjA3Mi00OS4xNTIgMTAuMjQtNy4xNjggMTQuMzM2LTUuMTIgMzguOTEyIDguMTkyIDQ2LjA4MGw2Mi40NjQgMzQuODE2LTMzMi44IDE2NC44NjQtMzMzLjgyNC0xNjQuODY0IDYzLjQ4OC0zNC44MTZjMTMuMzEyLTcuMTY4IDEzLjMxMi0zMS43NDQgNi4xNDQtNDUuMDU2LTguMTkyLTE0LjMzNi0zMy43OTItMTkuNDU2LTQ3LjEwNC0xMi4yODhsLTEyMy45MDQgNjcuNTg0Yy04LjE5MiA1LjEyLTE0LjMzNiAxNC4zMzYtMTQuMzM2IDI0LjU3NnM1LjEyIDIwLjQ4IDE0LjMzNiAyNC41NzZsNDIxLjg4OCAyMjUuMjhjNC4wOTYgMi4wNDggOS4yMTYgMy4wNzIgMTMuMzEyIDMuMDcyczkuMjE2LTEuMDI0IDEzLjMxMi0zLjA3Mmw0MjAuODY0LTIyNS4yOGM5LjIxNi00LjA5NiAxNC4zMzYtMTQuMzM2IDE0LjMzNi0yNC41NzZzLTUuMTItMTkuNDU2LTE0LjMzNi0yNC41NzZ6TTk0Ny4yIDcxOC44NDhsLTExOC43ODQtNjMuNDg4Yy0xNC4zMzYtNy4xNjgtNDEuOTg0LTEuMDI0LTQ5LjE1MiAxMi4yODgtNy4xNjggMTQuMzM2LTUuMTIgMzYuODY0IDguMTkyIDQ0LjAzMmw1OC4zNjggMzIuNzY4LTMzMi44IDE2NC44NjQtMzMzLjgyNC0xNjQuODY0IDU3LjM0NC0zMi43NjhjMTQuMzM2LTcuMTY4IDE1LjM2LTI5LjY5NiA4LjE5Mi00NC4wMzJzLTM0LjgxNi0xOC40MzItNDguMTI4LTExLjI2NGwtMTE4Ljc4NCA2Mi40NjRjLTguMTkyIDUuMTItMTQuMzM2IDE0LjMzNi0xNC4zMzYgMjUuNnM1LjEyIDE5LjQ1NiAxNC4zMzYgMjQuNTc2bDQyMS44ODggMjI1LjI4YzQuMDk2IDIuMDQ4IDkuMjE2IDMuMDcyIDEzLjMxMiAzLjA3MnM5LjIxNi0xLjAyNCAxMy4zMTItMy4wNzJsNDIwLjg2NC0yMjUuMjhjOS4yMTYtNS4xMiAxNC4zMzYtMTQuMzM2IDE0LjMzNi0yNC41NzZzLTUuMTItMjAuNDgtMTQuMzM2LTI1LjZ6Ij48L3BhdGg+Cjwvc3ZnPgo="},function(e,t,i){"use strict";i.r(t);i(15),i(16);
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e}).apply(this,arguments)}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),a.forEach((function(t){r(e,t,i[t])}))}return e}function o(e,t){if(null==e)return{};var i,a,r=function(e,t){if(null==e)return{};var i,a,r={},n=Object.keys(e);for(a=0;a<n.length;a++)i=n[a],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)i=n[a],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function l(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var c=l(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),d=l(/Edge/i),u=l(/firefox/i),p=l(/safari/i)&&!l(/chrome/i)&&!l(/android/i),h=l(/iP(ad|od|hone)/i),m=l(/chrome/i)&&l(/android/i),y={capture:!1,passive:!1};function f(e,t,i){e.addEventListener(t,i,!c&&y)}function v(e,t,i){e.removeEventListener(t,i,!c&&y)}function g(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function b(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function w(e,t,i,a){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&g(e,t):g(e,t))||a&&e===i)return e;if(e===i)break}while(e=b(e))}return null}var _,x=/\s+/g;function S(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(x," ").replace(" "+t+" "," ");e.className=(a+(i?" "+t:"")).replace(x," ")}}function L(e,t,i){var a=e&&e.style;if(a){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in a||-1!==t.indexOf("webkit")||(t="-webkit-"+t),a[t]=i+("string"==typeof i?"":"px")}}function C(e,t){var i="";if("string"==typeof e)i=e;else do{var a=L(e,"transform");a&&"none"!==a&&(i=a+" "+i)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(i)}function k(e,t,i){if(e){var a=e.getElementsByTagName(t),r=0,n=a.length;if(i)for(;r<n;r++)i(a[r],r);return a}return[]}function E(){var e=document.scrollingElement;return e||document.documentElement}function O(e,t,i,a,r){if(e.getBoundingClientRect||e===window){var n,s,o,l,d,u,p;if(e!==window&&e!==E()?(s=(n=e.getBoundingClientRect()).top,o=n.left,l=n.bottom,d=n.right,u=n.height,p=n.width):(s=0,o=0,l=window.innerHeight,d=window.innerWidth,u=window.innerHeight,p=window.innerWidth),(t||i)&&e!==window&&(r=r||e.parentNode,!c))do{if(r&&r.getBoundingClientRect&&("none"!==L(r,"transform")||i&&"static"!==L(r,"position"))){var h=r.getBoundingClientRect();s-=h.top+parseInt(L(r,"border-top-width")),o-=h.left+parseInt(L(r,"border-left-width")),l=s+n.height,d=o+n.width;break}}while(r=r.parentNode);if(a&&e!==window){var m=C(r||e),y=m&&m.a,f=m&&m.d;m&&(l=(s/=f)+(u/=f),d=(o/=y)+(p/=y))}return{top:s,left:o,bottom:l,right:d,width:p,height:u}}}function T(e,t,i){for(var a=q(e,!0),r=O(e)[t];a;){var n=O(a)[i];if(!("top"===i||"left"===i?r>=n:r<=n))return a;if(a===E())break;a=q(a,!1)}return!1}function N(e,t,i){for(var a=0,r=0,n=e.children;r<n.length;){if("none"!==n[r].style.display&&n[r]!==ze.ghost&&n[r]!==ze.dragged&&w(n[r],i.draggable,e,!1)){if(a===t)return n[r];a++}r++}return null}function I(e,t){for(var i=e.lastElementChild;i&&(i===ze.ghost||"none"===L(i,"display")||t&&!g(i,t));)i=i.previousElementSibling;return i||null}function D(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===ze.clone||t&&!g(e,t)||i++;return i}function A(e){var t=0,i=0,a=E();if(e)do{var r=C(e),n=r.a,s=r.d;t+=e.scrollLeft*n,i+=e.scrollTop*s}while(e!==a&&(e=e.parentNode));return[t,i]}function q(e,t){if(!e||!e.getBoundingClientRect)return E();var i=e,a=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var r=L(i);if(i.clientWidth<i.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!i.getBoundingClientRect||i===document.body)return E();if(a||t)return i;a=!0}}}while(i=i.parentNode);return E()}function P(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function j(e,t){return function(){if(!_){var i=arguments,a=this;1===i.length?e.call(a,i[0]):e.apply(a,i),_=setTimeout((function(){_=void 0}),t)}}}function z(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function R(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}var F="Sortable"+(new Date).getTime();function H(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==L(e,"display")&&e!==ze.ghost){t.push({target:e,rect:O(e)});var i=s({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=C(e,!0);a&&(i.top-=a.f,i.left-=a.e)}e.fromRect=i}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[i][a])return Number(i);return-1}(t,{target:e}),1)},animateAll:function(i){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof i&&i());var r=!1,n=0;t.forEach((function(e){var t=0,i=e.target,s=i.fromRect,o=O(i),l=i.prevFromRect,c=i.prevToRect,d=e.rect,u=C(i,!0);u&&(o.top-=u.f,o.left-=u.e),i.toRect=o,i.thisAnimationDuration&&P(l,o)&&!P(s,o)&&(d.top-o.top)/(d.left-o.left)==(s.top-o.top)/(s.left-o.left)&&(t=function(e,t,i,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*a.animation}(d,l,c,a.options)),P(o,s)||(i.prevFromRect=s,i.prevToRect=o,t||(t=a.options.animation),a.animate(i,d,o,t)),t&&(r=!0,n=Math.max(n,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),t),i.thisAnimationDuration=t)})),clearTimeout(e),r?e=setTimeout((function(){"function"==typeof i&&i()}),n):"function"==typeof i&&i(),t=[]},animate:function(e,t,i,a){if(a){L(e,"transition",""),L(e,"transform","");var r=C(this.el),n=r&&r.a,s=r&&r.d,o=(t.left-i.left)/(n||1),l=(t.top-i.top)/(s||1);e.animatingX=!!o,e.animatingY=!!l,L(e,"transform","translate3d("+o+"px,"+l+"px,0)"),function(e){e.offsetWidth}(e),L(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),L(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){L(e,"transition",""),L(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),a)}}}}var W=[],B={initializeByDefault:!0},U={mount:function(e){for(var t in B)B.hasOwnProperty(t)&&!(t in e)&&(e[t]=B[t]);W.push(e)},pluginEvent:function(e,t,i){var a=this;this.eventCanceled=!1,i.cancel=function(){a.eventCanceled=!0};var r=e+"Global";W.forEach((function(a){t[a.pluginName]&&(t[a.pluginName][r]&&t[a.pluginName][r](s({sortable:t},i)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](s({sortable:t},i)))}))},initializePlugins:function(e,t,i,a){for(var r in W.forEach((function(a){var r=a.pluginName;if(e.options[r]||a.initializeByDefault){var s=new a(e,t,e.options);s.sortable=e,s.options=e.options,e[r]=s,n(i,s.defaults)}})),e.options)if(e.options.hasOwnProperty(r)){var s=this.modifyOption(e,r,e.options[r]);void 0!==s&&(e.options[r]=s)}},getEventProperties:function(e,t){var i={};return W.forEach((function(a){"function"==typeof a.eventProperties&&n(i,a.eventProperties.call(t[a.pluginName],e))})),i},modifyOption:function(e,t,i){var a;return W.forEach((function(r){e[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[t]&&(a=r.optionListeners[t].call(e[r.pluginName],i))})),a}};function G(e){var t=e.sortable,i=e.rootEl,a=e.name,r=e.targetEl,n=e.cloneEl,o=e.toEl,l=e.fromEl,u=e.oldIndex,p=e.newIndex,h=e.oldDraggableIndex,m=e.newDraggableIndex,y=e.originalEvent,f=e.putSortable,v=e.extraEventProperties;if(t=t||i&&i[F]){var g,b=t.options,w="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||c||d?(g=document.createEvent("Event")).initEvent(a,!0,!0):g=new CustomEvent(a,{bubbles:!0,cancelable:!0}),g.to=o||i,g.from=l||i,g.item=r||i,g.clone=n,g.oldIndex=u,g.newIndex=p,g.oldDraggableIndex=h,g.newDraggableIndex=m,g.originalEvent=y,g.pullMode=f?f.lastPutMode:void 0;var _=s({},v,U.getEventProperties(a,t));for(var x in _)g[x]=_[x];i&&i.dispatchEvent(g),b[w]&&b[w].call(t,g)}}var Y=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.evt,r=o(i,["evt"]);U.pluginEvent.bind(ze)(e,t,s({dragEl:Q,parentEl:X,ghostEl:Z,rootEl:J,nextEl:K,lastDownEl:$,cloneEl:ee,cloneHidden:te,dragStarted:me,putSortable:oe,activeSortable:ze.active,originalEvent:a,oldIndex:ie,oldDraggableIndex:re,newIndex:ae,newDraggableIndex:ne,hideGhostForTarget:Ae,unhideGhostForTarget:qe,cloneNowHidden:function(){te=!0},cloneNowShown:function(){te=!1},dispatchSortableEvent:function(e){V({sortable:t,name:e,originalEvent:a})}},r))};function V(e){G(s({putSortable:oe,cloneEl:ee,targetEl:Q,rootEl:J,oldIndex:ie,oldDraggableIndex:re,newIndex:ae,newDraggableIndex:ne},e))}var Q,X,Z,J,K,$,ee,te,ie,ae,re,ne,se,oe,le,ce,de,ue,pe,he,me,ye,fe,ve,ge,be=!1,we=!1,_e=[],xe=!1,Me=!1,Se=[],Le=!1,Ce=[],ke="undefined"!=typeof document,Ee=h,Oe=d||c?"cssFloat":"float",Te=ke&&!m&&!h&&"draggable"in document.createElement("div"),Ne=function(){if(ke){if(c)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ie=function(e,t){var i=L(e),a=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),r=N(e,0,t),n=N(e,1,t),s=r&&L(r),o=n&&L(n),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+O(r).width,c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+O(n).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&"none"!==s.float){var d="left"===s.float?"left":"right";return!n||"both"!==o.clear&&o.clear!==d?"horizontal":"vertical"}return r&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||l>=a&&"none"===i[Oe]||n&&"none"===i[Oe]&&l+c>a)?"vertical":"horizontal"},De=function(e){function t(e,i){return function(a,r,n,s){var o=a.options.group.name&&r.options.group.name&&a.options.group.name===r.options.group.name;if(null==e&&(i||o))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"==typeof e)return t(e(a,r,n,s),i)(a,r,n,s);var l=(i?a:r).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var i={},r=e.group;r&&"object"==a(r)||(r={name:r}),i.name=r.name,i.checkPull=t(r.pull,!0),i.checkPut=t(r.put),i.revertClone=r.revertClone,e.group=i},Ae=function(){!Ne&&Z&&L(Z,"display","none")},qe=function(){!Ne&&Z&&L(Z,"display","")};ke&&document.addEventListener("click",(function(e){if(we)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),we=!1,!1}),!0);var Pe=function(e){if(Q){e=e.touches?e.touches[0]:e;var t=(r=e.clientX,n=e.clientY,_e.some((function(e){if(!I(e)){var t=O(e),i=e[F].options.emptyInsertThreshold,a=r>=t.left-i&&r<=t.right+i,o=n>=t.top-i&&n<=t.bottom+i;return i&&a&&o?s=e:void 0}})),s);if(t){var i={};for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[F]._onDragOver(i)}}var r,n,s},je=function(e){Q&&Q.parentNode[F]._isOutsideThisEl(e.target)};function ze(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=n({},t),e[F]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ie(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ze.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var a in U.initializePlugins(this,e,i),i)!(a in t)&&(t[a]=i[a]);for(var r in De(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Te,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?f(e,"pointerdown",this._onTapStart):(f(e,"mousedown",this._onTapStart),f(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(f(e,"dragover",this),f(e,"dragenter",this)),_e.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),n(this,H())}function Re(e,t,i,a,r,n,s,o){var l,u,p=e[F],h=p.options.onMove;return!window.CustomEvent||c||d?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=a,l.related=r||t,l.relatedRect=n||O(t),l.willInsertAfter=o,l.originalEvent=s,e.dispatchEvent(l),h&&(u=h.call(p,l,s)),u}function Fe(e){e.draggable=!1}function He(){Le=!1}function We(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,a=0;i--;)a+=t.charCodeAt(i);return a.toString(36)}function Be(e){return setTimeout(e,0)}function Ue(e){return clearTimeout(e)}ze.prototype={constructor:ze,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ye=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Q):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,a=this.options,r=a.preventOnFilter,n=e.type,s=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,o=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||o,c=a.filter;if(function(e){Ce.length=0;var t=e.getElementsByTagName("input"),i=t.length;for(;i--;){var a=t[i];a.checked&&Ce.push(a)}}(i),!Q&&!(/mousedown|pointerdown/.test(n)&&0!==e.button||a.disabled||l.isContentEditable||(o=w(o,a.draggable,i,!1))&&o.animated||$===o)){if(ie=D(o),re=D(o,a.draggable),"function"==typeof c){if(c.call(this,e,o,this))return V({sortable:t,rootEl:l,name:"filter",targetEl:o,toEl:i,fromEl:i}),Y("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(a){if(a=w(l,a.trim(),i,!1))return V({sortable:t,rootEl:a,name:"filter",targetEl:o,fromEl:i,toEl:i}),Y("filter",t,{evt:e}),!0}))))return void(r&&e.cancelable&&e.preventDefault());a.handle&&!w(l,a.handle,i,!1)||this._prepareDragStart(e,s,o)}}},_prepareDragStart:function(e,t,i){var a,r=this,n=r.el,s=r.options,o=n.ownerDocument;if(i&&!Q&&i.parentNode===n){var l=O(i);if(J=n,X=(Q=i).parentNode,K=Q.nextSibling,$=i,se=s.group,ze.dragged=Q,le={target:Q,clientX:(t||e).clientX,clientY:(t||e).clientY},pe=le.clientX-l.left,he=le.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Q.style["will-change"]="all",a=function(){Y("delayEnded",r,{evt:e}),ze.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!u&&r.nativeDraggable&&(Q.draggable=!0),r._triggerDragStart(e,t),V({sortable:r,name:"choose",originalEvent:e}),S(Q,s.chosenClass,!0))},s.ignore.split(",").forEach((function(e){k(Q,e.trim(),Fe)})),f(o,"dragover",Pe),f(o,"mousemove",Pe),f(o,"touchmove",Pe),f(o,"mouseup",r._onDrop),f(o,"touchend",r._onDrop),f(o,"touchcancel",r._onDrop),u&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Q.draggable=!0),Y("delayStart",this,{evt:e}),!s.delay||s.delayOnTouchOnly&&!t||this.nativeDraggable&&(d||c))a();else{if(ze.eventCanceled)return void this._onDrop();f(o,"mouseup",r._disableDelayedDrag),f(o,"touchend",r._disableDelayedDrag),f(o,"touchcancel",r._disableDelayedDrag),f(o,"mousemove",r._delayedDragTouchMoveHandler),f(o,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&f(o,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(a,s.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Q&&Fe(Q),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._disableDelayedDrag),v(e,"touchend",this._disableDelayedDrag),v(e,"touchcancel",this._disableDelayedDrag),v(e,"mousemove",this._delayedDragTouchMoveHandler),v(e,"touchmove",this._delayedDragTouchMoveHandler),v(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?f(document,"pointermove",this._onTouchMove):f(document,t?"touchmove":"mousemove",this._onTouchMove):(f(Q,"dragend",this),f(J,"dragstart",this._onDragStart));try{document.selection?Be((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(be=!1,J&&Q){Y("dragStarted",this,{evt:t}),this.nativeDraggable&&f(document,"dragover",je);var i=this.options;!e&&S(Q,i.dragClass,!1),S(Q,i.ghostClass,!0),ze.active=this,e&&this._appendGhost(),V({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ce){this._lastX=ce.clientX,this._lastY=ce.clientY,Ae();for(var e=document.elementFromPoint(ce.clientX,ce.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ce.clientX,ce.clientY))!==t;)t=e;if(Q.parentNode[F]._isOutsideThisEl(e),t)do{if(t[F]){if(t[F]._onDragOver({clientX:ce.clientX,clientY:ce.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);qe()}},_onTouchMove:function(e){if(le){var t=this.options,i=t.fallbackTolerance,a=t.fallbackOffset,r=e.touches?e.touches[0]:e,n=Z&&C(Z,!0),s=Z&&n&&n.a,o=Z&&n&&n.d,l=Ee&&ge&&A(ge),c=(r.clientX-le.clientX+a.x)/(s||1)+(l?l[0]-Se[0]:0)/(s||1),d=(r.clientY-le.clientY+a.y)/(o||1)+(l?l[1]-Se[1]:0)/(o||1);if(!ze.active&&!be){if(i&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(Z){n?(n.e+=c-(de||0),n.f+=d-(ue||0)):n={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(n.a,",").concat(n.b,",").concat(n.c,",").concat(n.d,",").concat(n.e,",").concat(n.f,")");L(Z,"webkitTransform",u),L(Z,"mozTransform",u),L(Z,"msTransform",u),L(Z,"transform",u),de=c,ue=d,ce=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Z){var e=this.options.fallbackOnBody?document.body:J,t=O(Q,!0,Ee,!0,e),i=this.options;if(Ee){for(ge=e;"static"===L(ge,"position")&&"none"===L(ge,"transform")&&ge!==document;)ge=ge.parentNode;ge!==document.body&&ge!==document.documentElement?(ge===document&&(ge=E()),t.top+=ge.scrollTop,t.left+=ge.scrollLeft):ge=E(),Se=A(ge)}S(Z=Q.cloneNode(!0),i.ghostClass,!1),S(Z,i.fallbackClass,!0),S(Z,i.dragClass,!0),L(Z,"transition",""),L(Z,"transform",""),L(Z,"box-sizing","border-box"),L(Z,"margin",0),L(Z,"top",t.top),L(Z,"left",t.left),L(Z,"width",t.width),L(Z,"height",t.height),L(Z,"opacity","0.8"),L(Z,"position",Ee?"absolute":"fixed"),L(Z,"zIndex","100000"),L(Z,"pointerEvents","none"),ze.ghost=Z,e.appendChild(Z),L(Z,"transform-origin",pe/parseInt(Z.style.width)*100+"% "+he/parseInt(Z.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,a=e.dataTransfer,r=i.options;Y("dragStart",this,{evt:e}),ze.eventCanceled?this._onDrop():(Y("setupClone",this),ze.eventCanceled||((ee=R(Q)).draggable=!1,ee.style["will-change"]="",this._hideClone(),S(ee,this.options.chosenClass,!1),ze.clone=ee),i.cloneId=Be((function(){Y("clone",i),ze.eventCanceled||(i.options.removeCloneOnHide||J.insertBefore(ee,Q),i._hideClone(),V({sortable:i,name:"clone"}))})),!t&&S(Q,r.dragClass,!0),t?(we=!0,i._loopId=setInterval(i._emulateDragOver,50)):(v(document,"mouseup",i._onDrop),v(document,"touchend",i._onDrop),v(document,"touchcancel",i._onDrop),a&&(a.effectAllowed="move",r.setData&&r.setData.call(i,a,Q)),f(document,"drop",i),L(Q,"transform","translateZ(0)")),be=!0,i._dragStartId=Be(i._dragStarted.bind(i,t,e)),f(document,"selectstart",i),me=!0,p&&L(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,a,r,n=this.el,o=e.target,l=this.options,c=l.group,d=ze.active,u=se===c,p=l.sort,h=oe||d,m=this,y=!1;if(!Le){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),o=w(o,l.draggable,n,!0),P("dragOver"),ze.eventCanceled)return y;if(Q.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||m._ignoreWhileAnimating===o)return R(!1);if(we=!1,d&&!l.disabled&&(u?p||(a=!J.contains(Q)):oe===this||(this.lastPutMode=se.checkPull(this,d,Q,e))&&c.checkPut(this,d,Q,e))){if(r="vertical"===this._getDirection(e,o),t=O(Q),P("dragOverValid"),ze.eventCanceled)return y;if(a)return X=J,j(),this._hideClone(),P("revert"),ze.eventCanceled||(K?J.insertBefore(Q,K):J.appendChild(Q)),R(!0);var f=I(n,l.draggable);if(!f||function(e,t,i){var a=O(I(i.el,i.options.draggable));return t?e.clientX>a.right+10||e.clientX<=a.right&&e.clientY>a.bottom&&e.clientX>=a.left:e.clientX>a.right&&e.clientY>a.top||e.clientX<=a.right&&e.clientY>a.bottom+10}(e,r,this)&&!f.animated){if(f===Q)return R(!1);if(f&&n===e.target&&(o=f),o&&(i=O(o)),!1!==Re(J,n,Q,t,o,i,e,!!o))return j(),n.appendChild(Q),X=n,H(),R(!0)}else if(o.parentNode===n){i=O(o);var v,g,b,_=Q.parentNode!==n,x=!function(e,t,i){var a=i?e.left:e.top,r=i?e.right:e.bottom,n=i?e.width:e.height,s=i?t.left:t.top,o=i?t.right:t.bottom,l=i?t.width:t.height;return a===s||r===o||a+n/2===s+l/2}(Q.animated&&Q.toRect||t,o.animated&&o.toRect||i,r),M=r?"top":"left",C=T(o,"top","top")||T(Q,"top","top"),k=C?C.scrollTop:void 0;if(ye!==o&&(g=i[M],xe=!1,Me=!x&&l.invertSwap||_),0!==(v=function(e,t,i,a,r,n,s,o){var l=a?e.clientY:e.clientX,c=a?i.height:i.width,d=a?i.top:i.left,u=a?i.bottom:i.right,p=!1;if(!s)if(o&&ve<c*r){if(!xe&&(1===fe?l>d+c*n/2:l<u-c*n/2)&&(xe=!0),xe)p=!0;else if(1===fe?l<d+ve:l>u-ve)return-fe}else if(l>d+c*(1-r)/2&&l<u-c*(1-r)/2)return function(e){return D(Q)<D(e)?1:-1}(t);if((p=p||s)&&(l<d+c*n/2||l>u-c*n/2))return l>d+c/2?1:-1;return 0}(e,o,i,r,x?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Me,ye===o))){var E=D(Q);do{E-=v,b=X.children[E]}while(b&&("none"===L(b,"display")||b===Z))}if(0===v||b===o)return R(!1);ye=o,fe=v;var N=o.nextElementSibling,A=!1,q=Re(J,n,Q,t,o,i,e,A=1===v);if(!1!==q)return 1!==q&&-1!==q||(A=1===q),Le=!0,setTimeout(He,30),j(),A&&!N?n.appendChild(Q):o.parentNode.insertBefore(Q,A?N:o),C&&z(C,0,k-C.scrollTop),X=Q.parentNode,void 0===g||Me||(ve=Math.abs(g-O(o)[M])),H(),R(!0)}if(n.contains(Q))return R(!1)}return!1}function P(l,c){Y(l,m,s({evt:e,isOwner:u,axis:r?"vertical":"horizontal",revert:a,dragRect:t,targetRect:i,canSort:p,fromSortable:h,target:o,completed:R,onMove:function(i,a){return Re(J,n,Q,t,i,O(i),e,a)},changed:H},c))}function j(){P("dragOverAnimationCapture"),m.captureAnimationState(),m!==h&&h.captureAnimationState()}function R(t){return P("dragOverCompleted",{insertion:t}),t&&(u?d._hideClone():d._showClone(m),m!==h&&(S(Q,oe?oe.options.ghostClass:d.options.ghostClass,!1),S(Q,l.ghostClass,!0)),oe!==m&&m!==ze.active?oe=m:m===ze.active&&oe&&(oe=null),h===m&&(m._ignoreWhileAnimating=o),m.animateAll((function(){P("dragOverAnimationComplete"),m._ignoreWhileAnimating=null})),m!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(o===Q&&!Q.animated||o===n&&!o.animated)&&(ye=null),l.dragoverBubble||e.rootEl||o===document||(Q.parentNode[F]._isOutsideThisEl(e.target),!t&&Pe(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),y=!0}function H(){ae=D(Q),ne=D(Q,l.draggable),V({sortable:m,name:"change",toEl:n,newIndex:ae,newDraggableIndex:ne,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",Pe),v(document,"mousemove",Pe),v(document,"touchmove",Pe)},_offUpEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._onDrop),v(e,"touchend",this._onDrop),v(e,"pointerup",this._onDrop),v(e,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;ae=D(Q),ne=D(Q,i.draggable),Y("drop",this,{evt:e}),X=Q&&Q.parentNode,ae=D(Q),ne=D(Q,i.draggable),ze.eventCanceled||(be=!1,Me=!1,xe=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ue(this.cloneId),Ue(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),p&&L(document.body,"user-select",""),L(Q,"transform",""),e&&(me&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),Z&&Z.parentNode&&Z.parentNode.removeChild(Z),(J===X||oe&&"clone"!==oe.lastPutMode)&&ee&&ee.parentNode&&ee.parentNode.removeChild(ee),Q&&(this.nativeDraggable&&v(Q,"dragend",this),Fe(Q),Q.style["will-change"]="",me&&!be&&S(Q,oe?oe.options.ghostClass:this.options.ghostClass,!1),S(Q,this.options.chosenClass,!1),V({sortable:this,name:"unchoose",toEl:X,newIndex:null,newDraggableIndex:null,originalEvent:e}),J!==X?(ae>=0&&(V({rootEl:X,name:"add",toEl:X,fromEl:J,originalEvent:e}),V({sortable:this,name:"remove",toEl:X,originalEvent:e}),V({rootEl:X,name:"sort",toEl:X,fromEl:J,originalEvent:e}),V({sortable:this,name:"sort",toEl:X,originalEvent:e})),oe&&oe.save()):ae!==ie&&ae>=0&&(V({sortable:this,name:"update",toEl:X,originalEvent:e}),V({sortable:this,name:"sort",toEl:X,originalEvent:e})),ze.active&&(null!=ae&&-1!==ae||(ae=ie,ne=re),V({sortable:this,name:"end",toEl:X,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Y("nulling",this),J=Q=X=Z=K=ee=$=te=le=ce=me=ae=ne=ie=re=ye=fe=oe=se=ze.dragged=ze.ghost=ze.clone=ze.active=null,Ce.forEach((function(e){e.checked=!0})),Ce.length=de=ue=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Q&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,a=0,r=i.length,n=this.options;a<r;a++)w(e=i[a],n.draggable,this.el,!1)&&t.push(e.getAttribute(n.dataIdAttr)||We(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach((function(e,a){var r=i.children[a];w(r,this.options.draggable,i,!1)&&(t[e]=r)}),this),e.forEach((function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return w(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var a=U.modifyOption(this,e,t);i[e]=void 0!==a?a:t,"group"===e&&De(i)},destroy:function(){Y("destroy",this);var e=this.el;e[F]=null,v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart),v(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),_e.splice(_e.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!te){if(Y("hideClone",this),ze.eventCanceled)return;L(ee,"display","none"),this.options.removeCloneOnHide&&ee.parentNode&&ee.parentNode.removeChild(ee),te=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(te){if(Y("showClone",this),ze.eventCanceled)return;J.contains(Q)&&!this.options.group.revertClone?J.insertBefore(ee,Q):K?J.insertBefore(ee,K):J.appendChild(ee),this.options.group.revertClone&&this.animate(Q,ee),L(ee,"display",""),te=!1}}else this._hideClone()}},ke&&f(document,"touchmove",(function(e){(ze.active||be)&&e.cancelable&&e.preventDefault()})),ze.utils={on:f,off:v,css:L,find:k,is:function(e,t){return!!w(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},throttle:j,closest:w,toggleClass:S,clone:R,index:D,nextTick:Be,cancelNextTick:Ue,detectDirection:Ie,getChild:N},ze.get=function(e){return e[F]},ze.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(ze.utils=s({},ze.utils,e.utils)),U.mount(e)}))},ze.create=function(e,t){return new ze(e,t)},ze.version="1.10.2";var Ge,Ye,Ve,Qe,Xe,Ze,Je=[],Ke=!1;function $e(){Je.forEach((function(e){clearInterval(e.pid)})),Je=[]}function et(){clearInterval(Ze)}var tt=j((function(e,t,i,a){if(t.scroll){var r,n=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,l=t.scrollSpeed,c=E(),d=!1;Ye!==i&&(Ye=i,$e(),Ge=t.scroll,r=t.scrollFn,!0===Ge&&(Ge=q(i,!0)));var u=0,p=Ge;do{var h=p,m=O(h),y=m.top,f=m.bottom,v=m.left,g=m.right,b=m.width,w=m.height,_=void 0,x=void 0,M=h.scrollWidth,S=h.scrollHeight,C=L(h),k=h.scrollLeft,T=h.scrollTop;h===c?(_=b<M&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),x=w<S&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(_=b<M&&("auto"===C.overflowX||"scroll"===C.overflowX),x=w<S&&("auto"===C.overflowY||"scroll"===C.overflowY));var N=_&&(Math.abs(g-n)<=o&&k+b<M)-(Math.abs(v-n)<=o&&!!k),I=x&&(Math.abs(f-s)<=o&&T+w<S)-(Math.abs(y-s)<=o&&!!T);if(!Je[u])for(var D=0;D<=u;D++)Je[D]||(Je[D]={});Je[u].vx==N&&Je[u].vy==I&&Je[u].el===h||(Je[u].el=h,Je[u].vx=N,Je[u].vy=I,clearInterval(Je[u].pid),0==N&&0==I||(d=!0,Je[u].pid=setInterval(function(){a&&0===this.layer&&ze.active._onTouchMove(Xe);var t=Je[this.layer].vy?Je[this.layer].vy*l:0,i=Je[this.layer].vx?Je[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(ze.dragged.parentNode[F],i,t,e,Xe,Je[this.layer].el)||z(Je[this.layer].el,i,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&p!==c&&(p=q(p,!1)));Ke=d}}),30),it=function(e){var t=e.originalEvent,i=e.putSortable,a=e.dragEl,r=e.activeSortable,n=e.dispatchSortableEvent,s=e.hideGhostForTarget,o=e.unhideGhostForTarget;if(t){var l=i||r;s();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);o(),l&&!l.el.contains(d)&&(n("spill"),this.onSpill({dragEl:a,putSortable:i}))}};function at(){}function rt(){}at.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var a=N(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:it},n(at,{pluginName:"revertOnSpill"}),rt.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:it},n(rt,{pluginName:"removeOnSpill"});ze.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?f(document,"dragover",this._handleAutoScroll):this.options.supportPointer?f(document,"pointermove",this._handleFallbackAutoScroll):t.touches?f(document,"touchmove",this._handleFallbackAutoScroll):f(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll)),et(),$e(),clearTimeout(_),_=void 0},nulling:function(){Xe=Ye=Ge=Ke=Ze=Ve=Qe=null,Je.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,n=document.elementFromPoint(a,r);if(Xe=e,t||d||c||p){tt(e,this.options,n,t);var s=q(n,!0);!Ke||Ze&&a===Ve&&r===Qe||(Ze&&et(),Ze=setInterval((function(){var n=q(document.elementFromPoint(a,r),!0);n!==s&&(s=n,$e()),tt(e,i.options,n,t)}),10),Ve=a,Qe=r)}else{if(!this.options.bubbleScroll||q(n,!0)===E())return void $e();tt(e,this.options,q(n,!1),!1)}}},n(e,{pluginName:"scroll",initializeByDefault:!0})}),ze.mount(rt,at);var nt=ze;function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,ct(a.key),a)}}function ct(e){var t=function(e,t){if("object"!=st(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=st(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==st(t)?t:t+""}function dt(e,t,i){return t=ht(t),function(e,t){if(t&&("object"==st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,i||[],ht(e).constructor):t.apply(e,i))}function ut(){return(ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var a=pt(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(arguments.length<3?e:i):r.value}}).apply(null,arguments)}function pt(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ht(e)););return e}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){return(mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var yt=function(e){function t(){return ot(this,t),dt(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mt(e,t)}(t,M.impl.Control),i=t,(a=[{key:"addTo",value:function(e,i){this.facadeMap_=e,ut(ht(t.prototype),"addTo",this).call(this,e,i)}},{key:"registerEvent",value:function(e){this.facadeMap_=e,this.fnRender=this.renderControl.bind(this),M.utils.isNullOrEmpty(e)||(this.olMap=e.getMapImpl(),this.olMap.on("rendercomplete",this.fnRender))}},{key:"renderControl",value:function(){this.facadeControl.render()}},{key:"removeRenderComplete",value:function(){M.utils.isNullOrEmpty(this.olMap)||(this.olMap.un("rendercomplete",this.fnRender),this.fnRender=null)}},{key:"getTransformedCoordinates",value:function(e,t){var i=ol.proj.getTransform(e,"EPSG:4326");return this.getFullCoordinates(t,i(this.getXY(t)))}},{key:"getFullCoordinates",value:function(e,t){var i=e;return i[0]=t[0],i[1]=t[1],i}},{key:"getXY",value:function(e){for(var t=[],i=0;i<e.length;i+=1)t.push(e[i]);for(;t.length>2;)t.pop();return t}},{key:"destroy",value:function(){this.removeRenderComplete()}}])&&lt(i.prototype,a),r&&lt(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,a,r}(),ft=i(3),vt=i.n(ft),gt=i(4),bt=i.n(gt),wt=i(0),_t=i(1),xt={en:wt,es:_t},Mt=function(){var e="es";return"function"==typeof M.language.getLang&&(e=M.language.getLang()),e},St=function(e){return"es"===e||"en"===e?xt[e]:M.language.getTranslation(e).layerswitcher},Lt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt(),i=St(t),a="";return M.utils.isNullOrEmpty(i)?console.warn("The translation '".concat(t,"' has not been defined.")):a=e.split(".").reduce((function(e,t){return e[t]}),i),a},Ct=i(5),kt=i.n(Ct),Et=i(6),Ot=i.n(Et),Tt=i(7),Nt=i.n(Tt),It=i(8),Dt=i.n(It),At=i(9),qt=i.n(At),Pt=i(10),jt=i.n(Pt),zt=i(2),Rt=i.n(zt),Ft=i(11),Ht=i.n(Ft),Wt=i(12),Bt=i.n(Wt);function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e){return function(e){if(Array.isArray(e))return Yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Yt(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Yt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=Array(t);i<t;i++)a[i]=e[i];return a}function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Xt(a.key),a)}}function Xt(e){var t=function(e,t){if("object"!=Ut(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=Ut(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ut(t)?t:t+""}function Zt(e,t,i){return t=Jt(t),function(e,t){if(t&&("object"==Ut(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,i||[],Jt(e).constructor):t.apply(e,i))}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e,t){return(Kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var $t="#m-layerswitcher-addservices-codsi",ei="#m-layerswitcher-addservices-codsi-btn",ti="#m-layerswitcher-addservices-search-input",ii="#m-layerswitcher-addservices-results",ai="#m-layerswitcher-layerContainer",ri="#m-layerswitcher-addservices-list-btn",ni="#m-layerswitcher-addservices-search-btn",si=[1,2,3],oi=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Vt(this,t),M.utils.isUndefined(yt)&&M.exception(Lt("exception.impl"));var a=new yt;return e=Zt(this,t,[a,"Layerswitcher"]),a.facadeControl=e,e.pages_={total:0,actual:1,element:0},e.numPages_=5,e.map_=void 0,e.template_=void 0,e.isDraggable_=i.isDraggable,e.modeSelectLayers=i.modeSelectLayers,e.isCheckedLayerRadio=!1,e.overlayLayers=[],e.statusShowHideAllLayers=!0,e.isAddLayers=!!M.utils.isNullOrEmpty(i.addLayers)||i.addLayers,e.isStatusLayers=!!M.utils.isNullOrEmpty(i.statusLayers)||i.statusLayers,e.tools=i.tools,e.isTransparency=!1,e.isLegend=!1,e.isZoom=!1,e.isInformation=!1,e.isStyle=!1,e.isDelete=!1,e.isMoveLayers=i.isMoveLayers,e.collapsed=i.collapsed,e.precharged=i.precharged,e.http=i.http,e.https=i.https,e.filterName=void 0,e.stateSelectAll=!1,e.codsiActive=i.showCatalog,e.useProxy=i.useProxy,e.statusProxy=i.statusProxy,e.select_codsi=1,e.displayLabel=i.displayLabel,e.order=i.order,e.useAttributions_=i.useAttributions,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kt(e,t)}(t,M.Control),function(e,t,i){return t&&Qt(e.prototype,t),i&&Qt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"createView",value:function(e){var t=this;return this.map_=e,M.utils.isString(this.tools)&&(this.tools=this.tools.split(",")),this.tools.forEach((function(e){"transparency"===e&&(t.isTransparency=!0),"legend"===e&&(t.isLegend=!0),"zoom"===e&&(t.isZoom=!0),"information"===e&&(t.isInformation=!0),"style"===e&&(t.isStyle=!0),"delete"===e&&(t.isDelete=!0)})),e.on(M.evt.ADDED_LAYER,(function(e){"radio"===t.modeSelectLayers&&!0===t.isCheckedLayerRadio&&e.forEach((function(e){e.setVisible(!1)}))})),new Promise((function(i){t.getTemplateVariables(e).then((function(a){var r=M.template.compileSync(vt.a,{vars:a});t.template_=r,t.template_.addEventListener("click",t.clickLayer.bind(t),!1),t.template_.addEventListener("input",t.inputLayer.bind(t),!1),t.getImpl().registerEvent(e),t.template_.querySelector("#m-layerswitcher-addlayers").addEventListener("click",t.openAddServices.bind(t),!1),t.template_.querySelector("#m-layerswitcher-addlayers").addEventListener("touchstart",t.openAddServices.bind(t),!1),t.accessibilityTab(t.template_),i(t.template_)}))}))}},{key:"addEventPanel",value:function(e){var t=this;e.getButtonPanel().parentElement.classList.contains("collapsed")&&setTimeout((function(){t.getImpl().removeRenderComplete()}),501),e.getButtonPanel().addEventListener("click",this.collapsedPlugin.bind(this),!1),this.isDraggable_&&M.utils.draggabillyPlugin(e,"#m-layerswitcher-title")}},{key:"eventsPanel",value:function(e){e.getButtonPanel().parentElement.classList.contains("collapsed")&&this.getImpl().removeRenderComplete(),e.getButtonPanel().addEventListener("click",this.collapsedPlugin.bind(this),!1),this.isDraggable_&&M.utils.draggabillyPlugin(e,"#m-layerswitcher-title")}},{key:"getTemplateVariables",value:function(e){var t=this;return new Promise((function(i,a){M.utils.isNullOrEmpty(e)||(t.overlayLayers=e.getRootLayers().filter((function(e){var t=!0===e.transparent,i=!0===e.displayInLayerSwitcher;return t&&i})),t.overlayLayers=t.reorderLayers(t.overlayLayers),Promise.all(t.overlayLayers.map(t.parseLayerForTemplate_.bind(t))).then((function(e){i({overlayLayers:e,translations:{layers:Lt("layers"),show_hide:Lt("show_hide"),hide_service:Lt("hide_service"),show_service:Lt("show_service"),show_all_services:Lt("show_all_services"),hide_all_services:Lt("hide_all_services"),zoom:Lt("zoom"),info_metadata:Lt("info_metadata"),remove_layer:Lt("remove_layer"),change_style:Lt("change_style"),add:Lt("add")},allVisible:!t.statusShowHideAllLayers,isRadio:"radio"===t.modeSelectLayers,isEyes:"eyes"===t.modeSelectLayers,isTransparency:t.isTransparency,isLegend:t.isLegend,isZoom:t.isZoom,isInformation:t.isInformation,isStyle:t.isStyle,isDelete:t.isDelete,displayLabel:!t.displayLabel,isAddLayers:!t.isAddLayers,isStatusLayers:!t.isStatusLayers})})))}))}},{key:"reorderLayers",value:function(e){return e.sort((function(e,t){return e.getZIndex()-t.getZIndex()})).reverse()}},{key:"parseLayerForTemplate_",value:function(e){var t=e.legend||e.name,i=!M.utils.isNullOrEmpty(e.capabilitiesMetadata)&&!M.utils.isNullOrEmpty(e.capabilitiesMetadata.abstract);return new Promise((function(a){var r=i&&e.capabilitiesMetadata.style.length>1||e instanceof M.layer.Vector&&!M.utils.isNullOrEmpty(e.predefinedStyles)&&e.predefinedStyles.length>1;"KML"===e.type&&(e.options.extractStyles||M.utils.isUndefined(e.options.extractStyles))&&(r=!1),a({title:t,type:e.type,visible:!0===e.isVisible(),id:e.name,url:e.url,outOfRange:!e.inRange(),checkedLayer:e.checkedLayer||"false",opacity:e.getOpacity(),metadata:i,hasStyles:r})}))}},{key:"render",value:function(){var e=this;0===document.getElementById("m-layerswitcher-content").childElementCount&&(this.statusShowHideAllLayers=this.map_.getLayers().find((function(e){return!(!1!==e.isBase||!e.displayInLayerSwitcher)&&e.isVisible()}))),this.getTemplateVariables(this.map_).then((function(t){var i;null!==document.querySelector(".m-plugin-layerswitcher.opened ul.m-layerswitcher-ullayers")&&(i=document.querySelector(".m-plugin-layerswitcher.opened ul.m-layerswitcher-ullayers").scrollTop);var a=M.template.compileSync(bt.a,{vars:t});if(e.template_.querySelector("#m-layerswitcher-content").innerHTML=a.innerHTML,"radio"===e.modeSelectLayers&&!1===e.isCheckedLayerRadio){var r=e.template_.querySelectorAll("input[type=radio]");r.length>0&&(e.isCheckedLayerRadio=!0,r[0].click())}var n=e.template_.querySelector(".m-layerswitcher-ullayers");if(null!==n&&e.isMoveLayers){var s=e.map_.getLayers();nt.create(n,{animation:150,ghostClass:"m-layerswitcher-gray-shadow",filter:".m-layerswitcher-opacity",preventOnFilter:!1,onEnd:function(e){var t=e.from,i=s.filter((function(e){return!0===e.displayInLayerSwitcher})),a=Math.max.apply(Math,Gt(i.map((function(e){return e.getZIndex()}))));t.querySelectorAll("li.m-layerswitcher-layer .m-layerswitcher-title-layer .m-layerswitcher-visible-control *").forEach((function(e){var t=e.getAttribute("data-layer-name"),i=e.getAttribute("data-layer-url")||void 0,r=e.getAttribute("data-layer-type"),n=s.filter((function(e){return e.name===t&&(e.url===i||void 0===e.url&&("OSM"===e.type||"GeoJSON"===e.type||"MBTilesVector"===e.type||"MBTiles"===e.type))&&e.type===r}));n.length>0&&(n[0].setZIndex(a),a-=1)}))}})}if(void 0!==i){var o=document.querySelector(".m-plugin-layerswitcher.opened ul.m-layerswitcher-ullayers");null!==o&&(o.scrollTop=i)}}))}},{key:"collapsedPlugin",value:function(e){e.target.parentElement.classList.contains("collapsed")?this.getImpl().removeRenderComplete():(this.render(),this.getImpl().registerEvent(this.map_))}},{key:"clickLayer",value:function(e){var t=this,i=e||window.event,a=i.target.getAttribute("data-layer-name"),r=i.target.getAttribute("data-layer-url")||void 0,n=i.target.getAttribute("data-layer-type"),s=i.target.getAttribute("data-select-type");if("m-layerswitcher-hsalllayers"===i.target.id)this.showHideAllLayers();else if(!(M.utils.isNullOrEmpty(a)||M.utils.isNullOrEmpty(r)&&(void 0!==r||"OSM"!==n&&"GeoJSON"!==n&&"GenericVector"!==n&&"Vector"!==n&&"MBTilesVector"!==n&&"MBTiles"!==n)||M.utils.isNullOrEmpty(n))){var o=this.findLayer(i);if(o.length>0)if(o=o[0],i.target.className.indexOf("m-layerswitcher-check")>-1&&"eye"===s)i.target.classList.contains("m-layerswitcher-check")&&(!0!==o.transparent&&o.isVisible()||o.setVisible(!o.isVisible()));else if(i.target.className.indexOf("m-layerswitcher-check")>-1&&"radio"===s)this.overlayLayers.forEach((function(e){e.name!==a||e.type!==n||e.url!==r&&"noURL"!==r?(e.checkedLayer="false",e.setVisible(!1)):(e.checkedLayer="true",e.setVisible(!0))}));else if(i.target.className.indexOf("m-layerswitcher-icons-image")>-1){var l=i.target.parentElement.parentElement.parentElement.querySelector(".m-layerswitcher-legend");if("block"!==l.style.display){var c=o.getLegendURL();c instanceof Promise?c.then((function(e){-1===e.indexOf("assets/img/legend-default.png")?l.querySelector("img").src=e:t.errorLegendLayer(o).then((function(t){l.querySelector("img").src=""!==t?t:e}))})):c.indexOf("assets/img/legend-default.png")>=0?this.errorLegendLayer(o).then((function(e){if("error legend"===e){var t=l.querySelector("img"),i=document.createElement("p"),a=document.createElement("span");a.classList.add("m-layerswitcher-icons-cancel"),i.classList.add("m-layerswitcher-legend-error"),i.appendChild(a);var r=document.createTextNode(Lt("legend_error"));i.appendChild(r),t.parentNode.insertBefore(i,t)}else l.querySelector("img").src=""!==e?e:c})):l.querySelector("img").src=c,l.style.display="block"}else{var d=l.querySelector("img").parentElement.querySelector("p");M.utils.isNullOrEmpty(d)||d.remove(),l.style.display="none"}}else if(i.target.className.indexOf("m-layerswitcher-icons-target")>-1)this.eventIconTarget_(n,o);else if(i.target.className.indexOf("m-layerswitcher-icons-info")>-1)if("OGCAPIFeatures"===o.type){var u,p="".concat(o.url).concat(o.name,"?f=json"),h="".concat(o.url).concat(o.name,"?f=html");M.proxy(this.useProxy),M.remote.get(p).then((function(e){var i={title:(u=JSON.parse(e.text)).title,abstract:u.description,hasMetadata:!0,metadata:h,isOgc:!0,translations:{title:Lt("title"),name:Lt("name"),abstract:Lt("abstract"),provider:Lt("provider"),service_info:Lt("service_info"),download_center:Lt("download_center"),see_more:Lt("see_more"),metadata_abstract:Lt("metadata_abstract"),responsible:Lt("responsible"),access_constraints:Lt("access_constraints"),use_constraints:Lt("use_constraints"),online_resources:Lt("online_resources"),see_more_layer:Lt("see_more_layer"),see_more_service:Lt("see_more_service"),metadata:Lt("metadata"),attributes:Lt("attributes")}};if(o.getFeatures().length>0){t.pages_={total:0,actual:1,element:0};var a=[],r=o.getFeatures(),n=Object.keys(r[0].getAttributes());r.forEach((function(e){var t=Object.values(e.getAttributes());M.utils.isNullOrEmpty(t)||a.push({properties:t})})),M.utils.isUndefined(n)?i.attributes=a:(i.pages=t.pageResults_(a),i.allAttributes=a,i.attributes=!M.utils.isNullOrEmpty(a)&&a.slice(t.pages_.element,t.pages_.element+t.numPages_)),i.headerAtt=n}if(t.renderInfo(i,"OGCAPIFeatures"),t.latestVars_=i,o instanceof M.layer.Vector&&document.querySelector("#m-layerswitcher-next")){var s=document.querySelector("#m-layerswitcher-next");s.addEventListener("click",t.nextPage_.bind(t)),s.addEventListener("keyup",(function(e){e.preventDefault(),13===e.keyCode&&s.click()}));var l=document.querySelector("#m-layerswitcher-previous");l.addEventListener("click",t.previousPage_.bind(t)),l.addEventListener("keyup",(function(e){e.preventDefault(),13===e.keyCode&&l.click()})),t.hasNext_(),t.hasPrevious_()}})),M.proxy(this.statusProxy)}else if("WMS"===o.type||"WMTS"===o.type){var m={name:o.name,title:o.legend,abstract:o.capabilitiesMetadata.abstract,translations:{title:Lt("title"),name:Lt("name"),abstract:Lt("abstract"),provider:Lt("provider"),service_info:Lt("service_info"),download_center:Lt("download_center"),see_more:Lt("see_more"),metadata_abstract:Lt("metadata_abstract"),responsible:Lt("responsible"),access_constraints:Lt("access_constraints"),use_constraints:Lt("use_constraints"),online_resources:Lt("online_resources"),see_more_layer:Lt("see_more_layer"),see_more_service:Lt("see_more_service"),metadata:Lt("metadata")}};m.capabilities=this.addCapabilitiesInformation(o),o.capabilitiesMetadata.metadataURL&&(m.metadata=o.capabilitiesMetadata.metadataURL[0].OnlineResource),m.provider=this.informationProvider(o),M.proxy(this.useProxy),M.remote.get(m.capabilities).then((function(e){var i=e.text.split("<inspire_common:URL>")[1].split("<")[0].split("&amp;").join("&");!M.utils.isNullOrEmpty(i)&&M.utils.isUrl(i)&&(m.metadata_service=i,m.hasMetadata=!0),M.utils.isNullOrEmpty(m.metadata)||!M.utils.isUrl(m.metadata)?void 0!==m.metadata_service?t.infoDownloadCenter(m.metadata_service,m):t.renderInfo(m):(m.hasMetadata=!0,t.infoDownloadCenter(m.metadata,m))})).catch((function(e){t.renderInfo(m)})),M.proxy(this.statusProxy)}else{var y=!0,f={name:o.name,title:o.legend,translations:{title:Lt("title"),name:Lt("name"),n_obj_geo:Lt("n_obj_geo"),extension:Lt("extension"),attributes:Lt("attributes"),values:Lt("values"),attribution:Lt("attribution"),description:Lt("description"),minzoom:Lt("minzoom"),maxzoom:Lt("maxzoom"),center:Lt("center")}};if(o instanceof M.layer.Vector){var v=o.getFeatures().length;f.numberFeatures=v;var g=o.getMaxExtent();if(f.extension=M.utils.isNullOrEmpty(g)?g:g.toString().replaceAll(",",", "),v>0){this.pages_={total:0,actual:1,element:0};var b=[],w=o.getFeatures(),_=Object.keys(w[0].getAttributes());w.forEach((function(e){var t=Object.values(e.getAttributes());M.utils.isNullOrEmpty(t)||b.push({properties:t})})),M.utils.isUndefined(_)?f.attributes=b:(f.pages=this.pageResults_(b),f.allAttributes=b,f.attributes=!M.utils.isNullOrEmpty(b)&&b.slice(this.pages_.element,this.pages_.element+this.numPages_)),f.headerAtt=_}}var x=o.type;if("MVT"===x||"TMS"===x||"XYZ"===x){y=!1;var S=o.url;S=S.replace(/\{z\}\/\{x\}\/\{(-?)y\}\/?.*$/,"metadata.json");var L=o.getMaxExtent();f.extension=M.utils.isNullOrEmpty(L)?L:L.toString().replaceAll(",",", "),M.proxy(this.useProxy),M.remote.get(S).then((function(e){if(200===e.code){var i=JSON.parse(e.text),a={};i.id&&(a.id=i.id),i.attribution&&(a.attribution=i.attribution),i.description&&(a.description=i.description),void 0!==i.minzoom&&(a.minzoom=i.minzoom.toString()),void 0!==i.maxzoom&&(a.maxzoom=i.maxzoom.toString()),i.center&&(a.center=i.center.toString().replaceAll(",",", ")),Object.keys(a).length>0&&(f.others=a)}t.renderInfo(f,"Others")})),M.proxy(this.statusProxy)}else if("OSM"===x||"MBTiles"===x){var C=o.getMaxExtent();f.extension=M.utils.isNullOrEmpty(C)?C:C.toString().replaceAll(",",", ")}if(y&&(this.renderInfo(f,"Others"),this.latestVars_=f),o instanceof M.layer.Vector){!function e(){setTimeout((function(){document.querySelector("#m-layerswitcher-next")?document.querySelector("#m-layerswitcher-next")&&(t.latestVars_=f,document.querySelector("#m-layerswitcher-next").addEventListener("click",t.nextPage_.bind(t)),document.querySelector("#m-layerswitcher-previous").addEventListener("click",t.previousPage_.bind(t)),t.hasNext_(),t.hasPrevious_()):e()}),1e3)}()}}else if(i.target.className.indexOf("m-layerswitcher-icons-style")>-1){var k=[],E=!1;M.utils.isUndefined(o.capabilitiesMetadata)||M.utils.isUndefined(o.capabilitiesMetadata.style)||(k=o.capabilitiesMetadata.style),o instanceof M.layer.Vector&&(k=o.predefinedStyles,E=!0);var O=M.template.compileSync(Dt.a,{jsonp:!0,parseToHtml:!1,vars:{styles:k,isVectorLayer:E,translations:{select_style:Lt("select_style"),change:Lt("change"),style:Lt("style"),default_style:Lt("default_style"),selected:Lt("selected")}}});M.dialog.info(O,Lt("configure_layer"),this.order),this.focusModal(".m-title span"),setTimeout((function(){document.querySelector("#m-layerswitcher-style button").addEventListener("click",t.changeLayerConfig.bind(t,o,k)),document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=Lt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3",setTimeout((function(){document.querySelector(".m-layerswitcher-style-container").focus()}),500)}),10)}else i.target.className.indexOf("m-layerswitcher-icons-delete")>-1&&this.map_.removeLayers(o)}i.stopPropagation()}},{key:"eventIconTarget_",value:function(e,t){var i=this;if("WMS"===e)t.getMaxExtent((function(e){i.map_.setBbox(e)}));else if(["WMTS","WFS","MBTilesVector","MBTiles","OSM","XYZ","TMS","GeoJSON","KML","OGCAPIFeatures","Vector","GenericRaster","GenericVector","MVT"].includes(e)){var a=t.getMaxExtent();null===a&&t.calculateMaxExtent?t.calculateMaxExtent().then((function(e){e.length>0?i.map_.setBbox(e):i.map_.setBbox(i.map_.getExtent())})).catch((function(e){console.error(e)})):null===a?this.map_.setBbox(this.map_.getExtent()):this.map_.setBbox(a)}else M.dialog.info(Lt("exception.extent"),Lt("info"),this.order)}},{key:"pageResults_",value:function(e){return this.pages_.total=Math.ceil(e.length/this.numPages_),this.pages_}},{key:"nextPage_",value:function(){this.pages_.total>this.pages_.actual&&(this.pages_.actual=this.pages_.actual+1,this.pages_.element=this.pages_.element+this.numPages_,this.updateTablePage_())}},{key:"previousPage_",value:function(){this.pages_.actual>1&&(this.pages_.actual=this.pages_.actual-1,this.pages_.element=this.pages_.element-this.numPages_,this.updateTablePage_())}},{key:"updateTablePage_",value:function(){var e=document.querySelector("#m-layerswitcher-table tbody");e.innerHTML="",this.latestVars_.attributes=!M.utils.isNullOrEmpty(this.latestVars_.allAttributes)&&this.latestVars_.allAttributes.slice(this.pages_.element,this.pages_.element+this.numPages_),this.latestVars_.attributes&&this.latestVars_.attributes.forEach((function(t){var i=document.createElement("tr");t.properties.forEach((function(e){var t=document.createElement("td");t.innerHTML=e,i.appendChild(t)})),e.appendChild(i)})),document.querySelector("#m-layerswitcher-pageinfo").innerText="Página ".concat(this.pages_.actual," de ").concat(this.pages_.total),this.hasNext_(),this.hasPrevious_()}},{key:"hasNext_",value:function(e){var t;M.utils.isNullOrEmpty(e)||(t=e),M.utils.isNullOrEmpty(t)&&(t=document),this.pages_.actual<this.pages_.total?t.querySelector("#m-layerswitcher-next").classList.remove("m-layerswitcher-hidden"):t.querySelector("#m-layerswitcher-next").classList.add("m-layerswitcher-hidden")}},{key:"hasPrevious_",value:function(e){var t;M.utils.isNullOrEmpty(e)||(t=e),M.utils.isNullOrEmpty(t)&&(t=document),this.pages_.actual<=this.pages_.total&&1!==this.pages_.actual?t.querySelector("#m-layerswitcher-previous").classList.remove("m-layerswitcher-hidden"):t.querySelector("#m-layerswitcher-previous").classList.add("m-layerswitcher-hidden")}},{key:"inputLayer",value:function(e){var t=this;if("radio"!==e.target.type){clearTimeout(this.inputLayerTimeID),this.getImpl().removeRenderComplete();var i=e||window.event;if(!M.utils.isNullOrEmpty(i.target)){var a=this.findLayer(i);a.length>0&&(i.stopPropagation(),a[0].setOpacity(i.target.value))}this.inputLayerTimeID=setTimeout((function(){t.getImpl().registerEvent(t.map_)}),500)}}},{key:"findLayer",value:function(e){var t=e.target.getAttribute("data-layer-name"),i=e.target.getAttribute("data-layer-url")||void 0,a=e.target.getAttribute("data-layer-type"),r=[];return M.utils.isNullOrEmpty(t)||M.utils.isNullOrEmpty(i)&&(void 0!==i||"OSM"!==a&&"GeoJSON"!==a&&"GenericVector"!==a&&"Vector"!==a&&"MBTilesVector"!==a&&"MBTiles"!==a)||M.utils.isNullOrEmpty(a)||(r=this.overlayLayers.filter((function(e){return e.name===t&&(e.url===i||void 0===e.url||e.url[0]===i)&&e.type===a}))),r}},{key:"errorLegendLayer",value:function(e){var t=this;return new Promise((function(i){var a="";if("TMS"===e.type)a=e.url.replace("{z}/{x}/{-y}","0/0/0");else if("XYZ"===e.type)a=e.url.replace("{z}/{x}/{y}","0/0/0");else if("OSM"===e.type){var r=e.getImpl().getOL3Layer().getSource().getUrls();r.length>0&&(r=r[0]),a=r.replace("{z}/{x}/{y}","0/0/0")}""!==a?(M.proxy(t.useProxy),M.remote.get(a).then((function(e){200!==e.code&&(a=""),i(a)})),M.proxy(t.statusProxy)):i("error legend")}))}},{key:"renderInfo",value:function(e,t){var i,a=e;a.translations.previous=Lt("previous"),a.translations.next=Lt("next"),"OGCAPIFeatures"===t?(i=M.template.compileSync(Ot.a,{jsonp:!1,parseToHtml:!1,vars:a}),this.focusModal(".m-layerswitcher-info-cap p")):"Others"===t?(i=M.template.compileSync(Nt.a,{jsonp:!1,parseToHtml:!1,vars:a}),this.focusModal(".m-layerswitcher-info-cap p")):(i=M.template.compileSync(kt.a,{jsonp:!1,parseToHtml:!1,vars:a}),this.focusModal(".m-layerswitcher-info-cap p")),M.dialog.info(i,Lt("layer_info"),this.order),setTimeout((function(){document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=Lt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3"}),10)}},{key:"addCapabilitiesInformation",value:function(e){return"WMS"===e.type?M.utils.getWMSGetCapabilitiesUrl(e.url,e.version):"WMTS"===e.type&&M.utils.getWMTSGetCapabilitiesUrl(e.url)}},{key:"informationProvider",value:function(e){if(M.utils.isNullOrEmpty(e.capabilitiesMetadata.attribution))return!1;var t="";if("WMS"===e.type&&(t="".concat(e.capabilitiesMetadata.attribution.Title),void 0!==e.capabilitiesMetadata.attribution.OnlineResource&&(t+='<p><a class="m-layerswitcher-provider-link" href="'.concat(e.capabilitiesMetadata.attribution.OnlineResource,'" target="_blank">').concat(e.capabilitiesMetadata.attribution.OnlineResource,"</a></p>"))),"WMTS"===e.type){t="".concat(e.capabilitiesMetadata.attribution.ProviderName)+'<p><a class="m-layerswitcher-provider-link" href="'.concat(e.capabilitiesMetadata.attribution.ProviderSite,'" target="_blank">').concat(e.capabilitiesMetadata.attribution.ProviderSite,"</a></p>");var i=e.capabilitiesMetadata.attribution.ServiceContact;if(!M.utils.isNullOrEmpty(i)&&!M.utils.isNullOrEmpty(i.ContactInfo)){var a=i.ContactInfo.Address.ElectronicMailAddress;t+='<p><a class="m-layerswitcher-provider-link" href="mailto:'.concat(a,'">').concat(a,"</a></p>")}}return t}},{key:"infoDownloadCenter",value:function(e,t){var i=this;M.proxy(this.useProxy),M.remote.get(e).then((function(e){var a=e.text.split("<gmd:MD_DigitalTransferOptions>")[1].split("<gmd:URL>").filter((function(e){return e.indexOf("centrodedescargas")>-1&&-1===e.indexOf("atom")}));if(a.length>0){var r=a[0].split("</gmd:URL>")[0].trim();t.downloadCenter=r}i.renderInfo(t)})).catch((function(e){i.renderInfo(t)})),M.proxy(this.statusProxy)}},{key:"showHideAllLayers",value:function(){var e=this;this.statusShowHideAllLayers=!this.statusShowHideAllLayers,this.overlayLayers.forEach((function(t){t.setVisible(e.statusShowHideAllLayers)}))}},{key:"changeLayerConfig",value:function(e,t){var i=document.querySelector("#m-layerswitcher-style-select").value;if(""!==i){if(e instanceof M.layer.Vector){if(!M.utils.isNullOrEmpty(t)){var a=t[i];0===i?e.setStyle():e.setStyle(a)}}else{e.getImpl().getOL3Layer().getSource().updateParams({STYLES:i});var r=e.capabilitiesMetadata;if(!M.utils.isNullOrEmpty(r)&&!M.utils.isNullOrEmpty(r.style)){var n=e.capabilitiesMetadata.style.filter((function(e){return e.Name===i}));if(n.length>0&&n[0].LegendURL.length>0){var s=n[0].LegendURL[0].OnlineResource;e.setLegendURL(s)}}}document.querySelector("div.m-mapea-container div.m-dialog").remove()}}},{key:"showLoading",value:function(){var e=document.createElement("p");e.id="m-layerswitcher-loading",e.innerHTML='<span class="m-layerswitcher-icons-spinner"></span>',document.querySelector(".m-layerswitcher-search-panel").appendChild(e),document.querySelector(ni).style.display="none",document.querySelector(ei)&&(document.querySelector(ei).style.display="none"),document.getElementById("m-layerswitcher-addservices-file-input")&&(document.getElementById("labelFileInput").style.display="none"),document.querySelector(ri).style.display="none",this.loadingActive=!0}},{key:"removeLoading",value:function(){document.querySelector("#m-layerswitcher-loading")&&document.querySelector(ni)&&(document.querySelector("#m-layerswitcher-loading").remove(),document.querySelector(ni).style.display="inline",document.querySelector(ei)&&(document.querySelector(ei).style.display="inline"),document.getElementById("m-layerswitcher-addservices-file-input")&&(document.getElementById("labelFileInput").style.display="inline"),document.querySelector(ri).style.display="inline",this.loadingActive=!1)}},{key:"readCapabilities",value:function(e){var t=this,i=document.querySelector("#m-layerswitcher-addservices-suggestions"),a=document.querySelector(ti);e.preventDefault();var r=!1,n=!1;i.style.display="none";var s=a.value.trim().split("?")[0];if(this.removeContains(e),M.utils.isNullOrEmpty(s))M.dialog.error(Lt("exception.empty"),void 0,this.order);else if(M.utils.isUrl(s)){if(this.http&&!this.https){r=/^(http:)/.test(s)}else if(this.https&&!this.http){n=/^(https:)/.test(s)}else this.http&&this.https&&(r=!0,n=!0);if(!0===r||!0===n){this.showLoading();var o=s.indexOf(".pbf")>=0,l=s.indexOf(".json")>=0;if(o||l){var c=s,d="{z}/{x}/{y}.pbf";o&&(-1===s.indexOf("{z}/{x}/{y}")&&(d="{z}/{y}/{x}.pbf"),c=s.replace(d,"metadata.json")),M.proxy(this.useProxy),M.remote.get(c).then((function(e){if(l&&e.text.replaceAll("\r\n","").replaceAll(" ","").indexOf('"type":"FeatureCollection"')>=0)t.printLayerModal(s,"geojson");else{var i,a=JSON.parse(e.text);M.utils.isNullOrEmpty(a)?a={}:(M.utils.isNullOrEmpty(a.json)||(a=JSON.parse(a.json)),i=c.substring(0,c.lastIndexOf("/")+1).concat(d));var r=a.vector_layers||[],n=a.tileurl||a.tiles||i||s;M.utils.isString(n)&&(n=[n]),r=r.map((function(e){return{name:e.id}})),t.printLayerModal(n[0],"mvt",r)}})),M.proxy(this.statusProxy)}else if(s.indexOf("{z}/{x}/{-y}")>=0)this.printLayerModal(s,"tms");else if(s.indexOf("{z}/{x}/{y}")>=0&&s.indexOf("openstreetmap")>=0)this.printLayerModal(s,"osm");else if(s.indexOf("{z}/{x}/{y}")>=0)this.printLayerModal(s,"xyz");else{new Promise((function(e,i){var a=setTimeout((function(){return i()}),15e3);M.proxy(t.useProxy),M.remote.get(M.utils.getWMTSGetCapabilitiesUrl(s)).then((function(t){clearTimeout(a),e(t)})),M.proxy(t.statusProxy)})).then((function(e){if(e.text&&e.text.indexOf("<TileMatrixSetLink>")>=0&&e.text.indexOf('Operation name="GetTile"')>=0){var i=(new M.impl.format.WMTSCapabilities).read(e.xml);t.serviceCapabilities=i.capabilities||{};var a=M.impl.util.wmtscapabilities.getLayers(i.capabilities,s,t.map_.getProjection().code);t.capabilities=t.filterResults(a),t.showResults()}else{var r=new Promise((function(e,i){var a=setTimeout((function(){return i()}),15e3);M.proxy(t.useProxy),M.remote.get(M.utils.getWMSGetCapabilitiesUrl(s,"1.3.0")).then((function(t){clearTimeout(a),e(t)})),M.proxy(t.statusProxy)})),n=new Promise((function(e,i){var a=setTimeout((function(){return i()}),15e3),r=s;r=M.utils.addParameters(s,"request=GetCapabilities"),r=M.utils.addParameters(r,"service=WFS"),r=M.utils.addParameters(r,{version:"1.3.0"}),M.proxy(t.useProxy),M.remote.get(r).then((function(t){clearTimeout(a),e(t)})),M.proxy(t.statusProxy)}));Promise.all([r,n]).then((function(e){var i=!1,a=!1;if(-1===e[0].text.indexOf("<TileMatrixSetLink>")&&e[0].text.indexOf("<GetMap>")>=0&&(i=!0),-1===e[1].text.indexOf("<TileMatrixSetLink>")&&e[1].text.indexOf('Operation name="GetFeature"')>=0&&(a=!0),i||a)try{if(i){var r=(new M.impl.format.WMSCapabilities).read(e[0].xml||(new DOMParser).parseFromString(e[0].text,"text/xml"));t.serviceCapabilities=r.Service||{};var n=new M.impl.GetCapabilities(r,s,t.map_.getProjection().code);t.capabilities=t.filterResults(n.getLayers()),t.capabilities.forEach((function(e){try{t.getParents(r,e)}catch(e){}}))}var o;a&&(o=t.readWFSCapabilities(e[1])),t.showResults(o)}catch(e){M.dialog.error(Lt("exception.capabilities"),void 0,t.order),t.removeLoading()}else t.checkIfOGCAPIFeatures(s).then((function(e){if(!0===e)t.checkIfOGCAPICollection(s).then((function(e){e?t.printOGCModal(s):(M.dialog.error(Lt("exception.ogcfeatures"),void 0,t.order),t.removeLoading())}));else{M.proxy(t.useProxy);var i=s.includes(".")?s.substring(s.lastIndexOf(".")+1,s.length):"";["zip","gpx","gml"].includes(i)?t.openFileFromUrl(s,i):M.remote.get(s).then((function(e){if(e.text.replaceAll("\r\n","").replaceAll(" ","").indexOf('"type":"FeatureCollection"')>=0)t.printLayerModal(s,"geojson");else if(e.text.indexOf("<kml ")>=0){var i=(new DOMParser).parseFromString(e.text,"text/xml").getElementsByTagName("Folder"),a=-1,r=Array.from(i).map((function(e){return a+=1,{name:e.querySelector(":scope > name")?e.querySelector(":scope > name").textContent.trim():"Layer__".concat(a)}}));t.printLayerModal(s,"kml",r)}})),M.proxy(t.statusProxy)}})),M.proxy(t.statusProxy)})).catch((function(e){M.dialog.error(Lt("exception.capabilities"),void 0,t.order),t.removeLoading()}))}})).catch((function(e){M.dialog.error(Lt("exception.capabilities"),void 0,t.order),t.removeLoading()}))}}else{var u;this.http?u=Lt("exception.only_http"):this.https?u=Lt("exception.only_https"):this.http||this.https||(u=Lt("exception.no_http_https")),M.dialog.error(u,void 0,this.order)}}else M.dialog.error(Lt("exception.valid_url"),void 0,this.order)}},{key:"openAddServices",value:function(){var e=this,t=this.precharged,i=void 0!==t.groups&&t.groups.length>0||void 0!==t.services&&t.services.length>0,a=this.codsiActive,r=M.template.compileSync(qt.a,{jsonp:!0,parseToHtml:!1,vars:{precharged:t,hasPrecharged:i,codsiActive:a,accept:".kml, .zip, .gpx, .geojson, .gml, .json",translations:{url_service:Lt("url_service"),query:Lt("query"),loaded_services:Lt("loaded_services"),clean:Lt("clean"),availables:Lt("availables"),codsi_services:Lt("codsi_services"),filter_results:Lt("filter_results"),clean_filter:Lt("clean_filter"),filter_text:Lt("filter_text"),upload_file:Lt("upload_file")}}});M.dialog.info(r,Lt("load_ext_services"),this.order),setTimeout((function(){e.changeClodeButtonModal(),e.addEventSuggestions(),e.addEventCODSI(),e.addEventSearch(),e.addEventFileUpload()}),10),this.focusModal("#m-layerswitcher-addservices-search-input")}},{key:"focusModal",value:function(e){setTimeout((function(){var t=document.querySelector(e);t.focus(),t.click()}),100)}},{key:"changeClodeButtonModal",value:function(){document.querySelector("div.m-dialog.info div.m-button > button").innerHTML=Lt("close")}},{key:"addEventSearch",value:function(){var e=this,t=document.querySelector(ni),i=document.querySelector(ti);t.addEventListener("click",(function(t){e.filterName=void 0,e.readCapabilities(t)})),i.addEventListener("keydown",(function(t){13===t.keyCode&&(e.filterName=void 0,e.readCapabilities(t))}))}},{key:"addEventFileUpload",value:function(){var e=this,t=document.querySelector("#m-layerswitcher-addservices-file-input");t.addEventListener("change",(function(){return e.changeFile(t)}))}},{key:"changeFile",value:function(e){M.loadFiles.addFileToMap(this.map_,e.files[0]),e.value="",document.querySelector("div.m-dialog.info div.m-button > button").click()}},{key:"openFileFromUrl",value:function(e,t){var i=this;if(M.utils.isUrl(e)){var a=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));["zip","kml","gpx","geojson","gml","json"].includes(t)>-1?"zip"===t?this.downloadShp(e,a):M.remote.get(e).then((function(e){var r=e.text;M.utils.loadFeaturesFromSource(i.map_,r,a,t),document.querySelector("div.m-dialog.info div.m-button > button").click()})):M.dialog.error(Lt("exception.url_not_valid"))}}},{key:"downloadShp",value:function(e,t){var i=this;window.fetch(e).then((function(e){return e.ok?e.blob():(M.dialog.error(Lt("exception.url_not_valid")),null)})).then((function(e){e?e.arrayBuffer().then((function(e){M.utils.loadFeaturesFromSource(i.map_,e,t,"zip"),document.querySelector("div.m-dialog.info div.m-button > button").click()})):M.dialog.error(Lt("exception.url_not_valid"))})).catch((function(e){M.dialog.error(Lt("exception.url_not_valid"))}))}},{key:"addEventSuggestions",value:function(){var e=this,t=document.querySelector(ri);null!==t&&(t.addEventListener("click",(function(t){return e.showSuggestions(t)})),t.addEventListener("keydown",(function(t){return 13===t.keyCode&&e.showSuggestions(t)}))),document.querySelectorAll(".m-layerswitcher-suggestion-caret").forEach((function(e){e.addEventListener("click",(function(){e.parentElement.querySelector(".m-layerswitcher-suggestion-group").classList.toggle("active"),e.classList.toggle("m-layerswitcher-suggestion-caret-close")}))})),document.querySelectorAll("#m-layerswitcher-addservices-suggestions .m-layerswitcher-suggestion").forEach((function(t){t.addEventListener("click",(function(t){return e.loadSuggestion(t)}))}))}},{key:"showSuggestions",value:function(){var e=document.querySelector($t),t=document.querySelector("#m-layerswitcher-ogcCContainer"),i=document.querySelector(ii),a=document.querySelector("#m-layerswitcher-addservices-suggestions");document.querySelector(ai).innerHTML="",null!==e&&(e.style.display="none"),null!==t&&(t.style.display="none"),i.innerHTML="",a.style.display="block"}},{key:"readWFSCapabilities",value:function(e){var t=[],i=e.text.split("<FeatureTypeList>")[1].split("</FeatureTypeList>")[0];if(i.indexOf("<FeatureType>")>-1)i.split("<FeatureType>").forEach((function(e){e.indexOf("</Name>")>-1&&t.push({name:e.split("</Name>")[0].split(">")[1].trim(),title:e.split("</Title>")[0].split("<Title>")[1].trim()})}));else if(i.indexOf("<FeatureType")>-1){i.split("<FeatureType").forEach((function(e){e.indexOf("</Name>")>-1&&t.push({name:e.split("</Name>")[0].split("<Name>")[1].trim(),title:e.split("</Title>")[0].split("<Title>")[1].trim()})}))}var a={},r=!1;try{a.title=e.text.split("<ows:Title>")[1].split("</ows:Title>")[0],r=!0}catch(e){r=r||!1}try{a.abstract=e.text.split("<ows:Abstract>")[1].split("</ows:Abstract>")[0],r=!0}catch(e){r=r||!1}try{a.accessConstraints=e.text.split("<ows:AccessConstraints>")[1].split("</ows:AccessConstraints>")[0],r=!0}catch(e){r=r||!1}return{services:t,capabilities:a,hasCapabilities:r}}},{key:"removeContains",value:function(e){e.preventDefault();var t=document.querySelector($t),i=document.querySelector("#m-layerswitcher-ogcCContainer");null!==i&&(i.style.display="none"),null!==document.querySelector(ai)&&(document.querySelector(ai).style.display="none"),null!==t&&(t.style.display="none"),document.querySelector(ii).innerHTML=""}},{key:"filterResults",value:function(e){var t=this,i=[],a=[],r=[];return void 0===this.filterName?e.forEach((function(e){i.push(e),a.push(e.name)})):"none"===this.filterName?(void 0!==this.precharged.services&&this.precharged.services.length>0&&(r=r.concat(this.precharged.services)),void 0!==this.precharged.groups&&this.precharged.groups.length>0&&this.precharged.groups.forEach((function(e){void 0!==e.services&&e.services.length>0&&(r=r.concat(e.services))})),e.forEach((function(e){var n=!1;r.forEach((function(r){r.type===e.type&&t.checkUrls(r.url,e.url)&&((void 0!==r.white_list&&r.white_list.length>0&&r.white_list.indexOf(e.name)>-1&&-1===a.indexOf(e.name)||void 0===r.white_list&&-1===a.indexOf(e.name))&&(i.push(e),a.push(e.name)),n=!0)})),n||(i.push(e),a.push(e.name))}))):void 0!==this.precharged.groups&&this.precharged.groups.length>0&&this.precharged.groups.forEach((function(r){void 0!==r.services&&r.services.length>0&&r.name===t.filterName&&e.forEach((function(e){var n=!1;r.services.forEach((function(r){r.type===e.type&&t.checkUrls(r.url,e.url)&&((void 0!==r.white_list&&r.white_list.length>0&&r.white_list.indexOf(e.name)>-1&&-1===a.indexOf(e.name)||void 0===r.white_list&&-1===a.indexOf(e.name))&&(i.push(e),a.push(e.name)),n=!0)})),n||(i.push(e),a.push(e.name))}))})),i}},{key:"showResults",value:function(e){var t=this;this.removeLoading();var i=[],a="WMS";M.utils.isUndefined(this.capabilities)||this.capabilities.forEach((function(e){var t=e.getImpl();t.abstract=e.capabilitiesMetadata.abstract.trim(),a=e.type,i.push(t)}));var r=document.querySelector(ii);if(i.length>0||!M.utils.isUndefined(e)){var n={},s=!0;if("WMTS"===a){var o=this.serviceCapabilities.ServiceIdentification,l=this.serviceCapabilities.ServiceProvider;if(void 0!==o&&void 0!==o.Title&&(n.title=o.Title.trim()),void 0!==o&&void 0!==o.Abstract&&(n.abstract=o.Abstract.trim()),void 0!==o&&void 0!==o.AccessConstraints&&(n.accessConstraints=o.AccessConstraints.trim()),void 0!==l){var c="".concat(l.ProviderName,'<p><a class="m-layerswitcher-provider-link" href="').concat(l.ProviderSite,'" target="_blank">').concat(l.ProviderSite,"</a></p>"),d=l.ServiceContact.ContactInfo;if(!M.utils.isNullOrEmpty(l.ServiceContact)&&!M.utils.isNullOrEmpty(d)){var u=d.Address.ElectronicMailAddress;c+='<p><a class="m-layerswitcher-provider-link" href="mailto:'.concat(u,'">').concat(u,"</a></p>")}n.contact=c}}else if(M.utils.isUndefined(this.serviceCapabilities))s=!1;else{var p=this.serviceCapabilities.ContactInformation;void 0!==this.serviceCapabilities.Title&&(n.title=this.serviceCapabilities.Title.trim()),void 0!==this.serviceCapabilities.Abstract&&(n.abstract=this.serviceCapabilities.Abstract.trim()),void 0!==this.serviceCapabilities.AccessConstraints&&(n.accessConstraints=this.serviceCapabilities.AccessConstraints.trim()),void 0!==p&&void 0!==p.ContactPersonPrimary&&void 0!==p.ContactPersonPrimary.ContactOrganization&&(n.contact=p.ContactPersonPrimary.ContactOrganization.trim())}var h={result:i,serviceCapabilities:n,type:a,isWFS:!1,showgeneral:s,translations:{layers:Lt("layers"),add:Lt("add"),title:Lt("title"),abstract:Lt("abstract"),responsible:Lt("responsible"),access_constraints:Lt("access_constraints"),show_service_info:Lt("show_service_info"),addAllLayers:Lt("addAllLayers"),add_service:Lt("add_service")}};M.utils.isUndefined(e)||(h.layersWFS=e.services,h.serviceCapabilitieswfs=e.capabilities,h.isWFS=!0);var m=M.template.compileSync(jt.a,{vars:h});r.innerHTML=m.innerHTML;for(var y=r.querySelectorAll("span.m-check-layerswitcher-addservices"),f=0;f<y.length;f+=1)y[f].addEventListener("click",(function(e){return t.registerCheck(e)}));for(var v=r.querySelectorAll("span.m-check-layerswitcher-addservices-wfs"),g=0;g<v.length;g+=1)v[g].addEventListener("click",(function(e){return t.registerCheckWFS(e)}));for(var b=r.querySelectorAll("#m-layerswitcher-all tbody tr td.m-layerswitcher-table-layer-name"),w=0;w<b.length;w+=1)b[w].addEventListener("click",(function(e){return t.registerCheckFromName(e)}));for(var _=r.querySelectorAll("#m-layerswitcher-wfs tbody tr td.m-layerswitcher-table-layer-name"),x=0;x<_.length;x+=1)_[x].addEventListener("click",(function(e){return t.registerCheckFromNameWFS(e)}));r.querySelectorAll(".m-layerswitcher-table-results .m-layerswitcher-table-container table tbody tr td span").forEach((function(e){return e.addEventListener("keydown",(function(e){return 13===e.keyCode&&t.registerCheckFromName(e)}))}));var S=r.querySelector("#m-layerswitcher-addservices-selectall");M.utils.isNull(S)||S.addEventListener("click",(function(e){return t.registerCheck(e)}));var L=r.querySelector("#m-layerswitcher-addservices-selectall-wfs");M.utils.isNull(L)||L.addEventListener("click",(function(e){return t.registerCheckWFS(e)})),r.querySelector(".m-layerswitcher-addservices-add").addEventListener("click",(function(e){return t.addLayers(e)}));var C=r.querySelector(".m-layerswitcher-show-capabilities");M.utils.isNull(C)||C.addEventListener("click",(function(){var e=r.querySelector(".m-layerswitcher-capabilities-container");"block"!==e.style.display?(e.style.display="block",C.innerHTML='<span class="m-layerswitcher-icons-colapsar"></span>&nbsp;'.concat(Lt("hide_service_info"))):(e.style.display="none",C.innerHTML='<span class="m-layerswitcher-icons-desplegar"></span>&nbsp;'.concat(Lt("show_service_info")))}));var k=r.querySelector(".m-layerswitcher-show-capabilities-wfs");M.utils.isNull(k)||k.addEventListener("click",(function(){var e=r.querySelector(".m-layerswitcher-capabilities-container-wfs");"block"!==e.style.display?(e.style.display="block",k.innerHTML='<span class="m-layerswitcher-icons-colapsar"></span>&nbsp;'.concat(Lt("hide_service_info"))):(e.style.display="none",k.innerHTML='<span class="m-layerswitcher-icons-desplegar"></span>&nbsp;'.concat(Lt("show_service_info")))}))}else r.innerHTML='<p class="m-layerswitcher-noresults">'.concat(Lt("exception.no_results"),"</p>");document.querySelector(ii).style.display="block"}},{key:"checkIfOGCAPIFeatures",value:function(e){return M.proxy(this.useProxy),M.remote.get("".concat(e,"?f=json")).then((function(e){var t=!1;return M.utils.isNullOrEmpty(e)||M.utils.isNullOrEmpty(e.text)||-1===e.text.indexOf("collections")||(t=!0),t})).catch((function(){return!1}))}},{key:"checkIfOGCAPICollection",value:function(e){M.proxy(this.useProxy);var t="".concat(e.endsWith("/")?e:"".concat(e,"/"),"collections?f=json");return M.remote.get(t).then((function(t){var i=!1;if(!M.utils.isNullOrEmpty(t)&&!M.utils.isNullOrEmpty(t.text)){var a=JSON.parse(t.text);if(!(a.collections.length>0&&"feature"===a.collections[0].itemType)){var r="".concat(e.endsWith("/")?e:"".concat(e,"/"),"collections/").concat(a.collections[0].id,"/items?f=json&limit=1");return M.remote.get(r).then((function(e){return"FeatureCollection"===JSON.parse(e.text).type&&(i=!0),i}))}i=!0}return i})).catch((function(){return!1}))}},{key:"registerCheck",value:function(e){var t=e||window.event;if(!M.utils.isNullOrEmpty(t.target)&&t.target.classList.contains("m-check-layerswitcher-addservices")){var i=document.querySelector(ii).querySelectorAll(".m-check-layerswitcher-addservices.m-layerswitcher-icons-check").length;i+=t.target.classList.contains("m-layerswitcher-icons-check")?-1:1,t.stopPropagation(),t.target.classList.toggle("m-layerswitcher-icons-check"),t.target.classList.toggle("m-layerswitcher-icons-check-seleccionado"),i>0?(this.stateSelectAll=!1,document.querySelector("#m-layerswitcher-addservices-selectall").classList.remove("m-layerswitcher-icons-check-seleccionado"),document.querySelector("#m-layerswitcher-addservices-selectall").classList.add("m-layerswitcher-icons-check")):0===i&&(this.stateSelectAll=!0,document.querySelector("#m-layerswitcher-addservices-selectall").classList.remove("m-layerswitcher-icons-check"),document.querySelector("#m-layerswitcher-addservices-selectall").classList.add("m-layerswitcher-icons-check-seleccionado"))}else M.utils.isNullOrEmpty(t.target)||"m-layerswitcher-addservices-selectall"!==t.target.id||(this.stateSelectAll?(t.target.classList.remove("m-layerswitcher-icons-check-seleccionado"),t.target.classList.add("m-layerswitcher-icons-check"),this.unSelect(),this.stateSelectAll=!1):(t.target.classList.remove("m-layerswitcher-icons-check"),t.target.classList.add("m-layerswitcher-icons-check-seleccionado"),this.select(),this.stateSelectAll=!0))}},{key:"registerCheckWFS",value:function(e){var t=e||window.event;if(!M.utils.isNullOrEmpty(t.target)&&t.target.classList.contains("m-check-layerswitcher-addservices-wfs")){var i=document.querySelector(ii).querySelectorAll(".m-check-layerswitcher-addservices-wfs.m-layerswitcher-icons-check").length;i+=t.target.classList.contains("m-layerswitcher-icons-check")?-1:1,t.stopPropagation(),t.target.classList.toggle("m-layerswitcher-icons-check"),t.target.classList.toggle("m-layerswitcher-icons-check-seleccionado"),i>0?(this.stateSelectAll=!1,document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.remove("m-layerswitcher-icons-check-seleccionado"),document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.add("m-layerswitcher-icons-check")):0===i&&(this.stateSelectAll=!0,document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.remove("m-layerswitcher-icons-check"),document.querySelector("#m-layerswitcher-addservices-selectall-wfs").classList.add("m-layerswitcher-icons-check-seleccionado"))}else M.utils.isNullOrEmpty(t.target)||"m-layerswitcher-addservices-selectall-wfs"!==t.target.id||(this.stateSelectAll?(t.target.classList.remove("m-layerswitcher-icons-check-seleccionado"),t.target.classList.add("m-layerswitcher-icons-check"),this.unSelectWFS(),this.stateSelectAll=!1):(t.target.classList.remove("m-layerswitcher-icons-check"),t.target.classList.add("m-layerswitcher-icons-check-seleccionado"),this.selectWFS(),this.stateSelectAll=!0))}},{key:"registerCheckFromName",value:function(e){(e||window.event).target.parentElement.querySelector("span.m-check-layerswitcher-addservices").click()}},{key:"registerCheckFromNameWFS",value:function(e){(e||window.event).target.parentElement.querySelector("span.m-check-layerswitcher-addservices-wfs").click()}},{key:"addLayers",value:function(e){var t=this;e.preventDefault();var i=[],a=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-all .m-layerswitcher-icons-check-seleccionado"),r=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-wfs .m-layerswitcher-icons-check-seleccionado");if(0===a.length&&0===r.length)M.dialog.error(Lt("exception.select_layer"),void 0,this.order);else{for(var n=0;n<a.length;n+=1)for(var s=function(e){var r=t.capabilities[e].name;if(a[n].id===r||a[n].name===r){var s=parseInt(t.serviceCapabilities.MaxWidth,10),o=!Number.isNaN(s)&&s<4096,l=void 0!==t.serviceCapabilities.Title&&t.serviceCapabilities.Title.toLowerCase().indexOf("idecanarias")>-1;(t.capabilities[e].url.indexOf("//ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx")>-1||l)&&(t.capabilities[e].version="1.1.1"),t.capabilities[e].tiled="WMTS"===t.capabilities[e].type||o||l,t.capabilities[e].options.origen=t.capabilities[e].type;var c=t.capabilities[e].getLegendURL(),d=t.capabilities[e].capabilitiesMetadata;if((c.indexOf("GetLegendGraphic")>-1||c.indexOf("assets/img/legend-default.png")>-1)&&void 0!==d&&d.style.length>0){if(void 0!==d.style[0].LegendURL&&d.style[0].LegendURL.length>0){var u=d.style[0].LegendURL[0].OnlineResource;null!=u&&t.capabilities[e].setLegendURL(u)}"WMTS"===t.capabilities[e].type&&void 0!==d.style&&d.style.length>0&&d.style.forEach((function(i){if(!0===i.isDefault&&void 0!==i.LegendURL&&i.LegendURL.length>0){var a=i.LegendURL[0].href;t.capabilities[e].setLegendURL(a)}}))}i.push(t.capabilities[e])}},o=0;o<this.capabilities.length;o+=1)s(o);if(r.length>0){var l=[],c=document.querySelector(ti).value.trim().split("?")[0];r.forEach((function(e){var t=e.id.split(":");if("m-layerswitcher-addservices-selectall-wfs"!==t[0]){var i=t[0],a=t[1],r={url:c,legend:a,extact:!0};M.utils.isUndefined(a)?r.name=i:(r.name=a,r.namespace=i),l.push(new M.layer.WFS(r))}})),this.map_.addLayers(l)}i.reverse();var d=this.useAttributions_?this.addAttributions(i):i;this.map_.addLayers(d),document.querySelector("div.m-dialog.info div.m-button > button").click()}}},{key:"addAttributions",value:function(e){return e.map((function(e){var t=e,i=t.capabilitiesMetadata.attribution;if(void 0!==i){var a=i.Title,r=i.OnlineResource,n=i.ProviderName,s=i.ProviderSite;return t.attribution={name:a||n,url:r||s,nameLayer:t.name,id:window.crypto.randomUUID()},t}return t}))}},{key:"unSelect",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-all tbody span.m-layerswitcher-icons-check-seleccionado"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check-seleccionado"),e[t].classList.add("m-layerswitcher-icons-check")}},{key:"select",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-all tbody span"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check"),e[t].classList.add("m-layerswitcher-icons-check-seleccionado")}},{key:"unSelectWFS",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-wfs .m-layerswitcher-icons-check-seleccionado"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check-seleccionado"),e[t].classList.add("m-layerswitcher-icons-check")}},{key:"selectWFS",value:function(){for(var e=document.querySelectorAll("#m-layerswitcher-addservices-results #m-layerswitcher-wfs .m-layerswitcher-icons-check"),t=0;t<e.length;t+=1)e[t].classList.remove("m-layerswitcher-icons-check"),e[t].classList.add("m-layerswitcher-icons-check-seleccionado")}},{key:"loadSuggestion",value:function(e){var t=e.target.getAttribute("data-link");try{var i=e.target.parentElement.parentElement.parentElement,a=i.querySelector(".m-layerswitcher-suggestion-caret").innerText;this.filterName=a,"tbody"===i.localName&&(this.filterName="none")}catch(e){}document.querySelector(ti).value=t,this.readCapabilities(e)}},{key:"checkUrls",value:function(e,t){return e===t||e.indexOf(t)>-1||t.indexOf(e)>-1}},{key:"printLayerModal",value:function(e,t,i){var a=this,r=M.template.compileSync(Ht.a,{jsonp:!0,parseToHtml:!1,vars:{type:t,isMVT:"mvt"===t,layers:i,translations:{add_btn:Lt("add_btn"),legend:Lt("legend"),name:Lt("name"),data_layer:Lt("data_layer"),layers:Lt("layers"),addAllLayers:Lt("addAllLayers"),add_service:Lt("add_service"),separatedby:Lt("separatedby"),placeHolderLegend:Lt("placeHolderLegend")}}});if(document.querySelector(ai).outerHTML=r,"mvt"===t||"kml"===t){var n=document.querySelector("#m-layerswitcher-addservices-selectall");if(!M.utils.isNullOrEmpty(n)){n.addEventListener("click",(function(e){return a.registerCheck(e)}));for(var s=document.querySelectorAll("span.m-check-layerswitcher-addservices"),o=0;o<s.length;o+=1)s[o].addEventListener("click",(function(e){return a.registerCheck(e)}))}}document.querySelector("#m-layerswitcher-layer-button").addEventListener("click",(function(){var i=Math.floor(9e3*Math.random())+1e3,r=document.querySelector("#m-layerswitcher-layer-name");r=M.utils.isNullOrEmpty(r)?"layer_".concat(i):r.value||"layer_".concat(i);var n=document.querySelector("#m-layerswitcher-layer-legend").value||r||"layer_".concat(i),s=document.querySelector("#m-layerswitcher-layer-matrixset");if(M.utils.isNullOrEmpty(s)||(s=s.value||"EPSG:3857"),"osm"===t)a.map_.addLayers(new M.layer.OSM({name:r,legend:n,transparent:!0,url:e,matrixSet:s}));else if("geojson"===t)a.map_.addLayers(new M.layer.GeoJSON({extract:!0,name:r,legend:n,url:e}));else if("tms"===t)a.map_.addLayers(new M.layer.TMS({name:r,legend:n,url:e,projection:s}));else if("xyz"===t)a.map_.addLayers(new M.layer.XYZ({name:r,legend:n,url:e,projection:s}));else if("mvt"===t){var o=document.querySelectorAll("#m-layerswitcher-addservices-results .m-layerswitcher-icons-check-seleccionado"),l=[];o.forEach((function(e){l.push(e.id)}));var c=document.querySelector("#m-layerswitcher-layer-name");M.utils.isNullOrEmpty(c)||-1!==c.value.indexOf("layer_")||(l=c.value.split(","));var d={name:r,legend:n,url:e,projection:s,extract:!0};M.utils.isNullOrEmpty(l)||(d.layers=l),a.map_.addLayers(new M.layer.MVT(d))}else if("kml"===t){var u=document.querySelectorAll("#m-layerswitcher-addservices-results .m-layerswitcher-icons-check-seleccionado"),p=[];u.forEach((function(e){p.push(e.id)}));var h={name:r,legend:n,url:e,extract:!0};M.utils.isNullOrEmpty(p)||(h.layers=p),a.map_.addLayers(new M.layer.KML(h))}document.querySelector("div.m-dialog.info").parentNode.removeChild(document.querySelector("div.m-dialog.info"))})),this.removeLoading()}},{key:"printOGCModal",value:function(e,t,i,a,r,n,s){var o=this,l=e.trim();if(M.utils.isUrl(l)){document.querySelector(ti).value=e;var c="".concat(l.endsWith("/")?l:"".concat(l,"/"),"collections?f=json");M.proxy(this.useProxy),M.remote.get(c).then((function(c){var d=JSON.parse(c.text).collections;M.utils.isNullOrEmpty(r)&&(r=void 0,n=void 0,s=void 0);var u=M.template.compileSync(Rt.a,{jsonp:!0,parseToHtml:!1,vars:{layers:d,selectedLayer:t,limit:i,bbox:a,summary:r,filterByID:n,filterByOtherFilters:s,prevID:void 0,translations:{select_service:Lt("select_service"),amount_results:Lt("amount_results"),amount_results_2:Lt("amount_results_2"),bbox_select:Lt("bbox-select"),other_filters:Lt("other_filters"),id_filter:Lt("id_filter"),warning:Lt("warning"),add_btn:Lt("add_btn"),custom_query_btn:Lt("custom_query_btn"),filters:Lt("filters"),check_results:Lt("check_results")}}});o.removeLoading(),document.querySelector("#m-layerswitcher-ogcCContainer").outerHTML=u;var p=document.querySelector('input[name="m-layerswitcher-ogc-filter"][value="id"]'),h=document.querySelector('input[name="m-layerswitcher-ogc-filter"][value="others"]');o.setOnClickRadioBtn(p,h),o.setOnChanges(r),o.setOnClickCloseBtn(),o.setOnClickersFiltersButtons(r,l,p,h,d,e,n,s)})).catch((function(e){l="",M.dialog.error(Lt("exception.error_ogc"),void 0,o.order)})),M.proxy(this.statusProxy)}}},{key:"setOnClickRadioBtn",value:function(e,t){e.addEventListener("click",(function(){document.querySelector("#m-layerswitcher-ogc-other-filters").style.display="none",document.querySelector("#m-layerswitcher-ogc-filter-id").style.display="block",document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""})),t.addEventListener("click",(function(){document.querySelector("#m-layerswitcher-ogc-other-filters").style.display="block",document.querySelector("#m-layerswitcher-ogc-filter-id").style.display="none",document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""}))}},{key:"setOnChanges",value:function(e){document.querySelector("#m-layerswitcher-ogc-search-form-ID").addEventListener("change",(function(){document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""})),document.querySelector("#m-layerswitcher-ogc-limit-items").addEventListener("change",(function(){document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""})),document.querySelector("#m-layerswitcher-ogc-search-bbox").addEventListener("change",(function(){document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""})),document.querySelector("#m-layerswitcher-ogc-vectors-select").addEventListener("change",(function(){var e=document.querySelector("#m-layerswitcher-ogc-summary");null!==e&&(e.remove(),void 0),document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML=""}))}},{key:"setOnClickCloseBtn",value:function(){var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=Lt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3",e.addEventListener("click",(function(){try{document.querySelector("div.m-dialog.info").parentNode.removeChild(document.querySelector("div.m-dialog.info"))}catch(e){}}))}},{key:"loadOGCAPIFeaturesLayer",value:function(e){var t=new M.layer.OGCAPIFeatures(e);this.map_.addLayers(t),t.setZIndex(t.getZIndex()+8)}},{key:"setOnClickersFiltersButtons",value:function(e,t,i,a,r,n,s,o){var l,c,d,u=this,p=document.querySelector("#m-layerswitcher-ogc-vectors-select").value,h=document.querySelector("#m-layerswitcher-ogcCContainer #m-layerswitcher-ogc-select-button"),m=document.querySelector("#m-layerswitcher-ogcCContainer #m-layerswitcher-ogc-check-button"),y=document.querySelector("#m-layerswitcher-ogc-custom-query-button");h.addEventListener("click",(function(){p===Lt("select_service")?M.dialog.error(Lt("no_results"),void 0,u.order):(d=u.getProperties(p,e),u.loadOGCAPIFeaturesLayer(d),document.querySelector("div.m-dialog.info div.m-button > button").click())})),m.addEventListener("click",(function(){p===Lt("select_service")?M.dialog.error(Lt("no_results"),void 0,u.order):(d=u.getProperties(p,e),u.getNumberFeaturesOGCAPIFeaturesLayer(d).then((function(e){var t,i;1===e?(t=Lt("results_1_singular"),i=Lt("results_2_singular")):(t=Lt("results_1_plural"),i=Lt("results_2_plural"));var a=document.querySelector("#m-layerswitcher-ogc-check-results");a.style.display="block",a.innerHTML="".concat(t).concat(e).concat(i)})).then((function(){document.querySelector("#m-layerswitcher-ogc-check-results").focus()})),M.proxy(u.statusProxy))})),y.addEventListener("click",(function(){var d,h=document.querySelector(".m-content").innerHTML;p=document.querySelector("#m-layerswitcher-ogc-vectors-select").value;var m=document.querySelector("#m-layerswitcher-ogc-limit-items").value,y=document.querySelector("#m-layerswitcher-ogc-search-bbox").checked,f="".concat(t,"/collections/").concat(p,"/queryables");M.proxy(u.useProxy),M.remote.get(f).then((function(t){try{var f=JSON.parse(t.text).properties;(d=Object.values(f)).forEach((function(t){if(void 0!==t.title){var i=t.type.toLowerCase();"bool"===i||"boolean"===i?t.bool=!0:"timestamp"===i||"date"===i?t.date=!0:"int4"===i||"int"===i||"number"===i||"numeric"===i||i.includes("numeric")?t.number=!0:t.text=!0}void 0!==e&&(t.title in e&&(t.value=e[t.title]),document.querySelector("#m-layerswitcher-ogc-check-results").innerHTML="")}))}catch(e){}var v=document.querySelector(ti).value,g=M.template.compileSync(Bt.a,{jsonp:!0,parseToHtml:!1,vars:{filtersList:d,summary:e,translations:{other_filters:Lt("other_filters"),id_filter:Lt("id_filter"),filters:Lt("filters"),custom_query_warning:Lt("custom_query_warning")}}}),b="".concat(Lt("custom_query_btn"));M.dialog.remove(Rt.a,void 0,u.order),M.dialog.info(g,b,u.order);var w=document.createElement("button"),_=document.createElement("button");setTimeout((function(){document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var e=document.querySelector("div.m-dialog.info div.m-button > button");e.innerHTML=Lt("close"),e.style.width="75px",e.style.backgroundColor="#71a7d3",e.style.display="none";var t=document.querySelector("div.m-dialog.info div.m-button");_.textContent=Lt("close"),_.style.width="75px",_.style.backgroundColor="#71a7d3",_.style.marginLeft="4px",_.setAttribute("data-link",v),_.setAttribute("data-service-type","OGCAPIFeatures"),t.insertBefore(_,t.firstChild),w.textContent=Lt("apply_btn"),w.style.width="75px",w.style.backgroundColor="#71a7d3",w.setAttribute("data-link",v),w.setAttribute("data-service-type","OGCAPIFeatures"),t.insertBefore(w,t.firstChild)}),10),w.addEventListener("click",(function(){var e=!1,t=!1;i.checked?(e=!0,t=!1,c=document.querySelectorAll("#m-layerswitcher-ogc-search-form-id input")):a.checked&&(e=!1,t=!0,c=document.querySelectorAll("#m-layerswitcher-ogc-search-formothers input"));var s=u.getFiltersDict(c);document.querySelector(".m-content").innerHTML=h,l=r.findIndex((function(e){return e.id===p})),M.utils.isNullOrEmpty(s)||0===Object.keys(s).length?u.printOGCModal(n,l,m,y):u.printOGCModal(n,l,m,y,s,e,t)})),_.addEventListener("click",(function(){document.querySelector(".m-content").innerHTML=h,l=r.findIndex((function(e){return e.id===p})),u.printOGCModal(n,l,m,y,e,s,o)}))})).catch((function(e){M.dialog.error(Lt("no_results"),void 0,u.order)})),M.proxy(u.statusProxy)}))}},{key:"getProperties",value:function(e,t){var i=document.querySelector(ti).value,a=document.querySelector("#m-layerswitcher-ogc-vectors-select").selectedOptions[0].text;e=document.querySelector("#m-layerswitcher-ogc-vectors-select").value;var r,n=document.querySelector("#m-layerswitcher-ogc-limit-items").value,s=document.querySelector("#m-layerswitcher-ogc-search-bbox").checked,o=n;if(s){var l=this.map_.getBbox(),c=this.getImpl().getTransformedCoordinates(this.map_.getProjection().code,[l.x.min,l.y.min]),d=this.getImpl().getTransformedCoordinates(this.map_.getProjection().code,[l.x.max,l.y.max]);r="".concat(c[0],";").concat(c[1],";").concat(d[0],";").concat(d[1])}var u={};return u.url="".concat(i,"/collections/"),u.name=e,u.legend=a,u.limit=o,u.extract=!0,this.useAttributions_&&(u.attribution={url:"https://www.idee.es/",id:window.crypto.randomUUID(),name:u.legend,nameLayer:u.name}),s&&(u.bbox=r),!0===document.querySelector("#m-layerswitcher-ogc-filter-id-input").checked?u.id=document.querySelector("#m-layerswitcher-ogc-search-form-ID").value:void 0!==t&&(u.conditional=t),u.format="json",u}},{key:"getFiltersDict",value:function(e){var t={},i={};e.forEach((function(e){var a=e.id.substring(e.id.indexOf("form-")+5);switch(e.type){case"checkbox":i[a]||(i[a]=[]),i[a].push(e);break;case"date":if(!M.utils.isNullOrEmpty(e.value)){var r=new Date(e.value);t[a]=r.toISOString().split("T")[0]}break;default:M.utils.isNullOrEmpty(e.value)||(t[a]=e.value)}})),Object.keys(i).forEach((function(e){var a=i[e].filter((function(e){return e.checked})).map((function(e){return e.value}));1===a.length&&(t[e]=a[0])}));var a=Object.keys(t),r=Object.values(t),n={};return a.forEach((function(e,t){n[e]=r[t]})),n}},{key:"getNumberFeaturesOGCAPIFeaturesLayer",value:function(e){var t,i=new M.layer.OGCAPIFeatures(e),a=this.getFeatureUrl(i);return M.proxy(this.useProxy),M.remote.get(a).then((function(e){return t=JSON.parse(e.text),null!==t?"Feature"===t.type?1:t.features.length:0}))}},{key:"destroy",value:function(){this.getImpl().destroy()}},{key:"getFeatureUrl",value:function(e){var t,i={};if(M.utils.isNullOrEmpty(e.name)||(e.url="".concat(e.url).concat(e.name,"/items")),M.utils.isNullOrEmpty(e.format)||(i.f=e.format),M.utils.isNullOrEmpty(e.id)){if(e.url="".concat(e.url,"?"),M.utils.isNullOrEmpty(e.limit)||(i.limit=e.limit),M.utils.isNullOrEmpty(e.offset)||(i.offset=e.offset),M.utils.isNullOrEmpty(e.bbox)||(i.bbox=e.bbox),t=M.utils.addParameters(M.utils.addParameters(e.url,i),e.getFeatureVendor),!M.utils.isNullOrEmpty(e.conditional)){var a="";Object.keys(e.conditional).forEach((function(t){var i="&".concat(t,"=").concat(e.conditional[t],"&");a+=i})),i.conditional=a,t+=i.conditional}}else e.url="".concat(e.url).concat(e.id,"?"),t=M.utils.addParameters(M.utils.addParameters(e.url,i),e.getFeatureVendor);return t=t.replaceAll(" ","%20")}},{key:"addEventCODSI",value:function(){var e=this;this.codsiButton=document.querySelector(ei),this.codsiFilterButton=document.querySelector("#m-layerswitcher-addservices-codsi-filter-btn"),this.codsiSearchInput=document.querySelector("#m-layerswitcher-addservices-codsi-search-input"),this.codsiCleanButton=document.querySelector("#m-layerswitcher-addservices-codsi-clean-btn"),null!==this.codsiButton&&(this.codsiButton.addEventListener("click",(function(t){return e.showCODSI(t)})),this.codsiButton.addEventListener("keydown",(function(t){return 13===t.keyCode&&e.showCODSI(t)})),this.codsiFilterButton.addEventListener("click",(function(t){e.loadCODSIResults(e.select_codsi)})),this.codsiFilterButton.addEventListener("keydown",(function(t){return 13===t.keyCode&&e.loadCODSIResults(e.select_codsi)})),this.codsiSearchInput.addEventListener("keypress",(function(t){13===t.keyCode&&e.loadCODSIResults(e.select_codsi)})),this.codsiCleanButton.addEventListener("click",(function(t){e.codsiSearchInput.value="",e.loadCODSIResults(e.select_codsi)})))}},{key:"loadCODSIResults",value:function(e){var t=this,i=this.generateUrlCODSI(e);M.proxy(this.useProxy),M.remote.get(i).then((function(i){var a=JSON.parse(i.text),r=a.summary["@count"],n=t.getResultCODSI(a);t.renderCODSIResults(n),t.renderCODSIPagination(e,r)})).catch((function(e){M.dialog.error(Lt("exception.codsi"),void 0,t.order)})),M.proxy(this.statusProxy)}},{key:"getResultCODSI",value:function(e){var t=this,i=[];return void 0!==e.metadata&&e.metadata.forEach((function(e){var a=t.getLinksCODSIResults(e);a.length>0&&i.push({title:e.title||e.defaultTitle,url:a[0].split("?")[0]})})),i}},{key:"generateUrlCODSI",value:function(e){var t=this.codsiSearchInput.value.trim(),i=1+9*(e-1),a=9*e,r="https://www.idee.es/csw-inspire-idee/srv/spa/q?_content_type=json&bucket=s101&facet.q=type%2Fservice&fast=index&from=*1&keyword=WMS%20or%20Web%20Map%20Service%20or%20WMTS%20or%20Web%20Map%20Tile%20Service%20or%20TMS%20or%20MVT%20or%20Features%20WFS&resultType=details&sortBy=title&sortOrder=asc&to=*2".split("*1").join("".concat(i)).split("*2").join("".concat(a));return""!==t&&(r+="&any=".concat(encodeURIComponent(t))),r}},{key:"getLinksCODSIResults",value:function(e){var t=this,i=[];return Array.isArray(e.link)?e.link.forEach((function(e){i=i.concat(t.formatLinksCODSIResults(e))})):i=i.concat(this.formatLinksCODSIResults(e.link)),i}},{key:"formatLinksCODSIResults",value:function(e){var t=[];return e.indexOf("||")>-1?t=e.split("||").filter((function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1})):e.indexOf("|")>-1&&(t=e.split("|").filter((function(e){return e.indexOf("http://")>-1||e.indexOf("https://")>-1}))),t}},{key:"renderCODSIResults",value:function(e){var t=this;(this.codsiResults=document.querySelector("#m-layerswitcher-addservices-codsi-results"),this.codsiResults.innerHTML="",e.length>0)?e.map((function(e){return t.createElementCODSIResults(e)})).forEach((function(e){return t.codsiResults.appendChild(e)})):this.codsiResults.innerHTML='<div class="codsi-no-results">'.concat(Lt("exception.codsi_no_results"),"</div>")}},{key:"createElementCODSIResults",value:function(e){var t=this,i=e.url,a=e.title,r=document.createElement("tr"),n=document.createElement("td"),s=document.createElement("span");return s.setAttribute("tabindex","0"),s.setAttribute("class","m-layerswitcher-codsi-result"),s.setAttribute("data-link",i),s.innerHTML=a,s.addEventListener("click",(function(e){document.querySelector(ti).value=i,t.filterName=void 0,t.readCapabilities(e)})),n.appendChild(s),r.appendChild(n),r}},{key:"paginationCODSI",value:function(){var e=this,t=document.querySelector("#m-layerswitcher-addservices-codsi-pagination"),i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("m-layerswitcher-addservices-pagination-btn"),i.id="nextCODSI",i.innerHTML="...",i.addEventListener("click",(function(i){si.forEach((function(e,t){si[t]=e+si.length})),e.showButtonPaginationCODSI(t,si)}));var a=document.createElement("button");a.setAttribute("type","button"),a.id="backCODSI",a.classList.add("m-layerswitcher-addservices-pagination-btn"),a.innerHTML="...",a.addEventListener("click",(function(i){si.forEach((function(e,t){si[t]=e-si.length})),e.showButtonPaginationCODSI(t,si)})),t.insertBefore(a,t.firstChild),t.appendChild(i),this.showButtonPaginationCODSI(t,si)}},{key:"showButtonPaginationCODSI",value:function(e,t){var i=this,a=e.querySelectorAll("button");a.forEach((function(e,r){t.indexOf(r)>-1?a[r].style.display="inline-block":"nextCODSI"!==e.id&&"backCODSI"!==e.id&&(a[r].style.display="none"),r===i.select_codsi?a[r].setAttribute("disabled","disabled"):a[r].removeAttribute("disabled")})),t.indexOf(1)>-1?document.querySelector("#backCODSI").style.display="none":document.querySelector("#backCODSI").style.display="inline-block",t.indexOf(a.length-1)>-1?document.querySelector("#nextCODSI").style.display="none":document.querySelector("#nextCODSI").style.display="inline-block"}},{key:"renderCODSIPagination",value:function(e,t){var i=this;if(document.querySelector("#m-layerswitcher-addservices-codsi-pagination").innerHTML="",t>0){for(var a=Math.ceil(t/9),r="",n=1;n<=a;n+=1)r+=n===e?'<button type="button" tabindex="0" class="m-layerswitcher-addservices-pagination-btn" disabled>'.concat(n,"</button>"):'<button type="button" tabindex="0" class="m-layerswitcher-addservices-pagination-btn">'.concat(n,"</button>");document.querySelector("#m-layerswitcher-addservices-codsi-pagination").innerHTML=r,document.querySelectorAll("#m-layerswitcher-addservices-codsi-pagination button").forEach((function(e,t){e.addEventListener("click",(function(){i.select_codsi=t+1,i.loadCODSIResults(t+1)}))}))}this.paginationCODSI()}},{key:"showCODSI",value:function(){document.querySelector(ii).innerHTML="",document.querySelector(ai).innerHTML="",document.querySelector($t).style.display="block",document.querySelector("#m-layerswitcher-addservices-suggestions").style.display="none",null!==document.querySelector("#m-layerswitcher-ogcCContainer")&&(document.querySelector("#m-layerswitcher-ogcCContainer").style.display="none"),this.loadCODSIResults(this.select_codsi)}},{key:"accessibilityTab",value:function(e){var t=this;e.querySelectorAll('[tabindex="0"]').forEach((function(e){return e.setAttribute("tabindex",t.order)}))}},{key:"equals",value:function(e){return e instanceof t}}])}(),li=i(13),ci=i(14),di=i.n(ci);function ui(e){return(ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hi(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,mi(a.key),a)}}function mi(e){var t=function(e,t){if("object"!=ui(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=ui(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ui(t)?t:t+""}function yi(e,t,i){return t=fi(t),function(e,t){if(t&&("object"==ui(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,i||[],fi(e).constructor):t.apply(e,i))}function fi(e){return(fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vi(e,t){return(vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var gi={groups:[{name:"Cartografía",services:[{name:"Mapas",type:"WMTS",url:"https://www.ign.es/wmts/mapa-raster?"},{name:"Callejero ",type:"WMTS",url:"https://www.ign.es/wmts/ign-base?"},{name:"Primera edición MTN y Minutas de 1910-1970",type:"WMTS",url:"https://www.ign.es/wmts/primera-edicion-mtn?"},{name:"Planimetrías (1870 y 1950)",type:"WMS",url:"https://www.ign.es/wms/minutas-cartograficas?"},{name:"Planos de Madrid (1622 - 1960)",type:"WMTS",url:"https://www.ign.es/wmts/planos?"},{name:"Hojas kilométricas (Madrid - 1860)",type:"WMS",url:"https://www.ign.es/wms/hojas-kilometricas?"},{name:"Cuadrículas Mapa Topográfico Nacional",type:"WMS",url:"https://www.ign.es/wms-inspire/cuadriculas?"}]},{name:"Imágenes",services:[{name:"Ortofotos máxima actualidad PNOA",type:"WMTS",url:"https://www.ign.es/wmts/pnoa-ma?"},{name:"Ortofotos históricas y PNOA anual",type:"WMS",url:"https://www.ign.es/wms/pnoa-historico?"},{name:"Ortofotos provisionales PNOA",type:"WMS",url:"https://wms-pnoa.idee.es/pnoa-provisionales?"},{name:"Mosaicos de satélite",type:"WMS",url:"https://wms-satelites-historicos.idee.es/satelites-historicos?"},{name:"Fototeca (Consulta de fotogramas históricos y PNOA)",type:"WMS",url:"https://wms-fototeca.idee.es/fototeca?"}]},{name:"Información geográfica de referencia y temática",services:[{name:"Catastro ",type:"WMS",url:"http://ovc.catastro.meh.es/Cartografia/WMS/ServidorWMS.aspx?"},{name:"Unidades administrativas",type:"WMS",url:" https://www.ign.es/wms-inspire/unidades-administrativas?"},{name:"Nombres geográficos (Nomenclátor Geográfico Básico NGBE)",type:"WMS",url:"https://www.ign.es/wms-inspire/ngbe?"},{name:"Redes de transporte",type:"WMS",url:"https://servicios.idee.es/wms-inspire/transportes?"},{name:"Hidrografía ",type:"WMS",url:"https://servicios.idee.es/wms-inspire/hidrografia?"},{name:"Direcciones y códigos postales",type:"WMS",url:"https://www.cartociudad.es/wms-inspire/direcciones-ccpp?"},{name:"Ocupación del suelo (Corine y SIOSE)",type:"WMTS",url:"https://servicios.idee.es/wmts/ocupacion-suelo?"},{name:"Ocupación del suelo Histórico (Corine y SIOSE)",type:"WMS",url:"https://servicios.idee.es/wms-inspire/ocupacion-suelo-historico?"},{name:"Copernicus Land Monitoring Service",type:"WMS",url:"https://servicios.idee.es/wms/copernicus-landservice-spain?"},{name:"Información sísmica (terremotos)",type:"WMS",url:"https://www.ign.es/wms-inspire/geofisica?"},{name:"Red de vigilancia volcánica",type:"WMS",url:"https://wms-volcanologia.ign.es/volcanologia?"},{name:"Redes geodésicas",type:"WMS",url:"https://www.ign.es/wms-inspire/redes-geodesicas?"}]},{name:"Modelos digitales de elevaciones",services:[{name:"Modelo Digital de Superficies (Sombreado superficies y consulta de elevaciones edificios y vegetación)",type:"WMTS",url:"https://wmts-mapa-lidar.idee.es/lidar?"},{name:"Modelo Digital del Terreno (Sombreado terreno y consulta de altitudes)",type:"WMTS",url:"https://servicios.idee.es/wmts/mdt?",white_list:["EL.ElevationGridCoverage"]},{name:"Curvas de nivel y puntos acotados",type:"WMS",url:"https://servicios.idee.es/wms-inspire/mdt?",white_list:["EL.ContourLine","EL.SpotElevation"]}]}]},bi=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return pi(this,t),(e=yi(this,t)).map_=null,e.controls_=[],e.name_="layerswitcher",e.options=i,e.position_=i.position||"TR",e.collapsed_=!!M.utils.isUndefined(i.collapsed)||i.collapsed,e.collapsible_=!!M.utils.isUndefined(i.collapsible)||i.collapsible,e.tooltip_=i.tooltip||Lt("tooltip"),e.isDraggable=!M.utils.isUndefined(i.isDraggable)&&i.isDraggable,e.isMoveLayers=i.isMoveLayers||!1,e.modeSelectLayers=M.utils.isUndefined(i.modeSelectLayers)?"eyes":i.modeSelectLayers,e.tools=M.utils.isUndefined(i.tools)?["transparency","legend","zoom","information","style","delete"]:i.tools,e.addLayers=i.addLayers,e.statusLayers=i.statusLayers,e.precharged=i.precharged||gi,e.displayLabel=!M.utils.isUndefined(i.displayLabel)&&i.displayLabel,e.metadata_=li.metadata,e.http=!0,void 0===i.http||!1!==i.http&&"false"!==i.http||(e.http=!1),e.https=!0,void 0===i.https||!1!==i.https&&"false"!==i.https||(e.https=!1),e.showCatalog=i.showCatalog||!1,e.useProxy=!!M.utils.isUndefined(i.useProxy)||i.useProxy,e.statusProxy=M.useproxy,e.order=i.order>=-1?i.order:null,e.useAttributions=i.useAttributions||!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vi(e,t)}(t,M.Plugin),i=t,r=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?wt:_t:M.language.getTranslation(e).layerswitcher}}],(a=[{key:"addTo",value:function(e){var t=this;this.map_=e;var i=new M.ui.Panel("Layerswitcher",{className:"m-plugin-layerswitcher",collapsed:this.collapsed_,collapsible:this.collapsible_,position:M.ui.position[this.position_],collapsedButtonClass:"m-layerswitcher-icons-layers",tooltip:this.tooltip_,order:this.order});this.panel_=i;var a=new oi({isDraggable:this.isDraggable,modeSelectLayers:this.modeSelectLayers,tools:this.tools,addLayers:this.addLayers,statusLayers:this.statusLayers,collapsed:this.collapsed_,isMoveLayers:this.isMoveLayers,precharged:this.precharged,http:this.http,https:this.https,showCatalog:this.showCatalog,order:this.order,useProxy:this.useProxy,statusProxy:this.statusProxy,useAttributions:this.useAttributions,displayLabel:this.displayLabel});this.control_=a,this.controls_.push(this.control_),this.control_.on(M.evt.ADDED_TO_MAP,(function(){t.fire(M.evt.ADDED_TO_MAP)})),this.panel_.addControls(this.controls_),this.map_.addPanels(this.panel_),a.addEventPanel(i)}},{key:"position",get:function(){return this.position_}},{key:"name",get:function(){return this.name_}},{key:"collapsed",get:function(){return this.panel_.isCollapsed()}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position_,"*").concat(this.collapsed,"*").concat(this.collapsible,"*").concat(this.tooltip_,"*").concat(this.isDraggable,"*").concat(this.isMoveLayers,"*").concat(this.modeSelectLayers,"*").concat(this.tools,"*").concat(this.http,"*").concat(this.https,"*").concat(this.showCatalog,"*").concat(this.useProxy,"*").concat(this.displayLabel,"*").concat(this.addLayers,"*").concat(this.statusLayers)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"getMetadata",value:function(){return this.metadata_}},{key:"getPanel",value:function(){return this.panel_}},{key:"destroy",value:function(){this.map_.removeControls(this.controls_),this.control_=null}},{key:"equals",value:function(e){return e instanceof t}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(e){e(M.template.compileSync(di.a,{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/layerswitcher/images/"),translations:{help1:Lt("textHelp.help1"),help2:Lt("textHelp.help2"),help3:Lt("textHelp.help3"),help4:Lt("textHelp.help4"),help5:Lt("textHelp.help5"),help6:Lt("textHelp.help6"),help7:Lt("textHelp.help7"),help8:Lt("textHelp.help8"),help9:Lt("textHelp.help9"),help10:Lt("textHelp.help10"),help11:Lt("textHelp.help11"),help12:Lt("textHelp.help12"),help13:Lt("textHelp.help13"),help14:Lt("textHelp.help14"),help15:Lt("textHelp.help15"),help16:Lt("textHelp.help16"),help17:Lt("textHelp.help17"),help18:Lt("textHelp.help18"),help19:Lt("textHelp.help19"),help20:Lt("textHelp.help20")}}}))}))}}}])&&hi(i.prototype,a),r&&hi(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,a,r}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.plugin.Layerswitcher=bi,window.M.control.LayerswitcherControl=oi}]);
//# sourceMappingURL=layerswitcher-1.1.0.ol.min.js.map