(()=>{var e={491:e=>{e.exports='<div id="div-contenedor" class="m-control m-container m-stereoscopic">\n  \x3c!-- Fill options --\x3e\n  <div class="styles-row m-hidden m-simple-category" data-id="fill">\n    <div class="title">{{translations.generate_3d_view}}</div>\n    <div class="m-styles-body">\n      <div class="group-row2">\n        <div class="three-col-1">\n          <span>{{translations.magnify}}</span>\n          <br/>\n          <div class="containerMagnify">\n            <p>0%</p>\n            <input class="disabled3Dview" id="range3d" type="range" min="0" max="{{translations.maxMagnification}}" disabled="true">\n            <p>100%</p>\n          </div>\n\n        </div>\n        <br />\n        {{#if translations.anaglyph_active}}\n        <div class="three-col-2">\n          <span>{{translations.mode_3d}}</span>\n          <select disabled="true" class="disabled3Dview selectorToggle" id="anaglyph-type" onchange="TR3.changeAnaglyphType()">\n            <option value="optimiced">{{translations.optimized}}</option>\n            <option value="normal">{{translations.normal}}</option>\n            <option value="half">{{translations.middle}}</option>\n            <option value="gray">{{translations.gray}}</option>\n            <option value="interlaced">{{translations.between}}</option>\n          </select>\n        </div>\n        {{/if}}\n      </div>\n      {{#if translations.orbitControls}}\n      <div class="orbitalMoves">\n        <image id="imgOrbitalMoves" src="../TR3-pack/img/eartharrow.png" draggable="false" style="margin: 5px; cursor: pointer; display: inline;">\n      </div>\n      {{/if}}\n      <br>\n      <div style="margin: 0 auto; text-align: center;">\n        <a\n        class="link3Dview"\n        href="{{url}}"\n        target="_black"\n        >\n          {{translations.linkGlass}}\n          <?xml version="1.0" encoding="UTF-8" standalone="no"?>\n          <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n            x="0px" y="0px" width="30px" height="18px" viewBox="0 0 30 18" enable-background="new 0 0 30 18"\n            xml:space="preserve">\n            <image id="image0" width="30" height="18" x="0" y="0" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAASCAMAAAB7LJ7rAAAABGdBTUEAALGPC/xhBQAAACBjSFJN\n          AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA51BMVEX///+goKChoaGdnZ3g\n          4uTHx8qfn5/k5Ofl5efNzs/s7e6vr7Czs7SioqL09PWenp75+/z///+ampr39/j29vfj4+To4+Lq\n          5OLf3+De3+Hf4OLd4ePe6evf6+7h5Oby7OsAcLoAdrvv6ejY2tuvr6/m7/G7AAC8AADp8vT58+8A\n          e8MMgcX48u/s+vvIAADKAADt+/z99/MGf8sThc3x///VAADWAAD/+/cMhNIZitT2///gAADhAAD/\n          //sQh9ofj9wgj9z5///tAAButusXi+EajeL+///4VFX4AACZmZng39/f4OCYmJgBeoAuAAAAAXRS\n          TlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfmChsKLQDs\n          3EU5AAAA5UlEQVQoz3XQaZPBQBCA4Z6EcRsRrGvXEazbuu+bEPz/37M9qotSlXm+db2VynQDYxoo\n          aEwH5vFy98q9Hgbc5w+4fq8F/D4OPBgKR9xyJBwKYo7qqn/rUQ4iJlRZJmGosyFzXCjEZTYTpkLC\n          FMCTqS+SSmey2Uwu/03yP/jyQrFEimWrUrGqtV9Sq2NuNFuk2cb7aJ1uj3T/MPcHQzLo4xJiNJ6Q\n          8Qj3ns7mZDaVebFckeUCX77ebHdP281a5v3hZS/3Pp7OT6ejvJCwL1dysQU4N+Pl5gA49/d8x/nx\n          PtNDnvJj/gde4C4rrRztwwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAl\n          dEVYdGRhdGU6Y3JlYXRlADIwMjItMTAtMjdUMTA6NDQ6NTkrMDA6MDCXK4W/AAAAJXRFWHRkYXRl\n          Om1vZGlmeQAyMDIyLTEwLTI3VDEwOjQ0OjU5KzAwOjAw5nY9AwAAACh0RVh0ZGF0ZTp0aW1lc3Rh\n          bXAAMjAyMi0xMC0yN1QxMDo0NTowMCswMDowMIPZPFUAAAAASUVORK5CYII=" />\n          </svg>\n        </a>\n\n        <button id="toggle3D">\n          {{translations.activate3d}}\n          <?xml version="1.0" encoding="UTF-8" standalone="no"?>\n          <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n            x="0px" y="0px" width="30px" height="18px" viewBox="0 0 30 18" enable-background="new 0 0 30 18"\n            xml:space="preserve">\n            <image id="image0" width="30" height="18" x="0" y="0" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAASCAMAAAB7LJ7rAAAABGdBTUEAALGPC/xhBQAAACBjSFJN\n          AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAA51BMVEX///+goKChoaGdnZ3g\n          4uTHx8qfn5/k5Ofl5efNzs/s7e6vr7Czs7SioqL09PWenp75+/z///+ampr39/j29vfj4+To4+Lq\n          5OLf3+De3+Hf4OLd4ePe6evf6+7h5Oby7OsAcLoAdrvv6ejY2tuvr6/m7/G7AAC8AADp8vT58+8A\n          e8MMgcX48u/s+vvIAADKAADt+/z99/MGf8sThc3x///VAADWAAD/+/cMhNIZitT2///gAADhAAD/\n          //sQh9ofj9wgj9z5///tAAButusXi+EajeL+///4VFX4AACZmZng39/f4OCYmJgBeoAuAAAAAXRS\n          TlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfmChsKLQDs\n          3EU5AAAA5UlEQVQoz3XQaZPBQBCA4Z6EcRsRrGvXEazbuu+bEPz/37M9qotSlXm+db2VynQDYxoo\n          aEwH5vFy98q9Hgbc5w+4fq8F/D4OPBgKR9xyJBwKYo7qqn/rUQ4iJlRZJmGosyFzXCjEZTYTpkLC\n          FMCTqS+SSmey2Uwu/03yP/jyQrFEimWrUrGqtV9Sq2NuNFuk2cb7aJ1uj3T/MPcHQzLo4xJiNJ6Q\n          8Qj3ns7mZDaVebFckeUCX77ebHdP281a5v3hZS/3Pp7OT6ejvJCwL1dysQU4N+Pl5gA49/d8x/nx\n          PtNDnvJj/gde4C4rrRztwwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAl\n          dEVYdGRhdGU6Y3JlYXRlADIwMjItMTAtMjdUMTA6NDQ6NTkrMDA6MDCXK4W/AAAAJXRFWHRkYXRl\n          Om1vZGlmeQAyMDIyLTEwLTI3VDEwOjQ0OjU5KzAwOjAw5nY9AwAAACh0RVh0ZGF0ZTp0aW1lc3Rh\n          bXAAMjAyMi0xMC0yN1QxMDo0NTowMCswMDowMIPZPFUAAAAASUVORK5CYII=" />\n          </svg>\n         </button>\n        <br>\n      </div>\n    </div>\n  </div>\n</div>\n'}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}function r(t,n,o){return n=l(n),function(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,i()?Reflect.construct(n,o||[],l(t).constructor):n.apply(t,o))}function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(i=function(){return!!e})()}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},a.apply(null,arguments)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var s=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r(this,n,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(n,M.impl.Control),o=n,(i=[{key:"addTo",value:function(e,t){a(l(n.prototype),"addTo",this).call(this,e,t)}}])&&t(o.prototype,i),s&&t(o,s),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,s}(),u=n(491),p=n.n(u);var d={en:JSON.parse('{"exception":{"impl":"The implementation used cannot create StereoscopicControl controls"},"generate_3d_view":"Stereo mode (3D)","magnify":"Magnify:","mode_3d":"Stereo mode (3D)","optimized":"Optimized","normal":"Normal","middle":"Middle","gray":"Gray","between":"Interlaced","generate_3d":"Generate 3D","photograph":"Photograph","loading":"Creating 3D map, please wait","noLayersAvailable":"No layer available to activate 3D view is currently detected","activate3d":"Enable stereo (3D)","disable3d":"Disable stereo (3D)","linkGlass":"Link glasses"}'),es:JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles StereoscopicControl"},"generate_3d_view":"Modo estéreo (3D)","magnify":"Magnificación:","mode_3d":"Modo estéreo (3D)","optimized":"Optimizado","normal":"Normal","middle":"Intermedio","gray":"Gris","between":"Entrelazado","generate_3d":"Generar 3D","photograph":"Fotograma","loading":"Creando mapa 3D, por favor espere","noLayersAvailable":"Actualmente no se detecta capa disponible para activar la vista 3D","activate3d":"Activar estéreo (3D)","disable3d":"Desactivar estéreo (3D)","linkGlass":"Gafa de anaglifo"}')},f=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t="es","function"==typeof M.language.getLang&&(t=M.language.getLang()),t),o=function(e){return d[e]}(n),r="";return M.utils.isNullOrEmpty(o)?console.warn("The translation '".concat(n,"' has not been defined.")):r=e.split(".").reduce((function(e,t){return e[t]}),o),r},g="".concat(M.config.MAPEA_URL,"plugins/stereoscopic/");const m=function(){return Promise.all([new Promise((function(e,t){var n=["TR3-pack/jquery/jquery-3.4.1.min.js","TR3-pack/jquery/jquery-ui.min.js","TR3-pack/jquery/miniColors/jquery.minicolors.min.js","TR3-pack/TR3.min.js","TR3-pack/TWEEN/tween.min.js","TR3-pack/proj4js/proj4.js"].map((function(e){return new Promise((function(t,n){var o=document.createElement("script");o.type="text/javascript",o.onload=function(){t()},o.onerror=function(){n(new Error("Error al cargar ".concat(e)))},o.src=g+e,document.head.appendChild(o)}))}));Promise.all(n).catch((function(e){console.error("Error al cargar los scripts:",e),t(e)}))})),new Promise((function(e,t){var n=["TR3-pack/jquery/jquery-ui-1.12.1.css","TR3-pack/jquery/miniColors/jquery.minicolors.css"].map((function(e){return new Promise((function(t,n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onload=function(){t()},o.onerror=function(){n(new Error("Error al cargar ".concat(e)))},o.href=g+e,document.head.appendChild(o)}))}));Promise.all(n).catch((function(e){console.error("Error al cargar los estilos:",e),t(e)}))}))])};function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,v(o.key),o)}}function v(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=A(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}function h(e,t,n){return t=w(t),function(e,t){if(t&&("object"==A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,n||[],w(e).constructor):t.apply(e,n))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}var E=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M.utils.isUndefined(s)&&M.exception(f("exception.impl")),(e=h(this,t,[new s,"Stereoscopic"])).active=!1,e.orbitControls_=n,e.anaglyphActive_=o,e.toggle=!1,e.defaultAnaglyphActive=r,e.maxMaginification=i,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,M.Control),n=t,(o=[{key:"createView",value:function(e){var t=this;return m(),this.map_=e,new Promise((function(e,n){var o=M.template.compileSync(p(),{vars:{translations:{generate_3d_view:f("generate_3d_view"),magnify:f("magnify"),mode_3d:f("mode_3d"),optimized:f("optimized"),normal:f("normal"),middle:f("middle"),gray:f("gray"),between:f("between"),generate_3d:f("generate_3d"),anaglyph_active:t.anaglyphActive_,orbitControls:t.orbitControls_,activate3d:f("activate3d"),linkGlass:f("linkGlass"),maxMagnification:t.maxMaginification},url:"".concat(M.config.MAPEA_URL,"plugins/stereoscopic/images/docStereo.pdf")}});t.addEvent(o,t.map_),e(o)}))}},{key:"enableOptionView3D",value:function(e){document.querySelector(e).disabled=!1,document.querySelector(e).classList.remove("disabled3Dview"),document.querySelector(e).classList.add("enable3Dview")}},{key:"disableOptionView3D",value:function(e){document.querySelector(e).disabled=!0,document.querySelector(e).classList.remove("enable3Dview"),document.querySelector(e).classList.add("disabled3Dview")}},{key:"addEvent",value:function(e,t){var n=this;e.querySelector("#range3d").addEventListener("change",(function(e){var t=e.target;TR3.formatMeasure(TR3.tPixMesh),TR3.setMagniValues(t.value)})),e.querySelector("#toggle3D").addEventListener("click",(function(e){var o=e.target;n.toggle=!n.toggle,window.toggle3D=n.toggle,document.querySelector("#anaglyph-type").classList.toggle("selectorToggle"),n.handleAnaglyph(t,o)}))}},{key:"handleAnaglyph",value:function(e,t){!0===this.toggle?(document.querySelector(".map canvas").style.display="none",setTimeout((function(){var t=e.getCenter(),n=t.x,o=t.y;e.setCenter({x:n+1,y:o+1})}),100),t.innerHTML=t.innerHTML.replace(f("activate3d"),f("disable3d")),this.enableOptionView3D("#anaglyph-type"),this.enableOptionView3D("#range3d"),t.classList.add("toggle3D")):(document.querySelector(".map canvas").style.display="block",t.innerHTML=t.innerHTML.replace(f("disable3d"),f("activate3d")),this.disableOptionView3D("#anaglyph-type"),this.disableOptionView3D("#range3d"),t.classList.remove("toggle3D"))}},{key:"addScript",value:function(){var e=this,t=document.createElement("script");t.type="module";var n="".concat(M.config.MAPEA_URL,"plugins/stereoscopic/"),o=document.createTextNode(" const TR3cfg = new Array();\n\n    import * as THREE from '".concat(n,"TR3-pack/THREE/three.module.js';\n    import { OrbitControls } from '").concat(n,"TR3-pack/THREE/OrbitControls.js';\n    import { TransformControls } from '").concat(n,"TR3-pack/THREE/TransformControls.js';\n    import { SkeletonUtils } from '").concat(n,"TR3-pack/THREE/SkeletonUtils.js';\n    import { BufferGeometryUtils } from '").concat(n,"TR3-pack/THREE/BufferGeometryUtils.js';\n    import { GLTFExporter } from '").concat(n,"TR3-pack/THREE/GLTFExporter.js';\n    import { GLTFLoader } from '").concat(n,"TR3-pack/THREE/GLTFLoader.js';\n    import { IFCLoader } from '").concat(n,"TR3-pack/THREE/IFCLoader.js';\n    import { Sky } from '").concat(n,"TR3-pack/THREE/Sky.js';\n    TR3cfg.THREE = THREE;\n    TR3cfg.OrbitControls = OrbitControls;\n    TR3cfg.TransformControls = TransformControls;\n    TR3cfg.SkeletonUtils = SkeletonUtils;\n    TR3cfg.BufferGeometryUtils = BufferGeometryUtils;\n    TR3cfg.GLTFExporter = GLTFExporter;\n    TR3cfg.GLTFLoader = GLTFLoader;\n    TR3cfg.IFCLoader = IFCLoader;\n    TR3cfg.Sky = Sky;\n\n    TR3.setLoader('").concat(n,"TR3-pack/', TR3cfg);\n    document.getElementById('tools').innerHTML = TR3.setPanel();\n\n    const opts = {\n        imgControl: ").concat(this.orbitControls_,",\n        cursor3d: false,\n        anaglyph: ").concat(this.anaglyphActive_,",\n        autoRotate: false,\n        wireframeMesh: false, //Muestra la malla del terreno\n        tentative: true,\n        cheapMode: false\n    }\n\n    TR3.setOpts(opts);\n\n    $(\"#tools\").dialog({ position: { my: \"right top\", at: \"right top\", of: window }, width: 215 });\n    document.querySelector('.ui-icon-closethick').click();\n\n    function setTR3(changeZoom = true) {\n        const bbox = map.getMapImpl().getView().calculateExtent(map.getMapImpl().getSize());\n        const code = map.getMapImpl().getView().getProjection().getCode();\n  \n        const desty = document.getElementById('TR3');\n        // const ori = document.getElementsByTagName('CANVAS')[0]; // 1\n        const ori = document.querySelector('.ol-layer canvas');\n\n        const TR3pms = {\n            ori: ori,\n            desty: desty,\n            bbox: bbox,\n            projCode: code\n        };\n\n        TR3.setStart(TR3pms);\n        if(changeZoom) {\n        setTimeout(() => {\n          TR3.setMagniValues(document.querySelector('#range3d').value);\n        }, 1000);\n      }\n    }\n\n    let changeZoom = 0;\n    map.getMapImpl().on('moveend', (e) => {\n        if(changeZoom !== e.frameState.viewState.zoom) {\n          setTR3(true);\n          changeZoom = e.frameState.viewState.zoom;\n        } else {\n          setTR3(true);\n        }\n    });\n\n\n    /**\n     * Renders a progress bar.\n     * @param {HTMLElement} el The target element.\n     * @constructor\n     */\n    function Progress(el) {\n      this.el = el;\n      this.loading = 0;\n      this.loaded = 0;\n    }\n\n    /**\n     * Increment the count of loading tiles.\n     */\n    Progress.prototype.addLoading = function () {\n      if (this.loading === 0) {\n          this.show();\n      }\n      ++this.loading;\n      this.update();\n    };\n\n    /**\n     * Increment the count of loaded tiles.\n     */\n    Progress.prototype.addLoaded = function () {\n      const this_ = this;\n      setTimeout(function () {\n        ++this_.loaded;\n        this_.update();\n      }, 100);\n    };\n\n    /**\n     * Show the progress bar.\n     */\n    Progress.prototype.show = function () {\n      this.el.style.visibility = 'visible';\n    };\n\n    /**\n     * Hide the progress bar.\n     */\n    Progress.prototype.hide = function () {\n      if (this.loading === this.loaded) {\n        this.el.style.visibility = 'hidden';\n        this.el.style.width = 0;\n      }\n    };\n\n    /**\n     * Update the progress bar.\n     */\n    Progress.prototype.update = function () {\n      const width = ((this.loaded / this.loading) * 100).toFixed(1) + '%';\n      this.el.style.width = width;\n      if (this.loading === this.loaded) {\n        this.loading = 0;\n        this.loaded = 0;\n        const this_ = this;\n        setTimeout(function () {\n          setTR3();\n        }, 100);\n      }\n    };\n\n    const progress = new Progress(document.getElementById('progress'));\n\n    map.getLayers()[0].getImpl().getOL3Layer().getSource().on('tileloadstart', function () {\n      progress.addLoading();\n    });\n\n    map.getLayers()[0].getImpl().getOL3Layer().getSource().on('tileloadend', function () {\n      progress.addLoaded();\n    });\n    map.getLayers()[0].getImpl().getOL3Layer().getSource().on('tileloaderror', function () {\n      progress.addLoaded();\n    });"));t.appendChild(o),document.body.appendChild(t),this.defaultAnaglyphActive&&setTimeout((function(){e.toggle=!0,e.handleAnaglyph(e.map_,document.querySelector("#toggle3D"))}),1e3)}},{key:"equals",value:function(e){return e instanceof t}}])&&y(n.prototype,o),r&&y(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,r}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,O(o.key),o)}}function O(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=R(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}function S(e,t,n){return t=D(t),function(e,t){if(t&&("object"==R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C()?Reflect.construct(t,n||[],D(e).constructor):t.apply(e,n))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}var L=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=S(this,t)).map_=null,e.controls_=[],e.position_=n.position||"TR",e.collapsed_=n.collapsed,void 0===e.collapsed_&&(e.collapsed_=!0),e.collapsible_=n.collapsible,void 0===e.collapsible_&&(e.collapsible_=!0),e.orbitControls_=n.orbitControls||!1,e.anaglyphActive_=n.anaglyphActive||!1,e.defaultAnaglyphActive=n.defaultAnaglyphActive||!1,e.maxMaginification=n.maxMaginification||15,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,M.Plugin),n=t,(o=[{key:"addTo",value:function(e){var t=this,n=new E(this.orbitControls_,this.anaglyphActive_,this.defaultAnaglyphActive,this.maxMaginification);this.controls_.push(n),this.map_=e,this.panel_=new M.ui.Panel("panelStereoscopic",{collapsed:this.collapsed_,collapsible:this.collapsible_,className:"m-plugin-stereoscopic",position:M.ui.position[this.position_],tooltip:f("generate_3d_view"),collapsedButtonClass:"stereoscopic-plugin-3D"}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_),e.on(M.evt.COMPLETED,(function(){var o=e.getLayers()[0].getImpl().getOL3Layer().getProperties(),r=o.source;r.crossOrigin="anonymous",o.source=r,e.getLayers()[0].getImpl().getOL3Layer().setProperties(o),window.map=t.map_,n.addScript()}))}},{key:"getMetadata",value:function(){return this.metadata_}}])&&j(n.prototype,o),r&&j(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,r}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.Stereoscopic=L,window.M.control.StereoscopicControl=E,window.M.impl.control.StereoscopicControl=s})()})();
//# sourceMappingURL=stereoscopic.ol.min.js.map