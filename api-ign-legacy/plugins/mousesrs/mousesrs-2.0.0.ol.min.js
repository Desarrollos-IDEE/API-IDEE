(()=>{var e={591:e=>{e.exports='<div aria-label="Plugin mousesrs" role="button" tabindex="{{order}}" id="div-contenedor" class="m-control m-container m-mousesrs-container" title="{{translations.tooltip}}">\n    <div class="g-cartografia-flecha"></div>\n</div>\n'},431:(e,t,o)=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">MOUSESRS <img style="vertical-align: bottom; filter: invert(100%);" src="'+o(914)+'" width="30" height="30"></h2>\n   <div>\n      <img src="{{urlImages}}mousesrs1.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help1}}</p>\n      <img src="{{urlImages}}mousesrs2.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help2}}</p>\n      <ul>\n         <li>EPSG: 4326 WGS 84 -- WGS84 - World Geodetic System 1984. {{translations.help3}}.</li>\n         <li>EPSG: 25828 ETRS89 / UTM huso 28N. {{translations.help4}}.</li>\n         <li>EPSG: 25829 ETRS89 / UTM huso 29N. {{translations.help4}}.</li>\n         <li>EPSG: 25830 ETRS89 / UTM huso 30N. {{translations.help4}}.</li>\n         <li>EPSG: 25831 ETRS89 / UTM huso 31N. {{translations.help4}}.</li>\n         <li>EPSG: 3857 WGS 84 / Pseudo-Mercator -- Spherical Mercator. {{translations.help4}}.</li>\n         <li>EPSG: 4258 ETRS89. {{translations.help3}}.</li>\n      </ul>\n      <p>{{translations.help5}} <a tabindex="0" href="https: //epsg.org/home.html">https: //epsg.org/home.html</a></p>\n      <p>{{translations.help6}}</p>\n      <p>{{translations.help7}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/mousesrs" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/mousesrs</a></p>\n      <p>{{translations.help8}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/mousesrs.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/mousesrs.jsp?language=es</a></p>\n   </div>\n</div>\n'},681:e=>{e.exports='<div class="m-mousesrs-srs-container" role="menu" aria-label="Menu EPSG" tabindex="{{order}}">\n  <select title="{{select_srs}}" aria-label="{{select_srs}}" role="select" tabindex="{{order}}" id="m-mousesrs-srs-selector">\n    <option value="EPSG:4326" {{#eq selected "EPSG:4326"}}selected{{/eq}}>EPSG:4326</option>\n    <option value="EPSG:4083" {{#eq selected "EPSG:4083"}}selected{{/eq}}>EPSG:4083</option>\n    <option value="EPSG:25829" {{#eq selected "EPSG:25829"}}selected{{/eq}}>EPSG:25829</option>\n    <option value="EPSG:25830" {{#eq selected "EPSG:25830"}}selected{{/eq}}>EPSG:25830</option>\n    <option value="EPSG:25831" {{#eq selected "EPSG:25831"}}selected{{/eq}}>EPSG:25831</option>\n    <option value="EPSG:3857" {{#eq selected "EPSG:3857"}}selected{{/eq}}>EPSG:3857</option>\n    <option value="EPSG:4258" {{#eq selected "EPSG:4258"}}selected{{/eq}}>EPSG:4258</option>\n  </select>\n  {{#if hasHelp}}\n    <div class="m-mousesrs-help-button" title="Help EPSG">\n      <a tabindex="{{order}}" role="link" aria-label="Help EPSG" href="{{helpUrl}}" target="_blank"><i class="icon-help"></i></a>\n    </div>\n  {{/if}}\n</div>\n'},914:e=>{"use strict";e.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMjQiIGhlaWdodD0iMTAyNCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+Cjx0aXRsZT48L3RpdGxlPgo8ZyBpZD0iaWNvbW9vbi1pZ25vcmUiPgo8L2c+CjxwYXRoIGQ9Ik0xMDA2LjcxOSA3NDUuMTQ0bC0xODYuMjEyLTE4Ni4yMTYgMTYxLjU3My0xNjEuNTc1YzE0LjQ1NS0xNC40NTMgMjAuMzk2LTM1LjM1MyAxNS43MDQtNTUuMjQ3LTQuNjg0LTE5Ljg5Ni0xOS4zMzctMzUuOTQ2LTM4LjcyNC00Mi40MmwtODgxLjM2OS0yOTQuNTA5Yy0yMS4yMDktNy4wOTYtNDQuNjAzLTEuNTc5LTYwLjQxIDE0LjIzNi0xNS44MTMgMTUuODEzLTIxLjMyNCAzOS4yMDMtMTQuMjM4IDYwLjQxbDI5NC41MTkgODgxLjM3MWM2LjQ3NCAxOS4zODYgMjIuNTI4IDM0LjAzNiA0Mi40MiAzOC43MjQgMTkuODc0IDQuNjkyIDQwLjc4OC0xLjI0NyA1NS4yNDctMTUuNzA0bDE2NS44MzMtMTY1LjgzMyAxODYuMjE2IDE4Ni4yMTJjMTEuNTIgMTEuNTIgMjYuNjE4IDE3LjI4MSA0MS43MTQgMTcuMjgxIDE1LjA5NCAwIDMwLjE5Ni01Ljc2MSA0MS43MTItMTcuMjgxbDE3Ni4wMTctMTc2LjAxN2MyMy4wMzYtMjMuMDM4IDIzLjAzNi02MC4zOTMtMC4wMDItODMuNDMxek03OTkuODU1IDg5Ni42NDdsLTE4OS4xMzctMTg3LjA4MWMtMTIuNTg3LTEyLjU4Ny0yOS4wODQtMTguODgzLTQ1LjU3OC0xOC44ODNzLTMyLjk5NSA2LjI5Ni00NS41NzYgMTguODgzbC0xNTMuMDkwIDE1My4wOTAtMjQ3Ljg0My03NDEuNyA3NDEuNjk1IDI0Ny44NDUtMTQ4LjQzNSAxNDguNDMzYy0yNS4xNzQgMjUuMTctMjUuMTc0IDY1Ljk4NyAwIDkxLjE2MWwxODkuMTMxIDE4Ny4wODctMTAxLjE2NyAxMDEuMTY1eiI+PC9wYXRoPgo8L3N2Zz4K"}},t={};function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=JSON.parse('{"exception":{"impl":"The implementation used cannot create MouseSRSControl.","srs":"MouseSRS plugin: The srs parameter is not correct. By default EPSG:4326 will be used"},"textHelp":{"help1":"To select the coordinate system just click on any point on the bar.","help2":"The available values are:","help3":"Units: degrees","help4":"Units: meters","help5":"More information about reference systems in:","help6":"Depending on the chosen coordinate system, we will display geographic coordinates in degrees with decimal format or projected in meters. The approximate height above sea level in Alicante is also shown.","help7":"The information relevant to the extension and its possible parameterization is documented in","help8":"The example of use of its parameters can be checked in"},"tooltip":"Coordinates","select_srs":"Select a reference system","close":"Close","accessibility":{"src":"Click or Enter to modify the EPSG"}}'),t=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles MouseSRSControl.","srs":"Plugin MouseSRS: El parámetro srs no es correcto. Por defecto se usará EPSG:4326"},"textHelp":{"help1":"Para seleccionar el sistema de coordenadas basta con hacer clic en cualquier punto de la barra.","help2":"Los valores disponibles son:","help3":"Unidades: grados","help4":"Unidades: metros","help5":"Más información sobre sistemas de referencia en:","help6":"Según el sistema de coordenadas elegido visualizaremos coordenadas geográficas en grados con formato decimal o proyectadas en metros. También se muestra la altura aproximada sobre el nivel del mar en Alicante.","help7":"La información relevante a la extensión y su posible parametrización está documentada en","help8":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Coordenadas","select_srs":"Selecciona un sistema de referencia","close":"Cerrar","accessibility":{"src":"Clic o Enter para modificar el EPSG"}}');var r={en:e,es:t},i=function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t="es","function"==typeof M.language.getLang&&(t=M.language.getLang()),t),i=function(e){return"es"===e||"en"===e?r[e]:M.language.getTranslation(e).mousesrs}(o),n="";return M.utils.isNullOrEmpty(i)?console.warn("The translation '".concat(o,"' has not been defined.")):n=e.split(".").reduce((function(e,t){return e[t]}),i),n};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function s(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var l=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=[],this.nCols=0,this.nRows=0,this.xllcorner=0,this.yllcorner=0,this.dx=0,this.dy=0,this.noDataValue=-9999},(t=[{key:"parseData",value:function(e){var t=e.toLowerCase();return this.data=[],t.split("\n").forEach(this.readLine.bind(this)),this.data}},{key:"getDx",value:function(){return this.dx}},{key:"getDy",value:function(){return this.dy}},{key:"getNoDataValue",value:function(){return this.noDataValue}},{key:"readLine",value:function(e){var t=e.trim();t&&(t.indexOf("ncols")>=0?this.nCols=parseFloat(t.substr(5)):t.indexOf("nrows")>=0?this.nRows=parseFloat(t.substr(5)):t.indexOf("xllcorner")>=0?this.xllcorner=parseFloat(t.substr(9)):t.indexOf("yllcorner")>=0?this.yllcorner=parseFloat(t.substr(9)):t.indexOf("cellsize")>=0?(this.dx=parseFloat(t.substr(8)),this.dy=parseFloat(t.substr(8))):t.indexOf("dx")>=0?this.dx=parseFloat(t.substr(2)):t.indexOf("dy")>=0?this.dy=parseFloat(t.substr(2)):t.indexOf("nodata_value")>=0?this.noDataValue=parseFloat(t.substr(12)):this.data.push(t.split(" ").map((function(e){return parseFloat(e)}))))}}])&&s(e.prototype,t),o&&s(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,o}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var h=function(){return e=function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fetchIndex=0,this.noDataValue=Number.NaN,this.url=t,this.options=o,this.options.width=o.width||500,this.options.height=o.height||500,this.loadCoverage()},(t=[{key:"loadCoverage",value:function(){var e=this,t={service:this.options.service?this.options.service:"WCS",request:"describecoverage",version:this.options.version?this.options.version:"1.0.0",coverage:this.options.coverage},o=this.addParameters(this.url,t);M.proxy(!1),M.remote.get(o).then((function(t){M.proxy(!0);for(var o=t.text,r=(new DOMParser).parseFromString(o,"text/xml"),i=r.querySelectorAll("Envelope"),n=function(){if(i[s].getAttribute("srsName")===e.options.crs){var t=[];i[s].childNodes[1].childNodes[0].nodeValue.split(" ").forEach((function(e){t.push(parseFloat(e))})),i[s].childNodes[3].childNodes[0].nodeValue.split(" ").forEach((function(e){t.push(parseFloat(e))})),e.coverageExtension=t}},s=0;s<i.length;s+=1)n();var a=r.querySelectorAll("offsetVector");a&&(e.cellsizeX=Math.abs(parseFloat(a[0].childNodes[0].nodeValue.split(" ")[0])),e.cellsizeY=Math.abs(parseFloat(a[1].childNodes[0].nodeValue.split(" ")[1])))})).catch((function(e){M.proxy(!0),console.error("Error received in request: ".concat(e.message))}))}},{key:"getResolutionDif",value:function(e,t){var o=this.options.width,r=this.options.height,i=this.getVisibleExtent(e,t),n=Math.min(o,Math.ceil((i[2]-i[0])/this.cellsizeX)),s=Math.min(r,Math.ceil((i[3]-i[1])/this.cellsizeY)),a=(i[2]-i[0])/n-this.cellsizeX,l=(i[3]-i[1])/s-this.cellsizeY;return Math.min(a,l)}},{key:"getDataGrid",value:function(e,t){var o=this;if(this.cellsizeX&&this.cellsizeY){var r=this.getVisibleExtent(e,t);if(!(r&&this.visibleExtent&&this.mdtData&&r[0]===this.visibleExtent[0]&&r[1]===this.visibleExtent[1]&&r[2]===this.visibleExtent[2]&&r[3]===this.visibleExtent[3])){this.visibleExtent=r;var i,n=Math.min(this.options.width,Math.ceil((this.visibleExtent[2]-this.visibleExtent[0])/this.cellsizeX)),s=Math.min(this.options.height,Math.ceil((this.visibleExtent[3]-this.visibleExtent[1])/this.cellsizeY)),a={request:"GetCoverage",bbox:this.visibleExtent};this.assignOptions(a,this.options),a.width=n,a.height=s;var c=this.addParameters(this.url,a);this.fetchIndex+=1,M.proxy(!1),M.remote.get(c).then((function(e){M.proxy(!0);var t=e.text.split("NODATA_value -9999.000").join(""),r=new l;i=r.parseData(t),o.dx=r.getDx(),o.dy=r.getDy(),o.noDataValue=r.getNoDataValue(),o.mdtData=i})).catch((function(e){M.proxy(!0),console.error("Error received in request: ".concat(e.message))}))}}}},{key:"getValue",value:function(e,t){var o=e,r=0;if(this.mdtData){if(t&&t.toLowerCase()!==this.options.crs.toLowerCase()){var i=ol.proj.transform(e,t,this.options.crs);o=[i.x,i.y]}if(this.coverageExtension&&o[0]>this.coverageExtension[0]&&o[0]<this.coverageExtension[2]&&o[1]>this.coverageExtension[1]&&o[1]<this.coverageExtension[3]){var n=this.visibleExtent[0]-o[0],s=this.visibleExtent[3]-o[1],a=Math.floor(Math.abs(n/this.dx)),l=Math.floor(Math.abs(s/this.dy)),c=this.mdtData[l]&&this.mdtData[l][a]&&this.mdtData[l][a]!==this.noDataValue?this.mdtData[l][a]:0,u=this.mdtData[l]&&this.mdtData[l][a+1]&&this.mdtData[l][a+1]!==this.noDataValue?this.mdtData[l][a+1]:0,p=this.mdtData[l+1]&&this.mdtData[l+1][a]&&this.mdtData[l+1][a]!==this.noDataValue?this.mdtData[l+1][a]:0,h=this.mdtData[l+1]&&this.mdtData[l+1][a+1]&&this.mdtData[l+1][a+1]!==this.noDataValue?this.mdtData[l+1][a+1]:0,d=(this.visibleExtent[0]-o[0]-Math.floor(n/this.dx)*this.dx)/this.dx,f=(this.visibleExtent[3]-o[1]-Math.floor(s/this.dy)*this.dy)/this.dy;r=this.bilinealInterpolation(c,p,u,h,d,f).toFixed(2)}}else r=this.noDataValue;return r}},{key:"getGridResponse",value:function(e,t,o){if(o===this.fetchIndex&&!e&&t){var r=new l;this.mdtData=r.parseData(t),this.dx=r.getDx(),this.dy=r.getDy(),this.noDataValue=r.getNoDataValue()}}},{key:"getExtension",value:function(e,t){var o=[];if(t&&t.toLowerCase()===this.options.crs.toLowerCase())o=e;else{var r=t,i=this.options.crs,n=ol.proj.transform([e[0],e[1]],r,i),s=ol.proj.transform([e[0],e[3]],r,i),a=ol.proj.transform([e[2],e[1]],r,i),l=ol.proj.transform([e[2],e[3]],r,i);o=[Math.min(n.x,s.x,a.x,l.x),Math.min(n.y,s.y,a.y,l.y),Math.max(n.x,s.x,a.x,l.x),Math.max(n.y,s.y,a.y,l.y)]}return o}},{key:"getCoverageResponse",value:function(e,t,o){if(e)console.error("Error received in DescribeCoverage request: ".concat(e.message));else if(t){for(var r=t,i=r.getElementsByTagName("gml:Envelope"),n=this,s=function(e){if(i[e].getAttribute("srsName")===n.options.crs){var t=[];i[e].childNodes[1].childNodes[0].nodeValue.split(" ").forEach((function(e){t.push(parseFloat(e))})),i[e].childNodes[3].childNodes[0].nodeValue.split(" ").forEach((function(e){t.push(parseFloat(e))})),n.coverageExtension=t}},a=0;a<i.length;a+=1)s(a);var l=r.getElementsByTagName("gml:offsetVector");l&&(this.cellsizeX=Math.abs(parseFloat(l[0].childNodes[0].nodeValue.split(" ")[0])),this.cellsizeY=Math.abs(parseFloat(l[1].childNodes[0].nodeValue.split(" ")[1])))}}},{key:"getVisibleExtent",value:function(e,t){var o=this.getExtension(e,t);return this.coverageExtension?[Math.max(o[0],this.coverageExtension[0]),Math.max(o[1],this.coverageExtension[1]),Math.min(o[2],this.coverageExtension[2]),Math.min(o[3],this.coverageExtension[3])]:o}},{key:"bilinealInterpolation",value:function(e,t,o,r,i,n){return e*(1-i)*(1-n)+t*i*(1-n)+o*(1-i)*n+r*i*n}},{key:"assignOptions",value:function(e,t){e&&t&&Object.keys(t).forEach((function(o){null!==t[o]&&t[o]&&(e[o]=t[o])}))}},{key:"addParameters",value:function(e,t){var o=e,r=[];Object.keys(t).forEach((function(e){null!==t[e]&&void 0!==t[e]&&r.push("".concat(e,"=").concat(encodeURIComponent(t[e])))}));var i=r.join("&");return(o=-1===(o=o.replace(/[?&]$/,"")).indexOf("?")?"".concat(o,"?"):"".concat(o,"&"))+i}}])&&u(e.prototype,t),o&&u(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,o}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var y=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wcsLoaders={}},(t=[{key:"addLayers",value:function(e){if(e)for(var t=0,o=e;t<o.length;t+=1){var r=o[t];this.addLayer(r.url,r.options)}}},{key:"addLayer",value:function(e,t){var o=t.name||t.coverage;this.wcsLoaders[o]||(this.wcsLoaders[o]=new h(e,t))}},{key:"updateDataGrid",value:function(e,t){this.wcsLoader=this.getWcsLoaderForExtension(e,t),this.wcsLoader&&this.wcsLoader.getDataGrid(e,t)}},{key:"getValue",value:function(e,t){var o=Number.NaN;return this.wcsLoader&&(o=this.wcsLoader.getValue(e,t)),o}},{key:"getWcsLoaderForExtension",value:function(e,t){var o=this,r=Number.POSITIVE_INFINITY,i=null,n=null,s=Number.NEGATIVE_INFINITY;return Object.keys(this.wcsLoaders).forEach((function(a){var l=o.wcsLoaders[a],c=l.getResolutionDif(e,t);c<0&&c>s&&(s=c,n=l),c>0&&c<r&&(r=c,i=l)})),null!==i?i:n}}])&&f(e.prototype,t),o&&f(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,o}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}function S(e,t,o){return t=E(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,x()?Reflect.construct(t,o||[],E(e).constructor):t.apply(e,o))}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}const D=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=S(this,t,[e])).coordinateFormat=e.coordinateFormat,o.label=e.label,o.mapProjection_=e.projection,o.target=e.target,o.geoDecimalDigits=e.geoDecimalDigits,o.utmDecimalDigits=e.utmDecimalDigits,o.activeZ=e.activeZ,o.order=e.order,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,ol.control.MousePosition),o=t,(r=[{key:"initWCSLoaderManager",value:function(e){var t=this;this.facadeMap_=e,this.activeZ&&(this.wcsloadermanager=new y,this.wcsloadermanager.addLayers([{url:"https://servicios.idee.es/wcs-inspire/mdt",options:{coverage:"Elevacion4258_200",crs:"EPSG:4326",format:"ArcGrid",height:500,interpolationMethod:"bilinear",service:"WCS",version:"1.0.0",width:500}},{url:"https://servicios.idee.es/wcs-inspire/mdt",options:{coverage:"Elevacion4258_25",crs:"EPSG:4326",format:"ArcGrid",height:500,interpolationMethod:"bilinear",service:"WCS",version:"1.0.0",width:500}},{url:"https://servicios.idee.es/wcs-inspire/mdt",options:{coverage:"Elevacion4258_500",crs:"EPSG:4326",format:"ArcGrid",height:500,interpolationMethod:"bilinear",service:"WCS",version:"1.0.0",width:500}},{url:"https://servicios.idee.es/wcs-inspire/mdt",options:{coverage:"Elevacion4258_5",crs:"EPSG:4326",format:"ArcGrid",height:500,interpolationMethod:"bilinear",service:"WCS",version:"1.0.0",width:500}}]),e.getMapImpl().on("moveend",(function(){t.updateDataGrid(e)})))}},{key:"updateDataGrid",value:function(e){var t=void 0!==this.facadeMap_?this.facadeMap_:e,o=t.getBbox(),r=[o.x.min,o.y.min,o.x.max,o.y.max];r=ol.proj.transformExtent(r,t.getProjection().code,"EPSG:4326"),this.wcsloadermanager.updateDataGrid(r,"EPSG:4326")}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"handleMouseMove",value:function(e){var t=this.getMap();this.lastMouseMovePixel_=t.getEventPixel(e),this.updateHTML_(this.lastMouseMovePixel_)}},{key:"handleMouseOut",value:function(e){this.updateHTML_(this.lastMouseMovePixel_),this.lastMouseMovePixel_=null}},{key:"updateHTML_",value:function(e){var t="",o=this.getProjection();if(e&&this.mapProjection_){this.transform_||(this.transform_=o?ol.proj.getTransform(this.mapProjection_,o):ol.proj.identityTransform);var r=this.getMap(),n=r.getCoordinateFromPixel(e);if(n&&(this.transform_(n,n),t="".concat(this.coordinateFormat(n)).replace(".",",").replace(".",",").replace(", ","&nbsp;&nbsp;&nbsp;"),this.activeZ&&void 0!==this.wcsloadermanager)){var s=r.getCoordinateFromPixel(e),a=ol.proj.transform(s,this.facadeMap_.getProjection().code,"EPSG:4326"),l=Math.round(this.wcsloadermanager.getValue(a,"EPSG:4326"));Number.isNaN(l)||(t+="&nbsp;&nbsp;&nbsp;".concat(l))}t+=' | <b role="button" tabindex="'.concat(this.order,'" aria-label="').concat(i("accessibility.src"),'" class="m-mousesrs-pointer">').concat(this.label,"</b>")}this.renderedHTML_&&t===this.renderedHTML_||(this.element.innerHTML=t,this.renderedHTML_=t)}}])&&g(o.prototype,r),n&&g(o,n),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r,n}();var j=o(681),P=o.n(j);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function N(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=Array(t);o<t;o++)r[o]=e[o];return r}function _(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}function k(e,t,o){return t=G(t),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C()?Reflect.construct(t,o||[],G(e).constructor):t.apply(e,o))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:o):i.value}},I.apply(null,arguments)}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}var R=function(e){function t(e,o,r,i,n,s,a,l,c,u,p){var h;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(h=k(this,t)).srs_=e,h.label_=o,h.precision_=r,h.geoDecimalDigits=i,h.utmDecimalDigits=n,h.tooltip=s,h.activeZ=a,h.helpUrl=l,h.order=c,h.epsgFormat=p,h.draggableDialog=u,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(t,M.impl.Control),o=t,(r=[{key:"addTo",value:function(e,t){this.auxMap_=e,this.html_=t,this.renderPlugin(e,t)}},{key:"renderPlugin",value:function(e,o){var r=this;this.facadeMap_=e,this.mousePositionControl=new D({coordinateFormat:ol.coordinate.createStringXY(this.getDecimalUnits()),projection:this.srs_,label:this.epsgFormat?this.formatEPSG(this.label_):this.label_,placeholder:"",undefinedHTML:"",className:"m-mouse-srs",target:this.html_,tooltip:this.tooltip,geoDecimalDigits:this.geoDecimalDigits,utmDecimalDigits:this.utmDecimalDigits,activeZ:this.activeZ,order:this.order}),e.getMapImpl().addControl(this.mousePositionControl),I(G(t.prototype),"addTo",this).call(this,e,o),setTimeout((function(){r.mousePositionControl.initWCSLoaderManager(e),document.querySelector(".m-mousesrs-container .m-mouse-srs").setAttribute("role","text "),document.querySelector(".m-mousesrs-container .m-mouse-srs").setAttribute("tabIndex",r.order),document.querySelector(".m-mousesrs-container .m-mouse-srs").addEventListener("click",r.openChangeSRS.bind(r,r.auxMap_,o)),document.querySelector(".m-mousesrs-container .m-mouse-srs").addEventListener("keydown",(function(e){"Enter"===e.key&&r.openChangeSRS(r,r.auxMap_,o)}))}),1e3)}},{key:"openChangeSRS",value:function(e,t){var o=this,r=M.template.compileSync(P(),{jsonp:!0,parseToHtml:!0,vars:{selected:this.srs_,hasHelp:void 0!==this.helpUrl&&M.utils.isUrl(this.helpUrl),helpUrl:this.helpUrl,select_srs:i("select_srs"),order:this.order}});this.epsgFormat&&this.formatEPSGs(r),M.dialog.info(r.outerHTML,i("select_srs"),this.order),setTimeout((function(){document.querySelector(".m-dialog>div.m-modal>div.m-content").style.minWidth="260px",document.querySelector("#m-mousesrs-srs-selector").addEventListener("change",o.changeSRS.bind(o,e,t)),document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var r=document.querySelector("div.m-dialog.info div.m-button > button");r.innerHTML=i("close"),r.style.width="75px",r.style.backgroundColor="#71a7d3"}),10),this.draggableDialog&&M.utils.draggabillyElement(".m-dialog .m-modal .m-content",".m-dialog .m-modal .m-content .m-title"),document.addEventListener("keydown",(function(e){if("Escape"===e.key){var t=document.querySelector(".m-dialog .m-content .m-button > button");null!==t&&t.click()}}))}},{key:"formatEPSGs",value:function(e){var t=this;N(e.querySelectorAll("select option")).forEach((function(e){e.innerText=t.formatEPSG(e.value)}))}},{key:"formatEPSG",value:function(e){var t=M.impl.ol.js.projections.getSupportedProjs().find((function(t){return t.codes.includes(e)}));if(!t)return e;var o=t.datum,r=t.proj;return"".concat(o," - ").concat(r," ")}},{key:"changeSRS",value:function(e,t){var o=document.querySelector("#m-mousesrs-srs-selector");this.srs_=o.options[o.selectedIndex].value,this.label_=o.options[o.selectedIndex].text,this.facadeMap_.getMapImpl().removeControl(this.mousePositionControl),document.querySelector("div.m-mapea-container div.m-dialog").remove(),this.renderPlugin(e,t)}},{key:"getDecimalUnits",value:function(){var e;try{e=ol.proj.get(this.srs_).units_}catch(t){M.dialog.error(i("exception.srs")),e=ol.proj.get("EPSG:4326").units_,this.srs_="EPSG:4326"}return"d"===e&&void 0!==this.geoDecimalDigits?this.geoDecimalDigits:"m"===e&&void 0!==this.utmDecimalDigits?this.utmDecimalDigits:this.precision_}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&_(o.prototype,r),n&&_(o,n),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r,n}(),z=o(591),U=o.n(z);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function q(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V(r.key),r)}}function V(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}function H(e,t,o){return t=Q(t),function(e,t){if(t&&("object"==F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Y()?Reflect.construct(t,o||[],Q(e).constructor):t.apply(e,o))}function Y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Y=function(){return!!e})()}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}var Z=function(e){function t(e,o,r,n,s,a,l,c){var u,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:32766,h=!(arguments.length>9&&void 0!==arguments[9])||arguments[9],d=arguments.length>10&&void 0!==arguments[10]&&arguments[10];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M.utils.isUndefined(R)&&M.exception(i("exception.impl")),(u=H(this,t,[new R(e,o,r,n,s,a,l,c,p,h,d),"MouseSRS"])).tooltip_=a,u.order=p,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(t,M.Control),o=t,(r=[{key:"createView",value:function(e){var t=this;return new Promise((function(e,o){e(M.template.compileSync(U(),{vars:{translations:{tooltip:t.tooltip_},order:t.order}}))}))}},{key:"equals",value:function(e){return e instanceof t}},{key:"destroy",value:function(){this.getImpl().destroy()}}])&&q(o.prototype,r),n&&q(o,n),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r,n}(),B=o(431),X=o.n(B);function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function K(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$(r.key),r)}}function $(e){var t=function(e,t){if("object"!=J(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J(t)?t:t+""}function ee(e,t,o){return t=oe(t),function(e,t){if(t&&("object"==J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,te()?Reflect.construct(t,o||[],oe(e).constructor):t.apply(e,o))}function te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(te=function(){return!!e})()}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}var ie=function(o){function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(e=ee(this,r)).map_=null,e.controls_=[],e.tooltip_=t.tooltip||i("tooltip"),e.epsgFormat=!0===t.epsgFormat,e.srs_=t.srs||"EPSG:4326",e.label_=t.label||"WGS84",e.precision_=M.utils.isNullOrEmpty(t.precision)?4:t.precision,e.geoDecimalDigits=t.geoDecimalDigits,e.utmDecimalDigits=t.utmDecimalDigits,e.activeZ=t.activeZ||!1,e.draggableDialog=void 0===t.draggableDialog||t.draggableDialog,e.helpUrl=t.helpUrl,e.order=t.order>=-1?t.order:null,e.options=t,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(r,M.Plugin),n=r,a=[{key:"getJSONTranslations",value:function(o){return"en"===o||"es"===o?"en"===o?e:t:M.language.getTranslation(o).mousesrs}}],(s=[{key:"addTo",value:function(e){this.control_=new Z(this.srs_,this.label_,this.precision_,this.geoDecimalDigits,this.utmDecimalDigits,this.tooltip_,this.activeZ,this.helpUrl,this.order,this.draggableDialog,this.epsgFormat),this.controls_.push(this.control_),this.map_=e,this.panel_=new M.ui.Panel("panelMouseSRS",{collapsible:!1,tooltip:this.tooltip_,className:"m-plugin-mousesrs",order:this.order}),e.addControls(this.controls_)}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]),this.map_=null,this.control_=null,this.panel_=null}},{key:"name",get:function(){return"mousesrs"}},{key:"position",get:function(){return this.position_}},{key:"label",get:function(){return this.label_}},{key:"srs",get:function(){return this.srs_}},{key:"precision",get:function(){return this.precision_}},{key:"getAPIRest",value:function(){var e="".concat(this.name,"=").concat(this.tooltip_,"*").concat(this.srs_,"*").concat(this.label_,"*").concat(this.precision_);return void 0===this.geoDecimalDigits||null==this.geoDecimalDigits||""===this.geoDecimalDigits?e+="*":e+="*".concat(this.geoDecimalDigits),void 0===this.utmDecimalDigits||null==this.utmDecimalDigits||""===this.utmDecimalDigits?e+="*":e+="*".concat(this.utmDecimalDigits),e+="*".concat(this.activeZ,"*").concat(this.helpUrl,"*").concat(this.draggableDialog,"*").concat(this.epsgFormat)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(e){e(M.template.compileSync(X(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/mousesrs/images/"),translations:{help1:i("textHelp.help1"),help2:i("textHelp.help2"),help3:i("textHelp.help3"),help4:i("textHelp.help4"),help5:i("textHelp.help5"),help6:i("textHelp.help6"),help7:i("textHelp.help7"),help8:i("textHelp.help8")}}}))}))}}}])&&K(n.prototype,s),a&&K(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,s,a}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.MouseSRS=ie,window.M.control.MouseSRSControl=Z,window.M.impl.control.Mouse=D,window.M.impl.control.MouseSRSControl=R})()})();
//# sourceMappingURL=mousesrs.ol.min.js.map