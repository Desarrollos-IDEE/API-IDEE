!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=8)}([function(e){e.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create MouseSRSControl.","srs":"MouseSRS plugin: The srs parameter is not correct. By default EPSG:4326 will be used"},"textHelp":{"help1":"To select the coordinate system just click on any point on the bar.","help2":"The available values are:","help3":"Units: degrees","help4":"Units: meters","help5":"More information about reference systems in:","help6":"Depending on the chosen coordinate system, we will display geographic coordinates in degrees with decimal format or projected in meters. The approximate height above sea level in Alicante is also shown.","help7":"The information relevant to the extension and its possible parameterization is documented in","help8":"The example of use of its parameters can be checked in"},"tooltip":"Coordinates","select_srs":"Select a reference system","close":"Close","accessibility":{"src":"Click or Enter to modify the EPSG"}}')},function(e){e.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles MouseSRSControl.","srs":"Plugin MouseSRS: El parámetro srs no es correcto. Por defecto se usará EPSG:4326"},"textHelp":{"help1":"Para seleccionar el sistema de coordenadas basta con hacer clic en cualquier punto de la barra.","help2":"Los valores disponibles son:","help3":"Unidades: grados","help4":"Unidades: metros","help5":"Más información sobre sistemas de referencia en:","help6":"Según el sistema de coordenadas elegido visualizaremos coordenadas geográficas en grados con formato decimal o proyectadas en metros. También se muestra la altura aproximada sobre el nivel del mar en Alicante.","help7":"La información relevante a la extensión y su posible parametrización está documentada en","help8":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Coordenadas","select_srs":"Selecciona un sistema de referencia","close":"Cerrar","accessibility":{"src":"Clic o Enter para modificar el EPSG"}}')},function(e,t){e.exports='<div class="m-mousesrs-srs-container" role="menu" aria-label="Menu EPSG" tabindex="{{order}}">\n  <select title="{{select_srs}}" aria-label="{{select_srs}}" role="select" tabindex="{{order}}" id="m-mousesrs-srs-selector">\n    <option value="EPSG:4326" {{#eq selected "EPSG:4326"}}selected{{/eq}}>EPSG:4326</option>\n    <option value="EPSG:4083" {{#eq selected "EPSG:4083"}}selected{{/eq}}>EPSG:4083</option>\n    <option value="EPSG:25829" {{#eq selected "EPSG:25829"}}selected{{/eq}}>EPSG:25829</option>\n    <option value="EPSG:25830" {{#eq selected "EPSG:25830"}}selected{{/eq}}>EPSG:25830</option>\n    <option value="EPSG:25831" {{#eq selected "EPSG:25831"}}selected{{/eq}}>EPSG:25831</option>\n    <option value="EPSG:3857" {{#eq selected "EPSG:3857"}}selected{{/eq}}>EPSG:3857</option>\n    <option value="EPSG:4258" {{#eq selected "EPSG:4258"}}selected{{/eq}}>EPSG:4258</option>\n  </select>\n  {{#if hasHelp}}\n    <div class="m-mousesrs-help-button" title="Help EPSG">\n      <a tabindex="{{order}}" role="link" aria-label="Help EPSG" href="{{helpUrl}}" target="_blank"><i class="icon-help"></i></a>\n    </div>\n  {{/if}}\n</div>\n'},function(e,t){e.exports='<div aria-label="Plugin mousesrs" role="button" tabindex="{{order}}" id="div-contenedor" class="m-control m-container m-mousesrs-container" title="{{translations.tooltip}}">\n    <div class="g-cartografia-flecha"></div>\n</div>\n'},function(e,t,o){e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">MOUSESRS <img style="vertical-align: bottom; filter: invert(100%);" src="'+o(7)+'" width="30" height="30"></h2>\n   <div>\n      <img src="{{urlImages}}mousesrs1.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help1}}</p>\n      <img src="{{urlImages}}mousesrs2.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help2}}</p>\n      <ul>\n         <li>EPSG: 4326 WGS 84 -- WGS84 - World Geodetic System 1984. {{translations.help3}}.</li>\n         <li>EPSG: 25828 ETRS89 / UTM huso 28N. {{translations.help4}}.</li>\n         <li>EPSG: 25829 ETRS89 / UTM huso 29N. {{translations.help4}}.</li>\n         <li>EPSG: 25830 ETRS89 / UTM huso 30N. {{translations.help4}}.</li>\n         <li>EPSG: 25831 ETRS89 / UTM huso 31N. {{translations.help4}}.</li>\n         <li>EPSG: 3857 WGS 84 / Pseudo-Mercator -- Spherical Mercator. {{translations.help4}}.</li>\n         <li>EPSG: 4258 ETRS89. {{translations.help3}}.</li>\n      </ul>\n      <p>{{translations.help5}} <a tabindex="0" href="https: //epsg.org/home.html">https: //epsg.org/home.html</a></p>\n      <p>{{translations.help6}}</p>\n      <p>{{translations.help7}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/mousesrs" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/mousesrs</a></p>\n      <p>{{translations.help8}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/mousesrs.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/mousesrs.jsp?language=es</a></p>\n   </div>\n</div>\n\n'},function(e,t,o){},function(e,t,o){},function(e,t){e.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMjQiIGhlaWdodD0iMTAyNCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+Cjx0aXRsZT48L3RpdGxlPgo8ZyBpZD0iaWNvbW9vbi1pZ25vcmUiPgo8L2c+CjxwYXRoIGQ9Ik0xMDA2LjcxOSA3NDUuMTQ0bC0xODYuMjEyLTE4Ni4yMTYgMTYxLjU3My0xNjEuNTc1YzE0LjQ1NS0xNC40NTMgMjAuMzk2LTM1LjM1MyAxNS43MDQtNTUuMjQ3LTQuNjg0LTE5Ljg5Ni0xOS4zMzctMzUuOTQ2LTM4LjcyNC00Mi40MmwtODgxLjM2OS0yOTQuNTA5Yy0yMS4yMDktNy4wOTYtNDQuNjAzLTEuNTc5LTYwLjQxIDE0LjIzNi0xNS44MTMgMTUuODEzLTIxLjMyNCAzOS4yMDMtMTQuMjM4IDYwLjQxbDI5NC41MTkgODgxLjM3MWM2LjQ3NCAxOS4zODYgMjIuNTI4IDM0LjAzNiA0Mi40MiAzOC43MjQgMTkuODc0IDQuNjkyIDQwLjc4OC0xLjI0NyA1NS4yNDctMTUuNzA0bDE2NS44MzMtMTY1LjgzMyAxODYuMjE2IDE4Ni4yMTJjMTEuNTIgMTEuNTIgMjYuNjE4IDE3LjI4MSA0MS43MTQgMTcuMjgxIDE1LjA5NCAwIDMwLjE5Ni01Ljc2MSA0MS43MTItMTcuMjgxbDE3Ni4wMTctMTc2LjAxN2MyMy4wMzYtMjMuMDM4IDIzLjAzNi02MC4zOTMtMC4wMDItODMuNDMxek03OTkuODU1IDg5Ni42NDdsLTE4OS4xMzctMTg3LjA4MWMtMTIuNTg3LTEyLjU4Ny0yOS4wODQtMTguODgzLTQ1LjU3OC0xOC44ODNzLTMyLjk5NSA2LjI5Ni00NS41NzYgMTguODgzbC0xNTMuMDkwIDE1My4wOTAtMjQ3Ljg0My03NDEuNyA3NDEuNjk1IDI0Ny44NDUtMTQ4LjQzNSAxNDguNDMzYy0yNS4xNzQgMjUuMTctMjUuMTc0IDY1Ljk4NyAwIDkxLjE2MWwxODkuMTMxIDE4Ny4wODctMTAxLjE2NyAxMDEuMTY1eiI+PC9wYXRoPgo8L3N2Zz4K"},function(e,t,o){"use strict";o.r(t);o(5),o(6);var r=o(0),n=o(1),i={en:r,es:n},s=function(){var e="es";return"function"==typeof M.language.getLang&&(e=M.language.getLang()),e},a=function(e){return"es"===e||"en"===e?i[e]:M.language.getTranslation(e).mousesrs},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s(),o=a(t),r="";return M.utils.isNullOrEmpty(o)?console.warn("The translation '".concat(t,"' has not been defined.")):r=e.split(".").reduce((function(e,t){return e[t]}),o),r};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(n=r.key,i=void 0,i=function(e,t){if("object"!==c(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===c(i)?i:String(i)),r)}var n,i}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=[],this.nCols=0,this.nRows=0,this.xllcorner=0,this.yllcorner=0,this.dx=0,this.dy=0,this.noDataValue=-9999}var t,o,r;return t=e,(o=[{key:"parseData",value:function(e){var t=e.toLowerCase();return this.data=[],t.split("\n").forEach(this.readLine.bind(this)),this.data}},{key:"getDx",value:function(){return this.dx}},{key:"getDy",value:function(){return this.dy}},{key:"getNoDataValue",value:function(){return this.noDataValue}},{key:"readLine",value:function(e){var t=e.trim();t&&(t.indexOf("ncols")>=0?this.nCols=parseFloat(t.substr(5)):t.indexOf("nrows")>=0?this.nRows=parseFloat(t.substr(5)):t.indexOf("xllcorner")>=0?this.xllcorner=parseFloat(t.substr(9)):t.indexOf("yllcorner")>=0?this.yllcorner=parseFloat(t.substr(9)):t.indexOf("cellsize")>=0?(this.dx=parseFloat(t.substr(8)),this.dy=parseFloat(t.substr(8))):t.indexOf("dx")>=0?this.dx=parseFloat(t.substr(2)):t.indexOf("dy")>=0?this.dy=parseFloat(t.substr(2)):t.indexOf("nodata_value")>=0?this.noDataValue=parseFloat(t.substr(12)):this.data.push(t.split(" ").map((function(e){return parseFloat(e)}))))}}])&&u(t.prototype,o),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(n=r.key,i=void 0,i=function(e,t){if("object"!==f(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===f(i)?i:String(i)),r)}var n,i}var d=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fetchIndex=0,this.noDataValue=Number.NaN,this.url=t,this.options=o,this.options.width=o.width||500,this.options.height=o.height||500,this.loadCoverage()}var t,o,r;return t=e,(o=[{key:"loadCoverage",value:function(){var e=this,t={service:this.options.service?this.options.service:"WCS",request:"describecoverage",version:this.options.version?this.options.version:"1.0.0",coverage:this.options.coverage},o=this.addParameters(this.url,t);M.proxy(!1),M.remote.get(o).then((function(t){M.proxy(!0);for(var o=t.text,r=(new DOMParser).parseFromString(o,"text/xml"),n=r.querySelectorAll("Envelope"),i=function(){if(n[s].getAttribute("srsName")===e.options.crs){var t=[];n[s].childNodes[1].childNodes[0].nodeValue.split(" ").forEach((function(e){t.push(parseFloat(e))})),n[s].childNodes[3].childNodes[0].nodeValue.split(" ").forEach((function(e){t.push(parseFloat(e))})),e.coverageExtension=t}},s=0;s<n.length;s+=1)i();var a=r.querySelectorAll("offsetVector");a&&(e.cellsizeX=Math.abs(parseFloat(a[0].childNodes[0].nodeValue.split(" ")[0])),e.cellsizeY=Math.abs(parseFloat(a[1].childNodes[0].nodeValue.split(" ")[1])))})).catch((function(e){M.proxy(!0),console.error("Error received in request: ".concat(e.message))}))}},{key:"getResolutionDif",value:function(e,t){var o=this.options.width,r=this.options.height,n=this.getVisibleExtent(e,t),i=Math.min(o,Math.ceil((n[2]-n[0])/this.cellsizeX)),s=Math.min(r,Math.ceil((n[3]-n[1])/this.cellsizeY)),a=(n[2]-n[0])/i-this.cellsizeX,l=(n[3]-n[1])/s-this.cellsizeY;return Math.min(a,l)}},{key:"getDataGrid",value:function(e,t){var o=this;if(this.cellsizeX&&this.cellsizeY){var r=this.getVisibleExtent(e,t);if(!(r&&this.visibleExtent&&this.mdtData&&r[0]===this.visibleExtent[0]&&r[1]===this.visibleExtent[1]&&r[2]===this.visibleExtent[2]&&r[3]===this.visibleExtent[3])){this.visibleExtent=r;var n,i=Math.min(this.options.width,Math.ceil((this.visibleExtent[2]-this.visibleExtent[0])/this.cellsizeX)),s=Math.min(this.options.height,Math.ceil((this.visibleExtent[3]-this.visibleExtent[1])/this.cellsizeY)),a={request:"GetCoverage",bbox:this.visibleExtent};this.assignOptions(a,this.options),a.width=i,a.height=s;var l=this.addParameters(this.url,a);this.fetchIndex+=1,M.proxy(!1),M.remote.get(l).then((function(e){M.proxy(!0);var t=e.text.split("NODATA_value -9999.000").join(""),r=new p;n=r.parseData(t),o.dx=r.getDx(),o.dy=r.getDy(),o.noDataValue=r.getNoDataValue(),o.mdtData=n})).catch((function(e){M.proxy(!0),console.error("Error received in request: ".concat(e.message))}))}}}},{key:"getValue",value:function(e,t){var o=e,r=0;if(this.mdtData){if(t&&t.toLowerCase()!==this.options.crs.toLowerCase()){var n=ol.proj.transform(e,t,this.options.crs);o=[n.x,n.y]}if(this.coverageExtension&&o[0]>this.coverageExtension[0]&&o[0]<this.coverageExtension[2]&&o[1]>this.coverageExtension[1]&&o[1]<this.coverageExtension[3]){var i=this.visibleExtent[0]-o[0],s=this.visibleExtent[3]-o[1],a=Math.floor(Math.abs(i/this.dx)),l=Math.floor(Math.abs(s/this.dy)),c=this.mdtData[l]&&this.mdtData[l][a]&&this.mdtData[l][a]!==this.noDataValue?this.mdtData[l][a]:0,u=this.mdtData[l]&&this.mdtData[l][a+1]&&this.mdtData[l][a+1]!==this.noDataValue?this.mdtData[l][a+1]:0,p=this.mdtData[l+1]&&this.mdtData[l+1][a]&&this.mdtData[l+1][a]!==this.noDataValue?this.mdtData[l+1][a]:0,f=this.mdtData[l+1]&&this.mdtData[l+1][a+1]&&this.mdtData[l+1][a+1]!==this.noDataValue?this.mdtData[l+1][a+1]:0,h=(this.visibleExtent[0]-o[0]-Math.floor(i/this.dx)*this.dx)/this.dx,d=(this.visibleExtent[3]-o[1]-Math.floor(s/this.dy)*this.dy)/this.dy;r=this.bilinealInterpolation(c,p,u,f,h,d).toFixed(2)}}else r=this.noDataValue;return r}},{key:"getGridResponse",value:function(e,t,o){if(o===this.fetchIndex&&!e&&t){var r=new p;this.mdtData=r.parseData(t),this.dx=r.getDx(),this.dy=r.getDy(),this.noDataValue=r.getNoDataValue()}}},{key:"getExtension",value:function(e,t){var o=[];if(t&&t.toLowerCase()===this.options.crs.toLowerCase())o=e;else{var r=t,n=this.options.crs,i=ol.proj.transform([e[0],e[1]],r,n),s=ol.proj.transform([e[0],e[3]],r,n),a=ol.proj.transform([e[2],e[1]],r,n),l=ol.proj.transform([e[2],e[3]],r,n);o=[Math.min(i.x,s.x,a.x,l.x),Math.min(i.y,s.y,a.y,l.y),Math.max(i.x,s.x,a.x,l.x),Math.max(i.y,s.y,a.y,l.y)]}return o}},{key:"getCoverageResponse",value:function(e,t,o){if(e)console.error("Error received in DescribeCoverage request: ".concat(e.message));else if(t){for(var r=t,n=r.getElementsByTagName("gml:Envelope"),i=this,s=function(e){if(n[e].getAttribute("srsName")===i.options.crs){var t=[];n[e].childNodes[1].childNodes[0].nodeValue.split(" ").forEach((function(e){t.push(parseFloat(e))})),n[e].childNodes[3].childNodes[0].nodeValue.split(" ").forEach((function(e){t.push(parseFloat(e))})),i.coverageExtension=t}},a=0;a<n.length;a+=1)s(a);var l=r.getElementsByTagName("gml:offsetVector");l&&(this.cellsizeX=Math.abs(parseFloat(l[0].childNodes[0].nodeValue.split(" ")[0])),this.cellsizeY=Math.abs(parseFloat(l[1].childNodes[0].nodeValue.split(" ")[1])))}}},{key:"getVisibleExtent",value:function(e,t){var o=this.getExtension(e,t);return this.coverageExtension?[Math.max(o[0],this.coverageExtension[0]),Math.max(o[1],this.coverageExtension[1]),Math.min(o[2],this.coverageExtension[2]),Math.min(o[3],this.coverageExtension[3])]:o}},{key:"bilinealInterpolation",value:function(e,t,o,r,n,i){return e*(1-n)*(1-i)+t*n*(1-i)+o*(1-n)*i+r*n*i}},{key:"assignOptions",value:function(e,t){e&&t&&Object.keys(t).forEach((function(o){null!==t[o]&&t[o]&&(e[o]=t[o])}))}},{key:"addParameters",value:function(e,t){var o=e,r=[];Object.keys(t).forEach((function(e){null!==t[e]&&void 0!==t[e]&&r.push("".concat(e,"=").concat(encodeURIComponent(t[e])))}));var n=r.join("&");return(o=-1===(o=o.replace(/[?&]$/,"")).indexOf("?")?"".concat(o,"?"):"".concat(o,"&"))+n}}])&&h(t.prototype,o),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(n=r.key,i=void 0,i=function(e,t){if("object"!==m(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===m(i)?i:String(i)),r)}var n,i}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wcsLoaders={}}var t,o,r;return t=e,(o=[{key:"addLayers",value:function(e){if(e)for(var t=0,o=e;t<o.length;t+=1){var r=o[t];this.addLayer(r.url,r.options)}}},{key:"addLayer",value:function(e,t){var o=t.name||t.coverage;this.wcsLoaders[o]||(this.wcsLoaders[o]=new d(e,t))}},{key:"updateDataGrid",value:function(e,t){this.wcsLoader=this.getWcsLoaderForExtension(e,t),this.wcsLoader&&this.wcsLoader.getDataGrid(e,t)}},{key:"getValue",value:function(e,t){var o=Number.NaN;return this.wcsLoader&&(o=this.wcsLoader.getValue(e,t)),o}},{key:"getWcsLoaderForExtension",value:function(e,t){var o=this,r=Number.POSITIVE_INFINITY,n=null,i=null,s=Number.NEGATIVE_INFINITY;return Object.keys(this.wcsLoaders).forEach((function(a){var l=o.wcsLoaders[a],c=l.getResolutionDif(e,t);c<0&&c>s&&(s=c,i=l),c>0&&c<r&&(r=c,n=l)})),null!==n?n:i}}])&&y(t.prototype,o),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(n=r.key,i=void 0,i=function(e,t){if("object"!==g(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===g(i)?i:String(i)),r)}var n,i}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=w(e);if(t){var n=w(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return E(this,o)}}function E(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(i,ol.control.MousePosition);var t,o,r,n=x(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e)).coordinateFormat=e.coordinateFormat,t.label=e.label,t.mapProjection_=e.projection,t.target=e.target,t.geoDecimalDigits=e.geoDecimalDigits,t.utmDecimalDigits=e.utmDecimalDigits,t.activeZ=e.activeZ,t.order=e.order,t}return t=i,(o=[{key:"initWCSLoaderManager",value:function(e){var t=this;this.facadeMap_=e,this.activeZ&&(this.wcsloadermanager=new v,this.wcsloadermanager.addLayers([{url:"https://servicios.idee.es/wcs-inspire/mdt",options:{coverage:"Elevacion4258_200",crs:"EPSG:4326",format:"ArcGrid",height:500,interpolationMethod:"bilinear",service:"WCS",version:"1.0.0",width:500}},{url:"https://servicios.idee.es/wcs-inspire/mdt",options:{coverage:"Elevacion4258_25",crs:"EPSG:4326",format:"ArcGrid",height:500,interpolationMethod:"bilinear",service:"WCS",version:"1.0.0",width:500}},{url:"https://servicios.idee.es/wcs-inspire/mdt",options:{coverage:"Elevacion4258_500",crs:"EPSG:4326",format:"ArcGrid",height:500,interpolationMethod:"bilinear",service:"WCS",version:"1.0.0",width:500}},{url:"https://servicios.idee.es/wcs-inspire/mdt",options:{coverage:"Elevacion4258_5",crs:"EPSG:4326",format:"ArcGrid",height:500,interpolationMethod:"bilinear",service:"WCS",version:"1.0.0",width:500}}]),e.getMapImpl().on("moveend",(function(){t.updateDataGrid(e)})))}},{key:"updateDataGrid",value:function(e){var t=void 0!==this.facadeMap_?this.facadeMap_:e,o=t.getBbox(),r=[o.x.min,o.y.min,o.x.max,o.y.max];r=ol.proj.transformExtent(r,t.getProjection().code,"EPSG:4326"),this.wcsloadermanager.updateDataGrid(r,"EPSG:4326")}},{key:"getElement",value:function(){return this.element}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}},{key:"handleMouseMove",value:function(e){var t=this.getMap();this.lastMouseMovePixel_=t.getEventPixel(e),this.updateHTML_(this.lastMouseMovePixel_)}},{key:"handleMouseOut",value:function(e){this.updateHTML_(null),this.lastMouseMovePixel_=null}},{key:"updateHTML_",value:function(e){var t="",o=this.getProjection();if(e&&this.mapProjection_){this.transform_||(this.transform_=o?ol.proj.getTransform(this.mapProjection_,o):ol.proj.identityTransform);var r=this.getMap(),n=r.getCoordinateFromPixel(e);if(n&&(this.transform_(n,n),t="".concat(this.coordinateFormat(n)).replace(".",",").replace(".",",").replace(", ","&nbsp;&nbsp;&nbsp;"),this.activeZ&&void 0!==this.wcsloadermanager)){var i=r.getCoordinateFromPixel(e),s=ol.proj.transform(i,this.facadeMap_.getProjection().code,"EPSG:4326"),a=Math.round(this.wcsloadermanager.getValue(s,"EPSG:4326"));Number.isNaN(a)||(t+="&nbsp;&nbsp;&nbsp;".concat(a))}t+=' | <b role="button" tabindex="'.concat(this.order,'" aria-label="').concat(l("accessibility.src"),'" class="m-mousesrs-pointer">').concat(this.label,"</b>")}this.renderedHTML_&&t===this.renderedHTML_||(this.element.innerHTML=t,this.renderedHTML_=t)}}])&&b(t.prototype,o),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(),j=o(2),P=o.n(j);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return N(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function _(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(n=r.key,i=void 0,i=function(e,t){if("object"!==O(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===O(i)?i:String(i)),r)}var n,i}function L(){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var r=k(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(arguments.length<3?e:o):n.value}}).apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=A(e);if(t){var n=A(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return G(this,o)}}function G(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(i,M.impl.Control);var t,o,r,n=I(i);function i(e,t,o,r,s,a,l,c,u,p,f){var h;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(h=n.call(this)).srs_=e,h.label_=t,h.precision_=o,h.geoDecimalDigits=r,h.utmDecimalDigits=s,h.tooltip=a,h.activeZ=l,h.helpUrl=c,h.order=u,h.epsgFormat=f,h.draggableDialog=p,h}return t=i,(o=[{key:"addTo",value:function(e,t){this.auxMap_=e,this.html_=t,this.renderPlugin(e,t)}},{key:"renderPlugin",value:function(e,t){var o=this;this.facadeMap_=e,this.mousePositionControl=new D({coordinateFormat:ol.coordinate.createStringXY(this.getDecimalUnits()),projection:this.srs_,label:this.epsgFormat?this.formatEPSG(this.label_):this.label_,undefinedHTML:"",className:"m-mouse-srs",target:this.html_,tooltip:this.tooltip,geoDecimalDigits:this.geoDecimalDigits,utmDecimalDigits:this.utmDecimalDigits,activeZ:this.activeZ,order:this.order}),e.getMapImpl().addControl(this.mousePositionControl),L(A(i.prototype),"addTo",this).call(this,e,t),setTimeout((function(){o.mousePositionControl.initWCSLoaderManager(e),document.querySelector(".m-mousesrs-container .m-mouse-srs").setAttribute("role","text "),document.querySelector(".m-mousesrs-container .m-mouse-srs").setAttribute("tabIndex",o.order),document.querySelector(".m-mousesrs-container .m-mouse-srs").addEventListener("click",o.openChangeSRS.bind(o,o.auxMap_,t)),document.querySelector(".m-mousesrs-container .m-mouse-srs").addEventListener("keydown",(function(e){"Enter"===e.key&&o.openChangeSRS(o,o.auxMap_,t)}))}),1e3)}},{key:"openChangeSRS",value:function(e,t){var o=this,r=M.template.compileSync(P.a,{jsonp:!0,parseToHtml:!0,vars:{selected:this.srs_,hasHelp:void 0!==this.helpUrl&&M.utils.isUrl(this.helpUrl),helpUrl:this.helpUrl,select_srs:l("select_srs"),order:this.order}});this.epsgFormat&&this.formatEPSGs(r),M.dialog.info(r.outerHTML,l("select_srs"),this.order),setTimeout((function(){document.querySelector(".m-dialog>div.m-modal>div.m-content").style.minWidth="260px",document.querySelector("#m-mousesrs-srs-selector").addEventListener("change",o.changeSRS.bind(o,e,t)),document.querySelector("div.m-mapea-container div.m-dialog div.m-title").style.backgroundColor="#71a7d3";var r=document.querySelector("div.m-dialog.info div.m-button > button");r.innerHTML=l("close"),r.style.width="75px",r.style.backgroundColor="#71a7d3"}),10),this.draggableDialog&&M.utils.draggabillyElement(".m-dialog .m-modal .m-content",".m-dialog .m-modal .m-content .m-title"),document.addEventListener("keydown",(function(e){if("Escape"===e.key){var t=document.querySelector(".m-dialog .m-content .m-button > button");null!==t&&t.click()}}))}},{key:"formatEPSGs",value:function(e){var t=this;T(e.querySelectorAll("select option")).forEach((function(e){e.innerText=t.formatEPSG(e.value)}))}},{key:"formatEPSG",value:function(e){var t=M.impl.ol.js.projections.getSupportedProjs().find((function(t){return t.codes.includes(e)}));if(!t)return e;var o=t.datum,r=t.proj;return"".concat(o," - ").concat(r," ")}},{key:"changeSRS",value:function(e,t){var o=document.querySelector("#m-mousesrs-srs-selector");this.srs_=o.options[o.selectedIndex].value,this.label_=o.options[o.selectedIndex].text,this.facadeMap_.getMapImpl().removeControl(this.mousePositionControl),document.querySelector("div.m-mapea-container div.m-dialog").remove(),this.renderPlugin(e,t)}},{key:"getDecimalUnits",value:function(){var e;try{e=ol.proj.get(this.srs_).units_}catch(t){M.dialog.error(l("exception.srs")),e=ol.proj.get("EPSG:4326").units_,this.srs_="EPSG:4326"}return"d"===e&&void 0!==this.geoDecimalDigits?this.geoDecimalDigits:"m"===e&&void 0!==this.utmDecimalDigits?this.utmDecimalDigits:this.precision_}},{key:"destroy",value:function(){this.facadeMap_.getMapImpl().removeControl(this),this.facadeMap_=null}}])&&_(t.prototype,o),r&&_(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(),z=o(3),U=o.n(z);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(n=r.key,i=void 0,i=function(e,t){if("object"!==F(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===F(i)?i:String(i)),r)}var n,i}function H(e,t){return(H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=W(e);if(t){var n=W(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return Q(this,o)}}function Q(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(i,M.Control);var t,o,r,n=Y(i);function i(e,t,o,r,s,a,c,u){var p,f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:32766,h=arguments.length>9?arguments[9]:void 0,d=arguments.length>10?arguments[10]:void 0;q(this,i),M.utils.isUndefined(R)&&M.exception(l("exception.impl"));var m=new R(e,t,o,r,s,a,c,u,f,h,d);return(p=n.call(this,m,"MouseSRS")).tooltip_=a,p.order=f,p}return t=i,(o=[{key:"createView",value:function(e){var t=this;return new Promise((function(e,o){e(M.template.compileSync(U.a,{vars:{translations:{tooltip:t.tooltip_},order:t.order}}))}))}},{key:"equals",value:function(e){return e instanceof i}},{key:"destroy",value:function(){this.getImpl().destroy()}}])&&V(t.prototype,o),r&&V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(),B=o(4),X=o.n(B);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(n=r.key,i=void 0,i=function(e,t){if("object"!==J(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===J(i)?i:String(i)),r)}var n,i}function ee(e,t){return(ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=re(e);if(t){var n=re(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return oe(this,o)}}function oe(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(a,M.Plugin);var t,o,i,s=te(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return K(this,a),(e=s.call(this)).map_=null,e.controls_=[],e.tooltip_=t.tooltip||l("tooltip"),e.epsgFormat=!0===t.epsgFormat,e.srs_=t.srs||"EPSG:4326",e.label_=t.label||"WGS84",e.precision_=M.utils.isNullOrEmpty(t.precision)?4:t.precision,e.geoDecimalDigits=t.geoDecimalDigits,e.utmDecimalDigits=t.utmDecimalDigits,e.activeZ=t.activeZ||!1,e.draggableDialog=void 0===t.draggableDialog||t.draggableDialog,e.helpUrl=t.helpUrl,e.order=t.order>=-1?t.order:null,e.options=t,e}return t=a,i=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?r:n:M.language.getTranslation(e).mousesrs}}],(o=[{key:"addTo",value:function(e){this.control_=new Z(this.srs_,this.label_,this.precision,this.geoDecimalDigits,this.utmDecimalDigits,this.tooltip_,this.activeZ,this.helpUrl,this.order,this.draggableDialog,this.epsgFormat),this.controls_.push(this.control_),this.map_=e,this.panel_=new M.ui.Panel("panelMouseSRS",{collapsible:!1,tooltip:this.tooltip_,className:"m-plugin-mousesrs",order:this.order}),e.addControls(this.controls_)}},{key:"destroy",value:function(){this.map_.removeControls([this.control_]),this.map_=null,this.control_=null,this.panel_=null}},{key:"name",get:function(){return"mousesrs"}},{key:"position",get:function(){return this.position_}},{key:"label",get:function(){return this.label_}},{key:"srs",get:function(){return this.srs_}},{key:"precision",get:function(){return this.precision_}},{key:"getAPIRest",value:function(){var e="".concat(this.name,"=").concat(this.tooltip_,"*").concat(this.srs,"*").concat(this.label,"*").concat(this.precision);return void 0===this.geoDecimalDigits||null==this.geoDecimalDigits||""===this.geoDecimalDigits?e+="*":e+="*".concat(this.geoDecimalDigits),void 0===this.utmDecimalDigits||null==this.utmDecimalDigits||""===this.utmDecimalDigits?e+="*":e+="*".concat(this.utmDecimalDigits),e+="*".concat(this.activeZ,"*").concat(this.helpUrl,"*").concat(this.draggableDialog,"*").concat(this.epsgFormat)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(e){e(M.template.compileSync(X.a,{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/mousesrs/images/"),translations:{help1:l("textHelp.help1"),help2:l("textHelp.help2"),help3:l("textHelp.help3"),help4:l("textHelp.help4"),help5:l("textHelp.help5"),help6:l("textHelp.help6"),help7:l("textHelp.help7"),help8:l("textHelp.help8")}}}))}))}}}])&&$(t.prototype,o),i&&$(t,i),Object.defineProperty(t,"prototype",{writable:!1}),a}();window.M.plugin||(window.M.plugin={}),window.M.control||(window.M.control={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.plugin.MouseSRS=ne,window.M.control.MouseSRSControl=Z,window.M.impl.control.Mouse=D,window.M.impl.control.MouseSRSControl=R}]);
//# sourceMappingURL=mousesrs-1.2.0.ol.min.js.map