(()=>{var e={184:e=>{e.exports='<div class="m-measure-tooltip pointer"></div>'},172:e=>{e.exports='<div class="m-measure-tooltip measure">Area: {{area}}</div>'},481:e=>{e.exports='<div class="m-control m-measurearea-container">\n    <button type="button" tabindex="{{order}}" id="measurebar-area-btn" class="measurebar-medir-area" title="{{translations.measure_area}}"></button>\n</div>\n'},531:e=>{e.exports='<div class="m-control m-measureclear-container">\n    <button type="button" tabindex="{{order}}" id="measurebar-clear-btn" class="g-cartografia-papelera" title="{{translations.delete}}"></button>\n</div>\n'},315:e=>{e.exports='<div class="m-control m-measurelength-container">\n    <button type="button" tabindex="{{order}}" id="measurebar-length-btn" class="measurebar-medir-linea" title="{{translations.measure}}"></button>\n</div>\n'},431:(e,t,r)=>{e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">MEASUREBAR <img style="vertical-align: bottom; filter: invert(100%);" src="'+r(914)+'" width="30" height="30"></h2>\n   <div>\n      <p>{{translations.help1}}</p>\n         <img src="{{urlImages}}measure1.png" style="margin: 0 auto; display: block">\n      <ul>\n         <li>{{translations.help2}}</li>\n         <li>{{translations.help3}}</li>\n         <li>{{translations.help4}}</li>\n      </ul>\n      <p>{{translations.help2}}</p>\n      <p>{{translations.help5}}</p>\n      <img src="{{urlImages}}measure2.png" style="margin: 0 auto; display: block">\n      <p>{{translations.help6}}</p>\n      <img src="{{urlImages}}measure3.png" style="margin: 0 auto; display: block">\n      <p>{{translations.help7}}</p>\n      <p>{{translations.help8}}</p>\n      <p>{{translations.help3}}</p>\n      <p>{{translations.help9}}</p>\n      <img src="{{urlImages}}measure4.png" style="margin: 0 auto; display: block">\n      <p>{{translations.help10}}</p>\n      <img src="{{urlImages}}measure5.png" style="margin: 0 auto; display: block">\n      <p>{{translations.help11}}</p>\n      <p>{{translations.help12}}</p>\n      <p>{{translations.help4}}</p>\n      <p>{{translations.help13}}</p>\n      <p>{{translations.help14}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/measurebar" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/measurebar</a></p>\n      <p>{{translations.help15}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/measurebar.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/measurebar.jsp?language=es</a></p>\n   </div>\n</div>'},914:e=>{"use strict";e.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMjQiIGhlaWdodD0iMTAyNCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+Cjx0aXRsZT48L3RpdGxlPgo8ZyBpZD0iaWNvbW9vbi1pZ25vcmUiPgo8L2c+CjxwYXRoIGQ9Ik03NDQuODYyIDIwLjM2OGwtNzA4LjUzNiA3MDguNTQ1IDI2NS43MDMgMjY1LjcwMyA3MDguNTM2LTcwOC41NDUtMjY1LjcwMy0yNjUuNzAzek0zMDIuMDI2IDkwNi4wNDZsLTE3Ny4xMzMtMTc3LjEzMyA2Ni40MjMtNjYuNDI2IDg4LjU2NyA4OC41NyA0NC4yODUtNDQuMjg1LTg4LjU2NC04OC41NyA0NC4yODItNDQuMjgyIDQ0LjI4NSA0NC4yODIgNDQuMjgyLTQ0LjI4Mi00NC4yODItNDQuMjgyIDQ0LjI4NS00NC4yOTQgODguNTY3IDg4LjU3NiA0NC4yODUtNDQuMjgyLTg4LjU2Ny04OC41NzYgNDQuMjgyLTQ0LjI4NSA0NC4yODUgNDQuMjg1IDQ0LjI4NS00NC4yODUtNDQuMjg1LTQ0LjI4NSA0NC4yODUtNDQuMjg1IDg4LjU2NCA4OC41NyA0NC4yODUtNDQuMjg1LTg4LjU2Ny04OC41NjcgNDQuMjgyLTQ0LjI4NSA0NC4yODUgNDQuMjg1IDQ0LjI4Mi00NC4yODUtNDQuMjgyLTQ0LjI4NSA2Ni40MjYtNjYuNDI2IDE3Ny4xMzMgMTc3LjEzMy02MTkuOTcyIDYxOS45ODF6Ij48L3BhdGg+Cjwvc3ZnPgo="}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=JSON.parse('{"exception":{"impl_length":"The implementation used cannot create MeasureLength.","impl_clear":"The implementation used cannot create MeasureClear.","impl_area":"The implementation used cannot create MeasureArea"},"textHelp":{"help1":"Measure lengths and surfaces on the map.","help2":"1. Measure distances.","help3":"2. Measure area.","help4":"3. Delete Measurements.","help5":"Click on the tool to select it and then on the map to draw the distance you want to measure. As you draw, the total length is updated.","help6":"Double click to finish the distance measurement, and start another one.","help7":"Using the Escape key deactivates the tool and deletes the active measurement. This can be useful to restart the tool if an error was made in the last measurement, without deleting the rest of the measurements already made.","help8":"The tool remains active until you deactivate it by clicking the \'Measure distances\' button again.","help9":"Click on the tool to select it and then on the map to draw the area you want to measure. As you draw, the measured area is updated.","help10":"Double click to finish area measurement, and start another one.","help11":"Using the Escape key deactivates the tool and deletes the active measurement. This can be useful to restart the tool if an error was made in the last measurement, without deleting the rest of the measurements already made.","help12":"The tool remains active until you deactivate it by clicking the \'Measure area\' button again.","help13":"Delete all measurements made, both areas and distances.","help14":"The information relevant to the extension and its possible parameterization is documented in","help15":"The example of use of its parameters can be checked in"},"text":{"tooltip":"Measurement tools","keep_drawing":"Click to continue drawing the line","click_draw":"Click to start drawing","keep_drawing_area":"Click to continue drawing the area","measure_area":"Measure area","delete":"Remove measures","measure":"Measuring distances"}}'),t=JSON.parse('{"exception":{"impl_length":"La implementación usada no puede crear controles MeasureLength.","impl_clear":"La implementación usada no puede crear controles MeasureClear.","impl_area":"La implementación usada no puede crear controles MeasureArea"},"textHelp":{"help1":"Mide longitudes y superficies sobre el mapa.","help2":"1. Medir distancias.","help3":"2. Medir área.","help4":"3. Borrar Medidas.","help5":"Haga clic sobre la herramienta para seleccionarla y luego sobre el mapa para dibujar la distancia que quiere medir. A medida que se va dibujando se va actualizando la longitud total.","help6":"Haga doble clic para terminar la medición de distancia, y empezar otra.","help7":"Con la tecla Escape se desactiva la herramienta y se borra la medición activa. Esto puede ser útil para reiniciar la herramienta si se ha cometido un error en la última medición, sin borrar el resto de mediciones ya realizadas.","help8":"La herramienta se queda activa hasta que la desactive, haciendo clic de nuevo sobre el botón \'Medir distancias\'.","help9":"Haga clic sobre la herramienta para seleccionarla y luego sobre el mapa para dibujar el área que quiere medir. A medida que se va dibujando se va actualizando la superficie medida.","help10":"Haga doble clic para terminar la medición de área, y empezar otra.","help11":"Con la tecla Escape se desactiva la herramienta y se borra la medición activa. Esto puede ser útil para reiniciar la herramienta si se ha cometido un error en la última medición, sin borrar el resto de mediciones ya realizadas.","help12":"La herramienta se queda activa hasta que la desactive, haciendo clic de nuevo sobre el botón \'Medir área\'.","help13":"Borra todas las mediciones realizadas, tanto áreas como distancias.","help14":"La información relevante a la extensión y su posible parametrización está documentada en","help15":"El ejemplo de uso de sus parámetros puede comprobarse en"},"text":{"tooltip":"Herramientas de medición","keep_drawing":"Click para continuar dibujando la línea","click_draw":"Click para empezar a dibujar","keep_drawing_area":"Click para continuar dibujando el área","measure_area":"Medir área","delete":"Borrar medidas","measure":"Medir distancias"}}');var n={en:e,es:t},o=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t="es","function"==typeof M.language.getLang&&(t=M.language.getLang()),t),o=function(e){return"es"===e||"en"===e?n[e]:M.language.getTranslation(e).measurebar}(r),a="";return M.utils.isNullOrEmpty(o)?console.warn("The translation '".concat(r,"' has not been defined.")):a=e.split(".").reduce((function(e,t){return e[t]}),o),a};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function u(e,t,r){return t=s(t),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],s(e).constructor):t.apply(e,r))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var f=function(e){function t(e,r,n,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=u(this,t,[e,n])).template_=r,a.order=o,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,M.Control),r=t,(n=[{key:"createView",value:function(e){return M.template.compileSync(this.template_,{jsonp:!0,vars:{translations:o("text"),order:this.order}})}},{key:"getActivationButton",value:function(e){return e.querySelector("button")}},{key:"equals",value:function(e){var r=!1;return e instanceof t&&(r=this.name===e.name),r}},{key:"destroy",value:function(){this.getImpl().destroy(),this.template_=null,this.impl=null}}])&&i(r.prototype,n),a&&i(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}();f.NAME="measurebar",f.POINTER_TOOLTIP_TEMPLATE="measure_pointer_tooltip.html",f.MEASURE_TOOLTIP_TEMPLATE="measure_tooltip.html",f.HELP_MESSAGE=o("text.click_draw");var y=r(184),m=r.n(y),h=r(172),d=r.n(h);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}function _(e,t,r){return t=O(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,r||[],O(e).constructor):t.apply(e,r))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},j.apply(null,arguments)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}var E=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_(this,t)).type_=e,r.layer_=r.createLayer_(),r.draw_=r.createIteractionDraw_(),r.helpTooltip_=null,r.measureTooltip_=null,r.facadeMap_=null,r.currentFeature_=null,r.tooltipCoord_=null,r.overlays_=[],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,M.impl.Control),r=t,(n=[{key:"addTo",value:function(e,r){this.facadeMap_=e,e.getMapImpl().addLayer(this.layer_),j(O(t.prototype),"addTo",this).call(this,e,r),this.createHelpTooltip_(),this.createMeasureTooltip_()}},{key:"activate",value:function(){this.invokeEscKey(),this.createHelpTooltip_(),this.facadeMap_.getMapImpl().on("pointermove",this.pointerMoveHandler_.bind(this)),this.facadeMap_.getMapImpl().addInteraction(this.draw_),this.active=!0,this.createMeasureTooltip_(),document.body.style.cursor="crosshair",document.addEventListener("keyup",this.checkEscKey.bind(this))}},{key:"checkEscKey",value:function(e){"Escape"===e.key&&(document.querySelectorAll(".m-panel.m-panel-measurebar .m-panel-controls div.activated > button").forEach((function(e){e.click()})),document.removeEventListener("keyup",this.checkEscKey))}},{key:"invokeEscKey",value:function(){try{document.dispatchEvent(new window.KeyboardEvent("keyup",{key:"Escape",keyCode:27,code:"",which:69,shiftKey:!1,ctrlKey:!1,metaKey:!1}))}catch(e){console.error(e)}}},{key:"deactivate",value:function(){document.body.style.cursor="default",this.facadeMap_.getMapImpl().un("pointermove",this.pointerMoveHandler_.bind(this)),this.facadeMap_.getMapImpl().removeInteraction(this.draw_),M.utils.isNullOrEmpty(this.helpTooltip_)||this.facadeMap_.getMapImpl().removeOverlay(this.helpTooltip_),M.utils.isNullOrEmpty(this.measureTooltip_)||this.facadeMap_.getMapImpl().removeOverlay(this.measureTooltip_),this.active=!1}},{key:"createLayer_",value:function(){return new ol.layer.Vector({source:new ol.source.Vector({}),style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(51, 124, 235, 0.2)"}),stroke:new ol.style.Stroke({color:"#337ceb",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#337ceb"})})}),zIndex:9999999999999})}},{key:"createIteractionDraw_",value:function(){var e=new ol.interaction.Draw({source:this.layer_.getSource(),type:this.type_,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.5)"}),stroke:new ol.style.Stroke({color:"#b54d01",lineDash:[10,10],width:2}),image:new ol.style.Circle({radius:5,stroke:new ol.style.Stroke({color:"#b54d01"}),fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.5)"})})})});return e.on("drawstart",this.onDrawStart_.bind(this)),e.on("drawend",this.onDrawEnd_.bind(this)),e}},{key:"createHelpTooltip_",value:function(){var e=M.template.compileSync(m(),{jsonp:!0,vars:{translations:o("text")}});this.helpTooltip_=new ol.Overlay({element:e,offset:[15,0],positioning:"center-left"}),this.facadeMap_.getMapImpl().addOverlay(this.helpTooltip_)}},{key:"createMeasureTooltip_",value:function(){var e=M.template.compileSync(d(),{jsonp:!0,vars:{translations:o("text")}});M.utils.isNullOrEmpty(this.measureTooltip_)||this.overlays_.push(this.measureTooltip_),this.measureTooltip_=new ol.Overlay({element:e,offset:[0,-15],positioning:"bottom-center"}),this.facadeMap_.getMapImpl().addOverlay(this.measureTooltip_)}},{key:"onDrawStart_",value:function(e){this.currentFeature_=e.feature,this.tooltipCoord_=e.coordinate,this.currentFeature_.getGeometry().on("change",this.onGeometryChange_.bind(this))}},{key:"onDrawEnd_",value:function(e){this.currentFeature_.getGeometry().un("change",this.onGeometryChange_),this.currentFeature_=null,this.measureTooltip_.getElement().classList.add("static"),this.measureTooltip_.setOffset([0,-7]),this.createMeasureTooltip_()}},{key:"pointerMoveHandler_",value:function(e){if(!e.dragging){var t=this.helpMsg_;this.currentFeature_&&(t=this.helpMsgContinue_),M.utils.isNullOrEmpty(this.helpTooltip_)||(this.helpTooltip_.getElement().innerHTML=t,this.helpTooltip_.setPosition(e.coordinate))}}},{key:"onGeometryChange_",value:function(e){var t=e.target,r=this.formatGeometry(t),n=this.getTooltipCoordinate(t);M.utils.isNullOrEmpty(this.measureTooltip_)||(this.measureTooltip_.getElement().innerHTML=r,this.measureTooltip_.setPosition(n))}},{key:"clear",value:function(){var e=this;M.utils.isNullOrEmpty(this.layer_)||this.layer_.getSource().clear(),this.overlays_.forEach((function(t){e.facadeMap_.getMapImpl().removeOverlay(t)}),this),this.overlays_.length=0}},{key:"destroy",value:function(){this.deactivate(),this.element.remove(),this.facadeMap_.removeControls(this),this.facadeMap_=null,this.overlays_.length=0}}])&&v(r.prototype,n),a&&v(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function k(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}function N(e,t,r){return t=I(t),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C()?Reflect.construct(t,r||[],I(e).constructor):t.apply(e,r))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},L.apply(null,arguments)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}var x=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=N(this,t,["Polygon"])).helpMsg_=f.HELP_MESSAGE,e.helpMsgContinue_=Z,document.addEventListener("keydown",(function(e){if("Escape"===e.key){var t=document.querySelector(".m-panel.m-panel-measurebar.opened");null!==t&&t.querySelector("button.m-panel-btn").click()}})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(t,e),r=t,(n=[{key:"formatGeometry",value:function(e){var t,r,n=this.facadeMap_.getProjection();return(t=ol.sphere.getArea(e,{projection:n.code}))<=1e4?r="".concat(this.formatNumber(Math.round(100*t)/100)," m<sup>2</sup>"):t>1e4&&t<=1e6?r="".concat(this.formatNumber(Math.round(t/1e4*1e4)/1e4)," ha"):t>1e6&&(r="".concat(this.formatNumber(Math.round(t/1e6*1e4)/1e4)," km<sup>2</sup>")),r}},{key:"getTooltipCoordinate",value:function(e){return e.getInteriorPoint().getCoordinates()}},{key:"activate",value:function(){var e=this.facadeMap_.getControls().filter((function(e){return e instanceof pe}))[0];e&&e.deactivate(),L(I(t.prototype),"activate",this).call(this),document.querySelector(".m-control.m-measurearea-container").classList.add("activated")}},{key:"formatNumber",value:function(e){return"".concat(e).replace(/\d(?=(\d{3})+\.)/g,"$&*").split(".").join(",").split("*").join(".")}}])&&S(r.prototype,n),o&&S(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(E),A=r(481),R=r.n(A);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q(n.key),n)}}function Q(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}function G(e,t,r){return t=z(t),function(e,t){if(t&&("object"==H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,U()?Reflect.construct(t,r||[],z(e).constructor):t.apply(e,r))}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(U=function(){return!!e})()}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}var F=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=G(this,t,[new x,R(),t.NAME,e]),M.utils.isUndefined(x)&&M.Exception(o("exception.impl_area")),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(t,e),r=t,(n=[{key:"equals",value:function(e){var r=!1;return e instanceof t&&(r=this.name===e.name),r}}])&&B(r.prototype,n),a&&B(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}(f);F.NAME="measurearea",F.TEMPLATE="measurearea.html";var Z=o("text.keep_drawing_area");function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}function W(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:t+""}function J(e,t,r){return t=$(t),function(e,t){if(t&&("object"==Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,V()?Reflect.construct(t,r||[],$(e).constructor):t.apply(e,r))}function V(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V=function(){return!!e})()}function X(){return X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=$(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},X.apply(null,arguments)}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}var te=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=J(this,t,["LineString"])).helpMsg_=f.HELP_MESSAGE,e.helpMsgContinue_=fe,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(t,e),r=t,(n=[{key:"formatGeometry",value:function(e){var t=null,r=this.facadeMap_.getProjection().code,n=this.facadeMap_.getProjection().units;if("EPSG:3857"===r)t=Math.round(100*ol.sphere.getLength(e))/100;else if("d"===n)for(var o=e.getCoordinates(),a=0,i=o.length-1;a<i;a+=1)t+=ol.sphere.getDistance(ol.proj.transform(o[a],r,"EPSG:4326"),ol.proj.transform(o[a+1],r,"EPSG:4326"));else t=Math.round(100*e.getLength())/100;return t>1e3?"".concat(this.formatNumber(Math.round(t/1e3*100)/100)," km"):"".concat(this.formatNumber(Math.round(100*t)/100)," m")}},{key:"getTooltipCoordinate",value:function(e){return e.getLastCoordinate()}},{key:"activate",value:function(){var e=this.facadeMap_.getControls().filter((function(e){return e instanceof F}))[0];e&&e.deactivate(),X($(t.prototype),"activate",this).call(this),document.querySelector(".m-control.m-measurelength-container").classList.add("activated")}},{key:"formatNumber",value:function(e){return"".concat(e).replace(/\d(?=(\d{3})+\.)/g,"$&*").split(".").join(",").split("*").join(".")}}])&&K(r.prototype,n),o&&K(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(E),re=r(315),ne=r.n(re);function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ie(n.key),n)}}function ie(e){var t=function(e,t){if("object"!=oe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oe(t)?t:t+""}function le(e,t,r){return t=ce(t),function(e,t){if(t&&("object"==oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ue()?Reflect.construct(t,r||[],ce(e).constructor):t.apply(e,r))}function ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ue=function(){return!!e})()}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},se(e,t)}var pe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=le(this,t,[new te,ne(),t.NAME,e]),M.utils.isUndefined(te)&&M.Exception(o("exception.impl_length")),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(t,e),r=t,(n=[{key:"equals",value:function(e){var r=!1;return e instanceof t&&(r=this.name===e.name),r}}])&&ae(r.prototype,n),a&&ae(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}(f);pe.NAME="measurelength",pe.TEMPLATE="measurelength.html";var fe=o("text.keep_drawing");function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,he(n.key),n)}}function he(e){var t=function(e,t){if("object"!=ye(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ye(t)?t:t+""}function de(e,t,r){return t=ve(t),function(e,t){if(t&&("object"==ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,be()?Reflect.construct(t,r||[],ve(e).constructor):t.apply(e,r))}function be(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(be=function(){return!!e})()}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}function ge(e,t){return ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ge(e,t)}var _e=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=de(this,t)).measureLengthControl_=e,n.facadeMap_=null,n.measureAreaControl_=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}(t,M.impl.Control),r=t,(n=[{key:"addTo",value:function(e,t){this.facadeMap_=e,t.querySelector("#measurebar-clear-btn").addEventListener("click",this.onClick.bind(this)),this.element=t,e.getMapImpl().addControl(this)}},{key:"onClick",value:function(){this.measureLengthControl_.clear(),this.measureAreaControl_.clear(),this.deactivateOtherBtns()}},{key:"deactivateOtherBtns",value:function(){var e=this.facadeMap_.getControls().filter((function(e){return e instanceof pe}))[0];e&&e.deactivate();var t=this.facadeMap_.getControls().filter((function(e){return e instanceof F}))[0];t&&t.deactivate()}},{key:"destroy",value:function(){this.element.remove(),this.facadeMap_.removeControls(this),this.facadeMap_=null}}])&&me(r.prototype,n),o&&me(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),we=r(531),je=r.n(we);function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pe(n.key),n)}}function Pe(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oe(t)?t:t+""}function Ee(e,t,r){return t=Se(t),function(e,t){if(t&&("object"==Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Te()?Reflect.construct(t,r||[],Se(e).constructor):t.apply(e,r))}function Te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Te=function(){return!!e})()}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}function ke(e,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ke(e,t)}var Ne=function(e){function t(e,r,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=Ee(this,t,[new _e(e.getImpl(),r.getImpl()),t.NAME]),M.utils.isUndefined(_e)&&M.Exception(o("exception.impl_clear")),a.order=n,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(t,M.Control),r=t,(n=[{key:"createView",value:function(e){return M.template.compileSync(je(),{jsonp:!0,vars:{translations:o("text"),order:this.order}})}},{key:"equals",value:function(e){var r=!1;return e instanceof t&&(r=this.name===e.name),r}},{key:"destroy",value:function(){this.getImpl().destroy(),this.impl=null}}])&&Me(r.prototype,n),a&&Me(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}();Ne.NAME="measurebar",Ne.TEMPLATE="measureclear.html";var Ce=r(431),Le=r.n(Ce);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function De(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xe(n.key),n)}}function xe(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ie(t)?t:t+""}function Ae(e,t,r){return t=He(t),function(e,t){if(t&&("object"==Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Re()?Reflect.construct(t,r||[],He(e).constructor):t.apply(e,r))}function Re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Re=function(){return!!e})()}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}function Be(e,t){return Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Be(e,t)}var Qe=function(r){function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=Ae(this,n)).map_=null,e.controls_=[],e.position_=t.position||"TL",e.measureLength_=null,e.measureArea_=null,e.measureClear_=null,e.order=t.order>=-1?t.order:null,e.collapsed_=t.collapsed,void 0===e.collapsed_&&(e.collapsed_=!0),e.collapsible_=t.collapsible,void 0===e.collapsible_&&(e.collapsible_=!0),e.tooltip_=t.tooltip||o("text.tooltip"),e.options=t,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Be(e,t)}(n,M.Plugin),a=n,l=[{key:"getJSONTranslations",value:function(r){return"en"===r||"es"===r?"en"===r?e:t:M.language.getTranslation(r).measurebar}}],(i=[{key:"addTo",value:function(e){this.map_=e,this.measureLength_=new pe(this.order),this.measureArea_=new F(this.order),this.measureClear_=new Ne(this.measureLength_,this.measureArea_,this.order),this.controls_.push(this.measureLength_,this.measureArea_,this.measureClear_),this.panel_=new M.ui.Panel("MeasureBar",{collapsed:this.collapsed_,collapsible:this.collapsible_,tooltip:this.tooltip_,position:M.ui.position[this.position_],className:"m-panel-measurebar",collapsedButtonClass:"measurebar-regla",order:this.order}),this.panel_.addControls(this.controls_),this.map_.addPanels(this.panel_)}},{key:"name",get:function(){return"measurebar"}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position_,"*").concat(this.collapsed_,"*").concat(this.collapsible_,"*").concat(this.tooltip_)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"destroy",value:function(){this.map_.removeControls([this.measureLength_,this.measureArea_,this.measureClear_]),this.map_=null,this.measureLength_=null,this.measureArea_=null,this.measureClear_=null}},{key:"getControls",value:function(){var e=[];return e.push(this.measureArea_,this.measureClear_,this.measureLength_),e}},{key:"equals",value:function(e){return e instanceof n}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(e){e(M.template.compileSync(Le(),{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/measurebar/images/"),translations:{help1:o("textHelp.help1"),help2:o("textHelp.help2"),help3:o("textHelp.help3"),help4:o("textHelp.help4"),help5:o("textHelp.help5"),help6:o("textHelp.help6"),help7:o("textHelp.help7"),help8:o("textHelp.help8"),help9:o("textHelp.help9"),help10:o("textHelp.help10"),help11:o("textHelp.help11"),help12:o("textHelp.help12"),help13:o("textHelp.help13"),help14:o("textHelp.help14"),help15:o("textHelp.help15")}}}))}))}}}])&&De(a.prototype,i),l&&De(a,l),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,i,l}();window.M.plugin||(window.M.plugin={}),window.M.plugin.MeasureBar=Qe})()})();
//# sourceMappingURL=measurebar.ol.min.js.map