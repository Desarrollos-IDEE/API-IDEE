!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=10)}([function(e){e.exports=JSON.parse('{"exception":{"impl":"The implementation used cannot create LocatorControl.","impl_infocatastro":"The implementation used cannot create InfoCatastroControl.","impl_xylocator":"The implementation used cannot create XYLocatorControl.","impl_ignsearchlocator":"The implementation used cannot create IGNSearchLocatorControl.","no_controls":"The Locator plugin needs to activate at least one control.","wrong_coords":"The coordinates entered are not correct.","transforming":"Error performing the transformation.","wrong_values":"Some value entered are not correct. Remember that minutes and seconds must be between 0 and 59 and degrees between 0 and 180.","mapeaerror":"It is not possible to establish a connection with the Cadastre server.","no_province":"You must select a province.","no_mun":"You must select a municipality.","no_polygon":"You must select an polygon.","no_parcel":"You must select a parcel.","json_invalid":"The response is not a valid JSON:","no_refcatastro":"You must enter a cadastral reference.","noInfo":"NO REFERENCES AVAILABLE FOR THESE COORDINATES","noresults":"No results found","no_direction":"No address","error_findjsonp":"Error in the findJSONp service request.","error_candidates":"Error in the candidatesJSONp service request."},"textHelp":{"help1":"The place search extension allows you to find places by coordinates or the other way around, coordinates and places on the map by entering text.","help2":"This extension is customizable via parameters, so the extension can change from one viewer to another.","help3":"The extension is made up of several controls:","help4":"The search control by places. It is a façade of the Cartociudad geocoder (https://www.idee.es/resources/documentos/Cartociudad/CartoCiudad_ServiciosWeb.pdf), which allows two types of searches to be carried out:","help5":"By text, for example, if we want to search for the main street of Pamplona:","help6":"When searching, several alternatives appear. In this case we look for the first one. When we click on option one, it takes us to the street marking the geometry:","help7":"By coordinates, activating the tool to obtain address by point on the map, the cursor will change to a pin. Clicking on a point on the map returns the information associated with that point:","help8":"The next control is the cadastre search and is made up of two tools:","help9":"The first of them allows you to search for a plot by province, municipality, polygon and plot:","help10":"The second allows searching by cadastral reference or consulting the cadastral reference by a point.","help11":"For example, if we want to search for the cadastral reference \'0910001QD3101S\':","help12":"Or the opposite case, if we wanted to know the cadastral reference of a point on the map:","help13":"Finally, the point search control allows you to enter the longitude and latitude of a point and obtain it on the map. For example, for longitude -3.43556 and latitude 40.938274:","help14":"The information relevant to the extension and its possible parameterization is documented in","help15":"The example of use of its parameters can be seen in"},"tooltip":"Find a place","xylocator":"Search by coordinates","geographic":"Geographic","zone":"zone","dms":"DMS","dd":"DD","srs":"Coordinate system","longitude":"Longitude","latitude":"Latitude","locate":"Locate","clean":"Delete","north":"North","south":"South","east":"East","west":"West","infocatastro":"Search parcel/cadastre","plot":"Parcel","searchplot":"Search parcel","searchcadastre":"Search cadastre","province":"Province","selectprov":"Select a province","municipality":"Municipality","selectmuni":"Select a municipality","estate":"Polygon","search":"Search","refCastatro":"Cadastral reference","insertCadastre":"Insert cadastre","notaRef":"Parcel code (first 14 digits). Ex.9977715VK3797F (IGN building)","consultReference":"Consult Reference","exact":"Exact address","aprox":"Approximate address","cadastral_information":"Cadastre information","reference":"Cadastral reference","description":"Description","noReference":"No reference","ignsearch":"Search places","search_direction":"Place name, address or postal code","get_direction":"Get direction at a point on the map","toponimo":"Place name"}')},function(e){e.exports=JSON.parse('{"exception":{"impl":"La implementación usada no puede crear controles LocatorControl.","impl_infocatastro":"La implementación usada no puede crear controles InfoCatastroControl.","impl_xylocator":"La implementación usada no puede crear controles XYLocatorControl.","impl_ignsearchlocator":"La implementación usada no puede crear controles IGNSearchLocatorControl.","no_controls":"El plugin Locator necesita activar al menos un control.","wrong_coords":"Las coordenadas introducidas no son correctas.","transforming":"Error realizando la transformación.","wrong_values":"Algún valor introducido no es correcto. Recuerda que los minutos y los segundos tienen que tener un valor entre 0 y 59 y los grados entre 0 y 180.","mapeaerror":"No es posible establecer la conexión con el servidor de Catastro.","no_province":"Debe seleccionar una provincia.","no_mun":"Debe seleccionar un municipio.","no_polygon":"Debe seleccionar un polígono.","no_parcel":"Debe seleccionar una parcela.","json_invalid":"La respuesta no es un JSON válido:","no_refcatastro":"Debe introducir una referencia catastral.","noInfo":"PARA ESAS COORDENADAS NO HAY REFERENCIA DISPONIBLE","noresults":"No se han encontrado resultados","no_direction":"No existe dirección","error_findjsonp":"Error en la petición del servicio findJSONp.","error_candidates":"Error en la petición del servicio candidatesJSONp."},"textHelp":{"help1":"La extensión de búsqueda de lugares permite encontrar sitios por coordenadas o al revés, coordenadas y sitios en el mapa mediante la introducción de texto.","help2":"Esta extensión es personalizable mediante parámetros, por lo que la extensión puede cambiar de un visualizador a otro.","help3":"La extensión se compone de varios controles:","help4":"El control de búsqueda por lugares. Es una fachada del geocodificador de Cartociudad (https://www.idee.es/resources/documentos/Cartociudad/CartoCiudad_ServiciosWeb.pdf), que permite realizar dos tipos de búsquedas:","help5":"Por texto, por ejemplo, si queremos buscar la Calle mayor de Pamplona:","help6":"Al buscar, nos aparecen varias alternativas. En este caso buscamos la primera. Al hacer click sobre la opción uno, nos lleva a la calle marcando la geometría:","help7":"Por coordenadas, activando la herramienta de obtener dirección por punto del mapa, el cursor nos cambiará a una chincheta. Haciendo click sobre un punto del mapa, nos devuelve la información asociada a ese punto:","help8":"El siguiente control es la búsqueda mediante catastro y se compone de dos herramientas:","help9":"La primera de ellas permite buscar una parcela mediante provincia, municipio, polígono y parcela:","help10":"La segunda permite la búsqueda por referencia catastral o consultar la referencia catastral por un punto.","help11":"Por ejemplo, si queremos buscar la referencia catastral \'0910001QD3101S\':","help12":"O el caso contrario, si quisiéramos saber la referencia catastral de un punto del mapa:","help13":"Por último, el control de búsqueda de un punto, permite introducir la longitud y latitud de un punto y obtenerlo en el mapa. Por ejemplo para longitud -3,43556 y latitud 40,938274 :","help14":"La información relevante a la extensión y su posible parametrización está documentada en","help15":"El ejemplo de uso de sus parámetros puede comprobarse en"},"tooltip":"Buscar un lugar","xylocator":"Buscar por coordenadas","geographic":"Geográficas","zone":"huso","dms":"GMS","dd":"GD","srs":"Sistema de coordenadas","longitude":"Longitud","latitude":"Latitud","locate":"Localizar","clean":"Eliminar","north":"Norte","south":"Sur","east":"Este","west":"Oeste","infocatastro":"Buscar parcela/catastro","plot":"Parcela","searchplot":"Buscar parcela","searchcadastre":"Buscar catastro","province":"Provincia","selectprov":"Seleccione provincia","municipality":"Municipio","selectmuni":"Seleccione municipio","estate":"Polígono","search":"Buscar","refCastatro":"Referencia catastral","insertCadastre":"Insertar catastro","notaRef":"Código de parcela (14 primeros dígitos). Ej.9977715VK3797F (edificio del IGN)","consultReference":"Consultar Referencia","exact":"Dirección exacta","aprox":"Dirección aproximada","cadastral_information":"Información catastral","reference":"Referencia catastral","description":"Descripción","noReference":"No hay referencia","ignsearch":"Buscar por lugares","search_direction":"Topónimo, dirección o código postal","get_direction":"Obtener dirección en un punto del mapa","toponimo":"Toponimo"}')},function(e,t){e.exports='{{#if noresults}}\r\n<p class="m-ignsearchlocator-noresults">{{translations.noresults}}</p>\r\n{{else}}\r\n<ul id="m-ignsearchlocator-results-list">\r\n    {{#each places}}\r\n        {{#if this.address}}\r\n            {{#printType this.type this.address this.id this.municipality this.cps}}\r\n            {{/printType}}\r\n        {{else}}\r\n            {{#printType this.type this.title this.id this.municipality this.cps}}\r\n            {{/printType}}\r\n        {{/if}}\r\n    {{/each}}\r\n</ul>\r\n{{/if}}'},function(e,t){e.exports='<div id="m-ignsearch-panel">\r\n    <input type="text" tabindex="0" id="m-ignsearchlocator-search-input" class="m-input-search" autocomplete="off" title="{{placeholder}}" placeholder="{{placeholder}}" />\r\n    {{#if reverse}}\r\n    <button type="button" tabindex="0" id="m-ignsearchlocator-locate-button" title="{{translations.get_direction}}">\r\n        <i class="locator-icon-locate"></i>\r\n    </button>\r\n    {{/if}}\r\n    <button type="button" tabindex="0" id="m-ignsearchlocator-clean-button" title="{{translations.clean}}">\r\n        <i class="locator-icon-remove"></i> {{translations.clean}}\r\n    </button>\r\n    <div id="m-ignsearchlocator-results">\r\n        \x3c!-- Here goes the list of search results --\x3e\r\n    </div>\r\n</div>'},function(e,t){e.exports='<div id="m-infocatastro-panel">\n  <div tabindex="0" role="tablist" aria-label="{{translations.plot}}" class="m-search-tabs">\n    \x3c!-- <input tabindex="0" type="radio" name="tabset" id="tab-search-parcela" aria-controls="m-search-tab-parcela" checked> --\x3e\n    <label role="tab" aria-controls="m-search-tab-parcela" id="tab-search-parcela" tabindex="0" aria-selected="true">{{translations.searchplot}}</label>\n    \x3c!-- <input tabindex="0" type="radio" name="tabset" id="tab-search-catastro" aria-controls="m-search-tab-catastro"> --\x3e\n    <label role="tab" aria-controls="m-search-tab-catastro" id="tab-search-catastro" tabindex="0" aria-selected="false">{{translations.searchcadastre}}</label>\n    <div class="m-search-tab-content">\n      <section id="m-search-tab-parcela" class="m-search-tab-panels" role="tabpanel" aria-expanded="true">\n        <div class="m-infocatastro-datas">\n          <div id="m-searchParams-container">\n            <div id="m-infocatastro-coordinatesSystemParcela">\n              <b>\n                <p tabindex="0" role="text" id="m-provin" class="parcela--input">{{translations.province}}:</p>\n              </b>\n              <select role="select" tabindex="0" aria-label="{{translations.selectprov}}" id="m-searchParamsProvincia-select" name="srs" class="dropdown">\n                <option value="0">{{translations.selectprov}}</option>\n                <option value="02">ALBACETE</option>\n                <option value="03">ALICANTE/ALACANT</option>\n                <option value="04">ALMERÍA</option>\n                <option value="01">ARABA/ÁLAVA</option>\n                <option value="33">ASTURIAS</option>\n                <option value="05">ÁVILA</option>\n                <option value="06">BADAJOZ</option>\n                <option value="07">BALEARS, ILLES</option>\n                <option value="08">BARCELONA</option>\n                <option value="48">BIZKAIA</option>\n                <option value="09">BURGOS</option>\n                <option value="10">CÁCERES</option>\n                <option value="11">CÁDIZ</option>\n                <option value="39">CANTABRIA</option>\n                <option value="12">CASTELLÓN/CASTELLÓ</option>\n                <option value="13">CIUDAD REAL</option>\n                <option value="14">CÓRDOBA</option>\n                <option value="15">CORUÑA, A</option>\n                <option value="16">CUENCA</option>\n                <option value="20">GIPUZKOA</option>\n                <option value="17">GIRONA</option>\n                <option value="18">GRANADA</option>\n                <option value="19">GUADALAJARA</option>\n                <option value="21">HUELVA</option>\n                <option value="22">HUESCA</option>\n                <option value="23">JAÉN</option>\n                <option value="24">LEÓN</option>\n                <option value="25">LLEIDA</option>\n                <option value="27">LUGO</option>\n                <option value="28">MADRID</option>\n                <option value="29">MÁLAGA</option>\n                <option value="30">MURCIA</option>\n                <option value="31">NAVARRA</option>\n                <option value="32">OURENSE</option>\n                <option value="34">PALENCIA</option>\n                <option value="35">PALMAS, LAS</option>\n                <option value="36">PONTEVEDRA</option>\n                <option value="26">RIOJA, LA</option>\n                <option value="37">SALAMANCA</option>\n                <option value="38">SANTA CRUZ DE TENERIFE</option>\n                <option value="40">SEGOVIA</option>\n                <option value="41">SEVILLA</option>\n                <option value="42">SORIA</option>\n                <option value="43">TARRAGONA</option>\n                <option value="44">TERUEL</option>\n                <option value="45">TOLEDO</option>\n                <option value="46">VALENCIA/VALÈNCIA</option>\n                <option value="47">VALLADOLID</option>\n                <option value="49">ZAMORA</option>\n                <option value="50">ZARAGOZA</option>\n                <option value="51">CEUTA</option>\n                <option value="52">MELILLA</option>\n              </select>\n            </div>\n            <div id="m-infocatastro-coordinatesSystemParcela">\n              <b>\n                <p id="m-munici" tabindex="0" role="text" class="parcela--input">{{translations.municipality}}:</p>\n              </b>\n              <select id="m-searchParamsMunicipio-select" name="Municipios" class="dropdown" aria-label="{{translations.selectmuni}}">\n                <option value="0">{{translations.selectmuni}}</option>\n              </select>\n            </div>\n            <div id="m-infocatastro-estatePlot">\n              <b>\n                <p type="text" tabindex="0" class="parcela--input" style="width: 60px">{{translations.estate}}:</p>\n              </b>\n              <input type="text" tabindex="0" id="m-searchParamsPoligono-input" style="color:black">\n              <b>\n                <p type="text" tabindex="0" class="parcela--input" style="width: auto">{{translations.plot}}:</p>\n              </b>\n              <input type="text" tabindex="0" id="m-searchParamsParcela-input" style="color:black">\n            </div>\n          </div>\n        </div>\n        <div class="button">\n          <button class="represent" id="m-infocatastro-searchParams" style="margin-right:10px" title="{{translations.search}}">\n            <i class="locator-icon-position"></i> {{translations.search}}\n          </button>\n          <button class="represent" id="m-infocatastro-parcela-limpiar" title="{{translations.clean}}">\n            <i class="locator-icon-remove"></i> {{translations.clean}}\n          </button>\n        </div>\n      </section>\n      <section id="m-search-tab-catastro" class="m-search-tab-panels" role="tabpanel" aria-expanded="false">\n        <div class="m-infocatastro-datas">\n          <div id="m-searchParams-container">\n            <div id="m-infocatastro-coordinatesSystemRefCatastral" tabindex="0" aria-label="{{translations.refCastatro}}">\n              <b>\n                <p tabindex="0" role="text" class="refCastastrl--input">{{translations.refCastatro}}:</p>\n              </b>\n              <input type="text" tabindex="0" aria-label="{{translations.insertCadastre}}" id="m-refCatastral-input" style="color:black; width: 97% !important;"\n              maxlength="20">\n              <button type="button" tabindex="0" aria-label="{{translations.search}}" class="represent" id="m-infocatastro-refCatastral" style="margin-bottom: 5px">\n                <i class="locator-icon-catastro"></i> {{translations.search}}\n              </button>\n              <br>\n              <i tabindex="0">\n                <p tabindex="0" role="text" aria-label="{{translations.notaRef}}" id="m-informa" class="parcela--input"\n                style="width: 0px !important; display: contents; font-size: 13px; font-family: auto;">\n                {{translations.notaRef}}</p>\n              </i>\n            </div>\n          </div>\n        </div>\n        <div class="button">\n          <button type="button" tabindex="0" aria-label="{{translations.consultReference}}" class="represent" id="m-infocatastro-consulRef" style="margin-left: 5px">\n            <i class="locator-icon-info"></i> {{translations.consultReference}}\n          </button>\n          <button class="represent" id="m-infocatastro-catastro-limpiar" title="{{translations.clean}}">\n            <i class="locator-icon-remove"></i> {{translations.clean}}\n          </button>\n        </div>\n      </section>\n    </div>\n  </div>\n</div>'},function(e,t){e.exports='<div aria-label="Plugin Locator" role="menuitem" id="div-contenedor-locator" class="m-control m-container m-locator">\n    {{#if showTitle}}\n        <div role="heading" tabindex="0" id="m-locator-title">{{translations.headertitle}}</div>\n    {{/if}}\n    <div id="m-locator-previews">\n        {{#if byPlaceAddressPostal}}\n            <div tabindex="0" id="m-locator-ignsearch" title="{{translations.ignsearch}}" class="locator-icon-ignsearch"></div>\n        {{/if}}\n        {{#if byParcelCadastre}}\n            <div tabindex="0" id="m-locator-infocatastro" title="{{translations.infocatastro}}" class="locator-icon-catastro"></div>\n        {{/if}}\n        {{#if byCoordinates}}\n            <div tabindex="0" id="m-locator-xylocator" title="{{translations.xylocator}}" class="locator-icon-posicion3"></div>\n        {{/if}}\n    </div>\n</div>'},function(e,t){e.exports='<div id="m-xylocator-panel">\n  <div class="m-xylocator-datas">\n    <div id="m-xylocator-coordinatesSystem">\n      <div id="m-xylocator-selector-title">\n        <span>{{translations.srs}}:</span>\n        {{#if hasHelp}}\n          <div class="m-xylocator-help-button" title="EPSG">\n            <a href="{{helpUrl}}" target="_blank"><i class="locator-icon-help"></i></a>\n          </div>\n        {{/if}}\n      </div>\n      <select name="srs" id="m-xylocator-srs" class="dropdown">\n        {{#if projections}}\n          {{#each projections}}\n            <option class="m-xylocator-srs-option" data-units="{{this.units}}" value="{{this.code}}">{{this.title}}</option>\n          {{/each}}\n        {{else}}\n          <option class="m-xylocator-srs-option" data-units="d" value="EPSG:4258" option="selected">ETRS89\n            {{translations.geographic}} (4258) {{translations.dd}}</option>\n          <option class="m-xylocator-srs-option" data-units="d" value="EPSG:4326">WGS84 {{translations.geographic}} (4326)\n            {{translations.dd}}</option>\n          <option class="m-xylocator-srs-option" data-units="dms" value="EPSG:4258">ETRS89\n            {{translations.geographic}} (4258) {{translations.dms}}</option>\n          <option class="m-xylocator-srs-option" data-units="dms" value="EPSG:4326">WGS84 {{translations.geographic}}\n            (4326) {{translations.dms}}</option>\n          <option class="m-xylocator-srs-option" data-units="m" value="EPSG:3857">WGS84 Pseudo Mercator (3857)</option>\n          <option class="m-xylocator-srs-option" data-units="m" value="EPSG:25831">ETRS89 UTM {{translations.zone}} 31N\n            (25831)</option>\n          <option class="m-xylocator-srs-option" data-units="m" value="EPSG:25830">ETRS89 UTM {{translations.zone}} 30N\n            (25830)</option>\n          <option class="m-xylocator-srs-option" data-units="m" value="EPSG:25829">ETRS89 UTM {{translations.zone}} 29N\n            (25829)</option>\n          <option class="m-xylocator-srs-option" data-units="m" value="EPSG:25828">ETRS89 UTM {{translations.zone}} 28N\n            (25828)</option>\n        {{/if}}\n      </select>\n    </div>\n    <div id="m-xylocator-utm" style="display:none;">\n      <span>X:</span>\n      <input type="text" name="UTM-X" id="UTM-X" placeholder="234798,13" style="color:black"><br />\n      <span>Y:</span>\n      <input type="text" name="UTM-Y" id="UTM-Y" placeholder="4154570,15" style="color:black">\n    </div>\n    <div id="m-xylocator-dms" style="display:none;">\n      <p>{{translations.longitude}}:</p>\n      <div style="margin-bottom: -0.8rem;">\n        <div>\n          <input type="number" name="LONHH" id="LONHH" value="0" min="0" max="180" style="color:black"><span>º</span>\n        </div>\n        <div>\n          <input type="number" name="LONMM" id="LONMM" value="0" min="0" max="59" style="color:black"><span>\'</span>\n        </div>\n        <div>\n          <input type="number" name="LONSS" id="LONSS" value="0" min="0" max="59.9999"\n            style="color:black"><span>\'\'</span>\n        </div>\n        <div class="m-xylocator-dms-radio">\n          <table>\n            <tbody>\n              <tr>\n                <td><input type="radio" name="LONDIR" style="color:black" value="east" checked></td>\n                <td>{{translations.east}}</td>\n              </tr>\n              <tr>\n                <td><input type="radio" name="LONDIR" style="color:black" value="west"></td>\n                <td>{{translations.west}}</td>\n              </tr>\n              </tbdoy>\n          </table>\n        </div>\n      </div>\n      <p>{{translations.latitude}}:</p>\n      <div style="margin-bottom: -0.8rem;">\n        <div>\n          <input type="number" name="LATHH" id="LATHH" value="0" min="0" max="180" style="color:black"><span>º</span>\n        </div>\n        <div>\n          <input type="number" name="LATMM" id="LATMM" value="0" min="0" max="59" style="color:black"><span>\'</span>\n        </div>\n        <div>\n          <input type="number" name="LATSS" id="LATSS" value="0" min="0" max="59.9999"\n            style="color:black"><span>\'\'</span>\n        </div>\n        <div class="m-xylocator-dms-radio">\n          <table>\n            <tbody>\n              <tr>\n                <td><input type="radio" name="LATDIR" style="color:black" value="north" checked></td>\n                <td>{{translations.north}}</td>\n              </tr>\n              <tr>\n                <td><input type="radio" name="LATDIR" style="color:black" value="south"></td>\n                <td>{{translations.south}}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n    <div id="m-xylocator-latlon">\n      <span>{{translations.longitude}}:</span>\n      <input type="text" name="LON" id="LON" placeholder="-6,0" style="color:black"><br />\n      <span>{{translations.latitude}}:</span>\n      <input type="text" name="LAT" id="LAT" placeholder="37,5" style="color:black">\n    </div>\n    <div class="button">\n      <button class="represent" id="m-xylocator-loc" title="{{translations.locate}}">\n        <i class="locator-icon-coordinates"></i> {{translations.locate}}\n      </button>\n      <button class="represent" id="m-xylocator-limpiar" title="{{translations.clean}}">\n        <i class="locator-icon-remove"></i> {{translations.clean}}\n      </button>\n    </div>\n  </div>\n</div>'},function(e,t,o){e.exports='<div>\n   <h2 style="text-align: center; color: #fff; background-color: #364b5f; padding: 8px 10px;">LOCATOR <img style="vertical-align: bottom; filter: invert(100%);" src="'+o(9)+'" width="30" height="30"></h2>\n   <div>\n      <p>{{translations.help1}}</p>\n      <p>{{translations.help2}}</p>\n      <img src="{{urlImages}}/locator_0.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help3}}</p>\n      <p>{{translations.help4}}</p>\n      <p>{{translations.help5}}</p>\n      <img src="{{urlImages}}/locator_1.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help6}}</p>\n      <img src="{{urlImages}}/locator_2.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help7}}</p>\n      <img src="{{urlImages}}/locator_3.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help8}}</p>\n      <p>{{translations.help9}}</p>\n      <img src="{{urlImages}}/locator_4.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help10}}</p>\n      <p>{{translations.help11}}</p>\n      <img src="{{urlImages}}/locator_5.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help12}}</p>\n      <img src="{{urlImages}}/locator_6.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help13}}</p>\n      <img src="{{urlImages}}/locator_7.png" style="max-width:70%; margin: 0 auto; display: block">\n      <p>{{translations.help14}}: <a tabindex="0" href="https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/locator" target="_blank">https://github.com/IGN-CNIG/API-CNIG/tree/master/api-ign-js/src/plugins/locator</a></p>\n      <p>{{translations.help15}}: <a tabindex="0" href="https://componentes.cnig.es/api-core/locator.jsp?language=es" target="_blank">https://componentes.cnig.es/api-core/locator.jsp?language=es</a></p>\n   </div>\n</div>\n\n'},function(e,t,o){},function(e,t){e.exports="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMjQiIGhlaWdodD0iMTAyNCIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCI+Cjx0aXRsZT48L3RpdGxlPgo8ZyBpZD0iaWNvbW9vbi1pZ25vcmUiPgo8L2c+CjxwYXRoIGQ9Ik04MzIgOTZjLTg4LjM3NiAwLTE2MCA3MS42MjYtMTYwIDE2MCAwIDIzLjg3NiA1LjI1IDQ2LjU2MiAxNC42MjQgNjYuODc2bDE0NS4zNzYgMjg1LjEyNCAxNDUuMzc2LTI4NS4xMjZjOS4zNzQtMjAuMzEyIDE0LjYyNC00Mi45OTggMTQuNjI0LTY2Ljg3NCAwLTg4LjM3NC03MS42MjQtMTYwLTE2MC0xNjB6TTgzMiAzNTJjLTUzIDAtOTYtNDMtOTYtOTZzNDMtOTYgOTYtOTYgOTYgNDMgOTYgOTYtNDMgOTYtOTYgOTZ6TTg3OS44NzYgNjU0LjkzOGw1OC4yNSAxMTYuNDM4LTE0Ny42ODggNzMuODEyLTQ5LjUtMjQ3LjYyNCA5LjE4OC05LjE4OC0zMC41LTYwLTE1LjYyNiAxNS42MjQtMTkyLTEyOC0xOTIgMTI4LTEyOC0xMjgtMTkyIDM4NCAyNTYgMTI4IDI1Ni0xMjggMjU2IDEyOCAyNTYtMTI4LTEwOC0yMTUuOTM4LTM2LjEyNCA3MC44NzZ6TTIzMy41IDg0NS4xODhsLTE0Ny42MjYtNzMuODEyIDEyMy42MjYtMjQ3LjM3NiA3My41NjIgNzMuNTYyLTQ5LjU2MiAyNDcuNjI2ek00ODAgNzQ0LjQzOGwtMTc5IDg5LjUgNDYuMjUtMjMxLjE4OCAxMzIuNzUtODguNXYyMzAuMTg4ek01NDQgNzQ0LjQzOHYtMjMwLjE4OGwxMzIuNjg4IDg4LjUgNDYuMjUgMjMxLjE4OC0xNzguOTM4LTg5LjV6Ij48L3BhdGg+Cjwvc3ZnPgo="},function(e,t,o){"use strict";o.r(t);var n=o(3),r=o.n(n),a=o(2),i=o.n(a);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function u(e,t,o){return t=p(t),function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,o||[],p(e).constructor):t.apply(e,o))}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var h,m=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u(this,t)).facadeMap_=e,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,M.impl.Control),o=t,(n=[{key:"readFromWKT",value:function(e,t){var o=(new ol.format.WKT).readFeature(e,{dataProjection:"EPSG:4326",featureProjection:this.facadeMap_.getProjection().code}),n=JSON.parse(t);return delete n.geom,o.setId("f".concat((new Date).getTime())),o.setProperties(n),this.wrapComplexFeature(o),o}},{key:"wrapComplexFeature",value:function(e){var t=e.getGeometry();if(t.getType()===M.geom.wkt.type.POLYGON||t.getType()===M.geom.wkt.type.MULTI_POLYGON){var o;o=t.getType()===M.geom.wkt.type.POLYGON?t.getInteriorPoint():t.getInteriorPoints();var n=new ol.geom.GeometryCollection([o,t]);e.setGeometry(n)}}},{key:"reprojectReverse",value:function(e,t,o){return ol.proj.getTransform(t,o)(e)}},{key:"reproject",value:function(e,t){var o=ol.proj.get(e),n=ol.proj.get(this.facadeMap_.getProjection().code),r=ol.proj.transform(t,o,n);return r=[this.normalizeNumber(t[0],r[0]),this.normalizeNumber(t[1],r[1])]}},{key:"normalizeNumber",value:function(e,t){var o=e;return 0!==e&&(o=parseFloat(t.toFixed(9))),o}},{key:"containsExtentView",value:function(e){var t=this.facadeMap_.getMapImpl().getSize(),o=this.facadeMap_.getMapImpl().getView().calculateExtent(t);return ol.extent.containsExtent(o,e)}}])&&l(o.prototype,n),r&&l(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,r}(),y=o(0),f=o(1),v={en:y,es:f},g=function(){var e="es";return"function"==typeof M.language.getLang&&(e=M.language.getLang()),e},b=function(e){return"es"===e||"en"===e?v[e]:M.language.getTranslation(e).locator},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g(),o=b(t),n="";return M.utils.isNullOrEmpty(o)?console.warn("The translation '".concat(t,"' has not been defined.")):n=e.split(".").reduce((function(e,t){return e[t]}),o),n};function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}function x(e,t,o){return t=_(t),function(e,t){if(t&&("object"==P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,o||[],_(e).constructor):t.apply(e,o))}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(e,o,n,r,a,i,s){var l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M.utils.isUndefined(m)&&M.exception(S("exception.impl_ignsearchlocator")),(l=x(this,t,[new m(e),"IGNSearchLocatorImpl"])).zoom=o,l.maxResults=r.maxResults||20,l.noProcess=r.noProcess,l.countryCode=r.countryCode||"es",l.reverse=!!M.utils.isUndefined(r.reverse)||r.reverse,l.resultVisibility=!!M.utils.isUndefined(r.resultVisibility)||r.resultVisibility,l.urlCandidates=r.urlCandidates||"https://www.cartociudad.es/geocoder/api/geocoder/candidatesJsonp",l.urlFind=r.urlFind||"https://www.cartociudad.es/geocoder/api/geocoder/findJsonp",l.urlReverse=r.urlReverse||"https://www.cartociudad.es/geocoder/api/geocoder/reverseGeocode",l.pointStyle=n,l.requestStreet=r.requestStreet&&r.requestStreet.replace(/\^/g,"&")||"";var c=r.geocoderCoords;return M.utils.isString(c)&&(c=c.split(","),c=[Number.parseFloat(c[0]),Number.parseFloat(c[1])]),l.geocoderCoords=c||[],l.reverseActivated=!1,l.useProxy=a,l.statusProxy=i,l.positionPlugin=s,l.map=e,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,M.Control),function(e,t,o){return t&&w(e.prototype,t),o&&w(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"initializateAddress",value:function(e){var t=this;if((this.requestStreet&&this.requestStreet.length>0||this.geocoderCoords&&2===this.geocoderCoords.length)&&this.active(e),this.requestStreet&&this.requestStreet.length>0&&(M.proxy(this.useProxy),M.remote.get(this.requestStreet).then((function(e){var o=e.text.substring(9,e.text.length-1);t.createGeometryStyles(),t.drawGeocoderResult(o)})).catch(),M.proxy(this.statusProxy)),this.geocoderCoords&&2===this.geocoderCoords.length){var o=this.getImpl().reproject("EPSG:4326",this.geocoderCoords);this.showReversePopUp({coord:o,fake:!0},!0)}}},{key:"active",value:function(e){this.html_=e;var t=this.html_.querySelector("#m-locator-ignsearch").classList.contains("activated");if(this.deactive(),!t){"TC"===this.positionPlugin&&(document.querySelector(".m-plugin-locator").classList.remove("m-plugin-locator-tc"),document.querySelector(".m-plugin-locator").classList.add("m-plugin-locator-tc-withpanel")),this.html_.querySelector("#m-locator-ignsearch").classList.add("activated");var o=M.template.compileSync(r.a,{vars:{reverse:this.reverse,placeholder:S("search_direction"),translations:{search_direction:S("search_direction"),get_direction:S("get_direction"),clean:S("clean")}}});document.querySelector("#div-contenedor-locator").appendChild(o),this.resultsBox=this.html_.querySelector("#m-ignsearch-panel>#m-ignsearchlocator-results"),this.searchInput=this.html_.querySelector("#m-ignsearch-panel>#m-ignsearchlocator-search-input"),this.addEvents()}}},{key:"deactive",value:function(){this.html_.querySelector("#m-locator-ignsearch").classList.remove("activated");var e=this.html_.querySelector("#m-ignsearch-panel");e&&(this.clearResults(),document.querySelector("#div-contenedor-locator").removeChild(e))}},{key:"addEvents",value:function(){var e=this;this.html_.querySelector("#m-ignsearch-panel>#m-ignsearchlocator-search-input").addEventListener("keyup",(function(t){return e.createTimeout(t)})),this.html_.querySelector("#m-ignsearch-panel>#m-ignsearchlocator-search-input").addEventListener("click",(function(){return e.openRecentsResults()})),this.reverse&&(this.html_.querySelector("#m-ignsearch-panel>#m-ignsearchlocator-search-input").style.width="160px",this.html_.querySelector("#m-ignsearch-panel>#m-ignsearchlocator-locate-button").addEventListener("click",this.activateDeactivateReverse.bind(this)),this.clickReverseEvent=this.map.on(M.evt.CLICK,(function(t){return e.showReversePopUp(t)}))),this.html_.querySelector("#m-ignsearch-panel>#m-ignsearchlocator-clean-button").addEventListener("click",(function(){return e.clearResults()}))}},{key:"activateDeactivateReverse",value:function(){this.reverseActivated?(this.reverseActivated=!1,this.html_.querySelector("#m-ignsearchlocator-locate-button").style.color="#7A7A73",document.removeEventListener("keyup",this.checkEscKey),document.getElementsByTagName("body")[0].style.cursor="auto"):(this.invokeEscKey(),this.reverseActivated=!0,this.html_.querySelector("#m-ignsearchlocator-locate-button").style.color="#71a7d3",document.addEventListener("keyup",this.checkEscKey.bind(this)),document.getElementsByTagName("body")[0].style.cursor="url(".concat(M.utils.concatUrlPaths([M.config.THEME_URL,"/img/pushpin.svg"]),") 0 20, auto"))}},{key:"invokeEscKey",value:function(){try{document.dispatchEvent(new window.KeyboardEvent("keyup",{key:"Escape",keyCode:27,code:"",which:69,shiftKey:!1,ctrlKey:!1,metaKey:!1}))}catch(e){console.error(e)}}},{key:"checkEscKey",value:function(e){"Escape"===e.key&&(this.reverseActivated=!1,this.html_.querySelector("#m-ignsearchlocator-locate-button").style.color="#7A7A73",document.removeEventListener("keyup",this.checkEscKey),document.getElementsByTagName("body")[0].style.cursor="auto")}},{key:"showReversePopUp",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.reverseActivated||o){var n=this.map.getProjection().code,r="EPSG:4258",a=this.getImpl().reprojectReverse([e.coord[0],e.coord[1]],n,r),i="lon=".concat(a[0],"&lat=").concat(a[1]),s="".concat(this.urlReverse,"?").concat(i),l=e.coord;this.geocoderCoords=a;var c=[a[1],a[0]],u="";M.proxy(this.useProxy),M.remote.get(s).then((function(o){if(o.text){var n=JSON.parse(o.text);u=t.createFullAddress(n)}else u="";t.showPopUp(u,l,c,null,e,!1)})),M.proxy(this.statusProxy)}}},{key:"createFullAddress",value:function(e){var t=null===e.tip_via||void 0===e.tip_via?"":e.tip_via,o=null===e.address||void 0===e.address?"":e.address,n=null===e.portalNumber||void 0===e.portalNumber||0===e.portalNumber?"":e.portalNumber,r=null===e.muni||void 0===e.muni?"":e.muni,a=null===e.province||void 0===e.province?"":e.province,i=null===e.extension||void 0===e.extension?"":e.extension.trim(),s="".concat(t," ").concat(o," ").concat(n);return M.utils.isNullOrEmpty(i)||(s+=" ".concat(i)),"".concat(s,", ").concat(r.toUpperCase(),", ").concat(a.toUpperCase())}},{key:"createTimeout",value:function(e){var t=this;clearTimeout(h),h=setTimeout((function(){return t.searchInputValue(e)}),500)}},{key:"openRecentsResults",value:function(){var e=this;if(!this.html_.querySelector("#m-ignsearch-panel>#m-ignsearchlocator-search-input").value&&!this.html_.querySelector("#m-ignsearchlocator-results-list")){var t=window.localStorage.getItem("recents");if(t&&t.length>0){var o=M.template.compileSync(i.a,{vars:{noresults:!1,places:JSON.parse(t),translations:{noresults:S("exception.noresults")}}});o.querySelectorAll("li").forEach((function(t){t.addEventListener("click",(function(){e.goToLocation(t,!0)}))})),this.resultsBox.appendChild(o)}}}},{key:"searchInputValue",value:function(e){var t=this,o=e.target.value.replace(","," ");this.searchValue=o,this.resultsBox.innerHTML="",o.length>2&&(this.resultsBox.classList.add("locator-icon-spinner"),this.nomenclatorCandidates=[],this.geocoderCandidates=[],this.nomenclatorFinished=!1,this.candidatesFinished=!1,this.getCandidatesData(o,this.geocoderCandidates).then((function(){t.candidatesFinished=!0,t.showCandidatesResults()})))}},{key:"getCandidatesData",value:function(e,t){var o=this,n=window.encodeURIComponent(e);return new Promise((function(e){var r="q=".concat(n,"&limit=").concat(o.maxResults,"&no_process=").concat(o.noProcess);r+="&countrycode=".concat(o.countryCode,"&autocancel=true");var a="".concat(o.urlCandidates,"?").concat(r);M.proxy(o.useProxy),M.remote.get(a).then((function(o){if(404===o.code||500===o.code)M.dialog.error(S("exception.error_candidates"));else for(var n=JSON.parse(o.text.substring(9,o.text.length-1)),r=0;r<n.length;r+=1)t.push(n[r]);e()})),M.proxy(o.statusProxy)}))}},{key:"showCandidatesResults",value:function(){var e=this;this.allCandidates=[];for(var t=0;t<this.geocoderCandidates.length;t+=1)this.allCandidates.push(this.geocoderCandidates[t]);this.resultsBox.innerHTML="",this.resultsBox.classList.remove("locator-icon-spinner");var o=M.template.compileSync(i.a,{vars:{noresults:0===this.allCandidates.length&&this.nomenclatorFinished&&this.candidatesFinished,places:this.allCandidates,translations:{noresults:S("exception.noresults")}}});this.allCandidates.length>0&&o.querySelectorAll("li").forEach((function(t){t.addEventListener("click",(function(){e.goToLocation(t)}))}));this.resultsBox.appendChild(o)}},{key:"goToLocation",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentElement=e;var n=e.querySelector("#info").innerHTML;this.html_.querySelector("#m-ignsearchlocator-search-input").value=n;var r=o?JSON.parse(window.localStorage.getItem("recents")):this.allCandidates,a=r.filter((function(e){return e.id===t.currentElement.getAttribute("id")}))[0];this.setRecents(a),this.createGeometryStyles(),Object.prototype.hasOwnProperty.call(a,"address")?this.getFindData(a).then((function(e){e&&(t.drawGeocoderResult(e),e.includes('"tip_via":null')&&(e.includes('"type":"Municipio"')||e.includes('"type":"municipio"')||e.includes('"type":"Provincia"')||e.includes('"type":"provincia"')||e.includes('"type":"comunidad autonoma"'))&&t.map.removePopup())})):this.map.removePopup(),this.resultsBox.innerHTML=""}},{key:"setRecents",value:function(e){var t=JSON.parse(window.localStorage.getItem("recents"));t&&0!==t.length?this.checkDuplicateRecent(e)||(5===t.length?(t.pop(),t.unshift(e)):t.unshift(e)):t=[e],window.localStorage.setItem("recents",JSON.stringify(t))}},{key:"checkDuplicateRecent",value:function(e){var t=JSON.parse(window.localStorage.getItem("recents")),o=!1;return t.forEach((function(t){t.id===e.id&&(o=!0)})),o}},{key:"createGeometryStyles",value:function(){"pinAzul"===this.pointStyle?this.point=new M.style.Point({radius:5,icon:{src:M.utils.concatUrlPaths([M.config.THEME_URL,"/img/marker.svg"]),scale:1.4,fill:{color:"#71a7d3"},stroke:{width:30,color:"white"},anchor:[.5,1]}}):"pinRojo"===this.pointStyle?this.point=new M.style.Point({radius:5,icon:{src:M.utils.concatUrlPaths([M.config.THEME_URL,"/img/pinign.svg"]),anchor:[.5,1]}}):"pinMorado"===this.pointStyle&&(this.point=new M.style.Point({radius:5,icon:{src:M.utils.concatUrlPaths([M.config.THEME_URL,"/img/m-pin-24.svg"]),anchor:[.5,1]}})),this.simple=new M.style.Polygon({fill:{color:"black",opacity:0}})}},{key:"zoomInLocation",value:function(e,t,o){var n=this;if(this.html_&&(this.resultsList=this.html_.querySelector("#m-ignsearchlocator-results-list")),this.clickedElementLayer instanceof M.layer.Vector)if("n"===e&&"Point"===t)this.clickedElementLayer.calculateMaxExtent().then((function(e){n.map.setBbox(e),n.map.setZoom(o),n.fire("ignsearchlocator:entityFound",[e])}));else{var r=this.clickedElementLayer.getImpl().getOL3Layer().getSource().getExtent();this.map.setBbox(r),this.map.setZoom(o),this.getImpl().containsExtentView(r)||this.map.setBbox(r),this.fire("ignsearchlocator:entityFound",[r])}}},{key:"getFindData",value:function(e){var t=this;return new Promise((function(o){var n="&id=".concat(e.id),r="&type=".concat(e.type),a=0!==e.portalNumber&&void 0!==e.portalNumber?"&portal=".concat(e.portalNumber):"",i=0!==e.extension&&void 0!==e.extension?"&extension=".concat(e.extension):"",s=""!==e.tip_via?"&tip_via=".concat(window.encodeURIComponent(e.tip_via)):"",l=e.address;if(l.includes("(")){var c=l.indexOf("(");l=l.substring(0,c)}l=window.encodeURIComponent(l);var u="".concat(r).concat(s).concat(n).concat(a).concat(i),p="".concat(t.urlFind,"?q=").concat(l).concat(u);t.urlParse=p,t.requestStreet=p,M.proxy(t.useProxy),M.remote.get(p).then((function(e){if(404===e.code||500===e.code)M.dialog.error(S("exception.error_findjsonp")),o();else{var t=e.text.substring(9,e.text.length-1);o(t)}})),M.proxy(t.statusProxy)}))}},{key:"drawGeocoderResult",value:function(e){var t=this;this.map.removeLayers(this.clickedElementLayer);var o=e,n=JSON.parse(o),r=this.getImpl().readFromWKT(n.geom,o),a=M.impl.Feature.olFeature2Facade(r),i=JSON.parse(o);this.coordinates="".concat(i.lat,", ").concat(i.lng),this.clickedElementLayer=new M.layer.GeoJSON({name:"searchresult",source:{type:"FeatureCollection",features:[]}},{displayInLayerSwitcher:!1}),this.clickedElementLayer.displayInLayerSwitcher=!1;var s=a.getGeometry().type;if(this.clickedElementLayer.on(M.evt.LOAD,(function(){t.clickedElementLayer.addFeatures(a),t.zoomInLocation("g",s,t.zoom)})),this.map.addLayers(this.clickedElementLayer),"Point"===s&&this.clickedElementLayer.setStyle(this.point),(s.indexOf("Polygon")>-1||s.indexOf("Collection")>-1)&&this.clickedElementLayer.setStyle(new M.style.Polygon({fill:{color:"#3399CC",opacity:0},stroke:{color:"#3399CC",width:2}})),this.clickedElementLayer.setZIndex(1e17),this.resultVisibility||this.clickedElementLayer.setStyle(this.simple),"callejero"===i.type||"portal"===i.type){var l=this.createFullAddress(i),c=[i.lat,i.lng],u=i.state;setTimeout((function(){t.showSearchPopUp(l,c,u)}),300)}else void 0!==this.popup&&this.map.removePopup(this.popup)}},{key:"showSearchPopUp",value:function(e,t,o){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=this.map.getProjection().code,i="EPSG:4326",s=this.getImpl().reprojectReverse([t[1],t[0]],i,a);n=S(1!==o?"aprox":"exact"),this.showPopUp(e,s,t,n,r)}},{key:"showPopUp",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],i={content:"",title:""};null!==n&&(i.content+="<div><b>".concat(n,"</b></div>")),i.content+="<div><b>".concat(void 0!==e?e:"-","</b></div><br/>\n                <div class='ignsearchlocator-popup'><b>Lon: </b>").concat(o[1].toFixed(6)," </div>\n                <div class='ignsearchlocator-popup'><b>Lat: </b>").concat(o[0].toFixed(6),"</div>");var s=new M.Popup({panMapIfOutOfView:!r.fake});s.addTab(i),this.map.addPopup(s,[t[0],t[1]]),this.popup=s,a&&"pinAzul"===this.pointStyle?this.popup.getImpl().setOffset([0,-30]):a&&"pinRojo"===this.pointStyle?this.popup.getImpl().setOffset([2,-30]):a&&"pinMorado"===this.pointStyle&&this.popup.getImpl().setOffset([1,-20]),this.lat=t[1],this.lng=t[0]}},{key:"equals",value:function(e){return e instanceof t}},{key:"clearResults",value:function(){this.searchInput.value="",this.resultsBox.innerHTML="",this.searchValue="",this.reverse&&(this.reverseActivated=!1,this.html_.querySelector("#m-ignsearchlocator-locate-button").style.color="#7A7A73",document.removeEventListener("keyup",this.checkEscKey),document.getElementsByTagName("body")[0].style.cursor="auto"),this.map.removeLayers(this.clickedElementLayer),this.map.removePopup(this.map.getPopup())}},{key:"destroy",value:function(){document.getElementsByTagName("body")[0].style.cursor="auto",document.removeEventListener("keyup",this.checkEscKey),this.map.removeLayers(this.clickedElementLayer),this.map.removePopup(this.map.getPopup())}}])}(),O=o(4),T=o.n(O);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function R(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}function A(e,t,o){return t=I(t),function(e,t){if(t&&("object"==N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,o||[],I(e).constructor):t.apply(e,o))}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(){return j(this,t),A(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(t,M.impl.Control),o=t,(n=[{key:"reprojectReverse",value:function(e,t,o){return ol.proj.getTransform(t,o)(e)}}])&&k(o.prototype,n),r&&k(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,r}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return z(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw a}}}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function G(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function F(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U(t)?t:t+""}function V(e,t,o){return t=H(t),function(e,t){if(t&&("object"==U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,o||[],H(e).constructor):t.apply(e,o))}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){function t(e,o,n,r,a){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M.utils.isUndefined(D)&&M.exception(S("exception.impl_infocatastro"));(i=V(this,t,[new D,"InfoCatastroImpl"])).CMC_url=r.CMC_url||"http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCallejeroCodigos.asmx/ConsultaMunicipioCodigos";i.DNPPP_url=r.DNPPP_url||"http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCallejeroCodigos.asmx/Consulta_DNPPP_Codigos";return i.CPMRC_url=r.CPMRC_url||"http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCoordenadas.asmx/Consulta_CPMRC",i.cadastreWMS=r.cadastreWMS||"http://ovc.catastro.meh.es/ovcservweb/OVCSWLocalizacionRC/OVCCoordenadas.asmx/Consulta_RCCOOR",i.zoom=o,i.pointStyle=n,i.map=e,i.provincecode=null,i.selectProvincias=null,i.selectMunicipios=null,i.inputPoligono=null,i.inputParcela=null,i.inputRefCatastral=null,i.positionPlugin=a,i.tabs=null,i.tabpanels=null,i.activeTab=null,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(t,M.Control),function(e,t,o){return t&&G(e.prototype,t),o&&G(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"active",value:function(e){var t=this;this.html_=e;var o=e.querySelector("#m-locator-infocatastro").classList.contains("activated");if(this.deactive(),!o){"TC"===this.positionPlugin&&(document.querySelector(".m-plugin-locator").classList.remove("m-plugin-locator-tc"),document.querySelector(".m-plugin-locator").classList.add("m-plugin-locator-tc-withpanel")),this.html_.querySelector("#m-locator-infocatastro").classList.add("activated");var n=M.template.compileSync(T.a,{vars:{translations:{plot:S("plot"),searchplot:S("searchplot"),searchcadastre:S("searchcadastre"),province:S("province"),selectprov:S("selectprov"),municipality:S("municipality"),selectmuni:S("selectmuni"),estate:S("estate"),search:S("search"),clean:S("clean"),refCastatro:S("refCastatro"),insertCadastre:S("insertCadastre"),notaRef:S("notaRef"),consultReference:S("consultReference")}}});document.querySelector("#div-contenedor-locator").appendChild(n),this.tabs=this.html_.querySelectorAll("[role=tab]"),this.activeTab=this.html_.querySelector("[role=tab][aria-selected=true]"),this.tabpanels=this.html_.querySelectorAll("[role=tabpanel]");var r,a=B(this.tabs);try{var i=function(){var e=r.value;e.addEventListener("click",(function(o){o.preventDefault(),t.setActiveTab(e.getAttribute("aria-controls"))})),e.addEventListener("keyup",(function(o){13!==o.keyCode&&32!==o.keyCode||(o.preventDefault(),t.setActiveTab(e.getAttribute("aria-controls")))}))};for(a.s();!(r=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}this.initParams(),this.html_.querySelector("button#m-infocatastro-searchParams").addEventListener("click",(function(e){return t.onParamsSearch(e)})),this.html_.querySelector("button#m-infocatastro-parcela-limpiar").addEventListener("click",(function(){return t.clearResults(!0,!1)})),this.html_.querySelector("button#m-infocatastro-refCatastral").addEventListener("click",this.onRCSearch.bind(this)),this.html_.querySelector("button#m-infocatastro-consulRef").addEventListener("click",this.onRCConsult.bind(this)),this.html_.querySelector("button#m-infocatastro-catastro-limpiar").addEventListener("click",(function(){return t.clearResults(!1,!0)}))}}},{key:"setActiveTab",value:function(e){var t,o=B(this.tabs);try{for(o.s();!(t=o.n()).done;){var n=t.value;n.getAttribute("aria-controls")===e?(n.setAttribute("aria-selected","true"),n.focus(),this.activeTab=n):n.setAttribute("aria-selected","false")}}catch(e){o.e(e)}finally{o.f()}var r,a=B(this.tabpanels);try{for(a.s();!(r=a.n()).done;){var i=r.value;i.getAttribute("id")===e?i.setAttribute("aria-expanded","true"):i.setAttribute("aria-expanded","false")}}catch(e){a.e(e)}finally{a.f()}}},{key:"deactive",value:function(){this.html_.querySelector("#m-locator-infocatastro").classList.remove("activated");var e=this.html_.querySelector("#m-infocatastro-panel");e&&(this.clearResults(!0,!0),document.querySelector("#div-contenedor-locator").removeChild(e))}},{key:"initParams",value:function(){var e=this;this.selectProvincias=this.html_.querySelector("#m-infocatastro-coordinatesSystemParcela>select#m-searchParamsProvincia-select"),this.selectProvincias.addEventListener("change",(function(t){return e.onProvinciaSelect(t,null)})),null!==this.provincecode&&this.onProvinciaSelect(null,this.provincecode,this.selectMunicipios),this.selectMunicipios=this.html_.querySelector("#m-infocatastro-coordinatesSystemParcela>select#m-searchParamsMunicipio-select"),this.inputPoligono=this.html_.querySelector("#m-infocatastro-estatePlot>#m-searchParamsPoligono-input"),this.inputParcela=this.html_.querySelector("#m-infocatastro-estatePlot>#m-searchParamsParcela-input"),this.inputRefCatastral=this.html_.querySelector("#m-infocatastro-coordinatesSystemRefCatastral>#m-refCatastral-input")}},{key:"clearResults",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){this.selectProvincias.value="0",this.provincecode="0",this.clearMunicipiosSelect(),this.inputPoligono.value=null,this.inputParcela.value=null;var o=this.map.getLayers().find((function(e){return"coordinateparcel"===e.name}));this.map.removeLayers(o)}if(t){this.inputRefCatastral.value=null;var n=this.map.getLayers().find((function(e){return"coordinatecatastro"===e.name}));this.map.removeLayers(n),this.map.removePopup(this.map.getPopup())}}},{key:"destroy",value:function(){this.html_&&this.html_.querySelector("button#m-infocatastro-consulRef")&&this.html_.querySelector("button#m-infocatastro-consulRef").removeEventListener("click",this.onRCConsult);var e=this.map.getLayers().filter((function(e){return"coordinatecatastro"===e.name||"coordinateparcel"===e.name}));this.map.removeLayers(e),this.map.removePopup(this.map.getPopup())}},{key:"onProvinciaSelect",value:function(e,t,o){var n=this,r=null;null!=e?r=e.target.value:r=t;this.clearMunicipiosSelect(),"0"!==r&&M.remote.get(this.CMC_url,{CodigoProvincia:r,CodigoMunicipio:"",CodigoMunicipioIne:""}).then((function(e){n.loadMunicipiosSelect(e,o)}))}},{key:"clearMunicipiosSelect",value:function(){for(this.selectMunicipios=this.html_.querySelector("#m-infocatastro-coordinatesSystemParcela>select#m-searchParamsMunicipio-select");this.selectMunicipios.firstChild;)this.selectMunicipios.removeChild(this.selectMunicipios.firstChild);var e=document.createElement("option");e.value="0",e.innerHTML=S("selectmuni"),this.selectMunicipios.appendChild(e)}},{key:"loadMunicipiosSelect",value:function(e,t){if(200===e.code&&!1===e.error){for(var o=e.xml.getElementsByTagName("consulta_municipiero")[0].getElementsByTagName("municipiero")[0].getElementsByTagName("muni"),n=0;n<o.length;n+=1){var r=document.createElement("option"),a=o[n].getElementsByTagName("locat")[0];r.value=a.getElementsByTagName("cmc")[0].childNodes[0].nodeValue,r.innerHTML=o[n].getElementsByTagName("nm")[0].childNodes[0].nodeValue,this.selectMunicipios.appendChild(r)}null!=t&&(this.selectMunicipios.value=this.municipalityvalue)}else M.dialog.error(S("exception.mapeaerror"))}},{key:"onParamsSearch",value:function(e){var t=this;if(e.preventDefault(),this.clearResults(!1,!0),this.inputPoligono=this.html_.querySelector("#m-infocatastro-estatePlot>#m-searchParamsPoligono-input"),this.inputParcela=this.html_.querySelector("#m-infocatastro-estatePlot>#m-searchParamsParcela-input"),"keyup"!==e.type||13===e.keyCode){if(M.utils.isNullOrEmpty(this.selectProvincias.value)||"0"===this.selectProvincias.value)return void M.dialog.info(S("exception.no_province"));if(M.utils.isNullOrEmpty(this.selectMunicipios.value)||"0"===this.selectMunicipios.value)return void M.dialog.info(S("exception.no_mun"));if(M.utils.isNullOrEmpty(this.inputPoligono.value))return void M.dialog.info(S("exception.no_polygon"));if(M.utils.isNullOrEmpty(this.inputParcela.value))return void M.dialog.info(S("exception.no_parcel"));var o=M.utils.addParameters(this.DNPPP_url,{CodigoProvincia:this.selectProvincias.value,CodigoMunicipio:this.selectMunicipios.value,CodigoMunicipioINE:"",Poligono:this.inputPoligono.value,Parcela:this.inputParcela.value});M.remote.get(o).then((function(e){t.acceptOVCSW(e)&&t.parseParamsResultsForTemplate_(e.xml)}))}}},{key:"acceptOVCSW",value:function(e){var t=!0;try{if(200===e.code&&!1===e.error){var o=e.xml.childNodes[0],n=o.getElementsByTagName("control")[0].getElementsByTagName("cuerr")[0],r="0";if(void 0!==n&&(r=n.childNodes[0].nodeValue),"1"===r){var a=o.getElementsByTagName("lerr")[0].getElementsByTagName("err")[0].getElementsByTagName("des")[0].childNodes[0].nodeValue;t=!1,M.dialog.info(a)}}else t=!1,M.dialog.error(S("exception.mapeaerror"))}catch(e){t=!1,M.exception("".concat(S("exception.json_invalid")," ").concat(e,"."))}return t}},{key:"parseParamsResultsForTemplate_",value:function(e){var t,o=this,n=e.getElementsByTagName("consulta_dnp")[0],r=n.getElementsByTagName("lrcdnp");r.length>0?t=r[0].getElementsByTagName("rcdnp")[0].getElementsByTagName("rc")[0]:t=n.getElementsByTagName("bico")[0].getElementsByTagName("bi")[0].getElementsByTagName("idbi")[0].getElementsByTagName("rc")[0];var a=t.getElementsByTagName("pc1")[0].childNodes[0].nodeValue,i=t.getElementsByTagName("pc2")[0].childNodes[0].nodeValue,s=M.utils.addParameters(this.CPMRC_url,{Provincia:"",Municipio:"",SRS:this.map.getProjection().code,RC:a+i});return M.remote.get(s).then((function(e){if(o.acceptOVCSW(e)){var t=o.parseCPMRCResults(e.xml),n=t.coords[0].xcen,r=t.coords[0].ycen;o.locator_([n,r],"parcel")}}))}},{key:"parseCPMRCResults",value:function(e){var t=e.getElementsByTagName("consulta_coordenadas")[0].getElementsByTagName("coordenadas")[0].getElementsByTagName("coord")[0],o=t.getElementsByTagName("pc")[0],n=o.getElementsByTagName("pc1")[0].childNodes[0].nodeValue,r=o.getElementsByTagName("pc2")[0].childNodes[0].nodeValue,a=t.getElementsByTagName("geo")[0],i=a.getElementsByTagName("xcen")[0].childNodes[0].nodeValue,s=a.getElementsByTagName("ycen")[0].childNodes[0].nodeValue,l=a.getElementsByTagName("srs")[0].childNodes[0].nodeValue;return{attributes:[{key:"Referencia Catastral",value:n+r},{key:"Descripción",value:t.getElementsByTagName("ldt")[0].childNodes[0].nodeValue}],rcId:"rc_".concat(n).concat(r),coords:[{xcen:i,ycen:s,srs:l}]}}},{key:"locator_",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cadastre",o=e[0],n=e[1],r=parseFloat(o),a=parseFloat(n);if(this.map.removeLayers(this.coordinatesLayer),Number.isNaN(r)||Number.isNaN(a))M.dialog.error(S("exception.wrong_coords"),"Error");else{this.map.setCenter("".concat(r,",").concat(a,"*false")),this.map.setZoom(this.zoom),this.fire("infocatastro:locationCentered",[{zoom:this.zoom,center:[r,a]}]),this.coordinatesLayer=new M.layer.Vector({name:"cadastre"===t?"coordinatecatastro":"coordinateparcel"},{displayInLayerSwitcher:!1});var i=new M.Feature("localizacion",{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[r,a]}});this.coordinatesLayer.addFeatures([i]),this.createGeometryStyles()}}},{key:"createGeometryStyles",value:function(){var e={radius:8,fill:{color:"#f00",opacity:.5},stroke:{color:"#f00",opacity:1,width:3}};"pinAzul"===this.pointStyle?e={radius:5,icon:{src:M.utils.concatUrlPaths([M.config.THEME_URL,"/img/marker.svg"]),scale:1.4,fill:{color:"#71a7d3"},stroke:{width:30,color:"white"},anchor:[.5,1]}}:"pinRojo"===this.pointStyle?e={radius:5,icon:{src:M.utils.concatUrlPaths([M.config.THEME_URL,"/img/pinign.svg"])}}:"pinMorado"===this.pointStyle&&(e={radius:5,icon:{src:M.utils.concatUrlPaths([M.config.THEME_URL,"/img/m-pin-24.svg"])}}),this.coordinatesLayer.setStyle(new M.style.Point(e)),this.coordinatesLayer.setZIndex(1e19),this.map.addLayers(this.coordinatesLayer)}},{key:"onRCSearch",value:function(e){var t=this;e.preventDefault(),this.clearResults(!0,!1),this.inputRefCatastral=this.html_.querySelector("#m-infocatastro-coordinatesSystemRefCatastral>#m-refCatastral-input");var o=this.inputRefCatastral.value.trim();if("keyup"!==e.type||13===e.keyCode)if(M.utils.isNullOrEmpty(o))M.dialog.info(S("exception.no_refcatastro"));else{o=o.substr(0,14);var n=M.utils.addParameters(this.CPMRC_url,{Provincia:"",Municipio:"",SRS:this.map.getProjection().code,RC:o});M.remote.get(n).then((function(e){if(t.acceptOVCSW(e)){var n=t.parseCPMRCResults(e.xml);t.rcResults_=[n];var r={docs:t.rcResults_,total:t.rcResults_.length,partial:!1,notResutls:!1,query:o};Promise.resolve(r).then((function(e){t.drawGeocoderResultRC(e)}))}}))}}},{key:"drawGeocoderResultRC",value:function(e){var t=e.docs[0];this.coordinates="".concat(t.coords[0].xcen,", ").concat(t.coords[0].ycen);var o=[parseFloat(t.coords[0].xcen),parseFloat(t.coords[0].ycen)];this.locator_(o,this.point);var n=t.attributes[1].value,r=this.map.getProjection().code,a=this.getImpl().reprojectReverse([o[0],o[1]],r,"EPSG:4326"),i=S("exact");this.showPopUp(n,o,a,i,{fake:!0});var s=o[1],l=parseFloat(o[0]),c=parseFloat(s);this.map.setCenter("".concat(l,",").concat(c,"*false"))}},{key:"showPopUp",value:function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a={content:"",title:""};null!==n&&(a.content+="<div><b>".concat(n,"</b></div>")),a.content+="<div><b>".concat(void 0!==e?e:"-","</b></div><br/>\n                  <div class='ignsearchlocator-popup'><b>Lon:</b> ").concat(o[1].toFixed(6)," </div>\n                  <div class='ignsearchlocator-popup'><b>Lat:</b> ").concat(o[0].toFixed(6),"</div>\n                  ");var i=new M.Popup({panMapIfOutOfView:!r.fake});i.addTab(a),this.map.addPopup(i,[t[0],t[1]]),this.popup=i,"pinAzul"===this.pointStyle?this.popup.getImpl().setOffset([0,-30]):"pinRojo"===this.pointStyle?this.popup.getImpl().setOffset([2,-15]):"pinMorado"===this.pointStyle&&this.popup.getImpl().setOffset([1,-10]),this.lat=t[1],this.lng=t[0]}},{key:"onRCConsult",value:function(e){e.preventDefault(),document.body.style.cursor="crosshair",this.clearResults(!0,!0),this.map.on(M.evt.CLICK,this.buildUrl_,this)}},{key:"buildUrl_",value:function(e){var t=this,o=this.map.getProjection().code;M.remote.get(this.cadastreWMS,{SRS:o,Coordenada_X:e.coord[0],Coordenada_Y:e.coord[1]}).then((function(o){t.showInfoFromURL_(o,e.coord),t.map.un(M.evt.CLICK,t.buildUrl_,t),document.body.style.cursor=""}),{jsonp:!0})}},{key:"showInfoFromURL_",value:function(e,t){var o=this;if(200===e.code&&!1===e.error){var n=[],r=e.text,a=this.formatInfo_(r);n.push(a);var i={icon:"locator-icon-pin",title:this.POPUP_TITLE,content:n.join("")},s=this.map.getPopup();if(M.utils.isNullOrEmpty(s)||s.getCoordinate()[0]!==t[0]||s.getCoordinate()[1]!==t[1])(s=new M.Popup).addTab(i),this.map.addPopup(s,t);else{var l=!1;s.getTabs().forEach((function(e){e.title!==o.POPUP_TITLE?l=!0:s.removeTab(e)})),l?s.addTab(i):((s=new M.Popup).addTab(i),this.map.addPopup(s,t))}}else this.map.removePopup(),M.dialog.error(S("exception.mapeaerror"))}},{key:"formatInfo_",value:function(e){var t,o,n,r,a="",i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("consulta_coordenadas")[0];if("1"===i.getElementsByTagName("control")[0].getElementsByTagName("cuerr")[0].childNodes[0].nodeValue)o=S("exception.noInfo");else{var s=i.getElementsByTagName("coordenadas")[0].getElementsByTagName("coord")[0],l=s.getElementsByTagName("pc")[0],c=l.getElementsByTagName("pc1")[0].childNodes[0].nodeValue,u=l.getElementsByTagName("pc2")[0].childNodes[0].nodeValue;n=c.substring(0,2),r=c.substring(2,5),t=s.getElementsByTagName("ldt")[0].childNodes[0].nodeValue,o=c+u,a="https://www1.sedecatastro.gob.es/CYCBienInmueble/OVCListaBienes.aspx?del==".concat(n,"&mun=").concat(r,"&rc1=").concat(c,"&rc2=").concat(u)}var p="".concat(M.utils.beautifyAttribute(S("cadastral_information")),"\n    <div class='divinfo'>\n    <table class='mapea-table'>\n    <tbody>\n    <tr><td class='header' colspan='4'></td></tr>\n    <tr><td class='key'><b>").concat(M.utils.beautifyAttribute(S("reference")),"</b></td><td class='value'></b>\n    <a href='").concat(a,"' target='_blank'>").concat(o,"</a></td></tr>\n    <tr><td class='key'><b>").concat(M.utils.beautifyAttribute(S("description")),"</b></td>\n    <td class='value'>").concat(t,"</td></tr>\n    </tbody></table></div>");return o.toLowerCase().indexOf(S("noReference"))>-1&&(p="".concat(M.utils.beautifyAttribute(S("cadastral_information")),"\n      <div class='divinfo'>\n      <table class='mapea-table'>\n      <tbody>\n      <tr><td class='header' colspan='4'></td></tr>\n      <tr><td class='key' colspan='4'><b>").concat(o,"</b></td></tr>\n      </tbody></table>\n      </div>")),p}},{key:"equals",value:function(e){return e instanceof t}}])}(),J=(o(8),o(5)),Z=o.n(J);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$(n.key),n)}}function $(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}function ee(e,t,o){return t=ne(t),function(e,t){if(t&&("object"==K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,o||[],ne(e).constructor):t.apply(e,o))}function te(){return(te="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,o){var n=oe(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?e:o):r.value}}).apply(null,arguments)}function oe(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ne(e)););return e}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ae=function(e){function t(){return Q(this,t),ee(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(t,M.impl.Control),o=t,(n=[{key:"addTo",value:function(e,o){te(ne(t.prototype),"addTo",this).call(this,e,o),this.facadeMap_=e}}])&&X(o.prototype,n),r&&X(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,r}(),ie=o(6),se=o.n(ie);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ue(n.key),n)}}function ue(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==le(t)?t:t+""}function pe(e,t,o){return t=de(t),function(e,t){if(t&&("object"==le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,o||[],de(e).constructor):t.apply(e,o))}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var me=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=pe(this,t)).facadeMap_=e,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(t,M.impl.Control),o=t,(n=[{key:"reproject",value:function(e,t){var o=ol.proj.get(e),n=ol.proj.get(this.facadeMap_.getProjection().code),r=ol.proj.transform(t,o,n);return r=[this.normalizeNumber(t[0],r[0]),this.normalizeNumber(t[1],r[1])]}},{key:"normalizeNumber",value:function(e,t){var o=e;return 0!==e&&(o=parseFloat(t.toFixed(9))),o}}])&&ce(o.prototype,n),r&&ce(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,r}();function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ve(n.key),n)}}function ve(e){var t=function(e,t){if("object"!=ye(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ye(t)?t:t+""}function ge(e,t,o){return t=be(t),function(e,t){if(t&&("object"==ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,o||[],be(e).constructor):t.apply(e,o))}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Pe=function(e){function t(e,o,n,r,a){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M.utils.isUndefined(me)&&M.exception(S("exception.impl_xylocator")),(i=ge(this,t,[new me(e),"XYLocatorImpl"])).projections=r.projections,i.zoom=o,i.pointStyle=n,i.help=r.help,i.map=e,i.positionPlugin=a,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}(t,M.Control),o=t,(n=[{key:"active",value:function(e){var t=this;this.html_=e;var o=this.html_.querySelector("#m-locator-xylocator").classList.contains("activated");if(this.deactive(),!o){"TC"===this.positionPlugin&&(document.querySelector(".m-plugin-locator").classList.remove("m-plugin-locator-tc"),document.querySelector(".m-plugin-locator").classList.add("m-plugin-locator-tc-withpanel")),this.html_.querySelector("#m-locator-xylocator").classList.add("activated");var n=M.template.compileSync(se.a,{vars:{hasHelp:!M.utils.isUndefined(this.help)&&M.utils.isUrl(this.help),helpUrl:this.help,projections:this.projections,translations:{srs:S("srs"),longitude:S("longitude"),latitude:S("latitude"),locate:S("locate"),clean:S("clean"),east:S("east"),west:S("west"),north:S("north"),south:S("south"),geographic:S("geographic"),zone:S("zone"),dms:S("dms"),dd:S("dd")}}});document.querySelector("#div-contenedor-locator").appendChild(n),this.html_.querySelector("button#m-xylocator-limpiar").addEventListener("click",(function(){return t.clearResults()})),this.html_.querySelector("select#m-xylocator-srs").addEventListener("change",(function(e){return t.manageInputs_(e)})),this.html_.querySelector("button#m-xylocator-loc").addEventListener("click",(function(e){return t.calculate_()}))}}},{key:"deactive",value:function(){this.html_.querySelector("#m-locator-xylocator").classList.remove("activated");var e=this.html_.querySelector("#m-xylocator-panel");e&&(this.clearResults(),document.querySelector("#div-contenedor-locator").removeChild(e))}},{key:"equals",value:function(e){return e instanceof t}},{key:"clearResults",value:function(){this.html_.querySelector("input#UTM-X").value="",this.html_.querySelector("input#UTM-Y").value="",this.html_.querySelector("input#LON").value="",this.html_.querySelector("input#LAT").value="",this.html_.querySelector("input#LONHH").value=0,this.html_.querySelector("input#LONMM").value=0,this.html_.querySelector("input#LONSS").value=0,this.html_.querySelector("input#LATHH").value=0,this.html_.querySelector("input#LATMM").value=0,this.html_.querySelector("input#LATSS").value=0,this.map.removeLayers(this.coordinatesLayer)}},{key:"manageInputs_",value:function(e){var t=e.target,o=t.options[t.selectedIndex];this.html_.querySelector("div#m-xylocator-utm").style.display="none",this.html_.querySelector("div#m-xylocator-dms").style.display="none",this.html_.querySelector("div#m-xylocator-latlon").style.display="none","d"===o.getAttribute("data-units")?this.html_.querySelector("div#m-xylocator-latlon").style.display="block":"dms"===o.getAttribute("data-units")?this.html_.querySelector("div#m-xylocator-dms").style.display="block":this.html_.querySelector("div#m-xylocator-utm").style.display="block"}},{key:"calculate_",value:function(){try{var e,t=this.html_.querySelector("select#m-xylocator-srs"),o=t.options[t.selectedIndex],n=o.value,r=o.getAttribute("data-units"),a=-1,i=-1;if("dms"!==r){e="d"===r?["input#LON","input#LAT"]:["input#UTM-X","input#UTM-Y"];var s=this.html_.querySelector(e[0]).value.replace(",","."),l=this.html_.querySelector(e[1]).value.replace(",",".");a=parseFloat(s),i=parseFloat(l)}else{var c=this.html_.querySelector("input#LONHH").value,u=this.html_.querySelector("input#LONMM").value,p=this.html_.querySelector("input#LONSS").value,d=this.html_.querySelector('input[name="LONDIR"]:checked').value,h=this.html_.querySelector("input#LATHH").value,m=this.html_.querySelector("input#LATMM").value,y=this.html_.querySelector("input#LATSS").value,f=this.html_.querySelector('input[name="LATDIR"]:checked').value;this.checkDegreeValue_(u)&&this.checkDegreeValue_(p)&&this.checkDegreeValue_(m)&&this.checkDegreeValue_(y)&&parseFloat(c)>=0&&parseFloat(c)<=180&&parseFloat(h)>=0&&parseFloat(h)<=180?(a=parseFloat(c)+parseFloat(u)/60+parseFloat(p)/3600,i=parseFloat(h)+parseFloat(m)/60+parseFloat(y)/3600,"east"!==d&&0!==a&&(a=-a),"north"!==f&&0!==i&&(i=-i)):M.dialog.error(S("exception.wrong_values"),"Error")}try{var v=this.getImpl().reproject(n,[a,i]);this.locator_(v)}catch(e){M.dialog.error(S("exception.transforming"),"Error")}}catch(e){throw M.dialog.error(S("exception.wrong_coords"),"Error"),e}}},{key:"locator_",value:function(e){var t=parseFloat(e[0]),o=parseFloat(e[1]);if(this.map.removeLayers(this.coordinatesLayer),Number.isNaN(t)||Number.isNaN(o))M.dialog.error(S("exception.wrong_coords"),"Error");else{this.map.setCenter("".concat(t,",").concat(o,"*false")),this.map.setZoom(this.zoom),this.fire("xylocator:locationCentered",[{zoom:this.zoom,center:[t,o]}]),this.coordinatesLayer=new M.layer.Vector({name:"coordinatexylocator"},{displayInLayerSwitcher:!1});var n=new M.Feature("localizacion",{type:"Feature",properties:{},geometry:{type:"Point",coordinates:[t,o]}});this.coordinatesLayer.addFeatures([n]),this.createGeometryStyles(),this.map.addLayers(this.coordinatesLayer)}}},{key:"createGeometryStyles",value:function(){var e={radius:8,fill:{color:"#f00",opacity:.5},stroke:{color:"#f00",opacity:1,width:3}};"pinAzul"===this.pointStyle?e={radius:5,icon:{src:M.utils.concatUrlPaths([M.config.THEME_URL,"/img/marker.svg"]),scale:1.4,fill:{color:"#71a7d3"},stroke:{width:30,color:"white"},anchor:[.5,1]}}:"pinRojo"===this.pointStyle?e={radius:5,icon:{src:M.utils.concatUrlPaths([M.config.THEME_URL,"/img/pinign.svg"])}}:"pinMorado"===this.pointStyle&&(e={radius:5,icon:{src:M.utils.concatUrlPaths([M.config.THEME_URL,"/img/m-pin-24.svg"])}}),this.coordinatesLayer.setStyle(new M.style.Point(e))}},{key:"checkDegreeValue_",value:function(e){return parseFloat(e)>=0&&parseFloat(e)<60}},{key:"destroy",value:function(){this.map.removeLayers(this.coordinatesLayer)}}])&&fe(o.prototype,n),r&&fe(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,r}();function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ce(n.key),n)}}function Ce(e){var t=function(e,t){if("object"!=Me(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=Me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Me(t)?t:t+""}function xe(e,t,o){return t=_e(t),function(e,t){if(t&&("object"==Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,o||[],_e(e).constructor):t.apply(e,o))}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Le=function(e){function t(e,o,n,r,a,i,s,l,c,u){var p;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M.utils.isUndefined(ae)&&M.exception(S("exception.impl")),(p=xe(this,t,[new ae,"Locator"])).byCoordinates_=r,p.byParcelCadastre_=a,p.byPlaceAddressPostal_=i,p.isDraggable_=e,p.zoom_=o,p.pointStyle_=n,p.order=s,p.useProxy=l,p.statusProxy=c,p.position=u||"TR",p.control=null,p}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(t,M.Control),o=t,(n=[{key:"createView",value:function(e){var t=this;return this.map_=e,new Promise((function(e,o){var n=M.template.compileSync(Z.a,{vars:{showTitle:"TC"!==t.position,byParcelCadastre:t.byParcelCadastre_,byCoordinates:t.byCoordinates_,byPlaceAddressPostal:t.byPlaceAddressPostal_,translations:{headertitle:S("tooltip"),infocatastro:S("infocatastro"),xylocator:S("xylocator"),ignsearch:S("ignsearch")}}});t.html=n,t.byParcelCadastre_&&(t.infocatastroControl=new W(t.map_,t.zoom_,t.pointStyle_,t.byParcelCadastre_,t.position),n.querySelector("#m-locator-infocatastro").addEventListener("click",(function(){t.deactive(n,"infocatastro"),t.infocatastroControl.active(n),t.control=t.infocatastroControl})),n.querySelector("#m-locator-infocatastro").addEventListener("keydown",(function(e){"Enter"===e.key&&(t.deactive(n,"infocatastro"),t.infocatastroControl.active(n),t.control=t.infocatastroControl)})),t.infocatastroControl.on("infocatastro:locationCentered",(function(e){t.fire("infocatastro:locationCentered",e)}))),t.byCoordinates_&&(t.xylocatorControl=new Pe(t.map_,t.zoom_,t.pointStyle_,t.byCoordinates_,t.position),n.querySelector("#m-locator-xylocator").addEventListener("click",(function(){t.deactive(n,"xylocator"),t.xylocatorControl.active(n),t.control=t.xylocatorControl})),n.querySelector("#m-locator-xylocator").addEventListener("keydown",(function(e){"Enter"===e.key&&(t.deactive(n,"xylocator"),t.xylocatorControl.active(n),t.control=t.xylocatorControl)})),t.xylocatorControl.on("xylocator:locationCentered",(function(e){t.fire("xylocator:locationCentered",e)}))),t.byPlaceAddressPostal_&&(t.ignsearchControl=new L(t.map_,t.zoom_,t.pointStyle_,t.byPlaceAddressPostal_,t.useProxy,t.statusProxy,t.position),t.on(M.evt.ADDED_TO_MAP,(function(){t.ignsearchControl.initializateAddress(n),t.control=t.ignsearchControl,"TC"===t.position&&!1!==t.byPlaceAddressPostal_&&(document.querySelector(".m-plugin-locator").classList.add("m-plugin-locator-tc"),n.querySelector("#m-locator-ignsearch").click())})),n.querySelector("#m-locator-ignsearch").addEventListener("click",(function(){t.deactive(n,"ignsearch"),t.ignsearchControl.active(n),t.control=t.ignsearchControl})),n.querySelector("#m-locator-ignsearch").addEventListener("keydown",(function(e){"Enter"===e.key&&(t.deactive(n,"ignsearch"),t.ignsearchControl.active(n),t.control=t.ignsearchControl)})),t.ignsearchControl.on("ignsearchlocator:entityFound",(function(e){t.fire("ignsearchlocator:entityFound",[e])}))),t.isDraggable_&&M.utils.draggabillyPlugin(t.getPanel(),"#m-locator-title"),t.accessibilityTab(n),e(n)}))}},{key:"equals",value:function(e){return e instanceof t}},{key:"deactive",value:function(e,t){var o=e.querySelectorAll("#m-locator-previews .activated")[0];if("TC"===this.position&&(document.querySelector(".m-plugin-locator").classList.remove("m-plugin-locator-tc-withpanel"),document.querySelector(".m-plugin-locator").classList.add("m-plugin-locator-tc")),o&&!o.id.includes(t)){this.control.clearResults(),o.classList.remove("activated");var n=document.querySelector("#div-contenedor-locator");"TC"===this.position&&n&&n.children.length>1?n.removeChild(n.children[1]):n&&n.children.length>2&&n.removeChild(n.children[2])}}},{key:"accessibilityTab",value:function(e){var t=this;e.querySelectorAll('[tabindex="0"]').forEach((function(e){return e.setAttribute("tabindex",t.order)}))}},{key:"destroy",value:function(){M.utils.isNullOrEmpty(this.infocatastroControl)||this.infocatastroControl.destroy(),M.utils.isNullOrEmpty(this.ignsearchControl)||this.ignsearchControl.destroy(),M.utils.isNullOrEmpty(this.xylocatorControl)||this.xylocatorControl.destroy()}}])&&we(o.prototype,n),r&&we(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,r}(),Oe=o(7),Te=o.n(Oe);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Re(n.key),n)}}function Re(e){var t=function(e,t){if("object"!=Ne(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ne(t)?t:t+""}function Ae(e,t,o){return t=Ie(t),function(e,t){if(t&&("object"==Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,o||[],Ie(e).constructor):t.apply(e,o))}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var De=function(e){function t(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return je(this,t),(e=Ae(this,t)).map_=null,e.controls_=[],e.name="locator",e.options=o,e.position_=o.position||"TR",e.collapsed=!!M.utils.isUndefined(o.collapsed)||o.collapsed,e.collapsible=!!M.utils.isUndefined(o.collapsible)||o.collapsible,e.tooltip_=o.tooltip||S("tooltip"),e.isDraggable=!M.utils.isUndefined(o.isDraggable)&&o.isDraggable,e.zoom=o.zoom||16,e.pointStyle=o.pointStyle||"pinAzul",e.byParcelCadastre=M.utils.isUndefined(o.byParcelCadastre)||!0===o.byParcelCadastre?e.getInfoCatastro():o.byParcelCadastre,e.byCoordinates=M.utils.isUndefined(o.byCoordinates)||!0===o.byCoordinates?e.getXYLocator():o.byCoordinates,e.byPlaceAddressPostal=M.utils.isUndefined(o.byPlaceAddressPostal)||!0===o.byPlaceAddressPostal?e.getIGNSearchLocator():o.byPlaceAddressPostal,e.order=o.order>=-1?o.order:null,e.useProxy=!!M.utils.isUndefined(o.useProxy)||o.useProxy,e.statusProxy=M.useproxy,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(t,M.Plugin),o=t,r=[{key:"getJSONTranslations",value:function(e){return"en"===e||"es"===e?"en"===e?y:f:M.language.getTranslation(e).locator}}],(n=[{key:"addTo",value:function(e){!1===this.byCoordinates&&!1===this.byParcelCadastre&&!1===this.byPlaceAddressPostal&&M.dialog.error(S("exception.no_controls")),this.controls_.push(new Le(this.isDraggable,this.zoom,this.pointStyle,this.byCoordinates,this.byParcelCadastre,this.byPlaceAddressPostal,this.order,this.useProxy,this.statusProxy,this.position_)),this.map_=e,"TC"===this.position_&&(this.collapsible=!1),this.panel_=new M.ui.Panel("panelLocator",{collapsible:this.collapsible,collapsed:this.collapsed,position:M.ui.position[this.position_],className:"m-plugin-locator",tooltip:this.tooltip_,collapsedButtonClass:"locator-icon-localizacion2",order:this.order}),this.panel_.addControls(this.controls_),e.addPanels(this.panel_)}},{key:"getInfoCatastro",value:function(){return{cadastreWMS:"",CMC_url:"",DNPPP_url:"",CPMRC_url:""}}},{key:"getXYLocator",value:function(){return{projections:[{title:"ETRS89 ".concat(S("geographic")," (4258) ").concat(S("dd")),code:"EPSG:4258",units:"d"},{title:"WGS84 ".concat(S("geographic")," (4326) ").concat(S("dd")),code:"EPSG:4326",units:"d"},{title:"ETRS89 ".concat(S("geographic")," (4258) ").concat(S("dms")),code:"EPSG:4258",units:"dms"},{title:"WGS84 ".concat(S("geographic")," (4326) ").concat(S("dms")),code:"EPSG:4326",units:"dms"},{title:"WGS84 Pseudo Mercator (3857)",code:"EPSG:3857",units:"m"},{title:"ETRS89 UTM ".concat(S("zone")," 31N (25831)"),code:"EPSG:25831",units:"m"},{title:"ETRS89 UTM ".concat(S("zone")," 30N (25830)"),code:"EPSG:25830",units:"m"},{title:"ETRS89 UTM ".concat(S("zone")," 29N (25829)"),code:"EPSG:25829",units:"m"},{title:"ETRS89 UTM ".concat(S("zone")," 28N (25828)"),code:"EPSG:25828",units:"m"}],help:""}}},{key:"getIGNSearchLocator",value:function(){return{maxResults:20,noProcess:"",countryCode:"",reverse:!0,resultVisibility:!0,urlCandidates:"",urlFind:"",urlReverse:""}}},{key:"getAPIRest",value:function(){return"".concat(this.name,"=").concat(this.position_,"*").concat(this.collapsed,"*").concat(this.collapsible,"*").concat(this.tooltip_,"*").concat(this.zoom,"*").concat(this.pointStyle,"\n    *").concat(this.isDraggable,"*").concat(this.byParcelCadastre,"*").concat(this.byCoordinates,"*").concat(this.byPlaceAddressPostal,"*").concat(this.useProxy)}},{key:"getAPIRestBase64",value:function(){return"".concat(this.name,"=base64=").concat(M.utils.encodeBase64(this.options))}},{key:"destroy",value:function(){this.map_.removeControls(this.controls_),this.map_=null,this.controls_=null,this.panel_=null,this.name=null}},{key:"equals",value:function(e){return e instanceof t}},{key:"getHelp",value:function(){return{title:this.name,content:new Promise((function(e){e(M.template.compileSync(Te.a,{vars:{urlImages:"".concat(M.config.MAPEA_URL,"plugins/locator/images/"),translations:{help1:S("textHelp.help1"),help2:S("textHelp.help2"),help3:S("textHelp.help3"),help4:S("textHelp.help4"),help5:S("textHelp.help5"),help6:S("textHelp.help6"),help7:S("textHelp.help7"),help8:S("textHelp.help8"),help9:S("textHelp.help9"),help10:S("textHelp.help10"),help11:S("textHelp.help11"),help12:S("textHelp.help12"),help13:S("textHelp.help13"),help14:S("textHelp.help14"),help15:S("textHelp.help15")}}}))}))}}}])&&ke(o.prototype,n),r&&ke(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,r}();window.M.control||(window.M.control={}),window.M.plugin||(window.M.plugin={}),window.M.impl||(window.M.impl={}),window.M.impl.control||(window.M.impl.control={}),window.M.control.IGNSearchLocatorControl=L,window.M.control.InfoCatastroControl=W,window.M.plugin.Locator=De,window.M.control.LocatorControl=Le,window.M.control.XYLocatorControl=Pe,window.M.impl.control.IGNSearchLocatorControl=m,window.M.impl.control.InfoCatastroControl=D,window.M.impl.control.LocatorControl=ae,window.M.impl.control.XYLocatorControl=me}]);
//# sourceMappingURL=locator-1.2.0.ol.min.js.map